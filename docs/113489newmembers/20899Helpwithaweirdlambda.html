---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/20899Helpwithaweirdlambda.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html">Help with a weird lambda</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="171394085"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394085" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394085">Brendan Seamas Murphy (Jul 22 2019 at 00:23)</a>:</h4>
<p>Can someone give me a hand with proving the goal from <code>hAgree</code>?</p>
<div class="codehilite"><pre><span></span><span class="n">α</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">u</span><span class="o">,</span>
<span class="bp">_</span><span class="n">inst_1</span> <span class="o">:</span> <span class="n">topological_space</span> <span class="n">α</span><span class="o">,</span>
<span class="n">F</span> <span class="o">:</span> <span class="n">presheaf_of_ab_groups</span> <span class="n">α</span><span class="o">,</span>
<span class="n">U</span> <span class="o">:</span> <span class="n">opens</span> <span class="n">α</span><span class="o">,</span>
<span class="n">OC</span> <span class="o">:</span> <span class="n">covering</span> <span class="n">U</span><span class="o">,</span>
<span class="n">si</span> <span class="o">:</span> <span class="bp">Π</span> <span class="o">(</span><span class="n">i</span> <span class="o">:</span> <span class="n">OC</span><span class="bp">.</span><span class="n">γ</span><span class="o">),</span> <span class="err">⇑</span><span class="o">(</span><span class="n">sheafification</span><span class="bp">.</span><span class="n">pre</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">OC</span><span class="bp">.</span><span class="n">Uis</span> <span class="n">i</span><span class="o">),</span>
<span class="n">p</span> <span class="o">:</span> <span class="n">α</span><span class="o">,</span>
<span class="n">i</span> <span class="n">j</span> <span class="o">:</span> <span class="n">OC</span><span class="bp">.</span><span class="n">γ</span><span class="o">,</span>
<span class="n">hp1</span> <span class="o">:</span> <span class="n">p</span> <span class="err">∈</span> <span class="n">OC</span><span class="bp">.</span><span class="n">Uis</span> <span class="n">i</span><span class="o">,</span>
<span class="n">hp2</span> <span class="o">:</span> <span class="n">p</span> <span class="err">∈</span> <span class="n">OC</span><span class="bp">.</span><span class="n">Uis</span> <span class="n">j</span><span class="o">,</span>
<span class="n">a</span> <span class="o">:</span> <span class="err">⇑</span><span class="o">(</span><span class="n">sheafification</span><span class="bp">.</span><span class="n">pre</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">OC</span><span class="bp">.</span><span class="n">Uis</span> <span class="n">i</span><span class="o">),</span>
<span class="n">b</span> <span class="o">:</span> <span class="err">⇑</span><span class="o">(</span><span class="n">sheafification</span><span class="bp">.</span><span class="n">pre</span> <span class="n">F</span><span class="o">)</span> <span class="o">(</span><span class="n">OC</span><span class="bp">.</span><span class="n">Uis</span> <span class="n">j</span><span class="o">),</span>
<span class="n">hAgree</span> <span class="o">:</span>
  <span class="o">(</span><span class="bp">λ</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">p</span> <span class="err">∈</span> <span class="bp">⟨</span><span class="o">(</span><span class="n">OC</span><span class="bp">.</span><span class="n">Uis</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="err">∩</span> <span class="o">(</span><span class="n">OC</span><span class="bp">.</span><span class="n">Uis</span> <span class="n">j</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">),</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="n">p</span> <span class="bp">_</span><span class="o">)</span> <span class="bp">=</span>
    <span class="bp">λ</span> <span class="o">(</span><span class="n">p</span> <span class="o">:</span> <span class="n">α</span><span class="o">)</span> <span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">p</span> <span class="err">∈</span> <span class="bp">⟨</span><span class="o">(</span><span class="n">OC</span><span class="bp">.</span><span class="n">Uis</span> <span class="n">i</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span> <span class="err">∩</span> <span class="o">(</span><span class="n">OC</span><span class="bp">.</span><span class="n">Uis</span> <span class="n">j</span><span class="o">)</span><span class="bp">.</span><span class="n">val</span><span class="o">,</span> <span class="bp">_⟩</span><span class="o">),</span> <span class="n">b</span><span class="bp">.</span><span class="n">val</span> <span class="n">p</span> <span class="bp">_</span>
<span class="err">⊢</span> <span class="n">a</span><span class="bp">.</span><span class="n">val</span> <span class="n">p</span> <span class="n">hp1</span> <span class="bp">=</span> <span class="n">b</span><span class="bp">.</span><span class="n">val</span> <span class="n">p</span> <span class="n">hp2</span>
</pre></div>


<p>The details of what sheafification.pre is shouldn't matter, other than that it's a subtype of <code>Π (p ∈ U), stalk_of_ab_groups F p</code></p>

<a name="171394089"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394089" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394089">Brendan Seamas Murphy (Jul 22 2019 at 00:23)</a>:</h4>
<p>I've been trying for like half an hour but nothing has helped</p>

<a name="171394159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394159">Brendan Seamas Murphy (Jul 22 2019 at 00:25)</a>:</h4>
<p>Also  <code>p ∈ ⟨(OC.Uis i).val ∩ (OC.Uis j).val, _⟩</code> is definitionally equal to <code>p ∈ (OC.Uis i).val ∩ (OC.Uis j).val</code>, and those are just sets</p>

<a name="171394267"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394267" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394267">Kevin Buzzard (Jul 22 2019 at 00:29)</a>:</h4>
<p>Try <code>dsimp at hAgree</code>?</p>

<a name="171394329"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394329" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394329">Kevin Buzzard (Jul 22 2019 at 00:31)</a>:</h4>
<p>Oh the functions are equal so you can evaluate them both at p maybe</p>

<a name="171394332"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394332" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394332">Mario Carneiro (Jul 22 2019 at 00:31)</a>:</h4>
<p>yes this is the solution</p>

<a name="171394333"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394333" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394333">Kevin Buzzard (Jul 22 2019 at 00:31)</a>:</h4>
<p>You could use congr_arg or congr_fun</p>

<a name="171394335"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394335" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394335">Brendan Seamas Murphy (Jul 22 2019 at 00:31)</a>:</h4>
<p>dsimp doesn't work (neither does simp or dsimp *).  Is there a good way to get lean to evaluate both sides of a goal?</p>

<a name="171394336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394336">Brendan Seamas Murphy (Jul 22 2019 at 00:31)</a>:</h4>
<p>ah</p>

<a name="171394339"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394339" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394339">Kevin Buzzard (Jul 22 2019 at 00:32)</a>:</h4>
<p>I forget which one you want</p>

<a name="171394340"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394340" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394340">Mario Carneiro (Jul 22 2019 at 00:32)</a>:</h4>
<p><code>congr_fun (congr_fun hAgree p) hp1</code> should work</p>

<a name="171394382"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394382" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394382">Kevin Buzzard (Jul 22 2019 at 00:32)</a>:</h4>
<p>Feed it hAgree</p>

<a name="171394385"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394385" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394385">Kevin Buzzard (Jul 22 2019 at 00:32)</a>:</h4>
<p>Yeah that</p>

<a name="171394391"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394391" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394391">Kevin Buzzard (Jul 22 2019 at 00:32)</a>:</h4>
<p>Or something like that</p>

<a name="171394396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394396">Mario Carneiro (Jul 22 2019 at 00:32)</a>:</h4>
<p>the fact that <code>hp1</code> and <code>hp2</code> are not defeq seems a bit sketchy</p>

<a name="171394455"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394455" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394455">Mario Carneiro (Jul 22 2019 at 00:34)</a>:</h4>
<p>Oh I think you need to apply it to a proof that it's in the intersection, so <code>congr_fun (congr_fun hAgree p) &lt;hp1, hp2&gt;</code></p>

<a name="171394462"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394462" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394462">Mario Carneiro (Jul 22 2019 at 00:34)</a>:</h4>
<p>then the two underscore proofs applied to this should reduce to <code>hp1</code> and <code>hp2</code> respectively</p>

<a name="171394480"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171394480" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171394480">Brendan Seamas Murphy (Jul 22 2019 at 00:35)</a>:</h4>
<p>That worked, thanks</p>

<a name="171395237"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171395237" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171395237">Johan Commelin (Jul 22 2019 at 00:57)</a>:</h4>
<p><span class="user-mention" data-user-id="231775">@Brendan Seamas Murphy</span> Did you already know about subtypes before learning about sheafification?</p>

<a name="171395242"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171395242" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171395242">Johan Commelin (Jul 22 2019 at 00:58)</a>:</h4>
<p>Otherwise this seems to be a pretty hardcore way of learning Hartshorne (-;</p>

<a name="171395284"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171395284" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171395284">Brendan Seamas Murphy (Jul 22 2019 at 00:58)</a>:</h4>
<p>Yes</p>

<a name="171395294"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171395294" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171395294">Brendan Seamas Murphy (Jul 22 2019 at 00:59)</a>:</h4>
<p>I have formal verification background, I'm just rusty</p>

<a name="171395378"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171395378" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171395378">Johan Commelin (Jul 22 2019 at 01:01)</a>:</h4>
<p>Aha... well it's certainly a nice use of those old skills.</p>

<a name="171395420"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171395420" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171395420">Brendan Seamas Murphy (Jul 22 2019 at 01:02)</a>:</h4>
<p>There's so many little details to keep track of with sheaves that I figured I might as well try and have a computer keep track of them</p>

<a name="171415016"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/Help%20with%20a%20weird%20lambda/near/171415016" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/20899Helpwithaweirdlambda.html#171415016">Kevin Buzzard (Jul 22 2019 at 09:14)</a>:</h4>
<p>There has been some talk here about how best to implement sheaves in type theory and in some sense we still don't know the answer.</p>


{% endraw %}

{% include archive_update.html %}