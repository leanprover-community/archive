---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113489newmembers/58311Howtoprove2mmm22mmm2.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113489newmembers/index.html">new members</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113489newmembers/58311Howtoprove2mmm22mmm2.html">How to prove `(-2) * m * m + m ^ 2 ≤ (-2) * m * m' + m' ^ 2`</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="178292325"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20prove%20%60%28-2%29%20%2A%20m%20%2A%20m%20%2B%20m%20%5E%202%20%E2%89%A4%20%28-2%29%20%2A%20m%20%2A%20m%27%20%2B%20m%27%20%5E%202%60/near/178292325" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58311Howtoprove2mmm22mmm2.html#178292325">Marko Grdinić (Oct 16 2019 at 14:09)</a>:</h4>
<p>More specifically <code>example (m m' : rat) : (-2) * m * m + m ^ 2 ≤ (-2) * m * m' + m' ^ 2</code>. The way to solve this is to add <code>m ^ 2</code> on both sides which after simplifying should result in <code>0 &lt;= (m - m')^2</code>. The issue I am having is that for some reason <code>ring</code> is acting crazy and not simplifying anything. Sure I could pry this problem into shape using step by step tactics, but I am wondering if there is an elegant approach to this.</p>

<a name="178292573"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20prove%20%60%28-2%29%20%2A%20m%20%2A%20m%20%2B%20m%20%5E%202%20%E2%89%A4%20%28-2%29%20%2A%20m%20%2A%20m%27%20%2B%20m%27%20%5E%202%60/near/178292573" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58311Howtoprove2mmm22mmm2.html#178292573">Mario Carneiro (Oct 16 2019 at 14:12)</a>:</h4>
<p><code>ring</code> is not a simplifier</p>

<a name="178292582"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20prove%20%60%28-2%29%20%2A%20m%20%2A%20m%20%2B%20m%20%5E%202%20%E2%89%A4%20%28-2%29%20%2A%20m%20%2A%20m%27%20%2B%20m%27%20%5E%202%60/near/178292582" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58311Howtoprove2mmm22mmm2.html#178292582">Mario Carneiro (Oct 16 2019 at 14:12)</a>:</h4>
<p>it's supposed to kill the goal</p>

<a name="178292609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20prove%20%60%28-2%29%20%2A%20m%20%2A%20m%20%2B%20m%20%5E%202%20%E2%89%A4%20%28-2%29%20%2A%20m%20%2A%20m%27%20%2B%20m%27%20%5E%202%60/near/178292609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58311Howtoprove2mmm22mmm2.html#178292609">Mario Carneiro (Oct 16 2019 at 14:12)</a>:</h4>
<p>it sometimes simplifies as a side effect but you shouldn't rely on it</p>

<a name="178292709"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20prove%20%60%28-2%29%20%2A%20m%20%2A%20m%20%2B%20m%20%5E%202%20%E2%89%A4%20%28-2%29%20%2A%20m%20%2A%20m%27%20%2B%20m%27%20%5E%202%60/near/178292709" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58311Howtoprove2mmm22mmm2.html#178292709">Mario Carneiro (Oct 16 2019 at 14:13)</a>:</h4>
<p>Also, those two expressions are already "simplified" from the POV of <code>ring</code></p>

<a name="178293583"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20prove%20%60%28-2%29%20%2A%20m%20%2A%20m%20%2B%20m%20%5E%202%20%E2%89%A4%20%28-2%29%20%2A%20m%20%2A%20m%27%20%2B%20m%27%20%5E%202%60/near/178293583" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58311Howtoprove2mmm22mmm2.html#178293583">Mario Carneiro (Oct 16 2019 at 14:22)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">m&#39;</span> <span class="o">:</span> <span class="n">rat</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">m</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">≤</span> <span class="o">(</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m&#39;</span> <span class="bp">+</span> <span class="n">m&#39;</span> <span class="err">^</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="bp">@</span><span class="n">le_of_add_le_add_right</span> <span class="bp">_</span> <span class="bp">_</span> <span class="bp">_</span> <span class="o">(</span><span class="n">m</span><span class="err">^</span><span class="mi">2</span><span class="o">)</span> <span class="bp">_</span> <span class="err">$</span>
<span class="k">by</span> <span class="n">convert</span> <span class="o">(</span><span class="n">pow_two_nonneg</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="n">m&#39;</span><span class="o">))</span><span class="bp">;</span> <span class="n">ring</span>
</pre></div>

<a name="178296550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20prove%20%60%28-2%29%20%2A%20m%20%2A%20m%20%2B%20m%20%5E%202%20%E2%89%A4%20%28-2%29%20%2A%20m%20%2A%20m%27%20%2B%20m%27%20%5E%202%60/near/178296550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58311Howtoprove2mmm22mmm2.html#178296550">Marko Grdinić (Oct 16 2019 at 14:50)</a>:</h4>
<p>Here is what I came up with. I definitely like your solution better.</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">m&#39;</span> <span class="o">:</span> <span class="n">rat</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">m</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">≤</span> <span class="o">(</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m&#39;</span> <span class="bp">+</span> <span class="n">m&#39;</span> <span class="err">^</span> <span class="mi">2</span> <span class="o">:=</span>
    <span class="k">by</span> <span class="o">{</span>
        <span class="n">simp</span><span class="o">,</span>
        <span class="n">rw</span> <span class="o">[</span><span class="n">mul_assoc</span><span class="o">,</span> <span class="err">←</span> <span class="n">pow_two</span><span class="o">,</span> <span class="err">←</span> <span class="n">add_assoc</span><span class="o">],</span>
        <span class="n">rw</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">m&#39;</span> <span class="err">^</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">m</span> <span class="err">^</span> <span class="mi">2</span><span class="o">),</span>
        <span class="n">rw</span> <span class="n">two_mul</span><span class="o">,</span>
        <span class="n">repeat</span> <span class="o">{</span><span class="n">rw</span> <span class="n">add_assoc</span><span class="o">},</span>
        <span class="n">rw</span> <span class="n">le_add_iff_nonneg_right</span><span class="o">,</span>
        <span class="n">rw</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">m&#39;</span> <span class="err">^</span> <span class="mi">2</span><span class="o">)</span> <span class="o">(</span><span class="bp">-</span><span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m&#39;</span><span class="o">)),</span>
        <span class="k">have</span> <span class="o">:</span> <span class="o">(</span><span class="n">m</span> <span class="bp">-</span> <span class="n">m&#39;</span><span class="o">)</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">=</span> <span class="n">m</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="o">((</span><span class="bp">-</span> <span class="o">(</span><span class="mi">2</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m&#39;</span><span class="o">))</span> <span class="bp">+</span> <span class="n">m&#39;</span> <span class="err">^</span> <span class="mi">2</span><span class="o">),</span> <span class="k">by</span> <span class="n">ring</span><span class="o">,</span>
        <span class="n">rw</span> <span class="err">←</span> <span class="n">this</span><span class="o">,</span>
        <span class="n">apply</span> <span class="n">pow_two_nonneg</span>
    <span class="o">}</span>
</pre></div>

<a name="178296572"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20prove%20%60%28-2%29%20%2A%20m%20%2A%20m%20%2B%20m%20%5E%202%20%E2%89%A4%20%28-2%29%20%2A%20m%20%2A%20m%27%20%2B%20m%27%20%5E%202%60/near/178296572" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58311Howtoprove2mmm22mmm2.html#178296572">Marko Grdinić (Oct 16 2019 at 14:50)</a>:</h4>
<p>Thanks.</p>

<a name="178337185"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113489-new%20members/topic/How%20to%20prove%20%60%28-2%29%20%2A%20m%20%2A%20m%20%2B%20m%20%5E%202%20%E2%89%A4%20%28-2%29%20%2A%20m%20%2A%20m%27%20%2B%20m%27%20%5E%202%60/near/178337185" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113489newmembers/58311Howtoprove2mmm22mmm2.html#178337185">Kenny Lau (Oct 16 2019 at 23:39)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">rat</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">ring</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">m</span> <span class="n">m&#39;</span> <span class="o">:</span> <span class="n">rat</span><span class="o">)</span> <span class="o">:</span> <span class="o">(</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">m</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">≤</span> <span class="o">(</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m&#39;</span> <span class="bp">+</span> <span class="n">m&#39;</span> <span class="err">^</span> <span class="mi">2</span> <span class="o">:=</span>
<span class="k">calc</span>  <span class="o">(</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">m</span> <span class="err">^</span> <span class="mi">2</span>
    <span class="bp">≤</span> <span class="o">(</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">+</span> <span class="n">m</span> <span class="err">^</span> <span class="mi">2</span> <span class="bp">+</span> <span class="o">(</span><span class="n">m</span><span class="bp">-</span><span class="n">m&#39;</span><span class="o">)</span><span class="err">^</span><span class="mi">2</span> <span class="o">:</span> <span class="n">le_add_of_nonneg_right</span> <span class="o">(</span><span class="n">pow_two_nonneg</span> <span class="bp">_</span><span class="o">)</span>
<span class="bp">...</span> <span class="bp">=</span> <span class="o">(</span><span class="bp">-</span><span class="mi">2</span><span class="o">)</span> <span class="bp">*</span> <span class="n">m</span> <span class="bp">*</span> <span class="n">m&#39;</span> <span class="bp">+</span> <span class="n">m&#39;</span> <span class="err">^</span> <span class="mi">2</span>          <span class="o">:</span> <span class="k">by</span> <span class="n">ring</span>
</pre></div>


{% endraw %}

{% include archive_update.html %}