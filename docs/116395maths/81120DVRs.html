---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/116395maths/81120DVRs.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/116395maths/index.html">maths</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html">DVRs</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="188142696"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188142696" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188142696">Kevin Buzzard (Feb 13 2020 at 19:42)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="n">class</span> <span class="n">discrete_valuation_ring</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">principal_ideal_domain</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">unique_nonzero_max_ideal</span> <span class="o">:</span> <span class="bp">∃!</span> <span class="n">P</span> <span class="o">:</span> <span class="n">ideal</span> <span class="n">R</span><span class="o">,</span> <span class="n">P</span><span class="bp">.</span><span class="n">is_prime</span> <span class="bp">∧</span> <span class="n">P</span> <span class="bp">≠</span> <span class="mi">0</span><span class="o">)</span>
</pre></div>


<p><span class="user-mention" data-user-id="112680">@Johan Commelin</span> what do you think?</p>

<a name="188143009"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188143009" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188143009">Johan Commelin (Feb 13 2020 at 19:46)</a>:</h4>
<p>Well, we already have <code>local_ring</code></p>

<a name="188143031"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188143031" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188143031">Johan Commelin (Feb 13 2020 at 19:46)</a>:</h4>
<p>So maybe you should <code>extend</code> that</p>

<a name="188143061"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188143061" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188143061">Johan Commelin (Feb 13 2020 at 19:46)</a>:</h4>
<p>and then add one extra condition saying that it's not a field</p>

<a name="188143208"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188143208" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188143208">Kevin Buzzard (Feb 13 2020 at 19:48)</a>:</h4>
<p>but a general local ring isn't a PID so I need to add that somehow, right?</p>

<a name="188143260"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188143260" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188143260">Johan Commelin (Feb 13 2020 at 19:49)</a>:</h4>
<p>You are already extending that, right?</p>

<a name="188143271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188143271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188143271">Johan Commelin (Feb 13 2020 at 19:49)</a>:</h4>
<p>I meant, in addition, extend local ring</p>

<a name="188143412"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188143412" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188143412">Johan Commelin (Feb 13 2020 at 19:51)</a>:</h4>
<p>I wonder whether we'll be happy with <code>[dvr R]</code> and <code>[pid R]</code>, etc... Or that we'd rather have <code>[comm_ring R] [is_dvr R]</code> and <code>[comm_ring R] [is_pid R]</code> etc...</p>

<a name="188143445"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188143445" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188143445">Johan Commelin (Feb 13 2020 at 19:51)</a>:</h4>
<p>The first version has more chances to lead to diamonds, I think</p>

<a name="188143550"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188143550" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188143550">Kevin Buzzard (Feb 13 2020 at 19:52)</a>:</h4>
<p>I never know if I'm allowed to extend PID and local ring because perhaps I just defined two different multiplications or something? I really have no understanding of this stuff and don't know a place where it's all written up coherently. I occasionally half-understand it for a while and then I just forget it all again.</p>

<a name="188143877"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188143877" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188143877">Johan Commelin (Feb 13 2020 at 19:54)</a>:</h4>
<p>Aha, I think it's fine, but maybe you need to switch on the <code>old_structure_cmd</code></p>

<a name="188145502"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188145502" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188145502">Kevin Buzzard (Feb 13 2020 at 20:10)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">set_option</span> <span class="n">old_structure_cmd</span> <span class="n">true</span>

<span class="n">class</span> <span class="n">discrete_valuation_ring</span> <span class="o">(</span><span class="n">R</span> <span class="o">:</span> <span class="kt">Type</span><span class="bp">*</span><span class="o">)</span> <span class="kn">extends</span> <span class="n">principal_ideal_domain</span> <span class="n">R</span><span class="o">,</span>
  <span class="n">local_ring</span> <span class="n">R</span> <span class="o">:=</span>
<span class="o">(</span><span class="n">pseudouniformiser</span> <span class="o">:</span> <span class="bp">∃</span> <span class="n">a</span> <span class="o">:</span> <span class="n">R</span><span class="o">,</span> <span class="n">a</span> <span class="bp">≠</span> <span class="mi">0</span> <span class="bp">∧</span> <span class="bp">¬</span> <span class="n">is_unit</span> <span class="n">a</span><span class="o">)</span>
</pre></div>

<a name="188146043"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188146043" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188146043">Johan Commelin (Feb 13 2020 at 20:16)</a>:</h4>
<p>Yeah, that seems fine. Although I would maybe not call the condition <code>pseudouniformiser</code></p>

<a name="188146075"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/DVRs/near/188146075" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/116395maths/81120DVRs.html#188146075">Johan Commelin (Feb 13 2020 at 20:16)</a>:</h4>
<p><code>exists_nonzero_nonunit</code>?</p>


{% endraw %}

{% include archive_update.html %}