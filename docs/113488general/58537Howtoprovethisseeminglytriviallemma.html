---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/58537Howtoprovethisseeminglytriviallemma.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html">How to prove this seemingly trivial lemma?</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="188759645"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188759645" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188759645">Yufan Lou (Feb 21 2020 at 18:20)</a>:</h4>
<div class="codehilite"><pre><span></span>lemma append_is_prefix [decidable_eq α] (l₁ : list α) (l₂ : list α) :
is_prefix_of l₁ (l₁ ++ l₂) = tt := sorry
</pre></div>

<a name="188759794"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188759794" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188759794">Mario Carneiro (Feb 21 2020 at 18:22)</a>:</h4>
<p><code>is_prefix_of</code> is a <code>Prop</code>, right? So there is a bool coercion there that you should first get rid of</p>

<a name="188759804"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188759804" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188759804">Patrick Massot (Feb 21 2020 at 18:22)</a>:</h4>
<p>It's a bool</p>

<a name="188759821"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188759821" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188759821">Patrick Massot (Feb 21 2020 at 18:23)</a>:</h4>
<p>crazy computer science thing</p>

<a name="188759847"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188759847" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188759847">Mario Carneiro (Feb 21 2020 at 18:23)</a>:</h4>
<p>In that case there should be a theorem relating it to <code>&lt;:+</code> which is a prop</p>

<a name="188759867"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188759867" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188759867">Yufan Lou (Feb 21 2020 at 18:23)</a>:</h4>
<p>XD<br>
yeah I had no idea how to work with bool in lean</p>

<a name="188759919"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188759919" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188759919">Yufan Lou (Feb 21 2020 at 18:24)</a>:</h4>
<p>what is <code>&lt;:+</code></p>

<a name="188759940"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188759940" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188759940">Mario Carneiro (Feb 21 2020 at 18:24)</a>:</h4>
<p>I think its actual name is <code>list.is_prefix</code></p>

<a name="188759949"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188759949" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188759949">Yufan Lou (Feb 21 2020 at 18:24)</a>:</h4>
<p>oh wow</p>

<a name="188759970"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188759970" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188759970">Mario Carneiro (Feb 21 2020 at 18:24)</a>:</h4>
<p>that's where you will find the theorems</p>

<a name="188760081"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188760081" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188760081">Mario Carneiro (Feb 21 2020 at 18:26)</a>:</h4>
<p>Oops, prefix is <code>&lt;+:</code>, suffix is <code>&lt;:+</code></p>

<a name="188760099"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188760099" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188760099">Yufan Lou (Feb 21 2020 at 18:26)</a>:</h4>
<p>ah ok</p>

<a name="188760118"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188760118" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188760118">Yufan Lou (Feb 21 2020 at 18:26)</a>:</h4>
<p>I was only looking in <code>init.list.basic</code></p>

<a name="188760183"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188760183" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188760183">Yufan Lou (Feb 21 2020 at 18:27)</a>:</h4>
<p>ah ok <code>prefix_append</code> already proved</p>

<a name="188760330"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188760330" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188760330">Mario Carneiro (Feb 21 2020 at 18:28)</a>:</h4>
<p>Oh, looks like you found a hole in the library. The equivalence of <code>list.is_prefix</code> and <code>list.is_prefix_of</code> is not proved</p>

<a name="188760376"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188760376" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188760376">Mario Carneiro (Feb 21 2020 at 18:29)</a>:</h4>
<p>You should just use <code>list.is_prefix</code> anyway, it has a decidable instance so it's better than a bool function</p>

<a name="188760460"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188760460" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188760460">Mario Carneiro (Feb 21 2020 at 18:29)</a>:</h4>
<p>but <code>list.is_prefix_of</code> is in core... maybe now we can finally do something about these bits and bobs</p>

<a name="188760887"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188760887" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188760887">Yufan Lou (Feb 21 2020 at 18:34)</a>:</h4>
<p>thx y'all, I've finished it</p>

<a name="188762112"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/How%20to%20prove%20this%20seemingly%20trivial%20lemma%3F/near/188762112" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/58537Howtoprovethisseeminglytriviallemma.html#188762112">Mario Carneiro (Feb 21 2020 at 18:48)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">data</span><span class="bp">.</span><span class="n">list</span><span class="bp">.</span><span class="n">basic</span> <span class="n">data</span><span class="bp">.</span><span class="n">bool</span>

<span class="kn">namespace</span> <span class="n">list</span>

<span class="kn">theorem</span> <span class="n">is_prefix_of_iff</span> <span class="o">{</span><span class="n">α</span><span class="o">}</span> <span class="o">[</span><span class="n">decidable_eq</span> <span class="n">α</span><span class="o">]</span> <span class="o">:</span> <span class="bp">∀</span> <span class="o">{</span><span class="n">l₁</span> <span class="n">l₂</span> <span class="o">:</span> <span class="n">list</span> <span class="n">α</span><span class="o">},</span>
  <span class="n">is_prefix_of</span> <span class="n">l₁</span> <span class="n">l₂</span> <span class="bp">↔</span> <span class="n">l₁</span> <span class="bp">&lt;+</span><span class="o">:</span> <span class="n">l₂</span>
<span class="bp">|</span> <span class="o">[]</span> <span class="n">l₂</span> <span class="o">:=</span> <span class="bp">⟨λ</span> <span class="bp">_</span><span class="o">,</span> <span class="n">nil_prefix</span> <span class="bp">_</span><span class="o">,</span> <span class="bp">λ</span> <span class="bp">_</span><span class="o">,</span> <span class="k">by</span> <span class="n">cases</span> <span class="n">l₂</span><span class="bp">;</span> <span class="n">exact</span> <span class="n">rfl</span><span class="bp">⟩</span>
<span class="bp">|</span> <span class="o">(</span><span class="bp">_::_</span><span class="o">)</span> <span class="o">[]</span> <span class="o">:=</span> <span class="bp">⟨</span><span class="k">by</span> <span class="n">rintro</span> <span class="bp">⟨⟩</span><span class="o">,</span> <span class="bp">λ</span> <span class="n">h</span><span class="o">,</span> <span class="k">by</span> <span class="n">cases</span> <span class="n">eq_nil_of_prefix_nil</span> <span class="n">h</span><span class="bp">⟩</span>
<span class="bp">|</span> <span class="o">(</span><span class="n">a</span><span class="bp">::</span><span class="n">l₁</span><span class="o">)</span> <span class="o">(</span><span class="n">b</span><span class="bp">::</span><span class="n">l₂</span><span class="o">)</span> <span class="o">:=</span> <span class="k">begin</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">is_prefix_of</span><span class="o">,</span> <span class="n">band_coe_iff</span><span class="o">,</span> <span class="n">bool</span><span class="bp">.</span><span class="n">coe_to_bool</span><span class="o">,</span> <span class="n">is_prefix_of_iff</span><span class="o">],</span>
  <span class="n">split</span><span class="o">,</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">rfl</span><span class="o">,</span> <span class="n">h</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">exact</span> <span class="o">(</span><span class="n">prefix_cons_inj</span> <span class="bp">_</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span> <span class="n">h</span> <span class="o">},</span>
  <span class="o">{</span> <span class="n">rintro</span> <span class="bp">⟨</span><span class="n">l</span><span class="o">,</span> <span class="n">e</span><span class="bp">⟩</span><span class="o">,</span> <span class="n">injection</span> <span class="n">e</span> <span class="k">with</span> <span class="n">h₁</span> <span class="n">h₂</span><span class="o">,</span> <span class="n">exact</span> <span class="bp">⟨</span><span class="n">h₁</span><span class="o">,</span> <span class="bp">_</span><span class="o">,</span> <span class="n">h₂</span><span class="bp">⟩</span> <span class="o">}</span>
<span class="kn">end</span>

<span class="kn">end</span> <span class="n">list</span>
</pre></div>


{% endraw %}

{% include archive_update.html %}