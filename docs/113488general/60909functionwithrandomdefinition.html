---
layout: archive
title: Lean Prover Zulip Chat Archive
permalink: archive/113488general/60909functionwithrandomdefinition.html
---

<h2>Stream: <a href="https://leanprover-community.github.io/archive/113488general/index.html">general</a>
<h3>Topic: <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html">function with random definition</a></h3>

<hr>

<base href="https://leanprover.zulipchat.com">

{% raw %}
<a name="179703264"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703264" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703264">Kevin Buzzard (Nov 02 2019 at 13:51)</a>:</h4>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">tauto</span>

<span class="c">/-</span><span class="cm"></span>
<span class="cm">    f</span>
<span class="cm">  A → B</span>
<span class="cm">g ↓   ↓ h</span>
<span class="cm">  C → D</span>
<span class="cm">    j</span>
<span class="cm">-/</span>


<span class="n">def</span> <span class="n">random</span> <span class="o">{</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>
<span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span>
<span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span>
<span class="o">(</span><span class="n">h</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span>
<span class="o">(</span><span class="n">j</span> <span class="o">:</span> <span class="n">C</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">D</span> <span class="o">:=</span>
<span class="k">by</span> <span class="n">tauto</span> <span class="c1">-- !</span>

<span class="c">/-</span><span class="cm"></span>
<span class="cm">Solve the maze!</span>

<span class="cm">(start here) -&gt; [add two] -&gt; (could go this way)</span>
<span class="cm">    ↓                                ↓</span>
<span class="cm">(or this way) -&gt; [add one] -&gt; (get to here)</span>
<span class="cm">-/</span>

<span class="bp">#</span><span class="kn">eval</span> <span class="n">random</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">2</span><span class="o">)</span> <span class="n">id</span> <span class="n">id</span> <span class="o">(</span><span class="bp">λ</span> <span class="n">x</span><span class="o">,</span> <span class="n">x</span> <span class="bp">+</span> <span class="mi">1</span><span class="o">)</span> <span class="mi">0</span> <span class="c1">-- random{1,2}</span>
</pre></div>

<a name="179703321"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703321" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703321">Mario Carneiro (Nov 02 2019 at 13:52)</a>:</h4>
<p>it commutes!</p>

<a name="179703324"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703324" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703324">Kevin Buzzard (Nov 02 2019 at 13:52)</a>:</h4>
<p>It shouldn't do -- did I make an error?</p>

<a name="179703336"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703336" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703336">Kevin Buzzard (Nov 02 2019 at 13:53)</a>:</h4>
<p>These are types not props</p>

<a name="179703396"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703396" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703396">Mario Carneiro (Nov 02 2019 at 13:54)</a>:</h4>
<p>my mistake, I thought you used x+1+2 and x+2+1</p>

<a name="179703400"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703400" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703400">Kevin Buzzard (Nov 02 2019 at 13:55)</a>:</h4>
<p>rofl I just permuted the inputs and got it to give a different answer :D</p>

<a name="179703416"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703416" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703416">Mario Carneiro (Nov 02 2019 at 13:55)</a>:</h4>
<p>I don't think <code>tauto</code> was designed for diagram chasing</p>

<a name="179703421"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703421" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703421">Kevin Buzzard (Nov 02 2019 at 13:55)</a>:</h4>
<p>I was overjoyed when I found that it did it!</p>

<a name="179703426"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703426" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703426">Mario Carneiro (Nov 02 2019 at 13:55)</a>:</h4>
<p>I think <code>solve_by_elim</code> will do though</p>

<a name="179703467"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703467" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703467">Kevin Buzzard (Nov 02 2019 at 13:56)</a>:</h4>
<p>I'm making a whole bunch of definitions in tactic mode for the natural number game, and tauto is my big reveal like simp is for proving a+b+c+d+e=e+d+c+b+a</p>

<a name="179703486"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703486" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703486">Kevin Buzzard (Nov 02 2019 at 13:57)</a>:</h4>
<p>I am using these ideas to teach mathematicians about intro, apply, have and exact in a context where they are not freaking out about <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>P</mi><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mi>Q</mi></mrow><annotation encoding="application/x-tex">P\implies Q</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.70733em;vertical-align:-0.024em;"></span><span class="mord mathdefault" style="margin-right:0.13889em;">P</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">⟹</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">Q</span></span></span></span> being a function</p>

<a name="179703609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703609">Kevin Buzzard (Nov 02 2019 at 14:00)</a>:</h4>
<p>We saw Antoine making a classic mathematician's error yesterday -- he had <code>f : X -&gt; Y, A B : X, h : A = B, |- f A = f B</code> and wanted to <code>rw f</code> instead of <code>rw h</code>. We can't tell the difference between = and -&gt; in the sense that we do not look out carefully for it.</p>

<a name="179703636"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703636" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703636">Kevin Buzzard (Nov 02 2019 at 14:01)</a>:</h4>
<p><code>rw</code> does something which in the CS world is all very interesting and there's lots of theory and what have you, but to a mathematician a rewrite is an invisible step, because once A=B then A can be replaced by B at any stage in the future, immediately, and without question -- no justification needed.</p>

<a name="179703650"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703650" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703650">Kevin Buzzard (Nov 02 2019 at 14:01)</a>:</h4>
<p>so mathematicians know that <code>rw</code> is for something something which isn't really there. And then if P implies Q and we know P then of course we know Q, that argument isn't really there either, it's just obvious from the logic</p>

<a name="179703651"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703651" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703651">Mario Carneiro (Nov 02 2019 at 14:01)</a>:</h4>
<p>not invisible exactly, mathematicians are familiar with equality chains</p>

<a name="179703653"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703653" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703653">Kevin Buzzard (Nov 02 2019 at 14:01)</a>:</h4>
<p>so it must be <code>rw</code> as well.</p>

<a name="179703693"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703693" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703693">Kevin Buzzard (Nov 02 2019 at 14:02)</a>:</h4>
<p>Yes, and we're familiar with implies chains.</p>

<a name="179703705"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703705" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703705">Kevin Buzzard (Nov 02 2019 at 14:02)</a>:</h4>
<p>But when you <em>watch mathematicians doing mathematics</em> they write chains of arguments, and sometimes they're rewriting = and sometimes they're applying P -&gt; Q and both of these (completely different) things are just so completely embedded in a mathematician that they find it hard to tell them apart, they're just both doing something trivial and obvious</p>

<a name="179703767"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703767" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703767">Kevin Buzzard (Nov 02 2019 at 14:04)</a>:</h4>
<p>I have this every year with schoolkids, they show up here and I ask them to prove <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mn>2</mn></msqrt><mo>+</mo><msqrt><mn>6</mn></msqrt><mo>&lt;</mo><msqrt><mn>15</mn></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{2}+\sqrt{6}&lt;\sqrt{15}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.13278em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">2</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg height="1.08em" preserveAspectRatio="xMinYMin slice" viewBox="0 0 400000 1080" width="400em"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5, -10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8, -50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0, 35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5, -221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467 s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422 s-65,47,-65,47z M834 80H400000v40H845z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.13278em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">6</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg height="1.08em" preserveAspectRatio="xMinYMin slice" viewBox="0 0 400000 1080" width="400em"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5, -10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8, -50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0, 35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5, -221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467 s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422 s-65,47,-65,47z M834 80H400000v40H845z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.13278em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.90722em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">1</span><span class="mord">5</span></span></span><span style="top:-2.86722em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg height="1.08em" preserveAspectRatio="xMinYMin slice" viewBox="0 0 400000 1080" width="400em"><path d="M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5, -10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8, -50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0, 35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5, -221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467 s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422 s-65,47,-65,47z M834 80H400000v40H845z"></path></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.13278em;"><span></span></span></span></span></span></span></span></span> and they just square both sides, press on, end up deducing 48&lt;49, say this is true so they're done, and <em>they don't even write the connector from each line to the next</em>. They are not trained to do this at school.</p>

<a name="179703784"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703784" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703784">Kevin Buzzard (Nov 02 2019 at 14:05)</a>:</h4>
<p>At school, they are given an equation and told to prove another equation, and they do it using three rewrites, each of which generates a new equation, and I've looked at the mark sheets for these things because my sons have been doing them and the mark scheme is "one point for each of the intermediate equations". No mention at all of the underlying logic.</p>

<a name="179703837"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703837" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703837">Kevin Buzzard (Nov 02 2019 at 14:06)</a>:</h4>
<p>And similarly they might be asked to prove P -&gt; Q and they prove P -&gt; A -&gt; B -&gt; C -&gt; Q and they get one point for each of A, B, C so *they just write "P, A, B, C, Q, done" and get full marks</p>

<a name="179703845"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179703845" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179703845">Kevin Buzzard (Nov 02 2019 at 14:06)</a>:</h4>
<p>and then they show up at Imperial with top marks for their school exams and they don't know the difference between P -&gt; Q and P = Q.</p>

<a name="179716621"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179716621" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179716621">Kevin Buzzard (Nov 02 2019 at 20:06)</a>:</h4>
<blockquote>
<p>I think <code>solve_by_elim</code> will do though</p>
</blockquote>
<p>OK so I can't get anything to work for this one:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span> <span class="n">H</span> <span class="n">I</span> <span class="n">J</span> <span class="n">K</span> <span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">(</span><span class="n">f1</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">f2</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">f3</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f4</span> <span class="o">:</span> <span class="n">D</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">f5</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span>
<span class="o">(</span><span class="n">f6</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f7</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f8</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">f9</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span> <span class="o">(</span><span class="n">f10</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span>
<span class="o">(</span><span class="n">f11</span> <span class="o">:</span> <span class="n">J</span> <span class="bp">→</span> <span class="n">I</span><span class="o">)</span> <span class="o">(</span><span class="n">f12</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f13</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f14</span> <span class="o">:</span> <span class="n">H</span> <span class="bp">→</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">f15</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">L</span><span class="o">)</span>
 <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">L</span> <span class="o">:=</span>
<span class="k">begin</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f15</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f11</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f9</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f8</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f5</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f2</span><span class="o">,</span> <span class="n">apply</span> <span class="n">f1</span><span class="o">,</span> <span class="n">assumption</span><span class="o">,</span>
<span class="kn">end</span>
</pre></div>


<p>Is there one tactic which solves this example? I'm happy to put move everything before or after the colon if it helps. I couldn't get either <code>tauto</code> or <code>solve_by_elim</code> to work. Note: they are types not props.</p>

<a name="179716640"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179716640" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179716640">Kevin Buzzard (Nov 02 2019 at 20:07)</a>:</h4>
<p>It's just a maze. There a some loops (e.g. f1,f2,f3,f4)</p>

<a name="179716720"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179716720" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179716720">Kevin Buzzard (Nov 02 2019 at 20:09)</a>:</h4>
<p>Oh I've just noticed that I can't even solve it if I change them all to Props! <code>tauto!</code> just sits there, <code>tauto</code> fails, <code>solve_by_elim</code> fails :-/</p>

<a name="179717129"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717129" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179717129">Bryan Gin-ge Chen (Nov 02 2019 at 20:19)</a>:</h4>
<p>How about this?</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="n">tactic</span><span class="bp">.</span><span class="n">basic</span>

<span class="kn">example</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span> <span class="n">H</span> <span class="n">I</span> <span class="n">J</span> <span class="n">K</span> <span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">(</span><span class="n">f1</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">f2</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">f3</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f4</span> <span class="o">:</span> <span class="n">D</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">f5</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span>
<span class="o">(</span><span class="n">f6</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f7</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f8</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">f9</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span> <span class="o">(</span><span class="n">f10</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span>
<span class="o">(</span><span class="n">f11</span> <span class="o">:</span> <span class="n">J</span> <span class="bp">→</span> <span class="n">I</span><span class="o">)</span> <span class="o">(</span><span class="n">f12</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f13</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f14</span> <span class="o">:</span> <span class="n">H</span> <span class="bp">→</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">f15</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">L</span><span class="o">)</span>
 <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">L</span> <span class="o">:=</span>
 <span class="k">begin</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">repeat</span> <span class="o">{</span><span class="n">assumption</span> <span class="bp">&lt;|&gt;</span> <span class="n">apply_assumption</span><span class="o">},</span>
 <span class="kn">end</span>
</pre></div>

<a name="179717204"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717204" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179717204">Kevin Buzzard (Nov 02 2019 at 20:21)</a>:</h4>
<p>I am pretty sure that if I permute f1-f15 then you will get lost.</p>

<a name="179717252"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717252" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179717252">Kevin Buzzard (Nov 02 2019 at 20:22)</a>:</h4>
<p>And if that's not true then I'm pretty sure I could generate a level which was solvable but for which this tactic wouldn't work.</p>

<a name="179717271"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717271" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179717271">Kevin Buzzard (Nov 02 2019 at 20:23)</a>:</h4>
<p>What do I need? a SAT solver? An SMT solver? I am just indicating how clueless I am here.</p>

<a name="179717277"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717277" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179717277">Kevin Buzzard (Nov 02 2019 at 20:23)</a>:</h4>
<p>An ATP? How do I solve it in Isabelle?</p>

<a name="179717344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179717344">Kevin Buzzard (Nov 02 2019 at 20:25)</a>:</h4>
<p>Current version of challenge:</p>
<div class="codehilite"><pre><span></span><span class="kn">example</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="n">C</span> <span class="n">D</span> <span class="n">E</span> <span class="n">F</span> <span class="n">G</span> <span class="n">H</span> <span class="n">I</span> <span class="n">J</span> <span class="n">K</span> <span class="n">L</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">)</span>
<span class="o">(</span><span class="n">f_for_Bryan</span> <span class="o">:</span> <span class="n">L</span> <span class="bp">→</span> <span class="n">L</span><span class="o">)</span>
<span class="o">(</span><span class="n">f1</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">)</span> <span class="o">(</span><span class="n">f2</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">E</span><span class="o">)</span> <span class="o">(</span><span class="n">f3</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">D</span><span class="o">)</span> <span class="o">(</span><span class="n">f4</span> <span class="o">:</span> <span class="n">D</span> <span class="bp">→</span> <span class="n">A</span><span class="o">)</span> <span class="o">(</span><span class="n">f5</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">F</span><span class="o">)</span>
<span class="o">(</span><span class="n">f6</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f7</span> <span class="o">:</span> <span class="n">B</span> <span class="bp">→</span> <span class="n">C</span><span class="o">)</span> <span class="o">(</span><span class="n">f8</span> <span class="o">:</span> <span class="n">F</span> <span class="bp">→</span> <span class="n">G</span><span class="o">)</span> <span class="o">(</span><span class="n">f9</span> <span class="o">:</span> <span class="n">G</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span> <span class="o">(</span><span class="n">f10</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">J</span><span class="o">)</span>
<span class="o">(</span><span class="n">f11</span> <span class="o">:</span> <span class="n">J</span> <span class="bp">→</span> <span class="n">I</span><span class="o">)</span> <span class="o">(</span><span class="n">f12</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f13</span> <span class="o">:</span> <span class="n">E</span> <span class="bp">→</span> <span class="n">H</span><span class="o">)</span> <span class="o">(</span><span class="n">f14</span> <span class="o">:</span> <span class="n">H</span> <span class="bp">→</span> <span class="n">K</span><span class="o">)</span> <span class="o">(</span><span class="n">f15</span> <span class="o">:</span> <span class="n">I</span> <span class="bp">→</span> <span class="n">L</span><span class="o">)</span>
 <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">L</span> <span class="o">:=</span>
 <span class="k">begin</span>
  <span class="n">intro</span> <span class="n">a</span><span class="o">,</span>
  <span class="n">repeat</span> <span class="o">{</span><span class="n">assumption</span> <span class="bp">&lt;|&gt;</span> <span class="n">apply_assumption</span><span class="o">},</span> <span class="c1">-- hangs forever</span>
 <span class="kn">end</span>
</pre></div>

<a name="179717423"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717423" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179717423">Kevin Buzzard (Nov 02 2019 at 20:26)</a>:</h4>
<p>I will grudgingly accept  one-tactic answer which works for Props only, and I'm happy with intros or reverts before the tactic.</p>

<a name="179717770"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179717770" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179717770">Bryan Gin-ge Chen (Nov 02 2019 at 20:35)</a>:</h4>
<p>Not quite the same thing, but I think <code>tfae</code> is supposed to do something like this to prove <code>iff</code>s. There are <a href="https://github.com/leanprover-community/mathlib/pull/1600/files#diff-c4911975b6c6e4ce5852e1617245aa68R133" target="_blank" title="https://github.com/leanprover-community/mathlib/pull/1600/files#diff-c4911975b6c6e4ce5852e1617245aa68R133">some tests</a> in <span class="user-mention" data-user-id="110026">@Simon Hudon</span>'s PR <a href="https://github.com/leanprover-community/mathlib/issues/1600" target="_blank" title="https://github.com/leanprover-community/mathlib/issues/1600">#1600</a> for <code>tfae</code> which are kind of reminiscent of your examples.</p>
<p>Presumably someone well-versed in the mysteries of meta code could write something like <a href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" target="_blank" title="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm">Dijkstra's algorithm</a> or some other pathfinding algorithm for these challenges?</p>

<a name="179718166"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179718166" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179718166">Kevin Buzzard (Nov 02 2019 at 20:44)</a>:</h4>
<p><code>cc</code> works for Props. Feature request: make <code>cc</code> work for types :D</p>

<a name="179718403"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179718403" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179718403">Jesse Michael Han (Nov 02 2019 at 20:49)</a>:</h4>
<p>you could hack it by using <code>cc</code> to find a proof for the <code>nonempty</code> versions of your hypotheses, then fold over the proof to figure out how to produce the required term</p>

<a name="179718723"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179718723" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179718723">Kevin Buzzard (Nov 02 2019 at 20:57)</a>:</h4>
<p>that might be asking a bit much for my users :D They've only just learnt <code>apply</code></p>

<a name="179720159"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179720159" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179720159">Antoine Chambert-Loir (Nov 02 2019 at 21:39)</a>:</h4>
<p>What puzzled me (and still puzzles me) in the way tactics are taught in the natural number game is that I did not understand precisely on what expression they act and by what kind of magic they progressively build a term of the correct type.</p>

<a name="179720323"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179720323" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179720323">Kevin Buzzard (Nov 02 2019 at 21:44)</a>:</h4>
<p>I am teaching it in a completely different way to Theorem Proving In Lean, just for an experiment really. Computer scientists are terrified by <code>rw</code> because it is a very complex tactic, replacing entire subterms of a term by other subterms whilst trying to remain consistent and typecheck. On the other hand if a mathematician knows A=B then they can just change every A to a B without even feeling like they are doing anything.</p>

<a name="179720344"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179720344" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179720344">Kevin Buzzard (Nov 02 2019 at 21:45)</a>:</h4>
<p><code>rw</code> always acts on the goal. Should I say this more explicitly? I must say Antoine, your feedback has been invaluable so far, because I know I can trust you as a mathematician, so if you find something difficult I can be confident that you understand the mathematics and the problem is the explanation.</p>

<a name="179721006"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179721006" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179721006">Bryan Gin-ge Chen (Nov 02 2019 at 22:06)</a>:</h4>
<blockquote>
<p>I did not understand precisely on what expression [tactics] act and by what kind of magic they progressively build a term of the correct type.</p>
</blockquote>
<p>This is not something I understand too well either, but let me try anyway. Tactics operate on the "tactic state", which includes:<br>
- the "environment" (containing all declarations like <code>def</code> and <code>theorem</code>), <br>
- the "local context" (containing a list of the hypotheses available in the current proof), and <br>
- all current goals. </p>
<p>All this state is wrapped in some functional programming construct called a "monad" (which allows for e.g. backtracking and error-handling) to make it convenient to manipulate via Lean code (tactics are "just" functions involving this "tactic monad"). </p>
<p>For more info, there's <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/tactic_writing.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/tactic_writing.md">the tactic writing tutorial in the mathlib docs</a> with pointers to some more sources.</p>

<a name="179722798"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179722798" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179722798">Kevin Buzzard (Nov 02 2019 at 23:06)</a>:</h4>
<p>Ha ha so one answer to Antoine's question is that it all works via the magic of category theory</p>

<a name="179723073"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/179723073" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#179723073">tirima (Nov 02 2019 at 23:16)</a>:</h4>
<p>World 4, level 8 in 25 <code>rw</code> instead of 27:</p>
<div class="codehilite"><pre><span></span><span class="n">rw</span> <span class="n">one_eq_succ_zero</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_succ</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_zero</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_zero</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">pow_zero</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_add</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">mul_comm</span> <span class="n">b</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span><span class="o">,</span>
<span class="n">rw</span> <span class="err">←</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">succ_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="err">←</span><span class="n">one_eq_succ_zero</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">one_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_mul</span><span class="o">,</span>
<span class="n">rw</span> <span class="n">add_assoc</span> <span class="o">(</span><span class="n">a</span><span class="bp">*</span><span class="n">a</span><span class="o">),</span>
<span class="n">rw</span> <span class="n">add_comm</span> <span class="o">(</span><span class="n">b</span><span class="bp">*</span><span class="n">b</span><span class="o">),</span>
</pre></div>

<a name="180285359"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180285359" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#180285359">Scott Morrison (Nov 09 2019 at 00:06)</a>:</h4>
<p>We really need to get <code>rewrite_search</code> into mathlib... :-)</p>

<a name="180300609"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180300609" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#180300609">Kevin Buzzard (Nov 09 2019 at 07:15)</a>:</h4>
<p>Isn't this <code>simp</code>?</p>

<a name="180308468"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180308468" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#180308468">Sebastian Ullrich (Nov 09 2019 at 11:16)</a>:</h4>
<p>Am I doing this right? <a href="/user_uploads/3121/O9r8V7CDCyReiTY5Aia1abij/3fsdr0.jpg" target="_blank" title="3fsdr0.jpg">3fsdr0.jpg</a></p>
<div class="message_inline_image"><a href="/user_uploads/3121/O9r8V7CDCyReiTY5Aia1abij/3fsdr0.jpg" target="_blank" title="3fsdr0.jpg"><img src="/user_uploads/3121/O9r8V7CDCyReiTY5Aia1abij/3fsdr0.jpg"></a></div>

<a name="180308474"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180308474" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#180308474">Sebastian Ullrich (Nov 09 2019 at 11:17)</a>:</h4>
<p>(No, I don't think I am...)</p>

<a name="180309175"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180309175" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#180309175">Kevin Buzzard (Nov 09 2019 at 11:38)</a>:</h4>
<p><code>simp</code> is magic as far as I am concerned. I know that in the case above it's <code>ring</code> I need, but that's because I read the spoiler on Twitter</p>

<a name="180309230"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180309230" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#180309230">Kevin Buzzard (Nov 09 2019 at 11:40)</a>:</h4>
<p>I remember Patrick a while ago saying "ha ha I remember the days when I just tried <code>simp</code> on every goal" and I'm like "yeah, that's me now"</p>

<a name="180309234"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180309234" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#180309234">Kevin Buzzard (Nov 09 2019 at 11:40)</a>:</h4>
<p>I remember when someone told me that it worked best on equalities. That was a big step forward.</p>

<a name="180316364"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180316364" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#180316364">Bryan Gin-ge Chen (Nov 09 2019 at 14:55)</a>:</h4>
<p>The first proof I wrote for that one used <code>simp</code>:</p>
<div class="codehilite"><pre><span></span><span class="kn">lemma</span> <span class="n">add_squared</span> <span class="o">(</span><span class="n">a</span> <span class="n">b</span> <span class="o">:</span> <span class="n">mynat</span><span class="o">)</span> <span class="o">:</span>
  <span class="o">(</span><span class="n">a</span> <span class="bp">+</span> <span class="n">b</span><span class="o">)</span> <span class="err">^</span> <span class="o">(</span><span class="n">succ</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="bp">=</span>
<span class="n">a</span> <span class="err">^</span> <span class="o">(</span><span class="n">succ</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="n">b</span><span class="err">^</span><span class="o">(</span><span class="n">succ</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span> <span class="bp">+</span> <span class="o">(</span><span class="n">succ</span><span class="o">(</span><span class="mi">1</span><span class="o">))</span><span class="bp">*</span><span class="n">a</span><span class="bp">*</span><span class="n">b</span> <span class="o">:=</span>
 <span class="k">begin</span>
  <span class="n">simp</span> <span class="o">[</span><span class="n">pow_succ</span><span class="o">,</span> <span class="n">pow_one</span><span class="o">,</span> <span class="n">mul_add</span><span class="o">,</span> <span class="n">succ_mul</span><span class="o">],</span>
<span class="kn">end</span>
</pre></div>


<p>Then I read the twitter stuff and thought that maybe <code>simp</code> was against the spirit of the question or something so I tried again.</p>
<blockquote>
<p><code>simp</code> is magic as far as I am concerned.</p>
</blockquote>
<p>Didn't you just say "we don't have tactics sophisticated enough to be called black boxes" ? <span aria-label="stuck out tongue wink" class="emoji emoji-1f61c" role="img" title="stuck out tongue wink">:stuck_out_tongue_wink:</span></p>

<a name="180323477"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180323477" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#180323477">Kevin Buzzard (Nov 09 2019 at 17:41)</a>:</h4>
<p>Ha ha, you are absolutely right :D I guess I was thinking more about "mathematical" tactics, like <code>ring</code>, <code>linarith</code> and <code>norm_num</code>. Whilst of course I could never have written any of these myself, the <em>mathematical</em> jobs they achieve are exactly the sort of things which mathematicians (e.g. by the time they arrive at my university) are told are "trivial". To put it another way, these complicated tactics fill in gaps which mathematicians are under no obligation to justify on paper: "One readily checks that <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>a</mi><mi>X</mi><mo>+</mo><mi>b</mi><mi>Y</mi><mo>+</mo><mi>c</mi><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mi>d</mi><msup><mi>Y</mi><mn>3</mn></msup><mo stretchy="false">)</mo><mo>∗</mo><mo stretchy="false">(</mo><mi>e</mi><msup><mi>X</mi><mn>2</mn></msup><mo>+</mo><mi>f</mi><mo>+</mo><mi>g</mi><mi>Y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>a</mi><mi>e</mi><msup><mi>X</mi><mn>3</mn></msup><mo>+</mo><mo>⋯</mo></mrow><annotation encoding="application/x-tex">(aX+bY+cX^2+dY^3)*(eX^2+f+gY)=aeX^3+\cdots</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">c</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.31em;vertical-align:0em;"></span><span class="minner">⋯</span></span></span></span>", etc. All of <code>simp</code>, <code>tauto</code>, <code>cc</code>, <code>finish</code>, <code>abel</code>, <code>omega</code> or whatever are black magic in the sense that I don't know the algorithms they're using, all I know is that they sometimes work for me.</p>
<p>I guess this leads to a more general point. Part of the reason I have no idea what <code>cc</code> does is that the documentation, "Tries to prove the main goal using congruence closure", means absolutely nothing to me (and probably to most mathematicians). All the tactics which I do think of as black boxes -- perhaps there should be examples of the kind of question they are expected to solve somewhere? My own personal documentation for <code>simp</code> is "tries to prove X=Y by randomly rewriting results of the form A=B which have been tagged with <code>simp</code>". I have no idea what the strategy is but at least it felt like an insight when I realised that this was what it was doing.</p>

<a name="180326256"></a>
<h4><a href="https://leanprover.zulipchat.com/#narrow/stream/113488-general/topic/function%20with%20random%20definition/near/180326256" class="zl"><img src="https://leanprover-community.github.io/assets/img/zulip2.png" alt="view this post on Zulip"></a> <a href="https://leanprover-community.github.io/archive/113488general/60909functionwithrandomdefinition.html#180326256">Bryan Gin-ge Chen (Nov 09 2019 at 18:53)</a>:</h4>
<p>I do think the question of what counts as "trivial" (and how far we are from being able to do trivial things trivially in Lean+mathlib) is very interesting. But that probably deserves its own topic.</p>
<p>On your second paragraph: the mathlib tactics have pretty good docs all in one place <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/tactics.md">here</a> (it looks like they mostly have examples, too). We should probably add links to the "extra" doc page you wrote for <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/simp.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/simp.md"><code>simp</code></a> and the one Patrick wrote for <a href="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/cc.md" target="_blank" title="https://github.com/leanprover-community/mathlib/blob/master/docs/extras/cc.md"><code>cc</code></a>, since those are a bit harder to find.</p>


{% endraw %}

{% include archive_update.html %}