[
    {
        "content": "<p>I've noticed the following behavior (in VSCode).</p>\n<p>I have a project depending on Mathlib. Say I have pinned Mathlib to v4.24.0 in the lakefile. Now I want to update and change the revision to v4.25.2 (say). When I then click on \"Project Actions... -&gt; Update Dependency...\" a message pops up that says \"Nothing to update - all dependencies are up-to-date.\".</p>\n<p>Doing \"lake update\" manually works, though.</p>\n<p>It also works if I first unpin Mathlib and \"Update Dependency...\" and then pin it to the newer version and \"Update Dependency...\" again. But this seems like a waste of time and energy.</p>",
        "id": 560232171,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1764097909
    },
    {
        "content": "<p>Hmm. In this specific case (I did observe the behavior described above when moving from one stable version to the next earlier), there is an additional problem:</p>\n<ul>\n<li>I unpin Mathlib and run <code>lake update</code>. This seems to work OK; <code>lake build</code> only builds the local files.</li>\n<li>I pin Mathlib to v4.25.2 and run <code>lake update</code> again. The output ends with</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>info: mathlib: running post-update hooks\nNot running `lake exe cache get` yet, as the `lake` version does not match the toolchain version in the project.\nYou should run `lake exe cache get` manually.\n</code></pre></div>\n<p>Following the advice:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>&gt; lake exe cache get\n⚠ [9/19] Built Batteries.Data.String.Basic\nwarning: Batteries/Data/String/Basic.lean:10:22: `Substring` has been deprecated: Use `Substring.Raw` instead\n⚠ [11/19] Built Batteries.Data.Array.Match\nwarning: Batteries/Data/Array/Match.lean:61:36: `Nat.lt_succ` has been deprecated: Use `Nat.lt_succ_iff` instead\n\nNote: `Nat.lt_succ_iff` is protected. References to this constant must include its prefix `Nat` even when inside its namespace.\n✖ [13/19] Building Batteries.Data.String.Matcher\ntrace: .&gt; LEAN_PATH=/home/mstoll/lean4/JacobiSum/.lake/packages/Cli/.lake/build/lib/lean:/home/mstoll/lean4/JacobiSum/.lake/packages/batteries/.lake/build/lib/lean:/home/mstoll/lean4/JacobiSum/.lake/packages/Qq/.lake/build/lib/lean:/home/mstoll/lean4/JacobiSum/.lake/packages/aesop/.lake/build/lib/lean:/home/mstoll/lean4/JacobiSum/.lake/packages/proofwidgets/.lake/build/lib/lean:/home/mstoll/lean4/JacobiSum/.lake/packages/importGraph/.lake/build/lib/lean:/home/mstoll/lean4/JacobiSum/.lake/packages/LeanSearchClient/.lake/build/lib/lean:/home/mstoll/lean4/JacobiSum/.lake/packages/plausible/.lake/build/lib/lean:/home/mstoll/lean4/JacobiSum/.lake/packages/mathlib/.lake/build/lib/lean:/home/mstoll/lean4/JacobiSum/.lake/build/lib/lean /home/mstoll/.elan/toolchains/leanprover--lean4---v4.26.0-rc2/bin/lean /home/mstoll/lean4/JacobiSum/.lake/packages/batteries/Batteries/Data/String/Matcher.lean -o /home/mstoll/lean4/JacobiSum/.lake/packages/batteries/.lake/build/lib/lean/Batteries/Data/String/Matcher.olean -i /home/mstoll/lean4/JacobiSum/.lake/packages/batteries/.lake/build/lib/lean/Batteries/Data/String/Matcher.ilean -c /home/mstoll/lean4/JacobiSum/.lake/packages/batteries/.lake/build/ir/Batteries/Data/String/Matcher.c --setup /home/mstoll/lean4/JacobiSum/.lake/packages/batteries/.lake/build/ir/Batteries/Data/String/Matcher.setup.json --json\nwarning: Batteries/Data/String/Matcher.lean:36:12: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:39:45: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:48:60: `Substring.bsize` has been deprecated: Use `Substring.Raw.bsize` instead\n\nNote: The updated constant is in a different namespace. Dot notation may need to be changed (e.g., from `x.bsize` to `Substring.Raw.bsize x`).\nerror: Batteries/Data/String/Matcher.lean:48:50: Invalid field notation: Function `Substring.bsize` does not have a usable parameter of type `Substring` for which to substitute `m.pattern`\n\nNote: Such a parameter must be explicit, or implicit with a unique name, to be used by field notation\nwarning: Batteries/Data/String/Matcher.lean:51:47: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:51:66: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:55:12: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:55:63: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:55:82: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:64:37: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:64:57: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:79:41: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:79:41: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:79:60: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:86:39: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:86:39: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:86:59: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:92:42: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:92:42: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:100:45: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:100:64: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:104:43: `Substring` has been deprecated: Use `Substring.Raw` instead\nwarning: Batteries/Data/String/Matcher.lean:104:63: `Substring` has been deprecated: Use `Substring.Raw` instead\nerror: Batteries/Data/String/Matcher.lean:105:16: Invalid field `findSubstr?`: The environment does not contain `Substring.Raw.findSubstr?`\n  s.toSubstring\nhas type\n  Substring.Raw\nwarning: Batteries/Data/String/Matcher.lean:108:46: `Substring` has been deprecated: Use `Substring.Raw` instead\nerror: Batteries/Data/String/Matcher.lean:109:16: Invalid field `containsSubstr`: The environment does not contain `Substring.Raw.containsSubstr`\n  s.toSubstring\nhas type\n  Substring.Raw\nerror: Lean exited with code 1\nSome required targets logged failures:\n- Batteries.Data.String.Matcher\nerror: build failed\n</code></pre></div>\n<p>So what can I do to get to v4.25.2?</p>",
        "id": 560234899,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1764098822
    },
    {
        "content": "<p>Does 4.25.1 work better? Wondering if this issue is specific to .2 or there's something more going on</p>",
        "id": 560238649,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1764100116
    },
    {
        "content": "<p>The <a href=\"https://github.com/leanprover-community/mathlib4/tags\">list of Mathlib4 tags</a> does not show a <code>v4.25.1</code> tag, only <code>v4.25.0</code> and <code>v4.25.2</code>.</p>",
        "id": 560239498,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1764100409
    },
    {
        "content": "<p>What, where did it go? It was on 0df2e3c2047ada0d7a2e33dbc6ba2788a44a6062. <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span></p>",
        "id": 560248755,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1764103113
    },
    {
        "content": "<p>Sorry, some tags needed replacing overnight. Everything should be normal again now!</p>",
        "id": 560275544,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1764116900
    }
]