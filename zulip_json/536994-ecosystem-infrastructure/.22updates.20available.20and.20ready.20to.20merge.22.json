[
    {
        "content": "<p>Let me start by saying that I have very little understanding of CI and I'm also trying to work out what the purpose of this new channel is, so I'm sorry if this question is in the wrong place.</p>\n<p>Occasionally the FLT gets magic PRs coming from a computer like <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/731\">https://github.com/ImperialCollegeLondon/FLT/pull/731</a> which seem to randomly bump mathlib but there is no CI run and no indication (at least to me) that merging these PRs would not break the project. </p>\n<p>At some point in August I attempted to try and understand what was going on, I created <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/702\">https://github.com/ImperialCollegeLondon/FLT/pull/702</a> , I don't really know what I'm doing, nobody reviewed, and now it's October and I have forgotten everything again (I am old and not very good at computers and not remotely interested in CI). </p>\n<p>(1) Is <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/702\">FLT#702</a> likely safe to merge?<br>\n(2) Am I right in thinking that I should definitely not be merging PRs like <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/700\">FLT#700</a>, <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/692\">FLT#692</a> etc because they are some random bot bumping mathlib and not actually checking to see if FLT compiles afterwards?</p>",
        "id": 544920242,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760520893
    },
    {
        "content": "<p>The target branch of the PRs is <code>main</code>, so I believe your config is correct and the fault lies in the update action (setup), perhaps missing <code>GITHUB_TOKEN</code> passing</p>",
        "id": 544923206,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1760521739
    },
    {
        "content": "<p>The action is supposed to run the build steps by itself already and only <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/main/.github/workflows/update.yml#L38\">create a pull request when this succeeds</a>. So this means that these PRs like <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/700\">FLT#700</a> and <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/692\">FLT#692</a> should be safe to merge.</p>",
        "id": 544957322,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1760531833
    },
    {
        "content": "<p>On the other hand, it would be much better if you could just see the green checkmark on those PRs. This is somewhat hard to accomplish since GitHub disables workflows on pull requests created automatically by workflows. The solution, as Sebastian suggests, involves tokens. Unfortunately I cannot do this for you since I am not an admin on the repository.</p>\n<p>Create <a href=\"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens\">a fine-grained personal access token</a> with write permissions for Contents and Pull requests. Add it <a href=\"https://docs.github.com/en/actions/security-for-github-actions/security-guides/using-secrets-in-github-actions\">as a secret</a> called <code>UPDATE_ACTION_TOKEN</code>. Then add a line <code>${{ secrets.UPDATE_ACTION_TOKEN }}</code> <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/main/.github/workflows/update.yml#L37\">between the CONFIGURATION BLOCK 2 markers</a>.</p>",
        "id": 544958335,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1760532143
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"238446\">@Anne Baanen</span> Can this definitely not be done using the existing <code>GITHUB_TOKEN</code>? E.g. like the backport action in core.</p>",
        "id": 544960746,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1760532825
    },
    {
        "content": "<p>Hmm, I recall that this token wasn't working back when I tested it, but it's certainly worth a try.</p>",
        "id": 544961021,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1760532907
    },
    {
        "content": "<p>I'm surprised the PR comments of the auto-generated PRs are completely blank -- looking at the <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/0973624dadf516011be304b07f8d5aa3e0f7c9d6/.github/workflows/update.yml#L34C15-L34C67\"><code>update.yml</code> workflow</a> it looks like <a href=\"https://github.com/leanprover-community/mathlib-update-action/blob/00cf1601bcc8f6faafa30a04ca1fc7bd0399fee2/do-update/action.yml#L191\">this step</a> in <code>mathlib-update-action</code> is responsible (?), but there is a <code>body</code> parameter there with some helpful text. (Maybe that text could be improved further with a pointer to a README or something with more explicit instructions.)</p>",
        "id": 544962870,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1760533430
    }
]