[
    {
        "content": "<p>I noticed that both <code>Game</code> and <code>Surreal</code> use <code>.mk</code> to denote constructing using an <code>IGame</code>. If I want to define constructors like <code>IGame.mk</code> for <code>Game</code> and <code>Surreal</code> to avoid repeating similar proofs, should I rename <code>Game.mk</code> and <code>Surreal.mk</code> to <code>.ofIGame</code> or rename <code>IGame.mk</code>?</p>",
        "id": 534837998,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1755453737
    },
    {
        "content": "<p>Sorry, I'm not sure what you're asking</p>",
        "id": 534842973,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755459960
    },
    {
        "content": "<p>You want the map <code>Surreal → Game</code>? That already exists as <a href=\"https://vihdzp.github.io/combinatorial-games/CombinatorialGames/Surreal/Basic.html#Surreal.toGame\"><code>Surreal.toGame</code></a>.</p>",
        "id": 534843013,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755460012
    },
    {
        "content": "<p>I think it's supposed to be <code>ofSets</code> but instead of providing two sets provide a function from players into sets</p>",
        "id": 534843060,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755460065
    },
    {
        "content": "<p>Yes, I need these new constructors for <code>Game</code> and <code>Surreal</code> to reduce duplication. But I found that we named different things with <code>.mk</code>.</p>",
        "id": 534855558,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1755476687
    },
    {
        "content": "<p>We have <code>Game.ofSets</code> and <code>Surreal.ofSets</code></p>",
        "id": 534864760,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755487107
    },
    {
        "content": "<p>Ohh wait, you're referring to the <code>IGame.mk</code> you added in your recent PR</p>",
        "id": 534864779,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755487125
    },
    {
        "content": "<p>I don't know how I feel about renaming <code>Game.mk</code> and <code>Surreal.mk</code>. Both of them serve as the canonical constructors, which you get directly from the quotient definition.</p>",
        "id": 534864830,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755487185
    },
    {
        "content": "<p>I think the question is, why not just redefine <code>IGame.ofSets</code> to the <code>IGame.mk</code> you defined?</p>",
        "id": 534864900,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755487248
    },
    {
        "content": "<p>We'll still have the notation, which should remove a lot of the friction.</p>",
        "id": 534864915,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755487267
    },
    {
        "content": "<p>This will make the term behind the <code>{|}</code> notation complex. I suspect this will cause some trouble, but we can give it a try.</p>",
        "id": 534865280,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1755487686
    },
    {
        "content": "<p><code>leftMoves_ofSets</code> and <code>rightMoves_ofSets</code> aren't even def-eq as is. So I'm not too worried.</p>",
        "id": 534866013,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755488487
    },
    {
        "content": "<p>I tried several methods, but they all caused some problems with <code>rw</code> and <code>simp</code>.</p>",
        "id": 534869486,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1755492108
    },
    {
        "content": "<p>Can you give examples?</p>",
        "id": 534869813,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755492545
    },
    {
        "content": "<p><a href=\"https://github.com/vihdzp/combinatorial-games/pull/202\">#202</a></p>",
        "id": 534870711,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1755493444
    },
    {
        "content": "<p>Yikes, that's awful</p>",
        "id": 534872667,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755495247
    },
    {
        "content": "<p>I guess you can't do rewrites with the new <code>ofSets</code> without it counting as rewriting under a binder.</p>",
        "id": 534872699,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755495273
    },
    {
        "content": "<p>Hmm...</p>",
        "id": 534872742,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755495294
    },
    {
        "content": "<p>What's the use cases for your <code>IGame.mk</code>?</p>",
        "id": 534872870,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755495400
    },
    {
        "content": "<p>I mention this because <code>IGame.ofSets</code>, despite being the constructor, isn't used all that much. You use it to define games, of course, but when you're actually proving stuff with them, you more often reason using <code>leftMoves</code> and <code>rightMoves</code>.</p>",
        "id": 534872927,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755495438
    },
    {
        "content": "<p>Presumably something similar is true here too.</p>",
        "id": 534872987,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755495489
    },
    {
        "content": "<p>So I wouldn't mind just calling it <code>IGame.ofSets'</code>, under the reasoning that it's more of a useful auxiliary definition, rather than a part of the API proper.</p>",
        "id": 534873084,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755495574
    },
    {
        "content": "<p>Though maybe you have something else in mind.</p>",
        "id": 534873096,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755495580
    },
    {
        "content": "<p>Currently I have no other uses in mind. The main purpose is to reduce duplicate lemmas and proofs.</p>",
        "id": 534874050,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1755496353
    },
    {
        "content": "<p>I think the primed name would be fine, but I'd like to hear a second opinion.</p>",
        "id": 534874196,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755496465
    },
    {
        "content": "<p>Seems like I found a way to make it work.</p>",
        "id": 534884997,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1755501876
    },
    {
        "content": "<p>Awesome! What was the fix?</p>",
        "id": 534885695,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755502096
    },
    {
        "content": "<p>I defined a function <code>Player.cases</code> as follows</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Player</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">l</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">r</span>\n</code></pre></div>\n<p>I tried using <code>.rec</code> directly before, but that caused worse problems.</p>",
        "id": 534886352,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1755502306
    },
    {
        "content": "<p>Is the <code>simp</code> tag necessary? As I understand it, abbrevs are transparent to <code>simp</code></p>",
        "id": 534886495,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755502351
    },
    {
        "content": "<p>Also, wouldn't you just get the same problem if <code>simp</code> were to unfold this?</p>",
        "id": 534886702,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755502426
    },
    {
        "content": "<p>It may not be necessary. I changed it to <code>abbrev</code> after marking it as <code>simp</code>.</p>\n<p><code>simp</code> seems to only unfold when needed.</p>",
        "id": 534886940,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1755502517
    },
    {
        "content": "<p>Huh.</p>",
        "id": 534886998,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755502541
    },
    {
        "content": "<p>So, <code>simp</code> will unfold <code>cases l r left = l</code> and <code>cases l r right = r</code>, but not unfold <code>cases</code> otherwise?</p>",
        "id": 534887110,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755502589
    },
    {
        "content": "<p>I gave it a try. <code>simp</code> will unfold <code>cases l r p</code> but will not unfold <code>cases l r</code>. And <code>@[simp]</code> is necessary.</p>",
        "id": 534888365,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1755503053
    }
]