[
    {
        "content": "<p>Hi everyone, I'm new to lean and is wondering how to do this after searching and asking AI but found nothing:</p>\n<p>I have a theorem like mul_assoc. I want to know, within certain env like<br>\nimport Mathlib import Aesop open BigOperators Real Nat Topology Rat</p>\n<ol>\n<li>Where is mul_assoc defined? By a ctrl+click I know it's in Mathlib/Algebra/Group/Defs, but I want a script to do this so I cannot use ctrl+click.</li>\n<li>After knowing it's in Mathlib/Algebra/Group/Defs, how can I collect all theorems, defs, etc, in that file? Of course I can use pattern matching, but maybe there are easier way I don't know?</li>\n</ol>\n<p>Thanks a lot!</p>",
        "id": 512112669,
        "sender_full_name": "Jiaming Shan",
        "timestamp": 1744645080
    },
    {
        "content": "<p>Is this a metaprogramming question? If so, let's ask someone to move your topic to <a class=\"stream\" data-stream-id=\"239415\" href=\"/#narrow/channel/239415-metaprogramming-.2F-tactics\">#metaprogramming / tactics</a> <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 512114260,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1744645558
    },
    {
        "content": "<p>Are you writing this script in Lean or some other programming language?</p>",
        "id": 512114835,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744645724
    },
    {
        "content": "<p>Oh I see, but I cannot move or delete the message myself so maybe someone can help me move it?</p>",
        "id": 512114870,
        "sender_full_name": "Jiaming Shan",
        "timestamp": 1744645733
    },
    {
        "content": "<p>I would like to use any script to do this, though lean + python + some bash script is all that I usually use.</p>",
        "id": 512115026,
        "sender_full_name": "Jiaming Shan",
        "timestamp": 1744645775
    },
    {
        "content": "<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Environment.getModuleFor%3F#doc\">docs#Lean.Environment.getModuleFor?</a> to get the file a declaration was defined in.</p>",
        "id": 512116382,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744646179
    },
    {
        "content": "<p>Could you give me an example of how to do this (like a runable demo script?) I tried but seems I'm not familiar about how to use it. Thanks!</p>",
        "id": 512117954,
        "sender_full_name": "Jiaming Shan",
        "timestamp": 1744646546
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"n\">run_cmd</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">getEnv</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"ss\">``add_comm</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">module?</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">getModuleFor?</span><span class=\"w\"> </span><span class=\"n\">name</span>\n<span class=\"w\">  </span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"n\">m!</span><span class=\"s2\">\"{module?}\"</span><span class=\"w\"> </span><span class=\"c1\">-- some (Mathlib.Algebra.Group.Defs)</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"ss\">`not_a_theorem</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">module?</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">getModuleFor?</span><span class=\"w\"> </span><span class=\"n\">name</span>\n<span class=\"w\">  </span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"n\">m!</span><span class=\"s2\">\"{module?}\"</span><span class=\"w\"> </span><span class=\"c1\">-- none</span>\n</code></pre></div>",
        "id": 512130559,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744649860
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/how.20to.20get.20related.20theorems\">#general &gt; how to get related theorems</a> by <span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span>.</p>",
        "id": 512135442,
        "sender_full_name": "Notification Bot",
        "timestamp": 1744651207
    },
    {
        "content": "<p>Thanks a lot! It works!</p>",
        "id": 512179918,
        "sender_full_name": "Jiaming Shan",
        "timestamp": 1744667292
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"899153\">Jiaming Shan</span> has marked this topic as resolved.</p>",
        "id": 512623234,
        "sender_full_name": "Notification Bot",
        "timestamp": 1744825470
    }
]