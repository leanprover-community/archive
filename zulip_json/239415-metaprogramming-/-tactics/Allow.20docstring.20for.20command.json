[
    {
        "content": "<p>Suppose I define a new command. How do I allow docstring comments to treat this command as a declaration (it is adding them). More context here:<br>\n<a href=\"#narrow/stream/458659-Equational/topic/Refactoring.20with.20Euqation.20Command/near/474930942\">https://leanprover.zulipchat.com/#narrow/stream/458659-Equational/topic/Refactoring.20with.20Euqation.20Command/near/474930942</a></p>",
        "id": 474931821,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728091696
    },
    {
        "content": "<p>More specifically for this command : <a href=\"https://github.com/teorth/equational_theories/blob/1f2b19606c96d6550c8d8bbce087e6d09cc5e377/equational_theories/EquationsCommand.lean#L11\">https://github.com/teorth/equational_theories/blob/1f2b19606c96d6550c8d8bbce087e6d09cc5e377/equational_theories/EquationsCommand.lean#L11</a></p>",
        "id": 474931913,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728091775
    },
    {
        "content": "<p>You can see how, e.g., <a href=\"https://leanprover-community.github.io/mathlib4_docs/Batteries/Tactic/Alias.html#Batteries.Tactic.Alias.alias\">Batteries.Tactic.Alias.alias</a> does it.</p>",
        "id": 474941859,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1728100206
    },
    {
        "content": "<p>It looks like the key is <code>mods:declModifiers</code> in</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kn\">alias</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">mods</span><span class=\"o\">:</span><span class=\"n\">declModifiers</span><span class=\"w\"> </span><span class=\"s2\">\"alias \"</span><span class=\"w\"> </span><span class=\"kn\">alias</span><span class=\"o\">:</span><span class=\"n\">ident</span><span class=\"w\"> </span><span class=\"s2\">\" := \"</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"o\">:</span><span class=\"n\">ident</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"n\">Command</span><span class=\"bp\">.</span><span class=\"n\">liftTermElabM</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">declMods</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">elabModifiers</span><span class=\"w\"> </span><span class=\"n\">mods</span>\n<span class=\"w\">    </span><span class=\"c1\">-- Create a decl named `declName`</span>\n<span class=\"w\">    </span><span class=\"n\">addDocString'</span><span class=\"w\"> </span><span class=\"n\">declName</span><span class=\"w\"> </span><span class=\"n\">declMods</span><span class=\"bp\">.</span><span class=\"n\">docString?</span>\n</code></pre></div>",
        "id": 474942011,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1728100423
    },
    {
        "content": "<p>That worked. Thanks</p>",
        "id": 474985605,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728138334
    }
]