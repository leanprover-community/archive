[
    {
        "content": "<p>Among Lean's metaprogramming features, can one find some operation that takes as input the identifier of a theorem and output some kind of generalized tree/graph representation of its proof script? E.g. a tree whose leaves would be the premises of the said theorem, the root its end goal (conclusion) and with the other nodes corresponding to some intermediate goals occurring within the proof script; the parents of a node being the statements that used this node to be discharged (in this sense a child can have more than one parent).</p>",
        "id": 512574729,
        "sender_full_name": "Anthony Bordg",
        "timestamp": 1744815447
    },
    {
        "content": "<p>Well we have <code>#explode</code></p>",
        "id": 512575156,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744815545
    },
    {
        "content": "<p>You could also interpret the <code>Expr</code> of the proof as a sort of tree</p>",
        "id": 512575349,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744815596
    },
    {
        "content": "<p>The nodes are the subexpressions</p>",
        "id": 512575541,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744815625
    },
    {
        "content": "<p>It depends on how explicitly you want this, but the <code>InfoTree</code> contains <em>a lot</em> of this information.</p>",
        "id": 512576201,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744815768
    },
    {
        "content": "<p>Is paperproof along the lines of what you're asking for?</p>",
        "id": 512576303,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744815794
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/239415-metaprogramming-.2F-tactics/topic/tree.20structure.20from.20a.20proof/near/512575156\">said</a>:</p>\n<blockquote>\n<p>Well we have <code>#explode</code></p>\n</blockquote>\n<p>Does it require to import some libraries?</p>",
        "id": 512577334,
        "sender_full_name": "Anthony Bordg",
        "timestamp": 1744816059
    },
    {
        "content": "<p>It's in <code>Mathlib/Tactic/Explode.lean</code> and produces a fitch-style proof string</p>",
        "id": 512577860,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744816198
    },
    {
        "content": "<p>Thank you. Good to know, though I'm not sure how usable this would be, because it can produce huge 4-column diagrams.</p>",
        "id": 512587294,
        "sender_full_name": "Anthony Bordg",
        "timestamp": 1744818578
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/239415-metaprogramming-.2F-tactics/topic/tree.20structure.20from.20a.20proof/near/512576201\">said</a>:</p>\n<blockquote>\n<p>It depends on how explicitly you want this, but the <code>InfoTree</code> contains <em>a lot</em> of this information.</p>\n</blockquote>\n<p>Actually, something a little less explicit than <code>#explode</code> may be better. Now I have to understand how to use <code>InfoTree</code> :)</p>",
        "id": 512590944,
        "sender_full_name": "Anthony Bordg",
        "timestamp": 1744819439
    },
    {
        "content": "<p>I don't have a thorough understanding of <code>InfoTree</code>s, but my mental model is that all the information that you can get by placing your cursor anywhere in a command and looking at the infoview is contained in the <code>InfoTree</code> (and more!).</p>",
        "id": 512598944,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744821611
    },
    {
        "content": "<p>So, you'll probably have to do quite a bit of pruning to get what you want, but it'll be there!</p>",
        "id": 512599026,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1744821636
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/239415-metaprogramming-.2F-tactics/topic/tree.20structure.20from.20a.20proof/near/512576303\">said</a>:</p>\n<blockquote>\n<p>Is paperproof along the lines of what you're asking for?</p>\n</blockquote>\n<p>Thank you for the pointer, it's certainly relevant - and a nice tool for displaying proof histories! - even though it's more oriented as a displaying tool for human visualisation and less as a data-extraction tool for ML.</p>",
        "id": 512616113,
        "sender_full_name": "Anthony Bordg",
        "timestamp": 1744824372
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"125073\">@Anthony Bordg</span> a little while ago I made <a href=\"http://www.github.com/adamtopaz/expr_graph\">www.github.com/adamtopaz/expr_graph</a> . I don’t know if it works with current mathlib. If you think this is useful for you, please let me know and I’ll update it to the latest version of lean/mathlib.</p>",
        "id": 512706759,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1744847011
    },
    {
        "content": "<p>It’s not quite the tree-like structure you’re looking for, but it’s related, and it does work for arbitrary expressions</p>",
        "id": 512706882,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1744847071
    }
]