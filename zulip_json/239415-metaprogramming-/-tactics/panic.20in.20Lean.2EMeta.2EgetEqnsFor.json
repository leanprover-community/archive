[
    {
        "content": "<p>Here is a MWE:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">dbg_trace</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">getEqnsFor?</span><span class=\"w\"> </span><span class=\"ss\">`Int.negOfNat.match_1</span>\n<span class=\"o\">)</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">PANIC at _private.Lean.Environment.0.Lean.AsyncConsts.add Lean.Environment:443:4:</span>\n<span class=\"cm\">duplicate normalized declaration name Int.negOfNat.match_1.eq_1 vs.</span>\n<span class=\"cm\">_private.Results.Robustness.0.Int.negOfNat.match_1.eq_1</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>",
        "id": 525232352,
        "sender_full_name": "Chase Norman",
        "timestamp": 1750624298
    },
    {
        "content": "<p>That's not what you're supposed to do (you're essentially asking it to look into the definition of the match statement and figure stuff out from there!) You're probably looking for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Meta.Match.getEquationsFor#doc\">docs#Lean.Meta.Match.getEquationsFor</a></p>",
        "id": 525233997,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1750626877
    },
    {
        "content": "<p>Is this the only case of a constant that would panic? I’m calling this function on the const symbols in an Expr, so it could be a match, but usually isn’t.</p>",
        "id": 525234071,
        "sender_full_name": "Chase Norman",
        "timestamp": 1750627012
    },
    {
        "content": "<p>I think so..? You can test whether to use <code>Lean.Meta.getEqnsFor?</code> or <code>Lean.Meta.Match.getEquationsFor?</code> via <code>Lean.Meta.isMatcher</code></p>",
        "id": 525260064,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1750658740
    }
]