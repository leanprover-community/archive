[
    {
        "content": "<p>I'm writing a function that delta-expands the definition of some symbols in an <code>Expr</code>. Is it possible to mark a subexpression using <code>.mdata</code> so it contains info about which symbol was expanded?</p>",
        "id": 506222755,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1742233816
    },
    {
        "content": "<p>Sure, <code>.mdata</code> contains a KVMap, which can contain a <code>Name</code> value.</p>",
        "id": 506228973,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742235493
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/239415-metaprogramming-.2F-tactics/topic/Expansion.20data.20in.20.2Emdata/near/506228973\">said</a>:</p>\n<blockquote>\n<p>Sure, <code>.mdata</code> contains a KVMap, which can contain a <code>Name</code> value.</p>\n</blockquote>\n<p>What keys are already reserved for other purposes?</p>",
        "id": 506229034,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1742235519
    },
    {
        "content": "<p>If you need a pointer to an example, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.mkAnnotation#doc\">docs#Lean.mkAnnotation</a> and the following code show how to create/read mdata.</p>",
        "id": 506229104,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742235542
    },
    {
        "content": "<p>For unique keys, I think a good way is to use <code>decl_name%</code>. I can try to find an example for you.</p>",
        "id": 506229209,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742235581
    },
    {
        "content": "<p>Look for <code>decl_name%</code> in Mathlib/Tactic/TermCongr.lean</p>",
        "id": 506229393,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742235631
    },
    {
        "content": "<p>That file also has some mdata handling.</p>",
        "id": 506229462,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742235655
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"599027\">Leni Aniva</span> has marked this topic as resolved.</p>",
        "id": 506249830,
        "sender_full_name": "Notification Bot",
        "timestamp": 1742241948
    }
]