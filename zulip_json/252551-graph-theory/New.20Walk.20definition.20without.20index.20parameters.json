[
    {
        "content": "<p>I would actually like to PR that definition if there is support</p>",
        "id": 568707170,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785103
    },
    {
        "content": "<p>Since posting that definition I have developed nice API for both that and the digraph version</p>",
        "id": 568707182,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785121
    },
    {
        "content": "<p>And given how similar they are, it suggests that a common typeclass <code>Adj</code> with a binary adjacency relation would be useful here and for any future graph definitions. This is then sufficient for walks</p>",
        "id": 568707248,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785192
    },
    {
        "content": "<p>The current version is (ascii-ed out the last because I am typing on a phone).</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"bp\">.</span><span class=\"n\">ListChainWalk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">V</span>\n<span class=\"w\">  </span><span class=\"n\">chainAdj</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">IsChain</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">support</span>\n<span class=\"w\">  </span><span class=\"n\">support_nonempty</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Not</span><span class=\"w\"> </span><span class=\"n\">support</span><span class=\"bp\">.</span><span class=\"n\">Nil</span>\n</code></pre></div>",
        "id": 568707521,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785279
    },
    {
        "content": "<p>Bundling the non empty support allows us to use list defs that require the list to be nonemoty.</p>",
        "id": 568707560,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785316
    },
    {
        "content": "<p>I also have an induction principle for consing vertices and two different definitions of appending walks</p>",
        "id": 568707593,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785342
    },
    {
        "content": "<p>6 messages were moved here from <a href=\"#narrow/channel/252551-graph-theory/topic/.60p.2EgetVert.20n.60.20vs.20.60p.2Esupport.5Bn.5D.60\">#graph theory &gt; &#96;p.getVert n&#96; vs &#96;p.support&#91;n&#93;&#96;</a> by <span class=\"user-mention silent\" data-user-id=\"870257\">Jakub Nowak</span>.</p>",
        "id": 568707665,
        "sender_full_name": "Notification Bot",
        "timestamp": 1768785420
    },
    {
        "content": "<p>And the great news is, I also have it for subgraphs (which unfortunately exists in mathlib as a separate definition in mathlib).</p>",
        "id": 568707701,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785454
    },
    {
        "content": "<p><strong>important</strong> : The reason I suggest an Adj typeclass is because adjacency is the only relevant parameter and the definition of Walks for SimpleGraph, Subgraphs, and Digraphs is identical</p>",
        "id": 568707763,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785550
    },
    {
        "content": "<p>I think we should modify definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph#doc\">docs#SimpleGraph</a> to have set of vertices, instead of further developing <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.Subgraph#doc\">docs#SimpleGraph.Subgraph</a> API.</p>",
        "id": 568707779,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768785580
    },
    {
        "content": "<p>We might want to have typeclass for different graph definitions. Which would include <code>.Adj</code>.</p>",
        "id": 568707820,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768785639
    },
    {
        "content": "<p>Hm, actually, it would include <code>.Adj</code> and nothing else. Cause we probably want assumption <code>symmetric</code> to be in separate typeclasses.</p>",
        "id": 568707950,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768785789
    },
    {
        "content": "<p>Yeah that‚Äôs a major refactor. That <span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> and <span class=\"user-mention\" data-user-id=\"387244\">@Ya√´l Dillies</span> are also planning.</p>",
        "id": 568707956,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785795
    },
    {
        "content": "<p>I have wanted a vertex set since early last year</p>",
        "id": 568707967,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785808
    },
    {
        "content": "<p>But because the situation is trivial for Digraphs I started <a href=\"https://github.com/leanprover-community/mathlib4/pull/33466\">mathlib4#33466</a>   It is ready for review and if someone wants to add some commits that‚Äôs also welcome</p>",
        "id": 568708012,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785864
    },
    {
        "content": "<p>The next step would be to make SimpleGraph extend Digraph</p>",
        "id": 568708019,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785883
    },
    {
        "content": "<p>Or just add vertex sets there</p>",
        "id": 568708026,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785898
    },
    {
        "content": "<p>And typeclass instances related to order relations  will change a bit</p>",
        "id": 568708079,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768785960
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/252551-graph-theory/topic/New.20Walk.20definition.20without.20index.20parameters/near/568708019\">said</a>:</p>\n<blockquote>\n<p>The next step would be to make SimpleGraph extend Digraph</p>\n</blockquote>\n<p>I think we don't want that. In SimpleGraph edges are <code>Sym2 V</code>, and in Digraph edges are <code>V √ó V</code>. We don't want to leak definitions about edges from Digraph to SimpleGraph.</p>",
        "id": 568708206,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768786110
    },
    {
        "content": "<p>Anyway. I‚Äôd focus on getting <a href=\"https://github.com/leanprover-community/mathlib4/pull/33466\">mathlib4#33466</a> merged first</p>",
        "id": 568708256,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768786166
    },
    {
        "content": "<p>Does this big planned refactor means something for bystanders too? I mean, would it force us (or someone else) to reprove proofs already done?</p>\n<p>I hope this isn't a dumb question. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 568718629,
        "sender_full_name": "IlmƒÅrs Cƒ´rulis",
        "timestamp": 1768796959
    },
    {
        "content": "<p>It depends on whether will current <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.Walk#doc\">docs#SimpleGraph.Walk</a> be deprecated. That wasn't discussed.</p>",
        "id": 568744627,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768811284
    },
    {
        "content": "<p>I just wanted to let you all know that I posted the digraph version as a PR to my fork of mathlib for demo purposes. It's not done yet, but you can see where it is headed:<br>\n<a href=\"https://github.com/Shreyas4991/mathlib4/pull/1/changes\">https://github.com/Shreyas4991/mathlib4/pull/1/changes</a></p>",
        "id": 568760375,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768816375
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 575632193,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771963878
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 575632473,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771963956
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 575632482,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771963959
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/252551-graph-theory/topic/New.20Walk.20definition.20without.20index.20parameters/near/568707170\">said</a>:</p>\n<blockquote>\n<p>I would actually like to PR that definition if there is support</p>\n</blockquote>\n<p>What's the motivation for the new definition? From what I've seen, the proposed API is quite a bit more limited, and is quite a bit more involved to use in practice, and we don't get many benefits in application.</p>",
        "id": 576127406,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772141693
    },
    {
        "content": "<p>Index headaches disappear. Also I dispute the claim that it is more involved to use.</p>",
        "id": 576127524,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772141747
    },
    {
        "content": "<p>You don't have to do substs to return <code>Walk.nil</code> in a function that has a return type <code>G.Walk u v</code></p>",
        "id": 576127622,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772141781
    },
    {
        "content": "<p>What kind of index headaches?</p>",
        "id": 576127634,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772141786
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/252551-graph-theory/topic/New.20Walk.20definition.20without.20index.20parameters/near/576127622\">said</a>:</p>\n<blockquote>\n<p>You don't have to do substs to return <code>Walk.nil</code> in a function that has a return type <code>G.Walk u v</code></p>\n</blockquote>\n<p>this</p>",
        "id": 576127656,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772141794
    },
    {
        "content": "<p>I have put this to use in my berge lemma formalization and it substantially simplified proofs of theorems</p>",
        "id": 576127738,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772141829
    },
    {
        "content": "<p>By reducing them to list theorems</p>",
        "id": 576127768,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772141835
    },
    {
        "content": "<p>I dispute the claim that this is a headache!</p>",
        "id": 576127780,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772141837
    },
    {
        "content": "<p>Having used them in three different places, I prefer my definition</p>",
        "id": 576127824,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772141859
    },
    {
        "content": "<p>Interesting, do you have a before and after?</p>",
        "id": 576127825,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772141860
    },
    {
        "content": "<p>Private repo.</p>",
        "id": 576127840,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772141868
    },
    {
        "content": "<p>The reason I ask is that I'd seen a proof of Berge in a student project a while ago, and it was relatively short and clean from what I remember.</p>",
        "id": 576127900,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772141897
    },
    {
        "content": "<p>There was no proof in any of the publicly posted projects here.</p>",
        "id": 576127944,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772141922
    },
    {
        "content": "<p>There were attempts that never showed up as public repos or mathlib PRs.</p>",
        "id": 576127977,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772141933
    },
    {
        "content": "<p>Indeed, this was also a private repo for assessed coursework</p>",
        "id": 576128004,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772141945
    },
    {
        "content": "<p>Fair enough. But I have done quite a bit of background work with TCS formalization, and I find the list approach better. List.IsChain already has all the lemmas and inductiveness we need. G.Walk is just too tedious. The fact that a nil and cons walk have two difrerent types is a big enough headache.</p>",
        "id": 576128128,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142013
    },
    {
        "content": "<p>And, to be clear, that's why I'd like some more concrete evidence for why a definition without index parameters is better. The current definition has been used in fairly substantial projects in mathematical graph theory and in TCS (some public and some private) and I haven't encountered any issues, and certainly not issues that would be resolved by changing the definition. So I would be interested to hear about where you got stuck.</p>",
        "id": 576128260,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772142075
    },
    {
        "content": "<p>That's a fair point. This is why I haven't actively pushed this beyond showing my definitions in different repos. Under my current schedule making these projects public won't happen for three months (maybe even more). But I do recommend using my definitions and checking if you can simplify your proofs substantially. I have currently adopted this definition for SimpleGraph, Subgraph, and also Digraph. The latter two don't have Walk and Path API in mathlib anyway.</p>",
        "id": 576128630,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142254
    },
    {
        "content": "<p>And I would also make a separate argument that it is easier to work with the support list than with <code>G.Walk u v</code>, both cognitively and in lean. Because it's just a list.</p>",
        "id": 576128859,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142354
    },
    {
        "content": "<p>I had tried an index-free definition, and the proofs were not substantially better (most got very slightly worse, but not significantly), that's why I could confidently claim that the issues weren't resolved by changing the definition! <br>\nAs always, I can believe that there are missing lemmas and constructors for the current definition, and if you can identify them then we can discuss adding them. But much better evidence and arguments would be needed to re-do the definition, in particular because it also changes the type of the definition.</p>",
        "id": 576128998,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772142413
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/252551-graph-theory/topic/New.20Walk.20definition.20without.20index.20parameters/near/576128859\">said</a>:</p>\n<blockquote>\n<p>And I would also make a separate argument that it is easier to work with the support list than with <code>G.Walk u v</code>, both cognitively and in lean. Because it's just a list.</p>\n</blockquote>\n<p>Firstly this is subjective (and also personally feel the exact opposite: my mental model of a walk is as a sequence of edges, not just a bare sequence of vertices), but secondly don't forget that you can always take the list of vertices from a walk (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.Walk.support#doc\">docs#SimpleGraph.Walk.support</a>), and perform operations there. So it's not like you're banned from thinking about the vertex list, we have API for that point of view for those who prefer it.</p>",
        "id": 576129191,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772142497
    },
    {
        "content": "<p>I know of the support list, I just don't think most graph walk lemmas are stated in terms of support</p>",
        "id": 576129316,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142549
    },
    {
        "content": "<p>also sometimes you just want to manipulate walks and paths as vertex sequences in algorithms on simplegraphs.</p>",
        "id": 576129373,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142574
    },
    {
        "content": "<p>So you have a path, you add or remove some vertices. You get a new path.</p>",
        "id": 576129409,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142590
    },
    {
        "content": "<p>This is painless in my definition</p>",
        "id": 576129436,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142603
    },
    {
        "content": "<p>And not all graph walk lemmas should be stated in terms of support, for those of us who prefer thinking about the walk in terms of its edges. But there are over 200 declarations about the support of graph walks, so you already can manipulate walks and paths as vertex sequences in mathlib.</p>",
        "id": 576129482,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772142622
    },
    {
        "content": "<p>I know that, but if you walk is just a list of vertices, then this manipulation is far more trivial</p>",
        "id": 576129606,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142673
    },
    {
        "content": "<p>Note that I am not opposed to what mathlib calls defeq abuse in my projects. If a proof follows from reduction, that's sometimes a plus in my book.</p>",
        "id": 576129632,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142685
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"466334\">@Shreyas Srinivas</span> For what it's worth, using <code>List.IsChain</code> was already considered when we defined the current <code>Walk</code>.</p>\n<p>I think it's valid to want to work with lists of vertices, but this its own type. As I'm sure you know from TCS, there's rarely a one-size-fits-all type that handles all possible use cases.</p>\n<p>I would suggest the following:</p>\n<ol>\n<li>Create a <code>structure</code> wrapping up endpoints plus a <code>SimpleGraph.Walk</code>, for the very useful case of a walk without vertex endpoints.</li>\n<li>Create a constructor for this structure that uses the <code>List.IsChain</code> list interface.</li>\n<li>Implement supporting API to be able to do induction using this interface.</li>\n</ol>",
        "id": 576129726,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1772142728
    },
    {
        "content": "<p>Creating a structure wrapping up endpoint isn't going to cause a lot of duplication?</p>",
        "id": 576129915,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1772142808
    },
    {
        "content": "<p>Fwiw, I am not claiming that my approach is perfect for mathlib. But it maps better to my mental model of walks and paths and I get them from the algorithms side of TCS.</p>",
        "id": 576129993,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142844
    },
    {
        "content": "<p>and the avoidance of index issues, especially during cases/induction makes it even better.</p>",
        "id": 576130045,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142872
    },
    {
        "content": "<p>The place I encountered the most annoying index issues was inducting on walks.</p>",
        "id": 576130101,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142904
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/252551-graph-theory/topic/New.20Walk.20definition.20without.20index.20parameters/near/576129726\">said</a>:</p>\n<blockquote>\n<p>As I'm sure you know from TCS, there's rarely a one-size-fits-all type that handles all possible use cases.</p>\n</blockquote>\n<p>Yes, this is really the key point. The indexed version makes it easy to talk about the non-indexed version, but not vice versa. And since mathlib should be allowing one to talk about whichever version they prefer, we should take the primary definition as the one which allows making all the others conveniently. <br>\nMy objection isn't to allowing the perspective of walk-as-vertex-list, I instead object to <em>dis</em>allowing the perspective of walk-as-matched-edge-list.</p>",
        "id": 576130104,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772142905
    },
    {
        "content": "<p>We likely need to restate results <span class=\"user-mention\" data-user-id=\"646655\">@Iv√°n Renison</span>, but we can't be allergic to the appearance of duplication. I don't think there's any way around this. I've seen the need for both indexed walks and non-indexed walks.</p>",
        "id": 576130105,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1772142906
    },
    {
        "content": "<p>I don't wish to disallow anything. A couple of years ago I mentioned that in TCS we don't go for \"most abstract definition\" in our theory building, we go for collections of definitions and lemmas that let us move between them as required.</p>",
        "id": 576130295,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772142981
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/252551-graph-theory/topic/New.20Walk.20definition.20without.20index.20parameters/near/576130101\">said</a>:</p>\n<blockquote>\n<p>The place I encountered the most annoying index issues was inducting on walks.</p>\n</blockquote>\n<p>I'm very surprised to hear this, since induction on walks is used super commonly in mathlib already, whereas the statement of induction for walks in the PR linked for HasAdj with the non-indexed definition is shockingly long, and the usages are also not very pleasant.</p>",
        "id": 576130309,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772142986
    },
    {
        "content": "<p>Fwiw, in my case you can also work with edgeLists</p>",
        "id": 576130406,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772143021
    },
    {
        "content": "<p>It's fairly straightforward to generate the edge list of a walk from that List based definition</p>",
        "id": 576130450,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772143037
    },
    {
        "content": "<p><a href=\"https://github.com/Shreyas4991/mathlib4/pull/1/changes#diff-b55a9b9aa0920cc83b0887bfa90b6cddc3fd4113c6736931da7f7cb75497db5eR147\">https://github.com/Shreyas4991/mathlib4/pull/1/changes#diff-b55a9b9aa0920cc83b0887bfa90b6cddc3fd4113c6736931da7f7cb75497db5eR147</a></p>",
        "id": 576130551,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772143082
    },
    {
        "content": "<p>In Berge's lemma I use edge lists.</p>",
        "id": 576130695,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772143143
    },
    {
        "content": "<p>Which btw also suggests a non-indexed edgeList based definition of walks. Instead of <code>List.IsChain G.Adj</code> you have <code>List.IsChain ...</code> where <code>...</code> is a relation on two edges that says that the second component of the first edge equals the first component of the second edge. At least, this walks for directed walks even on SimpleGraph.</p>",
        "id": 576130731,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772143157
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"466334\">@Shreyas Srinivas</span> Please read what I wrote carefully, since I didn't say anything about whether yours was better or not. It's simply a different approach (and also one we evaluated). A big reason <code>List.IsChain</code> is so well developed was in case it was ever used for formalizing some aspect of walks. <strong>Edit:</strong> I'd give credit to Yakov Pechersky here for using <code>List.IsChain</code> for walks.</p>\n<p>For this discussion, can I ask that we avoid making broad claims like \"it's better/worse\" and instead illustrate points with concrete examples?</p>",
        "id": 576130768,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1772143176
    },
    {
        "content": "<p>I am not claiming something is better or worse in general. I am describing what worked better or worse for me</p>",
        "id": 576131131,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772143297
    },
    {
        "content": "<p>Comparing your file with indexed walks: </p>\n<ul>\n<li>the definition of <code>cons</code> (which I'm sure you'll agree is a fundamental operation on walks) is 16 lines long, whereas in mathlib it's definitional</li>\n<li><code>support</code> is definitional in yours but it's 2 lines in mathlib</li>\n<li>the definition of edge list is 8 lines long in yours but 2 lines in mathlib</li>\n<li>most of the proofs in your example file are quite a bit longer and more intricate than the equivalent mathlib proofs</li>\n<li>cons_induction takes what looks like 40 lines with your definition, but is definitional in mathlib. it's not used in the file you sent, so it's hard to judge how nice it is to use, but the mathlib one is used 18 times and the \"setup\" before getting to one of the cases is one line</li>\n</ul>\n<p>So I'm still interested if you can share a full concrete example where your definition worked better.</p>",
        "id": 576131526,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772143463
    },
    {
        "content": "<p>Concretely, I like vertex and edge list definitions because I want to traverse them easily, update weight assignments on them, induct on them and so on in flows. In Berge's lemma I am taking two walks and xoring them. In all these cases, I personally found the fact that each walk has a different type, made things difficult. Maybe there is an optimal path through Mathlib's API I missed. But by quickly hashing out this API, I got rid of those problems.</p>",
        "id": 576131534,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772143466
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246273\">Bhavik Mehta</span> <a href=\"#narrow/channel/252551-graph-theory/topic/New.20Walk.20definition.20without.20index.20parameters/near/576131526\">said</a>:</p>\n<blockquote>\n<p>Comparing your file with indexed walks: </p>\n<ul>\n<li>the definition of <code>cons</code> (which I'm sure you'll agree is a fundamental operation on walks) is 16 lines long, whereas in mathlib it's definitional</li>\n<li><code>support</code> is definitional in yours but it's 2 lines in mathlib</li>\n<li>the edge list is 8 lines long in yours but 2 lines in mathlib</li>\n<li>most of the proofs in your example file are quite a bit longer and more intricate than the equivalent mathlib proofs</li>\n<li>cons_induction takes what looks like 40 lines with your definition,<br>\nSo I'm still interested if you can share a full concrete example where your definition worked better.</li>\n</ul>\n</blockquote>\n<p>I didn't invest any effort in golfing proofs or definitions of API.</p>",
        "id": 576131629,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772143504
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/252551-graph-theory/topic/New.20Walk.20definition.20without.20index.20parameters/near/576129606\">said</a>:</p>\n<blockquote>\n<p>I know that, but if you walk is just a list of vertices, then this manipulation is far more trivial</p>\n</blockquote>\n<p>I would argue that a \"far more trivial\" definition or proof shouldn't be this much longer, even if ungolfed</p>",
        "id": 576131834,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772143577
    },
    {
        "content": "<p>It's more well structured to me, readability wise. But I rest my case. I am not pushing for any change upstream right now, since I have a lot on my plate. Maybe I will return to this in half a year.</p>",
        "id": 576132044,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1772143667
    },
    {
        "content": "<p>I think that we should considered the <code>HasAdj</code> refactorization and this possible change as separate things. I was going to make <code>HasAdj.Walk</code> with the support because it was suggested in <a class=\"message-link\" href=\"/#narrow/channel/252551-graph-theory/topic/Digraphs/near/575631718\">#graph theory &gt; Digraphs @ üí¨</a>, but better not to mix things.<br>\nSo, unless you think I should do something different, for <code>HasAdj.Walk</code> I will mirror <code>SimpleGraph.Walk</code>, and then if the decision is to make some change we do it</p>",
        "id": 576132268,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1772143762
    },
    {
        "content": "<p>Here's a concrete example where I believe defining a walk in terms of its support would be vastly superior:<br>\n(ignore the list lemmas at the beginning)</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">List</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">tail_take</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">take</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"bp\">.</span><span class=\"n\">take</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">drop_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">drop_take</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">dropLast_take'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">take</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"bp\">.</span><span class=\"n\">take</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">dropLast_eq_take</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">take_take</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">sub_min_sub_right</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">tail_drop'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">drop</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"bp\">.</span><span class=\"n\">drop</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">dropLast_drop</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">drop</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"bp\">.</span><span class=\"n\">drop</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">dropLast_eq_take</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">sub_right_comm</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">drop_take</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">eq_of_head?_eq_of_tail_eq</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hh</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">head?</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">head?</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">ht</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">hnil‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">head?_eq_none_iff</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hnil‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">head?_eq_none_iff</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">cons_head_tail</span><span class=\"w\"> </span><span class=\"n\">hnil‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">cons_head_tail</span><span class=\"w\"> </span><span class=\"n\">hnil‚ÇÇ</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">grind</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">tail_eq_nil_iff</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">‚Üî</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">length_tail</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">length_eq_zero_iff</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">dropLast_eq_nil_iff</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">‚Üî</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">length_dropLast</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">length_eq_zero_iff</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">eq_of_tail_eq_of_dropLast_eq</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">l‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">ht</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hnil‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hnil‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">dropLast_eq_nil_iff</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">cons_head_tail</span><span class=\"w\"> </span><span class=\"n\">hnil‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">cons_head_tail</span><span class=\"w\"> </span><span class=\"n\">hnil‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ht</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hdnil‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">dropLast_eq_nil_iff</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hdnil‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">l‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">dropLast_eq_nil_iff</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">head_dropLast</span><span class=\"w\"> </span><span class=\"n\">hdnil‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">head_dropLast</span><span class=\"w\"> </span><span class=\"n\">hdnil‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hd</span><span class=\"o\">]</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">List</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"bp\">.</span><span class=\"n\">Walk</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">support_eq_iff_darts_eq</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">u‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">p‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÇ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hnil</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬¨</span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">Nil</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"bp\">‚Üî</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">darts</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">darts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">?_‚ü©</span>\n<span class=\"w\">  </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd_injective</span><span class=\"bp\">.</span><span class=\"n\">list_map</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">rightInverse_unzip_zip</span><span class=\"bp\">.</span><span class=\"n\">injective</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">‚àò</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Dart</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"bp\">‚àò</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Dart</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">map_fst_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">map_snd_darts</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">cons_map_snd_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">cons_map_snd_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬¨</span><span class=\"n\">p‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">Nil</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">darts_eq_nil</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">suffices</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">firstDart</span><span class=\"w\"> </span><span class=\"n\">hnil</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">firstDart</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬∑.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">    </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">firstDart_eq_head_darts</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">support_infix_iff_darts_infix</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">u‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">p‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÇ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hnil</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬¨</span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">Nil</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"o\">:</span><span class=\"bp\">+</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"bp\">‚Üî</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">darts</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"o\">:</span><span class=\"bp\">+</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">darts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">infix_iff_getElem?</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">infix_iff_getElem?</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">k</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">k</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">hi</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">?_‚ü©</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">k</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">k</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">hi</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">?_‚ü©‚ü©</span>\n<span class=\"w\">  </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">getElem?_pos</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">some_inj</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">fst_darts_getElem</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">snd_darts_getElem</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">getElem?_pos</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">some_inj</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">hi'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">length</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">      </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_nil_iff_lt_length</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">snd_darts_getElem</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">i</span>\n<span class=\"w\">    </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">fst_darts_getElem</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">support_prefix_iff_darts_prefix</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">u‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">p‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÇ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hnil</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬¨</span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">Nil</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"bp\">&lt;+</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"bp\">‚Üî</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">darts</span><span class=\"w\"> </span><span class=\"bp\">&lt;+</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">darts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">prefix_iff_eq_take</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">prefix_iff_eq_take</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">?_‚ü©</span>\n<span class=\"w\">  </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">dropLast_take'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_fst_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_fst_darts</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">tail_take</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_snd_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_snd_darts</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd_injective</span><span class=\"bp\">.</span><span class=\"n\">list_map</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">rightInverse_unzip_zip</span><span class=\"bp\">.</span><span class=\"n\">injective</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">‚àò</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Dart</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"bp\">‚àò</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Dart</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">map_take</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">eq_of_tail_eq_of_dropLast_eq</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">nil_iff_length_eq</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">tail_take</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_snd_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_snd_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">dropLast_take'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_fst_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_fst_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">support_suffix_iff_darts_suffix</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">u‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">p‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÅ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">v‚ÇÇ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hnil</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬¨</span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">Nil</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"o\">:</span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">support</span><span class=\"w\"> </span><span class=\"bp\">‚Üî</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">darts</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"o\">:</span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">p‚ÇÇ</span><span class=\"bp\">.</span><span class=\"n\">darts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">suffix_iff_eq_drop</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">suffix_iff_eq_drop</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">?_‚ü©</span>\n<span class=\"w\">  </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">dropLast</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">dropLast_drop</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_fst_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_fst_darts</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">tail_drop'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_snd_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_snd_darts</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd_injective</span><span class=\"bp\">.</span><span class=\"n\">list_map</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">rightInverse_unzip_zip</span><span class=\"bp\">.</span><span class=\"n\">injective</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">‚àò</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Dart</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"bp\">‚àò</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Dart</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">map_drop</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">eq_of_tail_eq_of_dropLast_eq</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">nil_iff_length_eq</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">tail_drop'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_snd_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_snd_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">dropLast_drop</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_fst_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">map_fst_darts</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"bp\">.</span><span class=\"n\">Walk</span>\n</code></pre></div>\n</div></div>",
        "id": 576138944,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1772146239
    },
    {
        "content": "<p>Basically anything that uses <code>Walk.support</code> / <code>Walk.edges</code> / <code>Walk.darts</code> will <em>probably</em> become much shorter.</p>",
        "id": 576139093,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1772146317
    },
    {
        "content": "<p>Also we'd finally be able to deprecate <code>getVert</code> in favor of <code>support.get</code> (or <code>getD</code>)</p>",
        "id": 576139271,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1772146404
    },
    {
        "content": "<p>Interesting... it's not clear to me that these ones would change much at all, since these are theorems about lists and are essentially agnostic to the way Walk is defined. Can you say more about why you think these would get better?</p>",
        "id": 576139628,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1772146577
    },
    {
        "content": "<p>Oh and <code>Walk.copy</code> of course. But <code>Walk.append</code> would become a bit harder ‚Äì we would probably require a proof that the walks match.</p>",
        "id": 576139633,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1772146580
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246273\">Bhavik Mehta</span> <a href=\"#narrow/channel/252551-graph-theory/topic/New.20Walk.20definition.20without.20index.20parameters/near/576139628\">said</a>:</p>\n<blockquote>\n<p>Can you say more about why you think these would get better?</p>\n</blockquote>\n<p>It would certainly save these 2 lines that appear in 3 proofs above:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">‚àò</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Dart</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"bp\">‚àò</span><span class=\"w\"> </span><span class=\"n\">Dart</span><span class=\"bp\">.</span><span class=\"n\">toProd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Dart</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>because <code>Walk.darts</code> would presumably be of type <code>List (V √ó V)</code>, and the <code>.Adj</code> proof would be a separate theorem.<br>\nBut you might be right, maybe the problem in these proofs is just that <code>List.zip</code> has poor API.</p>",
        "id": 576140776,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1772147204
    }
]