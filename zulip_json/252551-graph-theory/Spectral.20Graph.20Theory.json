[
    {
        "content": "<p>I would like to get your input on how to state theorems regarding eigenvalues/eigenvectors of graphs. What version of eigenvalues do you think works best? Many proofs in graph theory depend on the spectral theorem, so it would be nice to do it in a way that allows us to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.IsHermitian.spectral_theorem#doc\">docs#Matrix.IsHermitian.spectral_theorem</a>.<br>\nFor instance, how would you rewrite the following theorem (from mathlib) using eigenvectors?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">adjMatrix_mulVec_const_apply_of_regular</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NonAssocSemiring</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">IsRegularOfDegree</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">adjMatrix</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">*ᵥ</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">const</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hd</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>(If G is regular, then the all-ones vector is an eigenvector of the adjacency matrix).</p>",
        "id": 455721390,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1722535799
    },
    {
        "content": "<p>Does the following approach seem best, or should I use a more general definition for eigenvalues?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Combinatorics</span><span class=\"bp\">.</span><span class=\"n\">SimpleGraph</span><span class=\"bp\">.</span><span class=\"n\">AdjMatrix</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">.</span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">Spectrum</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableRel</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"o\">)</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">isHermitian_adjMatrix</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RCLike</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">adjMatrix</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">IsHermitian</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">ext</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">conjTranspose</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">RCLike</span><span class=\"bp\">.</span><span class=\"n\">star_def</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">transpose_adjMatrix</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">map_apply</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">adjMatrix_apply</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">RingHom</span><span class=\"bp\">.</span><span class=\"n\">map_ite_one_zero</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">regular_iff_degree_eigenvalue</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RCLike</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">IsRegularOfDegree</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">isHermitian_adjMatrix</span><span class=\"bp\">.</span><span class=\"n\">eigenvalues</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>What do you think about having a <code>SimpleGraph/Spectrum.lean</code> file that would depend on <code>AdjMatrix.lean</code>, while files like <code>StronglyRegular.lean</code> would depend on it. It will contain a new definition of eigenvalues (because graph theorists usually say \"eigenvalue of a graph\" instead of \"eigenvalue of an adjacency matrix of a graph\") and it will contain an API for them.</p>",
        "id": 456046127,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1722634724
    },
    {
        "content": "<p>I don't think that people saying \"eigenvalue of a graph\" vs \"eigenvalue of an adjacency matrix of a graph\" is in itself sufficient to do the same in Lean. There's cost to duplicating API, and the cost of adding <code>.adjMatrix</code> is not that high, and these costs should be weighed in terms of the Lean idiom that results, not the informal idiom.</p>",
        "id": 456053962,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722638320
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"580947\">Rida Hamadani</span> <a href=\"#narrow/stream/252551-graph-theory/topic/Spectral.20Graph.20Theory/near/455721390\">said</a>:</p>\n<blockquote>\n<p>I would like to get your input on how to state theorems regarding eigenvalues/eigenvectors of graphs. What version of eigenvalues do you think works best? Many proofs in graph theory depend on the spectral theorem, so it would be nice to do it in a way that allows us to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.IsHermitian.spectral_theorem#doc\">docs#Matrix.IsHermitian.spectral_theorem</a>.<br>\nFor instance, how would you rewrite the following theorem (from mathlib) using eigenvectors?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">adjMatrix_mulVec_const_apply_of_regular</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NonAssocSemiring</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">IsRegularOfDegree</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">adjMatrix</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">*ᵥ</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">const</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hd</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>(If G is regular, then the all-ones vector is an eigenvector of the adjacency matrix).</p>\n</blockquote>\n<p>Highly depends on what you want. For example the eigenvalues of the normalised laplacian matrix are super useful in some places.</p>",
        "id": 456059148,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722641617
    },
    {
        "content": "<p>The cheeger formula is defined w.r.t eigenvalues of the <del>adjacency</del>laplacian matrix</p>",
        "id": 456059225,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722641670
    },
    {
        "content": "<p>so what does \"eigenvalues of a graph\" refer to?</p>",
        "id": 456059782,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722642039
    },
    {
        "content": "<p>I see, those are good points. Thank you.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/252551-graph-theory/topic/Spectral.20Graph.20Theory/near/456059782\">said</a>:</p>\n<blockquote>\n<p>so what does \"eigenvalues of a graph\" refer to?</p>\n</blockquote>\n<p>From what I've seen, it refers to the adjacency matrix spectrum. However, I wouldn't be surprised if it is used for the Laplacian in some of the literature.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/252551-graph-theory/topic/Spectral.20Graph.20Theory/near/456059148\">said</a>:</p>\n<blockquote>\n<p>Highly depends on what you want.</p>\n</blockquote>\n<p>As a first step I would like to prove a few theorems about strongly regular graphs that (like most theorems about SRGs) requires the use of the eigenvalues of the adjacency matrix.</p>",
        "id": 456070625,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1722649703
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/252551-graph-theory/topic/Spectral.20Graph.20Theory/near/456053962\">said</a>:</p>\n<blockquote>\n<p>There's cost to duplicating API.</p>\n</blockquote>\n<p>The eigenvalues of a graph will depend on the existing definition of eigenvalues so that the old API can be used by unfolding. What I meant is not duplicating the existing API, but instead creating one with new lemmas that are specific to graphs.<br>\nThis way, theorems that use adjacency matrices without needing the spectrum, will not need to import the extra files eigenvalues need.</p>",
        "id": 456073649,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1722651125
    },
    {
        "content": "<p>In case you didn’t see it, there is a sample use of spectral methods in <a href=\"https://leanprover-community.github.io/mathlib4_docs/Archive/Sensitivity.html\">https://leanprover-community.github.io/mathlib4_docs/Archive/Sensitivity.html</a></p>",
        "id": 456130665,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1722678896
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"580947\">Rida Hamadani</span> <a href=\"#narrow/stream/252551-graph-theory/topic/Spectral.20Graph.20Theory/near/456070625\">said</a>:</p>\n<blockquote>\n<p>I see, those are good points. Thank you.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/252551-graph-theory/topic/Spectral.20Graph.20Theory/near/456059782\">said</a>:</p>\n<blockquote>\n<p>so what does \"eigenvalues of a graph\" refer to?</p>\n</blockquote>\n<p>From what I've seen, it refers to the adjacency matrix spectrum. However, I wouldn't be surprised if it is used for the Laplacian in some of the literature.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/252551-graph-theory/topic/Spectral.20Graph.20Theory/near/456059148\">said</a>:</p>\n<blockquote>\n<p>Highly depends on what you want.</p>\n</blockquote>\n<p>As a first step I would like to prove a few theorems about strongly regular graphs that (like most theorems about SRGs) requires the use of the eigenvalues of the adjacency matrix.</p>\n</blockquote>\n<p>My point is there is no single notion of \"the eigenvalues of a graph\". There are eigenvalues of the adjacency matrix useful for studying random walks. There are eigenvalues of the normalised Laplacian matrix for studying cut structure and so on.</p>",
        "id": 456162213,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722693090
    },
    {
        "content": "<p>This is not some case of an isolated part of the literature doing something niche. This is all in mainstream spectral graph theory.</p>",
        "id": 456162675,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722693371
    },
    {
        "content": "<p>What do you think is the best way to deal with this? Maybe not defining eigenvalues of a graphs a sufficient solution, using instead eigenvalues of the needed matrix?</p>",
        "id": 456163420,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1722693911
    },
    {
        "content": "<p>Yes, I believe that's precisely the point that Shreyas was making. There is no such thing as \"eigenvalues of a graph\" in the literature, only \"eigenvalues of such matrix associated to a graph\", so the Lean code should mirror that.</p>",
        "id": 456163533,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1722693980
    },
    {
        "content": "<p>A couple of good sources for this subject: <br>\nDaniel Spielman's book: <a href=\"http://cs-www.cs.yale.edu/homes/spielman/sagt/sagt.pdf\">http://cs-www.cs.yale.edu/homes/spielman/sagt/sagt.pdf</a></p>",
        "id": 456167354,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722695756
    },
    {
        "content": "<p>and the first few lectures of Lap Chi Lau's course notes : <a href=\"https://cs.uwaterloo.ca/~lapchi/cs860/notes.html\">https://cs.uwaterloo.ca/~lapchi/cs860/notes.html</a></p>",
        "id": 456167438,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722695781
    },
    {
        "content": "<p>Also <a href=\"https://link.springer.com/book/10.1007/978-1-4613-0163-9\">Godsil and Royle</a>.</p>",
        "id": 456997672,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1722999913
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/252551-graph-theory/topic/Spectral.20Graph.20Theory/near/456163533\">said</a>:</p>\n<blockquote>\n<p>Yes, I believe that's precisely the point that Shreyas was making. There is no such thing as \"eigenvalues of a graph\" in the literature, only \"eigenvalues of such matrix associated to a graph\", so the Lean code should mirror that.</p>\n</blockquote>\n<p>The phrases 'eigenvalues of G' does have a very standard default meaning - the eigenvalues of the adjacency matrix of G. Usually the variants are disambiguated; eg 'Laplacian eigenvalues'.</p>\n<p>Given the concerns discussed here, I agree that it does make sense to just phrase things in terms of the matrix in mathlib, but I don’t think that ‘this is how it’s done in the literature’ is an argument in favour of this, because it’s not true.</p>",
        "id": 457226087,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1723074083
    },
    {
        "content": "<p>Not true. The phrase \"eigenvalues of a graph\" is context dependent. The context depends on whom you ask or what resource you read</p>",
        "id": 457251888,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723087203
    },
    {
        "content": "<p>In my experience when a lecturer/author says \"eigenvalue of a graph\", everybody assumes \"of an adjacency matrix\", if they want to use that phrase to mean something else, they have to specify that first.</p>",
        "id": 457273768,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1723096341
    },
    {
        "content": "<p>But I agree that it is a good idea to always specify the matrix for our purposes.</p>",
        "id": 457273869,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1723096407
    },
    {
        "content": "<p>It is context-dependent for sure. I’m just saying that if you look at standard sources, there is a default context.</p>",
        "id": 459445799,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1723202529
    }
]