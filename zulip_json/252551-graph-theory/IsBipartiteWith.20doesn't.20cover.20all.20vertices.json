[
    {
        "content": "<p>I've just realized that given <code>G : SimpleGraph V</code> and <code>G.IsBipartiteWith s t</code> it is not true, that <code>s ∪ t = @Set.univ V</code>. We only have <code>G.support ⊆ s ∪ t</code>. Should we change the definition so it also requires <code>s ∪ t = Set.univ</code>, or are we okay with the fact that biparition doesn't partition isolated vertices?<br>\nOne consequence of this is that we doesn't have equivalence between 2-colorings and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Combinatorics/SimpleGraph/Bipartite.html#SimpleGraph.IsBipartiteWith\">IsBipartiteWith</a>. Although it's not an important property, I think it might be nice to have it?</p>",
        "id": 568408191,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768561380
    },
    {
        "content": "<p><code>G.IsBipartiteWith' s := G.IsBipartiteWith s sᶜ</code> perhaps?</p>",
        "id": 568520186,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1768596124
    },
    {
        "content": "<p>As an aside I think <code>s ∪ t = Set.univ</code> is better spelt <code>Codisjoint s t</code></p>",
        "id": 568520583,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1768596286
    },
    {
        "content": "<p>it would be if there were any lemmas on <code>@Codisjoint (Set _) _</code></p>",
        "id": 568520991,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1768596426
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> @Codisjoint (Set _)</p>",
        "id": 568521040,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1768596439
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Set/Image.html#Codisjoint.preimage\">Codisjoint.preimage</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/Finsupp/Supported.html#Finsupp.codisjoint_supported_supported\">Finsupp.codisjoint_supported_supported</a>, and <a href=\"https://loogle.lean-lang.org/?q=%40Codisjoint%20%28Set%20_%29\">11 more</a></p>",
        "id": 568521046,
        "sender_full_name": "loogle",
        "timestamp": 1768596440
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> @Disjoint (Set _)</p>",
        "id": 568521075,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1768596452
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Set/Disjoint.html#Set.disjoint_empty\">Set.disjoint_empty</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Set/Disjoint.html#Set.empty_disjoint\">Set.empty_disjoint</a>, and <a href=\"https://loogle.lean-lang.org/?q=%40Disjoint%20%28Set%20_%29\">869 more</a></p>",
        "id": 568521079,
        "sender_full_name": "loogle",
        "timestamp": 1768596453
    },
    {
        "content": "<p>I think for this def it's more of a <code>Setoid.IsPartition {s, t}</code>. The fact that the graph is loopless guarantees <code>Disjoint s t</code> but it's strange to rely on it and only specify the <code>Codisjoint</code> half</p>",
        "id": 568521409,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1768596612
    },
    {
        "content": "<p>Your proposed change doesn't give an equivalence with 2 colorings since there's nothing forcing there to be an edge (or a vertex for that matter.)</p>",
        "id": 568525100,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1768598159
    },
    {
        "content": "<p>Adding the union property is logically equivalent to the current definition since any graph that is currently <code>IsBipartiteWith s t</code> would simply be <code>IsBipartiteWith s s^c</code> under the definition with the union property.</p>",
        "id": 568525551,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1768598356
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/252551-graph-theory/topic/IsBipartiteWith.20doesn't.20cover.20all.20vertices/near/568521409\">said</a>:</p>\n<blockquote>\n<p>I think for this def it's more of a <code>Setoid.IsPartition {s, t}</code>. The fact that the graph is loopless guarantees <code>Disjoint s t</code> but it's strange to rely on it and only specify the <code>Codisjoint</code> half</p>\n</blockquote>\n<p>Is that the same as <code>IsCompl s t</code></p>",
        "id": 568525644,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1768598404
    },
    {
        "content": "<p>oh no it's not because <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Setoid.IsPartition#doc\">docs#Setoid.IsPartition</a> also requires all the parts to be nonempty</p>",
        "id": 568525719,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1768598438
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"688480\">@Mitchell Horner</span> you're listed as an Author of Bipartite file, so you might be interested in this discussion.</p>",
        "id": 568532020,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768601242
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/252551-graph-theory/topic/IsBipartiteWith.20doesn't.20cover.20all.20vertices/near/568525719\">said</a>:</p>\n<blockquote>\n<p>oh no it's not because <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Setoid.IsPartition#doc\">docs#Setoid.IsPartition</a> also requires all the parts to be nonempty</p>\n</blockquote>\n<p>Cool, so <code>IsCompl</code> sounds better. It uses <code>Codisjoint</code> but seems to have more API, weird</p>",
        "id": 568537637,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1768604700
    },
    {
        "content": "<p>The definition of <code>IsBipartiteWith</code> is intended to be the proof that \"every edge connects vertices in these two distinct sets\". I prefer that <code>Codisjoint s t</code> is not required, as it makes combinations of the following statements possible with little to no coercion.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">between_isBipartiteWith</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Disjoint</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">between</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">IsBipartiteWith</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">isBipartiteWith_sum_degrees_eq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">IsBipartiteWith</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">degree</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">degree</span><span class=\"w\"> </span><span class=\"n\">w</span>\n</code></pre></div>",
        "id": 568578069,
        "sender_full_name": "Mitchell Horner",
        "timestamp": 1768647328
    },
    {
        "content": "<p>If it is the name that bothers you, feel free to rename it to something else. Id prefer it to be renamed rather than redefined.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"870257\">Jakub Nowak</span> <a href=\"#narrow/channel/252551-graph-theory/topic/IsBipartiteWith.20doesn't.20cover.20all.20vertices/near/568408191\">said</a>:</p>\n<blockquote>\n<p>are we okay with the fact that biparition doesn't partition isolated vertices?</p>\n</blockquote>\n<p>As one can recover a bipartition of vertices from <code>IsBipartiteWith</code> easily (and I mention this little nuance in the module docstring) I am okay with this.</p>",
        "id": 568578732,
        "sender_full_name": "Mitchell Horner",
        "timestamp": 1768648056
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/252551-graph-theory/topic/IsBipartiteWith.20doesn't.20cover.20all.20vertices/near/568520186\">said</a>:</p>\n<blockquote>\n<p><code>G.IsBipartiteWith' s := G.IsBipartiteWith s sᶜ</code> perhaps?</p>\n</blockquote>\n<p><code>IsBipartiteWithCompl</code>?</p>",
        "id": 568578832,
        "sender_full_name": "Mitchell Horner",
        "timestamp": 1768648179
    },
    {
        "content": "<p>I think that <code>isBipartiteWith_sum_degrees_eq</code> is still true even if we require <code>Codisjoint s t</code>?</p>\n<p>As for <code>between_isBipartiteWith</code>, maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Combinatorics/SimpleGraph/Bipartite.html#SimpleGraph.between\">SimpleGraph.between</a> should return <code>SimpleGraph ↑(s ∪ t)</code> instead of <code>SimpleGraph V</code>? With this change <code>between_isBipartiteWith</code> will still be true even with <code>Codisjoint s t</code>.</p>",
        "id": 568596169,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768664138
    },
    {
        "content": "<p>Ah, sorry, you concern about <code>isBipartiteWith_sum_degrees_eq</code> is that it requires <code>s</code> and <code>t</code> to be finsets?</p>",
        "id": 568596277,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768664223
    },
    {
        "content": "<p>We could use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=finsum#doc\">docs#finsum</a> instead of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.sum#doc\">docs#Finset.sum</a> to state that result even with infinite sets I think?</p>",
        "id": 568596354,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768664277
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"870257\">Jakub Nowak</span> <a href=\"#narrow/channel/252551-graph-theory/topic/IsBipartiteWith.20doesn't.20cover.20all.20vertices/near/568596169\">said</a>:</p>\n<blockquote>\n<p>maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Combinatorics/SimpleGraph/Bipartite.html#SimpleGraph.between\">SimpleGraph.between</a> should return <code>SimpleGraph ↑(s ∪ t)</code> instead of <code>SimpleGraph V</code></p>\n</blockquote>\n<p><code>G.between s t</code> is intended to have the same type as <code>G</code> as I found it is easier to interpret and use as a true subgraph of <code>G</code> without having to map its vertices. It is primarily used with <code>s sᶜ</code> anyway but is left generalized (like <code>IsBipartiteWith</code>) for edge cases.</p>",
        "id": 568659415,
        "sender_full_name": "Mitchell Horner",
        "timestamp": 1768738253
    },
    {
        "content": "<p>It could also return <code>G.Subgraph</code>. <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Combinatorics/SimpleGraph/Subgraph.html#SimpleGraph.Subgraph\">SimpleGraph.Subgraph</a> has useful lemmas that make working with subgraphs easier.</p>",
        "id": 568659625,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768738513
    },
    {
        "content": "<p>I'm aware that it can be painful to work with subgraphs. That's why I think at least some people would want to leave SimpleGraph behind and move to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Graph#doc\">docs#Graph</a>.</p>",
        "id": 568659742,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768738661
    },
    {
        "content": "<p>Lots of the definitions in this file are a convenience wrapper around <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Combinatorics/Enumerative/DoubleCounting.html\">DoubleCounting.lean</a> to help double-counting arguments that often come in the form of bipartite graphs.</p>\n<p>I see <code>G.between s t</code> as a convenience for double-counting the edges between <code>s</code> and <code>t</code>, I don't think it needs to be <code>G.Subgraph</code> either <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> - the fact that it is itself <code>SimpleGraph V</code> is just a further convenience when working with graph-related terms (degrees, etc.).</p>",
        "id": 568660321,
        "sender_full_name": "Mitchell Horner",
        "timestamp": 1768739251
    },
    {
        "content": "<p>I don't want to seem obstinate. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> I understand the philosophy behind the suggestions - to constrain the definitions to capture extra structure - but for what I need, I prefer that they are unconstrained and easy to reach for.</p>",
        "id": 568661496,
        "sender_full_name": "Mitchell Horner",
        "timestamp": 1768740505
    },
    {
        "content": "<p>Hm. I can understand your position. There are many use cases when isolated vertices don't matter. Especially if you're thinking about Graph as just relation. I feel like we have two potentially conflicting views on graphs.</p>\n<p>Maybe we should really have two different graphs definitions? We could have <code>SimpleGraph</code> be this kinds of view on graphs, where you mainly care about relation and not much about vertex set. This would suggest changing the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Combinatorics/SimpleGraph/Subgraph.html#SimpleGraph.Subgraph\">SimpleGraph.Subgraph</a> and removing <code>verts</code> and <code>edge_vert</code> from it.</p>\n<p>And we can have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Graph#doc\">docs#Graph</a> be the kind of approach on graphs, where you think about graph as a structure of vertices and edges, and in which case you do care about distinguishing isolated vertices.</p>",
        "id": 568662154,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768741240
    },
    {
        "content": "<p>Could we please not abandon simplegraphs to have no vertex set?</p>",
        "id": 568677106,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754003
    },
    {
        "content": "<p>There is a hideous amount of definitions that need to be duplicated across SimpleGraph and subgraph because of this</p>",
        "id": 568677132,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754029
    },
    {
        "content": "<p>And there is too much existing stuff in SimpleGraph to abandon it</p>",
        "id": 568677153,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754052
    },
    {
        "content": "<p>I'm not saying to abandon it entirely, but to move it to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Graph#doc\">docs#Graph</a>.</p>",
        "id": 568677167,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768754063
    },
    {
        "content": "<p>Further in many cases Simplegraphs are all we need</p>",
        "id": 568677170,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754066
    },
    {
        "content": "<p>The current state is that Graph has basically too little API</p>",
        "id": 568677200,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754091
    },
    {
        "content": "<p>And it would take too long to reinvent it</p>",
        "id": 568677221,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754105
    },
    {
        "content": "<p>And in many cases even if we did, SimpleGraph is better</p>",
        "id": 568677240,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754123
    },
    {
        "content": "<p>If someone wants to work with Relations let them work with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Rel#doc\">docs#Rel</a></p>",
        "id": 568677260,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754143
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/252551-graph-theory/topic/IsBipartiteWith.20doesn't.20cover.20all.20vertices/near/568677260\">said</a>:</p>\n<blockquote>\n<p>If someone wants to work with Relations let them work with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Rel#doc\">docs#Rel</a></p>\n</blockquote>\n<p>That's a good point.</p>",
        "id": 568677304,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768754183
    },
    {
        "content": "<p>I’d really really like SimpleGraph to actually represent simple graphs and that means giving them a vertex set and replacing Subgraph uses with IsSubgraph</p>",
        "id": 568677349,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754222
    },
    {
        "content": "<p>Because the other point is, Subgraphs are Simplegraphs too and it is tedious to repeat basi definitions for it</p>",
        "id": 568677380,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754261
    },
    {
        "content": "<p>If someone wishes to improve <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Graph#doc\">docs#Graph</a> so that it can eventually subsume SimpleGraphs and make the change completely transparent to downstream users, that is great, but until then SimpleGraphs are the only meaningful API we have for downstream use and any improvement to make it more graph-like (in the set theoretic sense) is a good idea imho.</p>",
        "id": 568677497,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768754398
    },
    {
        "content": "<p>So, I think we want <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Combinatorics/SimpleGraph/Bipartite.html#SimpleGraph.between\">SimpleGraph.between</a> to return <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.Subgraph#doc\">docs#SimpleGraph.Subgraph</a>. And the version that doesn't restrict domain, as <span class=\"user-mention\" data-user-id=\"688480\">@Mitchell Horner</span> wants it, should be defined on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Rel#doc\">docs#Rel</a> or <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SetRel#doc\">docs#SetRel</a>.</p>",
        "id": 568677683,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768754605
    }
]