[
    {
        "content": "<p>I'm having trouble following Tao's Analysis exercises from his ongoing partial formalization.</p>\n<p>Here's the <a href=\"https://gist.githubusercontent.com/gaearon/b8c1003814d89c86aac04116c082a0a6/raw/ee97900aca0fc982edb96e2f4bba394a56aba8c6/repro.lean\">dump of the definitions</a> that's ready to be pasted into <a href=\"https://live.lean-lang.org/\">https://live.lean-lang.org/</a>.</p>\n<p>My problem is with line 994:</p>\n<p><a href=\"/user_uploads/3121/IH5ysphdPFednms29dAnPyER/Screenshot-2025-07-01-at-18.15.38.png\">Screenshot 2025-07-01 at 18.15.38.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/IH5ysphdPFednms29dAnPyER/Screenshot-2025-07-01-at-18.15.38.png\" title=\"Screenshot 2025-07-01 at 18.15.38.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2290x884\" src=\"/user_uploads/thumbnail/3121/IH5ysphdPFednms29dAnPyER/Screenshot-2025-07-01-at-18.15.38.png/840x560.webp\"></a></div><p>I'm trying to use <code>zero_add</code> which is defined earlier on our custom <code>Nat</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Compare with Mathlib's `Nat.zero_add`-/</span>\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_add</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">recurse_zero</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">sum</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">sum</span><span class=\"bp\">++</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n</code></pre></div>\n<p>I expect it to replace <code>zero + m</code> in my goal because both <code>zero</code> and <code>m</code> are <code>Nat</code>, where <code>Nat</code> is defined as </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">  Assumption 2.6 (Existence of natural numbers).  Here we use an explicit construction of the</span>\n<span class=\"sd\">  natural numbers (using an inductive type).  For a more axiomatic approach, see the epilogue to</span>\n<span class=\"sd\">  this chapter.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n</code></pre></div>\n<p>However, <code>zero + m</code> doesn't get picked up by <code>rw [zero_add]</code>.</p>\n<p>Why?</p>",
        "id": 526652981,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751390250
    },
    {
        "content": "<p>Unfortunately <code>zero + m</code> is not the same as <code>0 + m</code></p>",
        "id": 526653720,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751390529
    },
    {
        "content": "<p>Sometimes <code>rw</code> can be strict like that</p>",
        "id": 526653754,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751390549
    },
    {
        "content": "<p>I changed <code>rw [zero_add]</code> to <code>rw [show zero = 0 from rfl, zero_add]</code> and the error changed from \"tactic 'rewrite' failed, did not find instance of the pattern in the target expression\" to \"unsolved goals\"</p>",
        "id": 526654035,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751390671
    },
    {
        "content": "<p>ok sweet, that does seem to work!</p>",
        "id": 526654146,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751390714
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"418569\">Dan Abramov</span> has marked this topic as resolved.</p>",
        "id": 526654155,
        "sender_full_name": "Notification Bot",
        "timestamp": 1751390717
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"113489\" href=\"/#narrow/channel/113489-new-members/topic/.E2.9C.94.20Why.20doesn.27t.20rw.20match.20my.20pattern.3F\">#new members &gt; ✔ Why doesn't rw match my pattern?</a> by <span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span>.</p>",
        "id": 527390566,
        "sender_full_name": "Notification Bot",
        "timestamp": 1751855804
    }
]