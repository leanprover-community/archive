[
    {
        "content": "<p>I have a proof <code>h: &lt;some term&gt; = &lt;some other term&gt;</code>, it turns out the two terms are of different types <code>t.X</code> vs <code>t'.X</code>, and that is exactly the proof I need <code>t.X = t'.X</code>. So this must be immediately true from h, AFAIKT two terms can only be equal if they are of same type (I see <code>HEq</code> pop sometimes, which allows terms of different types to be equal), but I don't now how to extract that info to pass to the goal.</p>",
        "id": 528566600,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1752450932
    },
    {
        "content": "<p>they should be definitionally equal</p>",
        "id": 528567619,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752451982
    },
    {
        "content": "<p>you should just be able to do <code>rfl</code></p>",
        "id": 528567642,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452001
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/RoIfEQnEldBOsLawYZ4Vo-7C/Screenshot-2025-07-13-at-5.13.40PM.png\">Screenshot 2025-07-13 at 5.13.40 PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/RoIfEQnEldBOsLawYZ4Vo-7C/Screenshot-2025-07-13-at-5.13.40PM.png\" title=\"Screenshot 2025-07-13 at 5.13.40 PM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1512x536\" src=\"/user_uploads/thumbnail/3121/RoIfEQnEldBOsLawYZ4Vo-7C/Screenshot-2025-07-13-at-5.13.40PM.png/840x560.webp\"></a></div>",
        "id": 528567667,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1752452042
    },
    {
        "content": "<p>you said you have <code>h</code> where the two terms have the type you want</p>",
        "id": 528567724,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452120
    },
    {
        "content": "<p>can you point out the <code>h</code> here? I don't see it</p>",
        "id": 528567728,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452129
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/de5csAwor5JwHAhtNGKeWuwJ/Screenshot-2025-07-13-at-5.15.44PM.png\">Screenshot 2025-07-13 at 5.15.44 PM.png</a><br>\n<a href=\"/user_uploads/3121/fgbu--oYP3Xo7_Ro4vsMqjvy/Screenshot-2025-07-13-at-5.16.07PM.png\">Screenshot 2025-07-13 at 5.16.07 PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/de5csAwor5JwHAhtNGKeWuwJ/Screenshot-2025-07-13-at-5.15.44PM.png\" title=\"Screenshot 2025-07-13 at 5.15.44 PM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"574x178\" src=\"/user_uploads/thumbnail/3121/de5csAwor5JwHAhtNGKeWuwJ/Screenshot-2025-07-13-at-5.15.44PM.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/fgbu--oYP3Xo7_Ro4vsMqjvy/Screenshot-2025-07-13-at-5.16.07PM.png\" title=\"Screenshot 2025-07-13 at 5.16.07 PM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"496x204\" src=\"/user_uploads/thumbnail/3121/fgbu--oYP3Xo7_Ro4vsMqjvy/Screenshot-2025-07-13-at-5.16.07PM.png/840x560.webp\"></a></div>",
        "id": 528567761,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1752452176
    },
    {
        "content": "<p>so you hovered over the wrong term here</p>",
        "id": 528567765,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452189
    },
    {
        "content": "<p>try hovering over the little up arrow on the side</p>",
        "id": 528567773,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452210
    },
    {
        "content": "<p>yeah, I am trying to remove the <code>.val</code> with <code>rw [Subtype.mk.injEq] at h</code> but that is failing</p>",
        "id": 528567781,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1752452220
    },
    {
        "content": "<p>well that's because they're different types</p>",
        "id": 528567790,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452232
    },
    {
        "content": "<p>the theorem doesn't apply here</p>",
        "id": 528567793,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452242
    },
    {
        "content": "<p>It's pretty simple exercise otherwise, and I don't see much else to do than try to use what I know at <code>h</code></p>",
        "id": 528567832,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1752452300
    },
    {
        "content": "<p>you need some kind of extensionality</p>",
        "id": 528567850,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452331
    },
    {
        "content": "<p>I guess I have to get some <code>HEq</code> (which I don't really understand)?</p>",
        "id": 528567851,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1752452332
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/oNZPqpcCji_B9-iFCJm5AUHd/Screenshot-2025-07-13-at-5.19.28PM.png\">Screenshot 2025-07-13 at 5.19.28 PM.png</a><br>\ninfo on the cast btw</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/oNZPqpcCji_B9-iFCJm5AUHd/Screenshot-2025-07-13-at-5.19.28PM.png\" title=\"Screenshot 2025-07-13 at 5.19.28 PM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"552x184\" src=\"/user_uploads/thumbnail/3121/oNZPqpcCji_B9-iFCJm5AUHd/Screenshot-2025-07-13-at-5.19.28PM.png/840x560.webp\"></a></div>",
        "id": 528567891,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1752452383
    },
    {
        "content": "<p>try <code>cases t</code> and <code>cases t'</code></p>",
        "id": 528567923,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452417
    },
    {
        "content": "<p>then you just have to prove the parts are equal</p>",
        "id": 528567945,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452456
    },
    {
        "content": "<p>you can name the hypotheses you get with a <code>cases t with | mk tX tx tsurj</code></p>",
        "id": 528567989,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452501
    },
    {
        "content": "<p>then you should prove <code>tX = t'X</code> and substitute this equality out</p>",
        "id": 528568016,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452520
    },
    {
        "content": "<p>Thanks, gotta run to dinner but will try those later</p>",
        "id": 528568025,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1752452530
    },
    {
        "content": "<p>then you should prove <code>tx = t'x</code> and substitute that equality out</p>",
        "id": 528568056,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452560
    },
    {
        "content": "<p>then you can <code>rfl</code></p>",
        "id": 528568063,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452565
    },
    {
        "content": "<p>or well, that's what I did when I had a similar problem</p>",
        "id": 528568099,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752452587
    },
    {
        "content": "<p>Ok, this make sense, <code>cases</code> instead of <code>ext</code> lets me decide how to prove the structure equality. However, I still can't prove <code>tx = tx'</code> because I can't even state it due to different types.</p>\n<p>I have</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toSubtype</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"o\">(</span><span class=\"n\">tx</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"o\">(</span><span class=\"n\">tx'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>which is almost like funext, except the return type is <code>X</code> vs <code>X'</code>.  But the more I think about it, this is actually non-trivial, and I might need to use the surjectivity of <code>tx</code> and <code>tx'</code> to prove it. Is there an ext theorem for subtypes ?</p>",
        "id": 528579382,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1752464276
    },
    {
        "content": "<p>Actually turned out that the types were just sets with <code>toSubtype</code> and I could just prove the set quality using the tools I already know. The only subtle final thing is that for whatever reason I could rw with the <code>tX = tX'</code> proof, but <code>subst</code> did the trick.</p>",
        "id": 528581917,
        "sender_full_name": "Rado Kirov",
        "timestamp": 1752466753
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"488971\">Rado Kirov</span> has marked this topic as resolved.</p>",
        "id": 528581921,
        "sender_full_name": "Notification Bot",
        "timestamp": 1752466756
    }
]