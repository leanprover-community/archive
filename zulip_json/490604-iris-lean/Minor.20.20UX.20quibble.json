[
    {
        "content": "<p>Could we get syntax highlighting in the infoview for Iris declarations as well? What would we have to do to get this? Currently we use the delaborator in Iris.Proofmode.Display. Or better yet, something fancier using proofwidgets?</p>",
        "id": 529294585,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752763018
    },
    {
        "content": "<p>can you show a screenshot of what you mean? I already get syntax highlighting for a lot of things in the proof mode</p>",
        "id": 529300332,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1752764706
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/kcZAgr9GDlll94s97u3MYFnI/Screenshot-from-2025-07-17-17-05-48.png\">Screenshot from 2025-07-17 17-05-48.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/kcZAgr9GDlll94s97u3MYFnI/Screenshot-from-2025-07-17-17-05-48.png\" title=\"Screenshot from 2025-07-17 17-05-48.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"960x1240\" src=\"/user_uploads/thumbnail/3121/kcZAgr9GDlll94s97u3MYFnI/Screenshot-from-2025-07-17-17-05-48.png/840x560.webp\"></a></div>",
        "id": 529300496,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752764756
    },
    {
        "content": "<p>from the example file</p>",
        "id": 529300526,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752764764
    },
    {
        "content": "<p>I will note that there is a gap in the capabilities of customizing the goal view, which is why you get this funny double turnstile thing</p>",
        "id": 529300585,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1752764783
    },
    {
        "content": "<p>I would like to have something like the old <code>begin[iris]</code> mechanism from lean 3, but it's not really possible to do this today. You can have a <code>by_iris</code> which takes <code>iris_tactic</code> syntax but you can't create alternatives to the goal view without losing a lot of functionality</p>",
        "id": 529300876,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1752764872
    },
    {
        "content": "<p>Can't we extend the delaborator to tell it to highlight somethings in a different colour on the infoview?</p>",
        "id": 529301292,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752764995
    },
    {
        "content": "<p>in short, this is something that iris-lean does not have the power to fix, you need to bug lean core devs to fix it</p>",
        "id": 529301320,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1752765002
    },
    {
        "content": "<p>no, highlighting is not under control of delaborators</p>",
        "id": 529301376,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1752765019
    },
    {
        "content": "<p>cc: <span class=\"user-mention\" data-user-id=\"221921\">@Marc Huisinga</span></p>",
        "id": 529301533,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1752765057
    },
    {
        "content": "<p>right. then that leaves proofwidgets for now. It might be a severe misuse of proof widgets to show another goal view. But there is some precedent : <a class=\"message-link\" href=\"/#narrow/channel/113488-general/topic/Display.20goal.20as.20LaTeX.20in.20infoview/near/503430880\">#general &gt; Display goal as LaTeX in infoview @ üí¨</a></p>",
        "id": 529302052,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752765220
    },
    {
        "content": "<p>More specifically this : <a class=\"message-link\" href=\"/#narrow/channel/113488-general/topic/Display.20goal.20as.20LaTeX.20in.20infoview/near/503576148\">#general &gt; Display goal as LaTeX in infoview @ üí¨</a></p>",
        "id": 529302171,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752765259
    },
    {
        "content": "<p>even an HTML display of the iris goal view would be cleaner than what we have, minus some interactive functionality</p>",
        "id": 529302698,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752765410
    },
    {
        "content": "<p>a widget goal view is certainly an option, but it shows <em>in addition</em> to the regular goal view, and we have to play catch-up with the features of the regular mode. I would much rather have an approved way to do this</p>",
        "id": 529304552,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1752765973
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221921\">@Marc Huisinga</span> : can we anticipate major changes in the infoview in the coming months?</p>",
        "id": 529340204,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752779124
    },
    {
        "content": "<p>If not then maybe it is worth it to have a proofwidgets substitute for a while</p>",
        "id": 529340249,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752779144
    },
    {
        "content": "<p>Please keep in mind that proof widgets do not work in all editors. (In particular, they do not work in Emacs and need to be manually reimplemented in nvim AFAIK.) So there should always be a version of the goal display that does not require proof widgets.</p>",
        "id": 529380955,
        "sender_full_name": "Michael Sammler",
        "timestamp": 1752805483
    },
    {
        "content": "<p>It won‚Äôt replace it. It will just augment it until the infoview gets extensibility. Maybe I should have used the word ‚Äúaugment‚Äù instead of ‚Äúsubstitute‚Äù, since proofwidgets can‚Äôt affect the goal view either.</p>",
        "id": 529422356,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752829904
    },
    {
        "content": "<p>I like the Iris infoview as it is honestly. It's already less visual clutter than Rocq Iris which I am used to haha.</p>",
        "id": 529456017,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1752842913
    },
    {
        "content": "<p>I'm glad we (the royal we, meaning Mario) got rid of those gigantic horizontal lines</p>",
        "id": 529456297,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1752842996
    },
    {
        "content": "<p>I am very averse to the infoview becoming any more cluttered than it needs to be, but I guess this could be a nice add-on for those who'd benefit from it?</p>",
        "id": 529456594,
        "sender_full_name": "Oliver Soeser",
        "timestamp": 1752843091
    },
    {
        "content": "<p>One step closer to the Iris video game...</p>",
        "id": 529457128,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1752843255
    },
    {
        "content": "<ol>\n<li>\n<p>The infoview changes that Mario is proposing would give us the colourful highlighting we get for pure propositions already. We could do better than what we have now.</p>\n</li>\n<li>\n<p>The latexified version is triggered with a tactic in lean and appears under the infoview. The second link I sent in this chat is a good example of what I have in mind, minus the fancy math rendering.</p>\n</li>\n</ol>",
        "id": 529458285,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752843651
    },
    {
        "content": "<p>Colourful highlighting would be nice yes</p>",
        "id": 529458806,
        "sender_full_name": "Oliver Soeser",
        "timestamp": 1752843822
    },
    {
        "content": "<p>That and the ctrl click and (subt)-term highlighting on mouse over</p>",
        "id": 529458894,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752843845
    },
    {
        "content": "<p>We are essentially just rendering text.</p>",
        "id": 529459071,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752843895
    },
    {
        "content": "<p>Hovering the mouse over the iris proof view highlights the whole thing. Not the individual subterms. It doesn‚Äôt even separate the hypothesis and goal</p>",
        "id": 529459260,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752843954
    },
    {
        "content": "<p>Ideally we could have all of this appear in the infoview and the iris hypothesis could get highlighted in a custom colour</p>",
        "id": 529459528,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752844041
    },
    {
        "content": "<p>just to clarify the changes I would like to see: the iris tactic mode goal state would look exactly like the current one, except that hypotheses would be above the turnstile and treated exactly like regular hypotheses, including the highlighting and the greying out for inaccessible or shadowed hypotheses, but with boxes and stars before them to indicate that they are persistent or spatial hypotheses</p>",
        "id": 529482945,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1752852205
    },
    {
        "content": "<p>For iris users' convenience, I think some visible difference between Iris props and pure declarations/props is still useful to have</p>",
        "id": 529483335,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1752852332
    },
    {
        "content": "<p>they already have a visible difference, this is the star/box you can see in the screenshot</p>",
        "id": 529485335,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1752853061
    }
]