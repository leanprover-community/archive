[
    {
        "content": "<p>iProp seems like it is pretty close to working on the <a href=\"https://github.com/leanprover-community/iris-lean/tree/rfunctors\">rfunctors</a> branch, however there are a couple sorry's that mainly have to do with type casts (see eg. <a href=\"https://github.com/leanprover-community/iris-lean/blob/db45a9c62857f5f189c7745d5ec2900423b0a1cf/src/Iris/Instances/IProp/Instance.lean#L57\">ElemG.Bundle.ne</a>).</p>\n<p>I will not have much time to commit to Iris-Lean for the next little while, so if you are interested in helping, these goals are a good self-contained challenge. Finishing iProp would be a big step in this project and bring us much much closer to parity with Iris-Rocq!</p>",
        "id": 546910312,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761315817
    },
    {
        "content": "<p>I'll take a look.</p>",
        "id": 546921268,
        "sender_full_name": "suhr",
        "timestamp": 1761318711
    },
    {
        "content": "<p>Tricky stuff.</p>",
        "id": 547057590,
        "sender_full_name": "suhr",
        "timestamp": 1761398658
    },
    {
        "content": "<p>Glad I'm not the only one. Thanks for trying :)</p>",
        "id": 547060095,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761401164
    },
    {
        "content": "<p>FYI, I asked an LLM to fix the remaining sorry’s in <code>IProp/Instance.lean</code> (for fun). It’s almost done, except for those in <code>iOwn_alloc_strong_dep</code>. The proofs aren’t elegant, but they might give some clues. I’ll share more once it finishes the last ones.</p>",
        "id": 547443725,
        "sender_full_name": "Zongyuan Liu",
        "timestamp": 1761643443
    },
    {
        "content": "<p>Cool!!! I'm very curious to see what it ended up doing.</p>",
        "id": 547449501,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761645187
    },
    {
        "content": "<p>And I'd be interested to hear more details about the LLM and prompts as well.</p>",
        "id": 547449843,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761645279
    },
    {
        "content": "<p>Curious. Did you give it the proof context context with <code>pp.all</code> enabled? The usual view seems to lack important information, but in the same time <code>pp.all</code> output is not very human readable.</p>",
        "id": 547450878,
        "sender_full_name": "suhr",
        "timestamp": 1761645609
    },
    {
        "content": "<p>The LLM is stuck at the last subgoal of <code>iOwn_alloc_strong_dep</code>, thinking it is unprovable. The subgoal is finding a key (a <code>Nat</code>) of a map that is fresh AND satisfies some predicate P, given that there are infinite keys that are fresh and satisfy P, respectively. I'm not sure how to prove it either. It seems stronger than what's proven for the Rocq counterpart?</p>",
        "id": 547602758,
        "sender_full_name": "Zongyuan Liu",
        "timestamp": 1761692648
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394485\">suhr</span> <a href=\"#narrow/channel/490604-iris-lean/topic/Who.20wants.20the.20glory.20of.20finishing.20iProp.3F/near/547450878\">said</a>:</p>\n<blockquote>\n<p>Curious. Did you give it the proof context context with <code>pp.all</code> enabled? The usual view seems to lack important information, but in the same time <code>pp.all</code> output is not very human readable.</p>\n</blockquote>\n<p>I connected it to Lean LSP, not entirely sure what the LSP gives it.</p>",
        "id": 547603110,
        "sender_full_name": "Zongyuan Liu",
        "timestamp": 1761692892
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"883069\">Zongyuan Liu</span> <a href=\"#narrow/channel/490604-iris-lean/topic/Who.20wants.20the.20glory.20of.20finishing.20iProp.3F/near/547602758\">said</a>:</p>\n<blockquote>\n<p>I'm not sure how to prove it either. It seems stronger than what's proven for the Rocq counterpart?</p>\n</blockquote>\n<p>It is possible that the subgoal is unprovable, the top-level statement should be identical to the Rocq one in this case.</p>",
        "id": 547604074,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761693520
    },
    {
        "content": "<p>Do you think you could commit your progress somewhere? It sounds like you solved all the hard goals, I would be happy to help finish the last one off.</p>",
        "id": 547604192,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761693625
    },
    {
        "content": "<p>Ah, I found your branch :)</p>",
        "id": 547604378,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761693786
    },
    {
        "content": "<p>The last sorry is false (take P and Q to be the sets of even and odd natural numbers) but I'm very confident that <code>iOwn_alloc_strong_dep</code> is provable.</p>",
        "id": 547605390,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761694580
    },
    {
        "content": "<p>I'm curious how many of the comments are yours versus the LLM?</p>",
        "id": 547606723,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761695714
    },
    {
        "content": "<p>Aha! I did not know about <code>eq_of_heq</code>! I can see how that can deal with all the remaining type cases. Very cool, I have learned something from the machine <span aria-label=\"robot\" class=\"emoji emoji-1f916\" role=\"img\" title=\"robot\">:robot:</span></p>",
        "id": 547607349,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761696209
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"721721\">Markus de Medeiros</span> <a href=\"#narrow/channel/490604-iris-lean/topic/Who.20wants.20the.20glory.20of.20finishing.20iProp.3F/near/547606723\">said</a>:</p>\n<blockquote>\n<p>I'm curious how many of the comments are yours versus the LLM?</p>\n</blockquote>\n<p>I didn't write anything in that file - all the comments and code were written by the LLM (I haven't really got a chance to check carefully if all the generated comments make sense). I only gave it some high-level guidance.</p>",
        "id": 547663988,
        "sender_full_name": "Zongyuan Liu",
        "timestamp": 1761729631
    },
    {
        "content": "<p>Do you have a link to the file? I would be curious to see what the LLM has produced.</p>",
        "id": 547671478,
        "sender_full_name": "Michael Sammler",
        "timestamp": 1761731613
    },
    {
        "content": "<p><a href=\"https://github.com/lzy0505/iris-lean/blob/zl/rfunctors/src/Iris/Instances/IProp/Instance.lean\">The file is here</a></p>",
        "id": 547673169,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761732071
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"883069\">Zongyuan Liu</span> <a href=\"#narrow/channel/490604-iris-lean/topic/Who.20wants.20the.20glory.20of.20finishing.20iProp.3F/near/547663988\">said</a>:</p>\n<blockquote>\n<p>I didn't write anything in that file - all the comments and code were written by the LLM (I haven't really got a chance to check carefully if all the generated comments make sense). I only gave it some high-level guidance.</p>\n</blockquote>\n<p>Fascinating.</p>",
        "id": 547674867,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761732510
    },
    {
        "content": "<p>Today I will refactor this PR <a href=\"https://github.com/leanprover-community/iris-lean/tree/zl/rfunctors\">here</a></p>",
        "id": 547680740,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761734140
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"721721\">Markus de Medeiros</span> <a href=\"#narrow/channel/490604-iris-lean/topic/Who.20wants.20the.20glory.20of.20finishing.20iProp.3F/near/547680740\">said</a>:</p>\n<blockquote>\n<p>Today I will refactor this PR <a href=\"https://github.com/leanprover-community/iris-lean/tree/zl/rfunctors\">here</a></p>\n</blockquote>\n<p>I'm asking the LLM to refactor it right now (didn't see your message when I started). I'll push once it finishes. Maybe I can save your time :)</p>",
        "id": 547699418,
        "sender_full_name": "Zongyuan Liu",
        "timestamp": 1761739947
    },
    {
        "content": "<p>Haha</p>",
        "id": 547700024,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761740151
    },
    {
        "content": "<p>Out of curiosity, which LLM are you using for this?</p>",
        "id": 547700897,
        "sender_full_name": "Michael Sammler",
        "timestamp": 1761740406
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"574718\">Michael Sammler</span> <a href=\"#narrow/channel/490604-iris-lean/topic/Who.20wants.20the.20glory.20of.20finishing.20iProp.3F/near/547700897\">said</a>:</p>\n<blockquote>\n<p>Out of curiosity, which LLM are you using for this?</p>\n</blockquote>\n<p>I'm using Claude Code in VS Code, and only using it in a very basic way. I connect it to Lean LSP with <a href=\"https://github.com/oOo0oOo/lean-lsp-mcp\">https://github.com/oOo0oOo/lean-lsp-mcp</a>, and give it the awesome prompts of <a href=\"https://github.com/cameronfreer/lean4-skills/tree/main\">https://github.com/cameronfreer/lean4-skills/tree/main</a>. That's it. I'm sure people can easily set up similar things and try it out.</p>",
        "id": 547702508,
        "sender_full_name": "Zongyuan Liu",
        "timestamp": 1761740887
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"721721\">@Markus de Medeiros</span> It's done in <a href=\"https://github.com/lzy0505/iris-lean/commit/a4f7441c5581a0a1483f914f490b705b6d8a71c8\">https://github.com/lzy0505/iris-lean/commit/a4f7441c5581a0a1483f914f490b705b6d8a71c8</a>. Eyeballed the changes, they look reasonable.</p>",
        "id": 547704921,
        "sender_full_name": "Zongyuan Liu",
        "timestamp": 1761741492
    },
    {
        "content": "<p>Cool, I have some different ideas that can eliminate more code but the refactoring of the proofs looks great :)</p>",
        "id": 547705364,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1761741621
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"883069\">Zongyuan Liu</span> <a href=\"#narrow/channel/490604-iris-lean/topic/Who.20wants.20the.20glory.20of.20finishing.20iProp.3F/near/547702508\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"574718\">Michael Sammler</span> <a href=\"#narrow/channel/490604-iris-lean/topic/Who.20wants.20the.20glory.20of.20finishing.20iProp.3F/near/547700897\">said</a>:</p>\n<blockquote>\n<p>Out of curiosity, which LLM are you using for this?</p>\n</blockquote>\n<p>I'm using Claude Code in VS Code, and only using it in a very basic way. I connect it to Lean LSP with <a href=\"https://github.com/oOo0oOo/lean-lsp-mcp\">https://github.com/oOo0oOo/lean-lsp-mcp</a>, and give it the awesome prompts of <a href=\"https://github.com/cameronfreer/lean4-skills/tree/main\">https://github.com/cameronfreer/lean4-skills/tree/main</a>. That's it. I'm sure people can easily set up similar things and try it out.</p>\n</blockquote>\n<p>Just popping in to say that I've started using this setup and it works really well, thanks Zongyuan!</p>",
        "id": 553850124,
        "sender_full_name": "Remy Seassau",
        "timestamp": 1762348185
    },
    {
        "content": "<p>iProp is sorry-free! <a href=\"https://github.com/leanprover-community/iris-lean/pull/97\">iris-lean#97</a> thanks to Zongyuan!</p>\n<p>I ended up not proving <code>own_alloc_strong_dep</code> and getting claude to emit a self-contained proof of <code>iOwn_alloc_dep</code>. I was surprised at how well it worked! We will need to revisit this for the dependencies of <code>own_alloc_strong</code> and <code>own_alloc_cofinite</code>, but the only such dependent in our near future is <code>mono_nat</code>.  </p>\n<p>I'll also need to refactor the code some more before it can be merged, I already did quite a bit but the code in the PR right now is not acceptable.</p>",
        "id": 558920513,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1763929724
    }
]