[
    {
        "content": "<p><a href=\"https://github.com/leanprover/KLR/tree/md/prod-semantics/KLR/Semantics\">Here</a> is the program logic I am working on for my job. This morning I proved adequacy for it (I subsequently broke it because I need to finish <a href=\"https://github.com/leanprover-community/iris-lean/pull/63\">iris-lean#63</a> and <a href=\"https://github.com/leanprover-community/iris-lean/pull/64\">iris-lean#64</a> first). This thread is to A) make the code available, especially for people working on the tactics, and B) talk about how to use Iris-Lean to develop a program logic before we have all of the Iris machinery.</p>",
        "id": 529090694,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1752681147
    },
    {
        "content": "<p>Some notes:</p>\n<ul>\n<li>Not having <code>iApply</code> is really painful. I find that I had to be very careful about the different forms a lemma can take (like, <code>P ⊢ Q -∗ R</code> vs <code>P ∗ Q ⊢ R</code> vs <code>⊢ P ∗ Q -∗ R</code>). Converting lemmas between these forms meant going out and back into proofmode. </li>\n<li>Iris 0.5 doesn't have dynamic allocation of ghost code like Iris does. This matters for the adequacy theorems. \"Normal\" Iris adequacy theorems dynamically allocate all of the ghost state, and then use Iris's soundness theorems to with are of the form <code>(True ⊢ ... P → P)</code>. To avoid dynamically allocating ghost state I generalized the Iris soundness theorems to be of the form <code>✓ a → (ownM a ⊢ ... P → P)</code>, allocating all ghost state upfront. This works but the normal Iris way is a lot cleaner. I'm going to PR the generalized versions into both Iris's (though I doubt that Rocq-Iris cares about this). </li>\n<li>Minor, but I'll just point out that this <a href=\"https://github.com/leanprover-community/iris-lean/issues/26\">issue</a> was also a nuisance.</li>\n</ul>",
        "id": 529091786,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1752681534
    },
    {
        "content": "<p>I have some very simple proof rules and two extremely simple examples. Most of the junk in this proof is just stuff that I need to fix, but it's cool that it's an end-to-end proof using the system :) <br>\n<a href=\"/user_uploads/3121/yYiH8ittA_homC1PKlrjEkZY/Screenshot-2025-07-16-at-12.02.16PM.png\">Screenshot 2025-07-16 at 12.02.16 PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/yYiH8ittA_homC1PKlrjEkZY/Screenshot-2025-07-16-at-12.02.16PM.png\" title=\"Screenshot 2025-07-16 at 12.02.16 PM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1290x1258\" src=\"/user_uploads/thumbnail/3121/yYiH8ittA_homC1PKlrjEkZY/Screenshot-2025-07-16-at-12.02.16PM.png/840x560.webp\"></a></div>",
        "id": 529092944,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1752681903
    },
    {
        "content": "<p>It seems like everyone needs <code>iapply</code> badly.</p>",
        "id": 529097392,
        "sender_full_name": "suhr",
        "timestamp": 1752683516
    },
    {
        "content": "<p>By the way, why Iris needs turnstyles? Why can't you use use <code>⊢ ...</code> everywhere?</p>",
        "id": 529098147,
        "sender_full_name": "suhr",
        "timestamp": 1752683800
    },
    {
        "content": "<p>What do you mean by \"needs turnstyles\"?</p>",
        "id": 529106938,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1752687150
    },
    {
        "content": "<p>I mean, if <code>P ⊢ Q</code> and <code>⊢ P -∗ Q</code> essentially the same, why would you need the first one?</p>",
        "id": 529112157,
        "sender_full_name": "suhr",
        "timestamp": 1752689365
    },
    {
        "content": "<p>Just muscle memory from Iris <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> You are right that there is no logical difference</p>",
        "id": 529112605,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1752689559
    },
    {
        "content": "<p>In theory they are equivalent, but in practice there are some differences. In fact, Iris switched from <code>P ⊢ Q</code> to <code>⊢ P -∗ Q</code> by default recently:<br>\n<a href=\"https://gitlab.mpi-sws.org/iris/iris/-/merge_requests/791\">https://gitlab.mpi-sws.org/iris/iris/-/merge_requests/791</a></p>",
        "id": 529209695,
        "sender_full_name": "Michael Sammler",
        "timestamp": 1752733320
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394485\">suhr</span> <a href=\"#narrow/channel/490604-iris-lean/topic/NML/near/529097392\">said</a>:</p>\n<blockquote>\n<p>It seems like everyone needs <code>iapply</code> badly.</p>\n</blockquote>\n<p>Indeed. I'm hoping to get my <code>iapply</code> to a useable state within the next few days. Most of the functionality is done, but crucially it is missing the ability to use specialisation patterns like [H1, ..., Hn]. (And after that a lot of refactoring needs to be done <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> )</p>",
        "id": 529211710,
        "sender_full_name": "Oliver Soeser",
        "timestamp": 1752734404
    }
]