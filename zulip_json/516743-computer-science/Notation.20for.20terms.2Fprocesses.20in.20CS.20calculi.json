[
    {
        "content": "<p>(Spin-off of <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/Lambda.20calculus/with/528557656\">#general &gt; Lambda calculus</a>)</p>\n<p>We're gonna be full of reduction and transition relations for operational semantics in <a href=\"https://github.com/cs-lean/cslib\">https://github.com/cs-lean/cslib</a> (we already have the one for CCS, and people are working on lambda calculus, SKI, and pi-calculus already). I'm trying to make sense of how to give all these semantics the expected notation.</p>\n<p>All these relations typically have the notation <code>m → n</code>, sometimes with a label on top, sometimes with a subscript on the arrow, plus the accompanying notation <code>m ⇒ n</code> for the derived 'saturated' version (given by the reflexive and transitive closure of →). In our research group we've been using -[l]-&gt; for a transition with label l, which would then give =[l]=&gt; for the saturated variant.</p>\n<p>Another thing to consider is that one syntax can have many accompanying definitions of semantics. For example, the lambda calculus has a lot of possible evaluation strategies (like cbv and cbn), with more being developed. The study of structural operational semantics and mathematical semantics made some languages have both a reduction and a transition semantics, etc.</p>\n<p>A solution could be to define typeclasses for the different classes of reduction/transition relations, and make the notation parameterised on the name of the relation.</p>\n<p>For example, if <code>cbv : Term -&gt; Term -&gt; Prop</code>, we instantiate something like <code>Semantics.IsReductionRelation</code> and now we can write <code>m →cbv n</code>. Would that be ok?</p>\n<p>Some languages are lucky, like CCS has essentially one lts semantics. For these situations we could have a typeclass that does not require specifying the name of the relation.</p>\n<p><span class=\"user-mention\" data-user-id=\"687698\">@Chris Henson</span> <span class=\"user-mention\" data-user-id=\"931332\">@Thomas Waring</span> <span class=\"user-mention\" data-user-id=\"524339\">@Yicheng Qian</span></p>",
        "id": 528558408,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752441735
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/528558408\">said</a>:</p>\n<blockquote>\n<p>All these relations typically have the notation <code>m → n</code>, sometimes with a label on top, sometimes with a subscript on the arrow, plus the accompanying notation <code>m ⇒ n</code> for the derived 'saturated' version (given by the reflexive and transitive closure of →). </p>\n</blockquote>\n<p>In my development of SKI I have used <code>. ⇒ .</code> for single-step reduction, and <code>. ⇒* .</code> for its reflexive-transitive closure. I'm not totally wedding to this, but I avoided <code>. → .</code> to avoid mixing it up with the functional arrow: for instance a transitive law<br>\n<code> (a → b) → (b → c) → (a → c)</code><br>\nwould certainly confuse me, even if lean would parse it correctly. While maybe not universal the <code>*</code> for multi-step reduction is familiar to me, and makes sense by (rough) analogy with the <a href=\"https://en.wikipedia.org/wiki/Kleene_star\">Kleene star</a>.</p>",
        "id": 528590111,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1752473010
    },
    {
        "content": "<p>The Kleene star after the arrow is used in a lot of papers, I like it myself. Also because you can then do -&gt;+ for the version that requires at least one step. And your choices certainly make sense I'm the local context of SKI.</p>\n<p>But in LTSs, the =&gt; typically means closure on tau-transitions.</p>\n<p>I'm gonna try to make a file that gives an overview of all notations at a glance and possible conflicts, maybe that'll facilitate the discussion. Maybe it's a pipedream to have one convention, but I'd like to make sure. :⁠-⁠)</p>",
        "id": 528592149,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752474216
    },
    {
        "content": "<p>Oof, there's no unicode symbol for a two-headed double arrow, right? :(<br>\nI want ⇒ with a double head, as in ↠.</p>",
        "id": 528680542,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752504896
    },
    {
        "content": "<p>➾</p>",
        "id": 528680961,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752505014
    },
    {
        "content": "<p>It's \"U+27BE OPEN OUTLINED RIGHTWARDS ARROW\"</p>",
        "id": 528681327,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752505127
    },
    {
        "content": "<p>shows up as a double headed double arrow on my font</p>",
        "id": 528681406,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752505148
    },
    {
        "content": "<p>Ok, I see two options for all our nice arrows. I've summarised them here: <a href=\"https://github.com/cs-lean/cslib/blob/main/NOTATION.md\">https://github.com/cs-lean/cslib/blob/main/NOTATION.md</a></p>\n<p>Basically, Option A uses an extra arrow head to mean 'possibly multiple steps', whereas Option B uses the Kleene star. I used Option A in my textbook on choreographic programming because having a * in addition to transition labels looked cumbersome, but I'm not married to this.</p>\n<p>Are there more options that I've missed maybe?</p>\n<p>I'm not really happy with <code>m →[cbv] n</code> and <code>p [μ]→[late] q</code> when we mention the relation explicitly, but I couldn't figure anything better out yet.. :-)</p>",
        "id": 528689223,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752507436
    },
    {
        "content": "<p>(Maybe just get rid of the square brackets?..)</p>",
        "id": 528689688,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752507585
    },
    {
        "content": "<p>get rid of which square brackets</p>",
        "id": 528690150,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752507741
    },
    {
        "content": "<p>the brackets are to help everyone figure out how everything is bracketed</p>",
        "id": 528690224,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752507766
    },
    {
        "content": "<p>The ones around cbv, or late, or \\mu.</p>",
        "id": 528690454,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752507829
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/stream/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/528690224\">said</a>:</p>\n<blockquote>\n<p>the brackets are to help everyone figure out how everything is bracketed</p>\n</blockquote>\n<p>I put them there! But I also feel like it's getting a bit busy (the notation).</p>",
        "id": 528690588,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752507868
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/528689223\">said</a>:</p>\n<blockquote>\n<p>Ok, I see two options for all our nice arrows. I've summarised them here: <a href=\"https://github.com/cs-lean/cslib/blob/main/NOTATION.md\">https://github.com/cs-lean/cslib/blob/main/NOTATION.md</a></p>\n<p>Basically, Option A uses an extra arrow head to mean 'possibly multiple steps', whereas Option B uses the Kleene star. I used Option A in my textbook on choreographic programming because having a * in addition to transition labels looked cumbersome, but I'm not married to this.</p>\n<p>Are there more options that I've missed maybe?</p>\n<p>I'm not really happy with <code>m →[cbv] n</code> and <code>p [μ]→[late] q</code> when we mention the relation explicitly, but I couldn't figure anything better out yet.. :-)</p>\n</blockquote>\n<p>I especially find <code>p [μ]→[late] q</code> being a bit hard for my brain to parse,  as <code>μ</code> (transition label)  and <code>late</code>(type of transition/semantics) are different things but written in the same brackets... Although things like <code>p [μ]→(late) q</code> or <code>p [μ]→&lt;late&gt; q</code> are busier and probably harder to read...</p>",
        "id": 528693608,
        "sender_full_name": "Xueying Qin",
        "timestamp": 1752508750
    },
    {
        "content": "<p>Mmmh right.. so at least the square brackets around the \\mu should probably go.</p>",
        "id": 528718443,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752517815
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"931332\">@Thomas Waring</span> I agree that looking at the same arrow in implications about transitions is gonna be a bit weird and tried to do something about it, but it soon became a lost cause once I started thinking about type systems and logics (which are gonna use the same arrow..).<br>\nWhat do you think of the current proposals? Could you live with both/one/none of them? I'm still very much in doubt about brackets, at least. (Tempted to remove them altogether.)</p>\n<p>In the meantime I'm reviewing the rest of your SKI pr. :-⁠)</p>",
        "id": 528787675,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752561098
    },
    {
        "content": "<p>For my part those logical / type system examples are less egregious, since there at least the arrow has (more-or-less) the same semantics — ie we aren't mixing up \"arrow as transition\" and \"arrow as function\". If it becomes a problem syntactic implication <a href=\"https://en.wikipedia.org/wiki/List_of_logic_symbols\">is sometimes written</a> \"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⊃</mo></mrow><annotation encoding=\"application/x-tex\">\\supset</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mrel\">⊃</span></span></span></span>\" to distinguish it from implication \"in the meta\".</p>\n<p>That being said I could certainly live with your proposals, with a preference for the second (Kleene star) version — to me a double headed arrow means \"surjection\", though I could certainly get used to it. I would vote to keep the brackets, but possibly that's because so far I haven't had to use them...</p>",
        "id": 528793110,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1752563550
    },
    {
        "content": "<p>I see your points. I slightly prefer the extra arrow head because it takes a symbol away, the notation can get super busy.. like <code>p μs⇒late* q</code></p>",
        "id": 528882930,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752591881
    },
    {
        "content": "<p>Btw, done reviewing the ski pr. We can merge it before we're done with this discussion, as long as notation is locally scoped. Between SKI and CCS, we actually already hit all the use cases for the notation. For example, you already have an alternative semantics (parallel reduction). In my proposal it'd read something like <code>p →par q</code>. It'd be great if we could somehow choose how we annotate the arrow when we instantiate the relation, so that one could write the p-subscript as you do and link it to ParallelReduction. This goes beyond my notation-fu though.... <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 528883864,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752592162
    },
    {
        "content": "<p>Ah, well, I guess one could make it work with abbreviations, giving other names to the relations.</p>",
        "id": 528887987,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752593426
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"929508\">@Fabrizio Montesi</span> To clarify, you want that when we define a relation, we select what name it uses in conjunction with arrow for notation? I think I can write this, either as an attribute or command you run afterwards. I think it would be good that this also does so for the reflexive (symmetric) transitive closures since they are common.</p>",
        "id": 528889557,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752593915
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> <a href=\"#narrow/stream/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/528889557\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> To clarify, you want that when we define a relation, we select what name it uses in conjunction with arrow for notation? I think I can write this, either as an attribute or command you run afterwards. I think it would be good that this also does so for the reflexive (symmetric) transitive closures since they are common.</p>\n</blockquote>\n<p>Yes that's the idea. An attribute/command thing would be awesome.</p>",
        "id": 528892481,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752594797
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/528882930\">said</a>:</p>\n<blockquote>\n<p>I see your points. I slightly prefer the extra arrow head because it takes a symbol away, the notation can get super busy.. like <code>p μs⇒late* q</code></p>\n</blockquote>\n<p>this is a good point (as I discovered when I tried to work with multi-step reduction on polynomials <code>⇒'*</code></p>",
        "id": 528892749,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1752594878
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/528883864\">said</a>:</p>\n<blockquote>\n<p>Btw, done reviewing the ski pr. </p>\n</blockquote>\n<p>thanks for your comments! i've committed the suggested changes to names, and making notation scoped to the <code>SKI</code> namespace. I've also made an effort to name lemmas about say <code>MRed</code> (multi-step reduction) as <code>MRed.[...]</code> — is this appropriate? (Excuse my lean newbie questions!)</p>",
        "id": 528893416,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1752595126
    },
    {
        "content": "<p>I asked a question in <a class=\"stream-topic\" data-stream-id=\"239415\" href=\"/#narrow/channel/239415-metaprogramming-.2F-tactics/topic/defining.20notations.20with.20an.20attribute/with/528914336\">#metaprogramming / tactics &gt; defining notations with an attribute</a> about defining notations with attributes. Either way, I think the command version works and would help to unify notation.</p>\n<p>(The arrows and precedence I used there were arbitrary, I do not have too strong an opinion.)</p>",
        "id": 528915636,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752602754
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"931332\">Thomas Waring</span> <a href=\"#narrow/stream/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/528893416\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/528883864\">said</a>:</p>\n<blockquote>\n<p>Btw, done reviewing the ski pr. </p>\n</blockquote>\n<p>thanks for your comments! i've committed the suggested changes to names, and making notation scoped to the <code>SKI</code> namespace. I've also made an effort to name lemmas about say <code>MRed</code> (multi-step reduction) as <code>MRed.[...]</code> — is this appropriate? (Excuse my lean newbie questions!)</p>\n</blockquote>\n<p>Yes! And, merged! <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 528929655,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752608300
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> <a href=\"#narrow/stream/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/528915636\">said</a>:</p>\n<blockquote>\n<p>I asked a question in <a class=\"stream-topic\" data-stream-id=\"239415\" href=\"/#narrow/channel/239415-metaprogramming-.2F-tactics/topic/defining.20notations.20with.20an.20attribute/with/528929332\">#metaprogramming / tactics &gt; defining notations with an attribute</a> about defining notations with attributes. Either way, I think the command version works and would help to unify notation.</p>\n<p>(The arrows and precedence I used there were arbitrary, I do not have too strong an opinion.)</p>\n</blockquote>\n<p>Looking good, let me know when you figure out the attribute thing.</p>\n<p>I'm also thinking about how we can deal with reductions more uniformly. We could do it as I did for LTS, that is, define a ReductionSystem structure that takes a <code>red</code> relation field. Then, we can make a file for ReductionSystem that automatically gives <code>mred</code>, <code>mred.single</code>, etc. See <a href=\"https://cs-lean.github.io/Cslib/Semantics/LTS/Basic.html\">https://cs-lean.github.io/Cslib/Semantics/LTS/Basic.html</a></p>\n<p>Then we could make all sorts of notation tricks for ReductionSystem and LTS.</p>\n<p>Maybe a structure is overkill and it could just be an abbreviation, or it could be a Relation or CRel... Not sure about this specific bit since that discussion is still pending in mathlib.</p>",
        "id": 528930481,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752608623
    },
    {
        "content": "<p>Hopefully this can be done without creating any or too much friction in reusing the results about Relation and such.</p>",
        "id": 528930618,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752608692
    },
    {
        "content": "<p>It's really cool that we have already covered enough languages/semantics to play with this tbh!</p>",
        "id": 528930811,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752608776
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"929508\">@Fabrizio Montesi</span> I have opened a PR with the proposed attribute: <a href=\"https://github.com/cs-lean/cslib/pull/9\">https://github.com/cs-lean/cslib/pull/9</a></p>\n<p>As I say in the description, we probably want different arrows than the ones I used there, it is easily changed.</p>",
        "id": 528938734,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752612202
    },
    {
        "content": "<p>Super, thanks!</p>\n<p>What's the interest in deriving an equivalence relation out of a reduction semantics through EqvGen, in general?</p>",
        "id": 529017270,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752658156
    },
    {
        "content": "<p>If I am talking about a semantics being sound wrt to a reduction, it is not uncommon to talk about this equivalence relation. For proofs of confluence, normalization, etc. we probably only care about the reflexive transitive closure, but I don't think it hurts to reserve the notation.</p>",
        "id": 529019408,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752658898
    },
    {
        "content": "<p>Do you have a reference for that? I vaguely recall something like that from rewriting systems maybe?..</p>",
        "id": 529069908,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752675215
    },
    {
        "content": "<p>In the meantime I made my idea formal, see <a href=\"https://github.com/cs-lean/cslib/blob/main/Cslib/Semantics/ReductionSystem/Basic.lean\">https://github.com/cs-lean/cslib/blob/main/Cslib/Semantics/ReductionSystem/Basic.lean</a><br>\nIt has a similar API to LTS.<br>\nAn LTS is instantiated like this: <a href=\"https://github.com/cs-lean/cslib/blob/9311d10dac269c8d5b097c41eef78f5b07b6a238/Cslib/ConcurrencyTheory/CCS/Semantics.lean#L37\">https://github.com/cs-lean/cslib/blob/9311d10dac269c8d5b097c41eef78f5b07b6a238/Cslib/ConcurrencyTheory/CCS/Semantics.lean#L37</a><br>\nWe could do the same, e.g., in SKI <span class=\"user-mention\" data-user-id=\"931332\">@Thomas Waring</span>. That is, right after defining <code>Red</code>, we could:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">rs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ReductionSystem</span><span class=\"w\"> </span><span class=\"n\">SKI</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">Red</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Red</span>\n</code></pre></div>\n<p>And <code>rs</code> would now immediately have both <code>rs.Red</code> and <code>rs.MRed</code>, along with any general useful theorem we can think about for them (I've put a couple), just like in CCS <code>lts</code> gets immediately <code>lts.Tr</code>, <code>lts.MTr</code>, and <code>lts.STr</code>.</p>\n<p>What do you think? I'm not exactly sure where we should instruct the notation with this approach. The definition of <code>rs</code> maybe?</p>",
        "id": 529071710,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752675730
    },
    {
        "content": "<p>(<span class=\"user-mention\" data-user-id=\"931332\">@Thomas Waring</span> I've added your name as an author to that file because I copy-pasted some stuff from your SKI semantics, let me know if you're not ok with that)</p>",
        "id": 529072110,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752675846
    },
    {
        "content": "<p>I've also added Option C for notation, for using triangle heads instead of normal arrows. Does that look better?</p>\n<p><a href=\"https://github.com/cs-lean/cslib/blob/main/NOTATION.md\">https://github.com/cs-lean/cslib/blob/main/NOTATION.md</a></p>",
        "id": 529074468,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752676450
    },
    {
        "content": "<p>That all seems reasonable to me :-)</p>",
        "id": 529084509,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1752679156
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/529069908\">said</a>:</p>\n<blockquote>\n<p>Do you have a reference for that? I vaguely recall something like that from rewriting systems maybe?..</p>\n</blockquote>\n<p>Yes, rewriting systems. For instance see <em>Term Rewriting and All That</em>.</p>",
        "id": 529085410,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752679432
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/529074468\">said</a>:</p>\n<blockquote>\n<p>I've also added Option C for notation, for using triangle heads instead of normal arrows. Does that look better?</p>\n<p><a href=\"https://github.com/cs-lean/cslib/blob/main/NOTATION.md\">https://github.com/cs-lean/cslib/blob/main/NOTATION.md</a></p>\n</blockquote>\n<p>I have a preserence for not trying to use the same arrow for implication. I would personally mix A and B and use <code>m ⭢ n</code> for reduction and <code>m ↠ n</code> for multistep (reflexive transitive closure).</p>",
        "id": 529086159,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752679686
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/529071710\">said</a>:</p>\n<blockquote>\n<p>What do you think? I'm not exactly sure where we should instruct the notation with this approach.</p>\n</blockquote>\n<p>The paramaterized notation still works fine with <code>ReductionSystem</code>, it would just define this structure. Should I update my PR to do this?</p>",
        "id": 529088223,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752680336
    },
    {
        "content": "<p>Maybe <code>ReductionSystem</code> should have a field for the suffix symbol we use with the arrow? What do you think?</p>",
        "id": 529088594,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752680446
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> <a href=\"#narrow/stream/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/529088594\">said</a>:</p>\n<blockquote>\n<p>Maybe <code>ReductionSystem</code> should have a field for the suffix symbol we use with the arrow? What do you think?</p>\n</blockquote>\n<p>How would that look like/work?<br>\nAn alternative is that we annotate the definition of the reduction system, so that the user can control the notation generated for it I guess?</p>",
        "id": 529088868,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752680526
    },
    {
        "content": "<p>I meant that we have</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">ReductionSystem</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Term</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">Red</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Term</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Term</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"w\">  </span><span class=\"n\">suffix</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"c1\">-- maybe not actually String, the type for notation</span>\n</code></pre></div>\n<p>and define the notations for <code>ReductionSystem.Red</code> and <code>ReductionSystem.MRed</code>. Storing this is maybe not strictly necessary, but could be nice to have this recorded wthin this API structure.</p>\n<p>We could still use the attribute when defining a reduction, e.g. write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">reduction</span><span class=\"w\"> </span><span class=\"s2\">\"ᶜ\"</span><span class=\"kd\">]</span>\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Red</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SKI</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">SKI</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>and it defines the <code>ReductionSystem SKI</code>.</p>",
        "id": 529090689,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752681142
    },
    {
        "content": "<p>(Btw I have a branch with confluence for the locally nameless presentation about ready to PR, I am going to wait until we settle this reduction notation so it uses the API we settle on)</p>",
        "id": 529092823,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752681861
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> <a href=\"#narrow/stream/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/529090689\">said</a>:</p>\n<blockquote>\n<p>I meant that we have</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">ReductionSystem</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Term</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">Red</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Term</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Term</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"w\">  </span><span class=\"n\">suffix</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"c1\">-- maybe not actually String, the type for notation</span>\n</code></pre></div>\n<p>and define the notations for <code>ReductionSystem.Red</code> and <code>ReductionSystem.MRed</code>. Storing this is maybe not strictly necessary, but could be nice to have this recorded wthin this API structure.</p>\n<p>We could still use the attribute when defining a reduction, e.g. write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">reduction</span><span class=\"w\"> </span><span class=\"s2\">\"ᶜ\"</span><span class=\"kd\">]</span>\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Red</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SKI</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">SKI</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>and it defines the <code>ReductionSystem SKI</code>.</p>\n</blockquote>\n<p>Ah, I see! I'd avoid mixing data with notation for now, but let's keep this in mind as a later option in case it becomes relevant.</p>\n<p>For the annotation, I see two options (we can change the concrete annotation names, it's just an example). In your proposal, I guess we'd need to add the name of the ReductionSystem.</p>\n<p>For example,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">derive_reduction_system</span><span class=\"w\"> </span><span class=\"n\">rs</span><span class=\"w\"> </span><span class=\"s2\">\"ᶜ\"</span><span class=\"kd\">]</span>\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Red</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SKI</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">SKI</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>would define a ReductionSystem called <code>rs</code> with notation suffixed by c.<br>\nOtherwise, we could write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">notation_name</span><span class=\"w\"> </span><span class=\"s2\">\"ᶜ\"</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">rs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ReductionSystem</span><span class=\"w\"> </span><span class=\"n\">SKI</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"bp\">..</span>\n</code></pre></div>\n<p>The two could even coexist (the first could be a macro for the second).</p>",
        "id": 529097878,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752683696
    },
    {
        "content": "<p>What's the casing one should use for annotations, btw? camelCase, I guess?</p>",
        "id": 529099467,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752684281
    },
    {
        "content": "<p>Are there other annotations like this that we could take some inspiration from regarding the names of all these?</p>",
        "id": 529099539,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752684311
    },
    {
        "content": "<p>This seems good to me! We could derive the name of the reduction system, but probably better to have it explicit. I'll give this a try.</p>",
        "id": 529099885,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752684435
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/stream/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/529099467\">said</a>:</p>\n<blockquote>\n<p>What's the casing one should use for annotations, btw? camelCase, I guess?</p>\n</blockquote>\n<p>I'm not sure where it's documented, but every attribute I've seen is lower snake case.</p>",
        "id": 529100065,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752684499
    },
    {
        "content": "<p>Huh, I hadn't thought about it, but would it be an option to use deriving clauses right after the definition of reduction relations for the same purposes?</p>\n<p><a href=\"https://lean-lang.org/doc/reference/latest/Type-Classes/Deriving-Instances/\">https://lean-lang.org/doc/reference/latest/Type-Classes/Deriving-Instances/</a></p>",
        "id": 529107177,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752687258
    },
    {
        "content": "<p>I considered this, but I wasn't sure if it was idiomatic because of the argument for the suffix. I could try it and see what we prefer.</p>",
        "id": 529108219,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752687743
    },
    {
        "content": "<p>For now, I have pushed an update that makes the notation attribute use <code>ReductionSystem</code>. I left a couple of comments on things I wasn't sure about.</p>",
        "id": 529110150,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752688517
    },
    {
        "content": "<p>Yeah, I could be wrong, but I'm not seeing a way to pass in a parameter like that.</p>",
        "id": 529113787,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752689998
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/529086159\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/529074468\">said</a>:</p>\n<blockquote>\n<p>I've also added Option C for notation, for using triangle heads instead of normal arrows. Does that look better?</p>\n<p><a href=\"https://github.com/cs-lean/cslib/blob/main/NOTATION.md\">https://github.com/cs-lean/cslib/blob/main/NOTATION.md</a></p>\n</blockquote>\n<p>I have a preserence for not trying to use the same arrow for implication. I would personally mix A and B and use <code>m ⭢ n</code> for reduction and <code>m ↠ n</code> for multistep (reflexive transitive closure).</p>\n</blockquote>\n<p>Why mix two different arrow heads? (I don't have a strong opinion.)</p>",
        "id": 529165665,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752699280
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> <a href=\"#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/529110150\">said</a>:</p>\n<blockquote>\n<p>For now, I have pushed an update that makes the notation attribute use <code>ReductionSystem</code>. I left a couple of comments on things I wasn't sure about.</p>\n</blockquote>\n<p>This looks very good to me. :-)<br>\nI'd put this directly in ReductionSystem.lean and call the annotation reduction_sys or gen_reduction_sys (since it creates a reduction system).<br>\nCould I also ask for the same stuff for LTSs? (same terminology, so either lts or gen_lts)</p>",
        "id": 529165840,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752699356
    },
    {
        "content": "<p>I moved this into the <code>ReductionSystem</code> file and used the name <code>reduction_sys</code> for the attribute. I didn't have a deep thought about the arrows, those just seemed like the ones closest to what we write on paper.</p>\n<p>Can you point out exactly which LTS types should be used in the reduction notations? Attributes need to be defined in their own file before they are used, so we might need move a couple of things.</p>",
        "id": 529172473,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752702877
    },
    {
        "content": "<p>In Semantics/LTS/Basic.lean, type LTS corresponds to ReductionSystem. The only difference is that LTS takes a Tr relation of type State -&gt; Label -&gt; State -&gt; Prop, instead of a Red : Term -&gt; Term -&gt; Prop relation. (State is like Term.)</p>\n<p>So what is needed is annotating the def of a relation like Tr : State -&gt; Label -&gt; State -&gt; Prop relation, much like we annotate the def of a reduction relation Red : Term -&gt; Term -&gt; Prop. That should def an  LTS, just like we currently def a ReductionSystem.</p>\n<p>See CCS/Semantics.lean for an example where I do it manually.</p>",
        "id": 529174093,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752703882
    },
    {
        "content": "<p>Okay, I'll take a look. I'm having a seperate issue I need to fix first with inferring type variables. This wasn't a problem when working with <code>Relation.ReflTransGen</code> directly, I'll have to think a bit...</p>",
        "id": 529182285,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752709913
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"929508\">@Fabrizio Montesi</span> I have added the attribute notation for LTS. I used it  in the file <code>CCS/Semantics.lean</code> you meantioned and in a test to confirm it is working, even with variables (thanks to Kyle Miller!).</p>",
        "id": 529336479,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752777619
    },
    {
        "content": "<p>It looks <em>great</em>!</p>\n<p>Mini questions:</p>\n<ul>\n<li>Sometimes there's a canonical semantics, e.g., in CCS the LTS I've defined is widely accepted as 'the one'. I guess I could just pass an empty string as the suffix for the arrow and it'd work? Maybe if things get more complex in the future we could make actual named parameters (like in aesop), but we can always do that later.</li>\n<li>If one annotation is 'reduction_sys', the other should just be 'lts'. Otherwise, both should have the 'gen' prefix. I'm fine with both options, just wanted to point out the current inconsistency.</li>\n</ul>",
        "id": 529343683,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752780783
    },
    {
        "content": "<ul>\n<li>An empty string does not currently work, but I should be able to easily make it so that if you don't pass a string it defines the cannonical notation</li>\n<li>I will change the name for consistency</li>\n</ul>",
        "id": 529344224,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752781030
    },
    {
        "content": "<p>Forgot to say: I'd also get rid of the square brackets around transition labels. I think most people are gonna write round parentheses when it matters.</p>\n<p>I can do that bit myself if you like, I'll play a bit with CCS.</p>",
        "id": 529346003,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752781824
    },
    {
        "content": "<p>I have pushed those two changes. Yes, please feel free to change the notation. I went with the square bracket simply because I was getting confused by precedence while also trying to figure out the metaprogramming stuff.</p>",
        "id": 529346467,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752782021
    },
    {
        "content": "<p>Merged! Thanks for this lovely notation-fu. :⁠-⁠) I'll play with it as soon as I have time.</p>",
        "id": 529347099,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752782272
    },
    {
        "content": "<p>Nice, thanks! This was a great way for me to learn some more metaprogramming. I will use it for my upcoming confluence PR as well.</p>",
        "id": 529347489,
        "sender_full_name": "Chris Henson",
        "timestamp": 1752782431
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"931332\">@Thomas Waring</span> Does the ReductionSystem thing work for your SKI formalisation?</p>",
        "id": 529577914,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1752933306
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi\">#general &gt; Notation for terms/processes in CS calculi</a> by <span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span>.</p>",
        "id": 529759943,
        "sender_full_name": "Notification Bot",
        "timestamp": 1753077853
    },
    {
        "content": "<p>This looks great! &amp; it seems like it ought to work for SKI, but I'm having a little trouble making it match up — for example in the following</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">parallel_mRed</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">b'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SKI</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">↠</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">↠</span><span class=\"w\"> </span><span class=\"n\">b'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↠</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">b'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Trans</span><span class=\"bp\">.</span><span class=\"n\">simple</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"bp\">.</span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I get an error saying <code>failed to synthesize Trans rs.MRed rs.MRed rs.MRed</code>, which looks verbatim like something in <code>ReductionSystem.Basic.lean</code></p>",
        "id": 529920373,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1753113421
    },
    {
        "content": "<p>Similarly if I replace the above by a calc block I get</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">'</span><span class=\"k\">calc</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">expression</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Relation</span><span class=\"bp\">.</span><span class=\"n\">ReflTransGen</span><span class=\"w\"> </span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">b'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">b'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n</code></pre></div>",
        "id": 529920821,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1753113565
    },
    {
        "content": "<p>Am I using it correctly? I've <code>open</code> -ed <code>Red</code> and <code>ReductionSystem</code>, and used a an unlabelled arrow</p>",
        "id": 529921158,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1753113670
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"931332\">Thomas Waring</span> <a href=\"#narrow/channel/516743-computer-science/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/529920373\">said</a>:</p>\n<blockquote>\n<p>This looks great! &amp; it seems like it ought to work for SKI, but I'm having a little trouble making it match up — for example in the following</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">parallel_mRed</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">b'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SKI</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">↠</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">↠</span><span class=\"w\"> </span><span class=\"n\">b'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↠</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"bp\">⬝</span><span class=\"w\"> </span><span class=\"n\">b'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Trans</span><span class=\"bp\">.</span><span class=\"n\">simple</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"bp\">.</span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I get an error saying <code>failed to synthesize Trans rs.MRed rs.MRed rs.MRed</code>, which looks verbatim like something in <code>ReductionSystem.Basic.lean</code></p>\n</blockquote>\n<p>It looks like </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Trans</span><span class=\"w\"> </span><span class=\"n\">MRed</span><span class=\"w\"> </span><span class=\"n\">MRed</span><span class=\"w\"> </span><span class=\"n\">MRed</span>\n</code></pre></div>\n<p>is missing (and necessary)</p>",
        "id": 529921215,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1753113685
    },
    {
        "content": "<p>You have three Trans instances, but you need four, like this: <a href=\"https://gist.github.com/b-mehta/e412c837818223b8f16ca0b4aa19b166#file-sk_calculate-lean-L76\">https://gist.github.com/b-mehta/e412c837818223b8f16ca0b4aa19b166#file-sk_calculate-lean-L76</a></p>",
        "id": 529921335,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1753113727
    },
    {
        "content": "<p>Ah you're absolutely right, thanks</p>",
        "id": 529924212,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1753114696
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"931332\">@Thomas Waring</span> Is this in a branch I could look at? I am able to <code>#synth Trans rs.MRed rs.MRed rs.MRed</code> for any of the other reduction systems. Or just mention it at <a href=\"https://github.com/cs-lean/cslib/issues/14\">this issue</a> when this ends up in a PR so we can coordinate any changes about Trans instances.</p>",
        "id": 529934332,
        "sender_full_name": "Chris Henson",
        "timestamp": 1753118596
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"931332\">@Thomas Waring</span> Looking at your messages closer I realize this is probably because of the bad instances <code>Trans R R (ReflTransGen R)</code> and <code>Trans rs.Red rs.Red rs.MRed</code> mentioned in the issue I linked above. I have another PR removing it, but you can give ahead and do so in your branch too and it should fix the issue.</p>",
        "id": 529944110,
        "sender_full_name": "Chris Henson",
        "timestamp": 1753121961
    },
    {
        "content": "<p>Okay great, as it is I fixed made it work using these instances:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ReductionSystem</span><span class=\"w\"> </span><span class=\"n\">Term</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsTrans</span><span class=\"w\"> </span><span class=\"n\">Term</span><span class=\"w\"> </span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ReductionSystem</span><span class=\"w\"> </span><span class=\"n\">Term</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transitive</span><span class=\"w\"> </span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">transitive_of_trans</span><span class=\"w\"> </span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ReductionSystem</span><span class=\"w\"> </span><span class=\"n\">Term</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Trans</span><span class=\"w\"> </span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"w\"> </span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"w\"> </span><span class=\"n\">rs</span><span class=\"bp\">.</span><span class=\"n\">MRed</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">instTransOfIsTrans</span>\n</code></pre></div>\n<p>though I expect some of them would be redundant</p>",
        "id": 530098035,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1753174447
    },
    {
        "content": "<p>I've got everything working at <a href=\"https://github.com/thomaskwaring/cslib_SKI\">https://github.com/thomaskwaring/cslib_SKI</a>, but I'd appreciate your giving it a once over to check whether I'm using everything correctly</p>",
        "id": 530098564,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1753174642
    },
    {
        "content": "<p>Though I guess that could just be a PR?</p>",
        "id": 530098619,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1753174661
    },
    {
        "content": "<p>Also, (somewhat) silly question, is there a vscode shortcut for the single-step arrow?</p>",
        "id": 530105081,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1753176936
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"931332\">Thomas Waring</span> <a href=\"#narrow/channel/516743-computer-science/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/530105081\">said</a>:</p>\n<blockquote>\n<p>Also, (somewhat) silly question, is there a vscode shortcut for the single-step arrow?</p>\n</blockquote>\n<p>No but I was thinking about the same. I suggest we use '\\tr' and '\\mtr' (for transition and multistep transition, respectively), and if you like we can have also '\\red' and '\\mred' for the same symbols.</p>",
        "id": 530115627,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753180682
    },
    {
        "content": "<p>either / both works for me :)</p>",
        "id": 530115735,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1753180730
    },
    {
        "content": "<p>Btw, I'm encountering similar problems for LTSs. I managed to instantiate a <code>Trans</code> that should be useful (more coming later once I fix this one..):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lts</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LTS</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"n\">Label</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Trans</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">s1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">lts</span><span class=\"bp\">.</span><span class=\"n\">Tr</span><span class=\"w\"> </span><span class=\"n\">s1</span><span class=\"w\"> </span><span class=\"n\">μ1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">s2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">lts</span><span class=\"bp\">.</span><span class=\"n\">Tr</span><span class=\"w\"> </span><span class=\"n\">s2</span><span class=\"w\"> </span><span class=\"n\">μ2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">s3</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">lts</span><span class=\"bp\">.</span><span class=\"n\">MTr</span><span class=\"w\"> </span><span class=\"n\">s3</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">μ1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">μ2</span><span class=\"o\">])</span>\n</code></pre></div>\n<p>But <code>calc</code> isn't happy, it thinks there's a mismatch between the output and input type of the two equations that you can find in my commented examples at the bottom here:</p>\n<p><a href=\"https://github.com/cs-lean/cslib/blob/931d29d60ea5bc3492cd953fa7f63853a1796b09/CslibTests/CCS.lean#L18\">https://github.com/cs-lean/cslib/blob/931d29d60ea5bc3492cd953fa7f63853a1796b09/CslibTests/CCS.lean#L18</a></p>\n<p>Any ideas about what I'm doing wrong?</p>",
        "id": 530115898,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753180795
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"931332\">Thomas Waring</span> <a href=\"#narrow/channel/516743-computer-science/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/530115735\">said</a>:</p>\n<blockquote>\n<p>either / both works for me :)</p>\n</blockquote>\n<p>Added. :)</p>",
        "id": 530116069,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753180862
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"931332\">Thomas Waring</span> <a href=\"#narrow/stream/516743-computer-science/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/530098619\">said</a>:</p>\n<blockquote>\n<p>Though I guess that could just be a PR?</p>\n</blockquote>\n<p>Seems good to me, and I can look again when there's a PR. I will look closer again at the instances when we bump Mathlib and pick up what I upstreamed. Maybe I wait until after this PR then do this?</p>",
        "id": 530120122,
        "sender_full_name": "Chris Henson",
        "timestamp": 1753182297
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> <a href=\"#narrow/stream/516743-computer-science/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/530120122\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"931332\">Thomas Waring</span> <a href=\"#narrow/stream/516743-computer-science/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/530098619\">said</a>:</p>\n<blockquote>\n<p>Though I guess that could just be a PR?</p>\n</blockquote>\n<p>Seems good to me, and I can look again when there's a PR. I will look closer again at the instances when we bump Mathlib and pick up what I upstreamed. Maybe I wait until after this PR then do this?</p>\n</blockquote>\n<p>We're kinda stuck bumping mathlib because of the unfinished <code>Rel</code> discussion. Maybe we should just bite the bullet and drop using <code>Rel</code> altogether?</p>",
        "id": 530120461,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753182377
    },
    {
        "content": "<p>The code about behavioural equivalences like bisimilarity would get ugly though, I'm afraid. :⁠-⁠|</p>",
        "id": 530120690,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753182445
    },
    {
        "content": "<p>Though maybe it's just a matter of finding good notation for inv, comp, and upTo.</p>",
        "id": 530121147,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753182604
    },
    {
        "content": "<p>Yeah from following that conversation at a distance, I think the solution is API like this that abstracts away from the <code>abbrev</code> not being what you'd prefer. I'm really sold on this pattern since it simplified so many proofs in my last PR.</p>",
        "id": 530121608,
        "sender_full_name": "Chris Henson",
        "timestamp": 1753182803
    },
    {
        "content": "<p>What pattern are you referring to? Drop having an <code>abbrev</code>entirely and just make our own notation when needed?</p>",
        "id": 530130037,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753185602
    },
    {
        "content": "<p>I mean how in my last PR how I changed to never destructing the notations for opening, closing, or substitution. I don't really care what the underlying type is, because I have a bunch of little lemmas about the notation instead. Maybe the situation could be similar here?</p>",
        "id": 530131933,
        "sender_full_name": "Chris Henson",
        "timestamp": 1753186199
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"687698\">@Chris Henson</span> you mentioned the precedence for reduction notation wasn't fixed, I'm finding myself writing things like  <code>¬ (x ⭢ y)</code>, <code>(P ⬝ x ↠ TT) ∨ P ⬝ x ↠ FF</code>, etc a bit, perhaps it would make sense if it had higher precedence than logical connectives?</p>",
        "id": 530188733,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1753203776
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"931332\">Thomas Waring</span> <a href=\"#narrow/stream/516743-computer-science/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/530188733\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> you mentioned the precedence for reduction notation wasn't fixed, I'm finding myself writing things like  <code>¬ (x ⭢ y)</code>, <code>(P ⬝ x ↠ TT) ∨ P ⬝ x ↠ FF</code>, etc a bit, perhaps it would make sense if it had higher precedence than logical connectives?</p>\n</blockquote>\n<p>Yes, feel free to change the precedence, I'm not good at selecting those. If you do, please change both <code>LTS</code> and <code>ReductionSystem</code> for consistency.</p>",
        "id": 530198869,
        "sender_full_name": "Chris Henson",
        "timestamp": 1753207946
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/516743-computer-science/topic/Notation.20for.20terms.2Fprocesses.20in.20CS.20calculi/near/530115898\">said</a>:</p>\n<blockquote>\n<p>Btw, I'm encountering similar problems for LTSs. I managed to instantiate a <code>Trans</code> that should be useful (more coming later once I fix this one..):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lts</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LTS</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"n\">Label</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Trans</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">s1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">lts</span><span class=\"bp\">.</span><span class=\"n\">Tr</span><span class=\"w\"> </span><span class=\"n\">s1</span><span class=\"w\"> </span><span class=\"n\">μ1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">s2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">lts</span><span class=\"bp\">.</span><span class=\"n\">Tr</span><span class=\"w\"> </span><span class=\"n\">s2</span><span class=\"w\"> </span><span class=\"n\">μ2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">s3</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">lts</span><span class=\"bp\">.</span><span class=\"n\">MTr</span><span class=\"w\"> </span><span class=\"n\">s3</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">μ1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">μ2</span><span class=\"o\">])</span>\n</code></pre></div>\n<p>But <code>calc</code> isn't happy, it thinks there's a mismatch between the output and input type of the two equations that you can find in my commented examples at the bottom here:</p>\n<p><a href=\"https://github.com/cs-lean/cslib/blob/931d29d60ea5bc3492cd953fa7f63853a1796b09/CslibTests/CCS.lean#L18\">https://github.com/cs-lean/cslib/blob/931d29d60ea5bc3492cd953fa7f63853a1796b09/CslibTests/CCS.lean#L18</a></p>\n<p>Any ideas about what I'm doing wrong?</p>\n</blockquote>\n<p>Update: I've made calc work with LTS. :) But in doing so I've realised something else (next mesg).</p>",
        "id": 530368436,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753282901
    },
    {
        "content": "<p>While we have notation for _specific_ LTSs and reduction systems now, we don't have a notation for those in general. For example, I cannot use the transition notation in this definition:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Bisimulation</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lts</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LTS</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"n\">Label</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">s1</span><span class=\"w\"> </span><span class=\"n\">s2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s1</span><span class=\"w\"> </span><span class=\"n\">s2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">s1'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">lts</span><span class=\"bp\">.</span><span class=\"n\">Tr</span><span class=\"w\"> </span><span class=\"n\">s1</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"n\">s1'</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">s2'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">lts</span><span class=\"bp\">.</span><span class=\"n\">Tr</span><span class=\"w\"> </span><span class=\"n\">s2</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"n\">s2'</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s1'</span><span class=\"w\"> </span><span class=\"n\">s2'</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">∧</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">s2'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">lts</span><span class=\"bp\">.</span><span class=\"n\">Tr</span><span class=\"w\"> </span><span class=\"n\">s2</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"n\">s2'</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">s1'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">lts</span><span class=\"bp\">.</span><span class=\"n\">Tr</span><span class=\"w\"> </span><span class=\"n\">s1</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"n\">s1'</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s1'</span><span class=\"w\"> </span><span class=\"n\">s2'</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 530369610,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753283164
    },
    {
        "content": "<p>I guess such a notation would need to mention <code>lts</code> somewhere, as I do in the notation for bisimilarity (<code>s ~[lts] s'</code>).</p>",
        "id": 530369794,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753283211
    },
    {
        "content": "<p>What happens if have a variable for lts and add the attribute to it? Not sure how the scoping works when you then use this in another file.</p>",
        "id": 530393528,
        "sender_full_name": "Chris Henson",
        "timestamp": 1753289843
    },
    {
        "content": "<p>No idea, that sounds... interesting? dangerous? :-)</p>",
        "id": 530428157,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1753302702
    },
    {
        "content": "<p>I've tried but didn't manage to use the variable trick. I can't seem to be able to add the attribute (which makes sense).</p>",
        "id": 533237240,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1754553298
    },
    {
        "content": "<p>Working with dfas is making this even more painful. Would be nice to have theorems about transition systems stated with the notation, instead of Tr, MTr, etc. :-\\</p>",
        "id": 540726639,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1758526371
    }
]