[
    {
        "content": "<p>I’ve been looking at some of the <code>proof_wanted</code>s in <code>CCS.BehaviouralTheory</code> as <code>grind</code> practice — <code>bisimilarity_choice_nil</code> went through nicely but I think <code>bisimilarity_par_assoc</code> is not true in the current formalisation. The problem is transitions like: <a href=\"/user_uploads/3121/DmGL1J0qnEkv8Ems1qSoe5YC/image_6348A634-D21B-4C39-B8CA-98CA3DA5C836_1757690603.heic\">image_6348A634-D21B-4C39-B8CA-98CA3DA5C836_1757690603.heic</a><br>\nwhich is allowed because we have define <code>tau.co = tau</code>. That doesn’t seem to be the case in <a href=\"http://www.lfcs.inf.ed.ac.uk/reports/86/ECS-LFCS-86-7/ECS-LFCS-86-7.pdf\">the original presentation</a>, see Theorem 5.5 where the above problematic case doesn’t appear. I’m new to the maths of this though so let me know if I’ve missed something! (ping <span class=\"user-mention\" data-user-id=\"929508\">@Fabrizio Montesi</span>)</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/DmGL1J0qnEkv8Ems1qSoe5YC/image_6348A634-D21B-4C39-B8CA-98CA3DA5C836_1757690603.heic\" title=\"image_6348A634-D21B-4C39-B8CA-98CA3DA5C836_1757690603.heic\"><img data-original-content-type=\"image/heic\" data-original-dimensions=\"3035x1282\" data-transcoded-image=\"4032x3024.webp\" src=\"/user_uploads/thumbnail/3121/DmGL1J0qnEkv8Ems1qSoe5YC/image_6348A634-D21B-4C39-B8CA-98CA3DA5C836_1757690603.heic/840x560.webp\"></a></div>",
        "id": 539094518,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1757690779
    },
    {
        "content": "<p>Good I put that <code>proof_wanted</code>, because you're right. :-)</p>",
        "id": 539145440,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1757702847
    },
    {
        "content": "<p>Duality should be only on names.</p>",
        "id": 539145464,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1757702862
    },
    {
        "content": "<p>One solution I'm playing is to define <a href=\"http://Act.co\">Act.co</a> only on a subtype of Act.</p>",
        "id": 539225400,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1757744781
    },
    {
        "content": "<p>the one that came to mind was to have a predicate <code>is_dual</code> on actions and take two names as arguments to <code>Tr.com</code>, which must be name / coname or vice versa</p>",
        "id": 539255001,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1757753012
    },
    {
        "content": "<p>We can go down that road, too. I was thinking of the subtype because that matches exactly what people typically call 'visible actions' (all actions but \\tau). You can see how it looks here:</p>\n<p><a href=\"https://github.com/leanprover/cslib/blob/8554d17fc62f7bd823301e5838f755ff72bbf0c5/Cslib/Languages/CCS/Basic.lean#L47\">https://github.com/leanprover/cslib/blob/8554d17fc62f7bd823301e5838f755ff72bbf0c5/Cslib/Languages/CCS/Basic.lean#L47</a></p>",
        "id": 539289723,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1757788068
    },
    {
        "content": "<p>My newfound addiction to <code>grind</code> made it easier than I expected..</p>",
        "id": 539289750,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1757788094
    },
    {
        "content": "<p>this seems reasonable, but i'm having some trouble using it to rule out the problematic case — instead of seeing that the transition in question can't be <code>Tr.com</code>, I get an error along the lines of <code>(VisibleAct.co Name μ).1 = τ</code>, I think because lean is pattern matching on the coercion not the <code>VisibleAct</code> itself. do you know how to get around this?</p>",
        "id": 539405521,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1757853637
    },
    {
        "content": "<p>Good point... I've been battling it for 2 hrs already and haven't figured out a solution. :-\\ Mmmh..</p>",
        "id": 539556333,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1757942408
    },
    {
        "content": "<p>I got to the point where it's <em>almost</em> good. I wrote a custom <code>casesOn</code> that makes the <code>\\tau</code>-case unreachable, but it's not picked up by the dependent elimination for <code>Tr</code>. So I gotta do cases on the transition label before doing cases on the transition derivation: <a href=\"https://github.com/leanprover/cslib/blob/2f5aa093f3facb49d51dbac76087f781d1f89406/Cslib/Languages/CCS/BehaviouralTheory.lean#L140\">https://github.com/leanprover/cslib/blob/2f5aa093f3facb49d51dbac76087f781d1f89406/Cslib/Languages/CCS/BehaviouralTheory.lean#L140</a></p>\n<p>Very annoying. :\\</p>",
        "id": 539557772,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1757942756
    },
    {
        "content": "<p>This is most certainly a recurring problem: we have an inductive type and we'd like to define a subtype that only has some of its cases. We could go down other routes, but it'd be very nice to know whether this is really a hornet's nest or if it's just us being naive.</p>",
        "id": 539557956,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1757942801
    },
    {
        "content": "<p>it seems to me also that there should be a way of making it work — in the meantime i implemented this <code>IsDual</code> version which goes through pretty easily, at the cost of <code>DecidableEq Name</code> assumptions</p>\n<p>you can see how it looks <a href=\"https://github.com/thomaskwaring/cslib_SKI/tree/scratch\">on my scratch branch</a> if you like — happy to turn it into a PR given that the <code>proof_wanted</code>'s are filled in now</p>",
        "id": 539570072,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1757945515
    },
    {
        "content": "<p>Thanks, Thomas! Let's see if we can get some help understanding this in the general thread I started, since I'm interested in distilling the pattern. Otherwise I'm happy with your solution (btw why a Def and not an inductive?).</p>",
        "id": 539599221,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1757952491
    },
    {
        "content": "<p>I'm giving up on Subtype for now, I tried hard enough to be satisfied. :-)<br>\nDependent case elimination has trouble with that kind of stuff, and I couldn't figure out how to make it work (yet..?).</p>",
        "id": 539995563,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1758110360
    },
    {
        "content": "<p>I've tried an approach based on <code>Prop</code> as you suggested, but ended up with a slightly different formulation. I've also cleaned up the previous stuff. What do you think? It's in branch <code>ccs-fix</code>.</p>\n<p>I have fixed existing proofs but not completed the <code>proof_wanted</code>s, I'd like to merge those from you. :-)<br>\nBut first let me know if you like my definitions and names, they can of course be changed. Adapting your proofs should be straightforward.</p>",
        "id": 539996011,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1758110487
    },
    {
        "content": "<p>this all looks neat to me :-)</p>",
        "id": 540000378,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1758111642
    },
    {
        "content": "<p>Cool! I'm gonna merge it into <code>main</code> then. Feel free to prep a PR to fill in the <code>proof_wanted</code> you've completed, once you've adapted your code.</p>\n<p>Edit: done!</p>",
        "id": 540088315,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1758137359
    },
    {
        "content": "<p>The PR is up :) not only was adapting the proofs easy literally all that was required was changing the name <code>Act.IsDual</code> to <code>Act.Co</code> (the joy of good definitions)</p>",
        "id": 540180672,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1758185571
    }
]