[
    {
        "content": "<p>In PR <a href=\"https://github.com/leanprover/cslib/pull/216\">cslib#216</a>, I encounter in <code>lake test</code> the type of failures shown below.  Any idea how I may fix them?  More complete error messages are available in the PR.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CslibTests</span><span class=\"bp\">/</span><span class=\"n\">GrindLint</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">76</span><span class=\"o\">:</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">instantiating</span><span class=\"w\"> </span><span class=\"ss\">`Cslib.Automata.NA.Buchi.concat_language_eq</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">triggers</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">than</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">additional</span><span class=\"w\"> </span><span class=\"ss\">`grind</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">instantiations</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CslibTests</span><span class=\"bp\">/</span><span class=\"n\">GrindLint</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">76</span><span class=\"o\">:</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">NA</span><span class=\"bp\">.</span><span class=\"n\">Buchi</span><span class=\"bp\">.</span><span class=\"n\">concat_language_eq</span>\n<span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">instances</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_setOf_eq</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">12</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">Acceptor</span><span class=\"bp\">.</span><span class=\"n\">mem_language</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">9</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">Acceptor</span><span class=\"bp\">.</span><span class=\"n\">language</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">9</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">setOf_false</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">6</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">setOf_true</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">6</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">NA</span><span class=\"bp\">.</span><span class=\"n\">FinAcc</span><span class=\"bp\">.</span><span class=\"n\">toDAFinAcc_language_eq</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">5</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">NA</span><span class=\"bp\">.</span><span class=\"n\">FinAcc</span><span class=\"bp\">.</span><span class=\"n\">instAcceptor</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">5</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">FLTS</span><span class=\"bp\">.</span><span class=\"n\">mtr_nil_eq</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">FLTS</span><span class=\"bp\">.</span><span class=\"n\">mtr</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">DA</span><span class=\"bp\">.</span><span class=\"n\">FinAcc</span><span class=\"bp\">.</span><span class=\"n\">toNAFinAcc_language_eq</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">NA</span><span class=\"bp\">.</span><span class=\"n\">toDA</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">DA</span><span class=\"bp\">.</span><span class=\"n\">FinAcc</span><span class=\"bp\">.</span><span class=\"n\">instAcceptor</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">DA</span><span class=\"bp\">.</span><span class=\"n\">FinAcc</span><span class=\"bp\">.</span><span class=\"n\">toNAFinAcc</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">NA</span><span class=\"bp\">.</span><span class=\"n\">FinAcc</span><span class=\"bp\">.</span><span class=\"n\">toDAFinAcc</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">LTS</span><span class=\"bp\">.</span><span class=\"n\">toFLTS_mtr_setImageMultistep</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">FLTS</span><span class=\"bp\">.</span><span class=\"n\">toLTS</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">LTS</span><span class=\"bp\">.</span><span class=\"n\">toFLTS</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">DA</span><span class=\"bp\">.</span><span class=\"n\">toNA</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">LTS</span><span class=\"bp\">.</span><span class=\"n\">setImageMultistep_foldl_setImage</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">ωAcceptor</span><span class=\"bp\">.</span><span class=\"n\">language</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">NA</span><span class=\"bp\">.</span><span class=\"n\">Buchi</span><span class=\"bp\">.</span><span class=\"n\">instωAcceptor</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">NA</span><span class=\"bp\">.</span><span class=\"n\">Buchi</span><span class=\"bp\">.</span><span class=\"n\">concat_language_eq</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">thm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Cslib</span><span class=\"bp\">.</span><span class=\"n\">Automata</span><span class=\"bp\">.</span><span class=\"n\">NA</span><span class=\"bp\">.</span><span class=\"n\">concat</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 563706753,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1765739336
    },
    {
        "content": "<p>With the bump to <code>v4.27.0-rc1</code> we can now add constraints to <code>grind_pattern</code> that could help. I've not used it much yet, but see the docs added in <a href=\"https://github.com/leanprover/lean4/pull/11429\">lean4#11429</a>.</p>",
        "id": 563712939,
        "sender_full_name": "Chris Henson",
        "timestamp": 1765747399
    },
    {
        "content": "<p>I fixed the failures by removing the <code>grind</code> annotations from the offending theorems and passing them explicitly to <code>grind</code> when needed.</p>",
        "id": 563725381,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1765763751
    },
    {
        "content": "<p>I did play with changing the patterns in the <code>grind</code> annotations of those theorems from <code>=</code> to others, but none worked.</p>",
        "id": 563725444,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1765763831
    }
]