[
    {
        "content": "<p>I find <code>grind</code> rather hard to understand.  I moved the following code:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">scoped</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">mtr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">DA</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">DA</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"n\">Symbol</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Symbol</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"bp\">.</span><span class=\"n\">foldl</span><span class=\"w\"> </span><span class=\"n\">DA</span><span class=\"bp\">.</span><span class=\"n\">tr</span><span class=\"w\"> </span><span class=\"n\">s</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">scoped</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mtr_nil_eq</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">DA</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">DA</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"n\">Symbol</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">DA</span><span class=\"bp\">.</span><span class=\"n\">mtr</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>from DFA.lean to DA.lean, because I want to use them in general constructions (such as product) about DA, not just about DFA (which extends DA).  This move breaks quite a few <code>grind</code>s in various proofs about DFA and I had to give <code>[DA.mtr]</code> explicitly to those <code>grind</code>s to fix them.  Why?</p>\n<p>More generally, how should one proceed when <code>grind</code> fails?  I find its error messages rather mysterious.</p>",
        "id": 547847983,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1761795783
    },
    {
        "content": "<p>Based on your description, my guess would be that you are just missing an <code>open scoped DA</code> after changing what namespaces these are in.</p>",
        "id": 547848294,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761796078
    },
    {
        "content": "<p>You are right!  Thanks!</p>",
        "id": 547848707,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1761796492
    },
    {
        "content": "<p>I get a CI error on <a href=\"https://github.com/leanprover/cslib/pull/220\">cslib#220</a> saying: <br>\n<code>error: CslibTests/GrindLint.lean:74:0: ❌️ Docstring on </code>#guard_msgs<code> does not match generated message:</code></p>\n<p>I admit, I've been guessing my way around in the use of @[grind]. Would appreciate some help on understanding what is going wrong.</p>",
        "id": 566508197,
        "sender_full_name": "Pieter Cuijpers",
        "timestamp": 1767692310
    },
    {
        "content": "<p>There is test in the mentioned file that checks for <code>grind</code> annotations that trigger a high number of instantiations. The solution here is to either remove the annotations or use the constraint feature to limit them. (You'll also see some exceptions in that test, but we're trying not to add to this)</p>",
        "id": 566525262,
        "sender_full_name": "Chris Henson",
        "timestamp": 1767698529
    }
]