[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"421885\">@Joscha Mennicken</span>  I would like to set up benchmarking for <code>leanprover/cslib</code>. Is it possible for this repo to be included on <a href=\"https://radar.lean-lang.org/\">https://radar.lean-lang.org/</a> and use the GitHub bot for <code>!radar</code>?</p>",
        "id": 558206222,
        "sender_full_name": "Chris Henson",
        "timestamp": 1763559815
    },
    {
        "content": "<p>Yes, that should be possible. What kinds of benchmarks would you be interested in, and how much do you want to do yourself? I could give you an overview of the available options or just try to set up something similar to mathlib.</p>",
        "id": 558230723,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1763565322
    },
    {
        "content": "<p>I think similar to Mathlib is great if that is fairly straightforward to setup. A thread like <a class=\"stream-topic\" data-stream-id=\"116290\" href=\"/#narrow/channel/116290-rss/topic/Significant.20commits.20to.20mathlib4/with/558072973\">#rss &gt; Significant commits to mathlib4</a> would be nice. If there is anything you need on our end please let us know. Thank you!</p>",
        "id": 558233125,
        "sender_full_name": "Chris Henson",
        "timestamp": 1763565859
    },
    {
        "content": "<p>Yes, this would be great to have indeed! <span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span></p>",
        "id": 558387102,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1763631869
    },
    {
        "content": "<p><a href=\"https://radar.lean-lang.org/repos/cslib\">https://radar.lean-lang.org/repos/cslib</a> now exists, including GitHub and Zulip bots. For now, significance detection only considers <code>build//instructions</code> and doesn't look at the per-module instructions because the result was just too noisy. As I keep working on the mathlib4 significance detector, it should hopefully also improve for cslib.</p>\n<p>For now, the benchmark suite lives in <a href=\"https://github.com/leanprover/radar-bench-cslib\">https://github.com/leanprover/radar-bench-cslib</a>. If no issues pop up in the next few days, I plan on PR-ing it to the cslib repo. At that point, you should be able to add your own benchmarks or modify the existing ones without requiring my intervention. (Should you want to rename/reorganize benchmarks, I can rename the existing data so it matches the new names.)</p>\n<p>If anything is broken or weird, or if you have any questions, please don't hesitate to let me know.</p>",
        "id": 559101062,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1764003267
    },
    {
        "content": "<p>Thank you for the quick turnaround! I've tested on a couple of PRs and it seems to be working.</p>",
        "id": 559130499,
        "sender_full_name": "Chris Henson",
        "timestamp": 1764011456
    },
    {
        "content": "<p>CSLib had its <a href=\"#narrow/channel/116290-rss/topic/Significant.20commits.20to.20cslib/near/560843684\">first significant commit</a>, confirming that the zulip bot works :D</p>",
        "id": 560868969,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1764376712
    },
    {
        "content": "<p>We've switched to new runner hardware for everything except mathlib itself; you may see a jump in most metrics.</p>\n<p>I've rebenchmarked the latest commit of <code>main</code> on the new hardware, so just make sure you've merged or rebased onto <code>main</code> before you use <code>!bench</code>/<code>!radar</code>.</p>",
        "id": 561497811,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1764702294
    },
    {
        "content": "<p>I've switched cslib over to the same significance detection as mathlib uses (using historical data to set noise thresholds for noisy metrics).</p>\n<p>I've also brought the benchmark suite itself more in line with the mathlib bench suite (though it's only a few small changes) and opened <a href=\"https://github.com/leanprover/cslib/pull/267\">cslib#267</a>.</p>",
        "id": 568277981,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1768499302
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"421885\">@Joscha Mennicken</span>  In Sebastian's Lean Together talk he mentioned radar reporting the critical build path. I see what appears to be some relevant code you added in your previous PR, but I do not see the same \"Lakeprof report\" links that Mathlib has for each commit. Is this something that could easily be added? I think it would be helpful for some performance profiling I'd like to do in the near future.</p>",
        "id": 569056560,
        "sender_full_name": "Chris Henson",
        "timestamp": 1768922623
    },
    {
        "content": "<p>I've set up the lakeprof report in <a href=\"https://github.com/leanprover/cslib/pull/272\">cslib#272</a>, which should be ready to merge.</p>",
        "id": 569062114,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1768923729
    },
    {
        "content": "<p>Great, thank you!</p>",
        "id": 569066864,
        "sender_full_name": "Chris Henson",
        "timestamp": 1768924821
    },
    {
        "content": "<p>This confirms that System F makes up most of the critical path. (It's not listed here, but another area that needs work is <code>LTS</code>)</p>\n<p>I will get to this eventually, but if anyone were interested in doing some initial work I think the place to start would be looking at the <code>#grind_lint</code> exceptions. Some of these may be solved using <code>grind_pattern</code> with constraints, I just haven't found the time to try this out yet.</p>",
        "id": 569069754,
        "sender_full_name": "Chris Henson",
        "timestamp": 1768925400
    }
]