[
    {
        "content": "<p>After rebasing on the current <code>main</code> of cslib (commt 4c176f), Lean is now telling me:</p>\n<blockquote>\n<p>The <code>induction'</code> tactic is discouraged: please strongly consider using <code>induction</code> instead.<br>\nNote: This linter can be disabled with <code>set_option linter.style.induction false</code></p>\n</blockquote>\n<p>Why?  Is this specific to cslib, or generally applicable to mathlib as well?</p>",
        "id": 545017875,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760547551
    },
    {
        "content": "<p>induction’ uses lean 3 syntax and probably won’t get any new features that the induction tactic will.</p>",
        "id": 545018199,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1760547641
    },
    {
        "content": "<p>It already comes with a code action</p>",
        "id": 545018238,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1760547654
    },
    {
        "content": "<p>Technically a deprecation notice could mean that  the respective maintainers may choose to remove it in future releases</p>",
        "id": 545018640,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1760547782
    },
    {
        "content": "<p>It is used in <a href=\"https://leanprover-community.github.io/mathematics_in_lean/\">#mil</a>!</p>",
        "id": 545019223,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760547987
    },
    {
        "content": "<p>Also, I didn't get this warning yesterday (or ever, for that matter).  What changed in cslib or mathlib since yesterday?</p>",
        "id": 545020384,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760548397
    },
    {
        "content": "<p>This is a linter from <code>mathlibStandardSet</code>. You are seeing it now because we just moved to the new Lean release. This is a recent linter that has been added after the last uses of <code>induction'</code> were removed from Mathlib. I would expect MIL to eventually follow suit.</p>",
        "id": 545020979,
        "sender_full_name": "Chris Henson",
        "timestamp": 1760548611
    },
    {
        "content": "<p>I see.  Thanks!</p>",
        "id": 545022426,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760549151
    },
    {
        "content": "<p>I really don't like the syntax of <code>induction</code>.</p>",
        "id": 545051262,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760550636
    },
    {
        "content": "<p>Is <code>induction n with | foo x | bar y z</code> really worse than <code>induction' n with x y z</code>?</p>",
        "id": 545063239,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1760551125
    },
    {
        "content": "<p>Remember that there is more than one syntax you can  use for <code>induction</code>, you don't have to use the one with <code>=&gt;</code>s</p>",
        "id": 545063834,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1760551147
    },
    {
        "content": "<p>Can you point me to an example of that syntax in mathlib or somewhere else?  All I have is <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/\">#tpil</a>, which doesn't seem to have an example.</p>",
        "id": 545090971,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760552264
    },
    {
        "content": "<p>Maybe Eric has better explanations, but I thought <code>induction _ using blabla</code> is only for using specific induction principles and <code>with</code> should be used to write <code>| foo x | bar y z</code> afterwards? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span><br>\nAnyway, running <code>rg \"induction n using\"</code> or <code>rg \"induction n with\"</code>  in mathlib brings up many examples. <a href=\"https://github.com/leanprover-community/mathlib4/blob/0008c2f8ef142f8e3a8d5dc1535bbc24e63244a6/Mathlib/Algebra/Order/Ring/Abs.lean#L167\">Here</a> is for example</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">private</span><span class=\"w\"> </span><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">abs_geomSum_le</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsOrderedRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">geomSum</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">a</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">b</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">geomSum</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">  </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>And <a href=\"https://github.com/leanprover-community/mathlib4/blob/0008c2f8ef142f8e3a8d5dc1535bbc24e63244a6/Mathlib/Data/Nat/Bitwise.lean#L177\">here</a> is this example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">zero_of_testBit_eq_false</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">testBit</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">binaryRec</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">bit</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">  </span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 545493824,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1760683162
    },
    {
        "content": "<p>The fact that you have to write <code>zero</code> and <code>succ</code> and <code>=&gt;</code> is precisely what I don't like about the syntax of <code>induction</code>.</p>",
        "id": 545658537,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760726671
    },
    {
        "content": "<p>I prefer this syntax precisely for this reason. You get properly named cases usually  corresponding to the constructors of the type</p>",
        "id": 545662124,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1760727452
    },
    {
        "content": "<p>This may make sense for user-defined inductive types.  But does everyone really care about the fact that the natural numbers are inductively defined in Lean using constructors named \"zero\" and \"succ\" (rather than some other names)?  With <code>induction'</code> you can do inductive proofs on Nat without ever noticing that.</p>",
        "id": 545667213,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1760728560
    },
    {
        "content": "<p>To answer your question, unironically yes. Tracking induction arms is very useful when we are dealing with induction proofs on larger inductive types. It also makes the proof script readable. And fwiw, this debate appears to have reached a settlement sometime ago. The new syntax is here to stay.</p>",
        "id": 545676081,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1760730497
    }
]