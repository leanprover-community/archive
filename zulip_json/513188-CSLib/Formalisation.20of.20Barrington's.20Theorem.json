[
    {
        "content": "<p>Hi everyone,<br>\nI'm Anvit, a second-year Computer Science student at IIT Gandhinagar. I have been working on formalising a group-theoretic version of <strong>Barrington's theorem</strong> in Lean. Below is the repository link:</p>\n<p><a href=\"https://github.com/AnvitAggarwal/barrington-theorem-lean\">https://github.com/AnvitAggarwal/barrington-theorem-lean</a></p>\n<p>I’d love to eventually get it merged into CSLib. I’d really appreciate any feedback on aligning it with CSLib and Lean conventions, and on improving the proof itself.</p>\n<p>Thanks!</p>",
        "id": 548018759,
        "sender_full_name": "Anvit Aggarwal",
        "timestamp": 1761852723
    },
    {
        "content": "<p>Hi! Could you share what references you've been following? I'd like to think a bit about the definitions you've chosen.</p>\n<p>A few pieces of feedback:</p>\n<ul>\n<li>when <code>simp</code> is in the middle of a proof branch, you should use <code>simp only</code></li>\n<li>in general, you have a lot of <code>simp</code> that can be combined or removed entirely if you make use of <code>simp_all</code> or <code>grind</code></li>\n<li>some of the arithmetic lemmas can be simplified/removed with <code>grind</code>, <code>omega</code>, etc.</li>\n<li>some of the proofs are a bit long, and I suspect could be split up nicely</li>\n</ul>",
        "id": 548047727,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761866035
    },
    {
        "content": "<p>Hi! Thanks for the feedback.</p>\n<p>I’ve tried to formalise <strong>Theorem 3</strong> from these lecture notes:<br>\n<a href=\"https://www.ccs.neu.edu/home/viola/classes/gems-08/lectures/le11.pdf\">https://www.ccs.neu.edu/home/viola/classes/gems-08/lectures/le11.pdf</a></p>\n<p>I also referred to:</p>\n<ul>\n<li><a href=\"https://www.dainiak.com/teaching/courses/algalg/texts/barrington-huq.pdf\">https://www.dainiak.com/teaching/courses/algalg/texts/barrington-huq.pdf</a></li>\n<li><a href=\"https://www.math.toronto.edu/swastik/courses/rutgers/topics-S20/lec1.1.pdf\">https://www.math.toronto.edu/swastik/courses/rutgers/topics-S20/lec1.1.pdf</a> (for my definition of formula)</li>\n</ul>\n<p>Thanks!</p>",
        "id": 548077296,
        "sender_full_name": "Anvit Aggarwal",
        "timestamp": 1761887534
    },
    {
        "content": "<p>I think some of your results could be generalised, as well. EG for a different input alphabet (than <code>Bool</code>) and group (than <code>Perm (Fin n)</code>) you would replace <code>g0</code> and <code>g1</code> with a map <code>Sym -&gt; G</code></p>",
        "id": 548089807,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1761894833
    },
    {
        "content": "<p>This should also fit nicely into the <code>LTS</code> framework: a branching program is (experts please correct me if i’m wrong) a certain kind of labelled transition system</p>",
        "id": 548090290,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1761895094
    },
    {
        "content": "<p>Yeah, the definition of <code>Formula</code> versus branching programs generally is what stood out to me most, but I wasn't 100% what definition would be best.</p>",
        "id": 548091590,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761895735
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> <a href=\"#narrow/channel/513188-CSLib/topic/Formalisation.20of.20Barrington's.20Theorem/near/548091590\">said</a>:</p>\n<blockquote>\n<p>Yeah, the definition of <code>Formula</code> versus branching programs generally is what stood out to me most, but I wasn't 100% what definition would be best.</p>\n</blockquote>\n<p>Could you explain what you mean by the 'best definition'? Do you mean that the current definition doesn't highlight the difference between Formula and branching programs sufficiently?</p>",
        "id": 548126275,
        "sender_full_name": "Anvit Aggarwal",
        "timestamp": 1761907770
    },
    {
        "content": "<p>By \"best\" definition, I mean one that is somewhat general and practical to work with. For example, your <code>Formula</code> has fixed a particular basis. This is not required for the proof, right?</p>",
        "id": 548128953,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761908598
    },
    {
        "content": "<p>Ok, got it. Yes, the <code>Formula</code> need not have a fixed basis. The idea was that every <code>Formula</code> can be represented using just AND and NOT gates.</p>",
        "id": 548130839,
        "sender_full_name": "Anvit Aggarwal",
        "timestamp": 1761909093
    },
    {
        "content": "<p>The other definition that could use some refinement is branching programs. You do not define these yet, only \"group programs\"? I understand you were just starting with theorem 3 from the first reference, but since it is to be used within Barrington’s Theorem, I think it is important to think about how those definitions will fit together.</p>",
        "id": 548132518,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761909755
    },
    {
        "content": "<p>(to be clear I am not meaning to discourage you, I think this could be a good first contribution if we nail down the definitions!)</p>",
        "id": 548132781,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761909863
    },
    {
        "content": "<p>Sure. Thanks for your feedback. I'll work on the definitions, fix the usage of simp, and split the longer proofs.</p>",
        "id": 548134984,
        "sender_full_name": "Anvit Aggarwal",
        "timestamp": 1761910632
    },
    {
        "content": "<p>Thanks for your suggestions, Thomas! I'll try to replace <code>Bool</code> and <code>Perm (Fin n)</code> with <code>Sym -&gt; G</code>. I am not familiar with <code>LTS</code>, but will read up on it to see how I could incorporate it.</p>",
        "id": 548134991,
        "sender_full_name": "Anvit Aggarwal",
        "timestamp": 1761910635
    },
    {
        "content": "<p>no problem! looking closer you will need <code>Perm (Fin n)</code> once you integrate with branching programs, but the lemmas could be proven for any <code>G</code></p>",
        "id": 548135787,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1761910879
    },
    {
        "content": "<p>I didn't go through the whole repo, but here is a fork where I started just a little bit of cleaning up proofs: <a href=\"https://github.com/chenson2018/barrington-theorem-lean\">https://github.com/chenson2018/barrington-theorem-lean</a></p>\n<p>We can always do more during the review process, but I just wanted to give you a few concrete examples of my above feedback to help you get started.</p>",
        "id": 548136517,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761911164
    },
    {
        "content": "<p>Im also more than happy to help straighten out those generalisations! i’m away for my computer for the next week about after that feel free to reach out :))</p>",
        "id": 548137132,
        "sender_full_name": "Thomas Waring",
        "timestamp": 1761911421
    },
    {
        "content": "<p>It's been a while since I posted here but I’m still working on this. I’ve updated the definition of <code>Formula</code> to remove the fixed basis and make it parametric over a <code>BoolBasis</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">BoolBasis</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"o\">(</span><span class=\"n\">arity</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">arity</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">demorgan_basis</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">demorgan_basis</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">demorgan_basis</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BoolBasis</span><span class=\"w\"> </span><span class=\"n\">demorgan_basis</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">arity</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">demorgan_basis</span><span class=\"bp\">.</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">demorgan_basis</span><span class=\"bp\">.</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n<span class=\"w\">  </span><span class=\"n\">eval</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">demorgan_basis</span><span class=\"bp\">.</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"o\">(</span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">demorgan_basis</span><span class=\"bp\">.</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Formula</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">BoolBasis</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">var</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Formula</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">BoolBasis</span><span class=\"bp\">.</span><span class=\"n\">arity</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Formula</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Formula</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">b</span>\n</code></pre></div>\n<p>Does this makes sense?</p>",
        "id": 568721485,
        "sender_full_name": "Anvit Aggarwal",
        "timestamp": 1768799195
    }
]