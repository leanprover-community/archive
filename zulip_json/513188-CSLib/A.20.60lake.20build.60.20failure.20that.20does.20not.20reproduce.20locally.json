[
    {
        "content": "<p>Alas, I'm now getting a <code>lake build</code> failure on Github (see <a href=\"https://github.com/leanprover/cslib/pull/216\">cslib#216</a>) which I'm not able to reproduce locally.  I removed <code>.lake/</code>, re-downloaded the cache (<code>lake exec cache get</code>), and re-did <code>lake build</code> and <code>lake test</code> without generating any error message on my machine (M1 MBA).  I restarted Lean in the file in question in VScode, which also did not produce any any error message.  What's going on?</p>",
        "id": 563726359,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1765765096
    },
    {
        "content": "<p>It seems that the Lean used by Github is version v4.27.0-rc1, but my local <code>lean-toolchain</code>contains <code>leanprover/lean4:v4.26.0</code>.  My patch is on top of a <code>main</code> that is at v4.26.0 (commit: c8bd20b10d7e9c0c5bed69f275eeb9fa300f4d5e).  Shouldn't Github use the Lean version specified in my patch?</p>\n<p>Anyway, I'm going to rebase on top of the current <code>main</code> (which is at v4.27.0-rc1) and try again.</p>",
        "id": 563726933,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1765765822
    },
    {
        "content": "<p><a href=\"https://github.com/actions/checkout?tab=readme-ov-file#checkout-pull-request-head-commit-instead-of-merge-commit\">https://github.com/actions/checkout?tab=readme-ov-file#checkout-pull-request-head-commit-instead-of-merge-commit</a> - we do this in lean4</p>",
        "id": 563727097,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1765766054
    },
    {
        "content": "<p>After rebasing I can reproduce the error locally.</p>\n<p>But shouldn't Github tell me that it is using a different version of Lean tool chain from the one specified in the PR?</p>",
        "id": 563727421,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1765766445
    },
    {
        "content": "<p>We could have a warning message for users when the merge commit has a different toolchain from the base branch, but this behavior overall makes sense to me.</p>",
        "id": 563736922,
        "sender_full_name": "Chris Henson",
        "timestamp": 1765775078
    },
    {
        "content": "<p>A warning message would be much appreciated.  BTW, <code>grind</code> behavior seems to have changed quite a bit from v4.26.0 to v4.27.0-rc1.  I had to spell out many more details in a proof to make the newer version of <code>grind</code> happy; see the last commit in <a href=\"https://github.com/leanprover/cslib/pull/216\">cslib#216</a>.</p>",
        "id": 563744087,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1765781103
    },
    {
        "content": "<p>I have a guess why, I'll investigate further when I review. (Probably in a day or two, flying to visit family today)</p>",
        "id": 563745303,
        "sender_full_name": "Chris Henson",
        "timestamp": 1765782002
    }
]