[
    {
        "content": "<p>I might have asked this before but, are vector-fields better thought of as functions of vectors or vectors of functions or their own thing. </p>\n<p>The difference is in what order the continuous and discrete variables are curried.</p>\n<p>A third option is to have mixed index e.g A(X) where X=(mu,x,y,z,t) where mu is a discrete variable.</p>\n<p>Why is this important?<br>\nWell if we do a dot product A.B  depending on the order of currying this is either a dot product on vectors or  int A(x)B(x) dx. or both.</p>\n<p>Well, I don't think there's any \"good\" way of doing index free tensors fields, however much people have tried.</p>",
        "id": 536531942,
        "sender_full_name": "Mr Proof",
        "timestamp": 1756357754
    },
    {
        "content": "<p>If you write them as a \"function from vectors to vectors\", this will make it more ergonomic to then talk about when the fields are continuous/differentiable/smooth. I think this is enough to make that definitely the winning choice.</p>",
        "id": 536621372,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1756391778
    },
    {
        "content": "<p>It also lets you move more easily to talking about e.g. functions on the tangent bundle, which isn't really something you can talk about as a vector-of-functions.</p>",
        "id": 536621619,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1756391845
    },
    {
        "content": "<p>Yes so basically the type should be more like:</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mn>4</mn></msup><mo>→</mo><msup><mi mathvariant=\"double-struck\">R</mi><mn>4</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^4 \\rightarrow \\mathbb{R}^4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8641em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8641em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>rather than</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"double-struck\">R</mi><mn>4</mn></msup><mo>→</mo><mi mathvariant=\"double-struck\">R</mi><msup><mo stretchy=\"false\">)</mo><mn>4</mn></msup></mrow><annotation encoding=\"application/x-tex\">(\\mathbb{R}^4 \\rightarrow \\mathbb{R})^4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1141em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">R</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span></span></span></span></p>\n<p>My counter argument would be if we look at Maxwell's equations, we notice they are written without reference to any particular point x. So it is as if they are using the second abstraction rather than the first. But perhaps when doing things like Div and Curl, we should be thinking of Vector Fields as their own unique type rather than a combination of vectors and fields. And then be able to either select a unique point or a unique index. After all vector fields have more more structure than their parts. The downside of using a VectorField type is that we have to redefine all the dot products and cross products to work with it.</p>",
        "id": 536696307,
        "sender_full_name": "Mr Proof",
        "timestamp": 1756423828
    },
    {
        "content": "<p>I think that if you start by thinking what it would look like for a generic manifold, you'll probably end up with the better version. You don't have to actually do it with manifolds and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=TangentSpace#doc\">docs#TangentSpace</a>, but it will give you the more type-safe idea.</p>\n<p>For instance, I think Div is really about the first abstraction, not the second. The function <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=deriv#doc\">docs#deriv</a> is the high school \"1D\" notion of derivative, but it is really just a special case of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=fderiv#doc\">docs#fderiv</a>, which works for any function <code>f : A -&gt; B</code> where <code>A</code> and <code>B</code> could be multi-dimensional vector spaces over the reals. So if your electric field <code>E</code> is an <code>R^4 -&gt; R^4</code>, then <code>fderiv R E</code> is a <code>R^4 -&gt; R^4 -&gt; R^4</code>, indicating \"at position x, if I moved a little bit in direction y, how much would my z component of the electric field change?\".</p>\n<p>Then the divergence is tracing the second two components of this together. (In fact, since it's a linear map <code>R^4 -&gt; R^4 -&gt;ₗ[R] R^4</code>, it's literally just <code>LinearMap.trace ∘ fderiv R E</code>). The 3D curl is tracing all three components (now in R^3) against the Levi-Cevita tensor.</p>\n<p>In the second abstraction, or <code>(R^4 -&gt; R)^4</code> as you wrote it, you would get much less structure! You have four separate functions <code>R^4 -&gt; R</code>, but there's no \"built-in\" correspondence between the input space <code>R^4</code> and the output space <code>R^4</code>. On a manifold, these _must_ be the same.</p>\n<p>As another example: if you want to talk about the electric field as the derivative of a voltage field (e.g. in free space), then <code>fderiv R V</code> would give you the right type, <code>R^4 -&gt; R^4</code>.</p>",
        "id": 536713751,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1756439476
    }
]