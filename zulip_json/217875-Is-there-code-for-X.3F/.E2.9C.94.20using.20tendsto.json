[
    {
        "content": "<p>I'm trying to use <code>tendsto</code> and need some very basic lemmas and I'm wondering how to get them most easily:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">tactic</span>\n<span class=\"kn\">import</span> <span class=\"n\">analysis.special_functions.log</span>\n<span class=\"kn\">import</span> <span class=\"n\">order.filter</span>\n\n<span class=\"kn\">import</span> <span class=\"n\">data.fintype.basic</span>\n<span class=\"kn\">import</span> <span class=\"n\">data.finset.sum</span>\n<span class=\"kn\">import</span> <span class=\"n\">data.real.basic</span>\n\n<span class=\"kn\">open</span> <span class=\"n\">real</span>\n<span class=\"kn\">open</span> <span class=\"n\">filter</span>\n<span class=\"kn\">open</span> <span class=\"n\">nat</span>\n\n<span class=\"n\">open_locale</span> <span class=\"n\">filter</span> <span class=\"n\">topological_space</span>\n\n<span class=\"c1\">-- Is there some more direct way of proving this or</span>\n<span class=\"c1\">-- even this lemma somewhere in mathlib?</span>\n<span class=\"kd\">lemma</span> <span class=\"n\">unique_limit</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">â„•</span> <span class=\"bp\">â†’</span> <span class=\"n\">â„</span><span class=\"o\">))</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">:</span> <span class=\"n\">â„</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hA</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">a</span> <span class=\"n\">k</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">)))</span>\n<span class=\"o\">(</span><span class=\"n\">hB</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">a</span> <span class=\"n\">k</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"o\">(</span><span class=\"n\">B</span><span class=\"o\">)))</span> <span class=\"o\">:</span>\n<span class=\"n\">A</span> <span class=\"bp\">=</span> <span class=\"n\">B</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"k\">have</span> <span class=\"n\">h</span> <span class=\"o\">:=</span> <span class=\"n\">tendsto.sub</span> <span class=\"n\">hA</span> <span class=\"n\">hB</span><span class=\"o\">,</span>\n  <span class=\"n\">simp</span> <span class=\"n\">only</span> <span class=\"o\">[</span><span class=\"n\">sub_self</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"k\">have</span> <span class=\"n\">hAB</span><span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"mi\">0</span> <span class=\"o\">:</span> <span class=\"n\">â„</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"n\">A</span> <span class=\"bp\">-</span> <span class=\"n\">B</span> <span class=\"o\">:=</span>\n  <span class=\"kd\">begin</span>\n    <span class=\"c1\">-- how to use tendsto_const_iff here?</span>\n    <span class=\"gr\">sorry</span><span class=\"o\">,</span>\n  <span class=\"kd\">end</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">eq_of_sub_eq_zero</span> <span class=\"o\">(</span><span class=\"n\">symm</span> <span class=\"n\">hAB</span><span class=\"o\">),</span>\n<span class=\"kd\">end</span>\n\n<span class=\"kd\">lemma</span> <span class=\"n\">sub_seq_tendsto</span> <span class=\"o\">{</span><span class=\"n\">an</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span> <span class=\"bp\">â†’</span> <span class=\"n\">â„</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">â„</span><span class=\"o\">}</span>\n <span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">an</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">))):</span>\n <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">an</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>\n<p>Any advice on how to solve the <code>sorry</code>s above?</p>",
        "id": 281614203,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1652037940
    },
    {
        "content": "<p>I think <a href=\"https://leanprover-community.github.io/mathlib_docs/find/tendsto_nhds_unique\">docs#tendsto_nhds_unique</a> should help (hopefully very directly) with the first one.</p>",
        "id": 281614407,
        "sender_full_name": "Kalle KytÃ¶lÃ¤",
        "timestamp": 1652038261
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"373986\">Kalle KytÃ¶lÃ¤</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/using.20tendsto/near/281614407\">said</a>:</p>\n<blockquote>\n<p>I think <a href=\"https://leanprover-community.github.io/mathlib_docs/find/tendsto_nhds_unique\">docs#tendsto_nhds_unique</a> should help (hopefully very directly) with the first one.</p>\n</blockquote>\n<p>perfect, thanks:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">unique_limit</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"n\">â„•</span> <span class=\"bp\">â†’</span> <span class=\"n\">â„</span><span class=\"o\">))</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">:</span> <span class=\"n\">â„</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hA</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">a</span> <span class=\"n\">k</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">)))</span>\n<span class=\"o\">(</span><span class=\"n\">hB</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">a</span> <span class=\"n\">k</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"o\">(</span><span class=\"n\">B</span><span class=\"o\">)))</span> <span class=\"o\">:</span>\n<span class=\"n\">A</span> <span class=\"bp\">=</span> <span class=\"n\">B</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">exact</span> <span class=\"n\">tendsto_nhds_unique</span> <span class=\"n\">hA</span> <span class=\"n\">hB</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 281614497,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1652038399
    },
    {
        "content": "<p>And <a href=\"https://leanprover-community.github.io/mathlib_docs/find/filter.tendsto.comp\">docs#filter.tendsto.comp</a> with the second one, if you first prove that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow><mi>lim</mi><mo>â¡</mo></mrow><mrow><mi>n</mi><mo>â†’</mo><mi mathvariant=\"normal\">âˆ</mi></mrow></msub><mn>2</mn><mi>n</mi><mo>=</mo><mi mathvariant=\"normal\">âˆ</mi></mrow><annotation encoding=\"application/x-tex\">\\lim_{n \\to \\infty} 2 n = \\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mop\"><span class=\"mop\">lim</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">â†’</span><span class=\"mord mtight\">âˆ</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord\">âˆ</span></span></span></span> (something like <code>tendsto (Î» (n : â„•), 2*n) at_top at_top</code>).</p>",
        "id": 281614554,
        "sender_full_name": "Kalle KytÃ¶lÃ¤",
        "timestamp": 1652038484
    },
    {
        "content": "<p>You can use <a href=\"https://leanprover-community.github.io/mathlib_docs/find/filter.tendsto.mul_at_top\">docs#filter.tendsto.mul_at_top</a> for that</p>",
        "id": 281614623,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1652038581
    },
    {
        "content": "<p>You don't need all those parentheses. You can write</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">unique_limit</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span> <span class=\"bp\">â†’</span> <span class=\"n\">â„</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">A</span> <span class=\"n\">B</span><span class=\"o\">:</span> <span class=\"n\">â„</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">hA</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"n\">a</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"n\">A</span><span class=\"o\">))</span>\n<span class=\"o\">(</span><span class=\"n\">hB</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"n\">a</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"n\">B</span><span class=\"o\">))</span> <span class=\"o\">:</span>\n<span class=\"n\">A</span> <span class=\"bp\">=</span> <span class=\"n\">B</span> <span class=\"o\">:=</span>\n<span class=\"n\">tendsto_nhds_unique</span> <span class=\"n\">hA</span> <span class=\"n\">hB</span>\n</code></pre></div>",
        "id": 281615025,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1652039166
    },
    {
        "content": "<p>Thanks I will write less parentheses...</p>\n<p>For the second one, I can't quite get it to work yet:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">sub_seq_tendsto</span> <span class=\"o\">{</span><span class=\"n\">an</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span> <span class=\"bp\">â†’</span> <span class=\"n\">â„</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">â„</span><span class=\"o\">}</span>\n <span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"n\">an</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"n\">A</span><span class=\"o\">)):</span>\n <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">an</span> <span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"k\">have</span> <span class=\"n\">htop</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"n\">at_top</span> <span class=\"o\">:=</span>\n  <span class=\"kd\">begin</span>\n    <span class=\"k\">have</span> <span class=\"n\">h2</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"mi\">2</span><span class=\"o\">)</span>\n      <span class=\"o\">:=</span> <span class=\"n\">tendsto_const_nhds</span><span class=\"o\">,</span>\n    <span class=\"n\">rw</span> <span class=\"n\">tendsto.mul_at_top</span> <span class=\"n\">two_pos</span> <span class=\"n\">h2</span> <span class=\"n\">tendsto_id</span><span class=\"o\">,</span>\n  <span class=\"kd\">end</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">tendsto.comp</span> <span class=\"n\">h</span> <span class=\"n\">htop</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>\n<p>The <code>rw</code>, that should solve the proof of <code>htop</code> complains:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">type</span> <span class=\"n\">mismatch</span> <span class=\"n\">at</span> <span class=\"n\">application</span>\n  <span class=\"n\">tendsto.mul_at_top</span> <span class=\"n\">two_pos</span>\n<span class=\"n\">term</span>\n  <span class=\"n\">two_pos</span>\n<span class=\"n\">has</span> <span class=\"n\">type</span>\n  <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"mi\">2</span>\n<span class=\"n\">but</span> <span class=\"n\">is</span> <span class=\"n\">expected</span> <span class=\"n\">to</span> <span class=\"k\">have</span> <span class=\"n\">type</span>\n  <span class=\"mi\">0</span> <span class=\"bp\">&lt;</span> <span class=\"bp\">?</span><span class=\"n\">m_3</span>\n</code></pre></div>",
        "id": 281615939,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1652040564
    },
    {
        "content": "<p>Try <code>(two_pos : (0 : &lt;the correct type&gt;) &lt; 2)</code>? Lean is sometimes too quick to assume they're naturals</p>",
        "id": 281616316,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1652041160
    },
    {
        "content": "<p>Mmh, I thought the type should be naturals here, should it not?<br>\nIn any case I tried <br>\n<code>rw tendsto.mul_at_top (two_pos : (0 : foo) &lt; 2) h2 tendsto_id,</code> with <code>foo</code> âˆˆ {â„•, â„} and that didn't work.</p>",
        "id": 281616611,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1652041521
    },
    {
        "content": "<p>Here one wants naturals, they are supposed to specify a subsequence, right?</p>\n<p>So I think <span class=\"user-mention\" data-user-id=\"313038\">@Moritz Firsching</span> is right, <a href=\"https://leanprover-community.github.io/mathlib_docs/find/filter.tendsto.mul_at_top\">docs#filter.tendsto.mul_at_top</a> has the wrong typeclasses (<code>[linear_ordered_field]</code>) for this purpose.</p>\n<p>I don't know what is the elegant way for the auxiliary result <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow><mi>lim</mi><mo>â¡</mo></mrow><mrow><mi>n</mi><mo>â†’</mo><mi mathvariant=\"normal\">âˆ</mi></mrow></msub><mn>2</mn><mi>n</mi><mo>=</mo><mi mathvariant=\"normal\">âˆ</mi></mrow><annotation encoding=\"application/x-tex\">\\lim_{n \\to \\infty} 2 n = \\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mop\"><span class=\"mop\">lim</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">â†’</span><span class=\"mord mtight\">âˆ</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord\">âˆ</span></span></span></span>, but the ugly one below works.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">sub_seq_tendsto</span> <span class=\"o\">{</span><span class=\"n\">an</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span> <span class=\"bp\">â†’</span> <span class=\"n\">â„</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">â„</span><span class=\"o\">}</span>\n <span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">an</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">))):</span>\n <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">an</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"k\">have</span> <span class=\"n\">aux</span> <span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"n\">at_top</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">apply</span> <span class=\"n\">tendsto_at_top.mpr</span><span class=\"o\">,</span>\n    <span class=\"n\">intro</span> <span class=\"n\">N</span><span class=\"o\">,</span>\n    <span class=\"n\">filter_upwards</span> <span class=\"o\">[</span><span class=\"n\">Ici_mem_at_top</span> <span class=\"n\">N</span><span class=\"o\">],</span>\n    <span class=\"n\">intros</span> <span class=\"n\">n</span> <span class=\"n\">n_large</span><span class=\"o\">,</span>\n    <span class=\"n\">rw</span> <span class=\"o\">[</span><span class=\"n\">set.mem_Ici</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">n_large</span><span class=\"o\">,</span>\n    <span class=\"n\">linarith</span><span class=\"o\">,</span> <span class=\"o\">},</span>\n  <span class=\"n\">exact</span> <span class=\"n\">h.comp</span> <span class=\"n\">aux</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 281616962,
        "sender_full_name": "Kalle KytÃ¶lÃ¤",
        "timestamp": 1652042080
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"373986\">@Kalle KytÃ¶lÃ¤</span> Thanks!<br>\nIs there something missing here in mathlib, could for example  <a href=\"https://leanprover-community.github.io/mathlib_docs/find/filter.tendsto.mul_at_top\">docs#filter.tendsto.mul_at_top</a>  be extended so that it works in this case?</p>",
        "id": 281617136,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1652042381
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"313038\">Moritz Firsching</span> has marked this topic as resolved.</p>",
        "id": 281617137,
        "sender_full_name": "Notification Bot",
        "timestamp": 1652042383
    },
    {
        "content": "<p>There should definitely be a better way to prove <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow><mi>lim</mi><mo>â¡</mo></mrow><mrow><mi>n</mi><mo>â†’</mo><mi mathvariant=\"normal\">âˆ</mi></mrow></msub><mn>2</mn><mi>n</mi><mo>=</mo><mi mathvariant=\"normal\">âˆ</mi></mrow><annotation encoding=\"application/x-tex\">\\lim_{n \\to \\infty} 2 n = \\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mop\"><span class=\"mop\">lim</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">â†’</span><span class=\"mord mtight\">âˆ</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord\">âˆ</span></span></span></span>. But I don't know if something is missing from mathlib; I only tried <code>library_search</code> and when it failed, I gave up and wrote the first thing that came to mind... <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 281617272,
        "sender_full_name": "Kalle KytÃ¶lÃ¤",
        "timestamp": 1652042530
    },
    {
        "content": "<p>Actually even <a href=\"https://leanprover-community.github.io/mathlib_docs/find/function.injective.nat_tendsto_at_top\">docs#function.injective.nat_tendsto_at_top</a> + <a href=\"https://leanprover-community.github.io/mathlib_docs/find/nat.mul_right_inj\">docs#nat.mul_right_inj</a> would make it better, but still not sure of the elegant way.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">sub_seq_tendsto</span> <span class=\"o\">{</span><span class=\"n\">an</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span> <span class=\"bp\">â†’</span> <span class=\"n\">â„</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">â„</span><span class=\"o\">}</span>\n <span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">an</span> <span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">))):</span>\n <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">an</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"o\">(</span><span class=\"n\">A</span><span class=\"o\">))</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"k\">have</span> <span class=\"n\">aux</span> <span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span> <span class=\"n\">at_top</span> <span class=\"n\">at_top</span><span class=\"o\">,</span>\n  <span class=\"o\">{</span> <span class=\"n\">apply</span> <span class=\"n\">function.injective.nat_tendsto_at_top</span><span class=\"o\">,</span>\n    <span class=\"n\">exact</span> <span class=\"bp\">Î»</span> <span class=\"n\">_</span> <span class=\"n\">_</span> <span class=\"n\">hnm</span><span class=\"o\">,</span> <span class=\"o\">(</span><span class=\"n\">nat.mul_right_inj</span> <span class=\"n\">zero_lt_two</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span> <span class=\"n\">hnm</span><span class=\"o\">,</span> <span class=\"o\">},</span>\n  <span class=\"n\">exact</span> <span class=\"n\">h.comp</span> <span class=\"n\">aux</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 281617367,
        "sender_full_name": "Kalle KytÃ¶lÃ¤",
        "timestamp": 1652042673
    },
    {
        "content": "<p>The right way is to use <a href=\"https://leanprover-community.github.io/mathlib_docs/find/filter.tendsto.const_mul_at_top'\">docs#filter.tendsto.const_mul_at_top'</a></p>",
        "id": 281617765,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1652043247
    },
    {
        "content": "<p>Cool, that works and my lemma becomes</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">sub_seq_tendsto</span> <span class=\"o\">{</span><span class=\"n\">an</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span> <span class=\"bp\">â†’</span> <span class=\"n\">â„</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">â„</span><span class=\"o\">}</span>\n <span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"n\">an</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"n\">A</span><span class=\"o\">)):</span>\n <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">an</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"n\">refine</span> <span class=\"n\">tendsto.comp</span> <span class=\"n\">_</span> <span class=\"n\">_</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">at_top</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">h</span><span class=\"o\">,</span>\n  <span class=\"n\">exact</span> <span class=\"n\">tendsto.const_mul_at_top'</span> <span class=\"o\">(</span><span class=\"n\">two_pos</span><span class=\"o\">)</span> <span class=\"n\">tendsto_id</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 281618257,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1652043909
    },
    {
        "content": "<p>I guess you mean</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">sub_seq_tendsto</span> <span class=\"o\">{</span><span class=\"n\">an</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span> <span class=\"bp\">â†’</span> <span class=\"n\">â„</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">A</span> <span class=\"o\">:</span> <span class=\"n\">â„</span><span class=\"o\">}</span>\n <span class=\"o\">(</span><span class=\"n\">h</span><span class=\"o\">:</span> <span class=\"n\">tendsto</span> <span class=\"n\">an</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"n\">A</span><span class=\"o\">)):</span>\n <span class=\"n\">tendsto</span> <span class=\"o\">(</span><span class=\"bp\">Î»</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">â„•</span><span class=\"o\">),</span> <span class=\"n\">an</span> <span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span> <span class=\"n\">at_top</span> <span class=\"o\">(</span><span class=\"bp\">ğ“</span> <span class=\"n\">A</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"n\">h.comp</span> <span class=\"o\">(</span><span class=\"n\">tendsto_id.const_mul_at_top'</span> <span class=\"n\">two_pos</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 281619167,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1652045319
    },
    {
        "content": "<p>(see <a href=\"https://leanprover-community.github.io/glossary.html#dot-notation--generalized-field-notation--generalized-projections\">https://leanprover-community.github.io/glossary.html#dot-notation--generalized-field-notation--generalized-projections</a>)</p>",
        "id": 281619176,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1652045367
    }
]