[
    {
        "content": "<p>I've been attempting to make a small formalization of <code>brecOn</code> to get a better hang of Lean's metatheory. In the code below, <code>Ctors</code> is implicitly representing an inductive type by exhausting its constructors. Let <code>ctors : Ctors</code>. Then <code>i : ctors.ctor_indexer</code> will provide an index that will allow us to grab a constructor through <code>ctors.ctor_at i</code>, and so <code>term : ctors.ctor_at i</code> is effectively a value of the type given by <code>ctors</code>. This is encoded in the <code>TermOf</code> structure. <code>Ctors</code> is a special case of  mathlib's<code>PFunctor</code> and <code>TermOf</code> is a special case of mathlib's <code>WType</code>, and we encode Lean's <code>rec</code> by giving a way to witness some motive for each constructor.</p>\n<p>Everything was going more or less well until the definition of <code>brecOn_aux</code> in the code that follows, which fails to solve universe levels, and I'm not entirely sure I understand why. Before <code>below</code>, it seems to me we don't need more than one universe, but to encode <code>below</code> we need at least two universes: one containing the witness of the motive, and another one containing the witnessing that there is a witness to the motive, which needs to be a single universe level higher (right?), and from this point onwards I think we need to start keeping explicit track of universe levels, because just using <code>Type _</code> will produce said failure to solve universe level constraints at <code>brecOn_aux</code>. </p>\n<p>I am not entirely sure how to progress forwards given this fact. Anyone have hints/suggestions/free associations to share from looking at the code below? Meanwhile I will be reviewing the source code for inductive types, the code for <code>compile_inductive</code> and Mario Carneiro's metatheory code.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Ctors</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">ctor_indexer</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"w\">  </span><span class=\"n\">ctor_at</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctor_indexer</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">TermOf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ctors</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_indexer</span>\n<span class=\"w\">  </span><span class=\"n\">ctor_wness</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_at</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span>\n<span class=\"w\">  </span><span class=\"n\">continuation_index</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_indexer</span>\n<span class=\"w\">  </span><span class=\"n\">continuation</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_at</span><span class=\"w\"> </span><span class=\"n\">continuation_index</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">TermOf</span><span class=\"w\"> </span><span class=\"n\">ctors</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ctors</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_indexer</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">ctor_wness</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_at</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TermOf</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"bp\">.</span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"bp\">.</span><span class=\"n\">ctor_wness</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">below</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">PProd</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"bp\">.</span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"bp\">.</span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"bp\">.</span><span class=\"n\">ctor_wness</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- failure to solve universe levels in the following</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">brecOn_aux</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">ctor_wness</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">PProd</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"bp\">.</span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">ctor_wness</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">((</span><span class=\"n\">below</span><span class=\"w\"> </span><span class=\"n\">base_rec</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">ctor_wness</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">mk</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"bp\">.</span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">((</span><span class=\"n\">below</span><span class=\"w\"> </span><span class=\"n\">base_rec</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">)</span>\n<span class=\"c1\">-- if definition had succeeded, we would have defined brecOn by projecting the left value from the above's `motive_wness_from_term`</span>\n</code></pre></div>",
        "id": 491470902,
        "sender_full_name": "nrs",
        "timestamp": 1735707872
    },
    {
        "content": "<p>was re-reading Lean's <code>below</code> and might have made a mistake in my encoding above. Here's another version that works and doesn't need explicit universe levels. comments or suggestions are still welcome!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Ctors</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">ctor_indexer</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"w\">  </span><span class=\"n\">ctor_at</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctor_indexer</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">TermOf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ctors</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_indexer</span>\n<span class=\"w\">  </span><span class=\"n\">ctor_wness</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_at</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span>\n<span class=\"w\">  </span><span class=\"n\">continuation_index</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_indexer</span>\n<span class=\"w\">  </span><span class=\"n\">continuation</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_at</span><span class=\"w\"> </span><span class=\"n\">continuation_index</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">TermOf</span><span class=\"w\"> </span><span class=\"n\">ctors</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ctors</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_indexer</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">ctor_wness</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_at</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TermOf</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"bp\">.</span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"bp\">.</span><span class=\"n\">ctor_wness</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">below</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">PProd</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"bp\">.</span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"bp\">.</span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"bp\">.</span><span class=\"n\">ctor_wness</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">ctors</span><span class=\"bp\">.</span><span class=\"n\">ctor_at</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"bp\">.</span><span class=\"n\">ctor_choice</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">brecOn_aux</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">ctor_wness</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Prod</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"bp\">.</span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">ctor_wness</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">((</span><span class=\"n\">below</span><span class=\"w\"> </span><span class=\"n\">base_rec</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">ctor_wness</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">mk</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"bp\">.</span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">((</span><span class=\"n\">below</span><span class=\"w\"> </span><span class=\"n\">base_rec</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">brecOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">base_rec</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">ctors</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">ctor_wness</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">base_rec</span><span class=\"bp\">.</span><span class=\"n\">indexed_motives</span><span class=\"w\"> </span><span class=\"n\">ctor_choice</span><span class=\"w\"> </span><span class=\"n\">ctor_wness</span>\n<span class=\"w\">  </span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">brecOn_aux</span><span class=\"w\"> </span><span class=\"n\">base_rec</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">motive_wness_from_term</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">fst</span>\n</code></pre></div>\n<p>edit: the above will not work, a working definition needs to stick closer to the definitions for polynomial functors and wtypes</p>",
        "id": 491477560,
        "sender_full_name": "nrs",
        "timestamp": 1735715271
    }
]