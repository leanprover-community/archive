[
    {
        "content": "<p>Would lean's type theory survive a change which made</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Squash</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Squash</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>true?</p>",
        "id": 518411547,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747348477
    },
    {
        "content": "<p>Motivation: passing computationally relevent arguments in a way that is kernel-irrelevant</p>",
        "id": 518411576,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747348496
    },
    {
        "content": "<p>(we have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Erased#doc\">docs#Erased</a> for the other direction)</p>",
        "id": 518411715,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747348571
    },
    {
        "content": "<p>I think this makes defeq undecidable again</p>",
        "id": 518414165,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1747350112
    },
    {
        "content": "<p>By again you mean \"in yet another way\" as opposed to \"which we  only just fixed\"?</p>",
        "id": 518415016,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747350635
    },
    {
        "content": "<p>You get any two terms are defeq in an inconsistent context</p>",
        "id": 518415143,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1747350727
    },
    {
        "content": "<p>Unless you drop more transitivity</p>",
        "id": 518415165,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1747350749
    },
    {
        "content": "<p>For example, let <code>t</code> be your proof of <code>False</code>, and</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">true</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">t</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Squash</span><span class=\"bp\">.</span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Squash</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">t</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Squash</span><span class=\"bp\">.</span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Squash</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">t</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">t</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">false</span>\n</code></pre></div>",
        "id": 518415538,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1747350997
    },
    {
        "content": "<p>Right now all of those are defeqs except for the line converting <code>Squash.mk fun _ =&gt; true</code> to <code>Squash.mk fun _ =&gt; false</code></p>",
        "id": 518415800,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1747351199
    },
    {
        "content": "<p>Thanks, I hate it</p>",
        "id": 518418447,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747352928
    },
    {
        "content": "<p>You would need <code>Squash.lift</code> to be limited to <code>DefeqSubsingleton B</code> instead of <code>Subsingleton B</code></p>",
        "id": 519391400,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1747749151
    },
    {
        "content": "<p>It would be pretty cool if that was a thing, but I think you start to end up with a variation on cubical TT if you take it to its logical conclusion</p>",
        "id": 519391517,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1747749186
    },
    {
        "content": "<p>Is <code>DefeqSubsingleton</code> an actual class, or is it some meta-theoretic property that applies to types like propositions and <code>Unit</code>, but not <code>Unit -&gt; Unit</code> and <code>Empty</code>?</p>",
        "id": 519521572,
        "sender_full_name": "Niels Voss",
        "timestamp": 1747803363
    },
    {
        "content": "<p><code>Unit → Unit</code> looks like it would be a defeq subsingleton because it's a pi type whose codomain is a defeq subsingleton</p>",
        "id": 519592021,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1747828347
    },
    {
        "content": "<p>I was meaning <code>DefeqSubsingleton</code> is an actual class with the magic property that if you have two elements of it (even with a variable type) then the kernel knows that they are defeq</p>",
        "id": 519658193,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1747845615
    },
    {
        "content": "<p>Structures like <code>Prod Unit Unit</code> are also defeq subsingletons</p>",
        "id": 519658548,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1747845746
    },
    {
        "content": "<p>Is <code>Squash X</code> a defeq subsingleton?</p>",
        "id": 519670831,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747850162
    },
    {
        "content": "<p>it would be after this suggestion</p>",
        "id": 519712060,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1747866596
    },
    {
        "content": "<p>Ohh so you mean that the kernel would specifically look for <code>DefeqSubsingleton</code> instances and modify its behavior on account of them. I originally thought you meant we would have a typeclass for instances that were already DefeqSubsingletons according to the kernel</p>",
        "id": 519720601,
        "sender_full_name": "Niels Voss",
        "timestamp": 1747871456
    },
    {
        "content": "<p>If we get the ability to modify defeq behavior using the typeclass system, could we also make it so that propositionally equal but not definitionally equal diamonds now unify with each other?</p>",
        "id": 519720656,
        "sender_full_name": "Niels Voss",
        "timestamp": 1747871494
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/236446-Type-theory/topic/Can.20.60Squash.2Emk.20x.20.3D.20Squash.2Emk.20y.60.20be.20made.20true.20by.20definition.3F/near/519658193\">said</a>:</p>\n<blockquote>\n<p>I was meaning <code>DefeqSubsingleton</code> is an actual class with the magic property that if you have two elements of it (even with a variable type) then the kernel knows that they are defeq</p>\n</blockquote>\n<p>I've been wanting this magic for a long time. Do they teach Lean at Hogwarts? <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 519850342,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1747924183
    }
]