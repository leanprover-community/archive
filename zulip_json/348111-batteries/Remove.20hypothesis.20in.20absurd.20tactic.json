[
    {
        "content": "<p>I think <code>absurd</code> tactic should also try to remove the hypothesis it have been passed. This would be analogous to a very similar tactic <code>contrapose!</code> from mathlib. What other people think?</p>",
        "id": 538195248,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757329796
    },
    {
        "content": "<p>I don't see why this is helpful?</p>",
        "id": 538195373,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757329831
    },
    {
        "content": "<p>And why is it helpful that <code>contrapose</code> doesn't leave original assumptions? I find it easier to write proofs by removing unneeded noise form the context.</p>",
        "id": 538195879,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757329987
    },
    {
        "content": "<p>An example of <code>absurd</code> vs <code>contrapose!</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Contrapose</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">contrapose!</span><span class=\"w\"> </span><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">h‚ÇÇ</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">h‚ÇÅ</span>\n</code></pre></div>\n<p><code>contrapose!</code> turns</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">‚ä¢</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div>\n<p>into</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">h‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"bp\">‚ä¢</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p><code>absurd</code> turns</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">‚ä¢</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div>\n<p>into</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">‚ä¢</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>while I think it would be better to turn it into</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">‚ä¢</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 538197316,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757330434
    },
    {
        "content": "<p>I think that makes sense, since it's like you've 'consumed' the fact. It's not so different from <code>revert</code>. In fact, <code>absurd h</code> could be implemented as <code>exfalso; revert h</code>, supposing <code>h</code> is a variable, for the first case mentioned in the docstring. (<a href=\"https://github.com/leanprover/lean4/pull/8522\">lean4#8522</a> would enable using <code>revert</code> for arbitrary terms; it's a draft PR since there haven't been strong use cases for it)</p>\n<p>Looking at the <code>absurd</code> source code, the comment <code>we can't use `( :)` here as that would make `¬∑` behave weirdly.</code> is now out of date, and <code>(... :)</code> is ok in this context.</p>\n<p>There was another discussion about <code>absurd</code> not too long ago. It would be nice if <code>absurd</code> could take two arguments. <a class=\"message-link\" href=\"/#narrow/channel/113488-general/topic/.E2.9C.94.20Application-like.20list.20of.20terms.20in.20a.20macro/near/527663603\">#general &gt; ‚úî Application-like list of terms in a macro @ üí¨</a></p>",
        "id": 538197423,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757330474
    },
    {
        "content": "<p>Indeed, <code>absurd</code> is just like <code>exfalso; revert h</code>, but it also deals with double negation.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/348111-batteries/topic/Remove.20hypothesis.20in.20absurd.20tactic/near/538197423\">said</a>:</p>\n<blockquote>\n<p>Looking at the <code>absurd</code> source code, the comment <code>we can't use `( :)` here as that would make `¬∑` behave weirdly.</code> is now out of date, and <code>(... :)</code> is ok in this context.</p>\n</blockquote>\n<p>I don't know what <code>( :)</code> means?</p>",
        "id": 538200655,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757331462
    },
    {
        "content": "<p>Here's a version using a comma for the two-argument version, to maintain backwards compatibility:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- (high priority for testing, to override current batteries version)</span>\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"absurd \"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"s2\">\", \"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">)</span><span class=\"bp\">?</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span>\n\n<span class=\"kn\">macro_rules</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t1</span><span class=\"o\">:</span><span class=\"n\">ident</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t1</span><span class=\"w\"> </span><span class=\"bp\">?_;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">not_not</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"o\">)</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"n\">clear</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t1</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t1</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">first</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t1</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t2</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t2</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t1</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">h‚ÇÅ</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span>\n<span class=\"cm\">  n m : ‚Ñï</span>\n<span class=\"cm\">  ‚ä¢ n = 1</span>\n<span class=\"cm\">  -/</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">h‚ÇÅ</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span>\n<span class=\"cm\">  n m : ‚Ñï</span>\n<span class=\"cm\">  ‚ä¢ ¬¨n = 1</span>\n<span class=\"cm\">  -/</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">h‚ÇÅ</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span>\n<span class=\"cm\">  n m : ‚Ñï</span>\n<span class=\"cm\">  h‚ÇÅ : n ‚â† 1</span>\n<span class=\"cm\">  ‚ä¢ n = 1</span>\n<span class=\"cm\">  -/</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">h‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h‚ÇÇ</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">h‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h‚ÇÅ</span>\n</code></pre></div>\n<p>The use of <code>not_not</code> could be replaced with first trying a decidable version, in case people want to try avoiding the axiom of choice when possible.</p>",
        "id": 538200781,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757331499
    },
    {
        "content": "<p>It's too bad that <code>push_neg</code> is a mathlib tactic, otherwise <code>push_neg</code> would be a great tactic to use here. Maybe mathlib can have <code>absurd!</code> for doing <code>absurd</code> then <code>push_neg</code>, like <code>contrapose!</code>.</p>",
        "id": 538200990,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757331563
    },
    {
        "content": "<p>It's probably worth seeing if anything breaks with a no-comma version:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"s2\">\"absurd \"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"n\">arg</span><span class=\"o\">)</span><span class=\"bp\">?</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span>\n</code></pre></div>\n<p>That way <code>exact absurd h h'</code> can always be replaced with <code>absurd h h'</code>.</p>",
        "id": 538201575,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757331747
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"870257\">MrQubo</span> <a href=\"#narrow/channel/113488-general/topic/.E2.9C.94.20Application-like.20list.20of.20terms.20in.20a.20macro/near/538199850\">said</a>:</p>\n<blockquote>\n<p>Is this 2-argument <code>absurd</code> useful though? <code>contradiction</code> should be able to deal with such cases.</p>\n</blockquote>\n<p>The <code>contradiction</code> tactic can do it, but I figure if you know what the contradiction is, it's clearer (and slightly more efficient) to be able to say what the absurdity is directly.</p>",
        "id": 538202339,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757331981
    },
    {
        "content": "<p>Makes sense. Though, both problems could be solved (albeit, very not trivially). IDE could display contradicting hypotheses to make it clear what they are. Efficiency is probably very negligible and caching would also help.</p>",
        "id": 538203414,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757332310
    },
    {
        "content": "<p><code>contradiction</code> does many things, not just <code>absurd</code>, plus it's inherently an O(n^2) algorithm, where n is the number of local hypotheses; it uses definitional equality to find an absurd pair. It's definitely not negligible in general (though I imagine it's negligible in most cases).</p>",
        "id": 538205077,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757332725
    },
    {
        "content": "<p>While an IDE feature would be nice, the absurd pair is not listed in the source code; from the perspective of proof maintenance, if details change (e.g. Lean version, simp sets, etc.) then you won't know what the contradictory pair is supposed to be without some more investigation.</p>",
        "id": 538205331,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757332795
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/348111-batteries/topic/Remove.20hypothesis.20in.20absurd.20tactic/near/538205331\">said</a>:</p>\n<blockquote>\n<p>then you won't know what the contradictory pair is supposed to be without some more investigation.</p>\n</blockquote>\n<p>IDE could display information from the cache though.</p>",
        "id": 538206069,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757332959
    },
    {
        "content": "<p>Here's the story:</p>\n<ol>\n<li>You have a project</li>\n<li>You update Lean/mathlib/etc.</li>\n<li>A <code>contradiction</code> tactic fails.</li>\n<li>Now what? How can you figure out why it doesn't work anymore?</li>\n</ol>\n<p>There's no caching system available for this; nowhere for Lean to look to see how <code>contradiction</code> used to succeed. You might not even have any oleans from before updating.</p>\n<p>This doesn't mean you shouldn't use <code>contradiction</code>, but it does mean that there's a reason people might want an explicit <code>absurd</code>.</p>\n<p>The comparison shouldn't be <code>absurd</code> vs <code>contradiction</code> (then why not <code>tauto</code>, etc.?)</p>\n<p>Beyond the clarity of explicit proofs, the other value of two-argument <code>absurd</code> is that you don't have to remember the correct order for the arguments. I know I often write <code>exact (hn h).elim</code> instead of <code>exact absurd h hn</code> just to avoid accidentally writing <code>exact absurd hn h</code>.</p>",
        "id": 538212800,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757334755
    },
    {
        "content": "<p>I find it a bit odd that we have <code>exfalso</code> and <code>absurd</code> as tactics to begin with, when both are essentially just applying a single lemma.</p>",
        "id": 538317708,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1757366878
    },
    {
        "content": "<p><code>absurd</code> is not just applying lemma, it also does it in a order that avoids double negation.<br>\n<code>rfl</code> is also just applying a single lemma.<br>\nI use them often enough to appreciate the fact, that I can write <code>exfalso</code> instead of <code>apply False.elim</code>.</p>",
        "id": 538318973,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757367527
    },
    {
        "content": "<p>I almost never need to use <code>exfalso</code>, I just change the last <code>exact</code> to <code>cases</code></p>",
        "id": 538412231,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1757416916
    },
    {
        "content": "<p>I use <code>exfalso</code> when after doing some case-splitting I know some case is impossible. I add <code>exfalso</code> at the begging of the proof for this case, so whoever's reading the proof will know, that I'm trying to prove that this case is impossible. Also it's probably efficient to forget about the goal.</p>",
        "id": 538412664,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757417078
    },
    {
        "content": "<p>I use <code>exfalso</code> to clear dependencies of the goal on the hypotheses</p>",
        "id": 538413014,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757417196
    }
]