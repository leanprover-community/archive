[
    {
        "content": "<p>I'd like to move <code>List.ofFn</code> up to core Lean, to be able to make the <code>List</code> and <code>Array</code> APIs more consistent. (<code>Array.ofFn</code> already exists there.)</p>\n<p>Any concerns, suggestions, etc?</p>",
        "id": 472399763,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727155828
    },
    {
        "content": "<p>In the meantime <a href=\"https://github.com/leanprover-community/batteries/pull/956\">batteries#956</a> provides <code>(List.ofFn f).toArray = Array.ofFn f</code> and <code>(Array.ofFn f).toList = List.ofFn f</code> in Batteries.</p>",
        "id": 472404041,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727157597
    },
    {
        "content": "<p>Actually, it's on an old todo list of mine to think about reimplementing <code>List.ofFn</code> using <code>Fin.foldr</code>. I haven't fully thought about it but it might be worth it since <code>Fin.foldr</code> is already in core.</p>",
        "id": 472407669,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1727159370
    },
    {
        "content": "<p>The idea is to reduce the amount of <code>*TR</code> definitions  and associated <code>csimp</code>.</p>",
        "id": 472407997,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1727159483
    },
    {
        "content": "<p>I don't think there are any particular defeqs for <code>List.ofFn</code> required, so changing out the definition is probably straightforward.</p>",
        "id": 472423414,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727164295
    },
    {
        "content": "<p>Is this todo a reason to delay?</p>",
        "id": 472423446,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727164310
    },
    {
        "content": "<p>No, I don't think it's worth delaying, but perhaps it's worth trying right now to see what issues come up. I can give that a quick try in the next 24 hours if you don't mind waiting that long. Otherwise, please move forward and I will keep that item on my todo list.</p>",
        "id": 472426771,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1727165074
    },
    {
        "content": "<p>No problem for at least of few days. I have plenty of <code>Array</code> problems to keep me busy. :-)</p>",
        "id": 472427010,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727165116
    },
    {
        "content": "<p>It worked like a charm and simplified some parts of <a href=\"https://github.com/leanprover-community/batteries/pull/956\">batteries#956</a>. I haven't checked mathlib yet. Do you want me to update <a href=\"https://github.com/leanprover-community/batteries/pull/956\">batteries#956</a> with the new definition and simplified proofs?</p>",
        "id": 472555658,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1727204225
    },
    {
        "content": "<p>There is quite a bit of code about List.ofFn in Mathlib, so checking that can be made to work should be a priority. But otherwise, yes, please update 956 as needed.</p>",
        "id": 472581386,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727215985
    },
    {
        "content": "<p>I updated <a href=\"https://github.com/leanprover-community/batteries/pull/956\">batteries#956</a> with the new definition. I also created <a href=\"https://github.com/leanprover-community/mathlib4/pull/17118\">#17118</a> to fix all the places where Mathlib relies on defeq for <code>List.ofFn</code>. After that PR is merged, <a href=\"https://github.com/leanprover-community/batteries/pull/956\">batteries#956</a> should only need adaptations to remove obsolete lemmas from Mathlib.Data.List.OfFn.</p>",
        "id": 472597243,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1727228014
    },
    {
        "content": "<p><img alt=\":merge:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/37577b95.png\" title=\"merge\">'d <a href=\"https://github.com/leanprover-community/mathlib4/pull/17118\">#17118</a></p>",
        "id": 472600056,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727230170
    },
    {
        "content": "<p>and I'm happy with the changes to <a href=\"https://github.com/leanprover-community/batteries/pull/956\">batteries#956</a>.</p>\n<p><span class=\"user-mention\" data-user-id=\"306577\">@Matthew Ballard</span> or <span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> should probably do the merging now that we've both contributed.</p>",
        "id": 472600179,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727230265
    },
    {
        "content": "<p>It looks much more fresh</p>",
        "id": 472649164,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1727255656
    }
]