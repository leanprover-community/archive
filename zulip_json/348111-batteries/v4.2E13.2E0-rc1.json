[
    {
        "content": "<p>Just a heads up that after I merge <a href=\"https://github.com/leanprover-community/batteries/pull/978\">batteries#978</a> into <code>bump/v4.13.0</code>, Batteries will be ready to move to <code>v4.13.0-rc1</code> (being released now), and I will make a PR merging <code>bump/v4.13.0</code> into <code>main</code>.</p>",
        "id": 474559862,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727953497
    },
    {
        "content": "<p>We're now on <code>v4.13.0-rc3</code> (<a href=\"https://github.com/leanprover-community/batteries/pull/981\">batteries#981</a>) which is actually exactly the same as <code>v4.13.0-rc1</code>. (<code>v4.13.0-rc2</code> was a brief blip in between.)</p>",
        "id": 474990823,
        "sender_full_name": "Fran√ßois G. Dorais",
        "timestamp": 1728142275
    },
    {
        "content": "<p>as a novice, I'm still on v4.12.0 and lake is pulling in the latest version to work with v4.13.0 and stuff breaks badly.  A pointer to how to specify the last version that worked with 4.12.0 and include that in my lakefile.lean/manifest/whatever else is needed, would be much appreciated!  Can I use lake update to specify what not to change perhaps?</p>",
        "id": 476119371,
        "sender_full_name": "Matthew Fairtlough",
        "timestamp": 1728562881
    },
    {
        "content": "<p>batteries repository has tags for different toolchain versions.</p>\n<p>In <code>lakefile.lean</code> when requiring from git you can specify branch, commit or tag:<br>\n<code>require batteries from git \"https://github.com/leanprover-community/batteries\" @ \"v4.12.0\"</code></p>\n<p>Similarly for <code>lakefile.toml</code>:</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[[require]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"batteries\"</span>\n<span class=\"n\">git</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"https://github.com/leanprover-community/batteries\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.12.0\"</span>\n</code></pre></div>",
        "id": 476121707,
        "sender_full_name": "Daniil Kisel",
        "timestamp": 1728563589
    },
    {
        "content": "<p>thanks so much.  I've done this, but now need to update the manifest, which I did by <code>lake update batteries</code> and now I have <code>Lake version 5.0.0-01d414a (Lean version 4.13.0-rc3)</code> which is the version that exactly won't work with the version I need.  How do I stop lake update &lt;anything&gt; from also updating my lean-toolchain? My workaround is to revert lean-toolchain but surely there's a better way?</p>",
        "id": 476126756,
        "sender_full_name": "Matthew Fairtlough",
        "timestamp": 1728564751
    },
    {
        "content": "<p>As far as I'm aware, <code>lake update</code> only changes your <code>lean-toolchain</code> if you depend on mathlib</p>",
        "id": 476128089,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728565139
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 476128605,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1728565271
    },
    {
        "content": "<p>oh right.  But I do depend on mathlib.  But requiring a specific version eg 4.12.0 means it doesn't self-update the toolchain, which is great.</p>",
        "id": 476129833,
        "sender_full_name": "Matthew Fairtlough",
        "timestamp": 1728565603
    },
    {
        "content": "<p>If you depend on mathlib, then you should not put batteries in your lakefile</p>",
        "id": 476328092,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728632874
    },
    {
        "content": "<p>Oh, that's a good point as well</p>",
        "id": 476354218,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728641118
    }
]