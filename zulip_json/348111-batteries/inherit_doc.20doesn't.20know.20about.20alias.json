[
    {
        "content": "<p>I know that <code>inherit_doc</code> is defined in core and <code>alias</code> in batteries, but is there any chance we can get the following very reasonable example to work?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Alias</span>\n\n<span class=\"sd\">/-- I have a docstring -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">trivial</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">alias</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">foo</span>\n<span class=\"c1\">-- invalid `[inherit_doc]` attribute, could not infer doc source</span>\n</code></pre></div>",
        "id": 508494544,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1743076322
    },
    {
        "content": "<p>Probably (the implementation would be in batteries). The way other commands do this is to check for uses of the <code>inherit_doc</code> attribute and replace them by <code>@[inherit_doc foo]</code> as appropriate</p>",
        "id": 508499416,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1743077714
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/348111-batteries/topic/inherit_doc.20doesn't.20know.20about.20alias/near/508499416\">said</a>:</p>\n<blockquote>\n<p>The way other commands do this is to check for uses of the <code>inherit_doc</code> attribute and replace them by <code>@[inherit_doc foo]</code> as appropriate</p>\n</blockquote>\n<p>This happens regularly? I do something like this in <code>to_additive</code>, and I thought it was a huge hack.</p>",
        "id": 508525778,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1743083952
    },
    {
        "content": "<p>eh, it felt like a hack to me too but it works</p>",
        "id": 508580934,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1743096750
    },
    {
        "content": "<p>I'm not really going to defend it since I'm the one who made it work like that</p>",
        "id": 508581024,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1743096780
    },
    {
        "content": "<p>Should I open an issue?</p>",
        "id": 508586441,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1743098395
    }
]