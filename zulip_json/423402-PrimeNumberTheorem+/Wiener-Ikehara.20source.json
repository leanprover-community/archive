[
    {
        "content": "<p>Hi humans,</p>\n<p>I was wondering - are you following a text in particular for the Wiener-Ikehara proof?</p>\n<p>Part of the reason that I'm asking is the following peculiar situation - <br>\nI needed a known Lemma for my own non-formal work. I couldn't find it quite in the form I needed it in the literature, so I had to state and prove it myself (it takes no more than a paragraph). Funnily enough, it turns out to be exactly what you call Lemma 1 (first_fourier).</p>\n<p>So, you see: either this is in the literature in this form - or I would like to be able to refer to this project in a citation. In fact this is an inclusive 'or'.</p>\n<p>(There are of course related statements in the literature, but the exact conditions are often not right for what I need.)</p>",
        "id": 502898644,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1740948318
    },
    {
        "content": "<p>I'd argue that a citation to the PNT+ project GitHub page would be at least as authoritative as a citation to a traditional journal article – some would say considerably more so!</p>",
        "id": 502901015,
        "sender_full_name": "David Loeffler",
        "timestamp": 1740950130
    },
    {
        "content": "<p>Sure, but is there a convention to follow? What would the appropriate BibTeX entry look like?</p>\n<p>At any rate, does the LaTeX writeup here follow (or is it inspired by) a particular non-formal version of the Wiener-Ikehara proof in print?</p>",
        "id": 502901229,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1740950309
    },
    {
        "content": "<p>I expect that <span class=\"user-mention\" data-user-id=\"657719\">@Terence Tao</span>, <span class=\"user-mention\" data-user-id=\"252920\">@Alex Kontorovich</span> and <span class=\"user-mention\" data-user-id=\"242586\">@Vincent Beffara</span> will be able to give details about the sources of the Wiener-Ikehara formalization.</p>",
        "id": 502955472,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1740985946
    },
    {
        "content": "<p>I looked back at <code>first_fourier</code>, and it's literally just opening the definitions and interchanging orders; I'm not sure what kind of reference you might be looking for that? The exact conditions (as you can see in the formal version) are that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>↦</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><msup><mi>n</mi><mi>σ</mi></msup></mrow><annotation encoding=\"application/x-tex\">n\\mapsto f(n)/n^\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.522em;vertical-align:-0.011em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">↦</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">σ</span></span></span></span></span></span></span></span></span></span></span> is summable for all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">\\sigma&gt;1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>, and that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ψ</mi></mrow><annotation encoding=\"application/x-tex\">\\psi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span> is continuous and integrable. Great question about how one references a github repository - I have no idea, but I'm sure lots of others have done this..?</p>",
        "id": 503029143,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1741009320
    },
    {
        "content": "<p>Obviously I know that; as I said, I stated and proved it myself (because I needed it and was trivial). It's just that I was annoyed about how I couldn't find it in that form in the literature; people keep making superfluous assumptions that are undesirable to me, such as that $\\psi$ is compactly supported.</p>\n<p>So, what version in the literature was your starting point?</p>",
        "id": 503029708,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741009468
    },
    {
        "content": "<p>Github has CITATION files: <a href=\"https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-citation-files\">https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-citation-files</a> .<br>\nI have never used them myself, but it looks like they exist for the purpose of indicating a way of citing the repository.</p>",
        "id": 503029715,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1741009470
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"603502\">Harald Helfgott</span> <a href=\"#narrow/channel/423402-PrimeNumberTheorem.2B/topic/Wiener-Ikehara.20source/near/503029708\">said</a>:</p>\n<blockquote>\n<p>Obviously I know that; as I said, I stated and proved it myself (because I needed it and was trivial). It's just that I was annoyed about how I couldn't find it in that form in the literature; people keep making superfluous assumptions that are undesirable to me, such as that $\\psi$ is compactly supported.</p>\n<p>So, what version in the literature was your starting point?</p>\n</blockquote>\n<p>Yes, I agree; there are a lot of superfluous assumptions in the literature, and a nice feature of formalization is to force them out into the open. I don't think we're following a particular source in the literature, just improvising an approach. Certainly that's the case for the complex-analytic part, where we're following my own course notes. <span class=\"user-mention\" data-user-id=\"657719\">@Terence Tao</span>, did you look at a reference when you wrote <code>first_fourier</code>?</p>",
        "id": 503030787,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1741009757
    },
    {
        "content": "<p>Speaking of superfluous assumptions, do you actually need $\\psi$ to be continuous?</p>",
        "id": 503031110,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741009836
    },
    {
        "content": "<p>For switching the order of the integral and the sum, dominated convergence would seem to work fine without a continuity assumption, no?</p>",
        "id": 503031526,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741009949
    },
    {
        "content": "<p>Heh, yeah, there may still remain some superfluous assumptions! The nice thing about Lean is you can comment out the assumption, see exactly where the proof breaks, and try to fix it...</p>",
        "id": 503031755,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1741010018
    },
    {
        "content": "<p>I take I should download a copy rather than vandalize the code.</p>",
        "id": 503031992,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741010079
    },
    {
        "content": "<p>You can also play with it online in Gitpod (or codespaces) if you don't want to download it; we have a link from the main repo.</p>",
        "id": 503032373,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1741010196
    },
    {
        "content": "<p>I think when I wrote the blueprint, I had located a copy of the statement of Wiener-Ikehara, but not a good source for the proof.  It was faster for me to just work out a proof on my own than to hunt through the literature.  As for <code>first_fourier</code>, I had written similar formulae in my analytic number theory lecture notes (see Proposition 7 of <a href=\"https://terrytao.wordpress.com/2014/12/09/254a-notes-2-complex-analytic-multiplicative-number-theory/\">these notes</a>), and many years previously I <a href=\"https://www.google.com/url?q=http://www.math.ucla.edu/~tao/preprints/Expository/prime.dvi\">explicitly gave myself the task</a> of rewriting some of the standard proofs of the prime number theorem in Fourier-analytic language, so I was probably drawing unconsciously from these past sources.</p>",
        "id": 503054861,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741015659
    },
    {
        "content": "<p>Right, I had looked at your notes, and was a bit annoyed that you required $g$ (which corresponds to $\\psi$) to be compactly supported.</p>",
        "id": 503067426,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741018532
    },
    {
        "content": "<p>(in Proposition 7)</p>",
        "id": 503067477,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741018545
    },
    {
        "content": "<p>TL;DR first_fourier (minus the continuity assumption, which I think is unnecessary) seems to me the obvious way to start, so it's funny I can't find in print - but admittedly I haven't tried very hard.</p>",
        "id": 503082286,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741022308
    },
    {
        "content": "<p>And I thought you guys would know.</p>",
        "id": 503082330,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741022325
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"657719\">@Terence Tao</span> , I can't get your .dvi. Can you post the right link or set the permissions correctly?</p>",
        "id": 503083905,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741022867
    },
    {
        "content": "<p>Ah, got it, never mind.</p>",
        "id": 503084019,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741022906
    },
    {
        "content": "<p>Golfed the continuity assumption: <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/243\">https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/243</a></p>",
        "id": 503093123,
        "sender_full_name": "llllvvuu",
        "timestamp": 1741025778
    },
    {
        "content": "<p><del>actually I'm not sure <code>Measurable</code> is needed either</del> <del>EDIT: ok that would probably be more than a one-liner</del> OK it is a one-liner</p>",
        "id": 503093220,
        "sender_full_name": "llllvvuu",
        "timestamp": 1741025808
    },
    {
        "content": "<p>Nice!  It's great how formalization can definitively settle these issues without having to need an expert to weigh on with their opinion.  Presumably in <code>second_fourier</code> one can similarly relax continuity to integrability (+ AE measurability, I guess, if that is not part of the Lean definition of integrability).  For the next few results after that, one could potentially relax the smoothness and compact support hypotheses on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ψ</mi></mrow><annotation encoding=\"application/x-tex\">\\psi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span> to the weaker assertion that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ψ</mi></mrow><annotation encoding=\"application/x-tex\">\\psi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>ψ</mi><mo>^</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\hat \\psi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1523em;vertical-align:-0.1944em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9579em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span><span style=\"top:-3.2634em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1389em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span></span></span></span> are both integrable, though this might start requiring more than one-line alterations, and I am not sure how useful it would be.</p>",
        "id": 503100413,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741028117
    },
    {
        "content": "<p>In Lemma 3 (and hence Lemma 4 and the following), requiring $\\psi$ to be $C^2$ is too much. All you need is that $\\psi$ be absolutely continuous and that $\\psi'$ be of bounded variation; then the conclusion of Lemma 3 still holds (and you can express $C$ as a multiple of the total variation of $\\psi'$). This is actually useful in other contexts. The proof should be the same but of course 'absolutely continuous' and 'bounded variation' must have been defined (have they?).</p>",
        "id": 503104129,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741029256
    },
    {
        "content": "<p>It's an alternative to requiring that $\\psi$ and $\\widehat{\\psi}$ be integrable. Matter of taste.</p>",
        "id": 503104362,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741029335
    },
    {
        "content": "<p>I'm a bit confused though. I thought integrability implies measurability. Did I learn everything from the wrong book?</p>",
        "id": 503104772,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741029460
    },
    {
        "content": "<p>In Mathlib, <a href=\"https://github.com/leanprover-community/mathlib4/blob/6cecf71a82a22ea7c01598800e12f3e8eb66894b/Mathlib/MeasureTheory/Function/L1Space/Integrable.lean#L51-L56\">the definition</a> of <code>MeasureTheory.Integrable</code> requires only <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/MeasureTheory/Function/StronglyMeasurable/AEStronglyMeasurable.html#MeasureTheory.AEStronglyMeasurable\"><code>AEStronglyMeasurable</code></a>, which is <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/MeasureTheory/Function/StronglyMeasurable/AEStronglyMeasurable.html#Measurable.aestronglyMeasurable\">slightly weaker</a> than <code>Measurable</code> in a second countable space.  I'm not sure as to the history of why Mathlib contributors chose these particular definitions, but I trust they had their reasons (there are certainly many other situations where the act of formalization revealed subtleties in the most natural choice of definitions that deviated from what one would find from textbooks intended for humans).</p>",
        "id": 503109606,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741031004
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> wrote an explanation of our integral/integrable definition on page 7 of <a href=\"https://perso.univ-rennes1.fr/sebastien.gouezel/articles/change_variables.pdf\">https://perso.univ-rennes1.fr/sebastien.gouezel/articles/change_variables.pdf</a></p>",
        "id": 503110840,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1741031412
    },
    {
        "content": "<p>It might have been before the introduction of <em>strong</em> measurability though. At least it explains the \"a.e.\" part.</p>",
        "id": 503111040,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1741031485
    },
    {
        "content": "<p>strong measurability is discussed on page 8</p>",
        "id": 503111272,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741031566
    },
    {
        "content": "<p>strong measurability is needed when you define spectral projections of operators: these are typically integrals taking values in spaces of operators which are not second-countable, so you have to be careful.</p>",
        "id": 503111327,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1741031588
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"603502\">@Harald Helfgott</span>  By the way I don't see why absolute continuity of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ψ</mi></mrow><annotation encoding=\"application/x-tex\">\\psi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span> is relevant.  Integrability,  C^1, and bounded variation of the derivative should suffice.  (You are welcome, by the way, to submit a pull request with a modified version of the lemma and its proof, to assist in the possible formalization of that modification.)</p>",
        "id": 503112210,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741031892
    },
    {
        "content": "<p>absolute continuity is weaker than C^1, right?</p>",
        "id": 503112615,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1741032013
    },
    {
        "content": "<p>On a compact interval, absolute continuity is weaker than $C^1$, right</p>",
        "id": 503112981,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741032127
    },
    {
        "content": "<p>Absolute continuity is equivalent to \"obeys the fundamental theorem of calculus\". I don't know how to show that bounded variation of the derivative is enough without that.</p>",
        "id": 503113174,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741032211
    },
    {
        "content": "<p>There is a technical issue in that absolute continuity only ensures that the derivative is defined almost everywhere rather than everywhere.  <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/EMetricSpace/BoundedVariation.html#BoundedVariationOn\">Mathlib's definition</a> of <code>BoundedVariationOn</code> requires a total function.  This is likely a solvable problem, though.</p>",
        "id": 503113331,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741032263
    },
    {
        "content": "<p>I mean, without absolute continuity, we could have copies of the devil's staircase added to our function anywhere the devil wants to without changing $f'$ outside a set of measure $0$.</p>",
        "id": 503113387,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741032283
    },
    {
        "content": "<p>I think Mathlib sets the derivative by default to the junk value of 0 at points of non-differentiability.  This may already be enough to solve the issue</p>",
        "id": 503113662,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741032383
    },
    {
        "content": "<p>A problem worth solving, certainly. There are lots of functions that are only piecewise C^1 and that are very nice and useful (in fact some of them are optimal solutions relevant in number theory).</p>",
        "id": 503113694,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741032395
    },
    {
        "content": "<p>Well, feel free to propose a precise replacement for Lemma 3, either as a pull request or as some LaTeX code here.</p>",
        "id": 503113979,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741032493
    },
    {
        "content": "<p>(Not meaning to impose, just wondering whether people want Lemmas to be as widely useful as is possible without introducing complications.) OK - how do I access the existing LaTeX code?</p>",
        "id": 503114194,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741032581
    },
    {
        "content": "<p>It starts at <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/blob/main/PrimeNumberTheoremAnd/Wiener.lean#L326\">https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/blob/main/PrimeNumberTheoremAnd/Wiener.lean#L326</a> (in this project the LaTeX and Lean are integrated into a single file, but the LaTeX is in comments and so changing the LaTeX does not affect the compilation of the Lean).  You would use git to clone a copy of the repository, make local edits, commit to a new branch, and submit that branch as a pull request (I may have the terminology slightly off, but this is basically the workflow).</p>",
        "id": 503115514,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741033040
    },
    {
        "content": "<p>The Mathlib style is generally to state lemmas in their \"natural\" level of generality, which tends to be close to the \"maximal\" level of generality though it isn't quite the same thing.  Maybe someone more involved with Mathlib can explain the philosophy better.</p>",
        "id": 503115937,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741033189
    },
    {
        "content": "<p>Given that we would like to have at least one proof of PNT in Mathlib, it makes sense to work on refactoring the lemmas already in the project to be more conforming to Mathlib style now, even before we begin the Mathlib upstreaming in earnest.</p>",
        "id": 503116532,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741033395
    },
    {
        "content": "<p>As you can see, the Lean code for the proof is somewhat non-trivial, so ideally one would only want to make changes that really do make minimal impact on the proof.</p>",
        "id": 503116812,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741033486
    },
    {
        "content": "<p>OK, thanks. Well, since I am a newbie, let me take your invitation to post some LaTeX code here. I would say something like this:  <br>\n\\begin{lemma}[Decay bounds]\\label{decay}\\lean{decay_bounds}\\leanok  <br>\n(a) If $\\psi:\\R \\to \\C$ is integrable, then $|\\hat \\psi(u)|\\leq |\\psi|_1$ for all $u\\in \\R$.<br>\n(b) If $\\psi:\\R \\to \\C$ is of bounded variation, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mover accent=\"true\"><mi>ψ</mi><mo>^</mo></mover><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">∣</mi><mo>≤</mo><mfrac><mrow><mi mathvariant=\"normal\">∣</mi><mi>ψ</mi><msub><mi mathvariant=\"normal\">∣</mi><mtext>TV</mtext></msub></mrow><mrow><mn>2</mn><mi>π</mi><mi mathvariant=\"normal\">∣</mi><mi>u</mi><mi mathvariant=\"normal\">∣</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">|\\hat \\psi(u)|\\leq \\frac{|\\psi|_{\\textrm{TV}}}{2\\pi |u|}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2079em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9579em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span><span style=\"top:-3.2634em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1389em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\">)</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.53em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mtight\">∣</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mord mtight\">∣</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">∣</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"mord mtight\"><span class=\"mord mtight\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3567em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord textrm mtight\">TV</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1433em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> for all $u\\in \\R$ with $u\\ne 0$.<br>\n(c) If $\\psi:\\R \\to \\C$ is absolutely continuous and $\\psi'$ is of bounded variation, then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mover accent=\"true\"><mi>ψ</mi><mo>^</mo></mover><mo stretchy=\"false\">(</mo><mi>u</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">∣</mi><mo>≤</mo><mfrac><mrow><mi mathvariant=\"normal\">∣</mi><msup><mi>ψ</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><msub><mi mathvariant=\"normal\">∣</mi><mtext>TV</mtext></msub></mrow><mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mi>π</mi><mi mathvariant=\"normal\">∣</mi><mi>u</mi><mi mathvariant=\"normal\">∣</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">|\\hat \\psi(u)|\\leq \\frac{|\\psi&#x27;|_{\\textrm{TV}}}{(2\\pi |u|)^2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2079em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9579em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span><span style=\"top:-3.2634em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1389em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\">)</span><span class=\"mord\">∣</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.5845em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0645em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">2</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mtight\">∣</span><span class=\"mord mathnormal mtight\">u</span><span class=\"mord mtight\">∣</span><span class=\"mclose mtight\"><span class=\"mclose mtight\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">∣</span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8278em;\"><span style=\"top:-2.931em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord mtight\"><span class=\"mord mtight\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3567em;margin-left:0em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord textrm mtight\">TV</span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1433em;\"><span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> for all $u\\in \\R$ with $u\\ne 0$.<br>\n\\end{lemma}</p>",
        "id": 503117206,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741033622
    },
    {
        "content": "<p>Not sure whether this fits in with the Mathlib style, either in the sense of fitting well enough or in the sense of fitting better than what you have right now. It's motivated by \"why say just that a constant exists if the constant is nice, meaningful and pops out of the proof effortlessly\", which seems to me to actually fit reasonably well with what you just said, but what do I know.</p>",
        "id": 503117538,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741033750
    },
    {
        "content": "<p>One may need <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ψ</mi></mrow><annotation encoding=\"application/x-tex\">\\psi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span></span></span> to be integrable as a running hypothesis for (a), (b), and (c), in order to use the classical definition of the Fourier transform <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>ψ</mi><mo>^</mo></mover></mrow><annotation encoding=\"application/x-tex\">\\hat \\psi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1523em;vertical-align:-0.1944em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9579em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span></span><span style=\"top:-3.2634em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1389em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span></span></span></span>.  (The distributional Fourier transform would be available without this hypothesis, but I don't think Mathlib's support for distributional Fourier analysis is all that advanced right now.)</p>",
        "id": 503118253,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741034016
    },
    {
        "content": "<p>That seems fair.</p>",
        "id": 503118293,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741034036
    },
    {
        "content": "<p>BTW I'm assuming here that mathlib defines the Fourier transform like a normal person, with a factor of $e(- x t) = e^{- 2\\pi i x t}$ in the integrand and no $\\pi$s  or $2$s floating elsewhere.</p>",
        "id": 503120089,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741034655
    },
    {
        "content": "<p>I have to teach now but will look at how to integrate this into the Lean file a bit later.  Probably it will be best to break things up into several small lemmas, one for each part (a), (b), (c), rather than have a single lemma with a complex conclusion.</p>",
        "id": 503120972,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741035020
    },
    {
        "content": "<p>I agree. In the real world, I'd consider turning (c) or even (b) and (c) into their own thing for arbitrary order (if $\\psi, \\psi', \\psi'',\\dotsc,\\psi^{(k-2)}$ are absolutely continuous and $\\psi^{(k-1)}$ is of bounded variation...) but I do not know whether iteration would introduce complications in the Lean code.</p>",
        "id": 503121360,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741035197
    },
    {
        "content": "<p>Added lemmas at <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/244\">https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/244</a> as a first step to formalizing the alternate route to the decay bound.</p>",
        "id": 503136865,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741041053
    },
    {
        "content": "<p>Not sure I agree with [Decay bound, alternate form]\\label{decay-alt} as stated - we have a bound <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi>f</mi><msub><mi mathvariant=\"normal\">∣</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">|f|_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> and a bound <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><msup><mi>f</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><msub><mi mathvariant=\"normal\">∣</mi><mrow><mi>T</mi><mi>V</mi></mrow></msub><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mn>2</mn><mi>π</mi><mi>u</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">|f&#x27;|_{TV}/(2\\pi u)^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">V</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span>, but a bound <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>max</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi mathvariant=\"normal\">∥</mi><mi>ψ</mi><msub><mi mathvariant=\"normal\">∥</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∥</mi><msup><mi>ψ</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><msub><mi mathvariant=\"normal\">∥</mi><mrow><mi>T</mi><mi>V</mi></mrow></msub><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mn>2</mn><mi>π</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi mathvariant=\"normal\">∣</mi><mi>u</mi><msup><mi mathvariant=\"normal\">∣</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\max( \\|\\psi\\|_1, \\| \\psi&#x27; \\|_{TV} / (2\\pi)^2) / (1+|u|^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mop\">max</span><span class=\"mopen\">(</span><span class=\"mord\">∥</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">∥</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∥</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">V</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">u</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> does not follow. What does follow (easily) is a bound <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi mathvariant=\"normal\">∣</mi><mi>u</mi><msup><mi mathvariant=\"normal\">∣</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">C/(1+|u|^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">u</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> for some $C$ (which can be described explicitly, but we may not want to). This seems best: for explicit work, you'd use the bounds <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><mi>f</mi><msub><mi mathvariant=\"normal\">∣</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">|f|_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∣</mi><msup><mi>f</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup><msub><mi mathvariant=\"normal\">∣</mi><mrow><mi>T</mi><mi>V</mi></mrow></msub><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mn>2</mn><mi>π</mi><mi>u</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">|f&#x27;|_{TV}/(2\\pi u)^2,</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">V</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span><span class=\"mord mathnormal\">u</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mpunct\">,</span></span></span></span> whereas for non-explicit work, you may choose to use either those bounds or the bound <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi mathvariant=\"normal\">∣</mi><mi>u</mi><msup><mi mathvariant=\"normal\">∣</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">C/(1+|u|^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord mathnormal\">u</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> people have been using, depending on what you find most convenient.</p>",
        "id": 503141550,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741043186
    },
    {
        "content": "<p>I think changing \"max\" to \"plus\" should fix the issue.</p>",
        "id": 503142074,
        "sender_full_name": "Terence Tao",
        "timestamp": 1741043439
    },
    {
        "content": "<p>Right, by (a+b)/(c+d) &gt;= min(a/c,b/d).</p>",
        "id": 503192578,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741070773
    },
    {
        "content": "<p>I don't think we have absolute continuous functions in mathlib for now. It's not that it's particularly difficult, just that nobody has needed it strong enough to implement it. In general, people are motivated by the applications: they want to prove a theorem, and along the way they need absolute continuity of functions for some proof, so they will implement it. It just hasn't happened yet.</p>",
        "id": 503196316,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1741072712
    },
    {
        "content": "<p>They are a useful thing to have. They give the right level of generality for many statements (and if I understand correctly that's a mathlib standard): on a compact interval, they are exactly the functions for which FTC holds.</p>",
        "id": 503197714,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741073354
    },
    {
        "content": "<p>Actually, I don't know whether there's a handy name for functions on $\\mathbb{R}$ for which FTC holds. (I suppose it depends on whether one just wants $f(y) - f(x) = \\int_x^y f'(t) dt$ or also $f(x) = \\lim_{t\\to -\\infty} f(t) + \\int_{-\\infty}^x f'(t) dt$.)</p>",
        "id": 503198531,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741073709
    },
    {
        "content": "<p>Is absolute continuity still equivalent to the latter, stronger sense?</p>",
        "id": 503198587,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741073743
    },
    {
        "content": "<p>Sure. It's just that nobody has needed them yet badly enough. For instance, FTC is stated assuming that the function is differentiable everywhere, and its derivative is integrable (which is a nontrivial version, but orthogonal to the question of absolute continuity)</p>",
        "id": 503198600,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1741073748
    },
    {
        "content": "<p>That leaves out a lot of useful functions.</p>",
        "id": 503198705,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741073788
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"603502\">Harald Helfgott</span> <a href=\"#narrow/channel/423402-PrimeNumberTheorem.2B/topic/Wiener-Ikehara.20source/near/503198705\">said</a>:</p>\n<blockquote>\n<p>That leaves out a lot of useful functions.</p>\n</blockquote>\n<p>What kind of functions are \"useful\"? One of the things I've learned from my own formalization projects is that there can be a bit of a communication gulf between  experts in a given area <em>per se</em>, and people working in other areas where those results are used, about which cases of a given theorem are \"the interesting ones\" and hence which directions of generalisation should be pursued. So I think it's really valuable knowledge that this particular version of FTC (allowing absolutely-continuous functions) has applications in analytic number theory.</p>\n<p>(One example of this kind of \"mis-match\" that comes to mind is Cauchy's integral formula. The version in Mathlib has extremely weak hypotheses on the function, e.g. allowing countably many points of non-differentiability, but requires the contour to be a rectangle or circle. For the applications I have in mind, I'd happily live with far more restrictive hypotheses on the integrand if it would allow us to handle general piecewise C^1 paths.)</p>",
        "id": 503219687,
        "sender_full_name": "David Loeffler",
        "timestamp": 1741080935
    },
    {
        "content": "<p>Continuous, piecewise $C^1$ functions, for instance. Those are useful not just in analytic number theory - often the optimal function with support on $[-1,1]$ in a variational problem is continuous but not differentiable at $-1$ or $1$. You can try to be less general (do piecewise $C^1$ functions - but is that really simpler than absolutely continuous functions?) or more general (distributions - but that, while certainly useful, might open cans of invertebrates). But AC functions seem to be a happy medium, in part because (at least on intervals) they are exactly those for which FTC is true.</p>",
        "id": 503224250,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741082273
    },
    {
        "content": "<p>That's relevant even to Tauberian proofs of PNT (I'll explain in a bit).</p>",
        "id": 503224847,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741082426
    },
    {
        "content": "<p>Now that I think of it, I'm pretty sure I've seen Terry use the quadratic decay Lemma in one of his papers for a function that is only piecewise differentiable.</p>",
        "id": 503233750,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1741085056
    },
    {
        "content": "<p>(double <code>$$</code> for LaTeX here, for some reason; single <code>$</code> does nothing and double <code>$$</code> does not put the maths on a new line. You can edit previous posts to make them more legible if you like)</p>",
        "id": 503242840,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1741087812
    },
    {
        "content": "<p>General question: how do we cite a lemma or proposition in the current version of the proof? Reason: at the beginning of a paper I am coauthoring, I am using (and proving) a simple lemma very close to Lemma 1 (first_fourier) here. In fact, now that I've pointed that a condition that used to be present in Lemma 1 here was unnecessary, and that it has been removed, Lemma 1 here and the little lemma in my paper have become essentially identical. I'd like to be able to cite the project in some fashion. (Curiously, I haven't been able to find a form of the lemma that comes as close to what I had.)</p>",
        "id": 511103535,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1744185861
    },
    {
        "content": "<p>(I just explained things that everybody in this thread already knows - I thought I'd be able to post my message more broadly, but I've apparently failed.)</p>",
        "id": 511103702,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1744185918
    },
    {
        "content": "<p>I imagine you could have a link to a specific commit + file + line number on github.</p>",
        "id": 511185939,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1744208092
    },
    {
        "content": "<p>OK. But what would the BibTeX entry even look like?</p>",
        "id": 511186989,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1744208344
    },
    {
        "content": "<p>Isn't there an <code>@online</code> bibtex type, where you give the name of the repo, and a link to github?</p>",
        "id": 511202221,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1744212104
    },
    {
        "content": "<p>Concerning authors: that's a question for <span class=\"user-mention\" data-user-id=\"252920\">@Alex Kontorovich</span> and <span class=\"user-mention\" data-user-id=\"657719\">@Terence Tao</span>, I suppose.</p>",
        "id": 511202321,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1744212125
    },
    {
        "content": "<p>But I could also imagine just linking to the repo in a footnote, without a bibtex entry... <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span></p>",
        "id": 511202498,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1744212178
    },
    {
        "content": "<p>There is also the URL at <a href=\"https://alexkontorovich.github.io/PrimeNumberTheoremAnd/web/sect0002.html#first_fourier\">https://alexkontorovich.github.io/PrimeNumberTheoremAnd/web/sect0002.html#first_fourier</a> , though this is not frozen in time in contrasto the github commit.  </p>\n<p>I don't think we've discussed authorship yet for the project (it's not clear whether there will be a traditionally published product from this project), so for now I guess it is just the \"Prime Number Theorem And...\" project, with no authors listed.  (But this is a discussion we should have, and incorporate into the documentation for the project, at some point.)</p>",
        "id": 511205584,
        "sender_full_name": "Terence Tao",
        "timestamp": 1744212942
    },
    {
        "content": "<p>All right, but how does one cite \"Prime Number Theorem And...\"? It would help if there were a standard BibTeX entry.</p>",
        "id": 513221375,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1745111028
    },
    {
        "content": "<p>Fair enough.  I just added a CITATION.cff file to my pull request, so when it is merged, the github repository should then magically acquire a \"Cite this repository\" link somewhere.</p>",
        "id": 513228866,
        "sender_full_name": "Terence Tao",
        "timestamp": 1745117325
    },
    {
        "content": "<p>... and, the link is now up.<br>\n<a href=\"/user_uploads/3121/6gdxeBV0XSFff0oBlv9fg2Gv/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/6gdxeBV0XSFff0oBlv9fg2Gv/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"784x855\" src=\"/user_uploads/thumbnail/3121/6gdxeBV0XSFff0oBlv9fg2Gv/image.png/840x560.webp\"></a></div>",
        "id": 513288286,
        "sender_full_name": "Terence Tao",
        "timestamp": 1745166699
    },
    {
        "content": "<p>Thanks!</p>\n<p>I see that many people are active - I suppose the project will eventually be formalized as something multi-authored rather than two-authored.</p>",
        "id": 513288785,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1745167097
    },
    {
        "content": "<p>Yeah, we need to discuss that properly at some point.  In other projects (e.g., Equational Theories) we have set up a document for each contributor to record their contributions; <a href=\"https://github.com/teorth/equational_theories/blob/main/paper/contributions.md\">here is the one</a> for Equational theories (still under construction).  I would be happy to see something similar set up here, but it hasn't been discussed yet.  (For many of these projects we are basically laying the tracks simultaneously with the train moving forward, metaphorically speaking.)</p>",
        "id": 513288962,
        "sender_full_name": "Terence Tao",
        "timestamp": 1745167250
    },
    {
        "content": "<p>Very well. By the way, would people be interested in having an explicit fork (or perhaps that should be a different project, hosted elsewhere)?</p>",
        "id": 513289084,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1745167355
    },
    {
        "content": "<p>I'll put something in the arXiv (in collaboration with Andrés Chirre) in the next few weeks - it uses a mixture of Tauberian and complex techniques.</p>",
        "id": 513289137,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1745167409
    },
    {
        "content": "<p>I'd think formalizing explicit results is of particular interest in part because explicit results are a subarea of analytic number theory that sometimes has trust issues.</p>",
        "id": 513289215,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1745167472
    },
    {
        "content": "<p>I think explicit estimates are an excellent use case for formalization.  Over at the Carleson project, they are finding that it is easier to formalize harmonic analysis estimates with explicit constants.  I think we are very liberal with the \"+\" in \"PrimeNumberTheorem+\": if it looks like there is a critical mass of people interested in formalizing explicit number theory estimates, we could definitely add that into this project.</p>",
        "id": 513296058,
        "sender_full_name": "Terence Tao",
        "timestamp": 1745173951
    },
    {
        "content": "<p>And of course the blueprint structure would encourage us to keep everything as clean as possible.</p>",
        "id": 513301515,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1745178572
    }
]