[
    {
        "content": "<p>I'm working on the final lemma of mobius, and having problems with us using Finset.range for some definitions, while using Finset.Ioc for others. This adds 0 in the index of some summations and then the sqrt in M has a divide by 0. How do we want to deal with this? Or maybe I'm misunderstanding some definition</p>",
        "id": 568360732,
        "sender_full_name": "Steven Rossi",
        "timestamp": 1768541515
    },
    {
        "content": "<p>It shouldn't be a problem right? Dividing by zero is equal to zero and square root of zero is zero, and I believe the definition of <code>M</code> also forces <code>M 0</code> to be zero.</p>",
        "id": 568363560,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1768543621
    },
    {
        "content": "<p>Ah ok is that the convention in mathlib? Sounds good</p>",
        "id": 568364232,
        "sender_full_name": "Steven Rossi",
        "timestamp": 1768544135
    },
    {
        "content": "<p>Yes you can find these conventions in Mathlib: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/GroupWithZero/Basic.html#div_zero\">div_zero</a>,  <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Real/Sqrt.html#Real.sqrt_zero\">Real.sqrt_zero</a>. Also <code>M x = ∑ n ∈ Finset.Ioc 0 ⌊x⌋₊, ...</code>, so when <code>x = 0</code>,  <code>Finset.Ioc 0 ⌊x⌋₊</code> is empty, and we have <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/BigOperators/Group/Finset/Defs.html#Finset.sum_of_isEmpty\">Finset.sum_of_isEmpty</a></p>",
        "id": 568364497,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1768544344
    },
    {
        "content": "<p>It may not be possible to align all the notations to be consistent about this, but if you find that changing the range of summation in a theorem to either add or remove a zero simplifies the proof, without significantly impacting how this result might be used downstream, you are welcome to change the theorem statement to streamline the proof a little bit.</p>",
        "id": 568367515,
        "sender_full_name": "Terence Tao",
        "timestamp": 1768546098
    },
    {
        "content": "<p>Seems like the proper way to do it in mathlib would define M as an <code>ArithmeticFunction</code> but <span aria-label=\"man shrugging\" class=\"emoji emoji-1f937-200d-2642\" role=\"img\" title=\"man shrugging\">:man_shrugging:</span></p>",
        "id": 568523967,
        "sender_full_name": "Steven Rossi",
        "timestamp": 1768597698
    },
    {
        "content": "<p>The function <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">M(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> most naturally takes real values, as opposed to <code>ArithmeticFunction</code> which takes natural number values.  It's true that one has <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>M</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">⌊</mo><mi>x</mi><msub><mo stretchy=\"false\">⌋</mo><mo lspace=\"0em\" rspace=\"0em\">+</mo></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">M(x) = M(⌊x⌋₊)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mopen\">(⌊</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\"><span class=\"mclose\">⌋</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2583em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">+</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2083em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> for all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> but given that we are frequently using real number operations such as working with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mtext>√</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mi mathvariant=\"normal\">/</mi><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">M √(x/k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.05em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord\">√</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span> I'm not sure it would be all that advantageous to switch over to natural number domains.</p>",
        "id": 568529732,
        "sender_full_name": "Terence Tao",
        "timestamp": 1768600136
    },
    {
        "content": "<p>Should the mobius_lemma_2 have </p>\n<div class=\"codehilite\" data-code-language=\"-\"><pre><span></span><code>  2 * x *\n    ∑ k ∈ Finset.Ico (K + 1) (⌊x⌋₊ + 1),\n      ∫ t in Real.sqrt (x / (k + 0.5))..Real.sqrt (x / (k - 0.5)),\n        ((M t - M (Real.sqrt (x / k))) : ℝ) / t ^ 3\n</code></pre></div>\n<p>part of its definition? This varies from the blueprint</p>",
        "id": 568700515,
        "sender_full_name": "Steven Rossi",
        "timestamp": 1768778160
    },
    {
        "content": "<p>Ah, I tracked down what happened.  The <a href=\"#narrow/channel/423402-PrimeNumberTheorem.2B/topic/Let.20us.20formalize.20a.20lemma/near/567045913\">LaTeX source for this blueprint</a> contained some additional formulas that had been commented out; but I was relying on Github Copilot's autocomplete function to accelerate my conversion of this LaTeX to Lean form, and the autocomplete \"helpfully\" also formalized the commented formula without realizing that it was not to be included, and I did not review it carefully enough to catch it.  Part of the inherent risk in relying on AI tools, but I think the tradeoff of increased speed at the cost of (fixable) inaccuracy is manageable, especially since we often have a digital \"paper trail\" to identify where the errors came from.  Anyway, as you have claimed this task, feel free to change the lemma statement to align with the blueprint (and, hopefully, align also with what can actually be proven).</p>",
        "id": 568703565,
        "sender_full_name": "Terence Tao",
        "timestamp": 1768781461
    }
]