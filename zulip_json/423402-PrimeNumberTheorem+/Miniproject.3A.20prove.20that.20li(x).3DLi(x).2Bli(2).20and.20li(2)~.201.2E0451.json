[
    {
        "content": "<p>A deceptively simple miniproject has shown up as part of IEANTN, <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/758\">PNT#758</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/759\">PNT#759</a>: to show that the two logarithmic integrals <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msubsup><mo>‚à´</mo><mn>0</mn><mi>x</mi></msubsup><mfrac><mrow><mi>d</mi><mi>t</mi></mrow><mrow><mi>log</mi><mo>‚Å°</mo><mi>t</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\mathrm{li}(x) = \\int_0^x \\frac{dt}{\\log t}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3612em;vertical-align:-0.4811em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">‚à´</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8593em;\"><span style=\"top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span><span style=\"top:-3.2579em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3558em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mathnormal mtight\">t</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4811em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">L</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msubsup><mo>‚à´</mo><mn>2</mn><mi>x</mi></msubsup><mfrac><mrow><mi>d</mi><mi>t</mi></mrow><mrow><mi>log</mi><mo>‚Å°</mo><mi>t</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Li}(x) = \\int_2^x \\frac{dt}{\\log t}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Li</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3612em;vertical-align:-0.4811em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">‚à´</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8593em;\"><span style=\"top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.2579em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3558em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mathnormal mtight\">t</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4811em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> are related by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mrow><mi mathvariant=\"normal\">L</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{li}(x) = \\mathrm{Li}(x) + \\mathrm{li}(2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Li</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mclose\">)</span></span></span></span> for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>‚â•</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">x \\geq 2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚â•</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span>, and furthermore that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{li}(2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mclose\">)</span></span></span></span> (also known as the <a href=\"https://en.wikipedia.org/wiki/Ramanujan%E2%80%93Soldner_constant\">Ramanujan-Soldner constant</a> is approximately 1.0451).</p>\n<p>Looks easy, no?  But there is a major wrinkle: the integral <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>‚à´</mo><mn>0</mn><mi>x</mi></msubsup><mfrac><mrow><mi>d</mi><mi>t</mi></mrow><mrow><mi>log</mi><mo>‚Å°</mo><mi>t</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\int_0^x \\frac{dt}{\\log t}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3612em;vertical-align:-0.4811em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">‚à´</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8593em;\"><span style=\"top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span><span style=\"top:-3.2579em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3558em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mathnormal mtight\">t</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4811em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> is not absolutely integrable due to a singularity at <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">t=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>, and must be defined in a principal value sense.  Currently I am defining <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{li}(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> as the rather horrible</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">li</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">lim</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">ùìù</span><span class=\"o\">[</span><span class=\"bp\">&gt;</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">Œµ</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">‚à´</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Ioc</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Ioo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">Œµ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"n\">Œµ</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">log</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>Because of this, standard Mathlib integration lemmas do not apply, and some actual mathematical thought has to go into proving these lemmas.</p>\n<p>Probably what needs to be done is to find some alternate expression of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{li}(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> that is not a principal value integral, prove the required results for that expression, and then find some way to connect that expression to the original definition.  One possibility is to first show that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mrow><mi mathvariant=\"normal\">E</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>log</mi><mo>‚Å°</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{li}(x) = \\mathrm{Ei}(\\log x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Ei</span></span><span class=\"mopen\">(</span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">E</mi><mi mathvariant=\"normal\">i</mi></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Ei}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Ei</span></span></span></span></span> is the exponential integral function, and develop enough of the theory of the exponential integral to finish the job.  As far as I can tell this has not yet been done in Mathlib.  Anyone have any suggestions on how best to proceed here?</p>",
        "id": 569810057,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769206018
    },
    {
        "content": "<p>Why not define it as Li(x)+1.0451? Presumably you want to think about that integral near 1 as little as possible?</p>",
        "id": 569813701,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1769208259
    },
    {
        "content": "<p>Well, if the two theorems in <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/758\">PNT#758</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/759\">PNT#759</a> are proven, then effectively we do have <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mrow><mi mathvariant=\"normal\">L</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mn>1.0451</mn></mrow><annotation encoding=\"application/x-tex\">\\mathrm{li}(x) = \\mathrm{Li}(x) + 1.0451</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Li</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1.0451</span></span></span></span> so the rest of the project should proceed, except possibly in some edge cases when formalizing a statement involving <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{li}(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> that really did use the original definition of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><annotation encoding=\"application/x-tex\">\\mathrm{li}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span></span></span></span>. But I think this miniproject could be a warmup for other numerical integration tasks that we will inevitably face later.</p>\n<p>In any case I think I have a reasonable way to approach the problem.  One first proves some bounds of the form  <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>log</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>t</mi><mo>+</mo><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>t</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\log(1+t) = t + O(t^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">lo<span style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6984em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">t</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> for small <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span>, which can be used to make <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">‚à£</mi><mfrac><mn>1</mn><mrow><mi>log</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mo>+</mo><mfrac><mn>1</mn><mrow><mi>log</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>‚àí</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mi mathvariant=\"normal\">‚à£</mi><mo>‚â§</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mo stretchy=\"false\">(</mo><mn>1</mn><mo>‚àí</mo><mi>t</mi><mi mathvariant=\"normal\">/</mi><mn>2</mn><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">|\\frac{1}{\\log (1+t)} + \\frac{1}{\\log(1-t)}| \\leq \\frac{1}{2(1-t/2)^2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3651em;vertical-align:-0.52em;\"></span><span class=\"mord\">‚à£</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3651em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">‚àí</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord\">‚à£</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚â§</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3651em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">‚àí</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mtight\">/2</span><span class=\"mclose mtight\"><span class=\"mclose mtight\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7463em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> bounded for small <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span>, which is enough of a bound to allow one to replace the principal value integral with an absolutely convergent integral, e.g., replacing <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>‚à´</mo><mn>0</mn><mn>2</mn></msubsup><mfrac><mrow><mi>d</mi><mi>t</mi></mrow><mrow><mi>log</mi><mo>‚Å°</mo><mi>t</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\int_0^2 \\frac{dt}{\\log t}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4901em;vertical-align:-0.4811em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">‚à´</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.009em;\"><span style=\"top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span><span style=\"top:-3.2579em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3558em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8801em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mspace mtight\" style=\"margin-right:0.1952em;\"></span><span class=\"mord mathnormal mtight\">t</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">t</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4811em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>‚à´</mo><mn>0</mn><mn>1</mn></msubsup><mo stretchy=\"false\">(</mo><mfrac><mn>1</mn><mrow><mi>log</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mo>+</mo><mfrac><mn>1</mn><mrow><mi>log</mi><mo>‚Å°</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>‚àí</mo><mi>t</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><mo stretchy=\"false\">)</mo><mtext>¬†</mtext><mi>d</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">\\int_0^1 (\\frac{1}{\\log(1+t)} + \\frac{1}{\\log(1-t)})\\ dt</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.529em;vertical-align:-0.52em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"margin-right:0.19445em;position:relative;top:-0.0006em;\">‚à´</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.009em;\"><span style=\"top:-2.3442em;margin-left:-0.1945em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span><span style=\"top:-3.2579em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3558em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.3651em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mop mtight\"><span class=\"mtight\">l</span><span class=\"mtight\">o</span><span class=\"mtight\" style=\"margin-right:0.01389em;\">g</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\">1</span><span class=\"mbin mtight\">‚àí</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\">)</span><span class=\"mspace\">¬†</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span></span></span></span>.  This should then be numerically computable to be about <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1.0451</mn></mrow><annotation encoding=\"application/x-tex\">1.0451</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1.0451</span></span></span></span>.  I'll update the PRs soon to implement this.</p>",
        "id": 569816129,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769209574
    },
    {
        "content": "<p>added <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/764\">PNT#764</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/765\">PNT#765</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/766\">PNT#766</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/767\">PNT#767</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/768\">PNT#768</a> to execute this plan (making the previous two tasks significantly smaller in difficulty).</p>",
        "id": 569843368,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769238119
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"657719\">@Terence Tao</span> </p>\n<p>Happy to discuss here about <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/774\">the prove li(2) bounds PR</a></p>\n<p>Looking at the open issues, there's a recurring pattern, integral bounds, log bounds, numerical approximations (<a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/issues/759\">#759</a>, #<a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/issues/765\">765</a>-768, various FKS2/BKLNW-APP lemmas)</p>\n<p>LeanCert provides infrastructure for all of this: certified integration, interval arithmetic, Taylor models. One dependency, many issues. No FFI, no unsafe, no additional toolchain.</p>\n<p>What concerns should I address to make this work?</p>",
        "id": 569934856,
        "sender_full_name": "Alejandro Radisic",
        "timestamp": 1769324771
    },
    {
        "content": "<p>Thanks for the contribution!  I am not familiar with LeanCert, but it does sound like a useful set of tools for this sort of project.  But I am wondering at a technical level how adding LeanCert as an import would work.  With the setup in your current PR, a chunk of the verification of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{li}(2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mclose\">)</span></span></span></span> would not be hosted in the main PNT+ repository, but instead at the LeanCert repository, and in particular would be beyond the visibility of the blueprint structure we have here.  This makes it more difficult to maintain the code; for instance, if at some point we wish to improve the current bounds <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1.039</mn><mo>‚â§</mo><mrow><mi mathvariant=\"normal\">l</mi><mi mathvariant=\"normal\">i</mi></mrow><mo stretchy=\"false\">(</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo>‚â§</mo><mn>1.06</mn></mrow><annotation encoding=\"application/x-tex\">1.039 \\leq \\mathrm{li}(2) \\leq 1.06</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7804em;vertical-align:-0.136em;\"></span><span class=\"mord\">1.039</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚â§</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">li</span></span><span class=\"mopen\">(</span><span class=\"mord\">2</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚â§</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1.06</span></span></span></span> to something sharper, this could not be done within the current blueprint system.  (But the current bounds may be sufficient for most applications; we shall see.) </p>\n<p>Perhaps if one integrated the proof more with the current blueprint at <a href=\"https://alexkontorovich.github.io/PrimeNumberTheoremAnd/blueprint/secondary-chapter.html#a0000000037\">https://alexkontorovich.github.io/PrimeNumberTheoremAnd/blueprint/secondary-chapter.html#a0000000037</a> and went through the more usual workflows of claiming issues, and submitting PRs that modify the existing Lean files (in this case, <code>SecondaryDefinitions.lean</code>), rather than having them in separate files, some of which are hosted outside of PNT+?  The LeanCert approach differs slightly from the blueprint one so one may need to modify the blueprint accordingly if doing so.</p>\n<p>The other concern I have is whether adding LeanCert as an inport (through changing the lake manifest and lakefile) introduces any challenges with keeping the repository updated with the latest version of Mathlib, or whether it will introduce any issues for contributors who are working with local forks of the repository.  In a previous project (EquationalTheories) we eventually decided not to use any imports (such as Duper) that did not come bundled by default with the standard installation of Lean+Mathlib, in order to avoid these issues.  But I know very little about how maintainability of imports actually works, so would be interested to get some informed opinions on this.</p>",
        "id": 569966996,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769360319
    },
    {
        "content": "<p>These are fair concerns. Let me address them:</p>\n<p><strong>Blueprint integration</strong>: I can restructure the PR so the li(2) proof lives entirely in SecondaryDefinitions.lean, using LeanCert only as numerical infrastructure. Concretely, the bounds theorem would look like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">li_two_lower</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1039</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñö</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">1000</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"n\">li</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">li_eq_symmetric_integral</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">interval_integrate</span><span class=\"w\"> </span><span class=\"mi\">3000</span>\n</code></pre></div>\n<p>with the numerical integration certificate and precision parameters living in PNT+ code, fully visible in the blueprint and modifiable by the team. Tightening the bounds later would simply amount to adjusting constants or the partition count in this file.</p>\n<p>LeanCert would provide the verified numerics engine, while PNT+ would own the actual theorem and its statement.</p>\n<p><strong>Mathlib tracking</strong>: LeanCert already tracks Mathlib; I recently updated it to accommodate recent API changes and am committed to maintaining compatibility going forward. If external dependencies are still a concern, a fallback option would be to vendor only the minimal numerical components needed here (interval arithmetic and Taylor models), though I would prefer to avoid that unless necessary.</p>\n<p><strong>Workflow</strong>: I‚Äôm happy to claim the relevant issues and submit PRs that modify the existing files following the standard blueprint workflow. I can do this quickly so as not to block other claims.</p>\n<p>Would this ‚ÄúLeanCert as engine, proof in PNT+‚Äù structure be sufficient to address the maintainability concerns you raised?</p>\n<p>Disclaimer: LeanCert is a tool of my own creation.</p>",
        "id": 570100655,
        "sender_full_name": "Alejandro Radisic",
        "timestamp": 1769436331
    },
    {
        "content": "<p>Thanks, that does address most of my concerns.  The remaining issue is how adding LeanCert as an import will affect the user experience of contributors working with local versions of the repository.  If the impact on users is similar to that of a mathlib bump, this would not be a problem thanks to the ability to build mathlib from a cache, but if each user has to build all of LeanCert from scratch this might become an issue, especially if LeanCert is frequently updated.  How lightweight is this package and will there be noticeable effects on the user side of including it as an import?</p>",
        "id": 570162995,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769452347
    },
    {
        "content": "<p>Looks like leancert depends on mathlib, so we'd only be able to update mathlib when leancert has done so first, and there'd be no cache for it</p>",
        "id": 570164154,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769452742
    },
    {
        "content": "<p>Oh, so we'd have to either stop updating mathlib, or else have every user rebuild mathlib (and LeanCert) from scratch every time we bump?  Neither option sounds all that good to me.</p>",
        "id": 570164803,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769452952
    },
    {
        "content": "<p>The mathlib cache would always work in this setup I belive (so no recompiling mathlib). And if LeanCert were to adopt <a href=\"https://github.com/leanprover-community/mathlib-update-action\">https://github.com/leanprover-community/mathlib-update-action</a> (and had a small chance of breaking) then you could likely rest assured that bumping leancert to latest would bump mathlib to near latest</p>",
        "id": 570166606,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1769453556
    },
    {
        "content": "<p>Thanks Alex for the pointer! I'll adopt mathlib-update-action to keep LeanCert tracking Mathlib automatically.</p>\n<p>On build time: a clean build of LeanCert takes about 2.5 minutes on a modern machine (M4 Max, with Mathlib cached). The core modules PNT+ would use compile faster still. I can set up a cloud cache for LeanCert oleans if desired, though at 2.5 minutes it may not be necessary.</p>\n<p>Happy to proceed with the PR once these concerns are addressed</p>",
        "id": 570181509,
        "sender_full_name": "Alejandro Radisic",
        "timestamp": 1769458940
    },
    {
        "content": "<p>If mathlib bumping and cacheing works as before and the only additional overhead is 2.5 mins of build time per LeanCert update, and if one can revert back to the previous setup in case the update process encounters technical issues, then I would tentatively be willing to experiment with this.  (But if we started having multiple imports like this, these additional 2.5 mins could start adding up, given that one presumably would have to do this with each Mathlib bump...)</p>",
        "id": 570192161,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769462843
    },
    {
        "content": "<p>And also every time you switch branches across a bump, though perhaps that's not too oftern</p>",
        "id": 570193264,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1769463359
    },
    {
        "content": "<p>If LeanCert can handle all the other verified integration/summation tasks that we will likely encounter in this project, it may be a good investment in the long run.</p>",
        "id": 570193909,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769463672
    },
    {
        "content": "<p>Updated the PR with full integrability and substitution proofs, the li(2) bounds are now proven end-to-end via LeanCert's interval arithmetic</p>\n<p>I see <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/765\">PNT#765</a> - <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/767\">PNT#767</a> (log bounds) were independently proven while I was working, great to see the activity! This actually clarifies LeanCert's niche:¬†<strong>numerical integration</strong>¬†where pure calculus can't reach</p>\n<p>What's done:</p>\n<ul>\n<li><code>li2_symmetric_lower/upper</code>: 1.039 ‚â§ li(2) ‚â§ 1.06</li>\n<li><code>g_intervalIntegrable_full</code>: integrability of the symmetric form</li>\n<li><code>limit_integral_g</code>: ‚à´_Œµ^1 g ‚Üí ‚à´_0^1 g as Œµ ‚Üí 0‚Å∫</li>\n<li><code>mathlib-update-action</code>¬†adopted</li>\n</ul>\n<p>One sorry remains:¬†<code>li2_symmetric_eq_li2</code>¬†(connecting PNT+'s¬†<code>lim</code>-based¬†<code>li</code>¬†definition to the symmetric form) - this is definition compatibility, not a mathematical gap.</p>\n<p>If this works out, happy to help with similar numerical bounds elsewhere in the project</p>",
        "id": 570204680,
        "sender_full_name": "Alejandro Radisic",
        "timestamp": 1769468725
    },
    {
        "content": "<p>Thank you, Alejandro!</p>\n<p>Quick note: <code>#ISSUE_NUMBER</code> refers to a Mathlib issue number. For this project, please use the <code>PNT#ISSUE_NUMBER</code> (e.g. <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/765\">PNT#765</a>).</p>",
        "id": 570209360,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1769471425
    },
    {
        "content": "<p>(Bystander: I think LeanCert is cool, and I hope you guys will stress test it. If it works well, we can take interval arithmetic off the FRO roadmap. If it doesn't, we'll know more about what we're aiming for. Relatedly, we very much feel your pain regarding adding imports with uncached oleans, and the FRO (particularly Mac) is working hard to have a good solution to this; hopefully this quarter.)</p>",
        "id": 570212078,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769472887
    },
    {
        "content": "<p>OK, I think it's worth experimenting with this tool, so <span class=\"user-mention\" data-user-id=\"1010219\">@Alejandro Radisic</span> , if you can go ahead and refactor the contribution as indicated above, aligning with the current blueprint when it makes sense to do so, and update <code>SecondaryDefinitions.lean</code> with suitable imports to fill in the sorry in (a weaker form of) <code>li.two_approx</code> (except for <code>li2_symmetric_eq_li2</code>, which for organizational purposes should probably be placed also in <code>SecondaryDefinitions.lean</code> to make it visible to the blueprint).  The <code>Li2Bounds.lean</code> file can still be kept as a standalone import, which will hopefully stay stable and not need to be rebuilt as the rest of the project evolves (so we don't need to do any expensive numerical integration of li(2) over and over again).  The remaining sorry I can then make a fresh task for.</p>\n<p>Also, if you can use the claim system to claim the specific issues you will be filling in, that would be great (though it seems that <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/759\">PNT#759</a> has already somehow figured out that <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/774\">PNT#774</a> will be solving it.</p>",
        "id": 570212873,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769473386
    },
    {
        "content": "<p>Thanks! I'll refactor as requested</p>\n<p>Also about to finish the¬†<code>li2_symmetric_eq_li2</code>¬†proof</p>\n<p>PR coming shortly!</p>",
        "id": 570214348,
        "sender_full_name": "Alejandro Radisic",
        "timestamp": 1769474288
    },
    {
        "content": "<p>note that it does use <code>native_decide</code> AFAICT</p>",
        "id": 570215007,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1769474727
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"657719\">@Terence Tao</span> ! Refactored as requested.</p>\n<ul>\n<li>Li2Bounds.lean is now self-contained (stable, won't need rebuilds)</li>\n<li>SecondaryDefinitions.lean imports it</li>\n<li><code>li2_symmetric_eq_li2</code>¬†is now in SecondaryDefinitions (blueprint visible)</li>\n<li><code>li.two_approx_weak</code>¬†sorry is filled (bounds [1.039, 1.06])</li>\n</ul>\n<p>PR <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/774\">PNT#774</a> updated</p>",
        "id": 570216628,
        "sender_full_name": "Alejandro Radisic",
        "timestamp": 1769475916
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/423402-PrimeNumberTheorem.2B/topic/Miniproject.3A.20prove.20that.20li.28x.29.3DLi.28x.29.2Bli.282.29.20and.20li.282.29~.201.2E0451/near/570212078\">said</a>:</p>\n<blockquote>\n<p>(Bystander: I think LeanCert is cool, and I hope you guys will stress test it. If it works well, we can take interval arithmetic off the FRO roadmap. If it doesn't, we'll know more about what we're aiming for. Relatedly, we very much feel your pain regarding adding imports with uncached oleans, and the FRO (particularly Mac) is working hard to have a good solution to this; hopefully this quarter.)</p>\n</blockquote>\n<p>Oh --- LeanCert does not have a free licence, so I would update my suggestion and <em>discourage</em> use for now.</p>",
        "id": 570248344,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769498617
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>  Updated to Apache 2.0. LeanCert is now fully open source.</p>",
        "id": 570266398,
        "sender_full_name": "Alejandro Radisic",
        "timestamp": 1769505190
    },
    {
        "content": "<p>A couple thoughts on this:</p>\n<ol>\n<li>Are we OK with the use of native_decide in LeanCert?  Its probably unavoidable for large numerical integrations but the Mathlib docs say \"it is probably possible to prove <code>False</code> using <code>native_decide</code>\".</li>\n<li>Could we avoid numerical integration by relating to the exponential integral which has a Taylor series which converges rapidly.  The constant term includes Euler gamma so potentially we've just reduced the problem to estimating gamma but that might be independenly useful.</li>\n</ol>\n<p>Since <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/774\">PNT#774</a> is close to being done maybe we should take that for now but consider a Taylor series version without native_decide in the long-term.</p>",
        "id": 570616951,
        "sender_full_name": "Alastair Irving",
        "timestamp": 1769620387
    },
    {
        "content": "<ol>\n<li>For this project I think some reliance on external calculations, either through <code>native_decide</code> or simply importing a large calculation as an <code>axiom</code> is unavoidable.  The most extreme example of this I have in mind is the numerical verification of the Riemann hypothesis up to some large height <code>H</code> (e.g., <code>H = 10^18</code>), which often require massive amounts of CPU that would beyond the range of even <code>native_decide</code>.  But as long as these computations can also be verified by non-rigorous means (e.g., using numpy, pari, SAGE, etc.) I think the risk of catastrophic error is very low, especially if we use somewhat generous safety margins for the accuracy of our numerics, e.g., only estimating <code>li 2</code> to two decimal places.</li>\n<li>This could be an interesting side project.  One could even imagine setting up a competition to \"golf\" the estimation of <code>li 2</code> to a given amount of precision using as few heartbeats or CPU as possible.  And having some support in Mathlib for both the logarithmic integral and exponential integral (maybe focusing more on theoretical results such as <code>li x = Ei (log x)</code>) could be worthwhile even outside of PNT+.</li>\n</ol>",
        "id": 570629876,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769624070
    },
    {
        "content": "<p>I think that there are a bunch of people out there who would be very interested in formal numerical computations in Lean, and rather than just assuming things you might want to put questions out as challenge problems to the wider community as well. There are two levels: proof with <code>native_decide</code> and proof without, and there are definitely people out there who can do all sorts of surprising calculations in Lean who might take the bait. Many years ago I asked how far Lean was able to verify binary Goldbach (motivated at least in part by Harald's work, which needs a nontrivial input here) but this was just when Lean 4 was starting and nobody took the bait. I think the main problem at the time was that we basically had no maths library at all in Lean 4 and hence no reasonable way to prove that a number was prime other than trial division.</p>",
        "id": 570633077,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1769625117
    },
    {
        "content": "<p>This resonates with one of the reasons I built LeanCert, there's a gap between \"theoretically computable\" and \"practically verifiable\" for numerical bounds, and I wanted infrastructure to bridge it.</p>\n<p>On native_decide: LeanCert uses it in the interval arithmetic kernel for performance. The architecture separates the expression language and correctness theorems from the evaluation kernel, but practically speaking, native_decide is what makes verified numerics feasible at scale. I believe eliminating it would require manual proofs that explode in size, though I'd be curious if others see a cleaner path.</p>\n<p>If folks want to set up challenge problems around numerical verification, happy to provide LeanCert as a baseline to beat.</p>\n<p>If <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/774\">PNT#774</a> lands, happy to tackle more numerical bounds elsewhere in the project <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 570664006,
        "sender_full_name": "Alejandro Radisic",
        "timestamp": 1769635972
    },
    {
        "content": "<p>What I've heard said by experts is that large, numerically intensive computations (such as verifying RH up to 10^12, to give a height that has been reached by \"rigorous\" computation, meaning carefully implemented interval arithmetic) could and ought to be verified by means other than Lean - such as their being performed by code that has been proved to be correct (by Rocq perhaps?) or in a formalizing environment that has been optimized for rapid computation (not sure whether Metamath was mentioned as an example of the latter or the former).</p>",
        "id": 570668740,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1769637927
    },
    {
        "content": "<p>And, since Kevin mentioned it: the non-trivial computational input to ternary Goldbach is the verification of GRH up to a certain height and conductor (Platt, interval arithmetic) - I think verifying binary Goldbach up to 10^14 or 10^15 should be fairly small potatoes by now (right?) and that should suffice.</p>",
        "id": 570668964,
        "sender_full_name": "Harald Helfgott",
        "timestamp": 1769638018
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"603502\">@Harald Helfgott</span> Thanks, that perspective actually aligns very closely with what motivated LeanCert in the first place.</p>\n<p>My long-term interest is things like tightening upper bounds for the de Bruijn‚ÄìNewman constant; Polymath15 (especially the Œõ ‚â• 0 lower bound work) was a big inspiration. What struck me there was the gap between numerically rigorous computations and <em>formally checkable</em> statements that can be reused downstream.</p>\n<p>I agree that Lean itself is <em>probably</em> not the right environment to perform extremely heavy computations like RH verification at large heights. The way I‚Äôm thinking about LeanCert is more as infrastructure for <strong>certified bounds and compositional reasoning</strong>: once a numerical bound has been established by trusted interval arithmetic code (or another optimized system), Lean can be used to integrate that bound cleanly into a larger formal argument without redoing the computation.</p>\n<p>In that sense, LeanCert is not meant to replace external numerics, but to make the interface between ‚Äúrigorous computation‚Äù and ‚Äúformal proof‚Äù less brittle. Whether that interface should ultimately live in Lean, Rocq, or elsewhere is still very much an open question to me. This is just a first step in exploring what‚Äôs possible.</p>",
        "id": 570674495,
        "sender_full_name": "Alejandro Radisic",
        "timestamp": 1769640510
    }
]