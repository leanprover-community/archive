[
    {
        "content": "<p>One of the inputs needed in FKS2 / BKLNW is the upper bound <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ψ</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>≤</mo><mn>1.03883</mn><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">\\psi(x) \\leq 1.03883 x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1.03883</span><span class=\"mord mathnormal\">x</span></span></span></span> of Rosser and Schoenfeld, valid for all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">x&gt;0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>, with the constant <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1.03883</mn></mrow><annotation encoding=\"application/x-tex\">1.03883</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1.03883</span></span></span></span> being optimal (attained at <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mn>113</mn></mrow><annotation encoding=\"application/x-tex\">x=113</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">113</span></span></span></span>).  However, the proof of Rosser and Schoenfeld required proving a prime number theorem that has long since been superseded by modern prime number theorems.  Such a bound can probably be obtained more easily once we formalize the recent work of Helfgott and Chirre.  Until then, I thought it might be nice to formalize the earlier elementary bound <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ψ</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>≤</mo><mn>1.1</mn><mi>x</mi></mrow><annotation encoding=\"application/x-tex\"> \\psi(x) \\leq 1.1 x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1.1</span><span class=\"mord mathnormal\">x</span></span></span></span> of Chebyshev (as well as some lower bounds), which does not require any Riemann zeta function facts, and has a <a href=\"https://alexkontorovich.github.io/PrimeNumberTheoremAnd/blueprint/secondary-chapter.html#chebyshev-estimates-sec\">self-contained proof</a>, and which may already be good enough for some number theoretic applications.  I have thus created tasks <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/831\">PNT#831</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/832\">PNT#832</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/833\">PNT#833</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/834\">PNT#834</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/835\">PNT#835</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/836\">PNT#836</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/837\">PNT#837</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/838\">PNT#838</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/839\">PNT#839</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/840\">PNT#840</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/841\">PNT#841</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/842\">PNT#842</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/843\">PNT#843</a> <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/844\">PNT#844</a> to formalize these bounds.  Most of these are quite simple and suitable for beginners; there are a few that require some numerical computation, particularly the final theorem which will also require a numerical verification of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ψ</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>≤</mo><mn>1.1</mn><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">\\psi(x) \\leq 1.1 x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">ψ</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1.1</span><span class=\"mord mathnormal\">x</span></span></span></span> for various small <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> (I have not worked out exactly how much numerics will be needed).</p>",
        "id": 571250807,
        "sender_full_name": "Terence Tao",
        "timestamp": 1769916220
    },
    {
        "content": "<p>Aristotle disproved <code>E_nu_eq_one</code> as follows: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">E_nu_eq_one</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Icc</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">ν</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Wait, there's a mistake. We can actually prove the opposite.</span>\n<span class=\"w\">  </span><span class=\"n\">negate_state</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Proof starts here:</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Let's choose any $x$ in the interval $[1, 6]$.</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Chebyshev</span><span class=\"bp\">.</span><span class=\"n\">E</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"c1\">-- By definition of $ν$, we know that its sum is zero.</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Chebyshev</span><span class=\"bp\">.</span><span class=\"n\">ν</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">*</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Let's simplify the expression for $E(6)$.</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finsupp</span><span class=\"bp\">.</span><span class=\"n\">sum</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">*</span>\n<span class=\"w\">  </span><span class=\"n\">erw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_subset</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finsupp</span><span class=\"bp\">.</span><span class=\"n\">support_add</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finsupp</span><span class=\"bp\">.</span><span class=\"n\">support_sub</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finsupp</span><span class=\"bp\">.</span><span class=\"n\">support_single_ne_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">norm_cast</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"n\">decide</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">floor_div_natCast</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">any_goals</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">30</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- Let's simplify the expression for $E(6)$ and show it is not equal to 1.</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finsupp</span><span class=\"bp\">.</span><span class=\"n\">single_apply</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">*;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">*</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">contrapose!</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"n\">decide</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finsupp</span><span class=\"bp\">.</span><span class=\"n\">single_apply</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_apply'</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">aesop</span>\n</code></pre></div>",
        "id": 571501440,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1770057490
    },
    {
        "content": "<p>Ah, right, it should be <code>Set.Ico 1 6</code> rather than <code>Set.Icc 1 6</code>, but it looks like this has already been fixed in the most recent version.</p>",
        "id": 571503516,
        "sender_full_name": "Terence Tao",
        "timestamp": 1770058240
    },
    {
        "content": "<p><a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/870\">Here</a> is a PR for <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/841\">PNT#841</a> and <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/842\">PNT#842</a></p>",
        "id": 571661031,
        "sender_full_name": "Aayush Rajasekaran",
        "timestamp": 1770125305
    },
    {
        "content": "<p>There isn't an issue for psi_num, proving the bound for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>≤</mo><mn>30</mn></mrow><annotation encoding=\"application/x-tex\">x\\le 30</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">30</span></span></span></span>.  I have most of a very ugly proof and will hopefully make a PR later.</p>",
        "id": 572393665,
        "sender_full_name": "Alastair Irving",
        "timestamp": 1770388870
    },
    {
        "content": "<p>I'll be interested to see how Lean handles these sorts of tedious small numerical checks that involve just enough floating point arithmetic to not be able to be delegated to <code>decide</code>.</p>",
        "id": 572416741,
        "sender_full_name": "Terence Tao",
        "timestamp": 1770394876
    },
    {
        "content": "<p>psi_num is proved in <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/892\">PNT#892</a>.  It's quite messy.  Even worse than the numerics is the fact that I had to manually evaluate each <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Λ</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\Lambda n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Λ</span><span class=\"mord mathnormal\">n</span></span></span></span> depending on if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> is prime, prime power or not.  Any simplification to that would be great, maybe we need a simproc to do this.  The numerics are also a little painful, a tactic that can prove estimates on log/exp by working out how many terms of the taylor series we need would be helpful.</p>",
        "id": 572455851,
        "sender_full_name": "Alastair Irving",
        "timestamp": 1770408473
    },
    {
        "content": "<p>Following up on this thread, <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/1007\">PNT#1007</a> proves <code>psi_upper_clean (ψ(x) ≤ 1.11x for all x &gt; 0)</code>, closing <a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/issues/844\">#844</a></p>\n<p>For <code>psi_num_2 (x ≤ 11723)</code>: LeanCert brute-forces <code>ψ(N) ≤ 1.11N</code> for all <code>N = 1..11723</code> directly, no sparse checkpoint ladder needed. <code>checkAllPsiLeMulWith</code> is an O(N) incremental accumulator, walks each natural number, adds a computable von Mangoldt upper bound via interval arithmetic on <code>log(p)</code>, checks the running sum stays below <code>1.11·N</code>. A bridge theorem proves once that if the loop returns true, each individual bound holds. <code>native_decide</code> runs it in ~20-30 seconds.</p>\n<p>For <code>psi_upper_clean</code>: strong induction on <code>⌊x⌋</code>, using <code>psi_num_2</code> as base case and <code>psi_diff_upper</code> for the inductive step. The log bound <code>(5 log y − 5 ≤ 0.0037y for y &gt; 11723)</code> is closed by <code>interval_decide</code>.</p>",
        "id": 574385396,
        "sender_full_name": "Alejandro Radisic",
        "timestamp": 1771362572
    }
]