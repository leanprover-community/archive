[
    {
        "content": "<p>In case anyone is interested, for a course I am teaching I've written some sort of a real numbers game, you can find it <a href=\"https://github.com/riccardobrasca/Numbers\">here</a>. It is based (I mean shamelessly copied) on <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>  <a href=\"https://github.com/ImperialCollegeLondon/IUM/\">repo</a>, where he defines the integers and the rationals. I also define the reals, up to the proof that they're a complete ordered archimedean field. Some comments:</p>\n<ul>\n<li>I have completely sorry free fies (not in the repo, but just ask me if you want.</li>\n<li>compared to Kevin's work, MyRat is Based on MyInt, and MyReal is based on MyRat.</li>\n<li>I didn't do MyNat, but I guess it's doable.</li>\n<li>I use heavy tactics, but mathlib's integers and rations don't appear explicitly.</li>\n<li>completeness is Cauchy completeness, with everything defined by hand (there is no topology/metric theory, just the absolute value that exists because R is a bla bla ordered field).</li>\n</ul>\n<p>Overall it was pretty fun, and <code>linarith</code>, <code>grw</code> and <code>grind</code> really helped.</p>",
        "id": 527701430,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1751984090
    },
    {
        "content": "<p>We might need a p-adic numbers game soon! <span aria-label=\"melt\" class=\"emoji emoji-1fae0\" role=\"img\" title=\"melt\">:melt:</span></p>",
        "id": 527702255,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751984288
    },
    {
        "content": "<p>This is indeed the next subject of the course, but it's only on the blackboard</p>",
        "id": 527702434,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1751984334
    },
    {
        "content": "<p>Wow, you made MyRat from MyInt and MyReal from MyRat? I've always been scared to do that -- I made MyNat, and then MyInt from Nat, and then MyRat from Int, so I always had access to things like omega. Maybe grind is better?</p>\n<p>A heads-up: I have a student this summer who might work on a different kind of real number game -- start with the reals presented axiomatically and develop the theory from there. It was suggested a while ago on this Zulip that that might be an interesting game, and it's something I've not tried before.</p>",
        "id": 527718151,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751988209
    },
    {
        "content": "<p>Yes, <code>grind</code> immediately did the annoying things where you used <code>nlinarith</code> or <code>polyrith</code> or something. And <code>grw</code> for inequalities is <em>really</em> helpful</p>",
        "id": 527718468,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1751988299
    },
    {
        "content": "<p>The students already played the NNG, so I didn't do <code>MyNat</code>, but I will surely try.</p>",
        "id": 527718705,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1751988365
    },
    {
        "content": "<p>Fun fact: the way NNG was originally designed was this. I first searched for (Lean 3) classes that nat was an instance of, e.g. <code>ordered_semiring</code> or whatever, and then tried to prove all the axioms for all those classes.</p>",
        "id": 527719499,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751988597
    },
    {
        "content": "<p>Just to give an idea, here is the proof that the product of two rational Cauchy sequence is Cauchy (here Cauchy means rational <code>ε</code>, the reals don't exist yet). You should be able to guess the used results by their names. The proof is <em>really</em> close to the pen and paper proof.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">IsCauchy</span><span class=\"bp\">.</span><span class=\"n\">mul</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">MyRat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCauchy</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCauchy</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCauchy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"bp\">.</span><span class=\"n\">bounded</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">A</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hApos</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hA</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"bp\">.</span><span class=\"n\">bounded</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">B</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hBpos</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hB</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">ε</span><span class=\"w\"> </span><span class=\"n\">hε</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ε</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">B</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">div_pos</span><span class=\"w\"> </span><span class=\"n\">hε</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">N</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HN</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ε</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">A</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">div_pos</span><span class=\"w\"> </span><span class=\"n\">hε</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">M</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HM</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"n\">M</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"n\">hq</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">       </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring_nf</span>\n<span class=\"w\">       </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">abs_add</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">       </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">abs_mul</span><span class=\"o\">]</span>\n<span class=\"w\">       </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ε</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">A</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ε</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">B</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hA</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hB</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HN</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"o\">),</span>\n<span class=\"w\">                                              </span><span class=\"n\">HM</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"o\">)]</span>\n<span class=\"w\">       </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ε</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">field_simp</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 527720962,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1751989068
    },
    {
        "content": "<p>Note that <code>div_pos</code> is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=div_pos#doc\">docs#div_pos</a>, I didn't prove it.</p>",
        "id": 527722196,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1751989429
    },
    {
        "content": "<p>I have a versione with <code>MyNat --&gt; MyInt --&gt; MyRat --&gt; MyReal</code>. It's really not such a pain, I am pleasantly surprised.</p>",
        "id": 528377670,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1752253390
    },
    {
        "content": "<p>Wow! Nice!</p>",
        "id": 528389527,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1752258919
    },
    {
        "content": "<p>Looking forward to MyPadic and MyComplex (and of course. MyPadicComplex, which just landed in mathlib!)</p>",
        "id": 528389608,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1752258958
    },
    {
        "content": "<p>Then <code>MyAdeles</code>, right?</p>",
        "id": 528772799,
        "sender_full_name": "David Michael Roberts",
        "timestamp": 1752549775
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/Real.20Numbers.20game/near/527718151\">said</a>:</p>\n<blockquote>\n<p>A heads-up: I have a student this summer who might work on a different kind of real number game -- start with the reals presented axiomatically and develop the theory from there. It was suggested a while ago on this Zulip that that might be an interesting game, and it's something I've not tried before.</p>\n</blockquote>\n<p>I have a student doing that for his Degree Thesis (not in the form of a game: the idea is to go from the definition of linearlyorderedfield with the axiom of supremum to prove that any two such fields are isomorphic).</p>",
        "id": 528820405,
        "sender_full_name": "Miguel Marco",
        "timestamp": 1752573022
    },
    {
        "content": "<p>That's a nice project! We have the result in mathlib but probably the proof is unreadable :-)</p>",
        "id": 528838151,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1752578970
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/Real.20Numbers.20game/near/528838151\">said</a>:</p>\n<blockquote>\n<p>That's a nice project! We have the result in mathlib but probably the proof is unreadable :-)</p>\n</blockquote>\n<p>Where exactly is it?</p>",
        "id": 529073528,
        "sender_full_name": "Miguel Marco",
        "timestamp": 1752676201
    },
    {
        "content": "<p>I'm not at a computer this week but if you look at the blog post about checking the scholze project then it's mentioned there</p>",
        "id": 529079698,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1752677902
    },
    {
        "content": "<p>It is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearOrderedField.inducedOrderRingIso#doc\">docs#LinearOrderedField.inducedOrderRingIso</a></p>",
        "id": 529081862,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1752678471
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"130384\">@Riccardo Brasca</span>! Thanks for making the (Real) Numbers game, I had a lot of fun and learned a lot! I have a couple of feedback points if you're intetested:</p>\n<ul>\n<li>In Real.lean working with the coercions (MyRat.i and k) was quite painful and I wondered if it could have been better to build some <code>norm_num</code> lemmas along the way.</li>\n<li>I found the following lemmas <code>lemma k_div {a b : MyRat} : k (a / b) = (k a / k b)</code> and <code>lemma k_abs {a : MyRat} : k |a| = |k a|</code> useful in <code>section completeness</code>.</li>\n<li>I ended up rewriting many thing in <code>Filter.eventually</code> style to use lemmas such as <code>eventually.and</code> to make things easier, but feel like my solutions are inelegant because of the constant back and forth rewriting <code>eventually_atTop</code>.</li>\n</ul>\n<p>Despite these issues the game was the best Lean game I have played (at least after NNG)! Here are my current <a href=\"https://github.com/xhalo32/Numbers/tree/main/Numbers\">solutions</a> for reference.</p>",
        "id": 532896632,
        "sender_full_name": "Niklas Halonen",
        "timestamp": 1754393818
    },
    {
        "content": "<p>Thanks for the comments! I didn't want to introduce coercions, so I avoided them completely (I wanted the students to realize the these maps really exist), and similarly I didn't want to speak about filters, so I write by hand the notion of Cauchy sequence, but of course this would scale for a large library.</p>",
        "id": 532931549,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1754404849
    }
]