[
    {
        "content": "<p>Hi,<br>\nI am teaching basic logic still using Lean 3 in the moment.</p>\n<p>I like to set some exercises where the students have to translate definitions into predicate logic. E.g. something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"n\">constants</span><span class=\"w\"> </span><span class=\"n\">Male</span><span class=\"w\"> </span><span class=\"n\">Female</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"n\">Parent</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"c1\">-- Parent x y means x is a parent of y</span>\n<span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"n\">Married</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"c1\">-- Married x y means x is married to y</span>\n\n<span class=\"n\">Define</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">relations</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">People</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">predicates</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">relations</span><span class=\"w\"> </span><span class=\"n\">above</span><span class=\"o\">:</span>\n<span class=\"bp\">...</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Uncle</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">uncle</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">y</span>\n</code></pre></div>\n<p>Here a possible answer is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sibling</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Parent</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">Parent</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">y</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Uncle</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Male</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">People</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Parent</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Sibling</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">z</span>\n</code></pre></div>\n<p>I would like to automatically mark the submissions using a reasonable tactic for predicate logic. Do people have done this and what are recommendations regarding the tactic and the set up?</p>\n<p>I mean I set up one or several possible solution (in case the concept is a bit ambiguous) and then check that their solution is equivalent to at least one of the given ones.</p>\n<p>Thanks a lot,<br>\nThorsten</p>",
        "id": 477017451,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1729006703
    },
    {
        "content": "<p>Speaking for myself, I've been using Lean4 for so long now, that I won't really be able to help with Lean3 questions.</p>",
        "id": 477018675,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729007112
    },
    {
        "content": "<p>I would guess you actually need a predicate logic theorem prover for auto-grading this?</p>",
        "id": 477019422,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1729007329
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422703\">Malvin Gattinger</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/Automarking.20exercises.20with.20prover/near/477019422\">said</a>:</p>\n<blockquote>\n<p>I would guess you actually need a predicate logic theorem prover for auto-grading this?</p>\n</blockquote>\n<p>I thought there must be some tactics which are good at this?</p>",
        "id": 477027493,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1729009690
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/Automarking.20exercises.20with.20prover/near/477018675\">said</a>:</p>\n<blockquote>\n<p>Speaking for myself, I've been using Lean4 for so long now, that I won't really be able to help with Lean3 questions.</p>\n</blockquote>\n<p>Ok so what would be the Lean 4 answer?</p>",
        "id": 477031707,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1729011145
    },
    {
        "content": "<p>I would probably try to leverage <code>aesop</code> as much as possible.</p>",
        "id": 477034853,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729012250
    },
    {
        "content": "<p>I think <code>aesop</code> will not be too successful with this. I think <code>duper</code> is likely the answer, but I don't know enough to provide guidance.</p>",
        "id": 477053369,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1729018967
    },
    {
        "content": "<p>CC: <span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span></p>",
        "id": 477077986,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1729029787
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/Automarking.20exercises.20with.20prover/near/477077986\">said</a>:</p>\n<blockquote>\n<p>CC: <span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span></p>\n</blockquote>\n<p>I was wondering if the cadical integration can do this</p>",
        "id": 477078045,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1729029825
    },
    {
        "content": "<p>You also mentioned being able to call cvc5</p>",
        "id": 477078074,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1729029840
    },
    {
        "content": "<p>I can't do that but I know the CVC5 people have some way</p>",
        "id": 477078161,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1729029870
    },
    {
        "content": "<p>And no LeanSAT doesn't deal with quantifiers right now.</p>",
        "id": 477078326,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1729029953
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/Automarking.20exercises.20with.20prover/near/477053369\">said</a>:</p>\n<blockquote>\n<p>I think <code>aesop</code> will not be too successful with this. I think <code>duper</code> is likely the answer, but I don't know enough to provide guidance.</p>\n</blockquote>\n<p>Given that it's about quantifier instantiation that is exactly what duper should be good at yes. Superposition solvers such as duper are skillful at taking a bunch of quantified theorems and plugging them together in a clever way <span aria-label=\"tm\" class=\"emoji emoji-2122\" role=\"img\" title=\"tm\">:tm:</span>. If that is the kind of automation you are looking for use duper.</p>",
        "id": 477078498,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1729030044
    },
    {
        "content": "<p>CVC5 would also likely have some success with this see <a href=\"https://github.com/ufmg-smite/lean-smt\">https://github.com/ufmg-smite/lean-smt</a></p>",
        "id": 477078819,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1729030213
    },
    {
        "content": "<p>Ok coming back to Lean 3 : is there no tactic for predicate logic for Lean 3 which could prove some simple equivalences?</p>",
        "id": 477171944,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1729071741
    },
    {
        "content": "<p>I think <code>tauto</code> would do some things? Lean 3 is a dead language though.</p>",
        "id": 477173860,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729072351
    },
    {
        "content": "<p>I think we even have difficulties setting up projects without docker images for lean 3</p>",
        "id": 477185487,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1729076312
    },
    {
        "content": "<p>Something about brew not seeing archived GitHub repositories</p>",
        "id": 477185599,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1729076344
    },
    {
        "content": "<p>Yes, the last time I tried to make a Lean 3 project work I had all sorts of problems :-/ (which I whinged about here and which might have been fixed in the mean time)</p>",
        "id": 477187157,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729076817
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"271218\">Thorsten Altenkirch</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/Automarking.20exercises.20with.20prover/near/477171944\">said</a>:</p>\n<blockquote>\n<p>Ok coming back to Lean 3 </p>\n</blockquote>\n<p>We insist: coming back to Lean 3 is a really really bad idea.</p>",
        "id": 477627489,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1729248346
    },
    {
        "content": "<p>Lean 4 can do anything Lean 3 could - and much more.<br>\nI would also consider the consequences of imprinting the students' habits with the details of a language that's no longer supported by the developers nor by the community.</p>",
        "id": 477669090,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1729261910
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/Automarking.20exercises.20with.20prover/near/477627489\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"271218\">Thorsten Altenkirch</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/Automarking.20exercises.20with.20prover/near/477171944\">said</a>:</p>\n<blockquote>\n<p>Ok coming back to Lean 3 </p>\n</blockquote>\n<p>We insist: coming back to Lean 3 is a really really bad idea.</p>\n</blockquote>\n<p>I didn't ask for this and I have good reasons to stick to lean 3.</p>",
        "id": 477806542,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1729344381
    },
    {
        "content": "<p>My module is an introduction to logic for 400 undergraduates. The main point is that they get the idea of logic using a proof assistants. Wether it is Coq, Lean3 or Lean4 is completely irrelevant!</p>",
        "id": 477806615,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1729344450
    },
    {
        "content": "<p>I'm not so sure that this is a good argument. If it's a language which is becoming harder and harder to actually even <em>install</em> and has no support then this is surely an argument against teaching it.</p>",
        "id": 477822135,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729356644
    },
    {
        "content": "<p>As I say, the last time I tried to download a Lean 3 project it simply didn't work.</p>",
        "id": 477822159,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729356670
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"271218\">@Thorsten Altenkirch</span>  : This insistence might be annoying. After all,  in CS it is not unusual to just pick a tool, however \"outdated\", that fits a pedagogical purpose.</p>\n<p>But we are very keen to avoid the fiasco that python had with python2 vs python3.</p>",
        "id": 478160432,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1729549256
    },
    {
        "content": "<p>I assume the good reasons are some combination of time invested in:</p>\n<ol>\n<li>Library code to provide students</li>\n<li>Written code in handouts / slides</li>\n<li>Tools for automarking</li>\n</ol>\n<p>If the bulk of the friction is in 1, then mathport can still do a large portion of the work for you, though mathport itself will become increasingly hard to run over time.</p>",
        "id": 478163205,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729550454
    },
    {
        "content": "<p>Unfortunately mathport can't easily modify / reprint lecture handouts / slides!</p>",
        "id": 478163267,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729550477
    },
    {
        "content": "<p>How about super? <a href=\"https://github.com/leanprover/super\">https://github.com/leanprover/super</a></p>",
        "id": 479699867,
        "sender_full_name": "Alexander Bentkamp",
        "timestamp": 1730299889
    }
]