[
    {
        "content": "<p>I would like to make a game about finishing tactics, optimally in lean4game.</p>\n<p>A simple game loop could be:</p>\n<ul>\n<li>Display goal</li>\n<li>Player picks finishing tactic</li>\n<li>Give or take points</li>\n</ul>\n<p>This is a sketch of the game loop: <a href=\"https://oli.show/final-move/\">https://oli.show/final-move/</a>.</p>\n<p>Is implementing this loop possible in lean4game?</p>\n<p>Or maybe a simpler version:<br>\nCould lean4game allow only one attempt for each level?</p>",
        "id": 501165051,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1740163213
    },
    {
        "content": "<p>Very interesting idea! Are the levels automatically generated from existing proofs? My issue is that the states are not as readable as I would like them to be.</p>",
        "id": 501248682,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1740218661
    },
    {
        "content": "<p>Yes, in the sketch, the levels are extracted from mathlib 4.15 a priori and then randomly selected at runtime. </p>\n<p>I agree that the visualization is quite basic, just a syntax-highlighted goal string for now.</p>",
        "id": 501253599,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1740222612
    },
    {
        "content": "<p>I find it hard to figure out if I succeeded or failed. I click and then something flashes up quickly and then disappears. I guess I succeeded iff the puzzle changes? But that's not very intuitive (in theory I could get things wrong and be asked another question anyway). Can it be clearer whether I got it right or wrong?</p>",
        "id": 501269254,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740232384
    },
    {
        "content": "<p>But the concept is brilliant!</p>",
        "id": 501269353,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740232449
    },
    {
        "content": "<p>If the goal is displayed as 2 &gt; 0 then I try <code>norm_num</code> and it fails :-( Maybe these are weird 2's and 0's? Can you make it use verso so I can see the types? :-)</p>",
        "id": 501269437,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740232546
    },
    {
        "content": "<p>(I sometimes feel cheated because I can see the goal and if the terms in it were of the type I'm guessing then a tactic will work, and I try the tactic and it fails, so I got it wrong because of information which was withheld from me)</p>",
        "id": 501269573,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740232647
    },
    {
        "content": "<p>I agree, the notification of success/fail is too short. Also in this sketch there is a bug, if you click too quickly, it doesn't show the notification at all.</p>\n<p>You are correct, that the game as it is now, is not correct. Just to test I extracted the goals and the tactic used to close it. But often multiple tactics would work, not only the one used in mathlib. So you are definitely being cheated.</p>\n<p>If it is possible in lean4game or lean in general, then this would be solved by actually closing the goal. If stays as this version, then I would have to check every tactic at every goal properly. This would also open an interesting option for gamification: Different \"prices\" for use of tactics. Omega is more expensive rfl...</p>",
        "id": 501270700,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1740233590
    },
    {
        "content": "<p>Well I'm certainly learning new things! Which tactic solves</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">⨳</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">♯</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">⨳</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">⨳</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">♯</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">⨳</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>\n<p>I wonder!</p>",
        "id": 501283592,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740243583
    },
    {
        "content": "<p><code>ac_rfl</code>?</p>",
        "id": 501289156,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1740247971
    },
    {
        "content": "<p>I think you need <code>ac_rotfl</code> for inequalities <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 501310028,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1740264975
    },
    {
        "content": "<p>I made some progress on this project, there is a new version of the game available under:</p>\n<p><a href=\"https://oli.show/final-move\">https://oli.show/final-move</a></p>\n<p>If you see an error, try opening the page in incognito mode to do a full refresh.</p>\n<p>Key changes:</p>\n<ul>\n<li>The game is now fair, I have brute-forced all 16 tactics at all goals.</li>\n<li>There is now a link to the source in mathlib.</li>\n</ul>\n<p>Next up:</p>\n<ul>\n<li>Improved visuals: Game in general, proof state, tooltips, better notifications, ...</li>\n<li>Mobile-friendly design.</li>\n<li>Balancing and some kind of win condition.</li>\n</ul>\n<p>For those interested, here are some details on brute-forcing the tactics:</p>\n<div class=\"codehilite\" data-code-language=\"log\"><pre><span></span><code>Mathlib: v4.18.0-rc1\n\nChecked 5754 goals in 1265 files with 16 tactics: 86295 checks\n\nTactic           | Solved | Uniquely solved by this tactic\naesop            | 2558   | 382\nsimp             | 1210   | 34\nlinarith         | 1137   | 169\ntauto            | 1104   | 67\nnorm_num         | 913    | 34\nring             | 893    | 306\nomega            | 786    | 294\ncongr            | 648    | 46\ninfer_instance   | 626    | 443\npositivity       | 551    | 257\nabel             | 430    | 186\ngcongr           | 360    | 161\ndecide           | 253    | 80\nassumption       | 240    | 10\nfun_prop         | 237    | 224\ncontradiction    | 177    | 23\nTOTAL            | 12123  | 2716\n</code></pre></div>\n<p>This program is based on the LSP (leanclient, I used this project as a real-world test case) and runs in about 8.5h on my machine.</p>\n<p>Any feedback is welcome!</p>",
        "id": 507733546,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1742816580
    },
    {
        "content": "<p>Those brute force statistics are fascinating—thanks for sharing! The “endgame game” also looks great.</p>\n<p>Would you be willing to share the brute forcing program, or the output of it (say where the lemma/ tactic combinations are listed)? I’m working on a project that involves gathering examples demonstrating the “unique” capabilities of various tactics (see thread <a class=\"stream-topic\" data-stream-id=\"113489\" href=\"/#narrow/channel/113489-new-members/topic/Examples.20highlighting.20.22unique.22.20capabilities.20of.20tactics/with/500955110\">#new members &gt; Examples highlighting \"unique\" capabilities of tactics</a>).</p>\n<p>I’m currently missing two specific test cases that, based on your brute force approach, you seem to have uncovered. I’d find these especially interesting to examine:</p>\n<ul>\n<li>Test cases uniquely solved by <code>congr</code>.</li>\n<li>Test cases uniquely solved by <code>abel</code>.</li>\n</ul>\n<p>I’m also missing unique test cases for a few other tactics, but I suspect these might not exist because some tactics are strict subsets of others with regard to capabilities. In particular:</p>\n<ul>\n<li>I don't think it is possible to create a (zero-argument) <code>simp</code> test case that can’t be solved by <code>simp_all</code>.</li>\n<li>I don't think it is possible to create a <code>linarith</code> test case that can’t be solved by <code>nlinarith</code>.</li>\n<li>I don't think it is possible to create a <code>assumption</code> or <code>contradiction</code> test case that can’t be solved by <code>trivial</code>.</li>\n</ul>",
        "id": 507962622,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742893179
    },
    {
        "content": "<p>Indeed <code>trivial</code> is just a wrapper that tries a bunch of other finishing tactics, including <code>contradiction</code> and <code>assumption</code></p>",
        "id": 507969295,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1742894870
    },
    {
        "content": "<p>Yes, <code>simp</code>, <code>assumption</code>, <code>rfl</code>, <code>contradiction</code>, <code>decide</code>, <code>apply True.intro</code>, and <code>apply And.intro &lt;;&gt; trivial</code> to be precise.</p>",
        "id": 507976646,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742896825
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"683979\">Isak Colboubrani</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/Game.20about.20finishing.20tactics/near/507962622\">said</a>:</p>\n<blockquote>\n<ul>\n<li>I don't think it is possible to create a (zero-argument) <code>simp</code> test case that can’t be solved by <code>simp_all</code>.</li>\n</ul>\n</blockquote>\n<p>You can \"poison\" <code>simp_all</code> like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">→*</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hxy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">success_if_fail_with_msg</span>\n<span class=\"s2\">\"tactic 'simp' failed, nested error:</span>\n<span class=\"s2\">maximum recursion depth has been reached</span>\n<span class=\"s2\">use `set_option maxRecDepth &lt;num&gt;` to increase limit</span>\n<span class=\"s2\">use `set_option diagnostics true` to get diagnostic information\"</span>\n<span class=\"w\">    </span><span class=\"n\">simp_all</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 508051844,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742915496
    },
    {
        "content": "<p>You can similarly poison <code>trivial</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hirrel</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">fib</span><span class=\"w\"> </span><span class=\"mi\">300000</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hxy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span>\n<span class=\"cm\">    maximum recursion depth has been reached</span>\n<span class=\"cm\">    use `set_option maxRecDepth &lt;num&gt;` to increase limit</span>\n<span class=\"cm\">    use `set_option diagnostics true` to get diagnostic information</span>\n<span class=\"cm\">  -/</span>\n<span class=\"w\">  </span><span class=\"c1\">-- trivial</span>\n<span class=\"w\">  </span><span class=\"n\">assumption</span>\n</code></pre></div>",
        "id": 508055348,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742916264
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"683979\">Isak Colboubrani</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/Game.20about.20finishing.20tactics/near/507962622\">said</a>:</p>\n<blockquote>\n<p>Would you be willing to share the brute forcing program, or the output of it (say where the lemma/ tactic combinations are listed)?</p>\n</blockquote>\n<p>Sure, I have just made the <a href=\"https://github.com/oOo0oOo/final-move\">repo</a> public but I won't find time soon to clean it up. Specially the data extraction part is still a bit of a battlefield.<br>\nAlso this program could most likely be sped up massively by attempting a tactic at all locations in a file at once.</p>",
        "id": 508065590,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1742918678
    },
    {
        "content": "<p>The output <a href=\"https://github.com/oOo0oOo/final-move/blob/main/final-move/static/data.json\">JSON</a> used in the game is somewhat of a summary, if a bit convoluted because of tiers in the game.</p>",
        "id": 508065916,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1742918762
    },
    {
        "content": "<p>I have pulled out the theorems you are interested in:<br>\n<a href=\"/user_uploads/3121/77Qm8ZhLxwbxNOcZ3O2b4nxx/unique_solves.txt\">unique_solves.txt</a></p>",
        "id": 508066079,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1742918804
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> That's a very clever trick! TIL!</p>",
        "id": 508129500,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742937517
    },
    {
        "content": "<p>The <code>simp</code> case that is not solved by <code>simp_all</code> is solved by at least <code>bound</code>, <code>simp_arith</code>, <code>simp_intro</code> and <code>norm_num</code>, so I'm afraid that test case is \"non-unique\" (unless all those tactics invoke <code>simp</code> under the hood). Same for the <code>assumption</code> case that is not solved by <code>trivial</code>: it is solved by at least <code>aesop</code> making it non-unique.</p>",
        "id": 508129630,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742937577
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"802311\">@Oliver Dressler</span> Thanks a lot for sharing both the code and the output!</p>",
        "id": 508131812,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742938448
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"802311\">@Oliver Dressler</span> I tried to extract one of the goals that is marked as uniquely solvable by <code>congr</code>, and while it is not solved by <code>gcongr</code> (which is cool) it does appear to be solvable by <code>aesop</code> (which is one of the tactics you're testing with as I understand it). Could it be that I'm failing to reproduce the goal exactly? I used <code>extract_goal</code>.</p>\n<p><a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> for the attempt at reproducing the state at <a href=\"https://github.com/leanprover-community/mathlib4/blob/db4c8abb9243cf1b6c77c8e544c7c851495af16a/Mathlib/Logic/Function/Basic.lean#L645\">https://github.com/leanprover-community/mathlib4/blob/db4c8abb9243cf1b6c77c8e544c7c851495af16a/Mathlib/Logic/Function/Basic.lean#L645</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">extend'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">↦</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">extend'</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">e'</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">e'</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">extend'</span>\n<span class=\"w\">  </span><span class=\"c1\">-- congr -- works (as expected)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- gcongr -- does not work (as expected)</span>\n<span class=\"w\">  </span><span class=\"n\">aesop</span><span class=\"w\"> </span><span class=\"c1\">-- works (not expected)</span>\n</code></pre></div>",
        "id": 508132842,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742938844
    },
    {
        "content": "<p>I think I managed to extract one of the goals that is marked as uniquely solvable by <code>abel</code>.</p>\n<p>Here is the <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrderedRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">FloorRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">fract</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">fract</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">fract</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">  </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">fract</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">fract</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">fract</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">fract</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">fract</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">abel</span>\n<span class=\"w\">  </span><span class=\"c1\">-- noncomm_ring -- works too (but not tested by script)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- module -- works too (but not tested by script)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ring -- does not work (tested by script)</span>\n</code></pre></div>",
        "id": 508136044,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1742940128
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"683979\">Isak Colboubrani</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/Game.20about.20finishing.20tactics/near/508132842\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"802311\">Oliver Dressler</span> I tried to extract one of the goals that is marked as uniquely solvable by <code>congr</code>, and while it is not solved by <code>gcongr</code> (which is cool) it does appear to be solvable by <code>aesop</code> (which is one of the tactics you're testing with as I understand it). Could it be that I'm failing to reproduce the goal exactly? I used <code>extract_goal</code>.</p>\n</blockquote>\n<p>No, this is on me. It is missing imports --&gt; \"unknown tactic\" --&gt; picked up as invalid tactic by the script.<br>\nThis means lots of false negatives in the dataset. </p>\n<p>Does anyone know of a good way to insert all necessary imports to run these 16 tactics into 1200 files in mathlib without manually fixing circular imports?</p>",
        "id": 508183918,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1742967153
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"802311\">@Oliver Dressler</span> Have you been able to resolve this issue? If you fix your script, I'm really excited to review the updated results—especially those related to \"Uniquely solved by this tactic\".</p>",
        "id": 511005734,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1744138568
    }
]