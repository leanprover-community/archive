[
    {
        "content": "<p>Where can I find the motivation for \"proof irrelevant\" and how is this implemented? Maybe illustrated by a minimal example? I mean, I understand the difference between def and theorem but why is this difference necessary and in the implementation how are the terms distinguished?</p>",
        "id": 454309605,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722003815
    },
    {
        "content": "<p><a href=\"https://coq.inria.fr/doc/V8.18.0/refman/proofs/writing-proofs/equality.html#coq:cmd.Opaque\">https://coq.inria.fr/doc/V8.18.0/refman/proofs/writing-proofs/equality.html#coq:cmd.Opaque</a></p>\n<p>What is the motivation for having opaque and transparent? Maybe proof irrelevance is a feature not a consequence. If so, what is the importance of proof irrelevance?</p>",
        "id": 454312586,
        "sender_full_name": "Alexandre Rademaker",
        "timestamp": 1722004706
    },
    {
        "content": "<p>I think hitchhikers guide to logical verification by Blanchette et al explains it well</p>",
        "id": 454314831,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722005177
    },
    {
        "content": "<p>Link : <a href=\"https://github.com/blanchette/logical_verification_2023\">https://github.com/blanchette/logical_verification_2023</a></p>",
        "id": 454315307,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722005325
    },
    {
        "content": "<p>Chapter 12, section titled \"peculiarities of Prop\"</p>",
        "id": 454315355,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722005344
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/proof.20irrelevant/near/454314831\">said</a>:</p>\n<blockquote>\n<p>I think hitchhikers guide to logical verification by Blanchette et al explains it well</p>\n</blockquote>\n<p>yes, current version: <a href=\"https://github.com/blanchette/interactive_theorem_proving_2024\">https://github.com/blanchette/interactive_theorem_proving_2024</a></p>\n<p><span class=\"user-mention silent\" data-user-id=\"121542\">Alexandre Rademaker</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/proof.20irrelevant/near/454309605\">said</a>:</p>\n<blockquote>\n<p>Where can I find the motivation for \"proof irrelevant\" and how is this implemented? Maybe illustrated by a minimal example? I mean, I understand the difference between def and theorem but why is this difference necessary and in the implementation how are the terms distinguished?</p>\n</blockquote>\n<p>the short story is that it is convenient for a couple of things. If we know that two proofs of the same proposition are always equal we can do things like:</p>\n<ul>\n<li>erase all proofs from compiled programs. After all all proofs are equal so it cannot matter how a proof is implemented for execution.</li>\n<li>When we have for example a subtype <code>{ x : Nat // p x }</code> and two elements <code>a</code> and <code>b</code> of that type we can prove <code>a = b</code> by just showing that <code>a.val = b.val</code> and ignoring the proof argument.</li>\n</ul>\n<p>It's \"implemented\" by just being hardcoded in the type theory. Basically you have</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>So whenever you wish to prove equality between two proofs of the same proposition that always goes by <code>rfl</code>.</p>",
        "id": 454315753,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1722005468
    },
    {
        "content": "<p>Opacity is not proof irrelevance btw. Coq's <code>opaque</code>/<code>transparent</code> is closer to Lean's <code>irreducible</code>/<code>semireducible</code>. In particular, <code>opaque</code> and <code>irreducible</code> prevent a definition from being unfolded by tactics. That does not mean the definition becomes irrelevant in the sense that Shreyas and Henrik have explained.</p>",
        "id": 454316171,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1722005618
    },
    {
        "content": "<p>Question rather than answer: <del>is it logically different from propositional extensionality?</del> Or rather, is it implied by propositional extensionality?</p>",
        "id": 454327540,
        "sender_full_name": "Freddie Nash",
        "timestamp": 1722009042
    },
    {
        "content": "<p>In Lean, as stated in <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Core.html\">Init.Core</a>, proof irrelevance is <a href=\"https://github.com/leanprover/lean4/blob/702c31b8071269f0052fd1e0fb3891a079a655bd/src/Init/Core.lean#L656-L656\">built in</a>, meaning that it holds by reflexivity:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- proof irrelevance is built in</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">proof_irrel</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>If you want to think \"outside\" of Lean's logical foundations and relate proof irrelevance to propositional extensionality, you can say the following: if a proposition <code>P</code> is inhabited, then it is logically equivalent to <code>True</code>, so by <code>propext</code> it is equal to <code>True</code>; in particular, <code>P</code> satisfies proof irrelevance. Again it does not make sense to try and formalize this argument in Lean, because in Lean proof irrelevance holds by reflexivity.</p>",
        "id": 454352945,
        "sender_full_name": "Florent Schaffhauser",
        "timestamp": 1722019013
    },
    {
        "content": "<p>Thanks, that clears a few things up; yes, the inability to formalise it in Lean was throwing me rather.</p>",
        "id": 454354113,
        "sender_full_name": "Freddie Nash",
        "timestamp": 1722019678
    },
    {
        "content": "<p>Like what Flo says, proof irrelevance is built in, and particular it's built into the definitional equality algorithm. Here's the part of the algorithm in the kernel for this: <a href=\"https://github.com/leanprover/lean4/blob/master/src/kernel/type_checker.cpp#L846-L855\">https://github.com/leanprover/lean4/blob/master/src/kernel/type_checker.cpp#L846-L855</a></p>",
        "id": 454360863,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722023555
    }
]