[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"129120\">@Alexander Bentkamp</span> suggested I use this channel for some questions related to building my own Lean game.</p>",
        "id": 529300737,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1752764828
    },
    {
        "content": "<p>Firstly, has anyone devised a method for building a level that allows students to attempt to prove a statement that can't be proven? I think this might be helpful at various stages to make various pedagogical points. </p>\n<p>For example, I've just written a level that attempts to explain the default interpretation of <code>P -&gt; Q -&gt; R</code> as well as the inequivalence between <code>(P -&gt; Q) -&gt; R</code> and <code>P -&gt; (Q -&gt; R)</code>. It occurred to me that one way to drive this home would be to ask them to prove <code>P -&gt; Q -&gt; P</code> and/or <code>P -&gt; Q -&gt; Q</code> and then give them a chance to try (and fail) to prove <code>(P -&gt; Q) -&gt; P</code> and/or <code>(P -&gt; Q) -&gt; Q</code>.</p>",
        "id": 529301341,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1752765008
    },
    {
        "content": "<p>The natural number game contains a level that asks you to prove Fermats last theorem: <a href=\"https://github.com/leanprover-community/NNG4/blob/main/Game/Levels/Power/L10FLT.lean\">https://github.com/leanprover-community/NNG4/blob/main/Game/Levels/Power/L10FLT.lean</a></p>",
        "id": 529307351,
        "sender_full_name": "Alexander Bentkamp",
        "timestamp": 1752766831
    },
    {
        "content": "<p>and if you need a way to successfully solve unsolvable levels, you can also <a href=\"#narrow/channel/113488-general/topic/Two.20kinds.20of.20sorries/near/409701404\">take inspiration from the NNG</a>.</p>",
        "id": 529394879,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1752818047
    },
    {
        "content": "<p>This is definitely inspiring, but I don't quite understand it. Did the NNG implement a new tactic \"xyzzy\" or just make up a name for an existing tactic? Either way, how would I set this up myself in my game?</p>",
        "id": 529474187,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1752849105
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/NNG4/blob/4e8b2e1c15c7882a277c651a6f54db4ee858d50d/Game/Tactic/Xyzzy.lean#L9\">https://github.com/leanprover-community/NNG4/blob/4e8b2e1c15c7882a277c651a6f54db4ee858d50d/Game/Tactic/Xyzzy.lean#L9</a></p>",
        "id": 529476407,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752849932
    },
    {
        "content": "<p>I'm trying to write a comment to explain how to type <code>⟨</code>. I've written</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Conclusion</span><span class=\"w\"> </span><span class=\"s2\">\"Alternatively, you can type `exact ⟨p,q⟩' using '</span><span class=\"se\">\\\\</span><span class=\"s2\">&lt;' and '</span><span class=\"se\">\\\\</span><span class=\"s2\">&gt;' to type the angle braces.\"</span>\n</code></pre></div>\n<p>but it renders as <code>&lt;</code> rather than <code>\\&lt;</code> (with the backslash missing). How do I fix this?</p>",
        "id": 530415067,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1753297438
    },
    {
        "content": "<p>Just a guess: maybe 4 backslashes do the trick?</p>",
        "id": 530418325,
        "sender_full_name": "Alexander Bentkamp",
        "timestamp": 1753298817
    },
    {
        "content": "<p>Thanks, yes!</p>",
        "id": 530418605,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1753298924
    },
    {
        "content": "<p>You need to escape the escape</p>",
        "id": 530425409,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753301538
    },
    {
        "content": "<p>Also: raw strings <a href=\"https://lean-lang.org/doc/reference/latest//Basic-Types/Strings/#raw-string-literals\">https://lean-lang.org/doc/reference/latest//Basic-Types/Strings/#raw-string-literals</a></p>",
        "id": 533693673,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1754880344
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"119741\">François G. Dorais</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/533693673\">said</a>:</p>\n<blockquote>\n<p>Also: raw strings <a href=\"https://lean-lang.org/doc/reference/latest//Basic-Types/Strings/#raw-string-literals\">https://lean-lang.org/doc/reference/latest//Basic-Types/Strings/#raw-string-literals</a></p>\n</blockquote>\n<p>saved a memo for this: <a href=\"https://github.com/leanprover-community/lean4game/issues/351\">lean4game#351</a></p>",
        "id": 533707284,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1754891622
    },
    {
        "content": "<p>Quick question: Is it possible to include images in the text of a game? I see in the docs support for <code>CoverImage \"images/cover.png\"</code>, but is it possible to put images elsewhere? Thanks!</p>",
        "id": 534280617,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1755108971
    },
    {
        "content": "<p>Another question: In the Natural Number Game, <code>rw [h]</code> is somehow weakened compared to the <code>rw</code> of Mathlib (in particular, it needs an extra <code>rfl</code> at the end, whereas Mathlib's <code>rw</code> tries to run that automatically). I need Mathlib's Real Numbers, but would like to have NNG's <code>rw</code>... I don't suppose that's possible?</p>",
        "id": 534343032,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1755148321
    },
    {
        "content": "<p>Sure it's possible, just copy NNGs <code>rw</code> tactic into your project. It's probably called something like <code>NNG/Tactic/Rw.lean</code> and if you import that file then hopefully you'll have exactly what you want</p>",
        "id": 534434232,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1755160533
    },
    {
        "content": "<p>Re: images<br>\n<a href=\"https://github.com/leanprover-community/lean4game/blob/main/doc/hints.md#images\">https://github.com/leanprover-community/lean4game/blob/main/doc/hints.md#images</a><br>\nI didnt know this was already implemented until just now!</p>",
        "id": 534472801,
        "sender_full_name": "Alexander Bentkamp",
        "timestamp": 1755174584
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534434232\">said</a>:</p>\n<blockquote>\n<p>Sure it's possible, just copy NNGs <code>rw</code> tactic into your project. It's probably called something like <code>NNG/Tactic/Rw.lean</code> and if you import that file then hopefully you'll have exactly what you want</p>\n</blockquote>\n<p>I guess I also want to have access to the rest of Mathlib, and I can't have two things called <code>rw</code>. Oh well, I'll use Mathlib's version. Thanks!</p>",
        "id": 534504602,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1755184515
    },
    {
        "content": "<p>Hm, are you sure you cant have two rw tactics? Maybe setting a higher priority for the new rw tactic could work?</p>",
        "id": 534505528,
        "sender_full_name": "Alexander Bentkamp",
        "timestamp": 1755184803
    },
    {
        "content": "<p>I guess I wouldn't want to confuse students with two different behaviors? Let it be the stronger one, if that's what Mathlib does...</p>",
        "id": 534505667,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1755184845
    },
    {
        "content": "<p>It looks like the image Markdown solution doesn't work? I added <code>&lt;img src=\\\"https://url.com/to/image\\\"/&gt;</code> to my file, and I just see the text...?</p>",
        "id": 534506897,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1755185234
    },
    {
        "content": "<p>(of course with a link to an actual image)</p>",
        "id": 534506956,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1755185251
    },
    {
        "content": "<p>IIRC <code>rewrite</code> instead of <code>rw</code> does what the NNG <code>rw</code> does.</p>",
        "id": 534507754,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1755185505
    },
    {
        "content": "<p>Maybe <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> knows more about the state of including images?</p>",
        "id": 534524820,
        "sender_full_name": "Alexander Bentkamp",
        "timestamp": 1755190953
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"252920\">Alex Kontorovich</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534504602\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534434232\">said</a>:</p>\n<blockquote>\n<p>Sure it's possible, just copy NNGs <code>rw</code> tactic into your project. It's probably called something like <code>NNG/Tactic/Rw.lean</code> and if you import that file then hopefully you'll have exactly what you want</p>\n</blockquote>\n<p>I guess I also want to have access to the rest of Mathlib, and I can't have two things called <code>rw</code>. Oh well, I'll use Mathlib's version. Thanks!</p>\n</blockquote>\n<p>You should be able to! NNG and Robo both do that a lot. Make sure your custom <code>rw</code> tactic has a custom different internal name in Lean. You can take the NNG's <code>rw</code> (which does not use <code>rfl</code>) as an example.</p>",
        "id": 534612743,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1755244268
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"252920\">Alex Kontorovich</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534506897\">said</a>:</p>\n<blockquote>\n<p>It looks like the image Markdown solution doesn't work? I added <code>&lt;img src=\\\"https://url.com/to/image\\\"/&gt;</code> to my file, and I just see the text...?</p>\n</blockquote>\n<p>If I remember correctly, not all texts e verywhere might be markdown (wich is a bug) and this was called a hack because the URL might be different depending on how you access the game (local/production) and thus they don't fully work. I don't think I've ever implemented full images support</p>",
        "id": 534613080,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1755244401
    },
    {
        "content": "<p>Thanks! How hard do you think it would be to implement image support (at a basic level, just in the \"intro\"s to Levels)?</p>",
        "id": 534660341,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1755267215
    },
    {
        "content": "<p>There's a <code>TheoremTab</code> that allows me to define <code>symm</code> under both <code>And</code> and <code>Or</code>, for instance. Is there a similar <code>DefinitionTab</code> to split definitions into tabbed lists?</p>",
        "id": 534672589,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1755272028
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534672589\">said</a>:</p>\n<blockquote>\n<p>There's a <code>TheoremTab</code> that allows me to define <code>symm</code> under both <code>And</code> and <code>Or</code>, for instance. Is there a similar <code>DefinitionTab</code> to split definitions into tabbed lists?</p>\n</blockquote>\n<p>I was working on a Lean game recently (for a lambda calculus) and had a similar question. Are there any utilities for displaying available definitions to the user? It would be nice for to have something both tied to the code and available for later recall.</p>",
        "id": 534674513,
        "sender_full_name": "Chris Henson",
        "timestamp": 1755272858
    },
    {
        "content": "<p>I'm having some difficulty also using <code>NewTheorem</code>. I have something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">For propositions `P`, `Q`, and `R`, `And.curry` is a proof that `P ∧ Q → R` implies `P → Q → R`.</span>\n<span class=\"sd\">-/</span>\n<span class=\"n\">TheoremDoc</span><span class=\"w\"> </span><span class=\"n\">And</span><span class=\"bp\">.</span><span class=\"n\">curry</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"s2\">\"curry\"</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"s2\">\"And\"</span>\n\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"n\">And</span><span class=\"bp\">.</span><span class=\"n\">curry</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">p</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">q</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">p</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">⟩</span>\n\n<span class=\"n\">NewTheorem</span><span class=\"w\"> </span><span class=\"n\">And</span><span class=\"bp\">.</span><span class=\"n\">curry</span>\n</code></pre></div>\n<p>The hope is that they could use this in proving later that this implication is an if and only if. But because <code>And.curry</code> isn't a mathlib name (I have no idea whether this theorem is in mathlib) when I try to use this a few levels later, Lean doesn't seem to recognize the definition. Or is the issue that I need to build something?</p>",
        "id": 534989202,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1755536134
    },
    {
        "content": "<p>Is this inside a namespace? If so, then I think you need to use the full name of the theorem in <code>TheoremDoc</code>, including the namespace.  Also, I don't think you need to use <code>NewTheorem</code> in this situation.</p>",
        "id": 534992241,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1755537524
    },
    {
        "content": "<p>Do you import this level from the later levels?</p>",
        "id": 534992740,
        "sender_full_name": "Alexander Bentkamp",
        "timestamp": 1755537781
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"129120\">Alexander Bentkamp</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534992740\">said</a>:</p>\n<blockquote>\n<p>Do you import this level from the later levels?</p>\n</blockquote>\n<p>No, each file just imports <code>Game.Metadata</code>. Is there a way for user generated names to automatically get added there?</p>",
        "id": 534993352,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1755538084
    },
    {
        "content": "<p>Or maybe I should just avoid user generated theorem names?</p>",
        "id": 534993426,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1755538129
    },
    {
        "content": "<p>Just import the level file in the later level files, where you need the theorem.</p>",
        "id": 534993834,
        "sender_full_name": "Alexander Bentkamp",
        "timestamp": 1755538325
    },
    {
        "content": "<p>This is a pretty large game with partial rather than linear dependencies. I either want a more automated solution or I'll do without. I'd rather have all the definitions in the library be actual terms that can be used in any subsequent level or not have them there.</p>",
        "id": 534997040,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1755539773
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"453098\">Dan Velleman</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534992241\">said</a>:</p>\n<blockquote>\n<p>Is this inside a namespace? If so, then I think you need to use the full name of the theorem in <code>TheoremDoc</code>, including the namespace.  Also, I don't think you need to use <code>NewTheorem</code> in this situation.</p>\n</blockquote>\n<p>Can you tell me why <code>NewTheorem</code> isn't needed? Clearly I don't really understand its functionality...</p>",
        "id": 534997234,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1755539851
    },
    {
        "content": "<p>I'm going by the instructions here:  <a href=\"https://github.com/leanprover-community/lean4game/blob/main/doc/create_game.md\">https://github.com/leanprover-community/lean4game/blob/main/doc/create_game.md</a>.</p>\n<p>Those instructions say:  \"You can give your exercise a name: <code>Statement my_first_exercise (n : Nat) …</code>. If you do so, it will be added to the inventory and be available in future levels.\"</p>\n<p>When I wrote the Set Theory Game, I didn't need to use <code>NewTheorem</code> when I had a <code>Statement</code> with a name.  Also, I had each level import the previous level, and the first level of each world imported the previous world.  But the display of the worlds when you play the game doesn't show a linear order--the dependencies displayed are computed based on which tactics and theorems are used.</p>",
        "id": 534998622,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1755540351
    },
    {
        "content": "<p>Do you have any idea whether this works for definitions in addition to theorems? I'm trying</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">The `swap` function exchanges the inputs of a function of two variables. For a function with two variables `f : A → B → C`, `Function.swap f : B → A → C` is the function that sends `b : B` and `a : A` to `f a b : C`.</span>\n<span class=\"sd\">-/</span>\n<span class=\"n\">DefinitionDoc</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">swap</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"s2\">\"Function.swap\"</span>\n\n<span class=\"n\">Introduction</span><span class=\"w\"> </span><span class=\"s2\">\"An element of type `A → B → C` can be thought of as a function of two variables. Given `f : A → B → C`, `a : A`, and `b : B`, `f a b : C` denotes `f` applied first to `a` and then to `b`. From a function of type `A → B → C`, we can define a function of type `B → A → C` by swapping the order of the input variables.</span>\n<span class=\"s2\">\"</span>\n\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">swap</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hidden</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"When in doubt, start defining a function by using the tactic `intro` followed by your preferred variable name.\"</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hidden</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"When in doubt, start defining a function by using the tactic `intro` followed by your preferred variable name.\"</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hidden</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"When in doubt, start defining a function by using the tactic `intro` followed by your preferred variable name.\"</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hidden</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"Look carefully at the order of the arguments of `{f}`.\"</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n</code></pre></div>\n<p>But I'm getting an error <code>Missing Lemma Documentation: Function.swap\nAdd </code>LemmaDoc Function.swap<code> somewhere above this statement</code></p>\n<p>Indeed, because I've labeled something defined by <code>Statement</code>, the game seems to think this is a theorem, and it appears on my list of theorems (with a missing doc) rather than on the list of definitions. But when I import this file into later files I am able to use the definition (unfolding it, etc).</p>",
        "id": 535002078,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1755541941
    },
    {
        "content": "<p>so as Dan correctly mentioned, every named <code>Statement</code> will be added automatically as a theorem. <code>NewTheorem</code> is used for adding external theorems to the game, e.g. Mathlib statements you want to use in the level where you write <code>NewTheorem</code>.</p>\n<p>There isn't a direct, automated way to add your <code>Statement</code> as a definition. For one because we only featured tactic-proofs and constructing definitions in tactic mode has always been considered bad as far as I know.</p>\n<p>However, you could do the following:</p>\n<ul>\n<li>do not name the <code>Statement</code> where you \"proof\" (construct) your <code>Function.swap</code></li>\n<li>In the <strong>next</strong> level, make sure you have imported <code>Function.swap</code> from somewhere (Mathlib, or just write it into that file as <code>def Function.swap</code>; and add <code>NewDefinition Function.swap</code> in this <strong>next</strong> level</li>\n</ul>\n<p>(PS: if you name your <code>Statement</code> and give it a _docstring_, it should automatically take that as the doc)</p>",
        "id": 535245990,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1755670971
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534993352\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"129120\">Alexander Bentkamp</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534992740\">said</a>:</p>\n<blockquote>\n<p>Do you import this level from the later levels?</p>\n</blockquote>\n<p>No, each file just imports <code>Game.Metadata</code>. Is there a way for user generated names to automatically get added there?</p>\n</blockquote>\n<p>And yes, since a game is a normal Lean project, you do need to import the file which defines something in the file where you want to use something. There's no (resonable?) way around that</p>\n<p>(What we can and will fix soon, is that the player should have everything accessible regardless of imports. e.g. the player should be able to use an unlocked theorem everywhere later, even in earlier levels which they re-attempt later. That will affect the player experience, but will not change anything when you open the game as Lean project to work on it.)</p>",
        "id": 535247090,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1755671597
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534672589\">said</a>:</p>\n<blockquote>\n<p>There's a <code>TheoremTab</code> that allows me to define <code>symm</code> under both <code>And</code> and <code>Or</code>, for instance. Is there a similar <code>DefinitionTab</code> to split definitions into tabbed lists?</p>\n</blockquote>\n<p>So far not because we never had enough definitions, but could be implemented fairly easily, if needed</p>",
        "id": 535247260,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1755671686
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534674513\">said</a>:</p>\n<blockquote>\n<p>I was working on a Lean game recently (for a lambda calculus) and had a similar question. Are there any utilities for displaying available definitions to the user? It would be nice for to have something both tied to the code and available for later recall.</p>\n</blockquote>\n<p>Im afraid, currently not, but that's a good idea</p>",
        "id": 535247389,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1755671759
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> something I think we could add with basically no effort would be an optional argument <code>Statement (asDef := true) Function.curry : .... := by</code> which would add the statement automatically as a definition (instead of theorem) for later levels. Would that be useful?</p>",
        "id": 535248430,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1755672271
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/535248430\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> something I think we could add with basically no effort would be an optional argument <code>Statement (asDef := true) Function.curry : .... := by</code> which would add the statement automatically as a definition (instead of theorem) for later levels. Would that be useful?</p>\n<p>Yes, thanks <span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span>. This would be great.</p>\n</blockquote>",
        "id": 535492248,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1755778638
    },
    {
        "content": "<p>Two quick questions: </p>\n<ul>\n<li>I can't seem to add the <code>have</code> tactic in usual incremental way, <code>TacticDoc have</code> and <code>NewTactic have</code> give the error: \"unexpected token 'have'; expected command\". So how do I show the syntax for <code>have</code> in the list of \"reminders\" next to the other tactics? And</li>\n<li>Is it possible to erase one's work on one level (and presumably everything after it), but not everything before it? Say I want to see how level 10 works, but don’t want to replay 1-9, and don’t want to relax the rules (that is, I don't want to \"cheat\" when I play level 10) -- is there a way to do that?<br>\nThank you!</li>\n</ul>",
        "id": 535602372,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1755827718
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"252920\">Alex Kontorovich</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/535602372\">said</a>:</p>\n<blockquote>\n<ul>\n<li>I can't seem to add the <code>have</code> tactic in usual incremental way, <code>TacticDoc have</code> and <code>NewTactic have</code> give the error: \"unexpected token 'have'; expected command\". So how do I show the syntax for <code>have</code> in the list of \"reminders\" next to the other tactics?</li>\n</ul>\n</blockquote>\n<p>Have you tried the french quotes?</p>",
        "id": 535602404,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755827751
    },
    {
        "content": "<p>That means, instead of writing <code>TacticDoc have</code>, write <code>TacticDoc «have»</code></p>",
        "id": 535602438,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755827778
    },
    {
        "content": "<p>Ah, the old French quotes trick! I should've guessed... :) Works like a charm, thanks!</p>",
        "id": 535609210,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1755833937
    },
    {
        "content": "<p>Now that I've hidden a few worlds, I only have one theorem tab, which is supposed to be \"And\". But it's invisible from the current web version of the game:</p>\n<p><a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs\">https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs</a></p>\n<p>Is this the expected behavior, or am I using it wrong?</p>",
        "id": 535872201,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1755996834
    },
    {
        "content": "<p>That is indeed expected behaviour if there is only a single tab. The thought was that it might be desired to design a game where you don't need tabs at all </p>\n<p>However I'm not opposed to changong that behaviour if desired...</p>",
        "id": 535885871,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1756018932
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/535245990\">said</a>:</p>\n<blockquote>\n<p>so as Dan correctly mentioned, every named <code>Statement</code> will be added automatically as a theorem. <code>NewTheorem</code> is used for adding external theorems to the game, e.g. Mathlib statements you want to use in the level where you write <code>NewTheorem</code>.</p>\n<p>There isn't a direct, automated way to add your <code>Statement</code> as a definition. For one because we only featured tactic-proofs and constructing definitions in tactic mode has always been considered bad as far as I know.</p>\n<p>However, you could do the following:</p>\n<ul>\n<li>do not name the <code>Statement</code> where you \"proof\" (construct) your <code>Function.swap</code></li>\n<li>In the <strong>next</strong> level, make sure you have imported <code>Function.swap</code> from somewhere (Mathlib, or just write it into that file as <code>def Function.swap</code>; and add <code>NewDefinition Function.swap</code> in this <strong>next</strong> level</li>\n</ul>\n<p>(PS: if you name your <code>Statement</code> and give it a _docstring_, it should automatically take that as the doc)</p>\n</blockquote>\n<p>Following <span class=\"user-mention\" data-user-id=\"129120\">@Alexander Bentkamp</span>'s suggestion I'm now working on my later levels in a development branch, starting with function world. These files used to compile fine (at least when I was playing the game locally) but now I'm getting an error message that didn't appear before:</p>\n<p>For </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n</code></pre></div>\n<p>I get the error <code>type of theorem is not a proposition</code> which I certainly agree with. Should I be using something other than <code>Statement</code> here?</p>",
        "id": 535917306,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756059282
    },
    {
        "content": "<p>Oh wow! I had levels of this form in the Lean 3 version of NNG (\"function world\" or something), I had an entire world of constructing functions with <code>intro</code> and <code>apply</code> in preparation for using the same tactics to prove theorems about Props. But I decided to ditch them in Lean 4 NNG and just use concrete props, so never tried something like this.</p>",
        "id": 535918911,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756060906
    },
    {
        "content": "<p>Yeah my idea is to try teach informal dependent type theory in a lightweight way so as not to (overly) corrupt the youth. So definitely the Curry Howard correspondence. Maybe inductive types (depending on how strong the students are, which I'll start to find out tomorrow).</p>",
        "id": 535921815,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756064128
    },
    {
        "content": "<p>Let me look at that today. I think that might be because recent Lean+mathlib have more and more Linters activated by default, and they might not be disabled in your game. That's certainly not ideal.<br>\nYou'll get a proper way to write non-<code>Prop</code> levels within in the next days!</p>",
        "id": 535941267,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1756086473
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/535941267\">said</a>:</p>\n<blockquote>\n<p>Let me look at that today. I think that might be because recent Lean+mathlib have more and more Linters activated by default, and they might not be disabled in your game. That's certainly not ideal.<br>\nYou'll get a proper way to write non-<code>Prop</code> levels within in the next days!</p>\n</blockquote>\n<p>Thanks. Really appreciated. This is kind of crucial for my course plan... :)</p>",
        "id": 536070346,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756141965
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> is there someone else I should loop into the conversation about this? If it doesn't look like I'll be able to get my type-theory based levels restored in the next week, I need to start making a new plan for my second class meeting.</p>",
        "id": 536637840,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756396306
    },
    {
        "content": "<p>Sorry I didn't realise you literally already started your course and are running on less than a week prep. I'll PR the fixes to your repo tomorrow during the day. When's your next class?</p>",
        "id": 536690650,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1756419597
    },
    {
        "content": "<p>The fix is building now and should be online in about an hour. </p>\n<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> in about an hour, you should be able to just call <code>lake update</code> in your game repo and it should work (that should only change the commit SHA of <code>GameServer</code> in your <code>lake-manifest.json</code>). Ofc, you should also pull the newest version of <code>lean4game</code> if you run the server locally. If you do have further problems, it might be an idea to give me access to your private repo, the levels which are in the public repo aren'r really affected.</p>",
        "id": 536741938,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1756456340
    },
    {
        "content": "<p>I'm sorry you have to be one of the guinea pigs which try out the updated <code>v4.22.0</code> version of the game server. there have been significant changes to finally get past <code>v4.7.0</code> and I'm working full-time nowadays.</p>",
        "id": 536742285,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1756456501
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> really appreciated. I'm not sure I managed to correctly follow the instructions though. </p>\n<p>I added the GameSkeleton repo as <code>upstream</code> and force merged that into my clone. This did end up changing the lake-manifest.json. But I don't think this is what you meant by \"pull the newest version of <code>lean4game</code>\". Could you clarify how I should do this?</p>\n<p>Btw the broken <code>dev</code> branch is now publicly visible and its version of the lake-manifest.json file is <a href=\"https://github.com/emilyriehl/ReintroductionToProofs/blob/dev/lake-manifest.json\">here</a></p>",
        "id": 536782872,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756472202
    },
    {
        "content": "<p>I've DMed the PR with the changes. It is <code>lake update -R</code>, I forgot lake still had this option <code>-R</code> which has the (arguably) wrong default when <code>update</code> is called.</p>",
        "id": 536799012,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1756477133
    },
    {
        "content": "<p>Should I copy across this version of the lake-manifest file to the main branch? At some point I'll start merging version of the levels currently in the dev branch into the main branch.</p>",
        "id": 536924656,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756570907
    },
    {
        "content": "<p>Actually this still seems to be broken. The dev branch of the repository compiles just fine now but when I play the game locally I'm unable to solve any of the levels (even using the same code from the source files).</p>",
        "id": 536924945,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756571113
    },
    {
        "content": "<p>For example here's the first constructive level </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">Metadata</span>\n\n<span class=\"n\">World</span><span class=\"w\"> </span><span class=\"s2\">\"FunctionWorld\"</span>\n<span class=\"n\">Level</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"n\">Title</span><span class=\"w\"> </span><span class=\"s2\">\"Identity Function\"</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">For a type `A`, `id : A → A` is the function defined by sending `a : A` to `a : A`.</span>\n<span class=\"sd\">-/</span>\n<span class=\"n\">DefinitionDoc</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"s2\">\"id\"</span>\n\n<span class=\"n\">Introduction</span><span class=\"w\"> </span><span class=\"s2\">\"The simplest example of a function is the identity function, which may be defined for any type `A`. The identity function</span>\n<span class=\"s2\">`id : A → A` is defined to carry any element `a : A` to itself.</span>\n\n<span class=\"s2\">To define a function `f : A → B` one must define a rule that converts an arbitrary element `x : A` to some element of type `B`. Start by typing `intro x` to add an arbitrary element `x : A` to the context and update the goal to a term of type `B`.\"</span>\n\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"To define a function, in this case a term of type `{A} → {A}`, one must define a rule to convert an arbitrary element `x : {A}` to some element of type `{A}`. Start by typing `intro x` to add an arbitrary element of type `{A}` to the context.\"</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now the goal is an element of type `{A}`, which should be thought of as result of applying the function to the element `{x} : {A}`. In the case of the identity function, we want to return `{x} : {A}` again which is done by typing `exact {x}`.\"</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"n\">Conclusion</span><span class=\"w\"> </span><span class=\"s2\">\"You can solve this level in one level by just giving the entire formula for the function as</span>\n<span class=\"s2\">`exact fun x ↦ x`, using `</span><span class=\"se\">\\\\</span><span class=\"s2\">mapsto` to type `↦`. This tells Lean that the answer is the function defined on an input element `x` to have an output value `x`.\"</span>\n\n<span class=\"n\">NewDefinition</span><span class=\"w\"> </span><span class=\"n\">id</span>\n</code></pre></div>",
        "id": 536925475,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756571576
    },
    {
        "content": "<p>When I demo the game by typing <code>intro x</code> it seems to crash typewriter mode. When I switch to editor mode I can type the full two line proof <code>intro x; exact x</code> and at the end it tells me no goals. But there's a red squiggly line under the <code>intro x</code> with the message</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">the_theorem</span><span class=\"bp\">._@.</span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">Metadata</span><span class=\"bp\">._</span><span class=\"n\">hyg</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">proposition</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span>\n</code></pre></div>\n<p>Also, despite the <code>no goals</code>, the game does not seem to think the level is complete and in particular won't let me advance to the next one.</p>",
        "id": 536925641,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756571730
    },
    {
        "content": "<p><a href=\"https://github.com/emilyriehl/ReintroductionToProofs/pull/2\">https://github.com/emilyriehl/ReintroductionToProofs/pull/2</a></p>\n<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/536924656\">said</a>:</p>\n<blockquote>\n<p>Should I copy across this version of the lake-manifest file to the main branch?</p>\n</blockquote>\n<p>Yes, your <code>main</code> branch should have the same manifest as the <code>dev</code> branch, i.e. the manifest from the PR above</p>",
        "id": 536947261,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1756599378
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span>. This is REALLY REALLY appreciated.</p>",
        "id": 536995410,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1756660377
    },
    {
        "content": "<p>The first lecture is up! <a href=\"https://alexkontorovich.github.io/2025F311H\">https://alexkontorovich.github.io/2025F311H</a> Any comments/suggestions are very welcome (by DM, if you prefer, or better yet, by PR)!</p>",
        "id": 537480352,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1756907251
    },
    {
        "content": "<p>And thanks again to everyone for helping make it possible!</p>",
        "id": 537480818,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1756907387
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"252920\">@Alex Kontorovich</span>, thank you for posting your real analysis lecture videos. I'm having a lot of fun working through the course and am enjoying the historical interludes.</p>",
        "id": 539357894,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1757793836
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/534672589\">said</a>:</p>\n<blockquote>\n<p>There's a <code>TheoremTab</code> that allows me to define <code>symm</code> under both <code>And</code> and <code>Or</code>, for instance. Is there a similar <code>DefinitionTab</code> to split definitions into tabbed lists?</p>\n</blockquote>\n<p>Btw, this is now in the <code>v4.23.0</code> version: You can sort Definitions and Tactics into tabs, too, if you'd like. Same syntax as for theorems: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- defined as `Injective f ∧ Surjective` -/</span>\n<span class=\"n\">DefinitionDoc</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Bijective</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"s2\">\"Bijective\"</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"s2\">\"Fun\"</span>\n</code></pre></div>",
        "id": 540123502,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1758155536
    },
    {
        "content": "<p>Awesome. But either I'm using it wrong</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">DefinitionTab</span><span class=\"w\"> </span><span class=\"s2\">\"Empty\"</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">For any type `A`, there is a function `Empty.elim : Empty → A` expressing the elimination rule of the empty type.</span>\n<span class=\"sd\">-/</span>\n<span class=\"n\">DefinitionDoc</span><span class=\"w\"> </span><span class=\"n\">Empty</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"s2\">\"elim\"</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"s2\">\"Empty\"</span>\n\n<span class=\"n\">NewDefinition</span><span class=\"w\"> </span><span class=\"n\">Empty</span><span class=\"bp\">.</span><span class=\"n\">elim</span>\n</code></pre></div>\n<p>or I don't know how to update to the v4.23.0 version (or figure out what version I'm on). I ran <code>git pull upstream main</code> which did something then <code>lake update</code> which did not appear to do anything.</p>",
        "id": 540253617,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1758207006
    },
    {
        "content": "<p>The chosen workflow for updating (which I promote in the Lean projects I'm working on) is:</p>\n<ol>\n<li>manually change the version in <code>lean-toolchain</code> to <code>leanprover/lean4:v4.23.0</code></li>\n<li>run <code>lake update -R</code></li>\n<li>done.</li>\n</ol>\n<p>Looking at your repo's <code>dev</code> branch, you need to do (1.)</p>\n<p>(note: this only works in projects which have there <code>lakefile.lean</code> configured correctly. Your game is configured that way which you could see by the usage of <code>def leanVersion : String := s!\"v{Lean.versionString}\"</code> in the lakefile)</p>",
        "id": 540570094,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1758357071
    },
    {
        "content": "<p>(I'm not sure you should run <code>git pull upstream main</code> unless you know what you're doing. It depends on how your git project is set up, i.e. whether a remote named <code>upstream</code> is defined. For your mathlib fork, you probably have set this up correctly with the <code>main</code> branch pointing at an <code>upstream/main</code> branch. I wouldn't be sure what your setup is in your game's local clone. You can check with info-prints like <code>git remote</code> and <code>git branch -vv</code>)</p>",
        "id": 540570399,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1758357382
    },
    {
        "content": "<p>(btw <code>-R</code> might be superfluous, but in my head it stands for <code>\"[R]eally do it!\"</code>. There are some situations where <code>lake update</code> without the <code>-R</code> doesn't actually do the update.)</p>",
        "id": 540570561,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1758357577
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/540570094\">said</a>:</p>\n<blockquote>\n<p>The chosen workflow for updating (which I promote in the Lean projects I'm working on) is:</p>\n<ol>\n<li>manually change the version in <code>lean-toolchain</code> to <code>leanprover/lean4:v4.23.0</code></li>\n<li>run <code>lake update -R</code></li>\n<li>done.</li>\n</ol>\n<p>Looking at your repo's <code>dev</code> branch, you need to do (1.)</p>\n<p>(note: this only works in projects which have there <code>lakefile.lean</code> configured correctly. Your game is configured that way which you could see by the usage of <code>def leanVersion : String := s!\"v{Lean.versionString}\"</code> in the lakefile)</p>\n</blockquote>\n<p>I don't know if my lakefile is configured incorrectly but this broke something in my vscode installation. I'm getting an error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Error</span><span class=\"w\"> </span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">23</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">game'</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">installed</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Reason</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Installation</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Permission</span><span class=\"w\"> </span><span class=\"n\">denied</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">os</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 540692096,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1758498626
    },
    {
        "content": "<p>I can't find the <code>refresh lean server</code> in the command pallette (where it usually is).</p>",
        "id": 540692117,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1758498662
    },
    {
        "content": "<p>I can find something called <code>setup update release channel lean version</code> but when I try to do this it tells me the permission is denied</p>",
        "id": 540692183,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1758498742
    },
    {
        "content": "<p>I'm teaching tomorrow so it's a bad time for Lean to be broken... <span aria-label=\"cold sweat\" class=\"emoji emoji-1f630\" role=\"img\" title=\"cold sweat\">:cold_sweat:</span></p>",
        "id": 540692209,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1758498782
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> , are you using a container to test your game locally?  I have sometimes experienced the \"permission denied (os error 13)\" error when I was doing that.  Have you tried deleting the container and rebuilding it?</p>",
        "id": 540693713,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1758500437
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> , could this be related to this issue:  <a href=\"https://github.com/leanprover-community/lean4game/issues/296\">https://github.com/leanprover-community/lean4game/issues/296</a><br>\nThere is a proposed fix there, but I don't think it has been implemented, has it?</p>",
        "id": 540693975,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1758500768
    },
    {
        "content": "<p>I am, so that might be the problem. Let me see if I can figure out how to delete the container.</p>\n<p>Update: Thanks <span class=\"user-mention\" data-user-id=\"453098\">@Dan Velleman</span> . I think that was the issue.</p>",
        "id": 540695292,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1758502155
    },
    {
        "content": "<p>Glad to hear it worked.</p>",
        "id": 540697622,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1758504910
    },
    {
        "content": "<p>Back with another issue. The theorems part of the library of <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs\">my game</a> broke sometime in the last few days. The tactics and definitions part of the library are fine.</p>\n<p>(I haven't yet implemented the new definition tabs mentioned by <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> because I still can't figure out how to get it to work.)</p>\n<p>Has this happened to anyone else? I'm not sure what I'm doing wrong.</p>",
        "id": 541027316,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1758637214
    },
    {
        "content": "<p>For example this is the source code for level 1 of Classical World</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">TheoremTab</span><span class=\"w\"> </span><span class=\"s2\">\"Classical\"</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">For any proposition `P`, `Classical.byContradiction : ¬ ¬ P → P` proves that if `P` is not false, then `P` is true.</span>\n<span class=\"sd\">-/</span>\n<span class=\"n\">TheoremDoc</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">byContradiction</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"s2\">\"byContradiction\"</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"s2\">\"Classical\"</span>\n\n<span class=\"n\">NewTheorem</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">byContradiction</span>\n</code></pre></div>\n<p>and this is from level 2:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">For any proposition `P`, `Classical.em P : P ∨ ¬ P ` proves that `P` or `¬ P` is true.</span>\n<span class=\"sd\">-/</span>\n<span class=\"n\">TheoremDoc</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">em</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"s2\">\"em\"</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"s2\">\"Classical\"</span>\n\n<span class=\"n\">NewTheorem</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">em</span>\n</code></pre></div>",
        "id": 541027779,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1758637325
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246635\">@Emily Riehl</span> , what you're doing looks right to me.  I never had that problem.</p>\n<p>Perhaps you've already thought of this, but since you say it used to work, I'd be inclined to remove some worlds from the game (easy to do by commenting out some lines in your <code>Game.lean</code> file) and see if the theorem library starts working again.  If so, add worlds back in to see which world broke it.</p>",
        "id": 541048377,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1758642391
    },
    {
        "content": "<p>That might be a backwards compatibility issue from my side, I'll check. Is it broken only on the live server or locally alike?</p>",
        "id": 541076391,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1758652025
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/541027316\">said</a>:</p>\n<blockquote>\n<p>Back with another issue. The theorems part of the library of <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs\">my game</a> broke sometime in the last few days.</p>\n</blockquote>\n<p>Fixed :) sorry for the inconvenience</p>",
        "id": 541092286,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1758658624
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/541027316\">said</a>:</p>\n<blockquote>\n<p>(I haven't yet implemented the new definition tabs mentioned by <span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> because I still can't figure out how to get it to work.)</p>\n</blockquote>\n<p><a href=\"https://github.com/emilyriehl/ReintroductionToProofs/pull/4\">https://github.com/emilyriehl/ReintroductionToProofs/pull/4</a></p>",
        "id": 541093602,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1758659200
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span>. Can you explain what you've done? I ask because I want to merge this into the main branch, not the dev branch (which in fact, after this coming Monday's class, I'm just going to get rid of).</p>",
        "id": 541648141,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1758887208
    },
    {
        "content": "<p>For moving the definitions into tabs? You just add <code>in \"Tabname\"</code> at the end of the <code>DefinitonDoc</code> command. You should also get this info if you look at the (hover) docstring of <code>DefinitionDoc</code>.</p>\n<p>(As for the broken theorems bug, that was purely an error on our side and I fixed it by updating the version of <code>lean4game</code> which runs at <a href=\"http://adam.math.hhu.de\">adam.math.hhu.de</a>)</p>",
        "id": 541734347,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1758915549
    },
    {
        "content": "<p>I'm back with something weird I'd like to do with a Lean game. Is it possible to have levels involving structures?</p>\n<p>E.g., I'd love to build a level with this goal:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>but I'm getting some sort of error (a red underline of the equivalence symbol). Typing <code>Equiv (A × B) (B × A)</code> instead gives a more comprehensible error message </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"ss\">`Equiv</span><span class=\"bp\">`</span>\n<span class=\"n\">Error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">.</span><span class=\"n\">unknownIdentifier</span>\n</code></pre></div>",
        "id": 542085529,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759162976
    },
    {
        "content": "<p>Are you just missing an import or is the problem worse than that?</p>",
        "id": 542086148,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759163141
    },
    {
        "content": "<p>(looks like it's <code>Mathlib.Logic.Equiv.Defs</code>)</p>",
        "id": 542086431,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759163219
    },
    {
        "content": "<p>(or probably <code>Mathlib.Logic.Equiv.Basic</code> if you want a nonzero amount of API)</p>",
        "id": 542086540,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759163242
    },
    {
        "content": "<p>When I try to import a mathlib file I get an error</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"kn\">prefix</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Mathlib'</span>\n\n<span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Mathlib'</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">olean'</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">search</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"n\">entries</span><span class=\"o\">:</span>\n</code></pre></div>",
        "id": 542089052,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759163847
    },
    {
        "content": "<p>I made a working level like this but I feel like it's going to be hard to guide the students to the proof in the Lean game interface</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">Metadata</span>\n\n<span class=\"n\">World</span><span class=\"w\"> </span><span class=\"s2\">\"EquivalenceWorld\"</span>\n<span class=\"n\">Level</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"n\">Title</span><span class=\"w\"> </span><span class=\"s2\">\"Testing\"</span>\n\n<span class=\"n\">Introduction</span><span class=\"w\"> </span><span class=\"s2\">\"This is probably a bad idea</span>\n<span class=\"s2\">\"</span>\n\n<span class=\"sd\">/-- `α ≃ β` is the type of functions from `α → β` with a two-sided inverse. -/</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span>\n<span class=\"w\">  </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">left_inv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span>\n<span class=\"w\">  </span><span class=\"n\">right_inv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"kd\">]</span>\n<span class=\"kn\">infixl</span><span class=\"o\">:</span><span class=\"mi\">25</span><span class=\"w\"> </span><span class=\"s2\">\" ≃ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Equiv</span>\n\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n\n<span class=\"n\">Conclusion</span><span class=\"w\"> </span><span class=\"s2\">\"This is probably a bad idea\"</span>\n</code></pre></div>",
        "id": 542089196,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759163886
    },
    {
        "content": "<p>The problem is I don't know the best way to access the fields of the structure. I tried <code>constructor</code> but it gives them to me in a bad order (with the coherences first). After filling in the definitions of toFun and invFun in the 3rd and 4th goals they don't seem to compute in the 1st and 2nd goals (i.e., <code>rfl</code> fails).</p>",
        "id": 542089484,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759163969
    },
    {
        "content": "<p>So maybe this whole thing is a bad idea?</p>",
        "id": 542089554,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759163989
    },
    {
        "content": "<p>Hmm, I am definitely doing <code>import Mathlib.Stuff</code> in NNG4 (see e.g. <a href=\"https://github.com/leanprover-community/NNG4/blob/main/Game/Tactic/Induction.lean\">this file</a> but pretty much everything other than the \"write the levels and the text descriptions\" in that repo was done by other people. NNG4 has a <code>lakefile.lean</code> which I find totally intimidating but one of the lines in it is <code>require \"leanprover-community\" / mathlib @ git leanVersion</code> which presumably is what's getting <code>import Mathlib.stuff</code> working. </p>\n<p>Certainly though it's not impossible to just copy chunks out of mathlib in your own game. </p>\n<p>Maybe <code>constructor</code> is a good tactic to start off \"proving\" that Statement? Then hopefully you'll just get 4 goals. The problem will be that students will be then defining data in tactic mode and this can go wrong, e.g. making <code>fun p ↦ ⟨p.2, p.1⟩</code> in tactic mode might involve a student going <code>intro p</code> and then <code>cases p</code> and there might either be an incomprehensible error at that point or you'll end up with a function you can't prove anything about. Maybe your <code>refine</code> approach is best?</p>",
        "id": 542090894,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759164421
    },
    {
        "content": "<p>I like the idea of starting with constructor but it gives me the goals in the wrong order. Is there a way to force the goals to come out with the first goal of defining the functions?</p>",
        "id": 542091677,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759164672
    },
    {
        "content": "<p>It definitely should be possible to talk about structures in the games. We did this in <code>Robo</code> and had some thoughts about how to work with them in the game framework.</p>\n<p>(I need to look up the details later, I think one thing was to use <code>fconstructor</code> which does not reorder elements, but there might be a few more workarounds we did)</p>\n<p>As for mathlib, you should require it in the lakefile as Kevin said, if you haven't done that already.</p>",
        "id": 542100808,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1759167368
    },
    {
        "content": "<p>The lakefile suggestion works but <code>fconstructor</code> is giving me an <code>unknown tactic</code> error. Any suggestions would be welcome!</p>",
        "id": 542101237,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759167506
    },
    {
        "content": "<p><code>import Mathlib.Tactic.Constructor</code>? I jumped to definition on an <code>fconstructor</code> in mathlib and this is where it took me, at any rate...</p>",
        "id": 542102550,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759167934
    },
    {
        "content": "<p>We have the following Lean file somewhere in Robo where it is imported by <code>Game/Metadata.lean</code>. (import <code>fconstructor</code> from mathlib and overwrite <code>constructor</code> to use <code>fconstructor</code> instead)</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>modifided constructor from Robo</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">ExtendDoc</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Constructor</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Meta</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"w\"> </span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Game</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Parser</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">constructor</span><span class=\"kd\">]</span>\n<span class=\"kn\">macro</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">constructor</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"constructor\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">fconstructor</span><span class=\"o\">)</span>\n\n<span class=\"n\">extend_docs</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"n\">after</span><span class=\"w\"> </span><span class=\"s2\">\"The variant used in the Robo game is called</span>\n<span class=\"s2\">`fconstructor` in Mathlib. The only difference is the real `constructor` sorts</span>\n<span class=\"s2\">the goals in a way not ideal for the game.\"</span>\n</code></pre></div>\n</div></div>",
        "id": 542104088,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1759168414
    },
    {
        "content": "<p>And here is a bit a more elaborate level example: We want to show that something is a <code>Submodule</code>. This involves predefining some data, otherwise the exercise would simply be \"construct any <code>Submodule</code> you can think of\"</p>\n<p><a href=\"/user_uploads/3121/NnwDsKsI1j75U4nOpBtkS1cz/Screenshot-2025-09-29-at-20.04.40.png\">Screenshot 2025-09-29 at 20.04.40.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/NnwDsKsI1j75U4nOpBtkS1cz/Screenshot-2025-09-29-at-20.04.40.png\" title=\"Screenshot 2025-09-29 at 20.04.40.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1464x1020\" src=\"/user_uploads/thumbnail/3121/NnwDsKsI1j75U4nOpBtkS1cz/Screenshot-2025-09-29-at-20.04.40.png/840x560.webp\"></a></div><div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Code snippet</p>\n</div><div aria-hidden=\"true\" class=\"spoiler-content\">\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"n\">FirstColumnSumZero</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">preamble</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">refine'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">..</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"n\">dsimp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Mat</span><span class=\"o\">[</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"n\">n</span><span class=\"o\">][</span><span class=\"n\">ℝ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">Mat</span><span class=\"o\">[</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"n\">n</span><span class=\"o\">][</span><span class=\"n\">ℝ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\"> </span><span class=\"c1\">-- proof: 3 different goals, one for each property to prove</span>\n</code></pre></div>\n</div></div>\n<ul>\n<li>There is the <code>(preamble := ...)</code> argument where you can define arbitrary tactic-code which is executed before the student can start the level.</li>\n<li>using <code>let M := ...</code> inside the statement results in <code>M</code> being displayed under \"Objects\" (ignore the bug, that you don't see the definition of <code>M</code> up there, that should be fixed...)</li>\n<li>The student starts in a state with three open goals which are the three remaining fields of the structure.</li>\n</ul>\n<p>However, I agree this is certainly more about how far you can push the choices made at lean4game about single-line tactic proofs and there are fair limitations to that approach...</p>",
        "id": 542108012,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1759169426
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/g8c0YpY4N701MiRSgyZk3yLH/Screenshot-2025-09-29-at-20.12.25.png\">Screenshot 2025-09-29 at 20.12.25.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/g8c0YpY4N701MiRSgyZk3yLH/Screenshot-2025-09-29-at-20.12.25.png\" title=\"Screenshot 2025-09-29 at 20.12.25.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1224x574\" src=\"/user_uploads/thumbnail/3121/g8c0YpY4N701MiRSgyZk3yLH/Screenshot-2025-09-29-at-20.12.25.png/840x560.webp\"></a></div><p>It should display the <code>let</code> values like this</p>",
        "id": 542108583,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1759169576
    },
    {
        "content": "<p>(oh and ignore the <code>Mat[n,n][ℝ]</code> syntax, that's just a custom abbreviation to get \"normal\" matrices)</p>",
        "id": 542109527,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1759169880
    },
    {
        "content": "<p>Thanks. I'll see if I can figure out how to make this work later this week.</p>",
        "id": 542152180,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759186165
    },
    {
        "content": "<p>In the meanwhile, for tonight's class I made a <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs\">BooleanWorld</a> but it's pretty badly behaved. </p>\n<p>Specifically, a lot of proofs require cases on a boolean <code>b : B</code>. But you can't see which case you are in while in typewriter mode (i.e., where the case b := false or b := true). Sometimes you can see his in editor mode but sometimes you can't. Eg, we could see the case when defining negation (cases on a single boolean) but not for conjunction (cases on two booleans).</p>",
        "id": 542152429,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759186261
    },
    {
        "content": "<p>There was another issue I encountered on the backend. I was trying to construct some sort of exercise involving a conjunction normal form which involved writing a bunch of iterated ands and ors. My level was supposed to be like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">!</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">something</span>\n</code></pre></div>\n<p>but it seemed that the expression on the left-hand side was badly behaved (defined using a bunch of <code>decides</code> so wouldn't reduce to a truth value even when I was doing case splits on all the boolean variables).</p>\n<p>When I rewrote the expression more laboriously in the form of (eg, this is something different):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>it would reduce correctly after case splitting. Any idea what might be going on?</p>",
        "id": 542152861,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759186417
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/542152861\">said</a>:</p>\n<blockquote>\n<p>There was another issue I encountered on the backend. I was trying to construct some sort of exercise involving a conjunction normal form which involved writing a bunch of iterated ands and ors. My level was supposed to be like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">!</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">something</span>\n</code></pre></div>\n<p>but it seemed that the expression on the left-hand side was badly behaved (defined using a bunch of <code>decides</code> so wouldn't reduce to a truth value even when I was doing case splits on all the boolean variables).</p>\n<p>When I rewrote the expression more laboriously in the form of (eg, this is something different):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>it would reduce correctly after case splitting. Any idea what might be going on?</p>\n</blockquote>\n<p>what was the bunch of <code>decide</code>s that were?</p>",
        "id": 542155766,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759187551
    },
    {
        "content": "<p>I'm on my phone so can't illustrate but I did a case split to turn all the variables into booleans. Then I was expecting the goal state to reduce to something that could be solved with rfl. This is what happened when I used \"and\" but not \"&amp;&amp;\".</p>",
        "id": 542164488,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759193423
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/542155766\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/542152861\">said</a>:</p>\n<blockquote>\n<p>There was another issue I encountered on the backend. I was trying to construct some sort of exercise involving a conjunction normal form which involved writing a bunch of iterated ands and ors. My level was supposed to be like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">!</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">something</span>\n</code></pre></div>\n<p>but it seemed that the expression on the left-hand side was badly behaved (defined using a bunch of <code>decides</code> so wouldn't reduce to a truth value even when I was doing case splits on all the boolean variables).</p>\n<p>When I rewrote the expression more laboriously in the form of (eg, this is something different):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>it would reduce correctly after case splitting. Any idea what might be going on?</p>\n</blockquote>\n<p>what was the bunch of <code>decide</code>s that were?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> here's another weird instance. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- There is some boolean `b` so that `b &amp;&amp; b = b || b` -/</span>\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exists</span><span class=\"w\"> </span><span class=\"n\">false</span>\n</code></pre></div>\n<p>gives no goals while </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- There is some boolean `b` so that `b &amp;&amp; b = b || b` -/</span>\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exists</span><span class=\"w\"> </span><span class=\"n\">false</span>\n</code></pre></div>\n<p>gives</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">unsolved</span><span class=\"w\"> </span><span class=\"n\">goals</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span>\n</code></pre></div>",
        "id": 543002310,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759515876
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/542104088\">said</a>:</p>\n<blockquote>\n<p>We have the following Lean file somewhere in Robo where it is imported by <code>Game/Metadata.lean</code>. (import <code>fconstructor</code> from mathlib and overwrite <code>constructor</code> to use <code>fconstructor</code> instead)</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>modifided constructor from Robo</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">ExtendDoc</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Constructor</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Meta</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"w\"> </span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Game</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Parser</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">constructor</span><span class=\"kd\">]</span>\n<span class=\"kn\">macro</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">constructor</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"constructor\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">fconstructor</span><span class=\"o\">)</span>\n\n<span class=\"n\">extend_docs</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"n\">after</span><span class=\"w\"> </span><span class=\"s2\">\"The variant used in the Robo game is called</span>\n<span class=\"s2\">`fconstructor` in Mathlib. The only difference is the real `constructor` sorts</span>\n<span class=\"s2\">the goals in a way not ideal for the game.\"</span>\n</code></pre></div>\n<p></div></div><br>\n</p>\n</blockquote>\n<p>Thanks <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span>. I was able to use this to get the first equivalence level working!</p>\n<p>In general, is there a way to tell which tactics the Lean game server knows about and which need to be imported. </p>\n<p>In creating the backend of my first file about the existential quantifier, I find that I can use <code>exists</code> to solve the level (but then I'm not allowed to add it to the tactic list). I can add <code>use</code> (which I think I might prefer anyway) to the tactic list but I can't use it on the backend to solve the level.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">Metadata</span>\n\n<span class=\"n\">World</span><span class=\"w\"> </span><span class=\"s2\">\"QuantifierWorld\"</span>\n<span class=\"n\">Level</span><span class=\"w\"> </span><span class=\"mi\">6</span>\n\n<span class=\"n\">Title</span><span class=\"w\"> </span><span class=\"s2\">\"Introducing Existence\"</span>\n\n<span class=\"n\">Introduction</span><span class=\"w\"> </span><span class=\"s2\">\"Let `P : A → Prop` be a predicate over a type `A`.</span>\n\n<span class=\"s2\">To prove the proposition `∃ x : A, P x` it suffices to find any element `a : A` so that `P a` holds.</span>\n\n<span class=\"s2\">Recall the function `and : Bool → Bool → Bool` capturing the logical notion of conjunction. Lean uses alternate notation `x &amp;&amp; y = and x y`.</span>\n\n<span class=\"s2\">Recall also the function `or : Bool → Bool → Bool` capturing the logical notion of disjunction. Lean uses the alternate notation `x || y = or x y`</span>\n\n<span class=\"s2\">In this level, you are asked to prove that there exists some boolean `b : B` so that `b &amp;&amp; b = b || b`.</span>\n\n<span class=\"s2\">The tactic `exists` is used to introduce proves of existentially quantified predicates.</span>\n<span class=\"s2\">\"</span>\n\n<span class=\"sd\">/-- There is some boolean `b` so that `b &amp;&amp; b = b || b` -/</span>\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Type `exists` followed by the name of an element of `Bool` that you believe will satisfy the predicate. In some cases, such as this one, Lean will automatically be able to fill in the rest of the proof.\"</span>\n<span class=\"w\">  </span><span class=\"n\">exists</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"n\">Conclusion</span><span class=\"w\"> </span><span class=\"s2\">\"The next level will give more practice with the existential quantifier. \"</span>\n\n<span class=\"n\">NewTactic</span><span class=\"w\"> </span><span class=\"n\">use</span>\n</code></pre></div>",
        "id": 543002474,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759515948
    },
    {
        "content": "<p>It looks to me like Lean interpreted <code>b &amp;&amp; b = b || b</code> as <code>(b &amp;&amp; (b = b)) || b</code>, whereas I think what you wanted was <code>(b &amp;&amp; b) = (b || b)</code></p>",
        "id": 543002804,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1759516082
    },
    {
        "content": "<p>Ah! Just a parenthesis error then. Thanks for diagnosing my weird error.</p>",
        "id": 543003089,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759516203
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/543002310\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/542155766\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/542152861\">said</a>:</p>\n<blockquote>\n<p>There was another issue I encountered on the backend. I was trying to construct some sort of exercise involving a conjunction normal form which involved writing a bunch of iterated ands and ors. My level was supposed to be like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">!</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">something</span>\n</code></pre></div>\n<p>but it seemed that the expression on the left-hand side was badly behaved (defined using a bunch of <code>decides</code> so wouldn't reduce to a truth value even when I was doing case splits on all the boolean variables).</p>\n<p>When I rewrote the expression more laboriously in the form of (eg, this is something different):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>it would reduce correctly after case splitting. Any idea what might be going on?</p>\n</blockquote>\n<p>what was the bunch of <code>decide</code>s that were?</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> here's another weird instance. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- There is some boolean `b` so that `b &amp;&amp; b = b || b` -/</span>\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exists</span><span class=\"w\"> </span><span class=\"n\">false</span>\n</code></pre></div>\n<p>gives no goals while </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- There is some boolean `b` so that `b &amp;&amp; b = b || b` -/</span>\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exists</span><span class=\"w\"> </span><span class=\"n\">false</span>\n</code></pre></div>\n<p>gives</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">unsolved</span><span class=\"w\"> </span><span class=\"n\">goals</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I will investigate</p>",
        "id": 543003503,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759516399
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> this was a silly error that <span class=\"user-mention\" data-user-id=\"453098\">@Dan Velleman</span> just caught. So don't waste time on it!</p>",
        "id": 543003786,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1759516550
    },
    {
        "content": "<p>I figured it out</p>",
        "id": 543003928,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759516610
    },
    {
        "content": "<p>It's the parsing</p>",
        "id": 543003953,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759516619
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"453098\">Dan Velleman</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/543002804\">said</a>:</p>\n<blockquote>\n<p>It looks to me like Lean interpreted <code>b &amp;&amp; b = b || b</code> as <code>(b &amp;&amp; (b = b)) || b</code>, whereas I think what you wanted was <code>(b &amp;&amp; b) = (b || b)</code></p>\n</blockquote>\n<p>Exactly this</p>",
        "id": 543004036,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759516655
    },
    {
        "content": "<p>That is quite a dubious precendence choice as far as I can see! From <code>Init/Notation.lean</code> in core Lean:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">infixl</span><span class=\"o\">:</span><span class=\"mi\">35</span><span class=\"w\"> </span><span class=\"s2\">\" &amp;&amp; \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">and</span>\n<span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">infixl</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"w\"> </span><span class=\"s2\">\" || \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">or</span>\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">infix</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"w\"> </span><span class=\"s2\">\" = \"</span><span class=\"w\">  </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Eq</span>\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">infixl</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"s2\">\" + \"</span><span class=\"w\">   </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">HAdd</span><span class=\"bp\">.</span><span class=\"n\">hAdd</span>\n<span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">infixl</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"s2\">\" - \"</span><span class=\"w\">   </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">HSub</span><span class=\"bp\">.</span><span class=\"n\">hSub</span>\n<span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">infixl</span><span class=\"o\">:</span><span class=\"mi\">70</span><span class=\"w\"> </span><span class=\"s2\">\" * \"</span><span class=\"w\">   </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">HMul</span><span class=\"bp\">.</span><span class=\"n\">hMul</span>\n<span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">infixl</span><span class=\"o\">:</span><span class=\"mi\">70</span><span class=\"w\"> </span><span class=\"s2\">\" / \"</span><span class=\"w\">   </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">HDiv</span><span class=\"bp\">.</span><span class=\"n\">hDiv</span>\n</code></pre></div>\n<p>so this seems to say \"equality behaves how you'd expect when you're doing arithmetic\" (because the arithmetic precedence numbers are bigger than 50) \"...but not how you'd expect when you're manipulating booleans\" (because the numbers are less than 50, so = will be greedy, which is what caused the problem). Do the boolean people not use <code>=</code> somehow?</p>\n<p>Regarding</p>\n<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/543002474\">said</a>:</p>\n<blockquote>\n<p>In general, is there a way to tell which tactics the Lean game server knows about and which need to be imported.</p>\n</blockquote>\n<p>I think in NNG I would just import everything, and then develop, and then try to minimise imports afterwards. I also do this when writing FLT, sometimes things don't work because I didn't <code>import Mathlib</code> so I often <code>import Mathlib</code> when writing code, and then I have something in CI which stops me from merging any files with <code>import Mathlib</code> in (because then doc-gen generates all mathlib documentation for all of mathlib which makes CI really really slow) and I <code>#min_imports</code> to get the imports back down to a reasonable size (although this might not work with tactics, you might have to click on them to see what you need to import). Maybe <code>import Mathlib.Tactic.Basic</code> is a happy medium here? And probably it won't make CI run forever either, because I don't think doc-gen generates pages for tactics.</p>",
        "id": 543099902,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759595046
    },
    {
        "content": "<p>I think the precedence is just wrong</p>",
        "id": 543099926,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759595080
    },
    {
        "content": "<p>wrong for math</p>",
        "id": 543099940,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759595099
    },
    {
        "content": "<p>for programming maybe I can see an argument (but why not use BEq instead?)</p>",
        "id": 543099975,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759595126
    },
    {
        "content": "<p>The precedence looks correct to me. The expression <code>x = 3 &amp;&amp; y = 2 * x</code> should be read as \"x is 3\" and \"y is 2 times x\". Usually <code>&amp;&amp;</code> and <code>||</code> connect logical clauses and equality is within clauses.</p>",
        "id": 543141570,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1759646259
    },
    {
        "content": "<p>I would agree if that said <code>x == 3 &amp;&amp; y == 2 * x</code></p>",
        "id": 543152624,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759659820
    },
    {
        "content": "<p>But this elaborates to some nasty expression full of <code>decide</code>s</p>",
        "id": 543152660,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759659860
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/543152624\">said</a>:</p>\n<blockquote>\n<p>I would agree if that said <code>x == 3 &amp;&amp; y == 2 * x</code></p>\n</blockquote>\n<p>Agreed. Either that or <code>x = 3 ∧ y = 2 * x</code>. The one I wrote mixes up Prop and Bool in a bad way.<br>\nBut by the same token the expressions that gave the error should also have <code>==</code> if they intend to be part of Boolean arithmetic.</p>",
        "id": 543496185,
        "sender_full_name": "Siddhartha Gadgil",
        "timestamp": 1759833323
    },
    {
        "content": "<p>I feel like <code>x == 3 &amp;&amp; x == 4 = false</code> parses pretty unambiguously (but maybe you disagree?)</p>",
        "id": 543496861,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759833552
    },
    {
        "content": "<p>I'm back with another weird thing I'd like to do with a Lean game.</p>\n<p>I'm in the process of building a natural numbers world, which is meant to just contain a few levels explaining how the natural numbers work in dependent type theory, rather than replicate the whole natural numbers game. I stole the custom induction tactic from the nng4 library (because I was confused by some of the outputs of the vanilla <code>induction n</code>) but unlike the natural numbers game, I'm using mathlib's <code>Nat</code> rather than a custom defined natural numbers.</p>",
        "id": 545783706,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1760822857
    },
    {
        "content": "<p>What I was hoping to do, though, is talk about both induction (proving propositions) and recursion (defining functions out of <code>Nat</code>). A very simple case would be the predecessor function which we could use to show that successor is injective. <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> or anyone do you think it would be possible to do this in a Lean game?</p>",
        "id": 545783764,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1760822945
    },
    {
        "content": "<p>Using the custom <code>induction</code> tactic (which I don't understand) I can define this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- There is a function `pred : Nat → Nat` that sends `0` to `0` and `succ n` to `n`. -/</span>\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">k</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">k</span>\n</code></pre></div>\n<p>but I have no idea if this is the right function because I don't understand what is happening in the successor case. When my cursor is at the start of the final line, the infoview shows</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">case</span><span class=\"w\"> </span><span class=\"n\">succ</span>\n<span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n</code></pre></div>\n<p>I have no idea what <code>a</code> is here. If I write <code>induction n with k hk</code> then <code>a</code> becomes <code>hk</code> so it's the name for the inductive hypothesis, I guess, but what is that?</p>\n<p>I've also tried</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- There is a function `pred : Nat → Nat` that sends `0` to `0` and `succ n` to `n`. -/</span>\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">n_1</span>\n</code></pre></div>\n<p>and at the start of the last line the infoview shows</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">case</span><span class=\"w\"> </span><span class=\"n\">succ</span>\n<span class=\"n\">n_1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n</code></pre></div>\n<p>Again I don't know if I should interpret this as defining the value of the function on <code>succ n_1</code> or something else...</p>",
        "id": 545784033,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1760823382
    },
    {
        "content": "<p>the induction hypothesis is the previous result</p>",
        "id": 545784073,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760823443
    },
    {
        "content": "<p>so if you're defining a function <code>f n</code> by cases on <code>n</code> then in the zero case you define <code>f 0</code> and in the successor case you have a number <code>k</code> and the induction hypothesis <code>hk = f k</code> and you want to define <code>f (k + 1)</code></p>",
        "id": 545784102,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760823504
    },
    {
        "content": "<p>Is there any way to make this more clear in the infoview?</p>",
        "id": 545784116,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1760823525
    },
    {
        "content": "<p>I can't think of how that would work</p>",
        "id": 545784140,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760823564
    },
    {
        "content": "<p>generally you don't use tactics to construct data like this so</p>",
        "id": 545784148,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760823577
    },
    {
        "content": "<p>Yeah, I know I'm being weird. I wasn't sure the game infrastructure would work with the usual syntax of something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span>\n</code></pre></div>",
        "id": 545784181,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1760823615
    },
    {
        "content": "<p>A more basic question: I'm starting each level with <code>open Nat</code> to give me direct access to eg <code>add_succ</code>. I don't know how to get the <code>ℕ</code> notation without breaking everything.</p>",
        "id": 545784402,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1760823890
    },
    {
        "content": "<p>what are your imports</p>",
        "id": 545784429,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760823914
    },
    {
        "content": "<p>have you imported <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=term%E2%84%95#doc\">docs#termℕ</a></p>",
        "id": 545784522,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760824030
    },
    {
        "content": "<p>I haven't the slightest idea what's being imported tbh. But I just added that code in a file in the metadata directory and imported that and now it works. So thanks!</p>",
        "id": 545784749,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1760824383
    },
    {
        "content": "<p>Indeed, the <code>\\N</code> notation is in mathlib not in Lean itself, so one needs to import that file from mathlib or copy-paste the notation<span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>\n<p>generally, having a level which is just <code>Nat -&gt; Nat</code> might be a bit pointless as a student can define <em>any</em> function to solve the level. You probably want a level which says something like `\\exists f : Nat -&gt; Nat, [some condition about f]</p>\n<p>about the induction hyp <code>a : Nat := f k</code>, does it show the <code>:= f k</code> with the regular induction in the normal infoview, or does it not show that either? If it's just about the bug which doesn't display def values in-game, I'm hoping to fix that very soon</p>",
        "id": 545798888,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1760844296
    },
    {
        "content": "<p>it's not a def at that point yet since you're still defining it</p>",
        "id": 545798990,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760844444
    },
    {
        "content": "<p>it's like a list foldr, you have a base case and a folding function which takes as input the value of the list at the current location and also the previous output of the foldr</p>",
        "id": 545799025,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760844513
    },
    {
        "content": "<p><code>Nat</code> is just like a list but it doesn't hold any values (so like a <code>List Unit</code>)</p>",
        "id": 545799039,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760844540
    },
    {
        "content": "<p>and the recursion is like the list foldr</p>",
        "id": 545799048,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760844550
    },
    {
        "content": "<p>so when you're writing your folding function that previous value you take as input doesn't have a definition</p>",
        "id": 545799066,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760844571
    },
    {
        "content": "<p>that makes sense</p>",
        "id": 545799077,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1760844576
    },
    {
        "content": "<p>NNG's <code>induction</code> is really just a copy of mathlib's <code>induction'</code> so I guess mathlib's <code>cases'</code> would be the deaired tactic here, which would accept <code>cases' n with k</code>. Not sure if NNG already has this or if it would nees to be copied from mathlib</p>",
        "id": 545799485,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1760845113
    },
    {
        "content": "<p>Here's a fun idea for a level:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Common</span>\n\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">preamble</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">?_;</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">swap</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>That should give you a level with two goals. in goal 1 you habe to define a function and in goal 2 you prove a property about the defined function</p>",
        "id": 545800028,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1760846021
    },
    {
        "content": "<p>I like the idea of having the level be both to define a function and to prove a property about it. I was experimenting with one about the closed form for the triangle numbers but then gave up because I couldn't get it to work.</p>\n<p>What does this do <code>(preamble :=  let f : Nat -&gt; Nat := ?_; use f; swap)</code> in the code block above?</p>",
        "id": 546041491,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1760981354
    },
    {
        "content": "<p>For those following along, the levels of my (preliminary) natural numbers world can be found <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs\">here</a>. These use <code>induction'</code> rather than <code>cases'</code> which I didn't have time to experiment with.</p>\n<p>From a user experience perspective, the <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs/world/NaturalNumbersWorld/level/4\">recursion level</a> in particular is not so great. The info view gives no information about what the objective is or how to interpret the variables in the context. </p>\n<p>My students also experienced some weird glitches with <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs/world/NaturalNumbersWorld/level/7\">adding successors</a> and <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs/world/NaturalNumbersWorld/level/8\">commutativity of addition</a>. Some were able to <code>rw [add_succ]</code> but others had to <code>rw [Nat.add_succ]</code> and I have no idea why.</p>",
        "id": 546118057,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761003570
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/546041491\">said</a>:</p>\n<blockquote>\n<p>What does this do <code>(preamble :=  let f : Nat -&gt; Nat := ?_; use f; swap)</code> in the code block above?</p>\n</blockquote>\n<p>Inside the <code>preamble</code> argument goes any tactic sequence which is then executed directly after the <code>by</code> and before the player's code.</p>\n<p>So you want to put a tactic sequence there which turns the statement into the goal you want to show to the player. My aproach here was that <code>?_</code> creates an additional goal to fill in later, but it got added as last goal, so I used <code>swap</code> to make the player define the function before proving something about it.</p>\n<p>That's similar to the <code>constructor</code> vs <code>fconstructor</code>, Lean likes to put auxiliary goals at the end and work with metavariables <code>?f</code> which it usually fills automatically eventually, but in the game you usually want the reversed order as people should define all the stuff manually first.</p>",
        "id": 546147504,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1761025661
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/546118057\">said</a>:</p>\n<blockquote>\n<p>From a user experience perspective, the <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs/world/NaturalNumbersWorld/level/4\">recursion level</a> in particular is not so great. The info view gives no information about what the objective is or how to interpret the variables in the context.</p>\n</blockquote>\n<p>I'll try to fix this today and tomorrow, <span class=\"user-mention\" data-user-id=\"252920\">@Alex Kontorovich</span> has also been plagued by this annoying bug</p>",
        "id": 546147691,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1761025819
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/546118057\">said</a>:</p>\n<blockquote>\n<p>Some were able to <code>rw [add_succ]</code> but others had to <code>rw [Nat.add_succ]</code> and I have no idea why.</p>\n</blockquote>\n<p>Make sure all levels have</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n</code></pre></div>\n<p>in their file. Otherwise my guess is that mathlib might have a <code>_root_.add_succ</code> which might have been used instead of <code>Nat.add_succ</code> and that might have caused unexpected behaviour. But that's just a wild guess, haven't looked at the code.</p>",
        "id": 546147966,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1761026033
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/546147691\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/546118057\">said</a>:</p>\n<blockquote>\n<p>From a user experience perspective, the <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs/world/NaturalNumbersWorld/level/4\">recursion level</a> in particular is not so great. The info view gives no information about what the objective is or how to interpret the variables in the context.</p>\n</blockquote>\n<p>I'll try to fix this today and tomorrow, <span class=\"user-mention silent\" data-user-id=\"252920\">Alex Kontorovich</span> has also been plagued by this annoying bug</p>\n</blockquote>\n<p>What I've suggested to my students is to give themselves API, the same way we do in Mathlib! E.g., if you define <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msup><mi>x</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">f(x)=x^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span>, also give yourself a <code>have</code> that you can <code>rewrite</code> by:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">f_is</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>That's a pretty easy workaround for the \"bug\"...</p>",
        "id": 546235262,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1761052855
    },
    {
        "content": "<p>I'm not entirely sure I understand. <span class=\"user-mention\" data-user-id=\"252920\">@Alex Kontorovich</span> can you point me to a level in your game where you do something like this?</p>\n<p>My issue is that a level has a goal of defining, e.g., the sequence of triangular numbers. So the goal is of type <code>Nat -&gt; Nat</code> and after they type <code>intro n; induction n</code> all they see is a goal of type <code>Nat</code> without a reminder that what they are supposed to be doing is defining the 0th triangular number, and similarly for the recursive step.</p>",
        "id": 546271325,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761061592
    },
    {
        "content": "<p>Also this fails:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- There is a function `pred : ℕ → ℕ` that sends `0` to `0` and `succ n` to `n`. -/</span>\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">preamble</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">?_;</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">swap</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n</code></pre></div>\n<p>I have a read underline under the semicolon before swap with error message</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">unexpected</span><span class=\"w\"> </span><span class=\"n\">token</span><span class=\"w\"> </span><span class=\"bp\">';';</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"o\">)</span><span class=\"bp\">'</span>\n</code></pre></div>\n<p>When I remove that and the swap I get the goals in the wrong order.</p>\n<p>Note I'm using a custom <code>constructor</code> redefined to be <code>fconstructor</code> so perhaps I don't need this preamble?</p>",
        "id": 546272374,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761061860
    },
    {
        "content": "<p>Maybe you need more parentheses</p>",
        "id": 546283901,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761065161
    },
    {
        "content": "<p>Try putting parentheses around the entire tactic, so like<br>\n<code>(preamble := (let f : Nat -&gt; Nat := ?_; use f; swap))</code></p>",
        "id": 546284098,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761065219
    },
    {
        "content": "<p>Hi Emily, maybe it would be easier to show you what I have in mind over a quick zoom call? Feel free to send a DM with your availability. Best, Alex</p>",
        "id": 546301314,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1761070425
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"252920\">@Alex Kontorovich</span> I remember why I don't have the <code>let</code> tactic in my library. When I try <code>NewTactic \"let\"</code> I get a weird error. But you have it in your game. How did you manage this?</p>",
        "id": 546348229,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761093768
    },
    {
        "content": "<p>Oh yes, I learned this the hard way! You have to use \"French quotes\":</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- The `let` tactic is like `have`, but for creating variable names or functions. -/</span>\n<span class=\"n\">TacticDoc</span><span class=\"w\"> </span><span class=\"bp\">«</span><span class=\"k\">let</span><span class=\"bp\">»</span>\n\n<span class=\"n\">NewTactic</span><span class=\"w\"> </span><span class=\"bp\">«</span><span class=\"k\">let</span><span class=\"bp\">»</span>\n</code></pre></div>\n<p>In my game, it appears for the first time in Lecture 10 Level 4, in case that's helpful...</p>",
        "id": 546359599,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1761104411
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/545800028\">said</a>:</p>\n<blockquote>\n<p>Here's a fun idea for a level:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Common</span>\n\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">preamble</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">?_;</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">swap</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>That should give you a level with two goals. in goal 1 you habe to define a function and in goal 2 you prove a property about the defined function</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> has been helping me make some levels in <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs\">Boolean world</a> of my dependent type theory game that ask students to define particular functions <code>Bool -&gt; Bool</code> prior to introducing existential quantifiers.</p>\n<p>I was hoping to use a similar trick for the <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs/world/BooleanWorld/level/9\">boss level</a> which ask them to solve a CNF problem, but the tactics don't quite work. In the source code</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">Metadata</span>\n\n<span class=\"n\">World</span><span class=\"w\"> </span><span class=\"s2\">\"BooleanWorld\"</span>\n<span class=\"n\">Level</span><span class=\"w\"> </span><span class=\"mi\">9</span>\n\n<span class=\"n\">Title</span><span class=\"w\"> </span><span class=\"s2\">\"Boss Level\"</span>\n\n<span class=\"n\">Introduction</span><span class=\"w\"> </span><span class=\"s2\">\"</span>\n<span class=\"s2\">An expression involving booleans is in *conjuctive normal form* if it expressed as a conjunction (possibly involving many formulas) of disjunctions (possibly involving many formulas) of either booleans or their negations.</span>\n\n<span class=\"s2\">Using Lean's alternate notation for conjunction, disjunction, and negation, conjunctive normal form statements look like</span>\n\n<span class=\"s2\">`(p || !q || r) &amp;&amp; (q || !r) &amp;&amp; (!p || r)`</span>\n\n<span class=\"s2\">For the Boss Level, you are asked to find booleans `p q r : Bool` so that</span>\n\n<span class=\"s2\">`(!p || q) &amp;&amp; (!q || p) &amp;&amp; (!p || !r) &amp;&amp; (!q || !r) &amp;&amp; (p || q)`</span>\n\n<span class=\"s2\">is satisfiable, meaning that the after substituting appropriate elements for `p q r`, this conjunctive normal form formula is equal to `true`.</span>\n\n<span class=\"s2\">Solve the first three goals by `exact p`, `exact q`, and `exact r` &amp;mdash; replacing the boolean variables by explicit booleans `true` or `false` as appropriate. If you have found the right solution, the final goal should be solvable with `rfl`.</span>\n<span class=\"s2\">\"</span>\n\n<span class=\"sd\">/-- The following expression in conjunctive normal form is satisfiable. -/</span>\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">preamble</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">?_;</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">?_;</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span>\n<span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">))))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"For this level to work, we need to swap the goals. Type `pick_goal 4` to move the fourth goal to the front.\"</span>\n<span class=\"w\">  </span><span class=\"n\">pick_goal</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now supply your conjectured value of `p` with `exact ??`.\"</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now type `pick_goal 3` to move the third goal to the front.\"</span>\n<span class=\"w\">  </span><span class=\"n\">pick_goal</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now supply your conjectured value of `q` with `exact ??`.\"</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now type `pick_goal 2` to move the third goal to the front.\"</span>\n<span class=\"w\">  </span><span class=\"n\">pick_goal</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now supply your conjectured value of `r` with `exact ??`.\"</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">false</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now type ⟨p, q, r, rfl⟩` to use these values and attempt to solve the goal by `rfl`. If this works, congratulations! If not, go back and change the values for `p`, `q`, and `r`. Ignore the funny looking `∃` symbol in the formula, which will be explained in a future world.\"</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">p</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n\n<span class=\"n\">Conclusion</span><span class=\"w\"> </span><span class=\"s2\">\"If this was too easy, you might find it interesting to learn that the general problem of identifying whether a formula in conjunctive normal form is satisfiable is NP complete!\"</span>\n\n<span class=\"sd\">/-- `pick_goal n` will move the `n`-th goal to the front. -/</span>\n<span class=\"n\">TacticDoc</span><span class=\"w\"> </span><span class=\"n\">pick_goal</span>\n\n<span class=\"n\">NewTactic</span><span class=\"w\"> </span><span class=\"n\">pick_goal</span>\n</code></pre></div>\n<p>you can see what I'm trying to do. But I'd like to move the goal swapping tactics and the <code>use</code> stuff into the preamble so the user would solve the four goals with <code>exact true; exact true; exact false; rfl</code>. Is this possible?</p>",
        "id": 547363227,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761595849
    },
    {
        "content": "<p>did you try the goal swapping tactics</p>",
        "id": 547363350,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761595896
    },
    {
        "content": "<p>So <code>swap</code> doesn't seem to work since I need a more complicated permutation.</p>",
        "id": 547363400,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761595915
    },
    {
        "content": "<p>I can immediately think of <code>swap</code>, <code>rotate_left</code>, <code>rotate_right</code></p>",
        "id": 547363404,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761595916
    },
    {
        "content": "<p>oh and there's also <code>pick_goal</code></p>",
        "id": 547363483,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761595948
    },
    {
        "content": "<p>Yeah you can see that's what I'm using to solve the level but I want it in the preamble. This compiles</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- The following expression in conjunctive normal form is satisfiable. -/</span>\n<span class=\"n\">Statement</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">preamble</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">?_;</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">?_;</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">?_;</span><span class=\"w\"> </span><span class=\"n\">pick_goal</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">pick_goal</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">pick_goal</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">,</span>\n<span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">))))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"For this level to work, we need to swap the goals. Type `pick_goal 4` to move the fourth goal to the front.\"</span>\n<span class=\"w\">  </span><span class=\"c1\">-- pick_goal 4</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now supply your conjectured value of `p` with `exact ??`.\"</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now type `pick_goal 3` to move the third goal to the front.\"</span>\n<span class=\"w\">  </span><span class=\"c1\">-- pick_goal 3</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now supply your conjectured value of `q` with `exact ??`.\"</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now type `pick_goal 2` to move the third goal to the front.\"</span>\n<span class=\"w\">  </span><span class=\"c1\">-- pick_goal 2</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now supply your conjectured value of `r` with `exact ??`.\"</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">false</span>\n<span class=\"w\">  </span><span class=\"n\">Hint</span><span class=\"w\"> </span><span class=\"s2\">\"Now type ⟨p, q, r, rfl⟩` to use these values and attempt to solve the goal by `rfl`. If this works, congratulations! If not, go back and change the values for `p`, `q`, and `r`. Ignore the funny looking `∃` symbol in the formula, which will be explained in a future world.\"</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>but it doesn't actually seem to treat the cases in the order I want (p then q then r). When I mouse-over the preamble it looks like that order but when I fill in the values it assigns <code>false</code> to <code>p</code> which is wrong.</p>",
        "id": 547364213,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761596238
    },
    {
        "content": "<p>what order do they end up going in</p>",
        "id": 547364716,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761596451
    },
    {
        "content": "<p>can you <code>pick_goal</code>s in a different order to order it correctly?</p>",
        "id": 547364755,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761596462
    },
    {
        "content": "<p>r, q, p</p>",
        "id": 547364771,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761596468
    },
    {
        "content": "<p>What's weird is in the infoview it looks like I'm doing it right. I've tried replacing all three <code>pick_goal 4s</code> with <code>rotate_right</code> to the same result. Also at the end I need <code>exact &lt;p,q,r,rfl&gt;</code> instead of just <code>rfl</code>.</p>",
        "id": 547364864,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761596505
    },
    {
        "content": "<p>oh</p>",
        "id": 547364936,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761596531
    },
    {
        "content": "<p>well then why not just start with <code>refine ⟨?p, ?q, ?r, ?eq⟩</code> instead of all those <code>let</code>s</p>",
        "id": 547365016,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761596561
    },
    {
        "content": "<p>Thanks. This works. (Though when I tried implementing it for the earlier levels 1, 3, 5 it made the infoview into something a bit less informative for reasons I don't understand.)</p>",
        "id": 547387048,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761607309
    },
    {
        "content": "<p>But for this level it's much cleaner.</p>",
        "id": 547387064,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761607322
    },
    {
        "content": "<p>You might have figured this out already, but I noticed you get much better error messages when you first develop your proof normal (i.e. as single lines after <code>:= by</code>) and only once it's working you start moving the first couple lines into the <code>(preamble := .... )</code> argument.<code>;</code>-separated.</p>\n<p>It looks like parsing is less forgiving inside the argument so you get weirder error messages if something is wrong. (maybe that's because I defined the syntax with the wrong priority or something, haven't checked)</p>",
        "id": 547423054,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1761635710
    },
    {
        "content": "<p>note that  <code>refine ⟨?p, ?q, ?r, ?eq⟩</code> is short for <code>refine ⟨?p, ⟨?q, ⟨?r, ?eq⟩⟩⟩</code> where each parenthesis represents one existential quantifier. that seems to be a nice approach and Im surprised it doesn't work alike for your previous levels</p>",
        "id": 547423794,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1761636069
    },
    {
        "content": "<p>The refine works for eg boolean world level 1 (negation). But when I do the longer preamble with <code>preamble := let f: Bool → Bool := ?_; use f; swap</code> I get the following at the start of the second goal:</p>\n<p><a href=\"/user_uploads/3121/_tDgGdZJlxk50BqM3k8Q5IRt/Screenshot-2025-10-28-at-11.25.39AM.png\">Screenshot 2025-10-28 at 11.25.39 AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/_tDgGdZJlxk50BqM3k8Q5IRt/Screenshot-2025-10-28-at-11.25.39AM.png\" title=\"Screenshot 2025-10-28 at 11.25.39 AM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2546x2346\" src=\"/user_uploads/thumbnail/3121/_tDgGdZJlxk50BqM3k8Q5IRt/Screenshot-2025-10-28-at-11.25.39AM.png/840x560.webp\"></a></div>",
        "id": 547525136,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761665449
    },
    {
        "content": "<p>Whereas if I do the <code>preamble := refine &lt;?f, ?eq&gt;</code> preamble the start of the second goal looks like this:<br>\n<a href=\"/user_uploads/3121/yFfyJ3Lzl_Eyos4-DLNzCsUm/Screenshot-2025-10-28-at-11.29.54AM.png\">Screenshot 2025-10-28 at 11.29.54 AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/yFfyJ3Lzl_Eyos4-DLNzCsUm/Screenshot-2025-10-28-at-11.29.54AM.png\" title=\"Screenshot 2025-10-28 at 11.29.54 AM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2546x2346\" src=\"/user_uploads/thumbnail/3121/yFfyJ3Lzl_Eyos4-DLNzCsUm/Screenshot-2025-10-28-at-11.29.54AM.png/840x560.webp\"></a></div>",
        "id": 547525281,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761665485
    },
    {
        "content": "<p>I think the former is easier to read.</p>",
        "id": 547525405,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761665515
    },
    {
        "content": "<p>then you can <code>refine let f := ?f; ⟨f, ?eq⟩</code> instead</p>",
        "id": 547528583,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761666242
    },
    {
        "content": "<p>That's perfect. Much cleaner from the user side. Thanks for helping me sort this out both of you!</p>",
        "id": 547821767,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761776181
    },
    {
        "content": "<p>I'm having problems installing the lean4game. When running <code>npm install</code> on my local machine, I get the message</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">npm</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"n\">E402</span>\n<span class=\"n\">npm</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"mi\">402</span><span class=\"w\"> </span><span class=\"n\">Payment</span><span class=\"w\"> </span><span class=\"n\">Required</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">GET</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">gitpkg</span><span class=\"bp\">.</span><span class=\"n\">vercel</span><span class=\"bp\">.</span><span class=\"n\">app</span><span class=\"bp\">/</span><span class=\"n\">hhu</span><span class=\"bp\">-</span><span class=\"n\">adam</span><span class=\"bp\">/</span><span class=\"n\">lean4monaco</span><span class=\"bp\">/</span><span class=\"n\">esbuild</span><span class=\"bp\">-</span><span class=\"kn\">import</span><span class=\"bp\">-</span><span class=\"n\">meta</span><span class=\"bp\">-</span><span class=\"n\">url</span><span class=\"bp\">-</span><span class=\"n\">plugin?main</span>\n</code></pre></div>\n<p>Similar errors appear when trying to build a container in GitHub Codespaces.</p>\n<p><span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span></p>",
        "id": 560620726,
        "sender_full_name": "Gihan Marasingha",
        "timestamp": 1764256351
    },
    {
        "content": "<p>It looks like that service (gitpkg) <a href=\"https://github.com/ramasilveyra/gitpkg/issues/68\">hasn't paid its Vercel bill</a> and might be gone for good?<br>\nThe reason it exists seems to be to support installing straight out of git repos when your package lives in a monorepo / in a subdirectory. I don't actually see an alternative to that that isn't \"upload those 2 deps to NPM\" or \"vendor them as subrepos/submodules\" that works, though I'm no JS dev.</p>",
        "id": 560629050,
        "sender_full_name": "Julian Berman",
        "timestamp": 1764258866
    },
    {
        "content": "<p>Thanks for letting me know. I'll probably look at that - together with the latest Lean version bump - on Sunday</p>",
        "id": 560719193,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1764314362
    },
    {
        "content": "<p><a href=\"https://github.com/ramasilveyra/gitpkg/issues/68\">https://github.com/ramasilveyra/gitpkg/issues/68</a></p>\n<p>The <a href=\"https://github.com/hhu-adam/lean4monaco?tab=readme-ov-file#esbuild-import-meta-url-plugin\">readme for lean4monaco</a> says \"This could be replaced by <code>npm install --save-dev @codingame/esbuild-import-meta-url-plugin</code> when <a href=\"https://github.com/CodinGame/esbuild-import-meta-url-plugin/pull/5\">this PR</a> is accepted\", and that PR has been accepted (as a separate <a href=\"https://github.com/CodinGame/esbuild-import-meta-url-plugin/commit/b789fbeedeedb21fbebcb3a5089c321ddaf9d930\">commit</a>), so maybe lean4game can just switch over.</p>\n<p>Of course then you'll discover that the <code>lean4-infoview</code> is also specified using a gitpkg url, which points to version <code>0.4.2</code> of <code>@leanprover/infoview</code>, but I think it has to use gitpkg because the dependencies also specify <code>\"@leanprover/infoview\": \"^0.4.3\"</code> so this allows for 2 different versions to be installed.</p>",
        "id": 560876875,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1764385808
    },
    {
        "content": "<p>I've just tried to update my Lean game for the first time in a few months and the usual import trigger does not seem to be having any effect. Do I just need to be more patient or is there some issue? In case it's relevant the game is <a href=\"https://github.com/emilyriehl/ReintroductionToProofs\">here</a>.</p>",
        "id": 562734929,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1765297830
    },
    {
        "content": "<p>I had the same issue; Jon will update a token tonight, and the trigger mechanism should work tomorrow...</p>",
        "id": 562805481,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1765316673
    },
    {
        "content": "<p>I've updated all access tokens and triggered reimporting for both your games now :)</p>",
        "id": 562820999,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1765322542
    },
    {
        "content": "<p>Would it be possible to add a <code>DisabledDefinition</code> to parallel the current <code>DisabledTheorem</code>? Eg <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs/world/ProductWorld/level/6\">Product World Level 6</a> can be solved with <code>exact Function.curry</code> and it would be great to disable this!</p>",
        "id": 563158294,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1765451331
    },
    {
        "content": "<p>I'm confused, you're adding <code>Function.curry</code> to the game right at that level? You could just postpone its availability to the next level, no? You could say in the Introduction something like \"after this level, you'll be able to write <code>exact Function.curry</code>, but here you'll need to prove the theorem on your own\", something like that? Then move the <code>DefinitionDoc</code>/<code>NewDefinition</code> to Level 7... Would that accomplish what you want?</p>",
        "id": 563188049,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1765460266
    },
    {
        "content": "<p>I'm maybe handling the library for both theorems and definitions in a stupid way. </p>\n<p>I was despairing of the prospects of manually importing each file into all of the subsequent files to make the theorems proven there available later. So both the theorems and definitions in the library are things that are coming from mathlib. How exactly they are being imported into the game is a bit of a mystery to me. </p>\n<p>In particular, I'm not including the construction produced in every single level. (For example, I don't know the mathlib name for the theorem <code>P ∧ Q → P ∨ Q</code> from level 2 of disjunction world.)</p>\n<p>In any case, I've been advised by <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> that since several of my levels ask the player to define an element of a type rather than prove a theorem it's better practice to use external definitions rather than user supplied ones.</p>",
        "id": 563243296,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1765473200
    },
    {
        "content": "<p>On another point, I have a build error right now on my game repository that I don't understand:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Run</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Get</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"w\"> </span><span class=\"n\">Cache</span>\n<span class=\"n\">Mathlib</span><span class=\"w\"> </span><span class=\"n\">Cache</span>\n<span class=\"w\">  </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/</span><span class=\"n\">work</span><span class=\"bp\">/_</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">e0195d82</span><span class=\"bp\">-</span><span class=\"n\">b36b</span><span class=\"bp\">-</span><span class=\"mi\">4</span><span class=\"n\">f64</span><span class=\"bp\">-</span><span class=\"n\">b399</span><span class=\"bp\">-</span><span class=\"mi\">015</span><span class=\"n\">e5347315d</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span>\n</code></pre></div>\n<p>Did I do something wrong and if so how do I fix it?</p>",
        "id": 563243389,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1765473227
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/563243389\">said</a>:</p>\n<blockquote>\n<p>Did I do something wrong and if so how do I fix it?</p>\n</blockquote>\n<p>No, GitHub is whack right now, see <a href=\"https://www.githubstatus.com/incidents/xntfc1fz5rfb\">https://www.githubstatus.com/incidents/xntfc1fz5rfb</a> and <a class=\"stream-topic\" data-stream-id=\"116290\" href=\"/#narrow/channel/116290-rss/topic/GitHub.20Status.20-.20Incident.20History/with/563245634\">#rss &gt; GitHub Status - Incident History</a><br>\nMathlib's master doesn't even build<br>\n(also a bit related - <a href=\"https://www.youtube.com/watch?v=E3_95BZYIVs\">https://www.youtube.com/watch?v=E3_95BZYIVs</a>)</p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"E3_95BZYIVs\" href=\"https://www.youtube.com/watch?v=E3_95BZYIVs\"><img src=\"https://uploads.zulipusercontent.net/c61ab7bfa943b7b8ac4df93f10c781446bddc336/68747470733a2f2f692e7974696d672e636f6d2f76692f45335f3935425a594956732f6d7164656661756c742e6a7067\"></a></div>",
        "id": 563247553,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765474460
    },
    {
        "content": "<p>Oh they posted 15 minutes ago that things are back to normal</p>",
        "id": 563247848,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765474536
    },
    {
        "content": "<p>Tested myself, it's not fixed, GitHub Actions is still the worst</p>",
        "id": 563248837,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765474830
    },
    {
        "content": "<p>Just tried a rerun which gave me a new message</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"bp\">✖</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Running</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"n\">release</span>\n<span class=\"w\">  </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">GitHub</span><span class=\"w\"> </span><span class=\"n\">release</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">'-</span><span class=\"n\">v'</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">details</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n<span class=\"w\">  </span><span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"n\">release</span>\n<span class=\"w\">  </span><span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">ProofWidgets</span><span class=\"w\"> </span><span class=\"n\">cloud</span><span class=\"w\"> </span><span class=\"n\">release</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 563255499,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1765476904
    },
    {
        "content": "<p>Some Mathlib PRs are failing but some are succeeding, I think it's random, probably based on which runner you get</p>",
        "id": 563255785,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765477011
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246635\">Emily Riehl</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/563158294\">said</a>:</p>\n<blockquote>\n<p>Would it be possible to add a <code>DisabledDefinition</code> to parallel the current <code>DisabledTheorem</code>? Eg <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs/world/ProductWorld/level/6\">Product World Level 6</a> can be solved with <code>exact Function.curry</code> and it would be great to disable this!</p>\n</blockquote>\n<p>Currently the game isn't restricting which definitions are allowed in a proof (only tactics and theorems are checked). But I think there should be no obstactle to inplementing that..</p>",
        "id": 563279108,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1765485580
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 563282291,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1765486944
    },
    {
        "content": "<p>I've been seeing this error in the typewriter mode of the game since yesterday when I run my game: <code>Crashed! Go to editor mode and fix your proof! Last server response:</code> And in the console logs, I can only see the following error:  <code>Cannot process request to closed file '.../Game/Metadata.lean'</code>. I could not find any helpful information so far to solve this issue.</p>\n<p>Has anyone ever encountered this error and could help me understand what exactly is going on?</p>",
        "id": 563299900,
        "sender_full_name": "Prakriti",
        "timestamp": 1765495847
    },
    {
        "content": "<p>Just to check: are you unable to play your game at all or does this only happen when you resize the window?</p>",
        "id": 563308682,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765501471
    },
    {
        "content": "<p>I'm not able to play my game at all. Also, currently I'm not able to run my game locally because of this <a href=\"https://github.com/leanprover-community/lean4game/issues/416\">issue</a>. So I decided to go on with <a href=\"https://github.com/leanprover-community/lean4game/issues/416#issuecomment-3618587904\">this suggestion</a>.</p>",
        "id": 563394029,
        "sender_full_name": "Prakriti",
        "timestamp": 1765526444
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"1005595\">Prakriti</span> <a href=\"#narrow/stream/187764-Lean-for-teaching/topic/building.20your.20own.20Lean.20game/near/563299900\">said</a>:</p>\n<blockquote>\n<p>I've been seeing this error in the typewriter mode of the game since yesterday when I run my game: <code>Crashed! Go to editor mode and fix your proof! Last server response:</code> And in the console logs, I can only see the following error:  <code>Cannot process request to closed file '.../Game/Metadata.lean'</code>. I could not find any helpful information so far to solve this issue.</p>\n<p>Has anyone ever encountered this error and could help me understand what exactly is going on?</p>\n</blockquote>\n<p>Could you create a github issue providing a bit more information about which game you are playing, whether this is on the server or a local instance and maybe also which OS/browser you're playing from. Maybe also the concrete level and the code you've entered so far (i.e. toggle to editor mode and copy-paste all the lines of code)</p>\n<p>I'll try to look at that issue this week</p>",
        "id": 563673295,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1765701918
    }
]