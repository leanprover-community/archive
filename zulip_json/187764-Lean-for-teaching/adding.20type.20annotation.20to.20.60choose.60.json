[
    {
        "content": "<p>While you don't <em>have</em> to add type annotation when applying <code>intro</code> or <code>choose</code>, I think it has pedagogical value (perhaps <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> showed me this?). Except that adding type annotation to <code>choose</code> actually doesn't work? Compare: <br>\n<a href=\"/user_uploads/3121/8O4AzBn4LImx7Uz4cs-mT4aV/image.png\">image.png</a><br>\nLean has no problem with <code>intro ε (hε : ε &gt; 0)</code>. But if I try to do <code>choose c (hc : f c = 2) using h</code> here, I get an error:<br>\n<a href=\"/user_uploads/3121/GgZZb5TX89sEowtkbt7bhexH/image.png\">image.png</a><br>\nSurely there's a way to allow <code>choose</code> to take a type annotation (and confirm that it's right), no? Thanks for your help!</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/8O4AzBn4LImx7Uz4cs-mT4aV/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1428x1122\" src=\"/user_uploads/thumbnail/3121/8O4AzBn4LImx7Uz4cs-mT4aV/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/GgZZb5TX89sEowtkbt7bhexH/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1398x1004\" src=\"/user_uploads/thumbnail/3121/GgZZb5TX89sEowtkbt7bhexH/image.png/840x560.webp\"></a></div>",
        "id": 564323626,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1765998056
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"252920\">@Alex Kontorovich</span> I've implemented this feature! See <a href=\"https://github.com/leanprover-community/mathlib4/pull/33033\">https://github.com/leanprover-community/mathlib4/pull/33033</a></p>\n<p>You can now write:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">using</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>The type annotation is checked against the actual type from the existential, and an error is raised if they don't match.</p>",
        "id": 564416972,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1766050914
    },
    {
        "content": "<p>Please try this out, and let me know if it behaves the way you want, e.g. with respect to unification of types.</p>",
        "id": 564417201,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1766051021
    },
    {
        "content": "<p>(Just for context about what Claude can do these days:)</p>\n<p>This was written autonomously by Claude. My only input was:</p>\n<blockquote>\n<p>Please read <br>\n<a href=\"#narrow/channel/187764-Lean-for-teaching/topic/adding.20type.20annotation.20to.20.60choose.60/near/564323626\">https://leanprover.zulipchat.com/#narrow/channel/187764-Lean-for-teaching/topic/adding.20type.20annotation.20to.20.60choose.60/near/564323626</a> </p>\n</blockquote>\n<blockquote>\n<p>Yes please. </p>\n</blockquote>\n<blockquote>\n<p>Please branch, PR, and ping Alex in the original thread about the PR.</p>\n</blockquote>",
        "id": 564417367,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1766051079
    },
    {
        "content": "<p>Maybe we could also support auto-params? See <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/choose.20and.20autoparams/with/564211379\">#general &gt; choose and autoparams</a>. E.g. like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 564417802,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766051244
    },
    {
        "content": "<p>I think I'll leave that for someone else, feels niche. :-)</p>",
        "id": 564419214,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1766051681
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/187764-Lean-for-teaching/topic/adding.20type.20annotation.20to.20.60choose.60/near/564417367\">said</a>:</p>\n<blockquote>\n<p>Please branch, PR, and ping Alex in the original thread about the PR.</p>\n</blockquote>\n<p>(Mildly offtopic, but) I am curious about this part -- was that first message written by Claude and it has API access to your Zulip? Or did it ignore this part of your request Kim? Or have you and Claude merged into a big scary productivity machine?</p>",
        "id": 564457531,
        "sender_full_name": "Julian Berman",
        "timestamp": 1766064054
    },
    {
        "content": "<p>Yes, I gave it a zulip skill, which uses some Claude written wrapper scripts around the API.</p>",
        "id": 564620352,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1766121312
    },
    {
        "content": "<p>The zulip skill is also necessary for it to be able to act on the \"Please read ...\" prompt, as the default <code>Fetch</code> tool can't cope with zulip.</p>",
        "id": 564620405,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1766121360
    }
]