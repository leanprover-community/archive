[
    {
        "content": "<p>Is this a known issue? Ever since 2018 I have used the Zulip app on (many) Ubuntu linux machines and have had a really good experience. I have just bought a top-of-the-range mac laptop (my first ever apple machine) and the Zulip app is manifestly worse; it is really laggy. I have installed no other software on the mac other than VS Code, Lean (+git, curl) and the Zulip app and I have 48 gigs of ram. Is this a known issue or have I set things up wrong? Typing is laggy (typing is not a smooth experience with constant small pauses), switching between channels/topics is laggy (typically 5 seconds pause if I click on a new channel), everything is just more sluggish than my experience on ubuntu which was second to none. The system I'm having trouble with is:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>\"Macbook Pro 16 inch\"\nProcessor Type: M4 Pro Chip\nHard Drive / Storage Size: 2TB\nDisplay Size (inches): 16\nMemory Size (GB): 48\nDisplay Option: Standard glass\nColour: Space Black\n\nprocessor: Apple M4 Pro Chip with 14-core CPU and 20-core GPU (1)\n</code></pre></div>",
        "id": 507505014,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742687814
    },
    {
        "content": "<p>I'm now trying Zulip via a browser (safari) and my experience is back to being exactly what I would expect from Zulip: fast and responsive.</p>",
        "id": 507506258,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742688853
    },
    {
        "content": "<p>I have never used the app -- but perhaps a first thing to check is to confirm you ran the native ARM app and not the Rosetta one? How did you install it Kevin?</p>",
        "id": 507564427,
        "sender_full_name": "Julian Berman",
        "timestamp": 1742735848
    },
    {
        "content": "<p>I googled something like \"install Zulip app\", found myself at <a href=\"https://zulip.com/apps/mac\">https://zulip.com/apps/mac</a> , and clicked the big button saying \"Download Zulip for MacOS\" because I didn't understand the thing in small letters saying \"or download Apple silicon native build\" underneath, and all I know about my new computer is what I posted above and nothing there mentioned the word \"silicon\". I was then faced with some kind of weird sliding block puzzle where I had to drag a Z into a folder and then it seemed to be installed.</p>",
        "id": 507586692,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742751785
    },
    {
        "content": "<p>Other words I don't understand in this context are \"Arm\" and \"Rosetta\" (neither of which are in the description above of my laptop), I know absolutely nothing about the Mac ecosystem.</p>",
        "id": 507586885,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742751919
    },
    {
        "content": "<p>A couple of things:</p>\n<ol>\n<li>I suggest trying out the apple silicon native build. It’s likely to work faster, though I don’t know why that isn’t the most prominently displayed option. </li>\n<li>The “drag a Z into a folder” step is basically how downloaded apps are “installed” in mac</li>\n</ol>",
        "id": 507586906,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1742751940
    },
    {
        "content": "<p>Yeah I guess this would be a sensible attempt to fix this. I'll google for how to uninstall an app :-)</p>",
        "id": 507587009,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742751998
    },
    {
        "content": "<p>Just delete it from the application folder</p>",
        "id": 507587043,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1742752025
    },
    {
        "content": "<p>I had no idea that there was this other Zulip to install. This is a lot snappier.</p>",
        "id": 507587167,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742752105
    },
    {
        "content": "<p>Yeah thanks a lot, this has completely solved the problem. In fact to be honest this whole experience has been very weird. I bought this new mac, I installed Lean and Zulip, and then I tried using Zulip and it was <em>terrible</em> and I thought \"oh my goodness, this was supposed to be an upgrade, what have I done with over £2000?\". But in fact it looks like I just installed the wrong app. It only slowly started dawning on me that the problem was not with the mac when I realised that my VS Code experience was perfect.</p>\n<p>To the Zulip devs, I don't know the first thing about macs but I just bought a new mac laptop, went to <a href=\"https://zulip.com/apps/mac\">https://zulip.com/apps/mac</a> , and clicked the big button to install the app on the basis that I knew exactly what the description and specs of my new machine were and none of the words used in the small print on the website were in the description of the machine. Turned out I made a terrible choice.</p>",
        "id": 507588006,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742752634
    },
    {
        "content": "<p>The only reason I knew that something was wrong was because I'd got extensive experience of the app on Ubuntu which is really snappy.</p>",
        "id": 507588394,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742752875
    },
    {
        "content": "<p>Yes I definitely am not sure why the silicon build is in small letters it almost tricked me as well when I went to open the page.</p>",
        "id": 507589593,
        "sender_full_name": "Julian Berman",
        "timestamp": 1742753624
    },
    {
        "content": "<p>But also Kevin, the right way to install things is with a package manager :) -- so <code>brew install zulip</code> probably would have given you the right thing as well.</p>",
        "id": 507589683,
        "sender_full_name": "Julian Berman",
        "timestamp": 1742753665
    },
    {
        "content": "<p>I wouldn’t recommend brew to anybody who doesn’t have some comfort and proficiency with CLI</p>",
        "id": 507591443,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1742754872
    },
    {
        "content": "<p>I have 35 years of CLI experience -- is that enough? I have brew installed already, in fact I installed Lean following the instructions on the Lean website and it tells you to install brew first.</p>",
        "id": 507591849,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742755146
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/236604-Zulip-meta/topic/mac.20app.20much.20slower.20than.20linux.20app.3F/near/507589683\">said</a>:</p>\n<blockquote>\n<p>with a package manager</p>\n</blockquote>\n<p>In fairness, that's what the App Store is, but Zulip apparently doesn't register their app with it. Of course, <code>brew</code> is fine too.</p>",
        "id": 507591873,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742755171
    },
    {
        "content": "<p>When I started using computers, there was only the command line ;-)</p>",
        "id": 507591899,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742755189
    },
    {
        "content": "<p>My minimum is typically 34 so yes you squeaked over the line.</p>",
        "id": 507591908,
        "sender_full_name": "Julian Berman",
        "timestamp": 1742755196
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> : ofc you are a proficient CLI user. This is for just for the non trivial number of Mac users who are not.</p>",
        "id": 507592187,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1742755350
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/236604-Zulip-meta/topic/mac.20app.20much.20slower.20than.20linux.20app.3F/near/507591873\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/236604-Zulip-meta/topic/mac.20app.20much.20slower.20than.20linux.20app.3F/near/507589683\">said</a>:</p>\n<blockquote>\n<p>with a package manager</p>\n</blockquote>\n<p>In fairness, that's what the App Store is, but Zulip apparently doesn't register their app with it. Of course, <code>brew</code> is fine too.</p>\n</blockquote>\n<p>(Yes I'm saying \"don't click on buttons on websites and drag things from dmgs\")</p>",
        "id": 507592269,
        "sender_full_name": "Julian Berman",
        "timestamp": 1742755417
    },
    {
        "content": "<p>OK thanks, I will not play any more sliding block puzzle games.</p>",
        "id": 507592503,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742755551
    },
    {
        "content": "<p>Since we're outside of Lean territory already, if you want to be nice and buttoned up about it, make a file like this: <a href=\"https://github.com/Julian/dotfiles/blob/main/Brewfile\">https://github.com/Julian/dotfiles/blob/main/Brewfile</a> where each line says <code>brew \"something\"</code> and is a thing you want to install, and then if you ever switch machines you get everything you want to install by running <code>brew bundle install</code> and you're done.</p>",
        "id": 507592840,
        "sender_full_name": "Julian Berman",
        "timestamp": 1742755746
    },
    {
        "content": "<p>But now I'll stop evangelizing :)</p>",
        "id": 507592886,
        "sender_full_name": "Julian Berman",
        "timestamp": 1742755783
    },
    {
        "content": "<p>I uninstalled, out of interest, and reinstalled via <code>brew</code>. I still can't start up the app by typing <code>zulip</code>, in contrast to my experience with Linux, but I seem to have the good version for my laptop with this approach.</p>",
        "id": 507596120,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742757731
    },
    {
        "content": "<p>I think the message on the Zulip website should say \"Using a macbook pro? Click here! Using a [whatever version the big button works best for]? Click here instead!\" or something.</p>",
        "id": 507596222,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742757806
    },
    {
        "content": "<p>I think you can type <code>open -a Zulip</code> <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span></p>",
        "id": 507596265,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742757837
    },
    {
        "content": "<p>(at least I can)</p>",
        "id": 507596314,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742757850
    },
    {
        "content": "<p>I think that having a big button and then a smaller link with some technical words will just mean that everyone who doesn't understand the technical words will press the big button and in my case that resulted in a highly degraded experience. But most people can be expected to know the basic facts about which device they're using (indeed earlier today I was using a Windows maching and had no idea if it was Windows 10 or Windows 11 but google easily told me how to find out).</p>",
        "id": 507596347,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742757871
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/236604-Zulip-meta/topic/mac.20app.20much.20slower.20than.20linux.20app.3F/near/507596120\">said</a>:</p>\n<blockquote>\n<p>I still can't start up the app by typing <code>zulip</code>, in contrast to my experience with Linux</p>\n</blockquote>\n<p>Kevin, if you want a fun learning experience, find the Zulip app (or any app really) with the Finder, right-click (or Ctrl+click) and select \"Show Package Contents\". This gives you some idea how much Apple likes to obfuscate what the OS is doing. It's also why <code>open -a Zulip</code> is necessary, as the binary for the app really does live inside (the folder disguised as an application) <code>/Applications/Zulip</code> and there is no symlink at the location <code>/somewhere/on/my/path/zulip</code>. I left Apple 15 years ago because of this proclivity to obfuscate and to prevent me from actually managing my machine (don't get me started about how the root user isn't really a superuser <span aria-label=\"mad\" class=\"emoji emoji-1f621\" role=\"img\" title=\"mad\">:mad:</span>).</p>",
        "id": 507597376,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742758492
    },
    {
        "content": "<p>We can apparently maybe get the host architecture using:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"k\">await</span><span class=\"w\"> </span><span class=\"nx\">navigator</span><span class=\"p\">.</span><span class=\"nx\">userAgentData</span><span class=\"p\">.</span><span class=\"nx\">getHighEntropyValues</span><span class=\"p\">([</span><span class=\"s1\">'architecture'</span><span class=\"p\">])</span>\n</code></pre></div>\n<p>...but only on <a href=\"https://caniuse.com/mdn-api_navigatoruadata_gethighentropyvalues\">Chrome and Edge</a>.  Which is understandable, since it's kinda sketchy.  But doing that guess when we can is certainly better than not using it.</p>",
        "id": 507779774,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1742826078
    },
    {
        "content": "<p>Even on FF (i.e. regardless of whether you can sniff it from the browser) I think showing the silicon build seems like the better default at this point, no? Intel macs haven't been around for quite awhile.</p>",
        "id": 507802979,
        "sender_full_name": "Julian Berman",
        "timestamp": 1742830515
    },
    {
        "content": "<p>I think we need to show it more prominently regardless, yes.</p>",
        "id": 507804851,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1742830881
    },
    {
        "content": "<p>There's a tension for if we should be feature a thing that runs slowly if it's the wrong version, or a thing which doesn't run at all.</p>",
        "id": 507805062,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1742830919
    },
    {
        "content": "<p>I know nothing about macOS app development but I wonder if it's also possible for the Intel version to detect if it's being run in Rosetta and suggest downloading the other version if so.</p>",
        "id": 507827075,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1742835282
    },
    {
        "content": "<p>Yeah, we're discussing that <a href=\"https://chat.zulip.org/#narrow/channel/9-issues/topic/Suggest.20Apple.20arm64.20build.20when.20we.20can.20recognize.20it\">here</a>.</p>",
        "id": 507863894,
        "sender_full_name": "Alex Vandiver",
        "timestamp": 1742845872
    }
]