[
    {
        "content": "<p>Has anyone else experienced this? I've been away from a desktop machine for two weeks, and coming back, the zulip unread counts are completely different from what I see on both my laptop and mobile app.</p>",
        "id": 453598492,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721798641
    },
    {
        "content": "<p>I've reloaded the page, logged out and logged back in.</p>",
        "id": 453598663,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721798698
    },
    {
        "content": "<p>Any suggestions for things to try?</p>",
        "id": 453598680,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721798704
    },
    {
        "content": "<p>Oh, hmm, now on mobile it shows the same (large!) unread counts that the desktop was showing. So I guess everything is in sync again, just \"wrong\".</p>\n<p>But someone from Zulip will be able to comment whether this is a known bug.</p>",
        "id": 453599036,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721798812
    },
    {
        "content": "<p>It sounds like the mobile app was originally in a loading state where the counts hadn't updated yet.</p>\n<p>Can you say more about why you think they are wrong now?</p>",
        "id": 453601871,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1721800270
    },
    {
        "content": "<p>I'd been using mobile only for about 48 hours. It was successfully tracking unread state during that time. (Over many separate sessions.)</p>\n<p>When I turned on the unused desktop machine today, all my unread counts reset about 48 hours back in time.</p>",
        "id": 453602039,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721800380
    },
    {
        "content": "<p>(i.e. lots of stuff I definitely read in the last two days was marked as unread again)</p>",
        "id": 453602064,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721800400
    },
    {
        "content": "<p>Hm, could you check how messages are <a href=\"https://zulip.com/help/marking-messages-as-read#configure-whether-messages-are-automatically-marked-as-read\">configured</a> to be marked as read on mobile? That seems like helpful context.</p>",
        "id": 453602510,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1721800686
    },
    {
        "content": "<p>I had the exact same issue yesterday (or maybe the day before). So this may be something new.</p>",
        "id": 453611598,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721804396
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439115\">Alya Abbott</span> <a href=\"#narrow/stream/236604-Zulip-meta/topic/unread.20message.20counts.20not.20syncing.20between.20desktop.20and.20mobile/near/453602510\">said</a>:</p>\n<blockquote>\n<p>Hm, could you check how messages are <a href=\"https://zulip.com/help/marking-messages-as-read#configure-whether-messages-are-automatically-marked-as-read\">configured</a> to be marked as read on mobile? That seems like helpful context.</p>\n</blockquote>\n<p>Both desktop and mobile are set to \"always\".</p>",
        "id": 453630531,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721810017
    },
    {
        "content": "<p>This is very puzzling (and sounds frustrating!). I've flagged it to our engineering team for investigation, and will let you know when we have an update.</p>",
        "id": 453775105,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1721848035
    },
    {
        "content": "<p>Do you have any muted streams or topics? This could be <a href=\"https://github.com/zulip/zulip-mobile/issues/3589#issuecomment-559248073\">https://github.com/zulip/zulip-mobile/issues/3589#issuecomment-559248073</a>.</p>",
        "id": 453775321,
        "sender_full_name": "Anders Kaseorg",
        "timestamp": 1721848101
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"425623\">Anders Kaseorg</span> <a href=\"#narrow/stream/236604-Zulip-meta/topic/unread.20message.20counts.20not.20syncing.20between.20desktop.20and.20mobile/near/453775321\">said</a>:</p>\n<blockquote>\n<p>Do you have any muted streams or topics? This could be <a href=\"https://github.com/zulip/zulip-mobile/issues/3589#issuecomment-559248073\">https://github.com/zulip/zulip-mobile/issues/3589#issuecomment-559248073</a>.</p>\n</blockquote>\n<p>No, it's not that. I have many muted streams, but my problem was unread statuses in individual topics being reverted.</p>",
        "id": 453816493,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721865007
    },
    {
        "content": "<p>So we really only have one normal mechanism through which messages can be bulk-marked as unread, which is the \"mark as unread from here\" option. Do you use the combined feed view?</p>\n<p>If you did a  \"mark as unread\" while scrolled up in the combined feed at a scroll position where only a single conversation was visible, that could produce this symptom.</p>",
        "id": 453821710,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1721867163
    },
    {
        "content": "<p>I'm not aware of other mechanisms via the Zulip API that would cause messages that had previously been marked as read ot be marked as unread again.</p>",
        "id": 453821933,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1721867339
    },
    {
        "content": "<p>I also saw the bug and indeed I use \"mark as unread from here\" a lot when I want to go back to some thread later.</p>",
        "id": 453883723,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721895434
    }
]