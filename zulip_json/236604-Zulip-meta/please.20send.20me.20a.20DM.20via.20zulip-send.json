[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"gp\">$ </span>zulip-send<span class=\"w\"> </span>johan@commelin.net<span class=\"w\"> </span>-m<span class=\"w\"> </span><span class=\"s2\">\"This is a test. This message was brought to you by zulip-send.\"</span>\n<span class=\"go\">ERROR:zulip-send:Invalid email 'johan@commelin.net'</span>\n</code></pre></div>",
        "id": 478877124,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729848205
    },
    {
        "content": "<p>My hypothesis is that my account isn't really linked to an email address, because I'm using Github SSO to login to zulip...</p>",
        "id": 478877246,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729848243
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">⊙</span><span class=\"w\">  </span><span class=\"n\">uv</span><span class=\"w\"> </span><span class=\"n\">tool</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"c1\">--from zulip zulip-send johan@commelin.net --config-file ~/Desktop/zuliprc -m \"This is a test. This message was brought to you by zulip-send.\"                                                                                                                                    julian@Mini</span>\n<span class=\"n\">ERROR</span><span class=\"o\">:</span><span class=\"n\">zulip</span><span class=\"bp\">-</span><span class=\"n\">send</span><span class=\"o\">:</span><span class=\"n\">Invalid</span><span class=\"w\"> </span><span class=\"n\">email</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">johan</span><span class=\"bp\">@</span><span class=\"n\">commelin</span><span class=\"bp\">.</span><span class=\"n\">net'</span>\n</code></pre></div>",
        "id": 478914750,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861391
    },
    {
        "content": "<p>But something is different about you and me (hah, many things) -- but I use GitHub SSO to sign in as well, and putting my email address works fine there (just got the DM to myself).</p>",
        "id": 478914872,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861441
    },
    {
        "content": "<p>Mysterious!</p>",
        "id": 478914944,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729861457
    },
    {
        "content": "<p>If you click on Profile Picture &gt; Settings &gt; Account &amp; privacy, is your email listed in the top button?</p>",
        "id": 478915096,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861521
    },
    {
        "content": "<p>I think no, because even clicking on the three dots shows a difference between you, me and say Adam -- my and Adam's emails are listed, yours isn't</p>",
        "id": 478915226,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861563
    },
    {
        "content": "<p>Weird, I see <code>johan@commelin.net</code> there</p>",
        "id": 478915309,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729861593
    },
    {
        "content": "<p>This is what I see:</p>\n<p><a href=\"/user_uploads/3121/gsrXeCW0MZsB7VOvPEO9gwRT/Screenshot-2024-10-25-at-09.06.17.png\">Screenshot 2024-10-25 at 09.06.17.png</a><br>\n<a href=\"/user_uploads/3121/5tUoyKvjesAy9gDW_KXUPult/Screenshot-2024-10-25-at-09.06.26.png\">Screenshot 2024-10-25 at 09.06.26.png</a><br>\n<a href=\"/user_uploads/3121/NhG9WhSxwhfd1mBxKNvd69iQ/Screenshot-2024-10-25-at-09.06.33.png\">Screenshot 2024-10-25 at 09.06.33.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/gsrXeCW0MZsB7VOvPEO9gwRT/Screenshot-2024-10-25-at-09.06.17.png\" title=\"Screenshot 2024-10-25 at 09.06.17.png\"><img data-original-dimensions=\"455x246\" src=\"/user_uploads/thumbnail/3121/gsrXeCW0MZsB7VOvPEO9gwRT/Screenshot-2024-10-25-at-09.06.17.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/5tUoyKvjesAy9gDW_KXUPult/Screenshot-2024-10-25-at-09.06.26.png\" title=\"Screenshot 2024-10-25 at 09.06.26.png\"><img data-original-dimensions=\"522x225\" src=\"/user_uploads/thumbnail/3121/5tUoyKvjesAy9gDW_KXUPult/Screenshot-2024-10-25-at-09.06.26.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/NhG9WhSxwhfd1mBxKNvd69iQ/Screenshot-2024-10-25-at-09.06.33.png\" title=\"Screenshot 2024-10-25 at 09.06.33.png\"><img data-original-dimensions=\"540x285\" src=\"/user_uploads/thumbnail/3121/NhG9WhSxwhfd1mBxKNvd69iQ/Screenshot-2024-10-25-at-09.06.33.png/840x560.webp\"></a></div>",
        "id": 478915353,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861605
    },
    {
        "content": "<p>Are you sure you exist?</p>",
        "id": 478915393,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861622
    },
    {
        "content": "<p>Can you see it now?</p>",
        "id": 478915438,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729861632
    },
    {
        "content": "<p>Yes!</p>",
        "id": 478915457,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861639
    },
    {
        "content": "<p>zulip-send still cannot, on my end</p>",
        "id": 478915484,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729861651
    },
    {
        "content": "<p>Mine neither.</p>",
        "id": 478915496,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861657
    },
    {
        "content": "<p>Maybe a cache issue.</p>",
        "id": 478915504,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861661
    },
    {
        "content": "<p>I made my email address visible to members... (it was only admins + mods, before)</p>",
        "id": 478915540,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729861673
    },
    {
        "content": "<p>Now it works!</p>",
        "id": 478915700,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729861712
    },
    {
        "content": "<p>So even guests must be able to see my email address</p>",
        "id": 478915740,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729861725
    },
    {
        "content": "<p>That's a bit weird</p>",
        "id": 478915765,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729861734
    },
    {
        "content": "<p>The weird part is that you couldn't send one to <em>yourself</em> previously right?</p>",
        "id": 478915890,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861786
    },
    {
        "content": "<p>Exactly!</p>",
        "id": 478915924,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729861798
    },
    {
        "content": "<p>I'd expect the permissions on <code>zulip-send</code> bots to match whatever their owners have by default yeah</p>",
        "id": 478915978,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729861803
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"439115\">@Alya Abbott</span> Is this expected behaviour, or is this a bug?</p>",
        "id": 478916671,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729862051
    },
    {
        "content": "<blockquote>\n<p>I'd expect the permissions on <code>zulip-send</code> bots to match whatever their owners have by default yeah</p>\n</blockquote>\n<p>Bots have permissions according to their role -- they don't have any special access to their owner's account. So a <code>member</code> bot would be able to see your email only if users with that role can do so.</p>",
        "id": 478955075,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1729874874
    },
    {
        "content": "<p>Thanks, I hadn't thought of that!</p>",
        "id": 478975250,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729883724
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"439115\">@Alya Abbott</span> However... Julian could send me DM's even though he couldn't see my email address. Is it also possible to send DM's with <code>zulip-send</code> using a bot in the scenario where the bot cannot see my email address (because I've hidden it from regular users)?</p>",
        "id": 479267406,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730119658
    },
    {
        "content": "<p>Or is this a difference between bots and regular users?</p>",
        "id": 479267528,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730119686
    },
    {
        "content": "<p>The docs say to use your user ID hidden email address. But I tried it and it didn't work for me.</p>",
        "id": 479275065,
        "sender_full_name": "Julian Berman",
        "timestamp": 1730121951
    },
    {
        "content": "<p>(At the time yesterday or whenever)</p>",
        "id": 479275096,
        "sender_full_name": "Julian Berman",
        "timestamp": 1730121959
    },
    {
        "content": "<p>What I tried was... <code>uv tool run --from zulip zulip-send user112680@leanprover.zulipchat.com --config-file ~/Desktop/zuliprc -m \"This is a test. This message was brought to you by zulip-send.\" -vvv</code></p>",
        "id": 479275236,
        "sender_full_name": "Julian Berman",
        "timestamp": 1730121992
    },
    {
        "content": "<p>Let me find where I got that from though I'm sure Alya will know about it.</p>",
        "id": 479275481,
        "sender_full_name": "Julian Berman",
        "timestamp": 1730122056
    },
    {
        "content": "<p>Oh maybe it wasn't docs, it was <a href=\"https://github.com/zulip/python-zulip-api/issues/764#issuecomment-1226343514\">https://github.com/zulip/python-zulip-api/issues/764#issuecomment-1226343514</a> I think, so maybe hosted zulip is configured differently, or something has changed since then.</p>",
        "id": 479276208,
        "sender_full_name": "Julian Berman",
        "timestamp": 1730122246
    },
    {
        "content": "<p>That comment was from before email visitiblity was a personal configuration, it looks like. I don't know the details of this system, so it would be best to ask in <a href=\"https://chat.zulip.org/#narrow/channel/138-user-questions\">https://chat.zulip.org/#narrow/channel/138-user-questions</a>.</p>",
        "id": 479517258,
        "sender_full_name": "Alya Abbott",
        "timestamp": 1730218432
    },
    {
        "content": "<p>I have now posted a variant of this question at <a href=\"https://chat.zulip.org/#narrow/channel/127-integrations/topic/sending.20DMs.20using.20zulip-send/near/2032644\">https://chat.zulip.org/#narrow/channel/127-integrations/topic/sending.20DMs.20using.20zulip-send/near/2032644</a></p>",
        "id": 492459768,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1736326744
    },
    {
        "content": "<p>I need this functionality to automatically send people reminders / review requests.</p>",
        "id": 492459824,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1736326769
    }
]