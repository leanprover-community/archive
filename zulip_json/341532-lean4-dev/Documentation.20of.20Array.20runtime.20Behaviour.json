[
    {
        "content": "<p>Is there any documentation of the runtime representation of scalar arrays? I assume <code>Array Float</code> etc. is a sarray? or is it a vanilla array and can I get the value using <code>lean_unbox(lean_array_cptr(args_raw)[i])</code>?</p>",
        "id": 530870039,
        "sender_full_name": "Kiran",
        "timestamp": 1753490271
    },
    {
        "content": "<p>okay, after playing around a bit, I think I've figured out the behaviour. In an array, scalar values less than 64 bytes are stored inline and can be accessed via unbox, scalar values equal to 64 bytes are accessible through <code>lean_ctor_obj_cptr</code></p>",
        "id": 530876074,
        "sender_full_name": "Kiran",
        "timestamp": 1753494686
    },
    {
        "content": "<p>mhhm but not float32 it seems</p>",
        "id": 530876201,
        "sender_full_name": "Kiran",
        "timestamp": 1753494776
    },
    {
        "content": "<p>Values are stored just boxed (i.e. <code>lean_object*</code>) inside of <code>Array</code>s, just like in <code>Prod</code>, etc.</p>",
        "id": 530944196,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1753535081
    },
    {
        "content": "<p><a href=\"https://lean-lang.org/doc/reference/latest//find/?domain=Verso.Genre.Manual.section&amp;name=ffi-types\">https://lean-lang.org/doc/reference/latest//find/?domain=Verso.Genre.Manual.section&amp;name=ffi-types</a> should contain information about this, although it doesn't mention <code>Float32</code></p>",
        "id": 530944311,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1753535126
    },
    {
        "content": "<p><code>Float32</code> is a historically very recent addition that wasn't played with much so I'm not too surprised about this</p>",
        "id": 530947097,
        "sender_full_name": "Henrik BÃ¶ving",
        "timestamp": 1753536514
    }
]