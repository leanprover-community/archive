[
    {
        "content": "<p>I've been trying to explore issue <a href=\"https://github.com/leanprover/lean4/issues/7135\">https://github.com/leanprover/lean4/issues/7135</a>, \"Keep goal view active on unparsed input\". I think I've kind of got a grasp on how the code is organized; I'm pretty sure the issue is somewhere in <code>src/Lean/Parser</code>, or maybe <code>src/Lean/Language</code>, or one of the core files in <code>src/Lean/Elab</code>. (When I started, I assumed all the core stuff like this would be in C++, so I've at least made that amount of progress). </p>\n<p>The main thing I'm struggling with now is finding a decent dev cycle. Currently my dev cycle is something like \"add a <code>dbg_trace</code> to <code>src/Lean/Parser/Basic.lean</code>, run <code>make -C build/release -j$(nproc || sysctl -n hw.logicalcpu)</code>, wait a few minutes, go to my test project in vscode, click 'Restart File' in the info view, and look at the Output tab to see what got logged.\" That's compounded by the fact that many of the things I'd want to log, like <code>cmdState.messages</code> don't have a ToString, so figuring out how to log them either takes a long time, or I just give up.</p>\n<p>I also tried <code>logInfo</code>, but that's even harder because it can only be used in certain places.</p>\n<p>I also saw <a href=\"https://github.com/leanprover/lean4/blob/12536d2015eea27c7bad4dd47fdc6150c0f3ebb6/doc/dev/debugging.md\">https://github.com/leanprover/lean4/blob/12536d2015eea27c7bad4dd47fdc6150c0f3ebb6/doc/dev/debugging.md</a> talked about traces, but I haven't figured that out. If I set <code>set_option trace.Elab.command true</code> in <code>src/Lean/Language/Lean.lean</code> and rebuild, I see it emits a lot of info during build, but when I go to my test project in vscode and click Reload File, it doesn't seem to have an effect on the output tab. Also if I go back to <code>src/Lean/Language/Lean.lean</code> and try to add <code>trace[Elab.command] \"hello\"</code> somewhere, it tells me <code>failed to synthesize Lean.MonadTrace Lean.Language.Lean.LeanProcessingM</code>, so I'm generally stuck trying to figure out when and how to use the trace functionality.</p>\n<p>Does anyone have guidance for what a productive dev flow should look like in lean parser etc code? I mean, ideally it'd be great if the debugging docs had a screen recording of what a proper dev flow would look like (should I file that as a github issue?), as I'm sure it would be useful for other new joiners. But I'll take whatever I can get.</p>",
        "id": 527296432,
        "sender_full_name": "Dax Fohl",
        "timestamp": 1751739100
    },
    {
        "content": "<p>(Tangent, on  <a href=\"https://github.com/leanprover/lean4/issues/7135\">#7135</a> itself, I just saw there's also a <code>src/Lean/Server</code> folder for the LSP code. Is the problem in <a href=\"https://github.com/leanprover/lean4/issues/7135\">#7135</a> actually in the parser itself, or could it just be in the LSP?)</p>",
        "id": 527297656,
        "sender_full_name": "Dax Fohl",
        "timestamp": 1751740661
    },
    {
        "content": "<p>(Also I fixed some broken links in the markdown dev docs in <a href=\"https://github.com/leanprover/lean4/pull/8785\">https://github.com/leanprover/lean4/pull/8785</a>, if anyone has time to look.)</p>",
        "id": 527301845,
        "sender_full_name": "Dax Fohl",
        "timestamp": 1751746172
    }
]