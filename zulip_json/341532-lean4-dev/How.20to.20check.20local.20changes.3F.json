[
    {
        "content": "<p>I'm just going through the dev guide and trying to make some local changes and see the effect, but having trouble connecting the dots.</p>\n<p>I figured an easy task to see if things are set up properly would be to remove the try/catch added in <a href=\"https://github.com/leanprover/lean4/pull/4177\">https://github.com/leanprover/lean4/pull/4177</a> and see if it reverted to the old behavior.</p>\n<p>First I went through the user guide (not dev guide) and created an empty project with the proof from that PR, and observed the fixed behavior.</p>\n<p>Then I went through the dev guide. I cloned the repo, built it (a few minutes), removed the try/catch and rebuilt. The build output looked reasonable; it saw the change in Simp.lean, and incrementally built everything from there on (just a few seconds).</p>\n<p>I installed elan, and ran </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">elan</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">link</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage1</span>\n<span class=\"n\">elan</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">link</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">stage0</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span>\n</code></pre></div>\n<p>per the docs. I verified it's in the path.</p>\n<p>Now back in my user project, I updated <code>lean-toolchain</code> from <code>leanprover/lean4:v4.20.1</code> to <code>lean4</code> (is this correct?). VSCode noticed the change and asked to restart Lean, which I did, and it succeeds. Additionally I checked from the project folder command line, <code>elan show</code> reports </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lean4</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">overridden</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">daxfohl</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">test</span><span class=\"bp\">/</span><span class=\"n\">Untitled</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain'</span><span class=\"o\">)</span>\n<span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">4.22</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">pre</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">arm64</span><span class=\"bp\">-</span><span class=\"n\">apple</span><span class=\"bp\">-</span><span class=\"n\">darwin24</span><span class=\"bp\">.</span><span class=\"m\">5</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"w\"> </span><span class=\"n\">ec9ff12fc653</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Release</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>So, seems like everything is hooked up correctly. But when I go back to the user project and edit the simp args like in the PR's video, it still works like the try/catch is still there, i.e. I'm not seeing the effect of my changes at all.</p>\n<p>Is there anything obvious I'm doing wrong?</p>",
        "id": 524082869,
        "sender_full_name": "Dax Fohl",
        "timestamp": 1749928293
    },
    {
        "content": "<p>How about you try modifying Lean in a way that would be much more visible, like add in a <code>logInfo</code>?</p>",
        "id": 524082919,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749928370
    },
    {
        "content": "<p>It's possible that other things have changed in the meantime. For instance, <a href=\"https://github.com/leanprover/lean4/pull/5863\">lean4#5863</a> might be a confounding your test.</p>",
        "id": 524082969,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749928448
    },
    {
        "content": "<p>Yeah that's what I'll try next. Main reason I didn't is, just getting started IDK what <code>logInfo</code> does or how to use it or check it; it was easier to undo a PR and check whether it matches the video. I'll give the <code>logInfo</code> a shot though; seems pretty obvious what it should do.</p>",
        "id": 524083160,
        "sender_full_name": "Dax Fohl",
        "timestamp": 1749928641
    },
    {
        "content": "<p>Can I ask what made you decide to select this PR in particular?</p>",
        "id": 524083246,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749928773
    },
    {
        "content": "<p>Hmm, IDK if there's a robust reason. I was looking at issue <a href=\"https://github.com/leanprover/lean4/issues/4181\">https://github.com/leanprover/lean4/issues/4181</a> because it had lots of upvotes, so I was thinking of maybe looking into that. The other PR was linked there in the 2nd comment as an example, and when I was setting up the dev environment, that just came to mind as something I could do to check whether it was set up right or not.</p>",
        "id": 524083527,
        "sender_full_name": "Dax Fohl",
        "timestamp": 1749929164
    },
    {
        "content": "<p>Anyway, <code>logInfo</code> works, so looks like you were right about 5863. So maybe the try/catch that was added in 4177 is no longer needed and should be removed?</p>",
        "id": 524083636,
        "sender_full_name": "Dax Fohl",
        "timestamp": 1749929306
    },
    {
        "content": "<p>Also do you think it's worth adding a section to <a href=\"https://github.com/leanprover/lean4/blob/master/doc/dev/index.md\">https://github.com/leanprover/lean4/blob/master/doc/dev/index.md</a> for how to check the setup?</p>",
        "id": 524083829,
        "sender_full_name": "Dax Fohl",
        "timestamp": 1749929543
    }
]