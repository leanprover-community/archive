[
    {
        "content": "<p>Would it be possible to add a feature where we can run a Lean function with a different allocator?</p>\n<p>In the past I have encountered problems where tactics would exhaust the memory on the host machine, forcing the host machine to reboot.</p>",
        "id": 514591225,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745714637
    },
    {
        "content": "<p>How would running specific functions of your program with a custom allocator alleviate this problem?</p>",
        "id": 514618872,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1745737845
    },
    {
        "content": "<p>We already have <code>lean --memory</code></p>",
        "id": 514633540,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1745750581
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110024\">Sebastian Ullrich</span> <a href=\"#narrow/channel/341532-lean4-dev/topic/Prevent.20memory.20exhaustion/near/514633540\">said</a>:</p>\n<blockquote>\n<p>We already have <code>lean --memory</code></p>\n</blockquote>\n<p>What if I call a function via FFI</p>",
        "id": 514663579,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745772807
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/341532-lean4-dev/topic/Prevent.20memory.20exhaustion/near/514618872\">said</a>:</p>\n<blockquote>\n<p>How would running specific functions of your program with a custom allocator alleviate this problem?</p>\n</blockquote>\n<p>If a tactic makes unbounded amount of allocations that exceed a limit, the allocator could deny the allocation request and return an error?</p>",
        "id": 514663621,
        "sender_full_name": "Leni Aniva",
        "timestamp": 1745772840
    },
    {
        "content": "<p>There are far better OS primitives for this job such as Linux cgroups</p>",
        "id": 514664428,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1745773430
    },
    {
        "content": "<p>I don't think Lean code can recover from a C++ <code>std::bad_alloc</code></p>",
        "id": 514669113,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745777041
    },
    {
        "content": "<p>That is, all that could happen upon denial is the process terminating, which may as well be handled by the OS.</p>",
        "id": 514669228,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745777106
    }
]