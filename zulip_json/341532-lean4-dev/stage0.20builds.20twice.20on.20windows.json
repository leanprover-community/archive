[
    {
        "content": "<p>When building stage0 I now noticed multiple times that everything under <code>stage0/stdlib/Lean</code> seems to be built twice (without caching for the second pass!), specifically:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Std/Time/Zoned/ZoneRules.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/AddDecl.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Attributes.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/BuiltinDocAttr.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Class.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Compiler/ClosedTermCache.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Compiler/CSimpAttr.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Compiler/ExternAttr.c\n...\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/InteractiveCode.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/InteractiveDiagnostic.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/InteractiveGoal.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/TaggedText.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/Types.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/UserWidget.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/AddDecl.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Attributes.c\n...\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/Diff.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/InteractiveCode.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/InteractiveDiagnostic.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/InteractiveGoal.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/TaggedText.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/Types.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Widget/UserWidget.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lake/Build/Actions.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lake/Build/Common.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lake/Build/Executable.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lake/Build/ExternLib.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lake/Build/Facets.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lake/Build/Index.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lake/Build/InputFile.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lake/Build/Job/Basic.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lake/Build/Key.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lake/Build/Library.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/BuiltinDocAttr.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Class.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Compiler/ClosedTermCache.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Compiler/CSimpAttr.c\n[    ] Building C:/Users/robin/lean4dev/lean4/stage0/src/../stdlib//Lean/Compiler/ExternAttr.c\n</code></pre></div>\n<p>I'm not sure why exactly this might happen but I attached the full build log here:<br>\n<a href=\"/user_uploads/3121/_EraILmBDmta7C_bVVyBO1vl/build-log.txt\">build log.txt</a></p>",
        "id": 538462615,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757430925
    },
    {
        "content": "<p>This has always been the case on windows I think? At least I can remember seeing it months ago on our Windows debugging setup.</p>",
        "id": 538462969,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757431022
    },
    {
        "content": "<p>Is there a reason for this?</p>",
        "id": 538463081,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757431049
    },
    {
        "content": "<p>Iirc it was because we are forced to build two DLLs on Windows because Microsoft is in denial about developers needing more than 2^16 symbols per DLL but I don't remember the precise details why it has to be built twice for that.</p>",
        "id": 538463219,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757431087
    },
    {
        "content": "<p>We're building three DLLs though and only building twice... idk</p>",
        "id": 538463441,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757431153
    },
    {
        "content": "<p>Oh the third DLL is new yeah</p>",
        "id": 538463529,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757431177
    },
    {
        "content": "<p>I don't quite understand why you'd need to build the same thing multiple times then though; wouldn't you just need to select the right <code>.o</code> files to build the DLLs?</p>",
        "id": 538463972,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757431305
    },
    {
        "content": "<p>I don't remember, I try to not think too much about my interactions with Windows as it is a completely unnecessary pain every time <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>. You can probably trace out what the different invocations to the C compiler are by asking make with <code>make VERBOSE=1</code></p>",
        "id": 538464394,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757431416
    },
    {
        "content": "<p>Well I don't really want to invalidate stage0 since I'd need to rebuild basically everything then... I'll maybe try that next time I need it</p>",
        "id": 538464886,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757431560
    },
    {
        "content": "<p>But it should be in cache now right?</p>",
        "id": 538464972,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757431575
    },
    {
        "content": "<p>Yeah right I mean right now it won't run the C compiler at all for stage0, I would need to change stuff in stage0 to get compiler calls</p>",
        "id": 538465088,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757431604
    },
    {
        "content": "<p>Right this is what it looks like now</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Rebuild with cache</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>[  4%] Performing update step for 'mimalloc'\n-- Already at requested tag: v2.2.3\n[  8%] No patch step for 'mimalloc'\n[ 12%] No configure step for 'mimalloc'\n[ 16%] No build step for 'mimalloc'\n[ 20%] No install step for 'mimalloc'\n[ 25%] Completed 'mimalloc'\n[ 33%] Built target mimalloc\n[ 37%] Performing configure step for 'stage0'\n-- No build type selected, default to Release\n-- 64-bit machine detected\n-- Windows detected\n-- LIBUV_LDFLAGS: -LC:/msys64/clang64/lib-luv-lpsapi-luser32-ladvapi32-liphlpapi-luserenv-lws2_32-ldbghelp-lole32-lshell32\n-- LIBUV_INCLUDE_DIRS: C:/msys64/clang64/include\n-- stage0 sha1: 068d969076cdd71d9c3f2e26dcf8373d764cc1a2\n-- Configuring done (0.3s)\n-- Generating done (0.3s)\n-- Build files have been written to: C:/Users/robin/lean4dev/lean4/build/release/stage0\n[ 41%] Performing build step for 'stage0'\n[  2%] Built target leanmain\n[  4%] Built target leanmanifest\n[  5%] Built target initialize\n[  7%] Built target constructions\n[  9%] Built target leanshell\n[ 35%] Built target kernel\n[ 35%] Built target util\n[ 36%] Built target leaninitialize\n[ 52%] Built target library\n[ 97%] Built target leanrt_initial-exec\n[ 99%] Built target leanrt\n[ 99%] Built target leancpp_1\n[100%] Built target leancpp\n[100%] Built target make_stdlib\n[100%] Built target Init_shared\n[100%] Built target leanshared\n[100%] Built target lean\n[100%] Built target lake_shared\n[100%] Built target lake\n[ 45%] No install step for 'stage0'\n[ 50%] Completed 'stage0'\n[ 66%] Built target stage0\n[ 70%] Performing configure step for 'stage1'\n-- No build type selected, default to Release\n-- 64-bit machine detected\n-- Windows detected\n-- LIBUV_LDFLAGS: -LC:/msys64/clang64/lib-luv-lpsapi-luser32-ladvapi32-liphlpapi-luserenv-lws2_32-ldbghelp-lole32-lshell32\n-- LIBUV_INCLUDE_DIRS: C:/msys64/clang64/include\n-- git commit sha1: ce1e63fe3d1ae3b102100293ce08c6c1c53898e8\n-- Configuring done (0.3s)\n-- Generating done (0.3s)\n-- Build files have been written to: C:/Users/robin/lean4dev/lean4/build/release/stage1\n[ 75%] Performing build step for 'stage1'\n[  0%] Built target copy-cadical\n[  2%] Built target leanmanifest\n[  4%] Built target leanmain\n[  5%] Built target initialize\n[  7%] Built target leanshell\n[  9%] Built target constructions\n[ 22%] Built target kernel\n[ 35%] Built target util\n[ 36%] Built target leaninitialize\n[ 52%] Built target library\n[ 75%] Built target leanrt_initial-exec\n[ 99%] Built target leanrt\n[100%] Built target leancpp\n[100%] Built target leancpp_1\nℹ [3997/5155] Replayed Lean.Meta.WHNF:c.o\ninfo: stderr:\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\WHNF.c:92:26: warning: redeclaration of 'lean_whnf' should not add 'dllexport' attribute [-Wdll-attribute-on-redeclaration]\n   92 | LEAN_EXPORT lean_object* lean_whnf(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |                          ^\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\WHNF.c:75:14: note: previous declaration is here\n   75 | lean_object* lean_whnf(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |              ^\n1 warning generated.\nℹ [4525/5155] Replayed Lean.Meta.LevelDefEq:c.o\ninfo: stderr:\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\LevelDefEq.c:114:26: warning: redeclaration of 'lean_is_level_def_eq' should not add 'dllexport' attribute [-Wdll-attribute-on-redeclaration]\n  114 | LEAN_EXPORT lean_object* lean_is_level_def_eq(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |                          ^\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\LevelDefEq.c:29:14: note: previous declaration is here\n   29 | lean_object* lean_is_level_def_eq(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |              ^\n1 warning generated.\nℹ [4527/5155] Replayed Lean.Meta.ExprDefEq:c.o\ninfo: stderr:\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\ExprDefEq.c:953:26: warning: redeclaration of 'lean_is_expr_def_eq' should not add 'dllexport' attribute [-Wdll-attribute-on-redeclaration]\n  953 | LEAN_EXPORT lean_object* lean_is_expr_def_eq(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |                          ^\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\ExprDefEq.c:447:14: note: previous declaration is here\n  447 | lean_object* lean_is_expr_def_eq(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |              ^\n1 warning generated.\nℹ [5068/5619] Replayed Lean.Elab.Tactic.Try:c.o\ninfo: stderr:\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Elab\\Tactic\\Try.c:819:26: warning: redeclaration of 'lean_eval_suggest_tactic' should not add 'dllexport' attribute [-Wdll-attribute-on-redeclaration]\n  819 | LEAN_EXPORT lean_object* lean_eval_suggest_tactic(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |                          ^\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Elab\\Tactic\\Try.c:338:14: note: previous declaration is here\n  338 | lean_object* lean_eval_suggest_tactic(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |              ^\n1 warning generated.\nℹ [5094/5619] Replayed Lean.Meta.Tactic.Grind.Arith.Cutsat.Var:c.o\ninfo: stderr:\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\Tactic\\Grind\\Arith\\Cutsat\\Var.c:121:26: warning: redeclaration of 'lean_grind_cutsat_mk_var' should not add 'dllexport' attribute [-Wdll-attribute-on-redeclaration]\n  121 | LEAN_EXPORT lean_object* lean_grind_cutsat_mk_var(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |                          ^\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\Tactic\\Grind\\Arith\\Cutsat\\Var.c:50:14: note: previous declaration is here\n   50 | lean_object* lean_grind_cutsat_mk_var(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |              ^\n1 warning generated.\nℹ [5099/5619] Replayed Lean.Meta.Tactic.Grind.Arith.Cutsat.LeCnstr:c.o\ninfo: stderr:\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\Tactic\\Grind\\Arith\\Cutsat\\LeCnstr.c:296:26: warning: redeclaration of 'lean_grind_cutsat_assert_le' should not add 'dllexport' attribute [-Wdll-attribute-on-redeclaration]\n  296 | LEAN_EXPORT lean_object* lean_grind_cutsat_assert_le(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |                          ^\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\Tactic\\Grind\\Arith\\Cutsat\\LeCnstr.c:273:14: note: previous declaration is here\n  273 | lean_object* lean_grind_cutsat_assert_le(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |              ^\n1 warning generated.\nℹ [5101/5619] Replayed Lean.Meta.Tactic.Grind.Arith.Cutsat.EqCnstr:c.o\ninfo: stderr:\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\Tactic\\Grind\\Arith\\Cutsat\\EqCnstr.c:476:26: warning: redeclaration of 'lean_grind_cutsat_assert_eq' should not add 'dllexport' attribute [-Wdll-attribute-on-redeclaration]\n  476 | LEAN_EXPORT lean_object* lean_grind_cutsat_assert_eq(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |                          ^\nC:\\Users\\robin\\lean4dev\\lean4\\build\\release\\stage1\\lib\\temp\\Lean\\Meta\\Tactic\\Grind\\Arith\\Cutsat\\EqCnstr.c:382:14: note: previous declaration is here\n  382 | lean_object* lean_grind_cutsat_assert_eq(lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*, lean_object*);\n      |              ^\n1 warning generated.\nBuild completed successfully (5619 jobs).\n[100%] Built target make_stdlib\n[100%] Built target Init_shared\n[100%] Built target leanshared\n[100%] Built target leanc\n[100%] Built target lake_shared\n[100%] Built target lean\n[100%] Built target lake\n[ 79%] No install step for 'stage1'\n[ 83%] Completed 'stage1'\n[100%] Built target stage1\n</code></pre></div>\n</div></div>",
        "id": 538465531,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757431721
    },
    {
        "content": "<p>I don't know how it works on Windows but on Linux we use a <code>ccache</code> wrapper so if you remove <code>build/release</code>, recreate it and run <code>make</code> it should do those <code>ccache</code> calls so you can see the compiler invocation but the <code>ccache</code> will instantly return the object file from its object file cache. Though of course if Windows doesn't have a <code>ccache</code> this isn't going to help you.</p>",
        "id": 538465643,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757431755
    },
    {
        "content": "<p>I mean I have a ccache on msys</p>",
        "id": 538465765,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757431793
    },
    {
        "content": "<p>I <em>hope</em> it actually gets used...</p>",
        "id": 538465826,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757431806
    },
    {
        "content": "<p>Okay I deleted everything that's directly in build/release/stage0/lib/temp and ran <code>make -j12 VERBOSE=1</code>:<br>\n<a href=\"/user_uploads/3121/PZUoO9VyQiZXejILs61InfTG/verbose.txt\">verbose.txt</a></p>",
        "id": 538466868,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757432087
    },
    {
        "content": "<p>I suppose this is the interesting part:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"w\">    </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"o\">[</span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">leancpp_1</span>\n<span class=\"o\">[</span><span class=\"w\">    </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"bp\">.</span><span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DLEAN_EXPORTING</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"s2\">\"T\"</span><span class=\"n\">hin</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">seems</span><span class=\"w\"> </span><span class=\"n\">necessary</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">preserve</span><span class=\"w\"> </span><span class=\"n\">paths</span><span class=\"w\"> </span><span class=\"n\">so</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">we</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">distinguish</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">between</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">same</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">manipulating</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">for</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"ss\">`libleanshared_</span><span class=\"bp\">*`</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Leaving</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src'</span>\n<span class=\"s2\">\"/C/Users/robin/lean4dev/lean4/build/release/stage0/bin/leanmake\"</span><span class=\"w\"> </span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"n\">lib</span><span class=\"bp\">.</span><span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">PKG</span><span class=\"bp\">=</span><span class=\"n\">Std</span><span class=\"w\"> </span><span class=\"n\">LEAN</span><span class=\"bp\">=</span><span class=\"s2\">\"/bin/lean\"</span><span class=\"w\"> </span><span class=\"n\">LEANC</span><span class=\"bp\">=</span><span class=\"s2\">\"C:/Users/robin/lean4dev/lean4/build/release/stage0/leanc.sh\"</span><span class=\"w\"> </span><span class=\"n\">OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../build/release/stage0/lib\"</span><span class=\"w\"> </span><span class=\"n\">LIB_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../build/release/stage0/lib/lean\"</span><span class=\"w\"> </span><span class=\"n\">OLEAN_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../build/release/stage0/lib/lean\"</span><span class=\"w\"> </span><span class=\"n\">BIN_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"C:/Users/robin/lean4dev/lean4/build/release/stage0/bin\"</span><span class=\"w\"> </span><span class=\"n\">LEAN_OPTS</span><span class=\"bp\">+=</span><span class=\"s2\">\" -DElab.async=true\"</span><span class=\"w\"> </span><span class=\"n\">LEANC_OPTS</span><span class=\"bp\">+=</span><span class=\"s2\">\" -IC:/Users/robin/lean4dev/lean4/build/release/stage0/include -O3 -DNDEBUG\"</span><span class=\"w\"> </span><span class=\"n\">LEAN_AR</span><span class=\"bp\">=</span><span class=\"s2\">\"C:/msys64/clang64/bin/llvm-ar.exe\"</span><span class=\"w\"> </span><span class=\"n\">MORE_DEPS</span><span class=\"bp\">+=</span><span class=\"s2\">\"/bin/lean\"</span><span class=\"w\"> </span><span class=\"n\">CMAKE_LIKE_OUTPUT</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">C_ONLY</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">C_OUT</span><span class=\"bp\">=</span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">/</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Entering</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src'</span>\n<span class=\"o\">[</span><span class=\"w\">    </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"o\">[</span><span class=\"w\">    </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"bp\">.</span><span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DLEAN_EXPORTING</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"s2\">\"T\"</span><span class=\"n\">hin</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">seems</span><span class=\"w\"> </span><span class=\"n\">necessary</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">preserve</span><span class=\"w\"> </span><span class=\"n\">paths</span><span class=\"w\"> </span><span class=\"n\">so</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">we</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">distinguish</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">between</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">same</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">manipulating</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">for</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"ss\">`libleanshared_</span><span class=\"bp\">*`</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Leaving</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src'</span>\n<span class=\"s2\">\"/C/Users/robin/lean4dev/lean4/build/release/stage0/bin/leanmake\"</span><span class=\"w\"> </span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"n\">lib</span><span class=\"bp\">.</span><span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">PKG</span><span class=\"bp\">=</span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">LEAN</span><span class=\"bp\">=</span><span class=\"s2\">\"/bin/lean\"</span><span class=\"w\"> </span><span class=\"n\">LEANC</span><span class=\"bp\">=</span><span class=\"s2\">\"C:/Users/robin/lean4dev/lean4/build/release/stage0/leanc.sh\"</span><span class=\"w\"> </span><span class=\"n\">OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../build/release/stage0/lib\"</span><span class=\"w\"> </span><span class=\"n\">LIB_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../build/release/stage0/lib/lean\"</span><span class=\"w\"> </span><span class=\"n\">OLEAN_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../build/release/stage0/lib/lean\"</span><span class=\"w\"> </span><span class=\"n\">BIN_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"C:/Users/robin/lean4dev/lean4/build/release/stage0/bin\"</span><span class=\"w\"> </span><span class=\"n\">LEAN_OPTS</span><span class=\"bp\">+=</span><span class=\"s2\">\" -DElab.async=true\"</span><span class=\"w\"> </span><span class=\"n\">LEANC_OPTS</span><span class=\"bp\">+=</span><span class=\"s2\">\" -IC:/Users/robin/lean4dev/lean4/build/release/stage0/include -O3 -DNDEBUG\"</span><span class=\"w\"> </span><span class=\"n\">LEAN_AR</span><span class=\"bp\">=</span><span class=\"s2\">\"C:/msys64/clang64/bin/llvm-ar.exe\"</span><span class=\"w\"> </span><span class=\"n\">MORE_DEPS</span><span class=\"bp\">+=</span><span class=\"s2\">\"/bin/lean\"</span><span class=\"w\"> </span><span class=\"n\">CMAKE_LIKE_OUTPUT</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">C_ONLY</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">C_OUT</span><span class=\"bp\">=</span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">/</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Entering</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src'</span>\n<span class=\"o\">[</span><span class=\"w\">    </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span>\n<span class=\"o\">[</span><span class=\"w\">    </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"bp\">.</span><span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DLEAN_EXPORTING</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"s2\">\"T\"</span><span class=\"n\">hin</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">seems</span><span class=\"w\"> </span><span class=\"n\">necessary</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">preserve</span><span class=\"w\"> </span><span class=\"n\">paths</span><span class=\"w\"> </span><span class=\"n\">so</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">we</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">distinguish</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">between</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">same</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">manipulating</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">for</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"ss\">`libleanshared_</span><span class=\"bp\">*`</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Leaving</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src'</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Nothing</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Leanc'</span><span class=\"bp\">.</span>\n<span class=\"s2\">\"/C/Users/robin/lean4dev/lean4/build/release/stage0/bin/leanmake\"</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"n\">lib</span><span class=\"bp\">.</span><span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"bp\">../../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">LakeMain</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"bp\">.</span><span class=\"kn\">export</span><span class=\"w\">  </span><span class=\"n\">PKG</span><span class=\"bp\">=</span><span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">LEAN</span><span class=\"bp\">=</span><span class=\"s2\">\"/bin/lean\"</span><span class=\"w\"> </span><span class=\"n\">LEANC</span><span class=\"bp\">=</span><span class=\"s2\">\"C:/Users/robin/lean4dev/lean4/build/release/stage0/leanc.sh\"</span><span class=\"w\"> </span><span class=\"n\">OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../build/release/stage0/lib\"</span><span class=\"w\"> </span><span class=\"n\">LIB_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../build/release/stage0/lib/lean\"</span><span class=\"w\"> </span><span class=\"n\">OLEAN_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../build/release/stage0/lib/lean\"</span><span class=\"w\"> </span><span class=\"n\">BIN_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"C:/Users/robin/lean4dev/lean4/build/release/stage0/bin\"</span><span class=\"w\"> </span><span class=\"n\">LEAN_OPTS</span><span class=\"bp\">+=</span><span class=\"s2\">\" -DElab.async=true\"</span><span class=\"w\"> </span><span class=\"n\">LEANC_OPTS</span><span class=\"bp\">+=</span><span class=\"s2\">\" -IC:/Users/robin/lean4dev/lean4/build/release/stage0/include -O3 -DNDEBUG\"</span><span class=\"w\"> </span><span class=\"n\">LEAN_AR</span><span class=\"bp\">=</span><span class=\"s2\">\"C:/msys64/clang64/bin/llvm-ar.exe\"</span><span class=\"w\"> </span><span class=\"n\">MORE_DEPS</span><span class=\"bp\">+=</span><span class=\"s2\">\"/bin/lean\"</span><span class=\"w\"> </span><span class=\"n\">CMAKE_LIKE_OUTPUT</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">C_ONLY</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">C_OUT</span><span class=\"bp\">=</span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../../build/release/stage0/lib\"</span><span class=\"w\"> </span><span class=\"n\">LIB_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../../build/release/stage0/lib/lean\"</span><span class=\"w\"> </span><span class=\"n\">TEMP_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../../build/release/stage0/lib/temp\"</span><span class=\"w\"> </span><span class=\"n\">OLEAN_OUT</span><span class=\"bp\">=</span><span class=\"s2\">\"../../../build/release/stage0/lib/lean\"</span><span class=\"w\"> </span><span class=\"n\">EXTRA_SRC_ROOTS</span><span class=\"bp\">=</span><span class=\"n\">LakeMain</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Entering</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">lake'</span>\n<span class=\"o\">[</span><span class=\"w\">    </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"o\">[</span><span class=\"w\">    </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"o\">[</span><span class=\"w\">    </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">LakeMain</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"bp\">.</span><span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DLEAN_EXPORTING</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">LakeMain</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"bp\">.</span><span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">LakeMain</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DLEAN_EXPORTING</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"s2\">\"T\"</span><span class=\"n\">hin</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">seems</span><span class=\"w\"> </span><span class=\"n\">necessary</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">preserve</span><span class=\"w\"> </span><span class=\"n\">paths</span><span class=\"w\"> </span><span class=\"n\">so</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">we</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">distinguish</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">between</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">same</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">manipulating</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">for</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"ss\">`libleanshared_</span><span class=\"bp\">*`</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Leaving</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">lake'</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Leaving</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src'</span>\n<span class=\"n\">make</span><span class=\"o\">[</span><span class=\"mi\">5</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Leaving</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0'</span>\n<span class=\"o\">[</span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">make_stdlib</span>\n</code></pre></div>",
        "id": 538467530,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757432249
    },
    {
        "content": "<p>Hmm I don't see any mention of ccache</p>",
        "id": 538467720,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757432302
    },
    {
        "content": "<p><code>ccache</code> disguises itself as a normal c compiler binary so its completely plug and play, it's hidden behind the <code>leanc</code> invocation, but the key is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">leanc</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">../../</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"bp\">.</span><span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/../</span><span class=\"n\">stdlib</span><span class=\"bp\">//</span><span class=\"n\">Init</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">IC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">robin</span><span class=\"bp\">/</span><span class=\"n\">lean4dev</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">release</span><span class=\"bp\">/</span><span class=\"n\">stage0</span><span class=\"bp\">/</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">O3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DNDEBUG</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">DLEAN_EXPORTING</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"s2\">\"T\"</span><span class=\"n\">hin</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">seems</span><span class=\"w\"> </span><span class=\"n\">necessary</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">preserve</span><span class=\"w\"> </span><span class=\"n\">paths</span><span class=\"w\"> </span><span class=\"n\">so</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">we</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">distinguish</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">between</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">same</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">manipulating</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">for</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"ss\">`libleanshared_</span><span class=\"bp\">*`</span>\n</code></pre></div>\n<p>I personally don't want to know what a Thin archive is but that is the reason we have to build twice</p>",
        "id": 538467882,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757432345
    },
    {
        "content": "<p>In particular one file is built with <code>-DLEAN_EXPORTING</code> while the other is built without it to provide object files for linking in the same and in different DLLs and that's the reason two C compiler invocations occur</p>",
        "id": 538468092,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757432408
    },
    {
        "content": "<p>Note that it would be quite great in general if we didn't have to do this because not only stage0 but also stage1 has to be double built in this fashion and that's one of the factors that make our Windows CI times quite horrible compared to the other platforms.</p>\n<p>That said I'm not willing to loose my sanity over Windows linking details again <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 538468733,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757432582
    },
    {
        "content": "<p>Hmm I feel like since I started using <code>-DUSE_LAKE</code> stage1 build times have gone down significantly; I guess maybe it still does this double compilation but it uses better caching? Not sure</p>",
        "id": 538469289,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757432727
    },
    {
        "content": "<p>Lake can be a lot smarter about caching yes. The CMake/Makefile system merely acts on files being touched at a later date than the files that depend on them have been so if you do any modification the entire transitive import closure has to be recompiled. Lake has a more semantic notion of rebuilding.</p>",
        "id": 538470083,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757432946
    },
    {
        "content": "<p>(and of course the module system comes in handy here as well)</p>",
        "id": 538470306,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1757433009
    },
    {
        "content": "<p>Lake doesn't build stage0, so while it may (hopefully) improve the build time overall, it is not helping here for stage0.</p>",
        "id": 542042083,
        "sender_full_name": "Mac Malone",
        "timestamp": 1759153011
    },
    {
        "content": "<p>(oops, accidentally necroposted)</p>",
        "id": 542042166,
        "sender_full_name": "Mac Malone",
        "timestamp": 1759153027
    },
    {
        "content": "<p>Okay, coming back to this, it seems like the only difference between <code>o.export</code> / <code>o.noexport</code> is that <code>o.export</code> additionally contains a <code>.drectve</code> section. So it feels like all we need to do here is to simply write (or use) a utility that deletes the <code>.drectve</code> section from an <code>.o</code> file and then use that instead of a rebuild.</p>",
        "id": 542122955,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1759173965
    },
    {
        "content": "<p>Seems like <code>llvm-objcopy --remove-section .drectve abc.c.o.export abc.c.o.noexport</code> should do the trick</p>",
        "id": 542165265,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1759193956
    },
    {
        "content": "<p>So, always build with LEAN_EXPORTING and then strip the section? If this works, it would simplify the build a bit including Lake.</p>",
        "id": 542167413,
        "sender_full_name": "Yuri",
        "timestamp": 1759195492
    }
]