[
    {
        "content": "<p>For <code>e : σ →₀ ℕ</code> and <code>m : ℕ</code>,  there is a unique <code>f : Option σ →₀ ℕ</code>that extends <code>e</code> and maps <code>none</code> to <code>m</code>, for example one can set <code>f := embDomain Function.Embedding.some e + Finsupp.single none m</code>. Is there a simpler way to get it?<br>\nIn particular, that method uses that <code>ℕ</code> has an addition, and this is obviously irrelevant.</p>",
        "id": 506848226,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1742427703
    },
    {
        "content": "<p>(This is something I fell upon in <a href=\"https://github.com/leanprover-community/mathlib4/pull/20495\">#20495</a>.)</p>",
        "id": 506848336,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1742427750
    },
    {
        "content": "<p>You can use <code>update</code> instead of addition</p>",
        "id": 506849610,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742428571
    },
    {
        "content": "<p>But defining this from scratch to be Option.elim is likely better</p>",
        "id": 506849695,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742428641
    },
    {
        "content": "<p>Does it make sense to add the construction and a few lemmas around <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finsupp.some#doc\">docs#Finsupp.some</a> ?</p>",
        "id": 506895554,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1742455331
    },
    {
        "content": "<p>In any case, I adjusted <a href=\"https://github.com/leanprover-community/mathlib4/pull/20495\">#20495</a>, see <br>\n<a href=\"https://github.com/leanprover-community/mathlib4/blob/3f3d91282978cae413d2503f13799a56a5afc626/Mathlib/Data/Finsupp/Basic.lean#L756-L766\">https://github.com/leanprover-community/mathlib4/blob/3f3d91282978cae413d2503f13799a56a5afc626/Mathlib/Data/Finsupp/Basic.lean#L756-L766</a></p>",
        "id": 506901879,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1742457757
    }
]