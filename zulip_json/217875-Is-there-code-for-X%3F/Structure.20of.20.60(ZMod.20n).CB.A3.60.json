[
    {
        "content": "<p>Is there code that shows how <code>(ZMod n)ˣ</code> decomposes into a product of <code>ZMod</code>s?<br>\n<a href=\"https://en.wikipedia.org/wiki/Multiplicative_group_of_integers_modulo_n#Structure\">https://en.wikipedia.org/wiki/Multiplicative_group_of_integers_modulo_n#Structure</a><br>\nMore specifically I'm looking for when that group is cyclic (iff <code>n</code> is <code>1, 2, 4, p^k, 2*p^k</code> for odd primes <code>p</code>).</p>",
        "id": 561067136,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1764566757
    },
    {
        "content": "<p>Yup! <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ZMod.isCyclic_units_iff#doc\">docs#ZMod.isCyclic_units_iff</a></p>",
        "id": 561067659,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1764567073
    },
    {
        "content": "<p>Thanks! I kinda expected the proof to decompose it into <code>ZMod</code>s but I'm not seeing that, does it exist?</p>",
        "id": 561068332,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1764567502
    },
    {
        "content": "<p>You can get that from the Chinese remainder theorem ring isomorphism and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Units.mapEquiv#doc\">docs#Units.mapEquiv</a></p>",
        "id": 561075959,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1764571500
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"253861\">Thomas Browning</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Structure.20of.20.60.28ZMod.20n.29.CB.A3.60/near/561075959\">said</a>:</p>\n<blockquote>\n<p>You can get that from the Chinese remainder theorem ring isomorphism and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Units.mapEquiv#doc\">docs#Units.mapEquiv</a></p>\n</blockquote>\n<p>Yes but that only decomposes <code>ZMod</code> units to <code>ZMod</code> units and not to <code>ZMod</code>s.<br>\nWith CRT and the odd prime powers being cyclic we're almost done, the only thing missing is <code>(ZMod (2 ^ n))ˣ ≃* ZMod 2 × ZMod (2 ^ (n - 2))</code> for <code>3 ≤ n</code>.</p>",
        "id": 561287533,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1764628048
    },
    {
        "content": "<p>The proof just shows <code>(ZMod 8)ˣ</code> is not cyclic because every element has order at most 2, and then all higher <code>(ZMod (2 ^ n))ˣ</code> are not cyclic because they have <code>(ZMod 8)ˣ</code> as a quotient. To get the isomorphism you want we need the <a href=\"https://en.wikipedia.org/wiki/Splitting_lemma\">splitting lemma</a> which seems to be missing in mathlib (I could only find a LinearEquiv version <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=lequivProdOfLeftSplitExact#doc\">docs#lequivProdOfLeftSplitExact</a>, not MulEquiv).</p>",
        "id": 561312583,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1764642100
    },
    {
        "content": "<p>we have</p>\n<ul>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.ShortComplex.Splitting.ofExactOfRetraction#doc\">docs#CategoryTheory.ShortComplex.Splitting.ofExactOfRetraction</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.ShortComplex.Splitting.ofExactOfSection#doc\">docs#CategoryTheory.ShortComplex.Splitting.ofExactOfSection</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.ShortComplex.Splitting.ofHasBinaryBiproduct#doc\">docs#CategoryTheory.ShortComplex.Splitting.ofHasBinaryBiproduct</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.ShortComplex.Splitting.isoBinaryBiproduct#doc\">docs#CategoryTheory.ShortComplex.Splitting.isoBinaryBiproduct</a></li>\n</ul>",
        "id": 561315044,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1764643946
    },
    {
        "content": "<p>I think that's most of the splitting lemma I'm too lazy to find the rest unless you really need it</p>",
        "id": 561315069,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1764643970
    },
    {
        "content": "<p>I think I can prove <code>orderOf (3 : (ZMod (2 ^ n))ˣ) = 2 ^ (n - 2)</code> for <code>4 ≤ n</code> by a simple induction.<br>\nI think this shows that <code>ZMod (2 ^ (n - 2))</code> must be a subgroup, and together with the fact that <code>(ZMod (2 ^ n))ˣ</code> isn't cyclic will that finish the proof without the splitting lemma?</p>",
        "id": 561315478,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1764644253
    },
    {
        "content": "<p>I don't think category theory is the way to go.<br>\nWe already have <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/ZMod/UnitsCyclic.html#ZMod.orderOf_five\">ZMod.orderOf_five</a>, what proof do you want to finish?  (The 5 is in <code>ZMod (2^(n+2))</code>, and this is nicer since it also holds for n=0,1.) <br>\nActually <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=lequivProdOfLeftSplitExact#doc\">docs#lequivProdOfLeftSplitExact</a> is applicable here, since abelian groups are Z-modules ...<br>\nIt seems we're also missing that the supremum (<code>Max.max</code>) of two disjoint submodules/subgroups is isomorphic to their product ...</p>",
        "id": 561317871,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1764645947
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Structure.20of.20.60.28ZMod.20n.29.CB.A3.60/near/561317871\">said</a>:</p>\n<blockquote>\n<p>We already have <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/ZMod/UnitsCyclic.html#ZMod.orderOf_five\">ZMod.orderOf_five</a>, what proof do you want to finish?  (The 5 is in <code>ZMod (2^(n+2))</code>, and this is nicer since it also holds for n=0,1.) </p>\n</blockquote>\n<p><del>I'm really not sure what the point of this 5 theorem is. It's talking about addition, not multiplication, the statement is <code>orderOf (5 : ZMod (2 ^ (n + 2))) = 2 ^ n</code>. How does it help? it looks trivial to me</del><br>\nApparently there's <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=addOrderOf#doc\">docs#addOrderOf</a>, and the lack of the units symbol in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ZMod.orderOf_five#doc\">docs#ZMod.orderOf_five</a> doesn't make it about multiplication, so it is what we need</p>",
        "id": 561322596,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1764649652
    },
    {
        "content": "<p>You mean \"doesn't make it about addition\" :) Yeah the lack of the units symbol means we consider the order in the multiplicative monoid, and taking units is essentially passing to a submonoid and doesn't affect the result.</p>",
        "id": 561344464,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1764662182
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Structure.20of.20.60.28ZMod.20n.29.CB.A3.60/near/561315478\">said</a>:</p>\n<blockquote>\n<p>I think I can prove <code>orderOf (3 : (ZMod (2 ^ n))ˣ) = 2 ^ (n - 2)</code> for <code>4 ≤ n</code> by a simple induction.<br>\nI think this shows that <code>ZMod (2 ^ (n - 2))</code> must be a subgroup, and together with the fact that <code>(ZMod (2 ^ n))ˣ</code> isn't cyclic will that finish the proof without the splitting lemma?</p>\n</blockquote>\n<p>Slightly more optimal is that the order of 5 mod 2^n is 2^(n-2) as this works for all n&gt;=2 (same induction proof). The reason you want to prove this is that you can then deduce that for n&gt;=2 you have (Z/2^nZ)^* is +-1 x (1 mod 4) (obvious) and (1 mod 4) is cyclic because you just wrote down an element of the order of this subgroup.</p>",
        "id": 561347260,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1764663298
    }
]