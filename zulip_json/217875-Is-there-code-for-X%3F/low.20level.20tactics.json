[
    {
        "content": "<p>Is there a tactic that does nothing but expand notation? If not, how could that be done?</p>",
        "id": 471965293,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726944270
    },
    {
        "content": "<p><code>set_option pp.notation false</code>?</p>",
        "id": 471965368,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1726944353
    },
    {
        "content": "<p>if by notation you mean <code>abbrev</code> (and possibly <code>def</code>), using a tactic like <code>dsimp</code> might be what you're looking for</p>",
        "id": 471965439,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1726944399
    },
    {
        "content": "<p>I was thinking along the lines of the <code>++</code> in</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n</code></pre></div>",
        "id": 471965499,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726944472
    },
    {
        "content": "<p>And the lowest level set of tactics (tactics that do the least amount of work) that would solve this.</p>",
        "id": 471965584,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726944527
    },
    {
        "content": "<p>To make the proof as explicit as possible.</p>",
        "id": 471965604,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726944551
    },
    {
        "content": "<p>Do you mean specifically \"what does the <code>HAppend</code> instance for this type do\"?</p>",
        "id": 471965634,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1726944588
    },
    {
        "content": "<p><code>rfl</code> should prove that one</p>",
        "id": 471965724,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1726944646
    },
    {
        "content": "<p>I wanted to avoid <code>rfl</code>, because I think it does things I want to make explicit.</p>",
        "id": 471965774,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726944697
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/low.20level.20tactics/near/471965634\">said</a>:</p>\n<blockquote>\n<p>Do you mean specifically \"what does the <code>HAppend</code> instance for this type do\"?</p>\n</blockquote>\n<p>maybe? I didn't even know about <code>HAppend</code> until I tried the suggested <code>set_option pp.notation false</code>.</p>",
        "id": 471965853,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726944750
    },
    {
        "content": "<p>you can hover over the term in the infoview to see what the notation means</p>",
        "id": 471965870,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1726944776
    },
    {
        "content": "<p>at that point, you typically can do some kind of <code>dsimp only [HAppend.hAppend]</code> (or whatever is the head term here) to simplify/reduce</p>",
        "id": 471965896,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1726944815
    },
    {
        "content": "<p>Does <code>dsimp</code> unfold the definition like <code>delta</code> and nothing more?</p>",
        "id": 471965964,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726944857
    },
    {
        "content": "<p>i did not know about <code>delta</code>, i think that indeed is a better tactic for the occasion.</p>",
        "id": 471966020,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1726944928
    },
    {
        "content": "<p><code>dsimp</code> <em>can</em> do more, but it still guarantees that the result is defeq to the input. (afaict <code>delta</code> does this too)</p>",
        "id": 471966140,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1726945037
    },
    {
        "content": "<p>If I did this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">append</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">delta</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">append</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">brecOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">motive</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x_1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">motive</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">below</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">motive</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x_1</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">        </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">[],</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">r</span>\n<span class=\"w\">        </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"n\">f</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">  </span><span class=\"n\">l</span>\n</code></pre></div>\n<p>Is there a tactic that would only apply the match and not close the goal?</p>",
        "id": 471966818,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726945667
    },
    {
        "content": "<p>So that I would end up with <code>l = l</code>, by definition of the match?</p>",
        "id": 471966932,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726945773
    },
    {
        "content": "<p>This fact is immediate from the definition of <code>List.append</code> though. You can apply the equation lemma that's auto-generated from the definition:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">append</span><span class=\"bp\">.</span><span class=\"n\">eq_1</span><span class=\"w\"> </span><span class=\"n\">l</span>\n</code></pre></div>",
        "id": 471967091,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1726945906
    },
    {
        "content": "<p>If you are using mathlib, you could use <code>unfold_projs</code> to unfold <code>++</code> to the underlying function.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold_projs</span><span class=\"w\">  </span><span class=\"c1\">-- unfold (reduce) the `HAppend.hAppend` instance.</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ [].append l = l</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">append</span><span class=\"w\"> </span><span class=\"c1\">-- use the equation lemma</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ l = l</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 471967201,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1726946014
    },
    {
        "content": "<p><code>delta</code> unfolds to the underlying term, and it doesn't use equation lemmas or \"smart unfolding\". Regarding your question, you could use <code>reduce</code> from mathlib to get <code>l = l</code>. You can also use <code>dsimp only</code>, but it will see that the result is <code>l = l</code> and automatically close the goal with <code>rfl</code>.</p>",
        "id": 471967355,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1726946145
    },
    {
        "content": "<p><code>reduce</code> will unfold definitions though, just like <code>rfl</code>, so if you're wanting to very carefully control reduction, you shouldn't use it:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">reduce</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ l = l</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 471967446,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1726946204
    },
    {
        "content": "<p>You can take a look at <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Meta.DSimp.Config#doc\">docs#Lean.Meta.DSimp.Config</a> to see all the things you can configure <code>dsimp</code> to do. Configuration options go inside the <code>{}</code> in <code>dsimp (config := {}) only</code>.</p>",
        "id": 471967586,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1726946330
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/low.20level.20tactics/near/471967201\">said</a>:</p>\n<blockquote>\n<p>If you are using mathlib, you could use <code>unfold_projs</code> to unfold <code>++</code> to the underlying function.</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold_projs</span><span class=\"w\">  </span><span class=\"c1\">-- unfold (reduce) the `HAppend.hAppend` instance.</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ [].append l = l</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">append</span><span class=\"w\"> </span><span class=\"c1\">-- use the equation lemma</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ l = l</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>This is exactly what I was looking for.</p>",
        "id": 471968823,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726947437
    },
    {
        "content": "<p>Thank you!</p>",
        "id": 471968917,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726947506
    },
    {
        "content": "<p>What are \"projections of class instances at the given location\" in the doc for <code>unfold_projs</code>?</p>",
        "id": 471969028,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726947610
    },
    {
        "content": "<p>Is there a way to do this, but not have it close the goal, but instead end up with <code>a :: as.append bs = a :: as.append bs</code>? I'm guessing being inside the <code>conv</code> makes it close it?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">cons_append</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">::</span><span class=\"n\">as</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">::</span><span class=\"o\">(</span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold_projs</span>\n<span class=\"w\">  </span><span class=\"n\">conv</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">left</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">append</span>\n</code></pre></div>",
        "id": 471971766,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726949965
    },
    {
        "content": "<p>Recall that <code>[] ++ l</code> is notation for <code>@HAppend.hAppend (List α) (List α) (List α) inst [] l</code>, where <code>inst</code> stands for the <code>HAppend</code> instance for <code>List α</code>. The <code>hAppend</code> function is a projection for the <code>hAppend</code> field of <code>HAppend</code>. That's to say, this is <code>inst.hAppend [] l</code>. The <code>unfold_projs</code> tactic expands <code>inst</code> and gets the <code>hAppend</code> field out. This reduces it to <code>List.append [] l</code> after two steps (there's also an <code>Append</code> instance).</p>",
        "id": 471971848,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1726950024
    },
    {
        "content": "<p>Yeah, <code>conv</code> closes goals using <code>with_reducible rfl</code></p>",
        "id": 471971861,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1726950042
    },
    {
        "content": "<p>Is there a way to make it not do that, or an alternative similar tactic that won't?</p>",
        "id": 471972242,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726950379
    },
    {
        "content": "<p>No, I don't believe so. You'd have to make your own.</p>\n<p>Can you instead use a sequence of <code>change</code> tactics? Trying to unfold things like this using tactics is fairly artificial for Lean, and you'll be fighting against many tactics to never do <code>rfl</code> or auto-solve other trivial goals.</p>",
        "id": 471972416,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1726950524
    },
    {
        "content": "<p>I'm imagining something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">cons_append'</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">::</span><span class=\"n\">as</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">::</span><span class=\"o\">(</span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">change</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">append</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"bp\">.</span><span class=\"n\">append</span><span class=\"w\"> </span><span class=\"n\">bs</span>\n<span class=\"w\">  </span><span class=\"n\">change</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"bp\">.</span><span class=\"n\">append</span><span class=\"w\"> </span><span class=\"n\">bs</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">::</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"bp\">.</span><span class=\"n\">append</span><span class=\"w\"> </span><span class=\"n\">bs</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 471972454,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1726950579
    },
    {
        "content": "<p>It would be great if there were more lower level/finer grained tactics.</p>",
        "id": 471972682,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726950757
    },
    {
        "content": "<p>Maybe starting with one for each application of the typing rules, and building up.</p>",
        "id": 471972894,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726950948
    },
    {
        "content": "<p>I think it might help make some things clearer, at least for me.</p>",
        "id": 471972973,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726951009
    },
    {
        "content": "<p>I don't know if maybe it would also help with translating between other proof systems?</p>",
        "id": 471974180,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1726952040
    },
    {
        "content": "<p>I wouldn't need such tactics because I just want to get goals closed. But if they're useful for what you're doing then lean 4 makes them pretty easy to write</p>",
        "id": 472038301,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727003352
    },
    {
        "content": "<p>I started looking at how to do that.</p>",
        "id": 472060667,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1727023373
    }
]