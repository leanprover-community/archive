[
    {
        "content": "<p>In characteristic 0, the map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi>K</mi><mo>ˉ</mo></mover><mo>→</mo><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">\\bar K \\to K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8201em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8201em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span><span style=\"top:-3.2523em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.1944em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> defined by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>↦</mo><mfrac><mn>1</mn><mrow><mo stretchy=\"false\">[</mo><mi>K</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>:</mo><mi>K</mi><mo stretchy=\"false\">]</mo></mrow></mfrac><msubsup><mo><mi>T</mi><mi>r</mi></mo><mi>K</mi><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></msubsup><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x \\mapsto  \\frac{1}{[K(x) : K]} \\mathop{Tr}^{K(x)}_K (x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.522em;vertical-align:-0.011em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">↦</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.5648em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen mtight\">[</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span><span class=\"mrel mtight\">:</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose mtight\">]</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.0448em;\"><span style=\"top:-2.4065em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span><span style=\"top:-3.2198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">x</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2935em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span> is linear and I use it in some of my results. Does it have a name? There are some papers naming it \"absolute trace\" but usually absolute trace is a trace to the prime field. Do we have it defined in Mathlib (I could not find anything)?</p>",
        "id": 498171801,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1738861964
    },
    {
        "content": "<p>I don't think we have something like that.</p>",
        "id": 498275149,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1738913282
    },
    {
        "content": "<p>I could add it then, the question is how to name it? I would go with <code>absoluteTrace</code>: even if the name is sometimes used in different context, there are still a lot of publications naming it like this, for example <a href=\"/user_uploads/3121/cJwLP_uBeRoPf_p3qsxRSE0t/image.png\">here</a>.<br>\n But I'm open for other suggestions especially if someone encountered this map already with another name.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/cJwLP_uBeRoPf_p3qsxRSE0t/image.png\" title=\"here\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"944x690\" src=\"/user_uploads/thumbnail/3121/cJwLP_uBeRoPf_p3qsxRSE0t/image.png/840x560.webp\"></a></div>",
        "id": 498287019,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1738917914
    },
    {
        "content": "<p>What about something like normalized trace ?</p>",
        "id": 498321260,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1738928668
    },
    {
        "content": "<p>Sounds also good: <code>normalizedTrace</code>?</p>",
        "id": 498322500,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1738929118
    },
    {
        "content": "<p>That sounds good to me. I remember that Tate used this trace to great effect in his <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-divisible groups paper but I've just got around to seeing what he calls it and he just calls it <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span> :-)</p>",
        "id": 498334626,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738933015
    },
    {
        "content": "<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">t</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6151em;\"></span><span class=\"mord mathnormal\">t</span></span></span></span> for \"T\"ate?</p>",
        "id": 498335153,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1738933162
    },
    {
        "content": "<p><code>Tate's_t</code> then? <span aria-label=\"zany face\" class=\"emoji emoji-1f92a\" role=\"img\" title=\"zany face\">:zany_face:</span></p>",
        "id": 498358264,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1738940048
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>, just out of curiosity, could you refer me to the Tate paper, please? What I could find online defines the trace scaled by the degree of the extension, not for the individual element... Anyway, I'll use <code>normalizedTrace</code> even if it would not match exactly.</p>\n<p>BTW, my definition follows more or less this pattern:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> define raw function by some formula -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myMap'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> facts about `myMap'` -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">myMap'_fact1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">myMap'_fact2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> add a structure to `myMap'` -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myMap</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"bp\">→ₗ</span><span class=\"o\">[</span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">myMap'</span>\n<span class=\"w\">  </span><span class=\"n\">map_add'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> here use the facts above, often multiple times -/</span>\n<span class=\"w\">  </span><span class=\"n\">map_smul'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> here use the facts above, often multiple times -/</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> here go facts about linear map `myMap` -/</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Should `myMap'_fact&lt;n&gt;`'s be repeated here just for `myMap`? -/</span>\n</code></pre></div>\n<p>The question is in the last comment. Didn't find anything analogous, maybe someone could refer or in general what are guidelines here?</p>",
        "id": 498419961,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1738959520
    },
    {
        "content": "<p>Maybe your <code>myMap'(_fact&lt;n&gt;)</code> could be private?</p>",
        "id": 498428307,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1738963160
    },
    {
        "content": "<p>Michal it sounds like you've found the right paper, it's his paper on p-divisible groups from the 60s or 70s. I don't understand what you're claiming the difference is between what you're doing and what Tate was doing. Making the field bigger doesn't change the normalised trace.</p>",
        "id": 498439689,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738968818
    },
    {
        "content": "<p>Yup, found also <a href=\"https://arxiv.org/abs/2111.11563\">this</a> with some references. Thanks for hints, I was just curious, never saw this map before (but also I'm not doing crazy research in algebraic NT <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span>).</p>",
        "id": 498441515,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1738969783
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Scaled.2Fabsolute.20trace.20from.20algebraic.20closure/near/498428307\">said</a>:</p>\n<blockquote>\n<p>Maybe your <code>myMap'(_fact&lt;n&gt;)</code> could be private?</p>\n</blockquote>\n<p>Do we have similar patterns in mathlib?</p>",
        "id": 498441776,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1738969901
    },
    {
        "content": "<p>Maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.detAux#doc\">docs#LinearMap.detAux</a> / traceAux is somewhat similar (they're not private though)</p>",
        "id": 498444696,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1738971612
    },
    {
        "content": "<p>Thanks. Created PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/21571\">#21571</a> with auxiliary results having <code>normalizedTrace'</code> in the names, but I can also name the raw function <code>normalizedTraceAux</code> and the results accordingly, WDYT?</p>",
        "id": 498493208,
        "sender_full_name": "Michał Staromiejski",
        "timestamp": 1739013495
    },
    {
        "content": "<p><code>Aux</code> is more indicative IMO.</p>",
        "id": 498510497,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1739028097
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"759408\">Michał Staromiejski</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Scaled.2Fabsolute.20trace.20from.20algebraic.20closure/near/498358264\">said</a>:</p>\n<blockquote>\n<p><code>Tate's_t</code> then? <span aria-label=\"zany face\" class=\"emoji emoji-1f92a\" role=\"img\" title=\"zany face\">:zany_face:</span></p>\n</blockquote>\n<p><code>TateT</code> in Mathematica's convention, just like <code>WeierstrassP</code> <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>\n<p>Oh, but <code>TateT</code> could also be Tate's module <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\"> T </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span></p>",
        "id": 498565847,
        "sender_full_name": "Jz Pan",
        "timestamp": 1739076712
    }
]