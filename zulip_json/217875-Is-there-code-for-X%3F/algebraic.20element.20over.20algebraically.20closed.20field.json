[
    {
        "content": "<p>If L/K is a field extension and K is algebraically closed, then any element of L algebraic over K in fact belongs to K.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsAlgClosed</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span>\n<span class=\"c1\">-- variable {R : Type*} [CommRing R] [IsDomain R] [Algebra K R]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsAlgebraic</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 571321398,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1769985793
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsAlgClosed.algebraMap_bijective_of_isIntegral#doc\">docs#IsAlgClosed.algebraMap_bijective_of_isIntegral</a></p>",
        "id": 571333663,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1769997723
    },
    {
        "content": "<p>or on the level of extensions: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IntermediateField.eq_bot_of_isAlgClosed_of_isAlgebraic#doc\">docs#IntermediateField.eq_bot_of_isAlgClosed_of_isAlgebraic</a></p>",
        "id": 571333776,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1769997820
    },
    {
        "content": "<p>there's not a <code>finrank_eq_one</code> version, I think that should be added (I suppose I'll add it eventually when I merge my real closed field stuff, to make the APIs the same)</p>",
        "id": 571333842,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1769997884
    },
    {
        "content": "<p>also let me get on my soapbox and request a consensus for the spelling of \"the given extension is trivial\" and a consistent API on top of that</p>",
        "id": 571333910,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1769997952
    },
    {
        "content": "<p>can you fill in the <code>sorry</code>?</p>",
        "id": 571334753,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1769998658
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">IntermediateField</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsAlgebraic</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">isAlgebraic_adjoin_simple</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"bp\">.</span><span class=\"n\">isIntegral</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">adjoin_eq_bot_iff</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">IntermediateField</span><span class=\"bp\">.</span><span class=\"n\">mem_bot</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span>\n<span class=\"w\">    </span><span class=\"n\">eq_bot_of_isAlgClosed_of_isAlgebraic</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"bp\">⟮</span><span class=\"n\">x</span><span class=\"bp\">⟯</span>\n</code></pre></div>\n<p>I wasn't very familiar with the <code>IntermediateField</code> API but we got there in the end, here you go</p>",
        "id": 571535342,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1770070368
    },
    {
        "content": "<p>thanks</p>",
        "id": 571535405,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770070392
    },
    {
        "content": "<p>this should go in mathlib</p>",
        "id": 571535455,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770070407
    },
    {
        "content": "<p>do you wanna open a PR?</p>",
        "id": 571535522,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770070428
    },
    {
        "content": "<p>nah<br>\na principled API for \"the algebra map is surjective\" / \"I am equal to the bottom subalgebra\" should go in mathlib<br>\nbut adding this lemma will do for now</p>",
        "id": 571535623,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1770070464
    },
    {
        "content": "<p>also <code>IntermediateField.coe_bot</code> and <code>IntermediateField.mem_bot</code> should be <code>simp</code> lemmas</p>",
        "id": 571535664,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1770070481
    },
    {
        "content": "<p>I think this should also work for an integral domain <code>R</code> in place of the big field <code>L</code></p>",
        "id": 571535874,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770070555
    },
    {
        "content": "<p>yes<br>\nusing <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsAlgClosed.algebraMap_bijective_of_isIntegral#doc\">docs#IsAlgClosed.algebraMap_bijective_of_isIntegral</a><br>\nbut the API is worse there so I'm not gonna write a proof out rn</p>",
        "id": 571536060,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1770070623
    }
]