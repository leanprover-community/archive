[
    {
        "content": "<p>Are there instances of <code>Dist</code>/<code>MetricSpace</code> such that <code>dist x y = if x = y then 0 else 1</code>,<br>\nand instances of <code>EDist</code>/<code>EMetricSpace</code> such that <code>edist x y = if x = y then 0 else ∞</code>?<br>\naka the metrics that induce the <code>DiscreteTopology</code>.</p>\n<p>The closest I found was <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=DiscreteTopology.metrizableSpace#doc\">docs#DiscreteTopology.metrizableSpace</a>, though I'm not sure it's related (and it's <code>MetrizableSpace</code> rather than <code>MetricSpace</code>).</p>",
        "id": 563589888,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765598030
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 563604742,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1765615488
    },
    {
        "content": "<p>In the context of valuations, we have the notion of being non trivial, which is the closest I can find</p>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Valuation/Basic.html#Valuation.IsNontrivial\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Valuation/Basic.html#Valuation.IsNontrivial</a></p>",
        "id": 563605059,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1765615932
    },
    {
        "content": "<p>I don't think there is. Here <a href=\"https://github.com/leanprover-community/mathlib4/blob/8f62007a980111b87be592665493301acbb05ea4/Mathlib/Topology/Metrizable/CompletelyMetrizable.lean#L255-L287\">https://github.com/leanprover-community/mathlib4/blob/8f62007a980111b87be592665493301acbb05ea4/Mathlib/Topology/Metrizable/CompletelyMetrizable.lean#L255-L287</a> it was defined inside the declaration.</p>",
        "id": 563606321,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1765617761
    },
    {
        "content": "<p>Mathematically the closest that we have is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=DiscreteUniformity#doc\">docs#DiscreteUniformity</a>, which is equivalent to \"the uniform structure is precisely the one coming from one of these discrete distances\".</p>",
        "id": 563609088,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1765621211
    },
    {
        "content": "<p>Thanks for the pointers! How would you go about adding this then?</p>\n<p>We can add <code>def</code>s for the <code>MetricSpace</code> &amp; <code>EMetricSpace</code>, but should they also be instances for <code>DiscreteTopology</code>?<br>\nAlso such instances will create a diamond with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MetricSpace.toEMetricSpace#doc\">docs#MetricSpace.toEMetricSpace</a>, but that's also the case for things like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Prod.metricSpaceMax#doc\">docs#Prod.metricSpaceMax</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Prod.emetricSpaceMax#doc\">docs#Prod.emetricSpaceMax</a> so maybe it's okay?<br>\nFinally, how can we formalize the notion that <code>DiscreteTopology</code> is induced by the metric?</p>",
        "id": 563634154,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765645411
    },
    {
        "content": "<p>You should use <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/MetricSpace/Defs.html#MetricSpace.replaceTopology\">MetricSpace.replaceTopology</a> and analogous for uniformity to ensure the induced topology and uniformity are defeq to the discrete ones.</p>\n<p>Do you mean to add an instance <code>DiscreteTopology -&gt; MetricSpace</code>? This does not really make sense I think, you don't want to always have a metric space structure when you don't need it.</p>\n<p>I am not sure we want this actually. Knowing that the discrete topology is induced by a metric is useful, yes, but is it useful to have a specific metric? Why do you want to add this?</p>",
        "id": 563639823,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1765651625
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/27664\">#27664</a></p>",
        "id": 563651997,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1765667332
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"703970\">Etienne Marion</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Discrete.20MetricSpace.2FEMetricSpace/near/563639823\">said</a>:</p>\n<blockquote>\n<p>Do you mean to add an instance <code>DiscreteTopology -&gt; MetricSpace</code>? This does not really make sense I think, you don't want to always have a metric space structure when you don't need it.</p>\n<p>I am not sure we want this actually. Knowing that the discrete topology is induced by a metric is useful, yes, but is it useful to have a specific metric? Why do you want to add this?</p>\n</blockquote>\n<p>I was thinking maybe if we have a <code>DiscreteMetric</code> class that says a <code>MetricSpace</code> is the discrete one, we can do <code>DiscreteMetric X -&gt; @DiscreteTopology _ (X.toUniformSpace.toTopologicalSpace)</code>, but idk.<br>\nWe can also have <code>def WithDiscreteMetric (X : Type*) := X</code>, an instance <code>MetricSpace (WithDiscreteMetric X)</code>, an instance <code>TopologicalSpace (WithDiscreteMetric X)</code> using <code>X.toUniformSpace.toTopologicalSpace</code>, and finally <code>DiscreteTopology (WithDiscreteMetric X)</code>.</p>\n<p>I think it's weird to have the discrete metric and the discrete topology without some sort of theorem/instance that links them. It'll probably also be useful to someone.</p>",
        "id": 563654531,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765671513
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308899\">Yakov Pechersky</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Discrete.20MetricSpace.2FEMetricSpace/near/563651997\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/27664\">#27664</a></p>\n</blockquote>\n<p>Looks good! Do you plan to continue working on it to get it merged?<br>\nThe <code>EMetricSpace</code> version could probably be in a future PR</p>",
        "id": 563654759,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765671814
    },
    {
        "content": "<p>btw what spawned this thread is that I wanted to take a product <code>α × ℝ</code> and get the e-metric</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">edist</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a₁</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a₂</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">a₁</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a₂</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">edist</span><span class=\"w\"> </span><span class=\"n\">x₁</span><span class=\"w\"> </span><span class=\"n\">x₂</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"bp\">∞</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>rather than the supremum of the metrics in each axis, since if e.g. <code>α := ℝ</code> there could be an existing metric on <code>α</code> that'll give a finite value to pairs with <code>a₁ ≠ a₂</code>.</p>\n<p>If I give <code>α</code> the discrete e-metric, then the product will be exactly what I'm looking for.</p>",
        "id": 563655040,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765672221
    }
]