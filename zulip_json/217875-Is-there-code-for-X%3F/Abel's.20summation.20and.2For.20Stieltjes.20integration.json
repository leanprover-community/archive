[
    {
        "content": "<p>Is Abel's summation and Euler-Maclaurin summation formalized in Lean? In mathlib we have Stieltjes measure (for monotone functions), and Abel's summation is just the integration by part of Stieltjes integration.</p>",
        "id": 320911688,
        "sender_full_name": "Meow",
        "timestamp": 1673522209
    },
    {
        "content": "<p><a href=\"#narrow/stream/116395-maths/topic/analytical.20number.20theory/near/320708370\">https://leanprover.zulipchat.com/#narrow/stream/116395-maths/topic/analytical.20number.20theory/near/320708370</a></p>",
        "id": 320912034,
        "sender_full_name": "Meow",
        "timestamp": 1673522316
    },
    {
        "content": "<p>Euler-Maclaurin summation isn't in mathlib but it will be easy to add, since it doesn't need any new work on the measure-theory side.</p>",
        "id": 320913437,
        "sender_full_name": "David Loeffler",
        "timestamp": 1673522765
    },
    {
        "content": "<p>For Abel summation (assuming you mean the first statement here : <a href=\"https://en.wikipedia.org/wiki/Abel%27s_summation_formula\">https://en.wikipedia.org/wiki/Abel%27s_summation_formula</a>), it might be easier to prove it more directly, rather than going through the work of defining the Stieltjes integral in the relevant settings.</p>",
        "id": 320914074,
        "sender_full_name": "David Loeffler",
        "timestamp": 1673522999
    },
    {
        "content": "<p>Yes, that's my opinion.</p>",
        "id": 320918447,
        "sender_full_name": "Meow",
        "timestamp": 1673524366
    },
    {
        "content": "<p>I have an almost complete proof of Abel summation formula (just a couple of easy sorries to fill in) but I wanted to make sure it is the right formulation / hypotheses before going further. Basically, what I have is the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">intervalIntegral</span><span class=\"w\"> </span><span class=\"n\">MeasureTheory</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"o\">)</span>\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⌊</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">⌋₊</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">AbelSummation</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h_diff</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Icc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">DifferentiableAt</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h_integ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IntervalIntegrable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">volume</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⌊</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">⌋₊</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">∫</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">..</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 482636311,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1731684167
    },
    {
        "content": "<p>Oh, I have a proof in PNT+</p>",
        "id": 482636696,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731684250
    },
    {
        "content": "<p><a href=\"https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/191\">https://github.com/AlexKontorovich/PrimeNumberTheoremAnd/pull/191</a></p>",
        "id": 482636839,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731684287
    },
    {
        "content": "<p>Are you planning on PR'ing it soon?</p>",
        "id": 482638607,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1731684738
    },
    {
        "content": "<p>Also, you use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousOn#doc\">docs#ContinuousOn</a> and I use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IntervalIntegrable#doc\">docs#IntervalIntegrable</a>. One question I have is which one is better in general?</p>",
        "id": 482638903,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1731684822
    },
    {
        "content": "<p>I have no opinion - I just bashed out something that would work in the case I needed. I had no immediate plans to PR it to mathlib, but I can try to get around to it (or you could, if you have time)</p>",
        "id": 482640872,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731685361
    },
    {
        "content": "<p>How far is this from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.sum_range_by_parts#doc\">docs#Finset.sum_range_by_parts</a> plus <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=intervalIntegral.integral_deriv_eq_sub#doc\">docs#intervalIntegral.integral_deriv_eq_sub</a> plus <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=intervalIntegral.sum_integral_adjacent_intervals#doc\">docs#intervalIntegral.sum_integral_adjacent_intervals</a> ?</p>",
        "id": 482640924,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1731685378
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"242586\">Vincent Beffara</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Abel's.20summation.20and.2For.20Stieltjes.20integration/near/482640924\">said</a>:</p>\n<blockquote>\n<p>How far is this from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.sum_range_by_parts#doc\">docs#Finset.sum_range_by_parts</a> plus <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=intervalIntegral.integral_deriv_eq_sub#doc\">docs#intervalIntegral.integral_deriv_eq_sub</a> plus <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=intervalIntegral.sum_integral_adjacent_intervals#doc\">docs#intervalIntegral.sum_integral_adjacent_intervals</a> ?</p>\n</blockquote>\n<p>This is basically my proof</p>",
        "id": 482641028,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1731685409
    },
    {
        "content": "<p>It's pretty straightforward</p>",
        "id": 482641113,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1731685433
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span>  I have a version of Abel summation <a href=\"https://github.com/leanprover-community/mathlib4/blob/19f05a010d0b698f8754348e3157e35f2d61f7e3/Mathlib/Sandox.lean#L17\">here</a> that I am reasonably happy with and I would like to PR it if you don't mind since I'll need it at some point for the proof of the analytic class number formula. It just needs a good name, a place to live and probably also some golfing</p>",
        "id": 483251872,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1732019416
    },
    {
        "content": "<p>No, don't mind at all</p>",
        "id": 483251973,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732019456
    },
    {
        "content": "<p>Thanks! I'll be also very interested in your review once it's ready <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 483252163,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1732019524
    },
    {
        "content": "<p>And any suggestion for names and/or location !</p>",
        "id": 483252310,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1732019582
    },
    {
        "content": "<p>Please ping me on zulip if you want me to review, I'm in permanent github notification bankrupcy</p>",
        "id": 483252409,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732019618
    },
    {
        "content": "<p>Do you want some of my notifications?</p>",
        "id": 483423836,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732089425
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> , the PR is ready:  <a href=\"https://github.com/leanprover-community/mathlib4/pull/19289\">#19289</a></p>",
        "id": 483496392,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1732112902
    }
]