[
    {
        "content": "<p>I want to get latest (pre)release of Lean as String. (ex. v4.9.1, v4.10.0-rc2, ...) <br>\nThis is for <a href=\"https://github.com/oliver-butterley/lean-update\">lean-update action</a>. </p>\n<p>I used to implement this as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"w\">  </span><span class=\"nv\">LATEST_LEAN</span><span class=\"o\">=</span><span class=\"k\">$(</span>gh<span class=\"w\"> </span>release<span class=\"w\"> </span>list<span class=\"w\"> </span>--repo<span class=\"w\"> </span>leanprover/lean4<span class=\"w\"> </span>--limit<span class=\"w\"> </span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>awk<span class=\"w\"> </span><span class=\"s1\">'{print $1}'</span><span class=\"k\">)</span>\n<span class=\"w\">  </span><span class=\"nb\">echo</span><span class=\"w\"> </span><span class=\"s2\">\"The latest release/prerelase is: </span><span class=\"nv\">$LATEST_LEAN</span><span class=\"s2\">\"</span>\n<span class=\"w\">  </span><span class=\"nb\">echo</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover/lean4:</span><span class=\"nv\">$LATEST_LEAN</span><span class=\"s2\">\"</span><span class=\"w\"> </span>&gt;<span class=\"w\"> </span>lean-toolchain\n</code></pre></div>\n<p>almost always this works, but this sometimese fails. <br>\nFor example, at Jul 11, this script would get <code>v4.9.1</code> as the latest release, but actually the latest was <code>v4.10.0-rc2</code>. <br>\nsee : <a href=\"https://github.com/oliver-butterley/lean-update/issues/26\">https://github.com/oliver-butterley/lean-update/issues/26</a></p>\n<p>Is there an easy way to get the latest release?</p>",
        "id": 455910428,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1722597771
    },
    {
        "content": "<p>I don't know of a way to ask Github, besides getting the whole list, parsing the version identifiers, sorting them (appropriately!), and taking the last one.</p>",
        "id": 456055088,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722639100
    },
    {
        "content": "<p>Someone should write a tiny semver library in Lean!</p>",
        "id": 456055098,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722639115
    },
    {
        "content": "<p>You mean <a href=\"https://github.com/leanprover/release-index\">https://github.com/leanprover/release-index</a> and <a href=\"https://release.lean-lang.org/stable.json\">https://release.lean-lang.org/stable.json</a> etc?</p>",
        "id": 456063878,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1722644540
    },
    {
        "content": "<p>(I guess you still need to sort them.)</p>",
        "id": 456063993,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1722644587
    },
    {
        "content": "<p><code>gh</code> can return all releases, but it sorts them by date, not by version number.</p>",
        "id": 456070562,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1722649673
    },
    {
        "content": "<p>I made a simple lib for this.</p>\n<p><a href=\"https://github.com/Seasawher/Semver.lean\">https://github.com/Seasawher/Semver.lean</a></p>",
        "id": 456176935,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1722699113
    }
]