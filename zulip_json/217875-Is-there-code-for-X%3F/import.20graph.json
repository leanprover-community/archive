[
    {
        "content": "<p>Is there a tool to see the actual import graph of mathlib? For example, given two files, I would like to see the (shortest) path of imports from A to B</p>",
        "id": 533664913,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754846453
    },
    {
        "content": "<p>this feels like a standard CS exercise</p>",
        "id": 533664936,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754846478
    },
    {
        "content": "<p>Do you know the <code>lake exe graph</code> suite?</p>",
        "id": 533665262,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754846781
    },
    {
        "content": "<p>is there a list of lake modules? I can't find 'graph' in <a href=\"https://github.com/leanprover/lake\">https://github.com/leanprover/lake</a></p>",
        "id": 533666288,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754847822
    },
    {
        "content": "<p>I think you get it with mathlib (?), but the repo is here <a href=\"https://github.com/leanprover-community/import-graph\">https://github.com/leanprover-community/import-graph</a></p>",
        "id": 533666337,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1754847879
    },
    {
        "content": "<p>is the graph for mathlib published anywhere?</p>",
        "id": 533666385,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754847942
    },
    {
        "content": "<p>We have this page, so the data must be somewhere: <a href=\"https://leanprover-community.github.io//mathlib4_docs/mathlib.html\">https://leanprover-community.github.io//mathlib4_docs/mathlib.html</a></p>\n<p>Give me a sec.</p>",
        "id": 533666496,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1754848072
    },
    {
        "content": "<p>This should contain the graph for the latest commit of <code>master</code> (in .dot format, I think): <a href=\"https://github.com/leanprover-community/mathlib4/actions/runs/16864223820/artifacts/3729548120\">https://github.com/leanprover-community/mathlib4/actions/runs/16864223820/artifacts/3729548120</a></p>\n<p>Looks like we're uploading these as artifacts for every build job. If you go to the workflow page (e.g. by clicking on the green checkmark next to a commit, finding one of the \"continuous integration ...\" jobs, clicking \"Details\", and then going to the Summary page), there should be an artifact at the bottom of the page named \"import-graph\". Note that these are only kept for 90 days.</p>",
        "id": 533666890,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1754848544
    },
    {
        "content": "<p>that's a slightly non-trivial path</p>",
        "id": 533666944,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754848608
    },
    {
        "content": "<p>I think it would be more beginner friendly if this was available on the docs page somewhere</p>",
        "id": 533666978,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754848636
    },
    {
        "content": "<p>in html form</p>",
        "id": 533666979,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754848638
    },
    {
        "content": "<p>I agree. It probably would be a fun project!</p>",
        "id": 533667007,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1754848672
    },
    {
        "content": "<p>what software can i use to visualise the dot graph?</p>",
        "id": 533667387,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754849044
    },
    {
        "content": "<p>Here's one: <a href=\"https://dreampuf.github.io/GraphvizOnline/\">https://dreampuf.github.io/GraphvizOnline/</a></p>",
        "id": 533667501,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754849179
    },
    {
        "content": "<p>i tried that, the graph is way too big for that</p>",
        "id": 533667514,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754849197
    },
    {
        "content": "<p>What are the start and end points of your graph?</p>",
        "id": 533667566,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754849237
    },
    {
        "content": "<p>i guess if i have start and end points then it would be shorter</p>",
        "id": 533667578,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754849258
    },
    {
        "content": "<p>but i just downloaded the whole graph file above</p>",
        "id": 533667588,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754849269
    },
    {
        "content": "<p>Try running <code>lake exe graph --from A --to B</code></p>",
        "id": 533667645,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754849325
    },
    {
        "content": "<p>is there a way to find the generators for the common descendents of A and B?</p>",
        "id": 534048075,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755029209
    },
    {
        "content": "<p>Read the source code for <code>import-graph</code>. It has some basic graph manipulations already there, it should be straightforward to implement things like this yourself.</p>",
        "id": 534069609,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755042264
    },
    {
        "content": "<p>The existing functions there give you the import graph as something like a <code>HashMap Name (HashSet Name)</code>, I forget exactly what. Then it's just map manipulations to do whatever graph query you want.</p>",
        "id": 534069671,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755042328
    }
]