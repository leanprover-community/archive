[
    {
        "content": "<p>I'm sorry if this is a dumb question but I'm fairly sure that it's a missing theorem in the standard library. I feel like it should be fairly simple but I'm not adept with solving techniques yet and haven't been able to crack it myself.</p>",
        "id": 509567325,
        "sender_full_name": "Dillon Shaffer",
        "timestamp": 1743550984
    },
    {
        "content": "<p>Is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Std.HashMap.keys#doc\">docs#Std.HashMap.keys</a> defined such that the equality is actually true?</p>",
        "id": 509569682,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743552187
    },
    {
        "content": "<p>It looks like your equation could in principle have the LHS as a permutation of the RHS, rather than as an equality</p>",
        "id": 509569871,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743552260
    },
    {
        "content": "<p>Ha, no the equality is not defined as true but I do want it to be. A permutation would definitely work, then I would only have to figure out how to do transitive membership between an original and updated map.</p>",
        "id": 509577682,
        "sender_full_name": "Dillon Shaffer",
        "timestamp": 1743556393
    },
    {
        "content": "<p>If I understand, the proposition <code>m.keys = (m.map f).keys</code> could be the empty proposition (in which it is untrue) and to enforce truthiness I would need to write <code>(m.keys = (m.map f).keys) = true</code>?</p>\n<p>apparently not xd. Now I'm assuming that the empty proposition is a bottom value that can't exist.</p>",
        "id": 509577895,
        "sender_full_name": "Dillon Shaffer",
        "timestamp": 1743556500
    },
    {
        "content": "<p>There are currently no lemmas for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Std.HashMap.map#doc\">docs#Std.HashMap.map</a>, but there is work in progress on this and full lemma coverage for <code>map</code>, <code>filterMap</code> and <code>filter</code> will (most likely) be part of Lean 4.20.0.</p>\n<p>As Eric points out, the two lists will only be equal up to permutation:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Std</span>\n\n<span class=\"k\">#eval</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Std.HashMap.ofList</span><span class=\"w\"> </span><span class=\"o\">[(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">16</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)])</span><span class=\"bp\">.</span><span class=\"n\">keys</span><span class=\"w\"> </span><span class=\"c1\">-- [16, 0]</span>\n<span class=\"k\">#eval</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Std.HashMap.ofList</span><span class=\"w\"> </span><span class=\"o\">[(</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">16</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)])</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">keys</span><span class=\"w\"> </span><span class=\"c1\">-- [0, 16]</span>\n</code></pre></div>",
        "id": 509604090,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1743571632
    },
    {
        "content": "<p>The lemma got now merged into the master. In at most a day there should be a nightly available  with the results if you need them now. Keep in mind that this nightly version might not be as stable as a release.</p>",
        "id": 512806525,
        "sender_full_name": "Johannes Tantow",
        "timestamp": 1744890420
    }
]