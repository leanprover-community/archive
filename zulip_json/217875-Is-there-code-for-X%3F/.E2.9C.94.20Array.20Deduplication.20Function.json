[
    {
        "content": "<p>Hi everyone,</p>\n<p>I'm currently working with arrays in Lean and was wondering if there is an <strong>existing built-in function</strong> to <strong>remove duplicate elements from an Array</strong>. I noticed that the <code>List</code> provides <a href=\"https://leanprover-community.github.io/mathlib4_docs/Batteries/Data/List/Basic.html#List.eraseDup\">List.eraseDup</a>, but I couldn't find anything similar for arrays.</p>\n<p>Is there a specific reason why Lean's standard library doesn’t include a deduplication function for arrays? Is it due to design choices or underlying limitations with arrays in Lean?</p>\n<p>Thanks for your help and insights!</p>",
        "id": 497584453,
        "sender_full_name": "White Chen",
        "timestamp": 1738645765
    },
    {
        "content": "<p>it looks like there's <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Array.sortDedup#doc\">docs#Array.sortDedup</a> but I'm unsure if there's anything more efficient (and without sorting)</p>",
        "id": 497585174,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1738646159
    },
    {
        "content": "<p>if it's already sorted you can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Array.dedupSorted#doc\">docs#Array.dedupSorted</a></p>",
        "id": 497585309,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1738646263
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Batteries/Data/Array/Merge.html#Array.sortDedup\">Array.sortDedup</a> need <code>[ord : Ord α]</code>, but the elements in my array are first order logic formulas, making it difficult to define <code>order</code>. (Although I had defined <code>BEq</code>)</p>",
        "id": 497585552,
        "sender_full_name": "White Chen",
        "timestamp": 1738646439
    },
    {
        "content": "<p>No specific reason, we just haven't got there yet!</p>",
        "id": 497589617,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1738649274
    },
    {
        "content": "<p>If your type is <code>Hashable</code> (or can be made so) you might just using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Std.HashSet.insertMany#doc\">docs#Std.HashSet.insertMany</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Std.HashSet.toArray#doc\">docs#Std.HashSet.toArray</a>.</p>",
        "id": 497589793,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1738649398
    },
    {
        "content": "<p>(if order doesn't matter)</p>",
        "id": 497589887,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1738649429
    },
    {
        "content": "<p>I think eventually we will provide:</p>\n<ul>\n<li><code>Array.dedupAdjacent</code> which only looks at adjacent pairs (i.e. is useful if you can presort the list)</li>\n<li><code>Array.qsortDedup</code>, a convenience function for running <code>qsort</code> and then <code>dedupAdjacent</code> and similarly <code>Array.insertionSortDedup</code></li>\n<li><code>Array.hashDedup</code>, which uses a <code>HashSet</code> to track membership, and returns the deduplicated elements in the original order</li>\n<li><code>Array.pairwiseDedup</code> which runs the quadratic time pairwise comparison </li>\n</ul>\n<p>But no promises about that happening this quarter. :-)</p>",
        "id": 497590233,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1738649647
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"670422\">White Chen</span> has marked this topic as resolved.</p>",
        "id": 497595092,
        "sender_full_name": "Notification Bot",
        "timestamp": 1738652593
    }
]