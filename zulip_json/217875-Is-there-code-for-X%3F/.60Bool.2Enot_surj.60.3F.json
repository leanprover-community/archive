[
    {
        "content": "<p>I can find <code>Bool.not_inj</code>, proving the negation function on the booleans is injective. But I can't find proofs that it is surjective or bijective. Surely these exist somewhere? </p>\n<p>I'm asking because I'd like to add both the injectivity and surjectivity of the boolean negation function to the library midway through advanced function world in a <a href=\"https://adam.math.hhu.de/#/g/emilyriehl/ReintroductionToProofs\">game</a> I'm building. Earlier levels prove this but the proof (particularly of injectivity) is quite annoying, so I'd like the use to be able to conclude bijectivity later without reproving the components.</p>",
        "id": 547384581,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761605773
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Logic</span><span class=\"bp\">.</span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">not</span><span class=\"bp\">.</span><span class=\"n\">Bijective</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">involutive_not</span><span class=\"bp\">.</span><span class=\"n\">bijective</span>\n</code></pre></div>",
        "id": 547384915,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761605958
    },
    {
        "content": "<p>I would use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Bool.involutive_not#doc\">docs#Bool.involutive_not</a> along with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Function.Involutive.bijective#doc\">docs#Function.Involutive.bijective</a></p>",
        "id": 547384957,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761605967
    },
    {
        "content": "<p>maybe you can use a version of this (hopefully less tedious) proof in your game</p>",
        "id": 547385026,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761606006
    },
    {
        "content": "<p>I see how that proves the theorem I want but is the theorem itself missing from the library?</p>",
        "id": 547392415,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761611458
    },
    {
        "content": "<p>I think so</p>",
        "id": 547392511,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761611518
    },
    {
        "content": "<p>IIRC we are actually missing the obvious <code>Equiv</code> for <code>not</code>.</p>",
        "id": 547472995,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761652316
    },
    {
        "content": "<p>I think what you should do is add that and then the proof of surjectivity and injectivity of <code>not</code> easily follows.</p>",
        "id": 547473060,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761652342
    },
    {
        "content": "<p>Ah, here we are, I knew I had it in one of my repos.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">simps!</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">boolNot</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">not</span>\n<span class=\"w\">  </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">not</span>\n<span class=\"w\">  </span><span class=\"n\">left_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">not_not</span>\n<span class=\"w\">  </span><span class=\"n\">right_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">not_not</span>\n</code></pre></div>",
        "id": 547473750,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761652557
    },
    {
        "content": "<p>(Which is incidentally the same as finTwoEquiv.permCongr Fin.revPerm, but that is clearly a worse definition.)</p>",
        "id": 547474215,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761652710
    },
    {
        "content": "<p><code>Function.Involutive.toPerm</code></p>",
        "id": 547478528,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761653939
    },
    {
        "content": "<p>Oho, even better.</p>",
        "id": 547479571,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761654286
    },
    {
        "content": "<p><code>Bool.involutive_not.toPerm</code> then</p>",
        "id": 547479770,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761654348
    },
    {
        "content": "<p>And then <code>Bool.involutive_not.toPerm.surjective</code> and <code>Bool.involutive_not.toPerm.injective</code> will give you the injectivity and surjectivity proofs.</p>",
        "id": 547480050,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761654434
    },
    {
        "content": "<p>well, that's one extra step for the surjective and bijective proofs</p>",
        "id": 547481088,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761654730
    },
    {
        "content": "<p>Oh, yes.</p>",
        "id": 547482778,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761655210
    },
    {
        "content": "<p>I just think separately we ought to have that Equiv in the library.</p>",
        "id": 547482840,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761655225
    },
    {
        "content": "<p>We should have it for <code>compl</code> in a boolean algebra.</p>",
        "id": 547504639,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1761660774
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"330967\">@Wrenna Robson</span> <span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> see <a href=\"https://github.com/leanprover-community/mathlib4/pull/31028\">#31028</a>. I listed your names in the new file but it seems to add yourself as authors to the PR you need to add a commit using </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"w\"> </span><span class=\"c1\">--author=\"Author Name &lt;author@email.com&gt;\" --allow-empty -m \"add Author Name as coauthor\"</span>\n</code></pre></div>",
        "id": 547572560,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761679365
    },
    {
        "content": "<p>We haven't updated the PR instructions yet, but I think just adding lines like:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Co-authored-by: NAME &lt;NAME@EXAMPLE.COM&gt;\nCo-authored-by: ANOTHER-NAME &lt;ANOTHER-NAME@EXAMPLE.COM&gt;\n</code></pre></div>\n<p>to the PR comment (right before the <code>---</code>) should work now.</p>",
        "id": 547573057,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1761679554
    },
    {
        "content": "<p>Looks nice to me :)</p>",
        "id": 547573282,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761679637
    },
    {
        "content": "<p>You might want to show that any equivalence on Bool is either not or the identity. I don't think that should be very hard and I bet you could state it nicely.</p>",
        "id": 547573391,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761679677
    },
    {
        "content": "<p>forall e, e = bif e[false] then Equiv.boolNot else Equiv.refl Bool</p>",
        "id": 547573523,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761679735
    },
    {
        "content": "<p>That kind of thing.</p>",
        "id": 547573565,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761679752
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"330967\">@Wrenna Robson</span></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">boolNot</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">involutive_not</span><span class=\"bp\">.</span><span class=\"n\">toPerm</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Perm</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">boolNot</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>",
        "id": 547573600,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761679768
    },
    {
        "content": "<p>Sure but I think it's quite nice to have it explicitly given by the value on either true or false</p>",
        "id": 547573718,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761679811
    },
    {
        "content": "<p>i'm not contradicting your messages</p>",
        "id": 547573770,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761679836
    },
    {
        "content": "<p>Indeed. That second example is really really nice.</p>",
        "id": 547573797,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761679849
    },
    {
        "content": "<p>It's cool that that is decidable.</p>",
        "id": 547573805,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1761679854
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"330967\">@Wrenna Robson</span> actually I think whichever formulation you'll end up writing will be decidable</p>",
        "id": 547574558,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761680055
    },
    {
        "content": "<p>Please add something like this if you like. I'm hoping to merge quickly so I can update my game level to reference this... :)</p>",
        "id": 547575713,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1761680514
    },
    {
        "content": "<p>can you add custom lemmas to your game?</p>",
        "id": 547575762,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761680531
    }
]