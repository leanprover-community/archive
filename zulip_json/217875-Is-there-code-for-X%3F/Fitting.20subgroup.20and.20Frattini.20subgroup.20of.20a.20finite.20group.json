[
    {
        "content": "<p>Are either of these subgroups defined in our group theory library? Moogle doesn't come up with anything. Assuming neither exist, what are conventions about what belongs in a separate file for something like this? In addition to defining both I was thinking of proving some basic results about each which would be useful later on.</p>",
        "id": 544857941,
        "sender_full_name": "Ryan Smith",
        "timestamp": 1760489212
    },
    {
        "content": "<p>Typing <code>frattini</code> into the search box in VSCode immediately finds the Frattini subgroup?</p>",
        "id": 544859998,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1760490931
    },
    {
        "content": "<p>You are correct of course <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span> I'm not sure why it still doesn't show up in Moogle. Even with advanced file search technology I still don't see any sign of the Fitting subgroup?</p>",
        "id": 544865051,
        "sender_full_name": "Ryan Smith",
        "timestamp": 1760494877
    },
    {
        "content": "<p>Moogle has not been updated in some time, and I think is not really being maintained. LeanSearch is generally better.</p>",
        "id": 544874730,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1760503003
    },
    {
        "content": "<p><a href=\"https://leansearch.net/?q=frattini+subgroup\">https://leansearch.net/?q=frattini+subgroup</a></p>",
        "id": 544874786,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1760503047
    },
    {
        "content": "<p>Yeah, we don't have the fitting subgroup, just the frattini subgroup (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=frattini#doc\">docs#frattini</a>).</p>",
        "id": 544878715,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1760505645
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Fitting.20subgroup.20and.20Frattini.20subgroup.20of.20a.20finite.20group/near/544874730\">said</a>:</p>\n<blockquote>\n<p>Moogle has not been updated in some time, and I think is not really being maintained. LeanSearch is generally better.</p>\n</blockquote>\n<p>Or remember that loogle can search for strings and types together...</p>",
        "id": 544881271,
        "sender_full_name": "Chris Henson",
        "timestamp": 1760507427
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> Group, \"frattini\"</p>",
        "id": 544881290,
        "sender_full_name": "Chris Henson",
        "timestamp": 1760507438
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/GroupTheory/Frattini.html#frattini\">frattini</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/GroupTheory/Frattini.html#frattini_characteristic\">frattini_characteristic</a>, and <a href=\"https://loogle.lean-lang.org/?q=Group%2C%20%22frattini%22\">5 more</a></p>",
        "id": 544881293,
        "sender_full_name": "loogle",
        "timestamp": 1760507439
    },
    {
        "content": "<p>I couldn't resist feeding Claude \"The Theory of Nilpotent Groups\", and seeing what it could do. It's certainly not complete, but a decent start in the <code>fitting</code> branch of kim-em/mathlib4:</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\"><pre><span></span><code>/-\nCopyright (c) 2025 Lean FRO, LLC. All rights reserved.\nReleased under Apache 2.0 license as described in the file LICENSE.\nAuthors: Kim Morrison\n-/\nimport Mathlib.GroupTheory.Nilpotent\n\n/-!\n# Fitting&#39;s theorem\n\nThis file proves Fitting&#39;s theorem about nilpotent normal subgroups.\n\n## Main results\n* `Subgroup.lowerCentralSeries_sup_eq_bot`: The key technical lemma stating that if\n  `lowerCentralSeries M m = ⊥` and `lowerCentralSeries N n = ⊥`, then\n  `lowerCentralSeries (M ⊔ N) (m + n) = ⊥`.\n* `Subgroup.isNilpotent_sup`: If `M` and `N` are nilpotent normal subgroups of `G`,\n  then their supremum `M ⊔ N` is also nilpotent.\n* `Subgroup.nilpotencyClass_sup_le`: If `M` has nilpotency class `m` and `N` has\n  nilpotency class `n`, then `M ⊔ N` has nilpotency class at most `m + n`.\n\n## References\n* [Wikipedia, Fitting&#39;s theorem](https://en.wikipedia.org/wiki/Fitting%27s_theorem)\n-/\n\nopen Subgroup Group\n\nvariable {G : Type*} [Group G]\n\nnamespace Subgroup\n\n/-- **Fitting&#39;s theorem** (explicit bound): If `lowerCentralSeries M m = ⊥` and\n`lowerCentralSeries N n = ⊥`, then `lowerCentralSeries (M ⊔ N) (m + n) = ⊥`.\n\nThis is the key technical lemma from which both `isNilpotent_sup` and `nilpotencyClass_sup_le`\nfollow as immediate corollaries.\n\n## Proof Sketch\n**Step 1**: By hypothesis, `lowerCentralSeries M m = ⊥` and `lowerCentralSeries N n = ⊥`.\n**Step 2**: We need to show `lowerCentralSeries (M ⊔ N) (m + n) = ⊥`. This means showing\nevery element in this subgroup is the identity.\n**Step 3**: Expand `lowerCentralSeries (M ⊔ N) (m + n)` as an (m+n)-fold nested commutator\n`⁅M ⊔ N, ⁅M ⊔ N, ⁅..., ⊤⁆...⁆⁆`. Using distributivity of commutators over suprema (since M and N\nare normal), this can be written as a supremum of (m+n)-fold commutators where each position\nis occupied by either `M` or `N`.\n**Step 4**: For any such commutator, by pigeonhole principle, either `M` appears at least `m`\ntimes or `N` appears at least `n` times.\n**Step 5**: Key lemma needed: If `lowerCentralSeries M k = ⊥` and `H` is any subgroup, then\niterated commutators `⁅M, ⁅M, ⁅..., ⁅M, H⁆...⁆⁆⁆` (with M appearing k times) equals `⊥`.\nThis follows from the fact that `lowerCentralSeries M` is preserved under commutators with\nnormal subgroups.\n**Step 6**: Applying Step 5, any commutator with M appearing ≥m times or N appearing ≥n\ntimes must equal `⊥`.\n**Step 7**: Since all commutators in the expansion are `⊥`, the entire supremum is `⊥`. -/\ntheorem lowerCentralSeries_sup_eq_bot (M N : Subgroup G) [M.Normal] [N.Normal]\n    (m n : ℕ) (hM : lowerCentralSeries M m = ⊥) (hN : lowerCentralSeries N n = ⊥) :\n    lowerCentralSeries (M ⊔ N : Subgroup G) (m + n) = ⊥ := by\n  sorry\n\n/-- **Fitting&#39;s theorem**: The supremum of two nilpotent normal subgroups is nilpotent.\n\nIn group theory, when `M` and `N` are normal subgroups, their supremum `M ⊔ N` equals their\nproduct `{mn | m ∈ M, n ∈ N}`, which is also a normal subgroup. This theorem states that\nif both `M` and `N` are nilpotent, then so is their product.\n\n## Proof Sketch\n\nBy the definition of `IsNilpotent`, there exist `m` and `n` such that\n`lowerCentralSeries M m = ⊥` and `lowerCentralSeries N n = ⊥`. We can take\n`m = nilpotencyClass M` and `n = nilpotencyClass N` by `lowerCentralSeries_nilpotencyClass`.\nThen `lowerCentralSeries_sup_eq_bot` gives us that\n`lowerCentralSeries (M ⊔ N) (nilpotencyClass M + nilpotencyClass N) = ⊥`, which by\n`nilpotent_iff_lowerCentralSeries` shows that `M ⊔ N` is nilpotent. -/\ninstance isNilpotent_sup (M N : Subgroup G) [M.Normal] [N.Normal]\n    [IsNilpotent M] [IsNilpotent N] : IsNilpotent (M ⊔ N : Subgroup G) := by\n  rw [nilpotent_iff_lowerCentralSeries]\n  use nilpotencyClass M + nilpotencyClass N\n  apply lowerCentralSeries_sup_eq_bot\n  · rw [lowerCentralSeries_eq_bot_iff_nilpotencyClass_le]\n  · rw [lowerCentralSeries_eq_bot_iff_nilpotencyClass_le]\n\n/-- **Fitting&#39;s theorem** with nilpotency class bound: If `M` has nilpotency class `m` and `N`\nhas nilpotency class `n`, then `M ⊔ N` has nilpotency class at most `m + n`.\n\n## Proof Sketch\n\nThis follows directly from `lowerCentralSeries_sup_eq_bot`:\n- Let `m = nilpotencyClass M` and `n = nilpotencyClass N`.\n- By `lowerCentralSeries_nilpotencyClass`, we have\n  `lowerCentralSeries M m = ⊥` and `lowerCentralSeries N n = ⊥`.\n- By `lowerCentralSeries_sup_eq_bot`, we have `lowerCentralSeries (M ⊔ N) (m + n) = ⊥`.\n- Therefore, by `lowerCentralSeries_eq_bot_iff_nilpotencyClass_le`, we have\n  `Group.nilpotencyClass (M ⊔ N) ≤ m + n`.\n\nNote: The bound is sharp in many cases. For example, when `M` and `N` generate a direct\nproduct, the nilpotency class of `M ⊔ N` is exactly `max(m, n)` by `nilpotencyClass_prod`,\nbut in general the class can be as large as `m + n`. -/\ntheorem nilpotencyClass_sup_le (M N : Subgroup G) [M.Normal] [N.Normal]\n    [IsNilpotent M] [IsNilpotent N] :\n    nilpotencyClass (M ⊔ N : Subgroup G) ≤\n      nilpotencyClass M + nilpotencyClass N := by\n  rw [← lowerCentralSeries_eq_bot_iff_nilpotencyClass_le]\n  have h := lowerCentralSeries_sup_eq_bot M N (nilpotencyClass M) (nilpotencyClass N)\n  simp only [lowerCentralSeries_eq_bot_iff_nilpotencyClass_le] at h\n  have h&#39; := h (by omega) (by omega)\n  exact lowerCentralSeries_eq_bot_iff_nilpotencyClass_le.mpr h&#39;\n\nend Subgroup\n</code></pre></div>\n</div></div>\n<p>Feel free to use or ignore as you please!</p>",
        "id": 544888170,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1760510754
    },
    {
        "content": "<p>I wonder how Aristotle would perform with that file as input?</p>",
        "id": 544888234,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1760510782
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Fitting.20subgroup.20and.20Frattini.20subgroup.20of.20a.20finite.20group/near/544888234\">said</a>:</p>\n<blockquote>\n<p>I wonder how Aristotle would perform with that file as input?</p>\n</blockquote>\n<p>I tried and it didn't manage to fill the <code>sorry</code>.</p>",
        "id": 544913731,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1760519096
    },
    {
        "content": "<p>I didn't realize that moogle was abandoned, thanks. I've had trouble finding results which people said they were going to merge into mathlib, I thought it was just that their PRs were stuck in purgatory.</p>",
        "id": 544995334,
        "sender_full_name": "Ryan Smith",
        "timestamp": 1760541142
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> Sort of related question: do we have mathlib reviewers focused on specific areas of math / the library? Any approved reviewer could check if a PR passes basic correctness, but it might take deeper knowledge of both lean and the subject area to know if we're formalizing new definitions well for the future. I remember as a particularly thorny example of this Kevin Buzzard had a blog post about going through three iterations of the definition of a scheme to find the right one for use in lean.</p>",
        "id": 545008089,
        "sender_full_name": "Ryan Smith",
        "timestamp": 1760544563
    },
    {
        "content": "<p>May I point at the section of the readme that lists the maintainers and their areas of interest? <a href=\"https://github.com/leanprover-community/mathlib4?tab=readme-ov-file#maintainers\">https://github.com/leanprover-community/mathlib4?tab=readme-ov-file#maintainers</a></p>",
        "id": 545012148,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1760545737
    },
    {
        "content": "<p>Yes!</p>",
        "id": 545028644,
        "sender_full_name": "Ryan Smith",
        "timestamp": 1760549699
    },
    {
        "content": "<p>One thing about the first two definitions of a scheme is that they were <em>not even PRed</em> to mathlib, because along the way it became clear why they were deficient.</p>\n<p>One of the roles FLT plays here is that it has a more liberal idea of an acceptable definition (because I am doing the reviewing and I am nowhere near as talented as the pool of all mathlib maintainers/reviewers) and then we play with the definition and see if it works in practice. Ones that do may well get upstreamed to mathlib.</p>",
        "id": 545074476,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760551605
    },
    {
        "content": "<p>Fortunately for the topic at hand, getting the definitions for e.g. Fitting subgroups right is much easier than for schemes. While I don't know that we have anyone who is a particular specialist in finite group theory on the reviewer team, I think there is still a long runway of results that we could competently review before there's a problem. And hopefully by that stage we have some Lean-expert finite group theorists who we can appoint as reviewers!</p>\n<p>And moreover --- everyone can and should review! Being an \"official reviewer\" really just means that you have access to some bots that send notifications, and being an official maintainer just means you can tell the bot to merge things, but <em>anyone</em> can say \"this looks good\" (or otherwise!), and this is both super helpful, and essential for the library to grow in new directions.</p>",
        "id": 545132916,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1760565110
    }
]