[
    {
        "content": "<p>Is the long exact sequence for right derived functors defined in Mathlib?<br>\nFor example, is there an obvious way to remove this sorry (without inserting exact 0).</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Homology</span><span class=\"bp\">.</span><span class=\"n\">ShortComplex</span><span class=\"bp\">.</span><span class=\"n\">ShortExact</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Abelian</span><span class=\"bp\">.</span><span class=\"n\">RightDerived</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Functor</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Abelian</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Abelian</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">EnoughInjectives</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">⥤</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PreservesLimits</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">Additive</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ShortComplex</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hS</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">.</span><span class=\"n\">ShortExact</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">rightDerived</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">.</span><span class=\"n\">X₃</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">rightDerived</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">.</span><span class=\"n\">X₁</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 575499727,
        "sender_full_name": "Richard Hill",
        "timestamp": 1771927322
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> <span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span></p>",
        "id": 575529009,
        "sender_full_name": "Edison Xie",
        "timestamp": 1771936155
    },
    {
        "content": "<p>I have this on a branch <a href=\"https://github.com/joelriou/mathlib4/blob/4e2559a08433acc41cc0b2c847fa800a87eba7dd/Mathlib/Algebra/Homology/DerivedCategory/RightDerivedFunctorPlus.lean#L240\">https://github.com/joelriou/mathlib4/blob/4e2559a08433acc41cc0b2c847fa800a87eba7dd/Mathlib/Algebra/Homology/DerivedCategory/RightDerivedFunctorPlus.lean#L240</a> which is meant to enter mathlib at some point...</p>",
        "id": 575531095,
        "sender_full_name": "Joël Riou",
        "timestamp": 1771936874
    },
    {
        "content": "<p>The idea is to construct the total derived functor <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mi>F</mi><mo>:</mo><msup><mi>D</mi><mo>+</mo></msup><mo stretchy=\"false\">(</mo><mi>C</mi><mo stretchy=\"false\">)</mo><mo>→</mo><msup><mi>D</mi><mo>+</mo></msup><mo stretchy=\"false\">(</mo><mi>D</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">RF: D^+(C) \\rightarrow D^+(D)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">RF</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0213em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0213em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">+</span></span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mclose\">)</span></span></span></span> and show that it is a triangulated functor. In order to do this, I am using a right derivability structure in the sense of <a href=\"https://webusers.imj-prg.fr/~georges.maltsiniotis/ps/bkgmdef.pdf\">https://webusers.imj-prg.fr/~georges.maltsiniotis/ps/bkgmdef.pdf</a> which I constructed <a href=\"https://github.com/leanprover-community/mathlib4/pull/33956\">#33956</a> in the general context of model categories towards the fundamental lemma of homotopical algebra <a href=\"https://github.com/leanprover-community/mathlib4/pull/26303\">#26303</a>.</p>",
        "id": 575534019,
        "sender_full_name": "Joël Riou",
        "timestamp": 1771937748
    },
    {
        "content": "<p>The bottle neck is the construction of the model category structure on bounded below complexes in <code>C</code> which depends on a technical factorization lemma <a href=\"https://github.com/joelriou/mathlib4/blob/4e2559a08433acc41cc0b2c847fa800a87eba7dd/Mathlib/Algebra/Homology/Factorizations/CM5a.lean\">https://github.com/joelriou/mathlib4/blob/4e2559a08433acc41cc0b2c847fa800a87eba7dd/Mathlib/Algebra/Homology/Factorizations/CM5a.lean</a></p>",
        "id": 575534049,
        "sender_full_name": "Joël Riou",
        "timestamp": 1771937753
    },
    {
        "content": "<p>Then, basically any functor from the bounded below homotopy category admits a total right derived functor <a href=\"https://github.com/joelriou/mathlib4/blob/4e2559a08433acc41cc0b2c847fa800a87eba7dd/Mathlib/Algebra/Homology/DerivedCategory/DerivabilityStructureInjectives.lean#L390\">https://github.com/joelriou/mathlib4/blob/4e2559a08433acc41cc0b2c847fa800a87eba7dd/Mathlib/Algebra/Homology/DerivedCategory/DerivabilityStructureInjectives.lean#L390</a></p>",
        "id": 575534078,
        "sender_full_name": "Joël Riou",
        "timestamp": 1771937759
    },
    {
        "content": "<p>Finally, we have to show that under suitable assumptions the derived functor of a triangulated functor is triangulated <a href=\"https://github.com/joelriou/mathlib4/blob/4e2559a08433acc41cc0b2c847fa800a87eba7dd/Mathlib/CategoryTheory/Functor/Derived/RightDerivedTriangulated.lean\">https://github.com/joelriou/mathlib4/blob/4e2559a08433acc41cc0b2c847fa800a87eba7dd/Mathlib/CategoryTheory/Functor/Derived/RightDerivedTriangulated.lean</a></p>",
        "id": 575534099,
        "sender_full_name": "Joël Riou",
        "timestamp": 1771937764
    },
    {
        "content": "<p>Apart from spectral sequences, this is my second-most priority for the integration of my formalization of homological algebra in mathlib. There should be some progress in the next few weeks.</p>",
        "id": 575534146,
        "sender_full_name": "Joël Riou",
        "timestamp": 1771937776
    },
    {
        "content": "<p>Many thanks!</p>",
        "id": 575535147,
        "sender_full_name": "Richard Hill",
        "timestamp": 1771938067
    }
]