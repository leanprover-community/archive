[
    {
        "content": "<p>\"Let M be a free module. Then any spanning set of size rk(M) forms a basis.\"</p>\n<p>This is stronger than the Rank Condition, and holds over all commutative rings - it's property (III) in <a href=\"https://www.sciencedirect.com/science/article/pii/0040938366900061\">https://www.sciencedirect.com/science/article/pii/0040938366900061</a></p>\n<p>I'm looking for a statement of the form <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=finsetBasisOfTopLeSpanOfCardEqFinrank#doc\">docs#finsetBasisOfTopLeSpanOfCardEqFinrank</a> (this one is for division rings).</p>\n<p>[edited repeatedly for accuracy]</p>",
        "id": 556698592,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1763311634
    },
    {
        "content": "<p>(<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=finsetBasisOfTopLeSpanOfCardEqFinrank#doc\">docs#finsetBasisOfTopLeSpanOfCardEqFinrank</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=OrzechProperty#doc\">docs#OrzechProperty</a>)</p>",
        "id": 556700010,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1763312713
    },
    {
        "content": "<p>edited</p>",
        "id": 556700078,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1763312764
    },
    {
        "content": "<p>There's also <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/Dimension/Free.html#Module.finBasisOfFinrankEq\">Module.finBasisOfFinrankEq</a> with a <code>Free</code> assumption (which I agree is unnecessary by Orzech)</p>",
        "id": 556700285,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1763312932
    },
    {
        "content": "<p>Well it's not unncessary - you need <code>M</code> to be free in the first place!</p>",
        "id": 556700432,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1763313097
    },
    {
        "content": "<p>Oh hang on - the Orzech property doesn't say what I thought it says. It's not what I need.</p>",
        "id": 556700642,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1763313286
    },
    {
        "content": "<p>I've edited my post.</p>",
        "id": 556700647,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1763313293
    },
    {
        "content": "<p>I meant it's unnecessary if we add the spanning condition.<br>\n<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=basisOfTopLeSpanOfCardEqFinrank#doc\">docs#basisOfTopLeSpanOfCardEqFinrank</a> is more pertinent, and we should be able to replace the DivisionRing assumption by OrzechProperty.</p>",
        "id": 556701271,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1763313842
    },
    {
        "content": "<p>Not Orzech Property! But by CommRing or alternatively by whatever condition (III) in the paper I sent is called - I'm not sure it's defined in Mathlib?<br>\nIt's equivalent to \"for all square matrices A,B over R such that AB=I, also BA=I\".</p>",
        "id": 556701306,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1763313884
    },
    {
        "content": "<p>Probably the interesting lemma is that the indexed set of vectors is linearly independent, rather than getting distracted by converting them into a basis</p>",
        "id": 556701375,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1763313932
    },
    {
        "content": "<p>Yes indeed<br>\nDownstream lemmas can be generalised</p>",
        "id": 556701407,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1763313962
    },
    {
        "content": "<blockquote>\n<p>It's equivalent to \"for all square matrices A,B over R such that AB=I, also BA=I\".</p>\n</blockquote>\n<p>Oh this is called \"stably finite\" in GTM 189. It's stronger than <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RankCondition#doc\">docs#RankCondition</a> but neither weaker nor stronger than <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=StrongRankCondition#doc\">docs#StrongRankCondition</a>. OrzechProperty implies StrongRankCondition and therefore stably finiteness.<br>\n<a href=\"/user_uploads/3121/U7D8jp7iQVjUv0fVYLhqtB80/image.png\">image.png</a><br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/19581\">#19581</a> shows CommSemirings are stably finite. We should probably introduce a typeclass for it, and I deduced StrongRankCondition in <a href=\"https://github.com/leanprover-community/mathlib4/pull/20584\">#20584</a>.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/U7D8jp7iQVjUv0fVYLhqtB80/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1088x541\" src=\"/user_uploads/thumbnail/3121/U7D8jp7iQVjUv0fVYLhqtB80/image.png/840x560.webp\"></a></div>",
        "id": 556702313,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1763314735
    },
    {
        "content": "<p>Maybe I'm misunderstanding, but I think the paper I linked says that stably finite (III) is strictly stronger than Strong Rank Condition (II):<br>\n<a href=\"/user_uploads/3121/_p_smiMxrQ0Oqbs0rSmQj0Gq/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/_p_smiMxrQ0Oqbs0rSmQj0Gq/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"984x273\" src=\"/user_uploads/thumbnail/3121/_p_smiMxrQ0Oqbs0rSmQj0Gq/image.png/840x560.webp\"></a></div>",
        "id": 556702523,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1763314907
    },
    {
        "content": "<p>(II) is the rank condition, not the strong one.<br>\n(and of course (I) is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=InvariantBasisNumber#doc\">docs#InvariantBasisNumber</a>)<br>\n<a href=\"/user_uploads/3121/pwM6T_SW3Qmz1mDgW7MsN62M/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/pwM6T_SW3Qmz1mDgW7MsN62M/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1078x323\" src=\"/user_uploads/thumbnail/3121/pwM6T_SW3Qmz1mDgW7MsN62M/image.png/840x560.webp\"></a></div>",
        "id": 556703041,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1763315533
    },
    {
        "content": "<p>Out of curiosity, what is an example of a ring that has the invariant basis number property but it doesn't satisfy the rank condition?</p>",
        "id": 556707598,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1763319758
    },
    {
        "content": "<p>There are examples in the paper I linked - sorry the maths is beyond me</p>",
        "id": 556707738,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1763319867
    },
    {
        "content": "<p>Some relevant parts from Lam (GTM 189) and the paper:<br>\n<a href=\"/user_uploads/3121/-eDsV5r5H6dXwqci800fX5Qn/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/3121/HvykHBWpUpWA7qE4yc_Pvf50/image.png\">image.png</a><br>\n<a href=\"/user_uploads/3121/YOYPkJvRUPbDPH3H6qjUb4kM/image.png\">image.png</a><br>\n<a href=\"/user_uploads/3121/8yuMHNwsV9pESbbG9hGJHIsg/image.png\">image.png</a><br>\nand a nice synopsis<br>\n<a href=\"/user_uploads/3121/JReQQdHM-bl7WFnbM-FgwvcN/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/-eDsV5r5H6dXwqci800fX5Qn/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1079x958\" src=\"/user_uploads/thumbnail/3121/-eDsV5r5H6dXwqci800fX5Qn/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/HvykHBWpUpWA7qE4yc_Pvf50/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1011x164\" src=\"/user_uploads/thumbnail/3121/HvykHBWpUpWA7qE4yc_Pvf50/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/YOYPkJvRUPbDPH3H6qjUb4kM/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"919x409\" src=\"/user_uploads/thumbnail/3121/YOYPkJvRUPbDPH3H6qjUb4kM/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/8yuMHNwsV9pESbbG9hGJHIsg/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1043x108\" src=\"/user_uploads/thumbnail/3121/8yuMHNwsV9pESbbG9hGJHIsg/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/JReQQdHM-bl7WFnbM-FgwvcN/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1096x660\" src=\"/user_uploads/thumbnail/3121/JReQQdHM-bl7WFnbM-FgwvcN/image.png/840x560.webp\"></a></div>",
        "id": 556712758,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1763325183
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/32262\">#32262</a> introduces Dedekind-finite and stably finite rings.</p>",
        "id": 560961745,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1764469561
    },
    {
        "content": "<p>Experimented a bit with performance optimization and I'm happy with the current state of the PR.</p>",
        "id": 561156323,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1764595073
    },
    {
        "content": "<p>... but as it turns out, the correct condition for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=finsetBasisOfTopLeSpanOfCardEqFinrank#doc\">docs#finsetBasisOfTopLeSpanOfCardEqFinrank</a> really <strong>is</strong> Orzech property, not stable finitenss or something else, see <a href=\"https://github.com/leanprover-community/mathlib4/pull/32339/files\">#32339</a>.</p>",
        "id": 561312285,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1764641861
    },
    {
        "content": "<p>I'm confused. I thought Orzech is stronger than stable finiteness. The thing I linked says precisely that stable finiteness is equivalent to condition (III) \"any generating set of n elements in R^n is free.\" Whereas Orzech contains the behaviour of non-free modules, too.</p>",
        "id": 561313493,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1764642740
    },
    {
        "content": "<p>Oh I forgot about freeness. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=finsetBasisOfTopLeSpanOfCardEqFinrank#doc\">finsetBasisOfTopLeSpanOfCardEqFinrank</a> doesn't contain the freeness condition (though it's automatic under the original DivisionRing assumption now generalized away).<br>\nIf you assume freeness then yes IsStablyFiniteRing is enough. I might add this to <a href=\"https://github.com/leanprover-community/mathlib4/pull/32262\">#32262</a> some time later.</p>",
        "id": 561316312,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1764644769
    },
    {
        "content": "<p>Though this version (with freeness assumption) can't quite be stated using <code>finrank</code>: since stably finiteness doesn't imply the strong rank condition, R^n may have infinity rank (=&gt; zero finrank). This isn't a problem with Orzech property, which implies the strong rank condition.</p>",
        "id": 561317354,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1764645462
    },
    {
        "content": "<p>Well yeah you also have to assume finite rank</p>",
        "id": 561415298,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1764682901
    },
    {
        "content": "<p>Oh maybe I'm missing something <br>\nIn any case this is enough for what I need so thanks!</p>",
        "id": 561423820,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1764684882
    },
    {
        "content": "<p>R^n is usually said to be free of finite rank n for any semiring R, but in mathlib Module.rank is the supremum of cardinalities of linearly independent sets. If R doesn't satisfy strong rank condition, then some R^{n+1} embeds into R^n, and one can show (<a href=\"https://github.com/leanprover-community/mathlib4/pull/32194\">#32194</a>) that R^n must then contain an infinite linearly independent set, so its rank according to mathlib is infinite. (It's relatively easy to see the rank is infinite since ... embeds in R^{n+3} embeds in R^{n+2} embeds in R^{n+1} embeds in R^n.)</p>",
        "id": 561462259,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1764692567
    },
    {
        "content": "<p>Oh I see, it's a subtlety in how \"rank\" is defined.</p>",
        "id": 561462577,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1764692636
    },
    {
        "content": "<p>“R^n is usually said to be free of finite rank n for any semiring R” — I'm not sure how “usual” this is, because when R^n is isomorphic to, say, R^2n, one wouldn't say simultaneously that a module is free of rank n and 2n.</p>",
        "id": 562248784,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1765035316
    },
    {
        "content": "<p><a href=\"https://www.google.com/search?q=free+module+rank+not+unique+site:math.stackexchange.com\">Search results</a> suggests that people routinely talk about ranks as cardinalities of free generating sets that are not a priori unique.</p>",
        "id": 562264577,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1765053711
    },
    {
        "content": "<p>Using StackExchange for this test is a bit paradoxical, since most of its users are half-instructed people. And even mathematicians are used to frame their thoughts upside-down. But that doesn't mean that \"rank\" is ill-defined.</p>",
        "id": 562307654,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1765113006
    },
    {
        "content": "<p>Colleagues who have thought about this “know” that the dimension of a (projective) module over a commutative ring should be a (locally constant) function on the spectrum of that ring, as is the dimension of a topological space (of a manifold). But this correct definition is hard to implement in practice (if the dimension of a manifold varies, how do you frame the duality of differential forms/currents, etc.) so that most people half-renounce that subtlety.</p>",
        "id": 562307766,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1765113146
    },
    {
        "content": "<p>Mathlib does have <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Spectrum/Prime/FreeLocus.html#Module.isLocallyConstant_rankAtStalk_freeLocus\">Module.isLocallyConstant_rankAtStalk_freeLocus</a></p>\n<p>The SE questions mentions Dummit--Foote so I looked into the textbook. It is apparent that they are really using  the word \"rank\" for free objects without assuming it has to be unique. Moreover it does define <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">R^n</annotation></semantics></math></span><span aria-hidden=\"true\" class=\"katex-html\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> to be \"the free module of rank n\" over any ring R.<br>\n<a href=\"/user_uploads/3121/FRPacmhLYqjh2xlY5FuM9k9s/image.png\">image.png</a><br>\n<a href=\"/user_uploads/3121/NMKS-PIeHGBVPz2fks-DIXgs/image.png\">image.png</a><br>\n<a href=\"/user_uploads/3121/r45ywG25pgWl9Tsb81JzKMIJ/image.png\">image.png</a><br>\n<a href=\"/user_uploads/3121/WVErGqH2vfjOyIHpgVdukXQB/image.png\">image.png</a><br>\n<a href=\"/user_uploads/3121/fuM3TgmDtFd-plHvALlYvCT5/image.png\">image.png</a><br>\n<a href=\"/user_uploads/3121/NcgTD3_UDNrV41yvaXKUOKTb/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/FRPacmhLYqjh2xlY5FuM9k9s/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"933x134\" src=\"/user_uploads/thumbnail/3121/FRPacmhLYqjh2xlY5FuM9k9s/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/NMKS-PIeHGBVPz2fks-DIXgs/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"907x95\" src=\"/user_uploads/thumbnail/3121/NMKS-PIeHGBVPz2fks-DIXgs/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/r45ywG25pgWl9Tsb81JzKMIJ/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"871x312\" src=\"/user_uploads/thumbnail/3121/r45ywG25pgWl9Tsb81JzKMIJ/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/WVErGqH2vfjOyIHpgVdukXQB/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"927x166\" src=\"/user_uploads/thumbnail/3121/WVErGqH2vfjOyIHpgVdukXQB/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/fuM3TgmDtFd-plHvALlYvCT5/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"907x177\" src=\"/user_uploads/thumbnail/3121/fuM3TgmDtFd-plHvALlYvCT5/image.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/NcgTD3_UDNrV41yvaXKUOKTb/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"921x355\" src=\"/user_uploads/thumbnail/3121/NcgTD3_UDNrV41yvaXKUOKTb/image.png/840x560.webp\"></a></div>",
        "id": 562314859,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1765120877
    },
    {
        "content": "<p>I was presomptuous of my colleagues. I wonder how can we expect our students to understand something.</p>",
        "id": 562318291,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1765124385
    },
    {
        "content": "<p>In any case, thank you for this reference. This is really instructive.</p>",
        "id": 562318337,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1765124437
    }
]