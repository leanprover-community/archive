[
    {
        "content": "<p>Do we really not have this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Common</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">isUnit_of_isUnit_mul</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Commute</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨⟨_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ixy</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"bp\">⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h'</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨⟨_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">ixy</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rwa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">mul_assoc</span><span class=\"o\">],</span>\n<span class=\"w\">    </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">congr</span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">ixy</span><span class=\"o\">)</span><span class=\"bp\">⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n</code></pre></div>",
        "id": 480842934,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1730867358
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Commute.isUnit_mul_iff#doc\">docs#Commute.isUnit_mul_iff</a></p>",
        "id": 480844349,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1730868540
    },
    {
        "content": "<p>Oh thanks!<br>\nNot sure how <code>exact?</code> did not find it.</p>",
        "id": 480845981,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1730869585
    },
    {
        "content": "<p>This lemma is an <code>iff</code> that produces <code>IsUnit x ∧ IsUnit y</code>. There's no way for <code>apply</code> to get to <code>IsUnit x</code> from that.</p>",
        "id": 480847329,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730870693
    },
    {
        "content": "<p>I found it using <span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> Commute, IsUnit (_ * _)<br>\nAlso, it looks like I added it in 2021</p>",
        "id": 480848369,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1730871395
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Commute/Units.html#Commute.isUnit_mul_iff\">Commute.isUnit_mul_iff</a></p>",
        "id": 480848371,
        "sender_full_name": "loogle",
        "timestamp": 1730871397
    },
    {
        "content": "<p>If you add this (and the symmetric version) then <code>exact?</code> will find it next time.</p>",
        "id": 480875980,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730884842
    },
    {
        "content": "<p>It can be called, e.g., <code>IsUnit.left_of_mul</code>.</p>",
        "id": 480945842,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1730907059
    },
    {
        "content": "<p>Or <code>Commute.isUnit_of_mul_left</code>? (or should it be <code>right</code>, then)</p>",
        "id": 480952050,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730908911
    },
    {
        "content": "<p>I think the <code>Commute</code> doesn't really need to be part of the name, or rather than primarily, so that the name can be similar to the <code>CommMonoid</code> lemma</p>",
        "id": 480952610,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1730909054
    },
    {
        "content": "<p>There is already <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=isUnit_of_mul_isUnit_left#doc\">docs#isUnit_of_mul_isUnit_left</a> which does not go through the non-commutative case, which was why I thought it didn't exist. <br>\nI'd prefer <code>Commute.isUnit_of_mul_isUnit_left</code> to mirror the commmonoid lemma.</p>",
        "id": 480953176,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1730909240
    },
    {
        "content": "<p>I would call the <code>CommMonoid</code> lemma <code>IsUnit.left_of_mul</code> and the <code>Commute</code> one <code>IsUnit.left_of_mul_of_commute</code></p>",
        "id": 480953424,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1730909320
    },
    {
        "content": "<p>And rename <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Commute.isUnit_mul_iff#doc\">docs#Commute.isUnit_mul_iff</a> ?</p>",
        "id": 480955311,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730909944
    },
    {
        "content": "<p>Don't really know about this one because no dot notation becomes available</p>",
        "id": 480955383,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1730909971
    },
    {
        "content": "<p>I would leave <code>Commute.isUnit_mul_iff</code> as is, because it can be used with dot notation now.</p>",
        "id": 480956282,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1730910243
    }
]