[
    {
        "content": "<p>Do we have the fact that <code>p : MvPolynomial σ R</code> is equal to its sum of monomials <code>p.sum (fun i ↦ monomial i)</code>? The corresponding statement for <code>p : R[X]</code> is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.sum_monomial_eq#doc\">docs#Polynomial.sum_monomial_eq</a>, but <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MvPolynomial.sum_monomial_eq#doc\">docs#MvPolynomial.sum_monomial_eq</a> is a completely different statement...</p>",
        "id": 495684055,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1737715320
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"224323\">@Junyan Xu</span> since this was prompted by your comment here: <a href=\"https://github.com/leanprover-community/mathlib4/pull/20989/files#r1927835697\">https://github.com/leanprover-community/mathlib4/pull/20989/files#r1927835697</a></p>",
        "id": 495684226,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1737715356
    },
    {
        "content": "<p>Doesn't seem like it. (Why is that using Finsupp.sum?)</p>",
        "id": 495685494,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1737715765
    },
    {
        "content": "<p>(because there is no <code>Polynomial.sum</code>, likely?)</p>",
        "id": 495685647,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1737715810
    },
    {
        "content": "<p>Aha! <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MvPolynomial.as_sum#doc\">docs#MvPolynomial.as_sum</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MvPolynomial.support_sum_monomial_coeff#doc\">docs#MvPolynomial.support_sum_monomial_coeff</a> it is</p>",
        "id": 495685745,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1737715844
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/A.20multivariate.20polynomial.20is.20the.20sum.20of.20its.20monomials/near/495685494\">said</a>:</p>\n<blockquote>\n<p>Why is that using Finsupp.sum?</p>\n</blockquote>\n<p>I was following whatever <code>Polynomial.sum_monomial_eq</code> was doing</p>",
        "id": 495685858,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1737715881
    },
    {
        "content": "<p>Would be good to make names more consistent around here</p>",
        "id": 495685895,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1737715896
    },
    {
        "content": "<p>Which is also the reverse direction of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MvPolynomial.support_sum_monomial_coeff#doc\">docs#MvPolynomial.support_sum_monomial_coeff</a> just above</p>",
        "id": 495686161,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1737715986
    },
    {
        "content": "<p>(We do have <code>Polynomial.sum</code>, but apparently not <code>MvPolynomial.sum</code>)</p>",
        "id": 495686272,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1737716019
    },
    {
        "content": "<p><code>Finsupp.sum</code> is the name of <code>MvPolynomial.sum</code></p>",
        "id": 495687655,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737716417
    },
    {
        "content": "<p>I claim the inconsistency here is because we have:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Finsupp</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">AddMonoidAlgebra</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Finsupp</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">toFinsupp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AddMonoidAlgebra</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">AddMonoidAlgebra</span>\n</code></pre></div>\n<p>but we ought to have</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Finsupp</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">AddMonoidAlgebra</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">toFinsupp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finsupp</span>\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">AddMonoidAlgebra</span>\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">AddMonoidAlgebra</span>\n</code></pre></div>",
        "id": 495687980,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737716525
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/A.20multivariate.20polynomial.20is.20the.20sum.20of.20its.20monomials/near/495684226\">said</a>:</p>\n<blockquote>\n<p>cc <span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> since this was prompted by your comment here: <a href=\"https://github.com/leanprover-community/mathlib4/pull/20989/files#r1927835697\">https://github.com/leanprover-community/mathlib4/pull/20989/files#r1927835697</a></p>\n</blockquote>\n<p>Do you have to write it as a sum? Could you not use some induction principle?</p>",
        "id": 495688009,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1737716539
    },
    {
        "content": "<p>Maybe you should show <code>coeffsIn</code> is the span of elements of the form <code>m * X^k</code></p>",
        "id": 495688227,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1737716629
    }
]