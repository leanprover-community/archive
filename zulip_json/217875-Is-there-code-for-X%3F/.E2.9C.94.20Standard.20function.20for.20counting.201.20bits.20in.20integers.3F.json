[
    {
        "content": "<p>Do we have primitives for counting 1 bits in <code>UInt64</code> and/or <code>Nat</code>? I did a search (in Lean 4.9) for something like \"countBits\" or \"popcount\" but couldn't find any.</p>\n<p>Thank you very much!</p>",
        "id": 454415494,
        "sender_full_name": "Phil Nguyen",
        "timestamp": 1722051362
    },
    {
        "content": "<p>I'm surprised too that we don't have this.</p>\n<p>I did find <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Num.oneBits#doc\">docs#Num.oneBits</a>, but it's a step away from what you want for both input and output.</p>",
        "id": 454421228,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722054000
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span> has been thinking a lot about <code>BitVec</code> recently, and may know better than me what the status is.</p>",
        "id": 454421355,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722054062
    },
    {
        "content": "<p>(Aside: I expect that Henrik's bitblasting tactics will be able to do things like: <a href=\"https://avigad.github.io/lamr/using_smt_solvers.html#application-verification\">https://avigad.github.io/lamr/using_smt_solvers.html#application-verification</a>, verifying a fast implementation of popcount on fixed size ints)</p>",
        "id": 454421933,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722054256
    },
    {
        "content": "<p>Presumably for lean's purposes, the fast implementation is \"implement by calling the GMP function\"?</p>",
        "id": 454440379,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722065583
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Standard.20function.20for.20counting.201.20bits.20in.20integers.3F/near/454421933\">said</a>:</p>\n<blockquote>\n<p>(Aside: I expect that Henrik's bitblasting tactics will be able to do things like: <a href=\"https://avigad.github.io/lamr/using_smt_solvers.html#application-verification\">https://avigad.github.io/lamr/using_smt_solvers.html#application-verification</a>, verifying a fast implementation of popcount on fixed size ints)</p>\n</blockquote>\n<p>You don't have to expect^^ <a href=\"https://github.com/leanprover/leansat/blob/main/Test/Eval/Popcount.lean\">https://github.com/leanprover/leansat/blob/main/Test/Eval/Popcount.lean</a></p>\n<p><span class=\"user-mention silent\" data-user-id=\"476925\">Phil Nguyen</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Standard.20function.20for.20counting.201.20bits.20in.20integers.3F/near/454415494\">said</a>:</p>\n<blockquote>\n<p>Do we have primitives for counting 1 bits in <code>UInt64</code> and/or <code>Nat</code>? I did a search (in Lean 4.9) for something like \"countBits\" or \"popcount\" but couldn't find any.</p>\n<p>Thank you very much!</p>\n</blockquote>\n<p>for <code>Nat</code> I can't promise things but for UInt and friends I'm hoping to get things like this into the standard library in the near term future.</p>",
        "id": 454440999,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1722066142
    },
    {
        "content": "<p>Thank you so much!!</p>",
        "id": 454441907,
        "sender_full_name": "Phil Nguyen",
        "timestamp": 1722067018
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"476925\">Phil Nguyen</span> has marked this topic as resolved.</p>",
        "id": 454441921,
        "sender_full_name": "Notification Bot",
        "timestamp": 1722067029
    }
]