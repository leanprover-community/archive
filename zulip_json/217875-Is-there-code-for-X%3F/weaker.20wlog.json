[
    {
        "content": "<p>I use <code>wlog</code> as a general way to have guard statements in my proofs for cases that I don't care about - e.g. if I had 4 trivial cases, I wouldn't want to nest a <code>by_cases</code> statement or try to construct some hypothesis that I can plug into <code>rcases</code>. Is there some kind of <code>wlog</code>-like tactic that mimics this sort of style,?</p>\n<p>Example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">unless</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"n\">unless</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">d</span>\n<span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"c1\">-- The rest of the proof which holds when a ≠ b ∧ c ≠ d</span>\n</code></pre></div>",
        "id": 524085785,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1749932213
    },
    {
        "content": "<p>Can you make a mwe?</p>",
        "id": 524085871,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749932333
    },
    {
        "content": "<p>(eg, a proof using <code>by_cases</code> you want a different spelling of)</p>",
        "id": 524085890,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749932360
    },
    {
        "content": "<p>Is the <code>wlog</code> <a href=\"https://github.com/leanprover-community/mathlib4/pull/25174/files#diff-595cb68f07830a46eb49679a0880a385dbc78dfbb9ccce1b634325c91e795302R65\">here</a> along the lines of what you want?</p>",
        "id": 524085922,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749932401
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/weaker.20wlog/near/524085922\">said</a>:</p>\n<blockquote>\n<p>Is the <code>wlog</code> <a href=\"https://github.com/leanprover-community/mathlib4/pull/25174/files#diff-595cb68f07830a46eb49679a0880a385dbc78dfbb9ccce1b634325c91e795302R65\">here</a> along the lines of what you want?</p>\n</blockquote>\n<p>That is the use case that I was thinking of <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 524085963,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1749932444
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">div_le_self₁</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">strongRecOn</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">ind</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">div_eq</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">suffices</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hK</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hKN</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hSub</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">sub_lt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">lt_of_lt_of_le</span><span class=\"w\"> </span><span class=\"n\">hK</span><span class=\"w\"> </span><span class=\"n\">hKN</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hK</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hSub</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ_le_of_lt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">lt_of_le_of_lt</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">hSub</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">div_le_self₂</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">strongRecOn</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">ind</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">div_eq</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">wlog</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">suffices</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hK</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hKN</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hSub</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">sub_lt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">lt_of_lt_of_le</span><span class=\"w\"> </span><span class=\"n\">hK</span><span class=\"w\"> </span><span class=\"n\">hKN</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hK</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hSub</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ_le_of_lt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">lt_of_le_of_lt</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">hSub</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 524087046,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1749933984
    },
    {
        "content": "<p>[Not exactly an MRE, but more of a motivating example]</p>\n<p>Take this proof of <code>div_le_self</code> with <code>by_cases</code> vs with <code>wlog</code> - the latter reads more like a paper-and-pen proof. It would be nice if we had a version of <code>wlog</code> which didn't carry the symmetric hypothesis and was named <code>unless</code>.</p>",
        "id": 524087105,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1749934109
    },
    {
        "content": "<p>I think <code>unless</code> in do notation is also missing the <code>h:</code> notation, maybe both should be added at once</p>",
        "id": 524087257,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749934363
    },
    {
        "content": "<p>I think your <code>unless h : a = b</code> is just <code>by_cases h : a = b; swap</code></p>",
        "id": 524109292,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749969511
    },
    {
        "content": "<p>I haven't seen anyone use <code>swap</code> after <code>by_cases</code> to replicate this but it is essentially just that.</p>\n<p>I have seen the <code>wlog</code> pattern frequently like in the PR <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> mentioned above - though it does make sense not to add this tactic since it is a synonymous tactic to <code>by_cases ...; swap</code> or <code>wlog ... ; clear this</code>.</p>",
        "id": 524109422,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1749969697
    },
    {
        "content": "<p>Though, are these sort of 'synonymous' tactics accepted? I've been using <code>wlog</code> to fill in this role for quite some time now, but I recently made a PR for the Seymour project that used this three times, and using <code>wlog</code> here is abuse of notation, but <code>by_cases</code> causes me to completely break the flow of the proof unless I consistently use the aforementioned <code>swap</code>.</p>",
        "id": 524109532,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1749969878
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"767695\">Tristan Figueroa-Reid</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/weaker.20wlog/near/524109422\">said</a>:</p>\n<blockquote>\n<p>I haven't seen anyone use <code>swap</code> after <code>by_cases</code> to replicate this but it is essentially just that.</p>\n</blockquote>\n<p>There are several use cases in mathlib: <a href=\"https://github.com/leanprover-community/mathlib4/blob/9b0c6a877559b4bb45860affaeafb705cee085aa/Mathlib/Order/Filter/ENNReal.lean#L136\">https://github.com/leanprover-community/mathlib4/blob/9b0c6a877559b4bb45860affaeafb705cee085aa/Mathlib/Order/Filter/ENNReal.lean#L136</a> <a href=\"https://github.com/leanprover-community/mathlib4/blob/9b0c6a877559b4bb45860affaeafb705cee085aa/Mathlib/RingTheory/RingHom/Integral.lean#L59\">https://github.com/leanprover-community/mathlib4/blob/9b0c6a877559b4bb45860affaeafb705cee085aa/Mathlib/RingTheory/RingHom/Integral.lean#L59</a> <a href=\"https://github.com/leanprover-community/mathlib4/blob/9b0c6a877559b4bb45860affaeafb705cee085aa/Mathlib/MeasureTheory/Function/UnifTight.lean#L253\">https://github.com/leanprover-community/mathlib4/blob/9b0c6a877559b4bb45860affaeafb705cee085aa/Mathlib/MeasureTheory/Function/UnifTight.lean#L253</a> <a href=\"https://github.com/leanprover-community/mathlib4/blob/9b0c6a877559b4bb45860affaeafb705cee085aa/Mathlib/Algebra/Homology/Embedding/Connect.lean#L86\">https://github.com/leanprover-community/mathlib4/blob/9b0c6a877559b4bb45860affaeafb705cee085aa/Mathlib/Algebra/Homology/Embedding/Connect.lean#L86</a> and so on.</p>",
        "id": 524109670,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749970072
    },
    {
        "content": "<p>Interesting! Yet, we do also have plenty of examples of <code>wlog</code> being used without references to <code>this</code>! (I did check to make sure that these worked after <code>clear this</code>)</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/50e49dc2e9c35748e2313071052bdb6dd16a6fe5/Mathlib/Data/Matroid/Circuit.lean#L128\">https://github.com/leanprover-community/mathlib4/blob/50e49dc2e9c35748e2313071052bdb6dd16a6fe5/Mathlib/Data/Matroid/Circuit.lean#L128</a> <a href=\"https://github.com/leanprover-community/mathlib4/blob/50e49dc2e9c35748e2313071052bdb6dd16a6fe5/Archive/Wiedijk100Theorems/BuffonsNeedle.lean#L325\">https://github.com/leanprover-community/mathlib4/blob/50e49dc2e9c35748e2313071052bdb6dd16a6fe5/Archive/Wiedijk100Theorems/BuffonsNeedle.lean#L325</a> <a href=\"https://github.com/leanprover-community/mathlib4/blob/50e49dc2e9c35748e2313071052bdb6dd16a6fe5/Mathlib/Order/KrullDimension.lean#L141\">https://github.com/leanprover-community/mathlib4/blob/50e49dc2e9c35748e2313071052bdb6dd16a6fe5/Mathlib/Order/KrullDimension.lean#L141</a> <a href=\"https://github.com/leanprover-community/mathlib4/blob/50e49dc2e9c35748e2313071052bdb6dd16a6fe5/Mathlib/Topology/Separation/Regular.lean#L256\">https://github.com/leanprover-community/mathlib4/blob/50e49dc2e9c35748e2313071052bdb6dd16a6fe5/Mathlib/Topology/Separation/Regular.lean#L256</a></p>",
        "id": 524110000,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1749970576
    },
    {
        "content": "<p>Actually, even if synonymous tactics are discouraged, it could be worthwhile to add a linter looking for <code>wlog</code> without usages of the generated symmetric hypothesis and suggest a <code>by_cases ...; swap</code>.</p>",
        "id": 524110029,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1749970631
    },
    {
        "content": "<p>There's also <code>by_cases; case neg =&gt;</code></p>",
        "id": 524116988,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1749979579
    },
    {
        "content": "<p>It sounds like the  PR I linked should not be using wlog after all?</p>",
        "id": 524122569,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749984991
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"767695\">Tristan Figueroa-Reid</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/weaker.20wlog/near/524109532\">said</a>:</p>\n<blockquote>\n<p>Though, are these sort of 'synonymous' tactics accepted? I've been using <code>wlog</code> to fill in this role for quite some time now, but I recently made a PR for the Seymour project that used this three times, and using <code>wlog</code> here is abuse of notation, but <code>by_cases</code> causes me to completely break the flow of the proof unless I consistently use the aforementioned <code>swap</code>.</p>\n</blockquote>\n<p>I think that such synonymous tactics can improve the readability of the proof, and the intent of the author.<br>\nIn this case, it sounds like the tactic can be implemented as a rather easy tactic macro, with a well-defined spec.<br>\nI would be open to adding it.</p>",
        "id": 524205464,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1750062981
    },
    {
        "content": "<p>Sorry, but I would like to stop you right here: We had been talking about making <code>by_cases</code> run <code>push_neg</code>, which here would allow you to do </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">hab</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- `hab : a ≠ b` is in context</span>\n<span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">hcd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">d</span>\n<span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- `hab : a = b` and `hcd : c ≠ d` are in context</span>\n<span class=\"c1\">-- `hab : a = b` and `hcd : c = d` are in context</span>\n</code></pre></div>",
        "id": 524205926,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1750063151
    },
    {
        "content": "<p>IMO this is a much better solution than introducing yet another tactic</p>",
        "id": 524206008,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1750063180
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/weaker.20wlog/near/524205926\">said</a>:</p>\n<blockquote>\n<p>We had been talking about making <code>by_cases</code> run <code>push_neg</code></p>\n</blockquote>\n<p>Maybe we should introduce <code>by_cases!</code> to make <code>by_cases</code> backward compatible.</p>",
        "id": 524226735,
        "sender_full_name": "Jz Pan",
        "timestamp": 1750070520
    },
    {
        "content": "<p>We really should avoid introducing new tactics/variants thereof when the existing tactics can be modified. Does anyone really rely on getting <code>hP : ¬ ¬ P</code> in the second branch when doing <code>by_cases hP : ¬ P</code>?</p>",
        "id": 524232162,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1750072322
    },
    {
        "content": "<p>But <code>contrapose</code> and <code>by_contra</code> tactics normally do not <code>push_neg</code>, only their <code>!</code> version do.</p>\n<p>So IMHO this should be the same for <code>by_cases</code>.</p>",
        "id": 524232406,
        "sender_full_name": "Jz Pan",
        "timestamp": 1750072401
    },
    {
        "content": "<p>Probably most code that does that, but will be easy to fix</p>",
        "id": 524232455,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1750072410
    },
    {
        "content": "<p>Though I don't mind either way</p>",
        "id": 524232483,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1750072420
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"366779\">Jz Pan</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/weaker.20wlog/near/524232406\">said</a>:</p>\n<blockquote>\n<p>But <code>contrapose</code> and <code>by_contra</code> tactics normally do not <code>push_neg</code>, only their <code>!</code> version do.</p>\n</blockquote>\n<p>Yes, I believe that should be fixed too</p>",
        "id": 524232509,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1750072430
    },
    {
        "content": "<p>I guess there's a stronger argument to do all three at the same time</p>",
        "id": 524237812,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1750074456
    },
    {
        "content": "<p>I would prefer if <code>push_neg</code> is called explicitly or via <code>!</code>. I don't want to see <code>if</code> running push_neg</p>",
        "id": 524941009,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1750362939
    },
    {
        "content": "<p>Tactic-mode <code>if</code> or term-mode <code>if</code>? I personally am happy to see both stay the way they are: <code>if</code> is computer-science, <code>by_cases</code> is mathematics, so the difference in behavior seems acceptable to me</p>",
        "id": 524941554,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1750363204
    },
    {
        "content": "<p><code>if</code> is syntax for <code>by_cases</code></p>",
        "id": 524942102,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1750363416
    },
    {
        "content": "<p>I don't think cs vs mathematics is the right way to differentiate push_neg vs not</p>",
        "id": 524942178,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1750363454
    },
    {
        "content": "<p>it has to do with whether you want to control the goal state or are just bashing away</p>",
        "id": 524942238,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1750363481
    },
    {
        "content": "<p>... whether the goal is Type- or Prop-valued?</p>",
        "id": 524942295,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1750363508
    },
    {
        "content": "<p>as well as whether you are wanting to hide details for e.g. a tutorial</p>",
        "id": 524942300,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1750363510
    },
    {
        "content": "<p>no, the goal is unrelated</p>",
        "id": 524942319,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1750363520
    },
    {
        "content": "<p>this is about rewriting the condition</p>",
        "id": 524942351,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1750363537
    },
    {
        "content": "<p>(I forgot to check in with this thread) Thanks for this! I'll update the linting thread to reflect the conversation here <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 524974124,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1750391767
    }
]