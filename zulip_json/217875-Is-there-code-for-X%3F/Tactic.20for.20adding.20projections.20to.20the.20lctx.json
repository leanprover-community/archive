[
    {
        "content": "<p>Do we have a tactic that, given a term <code>t</code> of a structure <code>S</code> with projections <code>p1</code>, ..., <code>pk</code>, adds the projections <code>t.pi</code> to the local context? Context: I'm experimenting with the use of <code>grind</code> in category theory, and I think such a thing would be useful.</p>",
        "id": 541041593,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1758640674
    },
    {
        "content": "<p>as in, you want <code>let pi_t := t.pi</code>?</p>",
        "id": 541041988,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758640783
    },
    {
        "content": "<p>yeah, essentially (or <code>have</code> instead of <code>let</code> when appropriate)</p>",
        "id": 541042056,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1758640801
    },
    {
        "content": "<p>is that \"basically\" <code>cases t</code>?</p>",
        "id": 541042107,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758640814
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Tactic.20for.20adding.20projections.20to.20the.20lctx/near/541042107\">said</a>:</p>\n<blockquote>\n<p>is that \"basically\" <code>cases t</code>?</p>\n</blockquote>\n<p>Yes, except that I want to keep <code>t</code> around as well.</p>",
        "id": 541042141,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1758640823
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n<span class=\"w\">  </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">t_b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">.</span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t_b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">.</span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 541042642,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1758640938
    },
    {
        "content": "<p>yep I agree that it would be useful. an \"eta-deriver\" would also be useful</p>",
        "id": 541042812,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758640980
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Tactic.20for.20adding.20projections.20to.20the.20lctx/near/541042812\">said</a>:</p>\n<blockquote>\n<p>an \"eta-deriver\" would also be useful</p>\n</blockquote>\n<p>What do you mean by this?</p>",
        "id": 541042940,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1758641011
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Notation</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n<span class=\"w\">  </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"bp\">.</span><span class=\"n\">eta</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 541043329,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758641104
    },
    {
        "content": "<p>Oh I see, you want <code>@[eta]</code> to generate <code>Foo.eta</code>?</p>",
        "id": 541043459,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1758641135
    },
    {
        "content": "<p>Yeah, I agree that would be useful as well.</p>",
        "id": 541043604,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1758641166
    },
    {
        "content": "<p>I would also have a use for this, in the context of positivity/finiteness/field_simp</p>",
        "id": 541246577,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1758724777
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243562\">Adam Topaz</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Tactic.20for.20adding.20projections.20to.20the.20lctx/near/541042141\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Tactic.20for.20adding.20projections.20to.20the.20lctx/near/541042107\">said</a>:</p>\n<blockquote>\n<p>is that \"basically\" <code>cases t</code>?</p>\n</blockquote>\n<p>Yes, except that I want to keep <code>t</code> around as well.</p>\n</blockquote>\n<p>Does <code>cases (id t)</code> get you close enough?</p>",
        "id": 541768941,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1758940897
    },
    {
        "content": "<p>you get the parts of <code>t</code> but not the fact that <code>t</code> is made of those parts</p>",
        "id": 541769201,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758941270
    },
    {
        "content": "<p><code>cases h : id t</code>?</p>",
        "id": 541779812,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758954270
    }
]