[
    {
        "content": "<p>Is there a good way to talk about the completion or the conditional completion of a linear order?</p>",
        "id": 544006087,
        "sender_full_name": "Eric Paul",
        "timestamp": 1760027834
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459227\">@Violeta Hernández</span></p>",
        "id": 544006516,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760027977
    },
    {
        "content": "<p>I have an open PR for the Dedekind completion of a poset. What is the conditional completion?</p>",
        "id": 544006650,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760028018
    },
    {
        "content": "<p>completion without the top or bottom maybe</p>",
        "id": 544007923,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760028440
    },
    {
        "content": "<p>Oh great, I'm glad to hear there's a relevant PR for it! Let me know if I can do anything helpful for that. I want to be able to talk about this for linear orders, in particular the extension of an automorphism on a linear order to one on its completion.</p>\n<p>For the conditionally complete, as Aaron said, it's the same thing as the completion but without the top and bottom points (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ConditionallyCompleteLinearOrder#doc\">docs#ConditionallyCompleteLinearOrder</a>).</p>",
        "id": 544008760,
        "sender_full_name": "Eric Paul",
        "timestamp": 1760028735
    },
    {
        "content": "<p>I suspect it might be easier to make a more general construction for \"order without bottom and top\"</p>",
        "id": 544008882,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760028784
    },
    {
        "content": "<p>if you remove the bottom and top, what about the new bottom and top</p>",
        "id": 544009026,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760028842
    },
    {
        "content": "<p>That makes sense, especially because sometimes I'd like to keep one of the endpoints</p>",
        "id": 544009028,
        "sender_full_name": "Eric Paul",
        "timestamp": 1760028842
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Completion.20of.20a.20linear.20order/near/544009026\">said</a>:</p>\n<blockquote>\n<p>if you remove the bottom and top, what about the new bottom and top</p>\n</blockquote>\n<p>Well, to be more specific, my proposal is to make something like <code>WithoutTop α = {x : α // x ≠ ⊤}</code></p>",
        "id": 544009147,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760028882
    },
    {
        "content": "<p>though of course there's the question of whether this is any better than just working with the subtype directly</p>",
        "id": 544009184,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760028898
    },
    {
        "content": "<p>I think you can relax the hypothesis</p>",
        "id": 544009202,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760028904
    },
    {
        "content": "<p>Sure, <code>{x : α // ¬ IsTop x}</code>, or <code>{x : α // ¬ IsMax x}</code> or whatever</p>",
        "id": 544009284,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760028928
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">NoTop</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LT</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">exists_gt</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">x</span>\n</code></pre></div>",
        "id": 544009450,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760028988
    },
    {
        "content": "<p>yeah, exactly</p>",
        "id": 544009459,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760028991
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"512030\">Eric Paul</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Completion.20of.20a.20linear.20order/near/544008760\">said</a>:</p>\n<blockquote>\n<p>For the conditionally complete, as Aaron said, it's the same thing as the completion but without the top and bottom points (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ConditionallyCompleteLinearOrder#doc\">docs#ConditionallyCompleteLinearOrder</a>).</p>\n</blockquote>\n<p>What if your original order already has a top or bottom, then the completion won't add a new top or bottom so are you getting rid of the original one?</p>",
        "id": 544014839,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760030712
    },
    {
        "content": "<p>I only care about it in the case where the original order does not have a top and bottom. In other words, if there was a top and bottom in the original order, I don’t remove those.</p>",
        "id": 544015397,
        "sender_full_name": "Eric Paul",
        "timestamp": 1760030901
    },
    {
        "content": "<p>i feel like all o' yall are overcomplicating it, are we just saying that the lowerset has to be nonempty and not the top set?</p>",
        "id": 544015541,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760030951
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Completion.20of.20a.20linear.20order/near/544015541\">said</a>:</p>\n<blockquote>\n<p>i feel like all o' yall are overcomplicating it, are we just saying that the lowerset has to be nonempty and not the top set?</p>\n</blockquote>\n<p>what does that mean</p>",
        "id": 544016163,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760031178
    },
    {
        "content": "<p>can you explain</p>",
        "id": 544016180,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760031184
    },
    {
        "content": "<p>You can create the conditional completion by only taking cuts where both the lower and upper part of the cut are nonempty. I think that's what Kenny is saying.</p>",
        "id": 544016498,
        "sender_full_name": "Eric Paul",
        "timestamp": 1760031302
    },
    {
        "content": "<p>oh yeah</p>",
        "id": 544018233,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760032018
    },
    {
        "content": "<p>I think that's true</p>",
        "id": 544018252,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760032023
    },
    {
        "content": "<p>btw does this resolve the issue of duplicating Q?</p>",
        "id": 544018946,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760032284
    },
    {
        "content": "<p>What is the issue of duplicating Q?</p>",
        "id": 544019570,
        "sender_full_name": "Eric Paul",
        "timestamp": 1760032534
    },
    {
        "content": "<p>if you try to complete Q \"naively\", you end up with R but with every point of Q duplicated</p>",
        "id": 544019682,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760032579
    },
    {
        "content": "<p>My understanding of the completion of a linear order is that you have cuts <code>(I, J)</code>. A cut <code>(I, J)</code> is a gap if <code>I</code> has no top point and <code>J</code> has no bottom point. To complete a linear order, you add a point for every gap. With this definition, the completion of Q is R (where I exclude cuts where the upper or lower part are empty).</p>",
        "id": 544020071,
        "sender_full_name": "Eric Paul",
        "timestamp": 1760032750
    },
    {
        "content": "<p>the way my PR does things is slightly different, a cut is a pair (I, J) where J is the set of upper bounds of I and viceversa</p>",
        "id": 544023108,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760033999
    },
    {
        "content": "<p>so for each rational q, the cut looks like (Iic q, Ici q)</p>",
        "id": 544023164,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760034023
    },
    {
        "content": "<p>(this is just the concept lattice of the ≤ relation on rationals)</p>",
        "id": 544023170,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760034026
    },
    {
        "content": "<p>(the \"naive\" completion is the concept lattice of &lt;, or rather the not ≥ relation)</p>",
        "id": 544023235,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760034055
    },
    {
        "content": "<p>For ≤, isn't <code>q</code> an upper bound and lower of bound <code>q</code>? Why isn't the cut for <code>q</code> <code>(Iic q, Ici q)</code>?</p>",
        "id": 544023613,
        "sender_full_name": "Eric Paul",
        "timestamp": 1760034221
    },
    {
        "content": "<p>because I wrote it wrong haha</p>",
        "id": 544024390,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760034539
    },
    {
        "content": "<p>this solves the issue of duplicating Q but also generalizes to orders which are not linear</p>",
        "id": 544024538,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760034597
    },
    {
        "content": "<p>it's pretty nice</p>",
        "id": 544024587,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760034610
    },
    {
        "content": "<p>Cool, that makes sense</p>",
        "id": 544024952,
        "sender_full_name": "Eric Paul",
        "timestamp": 1760034738
    },
    {
        "content": "<p>I realize I never linked to my PR: <a href=\"https://github.com/leanprover-community/mathlib4/pull/26966\">#26966</a></p>",
        "id": 544442378,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760319497
    },
    {
        "content": "<p>There's still a long chain of dependents for it, though</p>",
        "id": 544442387,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760319505
    }
]