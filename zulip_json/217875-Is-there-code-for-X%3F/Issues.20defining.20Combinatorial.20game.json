[
    {
        "content": "<p>I am stuck trying to define combinatorial games. I know there is PGame in mathlib, I mainly want to know why the following don't work.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Game</span>\n<span class=\"w\">  </span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Game</span>\n<span class=\"w\">  </span><span class=\"n\">birthday</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"n\">left_desc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">Gl</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">left</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Gl</span><span class=\"bp\">.</span><span class=\"n\">birthday</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">birthday</span>\n<span class=\"w\">  </span><span class=\"n\">right_desc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">Gr</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Gr</span><span class=\"bp\">.</span><span class=\"n\">birthday</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">birthday</span>\n</code></pre></div>\n<p>This gives two types of errors:</p>\n<ol>\n<li>left and right have a non-positive occurrence of the datatypes being declared. This one I kinda understand and in PGame they work around it by having a indexing set <code>leftMoves</code> and a function from the indexing set to the actual games <code>playLeft</code><br>\n2.</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"txt\"><pre><span></span><code>Invalid field notation: Field projection operates on types of the form `C ...` where C is a constant. The expression\n  Gl\nhas type `Game` which does not have the necessary form.\n\nError code: lean.invalidField\n</code></pre></div>\n<p>This one I don't get. My aim is to make sure that the left and right moves are \"defined earlier\" in some sense. Why is the birthday field not accessible for the children?</p>\n<hr>\n<p>To sidestep this first issue I decided to just make the things I want an axiom. Then I tried to define addition:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Game</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Game</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">birthday</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">left_desc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">Gl</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Gl</span><span class=\"bp\">.</span><span class=\"n\">birthday</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">birthday</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">right_desc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">Gr</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Gr</span><span class=\"bp\">.</span><span class=\"n\">birthday</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">birthday</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">mk</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">Gl</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Gl</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">Hl</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Hl</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">Gr</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Gr</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">Hr</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Hr</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">}</span>\n<span class=\"o\">}</span>\n<span class=\"n\">termination_by</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">birthday</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">birthday</span>\n<span class=\"n\">decreasing_by</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"c1\">-- G H Gl : Game</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ Gl.birthday + H.birthday &lt; G.birthday + H.birthday</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ Gl.birthday &lt; G.birthday</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">left_desc</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ Gl ∈ G.left</span>\n<span class=\"w\">  </span><span class=\"c1\">-- I would expect this goal to be in the context based on the set condition, but it isn't</span>\n<span class=\"o\">}</span>\n</code></pre></div>\n<p>Why did it not include the set condition <code>Gl ∈ G.left</code> in the context?</p>",
        "id": 566807238,
        "sender_full_name": "Jelmer Firet",
        "timestamp": 1767813857
    },
    {
        "content": "<p>As a quick note, you can use <code>unsafe structure</code> or <code>unsafe inductive</code> to bypass non-strict-positivity issues, just for testing purposes. I'm not quite sure how to fix your field projection issue; I think it is due to <code>Game.birthday</code> not actually being defined until after the inductive type is constructed. I suppose you could define a <code>Pregame</code> type and then define <code>Game</code> to be a <code>Subtype</code> of that.</p>\n<p>I do get the goal <code>⊢ Gl ∈ G.left</code> when I run your code, not sure why it isn't appearing for you.</p>\n<p>As a side note, using tactic to construct data is not recommended, because tactics can have unpredictable or unstable behavior when it comes to what terms they produce.</p>",
        "id": 566809196,
        "sender_full_name": "Niels Voss",
        "timestamp": 1767814472
    },
    {
        "content": "<p>I think what they meant is that they expected the goal to be solvable just from the fact that the definition contains the condition <code>Gl ∈ G.left</code> in <code>{add Gl H | Gl ∈ G.left}</code>. For that: you can use something like <code>(Gl : Game) (_ : Gl ∈ G.left)</code> instead:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">mk</span>\n<span class=\"w\">    </span><span class=\"o\">({</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">Gl</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Gl</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Gl</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">Hl</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Hl</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Hl</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"o\">)})</span>\n<span class=\"w\">    </span><span class=\"o\">({</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">Gr</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Gr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Gr</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">Hr</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Hr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Hr</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"o\">)})</span>\n<span class=\"n\">termination_by</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">birthday</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">birthday</span>\n<span class=\"n\">decreasing_by</span><span class=\"w\"> </span><span class=\"n\">all_goals</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">left_desc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"bp\">.</span><span class=\"n\">right_desc</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 566812068,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1767815633
    },
    {
        "content": "<p>Are you sure that you can't use these axioms to get a contradiction using some kind of diagonal argument? Axioms are a dangerous approach -- there is not a single axiom in mathlib, for example.</p>",
        "id": 566813915,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1767816322
    },
    {
        "content": "<p>You almost certainly can, just take the game <code>g</code> whose left set consists of all games, <code>g := Game.mk Set.univ anything</code>. Then, apply <code>Game.left_desc</code> to get that <code>g.birthday &lt; g.birthday</code>.</p>",
        "id": 566814762,
        "sender_full_name": "Niels Voss",
        "timestamp": 1767816633
    },
    {
        "content": "<p>Thanks for your help.<br>\nI did not know about<code> unsafe</code>, and as this is purely for testing (I want to check some lemmas to further my understanding of Combinatorial Game Theory).<br>\nI did mean that <code>Gl ∈ G.left</code> did not show up in the assumptions. Specifying Gl and its membership seperately works.<br>\nBut with <code>unsafe</code> the termination is not checked anyway so I have removed it.</p>",
        "id": 566820351,
        "sender_full_name": "Jelmer Firet",
        "timestamp": 1767818728
    },
    {
        "content": "<p>in CGT we define <a href=\"https://vihdzp.github.io/combinatorial-games/find/?pattern=IGame#doc\">CGT#IGame</a> inductively as a having a left and right set of options which are <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Small#doc\">docs#Small</a> sets of games, which corresponds to the fact that you can't have a game with a proper class of options</p>",
        "id": 566833044,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767824183
    },
    {
        "content": "<p>Just a reminder that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SetTheory.PGame#doc\">docs#SetTheory.PGame</a> and the material in Mathlib is about a year outdated, and will be removed shortly (the modules themselves have all been deprecated). The theory is currently getting developed in <a href=\"https://github.com/vihdzp/combinatorial-games\">this other repository</a>.</p>",
        "id": 567051814,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767916489
    },
    {
        "content": "<p>But, to try to answer your actual question, you could try doing something like this instead:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SGame</span>\n</code></pre></div>\n<p>The type of games you actually want will be some quotient of this by an extensionality relation. The birthday of a game can be then defined after the fact.</p>",
        "id": 567052098,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767916740
    },
    {
        "content": "<p>The issue with your inductive type as written is that Lean cannot automatically verify that the construction is valid. If you were to remove the <code>left_desc</code> and <code>right_desc</code> conditions, it would not be valid: you'd have an injection <code>left : Set Game → Game</code>, which is impossible by Cantor's theorem. We had to do some technical sorcery with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QPF#doc\">docs#QPF</a> in the CGT repo to sidestep this: essentially we proved that there does exist some functor which behaves like the functor we'd want within an inductive definition like the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">ofSets</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Game</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Small</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">left</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Small</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">right</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Game</span>\n</code></pre></div>\n<p>And then we defined the type of games via <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QPF.Fix#doc\">docs#QPF.Fix</a>. A nice consequence of this approach is that it gave us the type of loopy games for free via <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QPF.Cofix#doc\">docs#QPF.Cofix</a>.</p>",
        "id": 567052437,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767916948
    }
]