[
    {
        "content": "<p>Is there a non-grind-specific equivalent of <code>Lean.Grind.not_eq_prop</code>?</p>",
        "id": 494230617,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737060764
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Grind.not_eq_prop#doc\">docs#Lean.Grind.not_eq_prop</a></p>",
        "id": 494241085,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737065015
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/An.20equivalent.20of.20.60Lean.2EGrind.2Enot_eq_prop.60/near/494241085\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Grind.not_eq_prop#doc\">docs#Lean.Grind.not_eq_prop</a></p>\n</blockquote>\n<p>I should expand on my original question a little more - is this safe to use directly in a mathlib4 contribution?</p>",
        "id": 494241226,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737065071
    },
    {
        "content": "<p>Definitely not. :-)</p>",
        "id": 494241301,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737065111
    },
    {
        "content": "<p>@loogle (¬?p ↔ ?q) ↔ (?p ↔ ¬?q)</p>",
        "id": 494241392,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737065158
    },
    {
        "content": "<p>@loogle (¬?p = ?q) = (?p = ¬?q)</p>",
        "id": 494241549,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737065216
    },
    {
        "content": "<p>Sorry, I don't know how to drive Loogle from zulip. <code>#loogle</code> in VSCode reports only <code>Lean.Grind.not_eq_prop</code>.</p>",
        "id": 494241735,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737065290
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"470149\">@Joachim Breitner</span>, could we filter out everything from <code>Lean.Grind</code> in Loogle results?</p>",
        "id": 494241797,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737065318
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/An.20equivalent.20of.20.60Lean.2EGrind.2Enot_eq_prop.60/near/494241735\">said</a>:</p>\n<blockquote>\n<p>Sorry, I don't know how to drive Loogle from zulip. <code>#loogle</code> in VSCode reports only <code>Lean.Grind.not_eq_prop</code>.</p>\n</blockquote>\n<p>When I tried earlier, I also got the same results. I was surprised that <code>not_eq_prop</code> only appeared in <code>Lean.Grind</code>, though, which is why I went to ask here.</p>",
        "id": 494241964,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737065402
    },
    {
        "content": "<p>I don't think we have it as an <code>↔</code>.</p>\n<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span>  (¬?p ↔ ?q) → (?p ↔ ¬?q)</p>",
        "id": 494242321,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1737065578
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Logic/Basic.html#Iff.not_right\">Iff.not_right</a></p>",
        "id": 494242324,
        "sender_full_name": "loogle",
        "timestamp": 1737065580
    },
    {
        "content": "<p>We have both one-way versions though.</p>",
        "id": 494242375,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1737065599
    },
    {
        "content": "<p>Oh, I see, <span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> is required, not @loogle.</p>",
        "id": 494242435,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737065639
    },
    {
        "content": "<p><span aria-label=\"exclamation\" class=\"emoji emoji-2757\" role=\"img\" title=\"exclamation\">:exclamation:</span> unknown identifier 'is'</p>",
        "id": 494242436,
        "sender_full_name": "loogle",
        "timestamp": 1737065639
    },
    {
        "content": "<p>Oh, I missed that! (I was too specific in my query and greedily used ↔ and = in the middle). Thanks!</p>",
        "id": 494242534,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737065675
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"767695\">Tristan Figueroa-Reid</span> has marked this topic as resolved.</p>",
        "id": 494242546,
        "sender_full_name": "Notification Bot",
        "timestamp": 1737065678
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"767695\">@Tristan Figueroa-Reid</span> I think you could add this variant there in <code>Mathlib.Logic.Basic</code> near <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Iff.not#doc\">docs#Iff.not</a>. I would probably call it <code>iff_not_comm</code> or something like that.</p>",
        "id": 494242627,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1737065714
    },
    {
        "content": "<p>I am going to filter out all <code>Lean.Grind.*</code> results from <code>exact?</code>and <code>rw?</code>. Are there other Lean internal namespaces people have noticed being returned by these tactics?</p>",
        "id": 494243049,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737065918
    },
    {
        "content": "<p>Sometimes stuff with <code>...Tactic...</code> shows up, which is probably not meant to be used outside the inner workings of the corresponding tactic.</p>",
        "id": 494243223,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1737065995
    },
    {
        "content": "<p>Good point. I could just filter anything with <code>Tactic</code> in the components of the name.</p>",
        "id": 494243432,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737066086
    },
    {
        "content": "<p>I could also filter everything in <code>Lean.*</code> entirely.</p>",
        "id": 494243468,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737066098
    },
    {
        "content": "<p>I appreciate that very occasionally people using <code>exact?</code> to help them find metaprogramming tools, but I'm not sure supporting that is worth the noise for regular users.</p>",
        "id": 494243566,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737066125
    },
    {
        "content": "<p>It could always be a contextual* tactic option (like <code>push_neg</code>'s <code>use_distrib</code>).<br>\n*I'm not sure what the proper name for these options are.</p>",
        "id": 494243958,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1737066302
    },
    {
        "content": "<p>Instead of strewing ad-hoc denylists in many tools, can we not introduce an attribute or naming convention for “theorem or definition not for general consumption”?</p>",
        "id": 494244777,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1737066657
    },
    {
        "content": "<p>Yes, that would be ideal! It would have to be a mixture of namespace-based, final component of name, and perhaps also attributes...</p>",
        "id": 494247319,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737067799
    },
    {
        "content": "<p>Any suggestions for how to name <code>Name.isMetaprogramming (n) := ... n starts with `Lean` or contains `Tactic` ...</code>? (Or further suggestions for the condition?</p>",
        "id": 494247515,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737067877
    },
    {
        "content": "<p>Contains <code>Tactic</code> is probably not a good exclusion heuristic as it would censor the tactic framework from loogle result so in case someone uses loogle to explore the tactic API they wouldn't find it.</p>",
        "id": 494247727,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1737067969
    },
    {
        "content": "<p>My current suggestion is to censor <code>Lean.*</code>, <code>*.Tactic.*</code>, and <code>*.Linter.*</code> from <code>exact?</code> and <code>rw?</code>, as implemented in <a href=\"https://github.com/leanprover/lean4/pull/6672\">lean#6672</a>, and to invite via the feature request at <a href=\"https://github.com/leanprover/lean4/pull/6673\">lean#6673</a> anyone interested to implement an <code>exact? +internals</code> flag to re-enable these.</p>",
        "id": 494250767,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737069441
    },
    {
        "content": "<p>There would definitely be a tradeoff here, but I'm inclined to err on the side of making these tools safer/easier for non-metaprogramming users at the expense of degrading them for metaprogramming users (with options to power them up again).</p>",
        "id": 494250877,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1737069498
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20An.20equivalent.20of.20.60Lean.2EGrind.2Enot_eq_prop.60/near/494247727\">said</a>:</p>\n<blockquote>\n<p>Contains <code>Tactic</code> is probably not a good exclusion heuristic as it would censor the tactic framework from loogle result so in case someone uses loogle to explore the tactic API they wouldn't find it.</p>\n</blockquote>\n<p>Kim's PR will not affect Loogle at all I think, since Loogle filters declarations in its own way. <br>\nI definitely use Loogle when searching for metaprogramming functions.</p>",
        "id": 494252922,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1737070672
    },
    {
        "content": "<p>Instead of inventing heuristics, should we have an attribute meaning \"don't use outside tactic implementations\"?</p>",
        "id": 494263977,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737076977
    },
    {
        "content": "<p>(I assume just making such lemmas <code>private</code> is undesirable)</p>",
        "id": 494264023,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737077002
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20An.20equivalent.20of.20.60Lean.2EGrind.2Enot_eq_prop.60/near/494242627\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"767695\">Tristan Figueroa-Reid</span> I think you could add this variant there in <code>Mathlib.Logic.Basic</code> near <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Iff.not#doc\">docs#Iff.not</a>. I would probably call it <code>iff_not_comm</code> or something like that.</p>\n</blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=neg_eq_iff_eq_neg#doc\">docs#neg_eq_iff_eq_neg</a> suggests maybe <code>not_iff_iff_iff_not</code>, but perhaps that's a mouthful.</p>",
        "id": 494264260,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737077120
    },
    {
        "content": "<p>Also <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=not_iff_comm#doc\">docs#not_iff_comm</a> already exists</p>",
        "id": 494264276,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737077133
    },
    {
        "content": "<p>Lol! I didn't even check! So the reason loogle didn't find it is that the Mathlib lemma switches the side of the propositions (which seems pretty counterintuitive to me).</p>",
        "id": 494274572,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1737083450
    },
    {
        "content": "<p>It matches <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=not_imp_comm#doc\">docs#not_imp_comm</a></p>",
        "id": 494296824,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1737098342
    },
    {
        "content": "<p>Could the discussion about <code>isMetaprogramming</code> be moved to a different thread?</p>",
        "id": 494302413,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737101031
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20An.20equivalent.20of.20.60Lean.2EGrind.2Enot_eq_prop.60/near/494263977\">said</a>:</p>\n<blockquote>\n<p>Instead of inventing heuristics, should we have an attribute meaning \"don't use outside tactic implementations\"?</p>\n</blockquote>\n<p>I think that something like this is a good idea: maybe we can still add everything that has <code>Lean</code>, <code>Tactic</code>, <code>Linter</code> as a segment, but also the option of dynamically extending the excluded lemmas seems like a desirable feature.</p>",
        "id": 494308779,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737103295
    },
    {
        "content": "<p>A maintenance reason for annotating theorems-for-tactics explicitly with an attribute is that it would let people know that if they refactor the theorem statement they'll break a tactic.</p>",
        "id": 494410558,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737136312
    },
    {
        "content": "<p>Note that <code>Iff.not_right</code> and <code>not_iff_comm</code> aren't just commuted versions of this lemma, they are different in a stronger way. That is, <code>(¬p = q) = (p = ¬q)</code> is saying <code>(¬(p = q)) = (p = ¬q)</code>: it's a non-equality being equal to an equality, not just shuffling which side the negation is on.</p>",
        "id": 494422506,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1737140704
    }
]