[
    {
        "content": "<p>I like using <code>case _ =&gt; </code> to handle disjunctions in my proofs. However, sometimes tactics like <code>apply</code> introduce extra names to the main goal, even when there is only one goal resulting from the application. Is there a way to strip these?</p>\n<p>For instance</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">f_inj</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n<span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">f_inj</span>\n<span class=\"w\">  </span><span class=\"c1\">-- The goal is now named `a`</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 516200863,
        "sender_full_name": "Ayhon",
        "timestamp": 1746452417
    },
    {
        "content": "<p>This is annoying because then, for instance, tactics like <code>split</code> prepend this name to the cases produced, and you need to specify it when using <code>case</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">f_inj</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)(</span><span class=\"n\">cond</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span>\n<span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">cond</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">f_inj</span>\n<span class=\"w\">  </span><span class=\"n\">split</span>\n<span class=\"w\">  </span><span class=\"n\">case</span><span class=\"w\"> </span><span class=\"n\">isTrue</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- Complains that there is no `isTrue` case, but `a.isTrue` exists.</span>\n<span class=\"w\">  </span><span class=\"n\">case</span><span class=\"w\"> </span><span class=\"n\">isFalse</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 516201499,
        "sender_full_name": "Ayhon",
        "timestamp": 1746452554
    },
    {
        "content": "<p>you could use a focussing dot instead, right?</p>",
        "id": 516201993,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1746452671
    },
    {
        "content": "<p>Yes, but then I lose the ability to name the hypothesis introduced different names (admittedly, not what happens in my current example)</p>",
        "id": 516202112,
        "sender_full_name": "Ayhon",
        "timestamp": 1746452700
    },
    {
        "content": "<p>I also like the idea of having the names of the different cases made explicit, but that's just what I'm used to, not sure if it's idiomatic or not.</p>",
        "id": 516202232,
        "sender_full_name": "Ayhon",
        "timestamp": 1746452726
    },
    {
        "content": "<p>ah, i misunderstood your question. it's not that goals get names, and you want to remove the names so that <code>case _ =&gt;</code> matches it (presuming that that only matches \"unnamed\" goals, which isn't the case). Instead it is that if your goal is named <code>foo</code> and a tactic expands it to <code>foo.bar</code>, <code>case bar =&gt;</code> fails</p>",
        "id": 516202733,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1746452868
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Tactic.20to.20strip.20names.20of.20current.20goal/near/516202733\">said</a>:</p>\n<blockquote>\n<p>if your goal is named <code>foo</code> and a tactic expands it to <code>foo.bar</code>, <code>case bar =&gt;</code> fails</p>\n</blockquote>\n<p>Precisely</p>",
        "id": 516202821,
        "sender_full_name": "Ayhon",
        "timestamp": 1746452886
    },
    {
        "content": "<p>More generally, I've observed that with custom tactics which apply a bunch of lemmas, the name of the goal ends up being quite complicated.</p>",
        "id": 516203083,
        "sender_full_name": "Ayhon",
        "timestamp": 1746452969
    },
    {
        "content": "<p>i suppose maybe it could be considered useful if <code>case foo =&gt;</code> matches any <code>some_namespaces.foo</code> instead</p>",
        "id": 516203280,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1746453021
    },
    {
        "content": "<p>My recollection of <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> 's explanation of the behavior of <code>case</code> is that it should work here even if the name of the goal is <code>a.isTrue</code> and the case says <code>isTrue</code></p>",
        "id": 516203455,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746453067
    },
    {
        "content": "<p>it already looks for prefixes and suffixes of the provided name</p>",
        "id": 516203595,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746453105
    },
    {
        "content": "<p>My latest code snippet shows that an error happens:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Case</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">isTrue'</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"bp\">.</span>\n\n<span class=\"n\">Available</span><span class=\"w\"> </span><span class=\"n\">tags</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">'</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">isTrue</span><span class=\"bp\">._@.</span><span class=\"n\">external</span><span class=\"o\">:</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">project</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">-</span><span class=\"n\">demo</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"bp\">._</span><span class=\"n\">hyg</span><span class=\"bp\">.</span><span class=\"m\">11</span><span class=\"bp\">'</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"bp\">'</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">isFalse</span><span class=\"bp\">._@.</span><span class=\"n\">external</span><span class=\"o\">:</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">project</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">-</span><span class=\"n\">demo</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"bp\">._</span><span class=\"n\">hyg</span><span class=\"bp\">.</span><span class=\"m\">11</span><span class=\"bp\">'</span>\n</code></pre></div>",
        "id": 516203630,
        "sender_full_name": "Ayhon",
        "timestamp": 1746453114
    },
    {
        "content": "<p>oh but what is that external thing?</p>",
        "id": 516203712,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746453131
    },
    {
        "content": "<p><span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span></p>",
        "id": 516203748,
        "sender_full_name": "Ayhon",
        "timestamp": 1746453139
    },
    {
        "content": "<p>Maybe it's another issue then<br>\n<a href=\"/user_uploads/3121/pXHAn_4fFIXAFNb2ZVKw9a_n/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/pXHAn_4fFIXAFNb2ZVKw9a_n/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1308x1064\" src=\"/user_uploads/thumbnail/3121/pXHAn_4fFIXAFNb2ZVKw9a_n/image.png/840x560.webp\"></a></div>",
        "id": 516203815,
        "sender_full_name": "Ayhon",
        "timestamp": 1746453159
    },
    {
        "content": "<p>and why is there a URL in the name <span aria-label=\"astonished\" class=\"emoji emoji-1f632\" role=\"img\" title=\"astonished\">:astonished:</span></p>",
        "id": 516203869,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746453175
    },
    {
        "content": "<p>In \"Mathlib stable\" it doesn't show the URL<br>\n<a href=\"/user_uploads/3121/1NyCJmObDNtzdC-FEuNwEmzH/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/1NyCJmObDNtzdC-FEuNwEmzH/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1308x1064\" src=\"/user_uploads/thumbnail/3121/1NyCJmObDNtzdC-FEuNwEmzH/image.png/840x560.webp\"></a></div>",
        "id": 516203992,
        "sender_full_name": "Ayhon",
        "timestamp": 1746453209
    },
    {
        "content": "<p>i imagine that's to do with how the live.lean environment is setup?</p>",
        "id": 516204081,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1746453227
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Tactic.20to.20strip.20names.20of.20current.20goal/near/516204081\">said</a>:</p>\n<blockquote>\n<p>i imagine that's to do with how the live.lean environment is setup?</p>\n</blockquote>\n<p>At least it's also related to Mathlib or Lean versions, since changing the mode in the selector makes the URL go away.</p>",
        "id": 516204406,
        "sender_full_name": "Ayhon",
        "timestamp": 1746453293
    },
    {
        "content": "<p>On my local test setup I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Available</span><span class=\"w\"> </span><span class=\"n\">tags</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">isTrue</span><span class=\"bp\">._@.</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Test</span><span class=\"bp\">._</span><span class=\"n\">hyg</span><span class=\"bp\">.</span><span class=\"m\">11</span><span class=\"bp\">'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">isFalse</span><span class=\"bp\">._@.</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Test</span><span class=\"bp\">._</span><span class=\"n\">hyg</span><span class=\"bp\">.</span><span class=\"m\">11</span><span class=\"bp\">'</span>\n</code></pre></div>\n<p>so it doesn't matter too much, I think the middle section is the name of the current module and the live.lean setup is setting it to a URL which is fine but weird</p>",
        "id": 516204996,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746453432
    },
    {
        "content": "<p>But then, it's failing because this name is being introduced by a tactic, and therefore the actual \"relevant\" part of the name is hidden by the <code>hygenic</code> suffix? </p>\n<p>Doesn't make sense though, I see a call to <code>eraseMacroScopes</code> in <code>getCaseGoals</code></p>",
        "id": 516205289,
        "sender_full_name": "Ayhon",
        "timestamp": 1746453496
    },
    {
        "content": "<p>I think the problem is that the name of the goal after <code>apply</code> is not <code>a</code>, it is a <em>hygienic</em> <code>a</code>, which has <code>a</code> as a prefix which is why <code>case a</code> works, but appending <code>isTrue</code> to it results in a <em>hygienic</em> <code>a.isTrue</code> and now <code>isTrue</code> is neither prefix nor suffix of the true name of the goal</p>",
        "id": 516205510,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746453555
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690100\">Ayhon</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Tactic.20to.20strip.20names.20of.20current.20goal/near/516205289\">said</a>:</p>\n<blockquote>\n<p>Doesn't make sense though, I see a call to <code>eraseMacroScopes</code> in <code>getCaseGoals</code></p>\n</blockquote>\n<p>That's only on the needle, not the haystack</p>",
        "id": 516206260,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1746453730
    },
    {
        "content": "<p>Yes, I see</p>",
        "id": 516206467,
        "sender_full_name": "Ayhon",
        "timestamp": 1746453778
    },
    {
        "content": "<p>A possible fix would then be changing <code>findTag?</code> to the following</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">private</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">findTag?</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">mvarIds</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">MVarId</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Name</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TacticM</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">MVarId</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">mvarIds</span><span class=\"bp\">.</span><span class=\"n\">findM?</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">mvarId</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">mvarId</span><span class=\"bp\">.</span><span class=\"n\">getDecl</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">userName</span><span class=\"bp\">.</span><span class=\"n\">eraseMacroScopes</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">mvarId</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">mvarId</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">mvarIds</span><span class=\"bp\">.</span><span class=\"n\">findM?</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">mvarId</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"bp\">.</span><span class=\"n\">isSuffixOf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">mvarId</span><span class=\"bp\">.</span><span class=\"n\">getDecl</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">userName</span><span class=\"bp\">.</span><span class=\"n\">eraseMacroScopes</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">mvarId</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">mvarId</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">mvarIds</span><span class=\"bp\">.</span><span class=\"n\">findM?</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">mvarId</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"bp\">.</span><span class=\"n\">isPrefixOf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">mvarId</span><span class=\"bp\">.</span><span class=\"n\">getDecl</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">userName</span><span class=\"bp\">.</span><span class=\"n\">eraseMacroScopes</span>\n</code></pre></div>\n<p>or, well, since <code>eraseMacroScopes</code> doesn't seem to be a free operation, cache that before potentially traversing it 3 times, idk.</p>",
        "id": 516207442,
        "sender_full_name": "Ayhon",
        "timestamp": 1746453985
    },
    {
        "content": "<p>In the meantime it seems like doing <code>refine f_inj ?_</code> doesn't give a new name to the goal.</p>",
        "id": 516208085,
        "sender_full_name": "Ayhon",
        "timestamp": 1746454119
    },
    {
        "content": "<p>I guess you could <code>refine ?my.better.goal.name</code></p>",
        "id": 516212182,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746454981
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Tactic.20to.20strip.20names.20of.20current.20goal/near/516212182\">said</a>:</p>\n<blockquote>\n<p>I guess you could <code>refine ?my.better.goal.name</code></p>\n</blockquote>\n<p>Yes, but that doesn't allow me to choose \"unnamed\", I don't think. <code>refine ?_</code> results in <code>x</code></p>",
        "id": 516212342,
        "sender_full_name": "Ayhon",
        "timestamp": 1746455026
    },
    {
        "content": "<p>Admitedly, it's interesting that <code>apply f_inj; refine ?_</code> does not have the same behaviour as <code>refine f_inj ?_</code>.</p>",
        "id": 516212629,
        "sender_full_name": "Ayhon",
        "timestamp": 1746455087
    },
    {
        "content": "<p>There should be a way to clear the goal name</p>",
        "id": 516213605,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746455300
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">Replaces the tag of the main goal by `[anonymous]`.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">clearGoalName</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"clear_goal_name\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">goal</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">getMainGoal</span>\n<span class=\"w\">  </span><span class=\"n\">goal</span><span class=\"bp\">.</span><span class=\"n\">setTag</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">anonymous</span>\n</code></pre></div>",
        "id": 524164669,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1750034358
    }
]