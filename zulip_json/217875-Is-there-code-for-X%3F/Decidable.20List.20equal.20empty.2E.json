[
    {
        "content": "<p>Do we not have this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">List</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">[])</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">decidable_of_iff</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">length_eq_zero</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">List</span>\n</code></pre></div>",
        "id": 483900121,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1732278432
    },
    {
        "content": "<p>It seems like an obvious thing to have but I can't find it!</p>",
        "id": 483900151,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1732278450
    },
    {
        "content": "<p>Unfortunately this likely clashes with other Decidable when DecidableEq</p>",
        "id": 483901609,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1732278929
    },
    {
        "content": "<p>In what situation do you need this? It's probably fine to have Decidable (l = []) as a TC assumption. Are you trying to avoid writing this instance argument?</p>",
        "id": 483901904,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1732279020
    },
    {
        "content": "<p>I assume the motivation here is that <code>DecidableEq α</code> does not hold; can you avoid this by using <code>if let [] := l then _ else _</code> instead of <code>if l = [] then _ else _</code>?</p>",
        "id": 483910337,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732281808
    },
    {
        "content": "<p>I actually found a way round it for now</p>",
        "id": 483933795,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1732289177
    },
    {
        "content": "<p>Seems weird to need this, surely you can just match on <code>l</code> instead?</p>",
        "id": 486848557,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1733724531
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.isEmpty#doc\">docs#List.isEmpty</a> is one of the main ways to avoid this. You can write <code>if l.isEmpty then _ else _</code>.</p>",
        "id": 487062001,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733767003
    },
    {
        "content": "<p>The expression version of Eric's suggestion is <code>if l matches [] then _ else _</code>. It can be nicer since it doesn't need to be the top-level of the <code>if</code> condition, but <code>l.isEmpty</code> wins out if you're counting characters.</p>",
        "id": 487062369,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733767092
    },
    {
        "content": "<p>Aye. I basically think sometimes we use \"l = []\" in theorems when we should use that</p>",
        "id": 487067881,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1733768660
    },
    {
        "content": "<p>One is a bool and the other a Prop, so we should generally use the one that doesn't cause a superfluous coercion</p>",
        "id": 488515275,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733956718
    }
]