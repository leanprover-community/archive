[
    {
        "content": "<p>Hi, I was trying to have positive-semidefinite linear operators for an <code>ùïú : RCLike</code>.<br>\nI found the definition <code>Matrix.PosSemidef</code>, but it requires <code>PartialOrder ùïú</code>.<br>\nBecause of that I thought in using linear maps, and I came up with this definition:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">isPosSemidef</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsLinearMap</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">RCLike</span><span class=\"bp\">.</span><span class=\"n\">im</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">inner</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"n\">RCLike</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">inner</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>But I was not able to find anything similar in Mathlib, do you now if it is somewhere? And if not, would it be a good addition?</p>",
        "id": 512313754,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1744721975
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousLinearMap.IsPositive#doc\">docs#ContinuousLinearMap.IsPositive</a> is close</p>",
        "id": 512316724,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744722733
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"646655\">Iv√°n Renison</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Positive-semidefinite.20linear.20operator/near/512313754\">said</a>:</p>\n<blockquote>\n<p>but it requires <code>PartialOrder ùïú</code>.</p>\n</blockquote>\n<p><code>open scoped ComplexOrder</code></p>",
        "id": 512316781,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744722748
    },
    {
        "content": "<p>Thanks</p>",
        "id": 512317571,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1744722937
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"646655\">Iv√°n Renison</span> has marked this topic as resolved.</p>",
        "id": 512317577,
        "sender_full_name": "Notification Bot",
        "timestamp": 1744722939
    },
    {
        "content": "<p>Note we have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousLinearMap.instLoewnerPartialOrder#doc\">docs#ContinuousLinearMap.instLoewnerPartialOrder</a></p>",
        "id": 512332161,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1744726405
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"646655\">Iv√°n Renison</span> has marked this topic as unresolved.</p>",
        "id": 513430058,
        "sender_full_name": "Notification Bot",
        "timestamp": 1745252669
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20Positive-semidefinite.20linear.20operator/near/512316724\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousLinearMap.IsPositive#doc\">docs#ContinuousLinearMap.IsPositive</a> is close</p>\n</blockquote>\n<p>And do you now if there si something for <code>LinearMap</code> instead of <code>ContinuousLinearMap</code>? <br>\nI think it is possible to define like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">aux_IsPositive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"bp\">‚Üí‚Çó</span><span class=\"o\">[</span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">IsSelfAdjoint</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"n\">RCLike</span><span class=\"bp\">.</span><span class=\"n\">re</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">inner</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>But I can not see it in Mathlib, so maybe it's wrong</p>",
        "id": 513430070,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1745252674
    },
    {
        "content": "<p>It's possible that from a discussion long ago I advocated against this, and that's why we don't have it.</p>",
        "id": 513441159,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1745256982
    },
    {
        "content": "<p>But I wouldn't advocate against it now necessarily.</p>",
        "id": 513441216,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1745257005
    },
    {
        "content": "<p>And would you encourage me to add it now? Or better let it how it is</p>",
        "id": 513602560,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1745326572
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Positive-semidefinite.20linear.20operator/near/513441159\">said</a>:</p>\n<blockquote>\n<p>It's possible that from a discussion long ago I advocated against this, and that's why we don't have it.</p>\n</blockquote>\n<p>I think there was a PR adding this, possibly in mathlib3</p>",
        "id": 513604430,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745327020
    },
    {
        "content": "<p>We should probably find it and read over the old discussions before rehashing it</p>",
        "id": 513604524,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745327041
    },
    {
        "content": "<p>I'm not being able to find it</p>",
        "id": 513613578,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1745329220
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/pull/18230\">!3#18230</a></p>",
        "id": 513649117,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745337952
    },
    {
        "content": "<p>What I understand from that conversation is that the idea was to make a definition of <code>isPositive</code>for a general  <code>Star</code> algebra, defining it as <code>x</code> is positive if there exists <code>y</code> such that <code>x = star y * y</code>. However, it seems that this hasn't been added yet</p>",
        "id": 514035677,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1745480568
    },
    {
        "content": "<p>I think it's okay to have <code>LinearMap.IsPositive</code>.</p>",
        "id": 514115412,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1745498685
    },
    {
        "content": "<p>I think when we had this discussion previously, StarOrderedRing wasn't as developed; should we instead just put a global order on linear maps in an inner product space?</p>",
        "id": 514117436,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745499198
    },
    {
        "content": "<p>That looks like a good idea to reuse the theorems</p>",
        "id": 514398261,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1745593122
    },
    {
        "content": "<p>But if we do that, I think we should also do it for <code>ContinuousLinearMap</code> also</p>",
        "id": 514398569,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1745593212
    },
    {
        "content": "<p>We already have it for <code>ContinuousLinearMap</code>, but the partial order is defined in terms of <code>ContinuousLinearMap.IsPositive</code>. This is partly why I'm suggesting having the predicate isn't so crazy anymore.</p>",
        "id": 514405432,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1745595215
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousLinearMap.instLoewnerPartialOrder#doc\">docs#ContinuousLinearMap.instLoewnerPartialOrder</a></p>",
        "id": 514405644,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1745595263
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousLinearMap.instStarOrderedRing#doc\">docs#ContinuousLinearMap.instStarOrderedRing</a></p>",
        "id": 514405721,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1745595286
    },
    {
        "content": "<p>Note that we only have the latter over <code>‚ÑÇ</code> because we don't yet have a theory of real C‚ãÜ-algebras from which we can easily construct the square root. It would be possible to hand roll the square root by embedding <code>H ‚ÜíL[‚Ñù] H</code> into its complexification and then proving that for a <code>T : H ‚ÜíL[‚Ñù] H</code> selfadjoint, the closed <code>‚Ñù</code>-star subalgebra generated by <code>T</code> remains within the image of <code>H ‚ÜíL[‚Ñù] H</code> embedded within the complexification, and hence the square root of <code>T</code> (if <code>T ‚â• 0</code>) lies in <code>H ‚ÜíL[‚Ñù] H</code>. But I think this is too much work to pursue and we should instead simply develop real C‚ãÜ-algebras. It's on my agenda, but not for a long time, since so much of the real theory depends upon the complex theory.</p>",
        "id": 514406659,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1745595532
    }
]