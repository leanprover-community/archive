[
    {
        "content": "<p>Do we not have this? Surely we must have -- am I just looking in the wrong place? I'd also like an Equiv version where <code>I=J.comap</code>. Also, is the name OK? We have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QuotientGroup.lift#doc\">docs#QuotientGroup.lift</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QuotientGroup.map#doc\">docs#QuotientGroup.map</a>, and also <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ideal.Quotient.lift#doc\">docs#Ideal.Quotient.lift</a> . I guess the equiv version should be called <code>Ideal.Quotient.congr</code> to match <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QuotientGroup.congr#doc\">docs#QuotientGroup.congr</a>  (although I don't know why they use maps not comaps in that declaration, comaps don't have a random Exists in)</p>\n<p>Asking before PRing because there's a bunch of boilerplate which needs to go with the definition.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">RingTheory</span><span class=\"bp\">.</span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">Maps</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">→+*</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"bp\">.</span><span class=\"n\">comap</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">→+*</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">J</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">hrI</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RingHom</span><span class=\"bp\">.</span><span class=\"n\">comp_apply</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">eq_zero_iff_mem</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">hrI</span>\n</code></pre></div>",
        "id": 468555307,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725795637
    },
    {
        "content": "<p>This is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ideal.quotientMap#doc\">docs#Ideal.quotientMap</a> I believe.</p>",
        "id": 468562559,
        "sender_full_name": "Christian Merten",
        "timestamp": 1725800155
    },
    {
        "content": "<p>The equiv version is just below: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ideal.quotientEquiv#doc\">docs#Ideal.quotientEquiv</a></p>",
        "id": 468562645,
        "sender_full_name": "Christian Merten",
        "timestamp": 1725800218
    },
    {
        "content": "<p>Many thanks. So perhaps the question is whether the names need thinking about? (if <code>Ideal.Quotient.lift</code> had been called <code>Ideal.quotientLift</code> I would never have even asked).  I knew it would be there somewhere. I tried <code>exact?</code> and the docs.</p>",
        "id": 468567267,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725802099
    },
    {
        "content": "<p>I guess my mistake was assuming that I'd imported enough; <code>exact?</code> does find it but not with the imports I used. I need to replace <code>import Mathlib.RingTheory.Ideal.Quotient</code> with <code>import Mathlib.RingTheory.Ideal.QuotientOperations</code>. I guess this is a consequence of our current \"split files a lot to minimise imports\" policy and my failure to adapt by putting <code>import Mathlib</code> at the top of a file before <code>exact?</code>.</p>",
        "id": 468567825,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725802355
    },
    {
        "content": "<p>Can we have <code>exact!?</code> which imports mathlib first?</p>",
        "id": 468569812,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725803077
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Ideal.2EQuotient.2Emap/near/468567267\">said</a>:</p>\n<blockquote>\n<p>Many thanks. So perhaps the question is whether the names need thinking about? (if <code>Ideal.Quotient.lift</code> had been called <code>Ideal.quotientLift</code> I would never have even asked).  I knew it would be there somewhere. I tried <code>exact?</code> and the docs.</p>\n</blockquote>\n<p>When searching the docs, I find it often useful to drop all <code>.</code>s from the name and search in lower case.</p>",
        "id": 468573544,
        "sender_full_name": "Christian Merten",
        "timestamp": 1725804323
    },
    {
        "content": "<p>Yes, I know this trick! It also works in VS Code with ctrl-space. I was unfortunately misled in this case by the naming of <code>Ideal.Quotient.lift</code> so didn't try it :-(</p>",
        "id": 468573699,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725804422
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Ideal.2EQuotient.2Emap/near/468569812\">said</a>:</p>\n<blockquote>\n<p>Can we have <code>exact!?</code> which imports mathlib first?</p>\n</blockquote>\n<p>This is perhaps not completely insane. :-) You would have to create a fresh environment with <code>import Mathlib</code>, and then build a new metavariable inside that environment from the <code>Expr</code> for the goal outside that environment. There are probably many ways that could go wrong, but for an <code>exact!?</code> I think it would be fine to make a best effort.</p>\n<p>I'm not going to attempt this, but I'd encourage someone to try! (Look around for code using <code>withImportModules</code> as a starting point?)</p>",
        "id": 468642765,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1725839763
    },
    {
        "content": "<p>Nitpick: shouldn't it be <code>exact?!</code>?</p>\n<p>to-mah-to, to-may-to</p>",
        "id": 468817753,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725892305
    },
    {
        "content": "<p>I agree <code>exact?!</code> is right, but I've been thinking about chess and liked the \"I don't know what I am doing but let me try this.\" that <code>exact!?</code> suggested. :-)</p>",
        "id": 468961961,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1725936711
    }
]