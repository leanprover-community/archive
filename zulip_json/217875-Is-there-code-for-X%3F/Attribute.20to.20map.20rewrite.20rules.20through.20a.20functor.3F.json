[
    {
        "content": "<p>The category theory library has a useful attribute, <code>@[reassoc]</code>, to generate a lemma <code>f â‰« (g â‰« a) = h â‰« a</code> from <code>f â‰« g = h</code>; <code>simp</code> can apply the former but not the latter after reassociating to the right. Another thing that sometimes happens is that we want to apply <code>F.map f â‰« F.map g = F.map h</code> as a simp rule, but this also will not trigger from just the original lemma; is there an attribute to automatically generate this (perhaps quantifying over all <code>F</code>)?</p>",
        "id": 514464901,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1745616463
    },
    {
        "content": "<p>i think <code>grind</code> is supposed to eesolve all such issues</p>",
        "id": 514473919,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1745622099
    },
    {
        "content": "<p>but the answer is no.</p>",
        "id": 514474008,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1745622149
    },
    {
        "content": "<p>Is there a writeup anywhere of how <code>grind</code> will deal with situations like this one? In the meantime, I <a href=\"https://gist.github.com/Vtec234/3e7320861fc2ec3b147f6d2ca193ed48\">wrote the attribute</a> by copy-pasting <code>reassoc</code>.</p>",
        "id": 514474230,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1745622321
    },
    {
        "content": "<p>Just to flag that <span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> have the same thought as you in the context of Toric</p>",
        "id": 514541974,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1745676163
    },
    {
        "content": "<p>I suggest we have this in mathlib and tag every category theory lemma with this.</p>",
        "id": 514542137,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1745676277
    },
    {
        "content": "<p>It would be quite a lot of lemmas added to the <code>simp</code> set.. I am mostly using these in a particular situation where we work with <code>yoneda.map</code> a lot. You also run into the funny situation of needing all of <code>f â‰« g = h</code>, <code>f â‰« (g â‰« a) = h â‰« a</code>, <code>F.map f â‰« F.map g = F.map h</code>, and <code>F.map f â‰« (F.map g â‰« a) = F.map h â‰« a</code> which is achieved via the monstrous <code>@[functor_map (attr := reassoc (attr := simp))]</code>.</p>",
        "id": 514566441,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1745693682
    },
    {
        "content": "<p>you might call it monstrous but it's pretty cool if that works.</p>",
        "id": 514567812,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745694827
    },
    {
        "content": "<p>I think that actually the lemmas that are eligible for this new kind of auxiliary lemma generation are the same that are available for <code>reassoc</code>. So I think we don't need a new attribute at all, but merely an extension of <code>reassoc</code>.</p>",
        "id": 514574626,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1745700099
    },
    {
        "content": "<p>If you want to make it an extension of <code>reassoc</code>, be aware that I have an open PR (<a href=\"https://github.com/leanprover-community/mathlib4/pull/24303\">#24303</a>) modifying <code>reassoc</code>, so there might be some conflicts in the code.</p>",
        "id": 514628333,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1745746065
    }
]