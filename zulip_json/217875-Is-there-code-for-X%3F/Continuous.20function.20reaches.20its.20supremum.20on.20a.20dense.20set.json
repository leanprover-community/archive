[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">continuous_supremum_dense</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hS</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dense</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Continuous</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">):</span>\n<span class=\"w\">    </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Probably one can generalize this to the case that the codomain of <code>f</code> is endowed with an order topology.</p>",
        "id": 556920404,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1763409938
    },
    {
        "content": "<p>I would have thought that <code>⨆ s ∈ S, f s</code> was more idiomatic.</p>",
        "id": 556922463,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763410654
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Continuous.20function.20reaches.20its.20supremum.20on.20a.20dense.20set/near/556922463\">said</a>:</p>\n<blockquote>\n<p>I would have thought that <code>⨆ s ∈ S, f s</code> was more idiomatic.</p>\n</blockquote>\n<p>It is false though, right?</p>",
        "id": 556922524,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1763410677
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"268315\">Anatole Dedecker</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Continuous.20function.20reaches.20its.20supremum.20on.20a.20dense.20set/near/556922524\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Continuous.20function.20reaches.20its.20supremum.20on.20a.20dense.20set/near/556922463\">said</a>:</p>\n<blockquote>\n<p>I would have thought that <code>⨆ s ∈ S, f s</code> was more idiomatic.</p>\n</blockquote>\n<p>It is false though, right?</p>\n</blockquote>\n<p>May you explain further why my statement is false? I probably should include more assumptions.</p>",
        "id": 556923204,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1763410931
    },
    {
        "content": "<p>The best way is to just try and prove it yourself and see where things start to go wrong. Firstly, do understand that the <code>⨆</code> of an unbounded set is zero? Do you mean to allow this?</p>",
        "id": 556923382,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763411000
    },
    {
        "content": "<p>Yes, and both sides should be equal to zero if <code>f</code> is unbounded.</p>",
        "id": 556923544,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1763411061
    },
    {
        "content": "<p>Sorry, I meant that Kevin's phrasing was wrong. Because <code>⨆ s ∈ S, f s</code> is really <code>⨆ s, ⨆ (h : s ∈ S), f s</code>, which is never what you want. I believe your initial statement though, even in the unbounded case.</p>",
        "id": 556924056,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1763411239
    },
    {
        "content": "<p>aah yes apologies, this is a gotcha.</p>",
        "id": 556924252,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763411294
    },
    {
        "content": "<p>yes I believe the original statement and I now see that my modification might not be true.</p>",
        "id": 556924433,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763411343
    },
    {
        "content": "<p>I can't find the result though</p>",
        "id": 556925242,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1763411608
    },
    {
        "content": "<p>I don't think we have it. I would probably try to get it using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=isLUB_iff_of_subset_of_subset_closure#doc\">docs#isLUB_iff_of_subset_of_subset_closure</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Continuous.range_subset_closure_image_dense#doc\">docs#Continuous.range_subset_closure_image_dense</a> along with some glue to go from <code>iSup</code> to <code>IsLUB</code>.</p>",
        "id": 556927555,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1763412462
    },
    {
        "content": "<p>Probably the assumption here is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SupConvergenceClass#doc\">docs#SupConvergenceClass</a></p>",
        "id": 556927839,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763412582
    },
    {
        "content": "<p>For the generalization, I mean</p>",
        "id": 556928377,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763412765
    },
    {
        "content": "<p>You should be able to remove the <code>BddAbove</code> hypothesis too in a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ConditionallyCompleteLinearOrder#doc\">docs#ConditionallyCompleteLinearOrder</a> using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=BddAbove.closure#doc\">docs#BddAbove.closure</a> and the junk value constraint <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ConditionallyCompleteLinearOrder.csSup_of_not_bddAbove#doc\">docs#ConditionallyCompleteLinearOrder.csSup_of_not_bddAbove</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Set</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ConditionallyCompleteLattice</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">ClosedIicTopology</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">continuous_supremum_dense</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hS</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dense</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Continuous</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BddAbove</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">sSup_range</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">sSup_range</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">isEmpty_or_nonempty</span><span class=\"w\"> </span><span class=\"n\">ι</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">range_eq_empty</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hS</span><span class=\"bp\">.</span><span class=\"n\">nonempty</span><span class=\"bp\">.</span><span class=\"n\">to_subtype</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">isLUB_csSup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">range_nonempty</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">unique</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">isLUB_iff_of_subset_of_subset_closure</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">image_subset_range</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"bp\">.</span><span class=\"n\">range_subset_closure_image_dense</span><span class=\"w\"> </span><span class=\"n\">hS</span><span class=\"o\">)]</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">comp_def</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">range_comp</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span>\n<span class=\"w\">    </span><span class=\"n\">isLUB_csSup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">range_nonempty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">mono</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">range_comp_subset_range</span><span class=\"w\"> </span><span class=\"bp\">..</span>\n</code></pre></div>",
        "id": 556933491,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1763414915
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197836\">@Jireh Loreaux</span> Thank you for your code! <span aria-label=\"thank you\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"thank you\">:thank_you:</span></p>",
        "id": 556965307,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1763431789
    }
]