[
    {
        "content": "<p>Is there an elegant way to commute iSup's with finite sums?  I think there might be some way to specialize one of the <code>lintegral</code> lemmas to get this, but I'm wondering if there's a better way. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span>\n<span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">T</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">i</span>\n</code></pre></div>",
        "id": 481231951,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1731033210
    },
    {
        "content": "<p>That's not true. Consider <code>S=T={0,1}</code>, and <code>f 0 0 = 0</code>, <code>f 0 1 = 1</code>, <code>f 1 0 = 2</code>, <code>f 1 1 = 0</code>. Then the LHS is 3, but the RHS is 2.</p>",
        "id": 481239764,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1731039485
    },
    {
        "content": "<p>Thanks-- suppose it makes sense why I couldn't find it then : )</p>",
        "id": 481243887,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1731042826
    },
    {
        "content": "<p>For posterity, I did some more digging, and the is true for monotone functions (which is what I had). The lemma is <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/ENNReal/Inv.html#ENNReal.finsetSum_iSup_of_monotone\">ENNReal.finsetSum_iSup_of_monotone</a></p>",
        "id": 481317971,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1731073631
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"721721\">@Markus de Medeiros</span> I got distracted by the fact that it wasn't true. But the correct way to find a lemma like this that <em>does</em> exist is: <span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> |- ∑ a ∈ ?s, ⨆ y, ?f a y = ⨆ i, ∑ a ∈ ?s, ?f a i</p>",
        "id": 481366936,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1731090885
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/ENNReal/Inv.html#ENNReal.finsetSum_iSup_of_monotone\">ENNReal.finsetSum_iSup_of_monotone</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/ENNReal/Inv.html#ENNReal.finset_sum_iSup_nat\">ENNReal.finset_sum_iSup_nat</a>, and <a href=\"https://loogle.lean-lang.org/?q=%7C-%20%E2%88%91%20a%20%E2%88%88%20%3Fs%2C%20%E2%A8%86%20y%2C%20%3Ff%20a%20y%20%3D%20%E2%A8%86%20i%2C%20%E2%88%91%20a%20%E2%88%88%20%3Fs%2C%20%3Ff%20a%20i\">1 more</a></p>",
        "id": 481366938,
        "sender_full_name": "loogle",
        "timestamp": 1731090887
    },
    {
        "content": "<p>(first hit)</p>",
        "id": 481366948,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1731090893
    },
    {
        "content": "<p>Excellent-- thanks for the help!</p>",
        "id": 481373556,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1731093720
    }
]