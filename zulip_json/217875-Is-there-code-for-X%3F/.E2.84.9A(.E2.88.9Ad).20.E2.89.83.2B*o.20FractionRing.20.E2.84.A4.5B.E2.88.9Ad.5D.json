[
    {
        "content": "<p>There's <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Zsqrtd#doc\">docs#Zsqrtd</a> but I couldn't find â„š(âˆšd). Since <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Zsqrtd#doc\">docs#Zsqrtd</a> is defined using a structure of two integers, â„š(âˆšd) can probably be defined using 4 integers plus a proof that they're reduced, similar to <code>Rat</code>.<br>\nDoes this exist somewhere?</p>",
        "id": 541845253,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1759014641
    },
    {
        "content": "<p>probably not</p>",
        "id": 541845348,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759014783
    },
    {
        "content": "<p>since you can just <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AdjoinRoot#doc\">docs#AdjoinRoot</a></p>",
        "id": 541845369,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759014808
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/270676-lean4/topic/DecidableEq.2C.20LT.2C.20GT/near/541740749\">said</a>:</p>\n<blockquote>\n<p>usually we don't like to use <code>Quotient</code> if there's a way to efficiently pick a representative from each equivalence class<br>\nsince it breaks canonicity</p>\n</blockquote>\n<p>Umm doesn't that go against what you said yesterday?</p>",
        "id": 541845477,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1759014931
    },
    {
        "content": "<p>This discussion may be of interest: <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Z.5B.281.2Bsqrt.281.2B4k.29.29.2F2.5D/near/520524948\">https://leanprover.zulipchat.com/#narrow/channel/217875-Is-there-code-for-X.3F/topic/Z.5B.281.2Bsqrt.281.2B4k.29.29.2F2.5D/near/520524948</a></p>",
        "id": 541845741,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1759015245
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.84.9A.28.E2.88.9Ad.29.20.E2.89.83.2B*o.20FractionRing.20.E2.84.A4.5B.E2.88.9Ad.5D/near/541845477\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/270676-lean4/topic/DecidableEq.2C.20LT.2C.20GT/near/541740749\">said</a>:</p>\n<blockquote>\n<p>usually we don't like to use <code>Quotient</code> if there's a way to efficiently pick a representative from each equivalence class<br>\nsince it breaks canonicity</p>\n</blockquote>\n<p>Umm doesn't that go against what you said yesterday?</p>\n</blockquote>\n<p>this is different since we don't care about computation</p>",
        "id": 541845763,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759015276
    },
    {
        "content": "<p>and I don't think there's a way to pick a representative efficiently enough to justify the cost of writing more code</p>",
        "id": 541845798,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759015320
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.84.9A.28.E2.88.9Ad.29.20.E2.89.83.2B*o.20FractionRing.20.E2.84.A4.5B.E2.88.9Ad.5D/near/541845763\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.84.9A.28.E2.88.9Ad.29.20.E2.89.83.2B*o.20FractionRing.20.E2.84.A4.5B.E2.88.9Ad.5D/near/541845477\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/270676-lean4/topic/DecidableEq.2C.20LT.2C.20GT/near/541740749\">said</a>:</p>\n<blockquote>\n<p>usually we don't like to use <code>Quotient</code> if there's a way to efficiently pick a representative from each equivalence class<br>\nsince it breaks canonicity</p>\n</blockquote>\n<p>Umm doesn't that go against what you said yesterday?</p>\n</blockquote>\n<p>this is different since we don't care about computation</p>\n</blockquote>\n<p>How is <code>â„š(âˆšd)</code> different than <code>â„¤[(1+âˆš(1+4k))/2]</code> in terms of caring about computation?<br>\n(I'm also not sure what that means)<br>\n<a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Z.5B.281.2Bsqrt.281.2B4k.29.29.2F2.5D/near/520527316\">#Is there code for X? &gt; Z&#91;(1+sqrt(1+4k))/2&#93; @ ðŸ’¬</a></p>",
        "id": 541845889,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1759015418
    },
    {
        "content": "<p>it's because <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial#doc\">docs#Polynomial</a> is already highly noncomputable</p>",
        "id": 541845934,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759015488
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.84.9A.28.E2.88.9Ad.29.20.E2.89.83.2B*o.20FractionRing.20.E2.84.A4.5B.E2.88.9Ad.5D/near/541845798\">said</a>:</p>\n<blockquote>\n<p>and I don't think there's a way to pick a representative efficiently enough to justify the cost of writing more code</p>\n</blockquote>\n<p>IIRC it's <code>(a + bâˆšn) / (c + dâˆšn)</code> where the determinant <code>ad - bc</code> is non-zero</p>",
        "id": 541845940,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1759015492
    },
    {
        "content": "<p>so doing anything with it will also be mostly noncomputable</p>",
        "id": 541845946,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759015499
    },
    {
        "content": "<p>I'm very confused. Can you answer this: What's the difference to you between <code>â„¤[âˆšd]</code>, <code>â„¤[(1+âˆš(1+4k))/2]</code>, <code>â„š(âˆšd)</code>?<br>\nI don't see how polynomials have to do with only one of these and not all / none.</p>",
        "id": 541846165,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1759015794
    },
    {
        "content": "<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QuadraticAlgebra#doc\">docs#QuadraticAlgebra</a> to make <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">(</mo><msqrt><mi>d</mi></msqrt><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}(\\sqrt{d})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1822em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Q</span><span class=\"mopen\">(</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9322em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal\">d</span></span></span><span style=\"top:-2.8922em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"1.08em\" viewBox=\"0 0 400000 1080\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z\"/></svg></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1078em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>.</p>",
        "id": 541847125,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759016896
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.84.9A.28.E2.88.9Ad.29.20.E2.89.83.2B*o.20FractionRing.20.E2.84.A4.5B.E2.88.9Ad.5D/near/541847125\">said</a>:</p>\n<blockquote>\n<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QuadraticAlgebra#doc\">docs#QuadraticAlgebra</a> to make <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">(</mo><msqrt><mi>d</mi></msqrt><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}(\\sqrt{d})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1822em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Q</span><span class=\"mopen\">(</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9322em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal\">d</span></span></span><span style=\"top:-2.8922em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"1.08em\" viewBox=\"0 0 400000 1080\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z\"/></svg></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1078em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>.</p>\n</blockquote>\n<p>That looks great, thanks! Are there plans to deprecate <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Zsqrtd#doc\">docs#Zsqrtd</a> then, in favor of this?</p>",
        "id": 541847635,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1759017471
    },
    {
        "content": "<p>Yeah I think that that would be a good idea.</p>",
        "id": 541879468,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759052916
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.84.9A.28.E2.88.9Ad.29.20.E2.89.83.2B*o.20FractionRing.20.E2.84.A4.5B.E2.88.9Ad.5D/near/541847635\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.84.9A.28.E2.88.9Ad.29.20.E2.89.83.2B*o.20FractionRing.20.E2.84.A4.5B.E2.88.9Ad.5D/near/541847125\">said</a>:</p>\n<blockquote>\n<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QuadraticAlgebra#doc\">docs#QuadraticAlgebra</a> to make <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">(</mo><msqrt><mi>d</mi></msqrt><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}(\\sqrt{d})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1822em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Q</span><span class=\"mopen\">(</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9322em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal\">d</span></span></span><span style=\"top:-2.8922em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"1.08em\" viewBox=\"0 0 400000 1080\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z\"/></svg></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1078em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>.</p>\n</blockquote>\n<p>That looks great, thanks! Are there plans to deprecate <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Zsqrtd#doc\">docs#Zsqrtd</a> then, in favor of this?</p>\n</blockquote>\n<p>Indeed the next step is to add some special <code>Field</code> instance for <code>QuadraticAlgebra</code> (e.g <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">(</mo><msqrt><mi>d</mi></msqrt><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}(\\sqrt{d})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1822em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Q</span><span class=\"mopen\">(</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9322em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal\">d</span></span></span><span style=\"top:-2.8922em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"1.08em\" viewBox=\"0 0 400000 1080\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z\"/></svg></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1078em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> for a square-free integer <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">d</span></span></span></span>) and deprecate <code>Zsqrtd</code></p>",
        "id": 542277505,
        "sender_full_name": "Edison Xie",
        "timestamp": 1759239175
    },
    {
        "content": "<p>One could add an instance by using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fact#doc\">docs#Fact</a> of the property that something is not a square, but it's probably not easier to call that fact each time it is needed than instantiating the fact that the quadratic algebra is a field.</p>",
        "id": 542661673,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1759386088
    },
    {
        "content": "<p>For quadratic algebras, <a href=\"https://github.com/leanprover-community/mathlib4/pull/30059\">#30059</a> added the characterization of units. I am one step away from the field structure hence I will add it. [Done]</p>",
        "id": 542661728,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1759386126
    }
]