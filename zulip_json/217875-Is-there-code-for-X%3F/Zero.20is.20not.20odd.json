[
    {
        "content": "<p>Surely this should be handled by a single tactic?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">   </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 474354022,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727889449
    },
    {
        "content": "<p>I've tried quite hard to get it to a single tactic a few weeks ago and I didn't manage</p>",
        "id": 474354279,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727889540
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">⟨⟩⟩</span>\n</code></pre></div>\n<p>Does this count?</p>",
        "id": 474354564,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1727889644
    },
    {
        "content": "<p>I think <code>simp at h</code> used to work in 4.10.0</p>",
        "id": 474354598,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727889663
    },
    {
        "content": "<p>Does <code>simp_all [Odd]</code> count?  Also <code>simp [Odd] at h</code> seems enough.</p>",
        "id": 474354893,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727889772
    },
    {
        "content": "<p>If you reorganize,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>",
        "id": 474367633,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1727893603
    },
    {
        "content": "<p>In Lean 3 the <code>decide</code> equivalent, <code>dec_trivial</code>, had a variant <code>dec_trivial!</code> which ran \"revert\" first -- that would do it here!</p>",
        "id": 474367978,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1727893732
    },
    {
        "content": "<p><code>tauto</code> works</p>",
        "id": 474378311,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1727896639
    },
    {
        "content": "<p>Maybe having <code>¬ Odd 0</code> as a theorem wouldn't be so bad. At least there is <a href=\"https://github.com/leanprover-community/mathlib4/blob/551dfed37fb761cc7bc33eac160eae1771191226/Mathlib/Algebra/GeomSum.lean#L485\">one occurrence</a> where it is used</p>",
        "id": 474380391,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1727897295
    },
    {
        "content": "<p>are you saying that it's not already a theorem?</p>",
        "id": 474381124,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1727897538
    },
    {
        "content": "<p>obviously it should exist, I thought the question was about finding a proof of it automatically</p>",
        "id": 474381196,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1727897563
    },
    {
        "content": "<p>I'd be very surprised if simp [parity_simps] at h can't do this</p>",
        "id": 474381397,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1727897624
    },
    {
        "content": "<p>ok, I didn't find it, grepping <code>Odd 0</code> (and <code>Even 0</code> for that matter) does not give the desired results</p>",
        "id": 474381551,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1727897664
    },
    {
        "content": "<p>I have similiar problem that <code>contradiction</code> tactic didn't recognize <code>Odd n</code> and <code>Even n</code> is contradictory.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hodd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">heven</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Even</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ↓ failed before rewrite</span>\n<span class=\"w\">  </span><span class=\"c1\">-- contradiction</span>\n\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">not_odd_iff_even</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">heven</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- ↓ success after rewrite</span>\n<span class=\"w\">  </span><span class=\"n\">contradiction</span>\n</code></pre></div>",
        "id": 474626778,
        "sender_full_name": "Zhang Qinchuan",
        "timestamp": 1727971168
    },
    {
        "content": "<p>I think that counts as \"works as intended\". <code>contradiction</code> should not (cannot) find any possible contradiction, only the ones that are pure logic</p>",
        "id": 474634402,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1727972933
    },
    {
        "content": "<p>I looked a bit and we have :</p>\n<ul>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Int.not_even_one#doc\">docs#Int.not_even_one</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.not_even_one#doc\">docs#Nat.not_even_one</a></li>\n<li><code>even_zero</code>: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=even_zero#doc\">docs#even_zero</a></li>\n<li><code>odd_one</code>: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=odd_one#doc\">docs#odd_one</a><br>\nSo the thing missing is <code>not_odd_zero</code> and I think the right generality is probably to add it for <code>Int</code> and <code>Nat</code>, since it is of course not true for <code>Ring</code>:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Even</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ZMod</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span>\n</code></pre></div>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/17419\">mathlib#17419</a> adds these</p>",
        "id": 474845265,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1728055105
    }
]