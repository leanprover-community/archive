[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsSimpleRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Field</span><span class=\"bp\">.</span><span class=\"n\">ofIsUnitOrEqZero</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">isSimpleRing_iff_isTwoSided_imp</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"bp\">‹_›</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"o\">})</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">instIsTwoSided</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">span_singleton_eq_bot</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">span_singleton_eq_top</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I tried Loogle with <code>IsSimpleRing, Field</code> but didn't find such a theorem, but maybe this exists with weaker assumptions than <code>IsSimpleRing</code></p>",
        "id": 541730319,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1758913805
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=isSimpleRing_iff_isField#doc\">docs#isSimpleRing_iff_isField</a></p>",
        "id": 541730968,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758914111
    },
    {
        "content": "<p>not an instance or anything since we don't want to make data</p>",
        "id": 541731055,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758914143
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsField.toField#doc\">docs#IsField.toField</a></p>",
        "id": 541731147,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758914158
    },
    {
        "content": "<p>Thanks, I didn't know <code>IsField</code> existed<br>\nI have a theorem that requires <code>CommRing</code> and <code>IsSimpleRing</code>, and I'm considering replacing both with <code>Field</code>, but this not being an instance means the <code>Field</code> version would be harder to use, right?</p>",
        "id": 541733362,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1758915149
    },
    {
        "content": "<p>I guess yeah</p>",
        "id": 541736093,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758916321
    },
    {
        "content": "<p>what's the theorem</p>",
        "id": 541736190,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758916378
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">aroots_card_eq_natDegree_from_field</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsSimpleRing</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsAlgClosed</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">]}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">aroots</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">natDegree</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 541736350,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1758916471
    },
    {
        "content": "<p>you probably want <code>FaithfulSMul A B</code> and no <code>IsSimpleRing A</code></p>",
        "id": 541750016,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758923164
    },
    {
        "content": "<p>i apologise if i said something else on one of your PR's</p>",
        "id": 541750036,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758923177
    },
    {
        "content": "<p>The PR in question is <a href=\"https://github.com/leanprover-community/mathlib4/pull/29956\">#29956</a> (I resolved everything btw).<br>\nI'm not sure how <code>FaithfulSMul</code> helps here, can you elaborate?<br>\nThe current proof relies on a theorem that requires <code>IsSimpleRing</code></p>",
        "id": 541750641,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1758923509
    },
    {
        "content": "<p>all you want is that the algebra map is injective right</p>",
        "id": 541752257,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758924543
    },
    {
        "content": "<p>I don't think you actually need a field</p>",
        "id": 541752266,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758924550
    },
    {
        "content": "<p>like if <code>A := ℤ</code> and <code>B</code> is char-zero then the theorem still holds</p>",
        "id": 541752294,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758924571
    },
    {
        "content": "<p>Yes I can require <code>Function.Injective (algebraMap A B)</code></p>",
        "id": 541752405,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1758924629
    },
    {
        "content": "<p>FaithfulSMul is exactly equivalent to algebraMap injective</p>",
        "id": 541753377,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758925319
    },
    {
        "content": "<p>Opinions on adding this instance?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsSimpleRing</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nontrivial</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FaithfulSMul</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">faithfulSMul_iff_algebraMap_injective</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">injective</span>\n</code></pre></div>",
        "id": 541810576,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1758983224
    },
    {
        "content": "<p>LGTM</p>",
        "id": 541814465,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1758986497
    },
    {
        "content": "<p>Added to <a href=\"https://github.com/leanprover-community/mathlib4/pull/29956\">#29956</a>, which allowed me to remove a theorem about simple rings</p>",
        "id": 541887688,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1759061584
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 542276808,
        "sender_full_name": "Edison Xie",
        "timestamp": 1759239012
    },
    {
        "content": "<p>I just don't see how <code>[CommRing A] [IsSimpleRing A]</code> is a good idea in general.</p>",
        "id": 542461166,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759315017
    },
    {
        "content": "<p>This is just a complicated way of saying <code>Field A</code> right?</p>",
        "id": 542541380,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759337173
    },
    {
        "content": "<p><code>Field A</code> comes with more data (how to do division and multiplicative inverses, as well as raising to an integer power)</p>",
        "id": 542547927,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759339590
    },
    {
        "content": "<p>well it is at least equivalent to <code>[CommRing A] [IsField A]</code> already, without using classical</p>",
        "id": 542550393,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759340415
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsField#doc\">docs#IsField</a> isn't a class ... (and it also includes commutativity)</p>",
        "id": 542553299,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1759341419
    },
    {
        "content": "<p>Yeah that was my idea: the point is that we don't want a <code>Field</code> instance on <code>[CommRIng A] [IsSimpleRing A]</code>, so it still makes sense to have <em>other</em> instances that can be found automatically</p>",
        "id": 542570621,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759347900
    },
    {
        "content": "<p>But I don't know how much this would be used in practice</p>",
        "id": 542570724,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759347940
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/A.20commutative.20simple.20ring.20is.20a.20field/near/542570724\">said</a>:</p>\n<blockquote>\n<p>But I don't know how much this would be used in practice</p>\n</blockquote>\n<p>Sometimes I use them but I only have <code>IsField A</code> as a lemma</p>",
        "id": 542671512,
        "sender_full_name": "Edison Xie",
        "timestamp": 1759390176
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/A.20commutative.20simple.20ring.20is.20a.20field/near/542553299\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsField#doc\">docs#IsField</a> isn't a class ... (and it also includes commutativity)</p>\n</blockquote>\n<p>I’m thinking maybe we should get rid of IsField and just have IsDivisionRing</p>",
        "id": 542671659,
        "sender_full_name": "Edison Xie",
        "timestamp": 1759390229
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/A.20commutative.20simple.20ring.20is.20a.20field/near/541810576\">said</a>:</p>\n<blockquote>\n<p>Opinions on adding this instance?</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsSimpleRing</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nontrivial</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FaithfulSMul</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">faithfulSMul_iff_algebraMap_injective</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">injective</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Update: this instance was added in <a href=\"https://github.com/leanprover-community/mathlib4/pull/29356\">#29356</a> (even before I opened this thread) and is now <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=instFaithfulSMul_1#doc\">docs#instFaithfulSMul_1</a></p>",
        "id": 547020748,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1761360005
    }
]