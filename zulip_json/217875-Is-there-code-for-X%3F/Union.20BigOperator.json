[
    {
        "content": "<p>I would like to state something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Does it exist under another name?</p>",
        "id": 443474973,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1717856887
    },
    {
        "content": "<p>Or maybe indexed if the outer set is a list?</p>",
        "id": 443475248,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1717857071
    },
    {
        "content": "<p><code>Finset.biUnion</code> where <code>t</code> is id, maybe?</p>",
        "id": 443475712,
        "sender_full_name": "Ira Fesefeldt",
        "timestamp": 1717857481
    },
    {
        "content": "<p>Forget that and use <code>Finset.sup</code></p>",
        "id": 443475840,
        "sender_full_name": "Ira Fesefeldt",
        "timestamp": 1717857576
    },
    {
        "content": "<p>Thanks.</p>",
        "id": 443476177,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1717857800
    },
    {
        "content": "<p>I ran into this just now and want to leave this here for anyone searching for <code>Finset.join</code> or <code>Finset.sUnion</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">Lattice</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">diagnostics</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">join_via_sup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">sup</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"c1\">-- failed to synthesize `SemilatticeSup (Finset α)`</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">join_via_biUnion</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">biUnion</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"c1\">-- failed to synthesisze `DecidableEq α`</span>\n\n<span class=\"c1\">-- But note that adding `[DecidableEq α]` fixes both of them!</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">join3</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">biUnion</span><span class=\"w\"> </span><span class=\"n\">id</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">join4</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">sup</span><span class=\"w\"> </span><span class=\"n\">id</span>\n</code></pre></div>\n<p>And I am still wondering: Why is using <code>sup id</code> preferred/recommended instead of <code>biUnion id</code> ? Is there a more minimal way to get <code>SemilatticeSup (Finset α)</code> instead of via <code>DecidableEq α</code>?</p>",
        "id": 470044981,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1726259542
    },
    {
        "content": "<p>No, it really is necessary. Assume <code>SemilatticeSup (Finset alpha)</code>. Then you can compute <code>({a} union {b}).card</code>. If it is <code>1</code>, then <code>a = b</code>. If it is <code>2</code>, then <code>a != b</code>. Congratulations, you have proved <code>DecidableEq alpha</code>.</p>",
        "id": 470089025,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1726286630
    },
    {
        "content": "<p>If you don't have decidable equality but know the sets are disjoint, you can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.disjUnion#doc\">docs#Finset.disjUnion</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.disjiUnion#doc\">docs#Finset.disjiUnion</a></p>",
        "id": 470201990,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1726333894
    }
]