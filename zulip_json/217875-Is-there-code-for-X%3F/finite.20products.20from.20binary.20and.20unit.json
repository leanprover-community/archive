[
    {
        "content": "<p>Do we have this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">IsNice</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">IsNice</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">API</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">iso</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hX</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsNice</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsNice</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">unit</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsNice</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hX</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsNice</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hY</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsNice</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsNice</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">API</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">pi_finite</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hX</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">IsNice</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)):</span><span class=\"w\"> </span><span class=\"n\">IsNice</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- \"obvious by induction\"</span>\n</code></pre></div>\n<p>My application is to topological modules and <code>IsNice</code> is a typeclass on topologies FWIW.</p>",
        "id": 466266451,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725023794
    },
    {
        "content": "<p>Induct on Nat.card iota?</p>",
        "id": 466267296,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1725024084
    },
    {
        "content": "<p>And use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finite.card_option#doc\">docs#Finite.card_option</a> with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finite.card_eq#doc\">docs#Finite.card_eq</a></p>",
        "id": 466267331,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1725024103
    },
    {
        "content": "<p>Yeah and it's going to be horrible :-(</p>",
        "id": 466267695,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725024208
    },
    {
        "content": "<p>Furthermore I've realised that this might not be enough for me unless there's a trick. In my application I only know that the predicate is preserved under homeomorphisms, so I would have to rethink how to apply tha above theory</p>",
        "id": 466267933,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725024284
    },
    {
        "content": "<p>Something very similar happens in category theory land in <a href=\"https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/CategoryTheory/Limits/Constructions/FiniteProductsOfBinaryProducts.lean\">https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/CategoryTheory/Limits/Constructions/FiniteProductsOfBinaryProducts.lean</a> and there it's not too terrible.</p>",
        "id": 466268271,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1725024401
    },
    {
        "content": "<p>The idea here is to show it for <code>ι = Fin n</code> by induction on <code>n</code>, then use the fact that it's preserved by isos on <code>ι</code> to get it for all finite types. Hopefully the homeomorphisms you have are okay enough for this?</p>",
        "id": 466309341,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1725036880
    },
    {
        "content": "<p>Does <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fintype.inductionEmptyOption#doc\">docs#Fintype.inductionEmptyOption</a> help?</p>",
        "id": 466388753,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1725062872
    },
    {
        "content": "<p>That's what I've been using but in practice there seems to be lots of things missing (for example the homeo between (I oplus J -&gt; X) and (I -&gt; X) x (J -&gt; X))</p>",
        "id": 466474848,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725086829
    }
]