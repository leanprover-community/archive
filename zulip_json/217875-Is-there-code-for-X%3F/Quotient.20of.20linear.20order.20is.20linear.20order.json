[
    {
        "content": "<p>Suppose <code>LinearOrder Œ±</code> and <code>Setoid Œ±</code>, such that every equivalence class (preimage of <code>mk</code>) is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.OrdConnected#doc\">docs#Set.OrdConnected</a>. Then one can define a <code>LinearOrder (Quotient Œ±)</code> in a semi-obvious way.</p>",
        "id": 539903291,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758062231
    },
    {
        "content": "<p>Do we have anything like this in Mathlib?</p>",
        "id": 539903297,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758062236
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539903291\">said</a>:</p>\n<blockquote>\n<p>Suppose <code>LinearOrder Œ±</code> and <code>Setoid Œ±</code>, such that every equivalence class (preimage of <code>mk</code>) is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.OrdConnected#doc\">docs#Set.OrdConnected</a>. Then one can define a <code>LinearOrder (Quotient Œ±)</code> in a semi-obvious way.</p>\n</blockquote>\n<p>Would you say this has some relation to <a href=\"https://github.com/leanprover-community/mathlib4/pull/28278\">#28278</a> ?</p>",
        "id": 539905025,
        "sender_full_name": "Yan Yablonovskiy üá∫üá¶",
        "timestamp": 1758063696
    },
    {
        "content": "<p>I don't think so, no</p>",
        "id": 539905064,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758063728
    },
    {
        "content": "<p>After loogling around for a bit, I don't think we have this.</p>",
        "id": 539907381,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758065731
    },
    {
        "content": "<p>How should I implement it? It's hard to prove results about the linear order without making an instance, but I can't make an instance without wrapping the \"every equivalence class is <code>OrdConnected</code>\" hypothesis in a typeclass. Is it acceptable to make a new typeclass just for this?</p>",
        "id": 539907441,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758065767
    },
    {
        "content": "<p>Should I use <code>Quotient</code>, or should I write this down in some other way?</p>",
        "id": 539907473,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758065780
    },
    {
        "content": "<p>Using <code>Quotient</code> directly has the problem that if one wants to apply this to existing type (like your original example <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/LocalRing/ResidueField/Defs.html#IsLocalRing.ResidueField\">IsLocalRing.ResidueField</a>), one will need to pierce defeq to use the underlying Quotient type</p>",
        "id": 539907926,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758066171
    },
    {
        "content": "<p>Yes, but I think that's just the existing design</p>",
        "id": 539907970,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758066213
    },
    {
        "content": "<p><code>QuotLike</code> never made it into Mathlib</p>",
        "id": 539907988,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758066220
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539907988\">said</a>:</p>\n<blockquote>\n<p><code>QuotLike</code> never made it into Mathlib</p>\n</blockquote>\n<p>Don't give up, we can still do it</p>",
        "id": 539908695,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758066839
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16210\">#16210</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/16421\">#16421</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/16428\">#16428</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/17127\">#17127</a></p>",
        "id": 539908831,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758066907
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"455791\">@Yuyang Zhao</span> What would be needed to push these PRs through?</p>",
        "id": 539908978,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758066979
    },
    {
        "content": "<p>Regarding my first point, I don't need to make a new typeclass, because for some reason <code>OrdConnected</code> is already a class:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">LinearlyOrderedQuotient</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">OrdConnected</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚Åª¬π'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"o\">})</span>\n</code></pre></div>",
        "id": 539909623,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758067445
    },
    {
        "content": "<p>What if we don't mention Quotient at all? The API can look like <code>LinearOrder.descend [LinearOrder a] (f : a -&gt; b) (h : Function.Surjective f) (hconnected : ‚àÄ x y z, f x = f y -&gt; z \\in Set.Icc x y \\to f x = f z) : LinearOrder b</code><br>\n(Not sure if I put the correct hypothesis)</p>",
        "id": 539910064,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758067829
    },
    {
        "content": "<p>This makes sense. But I still have the problem of \"how do I give any API if I don't have an instance\"?</p>",
        "id": 539910406,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758068168
    },
    {
        "content": "<p>e.g. if I wanted to prove some result of the form <code>x ‚â§ y ‚Üí ...</code> for this linear order, I couldn't, since I don't have a <code>LE</code> instance, unless I painstakingly wrote <code>(LinearOrder.descend f _ _).toPartialOrder.toPreorder.toLE.le x y</code> every single time</p>",
        "id": 539910522,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758068259
    },
    {
        "content": "<p>take advantage of the defeqs</p>",
        "id": 539910552,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758068274
    },
    {
        "content": "<p>wdym?</p>",
        "id": 539910564,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758068288
    },
    {
        "content": "<p>what kind of results are you wanting to prove</p>",
        "id": 539910583,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758068306
    },
    {
        "content": "<p>here's a simple one: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">le_congr_left</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚âà</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬¨</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚âà</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">‚Üî</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÇ</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 539910606,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758068329
    },
    {
        "content": "<p>of course there's analogous results <code>le_congr_right</code>, and <code>lt_congr_left</code>, and <code>lt_congr_right</code></p>",
        "id": 539910641,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758068363
    },
    {
        "content": "<p>and of course, once the <code>LinearOrder</code> is constructed, the fact that <code>mk</code> is monotone is another important fact</p>",
        "id": 539910703,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758068422
    },
    {
        "content": "<p>tricky</p>",
        "id": 539910708,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758068426
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873350\">Weiyi Wang</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539910064\">said</a>:</p>\n<blockquote>\n<p>What if we don't mention Quotient at all? The API can look like <code>LinearOrder.descend [LinearOrder a] (f : a -&gt; b) (h : Function.Surjective f) (hconnected : ‚àÄ x y z, f x = f y -&gt; z \\in Set.Icc x y \\to f x = f z) : LinearOrder b</code><br>\n(Not sure if I put the correct hypothesis)</p>\n</blockquote>\n<p>An unfortunate consequence of not using <code>Quotient</code> is that we don't get <code>Quotient.lift</code>, and as a result, we don't get a decidable linear order</p>",
        "id": 539910869,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758068578
    },
    {
        "content": "<p>oh no</p>",
        "id": 539911060,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758068734
    },
    {
        "content": "<p>I think a special case for Quotient is reasonable here</p>",
        "id": 539911090,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758068774
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539910522\">said</a>:</p>\n<blockquote>\n<p>unless I painstakingly wrote <code>(LinearOrder.descend f _ _).toPartialOrder.toPreorder.toLE.le x y</code> every single time</p>\n</blockquote>\n<p><code>letI := LinearOrder.descend f _ _; x &lt;= y</code></p>",
        "id": 539911173,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758068834
    },
    {
        "content": "<p>Just to be completely explicit, my design proposal is the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Interval</span><span class=\"bp\">.</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Set</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Setoid</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">LinearlyOrderedQuotient</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">OrdConnected</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚Åª¬π'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"o\">})</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">linearOrder</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearlyOrderedQuotient</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Quotient</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Does this seem reasonable?</p>",
        "id": 539911513,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758069141
    },
    {
        "content": "<p>If we do the <code>LinearOrder.descend</code> way, I think what you can do is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"bp\">.</span><span class=\"n\">descendLE</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.....</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"c1\">--define some good API</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"bp\">.</span><span class=\"n\">descendLE_apply_apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">...</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"bp\">.</span><span class=\"n\">descendLE</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">iff</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"bp\">...</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"bp\">.</span><span class=\"n\">descend</span><span class=\"o\">(</span><span class=\"bp\">...</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">le</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"bp\">.</span><span class=\"n\">descendLE</span>\n<span class=\"w\">  </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>And then on the use site, you use <code>LinearOrder.descendLE_apply_apply</code> and freinds to rewrite it.</p>\n<p>I think this is how <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Basic.html#LinearOrder.lift'\">LinearOrder.lift'</a> is supposed to be used, except that its definition is pretty simple so it doesn't need to be separately defined</p>",
        "id": 539911623,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758069255
    },
    {
        "content": "<p>It also has a note at <a href=\"https://github.com/leanprover-community/mathlib4/blob/540f08201fa427d86387cfabf20e7090e1db965e/Mathlib/Algebra/HierarchyDesign.lean#L188-L203\">https://github.com/leanprover-community/mathlib4/blob/540f08201fa427d86387cfabf20e7090e1db965e/Mathlib/Algebra/HierarchyDesign.lean#L188-L203</a></p>",
        "id": 539911701,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758069353
    },
    {
        "content": "<p>This doesn't really gain us much if I use <code>Quotient</code>, because in either case I need to use the hypothesis that equivalence classes are order connected to define the ordering computably</p>",
        "id": 539912180,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758069863
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873350\">Weiyi Wang</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539911623\">said</a>:</p>\n<blockquote>\n<p>I think this is how <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Basic.html#LinearOrder.lift'\">LinearOrder.lift'</a> is supposed to be used,</p>\n</blockquote>\n<p>Generally speaking I would claim that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearOrder.lift%27#doc\">docs#LinearOrder.lift'</a> is not supported to be used (at least, not in any definitions)</p>",
        "id": 539912297,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758069977
    },
    {
        "content": "<p>Elsewhere instead of using <code>[SomeTypeclass (s : Setoid X)]</code> we use <code>class SomeSetoid extends Setoid</code>, eg <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Con#doc\">docs#Con</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RingCon#doc\">docs#RingCon</a></p>",
        "id": 539912356,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758070042
    },
    {
        "content": "<p>I think my design questions are two: </p>\n<ul>\n<li>is it fine to make this ad-hoc <code>LinearOrderedQuotient</code> abbrev? </li>\n<li>is it fine to register this as a <code>LinearOrder (Quotient s)</code> instance? (i.e. is it safe to assume this won't cause diamonds?)</li>\n</ul>",
        "id": 539912357,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758070042
    },
    {
        "content": "<p>Does this overlap with <a href=\"https://github.com/leanprover-community/mathlib4/pull/26836\">#26836</a> ?</p>",
        "id": 539912457,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758070145
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539912356\">said</a>:</p>\n<blockquote>\n<p>Elsewhere instead of using <code>[SomeTypeclass (s : Setoid X)]</code> we use <code>class SomeSetoid extends Setoid</code>, eg <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Con#doc\">docs#Con</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RingCon#doc\">docs#RingCon</a></p>\n</blockquote>\n<p>What about making a <code>LinearOrderedSetoid</code> typeclass then, with the assumption that all preimages are order connected, and building a <code>LinearOrder</code> from that assumption?</p>",
        "id": 539912468,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758070168
    },
    {
        "content": "<p>Is <code>LatticeCon</code> equivalent?</p>",
        "id": 539912522,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758070226
    },
    {
        "content": "<p>no</p>",
        "id": 539912545,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070251
    },
    {
        "content": "<p>in fact, on a linear order <code>LatticeCon</code> is trivial (satisfied by all setoids)</p>",
        "id": 539912565,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070279
    },
    {
        "content": "<p>this follows pretty easily from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=min_cases#doc\">docs#min_cases</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=max_cases#doc\">docs#max_cases</a></p>",
        "id": 539912643,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070358
    },
    {
        "content": "<p>actually I should probably check</p>",
        "id": 539912689,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070411
    },
    {
        "content": "<p>I think that might be not true</p>",
        "id": 539912693,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070418
    },
    {
        "content": "<p>Maybe I should ask a different question; does a <code>c : LinearOrderedCon</code> on a lattice permit a <code>Lattice (Quotient c)</code> instance?</p>",
        "id": 539912701,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758070424
    },
    {
        "content": "<p>Does <code>r w x ‚Üí r y z ‚Üí r w z</code>? I don't think that's true</p>",
        "id": 539912707,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758070430
    },
    {
        "content": "<p>it's not true</p>",
        "id": 539912737,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070470
    },
    {
        "content": "<p>sorry for lying everyone</p>",
        "id": 539912740,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070473
    },
    {
        "content": "<p>the condition for it to be true seems to be that the equivalence classes are <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=OrdConnected#doc\">docs#OrdConnected</a> which is what <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> said</p>",
        "id": 539912884,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070618
    },
    {
        "content": "<p>Yes, I think that if the equivalence classes in a linear order are <code>OrdConnected</code> then you do in fact have a <code>LatticeCon</code></p>",
        "id": 539912939,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758070665
    },
    {
        "content": "<p>and the converse too of course</p>",
        "id": 539912974,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070699
    },
    {
        "content": "<p>The converse too?</p>",
        "id": 539912994,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758070714
    },
    {
        "content": "<p>That's surprising to hear</p>",
        "id": 539912999,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758070717
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539912701\">said</a>:</p>\n<blockquote>\n<p>Maybe I should ask a different question; does a <code>c : LinearOrderedCon</code> on a lattice permit a <code>Lattice (Quotient c)</code> instance?</p>\n</blockquote>\n<p>Isn't the <code>LatticeCon</code> condition precisely what you need for this?</p>",
        "id": 539913102,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758070814
    },
    {
        "content": "<p>Sure, really I'm just asking if one of these definitions suffices for both use cases, and Aaron tricked me into thinking I had it the wrong way around</p>",
        "id": 539913153,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758070871
    },
    {
        "content": "<p>If they're equivalent then <code>LatticeCon</code> is the right definition and yours can be a helper constructor</p>",
        "id": 539913169,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758070887
    },
    {
        "content": "<p>if you're not <code>OrdConnected</code> then there's <code>x &lt; y &lt; z</code> with <code>r x z</code> but <code>¬¨r y z</code> so we have that <code>r x z</code> and <code>r y y</code> but <code>¬¨r (max x y) (max z y)</code></p>",
        "id": 539913207,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070924
    },
    {
        "content": "<p>I hope that's not a lie</p>",
        "id": 539913221,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758070940
    },
    {
        "content": "<p>That seems correct</p>",
        "id": 539913269,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758070974
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539913153\">said</a>:</p>\n<blockquote>\n<p>Sure, really I'm just asking if one of these definitions suffices for both use cases, and Aaron tricked me into thinking I had it the wrong way around</p>\n</blockquote>\n<p>you believed me</p>",
        "id": 539914354,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758072046
    },
    {
        "content": "<p>Just asked on the <code>LatticeCon</code> PR to see if there was any progress</p>",
        "id": 539914816,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758072545
    },
    {
        "content": "<p>hopefully the author is still around and willing to continue it</p>",
        "id": 539914826,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758072558
    },
    {
        "content": "<p>Actually that's also the wrong definition</p>",
        "id": 539915043,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758072749
    },
    {
        "content": "<p>what do you mean <span aria-label=\"sob\" class=\"emoji emoji-1f62d\" role=\"img\" title=\"sob\">:sob:</span></p>",
        "id": 539915058,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758072765
    },
    {
        "content": "<p>We want <code>OrderCon</code> with <code>r w x -&gt; r y z -&gt; w ‚â§ y &lt;-&gt; x ‚â§ z</code> or similar</p>",
        "id": 539915156,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758072862
    },
    {
        "content": "<p>You can make the iff an implication as <code>r w x -&gt; x ‚â§ y -&gt; r y z -&gt; w ‚â§ z</code>, but I'm not sure if that's actually more convenient</p>",
        "id": 539915182,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758072893
    },
    {
        "content": "<p>Crucially that's exactly the property needed to lift LE</p>",
        "id": 539915228,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758072935
    },
    {
        "content": "<p>I guess you could require something similar for LT, though maybe that's only relevant for very useless generality</p>",
        "id": 539915311,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758072991
    },
    {
        "content": "<p>Don't lattices have an inherent notion of <code>‚â§</code> though?</p>",
        "id": 539915390,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073073
    },
    {
        "content": "<p>Sure, but my OrderCon works on partial orders that aren't lattices</p>",
        "id": 539915421,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758073100
    },
    {
        "content": "<p>I see</p>",
        "id": 539915451,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073135
    },
    {
        "content": "<p>Then you can prove things like \"order congruences preserve lattice operations\"</p>",
        "id": 539915492,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758073186
    },
    {
        "content": "<p>So, what would my \"setoid where equivalence classes are order connected\" translate into? Just <code>OrderCon</code> on a <code>LinearOrder</code>? Or would you also need <code>LatticeCon</code>?</p>",
        "id": 539915538,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073231
    },
    {
        "content": "<p>The former</p>",
        "id": 539915598,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758073298
    },
    {
        "content": "<p>Are all of these true?</p>\n<ul>\n<li>An <code>OrderCon</code> on a <code>Preorder</code> defines a <code>Preorder</code> instance on the quotient</li>\n<li>the same for partial orders</li>\n<li>the same for linear orders</li>\n</ul>",
        "id": 539915702,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073400
    },
    {
        "content": "<p>...no, I think there's something wrong</p>",
        "id": 539915842,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073513
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539915156\">said</a>:</p>\n<blockquote>\n<p>We want <code>OrderCon</code> with <code>r w x -&gt; r y z -&gt; w ‚â§ y &lt;-&gt; x ‚â§ z</code> or similar</p>\n</blockquote>\n<p>The trivial relation does not satisfy this, but it does satisfy that all equivalence classes are order connected (the only equivalence class is <code>univ</code>)</p>",
        "id": 539915875,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073549
    },
    {
        "content": "<p>that's also why I said the linear order on the quotient was \"semi-obvious\"</p>",
        "id": 539915984,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073668
    },
    {
        "content": "<p>why can't we just use <code>Relation.ReflTransGen fun x y =&gt; x ‚â§ y ‚à®¬†r x y ‚à® r y x</code></p>",
        "id": 539915988,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758073674
    },
    {
        "content": "<p>it requires some subtlety because of this</p>",
        "id": 539915989,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073675
    },
    {
        "content": "<p>as the LE relation I mean</p>",
        "id": 539916006,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758073693
    },
    {
        "content": "<p>I guess it's already refl so only the trans gen</p>",
        "id": 539916054,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758073723
    },
    {
        "content": "<p>and you also don't need <code>r y x</code> since it's symmetric</p>",
        "id": 539916083,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758073739
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539915988\">said</a>:</p>\n<blockquote>\n<p>why can't we just use <code>Relation.ReflTransGen fun x y =&gt; x ‚â§ y ‚à®¬†r x y ‚à® r y x</code></p>\n</blockquote>\n<p><code>r x y ‚à® x ‚â§ y</code> should be enough</p>",
        "id": 539916100,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073757
    },
    {
        "content": "<p>so what I really mean is <code>Relation.TransGen fun x y =&gt; x ‚â§ y ‚à® r x y</code></p>",
        "id": 539916105,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758073766
    },
    {
        "content": "<p>Why do you need the <code>TransGen</code>?</p>",
        "id": 539916123,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073788
    },
    {
        "content": "<p>obviously so you get transitivity</p>",
        "id": 539916154,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758073815
    },
    {
        "content": "<p>I think this is also the quotient object in the category of preorders</p>",
        "id": 539916169,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758073831
    },
    {
        "content": "<p>if the equivalence classes are <code>OrdConnected</code> you already have transitivity</p>",
        "id": 539916170,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073831
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539916170\">said</a>:</p>\n<blockquote>\n<p>if the equivalence classes are <code>OrdConnected</code> you already have transitivity</p>\n</blockquote>\n<p>and if they're not then you need a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Relation.TransGen#doc\">docs#Relation.TransGen</a></p>",
        "id": 539916193,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758073850
    },
    {
        "content": "<p>Ah, I get your point</p>",
        "id": 539916202,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758073858
    },
    {
        "content": "<p>you get for example that this quotient order is the specialization preorder of the quotient topology of the <a href=\"https://ncatlab.org/nlab/show/specialization+topology\">specialization topology</a> (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Topology.upperSet#doc\">docs#Topology.upperSet</a>) of the original order</p>",
        "id": 539916360,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074021
    },
    {
        "content": "<p>probably</p>",
        "id": 539916379,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074038
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539916169\">said</a>:</p>\n<blockquote>\n<p>I think this is also the quotient object in the category of preorders</p>\n</blockquote>\n<p>What does this mean in English</p>",
        "id": 539916482,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758074125
    },
    {
        "content": "<p>What's the relevant universal property?</p>",
        "id": 539916498,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758074142
    },
    {
        "content": "<p>uhhm</p>",
        "id": 539916553,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074194
    },
    {
        "content": "<p>the quotient map is monotone and respects the equivalence classes, and also, any monotone map which also respects the equivalence classes lifts to a monotone map out of the quotient order making the triangle commute</p>",
        "id": 539916616,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074241
    },
    {
        "content": "<p>or \"descends\" if you draw your diagrams right side up</p>",
        "id": 539916682,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074306
    },
    {
        "content": "<p>wait I thought you were learning category theory?</p>",
        "id": 539917093,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074616
    },
    {
        "content": "<p>Yes I didn't say I was any good at it just yet</p>",
        "id": 539917114,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758074627
    },
    {
        "content": "<p>Haven't seen quotient objects yet</p>",
        "id": 539917132,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758074643
    },
    {
        "content": "<p>I still have no idea what a quotient object is supposed to be</p>",
        "id": 539917156,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074658
    },
    {
        "content": "<p>this is just what felt right</p>",
        "id": 539917174,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074671
    },
    {
        "content": "<p>So, new proposal</p>",
        "id": 539917241,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758074719
    },
    {
        "content": "<p>basically I copied it from <a href=\"https://xenaproject.wordpress.com/2025/02/09/what-is-a-quotient/\">https://xenaproject.wordpress.com/2025/02/09/what-is-a-quotient/</a></p>",
        "id": 539917244,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074726
    },
    {
        "content": "<p>What about making a <code>Preorder Œ± ‚Üí Preorder (Quotient s)</code> instance with this definition?</p>",
        "id": 539917340,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758074809
    },
    {
        "content": "<p>this sounds like a thing that can be done</p>",
        "id": 539917372,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074829
    },
    {
        "content": "<p>Or if it's unacceptable to be making instances this generic, perhaps we make a type alias doing something similar?</p>",
        "id": 539917375,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758074831
    },
    {
        "content": "<p>we have lots of other quotient instances what's wrong with this one</p>",
        "id": 539917398,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074854
    },
    {
        "content": "<p>Well I fear it might clash with something else</p>",
        "id": 539917418,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758074873
    },
    {
        "content": "<p>clash with what</p>",
        "id": 539917426,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758074879
    },
    {
        "content": "<p>e.g. we already define an order instance on surreals, and that's also a quotient</p>",
        "id": 539917439,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758074891
    },
    {
        "content": "<p>It can clash with quotient defined with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Antisymmetrization#doc\">docs#Antisymmetrization</a> (?)</p>",
        "id": 539917533,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758074996
    },
    {
        "content": "<p>both of these should be equivalent to what we want to define, mind you</p>",
        "id": 539917577,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758075033
    },
    {
        "content": "<p>but they have way better def-eqs</p>",
        "id": 539917582,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758075037
    },
    {
        "content": "<p>e.g. in the antisymmetrization case, <code>TransGen fun x y ‚Ü¶ r x y ‚à® x ‚â§ y</code> reduces to just <code>x ‚â§ y</code></p>",
        "id": 539917640,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758075101
    },
    {
        "content": "<p>ok so the \"map\" of a <code>Preorder Œ±</code> by a function <code>f : Œ± ‚Üí Œ≤</code> is the <code>Preorder Œ≤</code> where <code>x ‚â§ y ‚Üî ‚àÄ s : Set Œ≤, IsUpperSet (f ‚Åª¬π' s) ‚Üí x ‚àà s ‚Üí y ‚àà s</code></p>",
        "id": 539917647,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075111
    },
    {
        "content": "<p>and the quotient order is the map of the order along the quotient map</p>",
        "id": 539917670,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075131
    },
    {
        "content": "<p>and this map is a left adjoint</p>",
        "id": 539917745,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075211
    },
    {
        "content": "<p>to the comap of an order which for a <code>Preorder Œ≤</code> and <code>f : Œ± ‚Üí Œ≤</code> is the <code>Preorder Œ±</code> where <code>x ‚â§ y ‚Üî f x ‚â§ f y</code></p>",
        "id": 539917823,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075299
    },
    {
        "content": "<p>and the order on preorders is the one induced from the ordering on relations where we identify a preorder with its LE relation</p>",
        "id": 539917894,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075352
    },
    {
        "content": "<p>did I get that right</p>",
        "id": 539917928,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075381
    },
    {
        "content": "<p>it feels correct?</p>",
        "id": 539918041,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758075464
    },
    {
        "content": "<p>I copied over all the stuff from topological spaces which I know very well</p>",
        "id": 539918106,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075511
    },
    {
        "content": "<p>so yet again the question is \"how do we make API out of this\"</p>",
        "id": 539918113,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758075517
    },
    {
        "content": "<p>same as all the other quotient apis I guess</p>",
        "id": 539918445,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075838
    },
    {
        "content": "<p>until that quotientlike thing lands</p>",
        "id": 539918454,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075845
    },
    {
        "content": "<p>It'd be great if this map has a better characterization</p>",
        "id": 539918576,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075987
    },
    {
        "content": "<p>right now I have to do this thing with sets</p>",
        "id": 539918582,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758075998
    },
    {
        "content": "<p>is the transgen thing you said incorrect?</p>",
        "id": 539919147,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758076532
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539916105\">said</a>:</p>\n<blockquote>\n<p>so what I really mean is <code>Relation.TransGen fun x y =&gt; x ‚â§ y ‚à® r x y</code></p>\n</blockquote>\n<p>Something funny about this definition is that it gives a preorder with no further assumptions on <code>‚â§</code></p>",
        "id": 539921103,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758078362
    },
    {
        "content": "<p>is that... intended?</p>",
        "id": 539921134,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758078382
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539916616\">said</a>:</p>\n<blockquote>\n<p>the quotient map is monotone and respects the equivalence classes, and also, any monotone map which also respects the equivalence classes lifts to a monotone map out of the quotient order making the triangle commute</p>\n</blockquote>\n<p>Is this the correct way to write this in Lean?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lift_monotone</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"n\">Œ≤</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Setoid</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">Œ≤</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Œ≤</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Monotone</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚âà</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÇ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Monotone</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 539921743,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758078966
    },
    {
        "content": "<p>because I can prove this is true using the transgen definition</p>",
        "id": 539922484,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758079724
    },
    {
        "content": "<p>Though it's also worth pointing out that in general this quotient doesn't preserve the partial order or linear order properties</p>",
        "id": 539923343,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758080516
    },
    {
        "content": "<p>...are we sure this is a useful definition?</p>",
        "id": 539923370,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758080537
    },
    {
        "content": "<p>Because if the idea is just \"give some undecidable <code>‚â§</code> relation that happens to coincide with what I want in the linear order with order connected equivalence classes case\" we could have just gone with <code>LinearOrder.lift' Quotient.out</code></p>",
        "id": 539923513,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758080636
    },
    {
        "content": "<p>Well after asking around for a bit I think this is the correct quotient, categorically speaking</p>",
        "id": 539926752,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758083392
    },
    {
        "content": "<p>I guess what I really need to do is prove that under these stronger conditions on the equivalence classes, the <code>‚â§</code> relation can be nicely rewritten</p>",
        "id": 539926880,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758083434
    },
    {
        "content": "<p>Just opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/29735\">#29735</a> doing this</p>",
        "id": 539931196,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758086594
    },
    {
        "content": "<p>I don't think we care about the preorder case; if we're taking a Quotient under a transitive relation I think it's reasonable to require any relation we lift to also be transitive</p>",
        "id": 539964074,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758099996
    },
    {
        "content": "<p>I think the typeclass should be the conditions necessary to make <code>mk x ‚â§ mk y</code> defeq to <code>x ‚â§ y</code></p>",
        "id": 539964182,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758100036
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539964182\">said</a>:</p>\n<blockquote>\n<p>I think the typeclass should be the conditions necessary to make <code>mk x ‚â§ mk y</code> defeq to <code>x ‚â§ y</code></p>\n</blockquote>\n<p>Well that doesn't with fur the case we do care about, linear orders with convex equivalence classes</p>",
        "id": 539975757,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758103625
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539923370\">said</a>:</p>\n<blockquote>\n<p>...are we sure this is a useful definition?</p>\n</blockquote>\n<p>I'm sure this is the natural definition</p>",
        "id": 539975915,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758103681
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539921743\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539916616\">said</a>:</p>\n<blockquote>\n<p>the quotient map is monotone and respects the equivalence classes, and also, any monotone map which also respects the equivalence classes lifts to a monotone map out of the quotient order making the triangle commute</p>\n</blockquote>\n<p>Is this the correct way to write this in Lean?</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lift_monotone</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"n\">Œ≤</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Setoid</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">Œ≤</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Œ≤</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Monotone</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚âà</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÇ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Monotone</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>yes that looks good but don't forget to prove the quotient mk map is monotone too</p>",
        "id": 539978291,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758104536
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539922484\">said</a>:</p>\n<blockquote>\n<p>because I can prove this is true using the transgen definition</p>\n</blockquote>\n<p>yes that sounds correct</p>",
        "id": 539978348,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758104553
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539923513\">said</a>:</p>\n<blockquote>\n<p>Because if the idea is just \"give some undecidable <code>‚â§</code> relation that happens to coincide with what I want in the linear order with order connected equivalence classes case\" we could have just gone with <code>LinearOrder.lift' Quotient.out</code></p>\n</blockquote>\n<p>but that doesn't satisfy that amazing quotient property (the quotient mk map isn't monotone)</p>",
        "id": 539978441,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758104580
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539923370\">said</a>:</p>\n<blockquote>\n<p>...are we sure this is a useful definition?</p>\n</blockquote>\n<p>it's the correct definition, I'm sure someone will find it useful eventually</p>",
        "id": 539978742,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758104685
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539921103\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539916105\">said</a>:</p>\n<blockquote>\n<p>so what I really mean is <code>Relation.TransGen fun x y =&gt; x ‚â§ y ‚à® r x y</code></p>\n</blockquote>\n<p>Something funny about this definition is that it gives a preorder with no further assumptions on <code>‚â§</code></p>\n</blockquote>\n<p>yeah this actually gives the quotient order on the preorder generated by the LE relation, since the preorders are a reflective subcategory of the relations</p>",
        "id": 539979006,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758104792
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539919147\">said</a>:</p>\n<blockquote>\n<p>is the transgen thing you said incorrect?</p>\n</blockquote>\n<p>it's <em>equivalent</em> it's an explicit formula but apparently people don't like formulas and defining it with the map lets you map along functions which aren't <code>Quotient.mk</code></p>",
        "id": 539979138,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758104847
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539975757\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539964182\">said</a>:</p>\n<blockquote>\n<p>I think the typeclass should be the conditions necessary to make <code>mk x ‚â§ mk y</code> defeq to <code>x ‚â§ y</code></p>\n</blockquote>\n<p>Well that doesn't with fur the case we do care about, linear orders with convex equivalence classes</p>\n</blockquote>\n<p>how does that not work?</p>",
        "id": 539980733,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758105429
    },
    {
        "content": "<p>If x and y are different but in the same equivalence class then mk x = mk but clearly x &lt; y or y &lt; x</p>",
        "id": 539980979,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758105514
    },
    {
        "content": "<p>oh, right...</p>",
        "id": 539981790,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758105804
    },
    {
        "content": "<p>Why does that impact <code>le</code>? Isn't that only about <code>lt</code>?</p>",
        "id": 539985571,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758107069
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> let's say you make [0,1] into one point, then mk 0 = mk 1, which also means mk 1 &lt;= mk 0, but 1 &lt;= 0 is false</p>",
        "id": 539985833,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758107160
    },
    {
        "content": "<p>&lt; also has the same problem, 0 &lt; 1 is true, but mk 0 &lt; mk 1 is false</p>",
        "id": 539985985,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758107215
    },
    {
        "content": "<p>There's another definition, which is \"the finest preorder meaning the quotient map monotone\"</p>",
        "id": 539986071,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758107245
    },
    {
        "content": "<p>There's a lot of ways to make the same thing</p>",
        "id": 539986112,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758107260
    },
    {
        "content": "<p>Btw, once you've defined those mapping instances, you can use them to golf the ones on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Antisymmetrization#doc\">docs#Antisymmetrization</a></p>",
        "id": 540027862,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1758118727
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Ya√´l Dillies</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/540027862\">said</a>:</p>\n<blockquote>\n<p>Btw, once you've defined those mapping instances, you can use them to golf the ones on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Antisymmetrization#doc\">docs#Antisymmetrization</a></p>\n</blockquote>\n<p>I don't think I can, because <code>Antisymmetrization</code> is defined in terms of an unbundled relation rather than a preordered type</p>",
        "id": 540044642,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758122691
    },
    {
        "content": "<p>I remember Antisymmetrization is somewhat inconsistent in API, where the basic definition uses unbundled, but a lot of lemmas require bundled</p>",
        "id": 540058839,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758126790
    },
    {
        "content": "<p>You definitely can. Look at the partial order instance</p>",
        "id": 540059214,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1758126946
    },
    {
        "content": "<p>There's also the separate problem that we'd get much worse def-eqs using the new \"preorder on quotients\" instance</p>",
        "id": 540059823,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758127189
    },
    {
        "content": "<p>in the special case of the antisymmetrization, ‚â§ directly lifts to the quotient</p>",
        "id": 540059876,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758127206
    },
    {
        "content": "<p>Well, independently of any future golfs and improvements, I'd like to know if the design I used in <a href=\"https://github.com/leanprover-community/mathlib4/pull/29735\">#29735</a> makes sense, i.e. </p>\n<ul>\n<li>should we have such a general instance <code>Preorder (Quotient s)</code>?</li>\n<li>is the weird typeclass assumption <code>‚àÄ x, OrdConnected (mk ‚Åª¬π' {x})</code> ok to have?</li>\n</ul>\n<p>I'd like to make use of the <code>LinearOrder</code> typeclass on a subsequent PR, so I think these are important questions to answer before any further review</p>",
        "id": 540081663,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758134920
    },
    {
        "content": "<p>Would this surprise users by giving them unexpected order on Quotient? Should it be a scoped instance?</p>",
        "id": 540083954,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758135750
    },
    {
        "content": "<p>do you have another better order on <code>Quotient</code></p>",
        "id": 540084006,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758135769
    },
    {
        "content": "<p>for specific <code>Quotient</code>s such as the antisymmetrization, we do</p>",
        "id": 540084064,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758135790
    },
    {
        "content": "<p>well <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Antisymmetrization#doc\">docs#Antisymmetrization</a> is a <code>def</code> not an <code>abbrev</code> so we can override it with our own implementation</p>",
        "id": 540084210,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758135835
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/540084006\">said</a>:</p>\n<blockquote>\n<p>do you have another better order on <code>Quotient</code></p>\n</blockquote>\n<p>for example, if one defines Rat as a Quotient of integer pairs, they don't want the order from the product order</p>",
        "id": 540084294,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758135860
    },
    {
        "content": "<p>I think it makes sense to make this a scoped instance, just in case</p>",
        "id": 540084436,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758135891
    },
    {
        "content": "<p>what would the scope be? <code>Quotient</code>?</p>",
        "id": 540084468,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758135897
    },
    {
        "content": "<p>well if one defines <code>Rat</code> as a Quotient of integer pairs they also don't want the topology from the product topology</p>",
        "id": 540084492,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758135905
    },
    {
        "content": "<p>but topology is an instance</p>",
        "id": 540084532,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758135914
    },
    {
        "content": "<p>Right, so I don't have strong opinion on this. Just mention it in case someone thinks it is a problem</p>",
        "id": 540084785,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758136005
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/540084532\">said</a>:</p>\n<blockquote>\n<p>but topology is an instance</p>\n</blockquote>\n<p>Is there a <code>TopologicalSpace (Quotient s)</code> instance in Mathlib?</p>",
        "id": 540085449,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758136222
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> |- TopologicalSpace (Quotient _)</p>",
        "id": 540085634,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758136270
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Constructions.html#instTopologicalSpaceQuotient\">instTopologicalSpaceQuotient</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/DiscreteQuotient.html#DiscreteQuotient.instTopologicalSpaceQuotient\">DiscreteQuotient.instTopologicalSpaceQuotient</a></p>",
        "id": 540085638,
        "sender_full_name": "loogle",
        "timestamp": 1758136271
    },
    {
        "content": "<p>looks like there's actually two</p>",
        "id": 540085769,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758136318
    },
    {
        "content": "<p>What order does this induce on ZMod n for positive n, if it was implemented via a quotient?</p>",
        "id": 540107993,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1758145925
    },
    {
        "content": "<p>probably the order where everything is &lt;= everything</p>",
        "id": 540108116,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758145994
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308899\">Yakov Pechersky</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/540107993\">said</a>:</p>\n<blockquote>\n<p>What order does this induce on ZMod n for positive n, if it was implemented via a quotient?</p>\n</blockquote>\n<p>the trivial order whose <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Antisymmetrization#doc\">docs#Antisymmetrization</a> is a singleton</p>",
        "id": 540108980,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758146565
    },
    {
        "content": "<p>Then I don't think a trivial order is worth setting on types globally</p>",
        "id": 540109730,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1758147016
    },
    {
        "content": "<p>There's not really any other choice</p>",
        "id": 540110198,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758147245
    },
    {
        "content": "<p>and it's not always a trivial order</p>",
        "id": 540110323,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758147320
    },
    {
        "content": "<p>Just we want the quotient map to be monotone and the trivial order is the only one that does that for ZMod</p>",
        "id": 540110644,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758147517
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/540110198\">said</a>:</p>\n<blockquote>\n<p>There's not really any other choice</p>\n</blockquote>\n<p>just don't make it an <code>instance</code></p>",
        "id": 540110777,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758147611
    },
    {
        "content": "<p>why not an instance again?</p>",
        "id": 540111626,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758148083
    },
    {
        "content": "<p>what will it be bad for?</p>",
        "id": 540111672,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758148113
    },
    {
        "content": "<p>we already have the instances for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Prod#doc\">docs#Prod</a> <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Sum#doc\">docs#Sum</a> <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Subtype#doc\">docs#Subtype</a></p>",
        "id": 540111696,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758148128
    },
    {
        "content": "<p>what's the argument for why this is bad as an instance</p>",
        "id": 540111869,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758148231
    },
    {
        "content": "<p>I just don't think (yet) that it's canonical enough, the one one Prod is already a problem, the fact that you need <code>Lex</code> as a type synonym shows that it's not canonical</p>",
        "id": 540111899,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758148257
    },
    {
        "content": "<p>was the universal property not enough</p>",
        "id": 540111985,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758148292
    },
    {
        "content": "<p>how about this</p>",
        "id": 540112011,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758148307
    },
    {
        "content": "<p>it lets you glue together hasse diagrams</p>",
        "id": 540112017,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758148313
    },
    {
        "content": "<p>for example if I have <code>Œ£ _ : Nat, Fin 2</code> and I quotient it by the relation generated by <code>‚ü®n, 1‚ü© ‚âà ‚ü®n + 1, 0‚ü©</code> then the resulting order is order-isomorphic to <code>Nat</code></p>",
        "id": 540112226,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758148439
    },
    {
        "content": "<p>i don't know enough to comment</p>",
        "id": 540112571,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758148638
    },
    {
        "content": "<p>I think it would be surprising if the order on ZMod suddenly changed from the order one gets from Fin or Int, which is the one from Nat, to one that has terms indistinguishable by the order.</p>",
        "id": 540116626,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1758151119
    },
    {
        "content": "<p>but ZMod is not (implemented as) a quotient</p>",
        "id": 540116652,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758151138
    },
    {
        "content": "<p>well it will not, since <code>ZMod</code> isn't defined in terms of <code>Quotient</code></p>",
        "id": 540116667,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758151147
    },
    {
        "content": "<p>Is it correct to say that a global instance will only impact direct use of <code>Quotient</code> and those defined with <code>abbrev ... = Quotient...</code>, but will not impact those with <code>def ... = Quotient...</code>?</p>",
        "id": 540119924,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758153300
    },
    {
        "content": "<p>correct</p>",
        "id": 540120019,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758153367
    },
    {
        "content": "<p>Yeah, then I think I am fine with it, as I don't expect mathlib to have many abbrevs. We might want to check them individually to ensure none of them accidentally gets a weird order, if there is any</p>",
        "id": 540120137,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758153447
    },
    {
        "content": "<p>well if we aren't using it for the order who cares</p>",
        "id": 540120223,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758153504
    },
    {
        "content": "<p>and if we are using it for the order it probably shouldn't be <code>abbrev</code></p>",
        "id": 540120245,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758153518
    },
    {
        "content": "<p>I have no problem with making the instance scoped. There's a bit of def-eq finangling I need to do to get to use it in my application no matter what.</p>",
        "id": 540126502,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758157612
    },
    {
        "content": "<p>a bit curious what is the application</p>",
        "id": 540126766,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758157780
    },
    {
        "content": "<p>It's something I was discussing on another thread</p>",
        "id": 540126795,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758157797
    },
    {
        "content": "<p>Generalizing the standard part function from hyperreals to a non-archimedean field</p>",
        "id": 540126828,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758157815
    },
    {
        "content": "<p>That requires me to give a linear order instance on the residue field of the subring of finite elements (i.e. non-negative archimedean class)</p>",
        "id": 540126867,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758157843
    },
    {
        "content": "<p>It all comes back to the surreal numbers lol</p>",
        "id": 540126915,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758157866
    },
    {
        "content": "<p>oh I remember now</p>",
        "id": 540126933,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758157878
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/540126502\">said</a>:</p>\n<blockquote>\n<p>I have no problem with making the instance scoped. There's a bit of def-eq finangling I need to do to get to use it in my application no matter what.</p>\n</blockquote>\n<p>do  you care about the defeqs?</p>",
        "id": 540127072,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758157973
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/540127072\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/540126502\">said</a>:</p>\n<blockquote>\n<p>I have no problem with making the instance scoped. There's a bit of def-eq finangling I need to do to get to use it in my application no matter what.</p>\n</blockquote>\n<p>do  you care about the defeqs?</p>\n</blockquote>\n<p>I really just need a linear order instance that's equivalent to <code>x ‚â§ y or mk x = mk y</code> in my specific case</p>",
        "id": 540127496,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758158275
    },
    {
        "content": "<p>by def-eq finangling I mean \"I had to write the instances explicitly\"<br>\n<a href=\"/user_uploads/3121/f42pQCnP1-m77UQo7_kMum8H/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/f42pQCnP1-m77UQo7_kMum8H/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"811x250\" src=\"/user_uploads/thumbnail/3121/f42pQCnP1-m77UQo7_kMum8H/image.png/840x560.webp\"></a></div>",
        "id": 540128211,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758158761
    },
    {
        "content": "<p>uhm sure</p>",
        "id": 540128528,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758158989
    },
    {
        "content": "<p>Am I correct in saying <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearOrderedField.inducedOrderRingHom_toFun#doc\">docs#LinearOrderedField.inducedOrderRingHom_toFun</a> is a bad simp lemma? You lose the <code>RingHom</code> structure for no reason</p>",
        "id": 540134297,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758162737
    },
    {
        "content": "<p>That seams to be a common pattern for a lot of <code>@[simps]</code>-generated lemma. Whenever a bundled function is applied to an element, it is simped to the bare function</p>",
        "id": 540134814,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758163063
    },
    {
        "content": "<p>Well, the difference here is that this embedding has no interesting inner structure</p>",
        "id": 540134854,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758163095
    },
    {
        "content": "<p>Yeah that sounds like a good argument</p>",
        "id": 540134900,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758163127
    },
    {
        "content": "<p>you're just turning some essentially arbitrary order ring hom into an essentially arbitrary add monoid hom</p>",
        "id": 540134908,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758163132
    },
    {
        "content": "<p>i.e. you're losing structure and gaining nothing</p>",
        "id": 540134912,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758163135
    },
    {
        "content": "<p>In fact, I'm not sure why we have both the add-hom and order-ring-hom version when both take in the same hypotheses</p>",
        "id": 540135003,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758163191
    },
    {
        "content": "<p>if you can use the former, you can use the latter</p>",
        "id": 540135013,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758163198
    },
    {
        "content": "<p>Would you support it if I replace the entire Mathlib.Algebra.Order.CompleteField with <a href=\"https://github.com/leanprover-community/mathlib4/pull/27566\">#27566</a> (after replacing \\R with ConditionallyCompleteLinearOrderedField in my code)?<br>\nThen you get a AddMonoidHom and a RingHom that actually require different things</p>",
        "id": 540135304,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758163411
    },
    {
        "content": "<p>Yes, I think that would be a good change.</p>",
        "id": 540135368,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758163461
    },
    {
        "content": "<p>Well, I haven't taken a look at your PR, but the idea of having different hypotheses for both of these maps makes sense to me</p>",
        "id": 540135402,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1758163494
    },
    {
        "content": "<p>Yeah, addMonoidHom is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Archimedean.embedReal#doc\">docs#Archimedean.embedReal</a>, which downgrades the domain to an <code>AddCommGroup</code></p>",
        "id": 540135563,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758163592
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hern√°ndez</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Quotient.20of.20linear.20order.20is.20linear.20order/near/539908978\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"455791\">Yuyang Zhao</span> What would be needed to push these PRs through?</p>\n</blockquote>\n<p>Still waiting for the discussion <a href=\"#narrow/channel/287929-mathlib4/topic/migrate.20to.20.60QuotLike.60.20API\">here</a>, but nobody has participated in a long time.</p>",
        "id": 545804902,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1760851938
    },
    {
        "content": "<p>Just saw this and wanted to say that I would love to have this quotient of linear orders in mathlib as it's used in things I want to formalize. I don't know if it's helpful, but I normally see an equivalence relation such that all classes are <code>OrdConnected</code> called a convex equivalence relation and the resulting quotient called a condensation.</p>",
        "id": 545849232,
        "sender_full_name": "Eric Paul",
        "timestamp": 1760899341
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"512030\">@Eric Paul</span> my PR exists here: <a href=\"https://github.com/leanprover-community/mathlib4/pull/29735\">#29735</a></p>",
        "id": 545856536,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1760907427
    }
]