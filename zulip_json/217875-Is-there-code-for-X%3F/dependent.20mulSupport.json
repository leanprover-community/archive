[
    {
        "content": "<p>I'm working with a restricted product of groups but the same question would arise for a product of groups <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∏</mo><mi>i</mi></msub><msub><mi>G</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\prod_i G_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0497em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∏</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.162em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">G</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>; I care about the support of an element <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span>, i.e. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mi>i</mi><mo>∈</mo><mi>I</mi><mo>∣</mo><mi>g</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><mo mathvariant=\"normal\">≠</mo><mn>1</mn><mo stretchy=\"false\">}</mo><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">\\{i\\in I\\mid g(i)\\ne1\\}.</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\"></span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">}</span><span class=\"mord\">.</span></span></span></span> I remembered we had <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Function.mulSupport#doc\">docs#Function.mulSupport</a> but it doesn't apply because <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">g</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span> is a dependent function. Do we have dependent mulSupport?</p>",
        "id": 521368087,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748637281
    },
    {
        "content": "<p>I'm pretty sure we don't. There are many <code>Function.foo</code> which do not have a dependent version although it could.</p>",
        "id": 521369911,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1748638203
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> ∀ _, One _</p>",
        "id": 521369934,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1748638220
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Opposites.html#AddOpposite.instOne\">AddOpposite.instOne</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Opposites.html#MulOpposite.instOne\">MulOpposite.instOne</a>, and <a href=\"https://loogle.lean-lang.org/?q=%E2%88%80%20_%2C%20One%20_\">181 more</a></p>",
        "id": 521369936,
        "sender_full_name": "loogle",
        "timestamp": 1748638221
    },
    {
        "content": "<p>This does not yield anything I think.</p>",
        "id": 521369955,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1748638240
    },
    {
        "content": "<p>FWIW I need this to show that a Hecke algebra commutes; I have some restricted product group G and a subgroup U, and I want to prove that some Hecke operators [UgU] and [UhU] commute, but g and h are supported at different places in the product so the decomposition of the double coset into single cosets can also be made with cosets reps supported at different places and these automatically commute, but I had to make a bunch of API for dependent mulsupport first.</p>",
        "id": 521374414,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748640607
    },
    {
        "content": "<p>What breaks if we generalize <code>Function.support</code>?</p>",
        "id": 521375426,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748641197
    },
    {
        "content": "<p>A lot of things probably. Elaboration of <code>Pi.mulSingle</code> is very brittle. See how many <code>Pi.single (M := _)</code> there are in the library</p>",
        "id": 521376112,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1748641565
    },
    {
        "content": "<p>That's quite different though, as the argument becomes dependent not the return type</p>",
        "id": 521378289,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748642859
    }
]