[
    {
        "content": "<p>Do we have these?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">IsCyclotomicExtension</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsCyclotomicExtension</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">isAlgebraic</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">IsAlgebraic</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">isSeparable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hS</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">IsSeparable</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">IsCyclotomicExtension</span>\n</code></pre></div>",
        "id": 525046195,
        "sender_full_name": "Jz Pan",
        "timestamp": 1750427402
    },
    {
        "content": "<p>I think we only have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsCyclotomicExtension.isGalois#doc\">docs#IsCyclotomicExtension.isGalois</a> for singletons</p>",
        "id": 525046863,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1750427630
    },
    {
        "content": "<p>And for the former I think we only have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsCyclotomicExtension.integral#doc\">docs#IsCyclotomicExtension.integral</a> but it is only for finite sets</p>",
        "id": 525047233,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1750427761
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/IsCyclotomicExtension.2EisAlgebraic.2FisSeparable/near/525046863\">said</a>:</p>\n<blockquote>\n<p>I think we only have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsCyclotomicExtension.isGalois#doc\">docs#IsCyclotomicExtension.isGalois</a> for singletons</p>\n</blockquote>\n<p>I think it should work for any set <code>S</code>, and <code>NeZero</code> is superfluous, since <code>IsCyclotomicExtension {n} K L</code> should just mean that <code>L/K</code> is trivial.</p>\n<p>But the proof seems not trivial...</p>\n<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/IsCyclotomicExtension.2EisAlgebraic.2FisSeparable/near/525047233\">said</a>:</p>\n<blockquote>\n<p>And for the former I think we only have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsCyclotomicExtension.integral#doc\">docs#IsCyclotomicExtension.integral</a> but it is only for finite sets</p>\n</blockquote>\n<p>This is why I restricted to fields and use algebraic instead of integral.</p>\n<p>Nevertheless, I have just constructed <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo stretchy=\"false\">(</mo><msub><mi>μ</mi><msup><mi>p</mi><mi mathvariant=\"normal\">∞</mi></msup></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">K(\\mu_{p^\\infty})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0361em;vertical-align:-0.2861em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2655em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5935em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">∞</span></span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> and proved that it <code>IsCyclotomicExtension (Set.range (p ^ ·))</code> if <code>p</code> is not zero in <code>K</code>. Will be pushed to Iwasawa project.</p>",
        "id": 525048168,
        "sender_full_name": "Jz Pan",
        "timestamp": 1750428071
    },
    {
        "content": "<p>Another interesting thing could be</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FiniteField</span><span class=\"bp\">.</span><span class=\"n\">isCyclotomicExtension_of_isAlgClosure</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsAlgClosure</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCyclotomicExtension</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 525048376,
        "sender_full_name": "Jz Pan",
        "timestamp": 1750428155
    },
    {
        "content": "<p><code>IsAlgClosure K L</code> and <code>IsCyclotomicExtension {n | (n : K) ≠ 0} K L</code> should be equivalent in this case...</p>",
        "id": 525048611,
        "sender_full_name": "Jz Pan",
        "timestamp": 1750428236
    },
    {
        "content": "<p>Ahh, I think it should always be <code>IsSeparable</code> since if <code>n ≠ 0</code> such that <code>(n : A) = 0</code>, there cannot be a primitive <code>n</code>-th root of unit (it cannot be primitive...)</p>",
        "id": 525048991,
        "sender_full_name": "Jz Pan",
        "timestamp": 1750428368
    },
    {
        "content": "<p>Note that various instances of <code>NeZero n</code> have been refactored several times<br>\n Hopefully the definitions are now good, but it's not surprising that some theorems have suboptimal hypothesis.</p>",
        "id": 525100446,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1750451736
    },
    {
        "content": "<p>Anyway I think this is the first nontrivial example of an infinite cyclotomic extension!</p>",
        "id": 525100497,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1750451763
    },
    {
        "content": "<p>OK the proof is online <a href=\"https://github.com/acmepjz/lean-iwasawa/blob/b993d3c2f5c583ae5af1744bfe4ddbdf3a040f6e/Iwasawalib/FieldTheory/ZpExtension/Cyclotomic.lean#L120\">https://github.com/acmepjz/lean-iwasawa/blob/b993d3c2f5c583ae5af1744bfe4ddbdf3a040f6e/Iwasawalib/FieldTheory/ZpExtension/Cyclotomic.lean#L120</a> now need to port it to mathlib...</p>",
        "id": 525147420,
        "sender_full_name": "Jz Pan",
        "timestamp": 1750498476
    },
    {
        "content": "<p>PR created as <a href=\"https://github.com/leanprover-community/mathlib4/pull/26266\">#26266</a>. Comments welcome.</p>",
        "id": 525204700,
        "sender_full_name": "Jz Pan",
        "timestamp": 1750586288
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"366779\">Jz Pan</span> has marked this topic as resolved.</p>",
        "id": 525364857,
        "sender_full_name": "Notification Bot",
        "timestamp": 1750694671
    }
]