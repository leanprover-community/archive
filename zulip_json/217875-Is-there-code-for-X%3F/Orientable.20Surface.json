[
    {
        "content": "<p>Do we have orientable surfaces? I want to talk about how combinatorial maps can represent an embedding of a <code>SimpleGraph</code> into one.</p>",
        "id": 465303463,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724723712
    },
    {
        "content": "<p>No we don't, as far as I know.</p>",
        "id": 465307877,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1724726048
    },
    {
        "content": "<p>Would be a nice project to set up the basic theory!</p>",
        "id": 465307914,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1724726066
    },
    {
        "content": "<p>By the way, it should be orientable <em>manifolds</em>, not orientable <em>surfaces</em>; it should be implemented by building the \"groupoid of orientation-preserving smooth maps\", by analogy with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=contDiffGroupoid#doc\">docs#contDiffGroupoid</a>.</p>",
        "id": 465308997,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1724726619
    },
    {
        "content": "<p>Is it sensible to define orientation-preserving smooth maps as those with a strictly positive Jacobian determinant? Do we already have those or the Jacobian determinant? I'm not familiar with this part of mathlib yet but I would love to attempt this.</p>",
        "id": 465312435,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724728358
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"580947\">Rida Hamadani</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Orientable.20Surface/near/465312435\">said</a>:</p>\n<blockquote>\n<p>Is it sensible to define orientation-preserving smooth maps as those with a strictly positive Jacobian determinant?</p>\n</blockquote>\n<p>Yes.</p>\n<blockquote>\n<p>Do we already have those or the Jacobian determinant?</p>\n</blockquote>\n<p>You would take <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.det#doc\">docs#LinearMap.det</a> of the <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=fderiv#doc\">docs#fderiv</a>.</p>",
        "id": 465315218,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1724729692
    },
    {
        "content": "<p>I was (and am) excited about <a href=\"https://github.com/leanprover-community/mathlib4/pull/16239\">#16239</a> and left a review. Most importantly, I think you can simplify your definition a bit.</p>",
        "id": 466023274,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1724940337
    },
    {
        "content": "<p>Thank you, I appreciate your review and will work on adding the requested <code>lemma</code>s.<br>\nI have explained why I added the differentiability condition to the definition instead of creating a <code>lemma</code> that we can use to deduce differentiability. I can add such a <code>lemma</code> if we are okay with the <code>FiniteDimensional.finrank ‚Ñù H ‚â† 0</code> condition (or another condition that does the job).</p>",
        "id": 466075165,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724952872
    },
    {
        "content": "<p>Do you think it is a good idea to change the name from <code>OrientableManifold</code> to <code>OrientableSmoothManifold</code>?</p>",
        "id": 466079248,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724954150
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"580947\">Rida Hamadani</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Orientable.20Surface/near/466079248\">said</a>:</p>\n<blockquote>\n<p>Do you think it is a good idea to change the name from <code>OrientableManifold</code> to <code>OrientableSmoothManifold</code>?</p>\n</blockquote>\n<p>Good point: the current name should perhaps change... but I would like an <code>OrientableSmoothManifold</code> to be actually a smooth manifold, i.e. with its structure groupoid being the intersection of <code>contDiffGroupoid</code> and <code>orientableGroupoid</code>.<br>\nPerhaps the best solution is to keep the current name, but put a TODO that this definition assumes differentiability, so needs to change for orientable topological manifolds?</p>",
        "id": 466125304,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1724972400
    },
    {
        "content": "<p>What do you think of simplifying the definition of orientation-preserving maps for the cost of the <code>FiniteDimensional.finrank ‚Ñù H ‚â† 0</code> condition?</p>",
        "id": 466125563,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724972509
    },
    {
        "content": "<p>Let me think about this more: first off, the current definition also requires <em>finite-dimensionality</em>. (In infinite dimensions, the determinant takes junk value 1; this is not what we want.) Can you add that assumption, please?</p>",
        "id": 466126235,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1724972890
    },
    {
        "content": "<p>Secondly: you raise a valid point --- what about 0-manifolds? A single point has two orientations; an orientation is just a map to the set <span class=\"tex-error\">$${\\pm 1\\}$$</span>. <a href=\"http://www.map.mpim-bonn.mpg.de/Orientation_of_manifolds#Zero_dimensional_manifolds\">Source</a>; see <a href=\"https://mathoverflow.net/q/47596\">here</a> if you're curious about uniform definitions.)</p>\n<p>In particular, every 0-manifold is orientable, which matches this definition.</p>",
        "id": 466126533,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1724973086
    },
    {
        "content": "<p>I would be fine with a TODO to extend this to 0-manifolds, and adding a hypothesis of positive rank for now.</p>",
        "id": 466126564,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1724973117
    },
    {
        "content": "<p>Sure! Maybe this is a math question more than a lean question, but does the concept of orientability exist for the infinite dimensional case?</p>",
        "id": 466126753,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724973211
    },
    {
        "content": "<p>Zero dim: are you sure about this? The determinant of the 0x0 matrix is 1=0^n with n=0.</p>",
        "id": 466127307,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1724973570
    },
    {
        "content": "<p>Yes, you're right. Time for me to go to sleep!</p>",
        "id": 466127837,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1724973814
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"580947\">Rida Hamadani</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Orientable.20Surface/near/466126753\">said</a>:</p>\n<blockquote>\n<p>Sure! Maybe this is a math question more than a lean question, but does the concept of orientability exist for the infinite dimensional case?</p>\n</blockquote>\n<p>Quick answer: <a href=\"http://www.map.mpim-bonn.mpg.de/Orientation_of_Fredholm_maps_between_Hilbert_manifolds\">it's complicated</a>. It can be done for \"Fredholm manifolds\" (Banach manifolds whose transitions maps are Fredholm operators); the better concept is to define \"is this Fredholm map orientation-preserving\". This requires a lot of new machinery --- mathlib doesn't even have Fredholm operators yet.</p>",
        "id": 466128171,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1724973986
    },
    {
        "content": "<p>(Those wouldn't be hard, and could in fact be a nice project. It's on my long list of things I'd like to do, but as usual I don't mind if somebody else does it or wants to join forces.)</p>",
        "id": 466128210,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1724974021
    },
    {
        "content": "<p>Make sure you include the p-adic case :-)</p>",
        "id": 466128357,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1724974107
    },
    {
        "content": "<p>That's neat, definitely outside the scope of this PR but might work on later!</p>",
        "id": 466128917,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1724974462
    },
    {
        "content": "<p>GL_0 being trivial doesn't really tell us anything about orientations of a point, except that GL_0 doesn't act transitively on them.</p>",
        "id": 466149367,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1724987587
    },
    {
        "content": "<p>Sure: just to clarify, there are two related concepts here.<br>\n(1) define oriented manifolds (a manifold which has an atlas whose transition functions are all orientation-preserving): every zero-manifold is oriented<br>\n(2) define orientations of a manifold; a manifold is oriented if it admits a choice of orientations</p>\n<p>This PR only does (1), which is also easier.<br>\nSaying \"this diffeomorphism <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mspace></mspace><mspace width=\"0.1111em\"/><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext>‚Äâ‚Å£</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"/><mi>M</mi><mo>‚Üí</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">f\\colon M\\to N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span> is orientation-reversing\" requires item (2), as this depends on a choice of orientations of <code>M</code> and <code>N</code>. (Item (1) <em>does</em> allow saying \"this map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mspace></mspace><mspace width=\"0.1111em\"/><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext>‚Äâ‚Å£</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"/><mi>M</mi><mo>‚Üí</mo><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">f\\colon M\\to M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> is orientation-preserving\" in non-zero dimension.)<br>\nMaking a meaningful statement about 0-dimensional manifolds also requires (2).</p>",
        "id": 466189617,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725005070
    },
    {
        "content": "<p>So, while this PR does not do everything that is interesting, I see it as a useful step.</p>",
        "id": 466189635,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725005077
    },
    {
        "content": "<p>Isn't (1) about \"orientable\", without actually fixing a distinguished orientation?</p>",
        "id": 466189929,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725005178
    },
    {
        "content": "<p>I would personally reserve \"oriented\" for once you've made a choice...</p>",
        "id": 466190016,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725005210
    },
    {
        "content": "<p>Given two pregroupoids (or groupoids) constructed from properties x and y respectively, is there an easy way in mathlib to construct a groupoid from the property (x and y) without having to duplicate the code?<br>\nThis arose while constructing orientable smooth manifolds, and <a href=\"https://github.com/leanprover-community/mathlib4/pull/16239#discussion_r1744351795\">this</a> comment by <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> made me wonder about this.</p>",
        "id": 468015174,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1725583156
    },
    {
        "content": "<p>There's the infimum of groupoids, typed as <code>‚äì</code>¬†(typed as <code>\\glb</code>). (I don't remember if the corresponding operation on pregroupoids exists; if needed, it shouldn't be too hard to define.)</p>",
        "id": 468017469,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725583913
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=instInfStructureGroupoid#doc\">docs#instInfStructureGroupoid</a></p>",
        "id": 468017578,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725583949
    },
    {
        "content": "<p>Thanks, that does the job!</p>",
        "id": 468028190,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1725587039
    },
    {
        "content": "<p>I've finished addressing your latest comments to <a href=\"https://github.com/leanprover-community/mathlib4/pull/16239\">#16239</a>. Please feel free to add more comments.<br>\nI'm not sure how common this is in formalization, but I formalized orientable manifolds before knowing what a \"manifold\" is, it is a really interesting experience!<br>\nNow that I know what they are, I can't wait for the differential geometry class I've registered to this semester!</p>",
        "id": 468030019,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1725587582
    },
    {
        "content": "<p>I maintainer merged your PR - so hopefully a maintainer should take a look soon. Thanks a lot for your PR!</p>",
        "id": 468282507,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725653986
    },
    {
        "content": "<p>(I'm working on a PR fixing some of the follow-up TODOs, one of them exposed a gap in mathlib which is waiting on an old PR of mine (<a href=\"https://github.com/leanprover-community/mathlib4/pull/8738\">#8738</a>). Time to look at that again.)</p>",
        "id": 468282625,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725654030
    },
    {
        "content": "<p>I'm glad you found this useful. Enjoy your class! And if you want to formalise more differential geometry, contributions in this area are very welcome. :-)</p>",
        "id": 468282715,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725654077
    },
    {
        "content": "<p>Thank you! <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 468282771,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1725654116
    },
    {
        "content": "<p>Can someone help me understand how to proceed in order to address <span class=\"user-mention\" data-user-id=\"240862\">@Oliver Nash</span>'s last review in <a href=\"https://github.com/leanprover-community/mathlib4/pull/16239\">#16239</a>?<br>\nHow can I generalize to manifolds with boundaries? And according to what space is Icc (0, 1) orientable? (<a href=\"http://(https://github.com/leanprover-community/mathlib4/blob/12972e5e1c216e329d4b99737393123dd01e228e/Mathlib/Geometry/Manifold/Instances/Real.lean#L359)%20are%20similar\">these</a>.</p>",
        "id": 468532862,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1725784769
    },
    {
        "content": "<p>A standard result is \"an orientation of the interior of a manifold induces an orientation of its boundary\" (this may assume a manifold has no corners...). Most likely (I'd want to double-check), this should mean we can define \"M is orientable\" as \"the interior of M is orientable\".</p>\n<p>There's one catch with this definition: while mathlib has a notion of interior and boundary points, mathlib does not have that the interior of a manifold is an open subset (thus a manifold).*</p>\n<p>\\* Adding that is quite a bit away from current mathlib, since it requires e.g. the homology of spheres, which requires e.g. singular homology - that has been done in Lean 3, but is a few thousand lines of code. Porting this would be really useful, but I wouldn't want to hold my breath on it.</p>",
        "id": 468552782,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725793738
    },
    {
        "content": "<p>So, going forward, I tend to suggest only a tweak of orientability should be needed: the transition functions in an orientable atlas should have positive determinant <em>in the interior</em> of $M$.</p>\n<p>(Another option would be to compare the old definition of the analyticGroupoid: that asked for \"analytic on the interior, smooth on the boundary\" --- which is not the mathematical notion we want, but it could show how to work with just a condition on the interior. In intend to look into this soon, but may get drawn away by life events.)</p>",
        "id": 468552804,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725793765
    },
    {
        "content": "<p>I might be able to make time for porting if someone else is going to get it into mathlib</p>",
        "id": 468562689,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1725800281
    },
    {
        "content": "<p>I asked about the latest status of <a href=\"#narrow/stream/287929-mathlib4/topic/Brouwer's.20theorem\">Brouwer's fixed point theorem</a>: IIUC, the code needs to be bumped to the latest mathlib3 version before it can be ported.</p>",
        "id": 468568297,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725802619
    },
    {
        "content": "<p>I would be happy to help, as time permits, getting the homology groups of spheres into mathlib. But I only learned Lean 4, so help with porting would be great.</p>",
        "id": 468568432,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725802660
    },
    {
        "content": "<p>Do you have link for the code you're interested in?</p>",
        "id": 468568905,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1725802822
    },
    {
        "content": "<p>Maybe it's <a href=\"https://github.com/Shamrock-Frost/BrouwerFixedPoint/blob/master/src/brouwer_fixed_point.lean\">https://github.com/Shamrock-Frost/BrouwerFixedPoint/blob/master/src/brouwer_fixed_point.lean</a></p>",
        "id": 468569120,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725802868
    },
    {
        "content": "<p>Or <a href=\"https://github.com/Shamrock-Frost/BrouwerFixedPoint/blob/master/src/homology_of_spheres.lean\">https://github.com/Shamrock-Frost/BrouwerFixedPoint/blob/master/src/homology_of_spheres.lean</a></p>",
        "id": 468569462,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725802949
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Orientable.20Surface/near/468552804\">said</a>:</p>\n<blockquote>\n<p>So, going forward, I tend to suggest only a tweak of orientability should be needed: the transition functions in an orientable atlas should have positive determinant <em>in the interior</em> of $M$.</p>\n<p>(Another option would be to compare the old definition of the analyticGroupoid: that asked for \"analytic on the interior, smooth on the boundary\" --- which is not the mathematical notion we want, but it could show how to work with just a condition on the interior. In intend to look into this soon, but may get drawn away by life events.)</p>\n</blockquote>\n<p>I'm looking into this right now - and I realised the current definition of orientability is not correct: it does not verify what it should. I'll try to write down the right one.</p>",
        "id": 468569702,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725803012
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16553/commits/ab06e0d1c56dd7cec41835b6e0c0c87981607759\">These</a> <a href=\"http://[d577824](https://github.com/leanprover-community/mathlib4/pull/16553/commits/d577824b0fdbf61df5c7d66fd50e1fad113496d0)\">two</a> commits should be the right definition. (The proofs of the pregroupoid property need to be fixed, trying that next.)</p>",
        "id": 468572361,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725803993
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16553/commits/b805cbf75d57307c74b32055adadc46e020718a0\"><code>b805cbf</code></a> fixes half the proofs of the pregroupoid properties. I need to run now... but I am sure this can be fixed.</p>",
        "id": 468578595,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725805739
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"580947\">@Rida Hamadani</span> Does the above help? Would you like to try proving the last sorries? (As I commented on the commit, one sorry might require adding one condition to <code>property</code>. If that works, that wouldn't feel controversial for me.)<br>\nFeel free to cherry-pick any or all of these commits onto your branch or to ask back if you're not sure what that means/prefer me to just push to it directly.</p>",
        "id": 468579929,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725806126
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Orientable.20Surface/near/468579929\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"580947\">Rida Hamadani</span> Does the above help? Would you like to try proving the last sorries? (As I commented on the commit, one sorry might require adding one condition to <code>property</code>. If that works, that wouldn't feel controversial for me.)<br>\nFeel free to cherry-pick any or all of these commits onto your branch or to ask back if you're not sure what that means/prefer me to just push to it directly.</p>\n</blockquote>\n<p>Thank you very much! I actually prefer it if you push directly into my branch because my experience with git has been bad so far, I'm scared I might accidentally ruin my branch.<br>\nI will try to eliminate the remaining <code>sorry</code>'s but I'm busy today, I will get back to this as soon as I am free.</p>",
        "id": 468617532,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1725824350
    },
    {
        "content": "<p>You're welcome. I just pushed to your branch directly.</p>",
        "id": 468715371,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725869995
    },
    {
        "content": "<p>(Waking up, I realised why the second condition of the definition is necessary, and added it as well. I'm now convinced the definition is the right one, but there are some sorries to close.)</p>",
        "id": 468715511,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725870026
    },
    {
        "content": "<p>I recall that Hatcher stated Poincare duality with \"R-orientable\" for a ring R of coefficients. Do we want that?</p>",
        "id": 468952052,
        "sender_full_name": "Yao Liu",
        "timestamp": 1725932091
    },
    {
        "content": "<p>Probably yes, unless you wish to have the Z/2 theory developed independently of the Z theory.</p>",
        "id": 468994129,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1725948902
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16239\">#16239</a> is now sorry-free again! However, I'm not sure how to golf or tidy the proofs more, I would appreciate it if anybody can help with that. If you have golfs in mind, feel free to commit them directly to the branch if you prefer to do that, it will not interfere with my work.</p>",
        "id": 469585920,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1726127236
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"240862\">@Oliver Nash</span> has said:</p>\n<blockquote>\n<p>For the sake of a concrete goal, I'd be much happier merging something that included an instance of orientability for¬†<code>(Icc (0 : ‚Ñù) 1)</code>.</p>\n</blockquote>\n<p>I'm not sure how to even state that instance, can anybody help please?<br>\nThe similar instances <a href=\"https://github.com/leanprover-community/mathlib4/blob/216c754008de909a8ecc89695c745846c9b736a3/Mathlib/Geometry/Manifold/Instances/Real.lean#L359\">here</a> are intimidating, I don't really understand what's going on with the <code>ùì°‚àÇ 1</code>.</p>",
        "id": 469586794,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1726127440
    },
    {
        "content": "<p>I have to say I'm bad at distinguishing \"OrientationPreserving\" and \"OrientationReversing\" <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 469587563,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1726127589
    },
    {
        "content": "<p>I've found myself writing <code>OrientationReserving</code> multiple times, and sometimes that mistake leaked into the PR (and was fixed thankfully by Michael).</p>",
        "id": 469587953,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1726127667
    },
    {
        "content": "<p>I haven't time to look at the new version of the PR now but the following is the <code>sorry</code> I was proposing should be filled:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"n\">Manifold</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Set</span>\n\n<span class=\"c1\">-- Double check:</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">SmoothManifoldWithCorners</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùì°</span><span class=\"bp\">‚àÇ</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Icc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- TODO Make argument order of `M`, `I` agree with `SmoothManifoldWithCorners`</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">OrientableSmoothManifold</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Icc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùì°</span><span class=\"bp\">‚àÇ</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 469600889,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1726130411
    },
    {
        "content": "<p>I see, I will try to prove that, thank you!</p>",
        "id": 469634684,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1726138356
    },
    {
        "content": "<p>Currently I'm trying to prove this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Icc_orientable_manifold</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">OrientableManifold</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùì°</span><span class=\"bp\">‚àÇ</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Icc</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">he‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">he‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">atlas</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mem_singleton_iff</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mem_insert_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">he‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">he‚ÇÇ</span>\n<span class=\"w\">    </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">he‚ÇÅ</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">he‚ÇÇ</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">mem_groupoid_of_pregroupoid</span><span class=\"bp\">.</span><span class=\"n\">mpr</span>\n<span class=\"w\">      </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">symm_trans_mem_orientationPreservingGroupoid</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùì°</span><span class=\"bp\">‚àÇ</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IccLeftChart</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">constructor</span>\n<span class=\"w\">      </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">constructor</span>\n<span class=\"w\">        </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">rintro</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">hz‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">hs‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hs‚ÇÇ</span><span class=\"bp\">‚ü©</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hz‚ÇÇ</span><span class=\"bp\">‚ü©</span>\n<span class=\"w\">          </span><span class=\"gr\">sorry</span>\n<span class=\"w\">        </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">      </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">mem_groupoid_of_pregroupoid</span><span class=\"bp\">.</span><span class=\"n\">mpr</span>\n<span class=\"w\">      </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">symm_trans_mem_orientationPreservingGroupoid</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùì°</span><span class=\"bp\">‚àÇ</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IccRightChart</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>It is really hard to give a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>, but it is the first sorry in <a href=\"https://github.com/leanprover-community/mathlib4/pull/16239\">#16239</a>.<br>\nMy proof strategy is that since this is a matrix of dimension 1, its determinant is going to be equal to its term, which I'll then prove to be positive.<br>\nI've found <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.det_fin_one#doc\">docs#Matrix.det_fin_one</a>, but I'm not sure how to use it, because we are talking about linear maps instead of matrices. I'm aware of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.mapMatrix#doc\">docs#LinearMap.mapMatrix</a>, but I'm not sure how to make the type <code>Matrix (Fin 1) (Fin 1)</code>.</p>",
        "id": 470240658,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1726357712
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"516492\">@Evan Bailey</span></p>",
        "id": 476836746,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728931524
    },
    {
        "content": "<p>In case someone is taking a look at the PR: the current definition of an orientable manifold doesn't work for manifolds with boundary, in particular, <code>Icc 0 1</code> is not an orientable manifold because if you look at the transition maps, one will have a negative derivative.</p>",
        "id": 476838012,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1728932183
    },
    {
        "content": "<p>Wow, good catch. Sadly, this is the only example where things will fail, since in the other cases the model space admits an orientation reversing diffeo. But that's enough to kill the theory, so it looks like another definition of orientable manifolds is in order, not using the orientation preserving groupoid, unless I'm missing something. <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span> , what do you think?</p>\n<p>For instance, a definition like the following could work: a manifold is orientable if, for each element <code>e</code> in the atlas, there is a choice of sign <code>Œµ‚Çë</code>, such that the change of coordinates from <code>e</code> to <code>e'</code> is orientation preserving if <code>Œµ‚Çë Œµ‚Çë' = 1</code>, and orientation reversing if <code>Œµ‚Çë Œµ‚Çë' = -1</code>.</p>",
        "id": 476918444,
        "sender_full_name": "S√©bastien Gou√´zel",
        "timestamp": 1728976404
    },
    {
        "content": "<p>Looking at <a href=\"http://www.map.mpim-bonn.mpg.de/Orientation_of_manifolds#Manifolds_with_boundary\">the manifold atlas</a>, they define an orientation of a manifold as an orientation of its interior (and take the induced orientation of the boundary). Shouldn't the same work for mathlib, in principle? That is, a manifold is orientable if its interior is orientable (and that is the existing definition; <code>Ioo x y</code> only needs one chart).</p>",
        "id": 476919414,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728976661
    },
    {
        "content": "<p>And by the way this is a great example of how, to stress-test a definition, the right thing to do is to prove a few theorems with it!</p>",
        "id": 476919503,
        "sender_full_name": "S√©bastien Gou√´zel",
        "timestamp": 1728976680
    },
    {
        "content": "<p>One complication, of course, is that mathlib doesn't currently have the fact \"the interior of a manifold is open\", let alone \"the interior is a manifold\" - so for the time being, I'd suggest simply adding the assumption <code>ModelWithCorners.Boundaryless</code> (and removing that once the instance is provided).</p>",
        "id": 476919862,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728976769
    },
    {
        "content": "<p>The conceptual definitions don't have any issue with the boundary here: a manifold is orientable if there exists a nonzero section of the bundle of orientations of its tangent space. The surprise to me is that it doesn't coincide with \"one can choose an atlas for which the change of coordinates are orientation preserving\".</p>",
        "id": 476920087,
        "sender_full_name": "S√©bastien Gou√´zel",
        "timestamp": 1728976824
    },
    {
        "content": "<p>I think this is an artefact of considering the boundary as well: on the interior, one can do so.</p>",
        "id": 476928649,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728979211
    },
    {
        "content": "<p>(But that is an interesting detail, I agree. I was also surprised!)</p>",
        "id": 476928707,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728979225
    },
    {
        "content": "<p>This made me wonder how would we state that the interior of a manifold with boundary is a manifold in lean? Since it seems that we don't have \"topological manifolds\" in the usual sense afaik.</p>",
        "id": 477814514,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1729350474
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">S√©bastien Gou√´zel</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Orientable.20Surface/near/476918444\">said</a>:</p>\n<blockquote>\n<p>Wow, good catch. Sadly, this is the only example where things will fail, since in the other cases the model space admits an orientation reversing diffeo. But that's enough to kill the theory, so it looks like another definition of orientable manifolds is in order, not using the orientation preserving groupoid, unless I'm missing something. <span class=\"user-mention silent\" data-user-id=\"260507\">Heather Macbeth</span> , what do you think?</p>\n<p>For instance, a definition like the following could work: a manifold is orientable if, for each element <code>e</code> in the atlas, there is a choice of sign <code>Œµ‚Çë</code>, such that the change of coordinates from <code>e</code> to <code>e'</code> is orientation preserving if <code>Œµ‚Çë Œµ‚Çë' = 1</code>, and orientation reversing if <code>Œµ‚Çë Œµ‚Çë' = -1</code>.</p>\n</blockquote>\n<p>It would be possible to keep the groupoid definition of oriented manifold if we adjust <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=EuclideanHalfSpace#doc\">docs#EuclideanHalfSpace</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=modelWithCornersEuclideanHalfSpace#doc\">docs#modelWithCornersEuclideanHalfSpace</a> to take a choice of sign <code>Œµ</code>, so it can be either the positive or negative half-space.</p>",
        "id": 478084518,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1729523135
    },
    {
        "content": "<p>Actually, hmm, maybe I'm mentally generalizing to a \"multiple model spaces\" version of the differential geometry setup ...</p>",
        "id": 478085054,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1729523277
    },
    {
        "content": "<p>What happens if you replace the model space from a halfspace to a \"thick plane\" (the intersection of two parallel halfspaces with reverse orientation)?</p>",
        "id": 478085629,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1729523419
    },
    {
        "content": "<p>A trick which might work is to consider the model space to be <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">}</mo><mo>√ó</mo><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">\\{0,1\\}\\times H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">}</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">√ó</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span>, where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span> is the original model space.</p>",
        "id": 478086194,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1729523552
    },
    {
        "content": "<p>Same thought <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 478086349,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1729523593
    },
    {
        "content": "<p>You need to be able to embed the model space in a vector space, so that the range of the embedding has nonempty interior. Another choice would be to take the model space to be <code>[0, 1]</code>. But this seems really less natural than the usual choice. Since there are definitions of orientation that work with our current setup in any case (even in zero dimension, where things are usually even more tricky), I'm not sure it's worth it.</p>",
        "id": 478105743,
        "sender_full_name": "S√©bastien Gou√´zel",
        "timestamp": 1729529010
    },
    {
        "content": "<p>Do you mean that we let <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IccLeftChart#doc\">docs#IccLeftChart</a> be based on a different sign of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=EuclideanHalfSpace#doc\">docs#EuclideanHalfSpace</a> than <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IccRightChart%3F#doc\">docs#IccRightChart?</a> But a <code>ChartedSpace</code> has to have charts that take their values from the same space right?</p>",
        "id": 481641391,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1731305781
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260507\">Heather Macbeth</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Orientable.20Surface/near/478086194\">said</a>:</p>\n<blockquote>\n<p>A trick which might work is to consider the model space to be <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mn>0</mn><mo separator=\"true\">,</mo><mn>1</mn><mo stretchy=\"false\">}</mo><mo>√ó</mo><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">\\{0,1\\}\\times H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">}</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">√ó</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span>, where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span> is the original model space.</p>\n</blockquote>\n<p>This means that I will change <code>modelWithCornersEuclideanHalfSpace</code> which has unrelated things depending on it, is it worth it?</p>",
        "id": 490431372,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1734914024
    },
    {
        "content": "<p>(Sorry for the late response. I still would be interested in seeing the PR land, finally.)<br>\nI personally think the best approach might be the \"choice of sign\" definition.</p>\n<blockquote>\n<p>For instance, a definition like the following could work: a manifold is orientable if, for each element <code>e</code> in the atlas, there is a choice of sign <code>Œµ‚Çë</code>, such that the change of coordinates from <code>e</code> to <code>e'</code> is orientation preserving if <code>Œµ‚Çë Œµ‚Çë' = 1</code>, and orientation reversing if <code>Œµ‚Çë Œµ‚Çë' = -1</code>.</p>\n</blockquote>\n<p>Does that even define an orientation on a manifold? (You don't have to make that definition, but if it's there, even nicer. That's another missing piece of the library.)</p>",
        "id": 493002296,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1736533064
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Orientable.20Surface/near/493002296\">said</a>:</p>\n<blockquote>\n<p>Does that even define an orientation on a manifold?</p>\n</blockquote>\n<p>Are you asking whether that definition works mathematically? I think so. You can interpret the signs as telling you whether each chart is orientation-preserving or -reversing, and then the condition on changes of coordinates tells you that the local orientations induced by those charts are all compatible. Unlike the definition in terms of atlases with orientation-preserving transition maps this should even work for 0-manifolds, because for them it just ends up associating a sign to each point.</p>",
        "id": 493054565,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1736562160
    },
    {
        "content": "<p>I know the math. :-)<br>\nI wasn't sure if following the above route already yields a definition of orientations of manifolds. (That would be welcome; if there's a PR defining <em>orientability</em> only, I'd still accept that as an improvement.)</p>",
        "id": 493093668,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1736599470
    },
    {
        "content": "<p>Yes, it gives a definition of orientation: an orientation is a choice of signs with the compatibility condition. To reverse the orientation, just change all the signs.</p>",
        "id": 493096068,
        "sender_full_name": "S√©bastien Gou√´zel",
        "timestamp": 1736601879
    },
    {
        "content": "<p>Thanks for your comments, I will return to this PR after I'm done with another project I'm working on.</p>",
        "id": 493191493,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1736690228
    },
    {
        "content": "<p>How is work going in the formalization of the orientability of the product of orientable manifolds?</p>",
        "id": 499746783,
        "sender_full_name": "Marc Fares",
        "timestamp": 1739540946
    },
    {
        "content": "<p>I think nobody is working on that yet, especially considering that the definition of orientable manifolds haven't been merged into mathlib (in fact it is still a WIP). I plan to return to it around mid march.</p>",
        "id": 499781834,
        "sender_full_name": "Rida Hamadani",
        "timestamp": 1739550501
    }
]