[
    {
        "content": "<p>If I change <code>Set</code> to <code>Finset</code> in the example below, it's decidable and <code>by decide</code> can close the goal. But if I'm forced to start with <code>Set</code>, is there a way to tell Lean that equality between sets constructed from a list of elements is decidable too?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 527220554,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751652869
    },
    {
        "content": "<p>Yes, you have to write a <code>Decidable</code> instance</p>",
        "id": 527220850,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751653105
    },
    {
        "content": "<p>I'd advise against it though</p>",
        "id": 527220867,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751653115
    },
    {
        "content": "<p>but isn't there some extensionality lemma from <code>Set.toFinset</code>? there is <code>Set.toFinset_congr</code>, but in the 'wrong' direction</p>",
        "id": 527220922,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751653158
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.toFinset_congr#doc\">docs#Set.toFinset_congr</a></p>",
        "id": 527220939,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751653180
    },
    {
        "content": "<p>actually, nevermind, since I'm proving inequality this is the right direction</p>",
        "id": 527220971,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751653200
    },
    {
        "content": "<p>No, you want <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.toFinset_inj#doc\">docs#Set.toFinset_inj</a></p>",
        "id": 527221016,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751653225
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527221016\">said</a>:</p>\n<blockquote>\n<p>No, you want <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.toFinset_inj#doc\">docs#Set.toFinset_inj</a></p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">toFinset_congr</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">absurd</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">decide</span>\n</code></pre></div>\n<p>works</p>",
        "id": 527221122,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751653293
    },
    {
        "content": "<p>but <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.toFinset_inj#doc\">docs#Set.toFinset_inj</a> is useful too, thanks</p>",
        "id": 527221167,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751653326
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"571941\">Lua Viana Reis</span> has marked this topic as resolved.</p>",
        "id": 527221208,
        "sender_full_name": "Notification Bot",
        "timestamp": 1751653354
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527220850\">said</a>:</p>\n<blockquote>\n<p>Yes, you have to write a <code>Decidable</code> instance</p>\n</blockquote>\n<p>what about having a <code>Decidable (u = v)</code> instance in mathlib for <code>u v</code> with instances <code>Fintype u</code> <code>Fintype v</code>? (via <code>.toFinset</code>)</p>",
        "id": 527221694,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751653640
    },
    {
        "content": "<p>That could be a possibility</p>",
        "id": 527222016,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751653908
    },
    {
        "content": "<p>you might want to ask in <a class=\"stream\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4\">#mathlib4</a></p>",
        "id": 527222028,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751653922
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527222016\">said</a>:</p>\n<blockquote>\n<p>That could be a possibility</p>\n</blockquote>\n<p>it must be a bit more complicated, my naive attempt</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">toFinset_inj</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">infer_instance</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">decide</span><span class=\"w\"> </span><span class=\"c1\">-- error</span>\n</code></pre></div>\n<p>does not work</p>",
        "id": 527222374,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751654229
    },
    {
        "content": "<p>Did you read the error message?</p>",
        "id": 527222426,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751654273
    },
    {
        "content": "<p>ok, sorry, I'm just not familiar with this...</p>",
        "id": 527222469,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751654338
    },
    {
        "content": "<p>One possible approach:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">basic</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">FinMk</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">finset</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">finset</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">s</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FinMk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∅</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨∅</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FinMk</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FinMk</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FinMk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">⟨</span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hs</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">]</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FinMk</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ht</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FinMk</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">s₁</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">ht</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">t₁</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ht</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s₁</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t₁</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">isTrue</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">aesop</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">isFalse</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">aesop</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">decide</span>\n</code></pre></div>",
        "id": 527222697,
        "sender_full_name": "Vlad",
        "timestamp": 1751654495
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">decidable_of_decidable_of_iff</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">toFinset_inj</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">decide</span>\n</code></pre></div>\n<p>now this works, thanks</p>",
        "id": 527222704,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751654500
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"934540\">@Vlad</span> is there any advantage of <code>FinMk</code> over <code>Fintype</code>?</p>",
        "id": 527222809,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751654598
    },
    {
        "content": "<p>You shouldn't have <code>by apply</code>, just do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">decidable_of_decidable_of_iff</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">toFinset_inj</span>\n</code></pre></div>",
        "id": 527222821,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751654603
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"571941\">Lua Viana Reis</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527222809\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"934540\">Vlad</span> is there any advantage of <code>FinMk</code> over <code>Fintype</code>?</p>\n</blockquote>\n<p>There is a disadvantage, which is that now we have two things doing the same thing</p>",
        "id": 527222854,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751654642
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span>  well, <code>by apply</code> is just notation... I'm writing stuff in a chat, not submitting a PR to mathlib</p>",
        "id": 527222898,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751654681
    },
    {
        "content": "<ul>\n<li>it's not \"just notation\", it runs some code that unifies the two and also delays elaboration</li>\n<li>ok fine, but you also might PR this to mathlib in the future (at which point you will probably remove the <code>by apply</code>)</li>\n</ul>",
        "id": 527223040,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751654799
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527222854\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"571941\">Lua Viana Reis</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527222809\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"934540\">Vlad</span> is there any advantage of <code>FinMk</code> over <code>Fintype</code>?</p>\n</blockquote>\n<p>There is a disadvantage, which is that now we have two things doing the same thing</p>\n</blockquote>\n<p>that's what I imagined, it would be more redundant</p>",
        "id": 527223064,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751654819
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">ext_iff</span><span class=\"o\">]</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>",
        "id": 527223125,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751654874
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidablePred</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidablePred</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">decidable_of_iff'</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">ext_iff</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>",
        "id": 527223261,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655003
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span>, I think I'm not familiar enough with mathlib to propose a PR with right instance (or to even know if there is such one) :)</p>",
        "id": 527223373,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751655100
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"571941\">@Lua Viana Reis</span> you can replace my Fin n with an arbitrary fintype and PR that, I can guide you</p>",
        "id": 527223442,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655161
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"571941\">Lua Viana Reis</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527222809\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"934540\">Vlad</span> is there any advantage of <code>FinMk</code> over <code>Fintype</code>?</p>\n</blockquote>\n<p>To allow infinite types such as <code>example : ({1, 2} : Set ℕ) ≠ {1, 3} := by decide</code></p>",
        "id": 527223483,
        "sender_full_name": "Vlad",
        "timestamp": 1751655190
    },
    {
        "content": "<p>we probably want both?</p>",
        "id": 527223505,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655212
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"934540\">Vlad</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527223483\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"571941\">Lua Viana Reis</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527222809\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"934540\">Vlad</span> is there any advantage of <code>FinMk</code> over <code>Fintype</code>?</p>\n</blockquote>\n<p>To allow infinite types such as <code>example : ({1, 2} : Set ℕ) ≠ {1, 3} := by decide</code></p>\n</blockquote>\n<p><code>Fintype</code> already works for this?</p>",
        "id": 527223506,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655214
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">decidable_of_decidable_of_iff</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">toFinset_inj</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">decide</span>\n</code></pre></div>",
        "id": 527223553,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655254
    },
    {
        "content": "<p>aha yes this is strictly better than my code above</p>",
        "id": 527223661,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655366
    },
    {
        "content": "<p>hmm... or is it? Can a type be a fintype without deceq?</p>",
        "id": 527223681,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655392
    },
    {
        "content": "<p><code>Prop</code> is one such</p>",
        "id": 527223689,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1751655403
    },
    {
        "content": "<p><code>Prop</code> is such a <code>Fintype</code></p>",
        "id": 527223695,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655408
    },
    {
        "content": "<p>so do we want both instances?</p>",
        "id": 527223705,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655419
    },
    {
        "content": "<p>that would cause diamonds</p>",
        "id": 527223718,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655429
    },
    {
        "content": "<p>maybe we can have both, but make them reducible non instances</p>",
        "id": 527223775,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655481
    },
    {
        "content": "<p>would it? but all dec instances are provably equal</p>",
        "id": 527223780,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655484
    },
    {
        "content": "<p>who are these functions taking dec as input...</p>",
        "id": 527223795,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655495
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527223780\">said</a>:</p>\n<blockquote>\n<p>would it? but all dec instances are provably equal</p>\n</blockquote>\n<p>but not all defeq</p>",
        "id": 527223799,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655497
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527223795\">said</a>:</p>\n<blockquote>\n<p>who are these functions taking dec as input...</p>\n</blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ite#doc\">docs#ite</a> <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=dite#doc\">docs#dite</a></p>",
        "id": 527223811,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655507
    },
    {
        "content": "<p>this is the same reason <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Option.decidableEqNone#doc\">docs#Option.decidableEqNone</a> is not an instance (although I have a solution in mind that gets rid of the diamonds)</p>",
        "id": 527223891,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655586
    },
    {
        "content": "<p>I thought when we write theorems we provide a dec instance to prevent diamonds</p>",
        "id": 527223948,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655626
    },
    {
        "content": "<p>now I have no idea what you mean here</p>",
        "id": 527224001,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655657
    },
    {
        "content": "<p>if we have a function f that takes [Decidable p], then the theorems should look like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>",
        "id": 527224102,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655743
    },
    {
        "content": "<p>so that the Decidable instance that f uses doesn't have to be the same instance that the user provides</p>",
        "id": 527224113,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655763
    },
    {
        "content": "<p>what if your function does not take <code>[Decidable p]</code></p>",
        "id": 527224116,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655767
    },
    {
        "content": "<p>but it uses a <code>Decidable</code> instance internally</p>",
        "id": 527224170,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655810
    },
    {
        "content": "<p>what if we provided an instance for <code>[DecidablePred (· ∈ s)]</code> if <code>Fintype s</code> and <code>DecidableEq a</code>, and use <span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> example?</p>",
        "id": 527224175,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751655813
    },
    {
        "content": "<p>and you unfold it</p>",
        "id": 527224177,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655816
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"571941\">Lua Viana Reis</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527224175\">said</a>:</p>\n<blockquote>\n<p>what if we provided an instance for <code>[DecidablePred (· ∈ s)]</code> if <code>Fintype s</code>, and use <span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> example?</p>\n</blockquote>\n<p>You would also need <code>DecidableEq</code> to do that</p>",
        "id": 527224209,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655842
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527224177\">said</a>:</p>\n<blockquote>\n<p>and you unfold it</p>\n</blockquote>\n<p>yes, so your theorems take another decidable instance</p>",
        "id": 527224236,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751655879
    },
    {
        "content": "<p>this also only works on finite things</p>",
        "id": 527224242,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655881
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527224236\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527224177\">said</a>:</p>\n<blockquote>\n<p>and you unfold it</p>\n</blockquote>\n<p>yes, so your theorems take another decidable instance</p>\n</blockquote>\n<p>There are two constants that neither of them take <code>Decidable</code> as a parameter but both use <code>Decidable</code> internally. You use both of them in a theorem. If there is a diamond, then you can have stuff looks the same but not the same, and this is generally bad.</p>",
        "id": 527224413,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751655980
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">f_nat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">f</span><span class=\"o\">]</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">congr</span>\n</code></pre></div>",
        "id": 527224498,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751656044
    },
    {
        "content": "<p>no diamond here</p>",
        "id": 527224509,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751656056
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">f_nat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">f</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- halp why this not werking</span>\n</code></pre></div>",
        "id": 527224554,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751656101
    },
    {
        "content": "<p>and then I have to explain to the newcomer what a diamond is</p>",
        "id": 527224584,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751656126
    },
    {
        "content": "<p>it's just better if there are no diamonds</p>",
        "id": 527224653,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751656188
    },
    {
        "content": "<p>fortunately we have better error messages now</p>",
        "id": 527224680,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751656211
    },
    {
        "content": "<p>and the pretty printer reveals the mismatch</p>",
        "id": 527224723,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751656235
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527224554\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">f_nat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">f</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- halp why this not werking</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I'm saying that yes you get diamond when you're writing the API, but if the API is good then you'll get no diamonds</p>",
        "id": 527225047,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751656498
    },
    {
        "content": "<p>f_nat is the API</p>",
        "id": 527225056,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751656505
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527224242\">said</a>:</p>\n<blockquote>\n<p>this also only works on finite things</p>\n</blockquote>\n<p>but by using <code>DecidablePred</code> directly, it would allow more instances in the future with less chances of creating diamonds, no? By providing the <code>DecidablePred</code> instances directly</p>",
        "id": 527225069,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751656515
    },
    {
        "content": "<p>no idea</p>",
        "id": 527225098,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751656543
    },
    {
        "content": "<p>stuff like <a href=\"https://math.andrej.com/2007/09/28/seemingly-impossible-functional-programs/\">https://math.andrej.com/2007/09/28/seemingly-impossible-functional-programs/</a> comes to my mind. A set like that defined by a computable predicate</p>",
        "id": 527225510,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751656891
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"571941\">@Lua Viana Reis</span> I don't think you can translate that directly into Lean, because that's more like a metatheorem</p>",
        "id": 527225639,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751657005
    },
    {
        "content": "<p>you can falsify it with the axiom of choice</p>",
        "id": 527225653,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751657023
    },
    {
        "content": "<p>choice is powerful</p>",
        "id": 527225659,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751657031
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527223506\">said</a>:</p>\n<blockquote>\n<p><code>Fintype</code> already works for this?</p>\n</blockquote>\n<p>Right. Turns out <code>import Mathlib.Data.Fintype.Basic</code> was not enough for the instance synthesizer.</p>",
        "id": 527225695,
        "sender_full_name": "Vlad",
        "timestamp": 1751657080
    },
    {
        "content": "<p>yes, but I was thinking that perhaps with some trick to make the settings equivalent... like there is now a codata definition in Lean using quotients. but I have no idea what I'm talking about</p>",
        "id": 527225729,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751657105
    },
    {
        "content": "<p>perhaps it's ok to have no instances at all, since if we have it, it would then be desirable to also have instances for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>⊆</mo></mrow><annotation encoding=\"application/x-tex\">\\subseteq</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mrel\">⊆</span></span></span></span> and so on. I like <span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> example in that it shows that by translating the statement to a proposition, often <code>decide</code> then works (it worked for all the brute-force cases that I had, for deciding a subset relationship)</p>",
        "id": 527227493,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751659010
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527225653\">said</a>:</p>\n<blockquote>\n<p>you can falsify it with the axiom of choice</p>\n</blockquote>\n<p>I don't think this is true - it's possible to write a (computable) decidable instance on an infinite type (as in that post), all accepted by Lean</p>",
        "id": 527287630,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1751728545
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246273\">Bhavik Mehta</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527287630\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.E2.9C.94.20deciding.20over.20some.20known.20Set.20.28Fin.20n.29/near/527225653\">said</a>:</p>\n<blockquote>\n<p>you can falsify it with the axiom of choice</p>\n</blockquote>\n<p>I don't think this is true - it's possible to write a (computable) decidable instance on an infinite type (as in that post), all accepted by Lean</p>\n</blockquote>\n<p>Not for <code>(Int → Bool) → Bool</code></p>",
        "id": 527287676,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751728580
    },
    {
        "content": "<p>Sure, I'm just claiming that there exists such a type :)</p>",
        "id": 527287727,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1751728633
    },
    {
        "content": "<p>The thing about <code>(Int → Bool) → Bool</code> that lets you write a decidable eq instance in that post is that every terminating function that's <code>(Int → Bool) → Bool</code> is only allowed to inspect a finite prefix of its argument, so if you give <code>Int → Bool</code> the infinite product topology then this function must be continuous. With choice you can get functions that aren't continuous.</p>",
        "id": 527287856,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751728776
    },
    {
        "content": "<p>However this topological argument isn't the only way you can construct these instances, see <a href=\"https://martinescardo.github.io/papers/omniscient.pdf\">https://martinescardo.github.io/papers/omniscient.pdf</a> (by the same author on the same topic, just a little later)</p>",
        "id": 527288001,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1751728957
    },
    {
        "content": "<p>And what this means is I can make this in Lean:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">↪</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n</code></pre></div>\n<p>(and even without using choice anywhere!). I imagine you'll want to try this yourself, but here's the version I chucked together: <a href=\"https://gist.github.com/b-mehta/f750f36e5a985da80bf4bfc155ff340e\">https://gist.github.com/b-mehta/f750f36e5a985da80bf4bfc155ff340e</a>, which does parts of section 2 and 3 of that paper. <br>\nYou could argue this is the same topological thing going on anyway, but the key thing is that this one is consistent with Lean!</p>",
        "id": 527288446,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1751729429
    },
    {
        "content": "<p>I'll see if I can make this into <code>∀ m [Monad m], (ℕ∞ → m Bool) → (ℕ∞ → m Bool) → m Bool</code> so I can start feeding in values manually</p>",
        "id": 527289962,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751731228
    },
    {
        "content": "<p>Back to the original question, at least if you happen to know an element that's in one set but not the other it's easy enough to prove without a reflection-based argument:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">congr</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">h</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 527290769,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1751732066
    },
    {
        "content": "<p>My setting was a bunch of goals with finite <code>Set</code>s, so giving the element for each goal would not be practical</p>",
        "id": 527290922,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1751732231
    }
]