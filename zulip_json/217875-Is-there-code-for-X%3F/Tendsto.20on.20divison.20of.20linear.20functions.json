[
    {
        "content": "<p>Hi :)</p>\n<p>Was trying something of the sort:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">linear_div_tendsto</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ğ•‚</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RCLike</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ğ•‚</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">â‰ </span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n\n<span class=\"w\">Â  Â  </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">â„</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">â†¦</span><span class=\"w\"> </span><span class=\"bp\">â€–</span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"bp\">â€–</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">atTop</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">nhds</span><span class=\"w\"> </span><span class=\"bp\">â€–</span><span class=\"n\">a</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">â€–</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>This can be solved by dividing through by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>, but that requires <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo mathvariant=\"normal\">â‰ </mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">x \\neq 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\">î€ </span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> and is messy algebra. I couldn't find anything particularly helpful in Mathlib. <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/SpecialFunctions/Polynomials.html#Polynomial.div_tendsto_leadingCoeff_div_of_degree_eq\">Polynomial.div_tendsto_leadingCoeff_div_of_degree_eq</a> is the closest I can find, but that required an ordered field, which is not necessary here.</p>\n<p>Thanks!</p>",
        "id": 472517974,
        "sender_full_name": "EdwardW",
        "timestamp": 1727191025
    },
    {
        "content": "<p>If I were doing this from first principles on paper I'd subtract and add a/c from ax+b/cx+d to get a/c+(bc-ad)/c(cx+d) and then just prove that the latter tends to zero.</p>",
        "id": 472628822,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727248675
    },
    {
        "content": "<p>Yes exactly, I guess I'll do it the hard way, I might investigate the tendsto API as that could do with some additional infrastructure</p>",
        "id": 472642314,
        "sender_full_name": "EdwardW",
        "timestamp": 1727253396
    },
    {
        "content": "<p>I'd do the proof by dividing through by x, using the fact that (ax+b)/(cx+d) =á¶ [atTop] (a+b/x)/(c+d/x), and then the denominator is eventually nonzero too. Once you state everything in terms of eventually atTop, you can filter upwards and get x != 0 as a hypothesis, then field_simp + ring should make the algebra really easy</p>",
        "id": 472654878,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1727257566
    },
    {
        "content": "<p>Seems like more effort than Kevin's way, but yes that seems like the way I was going to do it originally</p>",
        "id": 472669543,
        "sender_full_name": "EdwardW",
        "timestamp": 1727262264
    },
    {
        "content": "<p>It looks to me like about the same amount of effort. The trick is to move away from (ax+b)/(cx+d) (which there won't be any lemmas about, I guess) to functions like b/x or constant functions, which hopefully there will be lemmas about (and then apply results about sum of limits is limit of sums etc)</p>",
        "id": 472673650,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727263675
    },
    {
        "content": "<p>For sure, saying that it would definitely be useful to have division of two polynomials, or higher degree polynomials/arbitrary polynomials become really messy</p>",
        "id": 472676689,
        "sender_full_name": "EdwardW",
        "timestamp": 1727264687
    },
    {
        "content": "<p>Can you formalise the statement about division of two polynomials which you think we should have?</p>",
        "id": 472686726,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727267926
    },
    {
        "content": "<p>Probably</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">RCLike</span><span class=\"bp\">.</span><span class=\"n\">div_tendsto_leadingCoeff_div_of_degree_eq</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RCLike</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hdeg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">degree</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"bp\">.</span><span class=\"n\">degree</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tendsto</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"w\"> </span><span class=\"bp\">â†¦</span><span class=\"w\"> </span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"bp\">â†‘</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"bp\">â†‘</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">atTop</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ“</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">leadingCoeff</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"bp\">.</span><span class=\"n\">leadingCoeff</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>?</p>\n<p>Perhaps I am mistaken, but this doesn't seem trivial, in fact I was working on it just now and it seems like tendsto support for RCLike is somewhat lacking, perhaps this is because this is covered by another typeclass?</p>",
        "id": 472886281,
        "sender_full_name": "EdwardW",
        "timestamp": 1727354261
    },
    {
        "content": "<p>I think it's not the statement you want. There's no reason to restrict to sequences.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Bornology</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Topology</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">tendsto_div_cobounded_of_degree_eq</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NontriviallyNormedField</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hdeg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">degree</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"bp\">.</span><span class=\"n\">degree</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"bp\">â†¦</span><span class=\"w\"> </span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">cobounded</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ“</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">leadingCoeff</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"bp\">.</span><span class=\"n\">leadingCoeff</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 472905599,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1727359600
    },
    {
        "content": "<p>Actually, maybe you only need <code>NormedField</code> because of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Normed/Field/Lemmas.html#Filter.tendsto_inv%E2%82%80_cobounded\">Filter.tendsto_invâ‚€_cobounded</a></p>",
        "id": 472907223,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1727360062
    },
    {
        "content": "<p>You are correct, I wasn't sure how to generalise my idea, I suppose then that mine is obtained by composition on an algebraMap. Would it be helpful if I proved this statement?</p>",
        "id": 472907465,
        "sender_full_name": "EdwardW",
        "timestamp": 1727360121
    },
    {
        "content": "<p>/ attempted to <span aria-label=\"face with peeking eye\" class=\"emoji emoji-1fae3\" role=\"img\" title=\"face with peeking eye\">:face_with_peeking_eye:</span></p>",
        "id": 472908053,
        "sender_full_name": "EdwardW",
        "timestamp": 1727360282
    },
    {
        "content": "<p>I just came across <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=div_tendsto_leadingCoeff_div_of_degree_eq#doc\">docs#div_tendsto_leadingCoeff_div_of_degree_eq</a> which looks really similar to this, although it's for x atTop rather than cobounded. Maybe it helps here, or for others coming across this thread in the future</p>",
        "id": 481911210,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1731406889
    },
    {
        "content": "<p>Yes, in an ideal world everything would follow <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.isEquivalent_atTop_lead#doc\">docs#Polynomial.isEquivalent_atTop_lead</a>. I remember at the time I added this the most annoying part in using it was computing concrete things about concrete polynomials, do we have tactics to do that now?</p>",
        "id": 481932912,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1731413732
    },
    {
        "content": "<p>Hmm probably not, it would be nice to be corrected. I suppose ring tactics etc would help though</p>",
        "id": 481936787,
        "sender_full_name": "EdwardW",
        "timestamp": 1731414856
    }
]