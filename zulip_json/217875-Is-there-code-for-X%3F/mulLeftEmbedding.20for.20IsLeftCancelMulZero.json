[
    {
        "content": "<p>I want to use <code>map</code> on a <code>Finset ℕ</code> to send <code>x</code> to <code>k * x</code>, which needs an embedding rather than just a function. Looking at Mathlib I can see that there is a definition for an embedding of left multiplication, but it's only for types of <code>IsLeftCancelMul</code>, which <code>ℕ</code> isn't. Is there an equivalent definition in Mathlib for <code>IsLeftCancelMulZero</code>?</p>",
        "id": 517365785,
        "sender_full_name": "shortc1rcuit",
        "timestamp": 1746973787
    },
    {
        "content": "<p>Do you know in your case that <code>k ≠ 0</code>?</p>",
        "id": 517365892,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1746973833
    },
    {
        "content": "<p><a href=\"https://tqft.net/mathlib4files/Mathlib/Algebra/Group/Pointwise/Finset/Scalar\">file#Mathlib/Algebra/Group/Pointwise/Finset/Scalar</a> might be interesting regardless</p>",
        "id": 517365959,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1746973892
    },
    {
        "content": "<p>Do you need to map? Would <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.image#doc\">docs#Finset.image</a> be sufficient?</p>",
        "id": 517366166,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1746974045
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/mulLeftEmbedding.20for.20IsLeftCancelMulZero/near/517365892\">said</a>:</p>\n<blockquote>\n<p>Do you know in your case that <code>k ≠ 0</code>?</p>\n</blockquote>\n<p>Yes</p>\n<p><span class=\"user-mention silent\" data-user-id=\"308899\">Yakov Pechersky</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/mulLeftEmbedding.20for.20IsLeftCancelMulZero/near/517366166\">said</a>:</p>\n<blockquote>\n<p>Do you need to map? Would <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.image#doc\">docs#Finset.image</a> be sufficient?</p>\n</blockquote>\n<p>Later on in my proof I sum over the finset and I use the theorem <code>Finset.sum_map</code>. So I need to use map as I need to show that no two elements get mapped to the same value.</p>",
        "id": 517366507,
        "sender_full_name": "shortc1rcuit",
        "timestamp": 1746974305
    },
    {
        "content": "<p>I was able to put together this general definition for what I would like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">mulLeftEmbedding₀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Mul</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Zero</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsLeftCancelMulZero</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">↪</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">inj'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mul_right_injective₀</span><span class=\"w\"> </span><span class=\"n\">hg</span>\n</code></pre></div>",
        "id": 517366573,
        "sender_full_name": "shortc1rcuit",
        "timestamp": 1746974360
    },
    {
        "content": "<p>I'm using this definition in my proof for now, but I'd be interested in maybe adding it to Mathlib if it's not there already.</p>",
        "id": 517368266,
        "sender_full_name": "shortc1rcuit",
        "timestamp": 1746975573
    },
    {
        "content": "<p>I suspect in matlib we tend to just inline this definition</p>",
        "id": 517368395,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746975663
    },
    {
        "content": "<p>Since we have <code>mulLeftEmbedding</code>, it makes sense to have a version for monoids with zero too. I would accept a pr adding it to the library.</p>",
        "id": 517406440,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1747007480
    },
    {
        "content": "<p>If we add it we should modify the places that currently inline it</p>",
        "id": 517410577,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747011467
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/mulLeftEmbedding.20for.20IsLeftCancelMulZero/near/517406440\">said</a>:</p>\n<blockquote>\n<p>Since we have <code>mulLeftEmbedding</code>, it makes sense to have a version for monoids with zero too. I would accept a pr adding it to the library.</p>\n</blockquote>\n<p>I've not contributed to mathlib before but I'd be interested in doing this. Where should I look to get started?</p>\n<p>Also <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> what places inline this?</p>",
        "id": 517891723,
        "sender_full_name": "shortc1rcuit",
        "timestamp": 1747159038
    },
    {
        "content": "<p>Searching for all uses of the injectivity lemma should find them</p>",
        "id": 517909888,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747165422
    }
]