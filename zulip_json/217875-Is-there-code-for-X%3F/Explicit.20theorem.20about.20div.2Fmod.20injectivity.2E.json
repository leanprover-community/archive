[
    {
        "content": "<p>I sort of can't believe we don't have the following, but I haven't yet found it:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mod_div_inj</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">div_add_mod</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>It is implicit in, for instance, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Logic/Equiv/Fin/Basic.html#Nat.divModEquiv\">Nat.divModEquiv</a>, though only for NeZero n. But it feels like a more fundamental theorem - I was expecting to find it in Core, even.</p>",
        "id": 567740237,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768303709
    },
    {
        "content": "<p>I guess it is deemed a little too trivial with <code>Nat.div_add_mod</code>?</p>",
        "id": 568659767,
        "sender_full_name": "Bbbbbbbbba",
        "timestamp": 1768738689
    },
    {
        "content": "<p>Well yes that's kind of what you use, but in practice it's useful to have the above.</p>",
        "id": 568659835,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768738757
    },
    {
        "content": "<p>I think it makes sense to have this, both as <code>iff</code> and as <code>a % n = b % n → a / n = b / n → a = b</code>.</p>",
        "id": 568690388,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768766743
    },
    {
        "content": "<p>Yes agreed.</p>",
        "id": 568690428,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768766770
    },
    {
        "content": "<p>You might want to make n explicit rather than implicit as pretty much in many applications of it it may not be natural.</p>",
        "id": 568690484,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768766807
    },
    {
        "content": "<p>Also I think this is also true in Int to at least some degree? Not sure if it's wanted there but you can see the use. The lack of any hypothesis on n (it can be zero!) is IMO particularly nice.</p>",
        "id": 568690561,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768766877
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Explicit.20theorem.20about.20div.2Fmod.20injectivity.2E/near/568690388\">said</a>:</p>\n<blockquote>\n<p>I think it makes sense to have this, both as <code>iff</code> and as <code>a % n = b % n → a / n = b / n → a = b</code>.</p>\n</blockquote>\n<p>Why do you want implication too?</p>",
        "id": 568693667,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768770012
    },
    {
        "content": "<p>More convenient for <code>apply</code> I assume</p>",
        "id": 568693691,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768770039
    },
    {
        "content": "<p>I know what you mean, but it's just the same thing under different name (instead of <code>mod_div_inj.mpr</code>). There's no change in convenience of person who writes the proof. There might be some for someone who reads. But I would say it's a negative convenience to have two different names for the same thing.</p>",
        "id": 568694651,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768771027
    },
    {
        "content": "<p>Well we do this kind of thing all the time! It's like ext versus ext_iff.</p>",
        "id": 568694687,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768771065
    },
    {
        "content": "<p>Ah, wait, no, it's different than <code>mod_div_inj.mpr</code>.  It unbundles And with <code>apply</code>.</p>",
        "id": 568695202,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768771556
    },
    {
        "content": "<p>Yes.</p>",
        "id": 568695277,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768771633
    },
    {
        "content": "<p>Like in terms of good-mannered API, I think you want both.</p>",
        "id": 568695306,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768771658
    },
    {
        "content": "<p>Sure, but I think it only makes sense in the case like here, where one side has either forall or And.</p>",
        "id": 568695386,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1768771767
    },
    {
        "content": "<p>Sure, not all iff should have it.</p>",
        "id": 568695411,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768771794
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span> Should this be in core, Batteries or Mathlib? I could PR it into the latter for now and worry about upstreaming later?</p>",
        "id": 569049169,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768921005
    },
    {
        "content": "<p>I think that it makes sense to PR it to Mathlib, then it will (or will not) get upstreamed later.</p>",
        "id": 569129125,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768943722
    },
    {
        "content": "<p>Where should it go in Mathlib nowadays? We seem to not have any of the % theorems there anymore as they've all been upstreamed.</p>",
        "id": 569216083,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768990637
    },
    {
        "content": "<p>Probably just <code>Basic</code>.</p>",
        "id": 569216186,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768990670
    },
    {
        "content": "<p>There is <code>Mathlib.Data.Nat.Init</code> for results that explicitly do not depend on anything in mathlib. The standard library team looks at these <code>Init</code> files semi-regularly for things to upstream.</p>",
        "id": 569216513,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1768990765
    },
    {
        "content": "<p>Ah, thank you!</p>",
        "id": 569216564,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768990780
    },
    {
        "content": "<p>Do we use <code>theorem</code> or <code>lemma</code> nowadays? I've got out of the habit of using the latter but I can't recall what the style is.</p>",
        "id": 569216754,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768990833
    },
    {
        "content": "<p>For results (somewhat) likely to move to the standard library eventually, I'd use <code>theorem</code>, but there's not really a strong policy right now</p>",
        "id": 569219432,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1768991626
    },
    {
        "content": "<p>Thanks.</p>",
        "id": 569219486,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768991645
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/34201\">#34201</a></p>",
        "id": 569223584,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1768992781
    },
    {
        "content": "<p>I took the liberty of then moving some of these theorems up to lean4. Thank you for writing them! <a href=\"https://github.com/leanprover-community/mathlib4/pull/12258\">#12258</a></p>",
        "id": 571154554,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769825916
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/12258\">lean4#12258</a></p>",
        "id": 571174823,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1769847057
    },
    {
        "content": "<p>Brill! Thanks for considering them.</p>",
        "id": 571174865,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1769847093
    }
]