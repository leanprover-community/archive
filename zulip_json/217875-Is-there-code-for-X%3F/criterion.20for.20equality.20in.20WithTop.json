[
    {
        "content": "<p>The following API lemma – characterizing an element of <code>WithTop M</code> by which elements of <code>M</code> are ≤ to it – would be helpful to have. Do we already have it under some other name? I didn't find it with a search.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">PartialOrder</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NoMaxOrder</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">eq_of_forall_coe_le_iff</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">m'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">WithTop</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hm</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">m'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 513001821,
        "sender_full_name": "David Loeffler",
        "timestamp": 1744968646
    },
    {
        "content": "<p>I made <a href=\"https://github.com/leanprover-community/mathlib4/pull/24165\">#24165</a> for this (I can always close the PR if it turns out the functionality already exists)</p>",
        "id": 513006104,
        "sender_full_name": "David Loeffler",
        "timestamp": 1744970554
    },
    {
        "content": "<p>Is there a reason why we can't have this in an arbitrary partial order?</p>",
        "id": 513040282,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744985791
    },
    {
        "content": "<p><del>Is this is just <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=eq_of_forall_le_iff#doc\">docs#eq_of_forall_le_iff</a></del> (it's not, since you're quantifying over <code>M</code> instead of <code>WithTop M</code>)</p>",
        "id": 513040410,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744985865
    },
    {
        "content": "<p>No, this is not <code>eq_of_forall_le_iff </code> because <code>n</code> varies over <code>M</code>, not over <code>WithTop M</code>.</p>",
        "id": 513040921,
        "sender_full_name": "David Loeffler",
        "timestamp": 1744986039
    },
    {
        "content": "<p>No we're missing this, thanks for spotting! PR reviewed</p>",
        "id": 513043581,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1744987040
    },
    {
        "content": "<p>Presumably there could be a version with <code>IsMax</code>?</p>",
        "id": 513069538,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744997403
    },
    {
        "content": "<p>Not sure what you’re after there. <code>WithTop</code> for orders that already have a max element is not well behaved (the old and new top elements are order-indistinguishable) and it’s not clear why it would be useful anyway.</p>",
        "id": 513144207,
        "sender_full_name": "David Loeffler",
        "timestamp": 1745047318
    },
    {
        "content": "<p>I mean for IsMax instead of WithTop</p>",
        "id": 513144420,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745047503
    },
    {
        "content": "<p>But then it’s just <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=eq_of_forall_le_iff#doc\">docs#eq_of_forall_le_iff</a>.</p>",
        "id": 513144652,
        "sender_full_name": "David Loeffler",
        "timestamp": 1745047704
    },
    {
        "content": "<p>I was imagining that with an extra condition that c is not top</p>",
        "id": 513144709,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745047779
    },
    {
        "content": "<p>But either way the version you asked for is worth having</p>",
        "id": 513144794,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745047826
    }
]