[
    {
        "content": "<p>Has anyone ever encountered/worked on/tinkered with making deriving handlers for enum-like types such as <code>inductive myEnum | a | b | c</code> that would give a cardinality and a decidable ordering? If there are no such examples, what handlers would you consider useful having? (e.g. there is more than one possible choice for the type of a finite collection)</p>",
        "id": 500239224,
        "sender_full_name": "nrs",
        "timestamp": 1739811093
    },
    {
        "content": "<p>i think there already is an <code>Encodable</code> deriver in mathlib...</p>",
        "id": 500251490,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1739815495
    },
    {
        "content": "<p>probably same for <code>Fintype</code></p>",
        "id": 500251515,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1739815505
    },
    {
        "content": "<p>yup</p>",
        "id": 500251608,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1739815556
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">DeriveFintype</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">DeriveEncodable</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">c</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Encodable</span>\n</code></pre></div>",
        "id": 500252324,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1739815889
    },
    {
        "content": "<p>very cool! thank you!!</p>",
        "id": 500252567,
        "sender_full_name": "nrs",
        "timestamp": 1739815992
    },
    {
        "content": "<p>I was going to say, if you did <code>import Mathlib</code>, you could have tried it already and experienced the pleasant surprise sooner <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 500255489,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739817339
    },
    {
        "content": "<p>There's also a <code>Countable</code> handler, in case you have a parameterized type whose parameters might only be <code>Countable</code>.</p>",
        "id": 500255649,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739817398
    },
    {
        "content": "<p>thanks for the reference! I got discouraged after not seeing them in the manual heheh</p>",
        "id": 500255865,
        "sender_full_name": "nrs",
        "timestamp": 1739817507
    },
    {
        "content": "<p>Want to make a contribution to it <span class=\"user-mention\" data-user-id=\"749978\">@nrs</span>? I'm happy to answer questions about these handlers and their limitations.</p>",
        "id": 500257810,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739818514
    },
    {
        "content": "<p>Sure, how do we manage the mentions of mathlib in the manual?</p>",
        "id": 500258116,
        "sender_full_name": "nrs",
        "timestamp": 1739818669
    },
    {
        "content": "<p>I suppose it depends on which manual you're talking about then. Neither <code>Fintype</code> nor <code>Encodable</code> are in core Lean, so not seeing any mention of deriving handlers for them in the Lean language reference manual doesn't mean anything.</p>",
        "id": 500259186,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739819133
    },
    {
        "content": "<p>Oh I actually didn't know there is also a mathlib manual lol!</p>",
        "id": 500259670,
        "sender_full_name": "nrs",
        "timestamp": 1739819378
    },
    {
        "content": "<p><em>there isn't</em></p>",
        "id": 500259914,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1739819493
    },
    {
        "content": "<p>there's this fork I just now discovered <a href=\"https://github.com/leanprover-community/mathlib-manual\">https://github.com/leanprover-community/mathlib-manual</a>, no clue how official it is</p>",
        "id": 500260040,
        "sender_full_name": "nrs",
        "timestamp": 1739819543
    },
    {
        "content": "<p><span aria-label=\"looking\" class=\"emoji emoji-1f440\" role=\"img\" title=\"looking\">:looking:</span> it looks like it's at least <em>somewhat</em> official, seeing as it is in the <code>leanprover-community</code> group?</p>",
        "id": 500260195,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1739819634
    },
    {
        "content": "<p>Yes, <a href=\"https://leanprover-community.github.io/mathlib-manual/html-multi/\">https://leanprover-community.github.io/mathlib-manual/html-multi/</a> is very new. It would be a good place to document the Mathlib deriving handlers.</p>",
        "id": 500261257,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739820190
    },
    {
        "content": "<p>(Thanks <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> for getting this going!)</p>",
        "id": 500261294,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739820216
    },
    {
        "content": "<p>if people actively PR content, it could become more and more official :)</p>\n<p>I can help if you need help getting a grip with the verso syntax, just DM me</p>",
        "id": 500840834,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1740046367
    },
    {
        "content": "<p>There's currently section <code>1.Tactics</code>, would we have section <code>2. Deriving handlers</code>? Or maybe it would make sense to have deriving handlers as a subsection their specific type</p>",
        "id": 500857982,
        "sender_full_name": "nrs",
        "timestamp": 1740051804
    },
    {
        "content": "<p>I don't mind, having <code>2. Deriving handlers</code> sounds reasonable.</p>",
        "id": 500905450,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1740064829
    }
]