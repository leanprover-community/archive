[
    {
        "content": "<p>Do we have the following statement : </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">DimensionLEOne_of_localization_maximal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsDomain</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MaximalSpectrum</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">DimensionLEOne</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Localization</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"n\">primeCompl</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">DimensionLEOne</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I just found <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ring.DimensionLEOne.localization#doc\">docs#Ring.DimensionLEOne.localization</a>.</p>",
        "id": 519444224,
        "sender_full_name": "Yiming Fu",
        "timestamp": 1747763587
    },
    {
        "content": "<p>More generally, we should show that the dimension of a comm. semiring (not necessarily a domain) is the supremum of the dimensions of its localizations at maximal ideals (it's more or less unfolding the definition).</p>",
        "id": 519469874,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1747773330
    },
    {
        "content": "<p>I think the proof of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsDedekindDomainDvr.ring_dimensionLEOne#doc\">docs#IsDedekindDomainDvr.ring_dimensionLEOne</a> is basically that.</p>",
        "id": 519475394,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747775562
    },
    {
        "content": "<p>It doesn't use <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Ideal/Height.html#IsLocalization.AtPrime.ringKrullDim_eq_height\">IsLocalization.AtPrime.ringKrullDim_eq_height</a> though</p>",
        "id": 519476045,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1747775866
    },
    {
        "content": "<p>I'm answering the OP.<br>\nBut you are totally right and we should have that (and we should ditch <code>Ring.DimensionLEOne</code>).</p>",
        "id": 519476362,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747776008
    },
    {
        "content": "<p>Yeah, my comment wasn't really to the point. I should say that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsDedekindDomainDvr.ring_dimensionLEOne#doc\">docs#IsDedekindDomainDvr.ring_dimensionLEOne</a> is not general enough because DVR implies regularity.</p>",
        "id": 519478216,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1747776925
    },
    {
        "content": "<p>Yes but I am claiming (at least hoping) it only uses the fact that DVRs are of dim 1.</p>",
        "id": 519478451,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747777004
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.60Ring.2EDimensionLEOne_of_localization_maximal.60/near/519478451\">said</a>:</p>\n<blockquote>\n<p>Yes but I am claiming (at least hoping) it only uses the fact that DVRs are of dim 1.</p>\n</blockquote>\n<p>Thanks! I’ll try to study this proof so I can use it to prove the statement.</p>",
        "id": 519637460,
        "sender_full_name": "Yiming Fu",
        "timestamp": 1747840042
    },
    {
        "content": "<p>By the way, maybe using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ring.KrullDimLE#doc\">docs#Ring.KrullDimLE</a> is a better way to formalize this in general case.</p>",
        "id": 519638324,
        "sender_full_name": "Yiming Fu",
        "timestamp": 1747840206
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.60Ring.2EDimensionLEOne_of_localization_maximal.60/near/519478451\">said</a>:</p>\n<blockquote>\n<p>Yes but I am claiming (at least hoping) it only uses the fact that DVRs are of dim 1.</p>\n</blockquote>\n<p>Oh. I just went through the proof and noticed it actually uses the fact that the localization at a prime ideal has exactly one nonzero prime ideal (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsDiscreteValuationRing.iff_pid_with_one_nonzero_prime#doc\">docs#IsDiscreteValuationRing.iff_pid_with_one_nonzero_prime</a>), which is stronger than the dimension is ≤ 1.</p>",
        "id": 519646873,
        "sender_full_name": "Yiming Fu",
        "timestamp": 1747842394
    },
    {
        "content": "<p>I don’t think this is stronger if you know your original ring is a domain to begin with?<br>\nBut anyways if it takes more than one minute to generalize the proof you should just stop and follow Junyan’s suggestion above because that is the right thing to do instead.</p>",
        "id": 519648187,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747842705
    },
    {
        "content": "<p>Sorry. I made a mistake. Here it is true since its localization is a local domain.</p>",
        "id": 519649705,
        "sender_full_name": "Yiming Fu",
        "timestamp": 1747843130
    },
    {
        "content": "<p>And I will try to do the generalized version.</p>",
        "id": 519649969,
        "sender_full_name": "Yiming Fu",
        "timestamp": 1747843200
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749369\">Yiming Fu</span> has marked this topic as resolved.</p>",
        "id": 519664097,
        "sender_full_name": "Notification Bot",
        "timestamp": 1747847610
    },
    {
        "content": "<p>BTW this result is used in here <a href=\"https://github.com/acmepjz/lean-iwasawa/pull/5\">https://github.com/acmepjz/lean-iwasawa/pull/5</a>. Great work!</p>",
        "id": 519757491,
        "sender_full_name": "Jz Pan",
        "timestamp": 1747896235
    },
    {
        "content": "<p>Now I open a PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/29924\">#29924</a>.</p>",
        "id": 541212894,
        "sender_full_name": "Yiming Fu",
        "timestamp": 1758715834
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"749369\">@Yiming Fu</span> out of curiosity, do you remember how you got <code>=&gt;</code> in the code? I'm asking because it suggests some kind of outdated source (the consensus now is <code>↦</code> if I understand correctly)</p>",
        "id": 541245627,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758724512
    },
    {
        "content": "<p>I don't think you understand correctly :)</p>",
        "id": 541245900,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758724584
    },
    {
        "content": "<p>Oh, this minor inconsistency is caused by autocomplete, sometimes I forgot to format them.</p>",
        "id": 541246289,
        "sender_full_name": "Yiming Fu",
        "timestamp": 1758724695
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> I think it was discussed here before but I can't find the topic because I can't just search for <code>↦</code>. Do you know where the thread is?</p>",
        "id": 541246363,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758724719
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"749369\">@Yiming Fu</span> What do you mean by autocomplete?</p>",
        "id": 541246412,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758724731
    },
    {
        "content": "<p>From the IDE (such as Copilot).</p>",
        "id": 541246667,
        "sender_full_name": "Yiming Fu",
        "timestamp": 1758724801
    },
    {
        "content": "<p>It is only Copilot, I think.</p>",
        "id": 541246795,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758724832
    },
    {
        "content": "<p>now I wonder why Copilot is suggesting <code>=&gt;</code>. I think Copilot only has access to the files you have opened, so it must have gotten that somewhere...</p>",
        "id": 541246863,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758724852
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"749369\">@Yiming Fu</span> ok, the thread was <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Switch.20to.20.E2.86.A6.20.28.5Cmapsto.29.20globally/with/535446926\">#mathlib4 &gt; Switch to ↦ (\\mapsto) globally</a> and the results were 29 : 15 : 23 for <code>↦</code> vs. <code>=&gt;</code> vs. both so it wasn't really universal that <code>=&gt;</code> should be banned, so the above was just my personal coding style.</p>",
        "id": 541250698,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758725770
    },
    {
        "content": "<p>so you can decide between <code>↦</code> and <code>=&gt;</code>.</p>",
        "id": 541250962,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1758725842
    }
]