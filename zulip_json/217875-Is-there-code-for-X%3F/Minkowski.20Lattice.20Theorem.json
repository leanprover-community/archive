[
    {
        "content": "<p>Is anybody already working on Minkowski's theorem? <a href=\"https://en.wikipedia.org/wiki/Minkowski%27s_theorem\">https://en.wikipedia.org/wiki/Minkowski%27s_theorem</a><br>\nI'm thinking of formalising it.</p>",
        "id": 234848407,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1618578062
    },
    {
        "content": "<p>I think <span class=\"user-mention\" data-user-id=\"127136\">@Alex J. Best</span> has a PR on (parts of?) it</p>",
        "id": 234848545,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1618578112
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib/issues/2819\">#2819</a></p>",
        "id": 234848643,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1618578135
    },
    {
        "content": "<p>Oh right, thanks! This seems a bit dead, though <span aria-label=\"frown\" class=\"emoji emoji-1f641\" role=\"img\" title=\"frown\">:frown:</span></p>",
        "id": 234849463,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1618578447
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> yes, it is quite dead! At the time I came to the conclusion that measure theory needed more development to prove some of the key results, <a href=\"#narrow/stream/263328-triage/topic/random.20PR.3A.20.5BWIP.5D.20feat.28number_theory.2Fgeometry_of_numbers.29.3A.2E.2E.2E/near/215254314\">https://leanprover.zulipchat.com/#narrow/stream/263328-triage/topic/random.20PR.3A.20.5BWIP.5D.20feat.28number_theory.2Fgeometry_of_numbers.29.3A.2E.2E.2E/near/215254314</a> I think a lot of this is now possible thanks to the work of many people (lots of credit to Floris and Yury though!). So I definitely think its high time to revive this PR, or rewrite it completely lol. I think I will have more time for lean in the next few weeks (I just submitted my PhD thesis today!) so I'm happy to collaborate on this <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span>.</p>",
        "id": 234891222,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1618593733
    },
    {
        "content": "<p>Congrats on submitting your thesis! <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 234891398,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1618593824
    },
    {
        "content": "<p>I would love to collaborate with you on it! To put in context, I'm looking for a nice result (if possible in combinatorics) to formalize during my summer internship with <span class=\"user-mention silent\" data-user-id=\"246273\">Bhavik Mehta</span>. How much time do you think still need to be poured in to make the proof work?</p>",
        "id": 234965364,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1618641339
    },
    {
        "content": "<p>Four years later, I am back at it: Now that Minkowski's theorem is in mathlib, I am considering formalising Minkowski's <em>second</em> theorem. Is anybody working on that?</p>",
        "id": 560555246,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1764237281
    },
    {
        "content": "<p>The statement is that, if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Λ</mi></mrow><annotation encoding=\"application/x-tex\">\\Lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\">Λ</span></span></span></span> is a lattice in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>d</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\R^d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span></span></span> and $K \\subseteq R^d$$ is a centrally symmetric convex body, then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mn>1</mn></msub><mo>…</mo><msub><mi>λ</mi><mi>n</mi></msub><mrow><mi mathvariant=\"normal\">v</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">l</mi></mrow><mtext> </mtext><mi>K</mi><mo>≤</mo><mrow><mi mathvariant=\"normal\">c</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">v</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">l</mi></mrow><mtext> </mtext><mi mathvariant=\"normal\">Λ</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda_1 \\dots \\lambda_n \\mathrm{vol}\\ K \\le \\mathrm{covol}\\ \\Lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathrm\">vol</span></span><span class=\"mspace\"> </span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">covol</span></span><span class=\"mspace\"> </span><span class=\"mord\">Λ</span></span></span></span>, where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\lambda_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span>-th successive minimum of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span>, ie <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>λ</mi><mi>i</mi></msub><mo>:</mo><mo>=</mo><mi>inf</mi><mo>⁡</mo><mo stretchy=\"false\">{</mo><mi>λ</mi><mo>≥</mo><mn>0</mn><mo>∣</mo><mi>dim</mi><mo>⁡</mo><mrow><mi mathvariant=\"normal\">s</mi><mi mathvariant=\"normal\">p</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">n</mi></mrow><mo stretchy=\"false\">(</mo><mi>λ</mi><mi>K</mi><mo>∩</mo><mi mathvariant=\"normal\">Λ</mi><mo stretchy=\"false\">)</mo><mo>≥</mo><mi>i</mi><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\lambda_i := \\inf\\{\\lambda ≥ 0 \\mid \\dim\\mathrm{span}(\\lambda K \\cap \\Lambda) \\ge i\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">λ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">in<span style=\"margin-right:0.07778em;\">f</span></span><span class=\"mopen\">{</span><span class=\"mord mathnormal\">λ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">dim</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">span</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">λ</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∩</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">Λ</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">}</span></span></span></span>.</p>",
        "id": 560555280,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1764237291
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"488648\">@Xavier Roblot</span> ?</p>",
        "id": 560555931,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1764237470
    },
    {
        "content": "<p>No, I am not working on anything related to lattices at the moment. But I think it would be very interesting to have this result in Mathlib.</p>",
        "id": 560560951,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1764238929
    },
    {
        "content": "<p>Just noticed this thread…. <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> if you’re embarking on this, I would love to rely on it. The proof of Schmidt’s bounds I was hoping to formalize here rely on Minkowski’s second theorem: <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Counting.20isomorphism.20classes/with/560866287\">https://leanprover.zulipchat.com/#narrow/channel/217875-Is-there-code-for-X.3F/topic/Counting.20isomorphism.20classes/with/560866287</a></p>",
        "id": 560960161,
        "sender_full_name": "Kevin Wilson",
        "timestamp": 1764467198
    },
    {
        "content": "<p>Got it! The proof seems really quite advanced in comparison to the statement, so I might stop at defining the successive minima and proving the existence of a directional basis for now. I am trying to use this project as a way for my friend to learn lean.</p>",
        "id": 560975298,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1764485515
    },
    {
        "content": "<p>It is surprisingly tricky. In his book, Cassels says \"The proof of [the upper bound in the second theorem] remains difficult,\" whereas the lower bound is \"almost trivial.\"</p>",
        "id": 561029445,
        "sender_full_name": "Kevin Wilson",
        "timestamp": 1764534427
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> I had a moment to get back to this, and I think that one approach would be to prove the theorem when the convex body is just the sphere. That's a much easier theorem (and pretty much just needs SVD and some accounting).</p>",
        "id": 568597772,
        "sender_full_name": "Kevin Wilson",
        "timestamp": 1768665493
    },
    {
        "content": "<p>Oh unfortunately that doesn't cover my use case, which would instead use a parallelepiped to show that a Bohr set contains a large generalised arithmetic progression.</p>",
        "id": 568598006,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1768665696
    },
    {
        "content": "<p>Hmm I don’t think it’s too much harder to prove in the case the convex body is the sphere of a norm. Is that true of your parallelepiped (eg if A is the basis of the parallelepiped then perhaps your parallelepiped is the sphere of x -&gt; |A x|_oo?</p>",
        "id": 568603776,
        "sender_full_name": "Kevin Wilson",
        "timestamp": 1768671136
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> I took a shot at thinking through what the definition of successive minima should be. In basically every application I've come across, the convex body is just the ball of a norm. With that in mind, one definition of successive minimum that seems amenable to formalization is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- The set of max-norms of linearly independent `(i+1)`-tuples from `L`. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">lambdaSet</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"bp\">‖</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">''</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">LinearIndependent</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span>\n\n<span class=\"sd\">/-- The `i`-th successive minimum of `L`. -/</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">successiveMinimum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">sInf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lambdaSet</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Then it's not hard to show (with some additional assumptions):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">FiniteDimensional</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hL</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">DiscreteTopology</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lambdaSet_finite_Iic</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lambdaSet</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Iic</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">successiveMinimum_attained</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hne</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lambdaSet</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">Nonempty</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">LinearIndependent</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">successiveMinimum</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>It's a bit harder to show, but not too bad, so show</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">successiveMinimum_set</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hne</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">lambdaSet</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">Nonempty</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">LinearIndependent</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">successiveMinimum</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>If you're OK with it, I'm happy to write that up!</p>",
        "id": 572049717,
        "sender_full_name": "Kevin Wilson",
        "timestamp": 1770260274
    },
    {
        "content": "<p>But then why not do it for any convex symmetric set? They all are the convex unit ball of some (semi)norm, namely their gauge: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=gauge#doc\">docs#gauge</a></p>",
        "id": 572067127,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1770271640
    },
    {
        "content": "<p>Btw I have some partial progress myself. Here it is: <a href=\"https://github.com/leanprover-community/mathlib4/compare/master...YaelDillies:successive_min\">https://github.com/leanprover-community/mathlib4/compare/master...YaelDillies:successive_min</a></p>",
        "id": 572108349,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1770286859
    },
    {
        "content": "<p>I wanted to invite you to my fork so that you could push more stuff there, but I don't know your github handle! Please let me know once you have added it to your Zulip profile. Then I'll invite you</p>",
        "id": 572108990,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1770287054
    },
    {
        "content": "<p>Oh awesome! I’m @khwilson on GitHub</p>",
        "id": 572269476,
        "sender_full_name": "Kevin Wilson",
        "timestamp": 1770335413
    },
    {
        "content": "<p>An arbitary convex symmetric set includes, e.g., univ, and so some lemmas you’d expect to be true about successive minima (like they are positive) aren’t true for arbitrary convex symmetric sets.</p>\n<p>So you can define it, but all the theorems I know assume something like “positive finite volume” or “bounded” which ends up implying the gauge is positive definite</p>",
        "id": 572269655,
        "sender_full_name": "Kevin Wilson",
        "timestamp": 1770335549
    },
    {
        "content": "<p>This is the version that I was working on, btw: <a href=\"https://gist.github.com/khwilson/8ccd681a4e1c46e92186cfb6020f9305\">https://gist.github.com/khwilson/8ccd681a4e1c46e92186cfb6020f9305</a></p>\n<p>I like your approach to the directional set! Much cleaner than my reordering approach :-)</p>",
        "id": 572644755,
        "sender_full_name": "Kevin Wilson",
        "timestamp": 1770579373
    },
    {
        "content": "<p>Feel free to push stuff to my branch (and claim the copyright), I won't have time to work on this for the coming two months!</p>",
        "id": 572645239,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1770579901
    },
    {
        "content": "<p>What do you call the “second” Minkowski theorem on line 188? For me (and all the literature I ever read on the topic), it is the theorem on the product of successive minima, which is stronger than the theorem on the first minimum — that is sufficient to assert the existence of nontrivial lattice points.</p>",
        "id": 572720073,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1770629407
    },
    {
        "content": "<p>By the way, I feel useful that the definition of successive minima be not restricted to compact convex symmetric sets, but allow more flexibility. There are variants of the first Minkowski theorem in the non symmetric case, and the theory of indefinite forms is implicitly about non convex sets.</p>",
        "id": 572720608,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1770629498
    },
    {
        "content": "<p>While it is true that all compact convex symmetric sets come from (pseudo)norms, and norms are the relevant case for most practice, in mathlib, that would force the convex set to be given as an instance, and would probably make it complicated to play with several sets at once.</p>",
        "id": 572721113,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1770629586
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130609\">Antoine Chambert-Loir</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Minkowski.20Lattice.20Theorem/near/572720073\">said</a>:</p>\n<blockquote>\n<p>What do you call the “second” Minkowski theorem on line 188? For me (and all the literature I ever read on the topic), it is the theorem on the product of successive minima, which is stronger than the theorem on the first minimum — that is sufficient to assert the existence of nontrivial lattice points.</p>\n</blockquote>\n<p>Is <a href=\"https://github.com/leanprover-community/mathlib4/compare/master...YaelDillies:successive_min#diff-d728076b79df3c449c6c40c677eca7d57697d5441e94647cd191a9abe59c3345R188-R194\">https://github.com/leanprover-community/mathlib4/compare/master...YaelDillies:successive_min#diff-d728076b79df3c449c6c40c677eca7d57697d5441e94647cd191a9abe59c3345R188-R194</a> not a theorem on the product of successive minima?</p>",
        "id": 572722547,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1770629909
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130609\">Antoine Chambert-Loir</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Minkowski.20Lattice.20Theorem/near/572720608\">said</a>:</p>\n<blockquote>\n<p>I feel useful that the definition of successive minima be not restricted to compact convex symmetric sets, but allow more flexibility. There are variants of the first Minkowski theorem in the non symmetric case, and the theory of indefinite forms is implicitly about non convex sets.</p>\n</blockquote>\n<p>My version allows for this, a priori</p>",
        "id": 572722781,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1770629958
    },
    {
        "content": "<p>The theorem is about that, sorry, but the docstring doesn't seem to.</p>",
        "id": 572761320,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1770639743
    },
    {
        "content": "<p>OK, I got a chance to take a stab at this: <a href=\"https://github.com/leanprover-community/mathlib4/pull/35812\">https://github.com/leanprover-community/mathlib4/pull/35812</a></p>\n<p>cc <span class=\"user-mention\" data-user-id=\"130609\">@Antoine Chambert-Loir</span> <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> </p>\n<p>The strategy ended up being a bit verbose (I took the sequential compactness approach, somewhat for my own edification). I also wasn't sure if there was a better place to move the filter inequalities. I searched the library for a bit, but no place seemed like a good home.</p>",
        "id": 576023149,
        "sender_full_name": "Kevin Wilson",
        "timestamp": 1772112676
    },
    {
        "content": "<p>(Also, sorry Yael, I didn't have permission to push to your branch, so I just copied your commit to my fork.)</p>",
        "id": 576034398,
        "sender_full_name": "Kevin Wilson",
        "timestamp": 1772115332
    }
]