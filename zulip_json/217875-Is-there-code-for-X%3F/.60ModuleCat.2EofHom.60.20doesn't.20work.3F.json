[
    {
        "content": "<p>I have this theorem that used to work but not anymore... what's the fix now?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Matrix</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">u'</span><span class=\"w\"> </span><span class=\"n\">u''</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">v'</span><span class=\"w\"> </span><span class=\"n\">v''</span><span class=\"w\"> </span><span class=\"n\">w</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Œπ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">Œπ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">Œπ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">Œπ</span><span class=\"o\">]</span>\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">ofIsolinear</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">‚âÉ+*</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">ùü≠</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ModuleCat</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"n\">restrictScalars</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">.</span><span class=\"n\">toRingHom</span><span class=\"w\"> </span><span class=\"bp\">‚ãô</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"n\">restrictScalars</span>\n<span class=\"w\">    </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">toRingHom</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">obj</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">id</span>\n<span class=\"w\">    </span><span class=\"n\">map_add'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">intros</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">map_smul'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rintro</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">change</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">isModule</span><span class=\"bp\">.</span><span class=\"n\">smul</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">id_obj</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">RingEquiv</span><span class=\"bp\">.</span><span class=\"n\">toRingHom_eq_coe</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">comp_obj</span><span class=\"o\">,</span>\n<span class=\"w\">        </span><span class=\"n\">RingHom</span><span class=\"bp\">.</span><span class=\"n\">toMonoidHom_eq_coe</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">OneHom</span><span class=\"bp\">.</span><span class=\"n\">toFun_eq_coe</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">toOneHom_coe</span><span class=\"o\">,</span>\n<span class=\"w\">        </span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">coe_coe</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">RingHom</span><span class=\"bp\">.</span><span class=\"n\">coe_coe</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">RingHom</span><span class=\"bp\">.</span><span class=\"n\">id_apply</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ZeroHom</span><span class=\"bp\">.</span><span class=\"n\">coe_mk</span><span class=\"o\">,</span>\n<span class=\"w\">        </span><span class=\"n\">RingEquiv</span><span class=\"bp\">.</span><span class=\"n\">symm_apply_apply</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 490643363,
        "sender_full_name": "Edison Xie",
        "timestamp": 1735026127
    },
    {
        "content": "<p>What's the error now? When did you last update?</p>",
        "id": 490650661,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735030854
    },
    {
        "content": "<p>I get</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>synthesized type class instance is not definitionally equal to expression inferred by typing rules, synthesized\n  ModuleCat.instModuleCarrierObjRestrictScalars\ninferred\n  Module.compHom (‚Üë((ModuleCat.restrictScalars e.symm.toRingHom).obj X)) e.toRingHom\n</code></pre></div>",
        "id": 490652703,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1735032066
    },
    {
        "content": "<p>This could be related to <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20.60erw.60.20hell.20around.20concrete.20categories\">#mathlib4 &gt; Fixing the &#96;erw&#96; hell around concrete categories</a></p>",
        "id": 490654320,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1735033053
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.60ModuleCat.2EofHom.60.20doesn't.20work.3F/near/490650661\">said</a>:</p>\n<blockquote>\n<p>What's the error now? When did you last update?</p>\n</blockquote>\n<p>about 5 weeks ago</p>",
        "id": 490677583,
        "sender_full_name": "Edison Xie",
        "timestamp": 1735047347
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.60ModuleCat.2EofHom.60.20doesn't.20work.3F/near/490652703\">said</a>:</p>\n<blockquote>\n<p>I get</p>\n<p><div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>synthesized type class instance is not definitionally equal to expression inferred by typing rules, synthesized\n  ModuleCat.instModuleCarrierObjRestrictScalars\ninferred\n  Module.compHom (‚Üë((ModuleCat.restrictScalars e.symm.toRingHom).obj X)) e.toRingHom\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Yeah I've got the same error</p>",
        "id": 490677595,
        "sender_full_name": "Edison Xie",
        "timestamp": 1735047357
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.60ModuleCat.2EofHom.60.20doesn't.20work.3F/near/490654320\">said</a>:</p>\n<blockquote>\n<p>This could be related to <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20.60erw.60.20hell.20around.20concrete.20categories\">#mathlib4 &gt; Fixing the &#96;erw&#96; hell around concrete categories</a></p>\n</blockquote>\n<p>why is <code>mk</code> in <code>ModuleCat.Hom</code> private ... really makes life difficult <span aria-label=\"smiling face with tear\" class=\"emoji emoji-1f972\" role=\"img\" title=\"smiling face with tear\">:smiling_face_with_tear:</span> <span aria-label=\"smiling face with tear\" class=\"emoji emoji-1f972\" role=\"img\" title=\"smiling face with tear\">:smiling_face_with_tear:</span></p>",
        "id": 490679271,
        "sender_full_name": "Edison Xie",
        "timestamp": 1735048455
    },
    {
        "content": "<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ModuleCat.ofHom#doc\">docs#ModuleCat.ofHom</a></p>",
        "id": 490680638,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1735049470
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.60ModuleCat.2EofHom.60.20doesn't.20work.3F/near/490680638\">said</a>:</p>\n<blockquote>\n<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ModuleCat.ofHom#doc\">docs#ModuleCat.ofHom</a></p>\n</blockquote>\n<p>doesn't work I've tried... :((</p>",
        "id": 490680771,
        "sender_full_name": "Edison Xie",
        "timestamp": 1735049571
    },
    {
        "content": "<p>wait after I specified <code>Y</code> it did work why is that???</p>",
        "id": 490680942,
        "sender_full_name": "Edison Xie",
        "timestamp": 1735049714
    }
]