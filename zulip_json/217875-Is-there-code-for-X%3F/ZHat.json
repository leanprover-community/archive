[
    {
        "content": "<p>In another conversation <a class=\"message-link\" href=\"/#narrow/channel/217875-Is-there-code-for-X.3F/topic/Properties.20of.20prime.20subfield/near/503733637\">#Is there code for X? &gt; Properties of prime subfield @ üí¨</a> , David Loeffler and I were agreeing that mathlib should have a basic type <code>ZHat : Type</code>. This is a commutative topological ring defined mathematically as the projective limit of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mi>n</mi><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\Z/n\\Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathbb\">Z</span></span></span></span> as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> ranges over the positive integers ordered by divisibility. This type is a universal nonarchimedean completion of the integers, just as the reals are the archimedean completion of the rationals.</p>\n<p>In FLT we have been using <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/dc82779ea5d35e340af30c4ce6d6a14e6df72e8f/FLT/AutomorphicRepresentation/Example.lean#L17-L38\">this definition</a> for a year now; it has been battle-tested there and seems to be working fine. The actual definition of <code>ZHat</code> is an implementation detail of course; another way we could define it would be as a subring of the finite adeles of the rationals, which would I guess make it much easier to relate to the finite adeles of the rationals, but would have the disadvantage that there would be <code>HeightOneSpectrum (ùìû ‚Ñö)</code> everywhere, which would make basic API building a nightmare. With my proposed definition it's going to be easy relating this to any kind of completion of the integers. </p>\n<p>I am never quite sure how to approach decisions such as this. Would mathlib prefer a 100-line PR with the definition and a promise that it works, or a 300-plus-line PR proving that that it works? Anyway, before even embarking on either I thought I'd raise the question explicitly here.</p>",
        "id": 537091683,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756726902
    },
    {
        "content": "<p>Do we now have <code>IsInverseLimit</code> and <code>IsDirectLimit</code> now?</p>",
        "id": 537094523,
        "sender_full_name": "Edison Xie",
        "timestamp": 1756727925
    },
    {
        "content": "<p>I would go for the 300-line version. Eg would be nice to get an isom with product of <code>Z_[p]</code>s.</p>",
        "id": 537094667,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1756727981
    },
    {
        "content": "<p>I think the type of ZHat should be <code>Set Nat.Primes -&gt; Type</code>, sending a set of primes <code>S</code> to the S-adic completion of Z.</p>",
        "id": 537185974,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1756771599
    },
    {
        "content": "<p>As some kind of Ind-ring?</p>",
        "id": 537202221,
        "sender_full_name": "David Michael Roberts",
        "timestamp": 1756783761
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 537202231,
        "sender_full_name": "David Michael Roberts",
        "timestamp": 1756783779
    },
    {
        "content": "<p>We could also have an object of the same type as Adam Topaz‚Äôs suggestion, but instead  sending S to ZHat tensor S-integers, i.e., inverting the primes in S.</p>",
        "id": 537209467,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1756790108
    },
    {
        "content": "<p>This would also give QHat := <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mover accent=\"true\"><mi mathvariant=\"double-struck\">Z</mi><mo stretchy=\"true\">^</mo></mover><mo>‚äó</mo><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\widehat{\\Z}\\otimes\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0122em;vertical-align:-0.0833em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9289em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathbb\">Z</span></span><span class=\"svg-align\" style=\"width:calc(100% - 0.1667em);margin-left:0.1667em;top:-3.6889em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span style=\"height:0.24em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"0.24em\" viewBox=\"0 0 1062 239\" preserveAspectRatio=\"none\"><path d=\"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z\"/></svg></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">‚äó</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span>, which is another \"basic type\" IMO.</p>",
        "id": 537326706,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756831368
    }
]