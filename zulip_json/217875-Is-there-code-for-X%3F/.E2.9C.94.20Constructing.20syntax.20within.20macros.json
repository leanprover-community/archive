[
    {
        "content": "<p>I'm trying to write a macro to partially automate cases of a large induction, and I'm realizing I can't use <code>simp at $h</code> clauses</p>\n<p>Reduced case:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"s2\">\"my_tactic \"</span><span class=\"w\"> </span><span class=\"n\">ident</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span>\n<span class=\"kn\">macro_rules</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"n\">my_tactic</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">h</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>This fails since <code>$h</code> is an <code>TSyntax ident</code> but is expected to be <code>TSyntax [locationWildcard, locationHyp]</code>. I also can't change the syntax to be <code>location</code>.</p>\n<p>My question is: how do I construct the <code>location</code> from and <code>ident</code>? The <code>syntax</code> construction is quite opaque and I haven't been able to find any existing macro that tries to do it either`</p>",
        "id": 504212781,
        "sender_full_name": "Gavin R",
        "timestamp": 1741394894
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"s2\">\"my_tactic \"</span><span class=\"w\"> </span><span class=\"n\">ident</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span>\n<span class=\"kn\">macro_rules</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"n\">my_tactic</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"n\">ident</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 504212850,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1741394972
    },
    {
        "content": "<p>oh wow it's that simple -- thanks!</p>",
        "id": 504212944,
        "sender_full_name": "Gavin R",
        "timestamp": 1741395032
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"886623\">Gavin R</span> has marked this topic as resolved.</p>",
        "id": 504215140,
        "sender_full_name": "Notification Bot",
        "timestamp": 1741396387
    }
]