[
    {
        "content": "<p>I am attempting a definition by recursion, and need to introduce variables inside the definition.  Is there an example in the documentation I can follow?</p>\n<p>Here is (a snippet from) my attempt:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">my_langg</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">@&amp;</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&lt;=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">IsPrimePow</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">minFac</span>\n<span class=\"w\">       </span><span class=\"k\">else</span>\n<span class=\"w\">           </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"bp\">âˆƒ</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\">  </span><span class=\"bp\">âˆ§</span><span class=\"w\">  </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">âˆ£</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span><span class=\"w\">  </span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span><span class=\"w\">  </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">âˆ£</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span><span class=\"w\">  </span><span class=\"bp\">Â¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">--failed to synthesize</span>\n<span class=\"w\">                 </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\">  </span><span class=\"n\">p</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">factorization</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">factorization</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n<span class=\"w\">                      </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">my_langg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"n\">p</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">factorization</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">))</span>\n<span class=\"w\">                      </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">my_langg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"n\">q</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">factorization</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">))</span>\n<span class=\"w\">          </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"n\">termination_by</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">decreasing_by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- p^(n.factorization p) &gt;1 and divides??</span>\n</code></pre></div>\n<p>After this hurdle is the hurdle of showing decreasing_by; is there an example which uses the list of the factorization of n ?</p>",
        "id": 572243899,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770323648
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a></p>",
        "id": 572259400,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1770330231
    },
    {
        "content": "<p>If I could get the example  working, I would not have the question.  Here is a longer version:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">my_f</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\">  </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">IsPrimePow</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">minFac</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"bp\">âˆƒ</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">âˆ£</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span><span class=\"w\">  </span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span><span class=\"w\">  </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">âˆ£</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">âˆ§</span><span class=\"w\">  </span><span class=\"bp\">Â¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\">  </span><span class=\"n\">p</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">factorization</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">factorization</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n<span class=\"w\">          </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">my_f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">factorization</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">))</span>\n<span class=\"w\">          </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">my_f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">factorization</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">))</span>\n<span class=\"w\">      </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"n\">termination_by</span><span class=\"w\"> </span><span class=\"n\">n</span>\n</code></pre></div>\n<p>This again fails to synthesize at \"exists p q ...\".  There are other issues such as p and q not being defined, but the first line with problems has \"exists\".</p>",
        "id": 572261866,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770331297
    },
    {
        "content": "<p>Do I understand correctly that you are trying to define <a href=\"https://oeis.org/A088387\">https://oeis.org/A088387</a>? In that case, why not do something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">mostSignificantPrimeFactor</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">primeFactors</span><span class=\"bp\">.</span><span class=\"n\">image</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">factorization</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">max</span><span class=\"bp\">.</span><span class=\"n\">getD</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">minFac</span>\n</code></pre></div>",
        "id": 572261967,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1770331351
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"873547\">@Robin Arnez</span>  , because of ignorance, because I am still at the beginning of my journey, and   because I am also concerned about whether Lean can prove termination for me.  However, I will try your suggestion. Thanks</p>",
        "id": 572262324,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770331528
    },
    {
        "content": "<p>Also, I am interested in recursive definitions.  If you have a similar shorthand for lcmint(n) == least common multiple of integers from [1,n], I would also be interested in that.</p>",
        "id": 572262458,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770331606
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"930113\">J. J. Issai (project started by GRP)</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Definition.20by.20recursion.3A.20introducing.20variables.2C.20etc.2E/near/572262458\">said</a>:</p>\n<blockquote>\n<p>If you have a similar shorthand for lcmint(n) == least common multiple of integers from [1,n], I would also be interested in that.</p>\n</blockquote>\n<p><a href=\"https://alexkontorovich.github.io/PrimeNumberTheoremAnd/docs/PrimeNumberTheoremAnd/Lcm.html#Lcm.L\">https://alexkontorovich.github.io/PrimeNumberTheoremAnd/docs/PrimeNumberTheoremAnd/Lcm.html#Lcm.L</a></p>",
        "id": 572262605,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770331689
    },
    {
        "content": "<p>btw if you're proving something about how this LCM grows (e.g. <code>â‰¥ 2^n</code> or <code>Î˜(e^O(n))</code>) I'd be interested to know</p>",
        "id": 572263043,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770331833
    },
    {
        "content": "<p>Actually, I am using the lcm as an upper bound for a different argument.  However, next on my todo list is product of primes in (j,k] is less than 4^(k-j) (for certain values of k and j).</p>",
        "id": 572263515,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770331987
    },
    {
        "content": "<p>Also, in Alex's (repo containing the) definition of L, why have <a href=\"http://_root_.id\">_root_.id</a> ?</p>",
        "id": 572263645,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770332061
    },
    {
        "content": "<p>If you want a diversion, I am willing to share Aristotle's version of lcmint.  (It is quite a bit longer, and I don't want to read its proof that lcmint(n) = lcm(1,...,n).)</p>",
        "id": 572263925,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770332192
    },
    {
        "content": "<p>You mean why the <code>_root_</code>? Well, there's a conflict with <a href=\"https://alexkontorovich.github.io/PrimeNumberTheoremAnd/docs/Mathlib/NumberTheory/ArithmeticFunction/Misc.html#ArithmeticFunction.id\">ArithmeticFunction.id</a></p>",
        "id": 572263973,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1770332211
    },
    {
        "content": "<p>Oh.  Why is the .id needed?  to resolve the term to a Nat ?</p>",
        "id": 572264074,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770332248
    },
    {
        "content": "<p>You mean why there's a function there at all? Well, that's just in the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.lcm#doc\">docs#Finset.lcm</a>. Think of it as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mtext>lcm</mtext><mrow><mi>x</mi><mo>âˆˆ</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><mi>n</mi><mo stretchy=\"false\">}</mo></mrow></msub><mtext>id</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\text{lcm}_{x \\in \\{1, ..., n\\}} \\text{id}(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1052em;vertical-align:-0.3552em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">lcm</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.5198em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">âˆˆ</span><span class=\"mopen mtight\">{</span><span class=\"mord mtight\">1</span><span class=\"mpunct mtight\">,</span><span class=\"mord mtight\">...</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mclose mtight\">}</span></span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3552em;\"><span></span></span></span></span></span></span><span class=\"mord text\"><span class=\"mord\">id</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span>. You could also write <code>fun x =&gt; x</code> but <code>id</code> is shorter.</p>",
        "id": 572264413,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1770332381
    },
    {
        "content": "<p>This lets you use the set only as an indexing set to what you're actually taking the LCM of, because you may want to have duplicates and a set doesn't allow that</p>",
        "id": 572264517,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770332414
    },
    {
        "content": "<p>AH.  Thumbs up since I can't find the emoji for enlightenment.  Thanks.</p>",
        "id": 572264777,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770332522
    },
    {
        "content": "<p>Doesn't Mathlib have a nice upper bound for (what I am calling) lcmint(n) ?</p>",
        "id": 572264896,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770332579
    },
    {
        "content": "<p>By what expression approximately? You can bound it by a factorial</p>",
        "id": 572264950,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770332608
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"930113\">J. J. Issai (project started by GRP)</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Definition.20by.20recursion.3A.20introducing.20variables.2C.20etc.2E/near/572263645\">said</a>:</p>\n<blockquote>\n<p>Also, in Alex's (repo containing the) definition of L, why have <a href=\"http://_root_.id\">_root_.id</a> ?</p>\n</blockquote>\n<p>btw this is Alex's repo but Terry Tao's definition</p>",
        "id": 572265110,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770332689
    },
    {
        "content": "<p>Well  I can poorly bound it by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>4</mn><mrow><mi>n</mi><mo>+</mo><mi>c</mi><msqrt><mi>n</mi></msqrt></mrow></msup></mrow><annotation encoding=\"application/x-tex\">4^{n + c\\sqrt{n}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9271em;\"></span><span class=\"mord\"><span class=\"mord\">4</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9271em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">c</span><span class=\"mord sqrt mtight\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8059em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mtight\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal mtight\">n</span></span></span><span style=\"top:-2.7659em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail mtight\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"1.08em\" viewBox=\"0 0 400000 1080\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z\"/></svg></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2341em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>, and Erd{\\o}s can do better with elementary means.  However I thought it would have a good bound in MathLib (at least log(lcmint(n)) should be bounded by a constant in Mathlib).</p>",
        "id": 572265256,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770332759
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"930113\">J. J. Issai (project started by GRP)</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Definition.20by.20recursion.3A.20introducing.20variables.2C.20etc.2E/near/572261866\">said</a>:</p>\n<blockquote>\n<p>This again fails to synthesize at \"exists p q ...\".</p>\n</blockquote>\n<p>The error message is:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>failed to synthesize instance of type class\n  Decidable (âˆƒ p q, Prime p âˆ§ p âˆ£ n âˆ§ Prime q âˆ§ q âˆ£ n âˆ§ Â¬p = q)\n</code></pre></div>\n<p>You have an if-then-else statement. In order to decide which branch to take at runtime, Lean has to have a way of figuring out whether the condition you provided is true or false (it has to synthesize a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Decidable#doc\">docs#Decidable</a> instance). But for the condition you provided (<code>âˆƒ p q, ...</code>) Lean was unable to do this automatically.</p>",
        "id": 572265431,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770332849
    },
    {
        "content": "<p>Sure you can <code>open Classical in</code> but then you have more errors because that def needs to extract the <code>p</code> and <code>q</code> from the <code>Exists</code></p>",
        "id": 572265529,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770332909
    },
    {
        "content": "<p>OK.  If I wanted to do a recursive definition of my_f, and I needed to introduce p and q, how would that be done?</p>",
        "id": 572265554,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770332923
    },
    {
        "content": "<p>I tried a version using .minFac (to avoid introducing p and q) but it got real ugly real fast.</p>",
        "id": 572265592,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770332944
    },
    {
        "content": "<p>Also, what would be a reason to prefer a recursive approach as opposed to the nice streamlined approaches suggested by you (Snir) and Robin?  Would it not be easier to prove (in Lean) properties with a recursive definition?</p>",
        "id": 572265815,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770333066
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"930113\">J. J. Issai (project started by GRP)</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Definition.20by.20recursion.3A.20introducing.20variables.2C.20etc.2E/near/572265256\">said</a>:</p>\n<blockquote>\n<p>Well  I can poorly bound it by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>4</mn><mrow><mi>n</mi><mo>+</mo><mi>c</mi><msqrt><mi>n</mi></msqrt></mrow></msup></mrow><annotation encoding=\"application/x-tex\">4^{n + c\\sqrt{n}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9271em;\"></span><span class=\"mord\"><span class=\"mord\">4</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9271em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mathnormal mtight\">c</span><span class=\"mord sqrt mtight\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8059em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mtight\" style=\"padding-left:0.833em;\"><span class=\"mord mathnormal mtight\">n</span></span></span><span style=\"top:-2.7659em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail mtight\" style=\"min-width:0.853em;height:1.08em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"400em\" height=\"1.08em\" viewBox=\"0 0 400000 1080\" preserveAspectRatio=\"xMinYMin slice\"><path d=\"M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z\"/></svg></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2341em;\"><span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>, and Erd{\\o}s can do better with elementary means.  However I thought it would have a good bound in MathLib (at least log(lcmint(n)) should be bounded by a constant in Mathlib).</p>\n</blockquote>\n<p>IIUC bounds on it are related to the prime-number-theory so would live in the PNT+ repo, see <a class=\"message-link\" href=\"/#narrow/channel/113488-general/topic/livestream.20announcement/near/540642072\">#general &gt; livestream announcement @ ðŸ’¬</a><br>\nI suggest asking for this statement in <a class=\"stream\" data-stream-id=\"423402\" href=\"/#narrow/channel/423402-PrimeNumberTheorem.2B\">#PrimeNumberTheorem+</a></p>",
        "id": 572265946,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770333152
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"930113\">J. J. Issai (project started by GRP)</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Definition.20by.20recursion.3A.20introducing.20variables.2C.20etc.2E/near/572265815\">said</a>:</p>\n<blockquote>\n<p>Also, what would be a reason to prefer a recursive approach as opposed to the nice streamlined approaches suggested by you (Snir) and Robin?  Would it not be easier to prove (in Lean) properties with a recursive definition?</p>\n</blockquote>\n<p>Personally I strive to avoid adding recursive definitions, since it requires proving a lot of basic API about it manually using induction. It's not hard to do so, but defining it in terms of other definitions leads to a better outcome IMO - it gives you access to more API.</p>",
        "id": 572266097,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770333259
    },
    {
        "content": "<p>This is not built-in anywhere, but for a relatively simple argument that delivers an explicit constant, you could try the proof of Proposition 12 <a href=\"https://terrytao.wordpress.com/2014/11/23/254a-notes-1-elementary-multiplicative-number-theory/\">here</a>. I think it would give log(lcm(1,...,n)) &lt; 4log(2)n.</p>\n<p>(Actually, never mind, one still needs to control the error term here. I'm not sure if this would be that easy to do with an explicit constant.)</p>",
        "id": 572275192,
        "sender_full_name": "Rushil Raghavan",
        "timestamp": 1770339041
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"1009134\">@Rushil Raghavan</span>  Thanks.  For the current project (SSS) I only need that lcm(1..n) is finite, as well as good bounds for small n (n&lt; 10), which I can compute by hand as needed.</p>",
        "id": 572275614,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1770339313
    }
]