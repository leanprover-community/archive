[
    {
        "content": "<p>It seems to me that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.iSup_insert#doc\">docs#Finset.iSup_insert</a> / <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.iSup_union#doc\">docs#Finset.iSup_union</a> / <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.iSup_singleton#doc\">docs#Finset.iSup_singleton</a> are true for <code>β := ℕ</code>, but they require a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CompleteLattice#doc\">docs#CompleteLattice</a> instance which doesn't hold for <code>ℕ</code>.<br>\nDo we have such theorems for <code>ℕ</code>? Or is there a counterexample?<br>\nIn general, are these theorems perhaps true for any <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ConditionallyCompleteLinearOrderBot#doc\">docs#ConditionallyCompleteLinearOrderBot</a> ?</p>",
        "id": 566849424,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1767833477
    },
    {
        "content": "<p>mwe</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">iSup_insert'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">⊔</span><span class=\"w\"> </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">iSup_union'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⊔</span><span class=\"w\"> </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">iSup_singleton'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"n\">a</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 566849862,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1767833904
    },
    {
        "content": "<p>They are true nvm <del>I found a counterexample</del> actually they're true</p>",
        "id": 566859323,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767841665
    },
    {
        "content": "<p>we don't seem to have a version of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=isLUB_iSup#doc\">docs#isLUB_iSup</a> for a <code>ConditionallyCompleteLinearOrderBot</code></p>",
        "id": 566860093,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767842390
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=isLUB_ciSup#doc\">docs#isLUB_ciSup</a> ?</p>",
        "id": 566860225,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1767842502
    },
    {
        "content": "<p>no that requires an additional <code>[Nonempty ι]</code> assumption</p>",
        "id": 566860311,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767842580
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.60iSup_insert.60.20and.20.60iSup_singleton.60.20for.20.60.E2.84.95.60/near/566860093\">said</a>:</p>\n<blockquote>\n<p>we don't seem to have a version of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=isLUB_iSup#doc\">docs#isLUB_iSup</a> for a <code>ConditionallyCompleteLinearOrderBot</code></p>\n</blockquote>\n<p>I slightly generalized it to <code>CompleteSemilatticeSup</code> in <a href=\"https://github.com/leanprover-community/mathlib4/pull/33740\">#33740</a></p>",
        "id": 566860470,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1767842728
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.60iSup_insert.60.20and.20.60iSup_singleton.60.20for.20.60.E2.84.95.60/near/566859323\">said</a>:</p>\n<blockquote>\n<p><del>They are true</del> nvm I found a counterexample</p>\n</blockquote>\n<p>I assume the problem is an empty set somewhere? I'm fine with an extra assumption</p>",
        "id": 566860562,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1767842780
    },
    {
        "content": "<p>no it's not the empty set</p>",
        "id": 566860583,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767842789
    },
    {
        "content": "<p>it's when a set isn't bounded above</p>",
        "id": 566860595,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767842797
    },
    {
        "content": "<p>ah hold on</p>",
        "id": 566860623,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767842816
    },
    {
        "content": "<p>you might also be running into <a href=\"https://leanprover-community.github.io/extras/pitfalls.html#accidental-double-iinf-or-isup\">this common pitfall</a></p>",
        "id": 566860754,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767842877
    },
    {
        "content": "<p>no actually it's fine this time since you don't get hit with the junk values for the inner <code>iSup</code></p>",
        "id": 566860812,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767842922
    },
    {
        "content": "<p>Do you have a proof?</p>",
        "id": 566861512,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1767843547
    },
    {
        "content": "<p>a proof for what</p>",
        "id": 566861553,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843588
    },
    {
        "content": "<p>your <code>Finset.iSup_insert'</code> and <code>Finset.iSup_union'</code> are false but <code>Finset.iSup_singleton'</code> is true</p>",
        "id": 566861585,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843623
    },
    {
        "content": "<p>hmm, then a counterexample?</p>",
        "id": 566861597,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1767843639
    },
    {
        "content": "<p>wait no</p>",
        "id": 566861618,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843662
    },
    {
        "content": "<p>it's finite</p>",
        "id": 566861619,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843664
    },
    {
        "content": "<p>if it's finite it's true I think?</p>",
        "id": 566861639,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843674
    },
    {
        "content": "<p>I forgot about the part where it's finite</p>",
        "id": 566861652,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843686
    },
    {
        "content": "<p>well this has been an emotional rollercoaster <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 566861656,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1767843697
    },
    {
        "content": "<p>yeah and it does work for any <code>ConditionallyCompleteLinearOrderBot</code></p>",
        "id": 566861688,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843735
    },
    {
        "content": "<p>since finite sets are bounded above</p>",
        "id": 566861694,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843740
    },
    {
        "content": "<p>finite nonempty sets also have a maximum</p>",
        "id": 566861722,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843777
    },
    {
        "content": "<p>can you try using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsMaxOn.iSup_eq#doc\">docs#IsMaxOn.iSup_eq</a></p>",
        "id": 566861743,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843800
    },
    {
        "content": "<p>and then the cases where one of them is empty can be done separately</p>",
        "id": 566861767,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767843830
    }
]