[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">infiniteCyclicIsoZ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Infinite</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">AddSubgroup</span><span class=\"bp\">.</span><span class=\"n\">zmultiples</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">≃+</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">|&gt;.</span><span class=\"n\">choose</span>\n<span class=\"w\">  </span><span class=\"n\">map_add'</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">choose_spec</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose_spec</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose_spec</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">      </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">add_smul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">sub_eq_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">sub_smul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">addOrderOf_dvd_iff_zsmul_eq_zero</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">Infinite</span><span class=\"bp\">.</span><span class=\"n\">addOrderOf_eq_zero_of_forall_mem_zmultiples</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">    </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sub_eq_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">  </span><span class=\"n\">invFun</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">i</span>\n<span class=\"w\">  </span><span class=\"n\">left_inv</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">|&gt;.</span><span class=\"n\">choose_spec</span>\n<span class=\"w\">  </span><span class=\"n\">right_inv</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">|&gt;.</span><span class=\"n\">choose_spec</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">sub_eq_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">sub_smul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">addOrderOf_dvd_iff_zsmul_eq_zero</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">Infinite</span><span class=\"bp\">.</span><span class=\"n\">addOrderOf_eq_zero_of_forall_mem_zmultiples</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">    </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sub_eq_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">this</span>\n</code></pre></div>\n<p>Do we have this in mathlib?</p>",
        "id": 534007211,
        "sender_full_name": "Edison Xie",
        "timestamp": 1755013036
    },
    {
        "content": "<p>you probably want to state that with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsAddCyclic#doc\">docs#IsAddCyclic</a></p>",
        "id": 534007374,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755013092
    },
    {
        "content": "<p>you can get an equivalence with <code>ZMod 0</code> by using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=zmodAddCyclicAddEquiv#doc\">docs#zmodAddCyclicAddEquiv</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.card_eq_zero_of_infinite#doc\">docs#Nat.card_eq_zero_of_infinite</a></p>",
        "id": 534007768,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755013223
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearOrderedAddCommGroup.int_orderAddMonoidIso_of_isLeast_pos#doc\">docs#LinearOrderedAddCommGroup.int_orderAddMonoidIso_of_isLeast_pos</a> and other things in that file</p>",
        "id": 534007789,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1755013229
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308899\">Yakov Pechersky</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Infinite.20cyclic.20group.20isomorphic.20to.20Z/near/534007789\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearOrderedAddCommGroup.int_orderAddMonoidIso_of_isLeast_pos#doc\">docs#LinearOrderedAddCommGroup.int_orderAddMonoidIso_of_isLeast_pos</a> and other things in that file</p>\n</blockquote>\n<p>It's not ordered</p>",
        "id": 534007898,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755013266
    },
    {
        "content": "<p>True, but it actually has one by the zpower necessary to hit reach it</p>",
        "id": 534008350,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1755013402
    },
    {
        "content": "<p>And really the hypothesis is that <code>closure {i} = \\top</code></p>",
        "id": 534008434,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1755013426
    },
    {
        "content": "<p>going from <code>ZMod 0</code> to <code>Int</code> is surprisingly tricky but I think you can get there with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Int.quotientSpanNatEquivZMod#doc\">docs#Int.quotientSpanNatEquivZMod</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ideal.span_zero#doc\">docs#Ideal.span_zero</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ideal.quotEquivOfEq#doc\">docs#Ideal.quotEquivOfEq</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RingEquiv.quotientBot#doc\">docs#RingEquiv.quotientBot</a></p>",
        "id": 534008483,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755013440
    },
    {
        "content": "<p><code>def ZModZero : ZMod 0 ≃+ ℤ := AddEquiv.refl _</code><br>\nI found that this would just work</p>",
        "id": 534008578,
        "sender_full_name": "Edison Xie",
        "timestamp": 1755013470
    },
    {
        "content": "<p>yeah but that's defeq abuse</p>",
        "id": 534008624,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755013486
    },
    {
        "content": "<p>..probably</p>",
        "id": 534008689,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755013502
    },
    {
        "content": "<p>isn't <code>ZMod 0</code> literaly defined as <code>Int</code>? <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 534008913,
        "sender_full_name": "Edison Xie",
        "timestamp": 1755013568
    },
    {
        "content": "<p>yes</p>",
        "id": 534008945,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755013579
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Infinite.20cyclic.20group.20isomorphic.20to.20Z/near/534008624\">said</a>:</p>\n<blockquote>\n<p>yeah but that's defeq abuse</p>\n</blockquote>\n<p>what if you state it and use it, so it's no longer defeq abuse but the \"canonical map\"</p>",
        "id": 534019902,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755017244
    },
    {
        "content": "<p>it stops being defeq abuse once you start relying on it</p>",
        "id": 534020076,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755017306
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Infinite.20cyclic.20group.20isomorphic.20to.20Z/near/534007374\">said</a>:</p>\n<blockquote>\n<p>you probably want to state that with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsAddCyclic#doc\">docs#IsAddCyclic</a></p>\n</blockquote>\n<p>the key difference here (as Buzzard would likely happily announce to you) is that there are actually two isomorphisms from A to Z, and it depends on the choice of the generator which is <code>i</code> here. If you use IsAddCyclic then you lose the freedom to depend on a generator.</p>",
        "id": 534020297,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755017384
    },
    {
        "content": "<p>then add <code>DecidableEq A</code> to make it computable too</p>",
        "id": 534021868,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755017987
    },
    {
        "content": "<p>i'm saying that you need to be able to feed in a generator in the input</p>",
        "id": 534022439,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755018191
    }
]