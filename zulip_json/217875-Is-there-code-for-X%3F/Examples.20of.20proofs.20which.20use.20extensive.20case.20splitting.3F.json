[
    {
        "content": "<p>In SampCert we have a <a href=\"https://github.com/leanprover/SampCert/blob/e2845750b4b79f3230fd1da8947cfb47b2713063/SampCert/Util/Log.lean\">file</a> containing a bunch of proofs involving conversions between different extended real number types. The proofs themselves are basically all just by cases, and I found that I could avoid doing a ton of redundant work by judiciously applying a few case splits at the start, and then using  <code>simp_all</code> to discharge all but a handful of the goals. </p>\n<p>The change to lean 4.9 broke a couple of these proofs, so now I'm trying to simplify this part of our codebase and make it more robust.  I'm wondering if there are any examples out there for automating these case/simp-heavy proofs I could read for inspiration?</p>",
        "id": 448625545,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1719931798
    },
    {
        "content": "<p>I've been doing a lot of similar things recently:<br>\n<a href=\"https://github.com/madvorak/vcsp/blob/ef4b96946118c6c8b71ea73ee85b61805d6af3d8/VCSP/LinearProgrammingE.lean#L299\">https://github.com/madvorak/vcsp/blob/ef4b96946118c6c8b71ea73ee85b61805d6af3d8/VCSP/LinearProgrammingE.lean#L299</a><br>\nThe readability can get slightly improved using the <code>match</code> tactic, but I don't have any tips on how to automate the case analyses.</p>",
        "id": 448647028,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1719936709
    },
    {
        "content": "<p>Thanks for the link!</p>",
        "id": 448663331,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1719941238
    },
    {
        "content": "<p>Your approach is a little strange in places; rather than building <code>Or</code>/<code>Exists</code> lemmas then using rcases, you can use <code>cases</code> directly</p>",
        "id": 448729776,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1719967481
    },
    {
        "content": "<p>(this changed quite recently, previously you had to write <code>cases x using EReal.rec</code> instead of just <code>cases x</code>)</p>",
        "id": 448729830,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1719967535
    },
    {
        "content": "<p>This would definitely simplify some of them. Thanks!</p>",
        "id": 448857345,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1720015057
    }
]