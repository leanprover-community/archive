[
    {
        "content": "<p>I am working on the proof (via Hensel's lemma) that Z_p has <code>p - 1</code> roots of unity. That can be stated as <code>HasEnoughRootsOfUnity ℤ_[p] (p - 1)</code> and also as <code>rootsOfUnity (p - 1) ℤ_[p] ≃* (ZMod p)ˣ</code>.</p>\n<p>In fact, there only <code>p - 1</code> roots of unity for <code>p != 2</code>. I'd like to say something like <code>allRootsOfUnity ℤ_[p] ≃* (ZMod p)ˣ</code>. Do we have something like an <code>allRootsOfUnity</code> subgroup?</p>",
        "id": 536858899,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1756499774
    },
    {
        "content": "<p>that would be <code>CommGroup.torsion (ZMod p)ˣ</code></p>",
        "id": 536859154,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756499924
    },
    {
        "content": "<p>For p=2 the roots of unity are canonically <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><msup><mi>p</mi><mn>2</mn></msup><mi mathvariant=\"double-struck\">Z</mi><msup><mo stretchy=\"false\">)</mo><mo>×</mo></msup><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">(\\Z/p^2\\Z)^\\times.</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mord mathbb\">Z</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">×</span></span></span></span></span></span></span></span><span class=\"mord\">.</span></span></span></span></p>",
        "id": 536859434,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756500104
    },
    {
        "content": "<p>I think I saw something saying that in an arbitrary field <code>F</code> all nonzero elements are roots of unity iff <code>F</code> has positive characteristic and is algebraic over its prime subfield</p>",
        "id": 536859666,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756500267
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/518132-combinatorial-games/topic/Nimbers/near/535016439\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://math.stackexchange.com/q/4193256\">https://math.stackexchange.com/q/4193256</a></p>\n</blockquote>",
        "id": 536859781,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756500325
    },
    {
        "content": "<p>That's true, but this is about p-adic integers which aren't a field</p>",
        "id": 536859935,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756500445
    },
    {
        "content": "<p>why is it called <code>p</code> if it's not prime</p>",
        "id": 536860064,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756500518
    },
    {
        "content": "<p>why would you do this to me</p>",
        "id": 536860083,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756500530
    },
    {
        "content": "<p>oh</p>",
        "id": 536860110,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756500545
    },
    {
        "content": "<p>I get it now</p>",
        "id": 536860115,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756500548
    },
    {
        "content": "<p>I misread sorry</p>",
        "id": 536860125,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756500554
    },
    {
        "content": "<p>this is what happens when you don't do algebra all day</p>",
        "id": 536860714,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756500903
    },
    {
        "content": "<p>Do we have anything that links <code>CommGroup.torsion</code> with the product of <code>rootsOfUnity</code>?</p>",
        "id": 536861073,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1756501108
    },
    {
        "content": "<p>probably not</p>",
        "id": 536861586,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756501324
    },
    {
        "content": "<p>do we have an additive version of <code>rootsOfUnity</code></p>",
        "id": 536861612,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756501333
    },
    {
        "content": "<p>I think I need to understand torsion better. In the meantime, I'll show that <code>CommGroup.torsion ℤ_[p]ˣ = rootsOfUnity (p - 1) ℤ_[p]</code>.</p>",
        "id": 536862124,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1756501641
    },
    {
        "content": "<p>(Again, for p != 2)</p>",
        "id": 536862191,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1756501676
    },
    {
        "content": "<p>working with torsion recently has been confusing I think because it was being refactored</p>",
        "id": 536862245,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756501712
    },
    {
        "content": "<p>Do we (eventually) want a statement using Witt vectors, e.g., mu(W(k)) always embeds in mu(W_2(k)) and surjects to mu(W_1(k))?</p>",
        "id": 536903313,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1756547023
    },
    {
        "content": "<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Z</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb Z_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> for the p-adic integers and for GF(p) is one of the worst notation clashes in mathematics</p>",
        "id": 537554501,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1756933601
    },
    {
        "content": "<p>I think we eventually also want the analogous assertion in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"script\">O</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathcal{O}_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> for any p-adic field <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span>. Namely, that the projection <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi mathvariant=\"script\">O</mi><mi>K</mi><mo>×</mo></msubsup><mo>→</mo><msup><mi>k</mi><mo>×</mo></msup></mrow><annotation encoding=\"application/x-tex\">\\mathcal{O}_K^\\times \\to k^\\times</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.105em;vertical-align:-0.2935em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8115em;\"><span style=\"top:-2.4065em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">×</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2935em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7713em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mbin mtight\">×</span></span></span></span></span></span></span></span></span></span></span> splits where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> is the residue field. (<span class=\"user-mention\" data-user-id=\"519559\">@Dagur Asgeirsson</span> and I were discussing this just yesterday!)</p>",
        "id": 537660541,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1756988917
    },
    {
        "content": "<p>There are two ways to do this, it seems. To prove surjectivity, one either needs to apply hensels lemma (do we have that such fields are henselian?), or by the construction of a root of unity by taking the limit of the Cauchy sequence iteratively applying x^p.</p>",
        "id": 537677692,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1756993866
    },
    {
        "content": "<p>I have it all done for Z_p, just need to PR it...</p>",
        "id": 537678643,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1756994148
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308899\">Yakov Pechersky</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Subgroup.20of.20all.20roots.20of.20unity/near/537677692\">said</a>:</p>\n<blockquote>\n<p>do we have that such fields are henselian?</p>\n</blockquote>\n<p>I think so? It should be essentially this <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Henselian.html#IsAdicComplete.henselianRing\">IsAdicComplete.henselianRing</a></p>",
        "id": 537709603,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1757002719
    },
    {
        "content": "<p>Well, I guess that depends on how you define \"p-adic field\", but I think <span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> et al. formalized that whatever definition they settled on implies adic completeness?</p>",
        "id": 537709824,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1757002814
    },
    {
        "content": "<p>If you are talking about the local field definition, we only showed that it is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CompleteSpace#doc\">docs#CompleteSpace</a> (as a metric space) but not yet that it <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsAdicComplete#doc\">docs#IsAdicComplete</a></p>",
        "id": 537710267,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1757002985
    },
    {
        "content": "<p>Aha, okay.</p>",
        "id": 537710462,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1757003050
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243562\">Adam Topaz</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Subgroup.20of.20all.20roots.20of.20unity/near/537660541\">said</a>:</p>\n<blockquote>\n<p>I think we eventually also want the analogous assertion in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"script\">O</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathcal{O}_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> for any p-adic field <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span>. </p>\n</blockquote>\n<p>Surely it's at least true for all nonarch local fields, and maybe even for any field complete wrt a nontrivial nonarch norm or something like that?</p>",
        "id": 537721535,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1757007277
    },
    {
        "content": "<p>Just the Z_p p-1 case handled here: <a href=\"https://github.com/leanprover-community/mathlib4/pull/29425\">#29425</a>. The general case would follow a similar argument. Would need more API work to prepare the general statement, so I thought to get this one on the review queue for now.</p>",
        "id": 538121192,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1757298101
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/29517\">#29517</a> for </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">torsion_eq_biSup_rootsOfUnity</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">CommGroup</span><span class=\"bp\">.</span><span class=\"n\">torsion</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">ˣ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">rootsOfUnity</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n</code></pre></div>",
        "id": 538742004,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1757540270
    }
]