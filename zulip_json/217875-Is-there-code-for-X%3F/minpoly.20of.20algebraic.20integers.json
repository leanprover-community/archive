[
    {
        "content": "<p>I could not find the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">NumberField</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NumberField</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ùìû</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">minpoly</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">minpoly</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>What would be the most efficient way to prove that? and what would be the right generality to state the result?</p>",
        "id": 546856169,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1761299843
    },
    {
        "content": "<p>Ok, so one answer to the first question is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">NumberField</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NumberField</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ùìû</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">minpoly</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">minpoly</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">map_injective</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"n\">‚Ñö</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">injective_int</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">minpoly</span><span class=\"bp\">.</span><span class=\"n\">isIntegrallyClosed_eq_field_fractions'</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">isIntegral_coe</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">minpoly</span><span class=\"bp\">.</span><span class=\"n\">isIntegrallyClosed_eq_field_fractions</span><span class=\"w\"> </span><span class=\"n\">‚Ñö</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">isIntegral</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 546861329,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1761301189
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">NumberField</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NumberField</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ùìû</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">minpoly</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">minpoly</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">minpoly</span><span class=\"bp\">.</span><span class=\"n\">algebraMap_eq</span><span class=\"w\"> </span><span class=\"n\">RingOfIntegers</span><span class=\"bp\">.</span><span class=\"n\">coe_injective</span><span class=\"w\"> </span><span class=\"n\">x</span>\n</code></pre></div>",
        "id": 546861863,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761301386
    },
    {
        "content": "<p>That's even better</p>",
        "id": 546861949,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1761301413
    },
    {
        "content": "<p>not sure why <code>exact?</code> doesn't find it, probably because there is no <code>algebraMap</code> in your statement</p>",
        "id": 546861988,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761301425
    },
    {
        "content": "<p>Do you think it's worth adding as a (simp) lemma?</p>",
        "id": 546862139,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1761301476
    },
    {
        "content": "<p>Do we often write <code>(x : K)</code>?</p>",
        "id": 546862234,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761301511
    },
    {
        "content": "<p>Well, I have at least one example <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> But, I see your point. I'll inline the proof instead.</p>",
        "id": 546862342,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1761301552
    },
    {
        "content": "<p>I mean, we should decide which is the canonical way of turning <code>x</code> into an element of <code>K</code>.</p>",
        "id": 546862344,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761301553
    },
    {
        "content": "<p>I think coercion is the most natural way since we, or at least me, still see <code>ùìû K</code> as a subset of <code>K</code> even if it is not anymore.</p>",
        "id": 546862641,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1761301658
    },
    {
        "content": "<p>In my case, I needed the result because of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsPrimitiveRoot.coe_toInteger#doc\">docs#IsPrimitiveRoot.coe_toInteger</a> where coercion is used</p>",
        "id": 546863320,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1761301933
    },
    {
        "content": "<p>Yeah, I see there no <code>simp</code> normal form here. Anyway the minimal polynomial is so ubiquitous that having your lemma is probably fine.</p>",
        "id": 546863330,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761301937
    },
    {
        "content": "<p>Ok, I'll add in the PR where I need it. Thanks!</p>",
        "id": 546863682,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1761302072
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/minpoly.20of.20algebraic.20integers/near/546861988\">said</a>:</p>\n<blockquote>\n<p>there is no <code>algebraMap</code> in your statement</p>\n</blockquote>\n<p>this sounds like a tricky situation, we can't probably have 10 lemmas whenever we mention algebraMap</p>",
        "id": 546961943,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761332625
    },
    {
        "content": "<p>i mean usually we try to keep algebraMap as the simpNF but that is clearly not the case for Int and Nat which is why actually every lemma does usually have a separate form for Nat.cast and Int.cast...</p>",
        "id": 546962036,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761332658
    },
    {
        "content": "<p>which is quite inefficient</p>",
        "id": 546962070,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761332673
    }
]