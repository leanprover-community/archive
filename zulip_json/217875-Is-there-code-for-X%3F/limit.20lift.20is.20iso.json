[
    {
        "content": "<p>I'd like to prove that a map defined as a <code>limit.lift</code> of some cone over some diagram is an isomorphism by proving that this cone is a limit cone. Is there a theorem for this?</p>\n<p>I see some related things that would be less efficient to use, for instance, that a cone morphism between two limit cones is an isomorphism. Suggestions very welcome!</p>",
        "id": 455121935,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1722345738
    },
    {
        "content": "<p>Is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.Limits.IsLimit.conePointUniqueUpToIso#doc\">docs#CategoryTheory.Limits.IsLimit.conePointUniqueUpToIso</a> what you're looking for?</p>",
        "id": 455122085,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1722345789
    },
    {
        "content": "<p>This is close, but since I want a specific map to be an isomorphism, I'd have to check that the arrow of the isomorphism given in the conclusion of <code>conePointUniqueUpToIso</code> equals the specific component <code>cone.pt</code> (which is by definition) and then that this map agrees with my original <code>limit.lift</code> (which is probably a theorem) and then conclude that the latter map is an isomorphism since it is equal to an isomorphism.</p>",
        "id": 455123355,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1722346170
    },
    {
        "content": "<p>Or is there a way to avoid all that?</p>",
        "id": 455124406,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1722346478
    },
    {
        "content": "<p>The proof that the <code>hom</code> of this isomorphism equals <code>limit.lift</code> is by <code>rfl</code>:</p>",
        "id": 455125823,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1722346908
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">тед</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Cone</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsLimit</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HasLimit</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsIso</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">limit</span><span class=\"bp\">.</span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">inferInstanceAs</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsIso</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hc</span><span class=\"bp\">.</span><span class=\"n\">conePointUniqueUpToIso</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">limit</span><span class=\"bp\">.</span><span class=\"n\">isLimit</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">hom</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 455126683,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1722347174
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"519559\">@Dagur Asgeirsson</span> here is why I'm having trouble using the existing functions. I'm working on the file </p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/infty-cosmos/Mathlib/NotInfinityCosmos.lean\">https://github.com/leanprover-community/mathlib4/blob/infty-cosmos/Mathlib/NotInfinityCosmos.lean</a></p>\n<p>(apologies for its current state) on the theorem <code>nerve2coskNatTrans.component_isIso</code>. It would be nice if I could work backwards from the goal to the statement I'm trying to prove (that something or other is a limit cone) but Lean doesn't let me refine the goal first using <code>Iso.isIso_hom</code> and then ideally using <code>conePointUniqueUpToIso ?_ (limit.islimit _)</code>. </p>\n<p>At the same time the lean info view doesn't display full information about the cone that I'm trying to prove is a limit cone, so I can't copy it out to work forwards to prove the statements I think I need. I know what this cone should be, but I don't know what lean thinks it is, so I'm worried, eg, that if I construct the cone myself to prove that it's a limit, I'll have demonstrated this for a cone that is equal (but not definitionally) or isomorphic to the one I need, and then have to struggle with that.</p>",
        "id": 455142186,
        "sender_full_name": "Emily Riehl",
        "timestamp": 1722350750
    },
    {
        "content": "<p>I'll have a look at your branch</p>",
        "id": 455142937,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1722350960
    },
    {
        "content": "<p>Can you fill in the two sorries in <a href=\"https://github.com/leanprover-community/mathlib4/blob/dagur/infty-cosmos/Mathlib/NotInfinityCosmos.lean#L547-L554\">https://github.com/leanprover-community/mathlib4/blob/dagur/infty-cosmos/Mathlib/NotInfinityCosmos.lean#L547-L554</a> ?</p>\n<p>Note that your branch is quite far behind the current master, and in particular the Kan extension API has changed quite a bit. You might want to merge master and see if you need to make any adaptations to make everything work before continuing</p>",
        "id": 455147585,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1722352277
    },
    {
        "content": "<p>I pushed my changes to a new branch based off of yours, if you want to use the code, just merge mine into yours</p>",
        "id": 455147812,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1722352349
    },
    {
        "content": "<p>(or copy the code)</p>",
        "id": 455147840,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1722352360
    }
]