[
    {
        "content": "<p>Is there Poisson summation formula over lattices, perhaps from other projects? Also somewhat related, what is the correct notion of \"dual lattice\" in Mathlib?</p>",
        "id": 462154394,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723565454
    },
    {
        "content": "<p>to answer your second question: use <code>OrderDual</code>, which will then get the instance via <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Lattice.html#OrderDual.instLattice\">OrderDual.instLattice</a></p>",
        "id": 462159784,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723566812
    },
    {
        "content": "<p>note the available notation <code>Œ±·µí·µà</code> for the type synonym</p>",
        "id": 462160002,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723566866
    },
    {
        "content": "<p>I'm not talking about the partial ordered set-kind lattice, but rather something like <code>Zlattice</code>, so a discrete full rank subgroup</p>",
        "id": 462160030,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723566870
    },
    {
        "content": "<p>i don't know that we have that, sadly? at least it didn't exist a few months ago...</p>",
        "id": 462160192,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723566911
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs\">#docs</a> IsZlattice</p>",
        "id": 462160240,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723566928
    },
    {
        "content": "<p>i suck at this</p>",
        "id": 462160269,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723566935
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Module/Zlattice/Basic.html#IsZlattice\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Module/Zlattice/Basic.html#IsZlattice</a></p>",
        "id": 462160275,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723566939
    },
    {
        "content": "<p>i see that i am not well versed in this corner of mathlib, so i'll shut up <span aria-label=\"face with hand over mouth\" class=\"emoji emoji-1f92d\" role=\"img\" title=\"face with hand over mouth\">:face_with_hand_over_mouth:</span></p>",
        "id": 462160485,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723566981
    },
    {
        "content": "<p>Why in the world is a normed structure required in the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsZlattice#doc\">docs#IsZlattice</a> ?</p>",
        "id": 462162184,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1723567384
    },
    {
        "content": "<p>because you want the topological structure to be related to the algebraic one, i'm guessing?</p>",
        "id": 462162757,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723567617
    },
    {
        "content": "<p>(topological structure is for discreteness)</p>",
        "id": 462162836,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723567658
    },
    {
        "content": "<p>sure, but we have classes for that with far weaker assumptions.</p>",
        "id": 462164132,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1723568179
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=TopologicalSpace#doc\">docs#TopologicalSpace</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousAdd#doc\">docs#ContinuousAdd</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousSMul#doc\">docs#ContinuousSMul</a> or <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousConstSMul#doc\">docs#ContinuousConstSMul</a>, for example.</p>",
        "id": 462164217,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1723568218
    },
    {
        "content": "<p>Also, the name is wrong, it should be <code>IsZLattice</code>, not <code>IsZlattice</code>.</p>",
        "id": 462164372,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1723568284
    },
    {
        "content": "<p>Lattices come with an inner product and a norm, right?</p>",
        "id": 462166813,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1723568985
    },
    {
        "content": "<p>Informally, I mean</p>",
        "id": 462166860,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1723569001
    },
    {
        "content": "<p>ah, if so then that's just my ignorance showing.</p>",
        "id": 462167770,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1723569233
    },
    {
        "content": "<p>Sometimes lattices are defined to be free abelian groups with nondegenerate inner products, and sometimes they are defined to be finite covolume discrete subgroups of Lie groups.  The Poisson summation formula is normally formulated for the second case, where the Lie group is a real vector space without a specified inner product.  However, the formula is often specialized to the first case, using the inner product to identify the real vector space with its dual.</p>",
        "id": 462388931,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1723656159
    },
    {
        "content": "<p>The word is also used to describe subsets of Q_p vector spaces which are free Z_p modules of the same rank!</p>",
        "id": 462416140,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1723668972
    },
    {
        "content": "<p>I am aware there are multiple definitions of lattices (at least the \"abelian group with inner product\" and \"discrete subgroup of e.g. R^n\"). For my purpose I'm just looking for the simplest of all, that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>‚àë</mo><mrow><mi>x</mi><mo>‚àà</mo><mi mathvariant=\"normal\">Œõ</mi></mrow></msub><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mrow><mi mathvariant=\"normal\">V</mi><mi mathvariant=\"normal\">o</mi><mi mathvariant=\"normal\">l</mi></mrow><mo stretchy=\"false\">(</mo><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">Œõ</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><msub><mo>‚àë</mo><mrow><mi>y</mi><mo>‚àà</mo><mover accent=\"true\"><mi mathvariant=\"normal\">Œõ</mi><mo stretchy=\"true\">^</mo></mover></mrow></msub><mover accent=\"true\"><mi>f</mi><mo stretchy=\"true\">^</mo></mover><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_{x \\in \\Lambda} f(x) = \\frac{1}{\\mathrm{Vol}(\\mathbb{R}^n / \\Lambda)} \\sum_{y \\in \\widehat{\\Lambda}} \\widehat{f}(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0771em;vertical-align:-0.3271em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">‚àë</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1786em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">x</span><span class=\"mrel mtight\">‚àà</span><span class=\"mord mtight\">Œõ</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3271em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.4544em;vertical-align:-0.52em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathrm mtight\">Vol</span></span><span class=\"mopen mtight\">(</span><span class=\"mord mtight\"><span class=\"mord mathbb mtight\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5935em;\"><span style=\"top:-2.786em;margin-right:0.0714em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mord mtight\">/Œõ</span><span class=\"mclose mtight\">)</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.52em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">‚àë</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3448em;\"><span style=\"top:-2.3985em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span><span class=\"mrel mtight\">‚àà</span><span class=\"mord accent mtight\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9233em;\"><span style=\"top:-2.7em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mtight\">Œõ</span></span><span class=\"svg-align\" style=\"top:-3.3833em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mtight\" style=\"height:0.24em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"0.24em\" viewBox=\"0 0 1062 239\" preserveAspectRatio=\"none\"><path d=\"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z\"/></svg></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4376em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9344em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span><span class=\"svg-align\" style=\"width:calc(100% - 0.3333em);margin-left:0.3333em;top:-3.6944em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span style=\"height:0.24em;\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"0.24em\" viewBox=\"0 0 1062 239\" preserveAspectRatio=\"none\"><path d=\"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z\"/></svg></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1944em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span>. The responses above (and my grep searches) suggests it's not in Mathlib, so my next question is how should I even state the theorem? Here is the existing Poisson summation formula:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"c1\">-- with additional conditions</span>\n<span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">(</span><span class=\"n\">‚Ñù</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">‚àë'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">‚àë'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ùìï</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">fourier</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">UnitAddCircle</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>So I tried to mimick the definition and define the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.LinearAlgebra.Dual</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Algebra.Module.Zlattice.Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Analysis.Fourier.FourierTransform</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Analysis.Fourier.PoissonSummation</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">FiniteDimensional</span><span class=\"w\"> </span><span class=\"n\">Zspan</span><span class=\"w\"> </span><span class=\"n\">FourierTransform</span>\n<span class=\"kd\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AddSubgroup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DiscreteTopology</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsZlattice</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span>\n\n<span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SchwartzMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">‚àë'</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+·µ•</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)))</span>\n<span class=\"w\">      </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">‚àë'</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dual</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ùìï</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">fourier</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>However, I am not sure how to fill in the <code>?_</code> blanks. Can someone help?</p>",
        "id": 462507927,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723712746
    },
    {
        "content": "<p>Also a not so relevant question, I tried stating the theorem for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mo>=</mo><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">L = \\mathbb{R}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> instead (since you can reduce the case for general lattices to it), but I don't know how to write \"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">Z</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>\" with a natural coercion/map to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span></p>",
        "id": 462508285,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723712893
    },
    {
        "content": "<p>(The reason I use <code>EuclideanSpace \\R (Fin d)</code> instead of <code>Fin d \\to \\R</code> or something is because it has an inner product space structure along with a bunch of stuff that the Real.fourierTransform (the \\MCF) seems to need)</p>",
        "id": 462508640,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723713067
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"481963\">@David Loeffler</span> (Hope you don't mind)<br>\nAlso I just found out about <code>VectorFourier</code>, is that the correct thing to use here?</p>",
        "id": 462510917,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723714160
    },
    {
        "content": "<p>I would probably go the other way. The Fourier transform has been set up in a very general way in mathlib, see <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=VectorFourier.fourierIntegral#doc\">docs#VectorFourier.fourierIntegral</a>, so you could get the Poisson summation formula in the similar generality, starting from two ‚Äúlattices‚Äù <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> with a bilinear form (that may or not induce an isomorphism from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span> to the dual of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span>, consider the scalar extensions <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>W</mi></mrow><annotation encoding=\"application/x-tex\">W</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">W</span></span></span></span> and the corresponding bilinear form.</p>\n<p>Now, the main difficulty is probably that mathlib is still missing many results about Fourier transforms in this generality. (Are there Fourier series?)</p>",
        "id": 462517125,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1723716663
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130609\">Antoine Chambert-Loir</span> <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/Poisson.20Summation.20on.20Lattices/near/462517125\">said</a>:</p>\n<blockquote>\n<p>Now, the main difficulty is probably that mathlib is still missing many results about Fourier transforms in this generality. (Are there Fourier series?)</p>\n</blockquote>\n<p>I don't think there is anything about more than 1-dimensional Fourier series (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=fourierBasis#doc\">docs#fourierBasis</a>); see <a href=\"#narrow/stream/217875-Is-there-code-for-X.3F/topic/D-dimensional.20Fourier.20series/near/459437761\">this thread</a>. Doing the higher-dimensional Fourier series should naturally involve lattices and their quotient tori.</p>\n<p>It is quite unclear to me, however, what is the right generality and approach for Fourier series for mathlib. For example, taking quotients by full-rank lattices leads to compact tori and Fourier <em>series</em>, and maybe the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>L</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">L^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> theory with Hilbert bases just needs to be restricted to such cases? Should the Fourier series theory be done separately or be obtained more directly from Fourier <em>transforms</em> (as Antoine indeed seems to suggest)?</p>\n<p>(In what we need for our project, we will probably for the moment only work with products of circles, thus \"straight tori\" <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>d</mi></msup><mi mathvariant=\"normal\">/</mi><msup><mi mathvariant=\"double-struck\">Z</mi><mi>d</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\R^d/\\Z^d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0991em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span></span></span></span>, and Fourier series for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>L</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">L^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> functions on them. But this is most likely not the mathlib generality.)</p>",
        "id": 462520301,
        "sender_full_name": "Kalle Kyt√∂l√§",
        "timestamp": 1723717840
    },
    {
        "content": "<p>At some point, <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span> and I were pursuing this. See, e.g., <a href=\"https://github.com/leanprover-community/mathlib4/pull/6223\">#6223</a> for the \"unfolding trick\" <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QuotientAddGroup.integral_mul_eq_integral_automorphize_mul#doc\">docs#QuotientAddGroup.integral_mul_eq_integral_automorphize_mul</a>. We wanted to prove Poisson as a \"baby\" trace formula, which indeed relies on the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>L</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">L^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">L</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> theory for the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">d</span></span></span></span>-torus <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>d</mi></msup><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">Œõ</mi></mrow><annotation encoding=\"application/x-tex\">\\R^d/\\Lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0991em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">d</span></span></span></span></span></span></span></span><span class=\"mord\">/Œõ</span></span></span></span>. Hopefully we'll get back to it some day...</p>",
        "id": 462556015,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1723730112
    },
    {
        "content": "<p>If I am understanding the discussion correctly, there are/were multiple projects that needs some kind of multi-dimensional Fourier series. Maybe it is a good idea for us to <del>ping everyone</del> come up with some appropriate generality for Mathlib and then formalise it! Also helps to deduplicate work. Full disclaimer, I don't know anything beyond maybe the most basic theory found in UG textbooks...</p>",
        "id": 462652560,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723761192
    },
    {
        "content": "<p>Meanwhile I think Poisson summation might be doable via the <code>VectorFourier.fourierIntegral</code> Antoine linked above, so I can try that</p>",
        "id": 462652667,
        "sender_full_name": "Gareth Ma",
        "timestamp": 1723761247
    }
]