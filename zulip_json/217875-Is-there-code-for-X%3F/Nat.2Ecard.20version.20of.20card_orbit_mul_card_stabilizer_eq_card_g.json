[
    {
        "content": "<p>we have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MulAction.card_orbit_mul_card_stabilizer_eq_card_group#doc\">docs#MulAction.card_orbit_mul_card_stabilizer_eq_card_group</a> which uses <code>Fintype</code> and thus can be difficult to use in some cases. The <code>Nat.card</code> version is very easy to prove (well, it's essentially the same proof) but seems to be lacking:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">module</span>\n\n<span class=\"n\">public</span><span class=\"w\"> </span><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Card</span>\n<span class=\"n\">public</span><span class=\"w\"> </span><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">GroupTheory</span><span class=\"bp\">.</span><span class=\"n\">GroupAction</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MulAction</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">MulAction</span><span class=\"bp\">.</span><span class=\"n\">card_orbit_mul_card_stabilizer_eq_card_group'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">MulAction</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">orbit</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">stabilizer</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">card_congr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulAction</span><span class=\"bp\">.</span><span class=\"n\">orbitProdStabilizerEquivGroup</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Does it exist somewhere in another form? Should it be added to Mathlib otherwise? Note that it cannot be in the same file as <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MulAction.card_orbit_mul_card_stabilizer_eq_card_group#doc\">docs#MulAction.card_orbit_mul_card_stabilizer_eq_card_group</a> since this file contains the line</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">assert_not_exists</span><span class=\"w\"> </span><span class=\"n\">Cardinal</span>\n</code></pre></div>",
        "id": 568981758,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1768903094
    },
    {
        "content": "<p>I have a branch to redefine <code>Nat.card</code> without cardinals that I should have another look at</p>",
        "id": 568986581,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1768904430
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"488648\">Xavier Roblot</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Nat.2Ecard.20version.20of.20card_orbit_mul_card_stabilizer_eq_card_g/near/568981758\">said</a>:</p>\n<blockquote>\n<p>Does it exist somewhere in another form?</p>\n</blockquote>\n<p>Yes: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MulAction.index_stabilizer#doc\">docs#MulAction.index_stabilizer</a> (but I agree that the cardinal dependence is annoying and should be removed).</p>",
        "id": 568993243,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1768906363
    },
    {
        "content": "<p>Why do we want <code>Nat.card</code> without cardinals? I think the real goal should be to minimize cardinal imports.</p>",
        "id": 569176904,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1768974983
    },
    {
        "content": "<p>Or split out the material that doesn't depend on choice or Schröder-Bernstein or all the actually technical stuff</p>",
        "id": 569176971,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1768975035
    },
    {
        "content": "<p>I don't know that \"we\" (as in the mathlib maintainer) want it, but cardinals seem somewhat heavy just to get the number of elements in a finite type, so I wanted to figure out how much work it would be not to use them</p>",
        "id": 569182628,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1768978585
    },
    {
        "content": "<p>Cardinals are nothing more than a <code>Quotient</code> of <code>Type</code>. We could probably define them in <code>Init</code> if we wanted to.</p>",
        "id": 570198040,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1769465539
    }
]