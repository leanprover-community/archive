[
    {
        "content": "<p>I am trying to prove that the product objects in <code>AddGrpCat</code> are isomorphic to the direct products of <code>AddGroup</code>s. </p>\n<p>I guess this is already available in mathlib in some form. I tried Loogle/LeanSearch/..., but I could not find anything that allowed me to conclude the proof. Perhaps it is a special case of a more general result I can't think of. (I could try constructing the <code>Iso</code> myself, but I'd rather exploit some existing result.)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Grp</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Grp</span><span class=\"bp\">.</span><span class=\"n\">CartesianMonoidal</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Limits</span><span class=\"bp\">.</span><span class=\"n\">Shapes</span><span class=\"bp\">.</span><span class=\"n\">BinaryProducts</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Monoidal</span><span class=\"bp\">.</span><span class=\"n\">OfHasFiniteProducts</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddGroup</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">AddGrpCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">⨯</span><span class=\"w\"> </span><span class=\"n\">AddGrpCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">≅</span><span class=\"w\"> </span><span class=\"n\">AddGrpCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 544966080,
        "sender_full_name": "Roberto Zunino",
        "timestamp": 1760534231
    },
    {
        "content": "<p>Try <code>Iso.refl _</code></p>",
        "id": 544974485,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760536307
    },
    {
        "content": "<p>I get a type mismatch error from <code>Iso.refl _</code>. The two sides are not defeq.</p>",
        "id": 544978946,
        "sender_full_name": "Roberto Zunino",
        "timestamp": 1760537357
    },
    {
        "content": "<p>in fact they can't be defeq, the lhs is the arbitrary chosen limit by <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.Limits.prod#doc\">docs#CategoryTheory.Limits.prod</a></p>",
        "id": 544981915,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760538013
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"977544\">@Roberto Zunino</span></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Grp</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Grp</span><span class=\"bp\">.</span><span class=\"n\">CartesianMonoidal</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Limits</span><span class=\"bp\">.</span><span class=\"n\">Shapes</span><span class=\"bp\">.</span><span class=\"n\">BinaryProducts</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Monoidal</span><span class=\"bp\">.</span><span class=\"n\">OfHasFiniteProducts</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddGroup</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">AddGrpCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">⨯</span><span class=\"w\"> </span><span class=\"n\">AddGrpCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">≅</span><span class=\"w\"> </span><span class=\"n\">AddGrpCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Limits</span><span class=\"bp\">.</span><span class=\"n\">limit</span><span class=\"bp\">.</span><span class=\"n\">isoLimitCone</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">AddGrpCat</span><span class=\"bp\">.</span><span class=\"n\">binaryProductLimitCone</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 544982247,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760538089
    },
    {
        "content": "<p>i found that by Loogle <a href=\"https://loogle.lean-lang.org/?q=AddGrpCat%2C+%22prod%22\">AddGrpCat, \"prod\"</a></p>",
        "id": 544982346,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760538113
    },
    {
        "content": "<p>May I suggest you use <code>.of G ⊗ .of H</code> instead? This one is defined as you expected</p>",
        "id": 545019002,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1760547911
    },
    {
        "content": "<p>Here is what I mean:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"n\">Grp</span><span class=\"bp\">.</span><span class=\"n\">CartesianMonoidal</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">MonoidalCategory</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddGroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddGroup</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">⊗</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">≅</span><span class=\"w\"> </span><span class=\"n\">AddGrpCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n</code></pre></div>",
        "id": 545030846,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1760549789
    },
    {
        "content": "<p>Yikes we have <code>⊗</code> and <code>⨯</code> on <code>AddGrpCat</code> and they're doing the same thing but are not defeq?</p>",
        "id": 545072811,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760551536
    },
    {
        "content": "<p>They are not equal to each other, merely canonically isomorphic</p>",
        "id": 545074658,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1760551612
    },
    {
        "content": "<p>Sure, but I guess I'm saying that this is perhaps counterintuitive? Usually we only have one definition of a thing. I can't make another definition of the naturals and PR it to mathlib and say \"it's Ok, it's not defeq to Nat but it is canonically isomorphic\".</p>",
        "id": 545078873,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760551783
    },
    {
        "content": "<p><code>⨯</code> is the notation for the categorical product in any category (the axiom of choice is used to choose a limit), while <code>⊗</code> is the notation for the tensor product on cartesian monoidal categories, which is a definition that we have carefully chosen so that it has nice defeq (for example, in the category of types, this is the cartesian product of types).</p>",
        "id": 545106870,
        "sender_full_name": "Joël Riou",
        "timestamp": 1760554008
    },
    {
        "content": "<p>Basically, we should refrain from using <code>⨯</code> when working in a specific category where <code>⊗</code> is available.</p>",
        "id": 545107023,
        "sender_full_name": "Joël Riou",
        "timestamp": 1760554083
    },
    {
        "content": "<p>Aah I see, and we cannot have \"categorical product = tensor product\" in general (because this isn't even true in e.g. modules over a commutative ring) so this is just a gotcha that we need to be aware of in this case. Thanks for the explanation!</p>",
        "id": 545108674,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760554753
    },
    {
        "content": "<p>Kevin, this is what evolved out of that old \"ChosenFiniteProducts\" stuff!</p>",
        "id": 545125664,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1760561584
    }
]