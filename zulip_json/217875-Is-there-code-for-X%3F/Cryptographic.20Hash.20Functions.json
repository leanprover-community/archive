[
    {
        "content": "<p>Hi everyone!</p>\n<p>Are there libraries that provide cryptographic hash functions (e.g., MD5, SHA1)?  Seems those are not in stdlib, batteries, nor mathlib4... </p>\n<p>Or should I try to bring those in from something like OpenSSL via FFI?</p>",
        "id": 534606790,
        "sender_full_name": "Leo Sin",
        "timestamp": 1755240739
    },
    {
        "content": "<p>Not that I am aware of.</p>\n<p>An OpenSSL wrapper library would be very useful for many people! Native implementations would be great to have too, but for quite different purposes.</p>",
        "id": 534638432,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755257707
    },
    {
        "content": "<p>Note that OpenSSL is notorioulsy difficult to use correctly from the C API, if you plan to use this for anything serious you have to be really careful.</p>",
        "id": 534673152,
        "sender_full_name": "Henrik BÃ¶ving",
        "timestamp": 1755272295
    },
    {
        "content": "<p>As a Saturday morning exercise in using Claude Code (fun, mostly impressive), we now have an <a href=\"https://github.com/kim-em/lean-md5\">md5</a> library written in Lean.</p>\n<p>It provides <code>String.md5</code> and <code>ByteArray.md5</code>, as well as command line interfaces <code>lake exe md5</code> and <code>lake exe md5sum</code> reproducing all the options those standard tools provide.</p>",
        "id": 534732063,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755311015
    },
    {
        "content": "<p>(Oh, and a thorough test suite that does conformance testing against the command line tools. Claude is inexhaustible.)</p>",
        "id": 534732128,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755311116
    },
    {
        "content": "<p>It's 10x slower than my system binaries, but if anyone wants to improve on that, the test suite is there to catch you if you fall. :-)</p>",
        "id": 534732159,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755311153
    },
    {
        "content": "<p>How do you time it?</p>",
        "id": 534732336,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755311369
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">kim</span><span class=\"bp\">@</span><span class=\"n\">carica</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">md5</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">md5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">t</span>\n<span class=\"n\">MD5</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">trial</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Digesting</span><span class=\"w\"> </span><span class=\"mi\">10000</span><span class=\"w\"> </span><span class=\"mi\">10000</span><span class=\"bp\">-</span><span class=\"n\">byte</span><span class=\"w\"> </span><span class=\"n\">blocks</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"n\">done</span>\n<span class=\"n\">Digest</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">d0c9c4db6953fee9e03f528cafd7d3e</span>\n<span class=\"n\">Time</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mf\">28.699000</span><span class=\"w\"> </span><span class=\"n\">seconds</span>\n<span class=\"n\">Speed</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mf\">3484441.966619</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"bp\">/</span><span class=\"n\">second</span>\n<span class=\"n\">kim</span><span class=\"bp\">@</span><span class=\"n\">carica</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">md5</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">md5</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">t</span>\n<span class=\"n\">MD5</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">trial</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Digesting</span><span class=\"w\"> </span><span class=\"mi\">100000</span><span class=\"w\"> </span><span class=\"mi\">10000</span><span class=\"bp\">-</span><span class=\"n\">byte</span><span class=\"w\"> </span><span class=\"n\">blocks</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"n\">done</span>\n<span class=\"n\">Digest</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">766</span><span class=\"n\">a2bb5d24bddae466c572bcabca3ee</span>\n<span class=\"n\">Time</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mf\">1.740423</span><span class=\"w\"> </span><span class=\"n\">seconds</span>\n<span class=\"n\">Speed</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mf\">574572992.000000</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"bp\">/</span><span class=\"n\">second</span>\n</code></pre></div>",
        "id": 534732461,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755311530
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Cryptographic.20Hash.20Functions/near/534732063\">said</a>:</p>\n<blockquote>\n<p>As a Saturday morning exercise in using Claude Code (fun, mostly impressive), we now have an <a href=\"https://github.com/kim-em/lean-md5\">md5</a> library written in Lean.</p>\n<p>It provides <code>String.md5</code> and <code>ByteArray.md5</code>, as well as command line interfaces <code>lake exe md5</code> and <code>lake exe md5sum</code> reproducing all the options those standard tools provide.</p>\n</blockquote>\n<p>Thanks for creating library, really appreciate it!</p>\n<p>Btw just wondering are there any tips/prescriptions/best practices in terms of managing lean-toolchain versions to keep forward compatibility for third-party library maintainers?<br>\nBecause some libraries with old toolchain version seems do not play well with new versions of batteries and/or mathlib...</p>",
        "id": 534791947,
        "sender_full_name": "Leo Sin",
        "timestamp": 1755390845
    },
    {
        "content": "<p>The library has been renamed to <code>lean-crypto-hash</code> and now implements (and tests) the SHA1 and SHA2 algorithms. Claude Code is fun.</p>",
        "id": 534794152,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755395011
    },
    {
        "content": "<p>(important discussion, maybe someone can move the last three messages to a new thread in #general or #lean4?)</p>",
        "id": 534808284,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1755416556
    },
    {
        "content": "<p>Claude also had no problem with SHA3, so that's in the library too.</p>",
        "id": 534811631,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755421768
    }
]