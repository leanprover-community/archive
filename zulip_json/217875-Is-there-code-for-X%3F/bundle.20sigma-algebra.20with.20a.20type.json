[
    {
        "content": "<p>Is there a better way to do this? It feels like a common pattern?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"sd\">/-- A type tag for `α` with `MeasurableSet`. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">nolint</span><span class=\"w\"> </span><span class=\"n\">unusedArguments</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MeasurableType</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">α</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MeasurableType</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">m</span>\n</code></pre></div>\n<p>The context is, if I don't do that, I run into the \"synthesized type class instance is not definitionally equal to expression inferred by typing rules\" error when using the <code>condKernel</code> API... even if I try to be very explicit in the type annotations</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Probability</span><span class=\"bp\">.</span><span class=\"n\">Kernel</span><span class=\"bp\">.</span><span class=\"n\">Disintegration</span><span class=\"bp\">.</span><span class=\"n\">StandardBorel</span>\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">MeasureTheory</span><span class=\"bp\">.</span><span class=\"n\">Measure</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">m₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">condProd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Measure</span><span class=\"o\">[</span><span class=\"n\">m₀</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Measure</span><span class=\"o\">[</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"n\">m₀</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">@</span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"n\">m₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">condMeas</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Measure</span><span class=\"o\">[</span><span class=\"n\">m₀</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Measure</span><span class=\"o\">[</span><span class=\"n\">m₀</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"c1\">-- does not work</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">condProd</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">condKernel</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">mα</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 547806048,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761769792
    },
    {
        "content": "<p>this isn't just a problem with measurable spaces</p>",
        "id": 547806437,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761769929
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"571941\">Lua Viana Reis</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/bundle.20sigma-algebra.20with.20a.20type/near/547806048\">said</a>:</p>\n<blockquote>\n<p>even if I try to be very explicit in the type annotations</p>\n</blockquote>\n<p>in general that's not the way to solve it</p>",
        "id": 547806527,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761769958
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span>  it sounds like you have a solution?</p>",
        "id": 547806575,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761769977
    },
    {
        "content": "<p>(\"don't have diamonds\" is not good enough for me)</p>",
        "id": 547806643,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761770004
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/bundle.20sigma-algebra.20with.20a.20type/near/547806527\">said</a>:</p>\n<blockquote>\n<p>in general that's not the way to solve it</p>\n</blockquote>\n<p>Is it a fault in the existing <code>condMeas</code> API then? In this case, I expected <code>(mα := m)</code> to make it work, but it still does not. Is there some flag to help me find where the conflict is?</p>",
        "id": 547806815,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761770066
    },
    {
        "content": "<p>if I made it work with type annotations first, I would be happy to at least find where is the problem</p>",
        "id": 547807062,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761770148
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"571941\">@Lua Viana Reis</span> could you be more clear on which synthesized instance is conflicting with which inferred instance?</p>",
        "id": 547808126,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761770560
    },
    {
        "content": "<p>without that information, I would say, turn the default instance off using <code>attribute [-instance] xxx</code></p>",
        "id": 547808174,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761770577
    },
    {
        "content": "<p>sorry, I think I found the problem in this case!</p>",
        "id": 547808355,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761770664
    },
    {
        "content": "<p>but perhaps <code>condKernel</code> should make the other one of the <code>MeasurableSpace</code> parameters named, so it's easier to specify</p>",
        "id": 547808523,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761770715
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/bundle.20sigma-algebra.20with.20a.20type/near/547808174\">said</a>:</p>\n<blockquote>\n<p>without that information, I would say, turn the default instance off using <code>attribute [-instance] xxx</code></p>\n</blockquote>\n<p>what if it's a local variable</p>",
        "id": 547808810,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761770821
    },
    {
        "content": "<p>I don't know without more context</p>",
        "id": 547809302,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761771001
    },
    {
        "content": "<p>In what I sent above, the context is <code>m0</code> is the \"base\" sigma-algebra and <code>m</code> is a sub-sigma-algebra, I want to disintegrate a <code>Measure[m0]</code> over <code>m</code>. To do that, I push the measure to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi><mo>×</mo><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha \\times \\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span>, but with the <code>m.prod m0</code> algebra. Now, I want to disintegrate into a the conditional kernel <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi><mo>→</mo><mrow><mi mathvariant=\"sans-serif\">M</mi><mi mathvariant=\"sans-serif\">e</mi><mi mathvariant=\"sans-serif\">a</mi><mi mathvariant=\"sans-serif\">s</mi><mi mathvariant=\"sans-serif\">u</mi><mi mathvariant=\"sans-serif\">r</mi><mi mathvariant=\"sans-serif\">e</mi></mrow><mtext>  </mtext><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha \\to \\mathsf{Measure}\\;\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord\"><span class=\"mord mathsf\">Measure</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span>, which is measurable with respect to <code>m</code>, and they are called the conditional measures.</p>",
        "id": 547809957,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761771267
    },
    {
        "content": "<p>Basically: I certainly have to deal with at least two different sub-sigma-algebras in code related to that, and it would be better if Lean didn't try to be smart about using typeclass instances but failed</p>",
        "id": 547810242,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761771387
    },
    {
        "content": "<p>It's not trying to be smart actually, it's just that if the argument is to be synthesized by typeclass inference it will use the last one introduced, so in your case <code>m</code>. But specifying things explicitely works.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Probability</span><span class=\"bp\">.</span><span class=\"n\">Kernel</span><span class=\"bp\">.</span><span class=\"n\">Disintegration</span><span class=\"bp\">.</span><span class=\"n\">StandardBorel</span>\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">MeasureTheory</span><span class=\"bp\">.</span><span class=\"n\">Measure</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">m₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">@</span><span class=\"n\">StandardBorelSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">m₀</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">condProd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Measure</span><span class=\"o\">[</span><span class=\"n\">m₀</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Measure</span><span class=\"o\">[</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"n\">m₀</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">@</span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"n\">m₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">condProd</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">condMeas</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Measure</span><span class=\"o\">[</span><span class=\"n\">m₀</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Measure</span><span class=\"o\">[</span><span class=\"n\">m₀</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- does not work</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Measure</span><span class=\"bp\">.</span><span class=\"n\">condKernel</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">m₀</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">condProd</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 547810575,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1761771527
    },
    {
        "content": "<p>But this is the problem, I think. If the argument was implicit instead of a typeclass argument, it would find the right algebra and not complain.</p>",
        "id": 547810792,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761771605
    },
    {
        "content": "<p>It is a typeclass argument here because as the space is required to be standard Borel, there can only be one sigma-algebra on it, ie the Borel one. But of course this breaks if alpha = Omega. You might open a pull request to change that, it is quite frequent that we turn typeclass <code>MeasurableSpace</code> arguments into implicit arguments precisely because of this issue.</p>",
        "id": 547811763,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1761771875
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"703970\">Etienne Marion</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/bundle.20sigma-algebra.20with.20a.20type/near/547811763\">said</a>:</p>\n<blockquote>\n<p>there can only be one sigma-algebra on it, ie the Borel one</p>\n</blockquote>\n<p>This is not exactly true, right? The <code>StandardBorelSpace</code> does not require the topology beforehand, and instead says there exist one. And often, subalgebras are Borel too</p>",
        "id": 547812309,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761772089
    },
    {
        "content": "<p>You're right I mixed it up with the case where the hypothesis is <code>BorelSpace</code>.</p>",
        "id": 547812671,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1761772231
    },
    {
        "content": "<p>I can confirm that changing <code>[MeasurableSpace Ω]</code> to <code>{mΩ : MeasurableSpace Ω}</code> in <code>Mathlib.Probability.Kernel.Disintegration.StandardBorel</code> makes the code above work, and Mathlib still compiles.</p>",
        "id": 547812812,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761772290
    },
    {
        "content": "<p>Yes that's expected because the measurable space structure can be inferred from the measure. As I said this kind of change is quite frequent as we often bump into this issue (although it gets rarer as time passes).</p>",
        "id": 547813007,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1761772377
    },
    {
        "content": "<p>Probably nobody tried to use <code>condKernel</code> with the two spaces being the same before you so the issue went unnoticed.</p>",
        "id": 547813417,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1761772461
    },
    {
        "content": "<p>Please open a PR for the change! Whenever a <code>MeasurableSpace</code> can be inferred from a <code>Measure</code>, the argument should be implicit and not an instance. Precisely because of the issues you encountered.</p>",
        "id": 547814623,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1761772968
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/31071\">#31071</a></p>",
        "id": 547818128,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1761774494
    }
]