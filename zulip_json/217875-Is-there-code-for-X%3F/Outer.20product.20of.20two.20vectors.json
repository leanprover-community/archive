[
    {
        "content": "<p>Given <code>v : E</code> and <code>w : F</code> where <code>E</code> and <code>F</code> are finite-dimensional inner product spaces, how do you construct the outer product <code>wvá´´ : E â†’â‚—[ğ•œ] F</code>, where <code>á´´</code> denotes the conjugate transpose? I guess you can do <code>dualTensorHom ğ•œ E F (InnerProductSpace.toDualMap ğ•œ E v âŠ—â‚œ[ğ•œ] w)</code>, but is there a better way?</p>",
        "id": 564887160,
        "sender_full_name": "Niels Voss",
        "timestamp": 1766314505
    },
    {
        "content": "<p>It's the composite of two linear maps E-&gt;k and k-&gt;F, the first of which only depends on v and the second of which only depends on w. No doubt we have the first, I don't know about the second, but if we have both of these then probably the easiest way to make it is as the composite. Note that you only need E to have a bilinear form and you don't need anything to be finite-dimensional.</p>",
        "id": 564899316,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1766330033
    },
    {
        "content": "<p>like this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RCLike</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">SeminormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">InnerProductSpace</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">outerProduct</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"bp\">â†’â‚—</span><span class=\"o\">[</span><span class=\"n\">ğ•œ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">toSpanSingleton</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">innerâ‚›â‚—</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 564899578,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766330383
    },
    {
        "content": "<p>I could probably bundle this further as being conjugate-linear in <code>v</code> and linear in <code>w</code></p>",
        "id": 564899616,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766330430
    },
    {
        "content": "<p>Is this something we want as a definition in mathlib?</p>",
        "id": 564918074,
        "sender_full_name": "Niels Voss",
        "timestamp": 1766355248
    },
    {
        "content": "<p>since it's so short I think probably not?</p>",
        "id": 564918190,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766355429
    },
    {
        "content": "<p>I guess it also depends on how many useful theorems can be stated about the outer product, and whether this would help or hurt discoverability</p>",
        "id": 564918279,
        "sender_full_name": "Niels Voss",
        "timestamp": 1766355588
    },
    {
        "content": "<p>I feel like this would be more naturally stated with <code>v : E â†’â‚—[ğ•œ] ğ•œ</code> instead of <code>v : E</code></p>",
        "id": 564919081,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766356886
    },
    {
        "content": "<p>the inner product isn't really doing anything besides attach the space to its dual</p>",
        "id": 564919098,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766356906
    },
    {
        "content": "<p>This makes sense</p>",
        "id": 564921345,
        "sender_full_name": "Niels Voss",
        "timestamp": 1766360072
    },
    {
        "content": "<p>Yes, although we probably want a version both for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Module.Dual#doc\">docs#Module.Dual</a> and also <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=StrongDual#doc\">docs#StrongDual</a>. Then for Hilbert spaces we can have an <code>abbrev</code>.</p>",
        "id": 564927999,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1766369832
    },
    {
        "content": "<p>Do we want a version that converts a vector to its dual or should we follow Aaron's suggestion?</p>",
        "id": 564928047,
        "sender_full_name": "Niels Voss",
        "timestamp": 1766369926
    },
    {
        "content": "<p>I'm saying the same thing as Aaron. You shouldn't take two vectors, but rather a functional and a vector.</p>",
        "id": 564929274,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1766371545
    },
    {
        "content": "<p>and should this go into mathlib?</p>",
        "id": 564929311,
        "sender_full_name": "Niels Voss",
        "timestamp": 1766371621
    },
    {
        "content": "<p>I would like to see it, yes. This is a standard thing that comes up. For instance, I think <span class=\"user-mention\" data-user-id=\"477483\">@Monica Omar</span> used this to show that the center of the continuous linear maps are just the scalar ones.</p>",
        "id": 564932610,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1766376045
    },
    {
        "content": "<p>there's this PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/27668\">#27668</a> by <span class=\"user-mention\" data-user-id=\"646655\">@IvÃ¡n Renison</span>, but it's been a few months since it's been updated</p>",
        "id": 565026492,
        "sender_full_name": "Monica Omar",
        "timestamp": 1766417491
    },
    {
        "content": "<p>Yes, I didn't continue because I was not convinced about what I was doing with the suggestions</p>",
        "id": 565062156,
        "sender_full_name": "IvÃ¡n Renison",
        "timestamp": 1766433132
    },
    {
        "content": "<p>Especially the name, I have always called it outer product, so naming it <code>rankOne</code> seems quite strange for me</p>",
        "id": 565062158,
        "sender_full_name": "IvÃ¡n Renison",
        "timestamp": 1766433132
    },
    {
        "content": "<p>But I should I continue ir. I will try to in the next days</p>",
        "id": 565062325,
        "sender_full_name": "IvÃ¡n Renison",
        "timestamp": 1766433223
    }
]