[
    {
        "content": "<p>I am trying to familiarize myself with constructions in Lean (type classes/structures, basically) by proving a particular category has exponential. But the definition of exponential in Lean takes quite a while to decode. May I please ask if there is a formalization of a particular category to be exponentiable? It does not matter what the concrete category is (the simpler the better, actually), the main point for me is to get to know the workflow.</p>\n<p>Thanks in advance for any attempt to help!</p>",
        "id": 482695998,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1731705464
    },
    {
        "content": "<p>You may look at <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RepresentationTheory/Rep.html#Rep.instMonoidalClosed\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/RepresentationTheory/Rep.html#Rep.instMonoidalClosed</a></p>",
        "id": 482696910,
        "sender_full_name": "Joël Riou",
        "timestamp": 1731705913
    },
    {
        "content": "<p>Thanks! It is very helpful!</p>\n<p>But as a beginner, I am confused at:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">MonoidalClosed</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MonoidalCategory</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">closed</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Closed</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n</code></pre></div>\n<p>May I please ask what is <code>infer_instance</code> doing here? If possible, I would like to hear about the workflow of infer_instance in this particular case, what does it invoke step-by-step?</p>",
        "id": 482734144,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1731730914
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"776892\">Yiming Xu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/482734144\">said</a>:</p>\n<blockquote>\n<p>Thanks! It is very helpful!</p>\n<p>But as a beginner, I am confused at:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">MonoidalClosed</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MonoidalCategory</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">closed</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Closed</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n</code></pre></div>\n<p>May I please ask what is <code>infer_instance</code> doing here? If possible, I would like to hear about the workflow of infer_instance in this particular case, what does it invoke step-by-step?</p>\n</blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#inferInstance\">https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#inferInstance</a></p>\n<p>I believe in this case, it has to infer the instance of X:C --  and it will raise an error if the inferred instance does not inhabit Closed.</p>",
        "id": 482735052,
        "sender_full_name": "Abraham Solomon",
        "timestamp": 1731731685
    },
    {
        "content": "<p>Thanks for the swift reply! I was confused why we are not required to provide an adjunction. And the reason is that there is no uniform way to construct such a function, but as long as X is closed, the instance [Closed X] should already be stored somewhere, so we just need to tell Lean to try to find it out. (Thanks for correcting me if I am wrong.)</p>",
        "id": 482735937,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1731732279
    },
    {
        "content": "<p>I need to deal with product first. May I please then ask for a simple case where we construct the instance <code>HasFiniteProduct</code> in some category? The definition itself refers to limits, I would be a little bit surprised if it is necessary to prove the property of having products only by applying the definition directly.</p>",
        "id": 482741376,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1731736996
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"776892\">Yiming Xu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/482741376\">said</a>:</p>\n<blockquote>\n<p>I need to deal with product first. May I please then ask for a simple case where we construct the instance <code>HasFiniteProduct</code> in some category? The definition itself refers to limits, I would be a little bit surprised if it is necessary to prove the property of having products only by applying the definition directly.</p>\n</blockquote>\n<p>Might need an expert for that, sometimes it helps to go to the docs then go to source on github -- then at the top it tells you who wrote it.</p>\n<p>If you happen to know they are still active on Zulip -- that could be a lead.</p>",
        "id": 482742889,
        "sender_full_name": "Abraham Solomon",
        "timestamp": 1731738562
    },
    {
        "content": "<p>Makes sense. Thanks for sharing this strategy! If I am not lucky enough to have an expert visiting this post in one or two days I may try grabbing one.</p>",
        "id": 482743011,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1731738679
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"776892\">@Yiming Xu</span>! Are you the Yiming who did a project on HoTT with me? Welcome! I'm offline for a day but if you haven't got answers by then I can help you find examples.</p>",
        "id": 482744833,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731740612
    },
    {
        "content": "<p>Yes, I am Yiming Xu, the one you know from undergraduate. Nice to meet you again on Lean Zulip! I am starting Lean4 from the user level.</p>",
        "id": 482744911,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1731740670
    },
    {
        "content": "<p>No emergency and thanks so much for your time an patience!!! (And sorry that I have forgotten what you taught me before... It has been so many years...)</p>",
        "id": 482744979,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1731740747
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"776892\">Yiming Xu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/482734144\">said</a>:</p>\n<blockquote>\n<p>May I please ask what is <code>infer_instance</code> doing here?</p>\n</blockquote>\n<p><code>:=</code> in a class/structure definition means that if the field is not explicitly supplied by the user, then the system will attempt to supply it by running the code after the <code>:=</code>. Here for example, <code>Closed</code> is a class, so there is a chance that typeclass inference is able to fill in this field automatically; that's what <code>infer_instance</code> does.</p>",
        "id": 482782343,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731773540
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/482782343\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"776892\">Yiming Xu</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/482734144\">said</a>:</p>\n<blockquote>\n<p>May I please ask what is <code>infer_instance</code> doing here?</p>\n</blockquote>\n<p><code>:=</code> in a class/structure definition means that if the field is not explicitly supplied by the user, then the system will attempt to supply it by running the code after the <code>:=</code>. Here for example, <code>Closed</code> is a class, so there is a chance that typeclass inference is able to fill in this field automatically; that's what <code>infer_instance</code> does.</p>\n</blockquote>\n<p>Thanks! That makes sense.</p>",
        "id": 482786214,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1731776709
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>  I think I would need some examples of how to prove a category has products in Lean. I find my lack of familiarity in type class makes it difficult for me to read all the relevant code. My particular aim would be to formalize that the category of right actions is cartesian closed. I explained my aim in this post <a class=\"stream-topic\" data-stream-id=\"113489\" href=\"/#narrow/channel/113489-new-members/topic/Beginner.20formalizing.20group.20actions\">#new members &gt; Beginner formalizing group actions</a></p>",
        "id": 482878867,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1731863166
    },
    {
        "content": "<p>I guess this is one place to look at:<br>\n<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RepresentationTheory/Action/Limits.html#Action.instHasFiniteProducts\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/RepresentationTheory/Action/Limits.html#Action.instHasFiniteProducts</a></p>",
        "id": 483219264,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732009043
    },
    {
        "content": "<p>It's a bit strange that that file even constructs the <code>HasFiniteProducts</code> instance, given that immediately afterwards it constructs the <code>HasFiniteLimits</code> instance which is more general.</p>",
        "id": 483235570,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732014034
    },
    {
        "content": "<p>Is that the situation for what you are trying to do?</p>",
        "id": 483236236,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732014224
    },
    {
        "content": "<p>What exactly do you mean by \"the category of right actions\"?</p>",
        "id": 483236271,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732014234
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/483236271\">said</a>:</p>\n<blockquote>\n<p>What exactly do you mean by \"the category of right actions\"?</p>\n</blockquote>\n<p>I mean the category of right <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span>-sets, where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> is a monoid. Objects are sets <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> with an action <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>×</mo><mi>M</mi><mo>→</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X\\times M\\to X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>, and arrows are <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span>-equivarient maps.</p>",
        "id": 483243468,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732016626
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/483236236\">said</a>:</p>\n<blockquote>\n<p>Is that the situation for what you are trying to do?</p>\n</blockquote>\n<p>Let me check. I just found it this morning. But I am suspicious. What is a MonCat and why it is used here?</p>",
        "id": 483243999,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732016807
    },
    {
        "content": "<p>I see, MonCat just mean that G is a monoid.</p>",
        "id": 483244726,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732017118
    },
    {
        "content": "<p>So what are the missing argument in:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Action</span><span class=\"bp\">.</span><span class=\"n\">functorCategoryEquivalence</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">functor</span>\n</code></pre></div>\n<p>in </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HasFiniteProducts</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasFiniteProducts</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"n\">Adjunction</span><span class=\"bp\">.</span><span class=\"n\">hasLimitsOfShape_of_equivalence</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Action</span><span class=\"bp\">.</span><span class=\"n\">functorCategoryEquivalence</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">functor</span>\n</code></pre></div>\n<p>?</p>",
        "id": 483245395,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732017320
    },
    {
        "content": "<p>And, this instance is obtained by transporting a previous instance, is there any example of proving, say, some category correspond to \"the category of sets\", has product, without transporting an existing instance of <code>HasFiniteProduct</code> from another category?</p>",
        "id": 483250089,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732018825
    },
    {
        "content": "<p>In some sense at least what you are asking for already exists:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasFiniteProducts</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n</code></pre></div>",
        "id": 483365690,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732055777
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/483365690\">said</a>:</p>\n<blockquote>\n<p>In some sense at least what you are asking for already exists:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasFiniteProducts</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>This is an instance off \"the type of actions on <code>Type</code> has products\", but may I please ask how do we prove, not by something black-boxed with <code>infer-instance</code>, that <code>Type</code> has finite product? How do we express the limit (i.e. what does the explicit construction of proof term look like?)? (So I am not asking for an instance to use, but trying to figure out how these sort of things work.)</p>",
        "id": 483407805,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732079547
    },
    {
        "content": "<p>I traced back to <br>\n<a href=\"https://github.com/leanprover-community/mathlib4/blob/8666bd82efec40b8b3a5abca02dc9b24bbdf2652/Mathlib/CategoryTheory/Closed/Types.lean#L44-L45\">https://github.com/leanprover-community/mathlib4/blob/8666bd82efec40b8b3a5abca02dc9b24bbdf2652/Mathlib/CategoryTheory/Closed/Types.lean#L44-L45</a><br>\n\"Category of types has finite products\"<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/blob/8666bd82efec40b8b3a5abca02dc9b24bbdf2652/Mathlib/CategoryTheory/Limits/Shapes/Types.lean#L53-L53\">https://github.com/leanprover-community/mathlib4/blob/8666bd82efec40b8b3a5abca02dc9b24bbdf2652/Mathlib/CategoryTheory/Limits/Shapes/Types.lean#L53-L53</a> <br>\n\"Category of types has product\"</p>\n<p>but everything is \"infer_instance\" only. How does Lean infer why does the category of types has products according to the definition?</p>",
        "id": 483411476,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732082381
    },
    {
        "content": "<p>Limits in the category of types are constructed <a href=\"https://github.com/leanprover-community/mathlib4/blob/25b91b6001b15abdba13e10b8dcf838cfe9d292f/Mathlib/CategoryTheory/Limits/Types.lean#L199\">here</a>. You can scroll up a bit to see the actual construction. It is based on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.Functor.sections#doc\">docs#CategoryTheory.Functor.sections</a>.</p>",
        "id": 483412423,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1732082903
    },
    {
        "content": "<p>Thanks for the quick reply! Let me have a look!</p>",
        "id": 483412475,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732082950
    },
    {
        "content": "<p>You can use <code>#synth</code> to see the instances which <code>inferInstance</code> is finding.</p>",
        "id": 483422406,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732088773
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/483422406\">said</a>:</p>\n<blockquote>\n<p>You can use <code>#synth</code> to see the instances which <code>inferInstance</code> is finding.</p>\n</blockquote>\n<p>Thanks! This seems to be very useful. But I searched \"synth lean4\" and cannot find any documentation of that, searched zulip history and it seems like I should write <code>#synth infer_instance</code>, but still not able to put it anywhere in the code to get it work. May I please ask for an example piece of code of how to use it?</p>",
        "id": 483424383,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732089653
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/483365690\">said</a>:</p>\n<blockquote>\n<p>In some sense at least what you are asking for already exists:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasFiniteProducts</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Yes, and as a special case I have:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasFiniteProducts</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulOpposite</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">))))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n</code></pre></div>\n<p>But</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CartesianClosed</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulOpposite</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">))))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n</code></pre></div>\n<p>Reports error, This is actually the final thing I want to prove these days. Let me try this.</p>",
        "id": 483429026,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732091520
    },
    {
        "content": "<p>How would I refer to an object in the category <code>((Action (Type u_1) (MonCat.of (MulOpposite M))))</code>? </p>\n<p>I should be able to state the goal as something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Exponentiable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulOpposite</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">))))</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n</code></pre></div>\n<p>I am quite messed up with type classes.</p>",
        "id": 483431975,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732092569
    },
    {
        "content": "<p>You can write something like <code>#synth LinearOrder Nat</code></p>",
        "id": 483436947,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732094095
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/483436947\">said</a>:</p>\n<blockquote>\n<p>You can write something like <code>#synth LinearOrder Nat</code></p>\n</blockquote>\n<p>Thanks! Then maybe what I should write is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasFiniteProducts</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulOpposite</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">))))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">HasFiniteProducts</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulOpposite</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">))))</span>\n</code></pre></div>",
        "id": 483439098,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732094673
    },
    {
        "content": "<p>But the window only shows:<br>\n<a href=\"/user_uploads/3121/vbmw9WLDzHaj21zlZ4fe5S1l/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/vbmw9WLDzHaj21zlZ4fe5S1l/image.png\" title=\"image.png\"><img data-original-dimensions=\"1130x1278\" src=\"/user_uploads/thumbnail/3121/vbmw9WLDzHaj21zlZ4fe5S1l/image.png/840x560.webp\"></a></div><p>it seems not to be readable to me (or maybe I just do not know how to read it...). How can I get something useful from that?</p>",
        "id": 483439521,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732094797
    },
    {
        "content": "<p>Can you ctrl-click on the inst....... message?</p>",
        "id": 483439952,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732094929
    },
    {
        "content": "<p>It gives me this:<br>\n<a href=\"/user_uploads/3121/K-8aDGF9cWH2gzTBOoCu3aTO/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/K-8aDGF9cWH2gzTBOoCu3aTO/image.png\" title=\"image.png\"><img data-original-dimensions=\"1314x1278\" src=\"/user_uploads/thumbnail/3121/K-8aDGF9cWH2gzTBOoCu3aTO/image.png/840x560.webp\"></a></div>",
        "id": 483440126,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732094983
    },
    {
        "content": "<p>And the cursor jumps to </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasFiniteProducts</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulOpposite</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">))))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span>\n</code></pre></div>",
        "id": 483440256,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732095008
    },
    {
        "content": "<p>For <code>#synth LinearOrder Nat</code> I tried the same i.e. to ctrl-click on it. It takes me to the instance and does not output anything.</p>",
        "id": 483440527,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732095093
    },
    {
        "content": "<p>I thought the question you were asking was \"the proof of something is <code>by infer_instance</code> but this doesn't tell me the actual proof, I want to see the actual proof\" and my response about <code>#synth</code> is telling you how to locate the proof which <code>by infer_instance</code> is using.</p>",
        "id": 483572068,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732137001
    },
    {
        "content": "<p>Yes, thank you! You did get my question. And my trouble is to see how to use #synth.</p>",
        "id": 483572640,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732137246
    },
    {
        "content": "<p>I attempted to see how to use it through simpler examples, say \"#synth LinearOrder Nat\". I expect it to tell me how the system infers that Nat is a linear order. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n</code></pre></div>\n<p>These two lines does not report any error, but I do not know how get any helpful information out of that.</p>\n<p>If that takes long to tell or the workflow of using that could be a bit involved then also no worries! I can try to ask some Lean colleagues to see if they know.</p>",
        "id": 483573326,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732137572
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"c1\">-- Nat.instLinearOrder</span>\n</code></pre></div>\n<p>Now ctrl-click on <code>Nat.instLinearOrder</code> in the infoview (i.e. on the output of <code>#synth</code>) and it jumps to</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">instLinearOrder</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">le</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le</span>\n<span class=\"w\">  </span><span class=\"n\">le_refl</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le_refl</span>\n<span class=\"w\">  </span><span class=\"n\">le_trans</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le_trans</span>\n<span class=\"w\">  </span><span class=\"n\">le_antisymm</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le_antisymm</span>\n<span class=\"w\">  </span><span class=\"n\">le_total</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le_total</span>\n<span class=\"w\">  </span><span class=\"n\">lt</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">lt</span>\n<span class=\"w\">  </span><span class=\"n\">lt_iff_le_not_le</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">lt_iff_le_not_le</span>\n<span class=\"w\">  </span><span class=\"n\">decidableLT</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n<span class=\"w\">  </span><span class=\"n\">decidableLE</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n<span class=\"w\">  </span><span class=\"n\">decidableEq</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n</code></pre></div>\n<p>in <code>Mathlib.Data.Nat.Defs</code>.</p>",
        "id": 483574262,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732137983
    },
    {
        "content": "<p>Thanks a lot! For your example, it does the right thing on my machine.</p>",
        "id": 483575740,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732138662
    },
    {
        "content": "<p>I am copying this workflow to check:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">         </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LargeCategory</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"w\">         </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}}</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulOpposite</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulOpposite</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)))</span>\n</code></pre></div>",
        "id": 483575820,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732138687
    },
    {
        "content": "<p>The output on my machine is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">instCategoryActionOfMulOppositeαMonoid_actionExponential</span>\n</code></pre></div>\n<p>and </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">instCategoryActionOfMulOppositeαMonoid</span>\n</code></pre></div>\n<p>On web version of Lean.</p>",
        "id": 483576480,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732139002
    },
    {
        "content": "<p>If I ctrl-click on my machine, then it takes me to the instance I just wrote</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulOpposite</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n</code></pre></div>\n<p>only.</p>",
        "id": 483576608,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732139045
    },
    {
        "content": "<p>Oh, I didn't realize that that was the issue. Put the <code>#synth</code> above your instance</p>",
        "id": 483579816,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732140519
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/483579816\">said</a>:</p>\n<blockquote>\n<p>Oh, I didn't realize that that was the issue. Put the <code>#synth</code> above your instance</p>\n</blockquote>\n<p>Thanks! This solves my problem and now the click works!</p>",
        "id": 483632690,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732174599
    },
    {
        "content": "<p>Your instance makes a (unnecessary) second copy of the instance, names it, and adds it to the (typeclass inference) system. The system then finds your instance first.</p>",
        "id": 483637605,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732176845
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/483637605\">said</a>:</p>\n<blockquote>\n<p>Your instance makes a (unnecessary) second copy of the instance, names it, and adds it to the (typeclass inference) system. The system then finds your instance first.</p>\n</blockquote>\n<p>Therefore, should I omit it? In the case that such an instance is needed, Lean will then figure out the instance itself, right?</p>\n<p>Say, if I would like to prove </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CartesianClosed</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonCat</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulOpposite</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">))))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Then I do not have to write the instances that the type <code>((Action (Type u_1) (MonCat.of (MulOpposite M)))</code> is a category, has products etc explicitly, and Lean automatically do it using infer_instance. I will just need to provide instances when Lean reports error and tell me that it cannot infer some instance.</p>\n<p>Thanks for correcting me if I am wrong here!</p>",
        "id": 483638399,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732177176
    },
    {
        "content": "<p>Yeah, if you can prove an instance with <code>inferInstance</code>, it's redundant (but it can help lean find the instance faster - though you should not worry about it unless your code is noticeably slow)</p>",
        "id": 483641143,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732178275
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Example.20of.20proving.20a.20category.20has.20exponential/near/483641143\">said</a>:</p>\n<blockquote>\n<p>Yeah, if you can prove an instance with <code>inferInstance</code>, it's redundant (but it can help lean find the instance faster - though you should not worry about it unless your code is noticeably slow)</p>\n</blockquote>\n<p>I see. Thanks for the clarification!</p>",
        "id": 483641265,
        "sender_full_name": "Yiming Xu",
        "timestamp": 1732178310
    }
]