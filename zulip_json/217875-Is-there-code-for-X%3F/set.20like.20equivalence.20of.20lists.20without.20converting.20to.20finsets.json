[
    {
        "content": "<p>is there an equivalent of </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">l1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"n\">l2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"n\">l1</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\">  </span><span class=\"n\">l2</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">l2</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">l1</span>\n</code></pre></div>\n<p>other than</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">isPerm</span><span class=\"w\"> </span><span class=\"n\">l1</span><span class=\"w\"> </span><span class=\"n\">l2</span>\n</code></pre></div>\n<p>that will work on lists of different lengths and different numbers of duplicates</p>",
        "id": 546276374,
        "sender_full_name": "Jared green",
        "timestamp": 1761062953
    },
    {
        "content": "<p>I don't think they're equivalent</p>",
        "id": 546276808,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761063086
    },
    {
        "content": "<p>but why do you need such a predicate?</p>",
        "id": 546276862,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761063102
    },
    {
        "content": "<p>can you give us more context?</p>",
        "id": 546276893,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761063110
    },
    {
        "content": "<p>i know they arent exactly the same, but i asked the same question earlier and isPerm is the answer i got, but it turned out not to be general enough for what i was doing. a shorter form of 'they are subsets of each other' would shorten my code a bit. and i dont want to have to import finset unnecessarily.</p>",
        "id": 546278091,
        "sender_full_name": "Jared green",
        "timestamp": 1761063480
    },
    {
        "content": "<p>what is your code doing?</p>",
        "id": 546278156,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761063500
    },
    {
        "content": "<p>restricted resolution where the literals in the clause pairs are the same but just one has opposing polarity. the rest of resolution is done  elsewhere</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"bp\">.</span><span class=\"n\">PartialOrder</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">Sublists</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Clause</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"n\">DecidableEq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Membership</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">toProp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">isResolvable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c1</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Clause</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">lits1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·.</span><span class=\"m\">1</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">lits2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·.</span><span class=\"m\">1</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">lits1</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\">  </span><span class=\"n\">lits2</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">lits2</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">lits1</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">c1</span><span class=\"bp\">.</span><span class=\"n\">product</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">all₂</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">l1</span><span class=\"w\"> </span><span class=\"n\">l2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l1</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l1</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">l2</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l2</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\">  </span><span class=\"bp\">&amp;&amp;</span>\n<span class=\"w\">  </span><span class=\"n\">l1</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">!=</span><span class=\"w\"> </span><span class=\"n\">l1</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">l2</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">!=</span><span class=\"w\"> </span><span class=\"n\">l2</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">l1</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l2</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c1</span><span class=\"bp\">.</span><span class=\"n\">product</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">generateResolvents</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">clauses</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Clause</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Clause</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">flatten</span><span class=\"w\"> </span><span class=\"o\">(</span>\n<span class=\"w\">    </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">filter</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">isResolvable</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">clauses</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">map</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">c1</span><span class=\"bp\">.</span><span class=\"n\">inter</span><span class=\"w\"> </span><span class=\"n\">c2</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">clauses</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 546280459,
        "sender_full_name": "Jared green",
        "timestamp": 1761064121
    },
    {
        "content": "<p>What's wrong with converting to finsets?</p>",
        "id": 546341470,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1761088649
    },
    {
        "content": "<p>If you don't care about multiplicities, then you can say <code>{x | x ∈ l1} = {x | x ∈ l2}</code>.</p>",
        "id": 546341848,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1761088936
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/set.20like.20equivalence.20of.20lists.20without.20converting.20to.20finsets/near/546341848\">said</a>:</p>\n<blockquote>\n<p>If you don't care about multiplicities, then you can say <code>{x | x ∈ l1} = {x | x ∈ l2}</code>.</p>\n</blockquote>\n<p>That's undecidable though.</p>",
        "id": 546342402,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1761089369
    },
    {
        "content": "<p>But <code>l0.toFinset = l1.toFinset</code> is decidable.</p>",
        "id": 546343289,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1761089993
    },
    {
        "content": "<p>nothing in particular is wrong with converting to finset, however given that every other set operation and predicate has a functional equivalent for lists that doesn't do such a conversion(except existsunique), why wouldn't this one?</p>",
        "id": 546468252,
        "sender_full_name": "Jared green",
        "timestamp": 1761142195
    },
    {
        "content": "<p>You should think about what gives most readable code. For me <code>l0.toFinset = l1.toFinset</code> is easy to understand. I don't think <code>l0.eqAsSets l1</code> is better, because it pretty much says exactly the same, but in english. Unless you can come up with a better name for this property, I don't see much need for this.</p>",
        "id": 546530085,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1761159353
    }
]