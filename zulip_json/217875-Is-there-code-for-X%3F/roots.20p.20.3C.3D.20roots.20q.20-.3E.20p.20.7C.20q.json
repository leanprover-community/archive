[
    {
        "content": "<p>We do have <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Polynomial/Roots.html#Polynomial.roots.le_of_dvd\">docs#Polynomial.roots.le_of_dvd</a>. Do we have the converse? I.e. if the roots of <code>p</code> form a subset of the roots of <code>q</code> then <code>p</code> divides <code>q</code>?</p>",
        "id": 509976608,
        "sender_full_name": "Tomaz Mascarenhas",
        "timestamp": 1743695081
    },
    {
        "content": "<p>Trick question: can you formalize the statement of what you want to prove?</p>",
        "id": 509977134,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743695221
    },
    {
        "content": "<p>hm, doesn't</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">roots.dvd_of_le</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\">  </span><span class=\"n\">roots</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">roots</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\">  </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">q</span>\n</code></pre></div>\n<p>work? (in my case I don't care about <code>0</code>s)</p>",
        "id": 509977480,
        "sender_full_name": "Tomaz Mascarenhas",
        "timestamp": 1743695305
    },
    {
        "content": "<p>You should add some typeclasses and the types of <code>p</code> and <code>q</code></p>",
        "id": 509977563,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1743695329
    },
    {
        "content": "<p>Can you make a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>",
        "id": 509977572,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743695331
    },
    {
        "content": "<p>See <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.Splits.dvd_of_roots_le_roots#doc\">docs#Polynomial.Splits.dvd_of_roots_le_roots</a></p>",
        "id": 509977875,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1743695411
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsDomain</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">}</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">roots.dvd_of_le</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\">  </span><span class=\"n\">roots</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">roots</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\">  </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 509978474,
        "sender_full_name": "Tomaz Mascarenhas",
        "timestamp": 1743695565
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/roots.20p.20.3C.3D.20roots.20q.20-.3E.20p.20.7C.20q/near/509977875\">said</a>:</p>\n<blockquote>\n<p>See <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.Splits.dvd_of_roots_le_roots#doc\">docs#Polynomial.Splits.dvd_of_roots_le_roots</a></p>\n</blockquote>\n<p>hm, let me see</p>",
        "id": 509978541,
        "sender_full_name": "Tomaz Mascarenhas",
        "timestamp": 1743695586
    },
    {
        "content": "<p>That works for me! Thanks <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span>!</p>",
        "id": 509979184,
        "sender_full_name": "Tomaz Mascarenhas",
        "timestamp": 1743695741
    },
    {
        "content": "<p>Found by <span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> Polynomial.roots, _ ≤ _, _ ∣ _</p>",
        "id": 509979373,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1743695787
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Polynomial/Roots.html#Polynomial.roots.le_of_dvd\">Polynomial.roots.le_of_dvd</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Polynomial/Roots.html#Multiset.prod_X_sub_C_dvd_iff_le_roots\">Multiset.prod_X_sub_C_dvd_iff_le_roots</a>, and <a href=\"https://loogle.lean-lang.org/?q=Polynomial.roots%2C%20_%20%E2%89%A4%20_%2C%20_%20%E2%88%A3%20_\">2 more</a></p>",
        "id": 509979380,
        "sender_full_name": "loogle",
        "timestamp": 1743695788
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"360938\">Tomaz Mascarenhas</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/roots.20p.20.3C.3D.20roots.20q.20-.3E.20p.20.7C.20q/near/509978474\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsDomain</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">}</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">roots.dvd_of_le</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\">  </span><span class=\"n\">roots</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">roots</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\">  </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>This isn't true, e.g. <code>roots (X^2+1)</code> is empty if R is the real numbers (this was why it was a trick question) as is roots (X^2+2) so both inclusions are valid but neither polynomial divides the other.</p>",
        "id": 509992160,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743699387
    },
    {
        "content": "<p>This is why <code>(hp : Polynomial.Splits (RingHom.id K) p)</code> is essential in Yury's answer (i.e. \"all the roots are in the base ring\")</p>",
        "id": 509993010,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743699628
    },
    {
        "content": "<p>BTW, should we add versions of <code>Polynomial.Splits</code> lemmas in the <code>Polynomial</code> namespace assuming that the field is algebraically closed?</p>",
        "id": 509997710,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1743700988
    }
]