[
    {
        "content": "<p>When I perform <code>cases</code> on a hypothesis of the form <code>∃ h, p h</code>, the built-in recursor is used that requires the goal to be in <code>Prop</code>. Under classical reasoning however, this can be relaxed to any <code>Sort</code> using the alternative recursor <code>Exists.classicalRecOn</code>. Is there any way to get <code>cases</code> to use this recursor, or is there a tactic that serves the same purpose?</p>",
        "id": 523732913,
        "sender_full_name": "Dylan Ede",
        "timestamp": 1749726544
    },
    {
        "content": "<p>You can use the <code>choose</code> tactic</p>",
        "id": 523733129,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1749726633
    },
    {
        "content": "<p>Sorry, I'm having difficulty figuring out how to use <code>choose</code> for this. Does it not require a different form of hypothesis?</p>",
        "id": 523734291,
        "sender_full_name": "Dylan Ede",
        "timestamp": 1749727100
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"bp\">.</span><span class=\"n\">intro</span>\n<span class=\"w\">  </span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">c</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hc</span><span class=\"bp\">⟩</span>\n</code></pre></div>",
        "id": 523734681,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1749727246
    },
    {
        "content": "<p>Ah, thank you. That usage of <code>choose</code> seems to be undocumented though?</p>",
        "id": 523735231,
        "sender_full_name": "Dylan Ede",
        "timestamp": 1749727432
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"409979\">Dylan Ede</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.60cases.60-like.20tactic.20for.20.60Exists.2EclassicalRecOn.60.3F/near/523732913\">said</a>:</p>\n<blockquote>\n<p>When I perform <code>cases</code> on a hypothesis of the form <code>∃ h, p h</code>, the built-in recursor is used that requires the goal to be in <code>Prop</code>. Under classical reasoning however, this can be relaxed to any <code>Sort</code> using the alternative recursor <code>Exists.classicalRecOn</code>. Is there any way to get <code>cases</code> to use this recursor, or is there a tactic that serves the same purpose?</p>\n</blockquote>\n<p>if you're making data (i.e. not Prop), it is recommended to not use tactics</p>",
        "id": 523735787,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749727621
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">⟨</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">choose_spec</span><span class=\"bp\">⟩</span>\n</code></pre></div>\n<p>(no import needed!)</p>",
        "id": 523735931,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749727672
    },
    {
        "content": "<p>Fair enough. I've tried out <code>choose</code> instead of the tactic-less version of the code I'm working on and the tactic-less version is indeed more readable.</p>",
        "id": 523737604,
        "sender_full_name": "Dylan Ede",
        "timestamp": 1749728304
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"409979\">Dylan Ede</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/.60cases.60-like.20tactic.20for.20.60Exists.2EclassicalRecOn.60.3F/near/523735231\">said</a>:</p>\n<blockquote>\n<p>Ah, thank you. That usage of <code>choose</code> seems to be undocumented though?</p>\n</blockquote>\n<p>Think of it as that the hypothesis has zero foralls on top</p>",
        "id": 523738553,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1749728660
    }
]