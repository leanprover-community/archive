[
    {
        "content": "<p>Is there a version of <code>Nat.find nonempty</code> that works for integers if you ensure that everything in the set is a greater than or equal to zero. Right now I have to do a lot of type conversions.</p>",
        "id": 510387206,
        "sender_full_name": "Ibrahim Sufi",
        "timestamp": 1743869249
    },
    {
        "content": "<p>you can always use choice...</p>",
        "id": 510387561,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743869496
    },
    {
        "content": "<p>We have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PNat.find#doc\">docs#PNat.find</a></p>",
        "id": 510387878,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1743869668
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Find</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Logic</span><span class=\"bp\">.</span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">Nat</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidablePred</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">intEquivNat</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">intEquivNat</span><span class=\"bp\">.</span><span class=\"n\">exists_congr_left</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">find_spec</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidablePred</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">find</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">find_spec</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">intEquivNat</span><span class=\"bp\">.</span><span class=\"n\">exists_congr_left</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 510389180,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743870623
    },
    {
        "content": "<p>(works for any integer)</p>",
        "id": 510389347,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743870766
    },
    {
        "content": "<p>it checks numbers in <code>0 → -1 → 1 → -2 → 3 → -3 → ...</code> order</p>",
        "id": 510389618,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743870968
    },
    {
        "content": "<p>I'm pretty sure this exists</p>\n<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> Int, \"Greatest\"</p>",
        "id": 510390987,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743872006
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Int/LeastGreatest.html#Int.exists_greatest_of_bdd\">Int.exists_greatest_of_bdd</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Int/LeastGreatest.html#Int.greatestOfBdd\">Int.greatestOfBdd</a>, and <a href=\"https://loogle.lean-lang.org/?q=Int%2C%20%22Greatest%22\">4 more</a></p>",
        "id": 510390988,
        "sender_full_name": "loogle",
        "timestamp": 1743872007
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Int.leastOfBdd#doc\">docs#Int.leastOfBdd</a></p>",
        "id": 510391026,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743872034
    },
    {
        "content": "<p>I think this is what I am looking for. Does it have the same api has find? How do I get the proof that <code>x := Int.exists_least_of_bdd zero_lower_bound nonempty</code> satisfies the condition P and how do I get the proof that smaller x do not satisfy it.</p>",
        "id": 510541013,
        "sender_full_name": "Ibrahim Sufi",
        "timestamp": 1743990322
    },
    {
        "content": "<p>you can use <code>obtain</code> to destructure the result (which is not the value itself but a proof that it exists with the desired properties):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">px</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x_least</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">exists_least_of_bdd</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>(<code>have</code> might also work here)</p>",
        "id": 510552491,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743997154
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"896403\">Ibrahim Sufi</span> has marked this topic as resolved.</p>",
        "id": 510802891,
        "sender_full_name": "Notification Bot",
        "timestamp": 1744079068
    }
]