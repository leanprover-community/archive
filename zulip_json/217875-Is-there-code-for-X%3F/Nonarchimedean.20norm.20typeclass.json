[
    {
        "content": "<p>Is there anything that specifies that the norm of a NormedAddCommGroup is nonarchimedean? Perhaps something akin to this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Normed</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Nonarchimedean</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NonarchimedeanAddGroup</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">IsNonarchimedean_norm</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsNonarchimedean</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"n\">x</span><span class=\"bp\">‖</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 448910056,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720027505
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"695266\">@Mitchell Lee</span></p>",
        "id": 448915577,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720029515
    },
    {
        "content": "<p>I don't think so</p>",
        "id": 448916021,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1720029661
    },
    {
        "content": "<p>It seems that one implies the other (IsNonarchimedean norm -&gt; NonarchimedeanAddGroup), but not the other way around (?). I'm not great at rigid analysis. What is the right generalization / typeclass constraint to make the following make sense?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NonarchimedeanAddGroup</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ContinuousAdd</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">norm_sum_le_norm_sup_nonarchimedean</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">Nonempty</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">‖∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">sup'</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‖</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">·‖</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 448934705,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720035556
    },
    {
        "content": "<p>It's equivalent to the hypothesis that the norm is nonarchimedean, but you probably have to define that yourself</p>",
        "id": 448936696,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1720036346
    },
    {
        "content": "<p>Right, I'm asking whether there is a typeclass of <code>nonarchimedean normed addgroup</code> that doesn't rely on <code>Fact (IsNonarchimedean ...)</code> or something</p>",
        "id": 448936819,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720036404
    },
    {
        "content": "<p>I thought that <code>NonarchimedeanAddGroup</code> would be it, but I think it's too weak, even in conjunction with <code>NormedAddCommGroup</code>.</p>",
        "id": 448936978,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720036466
    },
    {
        "content": "<p>NB the claim is also true if s is empty, if you regard the codomain of the norm map as being <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">R</mi><mrow><mo>≥</mo><mn>0</mn></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\R_{\\geq0}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9341em;vertical-align:-0.2452em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mrel mtight\">≥</span><span class=\"mord mtight\">0</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2452em;\"><span></span></span></span></span></span></span></span></span></span>, because the supremum of the empty set in this ordering is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>.</p>",
        "id": 448937228,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720036566
    },
    {
        "content": "<p>To rephrase: I don't think that the concept of a nonarchimedean normed additive group is in mathlib and it should be added</p>",
        "id": 448937383,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1720036656
    },
    {
        "content": "<p>Bikeshed time -- what should the name of this be?</p>",
        "id": 448937640,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720036758
    },
    {
        "content": "<p>NonarchimedeanNormedAddCommGroup</p>",
        "id": 448937735,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1720036800
    },
    {
        "content": "<p>Oh</p>",
        "id": 448937968,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1720036850
    },
    {
        "content": "<p>Sorry, this actually is in mathlib already; it's called NonarchAddGroupNorm</p>",
        "id": 448938072,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1720036884
    },
    {
        "content": "<p>Well, there's that, but there doesn't appear to be a typeclass for it</p>",
        "id": 448938162,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1720036919
    },
    {
        "content": "<p>It's a structure that has a \"class\" typeclass for functions of this shape, but not one that say \"for the distinguished norm on this NormedAddGroup, that norm is <code>NonarchFoo</code>\"</p>",
        "id": 448938796,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720037110
    },
    {
        "content": "<p>Basically, if I wanted this lemma about sums (and in the future, tsums) to hold over Z_p, Q_p, and extensions thereof, what would we want the typeclass argument to look like?</p>",
        "id": 448938955,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720037147
    },
    {
        "content": "<p>Yes, you still need to add a typeclass <code>NonarchimedeanNormedAddCommGroup</code> that extends <code>NormedAddCommGroup</code>.</p>",
        "id": 448939479,
        "sender_full_name": "Mitchell Lee",
        "timestamp": 1720037305
    },
    {
        "content": "<p>Another option is to make a Prop typeclass saying the metric is an ultrametric</p>",
        "id": 448985175,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720059447
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14433\">https://github.com/leanprover-community/mathlib4/pull/14433</a></p>",
        "id": 449183649,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1720138154
    }
]