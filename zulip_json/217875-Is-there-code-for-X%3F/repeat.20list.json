[
    {
        "content": "<p>Concatenate a list to itself <code>n</code> times, like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">repeatList</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">repeatList</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">l</span>\n</code></pre></div>\n<p>or like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">repeatList</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">replicate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">flatten</span>\n</code></pre></div>",
        "id": 513717438,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1745351963
    },
    {
        "content": "<p>You have seen <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.replicate#doc\">docs#List.replicate</a>, right? (That's not what you're asking for, but perhaps loogling for that is more helpful.)</p>",
        "id": 513717740,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1745352073
    },
    {
        "content": "<p>I have seen it, I even used it in one of the example implementations!</p>",
        "id": 513717792,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1745352100
    },
    {
        "content": "<p>Unfortunately loogle isn't giving any results :(</p>",
        "id": 513717909,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1745352143
    },
    {
        "content": "<p>I also looked at the hits: all of this seems about repeating a single list.</p>",
        "id": 513717960,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1745352167
    },
    {
        "content": "<p>Here's another:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">repeatList</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">FreeMonoid</span><span class=\"bp\">.</span><span class=\"n\">ofList</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toList</span>\n</code></pre></div>",
        "id": 513717991,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745352180
    },
    {
        "content": "<p>That depends on mathlib!</p>",
        "id": 513718200,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1745352252
    },
    {
        "content": "<p>You seem to use mathlib quite a lot so I figured that would be ok!</p>",
        "id": 513718290,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745352293
    },
    {
        "content": "<p><code>(List.replicate n l).flatten</code> seems fairly idiomatic to me</p>",
        "id": 513718346,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745352312
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/repeat.20list/near/513718290\">said</a>:</p>\n<blockquote>\n<p>You seem to use mathlib quite a lot so I figured that would be ok!</p>\n</blockquote>\n<p>Mathlib is quite useful, but I don't want to import the free monoid in some list code</p>",
        "id": 513718444,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1745352348
    },
    {
        "content": "<p><code>(List.replicate n l).flatten</code> is indeed idiomatic, some helper lemmas are stated in this form, see for example <a href=\"https://loogle.lean-lang.org/?q=%28List.replicate+%3Fn+%3Fl%29.flatten\">this loogle query</a></p>",
        "id": 514068338,
        "sender_full_name": "Bernhard Reinke",
        "timestamp": 1745487304
    },
    {
        "content": "<p>Needed the same repeatList in <a href=\"https://github.com/leanprover-community/mathlib4/pull/24441\">https://github.com/leanprover-community/mathlib4/pull/24441</a><br>\nIs it good idea to make a separate function in mathlib and rewrite all lemmas from that loogle query using this definition?</p>",
        "id": 514925361,
        "sender_full_name": "Igor Shimanogov",
        "timestamp": 1745885473
    },
    {
        "content": "<p>I'd say: The lemmas in Init are in Lean core and should definitely stay. The two hits in mathlib, maybe.</p>",
        "id": 514973509,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1745909252
    },
    {
        "content": "<p>I think perhaps the question should be whether this function should exist in Lean core, but that's a question for <a class=\"stream\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4\">#lean4</a></p>",
        "id": 515081120,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745937264
    }
]