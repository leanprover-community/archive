[
    {
        "content": "<p>Is there an instance of <code>Inhabited</code> for <code>One</code> or <code>Zero</code>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">One</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">1</span><span class=\"bp\">⟩</span>\n</code></pre></div>\n<p>I couldn't find it on Loogle/LeanSearch, but a lot of structures have an <code>Inhabited</code> instance that just uses their <code>Zero</code>.<br>\nIs there a reason to not have such a \"blanket\" instance for all of them?</p>\n<p>Here's an example using a new type:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Zero</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨⟨</span><span class=\"mi\">0</span><span class=\"bp\">⟩⟩</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">One</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">1</span><span class=\"bp\">⟩</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"c1\">-- works</span>\n</code></pre></div>",
        "id": 536910032,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1756555503
    },
    {
        "content": "<p>I think that this one specifically is not an instance, since a ring would have both a <code>0</code> and a <code>1</code> and the two instances would be (usually) different.</p>",
        "id": 536910106,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1756555570
    },
    {
        "content": "<p>To expand, implicit in what I said above is the fact that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Inhabited#doc\">docs#Inhabited</a> actually comes with the specific \"inhabiting\" element (this is sometimes referred to by saying that <code>Inhabited</code> carries data).  This is different from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nonempty#doc\">docs#Nonempty</a> that only says that an element exists, but does not commit to a specific one (this is sometimes referred to by saying that <code>Nonempty</code> is a proposition -- and it really is in <code>Prop</code>!).</p>",
        "id": 536910414,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1756555864
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\">  </span><span class=\"c1\">-- failed to synthesize</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\">  </span><span class=\"c1\">-- works</span>\n</code></pre></div>",
        "id": 536910501,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1756555971
    },
    {
        "content": "<p>Yeah, <code>Inhabited</code> is supposed to be whatever makes sense as the \"default\" element for a type. It's more of a programming concept than a mathematical concept.</p>\n<p>Damiano mentions why there's no theoretic issue adding many <code>Nonempty</code> instances. There can be a practical issue though, since there's a temptation to try to turn <code>Nonempty</code> into a whole automated theorem prover (in the sense of the correspondence between nonempty types and true propositions) and all the instances could slow typeclass inference.</p>",
        "id": 536922371,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1756568495
    }
]