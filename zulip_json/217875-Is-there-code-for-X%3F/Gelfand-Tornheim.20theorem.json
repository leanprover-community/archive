[
    {
        "content": "<p>How far could we add <strong>Gelfand-Tornheim theorem</strong> to mathlib? That is, if a field <code>K</code> has an infinite place (i.e. an <code>AbsoluteValue</code> of it to Reals, which is not non-archimedean),<br>\nthen there exists an embedding <code>K →+* ℂ</code> such that the absolute value is <em>equivalent</em> to<br>\nthe usual absolute value <code>| |</code> on <code>ℂ</code>.</p>\n<p>Here is the idea of proof (which I gave to Aristotle AI):</p>\n<ol>\n<li>\n<p>There exists <code>z</code> such that <code>v z ≤ 1</code> and <code>v (z + 1) &gt; 1</code>. In fact, since <code>v</code> is archimedean,<br>\n   there exists <code>x</code> and <code>y</code> such that <code>v (x + y) &gt; max (v(x), v(y))</code> so we may assume <code>0 &lt; v(x) ≤ v(y)</code>,<br>\n   take <code>z = x / y</code> and we are done.</p>\n</li>\n<li>\n<p>The <code>v(N)</code> is unbounded, where <code>N</code> is the type of natural numbers. Suppose otherwise, i.e.<br>\n   there exists <code>C</code> such that <code>v(n) &lt; C</code> for all natural numbers <code>n</code>, then consider<br>\n<code>v(z + 1) ^ n = v((z+1)^n)</code> for sufficiently large <code>n</code> where <code>z</code> is in the step 1.<br>\n   Consider binomial expansion of <code>(z+1)^n</code>.<br>\n   Then we obtain that <code>v(z + 1) ^ n = v((z+1)^n) &lt; (n + 1) * C</code> which is impossible when <code>n</code> goes infinity.</p>\n</li>\n<li>\n<p>In particular <code>K</code> is of characteristic zero, hence it is a <code>Q</code>-algebra, the restriction of <code>v</code> on<br>\n<code>Q</code> gives an absolute value on <code>Q</code>. By Ostrowski's theorem (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Rat.AbsoluteValue.equiv_real_or_padic#doc\">docs#Rat.AbsoluteValue.equiv_real_or_padic</a> in mathlib),<br>\n   it can be deduced that the restriction of <code>v</code> is equivalent to the real absolute value.</p>\n</li>\n<li>\n<p>Taking completion with respect to the absolute value on the ring homomorphism <code>Q -&gt; K</code><br>\n   we obtain <code>R -&gt; \\widehat{K}</code>, hence <code>\\widehat{K}</code> is a normed field and also a normed <code>R</code>-algebra.<br>\n   By <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NormedAlgebra.Real.nonempty_algEquiv_or#doc\">docs#NormedAlgebra.Real.nonempty_algEquiv_or</a> in mathlib, we know that <code>\\widehat{K}</code> is isomorphic to <code>R</code> or <code>C</code>,<br>\n   in particular, <code>K</code> can be embedded into <code>C</code> preserving the absolute value (up to equivalence).<br>\n   This completes the proof.</p>\n</li>\n</ol>\n<p>The steps 1 - 3 was already formalized in <a href=\"https://github.com/acmepjz/lean-iwasawa/blob/master/Iwasawalib/NumberTheory/RamificationInertia/AbsoluteValue.lean\">https://github.com/acmepjz/lean-iwasawa/blob/master/Iwasawalib/NumberTheory/RamificationInertia/AbsoluteValue.lean</a> (but not provided to AI). The last step is still missing, since it's not known by mathlib the obtained map <code>K →+* ℂ</code> preserving absolute value.</p>\n<p>FYI This is the formal statement of the theorem I gave to Aristotle AI:</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>formal statement</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"sd\">/-- **Gelfand-Tornheim theorem**: if a field `K` has an infinite place,</span>\n<span class=\"sd\">then there exists an embedding `K →+* ℂ` such that the absolute value is *equivalent* to</span>\n<span class=\"sd\">the usual absolute value `| |` on `ℂ`. Note that it is not necessary equal to `| |` as it is</span>\n<span class=\"sd\">in fact equal to `| | ^ c` for some `0 &lt; c ≤ 1`.</span>\n\n<span class=\"sd\">PROVIDED SOLUTION</span>\n<span class=\"sd\">1. There exists `z` such that `v z ≤ 1` and `v (z + 1) &gt; 1`. In fact, since `v` is archimedean,</span>\n<span class=\"sd\">   there exists `x` and `y` such that `v (x + y) &gt; max (v(x), v(y))` so we may assume `0 &lt; v(x) ≤ v(y)`,</span>\n<span class=\"sd\">   take `z = x / y` and we are done.</span>\n<span class=\"sd\">2. The `v(N)` is unbounded, where `N` is the type of natural numbers. Suppose otherwise, i.e.</span>\n<span class=\"sd\">   there exists `C` such that `v(n) &lt; C` for all natural numbers `n`, then consider</span>\n<span class=\"sd\">   `v(z + 1) ^ n = v((z+1)^n)` for sufficiently large `n` where `z` is in the step 1.</span>\n<span class=\"sd\">   Consider binomial expansion of `(z+1)^n`.</span>\n<span class=\"sd\">   Then we obtain that `v(z + 1) ^ n = v((z+1)^n) &lt; (n + 1) * C` which is impossible when `n` goes infinity.</span>\n<span class=\"sd\">3. In particular `K` is of characteristic zero, hence it is a `Q`-algebra, the restriction of `v` on</span>\n<span class=\"sd\">   `Q` gives an absolute value on `Q`. By Ostrowski's theorem (`Rat.AbsoluteValue.equiv_real_or_padic` in mathlib),</span>\n<span class=\"sd\">   it can be deduced that the restriction of `v` is equivalent to the real absolute value.</span>\n<span class=\"sd\">4. Taking completion with respect to the absolute value on the ring homomorphism `Q -&gt; K`</span>\n<span class=\"sd\">   we obtain `R -&gt; \\widehat{K}`, hence `\\widehat{K}` is a normed field and also a normed `R`-algebra.</span>\n<span class=\"sd\">   By `NormedAlgebra.Real.nonempty_algEquiv_or` in mathlib, we know that `\\widehat{K}` is isomorphic to `R` or `C`,</span>\n<span class=\"sd\">   in particular, `K` can be embedded into `C` preserving the absolute value (up to equivalence).</span>\n<span class=\"sd\">   This completes the proof.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">AbsoluteValue</span><span class=\"bp\">.</span><span class=\"n\">exists_ringHom_complex_of_not_isNonarchimedean</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AbsoluteValue</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">IsNontrivial</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">IsNonarchimedean</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">φ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"bp\">→+*</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">NumberField</span><span class=\"bp\">.</span><span class=\"n\">place</span><span class=\"w\"> </span><span class=\"n\">φ</span><span class=\"w\"> </span><span class=\"bp\">≈</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n</div></div>\n<p>After 5 days and countless time of retries, Aristotle AI returns a full formalized proof with 3300 lines (a quick scan reveals that the proof length may be reduced by 90%):</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Aristotle AI output</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p><a href=\"/user_uploads/3121/nmVLGWE_GdH4Yd0Wjz26ni9f/GelfandTornheim_output.lean\">GelfandTornheim_output.lean</a></p>\n</div></div>",
        "id": 573912176,
        "sender_full_name": "Jz Pan",
        "timestamp": 1771088535
    },
    {
        "content": "<p>That should not be hard to get from results in my <a href=\"http://github.com/MichaelStollBayreuth/Heights\">Heights</a> repo.<br>\nSee in particular the end of Heights/Extension.lean there. You take the completion, show that it is an algebra over the reals (with compatible abs. value) and then apply Ostrowski's (other) Theorem.</p>",
        "id": 573913856,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1771089950
    }
]