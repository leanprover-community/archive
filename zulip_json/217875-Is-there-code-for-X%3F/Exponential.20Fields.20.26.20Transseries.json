[
    {
        "content": "<p>It looks like there isn't anything from this branch of logic in mathlib:</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Transseries\">https://en.wikipedia.org/wiki/Transseries</a></p>\n<p>I was also looking for some docs on how one would start to formalize an object like this. More precisely, given a commutative ring <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span>, i want to define the structure <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mi>R</mi><mo separator=\"true\">,</mo><mo>+</mo><mo separator=\"true\">,</mo><mo>×</mo><mo separator=\"true\">,</mo><mo>&lt;</mo><mo separator=\"true\">,</mo><mi>exp</mi><mo>⁡</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(R, +, \\times, &lt;, \\exp)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">+</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">×</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&lt;</span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\">exp</span><span class=\"mclose\">)</span></span></span></span> in Lean. I tried writing an inductive type starting from a base ring <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> and then adding exponential fields \"operations\" so <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>+</mo></mrow><annotation encoding=\"application/x-tex\">+</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord\">+</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>×</mo></mrow><annotation encoding=\"application/x-tex\">\\times</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord\">×</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>exp</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">\\exp</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mop\">exp</span></span></span></span>, but that only encodes \"terms\" of the structure and I loose all algebraic structure (i.e. I have to re-prove commutativity).</p>\n<p>On the other hand, if I use the \"type-class\" approach I can easily define exponential fields in the axiomatic way, but then I lose the ability to match over term structure.</p>\n<p>Is there an idiomatic way of doing this kind of things in Lean?</p>\n<p>P.S. I don't know if this is the correct channel for this type of questions, in that case please tell me were I should move it</p>",
        "id": 498825617,
        "sender_full_name": "Antonio De Lucreziis",
        "timestamp": 1739210029
    },
    {
        "content": "<p>What’s wrong with building on top of what is currently in mathlib’s model theory library?</p>",
        "id": 498977955,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1739270429
    },
    {
        "content": "<p>You can define that as a language expanding the language of rings (the latter being already there)</p>",
        "id": 498978159,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1739270504
    },
    {
        "content": "<p>There’s generic ordered structures but not ordered rings, but again you can combine the two (and add the appropriate compatibility axioms to the theory)</p>",
        "id": 498978393,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1739270563
    },
    {
        "content": "<p>see <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=FirstOrder.Language.ring#doc\">docs#FirstOrder.Language.ring</a></p>",
        "id": 498978534,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1739270605
    },
    {
        "content": "<p>The docs there also explain how to make this work alongside the standard <code>Ring</code> typeclass</p>",
        "id": 498979040,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1739270767
    },
    {
        "content": "<p>(the TLDR is: <span class=\"user-mention\" data-user-id=\"110044\">@Chris Hughes</span> has already done the nasty part of setting this up for you, so you might as well reap the benefits instead of doing it from scratch)</p>",
        "id": 498980525,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1739271264
    },
    {
        "content": "<p>I think the answer is different depending on what you want to do with this structure.</p>\n<p>I think what it you actually want is to just define one particular type which is the type of formal transeries which is not a particularly easy type to define by the looks of it. You're best bet is to look at <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=HahnSeries#doc\">docs#HahnSeries</a> and I suspect it's a special case of this by the looks of the wikipedia article (I don't know what a Transseries or a Hahn Series is so I'm not an expert here)</p>",
        "id": 498982374,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1739271838
    },
    {
        "content": "<p>It's unlikely that anything to do with model theory is what you want. I wouldn't recommend using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=FirstOrder.Language.ring#doc\">docs#FirstOrder.Language.ring</a></p>",
        "id": 498982514,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1739271874
    },
    {
        "content": "<p>What you want is probably <code>HahnSeries _ ℝ</code> and I haven't quite figured out what goes in the placeholder for the <code>_</code>. It'll be some ordered abelian group, but I haven't quite worked out which one from the wikipedia article yet.</p>",
        "id": 498983255,
        "sender_full_name": "Chris Hughes",
        "timestamp": 1739272104
    },
    {
        "content": "<p>Chris, I don't think this can be a Hahn series, since you can have a transseries as an exponent in another transseries</p>",
        "id": 498984015,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1739272361
    },
    {
        "content": "<p>You can however reuse <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=HahnSeries#doc\">docs#HahnSeries</a> by following this construction: <a href=\"https://en.wikipedia.org/wiki/Transseries#Log-free_transseries\">https://en.wikipedia.org/wiki/Transseries#Log-free_transseries</a></p>",
        "id": 498984777,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1739272617
    },
    {
        "content": "<p>The construction from surreal numbers might be the easiest one given the work we have on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Surreal#doc\">docs#Surreal</a>: <a href=\"https://en.wikipedia.org/wiki/Transseries#Using_surreal_numbers\">https://en.wikipedia.org/wiki/Transseries#Using_surreal_numbers</a></p>",
        "id": 498985007,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1739272698
    },
    {
        "content": "<p>Thank you all. I already saw the Surreal numbers definition and I also think it is the one with the most similar construction. I'll let you know if me and my colleague make some progress on this!</p>",
        "id": 499052288,
        "sender_full_name": "Antonio De Lucreziis",
        "timestamp": 1739292221
    }
]