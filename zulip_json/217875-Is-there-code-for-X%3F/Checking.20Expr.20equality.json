[
    {
        "content": "<p>Do we have a variant of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Expr.equal#doc\">docs#Lean.Expr.equal</a> that checks for equality of binder kinds (i.e. <code>default</code> vs <code>implicit</code> etc), but ignores equality of binder names?</p>",
        "id": 475311096,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1728311398
    },
    {
        "content": "<p>Not that I know of, but you could at least normalize all binder names to, say, <code>a</code>, and then use <code>Lean.Expr.equal</code>.</p>",
        "id": 475336733,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1728318065
    },
    {
        "content": "<p>Do we have any convenient way to normalize all names, or do I have to dig into the <code>Expr</code> manually?</p>",
        "id": 475337462,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1728318242
    },
    {
        "content": "<p>I expect you'd have to dig (and also might want to use caching to make sure subexpressions are shared, in case that sort of performance consideration matters!)</p>",
        "id": 475337930,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1728318363
    },
    {
        "content": "<p>Do you know of any code that does such caching for me to look at as an example?</p>",
        "id": 475338501,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1728318498
    },
    {
        "content": "<p>If you use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Core.transform#doc\">docs#Lean.Core.transform</a> to do this renaming, it'll use caching automatically.</p>",
        "id": 475341120,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1728319136
    },
    {
        "content": "<p>Awesome. Thanks Kyle!</p>",
        "id": 475341215,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1728319159
    },
    {
        "content": "<p>You can use a <code>post</code> method for that, and you can return <code>.continue</code> with the updated expression (or <code>.done</code>, it doesn't matter for <code>post</code>)</p>",
        "id": 475341678,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1728319240
    }
]