[
    {
        "content": "<p>Is there an easy way to prove something along these lines?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c1\">-- A continuous linear map T between Banach spaces of rank n is a compact operator</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NontriviallyNormedField</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CompleteSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CompleteSpace</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"n\">L</span><span class=\"o\">[</span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hT</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">rank</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCompactOperator</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 558928405,
        "sender_full_name": "Niels Voss",
        "timestamp": 1763938135
    },
    {
        "content": "<p>Looking at the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsCompactOperator#doc\">docs#IsCompactOperator</a> I am slightly concerned that it is incorrect for fields which are not locally compact (for example for Banach spaces over the field <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">C</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>, for which there's a well-established theory of compact operators). Are you sure that this result is true in the generality in which you've stated it?</p>",
        "id": 558931080,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763941163
    },
    {
        "content": "<p>For example I would ike the identity map from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">C</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PadicComplex#doc\">docs#PadicComplex</a>) to itself to be a compact operator and I am not at all sure that it is with mathlib's definition, because 0 has no compact neighbourhood.</p>",
        "id": 558931212,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763941302
    },
    {
        "content": "<p>I am pretty sure you need <code>[LocallyCompactSpace ùïú]</code></p>",
        "id": 558931247,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1763941348
    },
    {
        "content": "<p>Well in the nonarchimedean world I am 100% sure that you do not, if we are following the human literature, however we will need it with mathlib's current definition of <code>IsCompactOperator</code>.</p>",
        "id": 558931278,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763941383
    },
    {
        "content": "<p>One (correct) definition of a compact operator between Banach spaces over a nontrivially normed nonarchimedean field is a limit of finite rank operators.</p>",
        "id": 558931328,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763941444
    },
    {
        "content": "<p>Sorry, I meant to do the usual proof, I don't know anything about the non-archimedean world</p>",
        "id": 558931332,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1763941446
    },
    {
        "content": "<p>and with the current definition</p>",
        "id": 558931367,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1763941494
    },
    {
        "content": "<p>It might be best to split the theory as early as possible here; in the nonarchimedean world concepts like being trace class and compact all coincide, and they're all \"limit of finite rank operators\". In the local class field theory project we are not making any attempt to unify the arguments for nonarchimedean and archimedean local fields, for example, we just develop the two theories completely separately and then prove the same theorems.</p>",
        "id": 558931432,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763941568
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Finite.20rank.20continuous.20linear.20map.20is.20compact/near/558931328\">said</a>:</p>\n<blockquote>\n<p>One definition of a compact operator between Banach spaces over a nontrivially normed nonarchimedean field is a limit of finite rank operators.</p>\n</blockquote>\n<p>Yes, this is also typically the definition in functional analysis (or at least one characterization)</p>",
        "id": 558931459,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1763941600
    },
    {
        "content": "<p>But you just indicated that for non-locally-compact fields then these definitions do not coincide (consider the identity function <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>‚Üí</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k\\to k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span>). So what exactly is the definition in the archimedean world? Or is what's going on that you always assume your nontrivially normed fields are locally compact? This is definitely not true in the nonarchimedean world, there are no locally compact algebraically closed fields complete with respect to a nontrivial nonarchimdedean norm so local compactness is definitely something you want to avoid assuming when doing nonarchimedean functional analysis.</p>",
        "id": 558931534,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763941702
    },
    {
        "content": "<p>My fields are either the reals or the complex numbers</p>",
        "id": 558931692,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1763941877
    },
    {
        "content": "<p>Oh wow, boy are you missing out ;-) OK interesting! I had not ever seen this definition of a compact operator before because I've only read the nonarchimedean literature. It's not right in the nonarchimedean case (in the sense that it doesn't agree with the literature, which in this case includes my papers).</p>",
        "id": 558931802,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763941989
    },
    {
        "content": "<p>For now Niels I would just add the locally compact assumption.</p>",
        "id": 558931976,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763942157
    },
    {
        "content": "<p>In <a href=\"https://www.numdam.org/item/PMIHES_1962__12__69_0/?source=BSMF_1956__84__319_0\">Serre's foundational paper on the subject</a> (reinterpreting Dwork's work which had just proved some parts of the Weil conjectures) he calls these operators \"compl√®tement continus\" and it always struck me as odd why he didn't call them compact, I just figured that the term compact was not used in the French literature.. Now I'm wondering whether he was making a careful distinction.</p>",
        "id": 558932143,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763942371
    },
    {
        "content": "<p>Once I make the locally compact assumption, is there a theorem in mathlib I can use to show that a finite rank operator is compact?</p>",
        "id": 558932701,
        "sender_full_name": "Niels Voss",
        "timestamp": 1763942870
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"521331\">@Niels Voss</span> I've tried to prove it, but there is a bit of weirdness in the <code>IsCompactOperator</code> file: the predicate is defined for any map, but then there are theorems only stated for linear maps, not the corresponding class so using continuous linear maps is a pain.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- A continuous linear map T between Banach spaces of rank n is a compact operator</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NontriviallyNormedField</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LocallyCompactSpace</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CompleteSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CompleteSpace</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"n\">L</span><span class=\"o\">[</span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hT</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">rank</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCompactOperator</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">letI</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FiniteDimensional</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">toLinearMap</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">finite_of_rank_eq_nat</span><span class=\"w\"> </span><span class=\"n\">hT</span>\n<span class=\"w\">  </span><span class=\"n\">letI</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">FiniteDimensional</span><span class=\"bp\">.</span><span class=\"n\">proper</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">toLinearMap</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">T‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"n\">L</span><span class=\"o\">[</span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">toLinearMap</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">codRestrict</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">toLinearMap</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">T'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"n\">L</span><span class=\"o\">[</span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">toLinearMap</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">subtypeL</span><span class=\"w\"> </span><span class=\"bp\">‚àò</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">T‚ÇÅ</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCompactOperator</span><span class=\"w\"> </span><span class=\"n\">T'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">isCompactOperator_iff_image_closedBall_subset_compact</span><span class=\"w\"> </span><span class=\"n\">T'</span><span class=\"bp\">.</span><span class=\"n\">toLinearMap</span><span class=\"w\"> </span><span class=\"n\">zero_lt_one</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mpr</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">this</span>\n</code></pre></div>",
        "id": 558932827,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1763942976
    },
    {
        "content": "<p><del>I think one can get around with enough <code>apply foo.mpr</code> nonsense, but it is not ideal</del><br>\nThe above reduces to an easy to prove (hopefully) statement</p>",
        "id": 558932906,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1763943055
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> the \"completely continuous\" terminology used to be the standard name for compact operators in functional analysis too. I'm fairly certain the reason for this is that they are still continuous when you equip the domain with the weak topology and the codomain with the norm topology (as opposed to norm on both).</p>",
        "id": 558944409,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1763954731
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"412682\">Moritz Doll</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Finite.20rank.20continuous.20linear.20map.20is.20compact/near/558931459\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Finite.20rank.20continuous.20linear.20map.20is.20compact/near/558931328\">said</a>:</p>\n<blockquote>\n<p>One definition of a compact operator between Banach spaces over a nontrivially normed nonarchimedean field is a limit of finite rank operators.</p>\n</blockquote>\n<p>Yes, this is also typically the definition in functional analysis (or at least one characterization)</p>\n</blockquote>\n<p>I don't think that's true: there are compact operators (in the usual real or complex sense) which are not limits of finite rank operators (on exotic Banach spaces, though). The other direction is always true: a limit of finite rank operators is always compact.</p>",
        "id": 558965334,
        "sender_full_name": "S√©bastien Gou√´zel",
        "timestamp": 1763969051
    },
    {
        "content": "<p>So if it's not possible to unify the two variants of this notion in the literature, we should probably have two names. I'd claim <code>IsCompact</code> should be reserved for the notion that involves compactness (i.e., the image of the closed unit ball is compact), and for limits of finite rank operators <code>IsFiniteRankLimit</code>?</p>",
        "id": 558966243,
        "sender_full_name": "S√©bastien Gou√´zel",
        "timestamp": 1763969439
    },
    {
        "content": "<p>Oh no, you are right: that is exactly the Per Enflo theorem: <a href=\"https://en.wikipedia.org/wiki/Approximation_property\">https://en.wikipedia.org/wiki/Approximation_property</a></p>",
        "id": 558971194,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1763971255
    },
    {
        "content": "<p>Yes it definitely sounds like we need two definitions. Another possibility is that we just namespace things (this might be my preference). This example will I think just be one of several. There are examples in the literature where people attempt to unify archimedean and nonarchimedean analysis and there are basic results which go through in both settings, but beyond some point every proof is of the form \"in the archimedean case we do this, and in the nonarchimedean case we do that\". </p>\n<p>In the book by Jacquet and Langlands <a href=\"https://sunsite.ubc.ca/DigitalMathArchive/Langlands/pdf/jl-ps.pdf\">https://sunsite.ubc.ca/DigitalMathArchive/Langlands/pdf/jl-ps.pdf</a> I remember having real trouble getting beyond the first line of p2 of the book (p6 of the pdf) because it says \"let S(K) be the space of (complex-valued) Schwarz-Bruhat functions on K\" where K is a finite-dimensional algebra over the local field F (so F can be the reals, complexes, or a finite extension of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> or of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mi mathvariant=\"normal\">/</mi><mi>p</mi><mi mathvariant=\"normal\">/</mi><mi>Z</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Z/p/Z((t))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">p</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">Z</span><span class=\"mopen\">((</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">))</span></span></span></span>) and they never define this concept. Ultimately I convinced myself that they must mean \"a Schwarz function if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> is the reals or complexes, and a locally constant function with compact support if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span> is nonarchimedean\". When it comes to formalization I think there is very little point attempting to find some definition of Schwarz-Bruhat function which specialises to both of these things and then doing some contortions to prove the \"theorem\" that these functions are what I say they are in these two cases. If you look on page i of the book (p2 of the pdf) you will see that in \"Chapter 1\" there is only one section (the first section) where they attempt to develop the theory in parallel in the archimedean and nonarchimedean case; after that every section is either specific to the archimdedean or nonarchimedean case and they are basically confessing that the stories are analogous rather than special cases of one underlying collection of theorems which apply in both cases (the complex representation theory of GL_2(F) is far more subtle in the nonarchimedean case because of the existence of supercuspidal representations which have no analogue in the archimedean case). </p>\n<p>Oh, in fact there is actually a <a href=\"https://en.wikipedia.org/wiki/Schwartz%E2%80%93Bruhat_function\">Wikipedia article</a> on Schwarz-Bruhat functions! And indeed it does attempt to give a very convoluted definition which works in the general case. I think that this is just ridiculous; I think that we should have <code>IsROrC.SchwarzBruhatSpace</code>, <code>IsNonarchimedeanLocalField.SchwarzBruhatSpace</code> etc. Maybe the same is true for compact operators -- one could attempt to jump through some hoops or one could suggest that there is an amicable divorce between the archimedean and nonarchimedean people and we retreat into our own namespaces. As a nonarchimedean person I could never stand your insistance of choosing a square root of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>‚àí</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">‚àí</span><span class=\"mord\">1</span></span></span></span> anyway -- you never seemed to understand that you can define complex conjugation perfectly well without making any such choice (and that this is important for people who want to complete a general number field at an infinite place).</p>",
        "id": 558984937,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763975285
    },
    {
        "content": "<p>Namespacing in this specific case does not look like a good idea to me, because the notion of limit of finite rank operators makes perfect sense over R or C, and it is interesting there: the famous Grothendieck question solved by Enflo is asking whether there are compact operators which are not limits of finite rank operators -- to state it, you need both notions in the real world, so having one of them called <code>NonArchimedean.IsCompact</code> would feel very strange.</p>",
        "id": 558986467,
        "sender_full_name": "S√©bastien Gou√´zel",
        "timestamp": 1763975705
    },
    {
        "content": "<p>Oh ok, if this distinction is important to you in the archimedean setting then we need different names.</p>",
        "id": 558989406,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763976516
    }
]