[
    {
        "content": "<p>My exact goal is </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Edges</span><span class=\"o\">[</span><span class=\"bp\">↑</span><span class=\"n\">x</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"bp\">.</span><span class=\"n\">lapMatrix</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span>\n</code></pre></div>\n<p>with the definition </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Edges</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableRel</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sym2</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">edgeSet</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sym2</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toList</span>\n</code></pre></div>\n<p>I found a theorem <code>Finset.sum_ite_eq</code> but that is for summing over Finsets, but by x in the above goal is in <code>Fin G.Edges.length</code>. Can anyone give me any way for this?</p>",
        "id": 515080332,
        "sender_full_name": "Swarnava Chakraborty",
        "timestamp": 1745937086
    },
    {
        "content": "<p>The finset sum lemma should probably work, since this is secretly a sum over <code>Finset.univ</code>.</p>",
        "id": 515080742,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1745937183
    },
    {
        "content": "<p>I do not think this is working in my case. Could you just give an example on how to use it?</p>",
        "id": 515097892,
        "sender_full_name": "Swarnava Chakraborty",
        "timestamp": 1745940803
    },
    {
        "content": "<p>Can you give a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>",
        "id": 515113217,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1745945077
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"887935\">@Swarnava Chakraborty</span> if you can find a way to rewrite the left-hand side to this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Edges</span><span class=\"bp\">.</span><span class=\"n\">toFinset</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>(which I believe is equivalent to your original statement) then you should be able to rewrite that with <code>Finset.sum_ite_eq'</code></p>\n<p>it may be simpler to define <code>Edges</code> to return a <code>Finset</code> instead of a <code>List</code>, allowing you to sum over it without needing the <code>.toFinset</code> call</p>",
        "id": 515167519,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1745965415
    },
    {
        "content": "<p>Yes, going from <code>Finset</code> to <code>List</code> and back again seems unnecessary.</p>",
        "id": 515174932,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745969573
    },
    {
        "content": "<p>Thanks for the suggestions , but at this point I have used so many properties of lists at so many places for <code>Edges</code> that it would be real pain to redefine it. I will try out converting to <code>Finset</code></p>",
        "id": 515338083,
        "sender_full_name": "Swarnava Chakraborty",
        "timestamp": 1746027644
    }
]