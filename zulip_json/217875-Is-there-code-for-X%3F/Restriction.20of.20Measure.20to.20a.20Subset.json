[
    {
        "content": "<p>Given a measure <code>μ</code> defined on some measurable space <code>α</code> and a subset <code>s</code> of <code>α</code>.  I want to obtain a measure on the subtype <code>s</code> by naturally restricting <code>μ</code>. However, <code>μ.restrict s</code> has type <code>Measure α</code> instead of <code>Measure (Subtype s)</code>. Is there a reason for this design?</p>\n<p>I am also aware of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/MeasureTheory/Measure/Restrict.html#MeasureTheory.Measure.Subtype.measureSpace\">MeasureTheory.Measure.Subtype.measureSpace</a>. However, in order to use this definition, I need the instance [<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/MeasureTheory/Measure/MeasureSpaceDef.html#MeasureTheory.MeasureSpace\">MeasureSpace α</a>], i.e. a canonical measure defined on <code>α</code>. What should I do if I want to restrict instead a non-canonical measure?</p>",
        "id": 544341444,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1760208386
    },
    {
        "content": "<p>subtypes are generally hard to use, <code>restrict</code> instead makes it supported on the subset given</p>",
        "id": 544341574,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760208498
    },
    {
        "content": "<p>If <code>s</code> is a measurable subset, then you can use <code>(μ.comap Subtype.val : Measure s)</code></p>",
        "id": 544341660,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1760208577
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"669043\">Yongxi Lin</span> <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Restriction.20of.20Measure.20to.20a.20Subset/near/544341444\">said</a>:</p>\n<blockquote>\n<p>Is there a reason for this design?</p>\n</blockquote>\n<p>Subsets are terms, not types. Sometimes terms are easier to deal with. For example if you're going to measure subsets <code>X</code> of <code>s</code> which are actually subsets of <code>α</code>, then if you use <code>μ.restrict s</code> you can just intersect X and s (or just measure X with the restricted measure). but if you use the subtype <code>↑s</code> you'll have to pull <code>X</code> back to <code>↑s</code> and explicitly work with the inclusion <code>↑s -&gt; α</code> and it will generally be messier.</p>",
        "id": 544341853,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760208767
    },
    {
        "content": "<p>E.g., you can't restrict a measure to <code>s</code>, then restrict the result to <code>t</code> if you use subtypes. More precisely, you'll have to restrict the result to the preimage of <code>t</code> under the inclusion of <code>s</code> to the ambient type. And saying something like \"restrictions commute\" is hard, because the two restrictions are measures on different types.</p>",
        "id": 544342008,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1760208905
    },
    {
        "content": "<p>Thank you for all your reply. I think <code>(μ.comap Subtype.val : Measure s)</code> is what I want.</p>",
        "id": 544342745,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1760209539
    },
    {
        "content": "<p>Also even ignoring the formalization subtleties (which are important) both notions are relevant in paper math. Sometimes one does not want to forget the ambient space, for example if you want to decompose a measure into a sum of restrictions.</p>",
        "id": 544343380,
        "sender_full_name": "David Ledvinka",
        "timestamp": 1760210041
    }
]