[
    {
        "content": "<p>I've noticed there is <code>Valuation</code> and there is <code>ValuationRing</code> in mathlib4, however is there anything for integer valuation? <br>\nAnd also the definition I know is a function <code>f : K -&gt; (WithTop ℤ)</code> where <code>f(ab) = f(a) + f(b)</code> and also <code>f(a) = ⊤ ↔ a = 0</code>, apparently things work differently in mathlib and I'll appreciate if someone can let me know what should I do to define such a valuation.</p>",
        "id": 493179784,
        "sender_full_name": "Edison Xie",
        "timestamp": 1736679713
    },
    {
        "content": "<p>You want <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddValuation#doc\">docs#AddValuation</a></p>",
        "id": 493180333,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1736680201
    },
    {
        "content": "<p>That would a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddValuation#doc\">docs#AddValuation</a></p>",
        "id": 493180380,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736680214
    },
    {
        "content": "<p>Specifically, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddValuation.of#doc\">docs#AddValuation.of</a> is probably what you would be most comfortable with</p>",
        "id": 493180581,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1736680414
    },
    {
        "content": "<p>thanks!</p>",
        "id": 493182592,
        "sender_full_name": "Edison Xie",
        "timestamp": 1736682143
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"699016\">Edison Xie</span> has marked this topic as resolved.</p>",
        "id": 493211196,
        "sender_full_name": "Notification Bot",
        "timestamp": 1736706734
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> has marked this topic as unresolved.</p>",
        "id": 494332950,
        "sender_full_name": "Notification Bot",
        "timestamp": 1737110973
    },
    {
        "content": "<p>Let me stress at any rate the we probably prefer to only stick to multiplicative ones, even if this diverges a bit from the classical math literature.</p>",
        "id": 494333111,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1737111018
    },
    {
        "content": "<p>Why is that the case :((</p>",
        "id": 494333825,
        "sender_full_name": "Edison Xie",
        "timestamp": 1737111248
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddValuation#doc\">docs#AddValuation</a> is also not what you would find in the literature. What you are thinking is probably <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>v</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>v</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">v(ab) = v(a) + v(b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">ab</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span> which sends a multiplicative group to an additive group. This is not supported in mathlib so we either need to multiplicativise the range or additivise the domain. If we go for the latter we would want <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">v(0) = \\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord\">∞</span></span></span></span> but we do not have the theory of \"add-group-with-infinity\" in mathlib so the former is the sensible choice.</p>",
        "id": 494346658,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737115863
    },
    {
        "content": "<p>Now I’m confused. How is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddValuation#doc\">docs#AddValuation</a> not <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mi>b</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>v</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mi>v</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">v(ab) = v(a) + v(b)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">ab</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span></span></span></span> , <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo stretchy=\"false\">(</mo><mn>0</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">v(0) = \\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord\">0</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord\">∞</span></span></span></span>?</p>",
        "id": 494351910,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1737117649
    },
    {
        "content": "<p>Oh it is. Sorry I was confused.</p>",
        "id": 494353848,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1737118306
    },
    {
        "content": "<p>But there's definitely more API in general for \"things with 0\" than \"things with infinity\" eg <code>ring</code> works better</p>",
        "id": 494396198,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1737131231
    }
]