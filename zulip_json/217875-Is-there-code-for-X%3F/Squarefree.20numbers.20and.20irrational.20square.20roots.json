[
    {
        "content": "<p>Hi! I've been working on connecting squarefree numbers to irrationality and have these theorems: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">squarefree_not_isSquare</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hsq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Squarefree</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"n\">m</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">irrational_sqrt_of_squarefree</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hsq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Squarefree</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Irrational</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sqrt</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">squarefree_ten</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Squarefree</span><span class=\"w\"> </span><span class=\"mi\">10</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">irrational_sqrt_ten</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Irrational</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sqrt</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Is there already something like this in Mathlib4? The general theorem <code>irrational_sqrt_of_squarefree</code> seems like it could be useful - it gives a clean way to prove irrationality of √n for any squarefree n &gt; 1.</p>\n<p>If this would be a welcome addition, I'd like to submit a PR!</p>",
        "id": 520319535,
        "sender_full_name": "Richard Zandi",
        "timestamp": 1748201761
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=irrational_sqrt_natCast_iff#doc\">docs#irrational_sqrt_natCast_iff</a> might cover this already (or at least it covers the 2nd step once you've proved the first)</p>",
        "id": 520321758,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1748203641
    },
    {
        "content": "<p>not sure if you're aware, but <code>Irrational (Real.sqrt m)</code> for some <code>(m : ℕ)</code> is actually decidable in Lean, so the following works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Irrational</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sqrt</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>",
        "id": 520323062,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1748204800
    },
    {
        "content": "<p>Thanks Matt! </p>\n<p>Right on both points. I tested <code>by decide</code> and it works perfectly for <code>Irrational (Real.sqrt 10)</code> - much cleaner than my manual proof. </p>\n<p>And  <code>irrational_sqrt_natCast_iff</code> provides the <code>¬IsSquare n → Irrational √n</code> direction I was using. </p>\n<p>The novel part is really <code>squarefree_not_isSquare : Squarefree m → ¬IsSquare m</code>, which provides the missing link. Combined with the existing <code>irrational_sqrt_natCast_iff</code>, this gives a systematic way to prove irrationality via the squarefree property. </p>\n<p>Would <code>squarefree_not_isSquare</code> still be worth contributing as the key bridging theorem?</p>",
        "id": 520325284,
        "sender_full_name": "Richard Zandi",
        "timestamp": 1748206653
    },
    {
        "content": "<p>\"the square root of a squarefree natural bigger than 1 is irrational\" is a strictly weaker statement than \"the square root of a nonsquare natural is irrational\" and we have the latter already.</p>",
        "id": 520327946,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748208897
    },
    {
        "content": "<p><code>squarefree_not_isSquare</code> is a relatively straightforward consequence of the stronger <code>Nat.squarefree_pow_iff</code> but you might be able to get the statement into <code>Data.Nat.Squarefree</code> I guess?</p>",
        "id": 520328368,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748209248
    },
    {
        "content": "<p>Thanks</p>\n<p>I see that <code>squarefree_not_isSquare</code> would be a convenience lemma rather than filling a gap. Would it be worth adding to <code>Data.Nat.Squarefree</code> as a straightforward application of <code>Nat.squarefree_pow_iff</code>?</p>",
        "id": 520334798,
        "sender_full_name": "Richard Zandi",
        "timestamp": 1748215506
    },
    {
        "content": "<p>You can try it, it might just get shooed through or people might ask why you need it, it's difficult for me to guess what will happen. I usually only PR stuff which I need in big projects but other people do things differently.</p>",
        "id": 520336136,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748216989
    }
]