[
    {
        "content": "<p>If one has a sheaf of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mi>X</mi></msub></mrow><annotation encoding=\"application/x-tex\">O_X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> modules <code>F</code>, then the stalk of <code>F</code> at some point <code>z</code> should be a module over the stalk of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>O</mi><mi>X</mi></msub></mrow><annotation encoding=\"application/x-tex\">O_X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> at <code>z</code> (this should also be true for a more general sheaf of rings). I feel like this statement should have a very simple one line proof or even be proven by typeclass inference, but such a proof is not coming to me. Can anyone think of a slick way to show this?</p>",
        "id": 555321006,
        "sender_full_name": "Raphael Douglas Giles",
        "timestamp": 1763030543
    },
    {
        "content": "<p>Pedantic remark: this isn't a proof, this involves data (and in particular one has to watch out for diamonds). Can you state what you want in lean?</p>",
        "id": 555383697,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763046919
    },
    {
        "content": "<p>Sure, sorry I should have been more specific. I would like to have the following instance: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">instModuleSheafOfModulesStalk</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">Modules</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">presheaf</span><span class=\"bp\">.</span><span class=\"n\">stalk</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">TopCat</span><span class=\"bp\">.</span><span class=\"n\">Presheaf</span><span class=\"bp\">.</span><span class=\"n\">stalk</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"bp\">.</span><span class=\"n\">presheaf</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 555414795,
        "sender_full_name": "Raphael Douglas Giles",
        "timestamp": 1763054087
    },
    {
        "content": "<p>Probably you would want to use the functoriality of taking stalks <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=stalkFunctor_obj#doc\">docs#stalkFunctor_obj</a>, but I think you would need a trick to get an easy 'proof', since we're essentially saying \"something is a module over a colimit\" which I haven't seen much of in mathlib?</p>",
        "id": 555426604,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1763057429
    },
    {
        "content": "<p>cf <a href=\"https://github.com/leanprover-community/mathlib4/pull/14412\">#14412</a> but I don't think the author is active anymore</p>",
        "id": 555429241,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1763058276
    },
    {
        "content": "<p>They've got a job doing Lean at a tech company so probably have very little time for mathlib right now.</p>",
        "id": 555590707,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763127833
    }
]