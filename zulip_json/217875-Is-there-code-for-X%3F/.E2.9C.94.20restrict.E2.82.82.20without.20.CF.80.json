[
    {
        "content": "<p>Is there a variant of <a href=\"https://github.com/leanprover-community/mathlib4/blob/8265c60c1d975509f22d6fc59d6d15d3b745b746/Mathlib/Data/Set/Function.lean#L43-L45\"><code>restrict</code></a> / <a href=\"https://github.com/leanprover-community/mathlib4/blob/8265c60c1d975509f22d6fc59d6d15d3b745b746/Mathlib/Data/Set/Function.lean#L115-L118\"><code>restrict₂</code></a> that doesn't require π?</p>\n<p>(For reference, here is the signature of <code>restrict</code> and <code>restrict₂</code>):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">restrict</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">π</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">π</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">restrict₂</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">π</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">π</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>",
        "id": 499393518,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1739430915
    },
    {
        "content": "<p>Do you mean a non-dependent version? If so it is already working, as non-dependent is a special case of dependent.</p>",
        "id": 499394261,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1739431260
    },
    {
        "content": "<p>I believe I do, but I'm confused as how a non-dependent version is a special case of a dependent version. </p>\n<p>To better convey what I'm looking for, here's the signature I would like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">restrict</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span>\n</code></pre></div>",
        "id": 499394691,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1739431447
    },
    {
        "content": "<p>A dependent function is a function whose codomain depends on the input. In particular if the codomain is « constant », i.e. it does not depend on the input, then it still fits this definition, and this special case is what is called non dependent. It’s the same as in set theory when saying that if you take the product of a set with itself, you get a set of functions with values in said set.<br>\nAnyway, the signature you wrote is a special case of the definition, so the current definition should work fine with your use case.</p>",
        "id": 499395875,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1739431958
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"767695\">Tristan Figueroa-Reid</span> has marked this topic as resolved.</p>",
        "id": 499397252,
        "sender_full_name": "Notification Bot",
        "timestamp": 1739432546
    }
]