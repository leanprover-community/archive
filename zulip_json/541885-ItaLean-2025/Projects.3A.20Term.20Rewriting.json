[
    {
        "content": "<p>This thread is dedicated to the Term Rewriting project:</p>\n<ul>\n<li>Repository: ?</li>\n<li>Informal &amp; Formal Manager: <span class=\"user-mention\" data-user-id=\"687698\">@Chris Henson</span></li>\n</ul>",
        "id": 562740983,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1765299165
    },
    {
        "content": "<p>Since there are just a few of us, I think we can easily work from a branch in my fork of CSLib: <a href=\"https://github.com/chenson2018/cslib/tree/italean-traat\">https://github.com/chenson2018/cslib/tree/italean-traat</a>. I pushed a slightly cleaned up version of our discussion from this evening. For simplicity I'm just throwing everything in the <code>Relation</code> namespace at the top of <code>Cslib/Foundations/Data/Relation.lean</code>. I can clean up namespaces before anything is PR'd.</p>",
        "id": 562782753,
        "sender_full_name": "Chris Henson",
        "timestamp": 1765309420
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"940184\">@Alessandro D'Angelo</span> Could you share you GitHub username and the proofs you wrote yesterday for (semi)confluence/Church-Rosser? I'll try to clean things up a bit before project work this afternoon.</p>",
        "id": 563121912,
        "sender_full_name": "Chris Henson",
        "timestamp": 1765439727
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"687698\">@Chris Henson</span> sorry yesterday I went back to my airbnb quite late. Here's the code:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">semiConfluent_to_confluent</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SemiConfluent</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Confluent</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- We need to show: ∀ x y1 y2, x ↠ y1 → x ↠ y2 → Join (ReflTransGen r) y1 y2</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y1</span><span class=\"w\"> </span><span class=\"n\">y2</span><span class=\"w\"> </span><span class=\"n\">h_xy1</span><span class=\"w\"> </span><span class=\"n\">h_xy2</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Induction on the first reduction chain x ↠ y1</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">h_xy1</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">y2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h_xy2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ReflTransGen</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"n\">h_xz</span><span class=\"w\"> </span><span class=\"n\">h_zy1</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h_zu</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h_y2u</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ih</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h_y1v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h_uv</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">h_zu</span><span class=\"w\"> </span><span class=\"n\">h_zy1</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h_y1v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ReflTransGen</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">h_y2u</span><span class=\"w\"> </span><span class=\"n\">h_uv</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">confluent_to_churchRosser</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Confluent</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChurchRosser</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">h_eqv</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Induction on the structure of the equivalence x ≈ y</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">h_eqv</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">rel</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">h_r</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ReflTransGen</span><span class=\"bp\">.</span><span class=\"n\">single</span><span class=\"w\"> </span><span class=\"n\">h_r</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ReflTransGen</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ReflTransGen</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ReflTransGen</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">symmetric_join</span><span class=\"w\"> </span><span class=\"n\">ih</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">ih1</span><span class=\"w\"> </span><span class=\"n\">ih2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hau</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hbu</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ih1</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hbv</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hcv</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ih2</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">w</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">huw</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hvw</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">hbu</span><span class=\"w\"> </span><span class=\"n\">hbv</span>\n<span class=\"w\">    </span><span class=\"n\">exists</span><span class=\"w\"> </span><span class=\"n\">w</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨?_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">ReflTransGen</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">hau</span><span class=\"w\"> </span><span class=\"n\">huw</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">ReflTransGen</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">hcv</span><span class=\"w\"> </span><span class=\"n\">hvw</span>\n\n<span class=\"sd\">/-- Theorem 2.1.5 (3 ⇒ 1): Semi-confluence implies the Church-Rosser property. -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">SemiConfluent_toChurchRosser</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SemiConfluent</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ChurchRosser</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">confluent_to_churchRosser</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">semiConfluent_to_confluent</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>P.S. my github user name is a-dangelo</p>",
        "id": 563123826,
        "sender_full_name": "Alessandro D'Angelo",
        "timestamp": 1765440435
    },
    {
        "content": "<p>I have pushed the <code>SemiConfluent r ↔ ChurchRosser r ↔ Confluent r</code> proofs with some cleaning done. With some help from <code>grind</code> we end up with pretty compact proofs.</p>",
        "id": 563185300,
        "sender_full_name": "Chris Henson",
        "timestamp": 1765459510
    },
    {
        "content": "<p>I have opened <a href=\"https://github.com/leanprover/cslib/pull/215\">cslib#215</a></p>",
        "id": 563700835,
        "sender_full_name": "Chris Henson",
        "timestamp": 1765731926
    },
    {
        "content": "<p>Great thanks!</p>",
        "id": 563807284,
        "sender_full_name": "Alessandro D'Angelo",
        "timestamp": 1765801041
    },
    {
        "content": "<p>This is now merged, thank you all! I will be continuing work along these lines, please ping me in the CSLib channel for any further discussion.</p>",
        "id": 563807754,
        "sender_full_name": "Chris Henson",
        "timestamp": 1765801177
    }
]