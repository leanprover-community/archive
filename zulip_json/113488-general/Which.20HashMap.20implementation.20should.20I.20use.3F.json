[
    {
        "content": "<p>According to Loogle, there's <code>Std.HashMap</code>, <code>Lean.HashMap</code>,  and <code>Batteries.HashMap</code>. Is there any one of these that is recommended to use, or better suited for particular purposes? Or are they pretty much the same?</p>",
        "id": 482232157,
        "sender_full_name": "nrs",
        "timestamp": 1731521430
    },
    {
        "content": "<p>One of the two should be deprecated: if you used one and you did not get a deprecation, you're using the correct one!</p>",
        "id": 482233595,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1731521910
    },
    {
        "content": "<p>I see, thank you!!</p>",
        "id": 482233729,
        "sender_full_name": "nrs",
        "timestamp": 1731521960
    },
    {
        "content": "<p>None of them are deprecated in mathlib master as far as I can tell</p>",
        "id": 482234135,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731522113
    },
    {
        "content": "<p>can confirm that importing these and using <code>#print</code> on their names does not report any deprecation notice</p>",
        "id": 482234619,
        "sender_full_name": "nrs",
        "timestamp": 1731522271
    },
    {
        "content": "<p>Ooh then I misremember: I thought that I had some deprecation about them, but maybe it was hashset then?</p>",
        "id": 482234666,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1731522294
    },
    {
        "content": "<p><code>#print</code> may not be enough to trigger a deprecation (<code>#check</code> is not enough, print... Maybe!)</p>",
        "id": 482234768,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1731522333
    },
    {
        "content": "<p>Std.HashMap has all the nice lemmas iirc</p>",
        "id": 482234802,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731522348
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Lean/Data/HashMap.html#Lean.HashMap\">https://leanprover-community.github.io/mathlib4_docs/Lean/Data/HashMap.html#Lean.HashMap</a></p>",
        "id": 482234833,
        "sender_full_name": "David Renshaw",
        "timestamp": 1731522360
    },
    {
        "content": "<p>^ looks deprecated to me</p>",
        "id": 482234881,
        "sender_full_name": "David Renshaw",
        "timestamp": 1731522364
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Batteries</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 482234917,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731522378
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/blob/7dc1ceb8d4312850b39cef9e751e0a3b651946e3/src/Lean/Data/HashMap.lean#L274\">https://github.com/leanprover/lean4/blob/7dc1ceb8d4312850b39cef9e751e0a3b651946e3/src/Lean/Data/HashMap.lean#L274</a></p>",
        "id": 482234950,
        "sender_full_name": "David Renshaw",
        "timestamp": 1731522389
    },
    {
        "content": "<p>Indeed, the deprecation shows up if you don't use <code>#check</code></p>",
        "id": 482234968,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731522395
    },
    {
        "content": "<p>tyvm for answers!! hm, if <code>Std.HashMap</code> has more lemmas, is there any reason to use <code>Batteries.HashMap</code>?</p>",
        "id": 482235626,
        "sender_full_name": "nrs",
        "timestamp": 1731522621
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/113488-general/topic/Which.20HashMap.20implementation.20should.20I.20use.3F/near/482234768\">said</a>:</p>\n<blockquote>\n<p><code>#print</code> may not be enough to trigger a deprecation (<code>#check</code> is not enough, print... Maybe!)</p>\n</blockquote>\n<p><a href=\"#narrow/channel/270676-lean4/topic/deprecation.20and.20arguments\">Here</a> is a similar discussion about deprecation and <code>#check</code>.</p>",
        "id": 482249940,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1731527995
    },
    {
        "content": "<p>Please only use <code>Std.HashMap</code> going forward!</p>",
        "id": 482294564,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731549262
    },
    {
        "content": "<p><a href=\"#narrow/channel/348111-batteries/topic/Unifying.20.60Batteries.2EHashMap.60.20and.20.60Std.2EHashMap.60.2E/near/477103618\">https://leanprover.zulipchat.com/#narrow/channel/348111-batteries/topic/Unifying.20.60Batteries.2EHashMap.60.20and.20.60Std.2EHashMap.60.2E/near/477103618</a> is my proposal for a deprecation path for Batteries.HashMap.</p>",
        "id": 482294643,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731549315
    },
    {
        "content": "<p>Will do, ty for answer!</p>",
        "id": 482297144,
        "sender_full_name": "nrs",
        "timestamp": 1731550983
    }
]