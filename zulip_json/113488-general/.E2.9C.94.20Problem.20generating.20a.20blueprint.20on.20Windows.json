[
    {
        "content": "<p>I am planning on giving a small presentation in my department on Lean4, and would like to include in the presentation my own blueprint. </p>\n<p>Following the README from the leanblueprint repo, I have installed, on Windows, leanblueprint and all its dependencies. I think it is installed correctly, since typing <code>pip install -U leanblueprint</code> returns a bunch of statements all of the form <code>Requirement already satisfied: xxx</code></p>\n<p>However, when I try to run <br>\n<code>leanblueprint new</code><br>\nin the folder I want to create a blueprint for, I get the following error: <br>\n<code>'leanblueprint' is not recognized as an internal or external command,\noperable program or batch file.</code></p>\n<p>Does anyone recognise what this error is, and if there is a fix ?</p>\n<p>As a remark, I believe there is no problem with the repository itself, because <span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> was able to create a blueprint for the same repo, on a Unix system.</p>",
        "id": 450385493,
        "sender_full_name": "Antoine de Saint Germain",
        "timestamp": 1720600954
    },
    {
        "content": "<p>What's your OS? I am assuming that this is a path issue. Can you paste the full output of <code>pip install -U leanblueprint</code> ? [Edit: now reading on a computer -- on mobile I was unable to see the full title of the thread hence the silly question about what OS -- apologies!]</p>",
        "id": 450387631,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720601646
    },
    {
        "content": "<p>I'm on Windows 11</p>",
        "id": 450388238,
        "sender_full_name": "Antoine de Saint Germain",
        "timestamp": 1720601892
    },
    {
        "content": "<p>Here is the full output:<br>\n<code>C:\\Users\\user\\Desktop\\lean\\new_project\\my_project&gt;pip install -U leanblueprint\nDefaulting to user installation because normal site-packages is not writeable\nRequirement already satisfied: leanblueprint in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (0.0.10)\nRequirement already satisfied: plasTeX&gt;=3.1 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from leanblueprint) (3.1)\nRequirement already satisfied: plastexshowmore&gt;=0.0.2 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from leanblueprint) (0.0.2)\nRequirement already satisfied: plastexdepgraph&gt;=0.0.4 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from leanblueprint) (0.0.4)\nRequirement already satisfied: click in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from leanblueprint) (8.1.7)\nRequirement already satisfied: rich in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from leanblueprint) (13.7.1)\nRequirement already satisfied: rich-click in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from leanblueprint) (1.8.3)\nRequirement already satisfied: tomlkit in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from leanblueprint) (0.12.5)\nRequirement already satisfied: Jinja2&gt;=3.1.0 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from leanblueprint) (3.1.4)\nRequirement already satisfied: GitPython&gt;=3.1.28 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from leanblueprint) (3.1.43)\nRequirement already satisfied: gitdb&lt;5,&gt;=4.0.1 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from GitPython&gt;=3.1.28-&gt;leanblueprint) (4.0.11)\nRequirement already satisfied: MarkupSafe&gt;=2.0 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from Jinja2&gt;=3.1.0-&gt;leanblueprint) (2.1.5)\nRequirement already satisfied: Unidecode&gt;=0.4.21 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from plasTeX&gt;=3.1-&gt;leanblueprint) (1.3.8)\nRequirement already satisfied: Pillow&gt;=7 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from plasTeX&gt;=3.1-&gt;leanblueprint) (10.4.0)\nRequirement already satisfied: typing-extensions&gt;=3.7 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from plasTeX&gt;=3.1-&gt;leanblueprint) (4.12.2)\nRequirement already satisfied: pygraphviz in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from plastexdepgraph&gt;=0.0.4-&gt;leanblueprint) (1.13)\nRequirement already satisfied: colorama in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from click-&gt;leanblueprint) (0.4.6)\nRequirement already satisfied: markdown-it-py&gt;=2.2.0 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from rich-&gt;leanblueprint) (3.0.0)\nRequirement already satisfied: pygments&lt;3.0.0,&gt;=2.13.0 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from rich-&gt;leanblueprint) (2.18.0)\nRequirement already satisfied: smmap&lt;6,&gt;=3.0.1 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from gitdb&lt;5,&gt;=4.0.1-&gt;GitPython&gt;=3.1.28-&gt;leanblueprint) (5.0.1)\nRequirement already satisfied: mdurl~=0.1 in c:\\users\\user\\appdata\\local\\packages\\pythonsoftwarefoundation.python.3.12_qbz5n2kfra8p0\\localcache\\local-packages\\python312\\site-packages (from markdown-it-py&gt;=2.2.0-&gt;rich-&gt;leanblueprint) (0.1.2)</code></p>",
        "id": 450388280,
        "sender_full_name": "Antoine de Saint Germain",
        "timestamp": 1720601907
    },
    {
        "content": "<p>When I ran that command I got pretty much the same thing, followed by</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>Installing<span class=\"w\"> </span>collected<span class=\"w\"> </span>packages:<span class=\"w\"> </span>tomlkit,<span class=\"w\"> </span>leanblueprint\n<span class=\"w\">  </span>Attempting<span class=\"w\"> </span>uninstall:<span class=\"w\"> </span>leanblueprint\n<span class=\"w\">    </span>Found<span class=\"w\"> </span>existing<span class=\"w\"> </span>installation:<span class=\"w\"> </span>leanblueprint<span class=\"w\"> </span><span class=\"m\">0</span>.0.8\n<span class=\"w\">    </span>Uninstalling<span class=\"w\"> </span>leanblueprint-0.0.8:\n<span class=\"w\">      </span>Successfully<span class=\"w\"> </span>uninstalled<span class=\"w\"> </span>leanblueprint-0.0.8\nSuccessfully<span class=\"w\"> </span>installed<span class=\"w\"> </span>leanblueprint-0.0.10<span class=\"w\"> </span>tomlkit-0.12.5\n</code></pre></div>\n<p>(because I was not up to date, apparently) and when I ran it again I got pretty much the same output as you (just ending with </p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>Requirement<span class=\"w\"> </span>already<span class=\"w\"> </span>satisfied,<span class=\"w\"> </span>skipping<span class=\"w\"> </span>upgrade:<span class=\"w\"> </span>mdurl~<span class=\"o\">=</span><span class=\"m\">0</span>.1<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>/home/buzzard/.local/lib/python3.8/site-packages<span class=\"w\"> </span><span class=\"o\">(</span>from<span class=\"w\"> </span>markdown-it-py&gt;<span class=\"o\">=</span><span class=\"m\">2</span>.2.0-&gt;rich-&gt;leanblueprint<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"m\">0</span>.1.2<span class=\"o\">)</span>\n</code></pre></div>\n<p>and no other comments about installing or uninstalling). So my guess is that you've got the project installed correctly and it's a path issue. Try using a different shell? Or trying to find where the file <code>leanblueprint</code> is installed and running it directly, or adding the directory to your path?</p>",
        "id": 450390613,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720602544
    },
    {
        "content": "<p>Good suggestion; I'll try to go fishing for <code>leanblueprint</code> and maybe move it. I'll let you know if that leads to anything !</p>",
        "id": 450393507,
        "sender_full_name": "Antoine de Saint Germain",
        "timestamp": 1720603422
    },
    {
        "content": "<p>Note that on Windows you might run into issues with unicode characters: <a href=\"https://github.com/PatrickMassot/leanblueprint/pull/29\">PatrickMassot/leanblueprint#29</a></p>",
        "id": 450400360,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1720604960
    },
    {
        "content": "<p>FWIW I made it run on Win but using the WSL subsystem for Linux.</p>",
        "id": 450404917,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1720606382
    },
    {
        "content": "<p>Ok the blueprint now works for me. The solution was to invoke <code>python3 -m leanblueprint.client new</code> rather than <code>leanblueprint new</code><br>\nIn the words of the authors of the package themselves:<br>\n\"This is useful for when python is on the path but its installed scripts are not\".<br>\nPresumably that is my case</p>",
        "id": 450418512,
        "sender_full_name": "Antoine de Saint Germain",
        "timestamp": 1720610290
    },
    {
        "content": "<p>For reference, I found this at the bottom of file <code>client.py</code> inside the folder <code>leanblueprint</code>. Thank you <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> for the suggestion to go fishing</p>",
        "id": 450418573,
        "sender_full_name": "Antoine de Saint Germain",
        "timestamp": 1720610306
    },
    {
        "content": "<p>In general, <code>pip</code> shouldn't be used to install an executable globally. You should be setting up a python virtual environment for your project and using <code>pip</code> to install into that (or use <code>pipx</code>). You can then activate your virtual environment which will give you access to running <code>leanblueprint</code>.</p>",
        "id": 450610530,
        "sender_full_name": "Richard Osborn",
        "timestamp": 1720666247
    },
    {
        "content": "<p>Just to remark that I only ever use pip when I'm installing Patrick's lean-related software on my computers and I install everything globally and I've never had a problem.</p>",
        "id": 450620935,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720672801
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"560559\">Richard Osborn</span> <a href=\"#narrow/stream/113488-general/topic/Problem.20generating.20a.20blueprint.20on.20Windows/near/450610530\">said</a>:</p>\n<blockquote>\n<p>In general, <code>pip</code> shouldn't be used to install an executable globally.</p>\n</blockquote>\n<p>I understand what you mean and do the same personally, but I think it's reasonable for Lean users, who may not use Python for anything else, to use pip without a virtual environment.</p>",
        "id": 450624885,
        "sender_full_name": "Chris Henson",
        "timestamp": 1720675712
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"712499\">Antoine de Saint Germain</span> has marked this topic as resolved.</p>",
        "id": 450635057,
        "sender_full_name": "Notification Bot",
        "timestamp": 1720681696
    },
    {
        "content": "<p>I only say it as a warning that after PEP 668, <code>pip</code> may eventually be unable to install in the global context. I believe the \"official\" alternative if you want to install a CLI application globally is to use <code>pipx</code>.</p>",
        "id": 450694393,
        "sender_full_name": "Richard Osborn",
        "timestamp": 1720700234
    },
    {
        "content": "<p>Thanks for the heads up! No doubt if this becomes enforced, Patrick will update his installation instructions :-)</p>",
        "id": 450712059,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720704856
    },
    {
        "content": "<p>I guess we'll burn that bridge when we get to it, yeah</p>",
        "id": 450712159,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1720704879
    }
]