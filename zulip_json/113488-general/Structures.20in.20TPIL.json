[
    {
        "content": "<p>In <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/\">#tpil</a>, <a href=\"https://lean-lang.org/theorem_proving_in_lean4/structures_and_records.html\">chapter 4</a> it is stated,</p>\n<blockquote>\n<p>a non-recursive inductive type that contains only one constructor is called a <em>structure</em></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110596\">@Rob Lewis</span> and I were just discussing the following example, which is a non-recursive inductive type with one constructor; we couldn't figure out how to express it as a structure.  Is there a missing hypothesis in the TPIL statement?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 480068419,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1730474129
    },
    {
        "content": "<p>\"without indices\"</p>",
        "id": 480069059,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1730474374
    },
    {
        "content": "<p>That's if you mean \"structure\" as \"able to be expressed with the <code>structure</code> command\". These are confusingly different concepts! (Issue <a href=\"https://github.com/leanprover/lean4/pull/5891\">lean4#5891</a> tracks trying to get the terminology to be less confusing.)</p>",
        "id": 480069443,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1730474502
    },
    {
        "content": "<p>In the next release, the <code>structure</code> command can create recursive inductive types, but it still can't define any that have indices. Also, in general you will be able to use numeric projection notation for any one-constructor inductive type (so long as it's logically valid to do so). It won't work with <code>Foo</code> since it's <code>Prop</code>-valued, but if it were <code>Type</code>-valued then given <code>f : Foo</code> you would be able to do <code>f.1</code> and <code>f.2</code>.</p>",
        "id": 480069848,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1730474657
    },
    {
        "content": "<p>Oh!  I didn't realize there was another meaning of \"structure\".  Yes, I meant \"able to be expressed with the <code>structure</code> command\".</p>\n<p>Should this be considered a typo in TPIL?  Should I open an issue?</p>",
        "id": 480069894,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1730474670
    },
    {
        "content": "<p>There's a notion of a \"structure-like\", which is a one-constructor non-recursive inductive type with no indices (even if it was defined using <code>inductive</code>). These have an eta rule in the kernel.</p>\n<p>Then there's the notion of \"<code>structure</code>s\", which may or may not be structure-likes. These will always be one-constructor inductive types with no indices, recursive or non-recursive. Until this week, they were always non-recursive. These have special elaborator support for <code>{ ... }</code> notation and automatically-created named projection functions.</p>\n<p>Lastly, there's there's the unnamed notion of inductive types with one constructor. These allow numeric projection notation. (For the kernel enthusiasts, the kernel allows primitive projections to be used on these.)</p>",
        "id": 480070611,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1730474940
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260507\">Heather Macbeth</span> <a href=\"#narrow/channel/113488-general/topic/Structures.20in.20TPIL/near/480069894\">said</a>:</p>\n<blockquote>\n<p>Should I open an issue?</p>\n</blockquote>\n<p>Yeah, I think that would be good</p>",
        "id": 480071180,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1730475144
    }
]