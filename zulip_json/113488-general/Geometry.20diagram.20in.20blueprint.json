[
    {
        "content": "<p>Is it possible to include diagram for e.g. Euclidean geometry? I tried <code>\\usepackage{tkz-euclide}</code> at the beginning, but it gives the following error</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Error log</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>WARNING: No Python version of tkz-euclide.sty was found<br>\nWARNING: Will now try to load a LaTeX implementation of tkz-euclide.sty<br>\n ( /usr/local/texlive/2021/texmf-dist/tex/latex/tkz-euclide/tkz-euclide.sty<br>\n.<br>\nINFO: 2022/02/25 4.051b tkz-euclide.sty<br>\n.<br>\nWARNING: unrecognized command/environment: @ifpackageloaded<br>\n (loading package /home/wwylele/.local/lib/python3.12/site-<br>\n   packages/plasTeX/Packages/tikz.py<br>\n )<br>\nWARNING: No Python version of xfp.sty was found<br>\nWARNING: Will now try to load a LaTeX implementation of xfp.sty<br>\n ( /usr/local/texlive/2021/texmf-dist/tex/latex/l3packages/xfp/xfp.sty<br>\nWARNING: No Python version of expl3.sty was found<br>\nWARNING: Will now try to load a LaTeX implementation of expl3.sty<br>\n ( /usr/local/texlive/2021/texmf-dist/tex/latex/l3kernel/expl3.sty<br>\nWARNING: unrecognized command/environment: protected<br>\nWARNING: unrecognized command/environment: string<br>\nERROR: Error while expanding \"expandafter\" in<br>\n   /usr/local/texlive/2021/texmf-dist/tex/latex/l3kernel/expl3.sty on line 53<br>\n   (sequence item 3: expected str instance, string found)<br>\nWARNING: Error opening package \"expl3.sty\" ( sequence item 3: expected str<br>\n   instance, string found )<br>\n )<br>\nERROR: Loading package \"xfp\" raised exception ValueError : I/O operation on<br>\n   closed file.<br>\nERROR: Loading package \"tkz-euclide\" raised exception ValueError : I/O<br>\n   operation on closed file.<br>\nERROR: An error occurred while building the document object in<br>\n   /usr/local/texlive/2021/texmf-dist/tex/latex/tkz-euclide/tkz-euclide.sty on<br>\n   line 54 (I/O operation on closed file.)<br>\nTraceback (most recent call last):<br>\n  File \"/home/wwylele/.local/bin/plastex\", line 8, in &lt;module&gt;<br>\n    sys.exit(plastex())<br>\n             ^^^^^^^^^<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/client.py\", line 72, in plastex<br>\n    main(sys.argv[1:])<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/client.py\", line 52, in main<br>\n    run(filename, config)<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/Compile.py\", line 90, in run<br>\n    tex = parse(filename, config)<br>\n          ^^^^^^^^^^^^^^^^^^^^^^^<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/Compile.py\", line 85, in parse<br>\n    tex.parse()<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/TeX.py\", line 416, in parse<br>\n    item.digest(tokens)<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/__init__.py\", line 913, in digest<br>\n    for item in tokens:<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/TeX.py\", line 44, in __next__<br>\n    return self._next()<br>\n           ^^^^^^^^^^^^<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/TeX.py\", line 299, in __iter__<br>\n    token = next()<br>\n            ^^^^^^<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/TeX.py\", line 267, in itertokens<br>\n    t = next(inputs[-1][-1])<br>\n        ^^^^^^^^^^^^^^^^^^^^<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/Tokenizer.py\", line 372, in __iter__<br>\n    (code, char) = next(charIter)<br>\n                   ^^^^^^^^^^^^^^<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/Tokenizer.py\", line 264, in iterchars<br>\n    token = _read1()<br>\n            ^^^^^^^^<br>\n  File \"/home/wwylele/.local/lib/python3.12/site-packages/plasTeX/Tokenizer.py\", line 261, in _read1<br>\n    return read(1)<br>\n           ^^^^^^^<br>\nValueError: I/O operation on closed file.<br>\nCommand 'plastex -c plastex.cfg web.tex' returned non-zero exit status 1.</p>\n</div></div>",
        "id": 565571897,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1766931605
    },
    {
        "content": "<p>Sure, you simply need to tell plasTeX how to deal with this package (plasTeX will try to read TeX sources of packages when desperate but there is no hope of success for complicated ones). As far as Iâ€¯can see from a super quick glance,<code>tkz-euclide</code> seems to mostly add commands to be used in TikZ pictures. TikZ itself is not directly supported by plasTeX which uses your local TeX installation to render the picture. So you can simply tell plasTeX that <code>tkz-euclide</code> depends on TikZ and hope for the best. The documentation explains various ways to do this depending on how global you want this to become. For a simple test you can create a file <code>tkz-euclide.py</code> containing</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">plasTeX</span><span class=\"bp\">.</span><span class=\"n\">Packages</span><span class=\"bp\">.</span><span class=\"n\">tikz</span><span class=\"w\"> </span><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"bp\">*</span>\n</code></pre></div>\n<p>put it next to your source file <code>test.tex</code> and run <code>plastex --packages-dirs=. test.tex</code>.</p>",
        "id": 565645590,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1767003733
    },
    {
        "content": "<p>I just tried this on <code>test.tex</code> containaing</p>\n<div class=\"codehilite\" data-code-language=\"TeX\"><pre><span></span><code><span class=\"k\">\\documentclass</span><span class=\"nb\">{</span>article<span class=\"nb\">}</span>\n<span class=\"k\">\\usepackage</span><span class=\"nb\">{</span>tkz-euclide<span class=\"nb\">}</span>\n<span class=\"k\">\\colorlet</span><span class=\"nb\">{</span>input<span class=\"nb\">}{</span>red!80!black<span class=\"nb\">}</span>\n<span class=\"k\">\\colorlet</span><span class=\"nb\">{</span>output<span class=\"nb\">}{</span>red!70!black<span class=\"nb\">}</span>\n<span class=\"k\">\\colorlet</span><span class=\"nb\">{</span>triangle<span class=\"nb\">}{</span>green!50!black!40<span class=\"nb\">}</span>\n<span class=\"k\">\\begin</span><span class=\"nb\">{</span>document<span class=\"nb\">}</span>\n<span class=\"k\">\\begin</span><span class=\"nb\">{</span>tikzpicture<span class=\"nb\">}</span>[scale=1.25,thick,help lines/.style=<span class=\"nb\">{</span>thin,draw=black!50<span class=\"nb\">}</span>]\n<span class=\"k\">\\tkzDefPoint</span>(0,0)<span class=\"nb\">{</span>A<span class=\"nb\">}</span>\n<span class=\"k\">\\tkzDefPoint</span>(1.25+rand(),0.25+rand())<span class=\"nb\">{</span>B<span class=\"nb\">}</span>\n<span class=\"k\">\\tkzInterCC</span>(A,B)(B,A) <span class=\"k\">\\tkzGetPoints</span><span class=\"nb\">{</span>C<span class=\"nb\">}{</span>X<span class=\"nb\">}</span>\n<span class=\"k\">\\tkzFillPolygon</span><span class=\"na\">[triangle,opacity=.5]</span>(A,B,C)\n<span class=\"k\">\\tkzDrawSegment</span><span class=\"na\">[input]</span>(A,B)\n<span class=\"k\">\\tkzDrawSegments</span><span class=\"na\">[red]</span>(A,C B,C)\n<span class=\"k\">\\tkzDrawCircles</span><span class=\"na\">[help lines]</span>(A,B B,A)\n<span class=\"k\">\\tkzDrawPoints</span><span class=\"na\">[fill=gray,opacity=.5]</span>(A,B,C)\n<span class=\"k\">\\tkzLabelPoints</span>(A,B)\n<span class=\"k\">\\tkzLabelCircle</span><span class=\"na\">[below=12pt]</span>(A,B)(180)<span class=\"nb\">{</span><span class=\"s\">$</span><span class=\"nv\">\\mathcal</span><span class=\"nb\">{D}</span><span class=\"s\">$</span><span class=\"nb\">}</span>\n<span class=\"k\">\\tkzLabelCircle</span><span class=\"na\">[above=12pt]</span>(B,A)(180)<span class=\"nb\">{</span><span class=\"s\">$</span><span class=\"nv\">\\mathcal</span><span class=\"nb\">{E}</span><span class=\"s\">$</span><span class=\"nb\">}</span>\n<span class=\"k\">\\tkzLabelPoint</span><span class=\"na\">[above,red]</span>(C)<span class=\"nb\">{</span><span class=\"s\">$</span><span class=\"nb\">C</span><span class=\"s\">$</span><span class=\"nb\">}</span>\n<span class=\"k\">\\end</span><span class=\"nb\">{</span>tikzpicture<span class=\"nb\">}</span>\n<span class=\"k\">\\end</span><span class=\"nb\">{</span>document<span class=\"nb\">}</span>\n</code></pre></div>\n<p>from the documentation of <code>tkz-euclide</code></p>",
        "id": 565645681,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1767003785
    },
    {
        "content": "<p>In a leanblueprint context, you probably have a config file for plastex, so you can put the <code>packages-dirs</code> option there.</p>",
        "id": 565645751,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1767003822
    },
    {
        "content": "<p>It goes in the <code>general</code> section of the config file, see <a href=\"https://plastex.github.io/plastex/plastex/sec-general-options.html\">https://plastex.github.io/plastex/plastex/sec-general-options.html</a></p>",
        "id": 565645893,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1767003903
    }
]