[
    {
        "content": "<p>I am playing around with implementing different logics, where there are more modifiers of propositions that are themselves propositions (like how Not : Prop -&gt; Prop is a Proposition itself wrapping a Proposition). An example of this is Prior's tense logic where we have Past(prop) and Future(prop) to temporally qualify when a proposition is true. So Future must be considered a Prop.</p>\n<p>Is there a way for me to add these as cases to the original Prop adt?</p>\n<p>I need this to be considered valid</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Future</span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 573683567,
        "sender_full_name": "Marvin",
        "timestamp": 1770969513
    },
    {
        "content": "<p>Are you sure that the <code>Prop</code> type is what you want, and not make your own type <code>Formula</code> for the tense logic formulas?</p>\n<p>For a concrete example, here is the defintiion of the syntax of <a href=\"https://api.cslib.io/docs/Cslib/Logics/LinearLogic/CLL/Basic.html#Cslib.CLL.Proposition\">Classical Linear Logic in Cslib</a>. Note that the type <code>Proposition</code> here is not the same as the Lean <code>Prop</code>.</p>\n<p>In general a related question is whether you want a so-called shallow or deep embedding of tense logic into Lean. It also depends on what you then want to do with the formulas: do you care about the syntax, do you ever want to print them, or do you only want to have the <code>Prop</code> they represent?</p>",
        "id": 573685042,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1770970039
    },
    {
        "content": "<p>No, you cannot add constructors to a pre-existing inductive type. You'll need to create your own</p>",
        "id": 573686528,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1770970631
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422703\">Malvin Gattinger</span> <a href=\"#narrow/channel/113488-general/topic/Adding.20my.20own.20constructors.20to.20pre-existing.20inductive.20types.3F/near/573685042\">said</a>:</p>\n<blockquote>\n<p>Are you sure that the <code>Prop</code> type is what you want, and not make your own type <code>Formula</code> for the tense logic formulas?</p>\n</blockquote>\n<p>I assumed that the builtin Prop is already tightly involved with all the theorem proving capabilities and I didn't think it would be correct to try reimplement that. </p>\n<p>I would like to write proofs in exactly the same way that normal lean already allows, just with a tense wrapped around each proposition.</p>",
        "id": 573688570,
        "sender_full_name": "Marvin",
        "timestamp": 1770971314
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113488-general/topic/Adding.20my.20own.20constructors.20to.20pre-existing.20inductive.20types.3F/near/573686528\">said</a>:</p>\n<blockquote>\n<p>No, you cannot add constructors to a pre-existing inductive type. You'll need to create your own</p>\n</blockquote>\n<p>Another idea I had is to make a second inductive type just for Tense, with constructors Past and Future, and then provide an implicit coercion from Tense -&gt; Prop to make it feel in effect as if they were themselves propositions.</p>\n<p>Would anything like this be a good idea?</p>",
        "id": 573688793,
        "sender_full_name": "Marvin",
        "timestamp": 1770971396
    },
    {
        "content": "<p>Let's step back a bit. What things about <code>Future(p)</code> would you want to prove then? Note that Lean itself has no idea about tense logic, you need to tell it first what \"Future\" should mean. So if you want to make a Lean proof that some statement is a tautology in tense logic  then you first need to define what it means for such a statement to be true, valid or provable.</p>",
        "id": 573689005,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1770971463
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422703\">Malvin Gattinger</span> <a href=\"#narrow/channel/113488-general/topic/Adding.20my.20own.20constructors.20to.20pre-existing.20inductive.20types.3F/near/573689005\">said</a>:</p>\n<blockquote>\n<p>Let's step back a bit. What things about <code>Future(p)</code> would you want to prove then? </p>\n</blockquote>\n<p>I'm encoding some natural language sentences to try to do basic philosophy argumentation. I will write things like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">kill</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"w\"> </span><span class=\"n\">john</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">guilty</span><span class=\"w\"> </span><span class=\"n\">alice</span>\n<span class=\"c1\">-- means \"if alice killed john, then alice is guilty\"</span>\n</code></pre></div>\n<p>where many of these words are just semantic primitives (axioms) and don't need do be defined further. A similar project in Rocq is this <a href=\"https://arno.uvt.nl/show.cgi?fid=133761\">https://arno.uvt.nl/show.cgi?fid=133761</a></p>\n<p>I already have the above working, I just need to add tense modifiers now.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Past</span><span class=\"o\">(</span><span class=\"n\">kill</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"w\"> </span><span class=\"n\">john</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Now</span><span class=\"o\">(</span><span class=\"n\">murderer</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Future</span><span class=\"o\">(</span><span class=\"n\">murderer</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"o\">))</span>\n<span class=\"c1\">-- if alice killed john in the past, she is a murderer now and in the future</span>\n</code></pre></div>",
        "id": 573690549,
        "sender_full_name": "Marvin",
        "timestamp": 1770971995
    },
    {
        "content": "<p>Ah, if you are already working with <code>axiom</code> then maybe you also want to use it for \"Future\" etc. like this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Person</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">john</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">murderer</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Person</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">kill</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Person</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Person</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Past</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Now</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Future</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"sd\">/-- If alice killed john in the past, she is a murderer now and in the future -/</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Past</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">kill</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"w\"> </span><span class=\"n\">john</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Now</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">murderer</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Future</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">murderer</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- You will probably need more assumptions and/or axioms to prove this.</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>(This is an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> - you can click on the top right corner to open it on <a href=\"http://live.lean-lang.org\">live.lean-lang.org</a> )</p>",
        "id": 573691614,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1770972352
    },
    {
        "content": "<p>Just to clarify, the premise of this thread is wrong:</p>\n<blockquote>\n<p>Is there a way for me to add these as cases to the original Prop adt?</p>\n</blockquote>\n<p><code>Prop</code> is not an algebraic datatype. If you want to speak in Haskell terms its more of a kind than a type.</p>",
        "id": 573691654,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1770972365
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422703\">Malvin Gattinger</span> <a href=\"#narrow/channel/113488-general/topic/Adding.20my.20own.20constructors.20to.20pre-existing.20inductive.20types.3F/near/573691614\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Past</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Now</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Future</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>ah this is already what I had gone with, but I assumed it wouldn't be the recommended way. Or I worried that it was going to cause me weird error messages about non-computability. (new to Lean and I keep running into that)</p>",
        "id": 573691776,
        "sender_full_name": "Marvin",
        "timestamp": 1770972417
    },
    {
        "content": "<p>Well, it is something I have never done before and also never seen someone doing, in the sense that using <code>axiom</code> a lot is uncommon in Lean, I think. Because you can easily define axioms that will allow you to prove anything.</p>",
        "id": 573691883,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1770972459
    },
    {
        "content": "<p>If you can think of a better way to encode tense logic, please let me know. I'll keep working and see how this approach goes</p>",
        "id": 573691989,
        "sender_full_name": "Marvin",
        "timestamp": 1770972503
    },
    {
        "content": "<p>Well, you should be able to replace most <code>axiom</code>s with <code>opaque</code> at least</p>",
        "id": 573692003,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1770972507
    },
    {
        "content": "<p>At least the ones that define relations, maybe not those that assert things</p>",
        "id": 573692115,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1770972551
    }
]