[
    {
        "content": "<p>hello, ive written <a href=\"https://live.lean-lang.org/#codez=FAEwpgZgBAklBcBeKBlAjgVwIYGcAWUAQgPbEA2oksAdAJYAMCy62+1AtgNZGlnURYyOMJWgw6ARiapMuPB24ly1AC4AnDCOC0AdjhVYdAYzAJUGAEY5dAczJgVxHbGkWAnsChQ1kXaYDeUIJkAKJo0gD8APpQAL6eUBg6EOQgsAm66sRBUBYJWAAOBWRu5la29o461GBktOw5eaJQAApYKngtUAAUADJmcIBJhKjEaipQUQCUPVhS8FD9dPTT3VgATGaLtBLT8yij4zFICYFk8IAARD20A5MANAtQ1wD0T1BkUEtQyLNQgOREbx9tl8ght4s0uAV2ngCj0ChdHvd+rRJt0jBJ4DDPt8dqi1hjAVJvmtJvM2h0uv0futpAooDDunQdFkoGiWcTgMAAAIAbWs7AKAF1wZxIR0ClFwBAomA0M55hCoTCYayjBtkLT6YzmSridI1BAKM1RXgou0orQAG6CKJW97dOFkzoPLC5FGWwTwGAkh7u95IOnUW2PW0cnTEAwqWhOOkdKAAIignPjwfeiAAfHSoaaVObbTbBDGCJbDTy+YKjVmzb782QJZBpbKzPbE49psgCoGC9d/e5vAaOaX6uXJW9IDmnObGPb4I6KY1vR2g1icj2PF5Kj1aTEGZk1Nl3mpJrt2wkywk1AB3KDcshCrm8odCkdqWg2PDjnTmqTT2fO13zRcC0kYELFcNdR3GBkuAmTdd33bwj2kApTyHc8r25NQ7xHR0egAQXgfYxgmFYqTxXDj1aKEum6CAkhg9MoHIoIpHWDkRz8Gwrk9b04H9Fg5GoOoIHGa4aLo64GNpbolD4MMRKPAcH35J8qB0MAbC/c0cEnMwOIJYFPlXc9+3vMsVOgNSNIYLSv10yzAUYdUgSMrx9RLJThyoDjzUsqIjEMEw/Ueezuj05FgW7ZB3ASJIUjINI4H4/AghEhINx3Jk9ygC0oE4CjaBqAAPWh9G0nxkK8fzhBwbLzzAAowHaKB/ASLxYtSYL1JkVh5CE8YkvkLhWu8dCAB4AFpOCFLxXP7LwwRHY0ohwNx2AaH8qKgABpedSU2sTnAkjMdtC+zkWmUCXRc7xfDUqAFTFKBoiemJogyTLsloBIwEKrAjHGGEk1OrrkQSIw8EMGxTGbJNJDbCYUP5MGIZ0KHYRbJZ4aiRHkOAH6sH5exmodTadtI2IzASHDtyWla1thLM6YaApEPtSZgGurAQHYWgVASDlgCAA\">code</a>, and lean complains about type incompatibility, which wouldve not been the case if typechecker could see a simp lemma Ive defined. is there something that can be done?</p>",
        "id": 528492578,
        "sender_full_name": "deepest recursion",
        "timestamp": 1752366975
    },
    {
        "content": "<p>The type checker uses definitional equality and not propositional equality so in particular no lemmas. Instead, it reduces the expression by unfolding and since they don't come out equal after that, they aren't considered definitionally equivalent and the type-checker complains. You can avoid this by using <code>cast</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PathP</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">a1</span><span class=\"w\"> </span><span class=\"n\">a2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Path</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">path_symm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">path_symm</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">cast</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">congr</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>But that might get you in dependent type theory hell (casts are not very easy to work with).</p>",
        "id": 528510218,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1752390918
    },
    {
        "content": "<p>Also, I'm not entirely sure why you do the whole <code>Squash Bool</code> thing, is this intentional?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PathP</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">a1</span><span class=\"w\"> </span><span class=\"n\">a2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a1</span><span class=\"w\"> </span><span class=\"bp\">≍</span><span class=\"w\"> </span><span class=\"n\">a2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">congr</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Subsingleton</span><span class=\"bp\">.</span><span class=\"n\">allEq</span>\n</code></pre></div>",
        "id": 528510323,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1752391063
    },
    {
        "content": "<p>I thought that <code>I</code> should not interact with data. Not sure if it's relevant tho</p>",
        "id": 528584137,
        "sender_full_name": "deepest recursion",
        "timestamp": 1752468784
    }
]