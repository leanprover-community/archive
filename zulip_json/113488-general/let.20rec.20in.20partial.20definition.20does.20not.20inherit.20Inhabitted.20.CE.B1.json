[
    {
        "content": "<p>When playing around with some definitions, I came accross the following surprising behavior (at least to me).</p>\n<p>Consider <a href=\"https://live.lean-lang.org/#codez=A4QwTgLgliA2BQATApgMwASoPZfQb0EbgAXwG0BJAOwAsQAjKCZRdAgXXQC4BeeddWZBHRhkAY3QBzLBxacukrLwXp48IA\">the following code</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">partial</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}[</span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"n\">go</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">go</span>\n<span class=\"w\">  </span><span class=\"n\">go</span>\n</code></pre></div>\n<p>Lean fails to compile the previous definition with the following error message</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">partial'</span><span class=\"w\"> </span><span class=\"n\">definition</span><span class=\"w\"> </span><span class=\"ss\">`foo.go</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">prove</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">nonempty</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>If I add <code>[Inhabitted α]</code> to the definition of <code>go</code> Lean behaves as I would have first expected.</p>",
        "id": 554524132,
        "sender_full_name": "Ayhon",
        "timestamp": 1762650113
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 554524143,
        "sender_full_name": "Ayhon",
        "timestamp": 1762650127
    }
]