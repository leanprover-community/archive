[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/26626\">#26626</a>, we are having a rather cryptic failure of the build that we cannot solve. This seems unrelated to the content of the PR and <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> said:</p>\n<blockquote>\n<p>This is <em>really</em> weird. If you remove <code>import Mathlib.Order.Category.PartOrd</code> from <code>Mathlib.Order.Category.BddOrd</code>, then the error disappears (but of course you get errors instead telling you that Lean can't find <code>PartOrd</code>). Please raise this on Zulip!</p>\n</blockquote>\n<p>Hence here I am. Any help would be welcome!</p>",
        "id": 527264394,
        "sender_full_name": "Pierre Quinton",
        "timestamp": 1751704240
    },
    {
        "content": "<p>This is a code generator bug, CC <span class=\"user-mention\" data-user-id=\"656225\">@Cameron Zwarich</span></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(lean_panic+0xf5) [0x731f4b60cce5]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(lean_array_get_panic+0x69) [0x731f4b60d599]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Std_Range_forIn_x27_loop___at___Lean_IR_ToIR_lowerLet_spec__2___redArg+0xba) [0x731f479efafa]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_IR_ToIR_lowerLet+0xa029) [0x731f479e6aa9]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_IR_ToIR_lowerLet_lowerNonObjectFields___redArg+0x30) [0x731f479f20a0]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_IR_ToIR_lowerLet+0xaf8b) [0x731f479e7a0b]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_IR_ToIR_lowerLet_lowerNonObjectFields___redArg+0x30) [0x731f479f20a0]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_IR_ToIR_lowerLet+0xaf8b) [0x731f479e7a0b]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_IR_ToIR_lowerDecl+0x64f) [0x731f479f502f]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(lean_apply_4+0xbb7) [0x731f4b61dea7]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_IR_ToIR_M_run___redArg+0x89) [0x731f479d19d9]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Array_forIn_x27Unsafe_loop___at___Lean_IR_toIR_spec__0+0x100) [0x731f479f60d0]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_IR_toIR+0x20) [0x731f479f6420]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_Compiler_LCNF_PassManager_run+0xe72) [0x731f47470972]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_Compiler_LCNF_main___lam__1+0x20) [0x731f47473b30]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_Compiler_LCNF_main___lam__1___boxed+0x16) [0x731f47473fe6]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(lean_apply_5+0x86a) [0x731f4b61f37a]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.22.0-rc2/lib/lean/libleanshared.so(l_Lean_Compiler_LCNF_CompilerM_run___redArg+0x118) [0x731f474e4358]</span>\n</code></pre></div>",
        "id": 527264541,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1751704395
    },
    {
        "content": "<p>Does merging master to get rc3 help?</p>",
        "id": 527270206,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1751711227
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>  Apparently it did not.</p>",
        "id": 527273873,
        "sender_full_name": "Pierre Quinton",
        "timestamp": 1751715704
    },
    {
        "content": "<p>Thankfully, I can reproduce this locally. Thanks for reporting!</p>",
        "id": 527284464,
        "sender_full_name": "Cameron Zwarich",
        "timestamp": 1751725075
    },
    {
        "content": "<p>The (compiler-internal) issue here is that the constructor <code>BoundedOrder.mk</code> got all the way to code generation while being underapplied:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Compiler</span><span class=\"bp\">.</span><span class=\"n\">extractClosed</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"w\">    </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">BddOrd</span><span class=\"bp\">.</span><span class=\"n\">instInhabited</span><span class=\"bp\">._</span><span class=\"n\">closed_0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lcAny</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">lcAny</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">BoundedOrder</span><span class=\"w\"> </span><span class=\"n\">lcAny</span><span class=\"w\"> </span><span class=\"n\">lcAny</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"bp\">.</span><span class=\"n\">unit</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"bp\">.</span><span class=\"n\">unit</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">BoundedOrder</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">3</span>\n<span class=\"o\">[</span><span class=\"n\">Compiler</span><span class=\"bp\">.</span><span class=\"n\">extractClosed</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">9</span>\n<span class=\"w\">    </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">BddOrd</span><span class=\"bp\">.</span><span class=\"n\">instInhabited</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BddOrd</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"bp\">.</span><span class=\"n\">instCompleteAtomicBooleanAlgebra</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BddOrd</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">CompleteBooleanAlgebra</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">toCompleteLattice</span><span class=\"w\"> </span><span class=\"n\">le_sup_inf</span><span class=\"w\"> </span><span class=\"n\">toHasCompl</span><span class=\"w\"> </span><span class=\"n\">toSDiff</span><span class=\"w\"> </span><span class=\"n\">toHImp</span><span class=\"w\"> </span><span class=\"n\">inf_compl_le_bot</span><span class=\"w\"> </span><span class=\"n\">top_le_sup_compl</span><span class=\"w\"> </span><span class=\"n\">sdiff_eq</span><span class=\"w\"> </span><span class=\"n\">himp_eq</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">CompleteLattice</span><span class=\"bp\">.</span><span class=\"n\">toCompleteSemilatticeInf</span><span class=\"bp\">._</span><span class=\"n\">redArg</span><span class=\"w\"> </span><span class=\"n\">toCompleteLattice</span><span class=\"bp\">;</span>\n<span class=\"w\">        </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BddOrd</span>\n<span class=\"w\">        </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">CompleteSemilatticeInf</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">toPartialOrder</span><span class=\"w\"> </span><span class=\"n\">toInfSet</span><span class=\"w\"> </span><span class=\"n\">sInf_le</span><span class=\"w\"> </span><span class=\"n\">le_sInf</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">          </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"bp\">.</span><span class=\"n\">unit</span><span class=\"bp\">;</span>\n<span class=\"w\">          </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">BddOrd</span><span class=\"bp\">.</span><span class=\"n\">instInhabited</span><span class=\"bp\">._</span><span class=\"n\">closed_0</span><span class=\"bp\">;</span>\n<span class=\"w\">          </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">toPartialOrder</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">4</span><span class=\"bp\">;</span>\n<span class=\"w\">          </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"m\">5</span>\n</code></pre></div>\n<p>For whatever reason, this starts appearing after the <code>elimDeadBranches</code> pass. Disabling the pass fixes the problem.</p>",
        "id": 527286435,
        "sender_full_name": "Cameron Zwarich",
        "timestamp": 1751727168
    },
    {
        "content": "<p>if I were to attempt a workaround for this particular issue (although there are other failures downstream, so I don't know if the same thing will happen there), it would be to create a simpler manual <code>Inhabited</code> instance for <code>BddOrd</code>.</p>",
        "id": 527286475,
        "sender_full_name": "Cameron Zwarich",
        "timestamp": 1751727215
    },
    {
        "content": "<p>This is certainly out of my skill set, I don't understand most of these things</p>",
        "id": 527287940,
        "sender_full_name": "Pierre Quinton",
        "timestamp": 1751728876
    },
    {
        "content": "<p>I have a fix. After I make a test case and merge it I’ll try to make a workaround for your PR.</p>",
        "id": 527290162,
        "sender_full_name": "Cameron Zwarich",
        "timestamp": 1751731389
    },
    {
        "content": "<p>The fix was in <a href=\"https://github.com/leanprover/lean4/pull/9209\">lean4#9209</a>. Here's the workaround:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"c1\">--git a/Mathlib/Order/CompleteBooleanAlgebra.lean b/Mathlib/Order/CompleteBooleanAlgebra.lean</span>\n<span class=\"n\">index</span><span class=\"w\"> </span><span class=\"mi\">077496926</span><span class=\"n\">b</span><span class=\"bp\">..</span><span class=\"n\">f7bcecd067</span><span class=\"w\"> </span><span class=\"mi\">100644</span>\n<span class=\"c1\">--- a/Mathlib/Order/CompleteBooleanAlgebra.lean</span>\n<span class=\"bp\">+++</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">CompleteBooleanAlgebra</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"bp\">@@</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">823</span><span class=\"o\">,</span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"mi\">823</span><span class=\"o\">,</span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"bp\">@@</span><span class=\"w\"> </span><span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">PUnit</span>\n\n<span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">})</span>\n\n<span class=\"bp\">+</span><span class=\"kd\">@[</span><span class=\"n\">inline</span><span class=\"kd\">]</span>\n<span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">instCompleteAtomicBooleanAlgebra</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompleteAtomicBooleanAlgebra</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">   </span><span class=\"bp\">__</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"bp\">.</span><span class=\"n\">instBooleanAlgebra</span>\n<span class=\"w\">   </span><span class=\"n\">sSup</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">unit</span>\n<span class=\"bp\">@@</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">833</span><span class=\"o\">,</span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"mi\">834</span><span class=\"o\">,</span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"bp\">@@</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">instCompleteAtomicBooleanAlgebra</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompleteAtomicBooleanAlgebra</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"w\"> </span><span class=\"n\">w</span>\n<span class=\"w\">   </span><span class=\"n\">le_sInf</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">trivial</span>\n<span class=\"w\">   </span><span class=\"n\">iInf_iSup_eq</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"bp\">+</span><span class=\"kd\">@[</span><span class=\"n\">inline</span><span class=\"kd\">]</span>\n<span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">instCompleteBooleanAlgebra</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompleteBooleanAlgebra</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n\n<span class=\"w\"> </span><span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n</code></pre></div>\n<p>I assume that you probably want to add some sort of comment indicating that this should be removed when the fix is integrated, but I don't know the preferred format for such comments.</p>",
        "id": 527307401,
        "sender_full_name": "Cameron Zwarich",
        "timestamp": 1751753484
    },
    {
        "content": "<p>Do we know when the fix will be released? If it is soon, then we can probably wait, this PR is not critical.</p>",
        "id": 527324677,
        "sender_full_name": "Pierre Quinton",
        "timestamp": 1751780020
    },
    {
        "content": "<p>Maybe we should rerun tests on this PR to see if it works?</p>",
        "id": 528614849,
        "sender_full_name": "Pierre Quinton",
        "timestamp": 1752483548
    },
    {
        "content": "<p>You can merge master again to make that happen</p>",
        "id": 528615249,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1752483671
    },
    {
        "content": "<p>Oh right, sorry about that!</p>",
        "id": 528615615,
        "sender_full_name": "Pierre Quinton",
        "timestamp": 1752483788
    },
    {
        "content": "<p>It looks like the toolchain mathlib is on (<code>v4.22.0-rc3</code>) doesn't include the fix in <a href=\"https://github.com/leanprover/lean4/pull/9209\">lean#9209</a> yet. Presumably it will be in the next release, but that might not come for a few weeks, depending on vacation schedules, etc.</p>",
        "id": 528636183,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1752491008
    }
]