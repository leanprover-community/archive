[
    {
        "content": "<p>For years there's been no tactic which solves inequalities (or even equalities) with sets and unions/intersections etc. But maybe Aesop could be that tool? Here's an example shown to me by <span class=\"user-mention\" data-user-id=\"682831\">@Yagub Aliyev</span> :</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">ᶜ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">ᶜ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">em</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- is aesop constructive???</span>\n<span class=\"w\">  </span><span class=\"n\">aesop</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"n\">aesop</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"n\">aesop</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"n\">aesop</span>\n</code></pre></div>\n<p>I look at that code and think \"it's nearly there\"! How does one tweak aesop to get it over the line? The <code>intro</code> issue is going from <code>A ⊆ B</code> to <code>\\forall x, x \\in A -&gt; x \\in B</code>.</p>",
        "id": 473220670,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727474392
    },
    {
        "content": "<p>I thought that <span class=\"user-mention\" data-user-id=\"329425\">@Peter Nelson</span> had written such a tactic in Lean3?</p>",
        "id": 473221072,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1727474542
    },
    {
        "content": "<p>Did it make it into mathlib?</p>",
        "id": 473221785,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727474921
    },
    {
        "content": "<p>An Aesop solution:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"n\">add_aesop_rules</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">subset_def</span>\n<span class=\"n\">add_aesop_rules</span><span class=\"w\"> </span><span class=\"n\">safe</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">em</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">ᶜ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">ᶜ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">aesop</span>\n</code></pre></div>\n<p>The first rule tells Aesop to use <code>Set.subset_def</code> as a <code>simp</code> lemma. The second rule tells Aesop to apply <code>em</code>, which happens to suffice here.</p>\n<p>Re constructivism: Aesop doesn't use classical logic by default (except possibly via core tactics), but classical rules can be added as above.</p>",
        "id": 473223887,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1727475621
    },
    {
        "content": "<p>It's not immediately clear to me what the best strategy to attack set goals would be in general. One possibility would be to just let Aesop unfold all the set definitions (<code>∈</code>, <code> ∩</code>, etc.), reducing the problem to pure logic, which Aesop is usually good at.</p>",
        "id": 473240055,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1727476067
    },
    {
        "content": "<p>It'd be nice to do this for finsets, too, where it's not literal \"unfolding\" but rather some combination of ext-ing and simp-ing.</p>",
        "id": 473246378,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1727476625
    },
    {
        "content": "<p>By coincidence, <span class=\"user-mention\" data-user-id=\"407161\">@Edward Lee</span> was in my office yesterday, talking about the prospect of dusting off that lean3 code. (He was the programmer at the time - I was just a cheerleader)</p>",
        "id": 473247471,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1727477436
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256311\">Jannis Limperg</span> <a href=\"#narrow/stream/113488-general/topic/aesop.20and.20set.20.20inclusions/near/473223887\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">add_aesop_rules</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">subset_def</span>\n<span class=\"n\">add_aesop_rules</span><span class=\"w\"> </span><span class=\"n\">safe</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">em</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Thank you. This seems to solve even harder problems:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n\n<span class=\"n\">add_aesop_rules</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">subset_def</span>\n\n<span class=\"n\">add_aesop_rules</span><span class=\"w\"> </span><span class=\"n\">safe</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">em</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lfelix2'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">ᶜ</span><span class=\"o\">)</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">ᶜ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n\n<span class=\"n\">aesop</span>\n</code></pre></div>\n<p>Earlier I solved this problem like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lfelix2'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">ᶜ</span><span class=\"o\">)</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">ᶜ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"c1\">--first simplify the left side</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">compl_union</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B) ∩ (Aᶜ ∪ C) ∪ Aᶜ ∩ Bᶜᶜ</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_union_distrib_right</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B ∪ Aᶜ ∩ Bᶜᶜ) ∩ (Aᶜ ∪ C ∪ Aᶜ ∩ Bᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_inter_distrib_left</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B ∪ Aᶜ) ∩ (A ∪ B ∪ Bᶜᶜ) ∩ (Aᶜ ∪ C ∪ Aᶜ ∩ Bᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_union_distrib_right</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ Aᶜ ∪ (B ∪ Aᶜ)) ∩ (A ∪ B ∪ Bᶜᶜ) ∩ (Aᶜ ∪ C ∪ Aᶜ ∩ Bᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_compl_self</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (Set.univ ∪ (B ∪ Aᶜ)) ∩ (A ∪ B ∪ Bᶜᶜ) ∩ (Aᶜ ∪ C ∪ Aᶜ ∩ Bᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">univ_union</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- Set.univ ∩ (A ∪ B ∪ Bᶜᶜ) ∩ (Aᶜ ∪ C ∪ Aᶜ ∩ Bᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">univ_inter</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B ∪ Bᶜᶜ) ∩ (Aᶜ ∪ C ∪ Aᶜ ∩ Bᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ (B ∪ Bᶜᶜ)) ∩ (Aᶜ ∪ C ∪ Aᶜ ∩ Bᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">compl_compl</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ (B ∪ B)) ∩ (Aᶜ ∪ C ∪ Aᶜ ∩ B)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_self</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B) ∩ (Aᶜ ∪ C ∪ Aᶜ ∩ B)</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B) ∩ (C ∪ Aᶜ ∪ Aᶜ ∩ B)</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B) ∩ (C ∪ (Aᶜ ∪ Aᶜ ∩ B))</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_eq_compl_compl_inter_compl</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B) ∩ (C ∪ (Aᶜᶜ ∩ (Aᶜ ∩ B)ᶜ)ᶜ)</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B) ∩ (C ∪ ((Aᶜ ∩ B)ᶜ ∩ Aᶜᶜ)ᶜ)</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">compl_inter</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B) ∩ (C ∪ ((Aᶜᶜ ∪ Bᶜ) ∩ Aᶜᶜ)ᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_inter_cancel_left</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B) ∩ (C ∪ Aᶜᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">compl_compl</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B) ∩ (C ∪ Aᶜ)</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (A ∪ B) ∩ (Aᶜ ∪ C)</span>\n<span class=\"c1\">-- For now we are done with the left hand side. now simplify the right hand side</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ (B ∩ C) ∪ A ∩ Bᶜ ∩ C ∪ (Aᶜ ∩ B ∩ C ∪ Aᶜ ∩ B ∩ Cᶜ)</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ (B ∩ C) ∪ A ∩ (Bᶜ ∩ C) ∪ (Aᶜ ∩ B ∩ C ∪ Aᶜ ∩ B ∩ Cᶜ)</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ (B ∩ C) ∪ A ∩ (Bᶜ ∩ C) ∪ (Aᶜ ∩ (B ∩ C) ∪ Aᶜ ∩ B ∩ Cᶜ)</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ (B ∩ C) ∪ A ∩ (Bᶜ ∩ C) ∪ (Aᶜ ∩ (B ∩ C) ∪ Aᶜ ∩ (B ∩ Cᶜ))</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_union_distrib_left</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ (B ∩ C ∪ Bᶜ ∩ C) ∪ (Aᶜ ∩ (B ∩ C) ∪ Aᶜ ∩ (B ∩ Cᶜ))</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_union_distrib_left</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ (B ∩ C ∪ Bᶜ ∩ C) ∪ Aᶜ ∩ (B ∩ C ∪ B ∩ Cᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_inter_distrib_right</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ ((B ∪ Bᶜ) ∩ C) ∪ Aᶜ ∩ (B ∩ C ∪ B ∩ Cᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_union_distrib_left</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ ((B ∪ Bᶜ) ∩ C) ∪ Aᶜ ∩ (B ∩ (C ∪ Cᶜ))</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_compl_self</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ (Set.univ ∩ C) ∪ Aᶜ ∩ (B ∩ (C ∪ Cᶜ))</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_compl_self</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ (Set.univ ∩ C) ∪ Aᶜ ∩ (B ∩ Set.univ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">univ_inter</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ C ∪ Aᶜ ∩ (B ∩ Set.univ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_univ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- A ∩ C ∪ Aᶜ ∩ B</span>\n<span class=\"c1\">-- now we arrived at a simpler equality (A ∪ B) ∩ (Aᶜ ∪ C) = (A ∩ C) ∪ (Aᶜ ∩ B)</span>\n<span class=\"c1\">-- more work is needed on the left side</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_eq_compl_compl_union_compl</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- ((A ∪ B)ᶜ ∪ (Aᶜ ∪ C)ᶜ)ᶜ</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">compl_union</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (Aᶜ ∩ Bᶜ ∪ (Aᶜ ∪ C)ᶜ)ᶜ</span>\n\n<span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">compl_union</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (Aᶜ ∩ Bᶜ ∪ Aᶜᶜ ∩ Cᶜ)ᶜ</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">compl_compl</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (Aᶜ ∩ Bᶜ ∪ A ∩ Cᶜ)ᶜ</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_inter_distrib_left</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- ((Aᶜ ∩ Bᶜ ∪ A) ∩ (Aᶜ ∩ Bᶜ ∪ Cᶜ))ᶜ</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_union_distrib_right</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- ((Aᶜ ∪ A) ∩ (Bᶜ ∪ A) ∩ (Aᶜ ∩ Bᶜ ∪ Cᶜ))ᶜ</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">inter_union_distrib_right</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- ((Aᶜ ∪ A) ∩ (Bᶜ ∪ A) ∩ ((Aᶜ ∪ Cᶜ) ∩ (Bᶜ ∪ Cᶜ)))ᶜ</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- ((A ∪ Aᶜ) ∩ (Bᶜ ∪ A) ∩ ((Aᶜ ∪ Cᶜ) ∩ (Bᶜ ∪ Cᶜ)))ᶜ</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_compl_self</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (Set.univ ∩ (Bᶜ ∪ A) ∩ ((Aᶜ ∪ Cᶜ) ∩ (Bᶜ ∪ Cᶜ)))ᶜ</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">univ_inter</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- ((Bᶜ ∪ A) ∩ ((Aᶜ ∪ Cᶜ) ∩ (Bᶜ ∪ Cᶜ)))ᶜ</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">compl_inter</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (Bᶜ ∪ A)ᶜ ∪ ((Aᶜ ∪ Cᶜ) ∩ (Bᶜ ∪ Cᶜ))ᶜ</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">compl_inter</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (Bᶜ ∪ A)ᶜ ∪ ((Aᶜ ∪ Cᶜ)ᶜ ∪ (Bᶜ ∪ Cᶜ)ᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">compl_union</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- Bᶜᶜ ∩ Aᶜ ∪ ((Aᶜ ∪ Cᶜ)ᶜ ∪ (Bᶜ ∪ Cᶜ)ᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">compl_union</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- Bᶜᶜ ∩ Aᶜ ∪ (Aᶜᶜ ∩ Cᶜᶜ ∪ (Bᶜ ∪ Cᶜ)ᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">compl_union</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- Bᶜᶜ ∩ Aᶜ ∪ (Aᶜᶜ ∩ Cᶜᶜ ∪ Bᶜᶜ ∩ Cᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">compl_compl</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- B ∩ Aᶜ ∪ (Aᶜᶜ ∩ Cᶜᶜ ∪ B ∩ Cᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">compl_compl</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- B ∩ Aᶜ ∪ (A ∩ Cᶜᶜ ∪ B ∩ Cᶜᶜ)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">compl_compl</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- B ∩ Aᶜ ∪ (A ∩ C ∪ B ∩ C)</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">union_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- (B ∩ Aᶜ ∪ A ∩ C) ∪ B ∩ C</span>\n<span class=\"c1\">-- we are done again with the left side. We need a small lemma to continue</span>\n\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span>\n\n<span class=\"n\">rintro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">em</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span>\n\n<span class=\"n\">aesop</span>\n<span class=\"c1\">-- lemma proved.</span>\n\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"c1\">-- more specialized 2nd lemma</span>\n\n<span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"c1\">-- split the task into 2 parts</span>\n\n<span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h0</span><span class=\"w\"> </span><span class=\"c1\">-- first part</span>\n\n<span class=\"n\">cases'</span><span class=\"w\"> </span><span class=\"n\">h0</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n\n<span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n\n<span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n\n<span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n\n<span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h3</span><span class=\"w\"> </span><span class=\"c1\">-- second part</span>\n\n<span class=\"n\">left</span>\n\n<span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h3</span><span class=\"w\"> </span><span class=\"c1\">-- second lemma is also proved.</span>\n\n<span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">--  let us use it on the left side</span>\n\n<span class=\"n\">aesop</span>\n</code></pre></div>",
        "id": 473574814,
        "sender_full_name": "Yagub Aliyev",
        "timestamp": 1727670795
    },
    {
        "content": "<p>There is a <code>mfld_set_tac</code> (AFAIR, written by <span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span>) that solves this type of questions (possibly, not in the most efficient way).</p>",
        "id": 473585035,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727673327
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/113488-general/topic/aesop.20and.20set.20.20inclusions/near/473585035\">said</a>:</p>\n<blockquote>\n<p>There is a <code>mfld_set_tac</code> (AFAIR, written by <span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span>) that solves this type of questions (possibly, not in the most efficient way).</p>\n</blockquote>\n<p>How do you use it? I couldn't.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lfelix2'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">ᶜ</span><span class=\"o\">)</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∪</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">ᶜ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n\n<span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">mfld_set_tac</span><span class=\"w\"> </span><span class=\"bp\">?</span>\n</code></pre></div>",
        "id": 473586749,
        "sender_full_name": "Yagub Aliyev",
        "timestamp": 1727674197
    },
    {
        "content": "<p>It's a tactic, not a theorem.</p>",
        "id": 473593242,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727675865
    },
    {
        "content": "<p>I guess, you'll need more imports.</p>",
        "id": 473593306,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727675881
    },
    {
        "content": "<p>I've wanted to learn writing tactics at some point this year (closer to the end of the year though). If there was a 6-8 week project I could help with I'd be interested, especially if it helps <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>/ wider community.</p>\n<p>I've been using <code>omega</code> tactic in IMO number theory problems, and it's incredible. It's sometimes surprising what it can solve!</p>",
        "id": 475309604,
        "sender_full_name": "Adam Kurkiewicz",
        "timestamp": 1728310977
    }
]