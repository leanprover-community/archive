[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"320522\">@Andrew Sutherland</span> and I are starting to plan for a project building connections between Lean and the <a href=\"https://www.lmfdb.org\">L-functions and modular forms database</a>.  More specifically, we're currently thinking about aiming for the following:</p>\n<ol>\n<li>Have a valid Lean/Mathlib definition for as many objects in the database, and their attributes, as possible.  The goal is to be able to translate claims made in the LMFDB into propositions in Lean (without proof), and the corresponding Lean code would be available as a download on LMFDB pages.</li>\n<li>Create Lean tactics that query the LMFDB to find counterexamples or find examples for existence statements.  For example, \"there exists a modular form of level <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"normal\">Γ</mi><mn>0</mn></msub><mo stretchy=\"false\">(</mo><mn>11</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\Gamma_0(11)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\">Γ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">11</span><span class=\"mclose\">)</span></span></span></span> and weight <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span>\", or \"there exists a finite group with nonabelian automorphism group where every automorphism is central.\"</li>\n</ol>\n<p>There are plenty of possible directions that we think are either too hard or not ideas we currently want to pursue:</p>\n<ol start=\"3\">\n<li>We don't plan to work on formal proofs for algorithms used to compute data in the LMFDB.</li>\n<li>We don't plan to work on generating proof certificates for LMFDB data (though we are happy to chat with others interested in this).</li>\n<li>We don't currently plan to connect with AI or LLM tools.</li>\n</ol>\n<p>Thanks to <span class=\"user-mention\" data-user-id=\"115715\">@Jason Rute</span> for recent discussions helping us steer toward concrete plans, and for pointing out the following prior work:</p>\n<ul>\n<li><a href=\"https://link.springer.com/chapter/10.1007/978-3-031-66997-2_9\">Incorporating a Database of Graphis into a Proof Assistant</a> describes the <a href=\"https://github.com/katjabercic/Lean-HoG/\">Lean-HoG</a> library for interfacing with the <a href=\"https://houseofgraphs.org/\">House of Graphs</a>.  There's a lot of overlap with what we're aiming to do, though they have a bit more focus on formally verifying results in the database. <span class=\"user-mention\" data-user-id=\"427067\">@Katja Berčič</span> <span class=\"user-mention\" data-user-id=\"345260\">@Andrej Bauer</span> <span class=\"user-mention\" data-user-id=\"439334\">@Jure Taslak</span></li>\n<li><a href=\"https://lean-forward.github.io/\">Lean Forward</a> was a Dutch grant from 2019-2023 on \"Usable Computer-Checked Proofs and Computations for Number Theorists\"; Objective 2 included \"use verified algorithms to check entries in online databases (e.g. LMFDB).\"  While this specific goal is beyond our proposed scope, hopefully there is a commonality of interest.  <span class=\"user-mention\" data-user-id=\"121058\">@Jasmin Blanchette</span> <span class=\"user-mention\" data-user-id=\"110596\">@Rob Lewis</span> <span class=\"user-mention\" data-user-id=\"110043\">@Gabriel Ebner</span> <span class=\"user-mention\" data-user-id=\"238446\">@Anne Baanen</span> <span class=\"user-mention\" data-user-id=\"256311\">@Jannis Limperg</span> <span class=\"user-mention\" data-user-id=\"198376\">@Kevin Kappelmann</span> <span class=\"user-mention\" data-user-id=\"133635\">@Sander Dahmen</span> <span class=\"user-mention\" data-user-id=\"110172\">@Assia Mahboubi</span> <span class=\"user-mention\" data-user-id=\"399706\">@Aurélien Saue</span> <span class=\"user-mention\" data-user-id=\"217807\">@Freek Wiedijk</span></li>\n</ul>\n<p>We're happy to get suggestions on how to proceed or expressions of interest in collaborating on building connections between Lean and the LMFDB!</p>",
        "id": 491340050,
        "sender_full_name": "David Roe",
        "timestamp": 1735599998
    },
    {
        "content": "<p>Sounds cool! One thing you should probably think about is ongoing maintenance, particularly keeping up to date with mathlib and lean changes. Do you expect any of this work to lead to changes in mathlib?</p>",
        "id": 491340852,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1735600599
    },
    {
        "content": "<p>There are two kinds of changes I could imagine to mathlib:</p>\n<ol>\n<li>If there are missing definitions needed to connect to properties stored on the LMFDB, that could be something that we would contribute to mathlib rather than leaving as separate Lean code to be downloaded from the LMFDB.</li>\n<li>I don't know where tactics are maintained within the Lean ecosystem, but that's another possible contribution.</li>\n</ol>",
        "id": 491341223,
        "sender_full_name": "David Roe",
        "timestamp": 1735600868
    },
    {
        "content": "<p>One thing I had trouble helping <span class=\"user-mention\" data-user-id=\"814085\">@David Roe</span> (who is an IRL friend) with is who the right Lean people are to talk to about this project.  So if there is someone he should reach out to, it would be good to let David and/or that person know.</p>",
        "id": 491341392,
        "sender_full_name": "Jason Rute",
        "timestamp": 1735601005
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"464700\">@David Ang</span> has been working on defining invariants of elliptic curves over the rationals, with an eye on stating BSD in Lean, so perhaps elliptic curves are one place where we could start. Here it would be very easy to add valid Lean code to LMFDB corresponding to each elliptic curve over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> in the database, for example (our definition of an elliptic curve over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> is a 5-tuple of rationals plus <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">Δ</mi><mo mathvariant=\"normal\">≠</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\Delta\\ne0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">Δ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\"><span class=\"mord vbox\"><span class=\"thinbox\"><span class=\"rlap\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"inner\"><span class=\"mord\"><span class=\"mrel\"></span></span></span><span class=\"fix\"></span></span></span></span></span><span class=\"mrel\">=</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>). Mathlib also has modular forms although I don't think we have any good constructors for them right now, just the definition, so for example I am right now not at all clear how we could define the two level 37 eigenforms in Lean (I choose 37 because for things like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mn>0</mn></msub><mo stretchy=\"false\">(</mo><mn>11</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">X_0(11)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">11</span><span class=\"mclose\">)</span></span></span></span> there are tricks involving <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>η</mi></mrow><annotation encoding=\"application/x-tex\">\\eta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">η</span></span></span></span>-products). I guess one way to proceed here would be to prove the Eichler-Shimura isomorphism in Lean and then write down explicit 1-cocycles or use modular symbols or however you want to think about them (we can't just write down the q-expansion using the elliptic curves because we'd then have to prove it was a modular form, which is out of scope right now as far as I can see, there are no converse theorems yet for example, although I'll need them for FLT so they'll be there one day; this wouldn't work for more general eigenforms anyway). We have some Eisenstein series so for some low levels there will be other dirty hacks involving linear combinations of products but I don't really think it would be a productive long-term strategy. Does LMFDB store modular forms internally using modular symbols somehow? Perhaps it would be worth discussing exactly what's going on there, as this might be the best way to link modular forms between the two systems.</p>",
        "id": 491344561,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735603311
    },
    {
        "content": "<p>All the BSD invariants I intend to formalise should work over number fields as well (for the tab \"elliptic curves over Q(\\alpha)\"), and I intend to look into defining the Sato-Tate group (which I think is a new thing in LMFDB?)</p>",
        "id": 491350890,
        "sender_full_name": "David Ang",
        "timestamp": 1735608396
    },
    {
        "content": "<p>We store modular forms internally basically by storing their q-expansions up to the Sturm bound (usually further, actually).  For newforms <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span> where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">(</mo><mi>f</mi><mo stretchy=\"false\">)</mo><mo>:</mo><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">]</mo><mo>≤</mo><mn>20</mn></mrow><annotation encoding=\"application/x-tex\">[\\mathbb{Q}(f):\\mathbb{Q}] \\le 20</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathbb\">Q</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Q</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">20</span></span></span></span> we store the coefficients as algebraic integers, while for larger coefficient fields we only store complex approximations for various embeddings.</p>\n<p>We do store polynomials so that the modular form can be reconstructed as the kernel of certain linear operators on a space of modular forms (see <a href=\"https://beta.lmfdb.org/knowledge/show/cmf.hecke_kernels\">cmf.hecke_kernels</a>), so that might be a way to proceed.</p>",
        "id": 491352071,
        "sender_full_name": "David Roe",
        "timestamp": 1735609256
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"464700\">@David Ang</span>, Sato-Tate groups have been around in the LMFDB for a while (8 years or so), though they have been expanded since then.  I'm glad that you're working on formalizing BSD invariants!  There are some subtleties over number fields; see the knowl on <a href=\"https://beta.lmfdb.org/knowledge/show/ec.period\">global period</a> for example.</p>",
        "id": 491352400,
        "sender_full_name": "David Roe",
        "timestamp": 1735609560
    },
    {
        "content": "<p>I think this is a great idea and I'd be happy to contribute any way I can. I expect the number field bits of the lmfdb is probably the easiest thing to do. As for modular forms, Kevin is right we don't currently have good constructors for general levels, but I am currently working on finite dimensionality and Hecke operators which would help towards the Hecke kernels approach.</p>",
        "id": 491389344,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1735640558
    },
    {
        "content": "<p>Further down the line when Kevin proves Jacquet--Langlands we'll have some great constructors for modular forms as well</p>",
        "id": 491389432,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1735640639
    },
    {
        "content": "<p>Jacquet-Langlands is many years away!</p>",
        "id": 491393643,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735643576
    },
    {
        "content": "<p>This is a very exciting project and I expect that such a bridge will be very useful!</p>\n<p>The Lean Forward project has sadly run its course but now the VU Amsterdam has <a href=\"https://www.nwo.nl/projecten/613009143\">Formalizing Diophantine Algorithms</a> run by Sander Dahmen with <span class=\"user-mention\" data-user-id=\"534091\">@Alain Chavarri Villarello</span>. The paper on <a href=\"https://arxiv.org/abs/2409.18030\">certifying rings of integers in number fields</a> that Alain, Sander and I wrote recently also concerns connecting LMFDB entries with Mathlib results.</p>\n<p>I'll also tag <span class=\"user-mention\" data-user-id=\"127136\">@Alex J. Best</span> and <span class=\"user-mention\" data-user-id=\"390622\">@Nirvana Coppola</span>.</p>",
        "id": 491402892,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1735650767
    },
    {
        "content": "<p>Hello. Our experience was that JSON is a good way to interface with external databases. This works quite well with the <code>FromJson</code> type class. Since you're not aiming to generate verified certificates, this shouldn't be too complicated. Let me know if you'd like to pick my brain (and that of <span class=\"user-mention\" data-user-id=\"427067\">@Katja Berčič</span>, <span class=\"user-mention\" data-user-id=\"439334\">@Jure Taslak</span>  and <span class=\"user-mention\" data-user-id=\"712923\">@Gauvain Devillez</span>), we can show you which parts of our code you could scavenge.</p>",
        "id": 491518123,
        "sender_full_name": "Andrej Bauer",
        "timestamp": 1735754822
    },
    {
        "content": "<p>Thanks!  We're aiming to actively start working in late spring or summer, so will reach out at that point.</p>",
        "id": 491518205,
        "sender_full_name": "David Roe",
        "timestamp": 1735754908
    },
    {
        "content": "<p>Ok, if I am not here, find us by email.</p>",
        "id": 491518249,
        "sender_full_name": "Andrej Bauer",
        "timestamp": 1735754987
    }
]