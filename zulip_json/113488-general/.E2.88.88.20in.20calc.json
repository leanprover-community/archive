[
    {
        "content": "<p>It seems that the arguments of <code>Membership.mem</code> were swapped at some point, and as a result the following calc no longer works. How can I fix this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"c\">/-</span>\n<span class=\"cm\">    invalid 'calc' step, left-hand-side is</span>\n<span class=\"cm\">      H : Subgroup G</span>\n<span class=\"cm\">    previous right-hand-side is</span>\n<span class=\"cm\">      a⁻¹ * b * (b⁻¹ * c) : G</span>\n<span class=\"cm\">    -/</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">mul_mem</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"n\">h₂</span>\n</code></pre></div>",
        "id": 476357517,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1728642303
    },
    {
        "content": "<p>This works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">mul_mem</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"n\">h₂</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 476362218,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728644214
    },
    {
        "content": "<p>Ah, thanks!</p>",
        "id": 476362302,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1728644262
    },
    {
        "content": "<p>But I'm writing this code for lean beginners, and I think the working proof might be confusing for them. I also want to advertise that calc works just like blackboard calculations, so I would be happy if the original proof works.</p>",
        "id": 476363031,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1728644562
    },
    {
        "content": "<p>That's awful even for experienced lean users</p>",
        "id": 476363145,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728644610
    },
    {
        "content": "<p>Yes, I recently wrote a proof where I would really have liked to <code>calc</code> on <code>⊆</code> and <code>∈</code></p>",
        "id": 476363686,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1728644792
    },
    {
        "content": "<p>Well I recently wrote a proof where I would have really liked to have <code>calc</code> on <code>≃ₗ[R]</code> (or perhaps it was <code>→ₗ[R]</code>). Maybe we should make an RFC? But back to the point, Eric's proof is indeed truly terrifying :-)</p>",
        "id": 476373305,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1728648458
    },
    {
        "content": "<p>I think <code>≃ₗ[R]</code> is another issue</p>",
        "id": 476374524,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728648711
    },
    {
        "content": "<p>I think there already is an RFC for <code>≃ₗ[R]</code>: <a href=\"https://github.com/leanprover/lean4/pull/2217\">lean4#2217</a>.</p>",
        "id": 476374753,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1728648750
    },
    {
        "content": "<p>Aah, I looked for it in mathlib :-) I forgot that calc was in core.</p>",
        "id": 476374876,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1728648774
    },
    {
        "content": "<p>The problem with <code>∈</code> in <code>calc</code> described above is unintended fallout from <a href=\"https://github.com/leanprover/lean4/pull/5020\">lean4#5020</a>. Could someone open a bug on the Lean 4 repo for this?</p>",
        "id": 476375521,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1728648889
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/113488-general/topic/.E2.88.88.20in.20calc/near/476374524\">said</a>:</p>\n<blockquote>\n<p>I think <code>≃ₗ[R]</code> is another issue</p>\n</blockquote>\n<p>There is a mathlib PR that makes this mostly work</p>",
        "id": 476378678,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728649957
    },
    {
        "content": "<p>I have opened the issue <a href=\"https://github.com/leanprover/lean4/pull/6042\">lean4#6042</a>.</p>",
        "id": 481864929,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1731387492
    },
    {
        "content": "<p>I'm reposting a <a href=\"https://github.com/leanprover/lean4/issues/6042#issuecomment-2748969681\">comment from GitHub</a> regarding this issue. </p>\n<blockquote>\n<p>This is also problematic when traversing <code>∈</code> in <code>conv</code> mode.</p>\n</blockquote>",
        "id": 508133490,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1742939086
    },
    {
        "content": "<p>Can you expand on what you mean by this <span class=\"user-mention\" data-user-id=\"438192\">@Yuma Mizuno</span> ?</p>",
        "id": 508140951,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742942533
    },
    {
        "content": "<p>This was my comment</p>",
        "id": 508141179,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742942645
    },
    {
        "content": "<p>I mean that when I hit a <code>x ∈ s</code> goal in <code>conv</code> mode, <code>lhs</code> takes me to the rhs and <code>rhs</code> takes me to the lhs.</p>",
        "id": 508141243,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742942689
    },
    {
        "content": "<p>Hmm, I'm not sure what we can do about that...</p>\n<p>With <code>calc</code>, I have some ideas for resolving the problem though.</p>",
        "id": 508142128,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742943208
    },
    {
        "content": "<p>If you use <code>pp.notation false</code> then \"left\" and \"right\" are put back in the places you'd expect by <code>conv</code> at least...</p>",
        "id": 508143535,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742943889
    },
    {
        "content": "<p>But then I lose the beautiful <code>∈</code></p>",
        "id": 508143582,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742943913
    },
    {
        "content": "<p>For now I'm doing <code>apply congrArg (· ∈ _)</code> and <code>apply congrArg (_ ∈ ·)</code> for the lhs and rhs</p>",
        "id": 508143981,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742944150
    },
    {
        "content": "<p>As a temporary solution, I think the following notation is needed for calc:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"w\"> </span><span class=\"s2\">\" ∋ \"</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Membership</span><span class=\"bp\">.</span><span class=\"n\">mem</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n</code></pre></div>",
        "id": 508144422,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1742944428
    },
    {
        "content": "<p>yielding mathematically correct expression</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"w\"> </span><span class=\"s2\">\" ∋ \"</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Membership</span><span class=\"bp\">.</span><span class=\"n\">mem</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">∋</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"bp\">.</span><span class=\"n\">mul_mem</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"n\">h₂</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 508144624,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1742944556
    },
    {
        "content": "<p>It would be neat if calc could support arguing that <code>x ≠ y</code> via <code>x ∈ S ∌ y</code>, which this unfortunately doesn't help with</p>",
        "id": 508144894,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742944706
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113488-general/topic/.E2.88.88.20in.20calc/near/508142128\">said</a>:</p>\n<blockquote>\n<p>Hmm, I'm not sure what we can do about that...</p>\n</blockquote>\n<p>We could switch mathlib convention to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mo>∋</mo><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">s \\ni x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∋</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> -- edit: oops I was too late!</p>",
        "id": 508148835,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742946930
    },
    {
        "content": "<p>I think this is a joke, but in case not: please no!</p>",
        "id": 508156674,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742951411
    },
    {
        "content": "<p>My intention is not change the convention at all places, just a workaround for calc (and not a joke).</p>\n<p>A random example from mathlib is the proof in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=QuotientGroup.con#doc\">docs#QuotientGroup.con</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">    </span><span class=\"k\">calc</span>\n<span class=\"w\">      </span><span class=\"n\">c</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"bp\">⁻¹⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">.</span><span class=\"n\">mul_mem</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">nN</span><span class=\"bp\">.</span><span class=\"n\">conj_mem</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">hab</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hcd</span>\n<span class=\"w\">      </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inv_mul_cancel_left</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>which is a proof of <code>(a * c)⁻¹ * (b * d) ∈ N</code>. The calc lines are weird calculation from a mathematical point of view. The first line only makes sense when we use <code>∋</code>.</p>",
        "id": 508159416,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1742952822
    },
    {
        "content": "<p>Then it doesn't trans with subset...</p>",
        "id": 508209794,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742978282
    },
    {
        "content": "<p>Regarding subset, I guess currently we need to write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">calc</span>\n<span class=\"w\">  </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">⊇</span><span class=\"w\"> </span><span class=\"n\">A</span>\n<span class=\"w\">  </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n</code></pre></div>\n<p>for proving <code>a ∈ B</code> from <code>a ∈ A</code> and <code>A ⊆ B</code>. I think</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">calc</span>\n<span class=\"w\">  </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">⊇</span><span class=\"w\"> </span><span class=\"n\">A</span>\n<span class=\"w\">  </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">∋</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>\n<p>looks better.</p>",
        "id": 508223962,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1742982181
    },
    {
        "content": "<p>Superset is weird</p>",
        "id": 508246278,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742987997
    },
    {
        "content": "<p>Yes, we really want <code>∈</code> just works (but can't currently).</p>",
        "id": 508247362,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1742988344
    }
]