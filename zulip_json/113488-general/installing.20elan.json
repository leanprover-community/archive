[
    {
        "content": "<p>When I give the approved installation command (on a Mac)<br>\n curl <a href=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\" title=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\">https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh</a> -sSf | sh<br>\nI get an error about an expired SSL certificate.  Hence I cannot install the Lean prover.<br>\nHelp!</p>",
        "id": 193630361,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1586562061
    },
    {
        "content": "<p>The approved installation instructions on a Mac are <a href=\"https://github.com/leanprover-community/mathlib/blob/master/docs/install/macos.md\" title=\"https://github.com/leanprover-community/mathlib/blob/master/docs/install/macos.md\">here</a> (perhaps you're already following them). The expired SSL certificate error is very strange though; I can't reproduce it.</p>",
        "id": 193631882,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1586563495
    },
    {
        "content": "<p>I can't reproduce this either, but according to <a href=\"https://stackoverflow.com/questions/18964175/how-to-fix-curl-60-ssl-certificate-invalid-certificate-chain\" title=\"https://stackoverflow.com/questions/18964175/how-to-fix-curl-60-ssl-certificate-invalid-certificate-chain\">https://stackoverflow.com/questions/18964175/how-to-fix-curl-60-ssl-certificate-invalid-certificate-chain</a> it seems if you download <a href=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\" title=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\">https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh</a> by hand  and edit all calls to <code>curl</code> in that script to add <code>-k</code>. and then run it with <code>cat elan-init.sh | sh</code> it might work. (when I say edit calls to curl I mean the lines like <code>ensure curl -sSf</code> should be changed to <code>ensure curl -sSfk</code>.)</p>",
        "id": 193631887,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1586563503
    },
    {
        "content": "<p>I found that some people had a similar problem on Linux and fixed it using something like<br>\nsudo apt-get ca-certificates.     But I don't know the Mac OS  analogue.  (brew ca-certificates didn't work.)</p>",
        "id": 193632523,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1586564220
    },
    {
        "content": "<p>Are you able to open <a href=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\" title=\"https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh\">https://raw.githubusercontent.com/Kha/elan/master/elan-init.sh</a> in your browser?</p>",
        "id": 193632692,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1586564421
    },
    {
        "content": "<p>Yes,  I can open that script,  and I tried editing it as someone suggested above to add the -k option, but that produced a different error, namely,<br>\ncurl: (35) error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert protocol version<br>\nelan: command failed: curl -sSfk <a href=\"https://github.com/Kha/elan/releases/latest\" title=\"https://github.com/Kha/elan/releases/latest\">https://github.com/Kha/elan/releases/latest</a><br>\ncurl: (35) error:1407742E:SSL routines:SSL23_GET_SERVER_HELLO:tlsv1 alert protocol version<br>\nelan: command failed: curl -sSfLk <a href=\"https://github.com/Kha/elan/releases/download//elan-x86_64-apple-darwin.tar.gz\" title=\"https://github.com/Kha/elan/releases/download//elan-x86_64-apple-darwin.tar.gz\">https://github.com/Kha/elan/releases/download//elan-x86_64-apple-darwin.tar.gz</a> -o /var/folders/_b/h558g4210fx_2cchc9p4d6c00000gn/T/tmp.0tDPbhOl/elan-init.tar.gz</p>",
        "id": 193632884,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1586564695
    },
    {
        "content": "<p>Maybe updating curl  by reinstalling it using homebrew (<a href=\"https://brew.sh/\" title=\"https://brew.sh/\">https://brew.sh/</a>) would help, if it isn't already up to date. What does <code>curl -v</code> output?</p>",
        "id": 193633113,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1586565092
    },
    {
        "content": "<p>reinstalled curl using brew,  no change in the error messages, <br>\n<span aria-label=\"beer\" class=\"emoji emoji-1f37a\" role=\"img\" title=\"beer\">:beer:</span>  /usr/local/Cellar/curl/7.69.1: 459 files, 3.2MB<br>\niMac:Documents beeson$ curl -v<br>\ncurl: no URL specified!<br>\ncurl: try 'curl --help' or 'curl --manual' for more information</p>",
        "id": 193633459,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1586565571
    },
    {
        "content": "<p>Also tried exporting a certificate file from Keychain  and passing it to curl with the -file  option, which however<br>\nwas not recognized.   Mac usually uses keychain rather than certificate files but can export them.</p>",
        "id": 193633519,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1586565661
    },
    {
        "content": "<p>I think it might be that you're using a deprecated OpenSSL version. Or perhaps you need to update your root CAs <a href=\"https://curl.haxx.se/docs/caextract.html\" title=\"https://curl.haxx.se/docs/caextract.html\">https://curl.haxx.se/docs/caextract.html</a> <br>\nI'm unsure how Mac OS handles CAs though.</p>",
        "id": 193633530,
        "sender_full_name": "Pit Sinning",
        "timestamp": 1586565679
    },
    {
        "content": "<p>also, try <code>curl -V</code> (uppercase) instead</p>",
        "id": 193633906,
        "sender_full_name": "Pit Sinning",
        "timestamp": 1586566272
    },
    {
        "content": "<p>OK so I finally went to GitHub and downloaded elan directly, and that worked.  So now I have Lean installed.  Thanks for trying to help me.   Too bad it didn't work for me like in Scott's nice video.</p>",
        "id": 193633913,
        "sender_full_name": "Michael Beeson",
        "timestamp": 1586566303
    },
    {
        "content": "<p>Sorry about the video. It may well be out of date. I now longer have my (virtual) windows machine sitting around, so it's nontrivial for me to verify it. If someone tells me they've tested it and it's now wrong, I'll take it down.</p>",
        "id": 193636224,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1586569107
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Scott Morrison</span> I think the problem is the Mac installation video</p>",
        "id": 193643672,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1586583099
    },
    {
        "content": "<p>I guess both of them are quite out of date nowadays....</p>",
        "id": 193643676,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1586583110
    },
    {
        "content": "<p>I'll go take them down.</p>",
        "id": 193650806,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1586596487
    },
    {
        "content": "<p>When installing Elan in VSCode using the guide <a href=\"https://lean-lang.org/lean4/doc/quickstart.html\">https://lean-lang.org/lean4/doc/quickstart.html</a> <br>\nI get</p>\n<p>PS C:\\Users\\parke\\Downloads\\Lean4_ProofVerification&gt; Start-BitsTransfer -Source \"<a href=\"https://raw.githubusercontent.com/leanprover/elan/master/elan-init.ps1\">https://raw.githubusercontent.com/leanprover/elan/master/elan-init.ps1</a>\" -Destination \"elan-init.ps1\" PS C:\\Users\\parke\\Downloads\\Lean4_ProofVerification&gt; Set-ExecutionPolicy -ExecutionPolicy Unrestricted -Scope Process<br>\nPS C:\\Users\\parke\\Downloads\\Lean4_ProofVerification&gt; $rc = .\\elan-init.ps1 -NoPrompt 1 -DefaultToolchain leanprover/lean4:stable info: downloading installer to C:\\Users\\parke\\AppData\\Local\\Temp\\ error: could not create link from 'C:\\Users\\parke.elan\\bin\\elan.exe' to 'C:\\Users\\parke.elan\\bin\\lake.exe'<br>\nElan failed with error code 1 PS C:\\Users\\parke\\Downloads\\Lean4_ProofVerification&gt; Write-Host \"elan-init returned [$rc]\" elan-init returned [1]</p>",
        "id": 491463450,
        "sender_full_name": "Parker Friedland",
        "timestamp": 1735699981
    },
    {
        "content": "<p>The first time I installed Ellan I think I didn't get this error it said return [0] but then when opening Main.lean in a new project I got</p>\n<p><code>c:\\Users\\parke\\.elan\\toolchains\\leanprover--lean4---stable\\bin\\lake.exe setup-file C:/Users/parke/Downloads/Lean4_ProofVerification/Main.lean Init Lean4ProofVerification</code> failed:</p>\n<p>stderr:<br>\nerror: missing manifest; use <code>lake update</code> to generate one<br>\nInvalid Lake configuration.  Please restart the server after fixing the Lake configuration file.</p>\n<p>So I asked QwQ (open source llm) for help and it said after telling me to update the VSCode settings.json by adding</p>\n<div class=\"codehilite\"><pre><span></span><code>`    &quot;terminal.integrated.env.windows&quot;: {        &quot;PATH&quot;: &quot;${env:PATH};C:\\\\path\\\\to\\\\elan&quot;    }`\n</code></pre></div>\n\n<p>(which I did) to check if elan was installed using sh<br>\n     elan --version</p>\n<p>which returned sh: elan: command not found</p>\n<p>So I installed Elan again from the guide and that is the point at which I get this error.</p>",
        "id": 491464061,
        "sender_full_name": "Parker Friedland",
        "timestamp": 1735700641
    },
    {
        "content": "<p>though maybe it gave the same error the first time and I just missed it?</p>",
        "id": 491464146,
        "sender_full_name": "Parker Friedland",
        "timestamp": 1735700720
    },
    {
        "content": "<p>should I remove <br>\n\"<a href=\"http://terminal.integrated.env.windows\">terminal.integrated.env.windows</a>\": { \"PATH\": \"${env:PATH};C:\\path\\to\\elan\" } <br>\n?</p>",
        "id": 491464614,
        "sender_full_name": "Parker Friedland",
        "timestamp": 1735701250
    },
    {
        "content": "<p>though I still had the error </p>\n<p><code>c:\\Users\\parke\\.elan\\toolchains\\leanprover--lean4---stable\\bin\\lake.exe setup-file C:/Users/parke/Downloads/Lean4_ProofVerification/Main.lean Init Lean4ProofVerification</code> failed: stderr: error: missing manifest; use <code>lake update</code> to generate one Invalid Lake configuration. Please restart the server after fixing the Lake configuration file.</p>\n<p>before this</p>",
        "id": 491464682,
        "sender_full_name": "Parker Friedland",
        "timestamp": 1735701344
    },
    {
        "content": "<p>ah I see </p>\n<p>\"PATH\": \"${env:PATH};C:\\path\\to\\elan\" </p>\n<p>should be </p>\n<p>\"PATH\": \"${env:PATH};C:\\Users\\parke\\.elan\\bin\" </p>\n<p>forgot to change that</p>",
        "id": 491465740,
        "sender_full_name": "Parker Friedland",
        "timestamp": 1735702511
    },
    {
        "content": "<p>nope same error tho I really should have put in the correct path</p>",
        "id": 491465866,
        "sender_full_name": "Parker Friedland",
        "timestamp": 1735702675
    },
    {
        "content": "<p>or kind of, I get the same error when installing elan but running elan --version<br>\nelan 3.1.1 (71ddc6633 2024-02-22)</p>\n<p>shows it is installed now</p>",
        "id": 491466023,
        "sender_full_name": "Parker Friedland",
        "timestamp": 1735702844
    },
    {
        "content": "<p>all good works now</p>",
        "id": 491466786,
        "sender_full_name": "Parker Friedland",
        "timestamp": 1735703802
    }
]