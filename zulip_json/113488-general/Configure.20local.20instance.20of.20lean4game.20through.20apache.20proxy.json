[
    {
        "content": "<p>I am trying to setup a leangame server for teaching purposes. I have setup the lean game server and a game in a dedicated machine (lets call it <code>worker</code>), that is only accessible from the local network. I also have a machine with an apache server facing the internet (let's call it <code>frontend</code>). So I have configured the apache in <code>frontend</code> to proxy the petitions directed to <code>frontend/leangames</code> to <code>worker:3000</code>. So <code>frontend/leangames/#/g/local/mygame/</code> should be forwarded to <code>worker:3000/#/g/local/mygame/</code>. But it doesn't work.</p>\n<p>I think the problem is that some answers to the client include relative paths to assets in the form of <code>/@/foo'  so the client interprets it must take them from </code>frontend/@/foo<code> which is not under the </code>leangames` subdomain, and hence it is not redirected.</p>\n<p>Does someone have a clue on how to do such a setup?</p>",
        "id": 465243283,
        "sender_full_name": "Miguel Marco",
        "timestamp": 1724693996
    },
    {
        "content": "<p>What's <code>foo</code> concretely here? Is this something one can just fix in the code?</p>",
        "id": 465271106,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1724706234
    },
    {
        "content": "<p>according to my browser's developer tools, it is trying to fetch <code>frontend/@vite/client</code>, <code>frontend/client/src/index.tsx</code> and <code>frontend/@react-refresh</code>.</p>",
        "id": 465271654,
        "sender_full_name": "Miguel Marco",
        "timestamp": 1724706469
    },
    {
        "content": "<p>my first guess (before looking at any code) would be that things would work if you set up a subdomain like <code>leangame.frontend.com</code> instead of <code>fronend.com/leangame</code>, but let me see tomorrow if there's an easy fix</p>",
        "id": 465283113,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1724712549
    },
    {
        "content": "<p>I am not sure i can set up subdomains, since i don't have control of the dns. But will also take a look at it tomorrow.</p>",
        "id": 465287391,
        "sender_full_name": "Miguel Marco",
        "timestamp": 1724714813
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"461731\">@Miguel Marco</span> I think you can get it working if you change the <code>base</code> in <code>vite.config.ts</code> to <code>/leangame/</code>. If you download the lastest version from <code>main</code> you should see a comment <a href=\"https://github.com/leanprover-community/lean4game/blob/36499c02571b6a2d96cb4d5a5c4fd80137b0f063/vite.config.ts#L34\">in the <code>vite.config.ts</code></a>; let me know if that works</p>",
        "id": 465441454,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1724763336
    },
    {
        "content": "<p>Now i get this error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">game</span><span class=\"bp\">@</span><span class=\"mf\">0.1</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"w\"> </span><span class=\"n\">start_server</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">server</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">relay</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">cross</span><span class=\"bp\">-</span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">NODE_ENV</span><span class=\"bp\">=</span><span class=\"n\">development</span><span class=\"w\"> </span><span class=\"n\">nodemon</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"n\">mjs</span><span class=\"w\"> </span><span class=\"c1\">--exec \"node ./index.mjs\")</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">game</span><span class=\"bp\">@</span><span class=\"mf\">0.1</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"w\"> </span><span class=\"n\">start_client</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">cross</span><span class=\"bp\">-</span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">NODE_ENV</span><span class=\"bp\">=</span><span class=\"n\">development</span><span class=\"w\"> </span><span class=\"n\">vite</span><span class=\"w\"> </span><span class=\"c1\">--host</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">nodemon</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"mf\">3.0</span><span class=\"bp\">.</span><span class=\"m\">3</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">nodemon</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">restart</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">any</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">enter</span><span class=\"w\"> </span><span class=\"ss\">`rs</span><span class=\"bp\">`</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">nodemon</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">watching</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"bp\">*.*</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">nodemon</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">watching</span><span class=\"w\"> </span><span class=\"n\">extensions</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mjs</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">nodemon</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">starting</span><span class=\"w\"> </span><span class=\"ss\">`node</span><span class=\"w\"> </span><span class=\"bp\">./</span><span class=\"n\">index</span><span class=\"bp\">.</span><span class=\"n\">mjs</span><span class=\"bp\">`</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">   </span><span class=\"n\">VITE</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">5</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"w\">  </span><span class=\"n\">ready</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mi\">412</span><span class=\"w\"> </span><span class=\"n\">ms</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">   </span><span class=\"bp\">➜</span><span class=\"w\">  </span><span class=\"n\">Local</span><span class=\"o\">:</span><span class=\"w\">   </span><span class=\"n\">http</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">localhost</span><span class=\"o\">:</span><span class=\"mi\">3000</span><span class=\"bp\">/</span><span class=\"n\">leangames</span><span class=\"bp\">/</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">   </span><span class=\"bp\">➜</span><span class=\"w\">  </span><span class=\"n\">Network</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">http</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"mf\">155.210</span><span class=\"bp\">.</span><span class=\"m\">85</span><span class=\"bp\">.</span><span class=\"m\">163</span><span class=\"o\">:</span><span class=\"mi\">3000</span><span class=\"bp\">/</span><span class=\"n\">leangames</span><span class=\"bp\">/</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">vite</span><span class=\"bp\">-</span><span class=\"n\">plugin</span><span class=\"bp\">-</span><span class=\"n\">static</span><span class=\"bp\">-</span><span class=\"n\">copy</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Collected</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"n\">items</span><span class=\"bp\">.</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">node</span><span class=\"o\">:</span><span class=\"mi\">6458</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DEP0040</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">DeprecationWarning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"ss\">`punycode</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Please</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">userland</span><span class=\"w\"> </span><span class=\"n\">alternative</span><span class=\"w\"> </span><span class=\"n\">instead</span><span class=\"bp\">.</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Use</span><span class=\"w\"> </span><span class=\"ss\">`node</span><span class=\"w\"> </span><span class=\"c1\">--trace-deprecation ...` to show where the warning was created)</span>\n<span class=\"o\">[</span><span class=\"n\">server</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Listening</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"mi\">8080</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">44</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">vite</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Internal</span><span class=\"w\"> </span><span class=\"n\">server</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Invalid</span><span class=\"w\"> </span><span class=\"n\">URL</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">URL</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">node</span><span class=\"o\">:</span><span class=\"n\">internal</span><span class=\"bp\">/</span><span class=\"n\">url</span><span class=\"o\">:</span><span class=\"mi\">816</span><span class=\"o\">:</span><span class=\"mi\">29</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">viteBaseMiddleware</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">61974</span><span class=\"o\">:</span><span class=\"mi\">24</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">call</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50689</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50633</span><span class=\"o\">:</span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">viteProxyMiddleware</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">64148</span><span class=\"o\">:</span><span class=\"mi\">9</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">call</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50689</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50633</span><span class=\"o\">:</span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">cors</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">51161</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">51197</span><span class=\"o\">:</span><span class=\"mi\">17</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">originCallback</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">51187</span><span class=\"o\">:</span><span class=\"mi\">15</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">58</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">vite</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Internal</span><span class=\"w\"> </span><span class=\"n\">server</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Invalid</span><span class=\"w\"> </span><span class=\"n\">URL</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">URL</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">node</span><span class=\"o\">:</span><span class=\"n\">internal</span><span class=\"bp\">/</span><span class=\"n\">url</span><span class=\"o\">:</span><span class=\"mi\">816</span><span class=\"o\">:</span><span class=\"mi\">29</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">viteBaseMiddleware</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">61974</span><span class=\"o\">:</span><span class=\"mi\">24</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">call</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50689</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50633</span><span class=\"o\">:</span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">viteProxyMiddleware</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">64148</span><span class=\"o\">:</span><span class=\"mi\">9</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">call</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50689</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50633</span><span class=\"o\">:</span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">cors</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">51161</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">51197</span><span class=\"o\">:</span><span class=\"mi\">17</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">originCallback</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">51187</span><span class=\"o\">:</span><span class=\"mi\">15</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"o\">:</span><span class=\"mi\">21</span><span class=\"o\">:</span><span class=\"mi\">04</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">vite</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Internal</span><span class=\"w\"> </span><span class=\"n\">server</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Invalid</span><span class=\"w\"> </span><span class=\"n\">URL</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">URL</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">node</span><span class=\"o\">:</span><span class=\"n\">internal</span><span class=\"bp\">/</span><span class=\"n\">url</span><span class=\"o\">:</span><span class=\"mi\">816</span><span class=\"o\">:</span><span class=\"mi\">29</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">viteBaseMiddleware</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">61974</span><span class=\"o\">:</span><span class=\"mi\">24</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">call</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50689</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50633</span><span class=\"o\">:</span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">viteProxyMiddleware</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">64148</span><span class=\"o\">:</span><span class=\"mi\">9</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">call</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50689</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">50633</span><span class=\"o\">:</span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">cors</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">51161</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">)</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">51197</span><span class=\"o\">:</span><span class=\"mi\">17</span>\n<span class=\"o\">[</span><span class=\"n\">client</span><span class=\"o\">]</span><span class=\"w\">       </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">originCallback</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"bp\">///</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">leangame</span><span class=\"bp\">/</span><span class=\"n\">lean4game</span><span class=\"bp\">/</span><span class=\"n\">node_modules</span><span class=\"bp\">/</span><span class=\"n\">vite</span><span class=\"bp\">/</span><span class=\"n\">dist</span><span class=\"bp\">/</span><span class=\"n\">node</span><span class=\"bp\">/</span><span class=\"n\">chunks</span><span class=\"bp\">/</span><span class=\"n\">dep</span><span class=\"bp\">-</span><span class=\"mi\">41</span><span class=\"n\">cf5ffd</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">51187</span><span class=\"o\">:</span><span class=\"mi\">15</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>My setup in <code>frontend</code> is just to add </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">ProxyPass</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">leangames</span><span class=\"w\"> </span><span class=\"n\">http</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">worker</span><span class=\"o\">:</span><span class=\"mi\">3000</span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">upgrade</span><span class=\"bp\">=</span><span class=\"n\">websocket</span>\n<span class=\"n\">ProxyPassReverse</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">leangames</span><span class=\"w\"> </span><span class=\"n\">http</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">worker</span><span class=\"o\">:</span><span class=\"mi\">3000</span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">upgrade</span><span class=\"bp\">=</span><span class=\"n\">websocket</span>\n</code></pre></div>\n<p>To the apache configuration file.</p>",
        "id": 465482676,
        "sender_full_name": "Miguel Marco",
        "timestamp": 1724772225
    },
    {
        "content": "<p>ok I gave it a shot and have a seamingly working version using <code>nginx</code>:</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>change to vite.config.ts</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\"><pre><span></span><code>@@ -31,7 +31,7 @@ export default defineConfig({\n     })\n   ],\n   publicDir: &quot;client/public&quot;,\n-  base: &quot;/&quot;, // setting this to `/leangame/` means the server is now accessible at `localhost:3000/leangame`\n+  base: &quot;/leangame/&quot;, // setting this to `/leangame/` means the server is now accessible at `localhost:3000/leangame`\n   optimizeDeps: {\n     exclude: [&#39;games&#39;]\n   },\n</code></pre></div>\n</div></div>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>cat /etc/nginx/sites-enabled/default</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\"><pre><span></span><code>server {\n   listen 8102;\n   location /leangame/ {\n       proxy_pass http://localhost:3000/leangame/;\n           proxy_set_header Host $host;\n           proxy_set_header X-Real-IP $remote_addr;\n           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n           proxy_set_header X-Forwarded-Proto $scheme;\n           proxy_http_version 1.1;\n           proxy_set_header Upgrade $http_upgrade;\n           proxy_set_header Connection &quot;upgrade&quot;;\n   }\n   location /data/ {\n       proxy_pass http://localhost:8080/data/;\n           proxy_set_header Host $host;\n           proxy_set_header X-Real-IP $remote_addr;\n           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n           proxy_set_header X-Forwarded-Proto $scheme;\n           proxy_http_version 1.1;\n           proxy_set_header Upgrade $http_upgrade;\n           proxy_set_header Connection &quot;upgrade&quot;;\n   }\n   location /locales/ {\n       proxy_pass http://localhost:8080/locales/;\n           proxy_set_header Host $host;\n           proxy_set_header X-Real-IP $remote_addr;\n           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n           proxy_set_header X-Forwarded-Proto $scheme;\n           proxy_http_version 1.1;\n           proxy_set_header Upgrade $http_upgrade;\n           proxy_set_header Connection &quot;upgrade&quot;;\n   }\n   location /i18n/ {\n       proxy_pass http://localhost:8080/i18n/;\n           proxy_set_header Host $host;\n           proxy_set_header X-Real-IP $remote_addr;\n           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n           proxy_set_header X-Forwarded-Proto $scheme;\n           proxy_http_version 1.1;\n           proxy_set_header Upgrade $http_upgrade;\n           proxy_set_header Connection &quot;upgrade&quot;;\n   }\n   location /websocket/ {\n       proxy_pass http://localhost:8080/websocket/;\n           proxy_set_header Host $host;\n           proxy_set_header X-Real-IP $remote_addr;\n           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n           proxy_set_header X-Forwarded-Proto $scheme;\n           proxy_http_version 1.1;\n           proxy_set_header Upgrade $http_upgrade;\n           proxy_set_header Connection &quot;upgrade&quot;;\n   }\n   location /import/ {\n       proxy_pass http://localhost:8080/import/;\n           proxy_set_header Host $host;\n           proxy_set_header X-Real-IP $remote_addr;\n           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n           proxy_set_header X-Forwarded-Proto $scheme;\n           proxy_http_version 1.1;\n           proxy_set_header Upgrade $http_upgrade;\n           proxy_set_header Connection &quot;upgrade&quot;;\n   }\n}\n</code></pre></div>\n</div></div>\n<p>Note that the proxy goes to <code>worker:3000/leangame/</code>!</p>\n<p>and a <code>sudo systemctl restart nginx.service</code> to start it. Now the game server is at <code>localhost:8102/leangame</code>.</p>\n<p>(I'm not sure if one could also modify the proxies in <code>vite.config.ts</code> instead of adding the locations <code>/websocket</code>, <code>/data</code>, etc. in the nginx config...)</p>",
        "id": 465519320,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1724781213
    },
    {
        "content": "<p>(ps: I didn't look at what the <code>proxy_set_header</code>-things exactly say in the second spoiler, that's just the template a tutorial suggested)</p>",
        "id": 465519835,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1724781312
    },
    {
        "content": "<p>Thank you! That showed me the game interface, but no data from the game loaded. I figured out that it is trying to fetch some assets from <code>/data/g/local</code>, <code>/locales/en/translation.json</code> and <code>i18n/g/local</code> that are not based on <code>/leangame/</code>. Adding the corresponding lines to the proxy configuration for those seems to work.</p>",
        "id": 465524184,
        "sender_full_name": "Miguel Marco",
        "timestamp": 1724782154
    },
    {
        "content": "<p>I also had to add some lines for <code>/websocket/g/local</code></p>",
        "id": 465527071,
        "sender_full_name": "Miguel Marco",
        "timestamp": 1724782695
    }
]