[
    {
        "content": "<p>While playing around with <code>verso</code>, I stumbled upon the following: After importing <code>Mathlib</code>, an executable (called via <code>lake exe</code>) stopped producing output.</p>\n<p>I did not manage to make it mathlib-free, but here is how to reproduce:</p>\n<ol>\n<li><code>lake new bar math</code></li>\n<li><code>cd bar; lake update</code></li>\n<li>Add one executable target to <code>lakefile.toml</code>:</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[[lean_exe]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"foo\"</span>\n<span class=\"n\">root</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"Main\"</span>\n</code></pre></div>\n<ol start=\"4\">\n<li>Add <code>Main.lean</code> with </li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">PropInstances</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">println</span><span class=\"w\"> </span><span class=\"s2\">\"hi\"</span>\n</code></pre></div>\n<ol start=\"5\">\n<li>Run <code>lake exe foo</code>.</li>\n</ol>\n<p>Output: Nothing, no error message and no \"hi\". If the mathlib <code>import</code> is removed, the expected output appears.<br>\n(One can certainly minimize further by inlining code from the imports).</p>",
        "id": 530450757,
        "sender_full_name": "Christian Merten",
        "timestamp": 1753314673
    },
    {
        "content": "<p>What does <code>echo $?</code> give?</p>",
        "id": 530451109,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753314942
    },
    {
        "content": "<p><code>139</code>, so segmentation fault I assume?</p>",
        "id": 530451343,
        "sender_full_name": "Christian Merten",
        "timestamp": 1753315115
    },
    {
        "content": "<p>This is already reported elsewhere</p>",
        "id": 530452164,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753315582
    },
    {
        "content": "<p><a href=\"#narrow/channel/287929-mathlib4/topic/.60import.20Mathlib.2EOrder.2EPropInstances.60.20causing.20segment.20fault/near/527975214\">#mathlib4 &gt; &#96;import Mathlib.Order.PropInstances&#96; causing segment fault @ ðŸ’¬</a></p>",
        "id": 530452207,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753315620
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 530452402,
        "sender_full_name": "Christian Merten",
        "timestamp": 1753315745
    }
]