[
    {
        "content": "<p>I have installed a global project (<code>leanproject global-install</code>) so that I don't always have to create this pesky src directory etc everywhere.<br>\nThis works fine on my laptop but on my desktop I get a timeout when \"import tactic\" (<code>excessive memory consumption</code>).<br>\nThis is on a shared directory - maybe this causes some confusion?</p>",
        "id": 326827205,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1675952271
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 326827436,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1675952327
    },
    {
        "content": "<p>Do you have mathlib oleans on the desktop? What happens if you manually try compiling a random file in mathlib which is a long way from logic, e.g some random file about polynomials? You can do <code>lean --make path.to.file.lean</code>.</p>",
        "id": 326850696,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1675958047
    },
    {
        "content": "<p>Ok, it seems completely broken. I can't even load my old files anymore. I think I am going to reinstall lean.</p>",
        "id": 326869826,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1675962824
    },
    {
        "content": "<p>It wouldn't surprise me if you are the only user of <code>global-install</code> on this zulip instance</p>",
        "id": 326871511,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1675963273
    },
    {
        "content": "<p>This is really strange: I reinstalled lean3, I am using a local project, I did <code>leanproject get-mathlib-cache</code>, I reinstalled the lean extension on visual studio but I still get </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">invalid</span> <span class=\"kn\">import</span><span class=\"o\">:</span> <span class=\"n\">data.option.defs</span>\n<span class=\"n\">excessive</span> <span class=\"n\">memory</span> <span class=\"n\">consumption</span> <span class=\"n\">detected</span> <span class=\"n\">at</span> <span class=\"bp\">'</span><span class=\"n\">expression</span> <span class=\"n\">traversal'</span> <span class=\"o\">(</span><span class=\"n\">potential</span> <span class=\"n\">solution</span><span class=\"o\">:</span> <span class=\"n\">increase</span> <span class=\"n\">memory</span> <span class=\"n\">consumption</span> <span class=\"n\">threshold</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>while the same project loads fine on my laptop???</p>",
        "id": 327025398,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1676028740
    },
    {
        "content": "<p>What does <code>lean --path</code> give from the folder of that local project?</p>",
        "id": 327036311,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1676031718
    },
    {
        "content": "<p>Does this persist after running <code>Lean: Restart</code> (or restarting VSCode)? What happens if you do <code>leanproject build</code> from the command line? Did you make sure to open the project (not a single file)?</p>",
        "id": 327062453,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1676038638
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">base</span><span class=\"o\">)</span> <span class=\"n\">psztxa</span><span class=\"bp\">@</span><span class=\"n\">IMAC</span><span class=\"bp\">-</span><span class=\"n\">DGKYNHM5JV3X</span> <span class=\"n\">automaton</span><span class=\"bp\">-</span><span class=\"k\">in</span><span class=\"bp\">-</span><span class=\"n\">lean</span> <span class=\"bp\">%</span> <span class=\"n\">lean</span> <span class=\"c1\">--path</span>\n<span class=\"o\">{</span>\n  <span class=\"s2\">\"is_user_leanpkg_path\"</span><span class=\"o\">:</span> <span class=\"n\">false</span><span class=\"o\">,</span>\n  <span class=\"s2\">\"leanpkg_path_file\"</span><span class=\"o\">:</span> <span class=\"s2\">\"/Users/psztxa/Library/CloudStorage/OneDrive-TheUniversityofNottingham/COMP2012-LAC-22-23/automaton-in-lean/leanpkg.path\"</span><span class=\"o\">,</span>\n  <span class=\"s2\">\"path\"</span><span class=\"o\">:</span> <span class=\"o\">[</span>\n    <span class=\"s2\">\"/Users/psztxa/.elan/toolchains/leanprover-community--lean---3.45.0/bin/../library\"</span><span class=\"o\">,</span>\n    <span class=\"s2\">\"/Users/psztxa/.elan/toolchains/leanprover-community--lean---3.45.0/bin/../lib/lean/library\"</span><span class=\"o\">,</span>\n    <span class=\"s2\">\"/Users/psztxa/Library/CloudStorage/OneDrive-TheUniversityofNottingham/COMP2012-LAC-22-23/automaton-in-lean/_target/deps/mathlib/src\"</span><span class=\"o\">,</span>\n    <span class=\"s2\">\"/Users/psztxa/Library/CloudStorage/OneDrive-TheUniversityofNottingham/COMP2012-LAC-22-23/automaton-in-lean/./src\"</span>\n  <span class=\"o\">]</span>\n<span class=\"o\">}</span>\n</code></pre></div>",
        "id": 327105304,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1676049652
    },
    {
        "content": "<p>Just to clarify: it is not just one project, my lean installation seems to be broken altogether. However, I thought that reinstalling lean and reinstalling the lean extension would fix it.</p>",
        "id": 327107945,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1676050349
    },
    {
        "content": "<p>Yes, I have restarted vs code and I have now also tried <code>leanproject build</code></p>",
        "id": 327108148,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1676050406
    },
    {
        "content": "<p>no luck :-(</p>",
        "id": 327108187,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1676050417
    },
    {
        "content": "<p>By reinstalling lean, do you (also) mean deleting <code>~/.elan</code>?</p>",
        "id": 327108926,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1676050625
    },
    {
        "content": "<p>It's possible that you accidentally edited a <code>.lean</code> file inside this directory after using \"Go to Definition\" on your editor, which would cause cache problems. Deleting the directory is safe if you have an internet connection when elan tries to redownload the Lean binaries (well, I guess you'll lose overrides and stuff, but perhaps that's good?)</p>",
        "id": 327109542,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1676050793
    },
    {
        "content": "<p>After reinstalling another time it now works. No idea what was wrong but thank you for your advice.</p>",
        "id": 328228051,
        "sender_full_name": "Thorsten Altenkirch",
        "timestamp": 1676551702
    }
]