[
    {
        "content": "<p>I'm surprised that I cannot show this by <code>try?</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">SizedStr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">takeSized</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SizedStr</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">str</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">take</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">copy</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">str</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">fail_if_success</span><span class=\"w\"> </span><span class=\"n\">try?</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">⟨</span><span class=\"n\">str</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"bp\">⟩</span>\n</code></pre></div>",
        "id": 565489107,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1766810915
    },
    {
        "content": "<p>How can I show this?</p>",
        "id": 565489109,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1766810923
    },
    {
        "content": "<p>@loogle String.take</p>",
        "id": 565504939,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766833799
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span>  String.take</p>",
        "id": 565504960,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766833827
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/String/TakeDrop.html#String.take\">String.take</a></p>",
        "id": 565504963,
        "sender_full_name": "loogle",
        "timestamp": 1766833828
    },
    {
        "content": "<p>There aren't any lemmas about <code>String.take</code>.</p>",
        "id": 565504974,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766833837
    },
    {
        "content": "<p>There isn't much verification API around string at all it seems. You would have to create it. Or you could try using <code>List Char</code> or <code>Array Char</code> instead of <code>String</code>.</p>",
        "id": 565505259,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766834156
    },
    {
        "content": "<p>Ah that’s a real shame. I suppose the difficulty is UTF-8?</p>",
        "id": 566183022,
        "sender_full_name": "cmlsharp",
        "timestamp": 1767481675
    },
    {
        "content": "<p>These lemmas are on the list of the stdlib team and will come. We recently finished the refactoring to the new string API and the next evolutionary step for strings is to provide external proofs for the new API</p>",
        "id": 566209753,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1767518418
    }
]