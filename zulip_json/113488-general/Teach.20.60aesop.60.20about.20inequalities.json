[
    {
        "content": "<p>Is it possible to teach <code>aesop</code> some basic facts about inequalities? In particular, I'd like if the following worked:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">aesop</span>\n</code></pre></div>\n<p>(for context: I'm trying to use <code>aesop</code> to solve a more tedious goal, and it succeeds completely, except that it's left with goals with contradictory hypotheses it can't then close)</p>",
        "id": 498677662,
        "sender_full_name": "Violeta HernÃ¡ndez",
        "timestamp": 1739168073
    },
    {
        "content": "<p>Oh nice, this does work</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">aesop</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">lt_asymm</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Not sure if this is an intended solution though (how is <code>lt_asymm</code> getting applied through <code>simp</code>?)</p>",
        "id": 498678257,
        "sender_full_name": "Violeta HernÃ¡ndez",
        "timestamp": 1739168493
    },
    {
        "content": "<p>Did you try the <code>bound</code> tactic? It uses aesop; I don't have much experience using it yet, but perhaps it would also work?</p>",
        "id": 498710388,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739180210
    },
    {
        "content": "<p>Here's a cool approach: <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/lattice.20tactics/near/453896967\">#mathlib4 &gt; lattice tactics @ ðŸ’¬</a></p>",
        "id": 498713454,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1739181005
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta HernÃ¡ndez</span> <a href=\"#narrow/channel/113488-general/topic/Teach.20.60aesop.60.20about.20inequalities/near/498678257\">said</a>:</p>\n<blockquote>\n<p>Not sure if this is an intended solution though (how is <code>lt_asymm</code> getting applied through <code>simp</code>?)</p>\n</blockquote>\n<p>When <code>simp</code> sees a theorem of the form <code>P -&gt; Not Q</code>, it rewrites <code>Q</code> to <code>False</code>, provided that a nested call to <code>simp</code> rewrites <code>P</code> to <code>True</code>. When you use <code>simp_all</code> (as Aesop does), hypotheses are taken into account, so if <code>P</code> is in the context, the nested <code>simp</code> call rewrites it to <code>True</code>.</p>\n<p>A likely more performant solution would be use <code>lt_asymm</code> as a forward rule (<code>@[aesop safe forward]</code>). This will look for hypotheses <code>a &lt; b</code> and <code>b &lt; a</code> in the context and derive <code>False</code> from them.</p>\n<p>Actually, for now you need to register a variant of <code>lt_asymm</code> where the <code>Not</code> is explicitly unfolded, i.e. <code>lt_asymm' : a &lt; b -&gt; b &lt; a -&gt; False</code> instead of <code>a &lt; b -&gt; Not (b &lt; a)</code>. I should fix this at some point.</p>",
        "id": 498776548,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1739197781
    }
]