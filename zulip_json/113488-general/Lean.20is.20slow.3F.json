[
    {
        "content": "<p>I really wonder where he heard complaints about Lean‚Äôs performance.</p>",
        "id": 553266495,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1762110044
    },
    {
        "content": "<p>We still get a lot of these complains on Zulip, although this is usually because people have strange setups or antivirus/firewall issues. That being said lean is much faster now than it was in July 2024.</p>",
        "id": 553268630,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1762112252
    },
    {
        "content": "<p>I read a lot of zulip and I don't see people complaining that lean is slow except in the context of \"this is slow\" \"aah but do it that way\" \"oh now it's fast\". The Jacobi-Zariski file in mathlib is an exception but even that gets faster over time (and if people stopped believing in universes then it would get even faster) (and there's also no evidence that if they managed to get that far in algebra in Isabelle then it wouldn't be slow there too, or even that it's even possible to get that far in algebra in Isabelle).</p>\n<p>However Larry has access to sledgehammer which I think is really the big win for simple type theory.</p>",
        "id": 553270846,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762114559
    },
    {
        "content": "<blockquote>\n<p>I don't see people complaining that lean is slow except ...</p>\n</blockquote>\n<p>As I've recently come to realize, this is really what exactly what 'slow' often means. For instance, Python is 'slow', but of course people write performant code in Python all the time. (Sometimes this means using numpy effectively, sometimes it means avoiding dynamic dispatch...) The same goes for Julia (my other less-standard favorite language beside Lean), which is typically advertised as being \"as fast as C\", but if you're not careful you really can end up in slow code again. Basically any garbage collected language has pitfalls about re-allocating many objects, too.</p>\n<p>I think this can be true for Lean, too</p>",
        "id": 553274831,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1762118459
    },
    {
        "content": "<p>I totally agree that lean often forces us to do (otherwise) suboptimal or unintuitive approaches just because of bad performance. The only reason why they aren't complained a lot on Zulip is just that complaining doesn't really solve the problem and there are well know workarounds like defining auxiliary types to stop lean from unfolding stuff or hand tweaking priorities of instances, but the fact that lean is forcing me to do this is still suboptimal and a symptom of lean being slow. (Of course I am not saying that lean could do better or that other proof systems would be faster)</p>\n<p>More concretely, here's an example that should just work but doesn't that I just encountered last week. These things aren't that uncommon. </p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">TensorProduct</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R''</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsScalarTower</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"bp\">‚äó</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">IsScalarTower</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R''</span><span class=\"w\"> </span><span class=\"bp\">‚äó</span><span class=\"o\">[</span><span class=\"n\">R'</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"bp\">‚äó</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">‚ß∏</span><span class=\"w\"> </span><span class=\"n\">Ideal.span</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e</span><span class=\"o\">}))</span>\n</code></pre></div>\n</div></div>",
        "id": 553276393,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1762120062
    },
    {
        "content": "<p>I think it's also fairly easy to run into situations where Lean appears really slow, eg the server taking a surprisingly long time to respond with feedback. Here's a quick example I just recorded, where after typing <code>simp</code> on a very simple goal, I have to wait ten seconds before I get any updates from Lean.<br>\n<a href=\"/user_uploads/3121/0n3heU6AOhlYoETp3y8fqZnI/Screen-Recording-2025-11-02-at-21.48.24.mov\">Screen Recording 2025-11-02 at 21.48.24.mov</a><br>\nIn situations like this, I think it's not surprising for a (especially new) user to think \"Lean is slow\", and not complain because it just seems par for the course.</p>",
        "id": 553276973,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1762120772
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/Lean.20in.20the.20wild/near/553270846\">said</a>:</p>\n<blockquote>\n<p>(and there's also no evidence that if they managed to get that far in algebra in Isabelle then it wouldn't be slow there too, or even that it's even possible to get that far in algebra in Isabelle).</p>\n</blockquote>\n<p>Kevin, I feel like you're not justified in just asserting that there is \"no evidence\" that it would be possible to formalize Jacobi-Zariski in Isabelle.</p>",
        "id": 553281117,
        "sender_full_name": "James E Hanson",
        "timestamp": 1762125109
    },
    {
        "content": "<p>Only in the sense that it hasn't happened yet, I imagine</p>",
        "id": 553284547,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1762128462
    },
    {
        "content": "<blockquote>\n<p>people have regularly asked why Isabelle dispenses with proof objects.</p>\n</blockquote>\n<p>Does \"proof objects\" here refer to the term the elaborator send to the kernel?</p>",
        "id": 553294242,
        "sender_full_name": "pandaman",
        "timestamp": 1762138881
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"395416\">@pandaman</span> yes. In Lean, those have the type <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Expr#doc\">docs#Lean.Expr</a>.</p>",
        "id": 553299743,
        "sender_full_name": "ùö†ùöòùöìùöåùöíùöéùöåùöë ùöóùöäùö†ùöõùöòùöåùöîùöí",
        "timestamp": 1762143476
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113488-general/topic/Lean.20in.20the.20wild/near/553284547\">said</a>:</p>\n<blockquote>\n<p>Only in the sense that it hasn't happened yet, I imagine</p>\n</blockquote>\n<p>Nonono, the JacobiZariski file makes heavy use of constructions like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Algebra.Extension#doc\">docs#Algebra.Extension</a> which I'm not sure sinple type theory is equipped to deal with, and its extension to schemes will present even more problems. The issues are mathematical not sociological, but this thread is not the place to talk about them.</p>",
        "id": 553301152,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762144490
    },
    {
        "content": "<p>11 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/Lean.20in.20the.20wild/with/553264246\">#general &gt; Lean in the wild</a> by <span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span>.</p>",
        "id": 553310498,
        "sender_full_name": "Notification Bot",
        "timestamp": 1762152077
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> You challenged them with schemes, and they did that. I think they've provided ample evidence that complicated objects can be formalized in Isabelle. There certainly isn't any theoretical obstruction.</p>",
        "id": 553310685,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1762152224
    },
    {
        "content": "<p>That is true, I was skeptical about schemes and they showed that this could be done, although they did not use the standard development of rings to do it. Perhaps they can do cotangent complexes somehow.</p>",
        "id": 553311165,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762152600
    },
    {
        "content": "<p>It's a common theme: mathematicians worry about foundations not being powerful enough, while in practice they are usually way too powerful. One can do a lot in a foundation weaker than ZFC. For example, people do algebraic geometry in Cubical Agda (<a href=\"https://www.youtube.com/watch?v=DJNisW5m1BA\">https://www.youtube.com/watch?v=DJNisW5m1BA</a>), which is as weak as one can get in terms of proof theoretic strength.</p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"DJNisW5m1BA\" href=\"https://www.youtube.com/watch?v=DJNisW5m1BA\"><img src=\"https://uploads.zulipusercontent.net/e2ce841fd7643f0028055412cc206c02699cd8ef/68747470733a2f2f692e7974696d672e636f6d2f76692f444a4e697357356d3142412f6d7164656661756c742e6a7067\"></a></div>",
        "id": 553321341,
        "sender_full_name": "suhr",
        "timestamp": 1762157561
    },
    {
        "content": "<p>This is not the common theme appearing in this conversation: the common theme is people talking past each other because half of the conversation is about what is doable and half of the conversation is about what is doable in a nice as productive way.</p>",
        "id": 553322198,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1762157908
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/113488-general/topic/Lean.20in.20slow.3F/near/553276393\">said</a>:</p>\n<blockquote>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">TensorProduct</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R''</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsScalarTower</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"bp\">‚äó</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">IsScalarTower</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R''</span><span class=\"w\"> </span><span class=\"bp\">‚äó</span><span class=\"o\">[</span><span class=\"n\">R'</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"bp\">‚äó</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">‚ß∏</span><span class=\"w\"> </span><span class=\"n\">Ideal.span</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e</span><span class=\"o\">}))</span>\n</code></pre></div>\n<p></div></div><br>\n</p>\n</blockquote>\n<p>This is the usual problem (which could be fixed):</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>            [] [0.000072] new goal AddCommMonoid (R' ‚äó[R] S ‚ß∏ Ideal.span {e}) ‚ñ∂\n            [] [0.003458] ‚úÖÔ∏è apply @ESeminormedAddCommMonoid.toAddCommMonoid to AddCommMonoid (R' ‚äó[R] S ‚ß∏ Ideal.span {e}) ‚ñ∂\n            [] [0.174059] ‚úÖÔ∏è apply @topologicalRingQuotientTopology to TopologicalSpace (R' ‚äó[R] S ‚ß∏ Ideal.span {e}) ‚ñ∂\n            [] [0.000225] ‚úÖÔ∏è apply @UpgradedStandardBorel.toTopologicalSpace to TopologicalSpace (R' ‚äó[R] S) ‚ñ∂\n</code></pre></div>\n<p>etc etc. But it does make the point that sometimes typeclass inference can be slow (because nobody separated the norm and algebra heirarchies yet).</p>",
        "id": 553365373,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762171555
    },
    {
        "content": "<p>we should lower the instance priority on <code>ESeminormedAddCommMonoid.toAddCommMonoid</code> definitely</p>",
        "id": 553366194,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762171808
    },
    {
        "content": "<p>But this is exactly the point Andrew is making -- we can fix things by fiddling around with the numbers but that is hardly a good user experience.</p>",
        "id": 553366610,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762171946
    },
    {
        "content": "<p>Did we stop unbundling? </p>\n<p>A lot of this still very much experimental and we are learning the best patterns. Perhaps that sentiment applies to the other languages also.</p>",
        "id": 553381791,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1762176829
    },
    {
        "content": "<p>I think we're waiting for <a href=\"https://github.com/leanprover/lean4/pull/8279\">lean4#8279</a>.</p>",
        "id": 553382567,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1762177044
    },
    {
        "content": "<p>With <code>P-low</code> I would assume that is dead.</p>",
        "id": 553382926,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1762177129
    },
    {
        "content": "<p>Based on my reading of the <a href=\"https://github.com/leanprover/lean4/blob/master/CONTRIBUTING.md#reviews-and-feedback\">contributing guidelines</a>, I don't think <code>P-low</code> means it's dead; it just means that someone outside the FRO will have to do the work for it (and then we may have to wait a long time for the FRO to get around to reviewing it).</p>",
        "id": 553383743,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1762177344
    },
    {
        "content": "<blockquote>\n<p>For <em>PRs</em> and <em>RFCs</em>, the priority reflects our commitment to reviewing them and getting them to an acceptable state.</p>\n</blockquote>\n<p>I think this is pretty clear unfortunately.</p>",
        "id": 553384423,
        "sender_full_name": "Christian Merten",
        "timestamp": 1762177525
    },
    {
        "content": "<p>Correct me if I‚Äôm wrong: it seems that unexpected slowness in Lean is mostly in mathlib and downstream of mathlib, and is often due to searching mathlib‚Äôs typeclass hierarchy. So the complaint about Lean itself would mostly be that it is even possible to create a typeclass hierarchy which is slow to search. The most naive ‚Äúsolution‚Äù would be to just not have typeclasses.</p>\n<ol>\n<li>How does this relate to dependent type theory?</li>\n<li>What is the equivalent of typeclasses that provides the same magic but is impossible to make slow?</li>\n</ol>",
        "id": 553419318,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1762185576
    },
    {
        "content": "<p>It is not about \"it is possible to create a hieararchy which is slow to search\", but rather about \"it is hard to create a hierarchy which is fast to search\".</p>",
        "id": 553420405,
        "sender_full_name": "Christian Merten",
        "timestamp": 1762185819
    },
    {
        "content": "<p>Is it hard because of dependent types? Why? (unification? locales are better but somehow incompatible?)</p>",
        "id": 553426409,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1762187248
    },
    {
        "content": "<p>it's because we have all these typeclasses</p>",
        "id": 553426718,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762187324
    },
    {
        "content": "<p>it ends up with many many was to derive the same thing so it takes a while to check them all</p>",
        "id": 553426817,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762187351
    },
    {
        "content": "<p>For example, to derive <code>Add</code>, you have to check all of these</p>\n<ul>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ENormedAddCommMonoid#doc\">docs#ENormedAddCommMonoid</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ring#doc\">docs#Ring</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IdemSemiring#doc\">docs#IdemSemiring</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SubtractionMonoid#doc\">docs#SubtractionMonoid</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SubtractionCommMonoid#doc\">docs#SubtractionCommMonoid</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=DivisionSemiring#doc\">docs#DivisionSemiring</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=DivisionRing#doc\">docs#DivisionRing</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Distrib#doc\">docs#Distrib</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NormedAddCommGroup#doc\">docs#NormedAddCommGroup</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddMonoid#doc\">docs#AddMonoid</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ConditionallyCompleteLinearOrderedField#doc\">docs#ConditionallyCompleteLinearOrderedField</a></li>\n</ul>\n<p>etc.</p>",
        "id": 553428078,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762187639
    },
    {
        "content": "<p>would \"forward typeclass inference\" proposed some time ago help with this problem?</p>",
        "id": 553431036,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762188429
    },
    {
        "content": "<p>Right, I guess this thread lost the original context (<a class=\"message-link\" href=\"/#narrow/channel/113488-general/topic/Lean.20in.20the.20wild/near/553264246\">#general &gt; Lean in the wild @ üí¨</a> ), I'm trying to figure out how Lean/dependent type theory is to blame for this / how Isabelle doesn't end up in this situation.</p>",
        "id": 553431037,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1762188430
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/113488-general/topic/Lean.20is.20slow.3F/near/553276393\">said</a>:</p>\n<blockquote>\n<p>I totally agree that lean often forces us to do (otherwise) suboptimal or unintuitive approaches just because of bad performance. The only reason why they aren't complained a lot on Zulip is just that complaining doesn't really solve the problem and there are well know workarounds like defining auxiliary types to stop lean from unfolding stuff or hand tweaking priorities of instances, but the fact that lean is forcing me to do this is still suboptimal and a symptom of lean being slow. (Of course I am not saying that lean could do better or that other proof systems would be faster)</p>\n<p>More concretely, here's an example that should just work but doesn't that I just encountered last week. These things aren't that uncommon. </p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">TensorProduct</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R''</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsScalarTower</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"bp\">‚äó</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">IsScalarTower</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R''</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R''</span><span class=\"w\"> </span><span class=\"bp\">‚äó</span><span class=\"o\">[</span><span class=\"n\">R'</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"bp\">‚äó</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">‚ß∏</span><span class=\"w\"> </span><span class=\"n\">Ideal.span</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">e</span><span class=\"o\">}))</span>\n</code></pre></div>\n<p></div></div><br>\n</p>\n</blockquote>\n<p>I had made a note to see if I could diagnose the problem here, but I've just tried it today and the problem seems to have gone away :-)</p>",
        "id": 566108645,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1767395003
    }
]