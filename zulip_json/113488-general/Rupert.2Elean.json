[
    {
        "content": "<p>With help from <span class=\"user-mention\" data-user-id=\"662452\">@Jason Reed</span>, I have been formalizing the <a href=\"https://en.wikipedia.org/wiki/Prince_Rupert%27s_cube\">Rupert Property</a> for various convex polyhedra: <a href=\"https://github.com/dwrensha/Rupert.lean\">https://github.com/dwrensha/Rupert.lean</a></p>\n<p>Today I released a video explaining my proof for the triakis tetrahedron, which is one where there is only a very slim margin: <a href=\"https://youtu.be/jDTPBdxmxKw\">https://youtu.be/jDTPBdxmxKw</a></p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"jDTPBdxmxKw\" href=\"https://youtu.be/jDTPBdxmxKw\"><img src=\"https://uploads.zulipusercontent.net/f1be5f53fdc50094ad05ca78b33bdf9aef6c1c20/68747470733a2f2f692e7974696d672e636f6d2f76692f6a4454504264786d784b772f6d7164656661756c742e6a7067\"></a></div>",
        "id": 526427100,
        "sender_full_name": "David Renshaw",
        "timestamp": 1751296786
    },
    {
        "content": "<p>As I recall, your original video mentioned a number of polyhedra for which the Rupert Property status was open. Now that you have formalized the Rupert property, might this make a good inclusion into the <a href=\"https://github.com/google-deepmind/formal-conjectures\">formal-conjectures</a> repository?</p>",
        "id": 526445865,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1751302934
    },
    {
        "content": "<p>Yes, I think that's a good idea.</p>",
        "id": 526446822,
        "sender_full_name": "David Renshaw",
        "timestamp": 1751303318
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"282271\">Bolton Bailey</span> <a href=\"#narrow/channel/113488-general/topic/Rupert.2Elean/near/526445865\">said</a>:</p>\n<blockquote>\n<p>As I recall, your original video mentioned a number of polyhedra for which the Rupert Property status was open. Now that you have formalized the Rupert property, might this make a good inclusion into the <a href=\"https://github.com/google-deepmind/formal-conjectures\">formal-conjectures</a> repository?</p>\n</blockquote>\n<p>I think I'm going to try to take a crack at this. <span class=\"user-mention\" data-user-id=\"243791\">@David Renshaw</span> suggested to me we might want to rework the definition of Rupertness a little bit to not depend on the definitional equality of EuclideanSpace and Fin n -&gt; R , because <a href=\"#narrow/channel/287929-mathlib4/topic/defeq.20abuse.20in.20.60WithLp.60/near/526192974\">it seems that's going to go away eventually</a>.</p>",
        "id": 526450883,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751305009
    },
    {
        "content": "<p>I filed <a href=\"https://github.com/google-deepmind/formal-conjectures/issues/283\">https://github.com/google-deepmind/formal-conjectures/issues/283</a></p>",
        "id": 526455374,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751306424
    },
    {
        "content": "<p>The conjecture I put more faith in is \"there exists a convex polyhedron that does not have the Rupert property\" (the negation of what you propose).</p>",
        "id": 526456296,
        "sender_full_name": "David Renshaw",
        "timestamp": 1751306640
    },
    {
        "content": "<p>I agree that that's where my sympathies lie as well. I'm currently looking through the <code>formal-conjectures</code> style guide and it appears there is a way of stating things that presumes more neutrality.</p>",
        "id": 526456846,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751306772
    },
    {
        "content": "<p>Point 6 in <a href=\"https://github.com/google-deepmind/formal-conjectures?tab=readme-ov-file#style-guidelines\">https://github.com/google-deepmind/formal-conjectures?tab=readme-ov-file#style-guidelines</a></p>",
        "id": 526456997,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751306805
    },
    {
        "content": "<p>I was initially biased towards formalizing the \"every convex polyhedron is Rupert\" formulation because the earliest available citation phrased it that way</p>\n<blockquote>\n<p>With a certain hesitancy, we even suggest that perhaps every<br>\nconvex polyhedron in R3 has the Rupert property</p>\n</blockquote>",
        "id": 526457185,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751306859
    },
    {
        "content": "<p>albeit \"with a certain hesitancy\" <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 526457216,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751306869
    },
    {
        "content": "<p>The sphere does not, so one might imagine that all \"sufficiently round\" convex polyhedra fail too. The rhombicosidodecahedron is an archimedean solid which I'm particularly fond of because it's the physically largest Archimedean solid which I can make with my polydron collection; I was not surprised to see it on the unknown list when I discovered today that there were some unknown examples and it wouldn't surprise me if this were not Rupert.</p>",
        "id": 526458264,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751307186
    },
    {
        "content": "<p>Do you have any sense for what notions of \"sufficiently spherical\" might be workable? I understand that's a pretty far out speculative thing to ask, but maybe you have more discrete geometry intuition than I do...</p>",
        "id": 526458984,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751307387
    },
    {
        "content": "<p>I meant \"the biggest possible Archimedean solid I can make with my polydron\" which can probably translated into some assertion about curvature or something. The angle at a vertex is 108+90+60+90 which is only 12 degrees off 360.</p>",
        "id": 526459929,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751307652
    },
    {
        "content": "<p>Yeah, \"angle deficit\" is an example for what I was fishing for, I guess: i.e. what metrics of sphericality might be most relevant. One could also imagine, I don't know, ratio of outer to inner diameter or something.</p>\n<p>in any case I definitely agree on an intuitive level that roundness/sphericality feels like the essential obstacle to Rupertness.</p>",
        "id": 526460480,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751307794
    },
    {
        "content": "<p>I am surprised that this question is open. It seems to me like it's just a messy but finite calculation (because SO(3) is compact).</p>",
        "id": 526461741,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751308143
    },
    {
        "content": "<p>I am currently working on whipping up some <a href=\"https://github.com/jcreedcmu/rustpert/\">rust code</a> to try to do that by brute force</p>",
        "id": 526461850,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308174
    },
    {
        "content": "<p>I tried throwing it over the wall to real-closed-field solvers but they either segfaulted (QEPCAD) or ran longer than my patience (redlog)</p>",
        "id": 526462008,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308216
    },
    {
        "content": "<p>Is the two-dimensional case too trivial that I can't find any reference? I can see that the equilateral triangle is Rupert <del>while the square is not</del>.</p>",
        "id": 526462150,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1751308252
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"741486\">@Sean McLaughlin</span> iirc suggested that \"7 variables to be quantifier-eliminated and degree-6 polynomials\" is in fact decently deep into the double-exponential territory to be not surprising that it gets hard</p>",
        "id": 526462241,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308271
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"224323\">@Junyan Xu</span> why is the square not rupert in 2d? I'd reckon it is, but maybe you're thinking about it differently</p>",
        "id": 526462372,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308304
    },
    {
        "content": "<p><del>I think it boils down to a+b&gt;c=sqrt(a^2+b^2) if a,b&gt;0 (c is the side length)</del></p>",
        "id": 526462643,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1751308386
    },
    {
        "content": "<p>BTW whether a polyhedron is Rupert is decidable, but the algorithm isn't efficient enough: <a href=\"user_uploads/thumbnail/3121/pP06hILgzy-Oh-0rAnafYRkf/image.png/840x560.webp\">user_uploads/thumbnail/3121/pP06hILgzy-Oh-0rAnafYRkf/image.png/840x560.webp</a></p>\n<div class=\"message_inline_image\"><a href=\"user_uploads/thumbnail/3121/pP06hILgzy-Oh-0rAnafYRkf/image.png/840x560.webp\"><img src=\"user_uploads/thumbnail/3121/pP06hILgzy-Oh-0rAnafYRkf/image.png/840x560.webp\"></a></div>",
        "id": 526462809,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1751308435
    },
    {
        "content": "<p>I agree it's decidable, because the theory of real closed fields is decidable</p>",
        "id": 526463167,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308545
    },
    {
        "content": "<p>Oh sorry, the square is indeed Rupert</p>",
        "id": 526463221,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1751308557
    },
    {
        "content": "<p>When I say \"the square is rupert in R^2\" I mean <br>\n<a href=\"/user_uploads/3121/cK05qDr6u1qQyufaW7blNMN1/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/cK05qDr6u1qQyufaW7blNMN1/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"677x564\" src=\"/user_uploads/thumbnail/3121/cK05qDr6u1qQyufaW7blNMN1/image.png/840x560.webp\"></a></div>",
        "id": 526463231,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308561
    },
    {
        "content": "<p>There exists two SE(2) such that upon projection to R^1, the shadow of one transformed square is inside the shadow of the other</p>",
        "id": 526463356,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308595
    },
    {
        "content": "<p>I wouldn't find it unreasonable if someone thought this didn't count because, like, the square gets split into two pieces... but I imagine the triangle wouldn't be rupert either on that definition</p>",
        "id": 526463525,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308643
    },
    {
        "content": "<p>$S^0$ being disconnected is exceptional <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 526463593,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308667
    },
    {
        "content": "<p>But um... I think I might go out on a limb and guess that every convex polygon is Rupert</p>",
        "id": 526463689,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308708
    },
    {
        "content": "<p>You can't make a <a href=\"https://en.wikipedia.org/wiki/Curve_of_constant_width\">https://en.wikipedia.org/wiki/Curve_of_constant_width</a> with only finitely many sides, can you?</p>",
        "id": 526463970,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751308797
    },
    {
        "content": "<p>Yeah, it's claimed <a href=\"https://en.wikipedia.org/wiki/Curve_of_constant_width#Examples\">here on Wikipedia</a>: \"no <a href=\"https://en.wikipedia.org/wiki/Polygon\">polygon</a> can have constant width\". I think that solves it. Thanks!</p>",
        "id": 526464438,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1751308946
    },
    {
        "content": "<p>Some more recent work on computation include<br>\n<a href=\"https://arxiv.org/abs/2210.00601\">Optimizing for the Rupert property</a> (where my screenshot above is taken from; it's <a href=\"https://www.tandfonline.com/doi/full/10.1080/00029890.2023.2285200\">published</a> but I don't have access) (<a href=\"https://github.com/albfre/rupert\">GitHub repo</a>)<br>\n<a href=\"http://tom7.org/ruperts/ruperts.pdf\">Some upsetting things about shapes that we already knew</a> (found through David's <a href=\"https://www.youtube.com/watch?v=evKFok65t_E\">earlier video</a>)</p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"evKFok65t_E\" href=\"https://www.youtube.com/watch?v=evKFok65t_E\"><img src=\"https://uploads.zulipusercontent.net/9b5555dfce7332fe9cd08d129e5708f79f0e1f7e/68747470733a2f2f692e7974696d672e636f6d2f76692f65764b466f6b3635745f452f6d7164656661756c742e6a7067\"></a></div>",
        "id": 526465349,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1751309269
    },
    {
        "content": "<p>Oh yeah, I'll make sure to cite that as well, thanks!</p>",
        "id": 526465522,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751309337
    },
    {
        "content": "<p>Submitted <a href=\"https://github.com/google-deepmind/formal-conjectures/pull/284\">https://github.com/google-deepmind/formal-conjectures/pull/284</a></p>",
        "id": 526480061,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751314377
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"662452\">Jason Reed</span> <a href=\"#narrow/channel/113488-general/topic/Rupert.2Elean/near/526450883\">said</a>:</p>\n<blockquote>\n<p>I think I'm going to try to take a crack at this. <span class=\"user-mention silent\" data-user-id=\"243791\">David Renshaw</span> suggested to me we might want to rework the definition of Rupertness a little bit to not depend on the definitional equality of EuclideanSpace and Fin n -&gt; R , because <a href=\"#narrow/channel/287929-mathlib4/topic/defeq.20abuse.20in.20.60WithLp.60/near/526192974\">it seems that's going to go away eventually</a>.</p>\n</blockquote>\n<p>We should have everything in mathlib needed to make a definition in proper mathlib generality. Work in an affine space over a finite-dimensional real inner product space, rather than talking about <code>specialOrthogonalGroup</code> consider all <code>AffineIsometry</code> whose underlying linear map has positive determinant (we already have the lemma that this is equivalent to being orientation-preserving), and the projections are <code>EuclideanGeometry.orthogonalProjection</code> onto an affine subspace satisfying <code>IsCoatom</code> (which such subspace you choose obviously doesn't actually matter since there are orientation-preserving isometries mapping any coatom subspace to any other, although you might need to fill out some API to prove that).</p>",
        "id": 526506861,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751330872
    },
    {
        "content": "<p>Is it out of scope for this repository to justify that the coordinates you're using for the vertices of certain polyhedra do in fact yield the desired polyhedron as determined by its more abstract mathematical properties?</p>",
        "id": 526507041,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751331050
    },
    {
        "content": "<p>Can you give an example of how you'd define a polyhedron more abstractly?</p>",
        "id": 526507198,
        "sender_full_name": "David Renshaw",
        "timestamp": 1751331189
    },
    {
        "content": "<blockquote>\n<p>We should have everything in mathlib needed to make a definition in proper mathlib generality...</p>\n</blockquote>\n<p>Huh, I hadn't considered generalizing beyond R^3, but I think everything you're saying here seems sensible. Higher-dimensional variants <a href=\"https://www.researchgate.net/publication/361602528_Rupert_property_of_some_particular_n-simplex_and_n-octahedrons/link/62bbedee93242c74cad615c8/download?_tp=eyJjb250ZXh0Ijp7ImZpcnN0UGFnZSI6InB1YmxpY2F0aW9uIiwicGFnZSI6InB1YmxpY2F0aW9uIn19\">have been studied</a> at least. I don't know if other base inner product spaces besides R have been.</p>",
        "id": 526507653,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751331618
    },
    {
        "content": "<p>Do you think a suitably general <code>IsRupert</code> ought to be in mathlib? That would make the <code>formal-conjectures</code> PR tidier. I'm happy to investigate that a bit if so. (but your pointers as to what concerns are likely to come up are very helpful)</p>",
        "id": 526507870,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751331792
    },
    {
        "content": "<p>Maybe you need to work around the convexity refactor not having been done yet and so <code>convexHull</code> not being defined for affine spaces. Or simply define for an inner product space rather than an affine space over it and leave the affine refactoring for after the convexity refactor.</p>\n<p>(Once you're proving things for a concrete choice of polyhedron, using <code>EuclideanSpace</code> makes sense. The fact that any <code>DilationEquiv</code> between different spaces preserves this property, so that the result for \"this choice of triakis tetrahedron\" is equivalent to the one for \"a triakis tetrahedron of any scale and orientation and position in any 3-dimensional Euclidean space\", should be a routine lemma.)</p>",
        "id": 526507896,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751331817
    },
    {
        "content": "<p>I think putting the definition in mathlib makes sense, yes. After all, it will be used by both your repository and <code>formal-conjectures</code>, and <code>formal-conjectures</code> probably doesn't want to depend on lots of other repositories each with a few definitions.</p>\n<p>While I think defining the Archimedean and Catalan solids would be reasonable for mathlib as well, that seems like a larger project, since it engages the tricky question of what concept of \"polyhedron\" to define, and mathlib probably shouldn't have definitions just by giving coordinates without also proving they satisfy some characteristic property (e.g. convex, vertex-transitive and a given sequence of regular polygons at each vertex, for Archimedean polyhedra, with the Catalan solids then being derived from the Archimedean ones by pole-polar reciprocation).</p>",
        "id": 526508271,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751332109
    },
    {
        "content": "<p>The presentation in your video <span class=\"user-mention\" data-user-id=\"243791\">@David Renshaw</span> and also Tom7's paper assume that rupertness only needs you to consider a straight line path. But is it known whether this is equivalent to any path, or maybe there is some couch-problem-type solution where giving it a little wiggle in the middle of the path helps it make it through?</p>",
        "id": 526508300,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751332138
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> I also wondered this when I was first exposed to Rupert stuff (<a href=\"https://www.reddit.com/r/math/comments/s30rf2/it_has_been_conjectured_that_all_3dimensional/hsi6w4z/\">and I saw the same question asked here a few years back</a>) but I don't know if that extra generality ever helps you or if anyone's seriously studied it</p>",
        "id": 526508572,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751332327
    },
    {
        "content": "<p>On further consideration, I think you can avoid the convexity refactor issue (and write a definition that applies in affine spaces) by defining <code>IsRupert</code> as a property on sets of points that's only mathematically meaningful when those are convex, so passing the convex hull into <code>IsRupert</code> rather than passing in an indexed family of vertices and having it apply <code>convexHull</code> itself.</p>\n<p>The statement proposed for formal-conjectures is described as \"Does the Rupert property hold of every convex polyhedron with nonempty interior?\" but it looks like the actual formal statement uses \"nonempty convex hull\" not \"nonempty interior\", so I'd expect it to be boringly false for a family with a single point.</p>",
        "id": 526580884,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751367441
    },
    {
        "content": "<p>Oops, that's definitely an unintentional omission. (of \"interior\" in the PR) Thanks for catching that.</p>\n<p>About generalizing to arbitrary sets, I'm inclined to agree with you. I did introduce a non-polyhedron-specific definition of IsRupertSet in <a href=\"https://github.com/dwrensha/Rupert.lean/blob/main/Rupert/Set.lean\">https://github.com/dwrensha/Rupert.lean/blob/main/Rupert/Set.lean</a> but I think a combination of <span class=\"user-mention\" data-user-id=\"243791\">@David Renshaw</span> persuading me it was clearer and/or trying to be closer to the literature convinced me at the time that the polyhedral definition was better to highlight as the \"main\" one, and then subsequently I <a href=\"https://github.com/dwrensha/Rupert.lean/blame/main/Rupert/RelatingRupertDefs.lean\">proved that the two definitions coincided</a> under the appropriate assumptions.</p>\n<p>So I'm all for \"mathlib has a definition of IsRupert that says of a subset of an arbitrary affine space that it admits two affine isometries that appropriately project to a codimension-1 subspace, etc. etc.\" and \"formal-conjectures poses the question of whether arbitrary finite subsets of R^3 (or perhaps even R^n?) with nonempty convex hull interior satisfy that property\"</p>\n<p>I think in fact it is perfectly meaningful to ask the question of whether a nonconvex set is Rupert; although it might have less tight of a connection to the original intuition of  \"cutting a single hole in an object\", since now the resulting topology might be more complicated.</p>",
        "id": 526585014,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751368833
    },
    {
        "content": "<p>I think my plan is to start from</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">GeneralizedIsRupert</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MetricSpace</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddTorsor</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">inner_isometry</span><span class=\"w\"> </span><span class=\"n\">outer_isometry</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AffineIsometry</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AffineSubspace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCoatom</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">),</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">proj</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">EuclideanGeometry</span><span class=\"bp\">.</span><span class=\"n\">orthogonalProjection</span><span class=\"w\"> </span><span class=\"n\">Q</span>\n<span class=\"w\">    </span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">proj</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">inner_isometry</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">''</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">interior</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">proj</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">outer_isometry</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">''</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>and try to prove that this coincides with the <code>IsRupertSet</code> that we have in our little repo.</p>\n<p>Does anything jump out at you, <span class=\"user-mention\" data-user-id=\"266253\">@Joseph Myers</span>,  as not representing what you had in mind? I tried to make the typeclass assumptions on P as minimal as possible guided by what error messages came out of various things requiring them. But I'm not sure I did an optimal job considering the complexity of definitions in mathlib...</p>",
        "id": 526661430,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751393822
    },
    {
        "content": "<p>(Oh, and as an aside I don't think the motivation of the <code>closure</code> here (and also occurring <a href=\"https://github.com/dwrensha/Rupert.lean/blob/main/Rupert/Set.lean\">here</a>) was previously discussed in this thread, but it's something that appeared during <span class=\"user-mention\" data-user-id=\"243791\">@David Renshaw</span> and my conversations earlier elsewhere... to say clo X subset int Y seems like a nice purely topological way of saying \"X fits well within Y\", which accords with our intuition that both the open and closed balls should not be Rupert. For the case of polyhedra defined as the convex combination of a finite set it's moot, since they're compact by construction)</p>",
        "id": 526661866,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751394017
    },
    {
        "content": "<p>That definition says <code>P</code> is a one-dimensional space (a torsor for the reals themselves), you need to have a real inner product space <code>V</code> for which <code>P</code> is a torsor. It's also missing the positive determinant (orientation preserving) part - when discussing the open problem of whether the snub cube is Rupert, people definitely seem to expect that it can only be rotated, that you can't reflect one snub cube before trying to pass it through another.</p>",
        "id": 526670842,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751398056
    },
    {
        "content": "<p>Ah, that would certainly explain why I was failing to find an instance for R^n <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span>.</p>\n<p>As for reflection, I believe it leads to an equivalent definition whether it's allowed or not: since we're projecting down to a smaller subspace anyhow, if we could find an affine isometry f that mapped a set X to a desirable image <code>(proj ∘ f) '' X</code> but had determinant -1, we could compose with a reflection about the subspace proj is projecting onto (i.e. <code>λy. 2 proj y - y</code>) and find that <code>(λy. 2 proj y - y) ∘ f</code> is the desired orientation-preserving isometry with the same effect on <code>X</code>:<br>\n<code>(proj ∘ (λy. 2 proj y - y) ∘ f) '' X = ((λy. 2 proj y - proj y) ∘ f) '' X = (proj ∘ f) '' X</code><br>\nOr am I missing something? Or assuming more structure than I'm licensed to in this general setting? I'm afraid I might be...</p>",
        "id": 526671864,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751398584
    },
    {
        "content": "<p>I agree, the projection should come out the same whether you are allowed to reverse orientation or not</p>",
        "id": 526672052,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751398676
    },
    {
        "content": "<p>at least in R^n</p>",
        "id": 526672088,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751398698
    },
    {
        "content": "<p>Yes, that seems sound as a reason why you don't need the orientation-preserving condition. You can put a formal proof of something like that when proving equivalence to the definition you had using <code>specialOrthogonalGroup</code>.</p>",
        "id": 526672858,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751399058
    },
    {
        "content": "<p>Good, exactly, that's what I was imagining doing</p>",
        "id": 526672895,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399074
    },
    {
        "content": "<p>One thing to consider for definitions is whether to include a definition of the Nieuwland number somewhere (so the Rupert property is equivalent to that being greater than 1).</p>",
        "id": 526673264,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751399261
    },
    {
        "content": "<p>Any idea how one might state couch-problem-rupert where you are allowed to move the inner shape continuously along a path? And prove that it has the obvious relation with the normal rupert property?</p>",
        "id": 526673358,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751399306
    },
    {
        "content": "<p>Yeah I thought I was achieving something like a genuinely more general topological analogue of Nieuwland &gt; 1 by saying closure X sub interior Y</p>",
        "id": 526673379,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399310
    },
    {
        "content": "<p>but I still need a norm around for the notion of isometry</p>",
        "id": 526673402,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399322
    },
    {
        "content": "<p>So I suppose Nieuwland &gt; 1 &lt;=&gt; Rupert-as-i've-proposed-here is still a thing that could be stated and proven potentially</p>",
        "id": 526673478,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399356
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/113488-general/topic/Rupert.2Elean/near/526673358\">said</a>:</p>\n<blockquote>\n<p>Any idea how one might state couch-problem-rupert where you are allowed to move the inner shape continuously along a path? And prove that it has the obvious relation with the normal rupert property?</p>\n</blockquote>\n<p>The difficulty with this for me is I don't have a guess for how to formalize what it means to \"cut a hole through a shape\" other than the straight-line non-couch projection</p>",
        "id": 526673579,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399417
    },
    {
        "content": "<p>the hard part seems to be determining what constitutes a valid cutting. Maybe something like the left behind object has the homotopy type of a circle</p>",
        "id": 526673609,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751399436
    },
    {
        "content": "<p>but I think that doesn't work because you can go halfway in, poke a tiny hole in the back end, then come back out</p>",
        "id": 526673693,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751399477
    },
    {
        "content": "<p>Yeah that occurred to me... in that case I think you'd want to actually exhibit a full path of the \"cutting\" copy that in some sense belongs to the homotopy class of 1 \\in Z</p>",
        "id": 526673704,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399483
    },
    {
        "content": "<p>something something knot theory</p>",
        "id": 526673762,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751399507
    },
    {
        "content": "<p>I mean this definitely feels very homotopy-ish</p>",
        "id": 526673789,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399521
    },
    {
        "content": "<p>Continuous path = real-indexed sequence of isometric copies continuous with respect to Hausdorff distance, I suppose, so the problem of what counts as passing through another copy of the set is indeed the hard part.</p>",
        "id": 526673815,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751399535
    },
    {
        "content": "<p>is SO(n) known to be a a topological manifold?</p>",
        "id": 526673911,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751399585
    },
    {
        "content": "<p>surely</p>",
        "id": 526673925,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399592
    },
    {
        "content": "<p>differentiable manifold as well, no?</p>",
        "id": 526673956,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399605
    },
    {
        "content": "<p>lie groups and lie algebras and all</p>",
        "id": 526673973,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399612
    },
    {
        "content": "<p>But we might not have the topology on it in mathlib.</p>",
        "id": 526673980,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751399616
    },
    {
        "content": "<p>or maybe the space of isometries is more relevant</p>",
        "id": 526673982,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751399617
    },
    {
        "content": "<p>if you make the motion a closed loop, then I think you can say that the center traces a path which is not null-homotopic in the complement of the cutout shape</p>",
        "id": 526674382,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751399810
    },
    {
        "content": "<p>Yes, that's what I meant by 1 \\in Z</p>",
        "id": 526674426,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399828
    },
    {
        "content": "<p>the homotopy group of the complement of the circle is Z, and the path should be one full loop through it</p>",
        "id": 526674532,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399878
    },
    {
        "content": "<p>at least I'd think so? I'm not sure what it would mean if you needed, like 2 loops through or something</p>",
        "id": 526674580,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399903
    },
    {
        "content": "<p>not null-homotopic allows all of those</p>",
        "id": 526674721,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751399963
    },
    {
        "content": "<p>true</p>",
        "id": 526674732,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399969
    },
    {
        "content": "<p>maybe that's a cleaner definition then</p>",
        "id": 526674751,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751399977
    },
    {
        "content": "<p>same if the cutout shape isn't homotopically a circle</p>",
        "id": 526674785,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751399997
    },
    {
        "content": "<p>which I think could happen with some motions</p>",
        "id": 526674833,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751400017
    },
    {
        "content": "<p>What if the candidate shape for rupertness is already not contractible</p>",
        "id": 526674865,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751400032
    },
    {
        "content": "<p>Is (and I never thought I'd be saying this sentence) the donut couch-Rupert?</p>",
        "id": 526674889,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751400046
    },
    {
        "content": "<p>it's probably not hard to adjust the cube in cube motion to nick the side as it goes through and make a double torus</p>",
        "id": 526674927,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751400059
    },
    {
        "content": "<p>it could do a bit of carving work before the main path too</p>",
        "id": 526675031,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751400112
    },
    {
        "content": "<p>I believe the torus is not rupert, because no matter how you turn it always has two extremal points which are the major diameter apart. The line segment between these two points will have to coincide with the analogous line segment for the outer torus at some point in the motion</p>",
        "id": 526675643,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751400387
    },
    {
        "content": "<p>the same argument should apply to anything like an oblate spheroid which has a circle of extremal points larger than the rest of the shape</p>",
        "id": 526675830,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751400478
    },
    {
        "content": "<p>I think it's possible to carve some little tube of a hole through the cube such that the usual rotation-pair witness that the cube is rupert still works for projective-Rupertness</p>",
        "id": 526675895,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751400514
    },
    {
        "content": "<p>but is that valid for couch-Rupertness if the cutting passes through the hole? Should it be that the the homotopy type is altered appropriately to reflect one more hole being added?</p>",
        "id": 526675988,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751400565
    },
    {
        "content": "<p>in my definition it would still count</p>",
        "id": 526676076,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751400603
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"266253\">@Joseph Myers</span> , I appreciate your patience helping me with this; another question. Should I expect an instance of Q.direction.HasOrthogonalProjection to be inferred, in the following <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>-able self-contained example?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IsAffineRupertPair</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MetricSpace</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">InnerProductSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">NormedAddTorsor</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">inner</span><span class=\"w\"> </span><span class=\"n\">outer</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">inner_isometry</span><span class=\"w\"> </span><span class=\"n\">outer_isometry</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AffineIsometry</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">AffineSubspace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"bp\">.</span><span class=\"n\">direction</span><span class=\"bp\">.</span><span class=\"n\">HasOrthogonalProjection</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- should I need this?</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsCoatom</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">),</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">proj</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">EuclideanGeometry</span><span class=\"bp\">.</span><span class=\"n\">orthogonalProjection</span><span class=\"w\"> </span><span class=\"n\">Q</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">inner_shadow</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">proj</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">inner_isometry</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">''</span><span class=\"w\"> </span><span class=\"n\">inner</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">outer_shadow</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">proj</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">outer_isometry</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">''</span><span class=\"w\"> </span><span class=\"n\">outer</span>\n<span class=\"w\">    </span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"n\">inner_shadow</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">interior</span><span class=\"w\"> </span><span class=\"n\">outer_shadow</span>\n</code></pre></div>\n<p>I thought I didn't, but I get a heartbeat timeout if I remove it.</p>",
        "id": 526676268,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751400695
    },
    {
        "content": "<p>maybe a better example for what you are going for is a square hoop; this is couch-rupert by my definition and you don't even need to cut out material to do so, but it's not rupert because it's passing through an area which is not covered by the original shape</p>",
        "id": 526676278,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751400700
    },
    {
        "content": "<p>That is an interesting example. Something about it makes my intuition want to protest that it's not rupert, because there's no cutting! Clearly that's cheating :)</p>",
        "id": 526676345,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751400735
    },
    {
        "content": "<p>(although I'm just saying this in jest, I don't really have a strong commitment to one definition or other...)</p>",
        "id": 526676396,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751400763
    },
    {
        "content": "<p>I would like rupert to imply couch-rupert, but I don't know whether that needs a modification to the definition or whether it is just only true for convex bodies</p>",
        "id": 526676496,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751400804
    },
    {
        "content": "<p>Yeah, I agree rupert implies couch-rupert seems desirable. Couch-rupertness for disconnected subsets also starts straining my intuition. Is A couch-rupert with respect to B? <br>\n<a href=\"/user_uploads/3121/38mtVUdz4a34KiBxdLhYVSom/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/38mtVUdz4a34KiBxdLhYVSom/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"373x375\" src=\"/user_uploads/thumbnail/3121/38mtVUdz4a34KiBxdLhYVSom/image.png/840x560.webp\"></a></div>",
        "id": 526677223,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751401139
    },
    {
        "content": "<p>I can pass A through B leaving <em>two</em> holes...</p>",
        "id": 526677262,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751401157
    },
    {
        "content": "<p>My definition also talks about the \"center\" making a path, but what if the center isn't in shape A at all?</p>",
        "id": 526677340,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751401199
    },
    {
        "content": "<p>Yeah, that's what I was thinking of, in part.</p>",
        "id": 526677375,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751401216
    },
    {
        "content": "<p>Counting how many holes are created and controlling in what sense they're homotopically passed through seems very messy.</p>",
        "id": 526677398,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751401233
    },
    {
        "content": "<p>You get to set up the API for atoms and coatoms in affine spaces. We have no such API at all at present. (And once you've shown that a coatom has a coatom direction, you then need to show that a coatom has orthogonal projections in an inner product space. I'm not actually sure if that's true in general for cases such as infinite-dimensional spaces that aren't complete, or if we need additional conditions to ensure coatoms have orthogonal projections.)</p>",
        "id": 526677454,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751401251
    },
    {
        "content": "<p>And yet this pair is definitely projectively rupert.</p>",
        "id": 526677460,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751401254
    },
    {
        "content": "<p>I wonder if there is a sense that the whole motion is knotted inside a higher dimensional space?</p>",
        "id": 526677473,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751401261
    },
    {
        "content": "<p>We have a space of isometries, and the motion in question stays clear of the cutout shape by definition. So this is a path in the space which stays within the set of isometries that do not touch the cutout shape, and that path is not null homotopic</p>",
        "id": 526677686,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751401368
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"266253\">Joseph Myers</span> <a href=\"#narrow/channel/113488-general/topic/Rupert.2Elean/near/526677454\">said</a>:</p>\n<blockquote>\n<p>You get to set up the API for atoms and coatoms in affine spaces. ...</p>\n</blockquote>\n<p>Ok, great, that is a solid \"no, I shouldn't expect this to work yet\" answer, thanks :)<br>\nI'll try to dig in and try to understand the actual library code some more then...</p>",
        "id": 526677780,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751401423
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"266253\">@Joseph Myers</span> actually, it turns out assuming <code>[FiniteDimensional ℝ V]</code> suffices for an instance of <code>Q.direction.HasOrthogonalProjection</code> to be inferred. I presume though I haven't checked that the dominoes involved in the chain are that V's finiteness entails P's given <code>[NormedAddTorsor V P]</code>, and then <code>Q</code> as a subspace of <code>P</code> is also surely finite, and then <code>Q.direction</code> is finite because <code>Q</code> is. Hence <code>Q.direction</code> admits orthogonal projections.</p>\n<p>Assuming completeness of <code>V</code> doesn't seem to automatically transfer to the completeness of <code>Q.direction</code>. I don't know if this is because it's actually false, or merely because the appropriate instance declarations don't exist yet. Nonetheless, infinite-dimensional linear algebra is beyond the frontier of my mathematical confidence, and I'd be happy restricting attention to the finite dimensional case, if you don't think that's too big a generality penalty?</p>",
        "id": 526696369,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751412385
    },
    {
        "content": "<p>My current code is a <a href=\"https://github.com/dwrensha/Rupert.lean/pull/18\">PR against dwrensha/Rupert.lean</a>, I'm intending to work on it a bit there and at some future point try to upstream it to mathlib</p>",
        "id": 526696643,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751412649
    },
    {
        "content": "<p>I assume fleshing out the API for coatoms will still be needed for the proof of equivalence of definitions</p>",
        "id": 526697382,
        "sender_full_name": "Jason Reed",
        "timestamp": 1751413301
    },
    {
        "content": "<p>Assuming <code>FiniteDimensional</code> seems reasonable for now.</p>",
        "id": 526698582,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1751414369
    },
    {
        "content": "<p>you know, this reminds me of a very old meme</p>",
        "id": 527901932,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752071389
    },
    {
        "content": "<p>the one where everything fits in the square hole</p>",
        "id": 527902027,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752071418
    },
    {
        "content": "<p>Here's a preprint claiming to construct a non-Rupert polyhedron: <a href=\"https://arxiv.org/abs/2508.18475\">https://arxiv.org/abs/2508.18475</a></p>",
        "id": 536349643,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1756272760
    },
    {
        "content": "<p>Oh! Very interesting, I'll have to check it out.</p>",
        "id": 536382350,
        "sender_full_name": "Jason Reed",
        "timestamp": 1756287369
    },
    {
        "content": "<p>So far from a quick skim it looks like it makes sense to me, and follows a very similar approach to what my collaborators and I were taking. Seems like they had some cleverness in choosing a good polyhedron that let them cut down from 7 dimensions of search space to 5. Their \"rigorous[] [confirmation] that [their theorems] indeed apply for all 18 million regions and that indeed the union of the regions covers the initial search space\" is a matter of running some sagemath code, though, so that admits the possibility of improvement.</p>",
        "id": 536390314,
        "sender_full_name": "Jason Reed",
        "timestamp": 1756290495
    },
    {
        "content": "<p>The repository  <a href=\"https://www.github.com/Jakob256/Rupert\">https://www.github.com/Jakob256/Rupert</a> said to contain the sage code is not accessible; perhaps they're waiting for publication (of the paper) to publicize it</p>",
        "id": 536390970,
        "sender_full_name": "Jason Reed",
        "timestamp": 1756290760
    },
    {
        "content": "<p>The repo appears to be public now.  <a href=\"https://www.github.com/Jakob256/Rupert\">https://www.github.com/Jakob256/Rupert</a></p>",
        "id": 536477526,
        "sender_full_name": "David Renshaw",
        "timestamp": 1756319732
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"662452\">@Jason Reed</span> and I have begun working on a formalization of the Noperthedron proof: <a href=\"https://jcreedcmu.github.io/Noperthedron/\">https://jcreedcmu.github.io/Noperthedron/</a></p>\n<p>We've already put in place a basic skeleton of the argument, as can be seen in our <a href=\"https://jcreedcmu.github.io/Noperthedron/blueprint/dep_graph_document.html\">dependency graph</a>. The <code>exists_solution_table</code> node corresponds to the big computational verification of 18 million regions. We think we can do that in Lean (possibly requiring the native compiler). Our first target, however, will be to formalize the rest of the math, of which there is a fair amount!</p>\n<p>We have plenty of proofs to write, so we welcome any help. There are some juicy sorries about trig function approximations, partial derivatives, and inequalities involving norms and inner products in Euclidean spaces.</p>",
        "id": 558894921,
        "sender_full_name": "David Renshaw",
        "timestamp": 1763904860
    },
    {
        "content": "<p>We have been made aware that <span class=\"user-mention\" data-user-id=\"244748\">@ohhaimark</span> has been making a parallel effort on the same problem: <a href=\"https://github.com/badly-drawn-wizards/noperthedron\">https://github.com/badly-drawn-wizards/noperthedron</a> .<br>\nFortunately, it looks like there has not been a lot of duplicated work between the two repositories.</p>",
        "id": 558915345,
        "sender_full_name": "David Renshaw",
        "timestamp": 1763924616
    },
    {
        "content": "<p>Would be great to combine results!</p>",
        "id": 558915404,
        "sender_full_name": "Jason Reed",
        "timestamp": 1763924653
    },
    {
        "content": "<p>Heyo. I'm looking at the blueprint. The last point I left my repo there was hairy dependency on Schur decomposition . It is not yet in Mathlib, but was in a <a href=\"#narrow/channel/287929-mathlib4/topic/Contribute.20Schur.20decomposition/with/532385359\">PR limbo</a>. Namely lemma 12 of the paper invokes a matrix form of Euler's rotation theorem. Following <a href=\"https://en.wikipedia.org/wiki/Euler%27s_rotation_theorem#Equivalence_of_an_orthogonal_matrix_to_a_rotation_matrix\">Wikipedia's</a> approach would require use of Schur decomposition. I am no expert, so maybe there is an easy sidestep of the whole thing.</p>",
        "id": 562220506,
        "sender_full_name": "ohhaimark",
        "timestamp": 1765001473
    },
    {
        "content": "<p>Interesting! Fwiw, I'd be comfortable leaving that dependency as a sorry for now. Not seeing a shortcut to \"every rotation matrix is conjugate to an x-axis rotation\" yet, but maybe there is one...</p>",
        "id": 562240298,
        "sender_full_name": "Jason Reed",
        "timestamp": 1765025506
    },
    {
        "content": "<p>I did have <a href=\"https://github.com/dwrensha/Rupert.lean/blame/main/Rupert/Quaternion.lean#L148-L154\">a definition in an older repo</a> that could locate the rotation that took a given vector to another, (i.e. the second step of \"(1) every rotation is a rotation about an axis, (2) rotate that axis to align with the x axis\") but with quaternionic rotations, and... I see also the proof that it worked was not completed.</p>",
        "id": 562241850,
        "sender_full_name": "Jason Reed",
        "timestamp": 1765027288
    },
    {
        "content": "<p>A quick update:</p>\n<ol>\n<li>We have finished importing <span class=\"user-mention\" data-user-id=\"244748\">@ohhaimark</span>'s progress into our repo. Much of it has proved to be very helpful.</li>\n<li>As of last night, we have formalized through the end of Section 3 of the paper.</li>\n</ol>",
        "id": 566157503,
        "sender_full_name": "David Renshaw",
        "timestamp": 1767454398
    }
]