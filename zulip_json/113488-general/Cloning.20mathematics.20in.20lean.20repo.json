[
    {
        "content": "<p>I'm trying to clone the <code>https://github.com/leanprover-community/mathematics_in_lean</code> repository from github, and I've been consistently running into some git errors I've never seen before:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Cloning</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">mathematics_in_lean'</span><span class=\"bp\">...</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Enumerating</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2396</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Counting</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">110</span><span class=\"bp\">/</span><span class=\"mi\">110</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Compressing</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">53</span><span class=\"bp\">/</span><span class=\"mi\">53</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">RPC</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"mi\">92</span><span class=\"w\"> </span><span class=\"n\">HTTP</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">stream</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">closed</span><span class=\"w\"> </span><span class=\"n\">cleanly</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CANCEL</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">err</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">335</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">body</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">still</span><span class=\"w\"> </span><span class=\"n\">expected</span>\n<span class=\"n\">fetch</span><span class=\"bp\">-</span><span class=\"n\">pack</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unexpected</span><span class=\"w\"> </span><span class=\"n\">disconnect</span><span class=\"w\"> </span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">reading</span><span class=\"w\"> </span><span class=\"n\">sideband</span><span class=\"w\"> </span><span class=\"n\">packet</span>\n<span class=\"n\">fatal</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">early</span><span class=\"w\"> </span><span class=\"n\">EOF</span>\n<span class=\"n\">fatal</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"bp\">-</span><span class=\"n\">pack</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"bp\">-</span><span class=\"n\">pack</span><span class=\"w\"> </span><span class=\"n\">output</span>\n</code></pre></div>\n<p>I'm not sure if this is an issue with github or this particular repo or my own network. Is anyone else running into something like this?</p>",
        "id": 491133620,
        "sender_full_name": "Greg Shuflin",
        "timestamp": 1735434203
    },
    {
        "content": "<p>Does cloning over SSH work? <code>git clone git@github.com:leanprover-community/mathematics_in_lean.git</code> if not, try <code>git clone --filter=blob:none git@github.com:leanprover-community/mathematics_in_lean.git</code> and see if that works.</p>",
        "id": 491134259,
        "sender_full_name": "Julian Berman",
        "timestamp": 1735434895
    },
    {
        "content": "<p>I am experiencing a similar error, not just with lean-related projects - <code>git clone</code> is doing this to me across the board. Cloning over ssh seems to work in other contexts where cloning over https does not. Is there some way to configure lake to use ssh for its cloning needs?</p>",
        "id": 494681480,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1737322466
    },
    {
        "content": "<p>I should say taht I've seen this http-related error with multiple lean projects cloned from github (or more accurately attempted to be cloned from github, the clone doesn't succeed). I dont' think I\"ve seen it with other github projects cloned over https</p>",
        "id": 494682074,
        "sender_full_name": "Greg Shuflin",
        "timestamp": 1737322858
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"785542\">Greg Shuflin</span> <a href=\"#narrow/channel/113488-general/topic/Cloning.20mathematics.20in.20lean.20repo/near/494682074\">said</a>:</p>\n<blockquote>\n<p>I should say taht I've seen this http-related error with multiple lean projects cloned from github (or more accurately attempted to be cloned from github, the clone doesn't succeed). I dont' think I\"ve seen it with other github projects cloned over https</p>\n</blockquote>\n<p>Have you experienced the error when trying to clone large repositories not associated with lean? (Sorry, to be more clear, have you tried cloning any repositories larger or as large as mathlib over http or ssh and avoided the error?)</p>",
        "id": 494931335,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1737415705
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"282271\">Bolton Bailey</span> <a href=\"#narrow/channel/113488-general/topic/Cloning.20mathematics.20in.20lean.20repo/near/494931335\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"785542\">Greg Shuflin</span> <a href=\"#narrow/channel/113488-general/topic/Cloning.20mathematics.20in.20lean.20repo/near/494682074\">said</a>:</p>\n<blockquote>\n<p>I should say taht I've seen this http-related error with multiple lean projects cloned from github (or more accurately attempted to be cloned from github, the clone doesn't succeed). I dont' think I\"ve seen it with other github projects cloned over https</p>\n</blockquote>\n<p>Have you experienced the error when trying to clone large repositories not associated with lean? (Sorry, to be more clear, have you tried cloning any repositories larger or as large as mathlib over http or ssh and avoided the error?)</p>\n</blockquote>\n<p>I don't think so - I actually went and tested cloning from Github some other non-Lean-related repos I work with, that were at least not trivally-sized</p>",
        "id": 494933301,
        "sender_full_name": "Greg Shuflin",
        "timestamp": 1737416641
    }
]