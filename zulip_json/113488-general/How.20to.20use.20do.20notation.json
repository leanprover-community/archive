[
    {
        "content": "<p>I'm trying to get do notation to work, but even a simple example like this one fails for me:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">StateM</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">T</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">inc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">((),</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">program</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">State</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">inc</span>\n<span class=\"w\">  </span><span class=\"n\">get</span>\n</code></pre></div>\n<p>with this error message for the <code>inc</code> call. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">synthesize</span>\n<span class=\"n\">Bind</span><span class=\"w\"> </span><span class=\"n\">State</span>\n<span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n</code></pre></div>\n<p>What am I doing wrong?</p>",
        "id": 528929275,
        "sender_full_name": "Konstantin Weitz",
        "timestamp": 1752608114
    },
    {
        "content": "<p>make <code>def State</code> into <code>abbrev State</code></p>",
        "id": 528929421,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752608194
    },
    {
        "content": "<p>this will allow typeclass to see through its definition</p>",
        "id": 528929457,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752608208
    },
    {
        "content": "<p>Wonderful, that worked, thanks!</p>",
        "id": 528930308,
        "sender_full_name": "Konstantin Weitz",
        "timestamp": 1752608543
    }
]