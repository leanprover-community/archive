[
    {
        "content": "<p><a href=\"https://github.com/avigad/mathematics_in_lean_source/pull/217\">https://github.com/avigad/mathematics_in_lean_source/pull/217</a></p>",
        "id": 451850522,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721160464
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 451851061,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721160646
    },
    {
        "content": "<p>What is happening with <code>μ.ae</code> vs <code>ae μ</code>?</p>",
        "id": 451851137,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721160671
    },
    {
        "content": "<p>Not sure. Looks like a PR from Yury ~2 months ago, that didn't install a deprecation.</p>",
        "id": 451851675,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721160841
    },
    {
        "content": "<p>I see, this is generalizing the input of ae. I guess this isn’t a bit issue since it appears only in the context of saying there is a special notation for <code>Filter.eventually</code> in this case.</p>",
        "id": 451853374,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721161328
    },
    {
        "content": "<p>The <code>Nat.card</code> mess is much worse.</p>",
        "id": 451853583,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721161430
    },
    {
        "content": "<p>6 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/stream/113488-general/topic/Cannot.20get.20Lean4.20and.20Mathlib.20working.20in.20Emacs\">#general &gt; Cannot get Lean4 and Mathlib working in Emacs</a> by <span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span>.</p>",
        "id": 451854529,
        "sender_full_name": "Notification Bot",
        "timestamp": 1721161673
    },
    {
        "content": "<p>Do we have a better story to tell than: Mathlib randomly uses <code>Fintype.card</code> and <code>Nat.card</code>?</p>",
        "id": 451854676,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721161701
    },
    {
        "content": "<p>I had the story that Mathlib uses <code>Fintype.card</code> except when it can't, but now I don't know <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span></p>",
        "id": 451854916,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721161751
    },
    {
        "content": "<p>This is really a nightmare. Half of the lemmas use one and half use the other. And I am talking only about lemmas about cardinals of subgroups.</p>",
        "id": 451856574,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721162176
    },
    {
        "content": "<p>If I understand correctly, there's a pending migration from <code>Fintype.card</code> to <code>Nat.card</code>; <a href=\"https://github.com/leanprover-community/mathlib4/pull/14789\">#14789</a> is the most recent PR. CC <span class=\"user-mention\" data-user-id=\"253861\">@Thomas Browning</span></p>",
        "id": 451863630,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1721164038
    },
    {
        "content": "<p>At least for groups, <code>Nat.card</code> is definitely preferable. Most theorems in group theory about cardinalities are purely multiplicative statements (e.g., <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">∣</mo><mi>H</mi><mo stretchy=\"false\">∣</mo><mo>⋅</mo><mo stretchy=\"false\">∣</mo><mi>G</mi><mi mathvariant=\"normal\">/</mi><mi>H</mi><mo stretchy=\"false\">∣</mo><mo>=</mo><mo stretchy=\"false\">∣</mo><mi>G</mi><mo stretchy=\"false\">∣</mo></mrow><annotation encoding=\"application/x-tex\">\\lvert H\\rvert\\cdot\\lvert G/H\\rvert=\\lvert G\\rvert</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">∣</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">∣</span><span class=\"mord mathnormal\">G</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mclose\">∣</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">∣</span><span class=\"mord mathnormal\">G</span><span class=\"mclose\">∣</span></span></span></span>) so they generalize to infinite groups (e.g., <a href=\"https://github.com/leanprover-community/mathlib4/pull/13431\">#13431</a>). This also connects nicely with orders of elements, where the kernel of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mo>→</mo><mo stretchy=\"false\">⟨</mo><mi>g</mi><mo stretchy=\"false\">⟩</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Z}\\to\\langle g\\rangle</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">⟨</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mclose\">⟩</span></span></span></span> has  kernel generated by <code>orderOf g</code>, even when <code>g</code> has infinite order.</p>\n<p>The group theory library has been a messy mix of both, but I've been slowly switching things over (sometimes with impressive results: <a href=\"https://github.com/leanprover-community/mathlib4/pull/13637\">#13637</a>!). Most of the churn should be over. I think the only low-level file left is <code>OrderOfElement.lean</code>.</p>",
        "id": 451871310,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1721166676
    },
    {
        "content": "<p>Unfortunately these refactors are hard to do atomically, and this MIL bump is badly timed. I think merging the current state but revisiting in a few weeks (or when Thomas says it's a good time!) will eventually reach a good result.</p>",
        "id": 451891280,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721172958
    },
    {
        "content": "<p>It’s already great to learn that things are moving and there is hope.</p>",
        "id": 451965702,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721200365
    },
    {
        "content": "<p>Do we have a <code>Nat.card</code> version of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fintype.card_eq_one_iff#doc\">docs#Fintype.card_eq_one_iff</a> ?</p>",
        "id": 451970975,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721201427
    },
    {
        "content": "<p>Same for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fintype.bijective_iff_injective_and_card#doc\">docs#Fintype.bijective_iff_injective_and_card</a></p>",
        "id": 451972420,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721201725
    },
    {
        "content": "<p>Not as single lemmas, but you can potentially use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.ncard_univ#doc\">docs#Set.ncard_univ</a> and the <code>ncard</code> API to help with things like that.</p>",
        "id": 452040056,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1721216151
    },
    {
        "content": "<p>In the mean time I opened <del>#107568</del> <a href=\"https://github.com/leanprover-community/mathlib4/pull/14825\">#14825</a></p>",
        "id": 452040891,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721216345
    },
    {
        "content": "<p>Wrong PR link there : <a href=\"https://github.com/leanprover-community/mathlib4/pull/14825\">#14825</a></p>",
        "id": 452041462,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1721216499
    },
    {
        "content": "<p>Thanks. I wonder where I took the wrong number…</p>",
        "id": 452048731,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721217682
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"329425\">@Peter Nelson</span> I updated the PR with the refinement you wanted.</p>",
        "id": 452054930,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721218690
    },
    {
        "content": "<p>Note the above PR was merged by Kim so I have been able to bump Mathlib in MIL to use those new lemmas. So there is no longer any use of <code>Fintype.card</code> in that MIL file.</p>",
        "id": 452115352,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721231791
    }
]