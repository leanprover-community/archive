[
    {
        "content": "<p>I'm very new to Lean but very old to computers. I like loose coupling [7] between my computer tools, especially to my editor. I'm happy with stable standard LSP [8], but dislike the tight editor-to-Lean coupling via non-standard LSP extensions.  I lament the possibility that one must choose from a tiny set of editors to enjoy the InfoView benefits of the VS Code extension.</p>\n<p>Are there any documents or pointers that folks can share on how to set up an \"editor-decoupled file-watching proof-state-outputting tool\"?</p>\n<p>I have found related Zulip topics [10] and [11] (thx <span class=\"user-mention\" data-user-id=\"321696\">@Julian Berman</span>) but those aren't about file-watching tools.</p>\n<p>By \"file-watching\" I mean a tool that watches for changes to source files (and then outputs useful updated information based on those source files). The output could be terminal output or a local web page.  Here are some examples of such \"editor-decoupled file-watching tools\" (from non-Lean contexts):</p>\n<ul>\n<li>Quarto [1] \"Use your favorite tools including ... any text editor.\"</li>\n<li>Vite [2] \"Instantly reflect changes as you save, no matter how big your app is.\"</li>\n<li>Vitest [3] \"Smart &amp; instant watch mode\"</li>\n<li>live-server [4]</li>\n<li>nodemon [5] \"reload, automatically\"</li>\n<li>entr [6] \"Run arbitrary commands when files change\"</li>\n</ul>\n<p>Note how Vite and live-server work well with web browser developer tools [9] with zero coupling to particular editors. I suspect that web browser developer tools provide essential information for HTML/CSS/JS/DOM development that exceeds, in complexity, what InfoView provides for a Lean proof (in two completely different contexts, obviously).</p>\n<p>File-watching tools are \"interactive\" with source files and the UI of a file-watching tool, rather than the UI of an editor.</p>\n<p>Please note, I do not question the value of an IDE approach for most users, especially new users.</p>\n<p>Thank you,<br>\n  Castedo</p>\n<p>PS: I have hooked up standard LSP features for Lean into Vim 9: <a href=\"https://castedo.gitlab.io/vim9-lean\">https://castedo.gitlab.io/vim9-lean</a></p>\n<p>[7] <a href=\"https://en.wikipedia.org/wiki/Loose_coupling\">https://en.wikipedia.org/wiki/Loose_coupling</a><br>\n[8] <a href=\"https://en.wikipedia.org/wiki/Language_Server_Protocol\">https://en.wikipedia.org/wiki/Language_Server_Protocol</a><br>\n[10] <a href=\"#narrow/channel/113488-general/topic/InfoView.20in.20a.20Web.20Browser.3F/with/539918689\">https://leanprover.zulipchat.com/#narrow/channel/113488-general/topic/InfoView.20in.20a.20Web.20Browser.3F/with/539918689</a><br>\n[11] <a href=\"#narrow/channel/113488-general/topic/Lean.20.2B.20Zed.20integration/with/505673863\">https://leanprover.zulipchat.com/#narrow/channel/113488-general/topic/Lean.20.2B.20Zed.20integration/with/505673863</a><br>\n[1] <a href=\"https://quarto.org/docs/get-started/hello/text-editor.html\">https://quarto.org/docs/get-started/hello/text-editor.html</a><br>\n[2] <a href=\"https://vite.dev/\">https://vite.dev/</a><br>\n[3] <a href=\"https://vitest.dev/\">https://vitest.dev/</a><br>\n[4] <a href=\"https://www.npmjs.com/package/live-server\">https://www.npmjs.com/package/live-server</a><br>\n[5] <a href=\"https://nodemon.io/\">https://nodemon.io/</a><br>\n[6] <a href=\"https://eradman.com/entrproject/\">https://eradman.com/entrproject/</a><br>\n[9] <a href=\"https://developer.chrome.com/docs/devtools/overview\">https://developer.chrome.com/docs/devtools/overview</a></p>",
        "id": 569574219,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769110622
    },
    {
        "content": "<p>Welcome! :) I’m unfamiliar with these tools, but to pin things down a bit, let me ask: do any of them have any access to the editor state? (My limited understanding is no; that you’re asking about watching only the file.) If not, then without access to the cursor position (and only access to the file), how do you envision choosing which proof state to display? Perhaps there is a way, but just to clarify what you’re looking for. :)</p>",
        "id": 569575441,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1769111117
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"548935\">Thomas Murrills</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569575441\">said</a>:</p>\n<blockquote>\n<p>do any of them have any access to the editor state?</p>\n</blockquote>\n<p>No, no editor state. However, some of these file-watching tools parse source files into rich in-memory representations (e.g. of the HTML Document Object Model). Then the non-editor tool can have persistent state about what part of the output is of interest.</p>\n<blockquote>\n<p>how do you envision choosing which proof state to display?</p>\n</blockquote>\n<p>By whatever means is loosely coupled from the editor. <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>\n<p>Some quick ideas: Maybe the name of a theorem as a CLI parameter. Maybe the source code is reprinted entirely in a local web page and the user selects a line and the tool keeps track of line. Maybe the user can insert '#foobar' in the source and that triggers that part of the document to get lots of proof state printed. I'm new to Lean proofs, so I'm not sure.</p>",
        "id": 569578389,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769112142
    },
    {
        "content": "<p>How would you make this work with lean’s incredibly flexible syntax system?</p>",
        "id": 569595564,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1769118895
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569595564\">said</a>:</p>\n<blockquote>\n<p>How would you make this work with lean’s incredibly flexible syntax system?</p>\n</blockquote>\n<p>With a setup that is built on top of Lean software that works with Lean's incredibly flexible syntax system.</p>",
        "id": 569599084,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769120423
    },
    {
        "content": "<p>But that's essentially what lean elaborator does and the LSP lets you access</p>",
        "id": 569602805,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1769122138
    },
    {
        "content": "<p>I interpret the request as asking for a <code>lake exe ...</code> that opens something like the infoview (plus ProofWidgets?) in a browser rather than using vscode-lean4. AFAICT the only issue is the cursor location. Perhaps something like Verso's output with clickable tiny ellipses between every tactic is the answer?</p>",
        "id": 569618802,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769131450
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569602805\">said</a>:</p>\n<blockquote>\n<p>But that's essentially what lean elaborator does and the LSP lets you access</p>\n</blockquote>\n<p>I see no \"But\". Seems fine to me for a non-editting file-watching proof-state-outputting tool to call LSP. I am assuming we're talking about calling a Lean LSP server process of <code>lake serve</code> or <code>lean --server</code>).</p>\n<p>I see that VSCodium automatically detects file changes and reloads source files. So as a strange extreme case, the \"non-editting\" tool can be VSCodium with the Lean extension merely opening a folder, not being used as an editor, only being used to see InfoView, and then the odd VS-hating user can use an independent editor that only supports plain standard LSP. The user changes files in their fav editor and VSCodium (not being used as an editor) automatically updates the InfoView. This is obviously is a bizarre work flow but it is illustrative.</p>\n<p>So we could view a more ideal tool as the above bizarre solution with VSCode ripped out and only keeping the file-watching, LSP calling, and InfoView displaying functionality. I assume the Lean LSP server does not watch for file changes.</p>\n<p>With a little bit more work I imagine the LSP server process can open a UNIX domain socket at a standard file path so it can be shared by separate editor and non-editor tool processes.</p>",
        "id": 569618997,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769131598
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569618802\">said</a>:</p>\n<blockquote>\n<p>I interpret the request as asking for a <code>lake exe ...</code> that opens something like the infoview (plus ProofWidgets?) in a browser rather than using vscode-lean4. AFAICT the only issue is the cursor location. Perhaps something like Verso's output with clickable tiny ellipses between every tactic is the answer?</p>\n</blockquote>\n<p>But given that the point is avoiding coupling, I guess that as long as this is technically easy to achieve (e.g. if the existing LSP accepts requests that move the cursor, plus can provide the current HTML/CSS/JS that should be displayed in the infoview on request) then that's already not coupled and satisfies the request</p>",
        "id": 569619023,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769131616
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569619023\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>asking for a <code>lake exe</code></p>\n</blockquote>\n</blockquote>\n<p>To be \"file-interactive\" the tool needs to be able to watch/monitor file paths and update ouput when files change. A quick look at <a href=\"https://lean-lang.org/doc/reference/latest/IO/Files___-File-Handles___-and-Streams/\">https://lean-lang.org/doc/reference/latest/IO/Files___-File-Handles___-and-Streams/</a> makes me think Lean IO does not support watching/monitoring files or that the Lean language would not be the right programming lanuage for the top-level process. But I'm not sure.</p>",
        "id": 569622052,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769133697
    },
    {
        "content": "<p>Just because its not in the standard library doesn't mean its impossible. If you only care about linux you could for example just bind inotify and do your thing.</p>",
        "id": 569651048,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1769153680
    },
    {
        "content": "<p>This reminds me of some discussions about getting the InfoView to work with emacs, e.g. <a href=\"#narrow/channel/270676-lean4/topic/need.20help.20setting.20up.20lean4-infoview/with/519195291\">here</a> - I never tried these things out but one of them seemed to run the infoview in the browser, maybe the methods used for that could help you too?</p>",
        "id": 569858148,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1769253870
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422703\">Malvin Gattinger</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569858148\">said</a>:</p>\n<blockquote>\n<p>run the infoview in the browser, maybe the methods used for that could help you too?</p>\n</blockquote>\n<p>Maybe. Assuming a non-editor file-watching tool does not already exist, one path I <em>might</em> go down is using those methods you point out: building something in TypeScript on top of <a href=\"https://github.com/leanprover/vscode-lean4/tree/master/lean4-infoview\">lean4-info</a>.</p>\n<p>That said, my inclination, currently, is to go down a different path of building a minimalistic tool in Lean with as few extra dependencies as possible (apart from what Lean already requires, so no TypeScript/React/Node.js/etc...).</p>\n<p>At the moment I'm focusing on learning more Lean, both at programming language and theorem prover, so I have a better appreciation and am less clueless about what is so valuable about InfoView. I also need to learn more about the LSP features in Lean at a low-level.</p>\n<p>I am imagining a tool, built in Lean, that runs in parallel as a separate process with only very loose-coupling to an editor, merely sharing access to a file system access and a process running the Lean LSP server.</p>",
        "id": 569863876,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769258749
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"992537\">Castedo Ellerman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569863876\">said</a>:</p>\n<blockquote>\n<p>with as few extra dependencies as possible (apart from what Lean already requires, so no TypeScript/React/Node.js/etc...)</p>\n</blockquote>\n<p>So you don't view <a href=\"https://lean-lang.org/examples/1900-1-1-widgets/\">wid</a><a href=\"https://github.com/leanprover/lean4/blob/3de1cc54c537d816c7fc7f7bb930487b770f4a10/doc/examples/widgets.lean#L22-L24\">gets</a> as part of Lean? Without React I think you won't get the <a href=\"https://github.com/leanprover/lean4/blob/3de1cc54c537d816c7fc7f7bb930487b770f4a10/src/Lean/Meta/Hint.lean#L62-L64\">\"Try this\"</a> feature. I assume the neovim/emacs extensions have some workaround to support this, but surely this is a part of Lean itself.</p>",
        "id": 569884115,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769271302
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569884115\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"992537\">Castedo Ellerman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569863876\">said</a>:</p>\n<blockquote>\n<p>with as few extra dependencies as possible (apart from what Lean already requires, so no TypeScript/React/Node.js/etc...)</p>\n</blockquote>\n<p>So you don't view <a href=\"https://lean-lang.org/examples/1900-1-1-widgets/\">wid</a><a href=\"https://github.com/leanprover/lean4/blob/3de1cc54c537d816c7fc7f7bb930487b770f4a10/doc/examples/widgets.lean#L22-L24\">gets</a> as part of Lean?</p>\n</blockquote>\n<p>No. But I'm happy to say \"_____ Lean\" if there is some commonly understood adjective for the Lean software that get installed by:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">elan</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">lang</span><span class=\"bp\">.</span><span class=\"n\">org</span><span class=\"bp\">/</span><span class=\"n\">elan</span><span class=\"bp\">-</span><span class=\"n\">init</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">sSf</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">sh</span>\n</code></pre></div>\n<blockquote>\n<p>Without React I think you won't get the <a href=\"https://github.com/leanprover/lean4/blob/3de1cc54c537d816c7fc7f7bb930487b770f4a10/src/Lean/Meta/Hint.lean#L62-L64\">\"Try this\"</a> feature. I assume the neovim/emacs extensions have some workaround to support this, but surely this is a part of Lean itself.</p>\n</blockquote>\n<p>I'm not familiar with Widgets yet. I don't know what dependencies need to be installed to make these React-based Widgets work in a standard modern web brower.</p>\n<p>In my mind there is very much a difference between \"a Lean\" installed by <code>elan-init.sh</code> and \"a Lean\" that requires the dependencies of a React app.</p>",
        "id": 569886341,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769272987
    },
    {
        "content": "<p>How quickly do you want to find out what the results of <a href=\"https://github.com/search?q=repo%3Aleanprover%2Flean4%20react&amp;type=code\">searching for react</a> give you in the core Lean repository ;)?</p>",
        "id": 569886554,
        "sender_full_name": "Julian Berman",
        "timestamp": 1769273156
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"992537\">Castedo Ellerman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569886341\">said</a>:</p>\n<blockquote>\n<p>In my mind there is very much a difference between \"a Lean\" installed by <code>elan-init.sh</code> and \"a Lean\" that requires the dependencies of a React app.</p>\n</blockquote>\n<p>It sounds like this was disproven</p>",
        "id": 569891707,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769277729
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569886554\">said</a>:</p>\n<blockquote>\n<p>How quickly do you want to find out what the results of <a href=\"https://github.com/search?q=repo%3Aleanprover%2Flean4%20react&amp;type=code\">searching for react</a> give you in the core Lean repository ;)?</p>\n</blockquote>\n<p>The point of your retorical question is unclear to me. Correct, there are references to React in the core Lean repository, yet \"Lean\" ≠ \"<a href=\"https://github.com/leanprover/lean4\">https://github.com/leanprover/lean4</a>\".</p>\n<p>Just to make sure we're all on the same page, the line</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">elan</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">lang</span><span class=\"bp\">.</span><span class=\"n\">org</span><span class=\"bp\">/</span><span class=\"n\">elan</span><span class=\"bp\">-</span><span class=\"n\">init</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">sSf</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">sh</span>\n</code></pre></div>\n<p>is from <a href=\"https://lean-lang.org/install/manual/\">the Lean manual installation page</a>. If there is some phrase of \"_____ Lean\" for that which is installed by <code>elan-init.sh</code>, I'm happy to use it.</p>\n<p>In the absense of such a phrase, it make sense to me, for example, to say that the <a href=\"https://github.com/leanprover/lean-action\">Lean GitHub Action</a> \"installs and uses Lean\" even though it omits software required to enable React functionality.</p>",
        "id": 569891742,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769277756
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569891707\">said</a>:</p>\n<blockquote>\n<p>It sounds like this was disproven</p>\n</blockquote>\n<p>Incorrect.</p>",
        "id": 569891943,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769277877
    },
    {
        "content": "<p>We all agree there is functionality in the core Lean repository which depends on React. It should also be clear to all that <code>elan-init.sh</code> and the Lean GitHub Action does not install software that includes the requirements of a React app. In my mind, these are two examples of \"Lean\" that are very much different. I'm honestly confused what <span class=\"user-mention\" data-user-id=\"933054\">@Snir Broshi</span> and <span class=\"user-mention\" data-user-id=\"321696\">@Julian Berman</span> are trying to claim.</p>",
        "id": 569892396,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769278229
    },
    {
        "content": "<p>I'm not sure a semantic discussion is very interesting -- but to clarify, I was making sure you were aware that Lean, which indeed is <a href=\"https://github.com/leanprover/lean4\">https://github.com/leanprover/lean4</a> (it's what's generally installed via elan, its version manager), has a dependency in its core repository on React when it comes to widgets, which are important language features. I haven't really made a claim personally -- I don't think a filesystem-event-based tool is very promising, or at least I don't know what one would want out of one that isn't either <a href=\"https://www.npmjs.com/package/@leanprover/infoview\">https://www.npmjs.com/package/@leanprover/infoview</a> or <a href=\"https://github.com/leanprover-community/repl\">https://github.com/leanprover-community/repl</a> depending on how I'd interpret your requests above, but as I've said elsewhere, if you feel like building a tool that works precisely a way you have in mind, I'm certainly not one to tell you not to.</p>",
        "id": 569892597,
        "sender_full_name": "Julian Berman",
        "timestamp": 1769278400
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569892597\">said</a>:</p>\n<blockquote>\n<p>Lean, which indeed is <a href=\"https://github.com/leanprover/lean4\">https://github.com/leanprover/lean4</a> (it's what's generally installed via elan, its version manager), has a dependency in its core repository on React when it comes to widgets, which are important language features.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"321696\">@Julian Berman</span>  I'm a bit confused by this statement. In <a href=\"https://gitlab.com/ellerman/nest/ped\">my containerized interactive shell environment</a> I have Lean installed via <code>elan</code>. And then I have installed neovim and git cloned <code>github.com/Julian/lean.nvim</code> (and  'nvim-lua/plenary.nvim').</p>\n<p>I have not installed any software that supports JavaScript doing <code>import * as React from 'react'</code>.</p>\n<p>The <code>lean.nvim</code> README says it has</p>\n<div class=\"codehilite\" data-code-language=\"Markdown\"><pre><span></span><code> infoview which can show ... interactive widget support (for most widgets renderable as text)\n</code></pre></div>\n<p>So <code>lean.nvim</code> is showing widgets without React, correct? so React is not a dependency for most widgets renderable as text, correct?</p>",
        "id": 569901180,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769286142
    },
    {
        "content": "<p>Perhaps an analogy: imagine you're writing a web browser. A user using your thing can visit a web site, and the code of that website tells your browser \"execute this JS and render this CSS\". If you write a browser that doesn't do those things, of course you'll do nothing with the thing the site is asking to make happen.</p>\n<p>Lean (including core parts of it, with no third party dependency involved) includes pieces which tell your editing environment \"run this react code\" during certain interactions. Concretely: some RPC responses contain bits of JS you are \"supposed to\" execute with certain dependencies installed.</p>\n<p>And yes lean.nvim does not do so (it does not embed a JS engine, though who knows, some day it may optional support doing so to get full support). Instead in my analogy it does the equivalent of if your home grown web browser tried to introspect the JavaScript that is supposed to execute and when it thinks it knows what's supposed to happen it invokes an internal reimplementation of what that JS would do to the DOM.</p>\n<p>Again to me it's not very interesting to debate whether one should call an editor environment that doesn't support feature X of Lean still \"Lean\", but I did feel like +1ing Snir's point that widgets exist and make sure to mention that a large majority of Lean's current user base use and rely on them.</p>",
        "id": 569905157,
        "sender_full_name": "Julian Berman",
        "timestamp": 1769290807
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569905157\">said</a>:</p>\n<blockquote>\n<p>Concretely: some RPC responses contain bits of JS you are \"supposed to\" execute with certain dependencies installed.</p>\n</blockquote>\n<p>Wow! That is unexpected. I had no idea. Good to know, thanks!</p>\n<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569905157\">said</a>:</p>\n<blockquote>\n<p>Snir's point that widgets exist and make sure to mention that a large majority of Lean's current user base use and rely on them</p>\n</blockquote>\n<p>Yep, we are all on the same page that this is true.</p>",
        "id": 569907415,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769293378
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569892597\">said</a>:</p>\n<blockquote>\n<p>if you feel like building a tool that works precisely a way you have in mind, I'm certainly not one to tell you not to.</p>\n</blockquote>\n<p>I actually prefer not building this tool and prefer finding out someone else has built it or is building it. And it looks like I'm luck! <span class=\"user-mention\" data-user-id=\"928352\">@Willem vanhulle</span> is creating \"Lean-TUI\": <a href=\"#narrow/channel/113488-general/topic/Lean-TUI.20.28self-contained.20infoview.29/with/569977578\">https://leanprover.zulipchat.com/#narrow/channel/113488-general/topic/Lean-TUI.20.28self-contained.20infoview.29/with/569977578</a> </p>\n<p>Lean-TUI sounds like it is an \"editor-decoupled proof-state-outputing tool\" that is achieving the effect of \"file-watching\" although differently than I imagined. It is file-watching I think by sharing the same Lean LSP process with an editor. That sharing I imagine is also very good for memory usage too. I will try Lean-TUI and confirm. Sounds very promissing <span class=\"user-mention\" data-user-id=\"928352\">@Willem vanhulle</span> and makes much more sense to me that doing tight-coupling between Lean and specific editors. Loose-coupling between editors and language is the main point of LSP.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569892597\">said</a>:</p>\n<blockquote>\n<p>I don't know what one would want out of one that isn't either <a href=\"https://www.npmjs.com/package/@leanprover/infoview\">https://www.npmjs.com/package/@leanprover/infoview</a> or <a href=\"https://github.com/leanprover-community/repl\">https://github.com/leanprover-community/repl</a></p>\n</blockquote>\n<p>In those repos I don't see any file-watching CLI tool ... like Lean-TUI.</p>",
        "id": 569992762,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769386911
    },
    {
        "content": "<p>Thanks for mentioning my project. Indeed, it is early stage, but i already published a pre-release that is easier to test here <a href=\"https://crates.io/crates/lean-tui\">https://crates.io/crates/lean-tui</a><br>\n<a href=\"/user_uploads/3121/FasBh3XIJcqBgoa-eYOdG-2S/screenshot.png\">screenshot.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/FasBh3XIJcqBgoa-eYOdG-2S/screenshot.png\" title=\"screenshot.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"3839x2078\" src=\"/user_uploads/thumbnail/3121/FasBh3XIJcqBgoa-eYOdG-2S/screenshot.png/840x560.webp\"></a></div>",
        "id": 570049435,
        "sender_full_name": "Willem vanhulle",
        "timestamp": 1769421310
    },
    {
        "content": "<p>So far Lean-TUI seems like a promising approach. However it does not take advantage of React. So I a presume there are certain widget features that will be missing from Lean-TUI. I'm hoping I can help document missing functionality.</p>\n<p>There is a 2nd approach which is to output proof-state via a local web server that serves a React app that can support Lean widgets. It most likely would use <a href=\"https://www.npmjs.com/package/@leanprover/infoview\">https://www.npmjs.com/package/@leanprover/infoview</a>. As a placeholder name we can call it Lean-LocalWebApp. When run as an LSP client, it would run much like <code>lean-tui proxy</code>.  But rather than opening a local UNIX domain socket <code>~/.cache/lean-tui/lean-tui.sock</code> it instead opens a local TCP/IP port for HTTP, much like Jupyter Notebook and many others.  A user opens <code>http://localhost:12345</code> with their web browser rather than a 2nd terminal window running <code>lean-tui view</code>.</p>",
        "id": 570098864,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769435903
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"992537\">Castedo Ellerman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/570098864\">zei</a>:</p>\n<blockquote>\n<p>HTTP, much like Jupyter Note</p>\n</blockquote>\n<p>That should not be too hard to accomplish. The program is decoupled. You need replace the bridge between the TUI and proxy in <a href=\"https://codeberg.org/wvhulle/lean-tui/src/branch/main/src/tui_ipc\">https://codeberg.org/wvhulle/lean-tui/src/branch/main/src/tui_ipc</a></p>",
        "id": 570099572,
        "sender_full_name": "Willem vanhulle",
        "timestamp": 1769436061
    },
    {
        "content": "<p>Here are updates to my previous statements, beliefs, and plans based on y'all's insights, especially <span class=\"user-mention\" data-user-id=\"928352\">@Willem vanhulle</span> for demonstrating a novel approach in <a href=\"https://crates.io/crates/lean-tui\">https://crates.io/crates/lean-tui</a> that had not occured to me. Thank you!</p>\n<p><span class=\"user-mention silent\" data-user-id=\"992537\">Castedo Ellerman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569578389\">said</a>:</p>\n<blockquote>\n<p>Thomas Murrills <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569575441\">said</a>:</p>\n<blockquote>\n<p>do any of them have any access to the editor state?</p>\n</blockquote>\n<p>No, no editor state. However, some of these file-watching tools parse source files ...</p>\n<blockquote>\n<p>how do you envision choosing which proof state to display?</p>\n</blockquote>\n<p>By whatever means is loosely coupled from the editor. <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>\n</blockquote>\n<p>I correct myself: yes, there is editor state. There is tight coupling to the Lean LSP messages of <code>lake serve</code> but not to the editor, which can be any editor with generic LSP support.</p>\n<p>I was originally imaginging \"file-system-watching\". But the approach <span class=\"user-mention\" data-user-id=\"928352\">@Willem vanhulle</span> takes with <a href=\"https://crates.io/crates/lean-tui\">Lean-TUI</a> of \"editor-file-watching\" seems much more promissing and valuable. One run mode of Lean-TUI is as an LSP proxy. It does \"editor-file-watching\" by intercepting the LSP messages between editor and <code>lake serve</code>.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Editor-decoupled.20file-watching.20proof-state-outputing.20tool/near/569892597\">said</a>:</p>\n<blockquote>\n<p>... -- I don't think a filesystem-event-based tool is very promising, ...</p>\n</blockquote>\n<p>I agree that a filesystem-event-based tool as I originally imagined is less promissing than the LSP proxy approach <span class=\"user-mention\" data-user-id=\"928352\">@Willem vanhulle</span> has taken with <a href=\"https://crates.io/crates/lean-tui\">Lean-TUI</a>.</p>",
        "id": 570895113,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769720879
    },
    {
        "content": "<p>btw I found <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/InfoView.20in.20a.20Web.20Browser.3F/with/539965203\">#general &gt; InfoView in a Web Browser?</a> and <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/need.20help.20setting.20up.20lean4-infoview/with/519195291\">#lean4 &gt; need help setting up lean4-infoview</a> which seem to be the same request but older</p>",
        "id": 571127058,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769808331
    },
    {
        "content": "<p>Based on looking at all these links, including those, and reflecting on what I've learned so far. I think I see some novel approaches via external web browser that would work with any LSP editor. I figured I would start sharing these ideas once I get a little bit better informed about a lot of Lean stuff and when there's an \"Editors\" channel here on Zulip to start new topics not in \"general\".</p>",
        "id": 571130505,
        "sender_full_name": "Castedo Ellerman",
        "timestamp": 1769809884
    }
]