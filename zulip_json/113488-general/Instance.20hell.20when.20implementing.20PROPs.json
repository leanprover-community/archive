[
    {
        "content": "<p>I was trying to implement <a href=\"https://ncatlab.org/nlab/show/PROP\">PROP</a>s, a particular kind of monoidal category, and morphisms between them. This is what I have so far.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.CategoryTheory.Bicategory.SingleObj</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.CategoryTheory.Bicategory.Strict</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.CategoryTheory.Monoidal.Braided.Basic</span>\n\n<span class=\"c1\">-- https://ncatlab.org/nlab/show/PROP</span>\n<span class=\"kd\">structure</span><span class=\"w\"> </span><span class=\"n\">PROP</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">cat</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.Category</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n<span class=\"w\">  </span><span class=\"n\">mon</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.MonoidalCategory</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">cat</span>\n<span class=\"w\">  </span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.SymmetricCategory</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">cat</span><span class=\"w\"> </span><span class=\"n\">mon</span>\n<span class=\"w\">  </span><span class=\"n\">strict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory.Bicategory.Strict</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.MonoidalSingleObj</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">cat</span><span class=\"w\"> </span><span class=\"n\">mon</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">tensorObj_is_add</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mon.tensorObj</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Nat.add</span>\n\n<span class=\"kd\">structure</span><span class=\"w\"> </span><span class=\"n\">PROP.Hom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P1</span><span class=\"w\"> </span><span class=\"n\">P2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PROP</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">functor</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.BraidedFunctor</span>\n<span class=\"w\">    </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P1.cat</span><span class=\"w\"> </span><span class=\"n\">P1.mon</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.SymmetricCategory.toBraidedCategory</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P1.cat</span><span class=\"w\"> </span><span class=\"n\">P1.mon</span><span class=\"w\"> </span><span class=\"n\">P1.symm</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P2.cat</span><span class=\"w\"> </span><span class=\"n\">P2.mon</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.SymmetricCategory.toBraidedCategory</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P2.cat</span><span class=\"w\"> </span><span class=\"n\">P2.mon</span><span class=\"w\"> </span><span class=\"n\">P2.symm</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">functor_preserves_objects</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Prefunctor.obj</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P1.cat.toQuiver</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P2.cat.toQuiver</span>\n<span class=\"w\">      </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.Functor.toPrefunctor</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P1.cat</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P2.cat</span>\n<span class=\"w\">      </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.LaxMonoidalFunctor.toFunctor</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P1.cat</span><span class=\"w\"> </span><span class=\"n\">P1.mon</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P2.cat</span><span class=\"w\"> </span><span class=\"n\">P2.mon</span>\n<span class=\"w\">      </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.MonoidalFunctor.toLaxMonoidalFunctor</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P1.cat</span><span class=\"w\"> </span><span class=\"n\">P1.mon</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P2.cat</span><span class=\"w\"> </span><span class=\"n\">P2.mon</span>\n<span class=\"w\">      </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.BraidedFunctor.toMonoidalFunctor</span>\n<span class=\"w\">          </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P1.cat</span><span class=\"w\"> </span><span class=\"n\">P1.mon</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.SymmetricCategory.toBraidedCategory</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P1.cat</span><span class=\"w\"> </span><span class=\"n\">P1.mon</span><span class=\"w\"> </span><span class=\"n\">P1.symm</span><span class=\"o\">)</span>\n<span class=\"w\">          </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P2.cat</span><span class=\"w\"> </span><span class=\"n\">P2.mon</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">CategoryTheory.SymmetricCategory.toBraidedCategory</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"n\">P2.cat</span><span class=\"w\"> </span><span class=\"n\">P2.mon</span><span class=\"w\"> </span><span class=\"n\">P2.symm</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">functor</span>\n<span class=\"w\">    </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">id</span>\n</code></pre></div>\n<p>That last line, <code>functor_preserves_objects</code>, should be as simple as <code>functor.obj = id</code>.<br>\nBut if I write that, Lean can't figure out the correct instances.<br>\nSo I'm stuck with this nine-line mess.</p>\n<p>Is there a way to simplify this? Alternatively, is there a better design for these definitions?</p>",
        "id": 463562020,
        "sender_full_name": "finegeometer",
        "timestamp": 1724121547
    },
    {
        "content": "<p>I have already written some code about PROPs, let me dig it up</p>",
        "id": 463612379,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1724137510
    }
]