[
    {
        "content": "<p>I am trying to understand some unexpected behavior of the tactic interval_cases. In particular I am using the following version of interval cases as stated in the documentation:</p>\n<blockquote>\n<p>You can also explicitly specify a lower and upper bound to use, as interval_cases using hl, hu.</p>\n</blockquote>\n<p>The following piece of code yields an error.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">hu</span>\n<span class=\"w\">  </span><span class=\"n\">interval_cases</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_le</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">hu</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">contradiction</span>\n</code></pre></div>\n<p>The error states: </p>\n<blockquote>\n<p>interval_cases failed: provided bound '0 ≤ a' cannot be evaluated</p>\n</blockquote>\n<p>This error disappears in the following piece of code.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">hu</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_le</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">interval_cases</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hu</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">contradiction</span>\n</code></pre></div>\n<p>I have two questions:</p>\n<ol>\n<li>What is an explanation for this behavior?</li>\n<li>What alternative can I use? In particular, I would like to go into interval_cases without referring to the variable a and only to the hypothesis hu.</li>\n</ol>",
        "id": 480910507,
        "sender_full_name": "Pjotr Buys",
        "timestamp": 1730896500
    },
    {
        "content": "<ol>\n<li>Probably nobody thought about it</li>\n<li>The alternative is your second example</li>\n</ol>",
        "id": 480912491,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730897205
    },
    {
        "content": "<p>Regarding 2. I really would like a way to do it without referring to 'a' (and without it getting unreasonably ugly). I was hoping to do it like this <code>interval_cases using (Nat.zero_le _), hu &lt;;&gt; contradiction</code> and subsequently ran into the error.</p>",
        "id": 480912766,
        "sender_full_name": "Pjotr Buys",
        "timestamp": 1730897306
    },
    {
        "content": "<p>As you noticed, this is currently not possible</p>",
        "id": 480912924,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730897363
    },
    {
        "content": "<p>So far I only noticed that this doesn't work, not that there isn't some alternative. But I am willing to believe you if you say that it doesn't exist.</p>",
        "id": 480913214,
        "sender_full_name": "Pjotr Buys",
        "timestamp": 1730897454
    },
    {
        "content": "<p>Well, it's either going to be <code>interval_cases a</code> or <code>interval_cases using h1,h2</code> with <code>h1</code> and <code>h2</code> names of hypotheses right now. I filed <a href=\"https://github.com/leanprover-community/mathlib4/pull/18690\">#18690</a> to consider giving more options</p>",
        "id": 480914086,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730897724
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"666316\">Pjotr Buys</span> has marked this topic as resolved.</p>",
        "id": 480923936,
        "sender_full_name": "Notification Bot",
        "timestamp": 1730900942
    }
]