[
    {
        "content": "<p>Hi, I'm new to the language and playing around with creating a representation of the DOM in js. The DOM seems to naturally involve inheritance hierarchy of more than three depths, so I'm wondering what the Lean way to do that is given than this is not an inheritance oriented language.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">└──</span><span class=\"w\"> </span><span class=\"n\">Node</span>\n<span class=\"w\">    </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">Document</span>\n<span class=\"w\">    </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLDocument</span>\n<span class=\"w\">    </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">└──</span><span class=\"w\"> </span><span class=\"n\">XMLDocument</span>\n<span class=\"w\">    </span><span class=\"bp\">│</span>\n<span class=\"w\">    </span><span class=\"bp\">└──</span><span class=\"w\"> </span><span class=\"n\">Element</span>\n<span class=\"w\">        </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLElement</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLDivElement</span><span class=\"w\">        </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">div</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLSpanElement</span><span class=\"w\">       </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">span</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLParagraphElement</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">p</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">│</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLAnchorElement</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">a</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLImageElement</span><span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">img</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">│</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLInputElement</span><span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">input</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLButtonElement</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">button</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLTextAreaElement</span><span class=\"w\">   </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">textarea</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">│</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLFormElement</span><span class=\"w\">       </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">form</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">│</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLCanvasElement</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">canvas</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLVideoElement</span><span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">video</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLAudioElement</span><span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">audio</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">│</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLScriptElement</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">script</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">HTMLStyleElement</span><span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">style</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">│</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">└──</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"n\">many</span><span class=\"w\"> </span><span class=\"n\">more</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span>\n<span class=\"w\">        </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">SVGElement</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">SVGSVGElement</span><span class=\"w\">         </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">svg</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">SVGRectElement</span><span class=\"w\">        </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">rect</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">├──</span><span class=\"w\"> </span><span class=\"n\">SVGCircleElement</span><span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">circle</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span><span class=\"w\">   </span><span class=\"bp\">└──</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"w\">        </span><span class=\"bp\">│</span>\n<span class=\"w\">        </span><span class=\"bp\">└──</span><span class=\"w\"> </span><span class=\"n\">MathMLElement</span>\n</code></pre></div>\n<p>Would I still want to do structure inheritance for this, or some combination of inductive types?</p>",
        "id": 574179770,
        "sender_full_name": "Marvin",
        "timestamp": 1771273865
    },
    {
        "content": "<p>This seems like a good use case for inductive types. For instance, you should have an <code>SVGRectElement</code> type which stores the size of the rectangle, an. <code>SVGCircleElement</code> type which stores the dimensions of the circle... Then, you could have an <code>SVGElementType</code> which stores one of the SVG element types, and implement whatever functions are common to all SVG elements on said type.</p>",
        "id": 574180242,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1771274116
    },
    {
        "content": "<p>If you do need some sort of inheritance functionality, you can probably get by using typeclasses. Though that's hard to say without the specific code.</p>",
        "id": 574180406,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1771274201
    },
    {
        "content": "<p>How could I express that the SVG inductive type and the HTMLElement inductive type are both \"Element\"s? That an SVG and a H1 have some category in common. Or should I not try to encode that fact?</p>",
        "id": 574180483,
        "sender_full_name": "Marvin",
        "timestamp": 1771274245
    },
    {
        "content": "<p>If there are nodes that can have children of any <code>Element</code> type, then you can do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">mutual</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Element</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">html</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HTMLElement</span><span class=\"o\">)</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">svg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SVGElement</span><span class=\"o\">)</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">HTMLElement</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">div</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HTMLDivElement</span><span class=\"o\">)</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HTMLSpanElement</span><span class=\"o\">)</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">SomeElementType</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">someConstructor</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">children</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">Element</span><span class=\"o\">)</span>\n\n<span class=\"kn\">end</span>\n</code></pre></div>",
        "id": 574184380,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771276444
    }
]