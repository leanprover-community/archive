[
    {
        "content": "<p>Can I give an explicit name to the proposition arising from <code>match ... with | x@(a, b), ... =&gt; ... | ..., y@(c, d) =&gt; ...</code> stating that <code>x = (a, b)</code> or <code>y = (c, d)</code> in term mode? Instead of entering tactic mode to <code>rename_i</code> afterwards</p>",
        "id": 489046775,
        "sender_full_name": "nrs",
        "timestamp": 1734231179
    },
    {
        "content": "<p><code>match h : ...</code></p>",
        "id": 489046807,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734231223
    },
    {
        "content": "<p>hm, but does that not only work with matches of the form <code>x@(a,b) =&gt; ...</code>? sorry the title is a bit misleading, could not fit enough examples</p>",
        "id": 489046901,
        "sender_full_name": "nrs",
        "timestamp": 1734231304
    },
    {
        "content": "<p>no?</p>",
        "id": 489046979,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734231377
    },
    {
        "content": "<p>(an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> with a representative example would make this easy to answer)</p>",
        "id": 489047075,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1734231503
    },
    {
        "content": "<p>For instance, this will introduce two inaccessible names:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">prodmatch</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">⊕</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">@⟨</span><span class=\"n\">nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sum</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">@⟨</span><span class=\"n\">ub</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">natb</span><span class=\"bp\">⟩⟩</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n</code></pre></div>",
        "id": 489047263,
        "sender_full_name": "nrs",
        "timestamp": 1734231640
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">prodmatch</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">⊕</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">@</span><span class=\"n\">hx</span><span class=\"o\">:</span><span class=\"bp\">⟨</span><span class=\"n\">nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sum</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">@</span><span class=\"n\">hy</span><span class=\"o\">:</span><span class=\"bp\">⟨</span><span class=\"n\">ub</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">natb</span><span class=\"bp\">⟩⟩</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n</code></pre></div>",
        "id": 489047378,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1734231751
    },
    {
        "content": "<p>very cool! thanks a lot!!</p>",
        "id": 489047392,
        "sender_full_name": "nrs",
        "timestamp": 1734231773
    },
    {
        "content": "<p>sorry to intrude but what is this @ operator do?</p>",
        "id": 489051833,
        "sender_full_name": "Frederick Pu",
        "timestamp": 1734236657
    },
    {
        "content": "<p>it \"names\" the subpattern</p>",
        "id": 489052131,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734236999
    },
    {
        "content": "<p>so inside the match <code>x</code> will be bound to the original expression and <code>y</code> will be bound to the <code>Unit × Nat</code> subterm</p>",
        "id": 489052211,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734237037
    },
    {
        "content": "<p>k cool</p>",
        "id": 489111912,
        "sender_full_name": "Frederick Pu",
        "timestamp": 1734294074
    }
]