[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/113488-general/topic/recursive.20hovers.20on.20the.20web.20editor/near/509658820\">said</a>:</p>\n<blockquote>\n<p>Indeed, in lean4web we just set some default options (<a href=\"https://github.com/leanprover-community/lean4web/blob/edd9e2c5bc478f757f9bd839eed3c36e3e96432e/client/src/App.tsx#L163\">here</a>) which might differ from the defaults set in VS-Code:</p>\n<p><div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"nt\">\"lean4.input.eagerReplacementEnabled\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span>\n<span class=\"nt\">\"lean4.infoview.showGoalNames\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">,</span>\n<span class=\"nt\">\"lean4.infoview.emphasizeFirstGoal\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span>\n<span class=\"nt\">\"lean4.infoview.showExpectedType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">,</span>\n<span class=\"nt\">\"lean4.infoview.showTooltipOnHover\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">,</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>What's the rational for <code>showGoalNames : false</code>?</p>",
        "id": 509768221,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743619055
    },
    {
        "content": "<p>The <code>case</code> tactic is much harder to use with that setting</p>",
        "id": 509768506,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743619144
    },
    {
        "content": "<p>That's an interesting comment because I have never understood the point of <code>showGoalNames</code> at all and usually my names are random very long things which just irritate me.</p>",
        "id": 509774438,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743621023
    },
    {
        "content": "<p>In elementary math proofs it is extremely rare to have meaningful case names.</p>",
        "id": 509774444,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1743621026
    },
    {
        "content": "<p>I should probably also say that I'm not sure I ever use the <code>case</code> tactic :-)</p>",
        "id": 509774542,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743621066
    },
    {
        "content": "<p>Not sure if you're suggesting that Kevin is only working on elementary math <span aria-label=\"innocent\" class=\"emoji emoji-1f607\" role=\"img\" title=\"innocent\">:innocent:</span></p>",
        "id": 509775191,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1743621299
    },
    {
        "content": "<p>I like the case names for demonstrating proofs by induction, where I can say \"Lean is showing you the two cases you need to fill in, and they're called the zero case and the successor case\"</p>",
        "id": 509776537,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1743621732
    },
    {
        "content": "<p>But I just use the lightbulb to do that.</p>",
        "id": 509777596,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1743622097
    },
    {
        "content": "<p>I don't use the case tags often but when I want them and they're not there it takes a chunk of my time trying to figure out what they are (last time I wanted to use this was <a href=\"#narrow/channel/287929-mathlib4/topic/named.20subgoals.20with.20.60obtain.60/near/502102537\">#mathlib4 &gt; named subgoals with &#96;obtain&#96; @ ðŸ’¬</a>)</p>",
        "id": 509778552,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1743622383
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/113488-general/topic/recursive.20hovers.20on.20the.20web.20editor/near/509774444\">said</a>:</p>\n<blockquote>\n<p>In elementary math proofs it is extremely rare to have meaningful case names.</p>\n</blockquote>\n<p>I think this is perhaps due to the case name generation being suboptimal; it would be much easier to suggest fixes for this feature if the web editor didn't just pretend the feature didn't exist.</p>",
        "id": 509784621,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743624602
    },
    {
        "content": "<p>10 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/recursive.20hovers.20on.20the.20web.20editor/with/509502746\">#general &gt; recursive hovers on the web editor</a> by <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>.</p>",
        "id": 509784715,
        "sender_full_name": "Notification Bot",
        "timestamp": 1743624632
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/lean4.2Einfoview.2EshowGoalNames.20is.20false.20in.20the.20web.20editor/near/509784621\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/113488-general/topic/recursive.20hovers.20on.20the.20web.20editor/near/509774444\">said</a>:</p>\n<blockquote>\n<p>In elementary math proofs it is extremely rare to have meaningful case names.</p>\n</blockquote>\n<p>I think this is perhaps due to the case name generation being suboptimal; it would be much easier to suggest fixes for this feature if the web editor didn't just pretend the feature didn't exist.</p>\n</blockquote>\n<p>I donâ€™t buy that argument to change the web editor default. You can simply use your local lean for this.</p>",
        "id": 509785837,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1743625051
    },
    {
        "content": "<p>I feel like there still is no reasoning given as to why it should be hidden though? It usually doesn't take up much space, so if you don't use it, don't look at it. It's not like we disable tactics and tell people \"If you want to use it, turn this option on\".</p>",
        "id": 509787367,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743625669
    },
    {
        "content": "<p>If you really don't want to see it, \"you can simply use your local lean for this\"</p>",
        "id": 509787506,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743625707
    },
    {
        "content": "<p>In effect, <em>this new behaviour is changing the default</em>, which (imo) shouldn't have happened in the first place</p>",
        "id": 509787722,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743625797
    },
    {
        "content": "<p>At the very least without asking the community</p>",
        "id": 509787800,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743625811
    },
    {
        "content": "<p>To me the reasoning on both sides seems clear, which seems to leave room to actually discuss it objectively -- the reason to change the default is asserting \"these names are noisy and rarely used and that makes it confusing to new users to see them\" -- and maybe new users are more likely to be seeing the web editor than local lean, which justifies different defaults, or similarly users who are doing less \"intensive\" Lean work. The same audience often <em>does</em> typically see a much smaller set of tactics, some even indeed \"disabled\" no?</p>\n<p>I actually even briefly considered changing this default in lean.nvim way back when I started writing it and it was just for myself -- if I would have known people who actually were experts found them noisy too I would have thought even harder about doing it... I think Lean has a ton of knobs -- I don't think in general that \"if you don't use it don't look at it\" is a free cost, it does cost something to have things visible if they're never going to be used.</p>\n<p>(Though with all that being said I think I agree with the default as-is for \"normal\" Lean in the end)</p>",
        "id": 509791819,
        "sender_full_name": "Julian Berman",
        "timestamp": 1743627233
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/113488-general/topic/lean4.2Einfoview.2EshowGoalNames.20is.20false.20in.20the.20web.20editor/near/509787367\">said</a>:</p>\n<blockquote>\n<p>I feel like there still is no reasoning given as to why it should be hidden though? It usually doesn't take up much space, so if you don't use it, don't look at it. It's not like we disable tactics and tell people \"If you want to use it, turn this option on\".</p>\n</blockquote>\n<p>I think youâ€™ve been using Lean for too long and donâ€™t realize what it looks like for beginners. Anything that can remove noise is priceless.</p>",
        "id": 509793726,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1743627884
    },
    {
        "content": "<p>But itâ€™s also interesting to see that maybe some people use this live lean server a lot more than I expected. I simply never use it when Iâ€™m not helping absolute beginners who only want to devote at most three hours to Lean. Copy-pasting a code snippet into my local lean is a negligible overhead compared to the benefit of using Lean locally.</p>",
        "id": 509794115,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1743628025
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/113488-general/topic/lean4.2Einfoview.2EshowGoalNames.20is.20false.20in.20the.20web.20editor/near/509794115\">said</a>:</p>\n<blockquote>\n<p>But itâ€™s also interesting to see that maybe some people use this live lean server a lot more than I expected. I simply never use it when Iâ€™m not helping absolute beginners who only want to devote at most three hours to Lean. Copy-pasting a code snippet into my local lean is a negligible overhead compared to the benefit of using Lean locally.</p>\n</blockquote>\n<p>My local lean is quite a bit slower, so I use the live lean server for everything that isn't directly in a project.</p>",
        "id": 509795314,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1743628546
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/stream/113488-general/topic/lean4.2Einfoview.2EshowGoalNames.20is.20false.20in.20the.20web.20editor/near/509787800\">said</a>:</p>\n<blockquote>\n<p>At the very least without asking the community</p>\n</blockquote>\n<p>It's much easier to just implement a default and if anybody objects, then one can have this discussion about what's best :)</p>\n<p>Anyways, I've never looked at the goal names and I've always considered them noisy junk, so I didn't think twice  adding Patrick's request about 6 weeks ago.</p>\n<p>I'll check back here later to see if there have been more opinions, or more examples where the goal names would be useful :)</p>",
        "id": 509813247,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1743637740
    },
    {
        "content": "<p>I've had multiple cases where I've tried to explain metavariables to someone using the web editor, only to be confused that the goals are no longer named with their metavariable names:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">âˆƒ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨?</span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_âŸ©</span>\n<span class=\"w\">  </span><span class=\"c1\">-- I want to see `case m` here</span>\n</code></pre></div>",
        "id": 509813314,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743637799
    },
    {
        "content": "<p>Yes, my preference is that we add these back, for consistency with the VSCode experience.</p>",
        "id": 509823332,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1743643941
    },
    {
        "content": "<p>Again, there wonâ€™t be a setting that works for everyone, the use cases are simply too different. What we need is a way to set this from the url.</p>",
        "id": 509860455,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1743664385
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/113488-general/topic/lean4.2Einfoview.2EshowGoalNames.20is.20false.20in.20the.20web.20editor/near/509860455\">said</a>:</p>\n<blockquote>\n<p>What we need is a way to set this from the url.</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/lean4web/issues/52\">https://github.com/leanprover-community/lean4web/issues/52</a><br>\nI mentioned this to Patrick privately at some point: I don't think I'll have time to implement that myself, but I agree that would be a nice feature!</p>",
        "id": 509871836,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1743667924
    },
    {
        "content": "<p>On it. Can I have branch create permissions please?</p>",
        "id": 509942353,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1743687328
    },
    {
        "content": "<p>Do we want changing of the settings to be reflected back into the URL, or have this just be a \"if you know, you know\" option?</p>",
        "id": 509944843,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1743687882
    },
    {
        "content": "<p>Example proposed diff</p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gh\">diff --git i/client/src/App.tsx w/client/src/App.tsx</span>\n<span class=\"gh\">index 0dc823d..349fe17 100644</span>\n<span class=\"gd\">--- i/client/src/App.tsx</span>\n<span class=\"gi\">+++ w/client/src/App.tsx</span>\n<span class=\"gu\">@@ -9,11 +9,13 @@ import { faCode } from '@fortawesome/free-solid-svg-icons'</span>\n\n<span class=\"w\"> </span>// Local imports\n<span class=\"w\"> </span>import LeanLogo from './assets/logo.svg'\n<span class=\"gd\">-import defaultSettings, { IPreferencesContext, lightThemes } from './config/settings'</span>\n<span class=\"gi\">+import defaultSettings, { IPreferencesContext, IPreferencesParams, lightThemes, preferenceParams } from './config/settings'</span>\n<span class=\"w\"> </span>import { Menu } from './Navigation'\n<span class=\"w\"> </span>import { PreferencesContext } from './Popups/Settings'\n<span class=\"w\"> </span>import { fixedEncodeURIComponent, formatArgs, lookupUrl, parseArgs } from './utils/UrlParsing'\n<span class=\"w\"> </span>import { useWindowDimensions } from './utils/WindowWidth'\n<span class=\"gi\">+import { useSearchParams } from 'react-router'</span>\n<span class=\"gi\">+</span>\n\n<span class=\"w\"> </span>// CSS\n<span class=\"w\"> </span>import './css/App.css'\n<span class=\"gu\">@@ -51,6 +53,7 @@ function App() {</span>\n<span class=\"w\"> </span>  const [project, setProject] = useState&lt;string&gt;(undefined)\n<span class=\"w\"> </span>  const [url, setUrl] = useState&lt;string | null&gt;(null)\n<span class=\"w\"> </span>  const [codeFromUrl, setCodeFromUrl] = useState&lt;string&gt;('')\n<span class=\"gi\">+  const [searchParams, _] = useSearchParams()</span>\n\n<span class=\"w\"> </span>  /** Monaco editor requires the code to be set manually. */\n<span class=\"w\"> </span>  function setContent (code: string) {\n<span class=\"gu\">@@ -90,7 +93,12 @@ function App() {</span>\n<span class=\"w\"> </span>    let newPreferences: any = { ...preferences } // TODO: need `any` instead of `IPreferencesContext` here to satisfy ts\n<span class=\"w\"> </span>    for (const [key, value] of Object.entries(preferences)) {\n<span class=\"w\"> </span>      let storedValue = window.localStorage.getItem(key)\n<span class=\"gd\">-      if (storedValue) {</span>\n<span class=\"gi\">+      // prefer URL params over stored</span>\n<span class=\"gi\">+      if (preferenceParams.includes(key) &amp;&amp; searchParams.has(key)) {</span>\n<span class=\"gi\">+        const paramValue = !(searchParams.get(key) === \"false\")  // expecting true or false</span>\n<span class=\"gi\">+        console.debug(`[Lean4web] Found URL parameter for ${key}: ${paramValue}`)</span>\n<span class=\"gi\">+        newPreferences[key] = paramValue</span>\n<span class=\"gi\">+      } else if (storedValue) {</span>\n<span class=\"w\"> </span>        saveInLocalStore = true\n<span class=\"w\"> </span>        console.debug(`[Lean4web] Found stored value for ${key}: ${storedValue}`)\n</code></pre></div>",
        "id": 509951201,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1743689180
    },
    {
        "content": "<p>You can also just fork the repo and make a PR from your fork, right?</p>",
        "id": 509960445,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1743691188
    },
    {
        "content": "<p>Sure, if that's what you prefer</p>",
        "id": 509968932,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1743693324
    },
    {
        "content": "<p>Thanks<span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span></p>",
        "id": 509969984,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1743693559
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/cQT37rVMY7uDvkBttOJPLphj/image.png\">image.png</a><br>\n<a href=\"https://github.com/leanprover-community/lean4web/pull/60\">https://github.com/leanprover-community/lean4web/pull/60</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/cQT37rVMY7uDvkBttOJPLphj/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1251x997\" src=\"/user_uploads/thumbnail/3121/cQT37rVMY7uDvkBttOJPLphj/image.png/840x560.webp\"></a></div>",
        "id": 509985112,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1743697350
    },
    {
        "content": "<p>Could I suggest we make the default match vscode?</p>",
        "id": 509985667,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743697525
    },
    {
        "content": "<p>Maybe this is just me, but I use case names every now and then. It is easier for me to skim the proof when I have them (for example when using <code>by_cases</code> or <code>constructor</code>).</p>",
        "id": 510155298,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1743765300
    },
    {
        "content": "<p>This landed on github in <a href=\"https://github.com/leanprover-community/lean4web/commit/8b3e3c8dde9397be59db4ec203b00f514e91119d\">https://github.com/leanprover-community/lean4web/commit/8b3e3c8dde9397be59db4ec203b00f514e91119d</a>, right? I guess it's not yet deployed?</p>",
        "id": 511215846,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744215581
    },
    {
        "content": "<p>I've also haven't merged Yakov's PR yet, but I'll do that soon</p>",
        "id": 511216683,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1744215786
    }
]