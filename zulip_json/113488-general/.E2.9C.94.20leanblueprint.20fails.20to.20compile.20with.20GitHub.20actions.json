[
    {
        "content": "<p>Hi everyone! I'm looking for help with getting GitHub actions to work for leanblueprint. I've made several attempts to re-generate all the files from scratch, but the blueprint refuses to compile with GitHub actions after I push the changes to GitHub. The errors on the attached screenshots are different each time, so I have no clue what the issue might be. Can anyone help?</p>\n<p><a href=\"/user_uploads/3121/QDpOeuguzu4By4-uBQqAkFKU/Screenshot-from-2024-11-04-09-14-00.png\">Screenshot from 2024-11-04 09-14-00.png</a><br>\n<a href=\"/user_uploads/3121/dIprbhXm4C8KZLMYwiVhDcGS/Screenshot-from-2024-11-04-09-14-13.png\">Screenshot from 2024-11-04 09-14-13.png</a><br>\n<a href=\"/user_uploads/3121/jUNRh7CLjaGIdVro6j4FAYaV/Screenshot-from-2024-11-04-09-51-21.png\">Screenshot from 2024-11-04 09-51-21.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/QDpOeuguzu4By4-uBQqAkFKU/Screenshot-from-2024-11-04-09-14-00.png\" title=\"Screenshot from 2024-11-04 09-14-00.png\"><img data-original-dimensions=\"750x580\" src=\"/user_uploads/thumbnail/3121/QDpOeuguzu4By4-uBQqAkFKU/Screenshot-from-2024-11-04-09-14-00.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/dIprbhXm4C8KZLMYwiVhDcGS/Screenshot-from-2024-11-04-09-14-13.png\" title=\"Screenshot from 2024-11-04 09-14-13.png\"><img data-original-dimensions=\"857x655\" src=\"/user_uploads/thumbnail/3121/dIprbhXm4C8KZLMYwiVhDcGS/Screenshot-from-2024-11-04-09-14-13.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/jUNRh7CLjaGIdVro6j4FAYaV/Screenshot-from-2024-11-04-09-51-21.png\" title=\"Screenshot from 2024-11-04 09-51-21.png\"><img data-original-dimensions=\"835x894\" src=\"/user_uploads/thumbnail/3121/jUNRh7CLjaGIdVro6j4FAYaV/Screenshot-from-2024-11-04-09-51-21.png/840x560.webp\"></a></div><p>The repository I'm working in is located <a href=\"https://github.com/Ivan-Sergeyev/seymour\">here</a>. I am using the <a href=\"https://github.com/pitmonticone/LeanProject\">Lean project template</a> as base and  I am following  the instructions from that repository and the <a href=\"https://github.com/PatrickMassot/leanblueprint\">leanblueprint repo</a>.</p>",
        "id": 480395662,
        "sender_full_name": "Ivan S.",
        "timestamp": 1730711014
    },
    {
        "content": "<p>I will take a look at it as soon as I find the time.</p>",
        "id": 480690344,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1730803277
    },
    {
        "content": "<p>I had the same issue - you can fix this by reverting the version of docgen in the manifest to the one tagged 4.13.0</p>",
        "id": 480701168,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1730806945
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/doc-gen4/releases/tag/v4.13.0\">https://github.com/leanprover/doc-gen4/releases/tag/v4.13.0</a></p>",
        "id": 480701331,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1730807019
    },
    {
        "content": "<p>Or it might be better to bump lean to v4.14.0-rc1 by running <code>scripts/update_mathlib.sh</code></p>",
        "id": 480701662,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1730807154
    },
    {
        "content": "<p>Yesterday we bumped from 4.12.0 to 4.13.0 and it didn't solve the problem. Is there any reason to bump to 4.14.0-rc1 now? I strongly prefer working with stable versions.</p>",
        "id": 480707458,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1730809088
    },
    {
        "content": "<p>If you strongly prefer working with stable versions, then consider downgrading the doc-gen4 version to 4.13.0 as suggested by Bhavik above.</p>",
        "id": 480708295,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1730809343
    },
    {
        "content": "<p>So this issue doesn’t seem to have anything to do with LeanProject or LeanBlueprint.</p>",
        "id": 480708683,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1730809467
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246273\">Bhavik Mehta</span> <a href=\"#narrow/channel/113488-general/topic/leanblueprint.20fails.20to.20compile.20with.20GitHub.20actions/near/480701168\">said</a>:</p>\n<blockquote>\n<p>I had the same issue - you can fix this by reverting the version of docgen in the manifest to the one tagged 4.13.0</p>\n</blockquote>\n<p>Does it mean changing this line?<br>\n<a href=\"https://github.com/Ivan-Sergeyev/seymour/blob/36f9faa8a3db20423860f0042969c605a05d7997/lake-manifest.json#L138\">https://github.com/Ivan-Sergeyev/seymour/blob/36f9faa8a3db20423860f0042969c605a05d7997/lake-manifest.json#L138</a></p>",
        "id": 480708858,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1730809518
    },
    {
        "content": "<p>Notice that the cache will not work unless your project's toolchain matches Mathlib's toolchain. Do you want to keep Mathlib up to date? </p>\n<p>If so, I think it's better to upgrade the project's toolchain to <code>v4.14.0-rc1</code>.</p>",
        "id": 480718493,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1730812557
    },
    {
        "content": "<p>Moreover, unless you want to wait for the <code>Build project API documentation</code> step of the \"Compile Blueprint\" action for a very long time, I recommend not to <code>import Mathlib</code> anywhere.</p>",
        "id": 480719893,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1730812984
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> <a href=\"#narrow/channel/113488-general/topic/leanblueprint.20fails.20to.20compile.20with.20GitHub.20actions/near/480718493\">said</a>:</p>\n<blockquote>\n<p>Notice that the cache will not work unless your project's toolchain matches Mathlib's toolchain. Do you want to keep Mathlib up to date? </p>\n</blockquote>\n<p>Does Mathlib delete the cache for older versions?</p>",
        "id": 480720186,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1730813078
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> <a href=\"#narrow/channel/113488-general/topic/leanblueprint.20fails.20to.20compile.20with.20GitHub.20actions/near/480719893\">said</a>:</p>\n<blockquote>\n<p>Moreover, unless you want to wait for the <code>Build project API documentation</code> step of the \"Compile Blueprint\" action for a very long time, I recommend not to <code>import Mathlib</code> anywhere.</p>\n</blockquote>\n<p>I will eliminate it. Thanks for the reminder!</p>",
        "id": 480720238,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1730813097
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417654\">Martin Dvořák</span> <a href=\"#narrow/channel/113488-general/topic/leanblueprint.20fails.20to.20compile.20with.20GitHub.20actions/near/480708858\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"246273\">Bhavik Mehta</span> <a href=\"#narrow/channel/113488-general/topic/leanblueprint.20fails.20to.20compile.20with.20GitHub.20actions/near/480701168\">said</a>:</p>\n<blockquote>\n<p>I had the same issue - you can fix this by reverting the version of docgen in the manifest to the one tagged 4.13.0</p>\n</blockquote>\n<p>Does it mean changing this line?<br>\n<a href=\"https://github.com/Ivan-Sergeyev/seymour/blob/36f9faa8a3db20423860f0042969c605a05d7997/lake-manifest.json#L138\">https://github.com/Ivan-Sergeyev/seymour/blob/36f9faa8a3db20423860f0042969c605a05d7997/lake-manifest.json#L138</a></p>\n</blockquote>\n<p>Is it right?</p>",
        "id": 482344750,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1731576520
    },
    {
        "content": "<p>I am also having compilation issues with a project cloned from <span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span>'s blueprint template, and I suspect it is the same issue as discussed here. So I would also be grateful for directions on how to make it compile correctly.</p>",
        "id": 482384849,
        "sender_full_name": "David Loeffler",
        "timestamp": 1731589046
    },
    {
        "content": "<p>Could you please give more details about the compilation issue? </p>\n<p>I’ll take a look at it later today.</p>",
        "id": 482385967,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1731589322
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"417654\">@Martin Dvořák</span> I have just opened a <a href=\"https://github.com/Ivan-Sergeyev/seymour/pull/1\">PR</a> that fixes your compilation issue and satisfies your requirement of keeping your project's toolchain at <code>v4.13.0</code>.</p>",
        "id": 482412238,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1731596400
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"481963\">@David Loeffler</span> </p>\n<ul>\n<li>If it's fine for you to work with release candidates, you can simply run <code>scripts/update_mathlib.sh</code></li>\n<li>If you want to work with stable releases only, then change the revisions in the <code>lean-toolchain</code> and <code>lakefile.toml</code> as in <a href=\"https://github.com/Ivan-Sergeyev/seymour/pull/1\">this PR</a> and <code>lake update</code>.</li>\n</ul>",
        "id": 482413675,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1731596759
    },
    {
        "content": "<p>Is it OK that the CI still attempts to compile all of Mathlib?<br>\n<a href=\"/user_uploads/3121/LT13rt23hg_4FHXgy2Lhak1Y/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/LT13rt23hg_4FHXgy2Lhak1Y/image.png\" title=\"image.png\"><img data-original-dimensions=\"557x412\" src=\"/user_uploads/thumbnail/3121/LT13rt23hg_4FHXgy2Lhak1Y/image.png/840x560.webp\"></a></div>",
        "id": 482429452,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1731600728
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> <a href=\"#narrow/channel/113488-general/topic/leanblueprint.20fails.20to.20compile.20with.20GitHub.20actions/near/482412238\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"417654\">Martin Dvořák</span> I have just opened a <a href=\"https://github.com/Ivan-Sergeyev/seymour/pull/1\">PR</a> that fixes your compilation issue and satisfies your requirement of keeping your project's toolchain at <code>v4.13.0</code>.</p>\n</blockquote>\n<p>It works!! Thank you so much!!</p>",
        "id": 482430671,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1731601028
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417654\">Martin Dvořák</span> <a href=\"#narrow/channel/113488-general/topic/leanblueprint.20fails.20to.20compile.20with.20GitHub.20actions/near/482429452\">said</a>:</p>\n<blockquote>\n<p>Is it OK that the CI still attempts to compile all of Mathlib?<br>\n<a href=\"/user_uploads/3121/LT13rt23hg_4FHXgy2Lhak1Y/image.png\">image.png</a></p>\n</blockquote>\n<p>It's not compiling all of Mathlib, but it's building the docs of all the Mathlib files effectively imported.</p>",
        "id": 482432095,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1731601392
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"481963\">David Loeffler</span> <a href=\"#narrow/channel/113488-general/topic/leanblueprint.20fails.20to.20compile.20with.20GitHub.20actions/near/482384849\">said</a>:</p>\n<blockquote>\n<p>I am also having compilation issues with a project cloned from <span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span>'s blueprint template, and I suspect it is the same issue as discussed here.</p>\n</blockquote>\n<p>It turns out this wasn’t the case, and we had just failed to follow the blueprint setup correctly. I’m posting this here to make sure nobody is put off from using the template  by my earlier message.</p>",
        "id": 482458504,
        "sender_full_name": "David Loeffler",
        "timestamp": 1731609737
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> has marked this topic as resolved.</p>",
        "id": 482900410,
        "sender_full_name": "Notification Bot",
        "timestamp": 1731881102
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> <a href=\"#narrow/channel/113488-general/topic/.E2.9C.94.20leanblueprint.20fails.20to.20compile.20with.20GitHub.20actions/near/480719893\">said</a>:</p>\n<blockquote>\n<p>Moreover, unless you want to wait for the <code>Build project API documentation</code> step of the \"Compile Blueprint\" action for a very long time, I recommend not to <code>import Mathlib</code> anywhere.</p>\n</blockquote>\n<p>Great advice! Aristotle tends to write \"import Mathlib\" and I had forgotten to edit that.</p>",
        "id": 569140416,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1768948724
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 573864744,
        "sender_full_name": "Vasily Ilin",
        "timestamp": 1771044664
    }
]