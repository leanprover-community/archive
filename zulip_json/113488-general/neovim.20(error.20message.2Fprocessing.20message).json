[
    {
        "content": "<p>I have two questions about lean.nvim in neovim.</p>\n<ol>\n<li>After a recent update, I get the error message</li>\n</ol>\n<blockquote>\n<p>lean.setup { lsp = { ... } } is deprecated, use call vim.lsp.config('leanls', { ... }) directly in  <br>\nstead.  <br>\nFeature will be removed in lean.nvim v2025.12.1</p>\n</blockquote>\n<p>which I didn't manage to address.  </p>\n<ol start=\"2\">\n<li>When I run <code>LeanRefreshFileDependencies</code>, the infoview window prints a plain <code>Processing File</code> without any indication of what it's doing. I have seen that vscode gives more information. <br>\nWould it be possible to have it too? Moreover,  that info line is only visible if the cursor is on the first line of the file.</li>\n</ol>",
        "id": 568608895,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1768676291
    },
    {
        "content": "<p>This should fix 1. <a href=\"https://github.com/AntoineChambert-Loir/nvim/pull/2\">https://github.com/AntoineChambert-Loir/nvim/pull/2</a></p>",
        "id": 568609937,
        "sender_full_name": "Julian Berman",
        "timestamp": 1768677472
    },
    {
        "content": "<p>Can you maybe tell me a bit more about 2 -- if I open A.lean and B.lean in VSCode and A depends on B, and I modify B, I see the imports out of date message and then if I restart file in VSCode I don't seem to see any more detail while that's happening.</p>",
        "id": 568610127,
        "sender_full_name": "Julian Berman",
        "timestamp": 1768677675
    },
    {
        "content": "<p>(As for it only appearing on the first line -- this is coming very soon, I already have a change locally to dim the infoview when imports are out of date, which I'll push as soon as I get some time to write docs and an automated test.)</p>",
        "id": 568610168,
        "sender_full_name": "Julian Berman",
        "timestamp": 1768677726
    },
    {
        "content": "<p>In VS Code if you modify a file and then click refresh dependencies on a second file quite a long way further down the heirarchy then you can see which file is being built and how many more need to be built before your refreshed file comes alive again. I would send a gif but I've got two VS Code's open and am ploughing through the diffs between two 876M trace dumps so am a bit reluctant to touch anything...</p>",
        "id": 568611413,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1768679001
    },
    {
        "content": "<p>Interesting, thanks! That helps, let me see if I can reproduce.</p>",
        "id": 568611593,
        "sender_full_name": "Julian Berman",
        "timestamp": 1768679201
    },
    {
        "content": "<p>I should have been more specific, and Kevin pointed out exactly what I had in mind.</p>",
        "id": 568621458,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1768690379
    },
    {
        "content": "<p>I don't know if Antoine is already implying that, but let me point out that I used to see more information when refreshing a file. Since updating a few days ago, I only see <code>Processing file</code>.</p>",
        "id": 568684043,
        "sender_full_name": "Christian Merten",
        "timestamp": 1768760428
    },
    {
        "content": "<p>I just pushed a commit which I think should give us the same information as what you see in VSCode (<a href=\"https://github.com/Julian/lean.nvim/commit/1db3db3a5fb2494f7bdd56f2650acf9156d08305\">https://github.com/Julian/lean.nvim/commit/1db3db3a5fb2494f7bdd56f2650acf9156d08305</a>) -- if you (both) update, can you let me know whether you see what you're looking for now?</p>",
        "id": 568697792,
        "sender_full_name": "Julian Berman",
        "timestamp": 1768774480
    },
    {
        "content": "<p>Something gets printed but is almost immediately erased. Here is a video.<br>\n<a href=\"/user_uploads/3121/pX1rnQvkl_rdfNyFFD69QdQc/Enregistrement-de-lecran-2026-01-18-a-23.34.04.mov\">Enregistrement de l’écran 2026-01-18 à 23.34.04.mov</a></p>",
        "id": 568698859,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1768775800
    },
    {
        "content": "<p>Hrm, weird. I'll have a closer look here again.</p>",
        "id": 568699129,
        "sender_full_name": "Julian Berman",
        "timestamp": 1768776193
    },
    {
        "content": "<p>For me it fixed it, I am now seeing the old output. My guess would be that in <span class=\"user-mention\" data-user-id=\"130609\">@Antoine Chambert-Loir</span>'s example the reloading simply finishes too quickly.</p>",
        "id": 568818503,
        "sender_full_name": "Christian Merten",
        "timestamp": 1768833864
    },
    {
        "content": "<p>That or my other hypothesis is that Antoine's example has a separate <code>sorry</code> diagnostic, so that's the other thing I want to double check. But thanks for confirming for yours!</p>",
        "id": 568824172,
        "sender_full_name": "Julian Berman",
        "timestamp": 1768835371
    },
    {
        "content": "<p>Related to this: I used to see much more diagnostic information in the actual editor (similar to the VS Code error lens plugin). Since the update, I only see this in the infoview. How can I restore the old behaviour?</p>",
        "id": 568825777,
        "sender_full_name": "Christian Merten",
        "timestamp": 1768835834
    },
    {
        "content": "<p>Perhaps you're referring to Neovim changing its own default in 0.11 for <code>virtual_text</code> -- some detail here: <a href=\"https://neovim.io/doc/user/news-0.11.html#_diagnostics\">https://neovim.io/doc/user/news-0.11.html#_diagnostics</a> you can turn it back on again with the line that it shows there.</p>",
        "id": 568826181,
        "sender_full_name": "Julian Berman",
        "timestamp": 1768835951
    },
    {
        "content": "<p>Yes, that fixed it. Thank you for the quick fixes and pointers!</p>",
        "id": 568827450,
        "sender_full_name": "Christian Merten",
        "timestamp": 1768836295
    },
    {
        "content": "<p>I tried the new version on a more complicated file, and this looks very good! Thank you!</p>",
        "id": 568863915,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1768848736
    },
    {
        "content": "<p>Ah very good ok, glad to hear that \"things were too fast\" was part of the issue in the end :). Thanks for reporting.</p>",
        "id": 568887238,
        "sender_full_name": "Julian Berman",
        "timestamp": 1768855305
    },
    {
        "content": "<p>I tried to create a video of the phenomenon but, because of the module system, I edited Mathlib.Init and then some random leaf file recompiled instantly :-)</p>",
        "id": 568889193,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1768855807
    }
]