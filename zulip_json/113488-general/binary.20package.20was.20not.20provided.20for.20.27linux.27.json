[
    {
        "content": "<p>I've just had a few CI runs fail due to this elan error:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$ curl https://raw.githubusercontent.com/leanprover/elan/master/elan-init.sh -sSf <span class=\"p\">|</span> sh -s -- --default-toolchain none -y\n$ <span class=\"nb\">source</span> ~/.elan/env\n$ lean +leanprover/lean4:nightly-2022-09-12\ninfo: downloading component <span class=\"s1\">'lean'</span>\nerror: binary package was not provided <span class=\"k\">for</span> <span class=\"s1\">'linux'</span>\n</code></pre></div>\n<p>Has anybody else run into this error as well?</p>",
        "id": 298391364,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1662992554
    },
    {
        "content": "<p>A student of mine also had this issue earlier, but with Windows and manual <code>lake build</code>. Both nightly-2022-09-11 and nightly-2022-09-07 (I think).</p>",
        "id": 298397191,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1662994397
    },
    {
        "content": "<p>I'm also getting 500 errors on github itself, so maybe this is just a general outage.</p>",
        "id": 298398256,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1662994746
    },
    {
        "content": "<p>Mmmh, this is strange.  I'm still getting the errors, but Lean 3 releases seem to be completely unaffected.</p>",
        "id": 298410903,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1662998260
    },
    {
        "content": "<p>I've run into the same issue for recent nightly:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">Î»</span> <span class=\"n\">elan</span> <span class=\"n\">update</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">syncing</span> <span class=\"n\">channel</span> <span class=\"n\">updates</span> <span class=\"n\">for</span> <span class=\"bp\">'</span><span class=\"n\">nightly'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">latest</span> <span class=\"n\">update</span> <span class=\"n\">on</span> <span class=\"n\">nightly</span><span class=\"o\">,</span> <span class=\"n\">lean</span> <span class=\"n\">version</span> <span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"mi\">2022</span><span class=\"bp\">-</span><span class=\"mi\">09</span><span class=\"bp\">-</span><span class=\"mi\">12</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">downloading</span> <span class=\"n\">component</span> <span class=\"bp\">'</span><span class=\"n\">lean'</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">binary</span> <span class=\"n\">package</span> <span class=\"n\">was</span> <span class=\"n\">not</span> <span class=\"n\">provided</span> <span class=\"n\">for</span> <span class=\"bp\">'</span><span class=\"n\">linux'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">syncing</span> <span class=\"n\">channel</span> <span class=\"n\">updates</span> <span class=\"n\">for</span> <span class=\"bp\">'</span><span class=\"n\">stable'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">latest</span> <span class=\"n\">update</span> <span class=\"n\">on</span> <span class=\"n\">stable</span><span class=\"o\">,</span> <span class=\"n\">lean</span> <span class=\"n\">version</span> <span class=\"n\">v4.0.0</span><span class=\"bp\">-</span><span class=\"n\">m5</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">syncing</span> <span class=\"n\">channel</span> <span class=\"n\">updates</span> <span class=\"n\">for</span> <span class=\"bp\">'</span><span class=\"n\">nightly'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">latest</span> <span class=\"n\">update</span> <span class=\"n\">on</span> <span class=\"n\">nightly</span><span class=\"o\">,</span> <span class=\"n\">lean</span> <span class=\"n\">version</span> <span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"mi\">2020</span><span class=\"bp\">-</span><span class=\"mi\">01</span><span class=\"bp\">-</span><span class=\"mi\">15</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">syncing</span> <span class=\"n\">channel</span> <span class=\"n\">updates</span> <span class=\"n\">for</span> <span class=\"bp\">'</span><span class=\"n\">stable'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"n\">latest</span> <span class=\"n\">update</span> <span class=\"n\">on</span> <span class=\"n\">stable</span><span class=\"o\">,</span> <span class=\"n\">lean</span> <span class=\"n\">version</span> <span class=\"n\">v3.4.2</span>\n\n  <span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">nightly</span> <span class=\"n\">update</span> <span class=\"n\">failed</span> <span class=\"bp\">-</span> <span class=\"n\">Lean</span> <span class=\"o\">(</span><span class=\"n\">version</span> <span class=\"mi\">4</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">-</span><span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"mi\">2022</span><span class=\"bp\">-</span><span class=\"mi\">09</span><span class=\"bp\">-</span><span class=\"mi\">11</span><span class=\"o\">,</span> <span class=\"n\">commit</span> <span class=\"mi\">1749210</span><span class=\"n\">a4b39</span><span class=\"o\">,</span> <span class=\"n\">Release</span><span class=\"o\">)</span>\n       <span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">stable</span> <span class=\"n\">unchanged</span> <span class=\"bp\">-</span> <span class=\"n\">Lean</span> <span class=\"o\">(</span><span class=\"n\">version</span> <span class=\"mi\">4</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"bp\">.</span><span class=\"mi\">0</span><span class=\"o\">,</span> <span class=\"n\">commit</span> <span class=\"mi\">7</span><span class=\"n\">dbfaf9b7519</span><span class=\"o\">,</span> <span class=\"n\">Release</span><span class=\"o\">)</span>\n       <span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"n\">nightly</span> <span class=\"n\">unchanged</span> <span class=\"bp\">-</span> <span class=\"n\">Lean</span> <span class=\"o\">(</span><span class=\"n\">version</span> <span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">4</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"o\">,</span> <span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"mi\">2020</span><span class=\"bp\">-</span><span class=\"mi\">01</span><span class=\"bp\">-</span><span class=\"mi\">15</span><span class=\"o\">,</span> <span class=\"n\">commit</span> <span class=\"mi\">72</span><span class=\"n\">a965986fa5</span><span class=\"o\">,</span> <span class=\"n\">Release</span><span class=\"o\">)</span>\n        <span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"n\">stable</span> <span class=\"n\">unchanged</span> <span class=\"bp\">-</span> <span class=\"n\">Lean</span> <span class=\"o\">(</span><span class=\"n\">version</span> <span class=\"mi\">3</span><span class=\"bp\">.</span><span class=\"mi\">4</span><span class=\"bp\">.</span><span class=\"mi\">2</span><span class=\"o\">,</span> <span class=\"n\">commit</span> <span class=\"n\">cbd2b6686ddb</span><span class=\"o\">,</span> <span class=\"n\">Release</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 298416524,
        "sender_full_name": "John Burnham",
        "timestamp": 1662999963
    },
    {
        "content": "<p>I think it's a github outage based on twitter and <a href=\"https://downdetector.com/status/github/\">https://downdetector.com/status/github/</a> reports, but what's strange is that I can manually download from <a href=\"https://github.com/leanprover/lean4-nightly/releases/tag/nightly-2022-09-12\">https://github.com/leanprover/lean4-nightly/releases/tag/nightly-2022-09-12</a></p>",
        "id": 298417976,
        "sender_full_name": "John Burnham",
        "timestamp": 1663000428
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"110024\">@Sebastian Ullrich</span> In case you haven't seen it already.</p>",
        "id": 298418148,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1663000487
    },
    {
        "content": "<p>My hopes are on \"outage\". Wouldn't be the first time.</p>",
        "id": 298418429,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1663000572
    },
    {
        "content": "<p>I don't think this is an outage issue. The GitHub page now seems to load the asset list lazily (grep <a href=\"https://github.com/leanprover/lean4-nightly/releases/tag/nightly-2022-09-08\">https://github.com/leanprover/lean4-nightly/releases/tag/nightly-2022-09-08</a> 's source for <a href=\"https://github.com/leanprover/lean4-nightly/releases/expanded_assets/nightly-2022-09-08\">https://github.com/leanprover/lean4-nightly/releases/expanded_assets/nightly-2022-09-08</a> to see what I mean). Perhaps this only happens after a certain number of assets?</p>",
        "id": 298423362,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1663002096
    },
    {
        "content": "<p>Can you check <a href=\"https://github.com/leanprover-community/lean/releases\">https://github.com/leanprover-community/lean/releases</a>?  Is it loaded non-lazily?</p>",
        "id": 298423618,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1663002175
    },
    {
        "content": "<p>Yes, if you wget the lean 3 releases page you can see the tarball URLs, but <a href=\"https://github.com/leanprover/lean4-nightly/releases\">https://github.com/leanprover/lean4-nightly/releases</a> only has a bunch of <code>https://github.com/leanprover/lean4-nightly/releases/expanded_assets</code>-starting links</p>",
        "id": 298424134,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1663002326
    },
    {
        "content": "<p>You can even see this in-browser: One asset list is collapsed by default while the other is not.</p>\n<p>Edit: Never mind, the interface change is not a good indicator. Old Lean 3 releases have collapsed assets which are not lazy-loaded. But the Lean 4 assets all seem to be lazily loaded.</p>",
        "id": 298424285,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1663002367
    },
    {
        "content": "<p>Uh oh.</p>",
        "id": 298425734,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1663002872
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/elan/pull/83\">https://github.com/leanprover/elan/pull/83</a></p>",
        "id": 298428301,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1663003774
    },
    {
        "content": "<p>Time to create a Lean version of <code>elan</code> using gh CLI ?</p>\n<ul>\n<li>gh release list -R <a href=\"https://github.com/leanprover/lean4-nightly/\">https://github.com/leanprover/lean4-nightly/</a></li>\n<li>gh release download nightly-2022-09-12 -R <a href=\"https://github.com/leanprover/lean4-nightly/\">https://github.com/leanprover/lean4-nightly/</a> -p  *-linux.tar.zst</li>\n</ul>",
        "id": 298433508,
        "sender_full_name": "Chris Lovett",
        "timestamp": 1663005508
    },
    {
        "content": "<p>Gitpod is unusable in recent mathlib(3) PRs due to this problem. What else should be done to fix it now that <a href=\"https://github.com/leanprover/elan/pull/83\">https://github.com/leanprover/elan/pull/83</a> has been merged?</p>",
        "id": 299599629,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1663604608
    },
    {
        "content": "<p>A Docker image probably needs to be rebuilt, but in the meantime you can run <code>elan self update</code> inside the Gitpod VS Code terminal</p>",
        "id": 299602860,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1663605674
    },
    {
        "content": "<p>(and then click on any error message buttons that showed up when you opened Gitpod, such as <code>Run leanpkg configure</code> and <code>Restart lean</code>)</p>",
        "id": 299603235,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1663605822
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Scott Morrison</span>, are you able to rebuild the docker images? I think only you have permission to publish them</p>",
        "id": 299608290,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1663607455
    },
    {
        "content": "<p>I just tried this gitpod (<a href=\"https://gitpod.io/#https://github.com/leanprover/lean4-samples\">https://gitpod.io/#https://github.com/leanprover/lean4-samples</a>) and it worked fine:<br>\n<a href=\"/user_uploads/3121/o3uEbU4qeR0QLEkbyx5iIzbe/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/o3uEbU4qeR0QLEkbyx5iIzbe/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/o3uEbU4qeR0QLEkbyx5iIzbe/image.png\"></a></div>",
        "id": 299636768,
        "sender_full_name": "Chris Lovett",
        "timestamp": 1663618042
    },
    {
        "content": "<p>I think it's just the lean3 docker containers that are the issue, as they're hosted elsewhere rather than rebuild by gitpod</p>",
        "id": 299637568,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1663618373
    },
    {
        "content": "<p>I use gitpod and I'm also having this problem with my lean3 project. It is unusable now.</p>",
        "id": 300645542,
        "sender_full_name": "Bernd Losert",
        "timestamp": 1664109516
    },
    {
        "content": "<p>See the advice above, <code>elan self update</code> makes it usable again</p>",
        "id": 300651496,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1664112968
    },
    {
        "content": "<p>I tried that. Didn't work. I had installed lean in my gitpod using brew. I tried the curl script to see if there is any difference. I got further, but now I'm getting hundreds of errors of the form \"invalid object declaration\" and \"excessive memory consumption detected\".</p>",
        "id": 300653867,
        "sender_full_name": "Bernd Losert",
        "timestamp": 1664114388
    },
    {
        "content": "<p><a href=\"http://www.gitpodstatus.com\">www.gitpodstatus.com</a> says \"In eu68 and us68 clusters, we have diagnosed issues that cause git push and loading of dotfiles to fail. We've ceased the traffic shift to eu68 and us68, please stop running workspaces on those clusters, restart your workspaces, and they'll land on eu67 and us67. We're currently investigating the issue, and will provide an update soon.\"</p>",
        "id": 300655100,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1664114995
    },
    {
        "content": "<p>Loading of dotfiles seems to be the problem for me at the moment - it won't load .profile.</p>",
        "id": 300662002,
        "sender_full_name": "Bernd Losert",
        "timestamp": 1664118978
    }
]