[
    {
        "content": "<p>Forgive me for lacking expertise in programming language design and other related areas. As far as I know, Lean code is transpiled to C code, as explained below.</p>\n<p>From <a href=\"https://lean-lang.org/doc/reference/latest//Elaboration-and-Compilation/#elaboration-results\">https://lean-lang.org/doc/reference/latest//Elaboration-and-Compilation/#elaboration-results</a>:</p>\n<blockquote>\n<p>Finally, the compiler is invoked to translate the intermediate representation of functions stored in its environment extension into C code. A C file is produced for each Lean module; these are then compiled to native code using a bundled C compiler.</p>\n</blockquote>\n<p>However, Lean uses garbage collection, so I guess its performance is generally worse than other languages using manual memory management.</p>\n<p>According to <a href=\"https://learn.adacore.com/courses/intro-to-ada/index.html\">\"Introduction to Ada,\"</a> Ada's performance is comparable to that of C. Then, does Ada perform better than Lean?</p>\n<p>From <a href=\"https://learn.adacore.com/courses/Ada_For_The_Embedded_C_Developer/chapters/08_Performance.html\">https://learn.adacore.com/courses/Ada_For_The_Embedded_C_Developer/chapters/08_Performance.html</a>:</p>\n<blockquote>\n<p>All in all, there should not be significant performance differences between code written in Ada and code written in C, provided that they are semantically equivalent. Taking the current GNAT implementation and its GCC C counterpart for example, most of the code generation and optimization phases are shared between C and Ada — so there's not one compiler more efficient than the other. Furthermore, the two languages are fairly similar in the way they implement imperative semantics, in particular with regards to memory management or control flow. They should be equivalent on average.</p>\n</blockquote>",
        "id": 530384019,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1753286943
    },
    {
        "content": "<p>It doesn't use garbage collection but reference counting with reset-reuse. Still, the performance is probably worse than in Ada because again, reference counting and because almost all types are stored on the heap and not on the stack (there are plans to change this though).</p>",
        "id": 530386359,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1753287521
    },
    {
        "content": "<p>Thanks for the correction. I've recently become interested in Ada because there's a programming language called <a href=\"https://learn.adacore.com/courses/intro-to-spark/index.html\">SPARK</a>, which is based on a subset of Ada and is targeted at functional specification and static verification.</p>",
        "id": 530387535,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1753287922
    },
    {
        "content": "<p>I think it'd be nice if we had a toolchain that translates Ada/SPARK programs to functional models in Lean. However, we already have <a href=\"https://aeneasverif.github.io/\">Aeneas</a>, and I suppose people are currently much more excited about Rust rather than Ada/SPARK.</p>",
        "id": 530388607,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1753288242
    },
    {
        "content": "<p>We did some smaller projects with ADA/Spark a decade ago. It worked quite well and the measured performance was sometimes even better than C implementations.  Unfortunately, ADA only became established within a narrow circle. Currently, I would rather rely on Rust and projects like Aeneas.</p>",
        "id": 530408498,
        "sender_full_name": "Steffen Reith",
        "timestamp": 1753295201
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/channel/113488-general/topic/Performance.20comparison.20between.20Lean.20and.20Ada/near/530387535\">said</a>:</p>\n<blockquote>\n<p>Thanks for the correction. I've recently become interested in Ada because there's a programming language called <a href=\"https://learn.adacore.com/courses/intro-to-spark/index.html\">SPARK</a>, which is based on a subset of Ada and is targeted at functional specification and static verification.</p>\n</blockquote>\n<p>I'm also interested into Ada/Spark and thought about that some time ago too. Unfortunately, I am not anywhere close to familiar with lean4 to do something like that on my own.</p>",
        "id": 530410042,
        "sender_full_name": "Nina Chloé Kassi",
        "timestamp": 1753295721
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/stream/113488-general/topic/Performance.20comparison.20between.20Lean.20and.20Ada/near/530384019\">said</a>:</p>\n<blockquote>\n<p>Forgive me for lacking expertise in programming language design and other related areas. As far as I know, Lean code is transpiled to C code, as explained below.</p>\n</blockquote>\n<p>Also worth noting that there is a new compiler incoming that doesn't compile to C (as far as I understand) and should have more control over stuff like unboxing certain types etc in the future, so the new compiler should also improve performance in the long run</p>",
        "id": 530419589,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1753299307
    },
    {
        "content": "<p>The new compiler is already enabled and compiles to C; not sure about plans for switching to LLVM; iirc this was tested before though and the performance was worse with LLVM than going through C. Still unboxing is a plan, even if going through C to do so.</p>",
        "id": 530422064,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1753300379
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315434\">Andrés Goens</span> <a href=\"#narrow/channel/113488-general/topic/Performance.20comparison.20between.20Lean.20and.20Ada/near/530419589\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/stream/113488-general/topic/Performance.20comparison.20between.20Lean.20and.20Ada/near/530384019\">said</a>:</p>\n<blockquote>\n<p>Forgive me for lacking expertise in programming language design and other related areas. As far as I know, Lean code is transpiled to C code, as explained below.</p>\n</blockquote>\n<p>Also worth noting that there is a new compiler incoming that doesn't compile to C (as far as I understand) and should have more control over stuff like unboxing certain types etc in the future, so the new compiler should also improve performance in the long run</p>\n</blockquote>\n<p>The LLVM backend has existed for years at this point, it's just not enabled by default because it is a few percent slower than C and we didn't figure out why at the time.</p>",
        "id": 530431489,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1753304167
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/channel/113488-general/topic/Performance.20comparison.20between.20Lean.20and.20Ada/near/530388607\">said</a>:</p>\n<blockquote>\n<p>I think it'd be nice if we had a toolchain that translates Ada/SPARK programs to functional models in Lean. However, we already have <a href=\"https://aeneasverif.github.io/\">Aeneas</a>, and I suppose people are currently much more excited about Rust rather than Ada/SPARK.</p>\n</blockquote>\n<p>More References are not that bad, I think. Do you think something like Aeneas for Ada could be of use?</p>\n<p>I know Rust has a larger fanbase, but based on the vast amount of programming languages, I doubt,  that there will be always that interest in Rust and Ada has some differences from Rust, that could be an actual advantage (e. g. Spark).</p>\n<p>Also there is Why3 ( <a href=\"https://www.why3.org/\">https://www.why3.org/</a> ) which is used within Spark. even if not directly interfacing Ada, interfacing with Why3 (supporting also languages like C) could be a base for Ada X lean4 programs / proofs, I think.</p>",
        "id": 530768037,
        "sender_full_name": "Nina Chloé Kassi",
        "timestamp": 1753447984
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/113488-general/topic/Performance.20comparison.20between.20Lean.20and.20Ada/near/530431489\">said</a>:</p>\n<blockquote>\n<p>The LLVM backend has existed for years at this point, it's just not enabled by default because it is a few percent slower than C and we didn't figure out why at the time.</p>\n</blockquote>\n<p>Does this imply that you have figured out why at <em>this</em> time?</p>",
        "id": 530809392,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1753460946
    },
    {
        "content": "<p>No</p>",
        "id": 530828683,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1753468587
    }
]