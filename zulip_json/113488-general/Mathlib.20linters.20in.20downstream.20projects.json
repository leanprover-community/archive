[
    {
        "content": "<p>Mathlib defines several linters and tries to be mindful of which ones are on both in mathlib and downstream, and which ones are on in mathlib and off downstream.</p>",
        "id": 514556738,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1745686453
    },
    {
        "content": "<p>However, some projects may want to align with mathlib's choices by default, without having to track closely changes to mathlib and updating their <code>lakefile</code>s continuously.</p>",
        "id": 514556747,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1745686458
    },
    {
        "content": "<p>Should there be an option like <code>Mathlib.linter.all</code> which, when <code>true</code>, means that all the linters that are on in mathlib are automatically on downstream?  This would mean adding a single (weak) option to the lakefile of downstream projects and then all the mathlib linters are active.</p>",
        "id": 514556750,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1745686460
    },
    {
        "content": "<p>That would suit me fine! I find myself adding mathlib linters bit by bit. Presumably I'd be able to do \"all mathlib linters apart from these two\"?</p>",
        "id": 514556919,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745686604
    },
    {
        "content": "<p>I would have to think about how overriding works, but of course it is something desirable.</p>",
        "id": 514556969,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1745686642
    },
    {
        "content": "<p>(And it is your FLT stream where this has come up most recently!)</p>",
        "id": 514556999,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1745686673
    },
    {
        "content": "<p>So, basically there should be mechanism that allows to say \"<em>all</em> linters except...\".  Right now you can only do \"<em>no</em> linters, except...\".</p>",
        "id": 514557113,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1745686753
    },
    {
        "content": "<p>Having such a mechanism would be useful for all repositories that are developing material with the idea of upstreaming to mathlib.</p>",
        "id": 514557409,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1745686930
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/113488-general/topic/Mathlib.20linters.20in.20downstream.20projects/near/514556750\">said</a>:</p>\n<blockquote>\n<p>Should there be an option like <code>Mathlib.linter.all</code> which, when <code>true</code>, means that all the linters that are on in mathlib are automatically on downstream?  This would mean adding a single (weak) option to the lakefile of downstream projects and then all the mathlib linters are active.</p>\n</blockquote>\n<p>Good news! <a href=\"https://github.com/leanprover/lean4/pull/8106\">lean4#8106</a> is intended to make exactly this possible!</p>",
        "id": 514828105,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1745850172
    },
    {
        "content": "<p>The way linters are checked currently, explicitly set individual linter options have highest priority, then <code>linter.all</code>, then the option default value. So you can enable or disable all linters at once using <code>set_option linter.all false</code>, then dis/enable specific ones with <code>set_option linter.myFavouriteLinter true</code>.</p>",
        "id": 514829118,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1745850413
    },
    {
        "content": "<p>This is great; the code looks basically good to me. (See github for my detailed comments.)</p>",
        "id": 514830095,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1745850637
    }
]