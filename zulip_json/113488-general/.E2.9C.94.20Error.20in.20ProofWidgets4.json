[
    {
        "content": "<p>I'm quite new to Lean, so I'm still very unfamiliar with how to import external libraries.<br>\nAt the moment, I was trying to get ProofWidgets4 to work, in order to do so visualizations.</p>\n<p>After a bit of tweaking, I got it to work with the basic example in the Readme. Then I went to the demos, and I tried to get an example that displayed SVG. This time, I got errors. I was able to narrow it down to the import line <code>import ProofWidgets.Data.Svg</code>.</p>\n<p>The error I get is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">mapFinIdx'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Array</span><span class=\"bp\">.</span><span class=\"n\">mapFinIdx'</span>\n<span class=\"w\">  </span><span class=\"n\">elements</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Svg</span><span class=\"bp\">.</span><span class=\"n\">Element</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">builds</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">ProofWidgets</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Svg</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n</code></pre></div>\n<p>Any ideas on what might be going on? It seems that this <code>Array.mapFinIdx</code> is the issue. But I'm not sure where this comes from. Is it something related to the lean version or something?</p>",
        "id": 483115058,
        "sender_full_name": "DSB",
        "timestamp": 1731961082
    },
    {
        "content": "<p>How did you install Lean?</p>",
        "id": 483121167,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731963176
    },
    {
        "content": "<p>Here <a href=\"https://leanprover-community.github.io/install/macos.html\">https://leanprover-community.github.io/install/macos.html</a>.</p>",
        "id": 483123056,
        "sender_full_name": "DSB",
        "timestamp": 1731963843
    },
    {
        "content": "<p>I've created a whole new project with Mathlib imported. Then I used the <code>lakefile.toml</code> instead of <code>lakefile.lean</code>, and now it is working.</p>",
        "id": 483127152,
        "sender_full_name": "DSB",
        "timestamp": 1731965425
    },
    {
        "content": "<p>Not sure why the previous one was giving this error.</p>",
        "id": 483127169,
        "sender_full_name": "DSB",
        "timestamp": 1731965436
    },
    {
        "content": "<p>Conjecture: without mathlib you had proofwidgets depending on a different version of Lean to the one you were using; but with mathlib things sorted themselves out?</p>",
        "id": 483130040,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731966459
    },
    {
        "content": "<p>I think it might be related to lean 4.14 vs 4.13.<br>\nBut yeah, now it is working.</p>",
        "id": 483134838,
        "sender_full_name": "DSB",
        "timestamp": 1731968333
    },
    {
        "content": "<p>Right -- if you create a new project with mathlib as a dependency then lake sorts all these issues out and just goes with \"the version of lean which mathlib uses\", downloading that version of lean and also an appropriate version of proofwidgets which works on that version of lean</p>",
        "id": 483136272,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731968940
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"709428\">DSB</span> has marked this topic as resolved.</p>",
        "id": 483238020,
        "sender_full_name": "Notification Bot",
        "timestamp": 1732014749
    }
]