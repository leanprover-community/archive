[
    {
        "content": "<p>This topic was touched in more threads, so I thought of making a thread on its own. Currently, Lean does not distinguish choice and unique choice. The question is what would be a good way of tracing which definitions do not depend on particular values of the choice function.</p>",
        "id": 565967158,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1767261759
    },
    {
        "content": "<p>Why should we want this:</p>\n<ul>\n<li>More completeness. If a claim does not use a choice-dependent definition, it is more likely to be provable or disprovable.</li>\n<li>Modelling with ZFC. In logic based on set-theory, uniqueness if often an essential fact about a definition. For example I believe Mizar requires a proof of uniqueness to make a definition (although I don't know the details).</li>\n<li>Better order in the definitions. Currently, definitions using <code>choice</code> just have it mentioned in the doc-string.</li>\n</ul>",
        "id": 565967478,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1767262207
    },
    {
        "content": "<p>Why it is not as simple</p>\n<ul>\n<li>Arbitrary choice doesn't matter if it hidden in a proof. So adding a <code>unique_choice</code> axiom, and wanting non-arbitrary definitions to only depend on that is too restrictive.</li>\n<li>There is no way to make <code>Ordinal.ToType</code> or <code>Cardinal.out</code>non-arbitrary in Lean due to universe constraints (although it doesn't feel like making arbitrary choices).</li>\n<li><code>choice</code> is sometimes used for dummy values (for example in <code>limUnder</code>) which is unfortunate. If Lean starts caring about arbitrary definitions at some point, it should perhaps reconsider such cases</li>\n</ul>",
        "id": 565967704,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1767262545
    },
    {
        "content": "<p>In another <a href=\"#narrow/channel/113488-general/topic/Fintype.20vs.2E.20Finite/near/560651207\">thread</a>, <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> mentioned we could perhaps add a tag <code>arbitrary</code> (like <code>uncomputable</code>) which could track that the definition uses <code>Classical.choice</code> in an essential way.</p>",
        "id": 565967841,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1767262742
    },
    {
        "content": "<p>I don't believe you're going to gain much traction in adding new axioms to Mathlib.</p>",
        "id": 565969119,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767264422
    },
    {
        "content": "<p>Adding a new axiom is not the suggestion. I rather explained in the first point of \"Why it is not as simple\" why adding an axiom is not a solution.</p>",
        "id": 565971961,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1767267443
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/marking.20definitions.20as.20aritrary\">#general &gt; marking definitions as aritrary</a> by <span class=\"user-mention silent\" data-user-id=\"133339\">Mirek Olšák</span>.</p>",
        "id": 565971983,
        "sender_full_name": "Notification Bot",
        "timestamp": 1767267472
    },
    {
        "content": "<p>You could prove a lemma that the choice is unique. And potentially register an attribute that such lemmas can be tagged with.</p>",
        "id": 566058396,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1767360731
    },
    {
        "content": "<p>I don't think it is possible to state \"Function <code>f</code> doesn't depend on the values of <code>Classical.choice</code>.\" as a lemma.</p>",
        "id": 566058868,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1767361015
    },
    {
        "content": "<p>It is rather a meta-property.</p>",
        "id": 566058978,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1767361087
    },
    {
        "content": "<p>But you can prove that some predicate is satisfied uniquely, right? Maybe I'm missing something obvious...</p>",
        "id": 566066438,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1767365628
    },
    {
        "content": "<p>I think Mirek is talking about functions whose definitions depend on <code>Classical.choice</code> and you're talking about the things one applies <code>Classical.choice</code> to.</p>",
        "id": 566094779,
        "sender_full_name": "James E Hanson",
        "timestamp": 1767382997
    },
    {
        "content": "<p>Given a function already defined in terms of <code>Classical.choice</code>, there's no internal way to extract a parameterized version of the function that depends on an explicit choice of choice function.</p>",
        "id": 566094899,
        "sender_full_name": "James E Hanson",
        "timestamp": 1767383096
    },
    {
        "content": "<p>But one certainly could write a script that produces such a thing, which is maybe what you're thinking of.</p>",
        "id": 566094936,
        "sender_full_name": "James E Hanson",
        "timestamp": 1767383117
    },
    {
        "content": "<p>Aha, thanks for clarifying!</p>",
        "id": 566149446,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1767446792
    },
    {
        "content": "<p>My general opinion on matters surrounding choice is that Mathlib does not and should not shy away from the axiom.</p>",
        "id": 566192447,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767494016
    },
    {
        "content": "<p>We could certainly be more careful with it, avoiding it when unnecessary, adding decidability assumptions everywhere, cataloguing which uses are of unique choice and which uses are \"real\" choice. But that would be more annoying for everyone at the convenience of like five people. That ship sailed long ago.</p>",
        "id": 566192536,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767494154
    },
    {
        "content": "<p>Turning it around, if there's things that can be done that <em>don't</em> increase the maintenance burden on other mathlib contributors and maintainers, but do improve the situation for people who care about constructivism, I don't see a reason to reject those out of hand. But that's a big \"if\".</p>",
        "id": 566208131,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1767516524
    },
    {
        "content": "<p>I don't think mathematicians care about constructivism, but they care about explicit (non-choicy) definitions.</p>",
        "id": 566212309,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1767521328
    },
    {
        "content": "<p>Maybe, we could just first write an analysis tool which checks which Mathlib definitions are choice-dependent.</p>",
        "id": 566212384,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1767521401
    },
    {
        "content": "<p>Isn't it (theoretically) possible to make computable any definition that does not \"really\" make use of choice?<br>\nLike you can imagine checking every possible value and terminating at the first one that works, and then you prove that such a value exists and is unique.</p>",
        "id": 566567058,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1767713451
    },
    {
        "content": "<p>In this case avoiding (Lean's version of) choice is the same as just giving a construction</p>",
        "id": 566567127,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1767713471
    },
    {
        "content": "<p>That requires countability of the domain, and decidability of the predicate.</p>",
        "id": 566573183,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1767715272
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"400289\">Artie Khovanov</span> <a href=\"#narrow/channel/113488-general/topic/marking.20definitions.20as.20arbitrary/near/566567058\">said</a>:</p>\n<blockquote>\n<p>Isn't it (theoretically) possible to make computable any definition that does not \"really\" make use of choice?<br>\nLike you can imagine checking every possible value and terminating at the first one that works, and then you prove that such a value exists and is unique.</p>\n</blockquote>\n<p>This is essentially Markov's principle, which is one of the main logical principles that are \"computable\" (ie. true in some realizability interpretation) but not strictly constructive.</p>",
        "id": 566654983,
        "sender_full_name": "Trebor Huang",
        "timestamp": 1767755989
    }
]