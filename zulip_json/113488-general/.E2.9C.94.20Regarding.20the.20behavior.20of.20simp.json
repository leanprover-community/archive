[
    {
        "content": "<p>What does simp do when the [simp] attribute is added to a theorem that is neither an equation nor a logical equivalence?</p>",
        "id": 526042865,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1751015492
    },
    {
        "content": "<p>If the conclusion of the lemma is <code>P</code>, it adds the rewrite rule <code>P = True</code> (under the same hypotheses).</p>",
        "id": 526050314,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1751018395
    },
    {
        "content": "<p>Some other variants are <code>= False</code> (rarely <code>= true</code> or <code>= false</code>) for <code>¬</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">MyCases</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">abc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyCases</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">xyz</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyCases</span><span class=\"w\"> </span><span class=\"mi\">9</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyCases</span><span class=\"w\"> </span><span class=\"mi\">42</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyCases</span><span class=\"w\"> </span><span class=\"mi\">7</span>\n\n<span class=\"c1\">-- MyCases 3 = True</span>\n<span class=\"c1\">-- MyCases 9 = True</span>\n<span class=\"c1\">-- MyCases 42 = True</span>\n<span class=\"c1\">-- MyCases 7 = True</span>\n<span class=\"kn\">attribute</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">simp</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">MyCases</span><span class=\"bp\">.</span><span class=\"n\">abc</span><span class=\"w\"> </span><span class=\"n\">MyCases</span><span class=\"bp\">.</span><span class=\"n\">xyz</span><span class=\"w\"> </span><span class=\"n\">MyCases</span><span class=\"bp\">.</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">MyCases</span><span class=\"bp\">.</span><span class=\"n\">bar</span>\n\n<span class=\"c1\">-- MyCases 0 = False</span>\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">MyCases</span><span class=\"bp\">.</span><span class=\"n\">not_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">MyCases</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">nofun</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myCases</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"bp\">||</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">7</span>\n\n<span class=\"c1\">-- myCases 0 = false</span>\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">not_myCases_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">myCases</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">myCases</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- myCases 3 = true</span>\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">not_myCases_three_eq_false</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">myCases</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">myCases</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- myCases 9 = true</span>\n<span class=\"c1\">-- myCases 10 = false</span>\n<span class=\"c1\">-- myCases 42 = true</span>\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">bunch_of_myCases</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">myCases</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">myCases</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">myCases</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">myCases</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 526051168,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751018664
    },
    {
        "content": "<p>thank you! <br>\nhow to see added rewrite rule directly?</p>",
        "id": 526051317,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1751018711
    },
    {
        "content": "<p>You can use <code>whatnew in</code> before the theorem (<code>import Mathlib.Util.WhatsNew</code>) and it will tell you of auxiliary theorems like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">bunch_of_myCases</span><span class=\"bp\">._</span><span class=\"n\">proof_3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">myCases</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">of_not_eq_false</span><span class=\"w\"> </span><span class=\"n\">bunch_of_myCases</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"m\">2</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">bunch_of_myCases</span><span class=\"bp\">._</span><span class=\"n\">proof_2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">myCases</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">of_not_eq_true</span><span class=\"w\"> </span><span class=\"n\">bunch_of_myCases</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">bunch_of_myCases</span><span class=\"bp\">._</span><span class=\"n\">proof_1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">myCases</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"n\">bunch_of_myCases</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n</code></pre></div>",
        "id": 526053009,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751019355
    },
    {
        "content": "<p>In older versions you find them by <code>theorem_name._proof_n</code></p>",
        "id": 526053138,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751019409
    },
    {
        "content": "<p>In newer versions they are under <code>theorem_name._simp_n</code></p>",
        "id": 526053175,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751019422
    },
    {
        "content": "<p>Thank you!!</p>",
        "id": 526189508,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1751100039
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> has marked this topic as resolved.</p>",
        "id": 526189509,
        "sender_full_name": "Notification Bot",
        "timestamp": 1751100045
    },
    {
        "content": "<p>(typo: <code>whatsnew in</code>)</p>",
        "id": 526198679,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1751111143
    }
]