[
    {
        "content": "<p>Lean allow me to do this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">infixl</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"s2\">\" +ₒ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>However, when writing <code>x +ₒ y</code>, you end up with <code>(fun x y ↦ x * 2 + y * 3) x y</code> instead of the nicer beta-reduced <code>x * 2 + y * 3</code>. Is there some way to sidestep this with a macro?</p>",
        "id": 531070275,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1753594662
    },
    {
        "content": "<p>(of course <code>x * 2 + y * 3</code> is some dummy expression in lieu of what I actually want; I also don't want to declare a new <code>def</code> or <code>abbrev</code> for this expression)</p>",
        "id": 531070375,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1753594708
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459227\">@Violeta Hernández</span> you can use <code>notation</code> instead</p>",
        "id": 531079013,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753598398
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n\n<span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"s2\">\"⊹\"</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">:</span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">⊹</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"bp\">.</span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"c1\">-- Foo.bar (a b : Nat) : a * 2 + b * 3 = 3</span>\n</code></pre></div>",
        "id": 531079447,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753598586
    },
    {
        "content": "<p>That's just what I wanted, thank you!</p>",
        "id": 531079549,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1753598628
    },
    {
        "content": "<p>also you might consider <code>scoped notation</code> instead of <code>local notation</code></p>",
        "id": 531079620,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753598660
    },
    {
        "content": "<p>Thanks, I think that might be more appropriate for my use case.</p>",
        "id": 531079685,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1753598686
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110064\">@Kenny Lau</span> Using <code>:arg</code> doesn't match the precedences in Violeta's notation. It doesn't mean arguments to an operator, but arguments to a function application.</p>\n<p>The correct analogue would be</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"s2\">\"⊹\"</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">:</span><span class=\"mi\">66</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n</code></pre></div>",
        "id": 531197181,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1753644010
    }
]