[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">says</span><span class=\"bp\">.</span><span class=\"n\">verify</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Function</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hgfinj</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Injective</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">aesop?</span><span class=\"w\"> </span><span class=\"n\">says</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a₁</span><span class=\"w\"> </span><span class=\"n\">a₂</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hgfinj</span>\n<span class=\"w\">    </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">comp_apply</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>This code did work in v4.23.0, but does not work in v4.24.0-rc1.<br>\nHow to fix this?</p>",
        "id": 540658297,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1758461652
    },
    {
        "content": "<p>Error message says:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">parse</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"n\">output</span><span class=\"o\">:</span>\n\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a₁</span><span class=\"w\"> </span><span class=\"n\">a₂</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hgfinj</span>\n<span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">comp_apply</span><span class=\"o\">]</span>\n\n<span class=\"bp\">&lt;</span><span class=\"n\">input</span><span class=\"bp\">&gt;</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">input</span>\n</code></pre></div>",
        "id": 540659287,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1758462636
    },
    {
        "content": "<p>interesting</p>",
        "id": 540659462,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758462818
    },
    {
        "content": "<p>regression of <code>says</code>?</p>",
        "id": 540660287,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1758463740
    },
    {
        "content": "<p>does it work with multiline suggestions from other tactics</p>",
        "id": 540660420,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1758463884
    },
    {
        "content": "<p>I think the indenting of the try this suggestions has changed, and someone needs to update <code>says</code> to accommodate this?</p>",
        "id": 541142387,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1758689730
    },
    {
        "content": "<p>I’m having trouble updating my project because of this bug.</p>",
        "id": 541147186,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1758692865
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/29930\">#29930</a></p>",
        "id": 541168144,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1758701660
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> Thank you!!!</p>",
        "id": 541457085,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1758806599
    },
    {
        "content": "<p>I've found another <code>says</code> problem in v4.24.0-rc1</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">says</span><span class=\"bp\">.</span><span class=\"n\">verify</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span><span class=\"cm\"> failed to parse tactic output -/</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span><span class=\"w\"> </span><span class=\"n\">says</span><span class=\"w\"> </span><span class=\"n\">ring_nf</span>\n<span class=\"w\">  </span><span class=\"n\">omega</span>\n</code></pre></div>",
        "id": 541468355,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1758809333
    }
]