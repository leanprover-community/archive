[
    {
        "content": "<p>i'm getting the following error: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">TypeError</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Cannot</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"n\">properties</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">reading</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">children'</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>even though none of my logic involves children in any way at all:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">React</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">useEffect</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">useRef</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">useState</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">react'</span><span class=\"bp\">;</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">d3</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">d3'</span><span class=\"bp\">;</span>\n\n<span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">GameStateTree</span><span class=\"o\">(</span><span class=\"n\">props</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"w\"> </span><span class=\"n\">treeData</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">tree</span><span class=\"w\"> </span><span class=\"bp\">??</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"root\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">children</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">root</span><span class=\"w\"> </span><span class=\"n\">node</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">game</span><span class=\"w\"> </span><span class=\"n\">state</span><span class=\"w\"> </span><span class=\"n\">tree</span>\n<span class=\"w\">  </span><span class=\"n\">const</span><span class=\"w\"> </span><span class=\"n\">svgRef</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">useRef</span><span class=\"o\">(</span><span class=\"n\">null</span><span class=\"o\">)</span><span class=\"bp\">;</span>\n\n\n<span class=\"w\">  </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"o\">(</span>\n<span class=\"w\">    </span><span class=\"n\">React</span><span class=\"bp\">.</span><span class=\"n\">createElement</span><span class=\"o\">(</span><span class=\"bp\">'</span><span class=\"n\">div'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">        </span><span class=\"n\">style</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">            </span><span class=\"n\">width</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">100</span><span class=\"bp\">%'</span><span class=\"o\">,</span>\n<span class=\"w\">            </span><span class=\"n\">height</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">100</span><span class=\"n\">vh'</span><span class=\"o\">,</span>\n<span class=\"w\">            </span><span class=\"n\">display</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">flex'</span><span class=\"o\">,</span>\n<span class=\"w\">            </span><span class=\"n\">flexDirection</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">column'</span><span class=\"o\">,</span>\n<span class=\"w\">            </span><span class=\"n\">background</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'#</span><span class=\"n\">f9fafb'</span>\n<span class=\"w\">        </span><span class=\"o\">}</span>\n<span class=\"w\">        </span><span class=\"o\">},</span>\n<span class=\"w\">        </span><span class=\"n\">React</span><span class=\"bp\">.</span><span class=\"n\">createElement</span><span class=\"o\">(</span><span class=\"bp\">'</span><span class=\"n\">div'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">            </span><span class=\"n\">style</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">            </span><span class=\"n\">flex</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">1</span><span class=\"bp\">'</span><span class=\"o\">,</span>\n<span class=\"w\">            </span><span class=\"n\">overflow</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">auto'</span>\n<span class=\"w\">            </span><span class=\"o\">}</span>\n<span class=\"w\">        </span><span class=\"o\">},</span>\n<span class=\"w\">            </span><span class=\"n\">React</span><span class=\"bp\">.</span><span class=\"n\">createElement</span><span class=\"o\">(</span><span class=\"bp\">'</span><span class=\"n\">svg'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">ref</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">svgRef</span><span class=\"w\"> </span><span class=\"o\">})</span>\n<span class=\"w\">        </span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">)</span>\n<span class=\"o\">}</span><span class=\"bp\">;</span>\n\n<span class=\"kn\">export</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"w\"> </span><span class=\"n\">GameStateTree</span><span class=\"bp\">;</span>\n</code></pre></div>",
        "id": 544545169,
        "sender_full_name": "Frederick Pu",
        "timestamp": 1760359906
    },
    {
        "content": "<p>It's hard to say what's going on without the accompanying Lean code. Fwiw,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">widget_module</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myWidget</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Widget</span><span class=\"bp\">.</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">javascript</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"&lt;JS CODE HERE&gt;\"</span>\n\n<span class=\"bp\">#</span><span class=\"n\">widget</span><span class=\"w\"> </span><span class=\"n\">myWidget</span>\n</code></pre></div>\n<p>works for me.</p>",
        "id": 544657168,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1760416339
    },
    {
        "content": "<p>i ended up fixing it by running <code>tsc</code> before rollup when building the js source files</p>",
        "id": 544754255,
        "sender_full_name": "Frederick Pu",
        "timestamp": 1760449708
    }
]