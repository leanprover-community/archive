[
    {
        "content": "<p>Say there's a type with two sorts of textual representations, one of which is easy to parse back but hard to read, and the other which is harder to parse back but much easier to read.</p>",
        "id": 479049893,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729948213
    },
    {
        "content": "<p>Am I correct in saying the former should be a <code>Repr</code> instance and the latter should be <code>ToString</code>?</p>",
        "id": 479049905,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729948227
    },
    {
        "content": "<p>Or, how does this generally work?</p>",
        "id": 479049908,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729948233
    },
    {
        "content": "<p>Well, I believe <code>Repr</code> is meant to represent the exact code used to build the structure. For example, in the datetime library PR, Markus (one of the members of Lean FRO leading the efforts to improve the Std) told me to make the <code>Repr</code> of a <code>DateTime</code> look like <code>date(\"2024-10-24T13:05:20\")</code> that is exactly the macro used to create the <code>DateTime</code> and then to use <code>ToString</code> for a human readable output that sometimes is not so easy to parse. So yeah, I think that your ideas are kinda like correct ~~</p>\n<p>The <code>Repr</code> documentation says: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">typeclass</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">specifies</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">standard</span><span class=\"w\"> </span><span class=\"n\">way</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">turning</span><span class=\"w\"> </span><span class=\"n\">values</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"n\">Format</span><span class=\"bp\">.</span>\n<span class=\"n\">When</span><span class=\"w\"> </span><span class=\"n\">rendered</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">Format</span><span class=\"w\"> </span><span class=\"n\">should</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">close</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">possible</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">something</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">parsed</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"w\"> </span><span class=\"n\">value</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 479061087,
        "sender_full_name": "Sofia Rodrigues",
        "timestamp": 1729958977
    },
    {
        "content": "<p>And I think that someone needs to create a PR explaining this in the docstrings of ToString just to add some clarity.</p>",
        "id": 479061463,
        "sender_full_name": "Sofia Rodrigues",
        "timestamp": 1729959260
    },
    {
        "content": "<p>Yeah, <code>ToString</code> is meant to be some sort of coercion to <code>String</code>, giving some sort of natural representation, with no concern for parsing. For example, the <code>ToString</code> instance for <code>String</code> is the identity function (it's already a string), but the <code>Repr</code> instance, which is supposed to be parseable, wraps it in quotation marks and transforms the string to use escape sequences when necessary.</p>",
        "id": 479062311,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729960094
    },
    {
        "content": "<p>Is there a way to make <code>#eval</code> default to the <code>ToString</code> representation rather than <code>Repr</code>? (Is this desirable?)</p>",
        "id": 479062358,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729960146
    },
    {
        "content": "<p>Do <code>#eval toString &lt;| e</code> instead of <code>#eval e</code>, if it's a pure value</p>",
        "id": 479062635,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729960391
    },
    {
        "content": "<p>In the next release, <code>#eval</code> will use the <code>ToExpr</code> instance over <code>Repr</code> or <code>ToString</code>. It tries each of these in order.</p>",
        "id": 479062655,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729960422
    },
    {
        "content": "<p>This way the result will be pretty printed just like in the Infoview.</p>",
        "id": 479062664,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729960438
    },
    {
        "content": "<p>Nice!</p>",
        "id": 479062691,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729960443
    }
]