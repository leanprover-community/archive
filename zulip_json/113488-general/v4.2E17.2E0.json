[
    {
        "content": "<p>Pre-emptively posted before <a href=\"#narrow/channel/113486-announce/topic/v4.2E17.2E0/near/503237115\">the announcement thread</a></p>\n<p>Since some people may already be running <code>lake update</code>...</p>\n<p>As a reminder, please consider updating your packages to <a href=\"https://github.com/leanprover-community/mathlib4/tree/v4.17.0\">the <code>v4.17.0</code> tag of mathlib</a> before moving on to v4.18.0rc1, as this provides a baseline mathlib version that all projects can be imported with.</p>",
        "id": 503079894,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741021632
    },
    {
        "content": "<p>You can do this by:</p>\n<ul>\n<li>making this change to your <code>lakefile.lean</code>:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"gd\">-require \"leanprover-community\" / \"mathlib\" @ git \"main\"</span>\n<span class=\"gi\">+require \"leanprover-community\" / \"mathlib\" @ git \"v4.17.0\"</span>\n</code></pre></div>\n<p>or to your <code>lakefile.toml</code></p>\n<div class=\"codehilite\" data-code-language=\"Diff\"><pre><span></span><code><span class=\"w\"> </span>[[require]]\n<span class=\"w\"> </span>name = \"mathlib\"\n<span class=\"w\"> </span>scope = \"leanprover-community\"\n<span class=\"gi\">+rev = \"v4.17.0\"</span>\n</code></pre></div>\n<ul>\n<li><code>lake update mathlib</code>, then fix the build errors</li>\n<li><code>git commit -m \"Update to Lean 4.17.0\"</code>, PR, etc</li>\n<li><code>git tag v4.17.0 &amp;&amp; git push origin v4.17.0</code></li>\n<li>Revert the diff to the <code>lakefile</code> above</li>\n<li><code>git commit -m \"Unpin the lean version\"</code>, PR, etc</li>\n</ul>",
        "id": 503081231,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741022001
    },
    {
        "content": "<p>I'm guessing your toml got confused</p>",
        "id": 503082347,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1741022333
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/v4.2E17.2E0/near/503079894\">said</a>:</p>\n<blockquote>\n<p>As a reminder, please consider updating your packages to <a href=\"https://github.com/leanprover-community/mathlib4/tree/v4.17.0\">the <code>v4.17.0</code> tag of mathlib</a> before moving on to v4.18.0rc1, as this provides a baseline mathlib version that all projects can be imported with.</p>\n</blockquote>\n<p>I don’t understand. What has changed from before?</p>",
        "id": 503091430,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1741025205
    },
    {
        "content": "<p>Are you asking what is new in v4.17.0? I'll leave that for a release post from the FRO</p>",
        "id": 503091607,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741025274
    },
    {
        "content": "<p>No I mean, what does it mean that it provides a baseline version of mathlib. I thought all projects with matching toolchains could import mathlib. What has changed?</p>",
        "id": 503093262,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1741025823
    },
    {
        "content": "<p>Is this a bugfix or an incompatibility that causes problems when updating from toolchains &lt; v4.17.0?</p>",
        "id": 503093396,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1741025882
    },
    {
        "content": "<p>I mean a baseline such that someone can write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"s2\">\"your\"</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"s2\">\"project\"</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"w\"> </span><span class=\"s2\">\"v4.17.0\"</span>\n<span class=\"n\">require</span><span class=\"w\"> </span><span class=\"s2\">\"my\"</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"s2\">\"work\"</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"w\"> </span><span class=\"s2\">\"v4.17.0\"</span>\n</code></pre></div>\n<p>and use theorems from both. It's no use being on the same lean version if you still need different mathlib versions. There is nothing special here about 4.17.0 vs any other version, what is notable is that today is release day and so a good day for this reminder.</p>",
        "id": 503093874,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741026054
    },
    {
        "content": "<p>I've been think for Mathlib it may be worthwhile to automatically tag <code>master-YYYY-MM-DD</code> every 24 hours, and to have a <code>daily</code> and/or <code>weekly</code> branch that automatically tracks these. (Downstream projects could then require <code>daily</code> or <code>weekly</code>) This would provide more synchronization points if desired.</p>",
        "id": 503121904,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1741035407
    },
    {
        "content": "<p>I think our current problem is not that our synchronization points are too infrequent, but that all our tooling encourages us to skip over them</p>",
        "id": 503122735,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741035700
    },
    {
        "content": "<p>It took me quite some time to even find the correct spelling for the toml pinning above!</p>",
        "id": 503122768,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741035719
    },
    {
        "content": "<p>Isn't the <code>toml</code> version above wrong?</p>",
        "id": 503125392,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741036740
    },
    {
        "content": "<p>Wrong in what way?</p>",
        "id": 503126123,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741037006
    },
    {
        "content": "<p>Don't you mean?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">+</span><span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.17.0\"</span>\n</code></pre></div>",
        "id": 503126211,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741037038
    },
    {
        "content": "<p>Or in general: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">+</span><span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"stable\"</span>\n</code></pre></div>",
        "id": 503130458,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1741038583
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>, the release notes repeatedly say <code>partial_fixpiont</code> instead of <code>partial_fixpoint</code></p>",
        "id": 503237462,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1741086140
    },
    {
        "content": "<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>(And we now have some nice automation helping us with the release process itself!)</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>% script/release_checklist.py v4.17.0                  </p>\n<p>Performing preliminary checks...<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Branch releases/v4.17.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> CMake version settings are correct in src/CMakeLists.txt<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Release page for v4.17.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Release notes look good.</p>\n<p>Checking repositories...</p>\n<p>Repository: Batteries<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 is merged into stable<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Bump branch bump/v4.18.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Bump branch correctly uses toolchain: leanprover/lean4:nightly-2025-03-03</p>\n<p>Repository: lean4checker<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 is merged into stable</p>\n<p>Repository: quote4<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 is merged into stable</p>\n<p>Repository: doc-gen4<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists</p>\n<p>Repository: Verso<br>\n<span aria-label=\"cross mark\" class=\"emoji emoji-274c\" role=\"img\" title=\"cross mark\">:cross_mark:</span> Not on target toolchain (needs ≥ v4.17.0, but main is on leanprover/lean4:nightly-2025-02-19)</p>\n<p>Repository: Cli<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists</p>\n<p>Repository: ProofWidgets4<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)</p>\n<p>Repository: Aesop<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 is merged into stable</p>\n<p>Repository: import-graph<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists</p>\n<p>Repository: plausible<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists</p>\n<p>Repository: Mathlib<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 is merged into stable<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Bump branch bump/v4.18.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Bump branch correctly uses toolchain: leanprover/lean4:v4.18.0-rc1</p>\n<p>Repository: REPL<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> On compatible toolchain (&gt;= v4.17.0)<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 exists<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> Tag v4.17.0 is merged into stable</p>\n<p>Checking lean4 master branch configuration...<br>\n<span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> lean4 master branch is configured for next development cycle</p>\n</div></div>",
        "id": 503237480,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1741086146
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/113488-general/topic/v4.2E17.2E0/near/503237462\">said</a>:</p>\n<blockquote>\n<p><code>partial_fixpiont</code></p>\n</blockquote>\n<p>All fixed, thanks.</p>",
        "id": 503238053,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1741086323
    }
]