[
    {
        "content": "<p>I would like to add some bits of <a href=\"https://tryapl.org/\">APL</a> notation in Lean. So I tried to do the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"s2\">\"⌿\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">foldl</span><span class=\"w\"> </span><span class=\"n\">f</span>\n\n<span class=\"bp\">#</span><span class=\"n\">reduce</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"bp\">⌿</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>But I would like to achieve this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">reduce</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"bp\">⌿</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">reduce</span><span class=\"w\"> </span><span class=\"bp\">+⌿</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>So I have the following questions:</p>\n<ul>\n<li>How to make <code>⌿</code> to bind more tightly, so parenthesis around <code>Nat.add⌿</code> would be unnecessary?</li>\n<li>How define a specific syntax for the case when there's an operator at the left of <code>⌿</code>?</li>\n</ul>",
        "id": 499824420,
        "sender_full_name": "suhr",
        "timestamp": 1739565685
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"s2\">\"⌿\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">foldl</span><span class=\"w\"> </span><span class=\"n\">f</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"bp\">⌿</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"mi\">3</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 499835357,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739569232
    },
    {
        "content": "<p>Thanks. Is it possible to specialize it for <code>+⌿ 0 [1,2,3]</code> as well?</p>",
        "id": 499889603,
        "sender_full_name": "suhr",
        "timestamp": 1739602997
    },
    {
        "content": "<p>no, i don't think so. you'd at the very least need to specify <code>(·+·)</code></p>",
        "id": 499894433,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1739607788
    },
    {
        "content": "<p>also note that there exists <code>postfix</code>, i.e. the following works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">postfix</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"s2\">\"⌿\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">foldl</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·+·</span><span class=\"o\">)</span><span class=\"bp\">⌿</span>\n</code></pre></div>",
        "id": 499894529,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1739607877
    },
    {
        "content": "<p>Yeah, <code>postfix</code> is a good choice for this (idiomatically I think it's <code>postfix:max</code>, no space). It's worth knowing that <code>postfix</code> is a macro for <code>notation</code>, so its benefit is that you don't have to write <code>f:max</code>.</p>",
        "id": 499933114,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739640827
    }
]