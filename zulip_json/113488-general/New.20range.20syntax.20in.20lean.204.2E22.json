[
    {
        "content": "<p>It's unfortunate that the new range syntax is a breaking change and not an additive one.<br>\nThis could have been done i'm sure:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"mf\">1.</span><span class=\"bp\">..*</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">1.</span><span class=\"bp\">..=</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">1.</span><span class=\"bp\">..&lt;</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">&lt;...=</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">*...=</span><span class=\"mf\">3.</span><span class=\"bp\">.</span>\n<span class=\"c1\">-- could have been</span>\n<span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">:]</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"bp\">=</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">â‰ </span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"bp\">=</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"o\">[:</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"bp\">=</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>this would have allowed non breaking change. am i missing something ?</p>",
        "id": 534445971,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1755165189
    },
    {
        "content": "<p>2 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"113486\" href=\"/#narrow/channel/113486-announce/topic/v4.2E22.2E0/with/534404161\">#announce &gt; v4.22.0</a> by <span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span>.</p>",
        "id": 534446214,
        "sender_full_name": "Notification Bot",
        "timestamp": 1755165286
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"942100\">ecyrbe</span> <a href=\"#narrow/channel/113488-general/topic/v4.2E22.2E0-rc2/near/534445971\">said</a>:</p>\n<blockquote>\n<p>It's unfortunate that the new range syntax is a breaking change and not an additive one.<br>\nThis could have been done i'm sure:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"mf\">1.</span><span class=\"bp\">..*</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">1.</span><span class=\"bp\">..=</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mf\">1.</span><span class=\"bp\">..&lt;</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">&lt;...=</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">*...=</span><span class=\"mf\">3.</span><span class=\"bp\">.</span>\n<span class=\"c1\">-- could have been</span>\n<span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">:]</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"bp\">=</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">â‰ </span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"bp\">=</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"o\">[:</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"bp\">=</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>this would have allowed non breaking change. am i missing something ?</p>\n</blockquote>\n<p>Non-breaking wasn't the highest priority consideration for this change.</p>",
        "id": 534446491,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755165384
    },
    {
        "content": "<p>Can you elaborate why breaking was needed ? i expect that since lean has a lot of third party libraries depending upon it,  that if there is a path to not break them, that it would be taken care to not.<br>\nBut, yes, too late.</p>",
        "id": 534447590,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1755165827
    },
    {
        "content": "<p>What's the motivation for this range syntax? I find it</p>\n<ol>\n<li>very hard to parse</li>\n<li>unlike anything else I know</li>\n</ol>",
        "id": 534449008,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1755166449
    },
    {
        "content": "<p>Looks similar to Rust's ranges, I think</p>",
        "id": 534449735,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1755166742
    },
    {
        "content": "<p>Do they get recommended spelling like Ico?</p>",
        "id": 534451004,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1755167313
    },
    {
        "content": "<p>See also <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/dropping.20Set.2EIco.20etc.20in.20favor.20of.20new.20core.20syntax/near/534440536\">#mathlib4 &gt; dropping Set.Ico etc in favor of new core syntax @ ðŸ’¬</a></p>",
        "id": 534452630,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755168048
    },
    {
        "content": "<p>In what sense is this a breaking change? This still works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"mf\">1.</span><span class=\"bp\">..&lt;</span><span class=\"mi\">3</span>\n</code></pre></div>",
        "id": 534452818,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755168128
    },
    {
        "content": "<p>Using three dots instead of two is going to take some getting used to.</p>",
        "id": 534457811,
        "sender_full_name": "FranÃ§ois G. Dorais",
        "timestamp": 1755170146
    },
    {
        "content": "<p>It would be nice to have <code>â€¦</code> (U+2026) as an alternative.</p>",
        "id": 534458363,
        "sender_full_name": "FranÃ§ois G. Dorais",
        "timestamp": 1755170361
    },
    {
        "content": "<p>that would also solve the <code>scientific</code> parsing/highlighting issue</p>",
        "id": 534459350,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1755170746
    },
    {
        "content": "<p>This is a bit over the top: could something like <code>a[1] +â‹¯+ a[k]</code> be made to work as expected? (<code>â‹¯</code> is U+22EF)</p>",
        "id": 534506628,
        "sender_full_name": "FranÃ§ois G. Dorais",
        "timestamp": 1755185148
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/v4.2E22.2E0-rc2/near/534452818\">said</a>:</p>\n<blockquote>\n<p>In what sense is this a breaking change? This still works:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"mf\">1.</span><span class=\"bp\">..&lt;</span><span class=\"mi\">3</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Thanks for the clarification. I was under the impression that old one was removed. If not, that's good news.</p>",
        "id": 534514327,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1755187709
    },
    {
        "content": "<p>it does now seem slightly strange to have two ways to spell the \"same\" thing, but I'm confident that if they were merged, the old spelling would be deprecated first to give people warning.</p>",
        "id": 534516152,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755188313
    },
    {
        "content": "<p>I'm pretty happy with this change: avoiding <code>[]</code> in notations helps avoid the fragility that comes with interacting with the rather greedy list notation. The new notation both parses well, and I think is pretty straightforward to learn to read.</p>",
        "id": 534561830,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755206390
    },
    {
        "content": "<p>I've tried out various notations and the one I chose seemed like the best compromise:</p>\n<ul>\n<li>It avoids many parsing ambiguities. <code>..</code> is used for ellipses in many places. Making the parser happy was much trickier than it seemed.</li>\n<li>It should support unbounded ranges, too (e.g. <code>1...*</code>, or even <code>*...*</code>). Without the <code>*</code>, this caused more ambiguities (granted, the <code>[]</code> syntax would have solved this, too).</li>\n<li><code>[]</code> syntax reminds of lists, even though ranges aren't lists. Moreover, <code>[]</code> is usually used for closed intervals in mathematics, so it seemed suboptimal.</li>\n<li>The new ranges are different in that they are polymorphic. They can be put to work for types other than <code>Nat</code>. Therefore, parts of the API need to be different. So I think that having a different notation for the new ranges is actually beneficial for backward compatibility -- this way we could introduce the new ranges before deprecating/deleting the old ones.</li>\n</ul>\n<p>If you use the new ranges, feel free to let me know of your experience using them so that we polish rough edges quickly!</p>",
        "id": 534566308,
        "sender_full_name": "Paul Reichert",
        "timestamp": 1755208834
    },
    {
        "content": "<p>What are the naming conventions? That is, how do you distinguish between lemmas about <code>PRange</code>s which have open lower bounds and lemmas which have closed lower bounds?</p>",
        "id": 534566985,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1755209294
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"119741\">FranÃ§ois G. Dorais</span> <a href=\"#narrow/channel/113488-general/topic/v4.2E22.2E0-rc2/near/534458363\">said</a>:</p>\n<blockquote>\n<p>It would be nice to have <code>â€¦</code> (U+2026) as an alternative.</p>\n</blockquote>\n<p>That seems reasonable, but every additional notation in core means that downstream projects are more restricted in their custom notation. Not a no-go but something to keep in mind.</p>",
        "id": 534567383,
        "sender_full_name": "Paul Reichert",
        "timestamp": 1755209594
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/113488-general/topic/v4.2E22.2E0-rc2/near/534566985\">said</a>:</p>\n<blockquote>\n<p>What are the naming conventions? That is, how do you distinguish between lemmas about <code>PRange</code>s which have open lower bounds and lemmas which have closed lower bounds?</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"873350\">Weiyi Wang</span> <a href=\"#narrow/channel/113488-general/topic/v4.2E22.2E0-rc2/near/534451004\">said</a>:</p>\n<blockquote>\n<p>Do they get recommended spelling like Ico?</p>\n</blockquote>\n<p>Right now, there's only the <a href=\"https://github.com/leanprover/lean4/blob/master/doc/std/naming.md\">standard library naming scheme</a> without a special recommended spelling. I think <code>Ico</code> spelling is already used by Mathlib for set intervals, and I don't think we had a recommended spelling for <code>Std.Range</code>, right?</p>\n<p>So I think right now, the naming can be <code>prangeMk_open_closed</code> for an open and closed interval, which is admittedly clunky. There aren't many lemmas so far for which the question of spelling arose. For convenience, the standard library sometimes uses namespaces like in <code>ClosedOpen.mem_succ_iff</code>. I'm happy to brainstorm ideas for improvements of the spelling or other parts of the design (but perhaps in a different thread).</p>",
        "id": 534567977,
        "sender_full_name": "Paul Reichert",
        "timestamp": 1755209959
    },
    {
        "content": "<p>My personal expectation would have been <code>{a &lt; x &lt; b}</code> for bounded intervals, and some thought to be put in the notation for half-unbounded and unbounded intervals</p>",
        "id": 534601994,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1755237208
    },
    {
        "content": "<p>with <code>x</code> hard-coded as the name? <code>{a &lt; Â· &lt; b}</code> might be a better alternative</p>",
        "id": 534630396,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755253281
    },
    {
        "content": "<p>22 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/v4.2E22.2E0-rc2/with/534418531\">#general &gt; v4.22.0-rc2</a> by <span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span>.</p>",
        "id": 534644474,
        "sender_full_name": "Notification Bot",
        "timestamp": 1755260939
    },
    {
        "content": "<p>Yes, that's a great idea! Then <code>{a &lt; Â·}</code> also makes sense</p>",
        "id": 534651718,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1755264090
    },
    {
        "content": "<p>But this only really makes sense for <code>Set</code>  / <code>Finset</code> notation</p>",
        "id": 534657834,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755266284
    },
    {
        "content": "<p>If you wanted a list version, then presumably you'd write <code>[a &lt; Â·]</code></p>",
        "id": 534657943,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755266320
    },
    {
        "content": "<p>And it's ambiguous whether<code>({a &lt; Â·})</code> is <code>Set.Ioi a</code> or <code>(fun x =&gt; {a &lt; x})</code></p>",
        "id": 534658169,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755266397
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/New.20range.20syntax.20in.20lean.204.2E22/near/534658169\">said</a>:</p>\n<blockquote>\n<p>And it's ambiguous whether<code>({a &lt; Â·})</code> is <code>Set.Ioi a</code> or <code>(fun x =&gt; {a &lt; x})</code></p>\n</blockquote>\n<p>Yeah, there's ambiguity, and depending on how it's implemented it would take core support, due to the way <code>Â·</code> expansion works.</p>\n<p>In the <code>{a &lt; Â· &lt; b}</code> case, it could have <code>Â·</code> as part of the notation and not have any <code>Â·</code> expansion issues.</p>\n<p>Any reason not to embrace <code>{a &lt;...&lt; b}</code>, etc., using the new range syntax? I'm sure we can figure out how to deal with the <code>Singleton</code> ambiguity, and mathlib can also have unicode extensions to write <code>a &lt;...â‰¤ b</code> rather than <code>a &lt;...= b</code>.</p>",
        "id": 534664879,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755269019
    },
    {
        "content": "<p>I think <code>{a &lt; ... &lt; b}</code> is pretty innovative and expressive. And even better if using <code>â‹¯</code> is a possible alternative to <code>...</code>.</p>\n<p>Personally, I'd prefer the following specific notations:</p>\n<ul>\n<li><code>{a &lt; â‹¯}</code> and respective alternative for <code>â‰¤</code></li>\n<li><code>{â‹¯ &lt; b}</code> and respective alternative for <code>â‰¤</code></li>\n<li><code>{a &lt; â‹¯ &lt; b}</code> and respective alternatives for <code>â‰¤</code></li>\n</ul>",
        "id": 534666144,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1755269501
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113488-general/topic/New.20range.20syntax.20in.20lean.204.2E22/near/534664879\">said</a>:</p>\n<blockquote>\n<p>I'm sure we can figure out how to deal with the <code>Singleton</code> ambiguity,</p>\n</blockquote>\n<p>One way would be to require <code>(1...&lt;3)</code> to always be parenthesized</p>",
        "id": 534666763,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755269794
    },
    {
        "content": "<p>Then <code>{1...&lt;3}</code> (the range as a Set) and <code>{(1...&lt;3)}</code> (a singleton) are distinguishable</p>",
        "id": 534666882,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755269843
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113488-general/topic/New.20range.20syntax.20in.20lean.204.2E22/near/534664879\">said</a>:</p>\n<blockquote>\n<p>Any reason not to embrace <code>{a &lt;...&lt; b}</code>, etc., using the new range syntax?</p>\n</blockquote>\n<p>Are you proposing only embracing the syntax or additionally embracing <code>Std.PRange</code>?</p>",
        "id": 534666950,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755269871
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/New.20range.20syntax.20in.20lean.204.2E22/near/534666950\">said</a>:</p>\n<blockquote>\n<p>Are you proposing only embracing the syntax or additionally embracing <code>Std.PRange</code>?</p>\n</blockquote>\n<p>Either.</p>\n<p>Option 1: Have Mathlib add a custom elaborator, where if <code>e</code> in <code>{e}</code> is a PRange syntax, then it elaborates to a <code>Set.Ixx</code> set. Pro: keeps in sync with the PRange syntaxes. Cons: custom elaborators add complexity, and this is a non-standard meaning of the Singleton syntax. In the unlikely event that a macro pieces together some syntax that includes a PRange in <code>{_}</code>, it will be interpreted in an unexpected way.</p>\n<p>Option 2: Be inspired by the PRange syntax and create <code>{a &lt; ... &lt; b}</code> notation (maybe it needs higher priority to avoid being interpreted as a Singleton). Pros: less of a hack, hovering over the notation will certainly be able to explain what it does, don't need to wait on core for <code>â‰¤</code> support, can pretty print it the way we want, don't need to accept the mathematically unfamiliar <code>{a &lt;... b}</code> in pretty printing. Cons: won't necessarily be in sync with PRange syntax, but that might be ok.</p>\n<p>In both cases, it might be worth having the underlying term be something like <code>Set.ofPRange (a...b)</code>, though it might also be worth keeping the <code>Set.Ixx</code> functions as-is so that when people hover over the intervals and figure out what's going on without wading through a lot of stuff.</p>",
        "id": 534680343,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755275387
    },
    {
        "content": "<p>Why not just let users figure out what they prefer and let it converge? Top-down dictated notation is at least 80% a bad idea. Convergence is slow but it narrows down fast enough for a top decision to be made that is less than 20% a bad idea.</p>",
        "id": 534683265,
        "sender_full_name": "FranÃ§ois G. Dorais",
        "timestamp": 1755276766
    },
    {
        "content": "<p>We're the users figuring it out <span class=\"user-mention\" data-user-id=\"119741\">@FranÃ§ois G. Dorais</span>. I've got my Mathlib maintainer hat on here; notation for Mathlib won't just happen without discussing what we'd prefer.</p>",
        "id": 534686497,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755278392
    },
    {
        "content": "<p>Was PRange intended just for finite collections or also for Set? Is there any circumstance under which <code>a &lt;... b</code> would be elaborated directly to <code>Set.Ioo a b</code> without requiring extra notation around <code>a &lt;... b</code>? Imo this could cause problems</p>",
        "id": 534693088,
        "sender_full_name": "Niels Voss",
        "timestamp": 1755281613
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> I think the tone of my earlier comment came out wrong. Apologies.</p>\n<p>This discussion is important but it is also important to actually try these alternatives to see what works and what doesn't.</p>",
        "id": 534693311,
        "sender_full_name": "FranÃ§ois G. Dorais",
        "timestamp": 1755281751
    },
    {
        "content": "<p>Another option would be to have <code>a &lt;... b</code> never elaborate to anything (not even a PRange object) unless there's some clue that indicates what type it would elaborate to. So like <code>[a &lt;... b]</code> would elaborate to something like <code>List.ofPRange (PRange.mk _ a b)</code>, <code>#[a &lt;... b]</code> would elaborate to <code>Array.ofPRange (PRange.mk _ a b)</code>, and <code>{a &lt;... b}</code> would elaborate to <code>Set.ofPRange (PRange.mk _ a b)</code>.</p>\n<p>This should prevent the possibility of it being interpreted as a singleton</p>",
        "id": 534693558,
        "sender_full_name": "Niels Voss",
        "timestamp": 1755281878
    },
    {
        "content": "<p>Maybe then <code>(a &lt;... b)</code> could be parsed as the PRange object directly, and a &lt;... b by itself could act as an iterable in <code>for</code> statements for performance</p>",
        "id": 534694509,
        "sender_full_name": "Niels Voss",
        "timestamp": 1755282296
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"521331\">@Niels Voss</span> I believe the PRange object is meant to be an abstract interval. One of the main use cases you'd see in programming is <code>for i in a &lt;... b do ...</code></p>\n<p>I could be mistaken, but I don't think these will be used <em>as</em> concrete data structures. Instead you write <code>(a &lt;... b).toList</code>, etc.</p>\n<p><code>[a &lt;... b]</code> is cute, but the ambiguity is a little unnerving. It feels Haskell, with its <code>[a]</code> instead of <code>List a</code>.</p>",
        "id": 534694667,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755282361
    },
    {
        "content": "<p>Using <code>{a &lt;...&lt; b}</code> has precedence in existing mathematical notation, which is a reason I personally think it's worth considering, despite the ambiguity (plus, in math, we likely will not be working with the abstract interval itself; abstract intervals do appear, but they'd show up using the language of category theory, not the language of <code>Std.PRange</code>).</p>",
        "id": 534694818,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755282427
    },
    {
        "content": "<p>I agree that overloading <code>[]</code> beyond what's already done is not great. If <code>a &lt;... b</code> is a valid expression by itself without parentheses, then I think that's problematic, because then <code>[a &lt;... b]</code> could be parsed as a singleton. My suggestion was to make it so that <code>a &lt;... b</code> doesn't parse unless surrounded by a delimiter of some type.</p>",
        "id": 534695000,
        "sender_full_name": "Niels Voss",
        "timestamp": 1755282523
    },
    {
        "content": "<p>I get that, and that's why I mentioned <code>for</code> loops, where it would be nice not to have to insert delimiters.</p>\n<p>I'd expect in most cases you don't want <code>[a &lt;... b]</code> the list, since it's likely being immediately mapped over, so you'd want an iterator anyway. There seem to be very few use cases for reifying an interval, so requiring extra delimiters for <code>for</code> loops is more a burden than a help, I think.</p>",
        "id": 534695410,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755282734
    },
    {
        "content": "<p>This has reminded me of the one time I wrote ruby code, and immediately got it wrong: <a href=\"https://stackoverflow.com/a/12433441/102441\">https://stackoverflow.com/a/12433441/102441</a></p>",
        "id": 534696076,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755283061
    },
    {
        "content": "<p>Yeah, in that case, I think <code>(a &lt;... b).toList</code> is fine notation, and then downstream projects can implement <code>[a &lt;... b]</code> notation themselves if they think it is worth the parsing ambiguity</p>",
        "id": 534696360,
        "sender_full_name": "Niels Voss",
        "timestamp": 1755283200
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113488-general/topic/New.20range.20syntax.20in.20lean.204.2E22/near/534694667\">said</a>:</p>\n<blockquote>\n<p>One of the main use cases you'd see in programming is <code>for i in a &lt;... b do _</code></p>\n</blockquote>\n<p>My take on this is that forcing users to write  <code>for i in (a &lt;... b) do _</code> would be no great loss, but I can see that I'm now playing with paint.</p>",
        "id": 534696733,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755283402
    },
    {
        "content": "<p>what does \"playing with paint\" mean?</p>",
        "id": 534696855,
        "sender_full_name": "Niels Voss",
        "timestamp": 1755283463
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113488-general/topic/New.20range.20syntax.20in.20lean.204.2E22/near/534680343\">said</a>:</p>\n<blockquote>\n<p>In both cases, it might be worth having the underlying term be something like <code>Set.ofPRange (a...b)</code>, though it might also be worth keeping the <code>Set.Ixx</code> functions as-is so that when people hover over the intervals and figure out what's going on without wading through a lot of stuff.</p>\n</blockquote>\n<p>Can we write a custom delaborator like we did for <code>sup</code>?</p>",
        "id": 534696927,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755283498
    },
    {
        "content": "<p>(<span class=\"user-mention\" data-user-id=\"521331\">@Niels Voss</span> \"choosing the color for a bikeshed\")</p>",
        "id": 534696978,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1755283517
    },
    {
        "content": "<p>I don't think keeping around both <code>Icc</code> and <code>ofPRange</code> and managing simp-normal forms will be a pleasant experience</p>",
        "id": 534697031,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755283549
    },
    {
        "content": "<p>We could just add special parsing for <code>for i in a &lt;... b do _</code> where <code>in ... do</code> acts as the delimiter like <code>[]</code> or <code>{}</code>.</p>",
        "id": 534697151,
        "sender_full_name": "Niels Voss",
        "timestamp": 1755283596
    },
    {
        "content": "<p>though having to add special parsing for individual circumstances isn't great</p>",
        "id": 534697207,
        "sender_full_name": "Niels Voss",
        "timestamp": 1755283615
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/New.20range.20syntax.20in.20lean.204.2E22/near/534630396\">said</a>:</p>\n<blockquote>\n<p>with <code>x</code> hard-coded as the name? <code>{a &lt; Â· &lt; b}</code> might be a better alternative</p>\n</blockquote>\n<p>Earlier discussion about this: <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/notation.20for.20intervals/with/475506457\">#mathlib4 &gt; notation for intervals</a></p>",
        "id": 536256670,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1756220299
    },
    {
        "content": "<p>(Continued discussion there.)</p>",
        "id": 536260504,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1756221464
    },
    {
        "content": "<p>For those that were interested in this: I'm considering a recommended spelling for the Std ranges: <a href=\"https://github.com/leanprover/lean4/pull/10059\">lean4#10059</a></p>\n<p>The spelling I'm proposing in this PR is to write, for example, <code>Rco</code> for a right-open bounded range, following Mathlib's naming of intervals. This should make it easier to name lemmas involving ranges.</p>",
        "id": 537416612,
        "sender_full_name": "Paul Reichert",
        "timestamp": 1756884697
    }
]