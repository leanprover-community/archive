[
    {
        "content": "<p>Am trying to make the following typecheck, is it at all possible to make this definition well-typed?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Effect</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"w\">  </span><span class=\"n\">fork</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Effect</span>\n<span class=\"w\">  </span><span class=\"n\">ret</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n</code></pre></div>",
        "id": 476029071,
        "sender_full_name": "nrs",
        "timestamp": 1728534751
    },
    {
        "content": "<p>No, this is not supported at the moment. You have to make an <code>inductive</code>.</p>",
        "id": 476029472,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1728534942
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/stream/113488-general/topic/Is.20it.20possible.20to.20make.20recursive.20records.3F/near/476029472\">said</a>:</p>\n<blockquote>\n<p>No, this is not supported at the moment. You have to make an <code>inductive</code>.</p>\n</blockquote>\n<p>so an <code>inductive</code> with a single <code>mk</code>, then I define three functions <code>def Effect.op</code>, <code>def Effect.fork</code> and <code>def Effect.ret</code>, right? that extract the \"field\" through a pattern match</p>",
        "id": 476029566,
        "sender_full_name": "nrs",
        "timestamp": 1728534998
    },
    {
        "content": "<p>Yes, you have to simulate the <code>structure</code> command yourself. You'll lose out on <code>{op := ..., fork := ..., ret := ...}</code> notation though.</p>",
        "id": 476029920,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1728535223
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/stream/113488-general/topic/Is.20it.20possible.20to.20make.20recursive.20records.3F/near/476029920\">said</a>:</p>\n<blockquote>\n<p>Yes, you have to simulate the <code>structure</code> command yourself. You'll lose out on <code>{op := ..., fork := ..., ret := ...}</code> notation though.</p>\n</blockquote>\n<p>it worked! thank you!!</p>",
        "id": 476030249,
        "sender_full_name": "nrs",
        "timestamp": 1728535452
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749978\">nrs</span> has marked this topic as resolved.</p>",
        "id": 476030729,
        "sender_full_name": "Notification Bot",
        "timestamp": 1728535770
    }
]