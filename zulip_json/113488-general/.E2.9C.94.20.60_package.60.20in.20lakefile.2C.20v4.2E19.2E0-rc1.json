[
    {
        "content": "<p>the implementation of <code>_package</code> is changed in v4.19.0-rc1?</p>",
        "id": 509747109,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1743612369
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">checkVersion</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">cliVer</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">runCmdAux</span><span class=\"w\"> </span><span class=\"s2\">\"lake exe mdgen --version\"</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span><span class=\"cm\"> invalid field 'version', the environment does not contain 'Lake.PackageDecl.version'</span>\n<span class=\"cm\">    _package</span>\n<span class=\"cm\">  has type</span>\n<span class=\"cm\">    PackageDecl -/</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">libVer</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">package</span><span class=\"bp\">.</span><span class=\"n\">version</span><span class=\"bp\">.</span><span class=\"n\">toString</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">cliVer</span><span class=\"w\"> </span><span class=\"bp\">!=</span><span class=\"w\"> </span><span class=\"n\">libVer</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">eprintln</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"Version mismatch: CLI {cliVer}, Library {libVer}\"</span>\n<span class=\"w\">    </span><span class=\"n\">throw</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">userError</span><span class=\"w\"> </span><span class=\"s2\">\"Version mismatch\"</span>\n</code></pre></div>",
        "id": 509747206,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1743612395
    },
    {
        "content": "<p>How do I modify the _package.version part of the above code?</p>",
        "id": 509913859,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1743680362
    },
    {
        "content": "<p>who knows how to fix this? developer of lake?</p>",
        "id": 509918352,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1743681476
    },
    {
        "content": "<p>You can ping <span class=\"user-mention silent\" data-user-id=\"315577\">Mac Malone</span> if needed. Have you investigated what fields the new <code>PackageDecl</code> has?</p>",
        "id": 509930128,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1743684433
    },
    {
        "content": "<p>this works! thank you!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">checkVersion</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">cliVer</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">runCmdAux</span><span class=\"w\"> </span><span class=\"s2\">\"lake exe mdgen --version\"</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">libVer</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">package</span><span class=\"bp\">.</span><span class=\"n\">config</span><span class=\"bp\">.</span><span class=\"n\">version</span><span class=\"bp\">.</span><span class=\"n\">toString</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">cliVer</span><span class=\"w\"> </span><span class=\"bp\">!=</span><span class=\"w\"> </span><span class=\"n\">libVer</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">eprintln</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"Version mismatch: CLI {cliVer}, Library {libVer}\"</span>\n<span class=\"w\">    </span><span class=\"n\">throw</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">userError</span><span class=\"w\"> </span><span class=\"s2\">\"Version mismatch\"</span>\n</code></pre></div>",
        "id": 509930900,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1743684612
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> has marked this topic as resolved.</p>",
        "id": 509932255,
        "sender_full_name": "Notification Bot",
        "timestamp": 1743684965
    }
]