[
    {
        "content": "<p>Newbie question here- how should I run <code>lake build</code> so I can see debug printouts while running? Small example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">partial</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">infiniteInc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">dbg_trace</span><span class=\"w\"> </span><span class=\"s2\">\"Iteration {n}\"</span>\n<span class=\"w\">    </span><span class=\"n\">infiniteInc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">infiniteInc</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>I only get the print outs at the end after the stack overflow</p>",
        "id": 573396952,
        "sender_full_name": "Oliver Flatt",
        "timestamp": 1770847981
    },
    {
        "content": "<p>I don't know if that's really possible, I imagine from playing around with your example that <code>dbg_trace</code> collects the string while executing it and only prints it once the execution ended...</p>\n<p>I don't know if this works for your use case, but one common way to deal with potentially non-terminating functions could be using \"fuel\", another parameter that stops execution if you run out of it. Something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">infiniteIncFuel</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fuel</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">fuel</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">fuel'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">        </span><span class=\"n\">dbg_trace</span><span class=\"w\"> </span><span class=\"s2\">\"Iteration {n}\"</span>\n<span class=\"w\">        </span><span class=\"n\">infiniteIncFuel</span><span class=\"w\"> </span><span class=\"n\">fuel'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">infiniteIncFuel</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">Iteration 0</span>\n<span class=\"cm\">Iteration 1</span>\n<span class=\"cm\">Iteration 2</span>\n<span class=\"cm\">Iteration 3</span>\n<span class=\"cm\">Iteration 4</span>\n<span class=\"cm\">Iteration 5</span>\n<span class=\"cm\">Iteration 6</span>\n<span class=\"cm\">Iteration 7</span>\n<span class=\"cm\">Iteration 8</span>\n<span class=\"cm\">Iteration 9</span>\n<span class=\"cm\">10</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>",
        "id": 573658430,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1770953908
    },
    {
        "content": "<p>That's unfortunate, thanks for the advice!</p>",
        "id": 573833231,
        "sender_full_name": "Oliver Flatt",
        "timestamp": 1771019366
    }
]