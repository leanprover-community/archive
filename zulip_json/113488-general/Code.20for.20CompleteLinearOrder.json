[
    {
        "content": "<p>In mathlib, CompleteLinearOrder = CompleteOrder + BiheytingAlgebra. I'm just confused why the following code doesn't work?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompleteLattice</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompleteLinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"n\">h1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"bp\">.</span><span class=\"n\">toBiheytingAlgebra</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"o\">}</span>\n</code></pre></div>\n<p>Lean is just complaining about LinearOrder.toBiheytingAlgebra requires BoundedOrder, but why it can't be automatically inferred by CompleteLattice, i.e. h1 in the above code?</p>",
        "id": 546137110,
        "sender_full_name": "Yijun Yuan",
        "timestamp": 1761017367
    },
    {
        "content": "<p>Both <code>CompleteLattice</code> and <code>LinearOrder</code> extends <code>PartialOrder</code>, so <code>{α : Type*} [h1 : CompleteLattice α] [h2 : LinearOrder α]</code> actually means let <code>α</code> be a type, equipped with an order <code>h1</code> that makes it into a complete lattice, and another totally unrelated order <code>h2</code> that makes it into a linear order.</p>",
        "id": 546137354,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1761017609
    },
    {
        "content": "<p>I understand the situation, but what is the correct way to do so?</p>",
        "id": 546169406,
        "sender_full_name": "Yijun Yuan",
        "timestamp": 1761034622
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"903800\">@Yijun Yuan</span> this might be an <a href=\"https://en.wikipedia.org/wiki/XY_problem\">#xy</a> problem, what are you actually trying to do?</p>",
        "id": 546174711,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761036103
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"903800\">Yijun Yuan</span> <a href=\"#narrow/channel/113488-general/topic/Code.20for.20CompleteLinearOrder/near/546169406\">said</a>:</p>\n<blockquote>\n<p>I understand the situation, but what is the correct way to do so?</p>\n</blockquote>\n<p>Never assume <code>[h1 : CompleteLattice α] [h2 : LinearOrder α]</code>. Just assume <code>[CompleteLinearOrder α]</code> directly.</p>",
        "id": 546190281,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1761040541
    },
    {
        "content": "<p>I figured it out by myself. Maybe I should do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompleteLattice</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableLE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableLT</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsTotal</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"bp\">.</span><span class=\"n\">toLE</span><span class=\"bp\">.</span><span class=\"n\">le</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CompleteLinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">h1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Lattice</span><span class=\"bp\">.</span><span class=\"n\">toLinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toBiheytingAlgebra</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"n\">le_total</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"bp\">.</span><span class=\"n\">total</span>\n<span class=\"w\">    </span><span class=\"n\">toDecidableLE</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 546192995,
        "sender_full_name": "Yijun Yuan",
        "timestamp": 1761041380
    }
]