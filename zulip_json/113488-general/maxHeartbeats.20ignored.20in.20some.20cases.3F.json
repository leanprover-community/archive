[
    {
        "content": "<p>I am running into an issue while modifying the SAIL RISC-V Lean output where a function definition fails. What is odd, is that the error message complains about a very small maximum number of heartbeats:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">simp'</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">nested</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">deterministic</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"ss\">`whnf</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">maximum</span><span class=\"w\"> </span><span class=\"n\">number</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">heartbeats</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">200000</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">reached</span>\n<span class=\"w\">  </span><span class=\"n\">Use</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">maxHeartbeats</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">num</span><span class=\"bp\">&gt;`</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">limit</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p>What is weird is that:</p>\n<ul>\n<li>the Lean command sets the max heartbeats to 1 million (<code>-D maxHeartbeats=1000000</code>),</li>\n<li>the Lean file starts with setting max heartbeats to 1 billion (<code>set_option maxHeartbeats 1_000_000_000</code>)</li>\n</ul>\n<p>so I'm not sure why the max heartbeats is 200k in this error message.</p>\n<p>The code might have other issues, and I might be able to extract a repo reproducing this issue, so it might take me a while...</p>\n<p>In the meantime, does anyone know under what conditions this error message would not use either of my explicitly set max hearbeats?</p>",
        "id": 543822789,
        "sender_full_name": "Valentin Robert",
        "timestamp": 1759952787
    },
    {
        "content": "<p>maybe if they were unset for some reason</p>",
        "id": 543825723,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759954006
    },
    {
        "content": "<p>An <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> would help.</p>",
        "id": 543856721,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1759973555
    },
    {
        "content": "<p>Could it be that the limit is locally divided by 5?</p>",
        "id": 543902363,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1759999342
    },
    {
        "content": "<p>I was guessing that it could be some section issue (e.g. something set in a section and gets unset when the section ends, or something like this) but I agree with Yury that this is the kind of thing where speculation is a bit of a waste of time when a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> would probably enable people to answer the question immediately.</p>",
        "id": 543987162,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760022786
    }
]