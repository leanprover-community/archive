[
    {
        "content": "<p>Hello all, I am porting heaplang from iris in Rocq to lean. Some of the binary operations there are bitwise operations on integers. For sound design reasons, iris-lean cannot depend on mathlib, which is there the Bitwise operations for Nat and Int reside. Is there a chance of these files getting upstreamed? These operations sound like they are basic enough to be in Std.</p>\n<p>CC : Upstreaming experts <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> ?</p>",
        "id": 541657920,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1758890203
    },
    {
        "content": "<p>more context here : <a class=\"message-link\" href=\"/#narrow/channel/490604-iris-lean/topic/Heaplang/near/541601880\">#iris-lean &gt; Heaplang @ ðŸ’¬</a></p>",
        "id": 541658000,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1758890237
    },
    {
        "content": "<p>Bitwise operations on <code>Nat</code> are already part of core; if there are specific lemmas you are missing we can add them.</p>\n<p>The standard library team has previously discussed adding bitwise operations on <code>Int</code>, but we came to the conclusion that these are not important enough to warrant inclusion in the standard library. Of course, we do have bitwise operations on finite integers (<code>Int64</code> etc. as well as <code>BitVec</code>).</p>",
        "id": 541660978,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1758891078
    },
    {
        "content": "<p>Currently we need bitwise operations for Int which seem to be defined here : <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Int/Bitwise.html#Int.bitwise_and\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Int/Bitwise.html#Int.bitwise_and</a></p>",
        "id": 541662460,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1758891483
    },
    {
        "content": "<p>The idea is that I would like the heaplang in iris-lean to be faithful to the version in Rocq</p>",
        "id": 541662530,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1758891499
    },
    {
        "content": "<p>and this file depends on Mathlib.Data.Nat.Bitwise</p>",
        "id": 541662596,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1758891515
    },
    {
        "content": "<p>and I am guessing upstreaming is not out of the question since the module docstring says \"Possibly only of archaeological significance.\"</p>",
        "id": 541662781,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1758891560
    },
    {
        "content": "<p>You could make a (perhaps temporary) <code>lean-int-bitwise</code> repository to contain these. I think they could happily be removed from Mathlib if they have another home.</p>",
        "id": 544861346,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1760492020
    },
    {
        "content": "<p>These could presumably move to batteries instead?</p>",
        "id": 544904935,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1760516660
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/113488-general/topic/Nat.20and.20Int.20bitwise/near/544861346\">said</a>:</p>\n<blockquote>\n<p>You could make a (perhaps temporary) <code>lean-int-bitwise</code> repository to contain these. I think they could happily be removed from Mathlib if they have another home.</p>\n</blockquote>\n<p>The issue is, some of the bitwise stuff for Nat is already in Std as Markus says. So it might be easier to just upstream them at least to Batteries.</p>",
        "id": 544908489,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1760517682
    }
]