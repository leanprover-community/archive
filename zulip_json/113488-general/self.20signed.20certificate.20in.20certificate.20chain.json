[
    {
        "content": "<p>With the new lean release, I am getting a<br>\n<code>SSL certificate problem: self signed certificate in certificate chain</code><br>\nwhen doing <code>lake exe cache get</code> after a <code>gh pr checkout 26588</code>. This SSL issue only happens when I am under a VPN, not off-VPN. Has anyone else seen this? I haven't had issues with <code>cache get</code> under my VPN previously.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">Current</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fae_PR_RankOne</span>\n<span class=\"n\">Using</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"bp\">@</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"o\">:</span><span class=\"n\">faenuccio</span><span class=\"bp\">/</span><span class=\"n\">fae_mathlib4</span><span class=\"bp\">.</span><span class=\"n\">git</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">faenuccio</span><span class=\"bp\">/</span><span class=\"n\">fae_mathlib4</span>\n<span class=\"n\">Attempting</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">download</span><span class=\"w\"> </span><span class=\"mi\">5995</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n<span class=\"n\">SSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"n\">signed</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">chain</span>\n<span class=\"n\">Downloaded</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">attempted</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">5995</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"bp\">%</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">failedSSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"n\">signed</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">chain</span>\n<span class=\"n\">SSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"n\">signed</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">chain</span>\n<span class=\"n\">SSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"n\">signed</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">chain</span>\n<span class=\"n\">Downloaded</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">attempted</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">/</span><span class=\"mi\">5995</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"bp\">%</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"n\">failedSSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"n\">signed</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">chain</span>\n<span class=\"n\">SSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"n\">signed</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">chain</span>\n<span class=\"n\">SSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"n\">signed</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">chain</span>\n<span class=\"n\">Downloaded</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">attempted</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">5995</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"bp\">%</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"w\"> </span><span class=\"n\">failedSSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"n\">signed</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">chain</span>\n<span class=\"n\">SSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"n\">signed</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">chain</span>\n<span class=\"n\">SSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"n\">signed</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">chain</span>\n</code></pre></div>",
        "id": 534663516,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1755268462
    },
    {
        "content": "<p>What does \"on a VPN\" mean for you? Just an OpenVPN/IPsec/Wireguard connection or is there also something like an HTTPS proxy at play?</p>",
        "id": 534673329,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1755272383
    },
    {
        "content": "<p>It's my company VPN, so there is likely an HTTPS proxy. I'll ask internally.</p>",
        "id": 534692834,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1755281474
    },
    {
        "content": "<p>If there is an HTTPS proxy at play your company (assuming that your IT controls the machine you are working on) needs to configure the certificate store of your machine to account for that properly.</p>",
        "id": 534693780,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1755281968
    },
    {
        "content": "<p>Perhaps <a href=\"https://unix.stackexchange.com/a/582310\">https://unix.stackexchange.com/a/582310</a>?</p>",
        "id": 534696390,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755283211
    },
    {
        "content": "<p>Where can I find the precise curl call that <code>cache get</code> uses so that I can verbose-introspect the certs?</p>",
        "id": 534697460,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1755283723
    },
    {
        "content": "<p><code>Cache.Requests.downloadFiles</code></p>",
        "id": 534698530,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1755284177
    },
    {
        "content": "<p>Coming back to this: running the same curl with <code>-k</code> gives:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">h1</span><span class=\"bp\">&gt;</span><span class=\"n\">Web</span><span class=\"w\"> </span><span class=\"n\">Page</span><span class=\"w\"> </span><span class=\"n\">Blocked</span><span class=\"bp\">&lt;/</span><span class=\"n\">h1</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">p</span><span class=\"bp\">&gt;</span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">web</span><span class=\"w\"> </span><span class=\"n\">page</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">trying</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">visit</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">blocked</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">accordance</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">company</span><span class=\"w\"> </span><span class=\"n\">policy</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Please</span><span class=\"w\"> </span><span class=\"n\">contact</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"n\">system</span><span class=\"w\"> </span><span class=\"n\">administrator</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">believe</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"bp\">.&lt;/</span><span class=\"n\">p</span><span class=\"bp\">&gt;</span>\n</code></pre></div>\n<p>=C</p>",
        "id": 536857848,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1756499199
    }
]