[
    {
        "content": "<p>Hello, all. I wonder how to install Lean 4 without <code>elan</code>? I am trying to install it on Termux, where <code>elan</code> does not seem to work.</p>",
        "id": 478077999,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729521546
    },
    {
        "content": "<p>I don't know, but I know that it'll be a lot more painful than trying to find a way to use <code>elan</code></p>",
        "id": 478078842,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729521743
    },
    {
        "content": "<p>Termux is a CLI environment on Android. I would like to install Lean 4 on that.</p>",
        "id": 478080057,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729522025
    },
    {
        "content": "<p>What goes wrong when you try and install elan?</p>",
        "id": 478080908,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729522225
    },
    {
        "content": "<p>The error message does not seem to be informative. It says that resolving hostname <code>github.com</code> failed. I tried to <code>cargo build</code> <code>elan</code>, which fails as well. I see that <code>elan</code> is a fork of <code>rustup</code>, and <code>rustup</code> does not work on Termux either.</p>",
        "id": 478081379,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729522338
    },
    {
        "content": "<p>I'm trying to install Git on Termux first.</p>",
        "id": 478082094,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729522536
    },
    {
        "content": "<p>I can't download the <code>elan-init.sh</code> script file.</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">~ $ curl https://raw.githubusercontent.com/leanprover/elan-init.sh -sSf | sh</span>\n<span class=\"go\">curl: (22) The requested URL returned error: 400</span>\n</code></pre></div>",
        "id": 478084289,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729523063
    },
    {
        "content": "<p><code>git</code> is installed.</p>",
        "id": 478084682,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729523176
    },
    {
        "content": "<p>I'm trying to find a way to use curl or wget on Termux.</p>",
        "id": 478084773,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729523201
    },
    {
        "content": "<p><code>curl</code> and <code>wget</code> work.</p>",
        "id": 478084842,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729523217
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478084289\">said</a>:</p>\n<blockquote>\n<p>I can't download the <code>elan-init.sh</code> script file.</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">~ $ curl https://raw.githubusercontent.com/leanprover/elan-init.sh -sSf | sh</span>\n<span class=\"go\">curl: (22) The requested URL returned error: 400</span>\n</code></pre></div>\n</blockquote>\n<p>Do you get this error message?</p>",
        "id": 478084913,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729523235
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478084289\">said</a>:</p>\n<blockquote>\n<p>I can't download the <code>elan-init.sh</code> script file.</p>\n<p><div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">~ $ curl https://raw.githubusercontent.com/leanprover/elan-init.sh -sSf | sh</span>\n<span class=\"go\">curl: (22) The requested URL returned error: 400</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>The issue of this is that it is trying to download <code>-aarch-android</code> or something like this, which does not exist.</p>",
        "id": 478084977,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729523254
    },
    {
        "content": "<p>I download it manually instead.</p>",
        "id": 478085014,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729523266
    },
    {
        "content": "<p>I'll try it.</p>",
        "id": 478085136,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729523289
    },
    {
        "content": "<p>Namely, <a href=\"https://github.com/leanprover/elan/releases/download/v3.1.1/elan-aarch64-unknown-linux-gnu.tar.gz\">elan-aarch64-unknown-linux-gnu.tar.gz</a></p>",
        "id": 478085179,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729523302
    },
    {
        "content": "<p>I forgot to turn off Tor. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 478086416,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729523612
    },
    {
        "content": "<p>It doesn’t address the question at hand but let me suggest using <a href=\"http://tailscale.com\">tailscale</a> + Termux for a better experience. I do this on iPadOS (essentially) and am pretty happy with the ergonomics.</p>",
        "id": 478086600,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1729523643
    },
    {
        "content": "<p>It's been a few months since I tried, but I don't believe even if you get elan working that the published builds will work for you in Termux. I ended up compiling Lean manually within Termux, though note doing so requires manually editing a few of the CMake build files (because something is wrong with the <code>-fPIC</code> configuration on Android).</p>",
        "id": 478086727,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729523679
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478086416\">said</a>:</p>\n<blockquote>\n<p>I forgot to turn off Tor. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>\n</blockquote>\n<p>Hmm, but I still can't get the script file when using curl.</p>",
        "id": 478086771,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729523691
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478086771\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478086416\">said</a>:</p>\n<blockquote>\n<p>I forgot to turn off Tor. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>\n</blockquote>\n<p>Hmm, but I still can't get the script file when using curl.</p>\n</blockquote>\n<p>As I said, the real reason is that this script reads the architecture and the OS info, and produce a URL for <code>elan</code> which does not exist.</p>",
        "id": 478087007,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729523751
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478086727\">said</a>:</p>\n<blockquote>\n<p>It's been a few months since I tried, but I don't believe even if you get elan working that the published builds will work for you in Termux. I ended up compiling Lean manually within Termux, though note doing so requires manually editing a few of the CMake build files (because something is wrong with the <code>-fPIC</code> configuration on Android).</p>\n</blockquote>\n<p>Well then, I guess I'll use Termux for other things!</p>",
        "id": 478087212,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729523797
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"590199\">Zhouhang Mᴀᴏ</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478087007\">said</a>:</p>\n<blockquote>\n<p>As I said, the real reason is that this script reads the architecture and the OS info, and produce a URL for <code>elan</code> which does not exist.</p>\n</blockquote>\n<p>I see. Thanks for the info.</p>",
        "id": 478087539,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729523886
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478086727\">said</a>:</p>\n<blockquote>\n<p>It's been a few months since I tried, but I don't believe even if you get elan working that the published builds will work for you in Termux. I ended up compiling Lean manually within Termux, though note doing so requires manually editing a few of the CMake build files (because something is wrong with the <code>-fPIC</code> configuration on Android).</p>\n</blockquote>\n<p>Do you have a log for that? If this is the case, then it might be reasonable to request a package in Termux (with these files patched).</p>",
        "id": 478087685,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729523923
    },
    {
        "content": "<p>Do you want to request it from the Lean FRO?</p>",
        "id": 478088702,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729524203
    },
    {
        "content": "<p>It is about packaging. I would request on Termux-packages</p>",
        "id": 478088830,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729524240
    },
    {
        "content": "<p>But would they want to do it?</p>",
        "id": 478089000,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729524279
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"590199\">Zhouhang Mᴀᴏ</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478087685\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478086727\">said</a>:</p>\n<blockquote>\n<p>It's been a few months since I tried, but I don't believe even if you get elan working that the published builds will work for you in Termux. I ended up compiling Lean manually within Termux, though note doing so requires manually editing a few of the CMake build files (because something is wrong with the <code>-fPIC</code> configuration on Android).</p>\n</blockquote>\n<p>Do you have a log for that? If this is the case, then it might be reasonable to request a package in Termux (with these files patched).</p>\n</blockquote>\n<p>No, not at hand, but I'll try to keep it around next time I do so. If I knew more about CMake I'd know why/how the 2-layer build Lean uses \"breaks\" the usual way CMake has for doing this (which AFAIK is <code>-DCMAKE_POSITION_INDEPENDENT_CODE=ON</code> or the equivalent <code>set()</code>) but if you just pass that option, the compilation will succeed until it tries to link things and then it will complain that the <code>.so</code>s are not all PIC.</p>",
        "id": 478089210,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729524332
    },
    {
        "content": "<p>They might not do this, but as long as our instruction of packaging are clearer, the probability that they would package this will increase. That is why I would ask for a log for some successful compilation.</p>",
        "id": 478089725,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729524459
    },
    {
        "content": "<p>I think we should first improve the documentation about how to make packages for Lean. It seems you're interested in doing so.</p>",
        "id": 478090213,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729524588
    },
    {
        "content": "<p>By the way, I failed to use cargo to build elan from its source.</p>",
        "id": 478091304,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729524856
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478091304\">said</a>:</p>\n<blockquote>\n<p>By the way, I failed to use cargo to build elan from its source.</p>\n</blockquote>\n<p>I succeeded. You might try <code>cargo update</code> first, and run this again?</p>",
        "id": 478091913,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729525022
    },
    {
        "content": "<p>Hmm, I still got an error. Please wait a moment. I'll show you the build process.</p>",
        "id": 478092422,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729525169
    },
    {
        "content": "<p><a href=\"https://paste.sr.ht/~chabulhwi/51dd8e0c92f64d87c4b8742c7c777ac6af2eec17\">https://paste.sr.ht/~chabulhwi/51dd8e0c92f64d87c4b8742c7c777ac6af2eec17</a></p>",
        "id": 478093253,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729525399
    },
    {
        "content": "<p>Perhaps the version of Rust installed on my Termux is too old.</p>",
        "id": 478094359,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729525717
    },
    {
        "content": "<p><code>pkg update &amp;&amp; apt upgrade</code>?</p>",
        "id": 478094473,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729525752
    },
    {
        "content": "<p>I've already done it.</p>",
        "id": 478096380,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729526262
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478086727\">said</a>:</p>\n<blockquote>\n<p>It's been a few months since I tried, but I don't believe even if you get elan working that the published builds will work for you in Termux. I ended up compiling Lean manually within Termux, though note doing so requires manually editing a few of the CMake build files (because something is wrong with the <code>-fPIC</code> configuration on Android).</p>\n</blockquote>\n<p>I requested at <a href=\"https://github.com/termux/termux-packages/issues/21923\">https://github.com/termux/termux-packages/issues/21923</a> and you could comment there.</p>",
        "id": 478119304,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729533543
    },
    {
        "content": "<p>Please please please do not ask package repositories to package Lean.</p>\n<p>All this does is provides users with broken experiences. Lean is <em>only</em> intended for use via <code>elan</code>, otherwise you will never have the right version for a given project. If package repositories bundle a particular version of Lean, this doesn't happen. I have spent enough time in the past asking package repositories to deprecate or remove Lean, let's not do more of this.</p>",
        "id": 478158547,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1729548391
    },
    {
        "content": "<p><code>elan</code> does not work under Termux for unknown reasons.</p>",
        "id": 478161563,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729549698
    },
    {
        "content": "<p>I'd suggest working on that, then.</p>",
        "id": 478162279,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1729550015
    },
    {
        "content": "<p>The minor issue that I encountered is issues on resolving <code>github.com</code>. I guess that it is because some libraries are not correctly linked. A major issue is that <code>elan</code> downloads pre-built binaries of Lean which is not linked against correct libraries (not the Termux ones).</p>",
        "id": 478165368,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729551450
    },
    {
        "content": "<p>From <a href=\"https://github.com/termux/termux-packages/issues/21923#issuecomment-2427841270\">https://github.com/termux/termux-packages/issues/21923#issuecomment-2427841270</a>:</p>\n<blockquote>\n<p>You might still be able to use it on Termux through a Proot environment<br>\n(i.e. <code>proot-distro</code> <a href=\"https://github.com/termux/proot-distro\">https://github.com/termux/proot-distro</a>)<br>\nBut I have neither tested nor validated that option, and it would entail some overhead from Proot.</p>\n</blockquote>\n<p>I've just installed elan and the current stable version of Lean on Arch Linux ARM provided by PRoot Distro.</p>",
        "id": 478190568,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729564692
    },
    {
        "content": "<p>Now, what can I do with Lean on Termux? <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 478191452,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729564882
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478190568\">said</a>:</p>\n<blockquote>\n<p>From <a href=\"https://github.com/termux/termux-packages/issues/21923#issuecomment-2427841270\">https://github.com/termux/termux-packages/issues/21923#issuecomment-2427841270</a>:</p>\n<blockquote>\n<p>You might still be able to use it on Termux through a Proot environment<br>\n(i.e. <code>proot-distro</code> <a href=\"https://github.com/termux/proot-distro\">https://github.com/termux/proot-distro</a>)<br>\nBut I have neither tested nor validated that option, and it would entail some overhead from Proot.</p>\n</blockquote>\n<p>I've just installed elan and the current stable version of Lean on Arch Linux ARM provided by PRoot Distro.</p>\n</blockquote>\n<p>Thanks for the information. However, my device is not that performant, and I would not try that (I previously installed <code>proot distro</code>, and then found it too laggy and dropped).</p>",
        "id": 478270780,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729599411
    },
    {
        "content": "<p>I use Galaxy S10 5G, which was released in 2019.</p>",
        "id": 478271514,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729599690
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417769\">Bulhwi Cha</span> <a href=\"#narrow/channel/113488-general/topic/Lean.204.20installation.20on.20Android/near/478191452\">said</a>:</p>\n<blockquote>\n<p>Now, what can I do with Lean on Termux? <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>\n</blockquote>\n<p>It is just like a computer. I am using a tablet, which is lighter than my laptop, and it is easier for me to carry it everywhere than to carry a laptop.</p>",
        "id": 478271834,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729599805
    },
    {
        "content": "<p>You can try to install VSCode on a proot distro, but I suspect that it would be too slow.</p>",
        "id": 478272990,
        "sender_full_name": "Zhouhang Mᴀᴏ",
        "timestamp": 1729600186
    },
    {
        "content": "<p>This thread sparked an idea in me, would people apprechiate a Lean-Android-App which could be downloaded through play store?</p>\n<p>I might not have enouh time but most likely the knowledge to create one...</p>\n<p>If so, what would be features which would make such an app useful? What are the potential use cases?</p>",
        "id": 478655232,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1729756899
    },
    {
        "content": "<p>An Android app powered by Lean, which provides a user interface similar to <a href=\"https://carnap.io/\">Carnap</a>? The video game I want to create first is kind of a Linux desktop version of it.</p>",
        "id": 478659504,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1729758270
    },
    {
        "content": "<p>I was running lean 3 on (rooted) android in 2017 before I had a laptop :-)</p>",
        "id": 478737733,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729781849
    },
    {
        "content": "<p>Emacs in a terminal window and none of the Unicode characters showed up properly, so that's what you've got to beat :-)</p>",
        "id": 478738100,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729781949
    },
    {
        "content": "<p>I've gone through parts of <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>'s formalizing mathematics repo in <code>lean.nvim</code> on Android on train rides. It was honestly quite fun. </p>\n<p>A serious suggestion for such an app would perhaps be a learning app where one could play NNG and/or read <a href=\"https://leanprover-community.github.io/mathematics_in_lean/\">#mil</a> and interactively go through them, ideally even offline which is where running Lean on device would come in.</p>",
        "id": 478739742,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729782369
    },
    {
        "content": "<p>Perhaps an even grander vision would be a general app for reading Verso texts comfortably, given it's the presumed future of all interactive Lean prose content.</p>",
        "id": 478740261,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729782513
    }
]