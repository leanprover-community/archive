[
    {
        "content": "<p>Say I have a .patch for a repo (e.g Mathlib), and a project downstream of that repo. Is there a way to have <code>lake</code> apply that patch locally to the upstream repo? Or is there no better way than maintaining a mirror of the repo?</p>",
        "id": 518374304,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1747334055
    },
    {
        "content": "<p>No, maintaining the fork is the way to go</p>",
        "id": 518393705,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1747340634
    },
    {
        "content": "<p>One possiblity is to write a <code>post_update</code> hook to apply the patch. See Mathlib's <a href=\"https://github.com/leanprover-community/mathlib4/blob/ae681ea322406e291843c3a77927dde5b6a5f593/lakefile.lean#L171\">hook</a> for an example of what a hook in general looks like. However, a fork is the more straightforward way to do this.</p>",
        "id": 518395355,
        "sender_full_name": "Mac Malone",
        "timestamp": 1747341216
    },
    {
        "content": "<p>Make life sane by either PR'ing your patch, or deciding to do without it. :-)</p>",
        "id": 518452601,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1747372270
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/113488-general/topic/patching.20a.20dependency.20in.20lake/near/518452601\">said</a>:</p>\n<blockquote>\n<p>Make life sane by either PR'ing your patch, or deciding to do without it. :-)</p>\n</blockquote>\n<p>It's actually already done, but through different (not yet merged) independent PRs in mathlib that I'd like to combine.<br>\nAnd I feel like even as a draft, making a branch combining them for my other projects is just plain abuse of my write access to the repo.</p>",
        "id": 518460868,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1747376659
    },
    {
        "content": "<p>IMHO, it's OK if you don't forget to delete the branch once you don't need it anymore.</p>",
        "id": 518546709,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1747402498
    }
]