[
    {
        "content": "<p>I am working on proving a theorem (goal), and the mathematical proof method I am using is shown in the diagram. I have written about 300 lines of Lean 4 code based on the proof method in the diagram. I realized that the range of hx​ in the previously written theorem (theorem Binomial_theorem') — 0&lt;x&lt;1 — conflicts with the range I am currently proving, which is 0≤k≤1. I want to rewrite the range of hx​ in the Binomial_theorem to extend it to 0≤x≤1, but I found that I am unable to prove that the equality holds when x=1.<br>\nIs there any way to solve this problem? Or is it the case that this mathematical proof cannot be reproduced in Lean 4? I have attached my code along with the minimal working example. I hope someone can help me.</p>\n<p>This is the proof in nature language:<br>\n<a href=\"/user_uploads/3121/CcYXNdyJFUInjhNZQOtJzYGe/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/CcYXNdyJFUInjhNZQOtJzYGe/image.png\" title=\"image.png\"><img data-original-dimensions=\"629x382\" src=\"/user_uploads/thumbnail/3121/CcYXNdyJFUInjhNZQOtJzYGe/image.png/840x560.webp\"></a></div><p>This is the <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> that I expect to prove:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finset</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Binomial_theorem'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Ico</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Ico</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n</code></pre></div>\n<p>This is the whole Lean4 code that I have written (show that I am struggled with the range):<br>\n<a href=\"/user_uploads/3121/xDyEdhBp8D8yR3DFGf8yuI3f/goal.lean\">goal.lean</a></p>",
        "id": 491284384,
        "sender_full_name": "Jasin Jiang",
        "timestamp": 1735566519
    },
    {
        "content": "<p>Given your recent posts, I am very unclear what is going on here. Are you asking the community to do your homework for you? PS can you change the title of this thread to something more helpful? Right now it conveys no useful information.</p>",
        "id": 491285670,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735567287
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/The.20range.20is.20driving.20me.20crazy.2E.20X_X/near/491285670\">said</a>:</p>\n<blockquote>\n<p>Given your recent posts, I am very unclear what is going on here. Are you asking the community to do your homework for you? PS can you change the title of this thread to something more helpful? Right now it conveys no useful information.</p>\n</blockquote>\n<p>Thank you for your suggestion. I have already updated the title. This is indeed an assignment for my Lean course. However, I believe that if I encounter something I can't figure out after thinking for a long time, it's important to ask for help. That's why I chose to post my question on the forum, hoping that kind people can offer me some advice on proving the theorem. I don't think this is a bad thing.</p>",
        "id": 491286855,
        "sender_full_name": "Jasin Jiang",
        "timestamp": 1735567942
    },
    {
        "content": "<p>If a problem has been bothering me for a  time and I don't ask questions, how can I progress?</p>",
        "id": 491287665,
        "sender_full_name": "Jasin Jiang",
        "timestamp": 1735568436
    },
    {
        "content": "<p>It is a bad thing to ask for help with your homework without clearly indicating it is homework, such that people responding know not to give you answers to your problem but to instead point you to hints or tutorials such that you finish your own work yourself. Surely your university's ethics policy mentions this?</p>",
        "id": 491287845,
        "sender_full_name": "Julian Berman",
        "timestamp": 1735568536
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Can.20the.20value.20of.20hx.20in.20MWE.20be.20extended.20to.20x.20.3D.201/near/491287845\">said</a>:</p>\n<blockquote>\n<p>It is a bad thing to ask for help with your homework without clearly indicating it is homework, such that people responding know not to give you answers to your problem but to instead point you to hints or tutorials such that you finish your own work yourself. Surely your university's ethics policy mentions this?</p>\n</blockquote>\n<p>I sincerely apologize, I didn't consider this issue. Next time when I ask a question, I will make sure to include 'homework' in the title.</p>",
        "id": 491288264,
        "sender_full_name": "Jasin Jiang",
        "timestamp": 1735568773
    },
    {
        "content": "<p>What materials have you been given to actually learn Lean sufficiently well to solve these problems? Surely you weren't simply given a bunch of problems and asked to solve them without being <em>taught</em> anything about Lean?</p>",
        "id": 491288591,
        "sender_full_name": "Julian Berman",
        "timestamp": 1735568967
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Homework.20issue.3A.20Can.20the.20conditions.20in.20the.20MWE.20be.20extended.3F/near/491288591\">said</a>:</p>\n<blockquote>\n<p>What materials have you been given to actually learn Lean sufficiently well to solve these problems? Surely you weren't simply given a bunch of problems and asked to solve them without being <em>taught</em> anything about Lean?</p>\n</blockquote>\n<p>Not much learning material was provided. There were a few public lectures on Lean 4, mainly focusing on basic propositional reasoning, but after that, there were no further courses. I had to figure out how to prove things by watching how other students write code, looking at definitions in Lean 4 Mathlib, and asking questions in forums. I really feel like I’m self-learning</p>",
        "id": 491289430,
        "sender_full_name": "Jasin Jiang",
        "timestamp": 1735569364
    },
    {
        "content": "<p>And a few hours ago when you were linked <a href=\"https://leanprover-community.github.io/learn.html\">https://leanprover-community.github.io/learn.html</a>, which of those did you read?</p>",
        "id": 491293363,
        "sender_full_name": "Julian Berman",
        "timestamp": 1735571554
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Homework.20issue.3A.20Can.20the.20conditions.20in.20the.20MWE.20be.20extended.3F/near/491293363\">said</a>:</p>\n<blockquote>\n<p>And a few hours ago when you were linked <a href=\"https://leanprover-community.github.io/learn.html\">https://leanprover-community.github.io/learn.html</a>, which of those did you read?</p>\n</blockquote>\n<p>try to play that game in this html.</p>",
        "id": 491295084,
        "sender_full_name": "Jasin Jiang",
        "timestamp": 1735572464
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"814172\">@Jasin Jiang</span> since your <code>goal.lean</code> shows clear work, here is a way to get started on your <code>x = 1</code> question:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Binomial_theorem'_aux</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Ico</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Ico</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">suffices</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Ico</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">sum_Ioo_add_left</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 491297099,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1735573545
    },
    {
        "content": "<p>Note the line with <code>simpa</code> was written by first writing <code>simp</code> and then copy-pasting the resulting goal into a <code>suffices</code>.</p>",
        "id": 491297257,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1735573612
    },
    {
        "content": "<p>@_**Patrick Massot</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"o\">((</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"o\">(</span><span class=\"bp\">↑</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n</code></pre></div>\n<p>What is  0 ^ 0 defined as in Lean 4? I really didn't notice this, I thought it was undefined.<br>\nI am really surprised that a single simp can make this expression hold.</p>",
        "id": 491298672,
        "sender_full_name": "Jasin Jiang",
        "timestamp": 1735574359
    },
    {
        "content": "<p>I am not at all surprised that <code>simp</code> can make progress here. <code>simp</code> just rewrites with many theorems of the form X=Y where Y is an obviously simpler form of X. So it will simplify x^1 to x, it will simplify x-x to 0, it will simplify 0^0 to 1, it will simplify x*1 to x and so on</p>",
        "id": 491299317,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735574658
    },
    {
        "content": "<p>Nothing is undefined in lean, even 1/0 is defined and it's 0</p>",
        "id": 491299356,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735574684
    },
    {
        "content": "<p>thank you</p>",
        "id": 491299419,
        "sender_full_name": "Jasin Jiang",
        "timestamp": 1735574720
    },
    {
        "content": "<p>Note that your question would not make any sense if this was not defined.</p>",
        "id": 491301654,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1735575937
    },
    {
        "content": "<p>ok, i get it</p>",
        "id": 491301778,
        "sender_full_name": "Jasin Jiang",
        "timestamp": 1735575995
    }
]