[
    {
        "content": "<p>I am surprised that the following syntax doesn't work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">ara</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"ara\"</span>\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Foo</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">yolo</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"w\">  </span><span class=\"n\">IO</span><span class=\"bp\">.</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">s!</span><span class=\"s2\">\"{ara}\"</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">yolo</span>\n</code></pre></div>\n<p>I get the error \"unexpected identiifer; expected command\". If I omit the <code>in</code>, I get the error \"unexpected token at 'do' element; expected '{'`</p>\n<p>I would like it if lean syntax supported using <code>open</code> within a do-block; and if there's a good reason to disallow this syntax, it would be nice if the error message about it was clearer</p>",
        "id": 496940166,
        "sender_full_name": "Greg Shuflin",
        "timestamp": 1738306898
    },
    {
        "content": "<p>This will work if you put parentheses around the open and the following line</p>",
        "id": 496940316,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1738306959
    },
    {
        "content": "<p>but <code>open Foo</code> is not a do elem currently, that's an RFC, probably not too contentious</p>",
        "id": 496940370,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1738306990
    },
    {
        "content": "<p>do you know what rfc number offhand?</p>",
        "id": 496941136,
        "sender_full_name": "Greg Shuflin",
        "timestamp": 1738307371
    },
    {
        "content": "<p>I mean it's an RFC you need to write</p>",
        "id": 496941538,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1738307595
    },
    {
        "content": "<p>ah</p>",
        "id": 496941559,
        "sender_full_name": "Greg Shuflin",
        "timestamp": 1738307607
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/issues/6884\">https://github.com/leanprover/lean4/issues/6884</a></p>",
        "id": 496942212,
        "sender_full_name": "Greg Shuflin",
        "timestamp": 1738307963
    }
]