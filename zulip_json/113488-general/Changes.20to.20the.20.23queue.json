[
    {
        "content": "<p>Should the pull request template be updated to remove mentions of the <code>awaiting-review</code> label?</p>",
        "id": 450204163,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1720539412
    },
    {
        "content": "<ol>\n<li>Is there a discussion thread for this?</li>\n<li>One issue that is due to the large number of PRs on queue and  limits on maintainer time is, PRs quickly get merge conflicts before they ever get into the first page. After removing the merge conflict, they have to start at the back of the line again. This leads to many PRs never getting to the front at all. Can the PRs in queue be sorted in a way that handles this issue better?</li>\n</ol>",
        "id": 450205114,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720539612
    },
    {
        "content": "<p>2 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"113486\" href=\"/#narrow/stream/113486-announce/topic/Changes.20to.20the.20.23queue\">#announce &gt; Changes to the #queue</a> by <span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span>.</p>",
        "id": 450209039,
        "sender_full_name": "Notification Bot",
        "timestamp": 1720540450
    },
    {
        "content": "<p>Here is the discussion thread :)</p>",
        "id": 450209085,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1720540461
    },
    {
        "content": "<p>I think a lot more PRs get merged from the last page of the queue than the first :)<br>\nA good strategy to get your PRs merged is to split them up into many small pieces, and not change too many files in one PR. That way, each individual PR is less likely to get merge conflicts (and if it does, it's usually straightforward to fix), and is less overwhelming to review, which leads to quicker merges</p>",
        "id": 450214460,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1720541500
    },
    {
        "content": "<p>And a reviewer might have time / energy to look at one of your four (say) smaller PRs even when they wouldn't have time to review the bigger one</p>",
        "id": 450215811,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1720541795
    },
    {
        "content": "<p>Sometimes this is possible. But sometimes you have PRs like my recently merged chore PR which namespaced Vector. This was necessarily going to affect every single place vector was called, even if in small ways. It moved in and out of merge-conflict very quickly over June.</p>",
        "id": 450215943,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720541828
    },
    {
        "content": "<p>It's true that shorter PRs get reviews easier, but the system is not rewarding such behaviour when the speed up is sub-linear and the PRs are sequential (which is often the case IMO).</p>",
        "id": 450218211,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1720542285
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/113488-general/topic/Changes.20to.20the.20.23queue/near/450204163\">said</a>:</p>\n<blockquote>\n<p>Should the pull request template be updated to remove mentions of the <code>awaiting-review</code> label?</p>\n</blockquote>\n<p>Done</p>",
        "id": 450218647,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1720542370
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/113488-general/topic/Changes.20to.20the.20.23queue/near/450215943\">said</a>:</p>\n<blockquote>\n<p>Sometimes this is possible. But sometimes you have PRs like my recently merged chore PR which namespaced Vector. This was necessarily going to affect every single place vector was called, even if in small ways. It moved in and out of merge-conflict very quickly over June.</p>\n</blockquote>\n<p>For such PRs, it is strongly encouraged to coordinate on zulip and loudly announce when the PR is ready for review.</p>",
        "id": 450218769,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1720542397
    },
    {
        "content": "<p>I kinda did that a month ago and then one-two weeks ago after removing a merge conflict. It is merged now, but that happened yesterday after almost a whole month. I had practically given up on it, and it just came up again, and the merge conflict turned out to be easy to fix.</p>",
        "id": 450219122,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720542448
    },
    {
        "content": "<p>We are sorry for that. Please don't hesitate to post multiple reminds for PRs like that (I mean rather easy to review that get a lot of merge conflicts).</p>",
        "id": 450222909,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1720543318
    },
    {
        "content": "<p>Why is <code>awaiting-CI</code> not automatic? I.e., one could have the convention that if CI is running, one is never sure that the PR will pass CI.</p>",
        "id": 450277875,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1720556457
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/stream/113488-general/topic/Changes.20to.20the.20.23queue/near/450218211\">said</a>:</p>\n<blockquote>\n<p>It's true that shorter PRs get reviews easier, but the system is not rewarding such behaviour when the speed up is sub-linear and the PRs are sequential (which is often the case IMO).</p>\n</blockquote>\n<p>I often create small PRs while working on a larger goal (create a new branch, cherry-pick some changes, open a PR, switch back, continue working). This way auxiliary lemmas start going through review while the main result is not ready yet.</p>",
        "id": 450289790,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1720560114
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"514145\">Geoffrey Irving</span> <a href=\"#narrow/stream/113488-general/topic/Changes.20to.20the.20.23queue/near/450277875\">said</a>:</p>\n<blockquote>\n<p>Why is <code>awaiting-CI</code> not automatic? I.e., one could have the convention that if CI is running, one is never sure that the PR will pass CI.</p>\n</blockquote>\n<p>In practice that's not really the case, and PRs which don't pass CI are not on <a href=\"https://bit.ly/3Le2asS\">#queue</a> anyway. <code>awaiting-CI</code> is more like \"I expect to need several rounds of fixes\"</p>",
        "id": 450336767,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1720582830
    },
    {
        "content": "<p>I use <code>awaiting-CI</code> when I <code>bors d+</code> and CI isn't ready yet, as a clear flag that the PR author shouldn't <code>bors r+</code> before a <span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> for CI.</p>",
        "id": 450339026,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1720584250
    },
    {
        "content": "<p>Why don't we use <code>auto-merge-auto-CI</code> in this case?</p>",
        "id": 450345789,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1720587890
    },
    {
        "content": "<p>I thought that bors wouldn't merge anything which didn't have a green tick anyway. Hence I've never used the awaiting-CI tag because I couldn't see the point. If I think something needs several rounds of compilation then I just mark it WIP, if I hope it's going to compile I just mark(ed) it awaiting-review.</p>",
        "id": 450350068,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720590646
    },
    {
        "content": "<p>bors will happily queue a PR that still has CI running <span aria-label=\"orange circle\" class=\"emoji emoji-1f7e0\" role=\"img\" title=\"orange circle\">:orange_circle:</span></p>",
        "id": 450382256,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1720600116
    },
    {
        "content": "<p>I thought that this used to be the case, but when it merged something which had CI running the maintainers changed CI to stop this happening. I could be wrong though, and don't know anything about CI, and certainly don't want to check this by experimenting :-)</p>",
        "id": 450385022,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720600803
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14609\">#14609</a> ensures github workflows don't create the awaiting-review label any more</p>",
        "id": 450445225,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1720616156
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> you can definitely put stuff on the bors queue while CI is running. I did it just the other day and then had to take it off again.</p>",
        "id": 450608529,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1720664481
    },
    {
        "content": "<p>I tagged my PR yesterday with awaiting-CI just in case I was wrong :-) (it removed an import so there was a risk :-) )</p>",
        "id": 450621328,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720672907
    },
    {
        "content": "<p>Could we also make <code>RFC</code> PRs show up on <a href=\"https://bit.ly/3VVnqbT\">#queue</a> regardless of whether they pass CI or not? The point of a RFC is to get early feedback on whether an idea is worth implementing or not</p>",
        "id": 450884368,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1720764615
    },
    {
        "content": "<p>I don't think that github search language allows logical operations.</p>",
        "id": 450885146,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1720765039
    },
    {
        "content": "<p>In any case RFCs perhaps deserve threads in the PR reviews channel?</p>",
        "id": 450964348,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1720788520
    },
    {
        "content": "<p>in <a href=\"https://github.com/leanprover-community/mathlib4/pull/14781\">#14781</a> (which depends on <a href=\"https://github.com/leanprover-community/mathlib4/pull/14721\">#14721</a>), I added the 'blocked-by-other-PR' label only to have the bot remove it. What did I do wrong?</p>",
        "id": 451648575,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1721085755
    },
    {
        "content": "<p>The bot manages that tag by parsing the PR comment for lines that look like this:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>- [ ] depends on: #abc [optional extra text]\n- [ ] depends on: #xyz [optional extra text]\n</code></pre></div>\n<p>So if you add the following to the bottom of the PR comment in <a href=\"https://github.com/leanprover-community/mathlib4/pull/14781\">#14781</a>, the tag will be automatically added and then removed when <a href=\"https://github.com/leanprover-community/mathlib4/pull/14721\">#14721</a> gets merged:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>- [ ] depends on: #14721\n</code></pre></div>",
        "id": 451649640,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1721086329
    },
    {
        "content": "<p>Ah, except that we've been running into API limits with the bot recently, so it could be a while before the bot gets around to it...</p>",
        "id": 451653564,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1721088538
    }
]