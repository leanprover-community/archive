[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">myAnd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"c1\">-- false</span>\n<span class=\"c1\">-- why `dbg_trace \"hello\"` is ignored?</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">myAnd</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">dbg_trace</span><span class=\"w\"> </span><span class=\"s2\">\"hello\"</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 526567663,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1751362966
    },
    {
        "content": "<p>past(v4.21.0-rc2): <code>dbg_trace \"hello\"</code> is evaluated<br>\nnow(v4.22.0-rc2): ignored</p>",
        "id": 526567838,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1751363018
    },
    {
        "content": "<p>why?? I had to add <code>[macro_inline]</code> attribute in the past.</p>",
        "id": 526567949,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1751363057
    },
    {
        "content": "<p>Have all functions started to be short-circuited by default?</p>",
        "id": 526568089,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1751363097
    },
    {
        "content": "<p>I think it gets inlined at compile time</p>",
        "id": 526573600,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751364896
    },
    {
        "content": "<p>how can I make it non-inlined?</p>",
        "id": 526573705,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1751364925
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">noinline</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">myAnd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bool</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">myAnd</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">dbg_trace</span><span class=\"w\"> </span><span class=\"s2\">\"hello\"</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 526574648,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751365226
    },
    {
        "content": "<p>Thank you!</p>",
        "id": 526574896,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1751365319
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> has marked this topic as resolved.</p>",
        "id": 526574903,
        "sender_full_name": "Notification Bot",
        "timestamp": 1751365323
    },
    {
        "content": "<p>Note that there is <code>strictAnd</code> for exactly this purpose</p>",
        "id": 526618079,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751379122
    }
]