[
    {
        "content": "<p>This is showcasing another adventure of mine finding and proving random theorems on the 1000+ theorem list, the <a href=\"https://en.wikipedia.org/wiki/Pentagonal_number_theorem\">pentagonal number theorem</a></p>\n<p><a href=\"https://github.com/wwylele/PentagonalNumberTheorem/blob/master/PentagonalNumber/Basic.lean#L2071\">https://github.com/wwylele/PentagonalNumberTheorem/blob/master/PentagonalNumber/Basic.lean#L2071</a></p>\n<p>I didn't expect how messy it turned out to be. At first I thought, surely it won't be hard if the wikipedia page itself contains a proof, right? It turns out visual proofs are the worst kind to formalize. Things that are obvious in the diagram become nightmare in the code.  </p>\n<p>I suppose there is no way to get this whole thing in mathlib in the current form, but I think there are some good utility lemma that I can extract and contribute</p>",
        "id": 535217669,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1755647907
    },
    {
        "content": "<p>Nice!! Some of these lemmas definitely should be in mathlib if they're not already, on a speedy glance through I noticed </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">PowerSeries</span><span class=\"bp\">.</span><span class=\"n\">monomil_mul_monomial</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">monomial</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">monomial</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">monomial</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">monomial</span>\n<span class=\"w\">  </span><span class=\"n\">convert</span><span class=\"w\"> </span><span class=\"n\">MvPowerSeries</span><span class=\"bp\">.</span><span class=\"n\">monomial_mul_monomial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finsupp</span><span class=\"bp\">.</span><span class=\"n\">single</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finsupp</span><span class=\"bp\">.</span><span class=\"n\">single</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">PowerSeries</span><span class=\"bp\">.</span><span class=\"n\">prod_monomial</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∏</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">monomial</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"n\">monomial</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∏</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">empty</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ha</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">monomil_mul_monomial</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>which should definitely be in mathlib</p>",
        "id": 535225299,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1755654420
    },
    {
        "content": "<p>By the way, you're welcome to add your formalization to 1000.yaml already</p>",
        "id": 535241145,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1755667794
    },
    {
        "content": "<p>Thanks! I'll spend sometime cleaning up and PR a few lemmas before adding it to 1000.yaml</p>",
        "id": 535343145,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1755704550
    },
    {
        "content": "<p><span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span> hmm, before I add mine to 1000.yaml, I wanted to also prove the complex power series form (it is on the wikipedia page after all!). I thought it would be easy to turn a <code>PowerSeries</code> to a <code>tsum</code> of complex expressions, but it turned out not that simple??</p>\n<p>The only thing that looks related is <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/PowerSeries/Evaluation.html#PowerSeries.eval%E2%82%82\">PowerSeries.eval₂</a> and friends, but it already looks weird and I don't know if it is doing the thing I wanted...</p>\n<ul>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/PowerSeries/Evaluation.html#PowerSeries.HasEval\">PowerSeries.HasEval</a> talks about if x ^ n converges to 0 without mentioning of the coefficients. This is as if stating the radius of convergent is always 1, but that doesn't make sense</li>\n<li>The seemingly friendlier form <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/PowerSeries/Evaluation.html#PowerSeries.eval%E2%82%82Hom\">PowerSeries.eval₂Hom</a> doesn't allow me to evaluate to a complex number because of non-existence <code>IsLinearTopology \\C \\C</code>. I don't quite understand what IsLinearTopology is doing and it seems that there is almost no instance for this class in mathlib?</li>\n</ul>",
        "id": 535771639,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1755909721
    },
    {
        "content": "<p>Oh btw, <a href=\"https://github.com/leanprover-community/mathlib4/pull/28720\">#28720</a> is the PR for the monomial lemmas</p>",
        "id": 535771742,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1755909854
    },
    {
        "content": "<p>After searching some Zulip history, I think what I wanted was to cross the missing bridge between PowerSeries and FormalMultilinearSeries. <span aria-label=\"smiling face with tear\" class=\"emoji emoji-1f972\" role=\"img\" title=\"smiling face with tear\">:smiling_face_with_tear:</span></p>",
        "id": 535773923,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1755912645
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"376152\">@Paul Lezeau</span> and <span class=\"user-mention\" data-user-id=\"557459\">@Xavier Généreux</span> and others recently tried to cross that bridge at the CFT workshop.</p>",
        "id": 535785258,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1755929149
    },
    {
        "content": "<p>And will be PRing this stuff soon :)</p>",
        "id": 535786725,
        "sender_full_name": "Paul Lezeau",
        "timestamp": 1755931246
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsLinearTopology#doc\">docs#IsLinearTopology</a></p>",
        "id": 535790297,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1755936173
    },
    {
        "content": "<p>Oh this is about convergence in the nonarchimedean setting, this has nothing to do with convergence of sums of complex numbers</p>",
        "id": 535790359,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1755936242
    },
    {
        "content": "<p>Ah, now that makes sense, and the HasEval condition reads like the convergent condition for p-adic series I remembered. I guess the plan is to give IsLinearTopology to, say, p-adic numbers, but it hasn't been implemented yet?</p>",
        "id": 535804023,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1755952502
    },
    {
        "content": "<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> has a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Z</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\Z_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Z</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>-linear topology but you're right, this doesn't seem to be there.</p>",
        "id": 535814996,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1755965106
    },
    {
        "content": "<p>There is a PR for Z_p, <a href=\"https://github.com/leanprover-community/mathlib4/pull/24627\">#24627</a></p>",
        "id": 535869692,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1755992883
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113488-general/topic/Pentagonal.20number.20theorem.2C.20but.20ugly/near/535790297\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsLinearTopology#doc\">docs#IsLinearTopology</a></p>\n</blockquote>\n<p>The docstring misses a word. I know I should fix it instead of writing this. But I'm on my phone about to  board a plane from Hangzhou to Hanoi so I fear I will forget to do it.</p>",
        "id": 535875901,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1756003195
    },
    {
        "content": "<p>Which word is missing where?</p>",
        "id": 535877700,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756006067
    },
    {
        "content": "<p>\"Typically one would also that the topology is invariant by translation\" should be \"Typically one would also require that the topology is invariant by translation\" for instance. And the plane is moving so I'll switch off internet now.</p>",
        "id": 535878274,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1756007062
    },
    {
        "content": "<p>So I am working on upstreaming stuff that I think should be mathlib. Here are some easy ones <a href=\"https://github.com/leanprover-community/mathlib4/pull/28861\">#28861</a> <a href=\"https://github.com/leanprover-community/mathlib4/pull/28860\">#28860</a></p>\n<p>Should we also have definitions of generating functions of various partition functions in mathlib? Currently there are some in <a href=\"https://github.com/leanprover-community/mathlib4/blob/master/Archive/Wiedijk100Theorems/Partition.lean\">https://github.com/leanprover-community/mathlib4/blob/master/Archive/Wiedijk100Theorems/Partition.lean</a>, but they are only stated as truncated finite product (presumably because at that time the topology hadn't been defined)</p>\n<p>(Maybe I should move this to <a class=\"stream\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4\">#mathlib4</a> ?)</p>",
        "id": 535911098,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1756051714
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873350\">Weiyi Wang</span> <a href=\"#narrow/channel/113488-general/topic/Pentagonal.20number.20theorem.2C.20but.20ugly/near/535911098\">said</a>:</p>\n<blockquote>\n<p>Currently there are some in <a href=\"https://github.com/leanprover-community/mathlib4/blob/master/Archive/Wiedijk100Theorems/Partition.lean\">https://github.com/leanprover-community/mathlib4/blob/master/Archive/Wiedijk100Theorems/Partition.lean</a>, but they are only stated as truncated finite product (presumably because at that time the topology hadn't been defined)</p>\n</blockquote>\n<p>Yes, this is exactly correct; there's TODOs in that file to \"upgrade\" the definitions and proofs to use the full generating function instead of just a finite truncation</p>",
        "id": 535913055,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1756054079
    },
    {
        "content": "<p>Update: it is no longer ugly after I tried a different approach <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span> . I have also got both power series version and complex number version. <a href=\"https://wwylele.github.io/PentagonalNumberTheorem/docs/PentagonalNumber.html\">https://wwylele.github.io/PentagonalNumberTheorem/docs/PentagonalNumber.html</a><br>\nIt is only a small project, but I am really having fun not only proving theorems, but also playing around docgen and other tools.</p>",
        "id": 541835515,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1759003702
    }
]