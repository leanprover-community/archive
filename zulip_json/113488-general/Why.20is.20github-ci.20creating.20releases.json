[
    {
        "content": "<p>Hi,<br>\nI just setup a new repo and the CI reported failure because it could not create a new release. Why is the CI trying to do this in  the first place?</p>",
        "id": 575164412,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771768929
    },
    {
        "content": "<p>This is not a feature that I believe we want in most project repos or workshop demo repos. I claim that we just need the CI green check to show the project builds.</p>",
        "id": 575164448,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771768969
    },
    {
        "content": "<p>What command did you use to create the repo? What's in <code>.github/workflows/*</code>?</p>",
        "id": 575164492,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771769022
    },
    {
        "content": "<p><code>lake new &lt;project name&gt; math</code>. There was a create-release.yml in the workflows. I just pushed a commit to delete it</p>",
        "id": 575164530,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771769065
    },
    {
        "content": "<p>Here is the contents of the autogenerated file:</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Create Release</span>\n\n<span class=\"nt\">on</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"nt\">push</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nt\">branches</span><span class=\"p\">:</span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"s\">'main'</span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"s\">'master'</span>\n<span class=\"w\">    </span><span class=\"nt\">paths</span><span class=\"p\">:</span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"s\">'lean-toolchain'</span>\n\n<span class=\"nt\">jobs</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"nt\">lean-release-tag</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Add Lean release tag</span>\n<span class=\"w\">    </span><span class=\"nt\">runs-on</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">ubuntu-latest</span>\n<span class=\"w\">    </span><span class=\"nt\">permissions</span><span class=\"p\">:</span>\n<span class=\"w\">      </span><span class=\"nt\">contents</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">write</span>\n<span class=\"w\">    </span><span class=\"nt\">steps</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">lean-release-tag action</span>\n<span class=\"w\">      </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">leanprover-community/lean-release-tag@v1</span>\n<span class=\"w\">      </span><span class=\"nt\">with</span><span class=\"p\">:</span>\n<span class=\"w\">        </span><span class=\"nt\">do-release</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">true</span>\n<span class=\"w\">        </span><span class=\"nt\">GITHUB_TOKEN</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ secrets.GITHUB_TOKEN }}</span>\n</code></pre></div>\n<p>It looks like the intent is to create a new release whenever you update your <code>lean-toolchain</code>.</p>",
        "id": 575164641,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771769197
    },
    {
        "content": "<p>It also runs when a new <del>toolchain</del> project is created</p>",
        "id": 575164663,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771769216
    },
    {
        "content": "<p>In any case it also fails without some permissions on github, for which no instructions are provided in the auto-generated README.md.</p>",
        "id": 575164669,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771769219
    },
    {
        "content": "<p>Could you point to a failure example? Or suggest instructions to add?</p>",
        "id": 575198838,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1771800391
    },
    {
        "content": "<p>in DM</p>",
        "id": 575199096,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1771800563
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/lean-release-tag/pull/2\">https://github.com/leanprover-community/lean-release-tag/pull/2</a></p>",
        "id": 575201490,
        "sender_full_name": "Kim Morrison :bot:",
        "timestamp": 1771802514
    }
]