[
    {
        "content": "<p>Hi! I am having a small technical problem and was hoping someone here would be able to help me fix it.</p>\n<p>I just updated my elan version and for some reason my Lean4 VS Code extension seems to have stopped working. I'm on Lean 4.15.0 and Elan 3.1.1 and use a MacBook Air M2 with OS Sequoia 15.2. Things like <code>lake exe cache get</code> and <code>lake build</code> seem to be working fine, but I can no longer see the orange bars in my file. The infoview just says \"No info found\" and has a little thing circling next to the file name. Given that <code>lake</code> seems to be working fine, I am assuming something about my elan update somehow broke my extension. I do not seem to be getting errors in my editor, either: for instance,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n</code></pre></div>\n<p>does not give me any errors in my editor even though this code is incorrect. <code>lake build</code>, however, catches it out, just as one would expect it to.</p>\n<p>Does anyone know how I can fix it? Many thanks in advance!</p>",
        "id": 492997236,
        "sender_full_name": "Sidharth Hariharan",
        "timestamp": 1736531184
    },
    {
        "content": "<p>What's your Lean 4 VS Code extension version?</p>",
        "id": 493000889,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736532501
    },
    {
        "content": "<p>0.0.186, last updated today</p>",
        "id": 493001269,
        "sender_full_name": "Sidharth Hariharan",
        "timestamp": 1736532645
    },
    {
        "content": "<p>Interestingly, I only seem to be having this problem when I open up one specific repository. The repository works for other people, and worked perfectly for me before I updated elan.</p>",
        "id": 493004534,
        "sender_full_name": "Sidharth Hariharan",
        "timestamp": 1736533931
    },
    {
        "content": "<p>Try deleting .lake and then doing <code>lake exe cache get!</code> but I'm not optimistic that this will fix it.</p>",
        "id": 493004881,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736534029
    },
    {
        "content": "<p>After having tried a bit to fix it on Sidharth's laptop - since <code>lake build</code> works fine, I'm not sure how much that'll help! Lean is working fine from command line in the repo, just not Lean in the extension</p>",
        "id": 493005565,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1736534306
    },
    {
        "content": "<p>Uninstall and reinstall the extension? Disable Lean 3 extension?</p>",
        "id": 493006484,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736534646
    },
    {
        "content": "<p>Doesn't seem to be working... the Lean3 one is disabled and i've tried uninstalling and reinstalling as well as restarting the extension.</p>",
        "id": 493008019,
        "sender_full_name": "Sidharth Hariharan",
        "timestamp": 1736535259
    },
    {
        "content": "<p>What does <a href=\"https://github.com/leanprover/vscode-lean4/blob/master/vscode-lean4/manual/manual.md#collecting-setup-information\">https://github.com/leanprover/vscode-lean4/blob/master/vscode-lean4/manual/manual.md#collecting-setup-information</a> show in that project?</p>",
        "id": 493014813,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736538104
    },
    {
        "content": "<p>Here's what it says:</p>\n<p><strong>Operating system</strong>: Darwin (release: 24.2.0)<br>\n<strong>CPU architecture</strong>: arm64<br>\n<strong>CPU model</strong>: 8 x Apple M2<br>\n<strong>Available RAM</strong>: 17.18 GB</p>\n<p><strong>VS Code version</strong>: Reasonably up-to-date (version: 1.96.2)<br>\n<strong>Lean 4 extension version</strong>: 0.0.186<br>\n<strong>Curl installed</strong>: true<br>\n<strong>Git installed</strong>: true<br>\n<strong>Elan</strong>: Reasonably up-to-date (version: 3.1.1)<br>\n<strong>Lean</strong>: Reasonably up-to-date (version: 4.15.0)<br>\n<strong>Project</strong>: Valid Lean project (path: path/to/my/repo)</p>\n<hr>\n<p><strong>Elan toolchains</strong>: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">installed</span><span class=\"w\"> </span><span class=\"n\">toolchains</span>\n<span class=\"c1\">--------------------</span>\n\n<span class=\"n\">stable</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mf\">3.44</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mf\">3.48</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mf\">3.49</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mf\">3.50</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mf\">3.50</span><span class=\"bp\">.</span><span class=\"m\">3</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mf\">3.51</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">nightly</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">default</span><span class=\"o\">)</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"mi\">2023</span><span class=\"bp\">-</span><span class=\"mi\">02</span><span class=\"bp\">-</span><span class=\"mi\">04</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"mi\">2023</span><span class=\"bp\">-</span><span class=\"mi\">05</span><span class=\"bp\">-</span><span class=\"mi\">31</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">nightly</span><span class=\"bp\">-</span><span class=\"mi\">2024</span><span class=\"bp\">-</span><span class=\"mi\">04</span><span class=\"bp\">-</span><span class=\"mi\">24</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">stable</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">10</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">11</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">13</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc3</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">14</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span>\n\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">4</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">6</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">8</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n\n<span class=\"n\">active</span><span class=\"w\"> </span><span class=\"n\">toolchain</span>\n<span class=\"c1\">----------------</span>\n\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">overridden</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">path</span><span class=\"bp\">/</span><span class=\"n\">to</span><span class=\"bp\">/</span><span class=\"n\">my</span><span class=\"bp\">/</span><span class=\"n\">repo</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain'</span><span class=\"o\">)</span>\n\n<span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">4.15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">apple</span><span class=\"bp\">-</span><span class=\"n\">darwin22</span><span class=\"bp\">.</span><span class=\"m\">6</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"w\"> </span><span class=\"mi\">11651562</span><span class=\"n\">caae</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Release</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 493044186,
        "sender_full_name": "Sidharth Hariharan",
        "timestamp": 1736553854
    },
    {
        "content": "<p>It's not the cause of your problem, but you're using a x86_64 elan, which is not ideal unless you still plan on using Lean 3</p>",
        "id": 493089932,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736595959
    },
    {
        "content": "<p>You can uninstall your current elan (probably via homebrew) and then follow the instructions at <a href=\"https://github.com/leanprover/elan\">https://github.com/leanprover/elan</a> to get a native version</p>",
        "id": 493090124,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736596142
    },
    {
        "content": "<p>That's exactly what caused this! We uninstalled elan from brew and asked the extension to install it again</p>",
        "id": 493102276,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1736606975
    },
    {
        "content": "<p>Try removing <code>~/.elan</code> and asking the extension to install it one more time? I'm worried that the new (aarch64) elan together with the old x86_64 toolchains might be a problem</p>",
        "id": 493103159,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736607784
    },
    {
        "content": "<p>If you want to gather more data, you can also see if <code>elan toolchain uninstall leanprover/lean4:v4.15.0</code> (and letting elan reinstall it) is enough to fix this particular project/toolchain</p>",
        "id": 493103459,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736608075
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"325367\">Mauricio Collares</span> <a href=\"#narrow/channel/113488-general/topic/Elan.20.2B.20Lean4.20Extension/near/493103459\">said</a>:</p>\n<blockquote>\n<p>If you want to gather more data, you can also see if <code>elan toolchain uninstall leanprover/lean4:v4.15.0</code> (and letting elan reinstall it) is enough to fix this particular project/toolchain</p>\n</blockquote>\n<p>I believe we did this too, but it's probably worth trying again</p>",
        "id": 493118323,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1736621199
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"325367\">Mauricio Collares</span> <a href=\"#narrow/channel/113488-general/topic/Elan.20.2B.20Lean4.20Extension/near/493103159\">said</a>:</p>\n<blockquote>\n<p>Try removing <code>~/.elan</code> and asking the extension to install it one more time? I'm worried that the new (aarch64) elan together with the old x86_64 toolchains might be a problem</p>\n</blockquote>\n<p>I did this, and it removed all traces of elan and Lean. I then reinstalled them via the extension. Unfortunately, I'm still having a problem with this particular repository... other repositories seem to be completely fine, even after this uninstalling and reinstalling. For reference, I'm pasting my setup information again:</p>\n<p><strong>Operating system</strong>: Darwin (release: 24.2.0)<br>\n<strong>CPU architecture</strong>: arm64<br>\n<strong>CPU model</strong>: 8 x Apple M2<br>\n<strong>Available RAM</strong>: 17.18 GB</p>\n<p><strong>VS Code version</strong>: Reasonably up-to-date (version: 1.96.2)<br>\n<strong>Lean 4 extension version</strong>: 0.0.186<br>\n<strong>Curl installed</strong>: true<br>\n<strong>Git installed</strong>: true<br>\n<strong>Elan</strong>: Reasonably up-to-date (version: 3.1.1)<br>\n<strong>Lean</strong>: Reasonably up-to-date (version: 4.15.0)<br>\n<strong>Project</strong>: Valid Lean project (path: path/to/my/repo)</p>\n<hr>\n<p><strong>Elan toolchains</strong>: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">installed</span><span class=\"w\"> </span><span class=\"n\">toolchains</span>\n<span class=\"c1\">--------------------</span>\n\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">stable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">default</span><span class=\"o\">)</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">14</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span>\n\n<span class=\"n\">active</span><span class=\"w\"> </span><span class=\"n\">toolchain</span>\n<span class=\"c1\">----------------</span>\n\n\n<span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">overridden</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">path</span><span class=\"bp\">/</span><span class=\"n\">to</span><span class=\"bp\">/</span><span class=\"n\">my</span><span class=\"bp\">/</span><span class=\"n\">repo</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain'</span><span class=\"o\">)</span>\n\n<span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">4.15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">arm64</span><span class=\"bp\">-</span><span class=\"n\">apple</span><span class=\"bp\">-</span><span class=\"n\">darwin23</span><span class=\"bp\">.</span><span class=\"m\">6</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"w\"> </span><span class=\"mi\">11651562</span><span class=\"n\">caae</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Release</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>In particular, the architecture mentioned in the Lean version is now the right one.</p>",
        "id": 493133687,
        "sender_full_name": "Sidharth Hariharan",
        "timestamp": 1736635843
    },
    {
        "content": "<p>And you've tried deleting and recloning the relevant repository after all that reinstalling?</p>",
        "id": 493141714,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736643790
    },
    {
        "content": "<p>If deleting and recloning doesn't work, is there anything weird about the <code>path/to/my/repo</code> part, like spaces, non-ASCII characters, or something network-related (e.g. NFS mount or inside a Dropbox folder)?</p>",
        "id": 493220144,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736714240
    },
    {
        "content": "<p>I've recloned the repo into a folder with a less weird path (which is where all my other projects are) and now I finally have those coveted orange bars. Infoview seems to be working fine. Thank you for your help!</p>",
        "id": 493315046,
        "sender_full_name": "Sidharth Hariharan",
        "timestamp": 1736764341
    },
    {
        "content": "<p>Which aspect of the path that the project used to be in was \"weird\"?</p>",
        "id": 493315287,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1736764418
    },
    {
        "content": "<p>I don't think cloud storage is the problem: all my repos are on OneDrive, and this is the first time I've faced this sort of problem (at least since moving to Lean 4). I don't think a space in the path is a problem, because <em>all</em> my non-junk files on OneDrive are inside a folder whose name has a space in them. My first thought was that it was because my parent directory—the one into which I had cloned my repo—had a space in it, because for all my other repos, the immediate parent directory didn't have any spaces in them. However, when I created a dummy directory called <code>Trial</code> inside this directory and cloned my project in there, it still didn't work. My next thought is that the problem stems from the fact that the parent directory had brackets in the name. The reason for this is that the repo is for a course I'm taking, and I always add the course number to the course name in brackets for ease of reference. This is consistent with the fact that when I created a directory with the same name inside my standard Lean project directory and cloned the repo inside that folder, the same issue came up again. I might play around with it a little more at some point, but based on this preliminary experimentation, I suspect that the brackets are the reason it wasn't working.</p>",
        "id": 493319341,
        "sender_full_name": "Sidharth Hariharan",
        "timestamp": 1736765637
    },
    {
        "content": "<p>I can reproduce with:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">mkdir</span><span class=\"w\"> </span><span class=\"s2\">\"[Test]\"</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"s2\">\"[Test]\"</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">clone</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">b</span><span class=\"bp\">-</span><span class=\"n\">mehta</span><span class=\"bp\">/</span><span class=\"n\">formalising</span><span class=\"bp\">-</span><span class=\"n\">mathematics</span><span class=\"bp\">-</span><span class=\"n\">notes</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">formalising</span><span class=\"bp\">-</span><span class=\"n\">mathematics</span><span class=\"bp\">-</span><span class=\"n\">notes</span><span class=\"bp\">/</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n</code></pre></div>\n<p>When I open <code>Section01logic/Sheet1.lean</code> in VS Code, the Infoview permanently shows a \"Restart file\" button and \"No info found\" regardless of where the cursor is. <code>{Test}</code> also fails, <code>(Test)</code> works. All three work in Emacs.</p>",
        "id": 493333609,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736769918
    },
    {
        "content": "<p>Thanks for tracking this down! <span class=\"user-mention\" data-user-id=\"476523\">@Sidharth Hariharan</span> or <span class=\"user-mention\" data-user-id=\"325367\">@Mauricio Collares</span>, would one of you mind opening a bug report for that? (I know that some people will tear their hair out at the thought of using brackets in directory names, but ... it happens!)</p>",
        "id": 493334815,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736770297
    },
    {
        "content": "<p>No need to create an issue, I think I already know what the problem is.</p>",
        "id": 493336348,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1736770788
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/vscode-lean4/pull/566\">vscode-lean4#566</a></p>",
        "id": 493348347,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1736774086
    },
    {
        "content": "<p>Woah, thanks for this! And thanks Mauricio for thinking about the path - I'd never have considered that to be relevant!</p>",
        "id": 493369804,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1736779626
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"221921\">Marc Huisinga</span> <a href=\"#narrow/channel/113488-general/topic/Elan.20.2B.20Lean4.20Extension/near/493348347\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/vscode-lean4/pull/566\">vscode-lean4#566</a></p>\n</blockquote>\n<p>Thanks! I tested 0.0.189 and it works for <code>[Test]</code>, but unfortunately not yet for <code>{Test}</code>. VSCodium versions:</p>\n<p>Version: 1.96.2<br>\nRelease: 24355<br>\nCommit: 29b115fb6fb418b80e93102cb177e06803e7b907<br>\nDate: 2024-12-21T00:45:47.611Z<br>\nElectron: 32.2.7<br>\nElectronBuildId: undefined<br>\nChromium: 128.0.6613.186<br>\nNode.js: 20.18.1<br>\nV8: 12.8.374.38-electron.0<br>\nOS: Linux x64 6.1.0-23-amd64</p>",
        "id": 493379730,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736782109
    },
    {
        "content": "<p>I guess it's also good to try a directory named <code>{a,b}</code></p>",
        "id": 493384202,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736783267
    },
    {
        "content": "<p>Great, looks like the escape function from the npm glob package doesn't actually escape globs correctly. <a href=\"https://github.com/leanprover-community/vscode-lean4/pull/569\">vscode-lean4#569</a></p>",
        "id": 493392922,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1736785532
    },
    {
        "content": "<p>The previous fix seems like the idiomatic JS way to do it, but it is somewhat amusing. To recap, to escape globs in JS, one installs the <code>glob</code> npm package, which defers this functionality to the <code>minimatch</code> npm package, which has a one-line function <code>escape</code> which just does regexp substitution with the wrong regexp.</p>",
        "id": 493396400,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736786405
    },
    {
        "content": "<p>Thanks for inlining and fixing the regexp!</p>",
        "id": 493396501,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736786431
    },
    {
        "content": "<p>FWIW, it looks like this issue still isn't entirely fixed as <span class=\"user-mention\" data-user-id=\"325367\">@Mauricio Collares</span> figured out, since paths like <code>{Test</code> don't work (though <code>{Test}</code> does). The glob escaping seems to work fine AFAICT, so my next guess would be that there's another issue in VS Code's language client library or perhaps even in VS Code itself. I've created <a href=\"https://github.com/leanprover-community/vscode-lean4/pull/570\">vscode-lean4#570</a> to track this.</p>\n<p>Perhaps it's best to just wait until the next language client release that removes the need for glob escaping entirely and see if we can figure this out fully then.</p>",
        "id": 493405293,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1736788844
    }
]