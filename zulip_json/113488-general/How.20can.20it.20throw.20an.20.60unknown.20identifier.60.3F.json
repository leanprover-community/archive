[
    {
        "content": "<p>Hey! I was coding in Lean and suddenly got stuck on an <code>unknown identifier</code> error that for me completely doesn't make a sense. I minimized the example and put it here : <a href=\"https://live.lean-lang.org/#codez=K4OwlgbgpgTgzlABMAUCiBDGYMCMA2SA3iMALaJwAuMAXIgCoCeADksAL7pY4FIDaALVgB7RKTIBdRPwDyIJBOn8AggBM148soAyAUS1Tu2PIUQAKBAEdE9CYgC0APko1HLiQEo01GMADGVMAwSABqDADCAAyIAO4AFrBQKIiIuADMqfSAAESIAB62hgA0+YgA1IgxALz5KZRQVgD6GAU5Fq2GnhaChb5d5kyFXkV1qYM11qU9gCmEjH7Jxrxm5vGF4dH1Vt4AxP6J/gDWiPEou/tH61EAdBnHp3tQh8c36WhUiSIhFIRNIQBm+EKuQ6EhKBQAPDVWjVcEw6mAQDQxHk6hgWCx8IMTkA\">live lean</a> , but I also attach the code here. Do I not understand something fundamental, or the error message is misleading?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">num</span><span class=\"w\"> </span><span class=\"n\">str</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Zero</span><span class=\"w\"> </span><span class=\"n\">num</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">One</span><span class=\"w\"> </span><span class=\"n\">num</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">num</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"n\">num</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">seq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">num</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">str</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">num</span><span class=\"o\">)</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">VTC0</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">b3</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">num</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">seq_ax</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">num</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">str</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">num</span><span class=\"o\">),</span>\n<span class=\"w\">    </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">seq</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">True</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">VTC0</span><span class=\"w\"> </span><span class=\"n\">seq</span><span class=\"o\">)</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">VTC0</span><span class=\"bp\">.</span><span class=\"n\">b3</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">b3</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">leq_refl</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">num</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"c1\">-- here, unknown identifier 'h'</span>\n</code></pre></div>",
        "id": 538625142,
        "sender_full_name": "Paweł Balawender",
        "timestamp": 1757503173
    },
    {
        "content": "<p>section variables with explicit binders are not included in theorems unless the statement contains the variable</p>",
        "id": 538625705,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757503357
    },
    {
        "content": "<p>See <a href=\"https://lean-lang.org/doc/reference/latest//Namespaces-and-Sections/#section-variables\">this paragraph</a> from the reference (emphasis mine):</p>\n<blockquote>\n<p><em>Section variables</em> are parameters that are automatically added to declarations that mention them. This occurs whether or not the option <a href=\"https://lean-lang.org/doc/reference/latest/Definitions/Headers-and-Signatures/#autoImplicit\"><code>autoImplicit</code></a> is <a href=\"https://lean-lang.org/doc/reference/latest/Basic-Types/Booleans/#Bool___false\"><code>true</code></a>. Section variables may be implicit, strict implicit, or explicit; instance implicit section variables are treated specially.</p>\n<p>When the name of a section variable is encountered in a non-theorem declaration, it is added as a parameter. Any instance implicit section variables that mention the variable are also added. If any of the variables that were added depend on other variables, then those variables are added as well; this process is iterated until no more dependencies remain. All section variables are added in the order in which they are declared, before all other parameters. <strong>Section variables are added only when they occur in the <em>statement</em> of a theorem.</strong> Otherwise, modifying the proof of a theorem could change its statement if the proof term made use of a section variable.</p>\n</blockquote>",
        "id": 538625721,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1757503364
    },
    {
        "content": "<p>Wow! Thank you <span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span>  and <span class=\"user-mention\" data-user-id=\"260921\">@Markus Himmel</span> , <code>section variables</code> is the keyword indeed</p>",
        "id": 538626002,
        "sender_full_name": "Paweł Balawender",
        "timestamp": 1757503449
    }
]