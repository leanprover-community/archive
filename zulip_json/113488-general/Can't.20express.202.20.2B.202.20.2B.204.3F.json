[
    {
        "content": "<p>Hi all. I'm new and likely making a silly mistake. Im trying to express the proposition that 2+2=4 (preferably as a Prop and not as a Bool). But even without specifying prop or bool, the expression itself fails.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">synthesize</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"kn\">class</span>\n<span class=\"w\">  </span><span class=\"n\">OfNat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"n\">numerals</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">polymorphic</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">numeral</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"mi\">2</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">cannot</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">used</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">context</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">is</span>\n<span class=\"w\">  </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span>\n<span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">absence</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">above</span>\n\n<span class=\"n\">Hint</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">resolution</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">inspected</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">trace</span><span class=\"bp\">.</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">synthInstance</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 574444598,
        "sender_full_name": "Marvin",
        "timestamp": 1771400913
    },
    {
        "content": "<p>Welcome!</p>\n<p>The error message is referring to <code>N</code> and <code>P</code>. Looks like we're missing context. Please prepare a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a></p>\n<p>Orthogonally: do you want to prove <code>2 + 2 = 4</code>? Or do you want to \"store\" that claim as a \"variable\"? You are currently doing the latter.</p>",
        "id": 574444814,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1771401007
    },
    {
        "content": "<p>I'm writing \"variable\" in quotes, because really, you're creating a named definition.</p>\n<p>Mainly, I want to draw your attention to the fact that <code>2 + 2 = 4</code> is the <em>value</em>, and not the <em>type</em>, in your declaration.</p>",
        "id": 574444993,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1771401077
    },
    {
        "content": "<p>I want to store \"2 + 2 = 4\" as a claim (proposition, which P is an abbreviation for, sorry, and N is just some atomic type representing \"thing\")</p>",
        "id": 574449849,
        "sender_full_name": "Marvin",
        "timestamp": 1771402981
    },
    {
        "content": "<p>I'm not sure why P and N are even being picked up here, I define them somewhere else</p>",
        "id": 574450296,
        "sender_full_name": "Marvin",
        "timestamp": 1771403114
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n</code></pre></div>",
        "id": 574450383,
        "sender_full_name": "Marvin",
        "timestamp": 1771403144
    },
    {
        "content": "<p>Huh, it works if I put this in a new file...</p>",
        "id": 574450547,
        "sender_full_name": "Marvin",
        "timestamp": 1771403204
    },
    {
        "content": "<p>If you had tried to make a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> before posting then you would have been well on the way to answering your own question before you even asked it :-) That just shows the importance of these minimal examples. Now start deleting stuff in your code until it works and then you've answered your own question.</p>",
        "id": 574450896,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771403312
    },
    {
        "content": "<p>Sorry, I thought that</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n</code></pre></div>\n<p>on it's own was complete since I didn't invoke any of my custom stuff like P or N, I didn't realize those were interfering with the normal interpretation (they are defined in a different file entirely). I should have looked closer at the error message</p>",
        "id": 574451465,
        "sender_full_name": "Marvin",
        "timestamp": 1771403486
    },
    {
        "content": "<p>It is always useful to click on the button in the top right of your own code snippet to check whether the error is being reproduced</p>",
        "id": 574452041,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1771403686
    },
    {
        "content": "<p>I see, thanks!</p>",
        "id": 574452861,
        "sender_full_name": "Marvin",
        "timestamp": 1771403995
    }
]