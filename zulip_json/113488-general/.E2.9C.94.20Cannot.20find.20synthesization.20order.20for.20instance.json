[
    {
        "content": "<p>Greetings! I was trying to write an instance,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">algebraComp</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A₁</span><span class=\"w\"> </span><span class=\"n\">A₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">A₁</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">B₁</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">A₂</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">alg1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">A₁</span><span class=\"w\"> </span><span class=\"n\">B₁</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A₂</span><span class=\"w\"> </span><span class=\"bp\">→+*</span><span class=\"w\"> </span><span class=\"n\">A₁</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">A₂</span><span class=\"w\"> </span><span class=\"n\">B₁</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">A₁</span><span class=\"w\"> </span><span class=\"n\">B₁</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"n\">e₁</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">      </span><span class=\"n\">smul</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">A₁</span><span class=\"w\"> </span><span class=\"n\">B₁</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"n\">e₁</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">      </span><span class=\"n\">commutes'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">alg1</span><span class=\"bp\">.</span><span class=\"n\">commutes</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e₁</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"n\">smul_def'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n</code></pre></div>\n<p>And it returns <code>cannot find synthesization order</code> error. Why is that? I noticed that I can get the compilation work by switching it to <code>def</code>, but since I might use this instance in some statements, it would be better to have an instance.<br>\n(btw, this is a problem from (<a href=\"https://github.com/leanprover-community/mathlib4/pull/17147\">https://github.com/leanprover-community/mathlib4/pull/17147</a>))</p>",
        "id": 473299178,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1727506693
    },
    {
        "content": "<p>I don't think you can make this an instance because the goal does not mention <code>A₁</code>.</p>",
        "id": 473302252,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1727507972
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"739620\">Suzuka Yu</span> <a href=\"#narrow/stream/113488-general/topic/Cannot.20find.20synthesization.20order.20for.20instance/near/473299178\">said</a>:</p>\n<blockquote>\n<p>(btw, this is a problem from (<a href=\"https://github.com/leanprover-community/mathlib4/pull/17147\">https://github.com/leanprover-community/mathlib4/pull/17147</a>))</p>\n</blockquote>\n<p>You can just write <a href=\"https://github.com/leanprover-community/mathlib4/pull/17147\">#17147</a>, it will automatically be turned into a hyperlink</p>",
        "id": 473302441,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1727508028
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"739620\">@Suzuka Yu</span> you can read Chapter 7 of <a href=\"https://leanprover-community.github.io/mathematics_in_lean/\">#mil</a> to learn what this message means.</p>",
        "id": 473320161,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1727515964
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"703970\">Etienne Marion</span> <a href=\"#narrow/stream/113488-general/topic/Cannot.20find.20synthesization.20order.20for.20instance/near/473302252\">发言道</a>：</p>\n<blockquote>\n<p>I don't think you can make this an instance because the goal does not mention <code>A₁</code>.</p>\n</blockquote>\n<p>Right... then I'd better keep it as <code>def</code>. Thanks!</p>",
        "id": 473400590,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1727573577
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"703970\">Etienne Marion</span> <a href=\"#narrow/stream/113488-general/topic/Cannot.20find.20synthesization.20order.20for.20instance/near/473302441\">发言道</a>：</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"739620\">Suzuka Yu</span> <a href=\"#narrow/stream/113488-general/topic/Cannot.20find.20synthesization.20order.20for.20instance/near/473299178\">said</a>:</p>\n<blockquote>\n<p>(btw, this is a problem from (<a href=\"https://github.com/leanprover-community/mathlib4/pull/17147\">https://github.com/leanprover-community/mathlib4/pull/17147</a>))</p>\n</blockquote>\n<p>You can just write <a href=\"https://github.com/leanprover-community/mathlib4/pull/17147\">#17147</a>, it will automatically be turned into a hyperlink</p>\n</blockquote>\n<p>wow, thats cool</p>",
        "id": 473400611,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1727573602
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/113488-general/topic/Cannot.20find.20synthesization.20order.20for.20instance/near/473320161\">发言道</a>：</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"739620\">Suzuka Yu</span> you can read Chapter 7 of <a href=\"https://leanprover-community.github.io/mathematics_in_lean/\">#mil</a> to learn what this message means.</p>\n</blockquote>\n<p>Thanks! That explains the thing very clear.</p>",
        "id": 473400687,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1727573686
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"739620\">Suzuka Yu</span> has marked this topic as resolved.</p>",
        "id": 473400699,
        "sender_full_name": "Notification Bot",
        "timestamp": 1727573704
    }
]