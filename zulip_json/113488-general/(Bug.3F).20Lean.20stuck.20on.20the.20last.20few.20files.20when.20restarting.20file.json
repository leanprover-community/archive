[
    {
        "content": "<p><a href=\"/user_uploads/3121/6bEuM9nkYDY1bN8lGOlhrKjX/Screencast-from-2025-08-11-14-34-53.webm\">Screencast from 2025-08-11 14-34-53.webm</a><br>\nUploaded a video that records this behavior^</p>\n<div class=\"message_inline_image message_inline_video\"><a href=\"/user_uploads/3121/6bEuM9nkYDY1bN8lGOlhrKjX/Screencast-from-2025-08-11-14-34-53.webm\" title=\"Screencast from 2025-08-11 14-34-53.webm\"><video preload=\"metadata\" src=\"/user_uploads/3121/6bEuM9nkYDY1bN8lGOlhrKjX/Screencast-from-2025-08-11-14-34-53.webm\"></video></a></div><p>Working in mathlib, sometimes when I switch branch and the file needs a restart because the base branch was different, I think \"I'll just restart the file and let my beefy computer rebuild all the dependencies. No need to bother downloading the cache\". After clicking \"Restart File\" and go through all the files to rebuild, the progress often gets stuck at the last two or three files (doesn't seem to be the same file each time). Weirdly enough, the orange bar clears itself as if the rebuilding has completed, but the file doesn't provides linting or updates infoview. When it is in this state, restarting files or changing files are also unresponsive.</p>\n<p>Restarting vscode / downloading cache / waiting for 5 more minutes can often clear the problem.</p>\n<p>I remember also seeing this behavior in a standalone project with mathlib dependency, but I haven't tried it for a while</p>\n<p>Is this a known behavior?</p>",
        "id": 533848276,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1754937950
    },
    {
        "content": "<p>I've never seen this issue before. What's your VS Code extension version and Lean version?</p>",
        "id": 533928087,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1754986004
    },
    {
        "content": "<p>You reminded me my vscode might be out of date for a month. <br>\nvscode : 1.102.3<br>\nlean: v4.22.0-rc4</p>",
        "id": 533959835,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1754997997
    },
    {
        "content": "<p>What about the extension version? You can check it by using the \"Show Setup Information\" command.</p>",
        "id": 533960353,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1754998168
    },
    {
        "content": "<p><strong>Operating system</strong>: Linux (release: 6.8.0-71-generic)<br>\n<strong>CPU architecture</strong>: x64<br>\n<strong>CPU model</strong>: 16 x 11th Gen Intel(R) Core(TM) i7-11700 @ 2.50GHz<br>\n<strong>Available RAM</strong>: 16.64 GB</p>\n<p><strong>VS Code version</strong>: Reasonably up-to-date (version: 1.103.0)<br>\n<strong>Lean 4 extension version</strong>: 0.0.209<br>\n<strong>Curl installed</strong>: true<br>\n<strong>Git installed</strong>: true<br>\n<strong>Elan</strong>: Reasonably up-to-date (version: 4.1.2)<br>\n<strong>Lean</strong>: Reasonably up-to-date (version: 4.21.0)<br>\n<strong>Project</strong>: No open project<br>\n<strong>Active Lean version</strong>: leanprover/lean4:stable (default Lean version)<br>\n<strong>Installed Lean versions</strong>: leanprover/lean4:v4.21.0, leanprover/lean4:v4.22.0-rc2, leanprover/lean4:v4.22.0-rc3, leanprover/lean4:v4.22.0-rc4</p>\n<p>(I have just updated vscode after posting the previous message)</p>",
        "id": 533960572,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1754998238
    },
    {
        "content": "<p>Thanks, so everything is up-to-date. I'll try to see if I can somehow reproduce this myself. Opening a bug report in the Lean repository would also be helpful; perhaps somebody else will come across this as well.</p>",
        "id": 533960987,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1754998389
    },
    {
        "content": "<p>I'll do after collecting some more info. I think it is more likely to reproduce when one changes mathlib versions (= a lot of diff) and lets it build for restarting one file without downloading the cache</p>",
        "id": 533961381,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1754998536
    },
    {
        "content": "<p>While I haven't been able to reproduce this, one bug that may have been related to this issue and was fixed recently is <a href=\"https://github.com/leanprover/lean4/pull/10052\">lean4#10052</a>, so I would be very curious if this issue still occurs on v4.24.0-rc1.</p>",
        "id": 539498400,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1757926677
    },
    {
        "content": "<p>While I can't be sure, I remember having similar issues in the past. Mostly I just restarted VS Code and the issues resolved themselves.<br>\nConcretely I recognise all of this:</p>\n<blockquote>\n<p>Weirdly enough, the orange bar clears itself as if the rebuilding has completed, but the file doesn't provides linting or updates infoview. When it is in this state, restarting files or changing files are also unresponsive.</p>\n</blockquote>",
        "id": 539508016,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1757929155
    }
]