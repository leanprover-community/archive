[
    {
        "content": "<p>Hello,</p>\n<p>I have been working on different branches of mathlib4, and when I need to rebase and rebuild with <code>lake build</code> it's quite slow on my machine.</p>\n<p>Is there a way to give the build script more cores, like <code>lake build -j17</code> or something?</p>\n<p>Sorry if this has een addresses already somewhere before.</p>\n<p>Thanks!</p>",
        "id": 514531760,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1745668493
    },
    {
        "content": "<p>Doesn't it use them all already? Most people let CI deal with it and use <code>lake exe shake</code></p>",
        "id": 514531810,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1745668533
    },
    {
        "content": "<p>What do you mean?</p>",
        "id": 514531833,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1745668554
    },
    {
        "content": "<p>You can push to a branch of mathlib, have a cup of tea, and then do <code>lake exe cache get</code> and someone else's machine does the work for you.</p>",
        "id": 514534224,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745670313
    },
    {
        "content": "<p>(I conjecture that Ruben misspoke because I've been talking about shake in another thread)</p>",
        "id": 514534252,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745670338
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> !</p>\n<p><code>lake exe cache get</code> followed by <code>lake build</code> is awesome!</p>",
        "id": 514540954,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1745675389
    },
    {
        "content": "<p>How well does this work when you make local changes to something deep in the dependency graphy, like in the <code>Lists</code> modules, push it to <code>mathlib4</code> then do <code>lake exe cache get</code>.</p>\n<p>This is still taking a long time for me...</p>",
        "id": 514544770,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1745678121
    },
    {
        "content": "<p>Sure, mathlib takes a while to build, you can't expect miracles. Did you remember the \"have a cup of tea\" step? The other approach is to buy a super-high-spec machine.</p>",
        "id": 514545654,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745678701
    },
    {
        "content": "<p>After you push, you can watch the progress of your branch building on <a href=\"http://github.com\">github.com</a></p>",
        "id": 514545698,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745678739
    },
    {
        "content": "<p>Ha ha, fair <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 514546197,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1745679090
    },
    {
        "content": "<p>This is an awesome feature for sure!</p>",
        "id": 514546233,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1745679108
    },
    {
        "content": "<p>I just wanted to make sure I wasn't missing something or doing something wrong <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 514546277,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1745679127
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/Bulding.20Mathlib4/near/514534252\">said</a>:</p>\n<blockquote>\n<p>(I conjecture that Ruben misspoke because I've been talking about shake in another thread)</p>\n</blockquote>\n<p>I didn't even realise I got it wrong until you pointed it out <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 514550136,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1745681835
    }
]