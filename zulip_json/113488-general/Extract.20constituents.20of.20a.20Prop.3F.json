[
    {
        "content": "<p>When I write an expression that resolves to a Prop, is there any way for me to get back what the operands of the expression were afterwards?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Noun</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">john</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Noun</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Noun</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">loves</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Noun</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Noun</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">loves</span><span class=\"w\"> </span><span class=\"n\">john</span><span class=\"w\"> </span><span class=\"n\">alice</span>\n\n<span class=\"c1\">-- hypothetical code I want:</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">subject</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">second</span><span class=\"w\"> </span><span class=\"c1\">-- john</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">verb</span><span class=\"w\">    </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">first</span><span class=\"w\">  </span><span class=\"c1\">-- love</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">third</span><span class=\"w\">  </span><span class=\"c1\">-- alice</span>\n</code></pre></div>\n<p>I know that if a conjuction Prop is expressed as a type instead of as a value, you can use And.left to extract it:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">loves</span><span class=\"w\"> </span><span class=\"n\">john</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">loves</span><span class=\"w\"> </span><span class=\"n\">alice</span><span class=\"w\"> </span><span class=\"n\">john</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"c1\">-- john loves alice</span>\n</code></pre></div>\n<p>But that doesn't suffice for my use case where I store propositions as values.</p>\n<p>Is there any way to do this? I know I can create my own intermediary representation before resolving to a Prop, but is there another route already in the language I can leverage?</p>",
        "id": 576399991,
        "sender_full_name": "Marvin",
        "timestamp": 1772264328
    },
    {
        "content": "<p>I'm slightly confused by the questions: just to understanding the setting, are you aware of \"proof irrelevance\"/\"impredicativity\" or are these terms new to you (which is of course fine, they certain were to me when I started off with Lean!)? Also, when you speak about an \"expression resolving to Prop\" do you mean a <em>type</em> in <code>Prop</code> or a <em>term</em> in some type itself in <code>Prop</code>? And, finally, are you aware of the difference between the commands <code>#check</code> and <code>#eval</code>?</p>",
        "id": 576405069,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1772268571
    },
    {
        "content": "<p><code>p.second</code> can't exist because if <code>p</code> and <code>q</code> are arbitrary provable <code>Prop</code>s in lean than you can prove <code>p = q</code> from which you can deduce <code>p.second = q.second</code>. You can define <code>.second</code> at the meta (Expr) level (and then you can't prove any theorems about it) or you can make your own type of loving relationships, including an evaluation function to <code>Prop</code>, and do what you want with it.</p>",
        "id": 576406734,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1772270065
    }
]