[
    {
        "content": "<p>Was just taking a look at Lean Game Server (<a href=\"https://adam.math.hhu.de/\">https://adam.math.hhu.de/</a>) and noticed a new game - Reasoning.</p>\n<p>Hopefully this is not a repost of old news, checked but did not find a topic.</p>\n<p>Have not tried it but do plan to try it. </p>\n<p>Thanks.</p>",
        "id": 496179228,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1737999722
    },
    {
        "content": "<p>from the looks of it, the game is incomplete</p>",
        "id": 496183529,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1738001134
    },
    {
        "content": "<p>particularly, world 3 level 6 asks you to use a lemma which you don't have access to</p>",
        "id": 496183690,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1738001187
    },
    {
        "content": "<p>there is a solution tho:</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Spoiler</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">notleft</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">Or</span>\n</code></pre></div>\n</div></div>\n<p>this made me stretch my lean-fu</p>",
        "id": 496184650,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1738001548
    },
    {
        "content": "<p>the game is by <span class=\"user-mention\" data-user-id=\"714864\">@Jad Abou Hawili</span>, and I'm sure they are happy to get this sort of feedback to eliminate any bugs and inconsisencies.<span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span></p>\n<p>(and it's linked since yesterday, so not old news at all!)</p>",
        "id": 496288919,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1738055779
    },
    {
        "content": "<p>I think I would be tempted to set up some domain-specific theorems behind the scenes such as predicates <code>IsKnight A</code>, <code>IsKnave A</code>,  and proofs of <code>IsKnight A -&gt; \\not IsKnave A</code>, <code>IsKnight A \\or IsKnave A</code> etc and just give them to the reader rather than say \"actually these are members of something called a finset and it's all about intersections\"</p>",
        "id": 496290017,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738056145
    },
    {
        "content": "<p>I'll copy-paste some suggestions I DMed here, too, this inclues also an explicit example for this <code>IsKnight</code> suggestion:</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>suggestions</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<ul>\n<li>you have quite a lot of theorems under <code>[anonymous]</code>. You should probably move them all into <code>Logic</code> by adding more of these <code>TheoremDoc notleft_right as \"notleft_right\" in \"Logic\"</code></li>\n<li>If you dislike editor mode for <code>have</code>, you could import <code>Mathlib.Tactic.Have</code> which allows <code>have a : 2 = 2</code> to be written without the <code>:= by [proof]</code></li>\n<li>Was there a deliberate reason you've chosen to not introduce anything like <code>apply</code>? I found that I solved \"and\"s now with <code>exact And.intro [expr1] [expr2]</code> and I would have liked to do</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">And.intro</span>\n<span class=\"c1\">-- thinking/reading about what comes here...</span>\n<span class=\"n\">assumption</span>\n<span class=\"c1\">-- thinking again...</span>\n<span class=\"n\">assumption</span>\n</code></pre></div>\n<ul>\n<li>was there any decision process to chose <code>Knight : Finset K</code> and <code>A ∈ Knight</code> over making <code>Knight</code> a <code>structure</code> (or <code>class</code>)</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">structure</span><span class=\"w\"> </span><span class=\"n\">Inhabitant</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n\n<span class=\"kd\">structure</span><span class=\"w\"> </span><span class=\"n\">Knight</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Inhabitant</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"kd\">structure</span><span class=\"w\"> </span><span class=\"n\">Knave</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Inhabitant</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Inhabitant</span><span class=\"o\">)</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">Knight A ∧ Knave A → Knight B : Prop</span>\n<span class=\"cm\">-/</span>\n<span class=\"k\">#check</span><span class=\"w\"> </span><span class=\"n\">Knight</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Knave</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Knight</span><span class=\"w\"> </span><span class=\"n\">B</span>\n</code></pre></div>\n</div></div>",
        "id": 496290929,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1738056453
    },
    {
        "content": "<p>(I'm assuming <span class=\"user-mention\" data-user-id=\"714864\">@Jad Abou Hawili</span> is reading this thread): I would also be highly tempted to introduce notation for \"said\" e.g. <code>--&gt;</code>, so <code>A --&gt; P</code> would be the proposition \"person A said proposition P\" and then again you could have theorems (which you would just give to the player, not ask them to prove) <code>knight_says : Knight A -&gt; A --&gt; P -&gt; P</code> and <code>knave_says : Knave A -&gt; A --&gt; P -&gt; \\not P</code>. With your current set-up levels like <a href=\"https://adam.math.hhu.de/#/g/jadabouhawili/knightsandknaves-lean4game/world/KnightsAndKnaves/level/2\">https://adam.math.hhu.de/#/g/jadabouhawili/knightsandknaves-lean4game/world/KnightsAndKnaves/level/2</a> look super-confusing. Hypotheses h, h1 and h2 should not be clogging up the assumptions because they are global throughout the game; if a user wants to do a case split on whether A is a knight or a knave they can just do <code>cases</code> on <code>IsKnight A \\or IsKnave A</code> or, even better, just give them a bespoke tactic <code>person_cases A</code> rather than forcing them to continually jump through hoops. Also \"B said that A said they're a knave\" has been translated into the highly complex</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">stB</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knight</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knight</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knave</span><span class=\"o\">)</span>\n<span class=\"n\">stBn</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knave</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knight</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knave</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>whereas with my suggestion it would simply be <code>hB : B --&gt; (A --&gt; IsKnave A)</code>.</p>",
        "id": 496295333,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738057861
    },
    {
        "content": "<p>In short I'm wondering whether you can just do away completely with all the earlier levels and jump straight into the game, with literally the first levels of the game being things like \"A is a knight. A says that B is a knave. Prove B is a knave\" and never mentioning finsets or anything like that.</p>",
        "id": 496296174,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738058157
    },
    {
        "content": "<p>Sorry for the useless game title, ill change it.</p>\n<ul>\n<li>Regarding '--&gt;':<br>\nWhile i was working on the game, it felt like i was handling the semantics of the knights knaves puzzles 'manually'. I was bothered by this but didn't have an idea how to fix it.<br>\nHeres an example:<br>\nA : I am a Knight or B is a Knave.<br>\nHere, i would have to translate the statement to lean and make sure that:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knight</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>where <code>...</code> is the translated statement.<br>\nIf i made a mistake while doing this, then the puzzle violates the rules.<br>\nWith your suggestion, its doing it once right and not worrying about it. Also, having the fact that knights tell the truth is a theorem seems a lot more impactful than repeating it over and over.</p>\n<ul>\n<li>Regarding <code>h</code> ,<code>h1</code> clogging the assumptions: I acknowledged this during development, but did not have a better way so this is what i went with.</li>\n<li>Regarding the ugly translation, I acknowledged this as well but a solution did not occur to me as well. </li>\n</ul>\n<p>Most of your complaints have already occurred to my mind, just without your solutions and suggestions.<br>\nI will take your post to heart and make some improvements. </p>\n<p>Could you elaborate more on <code>person_cases</code> tactic and the <code>--&gt;</code> implementation wise? Would appreciate a relevant link or some pointers on that.</p>\n<p>Thanks for the feedback.</p>",
        "id": 496638454,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1738182819
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/New.20game.20posted.20on.20Lean.20Game.20Server.20.28Reasoning.29.3F/near/496290017\">said</a>:</p>\n<blockquote>\n<p>I think I would be tempted to set up some domain-specific theorems behind the scenes such as predicates <code>IsKnight A</code>, <code>IsKnave A</code>,  and proofs of <code>IsKnight A -&gt; \\not IsKnave A</code>, <code>IsKnight A \\or IsKnave A</code> etc and just give them to the reader rather than say \"actually these are members of something called a finset and it's all about intersections\"</p>\n</blockquote>\n<p>Thought about this and did it , but hated it. The <code>IsKnight</code>, <code>IsKnave</code> thing is useless. In 'Knights and Knaves, Second approach', setup is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n</code></pre></div>\n<p>The semantics here are that <code>A</code> being true means that <code>A</code> is a knight, not <code>A</code> means <code>A</code> is a knave. I liked this because excluded middle would be equivalent to <code>A</code> being a knight or a knave. </p>\n<p>Seemed more natural so i went with that instead.</p>\n<p>Also, i was afraid of going too heavy into lean stuff i.e making my own datatype, structure, notation etc.. I didn't feel confident enough with them to include them in the game and explain them properly so i went with the finset approach because its familiar set theory. Also, even though its called a knights and knaves game , i was torn between going into logic and set theory and this was the result <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 496639468,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1738183256
    },
    {
        "content": "<p>One of the hardest parts of making a new game is having the right idea. I have had many lousy ideas about games, basically the natural number game is the only game I could get other people interested in. I think the knights and knaves is a great idea for a game. Here is a primitive way of setting things up:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c1\">-- hide all this from the user</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Islander</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">IsKnight</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">IsKnave</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">isKnight_or_isKnave</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnight</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">not_isKnight_and_isKnave</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnight</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"o\">)</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Said</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"c1\">-- number affects where brackets will be needed</span>\n<span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"s2\">\" said \"</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">:</span><span class=\"mi\">200</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Said</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">P</span>\n<span class=\"kn\">infixr</span><span class=\"o\">:</span><span class=\"mi\">35</span><span class=\"w\"> </span><span class=\"s2\">\" and \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">And</span>\n<span class=\"kn\">infixr</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"w\"> </span><span class=\"s2\">\" or  \"</span><span class=\"w\">  </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Or</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">knight_said</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnight</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">knave_said</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">P</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">tactics</span>\n\n<span class=\"c1\">-- I don't know how to get this stuff working but it looks something like this</span>\n<span class=\"c1\">-- and an expert will be able to fix this up in 10 seconds flat</span>\n\n<span class=\"c1\">-- Attempt to make `knight_or_knave A with hA hA` work:</span>\n\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"s2\">\"knight_or_knave \"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"s2\">\" with \"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span>\n\n<span class=\"c1\">-- doesn't work though</span>\n<span class=\"c1\">-- macro_rules |</span>\n<span class=\"c1\">--   `(tactic| knight_or_knave A with h1 h2) =&gt; `(tactic| obtain h1 | h2 := isKnight_or_isKnave A)</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">tactics</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Islander</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Islander</span>\n\n<span class=\"c1\">-- Easy example</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">A is a knight. A says that B is a knave. Prove that B is a knave.</span>\n<span class=\"cm\">-/</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hA</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnight</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">knight_said</span><span class=\"w\"> </span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">A : I am a Knave or B is a Knave.</span>\n<span class=\"cm\">-/</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnight</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">hA</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hA</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">isKnight_or_isKnave</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">hA'</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hB</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">knight_said</span><span class=\"w\"> </span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not_isKnight_and_isKnave</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hA</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hA'</span><span class=\"bp\">⟩</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">elim</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hA</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hB</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">knave_said</span><span class=\"w\"> </span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n<span class=\"w\">    </span><span class=\"n\">tauto</span>\n</code></pre></div>\n<p>As you can see, the functionality is there, there are no sets or elements, the statements of the examples are really really easy to understand, a schoolchild could understand them (and you should be targetting schoolchildren which is another reason to avoid set notation). The proofs are awful because they need more thought and I need to do other things. But once you or someone else have decided what you want the proofs to <em>look like</em>, you just make your own domain-specific tactics, like I wrote my own domain-specific axioms, and the game plays like that.</p>",
        "id": 496642186,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738184373
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"714864\">@Jad Abou Hawili</span> </p>\n<p>Just want to say thanks for creating the game. I'll know it will get better with time. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 496643720,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1738185029
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> </p>\n<p>Again what you thank you for starting with the first game but more importantly at this time for giving useful feedback on how to make improvements when creating a game. </p>\n<p>I did a few of the games  last week just to see if I could use it with the  Equational Theories Project (<a href=\"#narrow/channel/458659-Equational\">Zulip Channel</a>) (<a href=\"https://teorth.github.io/equational_theories/dashboard/\">Dashboard</a>) and your game was the most polished of them all. When I first did the Numbers game with Lean 3 I was not able to finish it, after finding the the <a href=\"https://adam.math.hhu.de/\">Lean game server</a> and seeing that it has been updated, it was actually enjoyable. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 496647308,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1738186670
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"366057\">Eric Taucher</span> <a href=\"#narrow/channel/113488-general/topic/New.20game.20posted.20on.20Lean.20Game.20Server.20.28Reasoning.29.3F/near/496643720\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"714864\">Jad Abou Hawili</span> </p>\n<p>Just want to say thanks for creating the game. I'll know it will get better with time. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>\n</blockquote>\n<p>Thanks for noticing <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span> .  Things got to the point where I felt like I couldn't improve the game so i decided to upload it and hope for feedback. Wasn't expecting it to be directly after the game got to the main page. </p>\n<p>Also, it feels nice talking to people other than my brother and collaborator on the project.</p>",
        "id": 496647421,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1738186712
    },
    {
        "content": "<p>I am slowly going through all the feedback i got, and will quote and comment on each one</p>",
        "id": 497251991,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1738497280
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> says<br>\n\" If you dislike editor mode for have, you could import Mathlib.Tactic.Have which allows have a : 2 = 2 to be written without the := by [proof]\"</p>\n<p>syntax of have is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">some</span><span class=\"bp\">-</span><span class=\"n\">name</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">some</span><span class=\"bp\">-</span><span class=\"n\">prop</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">proof</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>I did not want the user to write this in one go because its weird, so i forced editor mode where <code>have</code> was already written with a sorry that needed to be filled, concrete example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\">  </span><span class=\"n\">AinInter</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">left</span><span class=\"w\"> </span><span class=\"bp\">∩</span><span class=\"w\"> </span><span class=\"n\">right</span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Yes I disliked this but it was the best solution I knew, I like your suggestion more because it allows for the following:</p>\n<p><a href=\"/user_uploads/3121/0oHzJ0CP_NlE-qWx7P3WWFnz/have.png\">have.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/0oHzJ0CP_NlE-qWx7P3WWFnz/have.png\" title=\"have.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"665x445\" src=\"/user_uploads/thumbnail/3121/0oHzJ0CP_NlE-qWx7P3WWFnz/have.png/840x560.webp\"></a></div><p><a href=\"/user_uploads/3121/OFU7UipIUT4JS3iMKX62zWEY/have2.png\">have2.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/OFU7UipIUT4JS3iMKX62zWEY/have2.png\" title=\"have2.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"660x371\" src=\"/user_uploads/thumbnail/3121/OFU7UipIUT4JS3iMKX62zWEY/have2.png/840x560.webp\"></a></div><p><a href=\"/user_uploads/3121/02TDb4KITyeoxafYBSz8tc8D/have3.png\">have3.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/02TDb4KITyeoxafYBSz8tc8D/have3.png\" title=\"have3.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"670x398\" src=\"/user_uploads/thumbnail/3121/02TDb4KITyeoxafYBSz8tc8D/have3.png/840x560.webp\"></a></div><p>This is much cleaner compared to:<br>\n<a href=\"/user_uploads/3121/cVv-8wl25Kkcar5Grjatovda/have4.png\">have4.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/cVv-8wl25Kkcar5Grjatovda/have4.png\" title=\"have4.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"539x69\" src=\"/user_uploads/thumbnail/3121/cVv-8wl25Kkcar5Grjatovda/have4.png/840x560.webp\"></a></div><p>Using sorry in the image above is weird, doing hints is weird.</p>\n<p>I didn't know you could 'postpone' the proof in a <code>have</code> statement but now I do. Thanks for the tip.</p>",
        "id": 497252514,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1738497710
    },
    {
        "content": "<p>yeah we use this trick in NNG. A lot of users would ask \"I don't want to prove the goal I'm supposed to be proving, I want to prove something else first\" and the answer in NNG is \"just write <code>have h3 : what_you_want</code>\" and lo and behold you have a new goal, you're still in tactic mode, your goal is what you want, and once you've proved it you'll have a new hypothesis <code>h3 : what_you_want</code> on the old goal (as I just realised you noted above). It's very easy to explain.</p>",
        "id": 497257074,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738501439
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/New.20game.20posted.20on.20Lean.20Game.20Server.20.28Knights.20And.20Knaves.29/near/496642186\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Islander</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> <br>\nI think some of what you did here should be mentioned in the official documentation of lean4game. Maybe a heading called \"Decluttering the proof state\" or \"Hiding clutter\". All I did was the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Inhabitant</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Inhabitant</span>\n</code></pre></div>\n<p>and this removed the pesky <code>Inhabitant : Type u_1</code> from the users view, its no longer listed under objects.</p>\n<p><a href=\"/user_uploads/3121/l90Ejpp6byE_qrvXxmiRiFGH/inh1.png\">inh1.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/l90Ejpp6byE_qrvXxmiRiFGH/inh1.png\" title=\"inh1.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"292x130\" src=\"/user_uploads/thumbnail/3121/l90Ejpp6byE_qrvXxmiRiFGH/inh1.png/840x560.webp\"></a></div><p><a href=\"/user_uploads/3121/IE_DeR20Batv-z8_BCf5rawL/inh2.png\">inh2.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/IE_DeR20Batv-z8_BCf5rawL/inh2.png\" title=\"inh2.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"298x101\" src=\"/user_uploads/thumbnail/3121/IE_DeR20Batv-z8_BCf5rawL/inh2.png/840x560.webp\"></a></div>",
        "id": 497495029,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1738603796
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> thoughts?</p>",
        "id": 497495503,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1738603941
    },
    {
        "content": "<p>i would have to do this for every file in the game, is there an easier way?</p>",
        "id": 497495847,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1738604058
    },
    {
        "content": "<p>Note that if you use my <code>IsKnight</code> idea then you'll also get rid of <code>DecidableEq</code> and <code>Finset</code></p>",
        "id": 497496497,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738604275
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"714864\">Jad Abou Hawili</span> <a href=\"#narrow/stream/113488-general/topic/New.20game.20posted.20on.20Lean.20Game.20Server.20.28Knights.20And.20Knaves.29/near/497495029\">said</a>:</p>\n<blockquote>\n<p>I think some of what you did here should be mentioned in the official documentation of lean4game.</p>\n</blockquote>\n<p>That's certainly true, although I doubt I'll be the person to write instructions on how to use Lean. If somebidy want to PR a new .md file to <code>lean4game/doc/</code> I'll happily merge that.</p>",
        "id": 497502816,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1738606358
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"714864\">Jad Abou Hawili</span> <a href=\"#narrow/stream/113488-general/topic/New.20game.20posted.20on.20Lean.20Game.20Server.20.28Knights.20And.20Knaves.29/near/497495847\">said</a>:</p>\n<blockquote>\n<p>i would have to do this for every file in the game, is there an easier way?</p>\n</blockquote>\n<p>Whatever your final setup is, you should probably do that in a preliminary file which is imported in each level. I think the sample game already has <code>Metadata.lean</code> as such a file, so you can define your axioms in there, don't you?<span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span></p>",
        "id": 497503113,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1738606469
    },
    {
        "content": "<p>Yes in NNG we unsurprisingly import the natural numbers in each level :-) but in fact what we do is import each level in the next one, which works fine</p>",
        "id": 497504745,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738607044
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/New.20game.20posted.20on.20Lean.20Game.20Server.20.28Knights.20And.20Knaves.29/near/496642186\">said</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c1\">-- hide all this from the user</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Islander</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">IsKnight</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">IsKnave</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">isKnight_or_isKnave</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnight</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">not_isKnight_and_isKnave</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnight</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"o\">)</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Said</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"c1\">-- number affects where brackets will be needed</span>\n<span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"s2\">\" said \"</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">:</span><span class=\"mi\">200</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Said</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">P</span>\n<span class=\"kn\">infixr</span><span class=\"o\">:</span><span class=\"mi\">35</span><span class=\"w\"> </span><span class=\"s2\">\" and \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">And</span>\n<span class=\"kn\">infixr</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"w\"> </span><span class=\"s2\">\" or  \"</span><span class=\"w\">  </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Or</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">knight_said</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnight</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">knave_said</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">P</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">tactics</span>\n\n<span class=\"c1\">-- I don't know how to get this stuff working but it looks something like this</span>\n<span class=\"c1\">-- and an expert will be able to fix this up in 10 seconds flat</span>\n\n<span class=\"c1\">-- Attempt to make `knight_or_knave A with hA hA` work:</span>\n\n<span class=\"c1\">--syntax \"knight_or_knave \" term \" with \" term term : tactic</span>\n\n<span class=\"c1\">-- doesn't work though</span>\n<span class=\"c1\">-- macro_rules |</span>\n<span class=\"c1\">--   `(tactic| knight_or_knave A with h1 h2) =&gt; `(tactic| obtain h1 | h2 := isKnight_or_isKnave A)</span>\n<span class=\"kn\">macro</span><span class=\"w\"> </span><span class=\"s2\">\"knight_or_knave\"</span><span class=\"w\"> </span><span class=\"n\">t1</span><span class=\"o\">:</span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"s2\">\"with\"</span><span class=\"w\"> </span><span class=\"n\">t2</span><span class=\"o\">:</span><span class=\"n\">rcasesPat</span><span class=\"w\"> </span><span class=\"n\">t3</span><span class=\"o\">:</span><span class=\"n\">rcasesPat</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">$</span><span class=\"n\">t2</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">isKnight_or_isKnave</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">t1</span><span class=\"o\">)</span>\n\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">tactics</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Islander</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Islander</span>\n\n<span class=\"c1\">-- Easy example</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">A is a knight. A says that B is a knave. Prove that B is a knave.</span>\n<span class=\"cm\">-/</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hA</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnight</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">knight_said</span><span class=\"w\"> </span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">A : I am a Knave or B is a Knave.</span>\n<span class=\"cm\">-/</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">IsKnight</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">IsKnave</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">knight_or_knave</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">hA</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n<span class=\"w\">  </span><span class=\"c1\">--obtain hA | hA := A.isKnight_or_isKnave</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">hA'</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hB</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">knight_said</span><span class=\"w\"> </span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">not_isKnight_and_isKnave</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hA</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hA'</span><span class=\"bp\">⟩</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">elim</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">hA</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hB</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">knave_said</span><span class=\"w\"> </span><span class=\"n\">hAB</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n<span class=\"w\">    </span><span class=\"n\">tauto</span>\n</code></pre></div>\n</blockquote>\n<p>fixed the custom tactic. </p>\n<p>it seems like im going to lean(not a pun) into this direction, and maybe ill move the set theory stuff into a separate world that is optional. </p>\n<p>also looking into eliminating A.isKnight A.isKnave , and just having A not A.</p>",
        "id": 498517798,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1739034184
    },
    {
        "content": "<p>also, the setup only needs 4 axioms which are :</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">IsKnight</span>\n<span class=\"n\">IsKnave</span>\n<span class=\"n\">isKnight_or_isKnave</span>\n<span class=\"n\">not_isKnight_and_isKnave</span>\n</code></pre></div>\n<p>mirroring the finset setup(there's a correspondence that can be made)</p>",
        "id": 498536495,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1739049168
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/113488-general/topic/New.20game.20posted.20on.20Lean.20Game.20Server.20.28Knights.20And.20Knaves.29/near/497503113\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"714864\">Jad Abou Hawili</span> <a href=\"#narrow/stream/113488-general/topic/New.20game.20posted.20on.20Lean.20Game.20Server.20.28Knights.20And.20Knaves.29/near/497495847\">said</a>:</p>\n<blockquote>\n<p>i would have to do this for every file in the game, is there an easier way?</p>\n</blockquote>\n<p>Whatever your final setup is, you should probably do that in a preliminary file which is imported in each level. I think the sample game already has <code>Metadata.lean</code> as such a file, so you can define your axioms in there, don't you?<span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> <br>\nRight, right. <br>\n<del>If i define an axiom say <code>knight_said</code>, i can use it in all the levels. However, I can't do <code>NewTheorem knight_said</code> and put some documentation there, I could define it as a theorem where the proof is <code>sorry</code> but that's weird. Is there a way around this? Specifically, a <code>NewTheorem</code> thing that works for <code>axiom</code> not just <code>theorem</code></del></p>\n<p>Doing <code>NewTheorem knight_said</code> fails, but <code>NewTheorem Islander.knight_said</code> works.</p>",
        "id": 498576366,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1739086583
    },
    {
        "content": "<p>Don't I do this for eg <code>add_zero</code> in NNG?</p>",
        "id": 498577674,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1739087985
    },
    {
        "content": "<p>ill take a look, <del>also it seems just declaring an axiom in <code>Metadata.lean</code> makes it available in lean files, but not the actual game.</del>(namespace issue)</p>",
        "id": 498578358,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1739088596
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/New.20game.20posted.20on.20Lean.20Game.20Server.20.28Knights.20And.20Knaves.29/near/498577674\">said</a>:</p>\n<blockquote>\n<p>Don't I do this for eg <code>add_zero</code> in NNG?</p>\n</blockquote>\n<p>yes, you did <code>NewTheorem MyNat.add_zero</code>, the namespace has to be included for some reason for it to work.</p>",
        "id": 498580524,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1739090645
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> <br>\nThe ugly statements</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">stB</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knight</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knight</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knave</span><span class=\"o\">)</span>\n<span class=\"n\">stBn</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knave</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knight</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Knave</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>are not so ugly anymore</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">dsl_iamknave</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hAKn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">isKnave</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">knight_or_knave</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">hA</span><span class=\"w\"> </span><span class=\"n\">hnA</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hnA</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">knight_said</span><span class=\"w\"> </span><span class=\"n\">hAKn</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n<span class=\"w\">    </span><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">not_isKnight_and_isKnave</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">not_isKnight_and_isKnave</span><span class=\"w\"> </span><span class=\"n\">A</span>\n<span class=\"w\">    </span><span class=\"n\">constructor</span>\n<span class=\"w\">    </span><span class=\"n\">assumption</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">assumption</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hnA</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">knave_said</span><span class=\"w\"> </span><span class=\"n\">hAKn</span><span class=\"w\"> </span><span class=\"n\">hnA</span>\n<span class=\"w\">    </span><span class=\"n\">contradiction</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Islander</span><span class=\"o\">}</span>\n<span class=\"o\">{</span><span class=\"n\">hB</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">isKnave</span><span class=\"o\">)}</span>\n<span class=\"o\">{</span><span class=\"n\">hC</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">said</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">isKnave</span><span class=\"o\">}</span>\n<span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">isKnave</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">.</span><span class=\"n\">isKnight</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">BKnave</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"bp\">.</span><span class=\"n\">isKnave</span>\n<span class=\"w\">  </span><span class=\"c1\">-- need to introduce apply in this game</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">notisKnight_isKnave</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">BKnight</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hA</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">knight_said</span><span class=\"w\"> </span><span class=\"n\">hB</span><span class=\"w\"> </span><span class=\"n\">BKnight</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">dsl_iamknave</span><span class=\"w\"> </span><span class=\"n\">hA</span>\n\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"n\">assumption</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">CKnight</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">said_knight</span><span class=\"w\"> </span><span class=\"n\">hC</span><span class=\"w\"> </span><span class=\"n\">BKnave</span>\n<span class=\"w\">  </span><span class=\"n\">assumption</span>\n</code></pre></div>\n<p>I'll credit you in the 'acknowledgments' section. <br>\nThank you so much for the feedback.</p>",
        "id": 498722128,
        "sender_full_name": "Jad Abou Hawili",
        "timestamp": 1739183279
    },
    {
        "content": "<p>This looks great! Definitely <code>apply</code> is very useful, although experience with NNG tells me that even though it's second-nature to many of us, beginners hugely struggle with the goal-changing tactic <code>apply</code> which is why I introduced the hypothesis-changing tactic <code>apply at</code> in NNG, which everyone finds much easier.</p>",
        "id": 498733212,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1739186107
    }
]