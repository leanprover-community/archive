[
    {
        "content": "<p>I recently got a new Mechrevo Kylin 16 Ultra, a laptop from a Chinese manufacturer, configured with 64GB of RAM, a 2TB SSD, an R9 9955HX3D CPU, and a 5090 GPU.</p>\n<p>I spent some time setting up the Windows Subsystem for Linux (WSL) with Ubuntu and then installed the WSL extension in VSCode. This was to ensure the CPU performance wouldn't be significantly impacted by the Windows OS, allowing for a fair comparison against the M4 Pro chip in my macOS system under a Linux environment.</p>\n<p>Unfortunately, when I created a¬†<code>test.lean</code>¬†file and added the line¬†<code>import Mathlib</code>, the time it took for the tactic state to load was about double that of my M4 Pro. To be fair, both laptops were running on battery. (An unplugged M4 Pro should probably be compared to a desktop-class 9950X3D when it's plugged in.)</p>\n<p>Furthermore, since my new Windows laptop is a gaming notebook, its battery life is far worse than my MacBook Pro's. The Mac can easily last me a full day of normal use‚ÄîI'd say at least 7 hours without issue. This one only gets about 3 hours.</p>\n<p>From every angle, I believe the MacBook is the golden tool for working with Lean. The reasons are stated above. (But is there really a Windows laptop with better performance than a Mac? I watched a  <a href=\"https://www.bilibili.com/video/BV11hjdz4EGY/\">review video on gaming laptop CPUs</a>, and the 9955HX3D is currently the top non-Apple chip. Yet, it seems when it comes to single-core performance, the Mac is still far ahead.)</p>",
        "id": 524079952,
        "sender_full_name": "Âº†ÂÆà‰ø°(Shouxin Zhang)",
        "timestamp": 1749924803
    },
    {
        "content": "<p>Doesn't WSL 2 run in some sort of VM? I'd expect that to add some CPU performance overhead, but to have better FS performance than on plain Windows. But I've never used it myself.</p>",
        "id": 524086030,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1749932537
    },
    {
        "content": "<p>It is possible to set up Lean to run on windows without WSL. I wonder what performance you'll get then.</p>",
        "id": 524119718,
        "sender_full_name": "Max Nowak üêâ",
        "timestamp": 1749982434
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"416280\">Max Nowak üêâ</span> <a href=\"#narrow/channel/113488-general/topic/Turns.20Out.20the.20MacBook.20Pro.20is.20the.20Best.20Laptop.20for.20Lean4/near/524119718\">said</a>:</p>\n<blockquote>\n<p>It is possible to set up Lean to run on windows without WSL. I wonder what performance you'll get then.</p>\n</blockquote>\n<p>It will be worse.</p>",
        "id": 524121160,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749983636
    },
    {
        "content": "<p>Have you tried dual booting a Linux system instead of using WSL? I'm also curious about the difference between these choices.</p>",
        "id": 524122292,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1749984713
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"750070\">Wang Jingting</span> <a href=\"#narrow/channel/113488-general/topic/Turns.20Out.20the.20MacBook.20Pro.20is.20the.20Best.20Laptop.20for.20Lean4/near/524122292\">said</a>:</p>\n<blockquote>\n<p>Have you tried dual booting a Linux system instead of using WSL? I'm also curious about the difference between these choices.</p>\n</blockquote>\n<p>I'll try to make the comparison after my functional analysis exam on June 17th. (To be honest, as a newbie, I think installing a dual-boot system would be a headache for me¬†Ôºö ‚ïÆ(‚ïØ‚ñΩ‚ï∞)‚ï≠)</p>",
        "id": 524125714,
        "sender_full_name": "Âº†ÂÆà‰ø°(Shouxin Zhang)",
        "timestamp": 1749988169
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"421885\">Joscha Mennicken</span> <a href=\"#narrow/channel/113488-general/topic/Turns.20Out.20the.20MacBook.20Pro.20is.20the.20Best.20Laptop.20for.20Lean4/near/524086030\">said</a>:</p>\n<blockquote>\n<p>Doesn't WSL 2 run in some sort of VM? I'd expect that to add some CPU performance overhead, but to have better FS performance than on plain Windows. But I've never used it myself.</p>\n</blockquote>\n<p>That sounds very reasonable. I will let you know how it performs running on a pure Linux system versus in a virtual machine after I've had a chance to test it.</p>",
        "id": 524125870,
        "sender_full_name": "Âº†ÂÆà‰ø°(Shouxin Zhang)",
        "timestamp": 1749988295
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"750070\">Wang Jingting</span> <a href=\"#narrow/stream/113488-general/topic/Turns.20Out.20the.20MacBook.20Pro.20is.20the.20Best.20Laptop.20for.20Lean4/near/524122292\">said</a>:</p>\n<blockquote>\n<p>Have you tried dual booting a Linux system instead of using WSL? I'm also curious about the difference between these choices.</p>\n</blockquote>\n<p>I have done exactly this. I've not compared it to WSL, but I can say Ubuntu is significantly faster than native Windows at least.</p>",
        "id": 524129441,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1749992337
    },
    {
        "content": "<p>I have switched to a MacBook Pro from an older Ubuntu machine and it's great, except that I've noticed that <code>lake build</code> in mathlib finishes essentially instantly on linux whereas you can see the mac very quickly counting to 6000. I was quite surprised by this.</p>",
        "id": 524131960,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1749995284
    },
    {
        "content": "<p>Wouldn‚Äôt that be internet speed?</p>",
        "id": 524138727,
        "sender_full_name": "Chase Norman",
        "timestamp": 1750001660
    },
    {
        "content": "<p>No that would be the limiting factor for the initial <code>lake exe cache get</code>, <code>lake build</code>  with a fetched cache doesn't talk to the internet</p>",
        "id": 524140517,
        "sender_full_name": "Henrik B√∂ving",
        "timestamp": 1750003288
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"389019\">Chris Birkbeck</span> <a href=\"#narrow/channel/113488-general/topic/Turns.20Out.20the.20MacBook.20Pro.20is.20the.20Best.20Laptop.20for.20Lean4/near/524129441\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"750070\">Wang Jingting</span> <a href=\"#narrow/stream/113488-general/topic/Turns.20Out.20the.20MacBook.20Pro.20is.20the.20Best.20Laptop.20for.20Lean4/near/524122292\">said</a>:</p>\n<blockquote>\n<p>Have you tried dual booting a Linux system instead of using WSL? I'm also curious about the difference between these choices.</p>\n</blockquote>\n<p>I have done exactly this. I've not compared it to WSL, but I can say Ubuntu is significantly faster than native Windows at least.</p>\n</blockquote>\n<p>Yeah, actually that's how I setup my computer (on my computer, compiling in Linux is about 5 times faster than Windows), but I've never tried to use WSL, so I'm sort of curious about how that would perform.</p>",
        "id": 524180473,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1750051031
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"721922\">Âº†ÂÆà‰ø°(Shouxin Zhang)</span> <a href=\"#narrow/channel/113488-general/topic/Turns.20Out.20the.20MacBook.20Pro.20is.20the.20Best.20Laptop.20for.20Lean4/near/524125714\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"750070\">Wang Jingting</span> <a href=\"#narrow/channel/113488-general/topic/Turns.20Out.20the.20MacBook.20Pro.20is.20the.20Best.20Laptop.20for.20Lean4/near/524122292\">said</a>:</p>\n<blockquote>\n<p>Have you tried dual booting a Linux system instead of using WSL? I'm also curious about the difference between these choices.</p>\n</blockquote>\n<p>I'll try to make the comparison after my functional analysis exam on June 17th. (To be honest, as a newbie, I think installing a dual-boot system would be a headache for me¬†Ôºö ‚ïÆ(‚ïØ‚ñΩ‚ï∞)‚ï≠)</p>\n</blockquote>\n<p>The idea that installing a dual-boot system is more scary/difficult than working with Lean is a bit alien to me. At least, starting from a blank state, asking your favorite search engine for a tutorial, reading it for five minutes, then trying to follow it more or less blindly, you are way more likely to end up with a successul install than a successful proof that addition of the naturals is commutative.</p>\n<p>But of course, we all have our personal preferences <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 524505815,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1750184238
    },
    {
        "content": "<p>Based on my latest test, my 9955HX3D on Ubuntu 24 compiles <code>import Mathlib</code> about 1 second faster than my unplugged Mac M4 Pro.</p>\n<p>It's quite amazing; Lean files compile significantly faster on a native Linux system than on WSL.</p>\n<p>I haven't yet tested the performance of the classic tactics <code>rw?</code>, <code>apply?</code>, and <code>simp/simp_all</code>. I'll do that after breakfast.</p>",
        "id": 525117349,
        "sender_full_name": "Âº†ÂÆà‰ø°(Shouxin Zhang)",
        "timestamp": 1750465874
    },
    {
        "content": "<p>When I plugged in my Mac, I found the <code>apply?</code> tactic seems to run faster on the M4 PRO than on my 9955HX3D. However, the difference is small, staying within 0.5s. This holds true for various scenarios: when <code>apply?</code> finds a direct solution, suggests potentially useful theorems, or fails.</p>",
        "id": 525119343,
        "sender_full_name": "Âº†ÂÆà‰ø°(Shouxin Zhang)",
        "timestamp": 1750468984
    }
]