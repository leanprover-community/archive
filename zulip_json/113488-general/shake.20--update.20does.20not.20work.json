[
    {
        "content": "<p>I tried running <code>lake exe shake LeanAPAP --update</code> within <a href=\"https://github.com/YaelDillies/LeanAPAP\">LeanAPAP</a> and I got the following output</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">gitpod</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">workspace</span><span class=\"bp\">/</span><span class=\"n\">LeanAPAP</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">master</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">shake</span><span class=\"w\"> </span><span class=\"n\">LeanAPAP</span><span class=\"w\"> </span><span class=\"c1\">--update</span>\n<span class=\"bp\">././././</span><span class=\"n\">LeanAPAP</span><span class=\"bp\">/</span><span class=\"n\">Prereqs</span><span class=\"bp\">/</span><span class=\"n\">Convolution</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">remove</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">LeanAPAP</span><span class=\"bp\">.</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Positivity</span><span class=\"o\">]</span>\n<span class=\"bp\">././././</span><span class=\"n\">LeanAPAP</span><span class=\"bp\">/</span><span class=\"n\">Prereqs</span><span class=\"bp\">/</span><span class=\"n\">Expect</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">remove</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">LeanAPAP</span><span class=\"bp\">.</span><span class=\"n\">Prereqs</span><span class=\"bp\">.</span><span class=\"n\">Expect</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Positivity</span><span class=\"bp\">.</span><span class=\"n\">Core</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 467433003,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1725433159
    },
    {
        "content": "<p>... but nothing happened. No <code>noshake.json</code> file was created nor did it error saying that it couldn't create the file. I thought maybe it did fail to create the file and just didn't report it, so I created <code>scripts/noshake.json</code> and rerunning the command resulted in this very weird output!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">gitpod</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">workspace</span><span class=\"bp\">/</span><span class=\"n\">LeanAPAP</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">master</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">shake</span><span class=\"w\"> </span><span class=\"n\">LeanAPAP</span><span class=\"w\"> </span><span class=\"c1\">--update</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"bp\">'././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib'</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"n\">changes</span>\n</code></pre></div>",
        "id": 467433396,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1725433285
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span>, is <code>shake --update</code> in a downstream project even supported?</p>",
        "id": 467433448,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1725433305
    },
    {
        "content": "<p>Ahah, I figured out what happened: My first <code>lake exe shake LeanAPAP --update</code> updated the <code>scripts/noshake.json</code> <em>within mathlib</em> rather than the one in LeanAPAP</p>",
        "id": 467437256,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1725434440
    }
]