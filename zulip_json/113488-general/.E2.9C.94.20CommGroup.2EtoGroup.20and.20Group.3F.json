[
    {
        "content": "<p>Greetings! I was doing some practise and this comes in</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>If </mtext><mi>P</mi><mtext>is a finite simple </mtext><mi>p</mi><mtext>-group, show that </mtext><mi>P</mi><mtext> has order </mtext><mi>p</mi><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">\\text{If } P \\text{is a finite simple }p\\text{-group, show that }P\\text{ has order }p.</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord text\"><span class=\"mord\">If </span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord text\"><span class=\"mord\">is a finite simple </span></span><span class=\"mord mathnormal\">p</span><span class=\"mord text\"><span class=\"mord\">-group, show that </span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord text\"><span class=\"mord\"> has order </span></span><span class=\"mord mathnormal\">p</span><span class=\"mord\">.</span></span></span></span></span></p>\n<p>The general idea is to use the fact that the center of a p-group must be nontrivial. The problem is if the center is P it self (i.e., P is abelian), then we need to find another nontrivial normal subgroup - I'm thinking about the subgroup generated by some element with order p. Here is what I've tried:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">gp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hP</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsPGroup</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsSimpleGroup</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">center_nontriv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">IsPGroup</span><span class=\"bp\">.</span><span class=\"n\">center_nontrivial</span><span class=\"w\"> </span><span class=\"n\">hP</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">center_bot_top</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Normal</span><span class=\"bp\">.</span><span class=\"n\">eq_bot_or_eq_top</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">center</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">normal_of_characteristic</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">center_not_bot</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">center</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"bp\">⊥</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">center</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">nontrivial_iff_ne_bot</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">center_nontriv</span>\n\n<span class=\"w\">  </span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"n\">center_bot_top</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">resolve_left</span><span class=\"w\"> </span><span class=\"n\">center_bot_top</span><span class=\"w\"> </span><span class=\"n\">center_not_bot</span>\n\n<span class=\"w\">  </span><span class=\"n\">haveI</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CommGroup</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">commGroupOfCenterEqTop</span><span class=\"w\"> </span><span class=\"n\">center_bot_top</span>\n<span class=\"w\">  </span><span class=\"n\">haveI</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">ofFinite</span><span class=\"w\"> </span><span class=\"n\">P</span>\n<span class=\"w\">  </span><span class=\"n\">haveI</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nontrivial</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">nontrivial_of_nontrivial_coe</span><span class=\"w\"> </span><span class=\"n\">center_nontriv</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hnp</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">IsPGroup</span><span class=\"bp\">.</span><span class=\"n\">iff_card</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"n\">hP</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">card_eq_fintype_card</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hnp</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">nzero</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">nzero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pow_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hnp</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hnp</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">Finite</span><span class=\"bp\">.</span><span class=\"n\">one_lt_card_iff_nontrivial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">tauto</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Prime</span><span class=\"bp\">.</span><span class=\"n\">dvd_pow_iff_dvd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"bp\">.</span><span class=\"n\">prime</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"bp\">.</span><span class=\"n\">out</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">dvd_refl</span><span class=\"w\"> </span><span class=\"n\">p</span>\n\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">exists_prime_orderOf_dvd_card</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">sub</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">zpowers</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">card_zpowers</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">sub</span><span class=\"bp\">.</span><span class=\"n\">Normal</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">normal_of_comm</span><span class=\"w\"> </span><span class=\"n\">sub</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span><span class=\"cm\">                                            ↑</span>\n<span class=\"cm\">    application type mismatch</span>\n<span class=\"cm\">      normal_of_comm sub</span>\n<span class=\"cm\">    argument</span>\n<span class=\"cm\">      sub</span>\n<span class=\"cm\">    has type</span>\n<span class=\"cm\">      @Subgroup P gp : Type u_1</span>\n<span class=\"cm\">    but is expected to have type</span>\n<span class=\"cm\">      @Subgroup P CommGroup.toGroup : Type u_1</span>\n<span class=\"cm\">  -/</span>\n\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p><code>sub</code> is the desired generated subgroup, but I failed to prove its normality. <code>Subgroup.normal_of_comm sub</code> seems to recognize <code>CommGroup.toGroup</code> and the original <code>gp</code> differently and I don't understand why.</p>\n<p>Thanks in advance for your help!</p>",
        "id": 480955749,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1730910084
    },
    {
        "content": "<p>Try <code>letI</code> rather than <code>haveI</code> for <code>CommGroup</code></p>",
        "id": 480957551,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730910639
    },
    {
        "content": "<p>Wow, thanks for the prompt reply. Thats a bit like magic to me <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span> , may I enquire why it works?</p>",
        "id": 480958573,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1730910951
    },
    {
        "content": "<p><code>have</code> is for proofs, but <code>CommGroup</code> is data (it contains the multiplication) so you need <code>let</code>.</p>",
        "id": 480959882,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730911338
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/CommGroup.2EtoGroup.20and.20Group.3F/near/480959882\">发言道</a>：</p>\n<blockquote>\n<p><code>have</code> is for proofs, but <code>CommGroup</code> is data (it contains the multiplication) so you need <code>let</code>.</p>\n</blockquote>\n<p>Oh, I see... indeed that's reasonable. Thanks!</p>",
        "id": 480960733,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1730911607
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"739620\">Suzuka Yu</span> has marked this topic as resolved.</p>",
        "id": 480960801,
        "sender_full_name": "Notification Bot",
        "timestamp": 1730911628
    },
    {
        "content": "<p>Why do you want <code>haveI</code> or <code>letI</code> instead of <code>have</code> or <code>let</code>?</p>",
        "id": 480997614,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1730925789
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/113488-general/topic/.E2.9C.94.20CommGroup.2EtoGroup.20and.20Group.3F/near/480997614\">发言道</a>：</p>\n<blockquote>\n<p>Why do you want <code>haveI</code> or <code>letI</code> instead of <code>have</code> or <code>let</code>?</p>\n</blockquote>\n<p>Sorry I thought the <code>I</code> in <code>letI</code> means <code>instance</code>, but I just noticed that it is infact <code>inlines</code>. But yes, <code>let _ : CommGroup P :=</code> also works, thanks!</p>",
        "id": 481030268,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1730944203
    },
    {
        "content": "<p>In Lean 3, <code>letI</code> meant <code>instance</code>, like you thought, but this isn't the case for Lean 4</p>",
        "id": 481036379,
        "sender_full_name": "Niels Voss",
        "timestamp": 1730948800
    },
    {
        "content": "<p>Yes, this is very confusing, that’s why it’s important to not write code spreading this confusion.</p>",
        "id": 481070268,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1730969349
    },
    {
        "content": "<p>then, when <em>should</em> you prefer <code>letI</code> over <code>let</code> (or <code>haveI</code> over <code>have</code>)?</p>",
        "id": 481074831,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1730970941
    },
    {
        "content": "<p>when you want to inline... which is almost never. But in definitions it can be useful if you want precise control over the expression.</p>",
        "id": 481103850,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730980682
    },
    {
        "content": "<p>but how does that even interplay with <code>have</code>? aren't <code>have</code> definitions always practically opaque?</p>",
        "id": 481104262,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1730980825
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/stream/113488-general/topic/.E2.9C.94.20CommGroup.2EtoGroup.20and.20Group.3F/near/481074831\">said</a>:</p>\n<blockquote>\n<p>then, when <em>should</em> you prefer <code>letI</code> over <code>let</code> (or <code>haveI</code> over <code>have</code>)?</p>\n</blockquote>\n<p><code>letI</code> also doesn't require a name</p>",
        "id": 481125079,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1730987584
    }
]