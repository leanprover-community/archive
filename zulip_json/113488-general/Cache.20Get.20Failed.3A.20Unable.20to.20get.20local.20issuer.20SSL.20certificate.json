[
    {
        "content": "<p>Hello, I'm trying to unpack the cached Mathlib so that I don't have to <code>lake build</code> the whole thing. Usually on my local machine, I can <code>lake exe cache get</code> and there is no problems, but I'm trying to get this running now on a remote SLURM computing cluster, where when I run the same command on a fresh install of lean, I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Attempting</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">download</span><span class=\"w\"> </span><span class=\"mi\">5826</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span>\n<span class=\"n\">SSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"n\">issuer</span><span class=\"w\"> </span><span class=\"n\">certificate</span>\n<span class=\"n\">Downloaded</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">attempted</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">5826</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"bp\">%</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">failedSSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"n\">issuer</span><span class=\"w\"> </span><span class=\"n\">certificate</span>\n<span class=\"n\">Downloaded</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">attempted</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">5826</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"bp\">%</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">failedSSL</span><span class=\"w\"> </span><span class=\"n\">certificate</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"n\">issuer</span><span class=\"w\"> </span><span class=\"n\">certificate</span>\n<span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Other than this one issue, Lean works perfectly fine on the cluster, so I am wondering if there is any other way to get mathlib unpacked on the cluster without having to build the whole thing from scratch? Or if there is any additional commands (perhaps a curl?) that <code>lake exe cache get</code> is running behind the scenes that I can use to troubleshoot more and/or send to my administrator to get the certificate fixed.</p>\n<p>Thanks</p>",
        "id": 504725449,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1741659772
    },
    {
        "content": "<p>Yes, it is running behind the scenes. You could probably modify the file Cache/IO.lean in Mathlib to bring the <code>curl</code> commands it executes.</p>",
        "id": 504726550,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1741660393
    },
    {
        "content": "<p>I see, thanks! It ended up being because the <code>&lt;- getCurl</code> in <code>runCurlStreaming</code> was pointing to some cached curl binary in the cluster, rather than the one I installed via conda. Weird issue, but as long as it works and I don't need to wait 2 hours for mathlib to build, I'm happy :)</p>",
        "id": 504727867,
        "sender_full_name": "Riyaz Ahuja",
        "timestamp": 1741661171
    }
]