[
    {
        "content": "<p>I just set up a repo for the formalization of Con(NF) that will happen this summer and people seem unable to get it using leanproject. Namely, running <code>leanproject get con-nf</code> (the repository is <a href=\"https://github.com/leanprover-community/con-nf\">https://github.com/leanprover-community/con-nf</a>) returns</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">&gt;</span> <span class=\"n\">git</span> <span class=\"n\">checkout</span> <span class=\"c1\">--detach de5038953210a6ffb013340c7bf82243be226f1c    # in directory _target/deps/mathlib</span>\n<span class=\"n\">fatal</span><span class=\"o\">:</span> <span class=\"n\">reference</span> <span class=\"n\">is</span> <span class=\"n\">not</span> <span class=\"n\">a</span> <span class=\"n\">tree</span><span class=\"o\">:</span> <span class=\"n\">de5038953210a6ffb013340c7bf82243be226f1c</span>\n<span class=\"n\">external</span> <span class=\"n\">command</span> <span class=\"n\">exited</span> <span class=\"k\">with</span> <span class=\"n\">status</span> <span class=\"mi\">128</span>\n<span class=\"n\">Command</span> <span class=\"sc\">'['</span><span class=\"n\">leanpkg'</span><span class=\"o\">,</span> <span class=\"bp\">'</span><span class=\"n\">configure'</span><span class=\"o\">]</span><span class=\"bp\">'</span> <span class=\"n\">returned</span> <span class=\"n\">non</span><span class=\"bp\">-</span><span class=\"n\">zero</span> <span class=\"n\">exit</span> <span class=\"n\">status</span> <span class=\"mi\">1</span><span class=\"bp\">.</span>\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>, did I miss something obvious by any chance?</p>",
        "id": 277339131,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1648760383
    },
    {
        "content": "<p>(This likely isn't related to your issue, but you should add <code>/_target</code> and <code>leanpkg.path</code> to a <code>.gitignore</code> file. See e.g. <a href=\"https://github.com/leanprover-community/mathlib/blob/master/.gitignore\">mathlib's</a>.)</p>",
        "id": 277339886,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1648760683
    },
    {
        "content": "<p>I independently came to the conclusion that this <strong>was</strong> my issue, because deleting <code>_target</code> and <code>leanpkg.path</code> and running <code>leanproject get-m</code> fixed the install.</p>",
        "id": 277340361,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1648760800
    },
    {
        "content": "<p>Ah, I see. You had mathlib set up as a submodule in <code>_target/deps</code>, which I don't think <code>leanproject</code> supports.</p>",
        "id": 277340444,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1648760863
    },
    {
        "content": "<p>Do you mean my error is deeper?</p>",
        "id": 277340507,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1648760886
    },
    {
        "content": "<p>If you make a new commit with a <code>.gitignore</code> like I suggested and <code>git</code> doesn't complain then you've probably fixed it.</p>",
        "id": 277340584,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1648760967
    },
    {
        "content": "<p>I'm not sure how you created mathlib as a submodule, so I can't be sure if there's a deeper issue.</p>",
        "id": 277340626,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1648760999
    },
    {
        "content": "<p>I ran <code>leanproject get-m</code></p>",
        "id": 277340796,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1648761095
    },
    {
        "content": "<p>(the reference at the bottom of the readme refers to LTE still btw)</p>",
        "id": 277340841,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1648761119
    },
    {
        "content": "<p>Someone with more git knowledge should probably jump in, but it looks like creating a commit which contains the mathlib git repo as a subdirectory tells git to treat it like a submodule. Anyways, adding a proper <code>.gitignore</code> file and removing <code>_target</code> from the repo if necessary should hopefully fix things.</p>",
        "id": 277341213,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1648761327
    }
]