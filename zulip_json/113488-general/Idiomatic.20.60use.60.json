[
    {
        "content": "<p>I regularly use <code>use</code> when the goal starts with an existential quantifier.<br>\nIs it idiomatic to use <code>use</code> outside of plugging terms into existential quantifiers, too?<br>\nOr should <code>refine</code> be used in the other cases?</p>",
        "id": 565121003,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1766480719
    },
    {
        "content": "<p>Can you use <code>use</code> for goals not of the form <code>\\exists ...</code>? This is the first time I learn about this.<br>\nI would find it quite surprising and consider it not-so-readable style.</p>",
        "id": 565122144,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1766481242
    },
    {
        "content": "<p>Or are you asking about using <code>use</code> as opposed to absorbing this into a <code>refine</code> on the next line?</p>",
        "id": 565122265,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1766481304
    },
    {
        "content": "<p>In my opinion, <code>use a</code> is certainly nicer than <code>refine ⟨a, ?_⟩</code>. On the other hand, I may prefer<code>refine ⟨a, pf_a, b, ?_⟩</code> over <code>use a; refine ⟨pf_a, b, ?_⟩</code>. (Of course, these should be two lines; I'm using the semicolon for brevity.)</p>",
        "id": 565122590,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1766481419
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113488-general/topic/Idiomatic.20.60use.60/near/565122144\">said</a>:</p>\n<blockquote>\n<p>Can you use <code>use</code> for goals not of the form <code>\\exists ...</code>?</p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Use</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">p</span>\n<span class=\"w\">  </span><span class=\"n\">decide</span>\n</code></pre></div>",
        "id": 565123589,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1766481882
    },
    {
        "content": "<p>TIL, thanks! I'm not sure if I find this more readable than \\&lt;p, by decide\\&gt;.</p>",
        "id": 565126395,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1766483224
    },
    {
        "content": "<p>Yours is better.</p>\n<p>I wanted to ask about situations where it is desirable to write either <code>use p</code> or <code>refine ⟨p, ?_⟩</code> in the tactic mode because the proof continues with a sequence of tactics. Of course, I prefer <code>use p</code> when it is for an existential quantifier, but I am not sure which tactic is better when dealing with a conjunction whose LHS can be easily proved by a term but RHS is more complicated.</p>",
        "id": 565127298,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1766483652
    },
    {
        "content": "<p>I'm slightly inclined towards <code>refine</code> for that case</p>",
        "id": 565128734,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1766484249
    },
    {
        "content": "<p>i believe that what is \"idiomatic\" relies a lot on context; for example, for goals of the shape <code>∃ x, P x ∧ Q x</code>, i personally am ok writing <code>use x, hpx</code>...</p>",
        "id": 565148979,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1766493318
    },
    {
        "content": "<p>I don't see any problem using <code>use</code> here. I also think it's fine using <code>use</code> for any one-constructor type (it's designed for that after all).</p>",
        "id": 565177404,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1766505027
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113488-general/topic/Idiomatic.20.60use.60/near/565177404\">said</a>:</p>\n<blockquote>\n<p>I don't see any problem using <code>use</code> here. I also think it's fine using <code>use</code> for any one-constructor type (it's designed for that after all).</p>\n</blockquote>\n<p>The hover documentation suggests it's only for exists though. It could maybe at least include an example of using it with something else then Exists, if that's the intention?</p>",
        "id": 565344146,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766643414
    },
    {
        "content": "<p>Yeah, it would be nice if the docstrings were updated. When I made the current <code>use</code>/<code>use!</code> in <a href=\"https://github.com/leanprover-community/mathlib4/pull/5350\">#5350</a>, I didn't think about how it would give the impression it's only for existentials.</p>\n<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/32699\">#32699</a>, <span class=\"user-mention\" data-user-id=\"133339\">@Mirek Olšák</span>'s added a <code>Nonempty</code> example at least. This docstring change points out a convenient feature I'm not sure I was even aware of, where <code>use</code> will apply a <code>Nonempty</code> constructor for free — no need for <code>use!</code>.</p>",
        "id": 565373065,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1766671848
    }
]