[
    {
        "content": "<p>Bit of a random question... There are some symbols that Lean actively uses in the infoview:</p>\n<ul>\n<li><code>‚úù</code> for inaccessible variables</li>\n<li><code>üéâ</code> for \"success\"</li>\n<li><code>‚ùå‚úÖüí•‚ñº‚ñ∂</code>: for debugging in <code>set_option trace.Meta.synthInstance true</code>, for example in:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">synthInstance</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">‚ùå</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sorryAx</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚ñº</span>\n\n<span class=\"w\">  </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">instances</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sorryAx</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚ñ∂</span>\n</code></pre></div>\n<p>These can be messed up by custom fonts, for example when the font defines <code>‚úù</code> as an Emoji, or if <code>‚úÖ</code> is not an emoji but instead monochrom.</p>\n<p>Do you know of any other such \"control\"-symbols used by (debugging-) tools in Lean/Mathlib?</p>",
        "id": 459465855,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723207918
    },
    {
        "content": "<p>I can't think of any others right now. What do you need this for, if I may ask?</p>",
        "id": 460021587,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1723449012
    },
    {
        "content": "<p>Does the coercion up-arrow count?</p>",
        "id": 460023093,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723449516
    },
    {
        "content": "<p>I changed the web editor to JuliaMono a while ago which had the disadvantage that <code>‚ùå‚úÖ</code> where black-and-white (which is not ideal for visability), and adding any emoji font rendered <code>‚úù</code> as a huge purple box.</p>\n<p>So I created a <a href=\"https://github.com/hhu-adam/lean4monaco/blob/main/src/fonts/LeanWeb-Regular.otf\">new font</a> with only these few symbols, and I thought since I already have the app open, I might ask here about symbols that might not work well in certain fonts.</p>",
        "id": 460074404,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723466309
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/stream/113488-general/topic/Lean.20specific.20font/near/459465855\">said</a>:</p>\n<blockquote>\n<p>or if <code>‚úÖ</code> is not an emoji but instead monochrom.</p>\n</blockquote>\n<p>This sounds like an infoview thing; there is a CSS way to say \"prefer emoji rendering for this character\"</p>",
        "id": 460079051,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723467961
    },
    {
        "content": "<p>Indeed this is mostly about fonts in the infoview.</p>\n<p>Is there? I know CSS <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant-emoji\"><code>font-variant-emoji</code></a>  but that looks to me like you'd have to wrap the specific unicode characters first (with JS?) or make that changes at the source where that character is printed.</p>",
        "id": 460104743,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723476335
    },
    {
        "content": "<p>Are the emojis not already handled specially by the trace tree view?</p>",
        "id": 460108039,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723477497
    },
    {
        "content": "<p>Apparently inserting \\uFE0F before the emoji forcing it to render as the colored version</p>",
        "id": 460108262,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723477570
    },
    {
        "content": "<p>(also as an aside, it's totally nuts that I found this out through <a href=\"https://wiki.tcl-lang.org/page/Emoji%2C+Unicode+and+Variation+Selectors\">a webpage</a> with an embedded VNC client running Tcl)</p>",
        "id": 460108569,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723477699
    },
    {
        "content": "<p>But that's the thing, on my device all the 3 rows look the same. Presumably because I don't have the correct fonts installed <span aria-label=\"man shrugging\" class=\"emoji emoji-1f937-200d-2642\" role=\"img\" title=\"man shrugging\">:man_shrugging:</span></p>",
        "id": 460110910,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723478521
    },
    {
        "content": "<p>The page is bad, they look the same because VNC doesn't support the feature</p>",
        "id": 460115974,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723479694
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"s2\">\"|</span><span class=\"err\">\\</span><span class=\"s2\">uFE0F‚úÖ,</span><span class=\"err\">\\</span><span class=\"s2\">uFE0E‚úÖ,‚úÖ|\"</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"s2\">\"|</span><span class=\"err\">\\</span><span class=\"s2\">uFE0F‚ùå,</span><span class=\"err\">\\</span><span class=\"s2\">uFE0E‚ùå,‚ùå|\"</span>\n</code></pre></div>\n<p>should be a good test. The web editor indeed doesn't support it</p>",
        "id": 460116530,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723479853
    },
    {
        "content": "<p><a href=\"https://www.codejam.info/2021/11/emoji-variation-selector.html\">https://www.codejam.info/2021/11/emoji-variation-selector.html</a> is a better reference</p>",
        "id": 460117112,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723480004
    },
    {
        "content": "<p>Hrm, that doesn't seem to work in Kitty, even though it definitely supports variation selection.</p>",
        "id": 460119988,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723480812
    },
    {
        "content": "<p>Oh, it's in the wrong spot I think? It seems like it goes after, and should be</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"s2\">\"|‚úÖ</span><span class=\"err\">\\</span><span class=\"s2\">uFE0F,‚úÖ</span><span class=\"err\">\\</span><span class=\"s2\">uFE0E,‚úÖ|\"</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"s2\">\"|‚ùå</span><span class=\"err\">\\</span><span class=\"s2\">uFE0F,‚ùå</span><span class=\"err\">\\</span><span class=\"s2\">uFE0E,‚ùå|\"</span>\n</code></pre></div>",
        "id": 460120611,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723481075
    },
    {
        "content": "<p>Which now works in the web editor too seemingly.</p>",
        "id": 460120646,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723481091
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/stream/113488-general/topic/Lean.20specific.20font/near/460120646\">said</a>:</p>\n<blockquote>\n<p>Which now works in the web editor too seemingly.</p>\n</blockquote>\n<p>Not for me on windows</p>",
        "id": 460121469,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723481422
    },
    {
        "content": "<p>how does this look like for you? <a href=\"https://lean.math.hhu.de/#code=%23eval%20%22%7C%E2%9C%85%5CuFE0F%2C%E2%9C%85%5CuFE0E%2C%E2%9C%85%7C%22%0A%23eval%20%22%7C%E2%9D%8C%5CuFE0F%2C%E2%9D%8C%5CuFE0E%2C%E2%9D%8C%7C%22%0A%23print%20%22%E2%9D%8C%E2%9C%85%F0%9F%92%A5%F0%9F%8E%89%E2%96%BC%E2%96%B6%E2%9C%9D%22%0A\">demo</a></p>",
        "id": 460121559,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723481446
    },
    {
        "content": "<p>The characters are completely missing for me</p>",
        "id": 460121694,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723481517
    },
    {
        "content": "<p>(and the lean server never starts, and the button to start it is missing)</p>",
        "id": 460121780,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723481537
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/PZQYf4Yi4BBK-tJQGAgL5o_x/Screenshot-2024-08-12-at-12.53.56.png\">Screenshot-2024-08-12-at-12.53.56.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/PZQYf4Yi4BBK-tJQGAgL5o_x/Screenshot-2024-08-12-at-12.53.56.png\" title=\"Screenshot-2024-08-12-at-12.53.56.png\"><img data-original-dimensions=\"2160x421\" src=\"/user_uploads/thumbnail/3121/PZQYf4Yi4BBK-tJQGAgL5o_x/Screenshot-2024-08-12-at-12.53.56.png/840x560.webp\"></a></div><p>macOS + FF latest beta</p>",
        "id": 460122057,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723481650
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/Lean.20specific.20font/near/460121694\">said</a>:</p>\n<blockquote>\n<p>The characters are completely missing for me</p>\n</blockquote>\n<p>I have that on Android, too. so somethings off there.</p>",
        "id": 460122196,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723481719
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/Lean.20specific.20font/near/460121780\">said</a>:</p>\n<blockquote>\n<p>(and the lean server never starts, and the button to start it is missing)</p>\n</blockquote>\n<p>As in, you never get the infoview?</p>",
        "id": 460122213,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723481729
    },
    {
        "content": "<p>I don't think you're serving the font files to me at all?</p>",
        "id": 460122234,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723481737
    },
    {
        "content": "<p>Yes, the infoview says \"Waiting for Lean server to start...\". This happens all the time in the live editor too, but there I can restart the server.</p>",
        "id": 460122325,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723481764
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/Lean.20specific.20font/near/460122234\">said</a>:</p>\n<blockquote>\n<p>I don't think you're serving the font files to me at all?</p>\n</blockquote>\n<p>Oh that might be. They might be served inside the infoview (which is inside an iframe) maybe need to serve them outside, too</p>",
        "id": 460122516,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723481818
    },
    {
        "content": "<p>That might be related to the infoview not loading for me</p>",
        "id": 460122626,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723481841
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/Lean.20specific.20font/near/460122626\">said</a>:</p>\n<blockquote>\n<p>That might be related to the infoview not loading for me</p>\n</blockquote>\n<p>do you get anything in the console?</p>",
        "id": 460122879,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723481891
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">VM722</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">Uncaught</span><span class=\"w\"> </span><span class=\"n\">SyntaxError</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unexpected</span><span class=\"w\"> </span><span class=\"n\">token</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">e'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"esms,true,\"</span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">valid</span><span class=\"w\"> </span><span class=\"n\">JSON</span>\n<span class=\"w\">    </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">JSON</span><span class=\"bp\">.</span><span class=\"n\">parse</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">anonymous</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">webview</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">39057</span>\n</code></pre></div>\n<p>and also</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">InfoProvider</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">initInfoView</span><span class=\"w\"> </span><span class=\"n\">got</span><span class=\"w\"> </span><span class=\"n\">null</span><span class=\"w\"> </span><span class=\"n\">client</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 460122966,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723481911
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/Lean.20specific.20font/near/460122966\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">VM722</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">Uncaught</span><span class=\"w\"> </span><span class=\"n\">SyntaxError</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unexpected</span><span class=\"w\"> </span><span class=\"n\">token</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">e'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"s2\">\"esms,true,\"</span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">valid</span><span class=\"w\"> </span><span class=\"n\">JSON</span>\n<span class=\"w\">    </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">JSON</span><span class=\"bp\">.</span><span class=\"n\">parse</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&lt;</span><span class=\"n\">anonymous</span><span class=\"bp\">&gt;</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">webview</span><span class=\"bp\">.</span><span class=\"n\">js</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">39057</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>This one I already addressed locally, but so far my browsers where quiet happily ignoring it.</p>\n<p>Thanks, I'll have a look!</p>",
        "id": 460123738,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723482061
    },
    {
        "content": "<p>So do you think it would be desirable to make a PR for the infoview to change in particular <code>‚úù</code> to <code>‚úù\\uFE0E</code>? Or is that only making it the unicode situation even worse?</p>",
        "id": 460125388,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723482385
    },
    {
        "content": "<p>Depends on what gets worse. If users copy and paste that into the edit pane, does the variant selector also get copied?</p>",
        "id": 461933804,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1723489465
    },
    {
        "content": "<p>I think the variant selector and the codepoint before it is treated as a single character by the monaco editor</p>",
        "id": 461957116,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723496466
    },
    {
        "content": "<p>I created <a href=\"https://github.com/leanprover/lean4/pull/5015\">lean#5015</a> for the team to consider. Although I understand that's not a pressing issue at all.</p>\n<p>I'll work with whatever the decision there is <span aria-label=\"smiling face\" class=\"emoji emoji-263a\" role=\"img\" title=\"smiling face\">:smiling_face:</span></p>",
        "id": 462098351,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723551606
    }
]