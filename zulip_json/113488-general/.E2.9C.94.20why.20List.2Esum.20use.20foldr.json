[
    {
        "content": "<p>Why <code>List.sum</code> is implemented by <code>List.foldr</code>?<br>\n<code>list.foldr</code> is not tail recursive.</p>",
        "id": 481351109,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1731084512
    },
    {
        "content": "<p>Yes it is, this csimp lemma tells the compiler to replace it with a TR version <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.foldr_eq_foldrTR#doc\">docs#List.foldr_eq_foldrTR</a></p>",
        "id": 481352174,
        "sender_full_name": "Henrik BÃ¶ving",
        "timestamp": 1731084902
    },
    {
        "content": "<p>nice!</p>",
        "id": 481352654,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1731085080
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> has marked this topic as resolved.</p>",
        "id": 481352672,
        "sender_full_name": "Notification Bot",
        "timestamp": 1731085082
    },
    {
        "content": "<p>It probably wouldn't hurt if every definition replaced by csimp said so in its doc-string.</p>",
        "id": 481410575,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731113468
    },
    {
        "content": "<p>Indeed, I wonder whether the csimp attribute itself could do that!</p>",
        "id": 481410591,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731113486
    },
    {
        "content": "<blockquote>\n<p>Indeed, I wonder whether the csimp attribute itself could do that!</p>\n</blockquote>\n<p>it looks nice  idea!</p>",
        "id": 481446715,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1731146389
    },
    {
        "content": "<p>The csimp attribute can't modify the declaration's doc string directly because docstrings can only be modified in the same file while csimp attributes can be added wherever. The hover provider would have to support this directly</p>",
        "id": 481516093,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731205808
    },
    {
        "content": "<p>I guess a linter is the next best option.</p>",
        "id": 481532546,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731219763
    },
    {
        "content": "<p>linter for what?</p>",
        "id": 481533260,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731220346
    },
    {
        "content": "<p>Can we know all csimp lemma for a specific function?</p>",
        "id": 481543026,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1731229633
    },
    {
        "content": "<p>I don't understand what this has to do with linters though</p>",
        "id": 481543916,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731230413
    },
    {
        "content": "<p>you can make a command that shows the csimp lemmas associated to a definition easily enough</p>",
        "id": 481543935,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731230437
    },
    {
        "content": "<p>I think Kim is suggesting a linter that forces the docstring to mention the csimped version?</p>",
        "id": 481545235,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731231543
    },
    {
        "content": "<p>This is of course unsatisfiable if mathlib csimp's a definition from core</p>",
        "id": 481545248,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731231568
    },
    {
        "content": "<p>yeah, it's basically the same reason csimp can't implement this itself</p>",
        "id": 481601003,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731275886
    },
    {
        "content": "<p>I'd hope that no one ever <code>csimp</code>s a def from another library, that seems rude. :-)</p>\n<p>Yes, I was intending a linter that runs on a per-library basis (i.e. not per file, because it is reasonable to add a csimp in a later file) that checks that csimps are mentioned in doc-strings.</p>",
        "id": 481601929,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731276696
    },
    {
        "content": "<p>I actually think we should go the other way and allow doc comments to be added remotely</p>",
        "id": 481602122,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731276883
    },
    {
        "content": "<p>this is important for cases like the <code>rfl</code> tactic or extensible tactics like <code>decreasing_tactic</code></p>",
        "id": 481602158,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731276914
    },
    {
        "content": "<p>it can also be relevant even for regular definitions in case you want to add a \"see also\" to an upstream definition</p>",
        "id": 481602175,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731276950
    },
    {
        "content": "<p>I don't think we should enforce mentioning csimps in doc strings. This is something which the tooling should just provide. We don't enforce mentioning the type signature of definitions in docstrings and this is arguably more important</p>",
        "id": 481602306,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731277056
    },
    {
        "content": "<p>(or even the name of definitions in docstrings!)</p>",
        "id": 481602386,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1731277084
    }
]