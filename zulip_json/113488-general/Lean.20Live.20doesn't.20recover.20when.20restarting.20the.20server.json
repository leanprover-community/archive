[
    {
        "content": "<p>Of late, I frequently run into the following issue:</p>\n<ol>\n<li>I am completing a definition which is therefore an error until comleted.</li>\n<li>Lean server stops and the restart message pops up</li>\n<li>I restart</li>\n<li>Infoview doesn't recover and I still see the error message of the crash.</li>\n</ol>\n<p>I am not sure how to reproduce this. Normally I quickly refresh the server and things are fine again. (Thankfully the code isn't lost because it is in the URL).</p>",
        "id": 448332154,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1719840839
    },
    {
        "content": "<p>I am not sure how to reproduce this error</p>",
        "id": 448332224,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1719840847
    },
    {
        "content": "<p>Next time it happens please share the URL (with the code), and we can see if just retyping the last definition suffices to repro?</p>",
        "id": 448336795,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1719841760
    },
    {
        "content": "<p>I tried that once before (not pasting the code here, but retyping it in a new window). It is not a deterministic bug</p>",
        "id": 448337101,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1719841804
    },
    {
        "content": "<p>If it helps, this has been happening to me since 4.9.0-rc1 was released</p>",
        "id": 448337755,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1719841898
    },
    {
        "content": "<p>I've noticed this, too, for quite some time (and I think I reported it somewhere on Zulip, but need to search more throroughly to find it). Reloading the page works.</p>",
        "id": 448352537,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1719844953
    },
    {
        "content": "<p><a href=\"#narrow/stream/113488-general/topic/.23guard_msgs.20variant.3A.20don't.20care.20about.20whitespace/near/432449195\">Here</a>.</p>",
        "id": 448352910,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1719845042
    },
    {
        "content": "<p>Interesting. I don't remember running into this issue until last month. But that coincides with when I  started using firefox regularly instead of a certain chrome based browser</p>",
        "id": 448353268,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1719845139
    },
    {
        "content": "<p>It happened again and I have copied the error message : <code>Server process for file:///project/mathlib-demo.lean crashed, likely due to a stack overflow or a bug.</code></p>",
        "id": 449848598,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720440282
    },
    {
        "content": "<p>Best guess is that there is some sort of a worker process that is handling each session and its instance of the  lean LSP has crashed in this process. Refreshing spawns a fresh process. The corresponding fix would be to restart such a process when a lean server restart is requested</p>",
        "id": 449848789,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720440350
    },
    {
        "content": "<p>CC: <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span></p>",
        "id": 449848887,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1720440371
    }
]