[
    {
        "content": "<p>I am new to Lean, and I am trying to prove a theorem that involves using subsets of finite and discrete measurable sets. Lean seems to require me to show first that Finset E is measurable first. This is my current code:</p>\n<p><a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQEwCmAdnAApQRZJbCYwCeAKqgdPYgUgM4CuUBzVlHp5CJLgGN8BACZwAogDlFAJU7ocOAG5IowaugJwA3vLgAuOI3qEAVAF84AbQSdeUAwQDKYJBKPyALpOACLAkvwwBK7cfJ4+fgHBAGLARAyECoHauvpYhiYA7hYKcIBJhHDKakjo9ppoQgQgcIUEwADmqDAA+uHdIG5x+QSWMe6eLRYAvHBY7MY4cHBIYGDo7GNDhgB0EABm3TLhEpEEOHU4MgR7cF5wABQAgiWpRFwE8PIAlJZV6tNwQCIRHAAB5wQAQRHBHgAaSYgzRpLgwJBEfwlTYeYYJNH3V7vT5fAFzHDGOCLMkXHAAWipcAa0CacF4IF6XH6g0xhlGHImXhwQA\">live shell</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">ProbabilityTheory</span><span class=\"w\"> </span><span class=\"n\">MeasureTheory</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">][</span><span class=\"n\">DiscreteMeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">][</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"o\">}</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">weight_is_measurable</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Measurable</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Measurable</span><span class=\"bp\">.</span><span class=\"n\">of_discrete</span>\n<span class=\"o\">}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"o\">{</span>\n\n<span class=\"o\">}</span>\n\n\n<span class=\"c1\">-- theorem sum_is_measurable: Measurable S</span>\n</code></pre></div>\n<p>How can I prove it?</p>",
        "id": 522319508,
        "sender_full_name": "Icaro Costa",
        "timestamp": 1749032228
    },
    {
        "content": "<p>Sorry, your code does not work for me in the web editor. Please create a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>.</p>",
        "id": 522320500,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1749032516
    },
    {
        "content": "<p>why do you want to prove <code>Measurable S</code>?</p>",
        "id": 522320845,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1749032625
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113488-general/topic/How.20to.20show.20that.20a.20Finset.20E.20is.20measurable.3F/near/522320500\">said</a>:</p>\n<blockquote>\n<p>Sorry, your code does not work for me in the web editor. Please create a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>.</p>\n</blockquote>\n<p>Really? I don't see any error besides a warning</p>",
        "id": 522321331,
        "sender_full_name": "Icaro Costa",
        "timestamp": 1749032781
    },
    {
        "content": "<p>I mean when I uncomment the <code>theorem sum_is_measurable</code></p>",
        "id": 522321532,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1749032842
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/113488-general/topic/How.20to.20show.20that.20a.20Finset.20E.20is.20measurable.3F/near/522320845\">said</a>:</p>\n<blockquote>\n<p>why do you want to prove <code>Measurable S</code>?</p>\n</blockquote>\n<p>At the end, I want to prove that it doesn't matter what subset I choose from E, the expected value of that sum is proportional to the expected value over the whole set. But first, I wanted to try simpler things, so I learn how to use the MeasureTheory library better</p>",
        "id": 522321729,
        "sender_full_name": "Icaro Costa",
        "timestamp": 1749032915
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113488-general/topic/How.20to.20show.20that.20a.20Finset.20E.20is.20measurable.3F/near/522321532\">said</a>:</p>\n<blockquote>\n<p>I mean when I uncomment the <code>theorem sum_is_measurable</code></p>\n</blockquote>\n<p>Oh yeah, so, the reason I am trying to prove that Finset E is a MeasurableSpace instance is because of that error</p>",
        "id": 522321902,
        "sender_full_name": "Icaro Costa",
        "timestamp": 1749032981
    },
    {
        "content": "<p>To be honest, I don't know how to begin the proof. I tried to do 'intro x or ext x' to say 'let x be an element of this finite set', but it didn't work. I wanted to show that Finset is Set, so I can use higher theorems</p>",
        "id": 522322307,
        "sender_full_name": "Icaro Costa",
        "timestamp": 1749033127
    },
    {
        "content": "<p>there's an easy way to do that:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">MeasurableSpace</span><span class=\"bp\">.</span><span class=\"n\">comap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n</code></pre></div>",
        "id": 522323083,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1749033379
    },
    {
        "content": "<p>here the measuable sets (of finite sets) are precisely those which are measurable as set of sets</p>",
        "id": 522323488,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1749033509
    }
]