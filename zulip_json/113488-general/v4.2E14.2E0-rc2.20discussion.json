[
    {
        "content": "<p>Discusion of the v4.14.0 release candidates can go here.</p>",
        "id": 481016711,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730935273
    },
    {
        "content": "<p>Note that we've already released the second release candidate. <code>rc1</code> had a linking problem that was affecting some downstream projects. <code>rc2</code> should be functionally identical. I've updated Mathlib and lean4checker to use v4.14.0-rc2, but as of the moment I write this some others (Batteries, Aesop, ProofWidgets, lean4-cli, quote4, import-graph ...) are still on rc1. Hopefully authors/maintainers of those projects can do those bumps. If anyone else runs into problems because of something upstream using rc1, please ping here!</p>",
        "id": 481016714,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730935274
    },
    {
        "content": "<p>I just noticed that <code>lake</code> didn't rebuild anything when I switched from rc1 to rc2. Could this cause any problems?</p>",
        "id": 481018780,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1730936671
    },
    {
        "content": "<p>Just noting something great that has arrived with <code>v4.14.0-rc2</code>: <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span>'s <a href=\"https://github.com/leanprover-community/mathlib4/pull/18699\">#18699</a> which switches over <code>simp (config := {contextual := true})</code> to just <code>simp +contextual</code>!</p>\n<p>This new syntax for boolean configuration options is available for all tactics now.</p>",
        "id": 481019459,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730937138
    },
    {
        "content": "<p>Here are some other features that I'm excited made it into this release candidate:</p>\n<ul>\n<li>Dot notation can now make use of <code>CoeFun</code> instances. For example, given <code>m : Multiset α</code>, you can write <code>m.card</code> even though <code>Multiset.card</code> has type <code>Multiset α →+ ℕ</code>.</li>\n<li>The <code>structure</code> command now supports recursion, so no need to write such structures using <code>inductive</code>.</li>\n<li>There's now no need to write the <code>: Prop</code> in <code>structure ... : Prop</code> or <code>inductive ... : Prop</code> if the type obviously should be a proposition, for example a <code>structure</code> with only propositional fields.</li>\n<li>The <code>congr</code> and <code>arg</code>/<code>enter</code>/<code>lhs</code>/<code>rhs</code> conv tactics are now more powerful. You can also write things like <code>arg -2</code> to get the second-to-last explicit argument or <code>arg @-1</code> to get the last argument.</li>\n<li>You can use <code>@[simp ←]</code> to add the reverse direction of a theorem as a simp lemma, without needing to modify the lemma statement.</li>\n<li><code>#eval</code> now can use <code>ToExpr</code> instances, giving hoverable results in the Infoview, and a number of bugs have been fixed, like missing messages when evaluating some monads. It attempts to auto-derive <code>Repr</code> instances too.</li>\n<li>There's now better tactic completion even when your cursor is in the middle of whitespace.</li>\n</ul>\n<p>There are plenty of great changes that I neglected to mention, and here's <a href=\"https://github.com/leanprover/lean4/compare/v4.13.0...v4.14.0-rc2\">the full change log</a>.</p>",
        "id": 481022566,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1730939034
    },
    {
        "content": "<p>I really love the <code>m.card</code> feature! It would be great if we could (automatically?!) refactor mathlib to take a lot of advantage of this.</p>",
        "id": 481048700,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730957905
    },
    {
        "content": "<p>I also notice that there are already a lot of <code>simp +contextual</code>s in mathlib. I'm working on a PR to replace the remaining occurences of <code>simp (config := {contextual := true})</code></p>",
        "id": 481048742,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730957949
    },
    {
        "content": "<p>Voila: <a href=\"https://github.com/leanprover-community/mathlib4/pull/18718\">#18718</a> (touches 91 files)</p>",
        "id": 481049020,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1730958157
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/113488-general/topic/v4.2E14.2E0-rc2.20discussion/near/481048700\">said</a>:</p>\n<blockquote>\n<p>I really love the <code>m.card</code> feature! It would be great if we could (automatically?!) refactor mathlib to take a lot of advantage of this.</p>\n</blockquote>\n<p>That feature was really missed during the port. There might even be some porting notes about it</p>",
        "id": 481055200,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730962187
    },
    {
        "content": "<p>Thanks for the summary, Kyle! Good substitute for propor release notes :-)</p>",
        "id": 481066050,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1730967659
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113488-general/topic/v4.2E14.2E0-rc2.20discussion/near/481022566\">said</a>:</p>\n<blockquote>\n<ul>\n<li>The <code>congr</code> and <code>arg</code>/<code>enter</code>/<code>lhs</code>/<code>rhs</code> conv tactics are now more powerful.</li>\n</ul>\n</blockquote>\n<p>In what way is <code>congr</code> more powerful now?</p>",
        "id": 481440292,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1731139988
    },
    {
        "content": "<p>Lean.Eval class is removed?</p>",
        "id": 481446762,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1731146405
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"372804\">@Marcus Rossel</span> <code>congr</code> can handle over-applied functions now; there's an example in the test file in <a href=\"https://github.com/leanprover/lean4/pull/5861\">lean4#5861</a>. Also, <code>arg</code> now does not make use of <code>congr</code>, but instead it synthesizes its own specialized congruence lemma to access a particular argument. It too can handle over-applied functions.</p>",
        "id": 481474979,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731170288
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"626349\">@Asei Inoue</span> Yes. The <code>#eval</code> system splits the typeclass into two separate concerns. First, there's the new <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MonadEval#doc\">docs#MonadEval</a>, which is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MonadLift#doc\">docs#MonadLift</a> but specifically for adapting monads to a monad that <code>#eval</code> can support (IO, CoreM, MetaM, TermElabM, and CommandElabM). Second, there's finding a way to represent the evaluated value; it looks for a <code>ToExpr</code>, <code>Repr</code>, or <code>ToString</code> instance.</p>",
        "id": 481475181,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731170463
    }
]