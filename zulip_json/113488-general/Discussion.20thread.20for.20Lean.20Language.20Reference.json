[
    {
        "content": "<p>Please discuss the <a href=\"#narrow/channel/113486-announce/topic/Introducing.20the.20Lean.20Language.20Reference\">announcement</a> and the <a href=\"https://lean-lang.org/doc/reference/latest/\">contents</a> here!</p>",
        "id": 478091514,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729524926
    },
    {
        "content": "<p>This is great. Thanks so much <span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span></p>",
        "id": 478092011,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1729525050
    },
    {
        "content": "<p>Thank you all - without the enthusiastic community of Lean users, there wouldn't be a way for me to get to write both my dream documentation tool and the manual I always wanted - <em>and as my day job</em>!</p>",
        "id": 478092293,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729525129
    },
    {
        "content": "<p>Oh wow this is amazing! I know so many friends who have complained before about a lack of reference. Now I can just link them this :D. Thank you so much!</p>\n<p>Small suggestion: \"Flatten\" the hierarchy a little, for example maybe introduce chapters to strip one level of depth? <code>3.2.4.1.2. Example Inductive Types</code> is a bit hard to refer to.</p>",
        "id": 478094912,
        "sender_full_name": "Max Nowak üêâ",
        "timestamp": 1729525873
    },
    {
        "content": "<p>is it ever useful to externally refer to sections by their numbers? I'd expect that that isn't going to be very stable as the text grows.</p>",
        "id": 478095608,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1729526054
    },
    {
        "content": "<p>Great suggestion!</p>\n<p>The Verso setup has support for stable links to chapters, docstrings, etc, but it's  not yet easy to find them from the UI. Ideally, the stable internal ID (eg <code>example-inductive-types</code>) would be the unit of link sharing.</p>\n<p>But the hierarchy is certainly not fixed, and I'll keep track of these things as the text grows.</p>",
        "id": 478095812,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729526109
    },
    {
        "content": "<p>For like 10 years it was a not-completely-rare occurrence to tell someone \"you are asking about section 4.9.1 of the python tutorial\" when someone would ask about a particular common gotcha.</p>",
        "id": 478096120,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729526189
    },
    {
        "content": "<p>Do we have the #ref and ref#example-inductive-types linkifiers on Zulip yet? EDIT: No, can someone add them? <span aria-label=\"pray\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"pray\">:pray:</span></p>",
        "id": 478096345,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1729526251
    },
    {
        "content": "<p>How to do it is a bit undocumented right now - I can fix that tomorrow</p>",
        "id": 478097315,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729526521
    },
    {
        "content": "<p>The Verso manual genre has multiple namespaces for stable identifiers (so libraries can compose), so we may need a bit of discussion about the best Zulip UI</p>",
        "id": 478097545,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729526576
    },
    {
        "content": "<p>Is there a search function? I was going to look up <code>compile_inductive%</code> but how do I search.</p>",
        "id": 478099794,
        "sender_full_name": "Max Nowak üêâ",
        "timestamp": 1729527210
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/stream/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478096120\">said</a>:</p>\n<blockquote>\n<p>For like 10 years it was a not-completely-rare occurrence to tell someone \"you are asking about section 4.9.1 of the python tutorial\" when someone would ask about a particular common gotcha.</p>\n</blockquote>\n<p>We do this math also. Oh ‚Äúthat‚Äôs SGA 4, Expose XVIII, Thm 1.7‚Äù or ‚Äúthat is Hartshorne Exercise III.3.7‚Äù Once a reference becomes canonical-enough.</p>",
        "id": 478100188,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1729527332
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"416280\">@Max Nowak üêâ</span> <code>compile_inductive%</code> is a Mathlib command. See <code>Mathlib/Util/CompileInductive.lean</code></p>",
        "id": 478100251,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729527354
    },
    {
        "content": "<p>In the  tactic  docs, there  are a few  tactics like <code>no_match</code> and <code>no_fun</code> whose documentation  says \"this is short for <code>exact no_match</code>\" , but  doesn't link to the <code>no_match</code> theorem/def in question</p>",
        "id": 478100383,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1729527388
    },
    {
        "content": "<p>A small design quibble,: Even on desktop, the font size is too small, as is the spacing between lines. Could we  get an mdbook like style again? That style remains very convenient</p>",
        "id": 478100638,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1729527472
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306577\">Matthew Ballard</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478100188\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/stream/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478096120\">said</a>:</p>\n<blockquote>\n<p>For like 10 years it was a not-completely-rare occurrence to tell someone \"you are asking about section 4.9.1 of the python tutorial\" when someone would ask about a particular common gotcha.</p>\n</blockquote>\n<p>We do this math also. Oh ‚Äúthat‚Äôs SGA 4, Expose XVIII, Thm 1.7‚Äù or ‚Äúthat is Hartshorne Exercise III.3.7‚Äù Once a reference becomes canonical-enough.</p>\n</blockquote>\n<p>(out of complete offtopic curiosity, were these two examples real? if so I'm curious to go look up what they refer to.)</p>",
        "id": 478102406,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729527977
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"416280\">Max Nowak üêâ</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478099794\">said</a>:</p>\n<blockquote>\n<p>Is there a search function? I was going to look up <code>compile_inductive%</code> but how do I search.</p>\n</blockquote>\n<p>Not yet! It's planned, but we figured it made sense to write the text to be searched before building the feature. Once this gets a link from the main Lean site, I suspect the usual engines will index it, but that's definitely not as good as a built-in one.</p>\n<p>My plan is to build a combined index/search field, so that registered \"things of interest\" like technical terms, names of docstring'ed things, and tokens in syntax rules will have special support in the search field, making it easy to jump to their specification, with a fallback to full text search engine like lunr. This'll just take a bit of coding to get right.</p>\n<p>Thanks for your patience :)</p>",
        "id": 478105522,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729528941
    },
    {
        "content": "<p>Sounds awesome, I'm hyped!</p>",
        "id": 478105643,
        "sender_full_name": "Max Nowak üêâ",
        "timestamp": 1729528980
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478100383\">said</a>:</p>\n<blockquote>\n<p>In the tactic docs, there are a few tactics like <code>no_match</code> and <code>no_fun</code> whose documentation says \"this is short for <code>exact no_match</code>\" , but doesn't link to the <code>no_match</code> theorem/def in question</p>\n</blockquote>\n<p>This was covered under the announcement caveat:</p>\n<blockquote>\n<p>Rendered Markdown docstrings don't yet have Lean highlighting.</p>\n</blockquote>\n<p>but I recognize that this was a quite obscure way to say it :-) Right now, content from outside of Verso isn't yet parsed r elaborated; my plan is to build some heuristics to make this possible so that the links will happen on their own most of the time. The internal links are generated from the parser's and elaborators' outputs.</p>",
        "id": 478105952,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729529073
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478100638\">said</a>:</p>\n<blockquote>\n<p>A small design quibble,: Even on desktop, the font size is too small, as is the spacing between lines. Could we get an mdbook like style again? That style remains very convenient</p>\n</blockquote>\n<p>Thanks for the feedback! The reference manual currently uses CSS that's copy-pasted from the Lean website, and I want to keep them in sync. I'll work on improving this aspect for both. Does your browser's zoom feature work for you in the meantime?</p>",
        "id": 478106148,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729529131
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Ya√´l Dillies</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478096345\">said</a>:</p>\n<blockquote>\n<p>Do we have the #ref and ref#example-inductive-types linkifiers on Zulip yet? EDIT: No, can someone add them? <span aria-label=\"pray\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"pray\">:pray:</span></p>\n</blockquote>\n<p>Tracking issue for the needed docs: <a href=\"https://github.com/leanprover/reference-manual/issues/113\">https://github.com/leanprover/reference-manual/issues/113</a></p>",
        "id": 478106817,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729529343
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Ya√´l Dillies</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478096345\">said</a>:</p>\n<blockquote>\n<p>Do we have the <a href=\"https://lean-lang.org/doc/reference/latest/\">#ref</a> and ref#example-inductive-types linkifiers on Zulip yet? EDIT: No, can someone add them? <span aria-label=\"pray\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"pray\">:pray:</span></p>\n</blockquote>\n<p>I have added <a href=\"https://lean-lang.org/doc/reference/latest/\">#ref</a>, but I'll wait to set up ref#example-inductive-types until the dust has settled on that front.</p>",
        "id": 478107993,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1729529756
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306577\">Matthew Ballard</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478100188\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/stream/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478096120\">said</a>:</p>\n<blockquote>\n<p>For like 10 years it was a not-completely-rare occurrence to tell someone \"you are asking about section 4.9.1 of the python tutorial\" when someone would ask about a particular common gotcha.</p>\n</blockquote>\n<p>We do this math also. Oh ‚Äúthat‚Äôs SGA 4, Expose XVIII, Thm 1.7‚Äù or ‚Äúthat is Hartshorne Exercise III.3.7‚Äù Once a reference becomes canonical-enough.</p>\n</blockquote>\n<p>Sure, for a printed book with maybe an revision every few years. But a constantly evolving online resource?  Anyways, it will happen when and if it works, we'll see :-)</p>",
        "id": 478113829,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1729531705
    },
    {
        "content": "<p>Presumably the python tutorial is also a constantly evolving online resource?</p>",
        "id": 478127374,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729536450
    },
    {
        "content": "<p>Yes, and in those 10/15 years the number never changed, though of course it's likely someone intentionally avoided doing so at some point.</p>",
        "id": 478128137,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729536739
    },
    {
        "content": "<p><a href=\"https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents\">https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents</a></p>\n<p>Manual.example command is typo of example command?</p>",
        "id": 478161845,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1729549820
    },
    {
        "content": "<p>btw its great work! Im looking forward to see verso v1 release!</p>",
        "id": 478161973,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1729549880
    },
    {
        "content": "<p>Thanks so much for this!<br>\nIs it intentional that if you go to a URL without adding the slash at the end, it breaks the CSS? For example, <a href=\"https://lean-lang.org/doc/reference/latest/Basic-Types/Strings\">https://lean-lang.org/doc/reference/latest/Basic-Types/Strings</a> is broken for me, but <a href=\"https://lean-lang.org/doc/reference/latest/Basic-Types/Strings/\">https://lean-lang.org/doc/reference/latest/Basic-Types/Strings/</a> is fine. I found this because the former was linked in your announcement.</p>",
        "id": 478170163,
        "sender_full_name": "Niels Voss",
        "timestamp": 1729553638
    },
    {
        "content": "<p>One thing I've seen mentioned occasionally, but never found documentation for, is unification hints. Is documentation of those planned for this reference?</p>",
        "id": 478178386,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1729557671
    },
    {
        "content": "<p>The tactic documentation looks promising, though not complete (it's missing <code>clear</code> and <code>revert</code>, for example, and might well be missing other core Lean tactics). What I'd really like is for the official mathlib4 API documentation to get a version of mathlib3's <a href=\"https://leanprover-community.github.io/mathlib_docs/tactics.html\">https://leanprover-community.github.io/mathlib_docs/tactics.html</a> - comprehensively listing all tactics available when you use mathlib, without regard to whether they come from core or mathlib or any of mathlib's dependencies (of course each tactic's documentation should say what imports it needs, but splitting by where the tactic is implemented isn't the most helpful thing for users) - the lack of this seems like the biggest weakness in mathlib4 documentation compared to mathlib3. Is this Lean reference set up to allow the tactic documentation to be extracted automatically for inclusion in such integrated core+mathlib+dependencies documentation if mathlib4 gets it in future?</p>",
        "id": 478179526,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1729558255
    },
    {
        "content": "<p>Is there a way to go to the next chapter? I would have expected a button at the end of chapter 1 to take me to chapter 2, but there isn't one that I can see, and the sidebar is also limited to just chapter 1 so you have to go back to the TOC to find chapter 2</p>",
        "id": 478184979,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1729561449
    },
    {
        "content": "<blockquote>\n<p>Lean's kernel is written in C++. There is an independent re-implementation in Rust, and the Lean project is interested in having as many implementations as possible so that they can be cross-checked against each other.</p>\n</blockquote>\n<p>You should mention the <a href=\"https://github.com/digama0/lean4lean\">Lean implementation</a> of the kernel here, and also link the <a href=\"https://github.com/ammkrn/nanoda_lib\">Rust implementation</a>.</p>",
        "id": 478185648,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1729561902
    },
    {
        "content": "<p>Wow it's great to have a comprehensive manual, i remember learning lean being very challenging without it !</p>",
        "id": 478219672,
        "sender_full_name": "EdwardW",
        "timestamp": 1729581593
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478184979\">said</a>:</p>\n<blockquote>\n<p>Is there a way to go to the next chapter? I would have expected a button at the end of chapter 1 to take me to chapter 2, but there isn't one that I can see, and the sidebar is also limited to just chapter 1 so you have to go back to the TOC to find chapter 2</p>\n</blockquote>\n<p>There is now! You can see it at <a href=\"https://lean-reference-manual-review.netlify.app/\">https://lean-reference-manual-review.netlify.app/</a>, and it'll be in the next release. Thanks for the feedback!</p>",
        "id": 478251067,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729592213
    },
    {
        "content": "<p>This is really wonderful news for the Lean community. Thank you so much David!</p>",
        "id": 478253144,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1729593026
    },
    {
        "content": "<p>Thanks for the discussions along the way, <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> :-)</p>",
        "id": 478257277,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729594638
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"751294\">EdwardW</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478219672\">said</a>:</p>\n<blockquote>\n<p>Wow it's great to have a comprehensive manual, i remember learning lean being very challenging without it !</p>\n</blockquote>\n<p>It is not _yet_ comprehensive - but I'm working on it! Please create/ <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> issues in the repo that matter to you.</p>",
        "id": 478257355,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729594679
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"266253\">Joseph Myers</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478178386\">said</a>:</p>\n<blockquote>\n<p>One thing I've seen mentioned occasionally, but never found documentation for, is unification hints. Is documentation of those planned for this reference?</p>\n</blockquote>\n<p>Yes, they're planned, but not in the immediate future (things like <code>Array</code> seem higher priority for now).</p>\n<p>Here's an issue that you can watch: <a href=\"https://github.com/leanprover/reference-manual/issues/118\">https://github.com/leanprover/reference-manual/issues/118</a></p>",
        "id": 478284097,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729603395
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"266253\">Joseph Myers</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478179526\">said</a>:</p>\n<blockquote>\n<p>The tactic documentation looks promising, though not complete (it's missing <code>clear</code> and <code>revert</code>, for example, and might well be missing other core Lean tactics).</p>\n</blockquote>\n<p>This must be a bug in the tool that I use to track coverage of tactics. Thanks for letting me know - I'll investigate!</p>",
        "id": 478284303,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729603451
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"266253\">Joseph Myers</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478179526\">said</a>:</p>\n<blockquote>\n<p>comprehensively listing all tactics available when you use mathlib, without regard to whether they come from core or mathlib or any of mathlib's dependencies (of course each tactic's documentation should say what imports it needs, but splitting by where the tactic is implemented isn't the most helpful thing for users)</p>\n</blockquote>\n<p>This is a useful thing to have, but I don't think it belongs in the language reference.</p>\n<p>I think that there are situations where a document that describes a particular library (or Lean itself) is the most useful, and others that list everything available for import in a project are useful. For instance, if I'm evaluating whether to add a dependency on a library, then I want to see what's in it (and only what's in it), while if I am knee-deep in a proof, then I want to know what all my available tools are.</p>\n<p><a href=\"https://github.com/leanprover/lean4/pull/4490\">I added a system to track tactics</a> a while back that can be used to build what you're looking for, at the request of users. It's since proven very handy for the manual too.</p>",
        "id": 478285372,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729603758
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"521331\">Niels Voss</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478170163\">said</a>:</p>\n<blockquote>\n<p>Is it intentional that if you go to a URL without adding the slash at the end, it breaks the CSS? For example, <a href=\"https://lean-lang.org/doc/reference/latest/Basic-Types/Strings\">https://lean-lang.org/doc/reference/latest/Basic-Types/Strings</a> is broken for me, but <a href=\"https://lean-lang.org/doc/reference/latest/Basic-Types/Strings/\">https://lean-lang.org/doc/reference/latest/Basic-Types/Strings/</a> is fine. I found this because the former was linked in your announcement.</p>\n</blockquote>\n<p>Thanks for pointing this out - the link is fixed now in the announcement.</p>\n<p>This is an issue with relative paths - it's definitely not intended, but I've been struggling a bit to get our web host to emit redirects from \"/Ch1/Sec1\" to \"/Ch1/Sec1/\". I'll continue looking into it. Thanks!</p>",
        "id": 478286131,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729603942
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478161845\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents\">https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents</a></p>\n<p>Manual.example command is typo of example command?</p>\n</blockquote>\n<p>Thanks for catching this - I've fixed it, and the fix will be in the next release.</p>",
        "id": 478291503,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729605323
    },
    {
        "content": "<p>I don't see it, but just in case -- is there perhaps an easy way to jump from a page to the source of the page, like Sphinx's Show Source functionality (e.g. in the sidebar on <a href=\"https://docs.python.org/3/reference/index.html\">https://docs.python.org/3/reference/index.html</a>)</p>",
        "id": 478292866,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729605675
    },
    {
        "content": "<p>There is not, but it would be convenient. I don't think it's higher priority than content at this point - are there any really important use cases that I'm missing?</p>",
        "id": 478293388,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729605796
    },
    {
        "content": "<p>No it absolutely isn't high priority seeming to me, was just curious!</p>",
        "id": 478294066,
        "sender_full_name": "Julian Berman",
        "timestamp": 1729605976
    },
    {
        "content": "<p>I was just about to bring up the same thing. For me a link to the source is useful to quickly report an issue in the content or contribute a fix, otherwise it's often difficult to know where to do that.</p>\n<p>Very happy to see the reference being developed!</p>",
        "id": 478302278,
        "sender_full_name": "Francisco Giordano",
        "timestamp": 1729608371
    },
    {
        "content": "<p>Is the plan for <a href=\"https://lean-lang.org/doc/reference/latest/Notations-and-Macros/#language-extension\">https://lean-lang.org/doc/reference/latest/Notations-and-Macros/#language-extension</a> to include documentation of syntax quotations and antiquotations?</p>",
        "id": 478320068,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729613025
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> <br>\nIt's great works! I'm studying Lean4 about one year and still don't have enough knowledge, so this is very helpful for me.</p>\n<p>And since I'm not good at English, and it would also help japanese Lean users if this manual was in Japanese, I would like to translate and release it on web.<br>\nThe translation repository and release page is hosted on <a href=\"https://github.com/lean-ja\">lean-ja</a>, and the entire process is non-profit.</p>\n<p>Could you please permit us to do so?</p>",
        "id": 478383792,
        "sender_full_name": "t-shibata",
        "timestamp": 1729640614
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"668081\">Francisco Giordano</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478302278\">said</a>:</p>\n<blockquote>\n<p>I was just about to bring up the same thing. For me a link to the source is useful to quickly report an issue in the content or contribute a fix, otherwise it's often difficult to know where to do that.</p>\n</blockquote>\n<p>I don't doubt that it's useful, but I still think that it's a fairly small benefit, which is why I'm down-prioritizing it. Other than it taking a few more steps, how is it much better than typing the sentence in question into the GitHub search box to find the source file?</p>\n<p>For instance, let's say I was on &lt;<a href=\"https://lean-reference-manual-review.netlify.app/elaboration-and-compilation/\">https://lean-reference-manual-review.netlify.app/elaboration-and-compilation/</a>&gt; and wanted to contribute some additional text to the section on info trees, specifically the paragraph that starts with \"Info trees relate metadata to the user's original syntax.\".  <a href=\"https://github.com/search?q=repo%3Aleanprover%2Freference-manual+%22Info+trees+relate+metadata+to+the+user%27s+original+syntax.%22&amp;type=code\">GItHub's search</a> takes me right to it in the source. Certainly one click is better than a click followed by a copy-paste with quote marks and then another click, but how much better is it?</p>\n<p>I feel like I may be missing an angle here.</p>",
        "id": 478414540,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729660891
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478320068\">said</a>:</p>\n<blockquote>\n<p>Is the plan for <a href=\"https://lean-lang.org/doc/reference/latest/Notations-and-Macros/#language-extension\">https://lean-lang.org/doc/reference/latest/Notations-and-Macros/#language-extension</a> to include documentation of syntax quotations and antiquotations?</p>\n</blockquote>\n<p>Yes, that's an important topic to describe in detail.</p>",
        "id": 478414616,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729660927
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/stream/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478414540\">said</a>:</p>\n<blockquote>\n<p>For instance, let's say I was on &lt;<a href=\"https://lean-reference-manual-review.netlify.app/elaboration-and-compilation/\">https://lean-reference-manual-review.netlify.app/elaboration-and-compilation/</a>&gt; and wanted to contribute some additional text to the section on info trees, specifically the paragraph that starts with \"Info trees relate metadata to the user's original syntax.\".  <a href=\"https://github.com/search?q=repo%3Aleanprover%2Freference-manual+%22Info+trees+relate+metadata+to+the+user%27s+original+syntax.%22&amp;type=code\">GItHub's search</a> takes me right to it in the source. Certainly one click is better than a click followed by a copy-paste with quote marks and then another click, but how much better is it?</p>\n<p>I feel like I may be missing an angle here.</p>\n</blockquote>\n<p>You are missing the most time taking step on my experience: Find out what repo the documentation is built from.</p>",
        "id": 478447057,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1729674366
    },
    {
        "content": "<p>That is indeed important - I think I can solve that one with very little work, and will do so soon.</p>",
        "id": 478530664,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729698962
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478414540\">said</a>:</p>\n<blockquote>\n<p>Certainly one click is better than a click followed by a copy-paste with quote marks and then another click, but how much better is it?</p>\n</blockquote>\n<p>I think it's fine to deprioritize it! I'll point out though that at the moment there is no link to the GitHub repo in the website, which I think could be a good intermediate step to point people in the right direction to contribute.</p>",
        "id": 478560756,
        "sender_full_name": "Francisco Giordano",
        "timestamp": 1729708843
    },
    {
        "content": "<p>Hi, is it possible to download The Lean Language Reference as PDF or some other way to read it with out connection?</p>",
        "id": 478575877,
        "sender_full_name": "Iv√°n Renison",
        "timestamp": 1729714484
    },
    {
        "content": "<p>You'll lose all the fabulous<br>\nVersoality that way!</p>",
        "id": 478577037,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729714982
    },
    {
        "content": "<p>Reading a pdf will definitely be an inferior experience compared to the online version. I think it's still valuable to support a pdf format for offline use (though not high priority - IMO).</p>",
        "id": 478583328,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1729717568
    },
    {
        "content": "<p>A zip download for offline use might be a better approach, assuming this is digital-but-offline and not paper reading</p>",
        "id": 478584325,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729717943
    },
    {
        "content": "<p>Most browsers offer an option to save a webpage. The zip download option also sounds good. What's ideal would be having an installation of the docs with each toolchain which can be opened with <code>elan docs</code></p>",
        "id": 478595535,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1729723744
    },
    {
        "content": "<p>Topic request (low priority): pretty-printing, including delaborators, unexpanders, formatters, ...</p>",
        "id": 478595539,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1729723748
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 478595560,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1729723762
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478595539\">said</a>:</p>\n<blockquote>\n<p>Topic request (low priority): pretty-printing, including delaborators, unexpanders, formatters, ...</p>\n</blockquote>\n<p>Long-term, it would be great if all major metaprogramming topics were covered in the reference. Reliable conceptual and overview documentation for the metaprogramming APIs is still hard to come by. But of course this is a very big topic.</p>",
        "id": 478669834,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1729761360
    },
    {
        "content": "<p>Maybe these docs could absorb the monad map from the mathlib wiki too?</p>",
        "id": 478671237,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729761804
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"668081\">Francisco Giordano</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478560756\">said</a>:</p>\n<blockquote>\n<p>I think it's fine to deprioritize it! I'll point out though that at the moment there is no link to the GitHub repo in the website, which I think could be a good intermediate step to point people in the right direction to contribute.</p>\n</blockquote>\n<p>Indeed, that's the \"very little work\" way that I was talking about above.</p>",
        "id": 478679328,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729764504
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478595539\">said</a>:</p>\n<blockquote>\n<p>Topic request (low priority): pretty-printing, including delaborators, unexpanders, formatters, ...</p>\n</blockquote>\n<p>Definitely important. Here's the tracking issue: <a href=\"https://github.com/leanprover/reference-manual/issues/122\">https://github.com/leanprover/reference-manual/issues/122</a></p>\n<p>If you have nice examples for the docs, or aspects that you think are particularly important, please post them there so they don't get lost!</p>",
        "id": 478680329,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729764854
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478671237\">said</a>:</p>\n<blockquote>\n<p>Maybe these docs could absorb the monad map from the mathlib wiki too?</p>\n</blockquote>\n<p>That's <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Monad-map\">this one</a>, right? That'd be great information to have in the language reference.</p>",
        "id": 478680590,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729764958
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"646655\">Iv√°n Renison</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478575877\">said</a>:</p>\n<blockquote>\n<p>Hi, is it possible to download The Lean Language Reference as PDF or some other way to read it with out connection?</p>\n</blockquote>\n<p>Right now, the easiest way to read it without a connection is to build the HTML locally. This is definitely not ideal, and it will be improved. People need to be able to work on airplanes.</p>\n<p>For proofreading on my Remarkable, I usually generate the whole thing as one giant HTML file then print to PDF, and you'll find a bit of a print stylesheet in the repo. The results are not beautiful, but they do let me sit with a red pen and see things in enough of a different format to catch mistakes that disappear in the browser version.</p>\n<p>This is an area where the right kind of external contribution could be useful. Verso 's manual genre already supports generating LaTeX, but basically none of the documentation tools used in the reference manual support TeX output. I won't have time to improve this in the near future, but it'd be easy code to review. The only hard part would be implementing the rendering of the highlighted code examples to LaTeX, but I think the right combination of <code>fancyvrb</code> and <code>hyperref</code> could make it work pretty well in maybe 2-3 days of work. Epub output would also be really useful.</p>",
        "id": 478681835,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729765433
    },
    {
        "content": "<p>And if Verso can one day be useful for writing papers, then it'd better support TeX rendering of Lean code :-)</p>",
        "id": 478682354,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729765637
    },
    {
        "content": "<p>Thanks for the great work on documentation infrastructure, and the well written manual! <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span> </p>\n<p>Just skimmed through the contents, a few nitpicks:</p>\n<ol>\n<li>while internal fuzzy searching is desirable, currently the index is a good place to search for terms of interest; some entries with long namespace could be further grouped by the last namespaces, e.g. <code>String.*</code>, <code>Nat.*</code>, <code>Lean.Elab.Tactic.*</code>, <code>Lean.Meta.Simp.*</code>.</li>\n<li>blue boxes for reference entries have tall top and bottom margins, tall enough to break reading \"flow\", a smaller margin that's proportional to the line height would be nice.</li>\n<li>would love to see more entries for symbols, there are currently 7 of them, it's one of the top things a newcomer needs the reference manual for, with good discoverability.</li>\n</ol>",
        "id": 478684230,
        "sender_full_name": "Utensil Song",
        "timestamp": 1729766359
    },
    {
        "content": "<p>And a general question: in the long term, how would the manual be kept in sync with code and doc string when features evolve? Is it something the Lean-native Verso can help to solve, so it's easier for maintainers to ensure that they are in sync, and readers are more assured that they are in sync, and when it's not, it's one-click away to the most up-to-date source of documentation (the relevant code)?</p>",
        "id": 478684235,
        "sender_full_name": "Utensil Song",
        "timestamp": 1729766362
    },
    {
        "content": "<p>at the explanation for the <a href=\"https://lean-lang.org/doc/reference/latest/The-Lean-Language/The-Type-System/#well-formed-inductives\">requirements for inductive types</a>, the example claims that the defined <code>Fix (fun a =&gt; a -&gt; a)</code> would be equivalent to <code>Bad</code>... i've given a shot, but i couldn't seem to prove that you can construct <code>Bad.rec</code> function from <code>Fix.rec</code>? Maybe it would be easier to say that <code>Fix (. -&gt; Empty)</code> is an inconsistent type (as you're creating a fixpoint for negation)?</p>",
        "id": 478713556,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729775602
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"296911\">Utensil Song</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478684235\">said</a>:</p>\n<blockquote>\n<p>And a general question: in the long term, how would the manual be kept in sync with code and doc string when features evolve? Is it something the Lean-native Verso can help to solve, so it's easier for maintainers to ensure that they are in sync, and readers are more assured that they are in sync, and when it's not, it's one-click away to the most up-to-date source of documentation (the relevant code)?</p>\n</blockquote>\n<p>One of the amazing things about Verso is that it completely solves this problem. All the code samples in Verso are \"live\", and tested at build time.</p>",
        "id": 478714596,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1729775873
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"296911\">Utensil Song</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478684230\">said</a>:</p>\n<blockquote>\n<ol>\n<li>while internal fuzzy searching is desirable, currently the index is a good place to search for terms of interest; some entries with long namespace could be further grouped by the last namespaces, e.g. <code>String.*</code>, <code>Nat.*</code>, <code>Lean.Elab.Tactic.*</code>, <code>Lean.Meta.Simp.*</code>.</li>\n</ol>\n</blockquote>\n<p>Very good idea! <a href=\"https://github.com/leanprover/verso/issues/203\">Here's the tracking issue</a>.</p>",
        "id": 478721680,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729777703
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"296911\">Utensil Song</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478684230\">said</a>:</p>\n<blockquote>\n<ol start=\"2\">\n<li>blue boxes for reference entries have tall top and bottom margins, tall enough to break reading \"flow\", a smaller margin that's proportional to the line height would be nice.</li>\n</ol>\n</blockquote>\n<p>This would be a nice improvement.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"296911\">Utensil Song</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478684230\">said</a>:</p>\n<blockquote>\n<ol start=\"3\">\n<li>would love to see more entries for symbols, there are currently 7 of them, it's one of the top things a newcomer needs the reference manual for, with good discoverability.</li>\n</ol>\n</blockquote>\n<p>Yes, good point!</p>",
        "id": 478721857,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729777755
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478713556\">said</a>:</p>\n<blockquote>\n<p>at the explanation for the <a href=\"https://lean-lang.org/doc/reference/latest/The-Lean-Language/The-Type-System/#well-formed-inductives\">requirements for inductive types</a>, the example claims that the defined <code>Fix (fun a =&gt; a -&gt; a)</code> would be equivalent to <code>Bad</code>... i've given a shot, but i couldn't seem to prove that you can construct <code>Bad.rec</code> function from <code>Fix.rec</code>? Maybe it would be easier to say that <code>Fix (. -&gt; False)</code> is an inconsistent type (as you're creating a fixpoint for negation)?</p>\n</blockquote>\n<p>I looked into this and indeed Lean generates a recursor without an induction hypothesis for <code>Fix.rec</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">unsafe</span><span class=\"w\"> </span><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">fix</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"n\">f</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"bp\">.</span><span class=\"n\">rec</span>\n<span class=\"c1\">-- Fix.rec.{u_1, u} {f : Type u ‚Üí Type u} {motive : Fix f ‚Üí Sort u_1}</span>\n<span class=\"c1\">--   (fix : (a : f (Fix f)) ‚Üí motive (Fix.fix a))</span>\n<span class=\"c1\">--   (t : Fix f) : motive t</span>\n</code></pre></div>\n<p>So I guess the <code>Fix</code> that comes out of the <code>unsafe inductive</code> declaration is an accidentally consistent but non-inductive type.</p>",
        "id": 478722154,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1729777813
    },
    {
        "content": "<p>it's still <em>not</em> consistent, using <code>f := (. -&gt; Empty)</code></p>",
        "id": 478722378,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729777886
    },
    {
        "content": "<p>my point is that the argument as to why it isn't consistent is wrong (or at least not clear)</p>",
        "id": 478722454,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729777909
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"296911\">Utensil Song</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478684235\">said</a>:</p>\n<blockquote>\n<p>And a general question: in the long term, how would the manual be kept in sync with code and doc string when features evolve? Is it something the Lean-native Verso can help to solve, so it's easier for maintainers to ensure that they are in sync, and readers are more assured that they are in sync, and when it's not, it's one-click away to the most up-to-date source of documentation (the relevant code)?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>  gave half of the answer above (the examples are all checked at documentation build time).</p>\n<p>There's a few other ways in which Verso has been designed to make the manual maintainable:</p>\n<ol>\n<li>When output from Lean is included in the docs (error messages, proof states, etc) it is also included in the source code. This means that if the output changes, the build breaks. Code actions allow it to be updated easily, but someone has to look at it and approve it.</li>\n<li>When empirical claims about the language are made, they're often backed up by little tests that are not included in the output at all. <a href=\"https://github.com/leanprover/reference-manual/blob/2fbf58d9210323e4ebc0a002d9f761074da462cf/Manual/Language/InductiveTypes/Structures.lean#L369-L375\">Here's an example</a>.</li>\n</ol>\n<p>I hope this keeps maintenance affordable over time, so we can focus mostly on new content!</p>",
        "id": 478722780,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729778000
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"684366\">@Edward van de Meent</span>, <span class=\"user-mention\" data-user-id=\"256311\">@Jannis Limperg</span> Thanks! I just created <a href=\"https://github.com/leanprover/reference-manual/issues/124\">this issue</a> for this problem.</p>",
        "id": 478723476,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729778179
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"656978\">t-shibata</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478383792\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <br>\nIt's great works! I'm studying Lean4 about one year and still don't have enough knowledge, so this is very helpful for me.</p>\n<p>And since I'm not good at English, and it would also help japanese Lean users if this manual was in Japanese, I would like to translate and release it on web.<br>\nThe translation repository and release page is hosted on <a href=\"https://github.com/lean-ja\">lean-ja</a>, and the entire process is non-profit.</p>\n<p>Could you please permit us to do so?</p>\n</blockquote>\n<p>Please feel free to translate the reference! Thanks!</p>\n<p>I'd appreciate it if there was a clear indication that it's an unofficial translation, and a link to the original.</p>\n<p>There will be major changes  and additions to the text in the coming months. How do you plan to keep up with them and keep your translation synchronized with the upstream version?</p>",
        "id": 478724278,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729778389
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478722378\">said</a>:</p>\n<blockquote>\n<p>it's still <em>not</em> consistent, using <code>f := (. -&gt; Empty)</code></p>\n</blockquote>\n<p>How do you prove <code>False</code> with this? I'm not seeing it atm.</p>",
        "id": 478725398,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1729778648
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">autoImplicit</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"n\">f</span>\n\n<span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"bp\">.</span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">motive</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">mk</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">motive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fix</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">motive</span><span class=\"w\"> </span><span class=\"n\">a</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Bad</span><span class=\"bp\">.</span><span class=\"n\">toEmpty</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Empty</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Empty</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"n\">Fix</span><span class=\"bp\">.</span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">motive</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Empty</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Empty</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">Fix</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Bad</span><span class=\"bp\">.</span><span class=\"n\">toEmpty</span><span class=\"o\">)</span><span class=\"bp\">‚ü©</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Bad</span><span class=\"bp\">.</span><span class=\"n\">toEmpty</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">elim</span>\n</code></pre></div>",
        "id": 478725466,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729778667
    },
    {
        "content": "<p>i also posted this at the issue</p>",
        "id": 478725506,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729778679
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 478725664,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729778720
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478724278\">said</a>:</p>\n<blockquote>\n<p>I'd appreciate it if there was a clear indication that it's an unofficial translation, and a link to the original.</p>\n<p>There will be major changes  and additions to the text in the coming months. How do you plan to keep up with them and keep your translation synchronized with the upstream version?</p>\n</blockquote>\n<p>Thanks a lot! I am very honored that you commented on my proposal.<br>\nI also understood the note about translations and the link to the original text. I will take care of this.</p>\n<p>As a matter of fact, I do not have an efficient plan for keeping translations up to date.<br>\nThis is because machine translation from English to Japanese is not very accurate(it's still very helpful, of course), so I prefer steady manual translation.<br>\nTherefore, I will rebase from the original repository every few months, and translate the updated content each time.<br>\nI have been translating <code>Mathematics in Lean</code> with this policy, and it seems to be working relatively well for me.</p>",
        "id": 478732216,
        "sender_full_name": "t-shibata",
        "timestamp": 1729780343
    },
    {
        "content": "<p>That's great to hear! I look forward to seeing the results, even though I can't read Japanese :-)</p>",
        "id": 478734521,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729780933
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478714596\">said</a>:</p>\n<blockquote>\n<p>All the code samples in Verso are \"live\", and tested at build time.</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478722780\">said</a>:</p>\n<blockquote>\n<p>There's a few other ways in which Verso has been designed to make the manual maintainable (...omitted...)</p>\n</blockquote>\n<p>Good to know these ways to keep examples, outputs, claims in sync, these are truely remarkable. I've also noticed that doc for many types of reference entries (options, type classes, structures etc.) are automatically extracted from docstring to keep in sync, that's what I was asking about before learning about this from the source of manual.</p>\n<p>Exceptions to these are <code>signature</code>, <code>grammar</code> etc., these are hard-coded in the manual, which might be out-of-sync with the actual implementation.</p>",
        "id": 478738638,
        "sender_full_name": "Utensil Song",
        "timestamp": 1729782090
    },
    {
        "content": "<p>my Lean documentation (in Japanese) has ability of jumping to Lean 4 playground.</p>\n<p><a href=\"https://lean-ja.github.io/lean-by-example/\">https://lean-ja.github.io/lean-by-example/</a></p>\n<p>This enables reader to run each file and code block.</p>\n<p>is there a plan for verso to support such features?</p>",
        "id": 478846091,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1729835596
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"296911\">@Utensil Song</span>:</p>\n<p>The <code>signature</code> block elaborates the provided signature and checks that it's equivalent to the actual signature. It then uses the way it's written in the source for display, rather than pretty-printing it, so that the formatting can be chosen in a way that's most useful for showing how the parts relate. So that should be pretty maintainable over time.</p>\n<p>Similarly, the <code>syntax</code>/<code>grammar</code> blocks invoke the Lean parser on what's written in them. This doesn't check <em>coverage</em> - it might miss new alternatives added - but it does check that what's written does successfully parse. And we don't want something that checks complete coverage, because many things are parsed successfully and then later rejected by the elaborator, sometimes to get better error messages and sometimes to get better completion. For instance, <code>import Foo.Bar.</code> is valid import syntax according to the grammar to enable completion, but the trailing dot isn't really part of the syntax that it makes sense to document.</p>",
        "id": 478857469,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729841422
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478846091\">said</a>:</p>\n<blockquote>\n<p>is there a plan for verso to support such features?</p>\n</blockquote>\n<p>There is a desire, but not a concrete plan right now. The difficulty is tracking dependencies across examples - sometimes a single example contains a few bits of code, and the playground button should load all the dependencies but no more. This would be great, it's just not currently on the immediate short path.</p>\n<p>This is an area where an external contribution would be welcome.</p>",
        "id": 478857753,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729841537
    },
    {
        "content": "<p>All right, based on your feedback, <a href=\"https://lean-lang.org/doc/reference/latest/\">a second preview is up</a>. Content-wise, it's mostly the same (apart from the links suggested by <span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span>), but it now has the following:</p>\n<ul>\n<li>Section headers and documentation boxes now have permalink indicators, from which the permanent link can be copied</li>\n<li>There are links to the source repository and issue tracker on every page</li>\n<li>There are relative navigation buttons in the left-side table of contents, allowing movement upwards in the tree, or to the previous or next chapter/section</li>\n</ul>",
        "id": 478915318,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729861595
    },
    {
        "content": "<p>Thanks for your feedback so far, and please let me know if there's other things that get in the way of reading.</p>",
        "id": 478926651,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729865313
    },
    {
        "content": "<p>Nice. Trying to use the section links I get ‚Äú# No target provided, This script expects a 'target' query parameter, along with documentation domains.‚Äù</p>",
        "id": 478934299,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1729867740
    },
    {
        "content": "<p>Wow, that was fun to diagnose! Seems to be the GH cache preserving an older version of some JS. I'll think about how to make the build/cache process more robust.</p>",
        "id": 478936242,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729868378
    },
    {
        "content": "<p>‚ÄúThere are two hard problems in compuer science‚Ä¶‚Äù</p>",
        "id": 478936368,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1729868407
    },
    {
        "content": "<p>Thanks for the heads up</p>",
        "id": 478937718,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1729868841
    },
    {
        "content": "<p>I've noticed a weird style issue earlier: I can scroll past the bottom, so it will look like this:</p>\n<p><a href=\"/user_uploads/3121/8Yr4yTFXA5_uzmS3NbNa-_ey/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/8Yr4yTFXA5_uzmS3NbNa-_ey/image.png\" title=\"image.png\"><img data-original-dimensions=\"3786x1966\" src=\"/user_uploads/thumbnail/3121/8Yr4yTFXA5_uzmS3NbNa-_ey/image.png/840x560.webp\"></a></div><p>Today I observe that it can be stably reproduced for pages like <a href=\"https://lean-lang.org/doc/reference/latest///Elaboration-and-Compilation/\">https://lean-lang.org/doc/reference/latest///Elaboration-and-Compilation/</a> and <a href=\"https://lean-lang.org/doc/reference/latest///The-Lean-Language/The-Type-System/\">https://lean-lang.org/doc/reference/latest///The-Lean-Language/The-Type-System/</a> i.e. it seems to only happen to pages with margin notes.</p>",
        "id": 479299508,
        "sender_full_name": "Utensil Song",
        "timestamp": 1730128611
    },
    {
        "content": "<p>What browser are you using? I can't reproduce this on Firefox (on Ubuntu)</p>",
        "id": 479299653,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1730128670
    },
    {
        "content": "<p>Chrome on Mac</p>",
        "id": 479299683,
        "sender_full_name": "Utensil Song",
        "timestamp": 1730128682
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/Mch8HJP37N0nHaUoTuhcB7EE/image.png\">image.png</a><br>\nOn Chromium (129.0.6668.100) I get two scroll bars</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Mch8HJP37N0nHaUoTuhcB7EE/image.png\" title=\"image.png\"><img data-original-dimensions=\"1850x1053\" src=\"/user_uploads/thumbnail/3121/Mch8HJP37N0nHaUoTuhcB7EE/image.png/840x560.webp\"></a></div>",
        "id": 479300025,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1730128796
    },
    {
        "content": "<p>Thanks for the reports! I'll see what I can figure out.</p>\n<p><a href=\"https://github.com/leanprover/reference-manual/issues/128\">Tracking issue</a></p>",
        "id": 479300541,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1730128944
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> are you planning a chapter/section on FFI? I don't see it yet in the current draft.</p>",
        "id": 479467532,
        "sender_full_name": "Yuri",
        "timestamp": 1730204990
    },
    {
        "content": "<p>there is some of it mentioned in the part about inductive types</p>",
        "id": 479467648,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1730205013
    },
    {
        "content": "<p><a href=\"https://lean-lang.org/doc/reference/latest/////The-Lean-Language/The-Type-System/#inductive-types-ffi\">here</a></p>",
        "id": 479467921,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1730205094
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"463095\">Yuri de Wit</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/479467532\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> are you planning a chapter/section on FFI? I don't see it yet in the current draft.</p>\n</blockquote>\n<p>The current plan is to have a short section on the general principles of the FFI, and then have type-specific FFI information as part of the API reference for said types. Some of that information is present, but it's a lower priority than some other topics at the moment.</p>",
        "id": 479469080,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1730205466
    },
    {
        "content": "<p>(here \"type-specific FFI information\" refers to things like <a href=\"https://lean-lang.org/doc/reference/latest//find/?domain=Verso.Genre.Manual.section&amp;name=string-ffi\">this</a>)</p>",
        "id": 479469319,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1730205544
    },
    {
        "content": "<p>If there's specific information about the FFI that would be particularly valuable for you, please create an issue that describes it!</p>",
        "id": 479469530,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1730205610
    },
    {
        "content": "<p>The links in the index <a href=\"https://lean-lang.org/doc/reference/latest/the-index/#The-Lean-Language-Reference--Index\">https://lean-lang.org/doc/reference/latest/the-index/#The-Lean-Language-Reference--Index</a> aren't working, because the links are to <code>#---index-hdr-X</code> but there is <code>&lt;base href=\"/doc/reference/latest/\"&gt;</code>. This can be fixed by using <code>the-index/#---index-hdr-X</code> in the links</p>",
        "id": 480507669,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1730746662
    },
    {
        "content": "<p>Can we retain some of the examples from the old manual?</p>",
        "id": 482704156,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731709389
    },
    {
        "content": "<p>I think there were examples for De Bruijn indices, and HOAS</p>",
        "id": 482704185,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731709411
    },
    {
        "content": "<p>The plan right now is to replace the sections labeled \"Language Manual\" on <a href=\"https://lean-lang.org/lean4/doc/\">https://lean-lang.org/lean4/doc/</a> , not the entire contents of that site. The examples aren't part of what's being replaced. Thanks for checking!</p>",
        "id": 482704412,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1731709532
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/480507669\">said</a>:</p>\n<blockquote>\n<p>The links in the index <a href=\"https://lean-lang.org/doc/reference/latest/the-index/#The-Lean-Language-Reference--Index\">https://lean-lang.org/doc/reference/latest/the-index/#The-Lean-Language-Reference--Index</a> aren't working, because the links are to <code>#---index-hdr-X</code> but there is <code>&lt;base href=\"/doc/reference/latest/\"&gt;</code>. This can be fixed by using <code>the-index/#---index-hdr-X</code> in the links</p>\n</blockquote>\n<p>Thanks for pointing this out! Not sure how I missed it when you posted the comment here, and sorry for the slow reply. It's now issue <a href=\"https://github.com/leanprover/reference-manual/issues/150\">#150</a>.</p>",
        "id": 482704751,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1731709699
    },
    {
        "content": "<p>I already find myself turning to this reference regularly, thanks!  I find it a bit hard to navigate, though.  A search functionality (<a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478105522\">already discussed above</a>) would help.  But another thing I think would help would be a typed index.  For example, it would be great to have individual indexes for each of the following kinds of items:</p>\n<ul>\n<li>options</li>\n<li>commands</li>\n<li>declarations</li>\n<li>tactics</li>\n</ul>",
        "id": 482710452,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1731713225
    },
    {
        "content": "<p>I completely agree - thank you! <a href=\"https://github.com/leanprover/reference-manual/issues/151\">#151</a></p>",
        "id": 482713793,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1731715298
    },
    {
        "content": "<p>I think the overall structure could also use a bit of reorganization. The current table of contents is based on an initial guess, but now that there's content, it's worth revisiting to improve it.</p>",
        "id": 482713931,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1731715368
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> <br>\nis there a plan to write about user widget?<br>\nNow documents for user widget is only seen in Lean manual‚Ä¶</p>",
        "id": 482720423,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1731720125
    },
    {
        "content": "<p>I find the recent</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">())</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">pp</span><span class=\"bp\">.</span><span class=\"n\">universes</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>example quite strange; the fact that</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">T</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>works as a proof makes it almost seem like this is a bug!</p>",
        "id": 482723243,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731722686
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260507\">Heather Macbeth</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/482710452\">said</a>:</p>\n<blockquote>\n<p>I already find myself turning to this reference regularly, thanks!  I find it a bit hard to navigate, though.  A search functionality (<a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/478105522\">already discussed above</a>) would help.  But another thing I think would help would be a typed index.  For example, it would be great to have individual indexes for each of the following kinds of items:</p>\n<ul>\n<li>options</li>\n<li>commands</li>\n<li>declarations</li>\n<li>tactics</li>\n</ul>\n</blockquote>\n<p>I previously mentioned that I'd like the mathlib API reference to automatically extract the tactic documentation from this manual and combine it with documentation for all the tactics in mathlib and its dependencies in a single place, like with had in the mathlib3 docs (we still don't have a mathlib4 tactic reference on the leanprover-community site). Much the same would also apply to the other things you listed: a combined reference would be desirable, in addition to reference material in the Lean manual. I'd also like to add</p>\n<ul>\n<li>attributes (i.e. the individual attributes one might put on a definition, as opposed to documentation of the underlying attribute mechanism as a whole)</li>\n<li>custom expression elaborators such as <code>mod_cast</code> or <code>congr()</code><br>\nto the list of such things for which a combined reference would be desirable (in addition to the Lean reference manual covering whatever instances of such things do come from core Lean).</li>\n</ul>",
        "id": 482727687,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1731726117
    },
    {
        "content": "<p>The view with the sidebar on mobile isn't great, especially since it's is open by default:<br>\n<a href=\"/user_uploads/3121/jUnIStIBfwM_HcaFPZmrfI4Q/Screen-Shot-2024-11-16-at-07.46.08.png\">Screen Shot 2024-11-16 at 07.46.08.png</a><br>\nSome suggestions:</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/jUnIStIBfwM_HcaFPZmrfI4Q/Screen-Shot-2024-11-16-at-07.46.08.png\" title=\"Screen Shot 2024-11-16 at 07.46.08.png\"><img data-original-dimensions=\"1081x2401\" src=\"/user_uploads/thumbnail/3121/jUnIStIBfwM_HcaFPZmrfI4Q/Screen-Shot-2024-11-16-at-07.46.08.png/840x560.webp\"></a></div><ul>\n<li>the sidebar should be closed by default on small screens</li>\n<li>clicking outside of the sidebar should close it</li>\n<li>the page outside the sidebar should be grayed out and/or unscrollable</li>\n</ul>",
        "id": 482740410,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1731736122
    },
    {
        "content": "<p>Also, when the sidebar is hidden, when refreshing the page it appears for a split second and then disappears again - perhaps disabling the animation when that happens would make it less noticeable</p>",
        "id": 482741513,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1731737119
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/482723243\">said</a>:</p>\n<blockquote>\n<p>I find the recent</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Œ±</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">())</span><span class=\"w\"> </span><span class=\"n\">PUnit</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">pp</span><span class=\"bp\">.</span><span class=\"n\">universes</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>example quite strange; the fact that</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">T</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>works as a proof makes it almost seem like this is a bug!</p>\n</blockquote>\n<p>Right. It looks to me like <a href=\"https://github.com/leanprover/lean4/blob/682173d7c084de77bd948b458ef9a7bf48bcb34e/src/Lean/Meta/ExprDefEq.lean#L1390\">this part</a> should return <code>undef</code> when the universe equality is false.</p>",
        "id": 482760406,
        "sender_full_name": "Arthur Adjedj",
        "timestamp": 1731755023
    },
    {
        "content": "<p>Totally trivial remark: in the section </p>\n<p><a href=\"https://lean-lang.org/doc/reference/latest//The-Lean-Language/The-Type-System/#implicit-functions\">https://lean-lang.org/doc/reference/latest//The-Lean-Language/The-Type-System/#implicit-functions</a></p>\n<p>last sentence of the paragraph \"Strict implicit parameters\" has a typo: \"Ordinary implicit parameters are written...\" should be \"Strict implicit parameters are written...\"</p>",
        "id": 482898945,
        "sender_full_name": "David Loeffler",
        "timestamp": 1731879829
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/482720423\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <br>\nis there a plan to write about user widget?<br>\nNow documents for user widget is only seen in Lean manual‚Ä¶</p>\n</blockquote>\n<p>The feature is definitely in-scope, but it's not likely to be written about for quite some time. It's a much higher priority to document fundamental language features, like the elaboration of recursive functions, the basic types, and so forth. This language reference won't replace that section of the old manual, which is outside the \"language manual\" header; if it ever does, then the prior material will at a bare minimum get ported over verbatim.</p>",
        "id": 482948056,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1731915180
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>, <span class=\"user-mention\" data-user-id=\"432410\">@Arthur Adjedj</span> - thanks for scratching at this one. It's now <a href=\"https://github.com/leanprover/lean4/pull/6117\">lean4#6117</a>.</p>",
        "id": 482980130,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1731924897
    },
    {
        "content": "<p>Can we have a section or chapter on proving things in monadic code with <code>Satisfies</code>? It seems sufficiently fundamental and important that it ought to be documented and explained</p>",
        "id": 483141544,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1731971181
    },
    {
        "content": "<p><code>SatisfiesM</code> is not part of the core language, it is an experimental extension (which I like!) in Batteries. So it won't be in the Lean manual for now.</p>",
        "id": 483150305,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731974967
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/482740410\">said</a>:</p>\n<blockquote>\n<p>Some suggestions:</p>\n<ul>\n<li>the sidebar should be closed by default on small screens</li>\n<li>clicking outside of the sidebar should close it</li>\n<li>the page outside the sidebar should be grayed out and/or unscrollable</li>\n</ul>\n<p>Also, when the sidebar is hidden, when refreshing the page it appears for a split second and then disappears again - perhaps disabling the animation when that happens would make it less noticeable</p>\n</blockquote>\n<p>We've now implemented all of these suggestions and pushed an update to the preview release. Thank you very much for the feedback!</p>",
        "id": 483223714,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732010428
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"266253\">@Joseph Myers</span> All of your suggestions are very good, and a combined index for the documentation of the complete transitive dependencies of a project would be extremely valuable. It's not part of this particular effort, which is to get one piece of that data in good shape, but I'm absolutely working with an eye towards integration. Thanks again!</p>",
        "id": 483224111,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732010541
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"481963\">David Loeffler</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/482898945\">said</a>:</p>\n<blockquote>\n<p>Totally trivial remark: in the section </p>\n<p><a href=\"https://lean-lang.org/doc/reference/latest//The-Lean-Language/The-Type-System/#implicit-functions\">https://lean-lang.org/doc/reference/latest//The-Lean-Language/The-Type-System/#implicit-functions</a></p>\n<p>last sentence of the paragraph \"Strict implicit parameters\" has a typo: \"Ordinary implicit parameters are written...\" should be \"Strict implicit parameters are written...\"</p>\n</blockquote>\n<p>Thank you! This is not so trivial, really - that kind of mistake has the potential to confuse new users. It's important to <a href=\"https://github.com/leanprover/reference-manual/pull/157\">get it right</a>. Much appreciated!</p>",
        "id": 483224771,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732010750
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/482723243\">said</a>:</p>\n<blockquote>\n<p>I find the recent</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">...</span>\n</code></pre></div>\n<p>example quite strange ...</p>\n</blockquote>\n<p>This example is now correct as of <a href=\"https://github.com/leanprover/reference-manual/pull/157\">this PR</a> - thank you very much for the feedback!</p>",
        "id": 483227718,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732011699
    },
    {
        "content": "<p>Very nice, I'm still reading through the chapter.</p>\n<p>One remark: in the example of <a href=\"https://lean-lang.org/doc/reference/latest//Notations-and-Macros/Macros/#quotation\">11.5.3</a> it is not clear in Firefox that the code can be horizontally scrolled.<br>\n<a href=\"/user_uploads/3121/UdSKyj9WgWvNM8kvG4TyPNkZ/image.png\">image.png</a><br>\n(when moving my mouse over the code a very thin scroll bar appears, but not otherwise)</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/UdSKyj9WgWvNM8kvG4TyPNkZ/image.png\" title=\"image.png\"><img data-original-dimensions=\"957x156\" src=\"/user_uploads/thumbnail/3121/UdSKyj9WgWvNM8kvG4TyPNkZ/image.png/840x560.webp\"></a></div><p>In Chrome this is indicated much more clearly<br>\n<a href=\"/user_uploads/3121/yI61FVDYJAjW4OnWAJpqYTkf/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/yI61FVDYJAjW4OnWAJpqYTkf/image.png\" title=\"image.png\"><img data-original-dimensions=\"860x177\" src=\"/user_uploads/thumbnail/3121/yI61FVDYJAjW4OnWAJpqYTkf/image.png/840x560.webp\"></a></div>",
        "id": 483530482,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1732121650
    },
    {
        "content": "<p>That's no good! I think the solution here is to format the examples such that they don't overflow on the vast majority of screens. This is now <a href=\"https://github.com/leanprover/reference-manual/issues/163\">#163</a>.</p>",
        "id": 483553382,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732129492
    },
    {
        "content": "<p>Can <code>Std.Format</code> be converted into auto-wrapping HTML?</p>",
        "id": 483553474,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732129523
    },
    {
        "content": "<p>(which would be useful in the infoview too)</p>",
        "id": 483553508,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732129535
    },
    {
        "content": "<p>In principle, yes - I set up a Haskell pretty printing library to render to Javascript about a decade ago, so that it reflowed when resizing a webpage (and even measured the rendered width of the text, so it could use proportional fonts). It used an algorithm essentially similar to the one in <code>Std.Format</code> (though reformulated as a shallow rather than deep embedding of the document language). It was fun, and I agree it'd be nice in the infoview and in Verso HTML output.</p>\n<p>But that wouldn't fix this issue, because this is source code rather than pretty printer output, and the associated info tree is a big part of getting the highlighting and such to work. I'd rather lay out instructive source code examples by hand. I just need to figure out a column target and have Verso complain when I exceed it.</p>",
        "id": 483554323,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732129843
    },
    {
        "content": "<p>A remark on the navigation buttons: when one lands on the first page, that with the table of contents, the <code>Prev</code> and <code>Up</code> buttons do not work, as they should, but the <code>Next</code> doesn't neither, and it could lead to section 1.</p>",
        "id": 483857400,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1732263390
    },
    {
        "content": "<p>Thanks for the feedback!</p>\n<p>Would you also expect \"Prev\" to take you from section 1 to the site root?</p>",
        "id": 483860906,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732264839
    },
    {
        "content": "<p>I have to admit, I don't know, because but probably yes (unless \"Prev\" doesn't switch sections).</p>",
        "id": 483874440,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1732269288
    },
    {
        "content": "<p>For the case of the toc, it's more sensible, because one has to guess that there is no other thing to do than starting to read section 1.</p>",
        "id": 483874525,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1732269319
    },
    {
        "content": "<p>Today, it only navigates between sections at the same level.</p>\n<p>I'm of two minds on this - you're absolutely right that there's nowhere to go but down from the ToC. On the other hand, this special case doesn't make sense for any subsections, and I worry about having features that work differently in different areas. I'll think about it for a while.</p>\n<p>How do other readers in this thread feel about this point?</p>",
        "id": 483874981,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732269471
    },
    {
        "content": "<p>exactly, I was at the head of section 7, showing the toc after a short introduction, and I clicked next, because I wanted to read 7.1, but that led me to 8. So maybe it's me not understanding the intent of these buttons.</p>",
        "id": 483875458,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1732269606
    },
    {
        "content": "<p>The intent is that they navigate the document's table of contents: \"next\" on a chapter goes to the next chapter, or on a subsection it goes to the next subsection. But perhaps that's not what most readers expect, in which case it should change - I do have a very \"programmer\"y view of things sometimes. Perhaps \"next\" and \"prev\" should be a preorder traversal instead.</p>",
        "id": 483876535,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732269954
    },
    {
        "content": "<p>OK, having asked a few others and thought about it, I think it should be changed. <a href=\"https://github.com/leanprover/verso/issues/231\">verso#231</a>. Thanks!</p>",
        "id": 483878862,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732270736
    },
    {
        "content": "<p>In the stacks project there are \"parts\" e.g. <a href=\"https://stacks.math.columbia.edu/tag/0ELP\">https://stacks.math.columbia.edu/tag/0ELP</a>, and it doesn't say \"next\"/\"previous\" it says \"next part\", \"previous part\". You then go down into \"chapters\" e.g. <a href=\"https://stacks.math.columbia.edu/tag/01QL\">https://stacks.math.columbia.edu/tag/01QL</a> and the buttons say \"next chapter\" and \"previous chapter\". You then go down into \"sections\" e.g. <a href=\"https://stacks.math.columbia.edu/tag/056H\">https://stacks.math.columbia.edu/tag/056H</a> and now the buttons say \"next section\" and \"previous section\".  To go \"up\" you can look at the bar at the top, and to go \"down\" you can look at the links on the page if the page is a part or a chapter.</p>",
        "id": 483891824,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732275443
    },
    {
        "content": "<p>That's how the Lean reference works today (though adding \"part/chapter/section\" would make it much more clear). mdbook and Scribble both do the preorder traversal version. Having asked around and thought about it some more, I think that we should change it to fit the latter group of tools.</p>",
        "id": 483899091,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732278107
    },
    {
        "content": "<p>I haven't read the whole thread (so apologies if this is already covered) but do you have plans/thoughts for how versioning will work, or how it already does in case I missed it? Specifically how can I answer which version of Lean I'm reading the reference for, and/or potentially view it for other versions in the future (if I want to retroactively see it for an older Lean version)? I know if I click the introduction it says it's for 4.14.0-rc1 -- (n.b. in Sphinx there's a simple dropdown typically for switching versions... in Rust I see the reference telling you to do this by editing the URL?! <a href=\"https://doc.rust-lang.org/stable/reference/#rust-releases\">https://doc.rust-lang.org/stable/reference/#rust-releases</a>)</p>",
        "id": 484163753,
        "sender_full_name": "Julian Berman",
        "timestamp": 1732466005
    },
    {
        "content": "<p>We have a strategy/plan for versioning, but we don't have a concrete UI for picking versions yet. I like the way readthedocs does it.</p>\n<p>Right now, all focus is on getting the content written, and the reference manual is tracking upstream development reasonably closely. It mentions which version it's for, but it's only for that version. </p>\n<p>Once we feel like there's enough content for it to make sense to do so, the plan is to have a reference manual for each compiler version. Some nightlies may not end up with their own snapshot, because all the tests integrated into the manual mean that language changes can cause it to fail when it gets out of date, but it will be tracked as closely as possible. Certainly it will be a blocker for RCs and thus releases.</p>\n<p>We haven't yet decided whether the generated output will be part of the release tarball or a separate archive, nor have we decided how the reference manual for nightlies will be hosted/distributed. Once we reach that phase of the project, I'll be reaching out for feedback.</p>",
        "id": 484216332,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732514472
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130609\">Antoine Chambert-Loir</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/483857400\">said</a>:</p>\n<blockquote>\n<p>A remark on the navigation buttons: when one lands on the first page, that with the table of contents, the <code>Prev</code> and <code>Up</code> buttons do not work, as they should, but the <code>Next</code> doesn't neither, and it could lead to section 1.</p>\n</blockquote>\n<p>Update: this is now fixed in Verso, and will be part of the next reference manual release. Thanks again for the feedback!</p>",
        "id": 484329468,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1732548201
    },
    {
        "content": "<p>Another minor bit of link feedback -- it'd be useful if clicking on a heading always got you to the fragment for that heading (again a la Sphinx/RTD). I might be missing something, but right now I don't see how to get a link for all levels of sections. Specifically what I mean is that clicking in the left sidebar on 3.3.1 gets you <a href=\"https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents--Commands-and-Declarations\">https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents--Commands-and-Declarations</a> i.e. a link to that third-level section, but nothing will get you a link to a level down, 3.3.1.1. itself, even though in the source I see it has an anchor (<a href=\"https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents--Commands-and-Declarations--Definition-Like-Commands\">https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents--Commands-and-Declarations--Definition-Like-Commands</a>).</p>",
        "id": 485438625,
        "sender_full_name": "Julian Berman",
        "timestamp": 1733019136
    },
    {
        "content": "<p>Let me say again how much I love having a reference, especially one that is so well-written.</p>\n<p>The examples being collapsed by default somehow bothers me, probably because I can't know whether it is a small example or a huge one. Often when I scroll through large documents, the first thing I look at are the examples and the general \"shape\" of them, sometimes without even reading the text itself. I can't do this when I have to click on every example to first unfold. Hence... can we simply have all examples non-collapsed by default?</p>",
        "id": 486608869,
        "sender_full_name": "Max Nowak üêâ",
        "timestamp": 1733526937
    },
    {
        "content": "<p>I would have expected that I could find a simple explanation of the semantics of to the various ways of defining functions, including the syntax</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">...</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">...</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ReturnType</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>and what the difference is between this and putting a function type after the main colon.  (I know the difference now, but I was puzzled at first.  You can say that I was corrupted by some other languages.)  Manuals have different purposes, and maybe the kind of documentation that I hoped for doesn't belong in this manual. </p>\n<p>The only place I see, so far, that this kind of description might belong at present is section 3.2.1, which is part of the section 3.2 \"The Type System\".  I'm not sure whether the syntax above is mentioned at all in this section, or whether it's implied by the BNF.   There is mention of anonymous functions using <code>fun</code> (though the familiar term \"anonymous function\" isn't used), and a remark that \"Function definitions defined with keywords such as <code>def</code> desugar to <code>fun</code>.\"  That's all I see so far.  The section talks about Currying and pattern-matching definitions, which is good, but these ideas are mostly conveyed with BNF.  That's is all worth including, but this section is not a great reference for someone who's following a tutorial or experimenting with the language, but who wants to check their understanding or clarify their thinking about the way that function definitions work.  And maybe that's consistent with the goals of the manual, which is OK. However, there are other sections (e.g. 3.2.1) that make me think that the goals might be broader.  I understand that a manual is not a tutorial.  </p>\n<p>(If what I'm looking for is already in the manual--even as a stub to be filled in--my apologies. I haven't found it yet.)</p>",
        "id": 486629403,
        "sender_full_name": "mars0i",
        "timestamp": 1733543227
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321696\">Julian Berman</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/485438625\">said</a>:</p>\n<blockquote>\n<p>Another minor bit of link feedback -- it'd be useful if clicking on a heading always got you to the fragment for that heading (again a la Sphinx/RTD). I might be missing something, but right now I don't see how to get a link for all levels of sections. Specifically what I mean is that clicking in the left sidebar on 3.3.1 gets you <a href=\"https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents--Commands-and-Declarations\">https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents--Commands-and-Declarations</a> i.e. a link to that third-level section, but nothing will get you a link to a level down, 3.3.1.1. itself, even though in the source I see it has an anchor (<a href=\"https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents--Commands-and-Declarations--Definition-Like-Commands\">https://lean-lang.org/doc/reference/latest/The-Lean-Language/Module-Contents/#The-Lean-Language-Reference--The-Lean-Language--Module-Contents--Commands-and-Declarations--Definition-Like-Commands</a>).</p>\n</blockquote>\n<p>Thanks for this! The plan is to have a section in the left table of contents pane that contains the important items on the current HTML page. This includes:</p>\n<ul>\n<li>All the headers and sub-headers</li>\n<li>API and syntax references (documented symbols, tactics, grammar productions, etc)</li>\n<li>\n<p>Named examples<br>\nDepending on how it turns out with a bit of experimentation, it may include:</p>\n<ul>\n<li>Technical terms defined on the page</li>\n<li>Figures</li>\n</ul>\n</li>\n</ul>\n<p>It's not implemented yet, because it seems more important to get the content written right now, but I hope to get to it relatively quickly. Would this address the concern?</p>",
        "id": 486646176,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1733558191
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"416280\">Max Nowak üêâ</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/486608869\">said</a>:</p>\n<blockquote>\n<p>Hence... can we simply have all examples non-collapsed by default?</p>\n</blockquote>\n<p>I've gone back and forth on this one a few times. Collapsed by default lets some of the examples be longer when it's useful, without it getting in the way of reading the contents. Expanded by default makes it easier to skim for them, as you're describing.</p>\n<p>Maybe we need a little \"settings\" button at the top like Rustdoc recently got that pops up a panel with widgets for things like \"expand all examples\"?</p>",
        "id": 486646343,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1733558363
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"617444\">@mars0i</span> The content you're looking for will go in <a href=\"https://lean-reference-manual-review.netlify.app/the-lean-language/module-contents/\">3.3</a>, which will have a general subsection on how to interpret signatures. This is because signatures are very consistent between the various kinds of declarations, so I'd like to explain them in one place along with the principle \"parameters on the left of the colon are in scope in the whole declaration. Given those parameters' local context, the type to the right of the colon describes the thing being declared\" and then cross-reference them from the descriptions of each type of declaration.</p>\n<p>The sections that are mostly grammar specs will also include proper textual descriptions.</p>",
        "id": 486648568,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1733560347
    },
    {
        "content": "<p>I finished reading through Sections 1.1 to 3.2, \"The Type System\", and I want to say I really liked the new reference, and I now know a lot more about how Lean actually works than I previously did. I did find a couple typos and I do have a few questions (mostly minor nitpicks). Should I make a PR on github for typos (and if so, how should it be split up), or should I post here? Should I post my questions here as well?</p>",
        "id": 486649185,
        "sender_full_name": "Niels Voss",
        "timestamp": 1733560868
    },
    {
        "content": "<p>A PR for typos would be great, thanks! If they're all obvious typos (like \"the the\" or \"tpe systm\"), one PR is fine. If some of them are more stylistic or less certain, it's helpful to have them in a separate PR so that the obvious fixes can just be merged immediately and other things can support some discussion.</p>",
        "id": 486649327,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1733560987
    },
    {
        "content": "<p>Questions work well here or as issues, depending on their nature - if they're questions about the content (\"what does this sentence mean? what about this implication?\") then an issue would be great, because that indicates that something about the text is incomplete or confusing. If they're more general curiosity, like \"why did you do it this way?\" then I think the thread is better.</p>\n<p>But don't worry too much about it - I can make issues for things on this thread, after all! This is how you make my life easiest, but I recognize that you have other priorities too :-)</p>",
        "id": 486649495,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1733561130
    },
    {
        "content": "<p>My <code>lake build</code> doesn't seem to work when building the manual (it is giving me <code>#guard_msgs</code> errors when building Verso) so for now I'm just going to PR the typos that probably don't require testing. <del>Do you know how to represent <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{32}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">32</span></span></span></span></span></span></span></span></span></span></span></span> in Verso, as opposed to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mn>3</mn></msup><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2^32</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span><span class=\"mord\">2</span></span></span></span>, which is what it includes right now?</del> (decided to report as issue on GitHub)</p>",
        "id": 486651316,
        "sender_full_name": "Niels Voss",
        "timestamp": 1733562770
    },
    {
        "content": "<p>I just opened a bunch of issues on GitHub, sorry if it's too many right now. I'll open a few more when I get the time.</p>",
        "id": 486658702,
        "sender_full_name": "Niels Voss",
        "timestamp": 1733568831
    },
    {
        "content": "<p>It's perfect, thanks! Will review on Monday</p>",
        "id": 486658832,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1733568941
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/486646176\">said</a>:</p>\n<blockquote>\n<p>It's not implemented yet, because it seems more important to get the content written right now, but I hope to get to it relatively quickly. Would this address the concern?</p>\n</blockquote>\n<p>I think like most of the other minor feedback that I definitely agree it's lower priority than the content! So no expectations there.</p>\n<p>In terms of whether the sidebar helps -- if I visualize what you mention right, I think that sounds great, but I do think both would be nice honestly -- I think UX-wise that there's lots of precedent for \"click the heading and you change the address bar to a fragment which gets you there\", and mouse-over to hint that that's a link -- GitHub headings work this way as well.</p>\n<p>(So yeah I'd probably do both, but I think it's not a major issue of course, and having <em>some</em> way is of course nice).</p>",
        "id": 486677420,
        "sender_full_name": "Julian Berman",
        "timestamp": 1733583848
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321696\">@Julian Berman</span> Now I get what you mean! The term \"fragment\" was throwing me off.</p>\n<p>I don't want to propagate unstable links if it can be avoided, so I'd rather not base copyable links on the phrasing that happens to be used for a header today. So right now, permalinks are assigned to headers when they've been given unique internal identifiers; those headers have the kind of behavior you're describing. I think what I need to do is sit down and assign IDs to all headers, and add a pass in CI that makes sure they all have them.</p>",
        "id": 486752036,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1733649499
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"521331\">@Niels Voss</span> Thank you for the great issues!</p>",
        "id": 486752050,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1733649525
    },
    {
        "content": "<p>Can we now mention/cite the reference manual in public like on this Zulip and PA.SX?</p>",
        "id": 489258324,
        "sender_full_name": "Jason Rute",
        "timestamp": 1734361034
    },
    {
        "content": "<p>It's completely public now. Thanks for checking!</p>",
        "id": 489259796,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1734361340
    },
    {
        "content": "<p>will the manual be updated with each toolchain release (or RCs?)</p>",
        "id": 489260347,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1734361463
    },
    {
        "content": "<p>For now, it will be updated on a regular basis, at least as often as the RCs/releases. Once there's enough content, we will additionally begin taking snapshots for each release.</p>",
        "id": 489260573,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1734361524
    },
    {
        "content": "<p>Will a link be added to <a href=\"http://lean-lang.org\">lean-lang.org</a>? </p>\n<p>Maybe with a note about the relationship to the Lean 4 Manual?  I've been assuming that the Reference is intended to supercede the manual in the end.  Is that correct?</p>\n<p>Very happy about this.  It's great.</p>",
        "id": 489328044,
        "sender_full_name": "mars0i",
        "timestamp": 1734378617
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"617444\">mars0i</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/489328044\">said</a>:</p>\n<blockquote>\n<p>Will a link be added to <a href=\"http://lean-lang.org/\">lean-lang.org</a>?</p>\n</blockquote>\n<p>Yes - that should certainly be there!</p>",
        "id": 489328150,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1734378646
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"617444\">mars0i</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/489328044\">said</a>:</p>\n<blockquote>\n<p>Maybe with a note about the relationship to the Lean 4 Manual? I've been assuming that the Reference is intended to supercede the manual in the end. Is that correct?</p>\n</blockquote>\n<p>Sort of - the page marked \"manual\" before really contained a few things: a developers' guide, a language reference, a collection of documentation links (TPiL, FPiL, etc), examples, and smaller documents like the widget description. This language reference supersedes the prior one, which was the big middle part of the page. I've installed redirects from the old content of that page to the permalinks in the new one, so they'll follow along automatically. But the language reference won't have all those things - it should do one job and do it well.</p>\n<p>Once there's even more content in the reference, we'll take a look at how to improve the integration between all those documents and figure out how we ideally want everything organized. One step at a time...</p>",
        "id": 489328901,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1734378861
    },
    {
        "content": "<p>11.17.¬†Arrays says</p>\n<blockquote>\n<p>There is array literal syntax for writing strings.</p>\n</blockquote>\n<p>Should this be arrays instead of strings?</p>",
        "id": 489961812,
        "sender_full_name": "eyelash",
        "timestamp": 1734613958
    },
    {
        "content": "<p>Yes! I'm out on vacation, but I'll fix it when I get back. Thanks for catching it :)</p>",
        "id": 490103380,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1734677460
    },
    {
        "content": "<p>I'm not sure if I just have bad timing or not, but the links to some of the chapters seem to be intermittently broken. </p>\n<p>For example, starting at  <a href=\"https://lean-lang.org/doc/reference/latest\">https://lean-lang.org/doc/reference/latest</a>, clicking on \"3. The Type System\" leads to a Page not found at <a href=\"https://lean-lang.org/the-type-system/#type-system\">https://lean-lang.org/the-type-system/#type-system</a>. Oddly, the URL in the HTML points to <a href=\"https://lean-lang.org/doc/reference/latest/The-Type-System/#type-system\">https://lean-lang.org/doc/reference/latest/The-Type-System/#type-system</a>, and according to my browser network request history, that's being 301 redirected to the previous URL.</p>\n<p>Now that I've gone to the trouble of writing all that out, it seems that that specific link works again, but then links to other chapters seem to be broken for me in the same way (at the moment, the links to chapters 4. and 5. are broken). Is anyone else seeing this or is it just me?</p>\n<p>Edit: this is on Firefox 133.0.3 on macOS 15.1.1</p>",
        "id": 490219164,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1734723074
    },
    {
        "content": "<p>I just reproduced. Starting at <a href=\"https://lean-lang.org/doc/reference/latest\">https://lean-lang.org/doc/reference/latest</a> I clicked on 3. The Type System in the index on the left and it worked fine. I then went back with the browser button and clicked on  4. Source files in the index on the left, and was sent to <a href=\"https://lean-lang.org/source-files/#The-Lean-Language-Reference--Source-Files\">https://lean-lang.org/source-files/#The-Lean-Language-Reference--Source-Files</a> which is a 404. Hovering over the link instead of clicking says it points to <a href=\"https://lean-lang.org/doc/reference/latest/Source-Files/#The-Lean-Language-Reference--Source-Files\">https://lean-lang.org/doc/reference/latest/Source-Files/#The-Lean-Language-Reference--Source-Files</a> which is a different link but clicking on that seems to redirect to the earlier link which doesn't work. Now clicking on 3. The Type System doesn't work either. This on Chrome Version 130.0.6723.116 (Official Build) (64-bit) on Ubuntu.</p>",
        "id": 490219967,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1734723432
    },
    {
        "content": "<p>When I click on \"3. The Type System\", I get a 404 error (from <a href=\"https://lean-lang.org/the-type-system/#type-system\">https://lean-lang.org/the-type-system/#type-system</a>). This is on Firefox / Debian. A click on \"4. Source Files\" brings me to a page listing contents.</p>",
        "id": 490221193,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1734724043
    },
    {
        "content": "<p>... but clicking on \"4.2 Module Contents\" (on the left) gives again a 404 (<a href=\"https://lean-lang.org/source-files/module-contents/#The-Lean-Language-Reference--Source-Files--Module-Contents\">https://lean-lang.org/source-files/module-contents/#The-Lean-Language-Reference--Source-Files--Module-Contents</a>).</p>",
        "id": 490221318,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1734724099
    },
    {
        "content": "<p>Cc <span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span></p>",
        "id": 490238398,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1734733156
    },
    {
        "content": "<p>Thanks for the reports and the @-mention - I've been AFK with family, but I'm looking into it now and will report back</p>",
        "id": 490377257,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1734862920
    },
    {
        "content": "<p>All right, I've got a workaround in place that seems to have fixed things (it was intermittently failing before, but I've just clicked a lot of links and they were all OK). Thanks again for letting me know!</p>",
        "id": 490384991,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1734870024
    },
    {
        "content": "<p>Thanks! However, I'm still seeing an issue on \"6.   Type Classes\", unfortunately, even after force-refreshing a few times.</p>",
        "id": 490385911,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1734870911
    },
    {
        "content": "<p>Hmm, I can't reproduce it from here. I wonder if the CDN is caching the bad response. </p>\n<p>What happens if you click <a href=\"https://lean-lang.org/doc/reference/latest/find/?domain=Verso.Genre.Manual.section&amp;name=type-classes\">this link</a>, <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>?</p>",
        "id": 490386050,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1734871034
    },
    {
        "content": "<p>Clicking your link works for me! I'll wait a few more hours and hopefully things will work by then.</p>",
        "id": 490386275,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1734871238
    },
    {
        "content": "<p>One more experiment: what if you go to the root of the manual, then click the link in the left?</p>",
        "id": 490386332,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1734871321
    },
    {
        "content": "<p>The type classes chapter works now from the root of the manual! I clicked around on the other chapters and got a handful of errors, but after hitting back and clicking again they all seem to be working for now. Thanks again!</p>",
        "id": 490386520,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1734871525
    },
    {
        "content": "<p>Thanks for the help diagnosing it!</p>",
        "id": 490386585,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1734871575
    },
    {
        "content": "<p>In section 3.4.2.4 I read</p>\n<blockquote>\n<p>When the new structure extends existing structures, the new structure's constructor takes the existing structure's information as additional arguments. Typically, this is in the form of a constructor parameter for each parent structure type. If the parents' fields overlap, however, then the subset of non-overlapping fields from one or more of the parents is included instead to prevent duplicating field information.</p>\n</blockquote>\n<p>and I have troubles to understand what the final \"instead\" refers to. I would say that including a non-overlapping field would not, at any rate, cause duplication and that including it is in accordance with the second sentence (hence my difficulty with the \"instead\"). What am I reading wrong?</p>\n<p>PS: Is this the right place/stream where asking this kind of questions?</p>",
        "id": 494012274,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1736973610
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> Here's how it's supposed to mean:</p>\n<p>Suppose you have</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">B</span>\n</code></pre></div>\n<p>If <code>A</code> and <code>B</code> didn't share the field <code>a</code>, then <code>C</code> would be represented like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">toA</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">toB</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>However, since they share fields, instead <code>C</code> is represented like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">toA</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>and it derives a <code>toB</code> projection:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"bp\">.</span><span class=\"n\">toB</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">self</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">toA</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">toA</span><span class=\"bp\">.</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 494021679,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736977091
    },
    {
        "content": "<p>Oh, I see! So the \"constructor parameter for a structure\" is the whole <code>Structure.mk</code> with its fields embedded, whereas if some overlapping occurs, one needs to populate the explicit fields. Thanks!</p>",
        "id": 494022010,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1736977240
    },
    {
        "content": "<p>Yeah, it tries to embed parents if possible in <code>mk</code>, and when it's not possible it embeds fields.</p>\n<p>If instead Lean 4 used a \"flat structures\" approach (like in Lean 3) it would not embed parents, and instead it would always embed fields:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 494022731,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736977558
    },
    {
        "content": "<p>Great, thanks!</p>",
        "id": 494022824,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1736977590
    },
    {
        "content": "<p>I was reading \"constructor parameter for a structure\" to mean \"constructor parametere for each field of a structure\", forcing the flatness approach in my mind.</p>",
        "id": 494022956,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1736977647
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> I believe that <a href=\"https://github.com/leanprover/reference-manual/pull/254\">https://github.com/leanprover/reference-manual/pull/254</a> clarifies the text. Thanks for pointing this out!</p>",
        "id": 494241207,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1737065061
    },
    {
        "content": "<p>Yes, I find this much clearer. Thank you for this beautiful book.</p>",
        "id": 494317027,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1737105982
    },
    {
        "content": "<p>(I don't see an issue for this, which I'm happy to open if the answer is \"yes\") -- Is describing Lean's language server functionality a topic that the reference manual might cover?</p>\n<p>In particular at this very moment I want to interlink to Lean's docs on semantic tokens, and I know <a href=\"https://lean-lang.org/lean4/doc/semantic_highlighting.html?highlight=semantic#semantic-highlighting\">https://lean-lang.org/lean4/doc/semantic_highlighting.html?highlight=semantic#semantic-highlighting</a> exists, but perhaps a general section covering how Lean's LS implements various language server protocol functionality is a broader topic worth covering.</p>",
        "id": 494412878,
        "sender_full_name": "Julian Berman",
        "timestamp": 1737137146
    },
    {
        "content": "<p>That could certainly be in scope in principle, but I don't expect that topic to be at the top of the priority list anytime soon. Very few people implement editor plugins, and I'm prioritizing topics that deliver the most benefit to the most people.</p>",
        "id": 494413278,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1737137296
    },
    {
        "content": "<p>Yes 100% understandable of course. Is it high enough to warrant filing at least or low enough that realistically it's not useful to have on the list until/unless some other use case comes up? (For my part I honestly find the LSP parts of Lean easy enough that I'm fine reading the source still so I'm not personally clamoring for this, it just occurred to me anyhow to ask.)</p>",
        "id": 494413557,
        "sender_full_name": "Julian Berman",
        "timestamp": 1737137412
    },
    {
        "content": "<p>I think it's fine to have an issue for this, if only so people can search for it and see that it's not likely in the near future</p>",
        "id": 494413631,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1737137450
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 494413678,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1737137471
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/494413278\">said</a>:</p>\n<blockquote>\n<p>That could certainly be in scope in principle, but I don't expect that topic to be at the top of the priority list anytime soon. Very few people implement editor plugins, and I'm prioritizing topics that deliver the most benefit to the most people.</p>\n</blockquote>\n<p>I would like to bump this request since obscure topics like this and FFI are relatively easy for AI tools to implement (code isn't that complicated, but lots of background knowledge required), and encourages people to build more tools. This of course depends on how you feel about the ability of AI tools, but I've found them helpful in this regard.</p>",
        "id": 494414995,
        "sender_full_name": "Alok Singh",
        "timestamp": 1737137992
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/reference-manual/issues/255\">https://github.com/leanprover/reference-manual/issues/255</a></p>",
        "id": 494415983,
        "sender_full_name": "Julian Berman",
        "timestamp": 1737138359
    },
    {
        "content": "<p>Regardless of how easy it is to get something auto-generated (I haven't had good luck at the level that I think <span class=\"user-mention\" data-user-id=\"321696\">@Julian Berman</span> is describing, vs smaller docstring-scale prose which seems to be promising), it'd still require time to set up the workflow to make it, implement tests and checked examples to keep it up to date, and review it for accuracy and comprehensiveness. It's more important to get topics of wider interest that essentially every Lean user will have a use for done first.</p>",
        "id": 494416837,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1737138635
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> inspired by the very useful language reference, I've tried to create a copy which would contain most mathlib tactics. Immediately I've stumbled on technical limitations, which I'm now \"solving\" with</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">maxHeartbeats</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">maxRecDepth</span><span class=\"w\"> </span><span class=\"mi\">100000000000000000</span>\n</code></pre></div>\n<p>I only have about 30 <code>:::tactic</code> statements in a file, which doesn't seem unreasonable. Do you think this is something that will be fixed in a more mature version of Verso+Lean-Language-Reference or will this be an inherit feature of how you've implemented the custom parsers for this project?</p>\n<p>Also, there is no option to fold/unfold a <code>:::tactic</code> block (yet), is there?</p>",
        "id": 495757882,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1737738523
    },
    {
        "content": "<p>I was just reading the <a href=\"https://lean-lang.org/doc/reference/latest/find/?domain=Verso.Genre.Manual.section&amp;name=if-then-else\">if-then-else</a> page and noticed that in the \"Checking Array Bounds\" example also <a href=\"https://github.com/leanprover/reference-manual/blob/13e26c8e838ab008f80445e5c9d7da2f701d5dd4/Manual/Terms.lean#L1108\">this last code piece</a> has an error that seems unintended. (It does not make the step <code>¬¨xs.size ‚â• 3 ‚ä¢ 2 &lt; xs.size</code>.) I thought verso would check/catch such things when generating HTML because <code>error=false</code> is the default for all <code>lean</code> blocks?</p>",
        "id": 495791994,
        "sender_full_name": "Malvin Gattinger",
        "timestamp": 1737752365
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/495757882\">said</a>:</p>\n<blockquote>\n<p>I only have about 30 <code>:::tactic</code> statements in a file, which doesn't seem unreasonable. Do you think this is something that will be fixed in a more mature version of Verso+Lean-Language-Reference or will this be an inherit feature of how you've implemented the custom parsers for this project?</p>\n</blockquote>\n<p>This is definitely something I've seen, but usually not for such a small file. In the end, it'd mostly depend on the complexity of the code examples being rendered. I believe this is fixable, in part by improving the code that renders Lean syntax and in part by improving Verso's integration with incremental processing of Lean files, but fixing it right now is taking a back seat to writing more content.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/495757882\">said</a>:</p>\n<blockquote>\n<p>Also, there is no option to fold/unfold a <code>:::tactic</code> block (yet), is there?</p>\n</blockquote>\n<p>I see them locally:<br>\n<a href=\"/user_uploads/3121/CMtODTfFzu9olyCXlLozCJDZ/Screenshot-2025-01-24-at-23.05.10.png\">Screenshot 2025-01-24 at 23.05.10.png</a><br>\n<a href=\"/user_uploads/3121/BaFbLkL9fHms50buZ24h3N1O/Screenshot-2025-01-24-at-23.05.29.png\">Screenshot 2025-01-24 at 23.05.29.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/CMtODTfFzu9olyCXlLozCJDZ/Screenshot-2025-01-24-at-23.05.10.png\" title=\"Screenshot 2025-01-24 at 23.05.10.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1494x984\" src=\"/user_uploads/thumbnail/3121/CMtODTfFzu9olyCXlLozCJDZ/Screenshot-2025-01-24-at-23.05.10.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/BaFbLkL9fHms50buZ24h3N1O/Screenshot-2025-01-24-at-23.05.29.png\" title=\"Screenshot 2025-01-24 at 23.05.29.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1494x886\" src=\"/user_uploads/thumbnail/3121/BaFbLkL9fHms50buZ24h3N1O/Screenshot-2025-01-24-at-23.05.29.png/840x560.webp\"></a></div><p>Have I misunderstood what you're asking for?</p>",
        "id": 495800758,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1737756423
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"422703\">Malvin Gattinger</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/495791994\">said</a>:</p>\n<blockquote>\n<p>I was just reading the <a href=\"https://lean-lang.org/doc/reference/latest/find/?domain=Verso.Genre.Manual.section&amp;name=if-then-else\">if-then-else</a> page and noticed that in the \"Checking Array Bounds\" example also <a href=\"https://github.com/leanprover/reference-manual/blob/13e26c8e838ab008f80445e5c9d7da2f701d5dd4/Manual/Terms.lean#L1108\">this last code piece</a> has an error that seems unintended. (It does not make the step <code>¬¨xs.size ‚â• 3 ‚ä¢ 2 &lt; xs.size</code>.) I thought verso would check/catch such things when generating HTML because <code>error=false</code> is the default for all <code>lean</code> blocks?</p>\n</blockquote>\n<p>You're absolutely right, and this is disconcerting. I'll investigate! This particular error is fixed now, at least.</p>\n<p>Thank you very much!</p>",
        "id": 495803308,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1737757626
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> thanks for the explanation, that makes sense. I think some docstrings of mathlib tactics have examples which do not parse/elaborate correctly, that might definitely add to the heartbeats.</p>\n<p>What I meant is the folding/unfolding in the final HTML/CSS. If there already was an option to make them fold like examples to, I would have use that</p>\n<p><a href=\"/user_uploads/3121/gAjCaF_9Ta6VxxnBdD2gYTqm/Screenshot-2025-01-25-at-00.38.28.png\">Screenshot 2025-01-25 at 00.38.28.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/gAjCaF_9Ta6VxxnBdD2gYTqm/Screenshot-2025-01-25-at-00.38.28.png\" title=\"Screenshot 2025-01-25 at 00.38.28.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1546x1486\" src=\"/user_uploads/thumbnail/3121/gAjCaF_9Ta6VxxnBdD2gYTqm/Screenshot-2025-01-25-at-00.38.28.png/840x560.webp\"></a></div>",
        "id": 495810601,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1737761930
    },
    {
        "content": "<p>Ahh, that makes sense!</p>\n<p>To reduce the work done rendering docstrings, you can turn off the heuristics that try to understand code blocks. There's an option for that (I can look it up when I'm at the computer again).</p>\n<p>As far as collapsible text, I get it. Right now, there's no option. I hope that some of the long text will be on its way out of docstrings, because hovers are a terrible place for reading involved paragraphs! I think a link to a manual with appropriate context is better in the long run. But we're not there yet. </p>\n<p>In the meantime, you can make your own variant of the Verso docstring renderer and use it - that's the good thing about an extensible system. Ironically, that process is not yet so well documented - please feel free to ask questions here!</p>",
        "id": 495851037,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1737794715
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> </p>\n<p>The concept referred to as an \"inductive family\" in TPiL seems to be called an \"indexed family\" in the language reference. I believe these refer to the same thing. Could you consider unifying the terminology? (This inconsistency in terminology has caused some confusion within the Japanese Lean community.)</p>\n<p>TPiL: <a href=\"https://lean-lang.org/theorem_proving_in_lean4/inductive_types.html#inductive-families\">https://lean-lang.org/theorem_proving_in_lean4/inductive_types.html#inductive-families</a><br>\nReference: <a href=\"https://lean-lang.org/doc/reference/latest//The-Type-System/Inductive-Types/#inductive-datatypes-parameters-and-indices\">https://lean-lang.org/doc/reference/latest//The-Type-System/Inductive-Types/#inductive-datatypes-parameters-and-indices</a></p>",
        "id": 496343829,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1738073421
    },
    {
        "content": "<p>Unified terminology is a good thing!</p>\n<p>TPiL also uses the terminology \"indexed family of types\" in that very section.</p>\n<p>Issue: <a href=\"https://github.com/leanprover/reference-manual/issues/262\">https://github.com/leanprover/reference-manual/issues/262</a></p>",
        "id": 496345020,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738073739
    },
    {
        "content": "<p>Is the list in <a href=\"https://lean-lang.org/doc/reference/latest/find/?domain=Verso.Genre.Manual.section&amp;name=inductive-types-runtime-special-support\">https://lean-lang.org/doc/reference/latest/find/?domain=Verso.Genre.Manual.section&amp;name=inductive-types-runtime-special-support</a> exhaustive? I was under the impression that <code>Int</code> also has special support</p>",
        "id": 496460502,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1738119139
    },
    {
        "content": "<p>Thanks for pointing out this oversight! It's been fixed in the development repository and that'll be part of the imminent release.</p>",
        "id": 496478389,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738131705
    },
    {
        "content": "<p>Could the repo's <a href=\"/user_uploads/3121/ko4UzQMXDgYf2QN2-fEmf7zC/image.png\">\"About\"</a> link to the webpage?</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/ko4UzQMXDgYf2QN2-fEmf7zC/image.png\" title='\"About\"'><img data-original-content-type=\"image/png\" data-original-dimensions=\"397x98\" src=\"/user_uploads/thumbnail/3121/ko4UzQMXDgYf2QN2-fEmf7zC/image.png/840x560.webp\"></a></div>",
        "id": 496970654,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1738318025
    },
    {
        "content": "<p>Done! Thanks!</p>",
        "id": 496971900,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738318418
    },
    {
        "content": "<p>In 13.4 Defining New Syntax, it's written</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">parser</span><span class=\"w\"> </span><span class=\"n\">sets</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\">¬†</span><span class=\"ss\">`info</span><span class=\"bp\">`</span><span class=\"w\">¬†</span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\">¬†</span><span class=\"ss\">`none</span><span class=\"bp\">`.</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">parser</span><span class=\"w\"> </span><span class=\"n\">sets</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\">¬†</span><span class=\"ss\">`info</span><span class=\"bp\">`</span><span class=\"w\">¬†</span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\">¬†</span><span class=\"ss\">`none</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">position</span><span class=\"w\"> </span><span class=\"n\">retrieval</span><span class=\"w\"> </span><span class=\"n\">continuing</span><span class=\"w\"> </span><span class=\"n\">recursively</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 496981828,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1738321439
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> fixed this last week, and the fix will be in the imminent release. Thanks!</p>",
        "id": 497010460,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738331163
    },
    {
        "content": "<p>It was lucky that the text was not</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">parser</span><span class=\"w\"> </span><span class=\"n\">sets</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\">¬†</span><span class=\"ss\">`info</span><span class=\"bp\">`</span><span class=\"w\">¬†</span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\">¬†</span><span class=\"ss\">`none</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">position</span><span class=\"w\"> </span><span class=\"n\">retrieval</span><span class=\"w\"> </span><span class=\"n\">continuing</span><span class=\"w\"> </span><span class=\"n\">recursively</span><span class=\"bp\">.</span>\n<span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">parser</span><span class=\"w\"> </span><span class=\"n\">sets</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\">¬†</span><span class=\"ss\">`info</span><span class=\"bp\">`</span><span class=\"w\">¬†</span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\">¬†</span><span class=\"ss\">`none</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">position</span><span class=\"w\"> </span><span class=\"n\">retrieval</span><span class=\"w\"> </span><span class=\"n\">continuing</span><span class=\"w\"> </span><span class=\"n\">recursively</span><span class=\"bp\">.</span>\n<span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">parser</span><span class=\"w\"> </span><span class=\"n\">sets</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\">¬†</span><span class=\"ss\">`info</span><span class=\"bp\">`</span><span class=\"w\">¬†</span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\">¬†</span><span class=\"ss\">`none</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">position</span><span class=\"w\"> </span><span class=\"n\">retrieval</span><span class=\"w\"> </span><span class=\"n\">continuing</span><span class=\"w\"> </span><span class=\"n\">recursively</span><span class=\"bp\">.</span>\n<span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">parser</span><span class=\"w\"> </span><span class=\"n\">sets</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\">¬†</span><span class=\"ss\">`info</span><span class=\"bp\">`</span><span class=\"w\">¬†</span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\">¬†</span><span class=\"ss\">`none</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">position</span><span class=\"w\"> </span><span class=\"n\">retrieval</span><span class=\"w\"> </span><span class=\"n\">continuing</span><span class=\"w\"> </span><span class=\"n\">recursively</span><span class=\"bp\">.</span>\n<span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 497017995,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1738333442
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"416280\">@Max Nowak üêâ</span> , <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span>  - the upcoming release has a version of the index that's a live fuzzy search box. If you'd like to give it a spin, this <a href=\"https://pr-270--lean-reference-manual-review.netlify.app/\">recent preview</a> has it enabled - it's the box labeled \"Jump to\" in the upper right. Does this match what you were looking for?</p>",
        "id": 497108423,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738367627
    },
    {
        "content": "<p>I tried to look in <a href=\"https://lean-lang.org/doc/reference/latest/\">#ref</a> for information about how <code>import</code> statements are stored in the AST, but could not find it. Should such information be there or is it out of scope?</p>",
        "id": 497201659,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1738446816
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Ya√´l Dillies</span>, It's easier to look in the <code>recent preview</code> ref, linked in the previous post ^^^, there is a search bar, (yay!). According to <a href=\"https://pr-270--lean-reference-manual-review.netlify.app//Source-Files/Files/#module-headers\">the grammar</a>, <code>imports</code> are located inside of <code>headers</code>, as implemented in <a href=\"https://github.com/leanprover/lean4/blob/128a1e6b0a82718382f9c39c79be44ff3284547c/src/Lean/Parser/Module.lean#L16-L16\">the  parser</a></p>",
        "id": 497203427,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1738448343
    },
    {
        "content": "<p>Great! I guess all I need now is knowing how to retrieve this information and then I can implement a code action for <code>#min_imports</code></p>",
        "id": 497203740,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1738448564
    },
    {
        "content": "<p>If you need position information for the imports, I think that you will have to parse the imports again.</p>",
        "id": 497204065,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1738448857
    },
    {
        "content": "<p>You can look at <code>parseImports'</code>, I think.</p>",
        "id": 497204078,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1738448876
    },
    {
        "content": "<p>The header linter should do something like this and also the minImports <em>linter</em>, not the command.</p>",
        "id": 497204149,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1738448920
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> this is probably low priority, but it seems that in-text cross references get html anchors with terrible names, such as: <a href=\"https://lean-lang.org/doc/reference/latest/Build-Tools-and-Distribution/Lake/#--tech-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next\">https://lean-lang.org/doc/reference/latest/Build-Tools-and-Distribution/Lake/#--tech-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next-next</a></p>\n<p>Would you like me to create an issue?</p>",
        "id": 497459518,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1738595078
    },
    {
        "content": "<p>It's a known thing that will be fixed in due time</p>",
        "id": 497459949,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738595176
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 497459972,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738595182
    },
    {
        "content": "<p>i'm reading the new docs for <code>partial_fixpoint</code>, and have a small suggestion about the following part:</p>\n<blockquote>\n<p>An expression is in <em>tail position</em> in the function body if it is:</p>\n<ul>\n<li>\n<p>the function body itself,</p>\n</li>\n<li>\n<p>the branches of a <a href=\"https://lean-lang.org/doc/reference/latest/Terms/Pattern-Matching/#Lean___Parser___Term___match\"><code>match</code></a> expression that is in tail position,</p>\n</li>\n<li>\n<p>the branches of an <a href=\"https://lean-lang.org/doc/reference/latest/Terms/Conditionals/#termIfThenElse\"><code>if</code></a> expression that is in tail position, and</p>\n</li>\n<li>\n<p>the body of a <code>let</code> expression that is in tail position.</p>\n</li>\n</ul>\n</blockquote>\n<p>this enumeration starts as \"an expression [...] is tail position if any of the following are true:\", but ends as if started by \"the following kinds of expressions are in tail position:\". As a result, a reader might expect something to be <em>both</em> a branch of an if-expression <em>and</em> the body of a <em>let</em> expression...</p>\n<p>I think getting this wording consistent is a nice improvement... should i open an issue?</p>",
        "id": 497460055,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1738595206
    },
    {
        "content": "<p>Sure!</p>",
        "id": 497460242,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738595251
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 497460260,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738595254
    },
    {
        "content": "<p>Thanks for all this new material by the way. I've been wanting good documentation on lake for a while, and it's super helpful we have it now.</p>",
        "id": 497460307,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1738595266
    },
    {
        "content": "<p>This isn't all me - <span class=\"user-mention\" data-user-id=\"470149\">@Joachim Breitner</span> wrote the partial_fixpoint and wf-rec chapters, and <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> spent a bunch of time helping me with the Lake one. They deserve thanks too!</p>",
        "id": 497460607,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738595331
    },
    {
        "content": "<p>Then thanks also to them!</p>",
        "id": 497460729,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1738595361
    },
    {
        "content": "<p>(not to mention lots of great feedback both internally in the FRO and from here - thank you all!)</p>",
        "id": 497461566,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738595547
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/reference-manual/issues/281\">reference-manual#281</a></p>",
        "id": 497465249,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1738596320
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> </p>\n<p>How should I cite the <em>Language Reference</em>? In particular, how should I write the author's name? Should I use <em>David Thrane Christiansen</em>, or should it be <em>Lean FRO</em>?</p>",
        "id": 497918400,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1738768854
    },
    {
        "content": "<p>I'll get back to you on that one.</p>",
        "id": 497970597,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738784632
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"626349\">@Asei Inoue</span> Please cite the author as \"The Lean Developers\" - thanks for checking!</p>",
        "id": 498478435,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1738999774
    },
    {
        "content": "<p>is there a standard bibtex entry?</p>",
        "id": 498586661,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1739095979
    },
    {
        "content": "<p>There is not yet one</p>",
        "id": 498946925,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1739260088
    },
    {
        "content": "<p>Today, I wondered: inside a <code>namespace Foo</code>, does <code>scoped instance : True := sorry</code> do the same as <code>scoped[Foo] instance : True := sorry</code>. (I assume the answer is yes.)<br>\nThe <a href=\"https://lean-lang.org/doc/reference/latest//Source-Files/Module-Contents/#Lean___Parser___Term___attrKind-next-next\">section on scoped</a> does not seem to answer this at all.</p>",
        "id": 504584947,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1741614017
    },
    {
        "content": "<p><code>scoped[Foo]</code> is mathlib syntax, in <code>Mathlib/Tactic/ScopedNS.lean</code></p>\n<p>I think the answer is ~yes, but there are probably small differences</p>",
        "id": 504585903,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1741614211
    },
    {
        "content": "<p>So I should have done <code>#find_syntax</code> first (and realised this was not a question about core) - thanks!</p>",
        "id": 504596491,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1741616349
    },
    {
        "content": "<p>Syntax errors are shown with a stop sign that partially covers the thing that is causing the syntax error: <a href=\"/user_uploads/3121/v2azPA8w_Ag_E1AQJ1V6cTtQ/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/v2azPA8w_Ag_E1AQJ1V6cTtQ/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"480x270\" src=\"/user_uploads/thumbnail/3121/v2azPA8w_Ag_E1AQJ1V6cTtQ/image.png/840x560.webp\"></a></div>",
        "id": 505248485,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1741813160
    },
    {
        "content": "<p>it's also not clear by looking at this whether there is another character hiding underneath the stop sign</p>",
        "id": 505248559,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1741813186
    },
    {
        "content": "<p>In ‚ÄúInductive Types‚Äù there's an <a href=\"https://lean-lang.org/doc/reference/latest//The-Type-System/Inductive-Types/#iota-reduction\">explicit part</a> for the Œπ-reduction. In contrast, in ‚ÄúQuotients‚Äù the reduction rule is mentioned in different parts of the text. Moreover, the quotient reduction rule does not have a name and is not listed in <a href=\"https://lean-lang.org/doc/reference/latest/The-Type-System/\">https://lean-lang.org/doc/reference/latest/The-Type-System/</a>.</p>",
        "id": 505253810,
        "sender_full_name": "suhr",
        "timestamp": 1741814832
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/505248559\">said</a>:</p>\n<blockquote>\n<p>it's also not clear by looking at this whether there is another character hiding underneath the stop sign</p>\n</blockquote>\n<p>Thanks! We'll take a look at improving that.</p>",
        "id": 505414428,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1741870771
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394485\">suhr</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/505253810\">said</a>:</p>\n<blockquote>\n<p>In ‚ÄúInductive Types‚Äù there's an <a href=\"https://lean-lang.org/doc/reference/latest//The-Type-System/Inductive-Types/#iota-reduction\">explicit part</a> for the Œπ-reduction. In contrast, in ‚ÄúQuotients‚Äù the reduction rule is mentioned in different parts of the text. Moreover, the quotient reduction rule does not have a name and is not listed in <a href=\"https://lean-lang.org/doc/reference/latest/The-Type-System/\">https://lean-lang.org/doc/reference/latest/The-Type-System/</a>.</p>\n</blockquote>\n<p>Thanks! <a href=\"https://github.com/leanprover/reference-manual/issues/343\">Tracking issue</a></p>",
        "id": 505415162,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1741870945
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> Thanks again for the feedback. This is fixed on <code>main</code>:</p>\n<p><a href=\"/user_uploads/3121/39502MEPM8A7605QHFYV8182/Screenshot-2025-03-14-at-09.46.30.png\">Screenshot 2025-03-14 at 09.46.30.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/39502MEPM8A7605QHFYV8182/Screenshot-2025-03-14-at-09.46.30.png\" title=\"Screenshot 2025-03-14 at 09.46.30.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1362x372\" src=\"/user_uploads/thumbnail/3121/39502MEPM8A7605QHFYV8182/Screenshot-2025-03-14-at-09.46.30.png/840x560.webp\"></a></div>",
        "id": 505616644,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1741942070
    },
    {
        "content": "<p><a href=\"https://lean-lang.org/doc/reference/latest//Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing\">Here</a> in the discussion of the <code>node</code> constructor for <code>Lean.Syntax</code> we see \"(Remark: the node constructor did not have an <code>info</code> field in previous versions. this caused a bug in the interactive widgets, where the popup for <code>a + b</code> was the same as for <code>a</code>. ...\" Or at least<br>\nI think it says that: the two <code>a</code>s are in different fonts, and one is hoverable whereas the other isn't. Is this intentional? (i.e. one is supposed to be some kind of atom and the other isn't?). I don't understand enough about what is going on to know whether this is supposed to be the point, or an oversight.</p>",
        "id": 505939028,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742117043
    },
    {
        "content": "<p>There are universe inconsistencies in the two examples in <a href=\"https://lean-lang.org/doc/reference/latest//Elaboration-and-Compilation/#elaboration-results\">section 2.4</a>. In the \"Equational Lemmas\" example we're shown some code with no universes mentioned, and the equational lemmas are peppered with references to universe <code>u_1</code>, except for <code>thirdOfFive.eq_1</code> which is all about universe <code>u</code>. (except for when you hover, in which case you see <code>u_1</code> again). Conversely the other example, \"Recursive Equational Lemmas\", again is a discussion about code written where no universes are mentioned,  but all the equation lemmas use universe <code>u</code> consistently in the text (although all hovers talk about universe <code>u_1</code>). I don't know if this is confusing for new users, I guess my instinct is to make it consistent (and consistency within the first example would surely be desirable rather than <code>thirdOfFive.eq_1</code> being the odd one out).</p>",
        "id": 505943368,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742120691
    },
    {
        "content": "<p>I think the first mention of lean4checker is a couple of paras before section 2.4.1? If I'm right, maybe there should be a link?</p>",
        "id": 505943498,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742120783
    },
    {
        "content": "<p>In the description of <a href=\"https://lean-lang.org/doc/reference/latest//The-Type-System/Functions/#funext\">funext</a> in section 3.1.3, I can hover over pretty much everything in the blue box containing the statement of the theorem (including the left and right side of colons) except for <code>Sort u</code>, which randomly doesn't work. Is this expected?</p>\n<p>In the description, it says \"note the <code>Quot.sound</code> in the proof\", but I have no idea how to see the proof within the context of the reference manual.</p>",
        "id": 505944440,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742121580
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>! I'll get back to you with details tomorrow!</p>",
        "id": 505945636,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1742122503
    },
    {
        "content": "<p>Let me know if you'd rather I be opening issues.</p>",
        "id": 505946151,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742122861
    },
    {
        "content": "<p>Please do what you find easiest - when I'm on the computer tomorrow I'll go through your comments here and either fix them immediately or make issues for them.</p>",
        "id": 505946421,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1742123086
    },
    {
        "content": "<p>Thanks again!</p>",
        "id": 505946429,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1742123092
    },
    {
        "content": "<p>OK perhaps in the future I'll open issues. I stopped for now because I have other things to do today. In general I really love the popups (is that the right word?) on hover, they seem to be super-effective here. They are sufficiently sparse that you don't get that phenomenon which I sometimes see in Lean code where wherever you put the cursor some (possibly huge and irrelevant) text window appears, but conversely it is a super-efficient way to get information without even having to click (and then click back).</p>",
        "id": 505947256,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742123826
    },
    {
        "content": "<p>Thank you again for the feedback!</p>",
        "id": 505948189,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1742124620
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/505939028\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://lean-lang.org/doc/reference/latest//Notations-and-Macros/Defining-New-Syntax/#Lean___Syntax___missing\">Here</a> in the discussion of the <code>node</code> constructor for <code>Lean.Syntax</code> we see \"(Remark: the node constructor did not have an <code>info</code> field in previous versions. this caused a bug in the interactive widgets, where the popup for <code>a + b</code> was the same as for <code>a</code>. ...\" Or at least<br>\nI think it says that: the two <code>a</code>s are in different fonts, and one is hoverable whereas the other isn't. Is this intentional? (i.e. one is supposed to be some kind of atom and the other isn't?). I don't understand enough about what is going on to know whether this is supposed to be the point, or an oversight.</p>\n</blockquote>\n<p>I'm in the process of going through every single documented item shown in the manual to make their style consistent and add the ones that are missing. Docstrings are in Markdown right now, which doesn't provide a way to indicate whether inline code is intended to be valid Lean or not, so the manual essentially guesses, applying various heuristics. What you're seeing there is a failure mode of that process, and part of my review here is adjusting them so that it succeeds. I did that docstring today, so this issue will be gone very soon.</p>",
        "id": 506250356,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1742242100
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/505943368\">said</a>:</p>\n<blockquote>\n<p>There are universe inconsistencies in the two examples in <a href=\"https://lean-lang.org/doc/reference/latest//Elaboration-and-Compilation/#elaboration-results\">section 2.4</a>. In the \"Equational Lemmas\" example we're shown some code with no universes mentioned, and the equational lemmas are peppered with references to universe <code>u_1</code>, except for <code>thirdOfFive.eq_1</code> which is all about universe <code>u</code>. (except for when you hover, in which case you see <code>u_1</code> again). Conversely the other example, \"Recursive Equational Lemmas\", again is a discussion about code written where no universes are mentioned, but all the equation lemmas use universe <code>u</code> consistently in the text (although all hovers talk about universe <code>u_1</code>). I don't know if this is confusing for new users, I guess my instinct is to make it consistent (and consistency within the first example would surely be desirable rather than <code>thirdOfFive.eq_1</code> being the odd one out).</p>\n</blockquote>\n<p>Getting these to all show up consistently will require a bit of work with the delaborator, getting it to show universe variables in just the right way. This kind of thing is indeed important, but I think there's higher-priority things to improve at the moment, so I created a <a href=\"https://github.com/leanprover/reference-manual/issues/354\">tracking issue</a>. Thanks!</p>",
        "id": 506250932,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1742242314
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/505943498\">said</a>:</p>\n<blockquote>\n<p>I think the first mention of lean4checker is a couple of paras before section 2.4.1? If I'm right, maybe there should be a link?</p>\n</blockquote>\n<p>It's not really thought into the manual at the moment, but it should be. <a href=\"https://github.com/leanprover/reference-manual/issues/355\">Issue for tracking</a></p>",
        "id": 506251252,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1742242417
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/505944440\">said</a>:</p>\n<blockquote>\n<p>In the description of <a href=\"https://lean-lang.org/doc/reference/latest//The-Type-System/Functions/#funext\">funext</a> in section 3.1.3, I can hover over pretty much everything in the blue box containing the statement of the theorem (including the left and right side of colons) except for <code>Sort u</code>, which randomly doesn't work. Is this expected?</p>\n<p>In the description, it says \"note the <code>Quot.sound</code> in the proof\", but I have no idea how to see the proof within the context of the reference manual.</p>\n</blockquote>\n<p>Two parts here:</p>\n<ol>\n<li>The lack of hovers on <code>Sort</code>, <code>Type</code>, and <code>Prop</code> is just a matter of the hover-insertion code being incomplete - more an intentional choice of priorities than an oversight _per se_. It'll get better. Thank you for being vigilant there! Universe variables are also not yet highlighted in them.</li>\n<li>The <code>funext</code> docstring itself needed revision - one principle for the review I'm doing is that all docstrings should make sense independently of the file in which they're found. <a href=\"https://github.com/leanprover/lean4/pull/7535\">This Lean PR</a> updates the text.</li>\n</ol>",
        "id": 506254220,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1742243451
    },
    {
        "content": "<p>Nice! It was really fun interacting with your manual!</p>",
        "id": 506262114,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742246091
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> The newly-released snapshot of the manual contains the updated <code>funext</code>and <code>Syntax</code> docstrings. Thanks again!</p>",
        "id": 507879276,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1742851585
    },
    {
        "content": "<p>I don't quite know where to put this, its minor and extends beyond just the reference clearly, so feel free to tell me to move it to a new thread or file a bug obviously:</p>\n<p>I was trying to answer the question \"does the <code>stop</code> tactic exist\" (side context: because I noticed we don't syntax highlight it in lean.nvim, and I see VSCode does, though VSCode's highlighting like mine contains things which don't exist anymore so it always requires double checking.)</p>\n<p>So I found <a href=\"https://lean-lang.org/doc/reference/latest///Tactic-Proofs/Tactic-Reference/#stop\">https://lean-lang.org/doc/reference/latest///Tactic-Proofs/Tactic-Reference/#stop</a> -- great, it exists! Then I tried it, I thought following the doc there, writing:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">stop</span>\n</code></pre></div>\n<p>and got:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"bp\">‚îî‚îÄ‚îÄ‚îÄ‚îÄ</span><span class=\"w\"> </span><span class=\"n\">unexpected</span><span class=\"w\"> </span><span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">input</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"o\">{</span><span class=\"bp\">'</span>\n</code></pre></div>\n<p>I happen to know that error message is code for \"I expect a tactic sequence and don't see one\", but is there some clearer way of specifically denoting syntax in the reference planned -- in particular I see the text say \"it's defined as <code>repeat sorry</code>\", but putting that in this spot indeed works fine -- I saw the words \"helper tactic\" but I guess that didn't signal to me \"it expects something after\".</p>\n<p>I assume longer term that maybe the reference will include BNFs or something saying the exact syntax for each tactic too?</p>",
        "id": 510374436,
        "sender_full_name": "Julian Berman",
        "timestamp": 1743860499
    },
    {
        "content": "<p>Yeah, in lean 3 this was addressed by showing the (automatically generated) BNF in the hover documentation</p>",
        "id": 510382766,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1743866505
    },
    {
        "content": "<p>Making BNFs should be possible by introspecting on the syntax declaration. Maybe I can interest <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> in taking this up?</p>",
        "id": 510382958,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1743866611
    },
    {
        "content": "<p>I know David is interested in showing BNF <span class=\"user-mention\" data-user-id=\"321696\">@Julian Berman</span>, and for tactics I imagine that it's somewhere farther along the roadmap.</p>\n<p>I'm not sure if there's some automatic system somewhere, but in the manual source code there are some hand-crafted simplified grammars, e.g. <a href=\"https://github.com/leanprover/reference-manual/blob/8bc04276e7fb1702a3789f2fb36ee5e622380e02/Manual/Language/InductiveTypes.lean#L48\">https://github.com/leanprover/reference-manual/blob/8bc04276e7fb1702a3789f2fb36ee5e622380e02/Manual/Language/InductiveTypes.lean#L48</a> appears as <a href=\"https://lean-lang.org/doc/reference/latest////The-Type-System/Inductive-Types/#inductive-declarations\">https://lean-lang.org/doc/reference/latest////The-Type-System/Inductive-Types/#inductive-declarations</a></p>\n<p>With <code>stop</code>, even if there's a parse error you can do \"go to definition\" and see</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">macro</span><span class=\"w\"> </span><span class=\"s2\">\"stop\"</span><span class=\"w\"> </span><span class=\"n\">tacticSeq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">repeat</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Possibly having it be a <code>tacticSeq</code> rather than <code>(tacticSeq)?</code> is a bug. (I think I'm tackling allowing empty tactic sequences this quarter, so it's possible it will work as a last tactic in the not-too-distant future.)</p>",
        "id": 510395212,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743875157
    },
    {
        "content": "<p>I'm definitely interested in showing the grammars!</p>\n<p>For Lean as a whole, automatically generating them really doesn't work. The problem is that the implementation of the parser doesn't necessarily match the grammar as we'd want to show it to users, because the parser takes other considerations into account. As an example, the parser accepts <code>import A.B.</code> (with the trailing <code>.</code>), even though it's not valid, with the error message generated later - this is to allow completion at that point. In other cases, two separate parsers may be implemented for something that we'd want to present to users as the \"same\" syntax.</p>\n<p>These are problems that can probably be solved. The way it's solved in the manual right now is a little DSL for writing the grammar that's checked against the parsers - this ensures that the described grammar matches the parser, but not that it fully describes all valid syntax. More can certainly be done here, especially for \"easy\" parsers that don't do anything that's too strange.</p>",
        "id": 511012166,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1744141135
    },
    {
        "content": "<p>But writing down the grammar of each tactic using the little DSL would certainly be a nice improvement!</p>",
        "id": 511012275,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1744141183
    },
    {
        "content": "<p>While I think it is great that one can manually define the grammar for complicated tactics and tactics which are doing trickery, I think it is also important to have an automatic grammar generator so that even user-written tactics (and old projects unaware of the existence of grammar functionality) get BNFs without additional work</p>",
        "id": 511080406,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744177210
    },
    {
        "content": "<p>I would rather have manual BNFs be an override over automatic BNFs, rather than requiring them to get docs</p>",
        "id": 511080516,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1744177274
    },
    {
        "content": "<p>I think we share the same dream and merely differ in our assessment of the work required to get there :)</p>",
        "id": 511197206,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1744210769
    },
    {
        "content": "<p>Is the reference offline? <a href=\"https://lean-lang.org/doc/reference/latest/\">https://lean-lang.org/doc/reference/latest/</a> gives me a 404, which is the link shown on <a href=\"https://lean-lang.org/documentation/\">https://lean-lang.org/documentation/</a> and in the sidebar of <a href=\"https://github.com/leanprover/reference-manual\">https://github.com/leanprover/reference-manual</a></p>",
        "id": 515241455,
        "sender_full_name": "Julian Berman",
        "timestamp": 1746002073
    },
    {
        "content": "<p><a href=\"https://lean-lang.org/doc/reference/latest/\">https://lean-lang.org/doc/reference/latest/</a> works for me. But <a href=\"https://lean-lang.org/doc/reference/latest\">https://lean-lang.org/doc/reference/latest</a> (without the final <code>/</code>), which is the link from the documentation page, gives me a blank page.</p>",
        "id": 515242073,
        "sender_full_name": "R√©my Degenne",
        "timestamp": 1746002248
    },
    {
        "content": "<p>Neither seem to work here.</p>",
        "id": 515242488,
        "sender_full_name": "Julian Berman",
        "timestamp": 1746002382
    },
    {
        "content": "<p>I'm investigating - thanks!</p>",
        "id": 515242512,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1746002391
    },
    {
        "content": "<p>Let's see whether that's my internet connection's fault...</p>",
        "id": 515242515,
        "sender_full_name": "Julian Berman",
        "timestamp": 1746002392
    },
    {
        "content": "<p>Looks like something went wrong with hosting, I re-ran the deploy and it seems good now</p>",
        "id": 515244744,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1746003024
    },
    {
        "content": "<p>Does it look good on your end too?</p>",
        "id": 515244767,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1746003033
    },
    {
        "content": "<p>It does, thanks for the quick fix!</p>",
        "id": 515245098,
        "sender_full_name": "Julian Berman",
        "timestamp": 1746003131
    },
    {
        "content": "<p>I appreciate you letting me know!</p>",
        "id": 515245143,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1746003146
    },
    {
        "content": "<p>(And now a totally unrelated question) -- what decides whether a type is clickable in the manual? E.g. on <a href=\"https://lean-lang.org/doc/reference/latest//Build-Tools-and-Distribution/Lake/#Lake___findModule___\">https://lean-lang.org/doc/reference/latest//Build-Tools-and-Distribution/Lake/#Lake___findModule___</a> I can click on say <code>Lake.MonadWorkspace</code> or <code>Functor</code> or <code>Option</code>, but I cannot click on e.g. <code>Lean.Name</code> or <code>Lake.Module</code> if I want to know what it is. Is that related to whether the declaration is marked public or private?</p>",
        "id": 515247575,
        "sender_full_name": "Julian Berman",
        "timestamp": 1746003818
    },
    {
        "content": "<p>Oh or does it just have to do with whether those appear somewhere in the reference, that'd make more sense. Yeah never mind!</p>",
        "id": 515247866,
        "sender_full_name": "Julian Berman",
        "timestamp": 1746003898
    },
    {
        "content": "<p>Names that occur elsewhere in the document are clickable, where \"occur\" can be \"is documented in\" or \"is defined in an example\". I'm currently working on porting _Functional Programming in Lean_ to Verso, where names will link either to the local book or to the reference, depending on where they come from.</p>",
        "id": 515251200,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1746004916
    },
    {
        "content": "<p>Some defaults for lake package configs seem to not be documented. For example, on Reservoir Toric has description \"Formalisation of toric varieties in Lean 4\" even though <a href=\"https://github.com/YaelDillies/Toric/blob/master/lakefile.toml\">the <code>description</code> field of our <code>lakefile.toml</code> was not set</a> and <a href=\"https://lean-lang.org/doc/reference/latest///Build-Tools-and-Distribution/Lake/#Lake___PackageConfig-description\">https://lean-lang.org/doc/reference/latest///Build-Tools-and-Distribution/Lake/#Lake___PackageConfig-description</a> doesn't document a default. Same thing for <code>homepage</code>.</p>",
        "id": 515659662,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1746172653
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Ya√´l Dillies</span> From that block in the manual:</p>\n<blockquote>\n<p>If a field is left out, Reservoir may use information from the package's GitHub repository to fill in details.</p>\n</blockquote>",
        "id": 515662240,
        "sender_full_name": "Mac Malone",
        "timestamp": 1746173703
    },
    {
        "content": "<p>Ah okay, great! I had completely missed that</p>",
        "id": 515662333,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1746173740
    },
    {
        "content": "<p>I like the way type classes are displayed in the reference manual.</p>\n<p>I noticed a small bug: in some cases superfluous methods are displayed (presumably because <code>Lean.Grind.CommSemiring</code> is not a projection parent of <code>Lean.Grind.CommRing</code>)</p>\n<p><a href=\"/user_uploads/3121/JiPZZA47hEf9zUGEuDc9vKUo/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/JiPZZA47hEf9zUGEuDc9vKUo/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"795x441\" src=\"/user_uploads/thumbnail/3121/JiPZZA47hEf9zUGEuDc9vKUo/image.png/840x560.webp\"></a></div>",
        "id": 526389338,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1751286414
    },
    {
        "content": "<p>Maybe a hybrid with how <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Grind.CommRing#doc\">docs#Lean.Grind.CommRing</a> is displayed? (Which correctly fades out all the fields)</p>",
        "id": 526392889,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1751287543
    },
    {
        "content": "<p>Papercut: when searching for <code>grind</code> in the reference manual, the section <code>The grind tactic</code> is the 18th returned result. Maybe <em>Section</em> results should be more likely to be at the top of the list of returned results, compared to <em>Documentation</em> results.</p>",
        "id": 528062021,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1752147811
    },
    {
        "content": "<p>does grind have its own copy of commring or is commring part of grind now?</p>",
        "id": 528065247,
        "sender_full_name": "Frederick Pu",
        "timestamp": 1752148877
    },
    {
        "content": "<p>Grind has its own copy <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Grind.CommRing#doc\">docs#Lean.Grind.CommRing</a>, while Mathlib still has <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CommRing#doc\">docs#CommRing</a>.</p>",
        "id": 528066280,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1752149169
    },
    {
        "content": "<p><a href=\"https://lean-lang.org/doc/reference/latest/The--grind--tactic/Constraint___Propagation/#The-Lean-Language-Reference--The--grind--tactic--Constraint___Propagation\">https://lean-lang.org/doc/reference/latest/The--grind--tactic/Constraint___Propagation/#The-Lean-Language-Reference--The--grind--tactic--Constraint___Propagation</a> has a nice comment on the first branch of an example, but lacked the other three, so I am adding them in <a href=\"https://github.com/leanprover/reference-manual/pull/537\">leanprover/reference-manual#537</a></p>",
        "id": 529318956,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1752770643
    },
    {
        "content": "<p>I just saw</p>\n<blockquote>\n<p>The¬†<code>[grind cases]</code>¬†attribute is¬†<strong>scoped</strong>; you can use the modifiers¬†<code>local</code>/<code>scoped</code>¬†if you only want extra splits inside a section or namespace.</p>\n</blockquote>\n<p>Shouldn't it read instead:</p>\n<blockquote>\n<p>The¬†<code>[grind cases]</code>¬†attribute is¬†<strong>global</strong>; you can use the modifiers¬†<code>local</code>/<code>scoped</code>¬†if you only want extra splits inside a section or namespace.</p>\n</blockquote>\n<p>?</p>",
        "id": 529322548,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1752771918
    },
    {
        "content": "<p>There's <a href=\"/user_uploads/3121/P7K-GwktwRRo0sQAJKiE7T4p/image.png\">a formatting issue</a> on <a href=\"https://lean-reference-manual-review.netlify.app/The-Module-System/The--meta--Phase/#The-Lean-Language-Reference--The-Module-System--The--meta--Phase\">https://lean-reference-manual-review.netlify.app/The-Module-System/The--meta--Phase/#The-Lean-Language-Reference--The-Module-System--The--meta--Phase</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/P7K-GwktwRRo0sQAJKiE7T4p/image.png\" title=\"a formatting issue\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"841x142\" src=\"/user_uploads/thumbnail/3121/P7K-GwktwRRo0sQAJKiE7T4p/image.png/840x560.webp\"></a></div>",
        "id": 529401496,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1752821736
    },
    {
        "content": "<p>What's really weird is that</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">meta3</span><span class=\"o\">]</span>\n<span class=\"n\">Semantically</span><span class=\"w\"> </span><span class=\"n\">unrelated</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">modifier</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">same</span><span class=\"w\"> </span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"mf\">3.</span>\n</code></pre></div>\n<p>doesn't appear <em>anywhere</em> in the source repo?! Am I misunderstanding something here?</p>",
        "id": 529401582,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1752821785
    },
    {
        "content": "<p>Not sure about this case but sometimes verso documents pull text from the Lean docstrings, so there can be text in the reference manual that isn't in the reference manual source</p>",
        "id": 529415673,
        "sender_full_name": "Niels Voss",
        "timestamp": 1752827737
    },
    {
        "content": "<p>It looks like deployment got stuck, should be fixed now</p>",
        "id": 529421609,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1752829634
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> </p>\n<p>I have found this. (mobile, safari)</p>\n<p><a href=\"/user_uploads/3121/IdtHvMdMWoVkVB5HPxryzV0e/image_49CC956B-EB40-4F46-B15B-11B45E930938_1753297746.jpeg\">image_49CC956B-EB40-4F46-B15B-11B45E930938_1753297746.jpeg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/IdtHvMdMWoVkVB5HPxryzV0e/image_49CC956B-EB40-4F46-B15B-11B45E930938_1753297746.jpeg\" title=\"image_49CC956B-EB40-4F46-B15B-11B45E930938_1753297746.jpeg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"1179x1757\" src=\"/user_uploads/thumbnail/3121/IdtHvMdMWoVkVB5HPxryzV0e/image_49CC956B-EB40-4F46-B15B-11B45E930938_1753297746.jpeg/840x560.webp\"></a></div>",
        "id": 530415913,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1753297774
    },
    {
        "content": "<p>broken layout of code example..</p>",
        "id": 530416016,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1753297816
    },
    {
        "content": "<p>Thanks for this. I've been unable to replicate it using an Android browser or desktop Safari's emulation of iPhone rendering, but I can get access to an iPhone tomorrow to check it out.</p>",
        "id": 530439754,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1753307640
    },
    {
        "content": "<p>sorry, I use iphone. iOS version is 18.5</p>",
        "id": 530449790,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1753313952
    },
    {
        "content": "<p>4 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/reference.20manual/with/169517286\">#general &gt; reference manual</a> by <span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span>.</p>",
        "id": 530552205,
        "sender_full_name": "Notification Bot",
        "timestamp": 1753360439
    },
    {
        "content": "<p>Yes, I had just hoped that it was easier to replicate without real hardware.</p>\n<p>I've now learned how to run an iOS simulator, and I've reproduced the issue. Thanks!</p>",
        "id": 530564294,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1753363800
    },
    {
        "content": "<p>And I have a fix that will be in the next release of the manual. Thanks again!</p>",
        "id": 530566974,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1753364559
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/530566974\">said</a>:</p>\n<blockquote>\n<p>And I have a fix that will be in the next release of the manual. Thanks again!</p>\n</blockquote>\n<p>Out of curiosity, what was causing this?</p>",
        "id": 530598251,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1753373423
    },
    {
        "content": "<p>iOS Safari has a feature to heuristically adjust font sizes that's triggered by (among other things) setting <code>display: inline-grid</code>, which is used to group expanded tactic states with their source regions in Verso's output. This can be disabled by setting:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">webkit</span><span class=\"bp\">-</span><span class=\"n\">text</span><span class=\"bp\">-</span><span class=\"n\">size</span><span class=\"bp\">-</span><span class=\"n\">adjust</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%;</span>\n<span class=\"w\">  </span><span class=\"n\">text</span><span class=\"bp\">-</span><span class=\"n\">size</span><span class=\"bp\">-</span><span class=\"n\">adjust</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%;</span>\n</code></pre></div>\n<p>for the element that's <code>inline-grid</code>.</p>",
        "id": 530601297,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1753374307
    },
    {
        "content": "<p>Chapter 4.5.1., last sentence:<br>\n\"However, not all quotients can be manually implemented.\"</p>\n<p>What does it mean, please?<br>\nIs it about implementing a quotient without an additional axiom?</p>",
        "id": 533732757,
        "sender_full_name": "Martin Dvo≈ô√°k",
        "timestamp": 1754901035
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"417654\">@Martin Dvo≈ô√°k</span> Yes, it means that some quotient types need <code>Quotient</code>.</p>\n<p>The example immediately after that sentence illustrates what a \"manual\" implementation looks like. It creates a version of the integers using a concrete <code>structure</code>, it implements <code>mk</code>, and the theorem demonstrates that it's the quotient of <code>Nat x Nat</code> modulo the relation <code>(n, k) ~ (n', k') &lt;-&gt; n + k' = n' + k</code> (the significance of this is that this is a standard construction to add additive inverses to a monoid; the pairs model formal differences). The second example shows that, even though the core <code>Int</code> is defined the way it is, it too is a quotient of <code>Nat x Nat</code>.</p>\n<p>An interesting example of a quotient that can't (currently) be manually implemented is the following: let <code>f : Nat -&gt; Nat</code> be the transition function for the Collatz sequence (the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span> defined <a href=\"https://en.wikipedia.org/wiki/Collatz_conjecture\">here</a>), define the relation <code>R : Nat x Nat -&gt; Prop</code> by <code>R x y := f x = y</code>, then let <code>R'</code> be the equivalence relation generated by <code>R</code>. We can use <code>Quotient</code> to get a quotient type for <code>Nat</code> modulo <code>R'</code>, but (I don't think) we can currently define a concrete type that manually implements the quotient. Conjecturally, <code>Fin 2</code> would work as the quotient type.</p>\n<p><em>A</em> quotient is any type that satisfies the universal property, and <code>Quotient</code> guarantees that there is <em>some</em> quotient. A manually defined quotient like <code>Z</code>/<code>Int</code> is usually better than <code>Quotient (Nat x Nat)</code> in computations; with <code>Quotient</code> the representatives don't have to be canonical, and so, for example, <code>-1</code> might be represented by <code>(giantNumber, giantNumber + 1)</code> after a few operations if you're not careful.</p>\n<p>Anyway, 4.5.1 is a section I suggested. It's aiming to walk the fine line between explaining a key mathematical philosophy (universal properties!) and not being overly technical (don't want people think they need to know category theory to use Lean), while also pointing out that core types like <code>Int</code> <em>are</em> quotient types, even though they don't use <code>Quotient</code>. All that's clear in the explanation is due to David, and all that's not is me. Feedback is appreciated :-)</p>",
        "id": 533812533,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1754924365
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"354934\">@David Thrane Christiansen</span> do you prefer corrections / comments on Zulip, or as GitHub issues? If the latter, how granular do you prefer them to be? E.g., I have two small issues with the <code>grind</code> documentation so far; one is an typo (I think), and the other is a request for more information (the default limit to the number of splits). Should those be separate issues, or just one because they are both within the <code>grind</code> documentation?</p>",
        "id": 533849082,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1754938322
    },
    {
        "content": "<blockquote>\n<p>An interesting example of a quotient that can't (currently) be manually implemented</p>\n</blockquote>\n<p>Is this not the \"quotient\"?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">prequotientF</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚Üî</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">QuotientF</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">prequotientF</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"bp\">‚àÖ</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">prequotientF</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚äÜ</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"bp\">‚àÖ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 533975675,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1755003593
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/533975675\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>An interesting example of a quotient that can't (currently) be manually implemented</p>\n</blockquote>\n<p>Is this not the \"quotient\"?</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">prequotientF</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚Üî</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">QuotientF</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">prequotientF</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"bp\">‚àÖ</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">prequotientF</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚äÜ</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"bp\">‚àÖ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>You need <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=funext#doc\">docs#funext</a> to prove set extensionality, which is needed to prove that this quotient satisfies the properties of a quotient, and the proof of <code>funext</code> requires quotients in Lean.</p>",
        "id": 533980057,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755004857
    },
    {
        "content": "<p>Try proving that this quotient satisfies the universal property! You should write a <code>QuotientF.mk</code>, <code>QuotientF.lift</code>, <code>QuotientF.mk_surjective</code>, <code>QuotientF.lift_mk</code>, and <code>QuotientF.sound</code>.</p>",
        "id": 533980409,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755004969
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/533849082\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> do you prefer corrections / comments on Zulip, or as GitHub issues? If the latter, how granular do you prefer them to be? E.g., I have two small issues with the <code>grind</code> documentation so far; one is an typo (I think), and the other is a request for more information (the default limit to the number of splits). Should those be separate issues, or just one because they are both within the <code>grind</code> documentation?</p>\n</blockquote>\n<p>I slightly prefer issues, as they're easier to track, but please provide this kind of thing in whatever way is easiest for you. Don't worry about granularity - I can always split an issue up, or push a commit that addresses half of it. Please just use your best judgment, and don't worry overly much.</p>\n<p>Thanks!</p>",
        "id": 534154641,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1755058381
    },
    {
        "content": "<p>I'm finally getting around to reading about grind in the reference manual. In 17.6.1 the introduction of <code>grind_pattern gf =&gt; f x</code> is done in a sort of matter-of-fact way, but its not clear (a) what exactly that does, or (b) why that suddenly causes grind to be able to solve the goal. The lead up to that motivates the move by explaining that the base gf rule doesn't fire (at least in part) because \"the goal does not even contain the function symbol g\", but the goal doesn't contain f either.</p>",
        "id": 547480240,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1761654497
    },
    {
        "content": "<p>Thanks for the feedback. I've created <a href=\"https://github.com/leanprover/reference-manual/issues/640\">an issue</a> to track it.</p>",
        "id": 547496723,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1761658849
    },
    {
        "content": "<p>I wanted to thank whoever wrote this page in particular: <a href=\"https://lean-lang.org/doc/reference/latest/Run-Time-Code/Foreign-Function-Interface/\">https://lean-lang.org/doc/reference/latest/Run-Time-Code/Foreign-Function-Interface/</a> - I'm messing around with the Lean SDL3 bindings library someone else wrote, trying to understand their code, and this page was easy to find and is helping me understand what their C code is doing. Kudos!</p>",
        "id": 563960801,
        "sender_full_name": "Greg Shuflin",
        "timestamp": 1765856983
    },
    {
        "content": "<p>Thanks for the note, <span class=\"user-mention\" data-user-id=\"785542\">@Greg Shuflin</span>! That page has been very collaboratively written, starting out as a Markdown file in the Lean repository that was updated along with compiler changes, and evolving into multiple sections of the reference manual. I'm glad it was helpful, and easy to find.</p>",
        "id": 564764840,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1766172990
    },
    {
        "content": "<p>I'm new to Lean and trying to learn programming in it. It seems that  the <code>String.reverse</code> function mentioned in the Lean Language Reference doesn't actually exist (see my post at <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/String.2Ereverse/with/565583060\">#general &gt; String.reverse</a>).</p>",
        "id": 565583497,
        "sender_full_name": "Maris Ozols",
        "timestamp": 1766946710
    },
    {
        "content": "<p>In 24.1.1.6.3, the constant names <code>LAKE*CACHE*KEY</code> are mangled because of markdown confusion</p>",
        "id": 566508930,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1767692553
    },
    {
        "content": "<p>I have been spending a lot of time in the language reference recently , which is very well written and thorough. But, I was having a difficult time reading them due to the flat formatting/my dyslexia. I find syntax highlighting helps a lot, so I threw together a <a href=\"https://github.com/e-vergo/doc_viz\">browser extension that does it vis css injection</a>. The lean code isn't structured for proper syntax highlighting in SubVerso, so this works based off some hacks. I didn't see anything like this available, but realize that I probably should have asked here first. Is there something like this already available? If not, it may be something that others are interested in and I can continue to tinker with it. </p>\n<p><a href=\"/user_uploads/3121/Q9ZKEnXwtXz0ZwNVsmcy4Xhq/Screenshot-2026-01-06-at-12.30.06PM.png\">Screenshot 2026-01-06 at 12.30.06‚ÄØPM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Q9ZKEnXwtXz0ZwNVsmcy4Xhq/Screenshot-2026-01-06-at-12.30.06PM.png\" title=\"Screenshot 2026-01-06 at 12.30.06‚ÄØPM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"3166x1598\" src=\"/user_uploads/thumbnail/3121/Q9ZKEnXwtXz0ZwNVsmcy4Xhq/Screenshot-2026-01-06-at-12.30.06PM.png/840x560.webp\"></a></div>",
        "id": 566591943,
        "sender_full_name": "Eric Vergo",
        "timestamp": 1767721212
    },
    {
        "content": "<p>Can you compare light vs light or dark vs dark?</p>",
        "id": 566594702,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1767722227
    },
    {
        "content": "<p>Here is the full 2x2; the 'light' mode is the site as-is.</p>\n<p><a href=\"/user_uploads/3121/9L9sp8dV46VnuVqWoWUN-9Yb/dark.png\">dark.png</a><br>\n<a href=\"/user_uploads/3121/TcHTzNoMby7DZysWWySF9q2l/dark_highlight.png\">dark_highlight.png</a><br>\n<a href=\"/user_uploads/3121/MbbEo8wADM4TfTi5J2O3Yq46/light.png\">light.png</a><br>\n<a href=\"/user_uploads/3121/AmqcMVKYn8whfGfXIkdGB63l/light_highlight.png\">light_highlight.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/9L9sp8dV46VnuVqWoWUN-9Yb/dark.png\" title=\"dark.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2374x1892\" src=\"/user_uploads/thumbnail/3121/9L9sp8dV46VnuVqWoWUN-9Yb/dark.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/TcHTzNoMby7DZysWWySF9q2l/dark_highlight.png\" title=\"dark_highlight.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2374x1892\" src=\"/user_uploads/thumbnail/3121/TcHTzNoMby7DZysWWySF9q2l/dark_highlight.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/MbbEo8wADM4TfTi5J2O3Yq46/light.png\" title=\"light.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2374x1892\" src=\"/user_uploads/thumbnail/3121/MbbEo8wADM4TfTi5J2O3Yq46/light.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/AmqcMVKYn8whfGfXIkdGB63l/light_highlight.png\" title=\"light_highlight.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2374x1892\" src=\"/user_uploads/thumbnail/3121/AmqcMVKYn8whfGfXIkdGB63l/light_highlight.png/840x560.webp\"></a></div>",
        "id": 566616361,
        "sender_full_name": "Eric Vergo",
        "timestamp": 1767731023
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Ya√´l Dillies</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/566508930\">said</a>:</p>\n<blockquote>\n<p>In 24.1.1.6.3, the constant names <code>LAKE*CACHE*KEY</code> are mangled because of markdown confusion</p>\n</blockquote>\n<p>Thanks! <a href=\"https://github.com/leanprover/reference-manual/pull/742\">https://github.com/leanprover/reference-manual/pull/742</a> fixes this.</p>",
        "id": 566760227,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1767799859
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"988234\">@Eric Vergo</span> There's an <a href=\"https://github.com/leanprover/verso/pull/676\">open PR</a> in Verso from <span class=\"user-mention\" data-user-id=\"337670\">@Alok Singh</span>  to add dark mode support to manuals.  I think it would be really great if Verso's output supported a few configurable themes, because not all readers have the same needs! Once that PR is working correctly, I think it would be a great next step to have a little \"config\" panel pop up that lets readers select a light theme, a dark theme, and toggle between automatic, always light, and always dark. Themes that support the needs of dyslexic readers and any other populations can be created fairly easily, I think, and then rolled out to all the documents. Are you interested in making something like that?</p>",
        "id": 566761112,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1767800111
    },
    {
        "content": "<p>If I understood correctly, I think the point was more to have <em>syntax highlighting</em>, not just support for dark mode.</p>",
        "id": 566785062,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1767806668
    },
    {
        "content": "<p>We do have syntax highlighting already. It's bold and italic rather than lots of colors, but CSS variables in a theme could set those styles in any way needed (the variables control weight, italic vs upright, and color, but arbitrary other properties in the CSS could be set too.</p>",
        "id": 566790930,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1767808543
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/566761112\">said</a>:</p>\n<blockquote>\n<p>...  Are you interested in making something like that?</p>\n</blockquote>\n<p>If you are willing to put up with some hand-holding then yes, absolutely. I have not contributed to larger projects before.</p>",
        "id": 566796333,
        "sender_full_name": "Eric Vergo",
        "timestamp": 1767810260
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/566790930\">said</a>:</p>\n<blockquote>\n<p>We do have syntax highlighting already. It's bold and italic rather than lots of colors, but CSS variables in a theme could set those styles in any way needed (the variables control weight, italic vs upright, and color, but arbitrary other properties in the CSS could be set too.</p>\n</blockquote>\n<p>Indeed, there is a lot of low hanging fruit in this space, and I think we should go pick it. Most of this is fairly straightforward html/css work. But I should warn you that I'm not a web dev; I'm just cosplaying as one. For the 'full' code syntax highlighting, I think to 'do it right' we'll need to more tightly couple the css classes generated by Subverso to actual lean. This is a bigger undertaking though and it makes sense to do the other things first.</p>",
        "id": 566800106,
        "sender_full_name": "Eric Vergo",
        "timestamp": 1767811561
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"988234\">Eric Vergo</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/566800106\">said</a>:</p>\n<blockquote>\n<p>more tightly couple the css classes generated by Subverso to actual lean</p>\n</blockquote>\n<p>Can you say more about what you mean here?</p>",
        "id": 566950595,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1767881382
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/566950595\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"988234\">Eric Vergo</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/566800106\">said</a>:</p>\n<blockquote>\n<p>more tightly couple the css classes generated by Subverso to actual lean</p>\n</blockquote>\n<p>Can you say more about what you mean here?</p>\n</blockquote>\n<p>Sure, there are a few specific points behind this. For instance, right now SubVerso is tagging a lot of lean text as <a href=\"https://github.com/leanprover/subverso/blob/eab03c5b5b445e8ba4825454fd0fe0004dde30a4/src/SubVerso/Highlighting/Highlighted.lean#L86\">unknown</a>, including things that would have different styling if it were rendered in, say, live.lean-lang. </p>\n<p>For example, In the <a href=\"https://lean-lang.org/doc/reference/latest/The-Type-System/#type-system\">'computing types code'</a> many of the punctuation characters, such as \"( ) : = &gt;\" get tagged as 'unknown', meaning they all have the same styling applied via css. If we want to replicate <a href=\"https://live.lean-lang.org/#codez=CYUwZgBAMiB2DmAXAFlAlgZ0RAFIRuAIAuCAFQE8AHECAVwEoiIA5AQ20CTCUy6mgKAggAfCAAYIAXgB8EAAoBVWGkT8hEWBADUEAIwTpBAOvQ4SVJmwFYvXiAAeLALYUANtWIwEKdFggBJWNhihOK4dNZ2ji5uxp5mPgDKiABOaAgQAExE4io4AEQAEiDOzgD2uQA0ELkoIEkgFaFh1gJAA\">this</a> we would need more granularity on the classes. </p>\n<p><a href=\"/user_uploads/3121/Ci7--4mbjpBcvR_0qjwqTeYn/Screenshot-2026-01-08-at-1.20.45PM.png\">Screenshot 2026-01-08 at 1.20.45‚ÄØPM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Ci7--4mbjpBcvR_0qjwqTeYn/Screenshot-2026-01-08-at-1.20.45PM.png\" title=\"Screenshot 2026-01-08 at 1.20.45‚ÄØPM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1408x232\" src=\"/user_uploads/thumbnail/3121/Ci7--4mbjpBcvR_0qjwqTeYn/Screenshot-2026-01-08-at-1.20.45PM.png/840x560.webp\"></a></div><p><a href=\"/user_uploads/3121/JCcWQKqLUNfPocvNp0xnSWPK/Screenshot-2026-01-08-at-1.21.07PM.png\">Screenshot 2026-01-08 at 1.21.07‚ÄØPM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/JCcWQKqLUNfPocvNp0xnSWPK/Screenshot-2026-01-08-at-1.21.07PM.png\" title=\"Screenshot 2026-01-08 at 1.21.07‚ÄØPM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1406x230\" src=\"/user_uploads/thumbnail/3121/JCcWQKqLUNfPocvNp0xnSWPK/Screenshot-2026-01-08-at-1.21.07PM.png/840x560.webp\"></a></div>",
        "id": 567007897,
        "sender_full_name": "Eric Vergo",
        "timestamp": 1767897258
    },
    {
        "content": "<p>That should be pretty easy to do, given a suitable spec. What distinctions would be useful for you?</p>",
        "id": 567016033,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1767900227
    },
    {
        "content": "<p>My instinct was to spec 'exactly the default syntax highlighting in VsCode', but that is more challenging than I had hoped. I was planning on being able to piggy back off other workflows and use the <a href=\"https://github.com/leanprover/lean4/blob/7d5a96941e5b92d2f5956f7adf078dfc253bf4ba/src/Lean/Data/Lsp/LanguageFeatures.lean#L427\">SemanticTokenType</a> generated when interacting with the language server. It looks like that won't do it though as things like nested parentheses are handled by the IDE.  Is there a way to easily replicate the default syntax highlighting?</p>",
        "id": 567044323,
        "sender_full_name": "Eric Vergo",
        "timestamp": 1767911556
    },
    {
        "content": "<p>There is not a reasonable way to do that, but any specific feature that it uses should be pretty doable. I could easily add CSS classes to nested brackets of various kinds that could be used in a theme to add rainbow parens, for example.</p>",
        "id": 567071363,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1767932860
    },
    {
        "content": "<p>Are there other specific improvements that would make it easier for you to make a style that helps you follow the text?</p>",
        "id": 567074452,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1767935729
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"354934\">David Thrane Christiansen</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/567071363\">said</a>:</p>\n<blockquote>\n<p>There is not a reasonable way to do that, but any specific feature that it uses should be pretty doable. I could easily add CSS classes to nested brackets of various kinds that could be used in a theme to add rainbow parens, for example.</p>\n</blockquote>\n<p>I think nested parentheses/brackets/etc. would be great. Having different colors helps give the text more structure and lets the eye know where to go.</p>",
        "id": 567560474,
        "sender_full_name": "Eric Vergo",
        "timestamp": 1768230477
    },
    {
        "content": "<blockquote>\n<p>Are there other specific improvements that would make it easier for you to make a style that helps you follow the text?</p>\n</blockquote>\n<p>Matching the semantic token types from the LSP as close as possible is the only other thing I can think of. Dark mode, brackets, and leveraging what is already available will go a long way.</p>",
        "id": 567563302,
        "sender_full_name": "Eric Vergo",
        "timestamp": 1768231097
    },
    {
        "content": "<p>Reading the doc about the <a href=\"https://lean-lang.org/doc/reference/latest/Source-Files-and-Modules/#module-headers\">module sytem</a>, I was missing the distinction between <code>public import</code> and just <code>import</code>. Maybe I missed it, but maybe the \"Syntax - Import\" bubble (<a href=\"https://lean-lang.org/doc/reference/latest/Source-Files-and-Modules/#module-headers:~:text=All%20imports%20to%20a%20module%20must%20themselves%20be%20modules.%20The%20modifiers%20have%20the%20following%20meanings%3A\">roughly here</a>) should mention the behaviour of <code>import</code> without any modifiers?</p>\n<p>Something like this is the behaviour, isn't it?</p>\n<blockquote>\n<p>[without modifiers,] The imported module's public scope is added to the current module's private scope.</p>\n</blockquote>",
        "id": 571270482,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1769936999
    },
    {
        "content": "<p>About the language reference, there is a nice section <a href=\"https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Defining-New-Syntax/#syntax-rules\">https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Defining-New-Syntax/#syntax-rules</a> describing many ways to specify syntax. Is there a corresponding section saying how to pattern match on these as well as utilities to extract significant bits (for instance pointing out <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Syntax.TSepArray.getElems#doc\">docs#Lean.Syntax.TSepArray.getElems</a>)?</p>",
        "id": 571287886,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1769953393
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/571270482\">said</a>:</p>\n<blockquote>\n<p>Reading the doc about the <a href=\"https://lean-lang.org/doc/reference/latest/Source-Files-and-Modules/#module-headers\">module sytem</a>, I was missing the distinction between <code>public import</code> and just <code>import</code>. Maybe I missed it, but maybe the \"Syntax - Import\" bubble (<a href=\"https://lean-lang.org/doc/reference/latest/Source-Files-and-Modules/#module-headers:~:text=All%20imports%20to%20a%20module%20must%20themselves%20be%20modules.%20The%20modifiers%20have%20the%20following%20meanings%3A\">roughly here</a>) should mention the behaviour of <code>import</code> without any modifiers?</p>\n<p>Something like this is the behaviour, isn't it?</p>\n<blockquote>\n<p>[without modifiers,] The imported module's public scope is added to the current module's private scope.</p>\n</blockquote>\n</blockquote>\n<p>In that box's first paragraph, it states:</p>\n<blockquote>\n<p>Importing a file makes its contents available in the current source file, as well as those from source files transitively imported by its imports.</p>\n</blockquote>\n<p>A bit of redundancy would be helpful here to create a more parallel construction, so <a href=\"https://github.com/leanprover/reference-manual/pull/770\">I added it</a>. Thanks!</p>",
        "id": 571350043,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1770010296
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.20thread.20for.20Lean.20Language.20Reference/near/571287886\">said</a>:</p>\n<blockquote>\n<p>About the language reference, there is a nice section <a href=\"https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Defining-New-Syntax/#syntax-rules\">https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Defining-New-Syntax/#syntax-rules</a> describing many ways to specify syntax. Is there a corresponding section saying how to pattern match on these as well as utilities to extract significant bits (for instance pointing out <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Syntax.TSepArray.getElems#doc\">docs#Lean.Syntax.TSepArray.getElems</a>)?</p>\n</blockquote>\n<p>There is a <a href=\"https://lean-lang.org/doc/reference/latest/find/?domain=Verso.Genre.Manual.section&amp;name=quote-patterns\">section on using quasiquotes as patterns</a>, but not all of the helpers are present.</p>\n<p><a href=\"https://github.com/leanprover/reference-manual/pull/772\">#772</a> resolves the situation, adding the helpers as well as an example of a quasiquote pattern.</p>",
        "id": 571390925,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1770026966
    },
    {
        "content": "<p>Interesting, thanks! I think you can easily improve the situation even more by adding more links. After reading <a href=\"https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Defining-New-Syntax/#syntax-rules\">https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Defining-New-Syntax/#syntax-rules</a>, readers who want to define an elaborator and not a macro will be tempted to jump to <a href=\"https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Elaborators/#elaborators\">https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Elaborators/#elaborators</a>, missing the macros section which contains <a href=\"https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Macros/#quote-patterns\">https://lean-lang.org/doc/reference/latest/Notations-and-Macros/Macros/#quote-patterns</a>. In the other direction, both the macro and the elaborators section could link back to the syntax rules section.</p>",
        "id": 571452587,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1770044049
    },
    {
        "content": "<p>Great suggestion - done!</p>",
        "id": 572099519,
        "sender_full_name": "David Thrane Christiansen",
        "timestamp": 1770284267
    }
]