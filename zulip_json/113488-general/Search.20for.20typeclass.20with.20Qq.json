[
    {
        "content": "<p>This question is kind of vague, I'm very new to metaprogramming so I'm really just trying to get a sense of what solutions are out there.</p>\n<p>I have a typeclass <code>IntoWand ... X Y Z</code>, and I'm writing a tactic where I need one of these instances for a fixed <code>X Z : T</code> but where I don't necessarily know <code>Y</code>. After I get a candidate for<code>Y</code>, there's a short string of tactics I need to execute to try and finish the proof. Now I think I may be able come up with some heuristics to find possible values of <code>Y</code>, but I'm wondering if the typeclass system could help in this case: </p>\n<ul>\n<li>Is there any (efficient) way to do backtracking search over the space of possible instantiations for <code>Y</code> where <code>synthInstanceQ q(IntoWand ... X Y Z)</code>works? </li>\n<li>Is there any way to just look for first instance where <code>synthInstanceQ q(IntoWand ... X _ Z)</code> works? </li>\n<li>Right now <code>Y</code> is not an <code>outParam</code> (although <code>Z</code> is), but could try changing that. Can <code>synthInstanceQ</code> make use of <code>outParam</code>s to do this kind of searching?</li>\n</ul>",
        "id": 520299216,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1748184992
    },
    {
        "content": "<p>synthInstance doesn't play well with tactics generally. You can't just get into the middle of the backtracking search. That said, I think it might not be impossible to write something like that which uses synthInstance internals... I think you want <code>Y</code> to be an outParam for this kind of use</p>",
        "id": 520320020,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1748202168
    },
    {
        "content": "<p>If you have an <code>outParam</code>, you can just pass a metavariable and synthInstance will (hopefully) fill in its value for you</p>",
        "id": 520322154,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1748203998
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 520437148,
        "sender_full_name": "Markus de Medeiros",
        "timestamp": 1748261979
    }
]