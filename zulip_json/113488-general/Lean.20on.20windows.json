[
    {
        "content": "<p>Hi, I'm helping a colleague install lean on windows. We managed to install the lean4 plugin using VSCode. But the server is not starting.</p>",
        "id": 456904285,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722962674
    },
    {
        "content": "<p>Also, Lake is not installed although elan and lean both exist</p>",
        "id": 456904414,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722962700
    },
    {
        "content": "<p>What does <code>elan --version</code> give?</p>",
        "id": 456904500,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722962717
    },
    {
        "content": "<p>elan 3.1.1</p>",
        "id": 456904652,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722962739
    },
    {
        "content": "<p>(71ddc6633 2024-02-22)</p>",
        "id": 456904971,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722962797
    },
    {
        "content": "<p>And for <code>lean</code>?</p>",
        "id": 456905003,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722962803
    },
    {
        "content": "<p>Lean v 3.4.2</p>",
        "id": 456905122,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722962824
    },
    {
        "content": "<p>Is this the wrong lean?</p>",
        "id": 456905156,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722962832
    },
    {
        "content": "<blockquote>\n<p>But the server is not starting.</p>\n</blockquote>\n<p>Do you have a lean project set up?</p>",
        "id": 456905379,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722962877
    },
    {
        "content": "<p>No we're not able to create a project as \"lake\" is not a recognized command</p>",
        "id": 456905595,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722962913
    },
    {
        "content": "<p>There is a button in vscode that will create the project for you I think</p>",
        "id": 456905891,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722962972
    },
    {
        "content": "<p>That should install <code>lake</code> at the same time</p>",
        "id": 456906095,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722963003
    },
    {
        "content": "<p>Weirdly we're not seeing a \"New project\" menu item nor a \"forall symbol\" for creating a new project</p>",
        "id": 456907124,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722963286
    },
    {
        "content": "<p>Actually we just restarted the app several times and it appeared. Thanks anyways!! Hopefully it'll work now.</p>",
        "id": 456907985,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722963559
    },
    {
        "content": "<p>Now lake is having issues installing leantar. Is there a way to tell lake a location where to install leantar and the cache?</p>",
        "id": 456912075,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722964569
    },
    {
        "content": "<p>Could you please include the error messages?</p>",
        "id": 456912994,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1722964834
    },
    {
        "content": "<p>Installing leantar 0.1.13<br>\nUncaught exception: no such file or directory (error code: 2)  file M:\\</p>",
        "id": 456915476,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722965563
    },
    {
        "content": "<p>We checked the environment variables and the \"HOMEDRIVE\" variable is set to \"M:\" and we're unable to change it to \"C:\"</p>",
        "id": 456915597,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722965620
    },
    {
        "content": "<p>We keep getting an error:</p>\n<p>imports are out of date and must be rebuilt; use the \"restart file\" command in your editor.</p>",
        "id": 456924254,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1722968173
    },
    {
        "content": "<p>Does an <code>M</code> drive exist? If not, this seems a fundamental problem with the system.</p>",
        "id": 457236164,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1723079853
    },
    {
        "content": "<p>We're trying to get the IT guys to fix the system variables (requires admin access). But is there no way to tell <code>lake</code> a custom location to put the .cache directory?</p>",
        "id": 457276393,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1723097777
    },
    {
        "content": "<p>I was hoping something like <code>--cache-dir</code> would exist.</p>",
        "id": 457276466,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1723097835
    },
    {
        "content": "<p>You should be able to override HOMEDRIVE and HOMEPATH locally in the shell. Otherwise this would be a feature request to Mathlib4, as <code>cache</code> lives there.</p>",
        "id": 457313768,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1723108820
    },
    {
        "content": "<p><code>cache</code> will use any of several environment variables to find the cache dir. The first choice is <code>XDG_CACHE_HOME</code></p>",
        "id": 457429574,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723138689
    },
    {
        "content": "<p>Does it look at that even on Windows?</p>",
        "id": 457435465,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723140127
    },
    {
        "content": "<p>(Looks like yes -- <a href=\"https://github.com/leanprover-community/mathlib4/blob/340c789afdcbe26f967370ab99449ed1c87c5019/Cache/IO.lean#L47\">https://github.com/leanprover-community/mathlib4/blob/340c789afdcbe26f967370ab99449ed1c87c5019/Cache/IO.lean#L47</a> which is a tad surprising but nice for this issue clearly)</p>",
        "id": 457435777,
        "sender_full_name": "Julian Berman",
        "timestamp": 1723140223
    },
    {
        "content": "<p>Thanks! This is very helpful. </p>\n<p>Should this be added to the installation somewhere? Even on Mac or Linux I would prefer to have more control over where I store the <code>.cache</code></p>",
        "id": 459472444,
        "sender_full_name": "Apurva Nakade",
        "timestamp": 1723209556
    },
    {
        "content": "<p>I think <code>XDG_CACHE_HOME</code> is already a standard place to store things</p>",
        "id": 459473379,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723209755
    }
]