[
    {
        "content": "<p>Hello. Can I define notation and use it immediately within the definition of an inductive type?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Config</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Config</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">op_add</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">n‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n‚ÇÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">n‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">+'</span><span class=\"w\"> </span><span class=\"n\">n‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">op_ge</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">n‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ùîπ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚â•</span><span class=\"w\"> </span><span class=\"n\">n‚ÇÇ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">n‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚â•'</span><span class=\"w\"> </span><span class=\"n\">n‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">op‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÅ'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s'</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÅ'</span><span class=\"w\"> </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s'</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">op‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Val</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÇ'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s'</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®.</span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">op</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s'</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">deref</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">‚Ñì</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ùïÉ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">‚Ñì</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®!</span><span class=\"n\">‚Ñì</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">assign‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">‚Ñì</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">‚Ñì</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">Val</span><span class=\"bp\">.</span><span class=\"n\">skip</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"n\">‚Ñì</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">assign‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s'</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">‚Ñì</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">‚Ñì</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">e'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s'</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">seq‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">Val</span><span class=\"bp\">.</span><span class=\"n\">skip</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">seq‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÅ'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s'</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÅ</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÅ'</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s'</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">ite‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®.</span><span class=\"n\">ite</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÉ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">ite‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®.</span><span class=\"n\">ite</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÉ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÉ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">ite‚ÇÉ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®</span><span class=\"n\">e‚ÇÅ'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s'</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®.</span><span class=\"n\">ite</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÉ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®.</span><span class=\"n\">ite</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÅ'</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÉ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s'</span><span class=\"bp\">‚ü©</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"bp\">‚ü®.</span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span><span class=\"w\"> </span><span class=\"bp\">‚ü®.</span><span class=\"n\">ite</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e‚ÇÅ</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">e‚ÇÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">Val</span><span class=\"bp\">.</span><span class=\"n\">skip</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">‚ü©</span>\n\n<span class=\"kn\">infix</span><span class=\"o\">:</span><span class=\"mi\">40</span><span class=\"w\"> </span><span class=\"s2\">\" ‚ü∂ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Transition</span>\n</code></pre></div>\n<p><code>mutual</code> did not work for me.</p>",
        "id": 495881501,
        "sender_full_name": "Anon",
        "timestamp": 1737820311
    },
    {
        "content": "<p><a href=\"#narrow/channel/113488-general/topic/Use.20notation.20immediately.20in.20inductive.20definition/near/495881501\">A message</a> was moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/Lean.20in.20the.20wild\">#general &gt; Lean in the wild</a> by <span class=\"user-mention silent\" data-user-id=\"674484\">Anon</span>.</p>",
        "id": 495881778,
        "sender_full_name": "Notification Bot",
        "timestamp": 1737820539
    },
    {
        "content": "<p>Not sure if this is idiomatic, but this seems to work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">hygiene</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">infix</span><span class=\"o\">:</span><span class=\"mi\">40</span><span class=\"w\"> </span><span class=\"s2\">\" ‚ü∂ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Transition</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\">  </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div>",
        "id": 495885260,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1737823031
    },
    {
        "content": "<p>More idiomatic would be to do <code>local infix</code> and wrap the whole block in <code>section ... end</code>, then redefine the notation afterwards.</p>",
        "id": 495886003,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737823562
    },
    {
        "content": "<p>(It's not great as a solution, but it guarantees that <code>Transition</code> refers to the correct declaration.)</p>",
        "id": 495886054,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737823599
    },
    {
        "content": "<p>It would be nice if we could put <code>infix</code> inside of <code>mutual</code>, but that would not be a small project...</p>",
        "id": 495886110,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737823646
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> <a href=\"#narrow/channel/113488-general/topic/Use.20notation.20immediately.20in.20inductive.20definition/near/495885260\">said</a>:</p>\n<blockquote>\n<p>Not sure if this is idiomatic, but this seems to work:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">hygiene</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">infix</span><span class=\"o\">:</span><span class=\"mi\">40</span><span class=\"w\"> </span><span class=\"s2\">\" ‚ü∂ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Transition</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\">  </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Thank you, this worked. I guess it is okay for my use case.</p>",
        "id": 495888415,
        "sender_full_name": "Anon",
        "timestamp": 1737825265
    },
    {
        "content": "<p><code>infix</code> inside <code>mutual</code> would be nice indeed...</p>",
        "id": 495888483,
        "sender_full_name": "Anon",
        "timestamp": 1737825338
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"674484\">Anon</span> has marked this topic as resolved.</p>",
        "id": 495888776,
        "sender_full_name": "Notification Bot",
        "timestamp": 1737825564
    },
    {
        "content": "<p>If you want it to be robust, you really ought to use <code>local infix</code>. For example, with a non-hygienic global notation you get</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Baz</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">¬∑</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"mi\">6</span>\n<span class=\"c1\">-- Transition 5 6 : Nat</span>\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Baz</span>\n</code></pre></div>\n<p>That's picking up on the wrong Transition.</p>\n<p>Spelled out, here is the correct version:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">section</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">hygiene</span><span class=\"w\"> </span><span class=\"n\">false</span>\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">infix</span><span class=\"o\">:</span><span class=\"mi\">40</span><span class=\"w\"> </span><span class=\"s2\">\" ‚ü∂ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Transition</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Transition</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n<span class=\"kn\">end</span>\n<span class=\"kn\">infix</span><span class=\"o\">:</span><span class=\"mi\">40</span><span class=\"w\"> </span><span class=\"s2\">\" ‚ü∂ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Transition</span>\n</code></pre></div>",
        "id": 495914167,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737847975
    }
]