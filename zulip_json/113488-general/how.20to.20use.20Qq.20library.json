[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>, any interest in continuing with this PR? I just ran into the same problem. (Trying to answer <a href=\"https://proofassistants.stackexchange.com/questions/5360/what-is-the-standard-equivalent-of-an-ltac-match-in-lean4/5368#5368\">https://proofassistants.stackexchange.com/questions/5360/what-is-the-standard-equivalent-of-an-ltac-match-in-lean4/5368#5368</a>)</p>",
        "id": 555476295,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1763076052
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> you could make that marginally more readable with <code>match_expr</code>. Is that reasonable to recommend to newcomers? It's unfortunate that it doesn't support nested expressions.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"s2\">\"match_assoc\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">ldecl</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">â†</span><span class=\"w\"> </span><span class=\"n\">getLCtx</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"n\">match_expr</span><span class=\"w\"> </span><span class=\"n\">ldecl</span><span class=\"bp\">.</span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Eq</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">lhs</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">match_expr</span><span class=\"w\"> </span><span class=\"n\">lhs</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">And</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">        </span><span class=\"n\">let_expr</span><span class=\"w\"> </span><span class=\"n\">And</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">continue</span>\n<span class=\"w\">        </span><span class=\"n\">evalTactic</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">â†</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">and_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"o\">(</span><span class=\"n\">mkIdent</span><span class=\"w\"> </span><span class=\"n\">ldecl</span><span class=\"bp\">.</span><span class=\"n\">userName</span><span class=\"o\">):</span><span class=\"n\">ident</span><span class=\"o\">))</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">        </span><span class=\"n\">let_expr</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">continue</span>\n<span class=\"w\">        </span><span class=\"n\">evalTactic</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">â†</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">or_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"o\">(</span><span class=\"n\">mkIdent</span><span class=\"w\"> </span><span class=\"n\">ldecl</span><span class=\"bp\">.</span><span class=\"n\">userName</span><span class=\"o\">):</span><span class=\"n\">ident</span><span class=\"o\">))</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">pure</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">pure</span><span class=\"w\"> </span><span class=\"o\">()</span>\n</code></pre></div>",
        "id": 555492891,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1763085904
    },
    {
        "content": "<p>Don't we have <code>~q(...)</code> matching?</p>",
        "id": 555495024,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763087686
    },
    {
        "content": "<p>Yes, I failed to get <code>~q(...)</code> to work here as I kept running into the issue above.</p>",
        "id": 555495724,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1763088248
    },
    {
        "content": "<p>Looks like you want to <code>have a : Q(Prop) := a</code> instead of <code>let</code></p>",
        "id": 555496103,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763088577
    },
    {
        "content": "<p>oh yeah that's what Eric said</p>",
        "id": 555496143,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763088620
    },
    {
        "content": "<p>what's the problem then?</p>",
        "id": 555496154,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763088630
    },
    {
        "content": "<p>Does the solution not work?</p>",
        "id": 555496240,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763088714
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/113488-general/topic/how.20to.20use.20Qq.20library/near/555476295\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>, any interest in continuing with this PR? I just ran into the same problem. (Trying to answer <a href=\"https://proofassistants.stackexchange.com/questions/5360/what-is-the-standard-equivalent-of-an-ltac-match-in-lean4/5368#5368\">https://proofassistants.stackexchange.com/questions/5360/what-is-the-standard-equivalent-of-an-ltac-match-in-lean4/5368#5368</a>)</p>\n</blockquote>\n<p>Offtopic about that SE question, isn't the standard way in Lean to try applying the theorem and just let it succeed or fail?</p>",
        "id": 555499362,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1763091488
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113488-general/topic/how.20to.20use.20Qq.20library/near/555496240\">said</a>:</p>\n<blockquote>\n<p>Does the solution not work?</p>\n</blockquote>\n<p>I couldn't get it to work. I wrote what looked like the right code, but the matches never obtained.</p>",
        "id": 555672011,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1763152014
    },
    {
        "content": "<p>Can you give a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a></p>",
        "id": 555673876,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763152745
    },
    {
        "content": "<p>Sorry, insufficiently interested in <code>Qq</code>. :-)</p>",
        "id": 556723827,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1763337063
    }
]