[
    {
        "content": "<p>Together with <span class=\"user-mention\" data-user-id=\"519269\">@Pim Otte</span> I stumbled upon</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Logic</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- let `P` and `Q` be two logical statements</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_imp</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- ambiguous</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">not_imp</span><span class=\"w\"> </span><span class=\"c1\">-- Classical.not_imp, no failure</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">not_imp</span><span class=\"w\"> </span><span class=\"c1\">-- Classical.not_imp</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">not_imp</span><span class=\"w\"> </span><span class=\"c1\">-- not_imp</span>\n</code></pre></div>",
        "id": 467606981,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725469226
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Classical.not_imp#doc\">docs#Classical.not_imp</a> is in core. Should mathlib drop <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=not_imp#doc\">docs#not_imp</a> ?</p>",
        "id": 467607146,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725469256
    },
    {
        "content": "<p>are you missing an <code>open Classical</code> in the code above?</p>",
        "id": 467607406,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1725469303
    },
    {
        "content": "<p>I'm just confused as to how that <code>rw</code> could be ambiguous without it.</p>",
        "id": 467608177,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1725469445
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/blob/e9e858a4484905a0bfe97c4f05c3924ead02eed8/src/Init/Classical.lean#L169-L170\">https://github.com/leanprover/lean4/blob/e9e858a4484905a0bfe97c4f05c3924ead02eed8/src/Init/Classical.lean#L169-L170</a></p>",
        "id": 467608729,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1725469555
    },
    {
        "content": "<p>Why doesn't Lean complain when <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=not_imp#doc\">docs#not_imp</a> is declared in Mathlib then? That seems like a bug.</p>",
        "id": 467608991,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1725469606
    },
    {
        "content": "<p>But aside from this, yes, let's abolish <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=not_imp#doc\">docs#not_imp</a>.</p>",
        "id": 467609550,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1725469718
    },
    {
        "content": "<p>Exporting doesn't create new declarations, it just adds to a table of name synonyms used by name resolution. It's working as designed, but perhaps it could be considered to be a usability bug.</p>",
        "id": 467609617,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1725469736
    },
    {
        "content": "<p>Yeah, it seems like when you add a declaration to the environment if there is a name synonym, then Lean should warn you.</p>",
        "id": 467610191,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1725469862
    },
    {
        "content": "<p>Shall I create an issue?</p>",
        "id": 467610231,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1725469874
    },
    {
        "content": "<p>Sure, seems reasonable. Maybe it could be a linter warning?</p>",
        "id": 467610728,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1725470001
    },
    {
        "content": "<p>Does this constitute a bug report or an RFC?</p>",
        "id": 467611083,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1725470102
    },
    {
        "content": "<p>Let's say a bug report since you're saying \"this doesn't work how I expect it to\". An RFC would be \"here's a proposed solution\". Its OK if a bug report has some discussion about possible solutions at the end.</p>",
        "id": 467615205,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1725471206
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/5258\">lean4#5258</a></p>",
        "id": 467618026,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1725471880
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197836\">@Jireh Loreaux</span> Thanks for turning this into a bug report!</p>",
        "id": 467714983,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725510127
    }
]