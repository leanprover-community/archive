[
    {
        "content": "<p>The blueprint on my downstream project has broken. Lake says:</p>\n<p>error: dependency '«doc-gen4»' not in manifest; use <code>lake update «doc-gen4»</code> to add it</p>\n<p>However, running this command does not add this dependency to the project manifest. Lake tells me all my packages are up to date, which is true - they just don't include doc-gen4!<br>\nI also tried the same command without french quotes, to the same non-result.<br>\nDoes anybody know how to fix this issue?</p>",
        "id": 535044238,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1755568844
    },
    {
        "content": "<p>This is usually a result of people use <code>meta if</code> in their lakefiles, which we are strongly discouraging. :-)</p>\n<p>Often the fix is <code>lake update -Kenv=dev</code>, but I don't know what's in your project.</p>",
        "id": 535044701,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755569290
    },
    {
        "content": "<p>Found this in my lakefile:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">meta</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">get_config?</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"s2\">\"dev\"</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"n\">require</span><span class=\"w\"> </span><span class=\"bp\">«</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">»</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span>\n<span class=\"w\">  </span><span class=\"s2\">\"https://github.com/leanprover/doc-gen4\"</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"w\"> </span><span class=\"s2\">\"main\"</span>\n</code></pre></div>\n<p>your suggestion didn't work (same outcome)</p>",
        "id": 535045385,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1755570084
    },
    {
        "content": "<p>Can you give us reproducible instructions for your producing your error state?</p>",
        "id": 535052644,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755577511
    },
    {
        "content": "<p>Not sure what is necessary but:<br>\nGo to this repo<br>\n<a href=\"https://github.com/artie2000/real_closed_field\">https://github.com/artie2000/real_closed_field</a><br>\nand run the \"compile blueprint\" code action</p>",
        "id": 535070493,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1755588816
    },
    {
        "content": "<p>(fixed by simply removing the meta if; don't know if there is an alternative solution)</p>",
        "id": 535768368,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1755906082
    }
]