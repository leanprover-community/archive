[
    {
        "content": "<p>Why is the error reported: compiler IR check failed at '_eval', error: unknown declaration 'Real.sqrt'</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sqrt</span><span class=\"w\"> </span><span class=\"mf\">21.0</span>\n</code></pre></div>",
        "id": 476337498,
        "sender_full_name": "Zihao Zhang",
        "timestamp": 1728635786
    },
    {
        "content": "<p>This is not the error I get in Lean 4 Web. I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"n\">definition</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">compiler</span><span class=\"w\"> </span><span class=\"n\">IR</span><span class=\"w\"> </span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">'_</span><span class=\"n\">eval'</span><span class=\"bp\">.</span>\n<span class=\"n\">Error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">depends</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">declaration</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sqrt'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">executable</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"bp\">;</span>\n<span class=\"n\">consider</span><span class=\"w\"> </span><span class=\"n\">marking</span><span class=\"w\"> </span><span class=\"n\">definition</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"kn\">noncomputable</span><span class=\"bp\">'</span>\n</code></pre></div>\n<p>which makes sense because real numbers are non computable so you can't use eval to compute stuff about them.</p>",
        "id": 476338652,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1728636203
    },
    {
        "content": "<p>However it works with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Float.sqrt#doc\">docs#Float.sqrt</a></p>",
        "id": 476338837,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1728636254
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"703970\">@Etienne Marion</span> real numbers are non computable！It is really strange.</p>",
        "id": 476340199,
        "sender_full_name": "Zihao Zhang",
        "timestamp": 1728636667
    },
    {
        "content": "<p>Not really. They are defined as a quotient of rational Cauchy sequences. So for instance, consider a sequence <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>u</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(u_n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> of rational numbers representing a positive real number. Can you find an algorithm to check that it is positive? No, because you don't know at which time the sequence gets positive and never gets below 0 again.</p>",
        "id": 476340807,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1728636858
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"753034\">Zihao Zhang</span> <a href=\"#narrow/stream/113488-general/topic/about.20Real.2Esqrt/near/476340199\">said</a>:</p>\n<blockquote>\n<p>real numbers are non computable</p>\n</blockquote>\n<p>Strictly speaking, only the following are noncomputable</p>\n<ul>\n<li>Inverses of real numbers</li>\n<li>Roots of real numbers</li>\n<li>Evaluations of inequalities of real numbers</li>\n<li>Computing decimal expansions of real numbers</li>\n</ul>\n<p>so things like <code>x + 1</code> are in fact \"computable\" real functions. In practice though, the distinction isn't useful.</p>",
        "id": 476341401,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728637044
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/about.20Real.2Esqrt/near/476341401\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"753034\">Zihao Zhang</span> <a href=\"#narrow/stream/113488-general/topic/about.20Real.2Esqrt/near/476340199\">said</a>:</p>\n<blockquote>\n<p>real numbers are non computable</p>\n</blockquote>\n<p>Strictly speaking, only the following are noncomputable</p>\n<ul>\n<li>Inverses of real numbers</li>\n<li>Roots of real numbers</li>\n<li>Evaluations of inequalities of real numbers</li>\n<li>Computing decimal expansions of real numbers</li>\n</ul>\n<p>so things like <code>x + 1</code> are in fact \"computable\" real functions. In practice though, the distinction isn't useful.</p>\n</blockquote>\n<p>Thanks! This simple example does have a deep mathematical background behind it.</p>",
        "id": 476342146,
        "sender_full_name": "Zihao Zhang",
        "timestamp": 1728637268
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"753034\">Zihao Zhang</span> has marked this topic as resolved.</p>",
        "id": 476342968,
        "sender_full_name": "Notification Bot",
        "timestamp": 1728637518
    }
]