[
    {
        "content": "<p>This is a new thread for discussion about designing and creating SQLite bindings for Lean, inspired by the ideas in <a class=\"message-link\" href=\"/#narrow/channel/113488-general/topic/Making.20SDL3.20bindings.20for.20Lean.204/near/544995325\">#general &gt; Making SDL3 bindings for Lean 4 @ ðŸ’¬</a> and <a class=\"message-link\" href=\"/#narrow/channel/113488-general/topic/Making.20SDL3.20bindings.20for.20Lean.204/near/545007558\">#general &gt; Making SDL3 bindings for Lean 4 @ ðŸ’¬</a>.</p>",
        "id": 545013411,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760546163
    },
    {
        "content": "<p>As noted in the related <a href=\"#narrow/channel/113488-general/topic/Making.20SDL3.20bindings.20for.20Lean.204/near/545007558\">post</a></p>\n<p>Some of my ideas/needs include</p>\n<ul>\n<li>Proofs with the code.</li>\n<li><a href=\"https://en.wikipedia.org/wiki/Hoare_logic\">Hoare</a>Â pre/post conditions.</li>\n<li>Use ofÂ <a href=\"https://www.sqlite.org/lang_createview.html\">views</a>Â instead of free form text for queries.</li>\n<li>Having more than one SQLite module that would require proofs versus a binding that does not require proofs.</li>\n</ul>",
        "id": 545016198,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1760547004
    },
    {
        "content": "<p>One example of a needed proof would be that when making an SQLite API call, that the database schema does not change. Thinking along those lines many others should come to mind. We take these for granted and presume that databases ensure such ideas; having proofs to back these up should be much approachable with Lean 4.</p>\n<p>Current line of thought is that <a href=\"https://www.sqlite.org/fileformat2.html#schema_cookie\">SQLite schema cookie</a> could be used.</p>",
        "id": 545016219,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1760547009
    },
    {
        "content": "<p>Posting here in case it helps: <a href=\"https://github.com/arthurpaulino/LeanMySQL\">https://github.com/arthurpaulino/LeanMySQL</a><br>\nNote: last updated 3 years ago.</p>",
        "id": 545075668,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1760551651
    },
    {
        "content": "<p>There's also <a href=\"https://github.com/BRonen/sqlite3-lean4/\">https://github.com/BRonen/sqlite3-lean4/</a> and <a href=\"https://github.com/alex-wellbelove/lean_sqlite\">https://github.com/alex-wellbelove/lean_sqlite</a> but both are very incomplete.</p>",
        "id": 545095399,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760552518
    },
    {
        "content": "<p>Yeah okay so, if you guys want to pull this off, you should probably take a look at the lakefile that I made for SDL. I'm pretty sure you could do a similar setup for SQLite:<br>\n<a href=\"https://github.com/ValorZard/lean-sdl3/blob/master/lakefile.lean\">https://github.com/ValorZard/lean-sdl3/blob/master/lakefile.lean</a></p>",
        "id": 545114039,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760556956
    },
    {
        "content": "<p>I found that building the c library from source and then linking it was more consistent on both windows and linux then trying to figure out where the binary is</p>",
        "id": 545114840,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760557244
    },
    {
        "content": "<p>Ah it might be more annoying for SQLite since it doesn't use cmake, and also expects you to have TCL installed somewhere on your system</p>",
        "id": 545115204,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760557388
    },
    {
        "content": "<p>I guess what would be neat is to have a few ways of using the library </p>\n<ol>\n<li>relying on a system installed version of SQLite</li>\n<li>Bundling a vendored version of SQlite built from source</li>\n<li>Somehow prebuilding SQlite and bundling together with the library into one binary</li>\n</ol>",
        "id": 545115747,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760557588
    },
    {
        "content": "<p>builing BRonen's sqlite3-lean4 and yeah it doesn't work on windows</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">downloading</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">releases</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">lang</span><span class=\"bp\">.</span><span class=\"n\">org</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">10</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"mf\">4.10</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">windows</span><span class=\"bp\">.</span><span class=\"n\">tar</span><span class=\"bp\">.</span><span class=\"n\">zst</span>\n<span class=\"mf\">191.8</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mf\">191.8</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"mf\">36.5</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">ETA</span><span class=\"o\">:</span><span class=\"w\">   </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">installing</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.10.0</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">argumentcomputer</span><span class=\"bp\">/</span><span class=\"n\">lspec</span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"bp\">'.\\.\\.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">LSpec'</span>\n<span class=\"n\">Î“</span><span class=\"bp\">Â£Ã»</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">clang</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">.\\.\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">.\\.\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">ffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.10.0\\include -I/nix/store/8r55amvr43sm771rgm0sszd05rm8j1cr-sqlite-3.46.0-dev/include/ -fPIC</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">included</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">.\\.\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">ffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"o\">:</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.10.0/include/lean/lean.h:8:10: fatal error: 'stddef.h' file not found</span>\n<span class=\"bp\">#</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">stddef</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">         </span><span class=\"bp\">^~~~~~~~~~</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">generated</span><span class=\"bp\">.</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">clang'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">builds</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span>\n</code></pre></div>\n<p>This is because the version of clang bundled with Lean is missing a bunch of headers necessary for stuff like this to be compiled properly</p>",
        "id": 545116303,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760557799
    },
    {
        "content": "<p><a href=\"https://github.com/ValorZard/sqlite3-lean4.git\">https://github.com/ValorZard/sqlite3-lean4.git</a><br>\nmade a fork and currently attempting to get this to build properly</p>",
        "id": 545125291,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760561421
    },
    {
        "content": "<p>Currently getting stuck here:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"w\"> </span><span class=\"n\">MSYS</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">github</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"s2\">\"C:</span><span class=\"err\">\\</span><span class=\"s2\">Users</span><span class=\"err\">\\</span><span class=\"s2\">sraya</span><span class=\"err\">\\</span><span class=\"s2\">.elan</span><span class=\"err\">\\</span><span class=\"s2\">bin</span><span class=\"err\">\\</span><span class=\"s2\">lake.exe\"</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">argumentcomputer</span><span class=\"bp\">/</span><span class=\"n\">lspec</span><span class=\"bp\">/</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">8</span><span class=\"n\">a51034d049c6a229d88dd62f490778a377eec06'</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">9</span><span class=\"bp\">/</span><span class=\"mi\">11</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Running</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">libsqlite</span><span class=\"bp\">.</span><span class=\"n\">static</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">SQLite</span><span class=\"bp\">/</span><span class=\"n\">SQLite</span><span class=\"bp\">.</span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">vendor</span><span class=\"bp\">\\</span><span class=\"n\">sqlite</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">SQLite</span><span class=\"bp\">/</span><span class=\"n\">SQLite</span><span class=\"bp\">.</span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">cloned</span><span class=\"w\"> </span><span class=\"n\">successfully</span>\n<span class=\"n\">info</span><span class=\"o\">:</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">vendor</span><span class=\"bp\">\\</span><span class=\"n\">sqlite</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">args</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[]</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unspecified</span><span class=\"w\"> </span><span class=\"n\">system_category</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">193</span><span class=\"o\">)</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">libsqlite</span><span class=\"bp\">.</span><span class=\"n\">static</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n\n<span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"w\"> </span><span class=\"n\">MSYS</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">github</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span>\n<span class=\"bp\">$</span>\n</code></pre></div>",
        "id": 545128226,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760562680
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687543\">David Richter</span> <a href=\"#narrow/channel/270676-lean4/topic/Linking.20a.20C.20library/near/429369692\">said</a>:</p>\n<blockquote>\n<p>Hi, I am trying to wrap sqlite <a href=\"https://github.com/drcicero/sqlite.lean\">https://github.com/drcicero/sqlite.lean</a> </p>\n<p>However, when building i get a lot of errors of style undefined reference due to --no-allow-shlib-undefined</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">clean</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">leansqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Creating</span><span class=\"w\"> </span><span class=\"n\">libleansqlite3</span><span class=\"bp\">.</span><span class=\"n\">a</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Linking</span><span class=\"w\"> </span><span class=\"n\">libleansqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Sqlite</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">Sqlite</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stdout</span><span class=\"o\">:</span>\n<span class=\"bp\">./././</span><span class=\"n\">Test</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">46</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unused</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"ss\">`nmtp</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedVariables</span><span class=\"o\">]</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">Test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Linking</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">dr</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---4.6.0/bin/leanc -o ./.lake/build/bin/test ./.lake/build/ir/Test.c.o ./.lake/build/ir/Sqlite.c.o ./.lake/build/lib/libleansqlite3.a -lsqlite3</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: pthread_join@GLIBC_2.34</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: dlerror@GLIBC_2.34</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: pthread_mutexattr_destroy@GLIBC_2.34</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: exp@GLIBC_2.29</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: pthread_create@GLIBC_2.34</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: log@GLIBC_2.29</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: stat64@GLIBC_2.33</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: pthread_mutexattr_init@GLIBC_2.34</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: fstat64@GLIBC_2.33</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: dlopen@GLIBC_2.34</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: fcntl64@GLIBC_2.28</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: lstat64@GLIBC_2.33</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: pthread_mutexattr_settype@GLIBC_2.34</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: dlsym@GLIBC_2.34</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: pthread_mutex_trylock@GLIBC_2.34</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: pow@GLIBC_2.29</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">reference</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"c1\">--no-allow-shlib-undefined: dlclose@GLIBC_2.34</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">/</span><span class=\"n\">libsqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">`/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">dr</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---4.6.0/bin/leanc` exited with code 1</span>\n</code></pre></div>\n<p>I found another library <a href=\"https://github.com/arthurpaulino/LeanMySQL/blob/master/lakefile.lean\">https://github.com/arthurpaulino/LeanMySQL/blob/master/lakefile.lean</a> which simply adds <code>\"-L/usr/lib/x86_64-linux-gnu/\"</code> to the moreLinkArgs. If I do that it works for me and I can run some simple queries:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">clean</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">leansqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Creating</span><span class=\"w\"> </span><span class=\"n\">libleansqlite3</span><span class=\"bp\">.</span><span class=\"n\">a</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Linking</span><span class=\"w\"> </span><span class=\"n\">libleansqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Sqlite</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">Sqlite</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stdout</span><span class=\"o\">:</span>\n<span class=\"bp\">./././</span><span class=\"n\">Test</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">46</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unused</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"ss\">`nmtp</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedVariables</span><span class=\"o\">]</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">Test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Linking</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"mf\">3.37</span><span class=\"bp\">.</span><span class=\"m\">2</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">SELECT</span><span class=\"w\"> </span><span class=\"n\">SQLITE_VERSION</span><span class=\"o\">()</span>\n<span class=\"w\">  </span><span class=\"o\">[(</span><span class=\"n\">SQLITE_VERSION</span><span class=\"o\">(),</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mf\">3.37</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">DONE</span><span class=\"w\"> </span><span class=\"mi\">101</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">DROP</span><span class=\"w\"> </span><span class=\"n\">TABLE</span><span class=\"w\"> </span><span class=\"n\">IF</span><span class=\"w\"> </span><span class=\"n\">EXISTS</span><span class=\"w\"> </span><span class=\"n\">Cars</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"n\">DONE</span><span class=\"w\"> </span><span class=\"mi\">101</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">CREATE</span><span class=\"w\"> </span><span class=\"n\">TABLE</span><span class=\"w\"> </span><span class=\"n\">Cars</span><span class=\"o\">(</span><span class=\"n\">Id</span><span class=\"w\"> </span><span class=\"n\">INT</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Name</span><span class=\"w\"> </span><span class=\"n\">TEXT</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Price</span><span class=\"w\"> </span><span class=\"n\">INT</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"n\">DONE</span><span class=\"w\"> </span><span class=\"mi\">101</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">INSERT</span><span class=\"w\"> </span><span class=\"n\">INTO</span><span class=\"w\"> </span><span class=\"n\">Cars</span><span class=\"w\"> </span><span class=\"n\">VALUES</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Audi'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">52642</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Mercedes'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">57127</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Skoda'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">9000</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"n\">DONE</span><span class=\"w\"> </span><span class=\"mi\">101</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">INSERT</span><span class=\"w\"> </span><span class=\"n\">INTO</span><span class=\"w\"> </span><span class=\"n\">Cars</span><span class=\"w\"> </span><span class=\"n\">VALUES</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Volvo'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">29000</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Bentley'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">350000</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">6</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Citroen'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">21000</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"n\">DONE</span><span class=\"w\"> </span><span class=\"mi\">101</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">INSERT</span><span class=\"w\"> </span><span class=\"n\">INTO</span><span class=\"w\"> </span><span class=\"n\">Cars</span><span class=\"w\"> </span><span class=\"n\">VALUES</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Hummer'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">41400</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">8</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Volkswagen'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">21600</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"n\">DONE</span><span class=\"w\"> </span><span class=\"mi\">101</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">SELECT</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">FROM</span><span class=\"w\"> </span><span class=\"n\">sqlite_master</span>\n<span class=\"w\">  </span><span class=\"o\">[(</span><span class=\"n\">type</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tbl_name</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rootpage</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sql</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">table</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Cars</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Cars</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">CREATE</span><span class=\"w\"> </span><span class=\"n\">TABLE</span><span class=\"w\"> </span><span class=\"n\">Cars</span><span class=\"o\">(</span><span class=\"n\">Id</span><span class=\"w\"> </span><span class=\"n\">INT</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Name</span><span class=\"w\"> </span><span class=\"n\">TEXT</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Price</span><span class=\"w\"> </span><span class=\"n\">INT</span><span class=\"o\">)]</span>\n<span class=\"w\">  </span><span class=\"n\">DONE</span><span class=\"w\"> </span><span class=\"mi\">101</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">SELECT</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">FROM</span><span class=\"w\"> </span><span class=\"n\">Cars</span>\n<span class=\"w\">  </span><span class=\"o\">[(</span><span class=\"n\">Id</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Name</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Price</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Audi</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">52642</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Mercedes</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">57127</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Skoda</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">9000</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Volvo</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">29000</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Bentley</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">350000</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Citroen</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">21000</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Hummer</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">41400</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">8</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Volkswagen</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">21600</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">DONE</span><span class=\"w\"> </span><span class=\"mi\">101</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">SELECT</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">FROM</span><span class=\"w\"> </span><span class=\"n\">Cars</span><span class=\"w\"> </span><span class=\"n\">WHERE</span><span class=\"w\"> </span><span class=\"n\">Price</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">29000</span>\n<span class=\"w\">  </span><span class=\"o\">[(</span><span class=\"n\">Id</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Name</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Price</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Audi</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">52642</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Mercedes</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">57127</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Bentley</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">350000</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Hummer</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">41400</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">DONE</span><span class=\"w\"> </span><span class=\"mi\">101</span>\n<span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">SELECT</span><span class=\"w\"> </span><span class=\"n\">Name</span><span class=\"w\"> </span><span class=\"n\">FROM</span><span class=\"w\"> </span><span class=\"n\">Cars</span><span class=\"w\"> </span><span class=\"n\">WHERE</span><span class=\"w\"> </span><span class=\"n\">Price</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">29000</span>\n<span class=\"w\">  </span><span class=\"o\">[(</span><span class=\"n\">Name</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">Audi</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">Mercedes</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">Bentley</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">Hummer</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">DONE</span><span class=\"w\"> </span><span class=\"mi\">101</span>\n</code></pre></div>\n<p>However, I suppose that would make the library platform-dependent, which is unsatisfying? I'm wondering whether there is a better way.</p>\n<p>A similar error was posted twice in the past, and <span class=\"user-mention silent\" data-user-id=\"110024\">Sebastian Ullrich</span> responded with:</p>\n<blockquote>\n<p>It seems the library requires a newer version of glibc than Lean targets. When you interface with system libs, it is safer to compile under LEAN_CC=cc in order to use the system C compiler.</p>\n</blockquote>\n<p>However, that doesn't work for me either:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">clean</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">LEAN_CC</span><span class=\"bp\">=</span><span class=\"n\">cc</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">leansqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Creating</span><span class=\"w\"> </span><span class=\"n\">libleansqlite3</span><span class=\"bp\">.</span><span class=\"n\">a</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Linking</span><span class=\"w\"> </span><span class=\"n\">libleansqlite3</span><span class=\"bp\">.</span><span class=\"n\">so</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Sqlite</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">Sqlite</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stdout</span><span class=\"o\">:</span>\n<span class=\"bp\">./././</span><span class=\"n\">Test</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">14</span><span class=\"o\">:</span><span class=\"mi\">46</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unused</span><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"ss\">`nmtp</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedVariables</span><span class=\"o\">]</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Compiling</span><span class=\"w\"> </span><span class=\"n\">Test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Linking</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">dr</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---4.6.0/bin/leanc -o ./.lake/build/bin/test ./.lake/build/ir/Test.c.o ./.lake/build/ir/Sqlite.c.o ./.lake/build/lib/libleansqlite3.a -L/usr/lib/x86_64-linux-gnu/ -lsqlite3</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">ld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cannot</span><span class=\"w\"> </span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">lc</span><span class=\"bp\">++</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span>\n<span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">ld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cannot</span><span class=\"w\"> </span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">lc</span><span class=\"bp\">++</span><span class=\"n\">abi</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span>\n<span class=\"n\">collect2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ld</span><span class=\"w\"> </span><span class=\"n\">returned</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">status</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">`/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">dr</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---4.6.0/bin/leanc` exited with code 1</span>\n</code></pre></div>\n<p>Any ideas?</p>\n</blockquote>",
        "id": 545423133,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760639807
    },
    {
        "content": "<p>Found another lean bindings for SQlite, really the main issue seems to be how to bundle SQlite with Lean, writing the actual C bindings is the easy part</p>",
        "id": 545423256,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760639847
    },
    {
        "content": "<p>We have a few options (similar to your list above):</p>\n<ol>\n<li>Don't bundle SQLite and have the user figure it out themselves. On many Linux distros at least, it's easy to install the SQLite header files with something like <code>apt install libsqlite3-dev</code>.</li>\n<li>The SQLite source code is also available as a <a href=\"https://sqlite.org/amalgamation.html\">single file</a> so we could simply vendor that in our repo and compile and link against it.</li>\n<li>We could use the Nix package manager along with <a href=\"https://github.com/lenianiva/lean4-nix\">lean4-nix</a> but users might be annoyed by needing to install Nix in order to use the SQLite bindings.</li>\n</ol>",
        "id": 545429863,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760642383
    },
    {
        "content": "<p>I would prefer option 2 as an user</p>",
        "id": 545430829,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1760642772
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"950553\">Srayan Jana</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/545115204\">said</a>:</p>\n<blockquote>\n<p>Ah it might be more annoying for SQLite since it doesn't use cmake, and also expects you to have TCL installed somewhere on your system</p>\n</blockquote>\n<p>I just tried compiling the single-file version of SQLite on my Linux computer using <code>gcc main.h sqlite3.c sqlite3.h</code> and it worked perfectly, no Tcl necessary.</p>",
        "id": 545431675,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760643096
    },
    {
        "content": "<p>On the Windows side, using <a href=\"https://learn.microsoft.com/en-us/vcpkg/get_started/overview\">vcpkg</a> with manifest mode (local install vs global install) and using <a href=\"https://learn.microsoft.com/en-us/cpp/build/building-on-the-command-line?view=msvc-170\">MS Visual C++ (CL) compiler</a> with just the command line tools, no need to do a full install of Visual Studio. Since MS Visual C++ come with a version of CMake, a compile of an SQLite demo on WIndows 11 from the command line worked as expected. SQLite3 DLL was installed with <code>.\\vcpkg\\vcpkg.exe install --triplet=x64-windows</code> and a properly configured <code>vcpkg.json</code> and <code>vcpkg-configuration.json</code> installed the needed Windows SQLite DLL and other needed files.</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>vcpkg files installed for SQLite3</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>C:\\Users\\Groot\\Projects\\sqlite_lean_demo\\vcpkg\\packages\\sqlite3_x64-windows&gt;tree /A /F<br>\n.<br>\n|   BUILD_INFO<br>\n|   CONTROL<br>\n|<br>\n+---bin<br>\n|       sqlite3.dll<br>\n|       sqlite3.pdb<br>\n|<br>\n+---debug<br>\n|   +---bin<br>\n|   |       sqlite3.dll<br>\n|   |       sqlite3.pdb<br>\n|   |<br>\n|   \\---lib<br>\n|       |   sqlite3.lib<br>\n|       |<br>\n|       \\---pkgconfig<br>\n|               sqlite3.pc<br>\n|<br>\n+---include<br>\n|       sqlite3-vcpkg-config.h<br>\n|       sqlite3.h<br>\n|       sqlite3ext.h<br>\n|<br>\n+---lib<br>\n|   |   sqlite3.lib<br>\n|   |<br>\n|   \\---pkgconfig<br>\n|           sqlite3.pc<br>\n|<br>\n\\---share<br>\n    +---sqlite3<br>\n    |       copyright<br>\n    |       usage<br>\n    |       vcpkg.spdx.json<br>\n    |       vcpkg_abi_info.txt<br>\n    |<br>\n    \\---unofficial-sqlite3<br>\n            unofficial-sqlite3-config.cmake<br>\n            unofficial-sqlite3-targets-debug.cmake<br>\n            unofficial-sqlite3-targets-release.cmake<br>\n            unofficial-sqlite3-targets.cmake</p>\n</div></div>\n<p>Holding off on posting the details because they may not be easily reproducible for a novice programmer. As the <a href=\"https://magic-8ball.com/magic-8-ball-answers/\">8-ball</a> would say <code>Outlook good</code>.</p>",
        "id": 545433985,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1760644066
    },
    {
        "content": "<p>oo i didn't know about the single file version. ill use that instead</p>",
        "id": 545459853,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760658293
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"910779\">@Anthony Wang</span> <a href=\"https://github.com/BRonen/sqlite3-lean4/pull/1\">https://github.com/BRonen/sqlite3-lean4/pull/1</a><br>\ngot sqlite working</p>",
        "id": 545461823,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760659813
    },
    {
        "content": "<p>Awesome! I was able to compile your PR painlessly. I'm now trying to modernize the test suite and get it to pass all the tests again.</p>",
        "id": 545472542,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760666921
    },
    {
        "content": "<p>I made a fork and pushed my changes to it, although one test is still mysteriously failing: <a href=\"https://github.com/usernamenotavailablepleasechooseanother/sqlite3-lean4/commit/4536f096ac3c7b4338929845ab9e3912c012f350\">https://github.com/usernamenotavailablepleasechooseanother/sqlite3-lean4/commit/4536f096ac3c7b4338929845ab9e3912c012f350</a></p>",
        "id": 545473939,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760667946
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"910779\">@Anthony Wang</span> you can submit a PR to my fork and i can merge it</p>",
        "id": 545474646,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760668556
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"979173\">@Brenno Rodrigues</span> is the guy who owns the parent repository. Hello!</p>",
        "id": 545476989,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760670697
    },
    {
        "content": "<p>As an aside, I wish Lean had a less annoying way of doing the c compiler stuff. It's weird that Lean comes bundled with a c compiler, and yet its not very useful since its missing a bunch of headers</p>",
        "id": 545477027,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760670744
    },
    {
        "content": "<p>I don't think SQLite needs any headers other than the C standard library, since I was able to successfully compile this project using the bundled <code>leanc</code> compiler.</p>",
        "id": 545478150,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760671971
    },
    {
        "content": "<p>hm okay, i guess we just gotta link to that instead then. how did you do that btw?</p>",
        "id": 545478728,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760672573
    },
    {
        "content": "<p>I changed the line in the lakefile to <code>def compiler := \"leanc\"</code> and it just workedâ„¢.</p>",
        "id": 545478882,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760672737
    },
    {
        "content": "<p>Hello! Iâ€™m happy to see that my SQLite bindings might be useful. Iâ€™ll keep following the discussion, and let me know if thereâ€™s anything I can do to help.</p>",
        "id": 545478902,
        "sender_full_name": "Brenno Rodrigues",
        "timestamp": 1760672761
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"910779\">Anthony Wang</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/545478882\">said</a>:</p>\n<blockquote>\n<p>I changed the line in the lakefile to <code>def compiler := \"leanc\"</code> and it just workedâ„¢.</p>\n</blockquote>\n<p>Oh yeah, that just worked. Neat! No external dependencies!</p>",
        "id": 545480173,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760673864
    },
    {
        "content": "<p>Building a persistent extension of Janet is in my backlog. Binding Sqlite3 is not that difficult, as the database logic is on the Sqlite3 side. Since Sqlite3 is not a column database, many use cases can use a network database instead.</p>\n<p>tl;dr, Build a network database with Janet object model. It does not have to be fast.</p>",
        "id": 545501797,
        "sender_full_name": "Locria Cyber",
        "timestamp": 1760686462
    },
    {
        "content": "<p>Prior art: Metakit, whitedb</p>\n<p>Janet as a query language is much better than SQL.</p>",
        "id": 545501968,
        "sender_full_name": "Locria Cyber",
        "timestamp": 1760686518
    },
    {
        "content": "<p>Thanks for the suggestion, but it's off-topic for this project since we already decided on using SQLite. (but feel free to start your own project for Lean bindings to other DBs!)</p>",
        "id": 545580779,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760711102
    },
    {
        "content": "<p>This is more or less related, but one thing that's been in my mind is the creation of Lean bindings for <a href=\"https://spark.apache.org/\">Apache Spark</a>.</p>\n<p>Data pipelines could definitely benefit from stronger guarantees that can be achieved with a richer type system. For a single-point example, joining two dataframes is only valid if the joint key is present on both sides. Ideally, such errors should happen at compilation time so the ETL doesn't break at 3am.</p>",
        "id": 545585621,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1760712359
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"910779\">Anthony Wang</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/545472542\">said</a>:</p>\n<blockquote>\n<p>Awesome! I was able to compile your PR painlessly. I'm now trying to modernize the test suite and get it to pass all the tests again.</p>\n</blockquote>\n<p>Finally found the bug: <code>cursor.bindInt 1 69</code> actually ends up using 34 instead of 69, since the code was unboxing an already unboxed int32.</p>",
        "id": 545588965,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760713220
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"910779\">Anthony Wang</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/545588965\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"910779\">Anthony Wang</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/545472542\">said</a>:</p>\n<blockquote>\n<p>Awesome! I was able to compile your PR painlessly. I'm now trying to modernize the test suite and get it to pass all the tests again.</p>\n</blockquote>\n<p>Finally found the bug: <code>cursor.bindInt 1 69</code> actually ends up using 34 instead of 69, since the code was unboxing an already unboxed int32.</p>\n</blockquote>\n<p>Neat! Send me a PR my way and I'll merge it</p>",
        "id": 545720985,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760752881
    },
    {
        "content": "<p>or, what would probably be better<br>\n<span class=\"user-mention\" data-user-id=\"979173\">@Brenno Rodrigues</span> you can merge what I have so far, and then Anthony could submit his PR later</p>",
        "id": 545721026,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760752929
    },
    {
        "content": "<p>Oh i see you already gave me a pull request for it</p>",
        "id": 545721398,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760753346
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"910779\">@Anthony Wang</span> </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">â„¹</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">cc1</span><span class=\"bp\">.</span><span class=\"n\">exe</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">directory</span>\n<span class=\"n\">cc1</span><span class=\"bp\">.</span><span class=\"n\">exe</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3ext</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">directory</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">leanc</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\include -I C:\\github\\sqlite3-lean4\\native -fPIC</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fatal</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">stdio</span><span class=\"bp\">.</span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span>\n<span class=\"w\">    </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">stdio</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">          </span><span class=\"bp\">^~~~~~~~~</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">generated</span><span class=\"bp\">.</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">leanc'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span>\n</code></pre></div>",
        "id": 545721557,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760753549
    },
    {
        "content": "<p>Merging your PR breaks building it using lean's built in C compiler</p>",
        "id": 545721576,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760753571
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> this is something I've run into a bunch of times at this point, do you know why leanc doesn't come with stdio.h?</p>",
        "id": 545721596,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760753600
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"950553\">@Srayan Jana</span> Lean comes with minimal C stdlib designed to support building the C code prdouce by <code>lean</code>. If a user needs more of the C standard library, the suggested approach is to use a standard C compiler available on the system rather than <code>leanc</code> to build the code. However, that can be inconvenient, as It makes the distribution of FFI packages more complex (downstream users then need to ensure they also install the proper C toolchain).</p>",
        "id": 545721906,
        "sender_full_name": "Mac Malone",
        "timestamp": 1760754077
    },
    {
        "content": "<p>Yeah I really don't want to have to tell people to go and install clang or gcc if they don't need to (especially if your a Mathematician who just wants to use SQLite for stuff)</p>",
        "id": 545721929,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760754119
    },
    {
        "content": "<p>This is something I would like to see improved in the future, but I am not sure when it will be a priority.</p>",
        "id": 545721954,
        "sender_full_name": "Mac Malone",
        "timestamp": 1760754157
    },
    {
        "content": "<p>it also makes it annoying cuz i bet this builds perfectly fine on linux with leanc, but not on windows for whatever reason</p>",
        "id": 545721956,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760754160
    },
    {
        "content": "<p>It might be worth making an <a href=\"https://github.com/leanprover/lean4/issues\">issue</a> on the Lean GitHub repoistory summarizing the difficulties. That could result in action on this front sooner.</p>",
        "id": 545722016,
        "sender_full_name": "Mac Malone",
        "timestamp": 1760754279
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> <a href=\"https://github.com/leanprover/lean4/issues/10831\">https://github.com/leanprover/lean4/issues/10831</a><br>\nDid it</p>",
        "id": 545722215,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760754534
    },
    {
        "content": "<p>For now, I guess i'll switch to using the CC environment variable</p>",
        "id": 545722319,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760754659
    },
    {
        "content": "<p>I also noticed this problem earlier today when trying to compile this project on Ubuntu (although it works fine on NixOS). The Lean developers have said in the past though that they prefer distributing only a minimal set of headers and that FFI projects should use external toolchains: <a href=\"https://github.com/leanprover/lean4/pull/733#issuecomment-948385438\">https://github.com/leanprover/lean4/pull/733#issuecomment-948385438</a></p>",
        "id": 545723054,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760755766
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"910779\">Anthony Wang</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/545723054\">said</a>:</p>\n<blockquote>\n<p>I also noticed this problem earlier today when trying to compile this project on Ubuntu (although it works fine on NixOS). The Lean developers have said in the past though that they prefer distributing only a minimal set of headers and that FFI projects should use external toolchains: <a href=\"https://github.com/leanprover/lean4/pull/733#issuecomment-948385438\">https://github.com/leanprover/lean4/pull/733#issuecomment-948385438</a></p>\n</blockquote>\n<p>I think you could still leave a message/thumbs up on the issue and maybe we can get the lean devs to change their minds.</p>\n<p>(Also, off topic, but I tried the CC solution you mentioned and it didn't work)</p>",
        "id": 545723101,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760755850
    },
    {
        "content": "<p>I tried using gcc instead of leanc on Ubuntu 25.10 and ran into this error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">31</span><span class=\"bp\">/</span><span class=\"mi\">31</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Tests</span><span class=\"bp\">.</span><span class=\"n\">Sqlite</span><span class=\"o\">:</span><span class=\"n\">exe</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">root</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---4.24.0/bin/clang -o /sqlite3-lean4/.lake/build/bin/Tests-Sqlite /sqlite3-lean4/.lake/build/ir/Tests/Sqlite.c.o.export /sqlite3-lean4/.lake/build/ir/Sqlite/FFI.c.o.export /sqlite3-lean4/.lake/build/ir/Sqlite.c.o.export /sqlite3-lean4/.lake/packages/LSpec/.lake/build/ir/LSpec/SlimCheck/Control/DefaultRange.c.o.export /sqlite3-lean4/.lake/packages/LSpec/.lake/build/ir/LSpec/SlimCheck/Control/Random.c.o.export /sqlite3-lean4/.lake/packages/LSpec/.lake/build/ir/LSpec/SlimCheck/Gen.c.o.export /sqlite3-lean4/.lake/packages/LSpec/.lake/build/ir/LSpec/SlimCheck/Sampleable.c.o.export /sqlite3-lean4/.lake/packages/LSpec/.lake/build/ir/LSpec/SlimCheck/Checkable.c.o.export /sqlite3-lean4/.lake/packages/LSpec/.lake/build/ir/LSpec/LSpec.c.o.export /sqlite3-lean4/.lake/packages/LSpec/.lake/build/ir/LSpec/Instances.c.o.export /sqlite3-lean4/.lake/packages/LSpec/.lake/build/ir/LSpec/SlimCheck.c.o.export /sqlite3-lean4/.lake/packages/LSpec/.lake/build/ir/LSpec.c.o.export /sqlite3-lean4/.lake/build/lib/libsqliteffi.a -L /root/.elan/toolchains/leanprover--lean4---4.24.0/lib/lean --sysroot /root/.elan/toolchains/leanprover--lean4---4.24.0 -L /root/.elan/toolchains/leanprover--lean4---4.24.0/lib -L /root/.elan/toolchains/leanprover--lean4---4.24.0/lib/glibc -lc -lc_nonshared -Wl,--as-needed -l:ld.so -Wl,--no-as-needed -lpthread_nonshared -Wl,--as-needed -Wl,-Bstatic -lgmp -lunwind -luv -Wl,-Bdynamic -Wl,--no-as-needed -fuse-ld=lld -Wl,--start-group -lleancpp -lLean -Wl,--end-group -lStd -Wl,--start-group -lInit -lleanrt -Wl,--end-group -Wl,-Bstatic -lc++ -lc++abi -Wl,-Bdynamic -lLake -Wl,--as-needed -lgmp -luv -lpthread -ldl -lrt -Wl,--no-as-needed -lm -ldl -pthread</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fcntl64</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\">               </span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"n\">aSyscall</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">libsqliteffi</span><span class=\"bp\">.</span><span class=\"n\">a</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">root</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---4.24.0/bin/clang' exited with code 1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tests</span><span class=\"bp\">.</span><span class=\"n\">Sqlite</span><span class=\"o\">:</span><span class=\"n\">exe</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n</code></pre></div>\n<p>My guess is because Ubuntu has a very recent glibc whereas Lean ships with a much older version, so it's failing when trying to link the gcc-compiled <code>sqlite3.o</code> with the other code compiled by leanc.</p>",
        "id": 545723768,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760756792
    },
    {
        "content": "<p>I had a similar error when setting compiler to \"clang\" on windows</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">Tests</span><span class=\"bp\">.</span><span class=\"n\">Sqlite</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">argumentcomputer</span><span class=\"bp\">/</span><span class=\"n\">lspec</span><span class=\"bp\">/</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">1</span><span class=\"n\">fc461a9b83eeb68da34df72cec2ef1994e906cb'</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"bp\">/</span><span class=\"mi\">31</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">clang</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\include -I C:\\github\\sqlite3-lean4\\native -fPIC</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">included</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"o\">:</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0/include/lean/lean.h:8:10: fatal error: 'stddef.h' file not found</span>\n<span class=\"w\">    </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">stddef</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">          </span><span class=\"bp\">^~~~~~~~~~</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">generated</span><span class=\"bp\">.</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">clang'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"bp\">/</span><span class=\"mi\">31</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">clang</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">fPIC</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">354</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fatal</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">stdarg</span><span class=\"bp\">.</span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span>\n<span class=\"w\">  </span><span class=\"mi\">354</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">stdarg</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"bp\">&gt;</span><span class=\"w\">     </span><span class=\"bp\">/*</span><span class=\"w\"> </span><span class=\"n\">Needed</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">definition</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">va_list</span><span class=\"w\"> </span><span class=\"bp\">*/</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">          </span><span class=\"bp\">^~~~~~~~~~</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">generated</span><span class=\"bp\">.</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">clang'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span>\n</code></pre></div>",
        "id": 545723961,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760757102
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"910779\">Anthony Wang</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/545723768\">said</a>:</p>\n<blockquote>\n<p>My guess is because Ubuntu has a very recent glibc whereas Lean ships with a much older version, so it's failing when trying to link the gcc-compiled <code>sqlite3.o</code> with the other code compiled by leanc.</p>\n</blockquote>\n<p>\"Solved\" this issue using a very gross hack in the lakefile: <code>moreLinkArgs := #[\"-Wl,--unresolved-symbols=ignore-all\"]</code></p>",
        "id": 545724371,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760757700
    },
    {
        "content": "<p>If I remember, moreLinkArgs does not get inherited by projects that use this as a dependency, so whoever uses this library will also have to pass that arg in, which is not great</p>",
        "id": 545724400,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760757758
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315577\">Mac Malone</span> <a href=\"#narrow/dm/315577,950553-dm/near/540706090\">said</a>:</p>\n<blockquote>\n<p><code>moreLinkArgs</code> are not inherited, so you may need to add it to the <code>lean_exe</code> (in <code>lean-sdl-test</code>) as well.</p>\n</blockquote>",
        "id": 545724418,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760757795
    },
    {
        "content": "<p>Seems like if we want to distribute this library at all, we might just have to \"fix\" leanc itself</p>",
        "id": 545724485,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760757933
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"950553\">Srayan Jana</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/545723961\">said</a>:</p>\n<blockquote>\n<p>I had a similar error when setting compiler to \"clang\" on windows</p>\n</blockquote>\n<p><code>c:\\Users\\sraya\\.elan\\toolchains\\leanprover--lean4---v4.24.0\\include</code> is the directory for Lean's bundled headers, so on your computer, which files are in there? Is there <code>stddef.h</code>?</p>",
        "id": 545724807,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760758399
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/dxuLIFSDhGFXiaS7PFeJkG6e/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/dxuLIFSDhGFXiaS7PFeJkG6e/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1123x333\" src=\"/user_uploads/thumbnail/3121/dxuLIFSDhGFXiaS7PFeJkG6e/image.png/840x560.webp\"></a></div>",
        "id": 545724826,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760758434
    },
    {
        "content": "<p>What's in the clang folder?</p>",
        "id": 545724831,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760758442
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/iJ2yzqNrhbCKzfkRkP01A-HH/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/iJ2yzqNrhbCKzfkRkP01A-HH/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1313x840\" src=\"/user_uploads/thumbnail/3121/iJ2yzqNrhbCKzfkRkP01A-HH/image.png/840x560.webp\"></a></div>",
        "id": 545724837,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760758450
    },
    {
        "content": "<p>Huh, so it is in there. What's the output of running that <code>clang</code> command manually? Also, there's a <code>c:\\</code> instead of <code>C:\\</code>, so could that be the problem?</p>",
        "id": 545724902,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760758564
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">clang</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\include -I C:\\github\\sqlite3-lean4\\native -fPIC</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unsupported</span><span class=\"w\"> </span><span class=\"n\">option</span><span class=\"w\"> </span><span class=\"bp\">'-</span><span class=\"n\">fPIC'</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">pc</span><span class=\"bp\">-</span><span class=\"n\">windows</span><span class=\"bp\">-</span><span class=\"n\">msvc'</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">```</span>\n</code></pre></div>",
        "id": 545724929,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760758593
    },
    {
        "content": "<p>Oh wait I'm dumb, this is for compiling <code>sqliteffi.o</code> so we should be using the system toolchain's headers instead of Lean's bundled headers, so maybe there's something wrong with your clang installation?</p>\n<p>(Ignore the stuff I said about <code>`c:\\Users\\sraya\\.elan\\toolchains\\leanprover--lean4---v4.24.0\\include</code>, it's probably not relevant)</p>",
        "id": 545725013,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760758713
    },
    {
        "content": "<p>ugh for some reason its using the swift version of LLVM???</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">Tests</span><span class=\"bp\">.</span><span class=\"n\">Sqlite</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">27</span><span class=\"bp\">/</span><span class=\"mi\">31</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">clang</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\include -I C:\\github\\sqlite3-lean4\\native -fPIC</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">included</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"o\">:</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0/include/lean/lean.h:8:10: fatal error: 'stddef.h' file not found</span>\n<span class=\"w\">    </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">stddef</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">          </span><span class=\"bp\">^~~~~~~~~~</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">generated</span><span class=\"bp\">.</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">clang'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">28</span><span class=\"bp\">/</span><span class=\"mi\">31</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">clang</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">fPIC</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">354</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fatal</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">stdarg</span><span class=\"bp\">.</span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span>\n<span class=\"w\">  </span><span class=\"mi\">354</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">stdarg</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"bp\">&gt;</span><span class=\"w\">     </span><span class=\"bp\">/*</span><span class=\"w\"> </span><span class=\"n\">Needed</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">definition</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">va_list</span><span class=\"w\"> </span><span class=\"bp\">*/</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">          </span><span class=\"bp\">^~~~~~~~~~</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">generated</span><span class=\"bp\">.</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">clang'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">clang</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">v</span>\n<span class=\"n\">clang</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">19.1</span><span class=\"bp\">.</span><span class=\"m\">5</span>\n<span class=\"n\">Target</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">unknown</span><span class=\"bp\">-</span><span class=\"n\">windows</span><span class=\"bp\">-</span><span class=\"n\">msvc</span>\n<span class=\"n\">Thread</span><span class=\"w\"> </span><span class=\"n\">model</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">posix</span>\n<span class=\"n\">InstalledDir</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\</span><span class=\"n\">AppData</span><span class=\"bp\">\\</span><span class=\"n\">Local</span><span class=\"bp\">\\</span><span class=\"n\">Programs</span><span class=\"bp\">\\</span><span class=\"n\">Swift</span><span class=\"bp\">\\</span><span class=\"n\">Toolchains</span><span class=\"bp\">\\</span><span class=\"mf\">6.2</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">+</span><span class=\"n\">Asserts</span><span class=\"bp\">\\</span><span class=\"n\">usr</span><span class=\"bp\">\\</span><span class=\"n\">bin</span>\n<span class=\"n\">Build</span><span class=\"w\"> </span><span class=\"n\">config</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"n\">assertions</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span>\n</code></pre></div>",
        "id": 545725826,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760759918
    },
    {
        "content": "<p>Yeah that would explain it.</p>",
        "id": 545725841,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760759948
    },
    {
        "content": "<p>Have you tried using WSL to compile it?</p>",
        "id": 545726158,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760760219
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"451983\">Arthur Paulino</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/545075668\">said</a>:</p>\n<blockquote>\n<p>Posting here in case it helps: <a href=\"https://github.com/arthurpaulino/LeanMySQL\">https://github.com/arthurpaulino/LeanMySQL</a><br>\nNote: last updated 3 years ago.</p>\n</blockquote>\n<p>I'm currently reading the code for LeanMySQL since we might be able to borrow large portions of <a href=\"https://github.com/arthurpaulino/LeanMySQL/blob/master/lib/SQLDSL.lean\">SQLDSL.lean</a> and <a href=\"https://github.com/arthurpaulino/LeanMySQL/blob/master/lib/SQLSyntax.lean\">SQLSyntax.lean</a> for our SQLite project.</p>",
        "id": 545726755,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760760977
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"910779\">@Anthony Wang</span> </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">downloading</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">releases</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">lang</span><span class=\"bp\">.</span><span class=\"n\">org</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">24</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"mf\">4.24</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">.</span><span class=\"n\">tar</span><span class=\"bp\">.</span><span class=\"n\">zst</span>\n<span class=\"mf\">438.3</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mf\">438.3</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"o\">)</span><span class=\"w\">   </span><span class=\"mf\">9.7</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">ETA</span><span class=\"o\">:</span><span class=\"w\">   </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">installing</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">argumentcomputer</span><span class=\"bp\">/</span><span class=\"n\">lspec</span><span class=\"bp\">/</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">1</span><span class=\"n\">fc461a9b83eeb68da34df72cec2ef1994e906cb'</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">leanc</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0/include -I /home/sraya/sqlite3-lean4/native -fPIC</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">3</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fatal</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">stdio</span><span class=\"bp\">.</span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span>\n<span class=\"w\">    </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">stdio</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">          </span><span class=\"bp\">^~~~~~~~~</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">generated</span><span class=\"bp\">.</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">leanc'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">leanc</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">fPIC</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">15049</span><span class=\"o\">:</span><span class=\"mi\">10</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fatal</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">stdio</span><span class=\"bp\">.</span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span>\n<span class=\"w\"> </span><span class=\"mi\">15049</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">include</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">stdio</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">       </span><span class=\"bp\">|</span><span class=\"w\">          </span><span class=\"bp\">^~~~~~~~~</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">generated</span><span class=\"bp\">.</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">leanc'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n<span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">$</span>\n</code></pre></div>\n<p>i get this same error on ubuntu ugh</p>",
        "id": 545727728,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760762056
    },
    {
        "content": "<p>Can you try building my fork? It has a commit that should fix that problem.</p>",
        "id": 545727827,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1760762175
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"bp\">..</span>\n<span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~$</span><span class=\"w\"> </span><span class=\"n\">rm</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">rf</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span>\n<span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~$</span><span class=\"w\"> </span><span class=\"n\">ls</span>\n<span class=\"n\">SDL</span><span class=\"w\">  </span><span class=\"n\">guile</span><span class=\"w\">  </span><span class=\"n\">life</span><span class=\"w\">  </span><span class=\"n\">sdl3</span><span class=\"bp\">-</span><span class=\"n\">hs</span><span class=\"w\">  </span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span>\n<span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~$</span><span class=\"w\"> </span><span class=\"n\">explorer</span><span class=\"bp\">.</span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"bp\">.</span>\n<span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~$</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">clone</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">usernamenotavailablepleasechooseanother</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">.</span><span class=\"n\">git</span>\n<span class=\"n\">Cloning</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4'</span><span class=\"bp\">...</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Enumerating</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">263</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Counting</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">263</span><span class=\"bp\">/</span><span class=\"mi\">263</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Compressing</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">104</span><span class=\"bp\">/</span><span class=\"mi\">104</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Total</span><span class=\"w\"> </span><span class=\"mi\">263</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">delta</span><span class=\"w\"> </span><span class=\"mi\">122</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">reused</span><span class=\"w\"> </span><span class=\"mi\">236</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">delta</span><span class=\"w\"> </span><span class=\"mi\">98</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">pack</span><span class=\"bp\">-</span><span class=\"n\">reused</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"n\">Receiving</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">263</span><span class=\"bp\">/</span><span class=\"mi\">263</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"mf\">2.75</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mf\">7.89</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">Resolving</span><span class=\"w\"> </span><span class=\"n\">deltas</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">122</span><span class=\"bp\">/</span><span class=\"mi\">122</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~$</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"n\">sdl3</span><span class=\"bp\">-</span><span class=\"n\">hs</span><span class=\"bp\">/</span><span class=\"w\">       </span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span>\n<span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~$</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span>\n<span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">argumentcomputer</span><span class=\"bp\">/</span><span class=\"n\">lspec</span><span class=\"bp\">/</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">1</span><span class=\"n\">fc461a9b83eeb68da34df72cec2ef1994e906cb'</span>\n<span class=\"n\">â„¹</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">connection_finalize</span><span class=\"bp\">â€™</span><span class=\"o\">:</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">29</span><span class=\"o\">:</span><span class=\"mi\">33</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">format</span><span class=\"w\"> </span><span class=\"bp\">â€˜%</span><span class=\"n\">x</span><span class=\"bp\">â€™</span><span class=\"w\"> </span><span class=\"n\">expects</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">unsigned</span><span class=\"w\"> </span><span class=\"n\">int</span><span class=\"bp\">â€™</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">void</span><span class=\"w\"> </span><span class=\"bp\">*â€™</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"n\">Wformat</span><span class=\"bp\">=</span><span class=\"o\">]</span>\n<span class=\"w\">   </span><span class=\"mi\">29</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\">   </span><span class=\"n\">printf</span><span class=\"o\">(</span><span class=\"s2\">\"connection_finalize: %x</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">conn</span><span class=\"o\">)</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                                </span><span class=\"bp\">~^</span><span class=\"w\">     </span><span class=\"bp\">~~~~</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                                 </span><span class=\"bp\">|</span><span class=\"w\">     </span><span class=\"bp\">|</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                                 </span><span class=\"bp\">|</span><span class=\"w\">     </span><span class=\"n\">void</span><span class=\"w\"> </span><span class=\"bp\">*</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                                 </span><span class=\"n\">unsigned</span><span class=\"w\"> </span><span class=\"n\">int</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                                </span><span class=\"bp\">%</span><span class=\"n\">p</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">cursor_finalize</span><span class=\"bp\">â€™</span><span class=\"o\">:</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">37</span><span class=\"o\">:</span><span class=\"mi\">29</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">format</span><span class=\"w\"> </span><span class=\"bp\">â€˜%</span><span class=\"n\">x</span><span class=\"bp\">â€™</span><span class=\"w\"> </span><span class=\"n\">expects</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">unsigned</span><span class=\"w\"> </span><span class=\"n\">int</span><span class=\"bp\">â€™</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">void</span><span class=\"w\"> </span><span class=\"bp\">*â€™</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"n\">Wformat</span><span class=\"bp\">=</span><span class=\"o\">]</span>\n<span class=\"w\">   </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\">   </span><span class=\"n\">printf</span><span class=\"o\">(</span><span class=\"s2\">\"cursor_finalize: %x</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">cursor</span><span class=\"o\">)</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                            </span><span class=\"bp\">~^</span><span class=\"w\">     </span><span class=\"bp\">~~~~~~</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                             </span><span class=\"bp\">|</span><span class=\"w\">     </span><span class=\"bp\">|</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                             </span><span class=\"bp\">|</span><span class=\"w\">     </span><span class=\"n\">void</span><span class=\"w\"> </span><span class=\"bp\">*</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                             </span><span class=\"n\">unsigned</span><span class=\"w\"> </span><span class=\"n\">int</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                            </span><span class=\"bp\">%</span><span class=\"n\">p</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">lean_sqlite_open</span><span class=\"bp\">â€™</span><span class=\"o\">:</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">52</span><span class=\"o\">:</span><span class=\"mi\">35</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">format</span><span class=\"w\"> </span><span class=\"bp\">â€˜%</span><span class=\"n\">x</span><span class=\"bp\">â€™</span><span class=\"w\"> </span><span class=\"n\">expects</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">unsigned</span><span class=\"w\"> </span><span class=\"n\">int</span><span class=\"bp\">â€™</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">sqlite3</span><span class=\"w\"> </span><span class=\"bp\">*â€™</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"n\">Wformat</span><span class=\"bp\">=</span><span class=\"o\">]</span>\n<span class=\"w\">   </span><span class=\"mi\">52</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\">   </span><span class=\"n\">printf</span><span class=\"o\">(</span><span class=\"s2\">\"initialize_connection: %x</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">conn</span><span class=\"o\">)</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                                  </span><span class=\"bp\">~^</span><span class=\"w\">     </span><span class=\"bp\">~~~~</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                                   </span><span class=\"bp\">|</span><span class=\"w\">     </span><span class=\"bp\">|</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                                   </span><span class=\"bp\">|</span><span class=\"w\">     </span><span class=\"n\">sqlite3</span><span class=\"w\"> </span><span class=\"bp\">*</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                                   </span><span class=\"n\">unsigned</span><span class=\"w\"> </span><span class=\"n\">int</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">In</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">lean_sqlite_prepare</span><span class=\"bp\">â€™</span><span class=\"o\">:</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">native</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">72</span><span class=\"o\">:</span><span class=\"mi\">31</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">format</span><span class=\"w\"> </span><span class=\"bp\">â€˜%</span><span class=\"n\">x</span><span class=\"bp\">â€™</span><span class=\"w\"> </span><span class=\"n\">expects</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">unsigned</span><span class=\"w\"> </span><span class=\"n\">int</span><span class=\"bp\">â€™</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"bp\">â€˜</span><span class=\"n\">sqlite3_stmt</span><span class=\"w\"> </span><span class=\"bp\">*â€™</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"n\">Wformat</span><span class=\"bp\">=</span><span class=\"o\">]</span>\n<span class=\"w\">   </span><span class=\"mi\">72</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\">   </span><span class=\"n\">printf</span><span class=\"o\">(</span><span class=\"s2\">\"initialize_cursor: %x</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">cursor</span><span class=\"o\">)</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                              </span><span class=\"bp\">~^</span><span class=\"w\">     </span><span class=\"bp\">~~~~~~</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                               </span><span class=\"bp\">|</span><span class=\"w\">     </span><span class=\"bp\">|</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                               </span><span class=\"bp\">|</span><span class=\"w\">     </span><span class=\"n\">sqlite3_stmt</span><span class=\"w\"> </span><span class=\"bp\">*</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\">                               </span><span class=\"n\">unsigned</span><span class=\"w\"> </span><span class=\"n\">int</span>\n<span class=\"n\">Build</span><span class=\"w\"> </span><span class=\"n\">completed</span><span class=\"w\"> </span><span class=\"n\">successfully</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"n\">jobs</span><span class=\"o\">)</span><span class=\"bp\">.</span>\n<span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">$</span>\n</code></pre></div>",
        "id": 545727943,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760762306
    },
    {
        "content": "<p>yippe! lemme try this on windows real quick</p>",
        "id": 545727951,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760762318
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">argumentcomputer</span><span class=\"bp\">/</span><span class=\"n\">lspec</span><span class=\"bp\">/</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">1</span><span class=\"n\">fc461a9b83eeb68da34df72cec2ef1994e906cb'</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">cc</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">fPIC</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">execute</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">cc'</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">cc</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\include -I C:\\github\\sqlite3-lean4-wang\\native -fPIC</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">execute</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">cc'</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">&gt;</span>\n</code></pre></div>",
        "id": 545728018,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760762416
    },
    {
        "content": "<p>yep as expected fails on windows (on my computer at least)</p>",
        "id": 545728025,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760762428
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">echo</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">Env</span><span class=\"o\">:</span><span class=\"n\">CC</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\</span><span class=\"n\">scoop</span><span class=\"bp\">\\</span><span class=\"n\">apps</span><span class=\"bp\">\\</span><span class=\"n\">gcc</span><span class=\"bp\">\\</span><span class=\"n\">current</span><span class=\"bp\">\\</span><span class=\"n\">bin</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">&gt;</span>\n</code></pre></div>",
        "id": 545728093,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1760762510
    },
    {
        "content": "<p>so, what should we do now? think we should go back and just have it so that you need gcc on your computer to compile it?</p>",
        "id": 546371558,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761113482
    },
    {
        "content": "<p>I think we should first merge the two PRs and move on for now to working on other features like embedding SQL syntax into Lean. Maybe the Lean bug you created about leanc missing headers might get fixed in the future, or we come up with other ideas for making compilation less painful. So we shouldn't let it be a blocker for now, as long as you have some workaround for compiling it (I think you said WSL works).</p>",
        "id": 546481955,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1761145387
    },
    {
        "content": "<p>Yeah I guess we just have to tell people to use Linux or WSL for now</p>",
        "id": 546543844,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761164228
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"979173\">@Brenno Rodrigues</span> think weâ€™re ready to merge (make sure to test on your computer first though)</p>",
        "id": 546544012,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761164284
    },
    {
        "content": "<p>If anyone else here is using windows, Iâ€™d appreciate if people could test on their computer as well</p>",
        "id": 546544064,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761164303
    },
    {
        "content": "<p>We should add a reference to this issue on the readme explaining why we recommend sticking with Linux for now (<a href=\"https://github.com/leanprover/lean4/issues/10831\">https://github.com/leanprover/lean4/issues/10831</a>)</p>",
        "id": 546544523,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761164490
    },
    {
        "content": "<p>Iâ€™ll take a look and merge later. I can also try testing on a windows machine I have here too</p>",
        "id": 546544991,
        "sender_full_name": "Brenno Rodrigues",
        "timestamp": 1761164659
    },
    {
        "content": "<p>I tested it on both Linux and Windows and it worked pretty well, merged.<br>\nAlso, do you guys want to keep the github action? I fixed it to run without the old Nix setup.<br>\n<a href=\"https://github.com/BRonen/sqlite3-lean4/pull/2\">https://github.com/BRonen/sqlite3-lean4/pull/2</a></p>",
        "id": 546644518,
        "sender_full_name": "Brenno Rodrigues",
        "timestamp": 1761215751
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"979173\">Brenno Rodrigues</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/546644518\">said</a>:</p>\n<blockquote>\n<p>tested it on both Linux and Windows</p>\n</blockquote>\n<p>As I have an interest in Lean code that works on Windows might also test it on Windows, but at present not sure of exactly what <em>it</em> is, can you provide the details for just Windows. </p>\n<p>If this requires the use of WSL then will pass on trying it.</p>",
        "id": 546647850,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761216881
    },
    {
        "content": "<p>I didnâ€™t use WSL, I installed MinGW and set the compiler with</p>\n<div class=\"codehilite\" data-code-language=\"PowerShell\"><pre><span></span><code><span class=\"nv\">$Env:CC</span> <span class=\"p\">=</span> <span class=\"s2\">\"C:\\MinGW\\bin\\gcc.exe\"</span>\n</code></pre></div>\n<p>and then ran <code>lake test</code>.<br>\nI saw you mentioned using the Visual Studio compiler earlier in the thread, but I didn't test with that setup.</p>",
        "id": 546654391,
        "sender_full_name": "Brenno Rodrigues",
        "timestamp": 1761218917
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 546656724,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761219586
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"979173\">Brenno Rodrigues</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/546654391\">said</a>:</p>\n<blockquote>\n<p>I didnâ€™t use WSL, I installed MinGW and set the compiler with</p>\n<div class=\"codehilite\" data-code-language=\"PowerShell\"><pre><span></span><code><span class=\"nv\">$Env:CC</span> <span class=\"p\">=</span> <span class=\"s2\">\"C:\\MinGW\\bin\\gcc.exe\"</span>\n</code></pre></div>\n<p>and then ran <code>lake test</code>.</p>\n</blockquote>\n<p>Hope to give that a try later, maybe today.</p>\n<p>Thanks.</p>",
        "id": 546656824,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761219625
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 546711699,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761233502
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 546715512,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761234552
    },
    {
        "content": "<p>A related topic on Lean FFI worth reading: </p>\n<p><a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/Understanding.20Lean.27s.20Foreign.20Function.20Interface.20.28FFI.29/with/546727734\">#lean4 &gt; Understanding Lean's Foreign Function Interface (FFI)</a></p>",
        "id": 546730640,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761239072
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"910779\">@Anthony Wang</span> <span class=\"user-mention\" data-user-id=\"979173\">@Brenno Rodrigues</span> <br>\nI tried doing this on my own computer and got this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">Env</span><span class=\"o\">:</span><span class=\"n\">CC</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"C:</span><span class=\"err\">\\</span><span class=\"s2\">Users</span><span class=\"err\">\\</span><span class=\"s2\">sraya</span><span class=\"err\">\\</span><span class=\"s2\">scoop</span><span class=\"err\">\\</span><span class=\"s2\">apps</span><span class=\"err\">\\</span><span class=\"s2\">gcc</span><span class=\"err\">\\</span><span class=\"s2\">current</span><span class=\"err\">\\</span><span class=\"s2\">bin</span><span class=\"err\">\\</span><span class=\"s2\">gcc.exe\"</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">argumentcomputer</span><span class=\"bp\">/</span><span class=\"n\">lspec</span><span class=\"bp\">/</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">1</span><span class=\"n\">fc461a9b83eeb68da34df72cec2ef1994e906cb'</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">31</span><span class=\"bp\">/</span><span class=\"mi\">31</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Tests</span><span class=\"bp\">.</span><span class=\"n\">SQLite</span><span class=\"o\">:</span><span class=\"n\">exe</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\bin\\clang.exe -o C:\\github\\sqlite3-lean4\\.lake\\build\\bin\\Tests-SQLite.exe @C:\\github\\sqlite3-lean4\\.lake\\build\\bin\\Tests-SQLite.exe.rsp</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"c1\">--unresolved-symbols=ignore-all</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\bin\\clang.exe' exited with code 1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tests</span><span class=\"bp\">.</span><span class=\"n\">SQLite</span><span class=\"o\">:</span><span class=\"n\">exe</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span>\n</code></pre></div>",
        "id": 546736873,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761241149
    },
    {
        "content": "<p>I tried with a different gcc install, but no dice</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">Env</span><span class=\"o\">:</span><span class=\"n\">CC</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"C:</span><span class=\"err\">\\</span><span class=\"s2\">Users</span><span class=\"err\">\\</span><span class=\"s2\">sraya</span><span class=\"err\">\\</span><span class=\"s2\">scoop</span><span class=\"err\">\\</span><span class=\"s2\">apps</span><span class=\"err\">\\</span><span class=\"s2\">msys2</span><span class=\"err\">\\</span><span class=\"s2\">current</span><span class=\"err\">\\</span><span class=\"s2\">usr</span><span class=\"err\">\\</span><span class=\"s2\">bin</span><span class=\"err\">\\</span><span class=\"s2\">gcc.exe\"</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">31</span><span class=\"bp\">/</span><span class=\"mi\">31</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Tests</span><span class=\"bp\">.</span><span class=\"n\">SQLite</span><span class=\"o\">:</span><span class=\"n\">exe</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\bin\\clang.exe -o C:\\github\\sqlite3-lean4\\.lake\\build\\bin\\Tests-SQLite.exe @C:\\github\\sqlite3-lean4\\.lake\\build\\bin\\Tests-SQLite.exe.rsp</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"c1\">--unresolved-symbols=ignore-all</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\bin\\clang.exe' exited with code 1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tests</span><span class=\"bp\">.</span><span class=\"n\">SQLite</span><span class=\"o\">:</span><span class=\"n\">exe</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n</code></pre></div>",
        "id": 546737272,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761241308
    },
    {
        "content": "<p>Tried inside MSYS2 itself, and still no dice</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">sraya</span><span class=\"bp\">@</span><span class=\"n\">Penelope</span><span class=\"w\"> </span><span class=\"n\">MSYS</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">github</span><span class=\"bp\">/</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"s2\">\"C:</span><span class=\"err\">\\</span><span class=\"s2\">Users</span><span class=\"err\">\\</span><span class=\"s2\">sraya</span><span class=\"err\">\\</span><span class=\"s2\">.elan</span><span class=\"err\">\\</span><span class=\"s2\">bin</span><span class=\"err\">\\</span><span class=\"s2\">lake.exe\"</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">31</span><span class=\"bp\">/</span><span class=\"mi\">31</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Tests</span><span class=\"bp\">.</span><span class=\"n\">SQLite</span><span class=\"o\">:</span><span class=\"n\">exe</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\bin\\clang.exe -o C:\\github\\sqlite3-lean4\\.lake\\build\\bin\\Tests-SQLite.exe @C:\\github\\sqlite3-lean4\\.lake\\build\\bin\\Tests-SQLite.exe.rsp</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"c1\">--unresolved-symbols=ignore-all</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\bin\\clang.exe' exited with code 1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tests</span><span class=\"bp\">.</span><span class=\"n\">SQLite</span><span class=\"o\">:</span><span class=\"n\">exe</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n</code></pre></div>",
        "id": 546738002,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761241588
    },
    {
        "content": "<p>It looks like your gcc is working correctly, but the final step of linking sqlite.o with the compiled Lean code is failing. Maybe we should only use <code>--unresolved-symbols=ignore-all</code> on Linux? This appears to be what your lean-sdl3 lakefile does: <a href=\"https://github.com/ValorZard/lean-sdl3/blob/3582357b4c4028e04c3d3065a1b703fa3ae354fd/lakefile.lean#L173\">https://github.com/ValorZard/lean-sdl3/blob/3582357b4c4028e04c3d3065a1b703fa3ae354fd/lakefile.lean#L173</a></p>",
        "id": 546739992,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1761242355
    },
    {
        "content": "<p>I pushed a commit to my fork with that fix, <span class=\"user-mention\" data-user-id=\"950553\">@Srayan Jana</span> could you try compiling it?</p>",
        "id": 546740457,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1761242497
    },
    {
        "content": "<p>Oh maybe I messed something up when testing? I was pretty sure it worked for me on Windows</p>",
        "id": 546742690,
        "sender_full_name": "Brenno Rodrigues",
        "timestamp": 1761243185
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 546752698,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761246878
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"910779\">Anthony Wang</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/546740457\">said</a>:</p>\n<blockquote>\n<p>I pushed a commit to my fork with that fix, <span class=\"user-mention silent\" data-user-id=\"950553\">Srayan Jana</span> could you try compiling it?</p>\n</blockquote>\n<p>This is what I got</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">Env</span><span class=\"o\">:</span><span class=\"n\">CC</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"C:</span><span class=\"err\">\\</span><span class=\"s2\">Users</span><span class=\"err\">\\</span><span class=\"s2\">sraya</span><span class=\"err\">\\</span><span class=\"s2\">scoop</span><span class=\"err\">\\</span><span class=\"s2\">apps</span><span class=\"err\">\\</span><span class=\"s2\">msys2</span><span class=\"err\">\\</span><span class=\"s2\">current</span><span class=\"err\">\\</span><span class=\"s2\">usr</span><span class=\"err\">\\</span><span class=\"s2\">bin</span><span class=\"err\">\\</span><span class=\"s2\">gcc.exe\"</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">argumentcomputer</span><span class=\"bp\">/</span><span class=\"n\">lspec</span><span class=\"bp\">/</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LSpec</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">1</span><span class=\"n\">fc461a9b83eeb68da34df72cec2ef1994e906cb'</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"bp\">/</span><span class=\"mi\">31</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\</span><span class=\"n\">scoop</span><span class=\"bp\">\\</span><span class=\"n\">apps</span><span class=\"bp\">\\</span><span class=\"n\">msys2</span><span class=\"bp\">\\</span><span class=\"n\">current</span><span class=\"bp\">\\</span><span class=\"n\">usr</span><span class=\"bp\">\\</span><span class=\"n\">bin</span><span class=\"bp\">\\</span><span class=\"n\">gcc</span><span class=\"bp\">.</span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">fPIC</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">scoop</span><span class=\"bp\">/</span><span class=\"n\">apps</span><span class=\"bp\">/</span><span class=\"n\">msys2</span><span class=\"bp\">/</span><span class=\"mi\">2025</span><span class=\"bp\">-</span><span class=\"mi\">08</span><span class=\"bp\">-</span><span class=\"mi\">30</span><span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">gcc</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">pc</span><span class=\"bp\">-</span><span class=\"n\">cygwin</span><span class=\"bp\">/</span><span class=\"mf\">15.2</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">/</span><span class=\"n\">cc1</span><span class=\"bp\">.</span><span class=\"n\">exe</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">loading</span><span class=\"w\"> </span><span class=\"n\">shared</span><span class=\"w\"> </span><span class=\"n\">libraries</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cannot</span><span class=\"w\"> </span><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">shared</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\</span><span class=\"n\">scoop</span><span class=\"bp\">\\</span><span class=\"n\">apps</span><span class=\"bp\">\\</span><span class=\"n\">msys2</span><span class=\"bp\">\\</span><span class=\"n\">current</span><span class=\"bp\">\\</span><span class=\"n\">usr</span><span class=\"bp\">\\</span><span class=\"n\">bin</span><span class=\"bp\">\\</span><span class=\"n\">gcc</span><span class=\"bp\">.</span><span class=\"n\">exe'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">âœ–</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"bp\">/</span><span class=\"mi\">31</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\</span><span class=\"n\">scoop</span><span class=\"bp\">\\</span><span class=\"n\">apps</span><span class=\"bp\">\\</span><span class=\"n\">msys2</span><span class=\"bp\">\\</span><span class=\"n\">current</span><span class=\"bp\">\\</span><span class=\"n\">usr</span><span class=\"bp\">\\</span><span class=\"n\">bin</span><span class=\"bp\">\\</span><span class=\"n\">gcc</span><span class=\"bp\">.</span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">\\</span><span class=\"n\">native</span><span class=\"bp\">\\</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.24.0\\include -I C:\\github\\sqlite3-lean4-wang\\native -fPIC</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">sraya</span><span class=\"bp\">/</span><span class=\"n\">scoop</span><span class=\"bp\">/</span><span class=\"n\">apps</span><span class=\"bp\">/</span><span class=\"n\">msys2</span><span class=\"bp\">/</span><span class=\"mi\">2025</span><span class=\"bp\">-</span><span class=\"mi\">08</span><span class=\"bp\">-</span><span class=\"mi\">30</span><span class=\"bp\">/</span><span class=\"n\">usr</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">gcc</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">pc</span><span class=\"bp\">-</span><span class=\"n\">cygwin</span><span class=\"bp\">/</span><span class=\"mf\">15.2</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">/</span><span class=\"n\">cc1</span><span class=\"bp\">.</span><span class=\"n\">exe</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">loading</span><span class=\"w\"> </span><span class=\"n\">shared</span><span class=\"w\"> </span><span class=\"n\">libraries</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cannot</span><span class=\"w\"> </span><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">shared</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sraya</span><span class=\"bp\">\\</span><span class=\"n\">scoop</span><span class=\"bp\">\\</span><span class=\"n\">apps</span><span class=\"bp\">\\</span><span class=\"n\">msys2</span><span class=\"bp\">\\</span><span class=\"n\">current</span><span class=\"bp\">\\</span><span class=\"n\">usr</span><span class=\"bp\">\\</span><span class=\"n\">bin</span><span class=\"bp\">\\</span><span class=\"n\">gcc</span><span class=\"bp\">.</span><span class=\"n\">exe'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqlite</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">sqlite</span><span class=\"bp\">/</span><span class=\"n\">sqliteffi</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">&gt;</span>\n</code></pre></div>",
        "id": 546763577,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761251080
    },
    {
        "content": "<p>oh weird, it works with w64devkit</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">Env</span><span class=\"o\">:</span><span class=\"n\">CC</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"C:</span><span class=\"err\">\\</span><span class=\"s2\">github</span><span class=\"err\">\\</span><span class=\"s2\">w64devkit</span><span class=\"err\">\\</span><span class=\"s2\">w64devkit</span><span class=\"err\">\\</span><span class=\"s2\">bin</span><span class=\"err\">\\</span><span class=\"s2\">gcc.exe\"</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">suite</span>\n<span class=\"w\">  </span><span class=\"bp\">âœ“</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">select</span><span class=\"w\"> </span><span class=\"n\">data</span>\n\n<span class=\"w\">  </span><span class=\"bp\">âœ“</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">data</span>\n\n<span class=\"w\">  </span><span class=\"bp\">âœ“</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">bind</span><span class=\"w\"> </span><span class=\"n\">parameters</span>\n\n<span class=\"w\">  </span><span class=\"bp\">âœ“</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"n\">column</span><span class=\"w\"> </span><span class=\"n\">count</span>\n\n<span class=\"w\">  </span><span class=\"bp\">âœ“</span><span class=\"w\"> </span><span class=\"n\">handles</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">SQL</span><span class=\"w\"> </span><span class=\"kn\">syntax</span>\n\n<span class=\"w\">  </span><span class=\"bp\">âœ“</span><span class=\"w\"> </span><span class=\"n\">handles</span><span class=\"w\"> </span><span class=\"n\">non</span><span class=\"bp\">-</span><span class=\"n\">existent</span><span class=\"w\"> </span><span class=\"n\">table</span>\n\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">github</span><span class=\"bp\">\\</span><span class=\"n\">sqlite3</span><span class=\"bp\">-</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">wang</span><span class=\"bp\">&gt;</span>\n</code></pre></div>",
        "id": 546763731,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761251131
    },
    {
        "content": "<p>There should be something in the readme explaining all of this lol</p>",
        "id": 546763790,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761251159
    },
    {
        "content": "<p>Someone already knows why this happens? lol</p>",
        "id": 546764088,
        "sender_full_name": "Brenno Rodrigues",
        "timestamp": 1761251272
    },
    {
        "content": "<p>Honestly? Windows is just weird man.</p>",
        "id": 546764300,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761251353
    },
    {
        "content": "<p>Added an issue for this: <a href=\"https://github.com/BRonen/sqlite3-lean4/issues/4\">https://github.com/BRonen/sqlite3-lean4/issues/4</a></p>",
        "id": 546764332,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761251367
    },
    {
        "content": "<p>Once Anthony's PR gets merged, I'll do a PR that does a proper writeup in the README about all of this</p>",
        "id": 546766454,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761252237
    },
    {
        "content": "<p>Go ahead, itâ€™s merged now</p>",
        "id": 546767272,
        "sender_full_name": "Brenno Rodrigues",
        "timestamp": 1761252599
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"979173\">@Brenno Rodrigues</span> <a href=\"https://github.com/BRonen/sqlite-lean/pull/5\">https://github.com/BRonen/sqlite-lean/pull/5</a><br>\nyou can give this a look over (and try out the instructions I wrote)</p>",
        "id": 546768548,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761253146
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> is there anything you would add to the explanation in the README? <a href=\"https://github.com/BRonen/sqlite-lean\">https://github.com/BRonen/sqlite-lean</a> does that all sound about right?</p>",
        "id": 546776720,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1761257913
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 546777904,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761258587
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 546823479,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761289267
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 546824717,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761289748
    },
    {
        "content": "<p>Is there a reproducer for this issue? There was a possibly relevant bugfix between 4.24.0 and 4.25.0-rc1 (<a href=\"https://github.com/leanprover/lean4/pull/10444\">lean4#10444</a>), so it would be good to know if the issue is still present on the lastest version.</p>",
        "id": 546827257,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1761290650
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260921\">Markus Himmel</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/546827257\">said</a>:</p>\n<blockquote>\n<p>Is there a reproducer for this issue?</p>\n</blockquote>\n<p>Thanks for the info and asking.</p>\n<p>I have not created a reproducer but will try and create one if needed. However if the issue has been fixed will be happy to upgrade to/past the fix and see if the issue is still present. I would much prefer to  just make users aware of the item with the best course of action to just be up to a version that works correctly.</p>",
        "id": 546828984,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761291306
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260921\">Markus Himmel</span> <a href=\"#narrow/channel/113488-general/topic/SQLite.20bindings.20for.20Lean/near/546827257\">said</a>:</p>\n<blockquote>\n<p>it would be good to know if the issue is still present on the latest version.</p>\n</blockquote>\n<p>Short answer: After upgrading to  v4.25.0-rc2 , no longer a problem for my project.</p>\n<p>Thanks for the info. <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 546893666,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761311385
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 547036674,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761377742
    },
    {
        "content": "<p>I ported a C program that I wrote a few years ago to use Lean and sqlite-lean instead: <a href=\"https://git.unnamed.website/slean/tree/Main.lean\">https://git.unnamed.website/slean/tree/Main.lean</a></p>\n<p>The current sqlite-lean interface is pretty low-level and annoying to use so I've started working on a type-safe based on <a href=\"https://github.com/arthurpaulino/LeanMySQL\">https://github.com/arthurpaulino/LeanMySQL</a>.</p>",
        "id": 560870256,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1764377905
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"910779\">@Anthony Wang</span> do you think that the requirement for clang/gcc is a blocker for you?</p>",
        "id": 562375245,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1765157371
    },
    {
        "content": "<p>(Also, is that new lean sqlite thing going to be a PR to the current repo or something new?)</p>",
        "id": 562375266,
        "sender_full_name": "Srayan Jana",
        "timestamp": 1765157397
    },
    {
        "content": "<p>1st question: No.<br>\n2nd: Yes.</p>",
        "id": 562520961,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1765214675
    },
    {
        "content": "<p>Oh interesting <a href=\"https://github.com/leanprover/leansqlite/\">https://github.com/leanprover/leansqlite/</a> exists now.</p>\n<p>There's also <a href=\"https://github.com/typednotes/lean-pq\">https://github.com/typednotes/lean-pq</a> which checks SQL operations at compile time and is similar to what I wanted to try implementing. However, it's for PostgreSQL, not SQLite.</p>",
        "id": 576119344,
        "sender_full_name": "Anthony Wang",
        "timestamp": 1772138394
    }
]