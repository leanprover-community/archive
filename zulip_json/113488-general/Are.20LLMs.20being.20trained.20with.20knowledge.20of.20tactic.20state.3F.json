[
    {
        "content": "<p>This isn't in reference to any specific LLM — just curious what the state of the art is.</p>\n<p>I've tried using LLMs a little bit (only online ones like Claude Sonnet and o3-mini-high) and they haven't been great. I'm assuming their knowledge of Lean is kind of general, based on whatever's available on the internet.</p>\n<p>There are a couple things I'm curious about:</p>\n<ul>\n<li>Do we know of any LLMs being specifically trained or fine-tuned on Lean code</li>\n<li>Do such LLMs get the \"tactic state\" as one of the inputs into consideration</li>\n</ul>\n<p>The second question is particularly interesting to me. When I'm working on a proof in Lean, seeing \"what's in the right panel\" at every line is essential for my reasoning:</p>\n<p><a href=\"/user_uploads/3121/GRnMNwQfY5o79QzDGa413S-h/Screenshot-2025-02-22-at-20.56.22.png\">Screenshot 2025-02-22 at 20.56.22.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/GRnMNwQfY5o79QzDGa413S-h/Screenshot-2025-02-22-at-20.56.22.png\" title=\"Screenshot 2025-02-22 at 20.56.22.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2722x766\" src=\"/user_uploads/thumbnail/3121/GRnMNwQfY5o79QzDGa413S-h/Screenshot-2025-02-22-at-20.56.22.png/840x560.webp\"></a></div><p>I might be wrong here but intuitively it seems that LLM output would be better if the input it was trained on included the tactic state of every line for the proofs it's being trained on.</p>\n<p>Does my assumption make sense? Has anyone tried training LLMs on Lean code? Does including the tactic state like I described seem like a good idea, and has anyone tried that?</p>",
        "id": 501300955,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1740257929
    },
    {
        "content": "<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>off topic math tip</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>In that strong induction proof, you only need to do cases on primality inside the induction itself.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">p.Prime</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">using</span><span class=\"w\"> </span><span class=\"n\">Nat.strong_induction_on</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span>\n<span class=\"w\">  </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">np</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n.Prime</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat.prime_def_lt</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">np</span>\n<span class=\"w\">    </span><span class=\"n\">push_neg</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">np</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">⟨</span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mlen</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mdvdn</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mne1</span><span class=\"o\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">np</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ne_zero_of_dvd_ne_zero</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">omega</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">mdvdn</span>\n<span class=\"w\">      </span><span class=\"n\">omega</span>\n<span class=\"w\">    </span><span class=\"n\">obtain</span><span class=\"w\"> </span><span class=\"o\">⟨</span><span class=\"n\">p</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pp</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pdvdm</span><span class=\"o\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">mlen</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">    </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pp</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">pdvdm.trans</span><span class=\"w\"> </span><span class=\"n\">mdvdn</span>\n</code></pre></div>\n</div></div>",
        "id": 501321915,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1740275786
    },
    {
        "content": "<p>There's a <a class=\"stream\" data-stream-id=\"219941\" href=\"/#narrow/channel/219941-Machine-Learning-for-Theorem-Proving\">#Machine Learning for Theorem Proving</a> channel you might be interested in.</p>",
        "id": 501321950,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1740275844
    },
    {
        "content": "<p>I'm working with people that have been training LLMs that guess tactics to use based on the current tactic state. I don't have anything to point you toward though yet.</p>",
        "id": 501322124,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1740276004
    },
    {
        "content": "<p>This <a href=\"https://www.youtube.com/watch?v=Yr8dzfVkeHg\">presentation</a> by <span class=\"user-mention\" data-user-id=\"115715\">@Jason Rute</span>  for Lean Together 2025 is worth watching.</p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"Yr8dzfVkeHg\" href=\"https://www.youtube.com/watch?v=Yr8dzfVkeHg\"><img src=\"https://uploads.zulipusercontent.net/66d4cfb70135b005963da5f0a5852f700f8e21f0/68747470733a2f2f692e7974696d672e636f6d2f76692f597238647a66566b6548672f64656661756c742e6a7067\"></a></div><p>The Q&amp;A topic is <a href=\"#narrow/channel/474713-Lean-Together-2025/topic/Jason.20Rute.3A.20The.20last.20mile.3A.20How.20do.20we.20make.20AI.20theorem.20pr.2E.2E.2E\">here</a>.</p>",
        "id": 501371835,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1740314921
    }
]