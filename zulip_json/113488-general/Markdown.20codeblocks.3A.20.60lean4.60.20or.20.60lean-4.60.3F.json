[
    {
        "content": "<p>I only just saw <a href=\"https://github.com/github-linguist/linguist/pull/6616#issuecomment-1918703347\">this message</a> in response to the lean 4 syntax I added on github. Unfortunately, it seems that this means on github you have to write</p>\n<div class=\"codehilite\" data-code-language=\"Markdown\"><pre><span></span><code><span class=\"sb\">```lean-4</span>\n<span class=\"s\">abbrev some_lean := 37</span>\n<span class=\"sb\">```</span>\n</code></pre></div>\n<p>as opposed to the Zulip</p>\n<div class=\"codehilite\" data-code-language=\"Markdown\"><pre><span></span><code><span class=\"sb\">```lean4</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">some_lean</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">37</span>\n<span class=\"sb\">```</span>\n</code></pre></div>\n<p>I assume we want to converge on the version without the <code>-</code>?</p>",
        "id": 522858255,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749252776
    },
    {
        "content": "<p>(either we change GitHub to drop the \" \" which becomes a <code>-</code>, or we add the <code>-</code> in Pygments to change Zulip)</p>",
        "id": 522858291,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749252821
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/Markdown.20codeblocks.3A.20.60lean4.60.20or.20.60lean-4.60.3F/near/522858291\">said</a>:</p>\n<blockquote>\n<p>(either we change GitHub to drop the \" \" which becomes a <code>-</code>, or we add the <code>-</code> in Pygments to change Zulip)</p>\n</blockquote>\n<p>Seems <code>lean4</code> is currently being adopted, not <code>lean-4</code> by Github's markdown.  See <a href=\"https://github.com/github-linguist/linguist/blob/main/lib/linguist/languages.yml#L3952-L3967\">linguist/languages.yml</a>.</p>",
        "id": 522858766,
        "sender_full_name": "Hanson Char",
        "timestamp": 1749253403
    },
    {
        "content": "<p>It's quite easy to prove that wrong by pasting what I wrote above into a github comment.</p>",
        "id": 522858943,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749253627
    },
    {
        "content": "<p>ok, in that case, I wonder where these tags are actually defined.</p>",
        "id": 522859016,
        "sender_full_name": "Hanson Char",
        "timestamp": 1749253727
    },
    {
        "content": "<p>It's defined by the string \"Lean 4\", as described by the comment I linked at the start of my first message. (hence 'drop the \" \"' being my proposed fix if we want to drop the <code>-</code>)</p>",
        "id": 522859044,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749253764
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/Markdown.20codeblocks.3A.20.60lean4.60.20or.20.60lean-4.60.3F/near/522858291\">said</a>:</p>\n<blockquote>\n<p>(either we change GitHub to drop the \" \" which becomes a <code>-</code>, or we add the <code>-</code> in Pygments to change Zulip)</p>\n</blockquote>\n<p>I'd vote for fixing github to <code>lean4</code>.</p>",
        "id": 522859366,
        "sender_full_name": "Hanson Char",
        "timestamp": 1749254251
    },
    {
        "content": "<p>/poll What name should be used in codeblocks</p>\n<ul>\n<li>lean4 (fix github-linguist)</li>\n<li>lean-4 (fix Pygments)</li>\n</ul>",
        "id": 522859409,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749254303
    },
    {
        "content": "<p>Is there a reason not to use just <code>lean</code>?</p>",
        "id": 522875051,
        "sender_full_name": "Fran√ßois G. Dorais",
        "timestamp": 1749275228
    },
    {
        "content": "<p>(I believe the reason is \"that's already taken by lean 3\")</p>",
        "id": 522877188,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1749278000
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/Markdown.20codeblocks.3A.20.60lean4.60.20or.20.60lean-4.60.3F/near/522877188\">said</a>:</p>\n<blockquote>\n<p>(I believe the reason is \"that's already taken by lean 3\")</p>\n</blockquote>\n<p>Is it not possible to have one single syntax highlighting for both lean3 and lean4, so users can simply use the <code>lean</code> tag without worrying about versions? This also paves the way for future version upgrades, if any.</p>",
        "id": 522899475,
        "sender_full_name": "Hanson Char",
        "timestamp": 1749307039
    },
    {
        "content": "<p>I think it's a good things for language models etc for code to be clearly labelled as 3 vs 4</p>",
        "id": 522899491,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749307065
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/Markdown.20codeblocks.3A.20.60lean4.60.20or.20.60lean-4.60.3F/near/522899491\">said</a>:</p>\n<blockquote>\n<p>I think it's a good things for language models etc for code to be clearly labelled as 3 vs 4</p>\n</blockquote>\n<p>That makes sense from an LLM clarity standpoint. At the same time, one could argue that a well-trained language model should be able to infer the version from context or syntax. Requiring a version suffix in the code block label places extra burden on users and could become unwieldy as the ecosystem evolves.</p>",
        "id": 522899752,
        "sender_full_name": "Hanson Char",
        "timestamp": 1749307310
    },
    {
        "content": "<p>I think we can afford the cost of users typing a <code>4</code> occasionally, especially since Zulip applies <code>lean4</code> automatically</p>",
        "id": 522899891,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749307461
    },
    {
        "content": "<p><a href=\"https://github.com/github-linguist/linguist/pull/7434\">#7434</a> attempts to fix this</p>",
        "id": 522904508,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749312893
    },
    {
        "content": "<p>This seems silly, who is ever going to type the <code>4</code>? The only reasonable answer here is just <code>lean</code>. <span aria-label=\"woman shrugging\" class=\"emoji emoji-1f937-200d-2640\" role=\"img\" title=\"woman shrugging\">:woman_shrugging:</span></p>\n<p>If that doesn't work somewhere, the tooling is wrong, not the user. </p>\n<p>Verso expects just <code>lean</code>.</p>",
        "id": 522960985,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1749372268
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/113488-general/topic/Markdown.20codeblocks.3A.20.60lean4.60.20or.20.60lean-4.60.3F/near/522960985\">said</a>:</p>\n<blockquote>\n<p>This seems silly, who is ever going to type the <code>4</code>? The only reasonable answer here is just <code>lean</code>. <span aria-label=\"woman shrugging\" class=\"emoji emoji-1f937-200d-2640\" role=\"img\" title=\"woman shrugging\">:woman_shrugging:</span></p>\n<p>If that doesn't work somewhere, the timing is wrong, not the user. </p>\n<p>Verso expects just <code>lean</code>.</p>\n</blockquote>\n<p>This made me realize that the VS Code extension is also still only providing syntax highlighting for <code>lean4</code> (which is an artifact from when it still supported running the Lean 3 extension alongside the Lean 4 one without disabling either one), which means that all <code>```lean</code> code blocks aren't properly highlighted in hovers, but we can also fix that now by supporting both language IDs: <a href=\"https://github.com/leanprover-community/vscode-lean4/pull/622\">vscode-lean4#622</a></p>",
        "id": 522964561,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1749374225
    },
    {
        "content": "<p>Is it possible to have a syntax highlighter that primarily supports Lean 4 but would still try to render Lean 3 correctly? (Analogously, Python 2 and 3 have the same highlighter in Linguist)</p>",
        "id": 523016597,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1749436899
    },
    {
        "content": "<p>Separately, to me, Lean 4 having the extension <code>.lean</code> and not <code>.lean4</code> intuitively means that Lean 4 overrides Lean 3, which is now EOL. So I agree with having just <code>```lean</code> instead of <code>lean4</code>. (Again, analogously <code>python</code> refers to Python 3 by default in Pygments)</p>",
        "id": 523016879,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1749437205
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"631691\">Thomas Zhu</span> <a href=\"#narrow/stream/113488-general/topic/Markdown.20codeblocks.3A.20.60lean4.60.20or.20.60lean-4.60.3F/near/523016879\">said</a>:</p>\n<blockquote>\n<p>(Again, analogously <code>python</code> refers to Python 3 by default in Pygments)</p>\n</blockquote>\n<p>For reference, this happened in <a href=\"https://github.com/pygments/pygments/pull/1262\">https://github.com/pygments/pygments/pull/1262</a></p>",
        "id": 523028957,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749448781
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 523029425,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749449054
    },
    {
        "content": "<p>There is now a new option <code>lean</code>. Don't forget to un-vote and then re-vote <a href=\"#narrow/channel/113488-general/topic/Markdown.20codeblocks.3A.20.60lean4.60.20or.20.60lean-4.60.3F/near/522859409\">above</a> if you changed your mind/preference.</p>",
        "id": 523115418,
        "sender_full_name": "Hanson Char",
        "timestamp": 1749482978
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"631691\">Thomas Zhu</span> <a href=\"#narrow/channel/113488-general/topic/Markdown.20codeblocks.3A.20.60lean4.60.20or.20.60lean-4.60.3F/near/523016597\">said</a>:</p>\n<blockquote>\n<p>Is it possible to have a syntax highlighter that primarily supports Lean 4 but would still try to render Lean 3 correctly? (Analogously, Python 2 and 3 have the same highlighter in Linguist)</p>\n</blockquote>\n<p>I think it's possible since the basic syntax highlighter works based on keywords list, which is mostly the same for Lean 3 and 4...</p>",
        "id": 523201755,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749527696
    }
]