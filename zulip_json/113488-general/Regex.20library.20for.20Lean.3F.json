[
    {
        "content": "<p>Hi friends! I've been looking to try using Lean as a general functional programming language, and I was wondering if there was a regex library in Lean (either a native implementation or some FFI situation) available? I'm building a tool that requires me to perform regex searches in text so I was wondering how I'd go about doing that :^)</p>",
        "id": 534808029,
        "sender_full_name": "david cao",
        "timestamp": 1755416248
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"395416\">@pandaman</span> had one, I think</p>",
        "id": 534808240,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1755416499
    },
    {
        "content": "<p>Yes! This library provides a Lean native implementation for regex: <a href=\"https://github.com/pandaman64/lean-regex/tree/main\">https://github.com/pandaman64/lean-regex/tree/main</a></p>\n<p>Please let me know if you have any questions on the usage!</p>",
        "id": 534808482,
        "sender_full_name": "pandaman",
        "timestamp": 1755416831
    },
    {
        "content": "<p>oh beautiful, tysm!</p>",
        "id": 534808495,
        "sender_full_name": "david cao",
        "timestamp": 1755416846
    },
    {
        "content": "<p>as a unrelated-ish question: are there commands in lean for browsing the documentation of definitions in lieu of html (a la the <code>?</code> command in a julia repl)</p>",
        "id": 534808828,
        "sender_full_name": "david cao",
        "timestamp": 1755417326
    },
    {
        "content": "<p>if you do <code>#check Nat.Prime</code> and just hover over <code>Nat.Prime</code> then you'll see the documentation</p>",
        "id": 534808883,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755417415
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"395416\">@pandaman</span> I had a short look at your regex package the other day trying to use it to find code blocks inside a markdown text. I got the impression that the implementation isnt frarure complete yet. Is this correct or did I just give up too quickly in my 30min fiddling around?</p>\n<p>i.e. I got the impression the <code>?</code>-operators dont exist, and also referencing previous matching groups. I tried something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">((</span><span class=\"bp\">`+</span><span class=\"o\">)(</span><span class=\"bp\">.*?</span><span class=\"o\">)</span><span class=\"bp\">\\</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>to match arbitrary codeblocks with the same amount of starting and closing ticks. (Im typing this now on the phone, so I might have tried various variations of this syntax).</p>\n<p>Any help to get the right regex would be appreciated<span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span></p>",
        "id": 534816906,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1755429173
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/channel/113488-general/topic/Regex.20library.20for.20Lean.3F/near/534816906\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"395416\">pandaman</span> I had a short look at your regex package the other day trying to use it to find code blocks inside a markdown text. I got the impression that the implementation isnt frarure complete yet. Is this correct or did I just give up too quickly in my 30min fiddling around?<br>\nAny help to get the right regex would be appreciated<span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span></p>\n</blockquote>\n<p>There is another one (not so formaly proved) here that has more features : <a href=\"https://github.com/bergmannjg/regex\">https://github.com/bergmannjg/regex</a></p>",
        "id": 534818224,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1755430873
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> Hi, thank you for trying <code>lean-regex</code> and sorry to hear you had the impression. Your impression is basically right: the library focuses on linear-time algorithms and intentionally omits features that require backtracking. In particular, it omits backreferences like <code>\\2</code> since they are known to be non-regular and require exponential time in the worst case. This design is similar to Go and Rust's regex implementations.<br>\nThe problem of parsing matching parenthesis (or code fences in your case) is known to be not representable in a regular language, so I'd recommend using parser combinators/generators that has more power and support your use cases.</p>\n<p>As for <code>?</code> to make the repetition non-greedy, I forgot to implement the feature. I'll make an issue and fix it. Thank you!</p>",
        "id": 534818507,
        "sender_full_name": "pandaman",
        "timestamp": 1755431197
    },
    {
        "content": "<p>There is also some regex support in <a href=\"https://github.com/fgdorais/lean4-parser/tree/main/Parser/RegEx\">lean4-parser</a>. It may have some features that <a href=\"https://github.com/pandaman64/lean-regex/tree/main\">lean-regex</a> doesn't but it was never designed for efficiency nor verification. I do have students working on an efficient and verified regex-related project but it is still very much WIP.</p>",
        "id": 534822779,
        "sender_full_name": "Fran√ßois G. Dorais",
        "timestamp": 1755436173
    },
    {
        "content": "<p>Thanks for the quick response <span class=\"user-mention\" data-user-id=\"395416\">@pandaman</span> :)</p>\n<p>I was just to lazy to implement my own parser, but I'll probably do that</p>",
        "id": 534942077,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1755520318
    }
]