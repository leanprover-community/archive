[
    {
        "content": "<p>Longer Title: <strong>How can I learn to code in Lean with the goal of eventually working on large mathematics formalisation projects? — CI, scalability, best practices, cleanliness of code, maintainability, etc.</strong></p>\n<p>Recently I posted a question over the <a href=\"https://proofassistants.stackexchange.com/questions/6425/resources-for-learning-lean-from-a-software-engineering-pov\">Proof Assistants Stack Exchange</a> on how to approach Lean as not only something you learn to code with, but as something you learn to \"software engineer\" with. (I'm aware this sentence sounds a bit horrid to the ear, sorry!)</p>\n<p>My main worry (and request for help there and now here) is that while I see a number of introductory sources like <em>Mathematics in Lean</em>, <em>The Mechanics of Proof</em>, etc., there doesn't really seem to be that many resources on how to bridge the gap between knowing how to fill a sorry and knowing how to work (and maybe even lead!) large-scale projects.</p>\n<p>Some of the related skills I want to learn but don't know how:</p>\n<ul>\n<li>Identifying bad Lean code: overly complicated, brittle, hard to maintain, unclear, not scalable, etc.</li>\n<li>Knowing how to properly package new definitions, packages, reusable lemmas, etc. in a way that won't generate technical debt a couple months down the line.</li>\n<li>Knowing how to optimise Lean code, as well as having a better idea of what breaks what and which things are obvious resource sinks for the compiler.</li>\n<li>Knowing when to prefer certain strategies over others (i.e. writing efficient code).</li>\n</ul>\n<p>While I'm aware a large amount of this comes with practice, I suppose there's a good chance there might be some good resources on it, too...</p>\n<p>...right?</p>",
        "id": 567170708,
        "sender_full_name": "Emily de Oliveira Santos",
        "timestamp": 1767973489
    },
    {
        "content": "<p>The library style guidelines Jason linked to are a good resource for stylistic issues</p>",
        "id": 567179130,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1767975530
    },
    {
        "content": "<p>I don't think much has been written about optimization. I'm not really sure what else you're looking for. I don't think resources that bridge being able to write a function and lead a large-scale project in the software engineering world exist either, this always comes with experience.</p>",
        "id": 567180515,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1767975829
    },
    {
        "content": "<p>The info you are asking for is something I would like to write a paper about. Unfortunately, I have had other priorities as of late</p>",
        "id": 567189814,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1767978317
    },
    {
        "content": "<p>In my Lean course (co-taught with Floris van Doorn), I talked about code style, linting, golfing and gave some advice for formalisation projects etc. I didn't mention profiling much; that should have its own little guide. Here's the lecture file I used: <a href=\"https://github.com/fpvandoorn/LeanCourse25/blob/master/LeanCourse25/Lectures/Lecture21After.lean\">https://github.com/fpvandoorn/LeanCourse25/blob/master/LeanCourse25/Lectures/Lecture21After.lean</a></p>",
        "id": 567190159,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1767978406
    },
    {
        "content": "<p>This won't answer all your questions, but it might help with some of them.</p>",
        "id": 567190194,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1767978416
    },
    {
        "content": "<p>Re: writing efficient code --- you're talking about writing <em>proofs</em>, right? (You can also write programs in Lean... optimising them is a different skill; this would have different answers I know less about.)</p>",
        "id": 567190480,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1767978492
    },
    {
        "content": "<p><a href=\"https://link.springer.com/chapter/10.1007/978-3-032-07021-0_4\">This paper</a> describes some tools we use to keep scaling mathlib. (Full disclosure: I'm one of the authors.) Likewise, I only expect it to answer some of your questions.</p>",
        "id": 567190749,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1767978564
    },
    {
        "content": "<p>In general, \"how do I formalise area X best\" depends on the area --- so ideally there'd be a paper (or several!) for each area, explaining the trade-offs, pitfalls etc. in setting things up. Ideally <a href=\"https://leanprover-community.github.io/papers.html\">https://leanprover-community.github.io/papers.html</a> has them all; if you spot anything missing, please speak up so they can be added.</p>",
        "id": 567191015,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1767978631
    },
    {
        "content": "<p>(Some areas don't have such a paper yet. This includes differential geometry; my medium-term goals include changing this.)</p>",
        "id": 567191076,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1767978650
    },
    {
        "content": "<p>I have learned largely by PRing to Mathlib, getting feedback, discussing in <a class=\"stream\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4\">#mathlib4</a> , etc<br>\n(I was also fortunate that more experienced users have kindly given a lot of time)</p>",
        "id": 567237069,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1767982915
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113488-general/topic/How.20to.20Lean.20for.20large.20math.20formalisation.20projects.20.28often.20CI.29/near/567190749\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://link.springer.com/chapter/10.1007/978-3-032-07021-0_4\">This paper</a> describes some tools we use to keep scaling mathlib.</p>\n</blockquote>\n<p>Does <a href=\"https://www.youtube.com/watch?v=cabiomTEWe0\">https://www.youtube.com/watch?v=cabiomTEWe0</a> cover most of it?</p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"cabiomTEWe0\" href=\"https://www.youtube.com/watch?v=cabiomTEWe0\"><img src=\"https://uploads.zulipusercontent.net/7b75f57b038ca05c724641c74e9a969947ba47bb/68747470733a2f2f692e7974696d672e636f6d2f76692f636162696f6d54455765302f6d7164656661756c742e6a7067\"></a></div>",
        "id": 567244312,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1767985416
    },
    {
        "content": "<p>Emily, I’m afraid this is rather close to the classic question “why are there so many books about mathematics and no clear instruction about how to do mathematical research?”. Some things simply seem very hard to communicate, you mostly have to experience them.</p>",
        "id": 567260928,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1767992048
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/113488-general/topic/How.20to.20Lean.20for.20large.20math.20formalisation.20projects.20.28often.20CI.29/near/567244312\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113488-general/topic/How.20to.20Lean.20for.20large.20math.20formalisation.20projects.20.28often.20CI.29/near/567190749\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://link.springer.com/chapter/10.1007/978-3-032-07021-0_4\">This paper</a> describes some tools we use to keep scaling mathlib.</p>\n</blockquote>\n<p>Does <a href=\"https://www.youtube.com/watch?v=cabiomTEWe0\">https://www.youtube.com/watch?v=cabiomTEWe0</a> cover most of it?</p>\n</blockquote>\n<p>Kind of, yes: My talk at the EuroProofNet workshop (September 2025) is a bit longer and more up to date. Let me check if there is a recording.</p>",
        "id": 567302783,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768033166
    },
    {
        "content": "<p>Yes, there is: <a href=\"https://youtube.com/watch?v=9qRZS4b3J6E&amp;list=PLaT9F1eDUuN1NFuCZmlbiHJOHNPrqh0xf&amp;index=1\">https://youtube.com/watch?v=9qRZS4b3J6E&amp;list=PLaT9F1eDUuN1NFuCZmlbiHJOHNPrqh0xf&amp;index=1</a></p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"9qRZS4b3J6E\" href=\"https://youtube.com/watch?v=9qRZS4b3J6E&amp;list=PLaT9F1eDUuN1NFuCZmlbiHJOHNPrqh0xf&amp;index=1\"><img src=\"https://uploads.zulipusercontent.net/fd72fd571e2a01223122d05d6b371ed282ba75e1/68747470733a2f2f692e7974696d672e636f6d2f76692f3971525a533462334a36452f6d7164656661756c742e6a7067\"></a></div>",
        "id": 567303324,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768033913
    },
    {
        "content": "<p>Hey everyone, thank you so much for your replies in this thread, they are extremely helpful!</p>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113488-general/topic/How.20to.20Lean.20for.20large.20math.20formalisation.20projects.20.28often.20CI.29/near/567190480\">said</a>:</p>\n<blockquote>\n<p>Re: writing efficient code --- you're talking about writing <em>proofs</em>, right? (You can also write programs in Lean... optimising them is a different skill; this would have different answers I know less about.)</p>\n</blockquote>\n<p>Yep!</p>\n<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/113488-general/topic/How.20to.20Lean.20for.20large.20math.20formalisation.20projects.20.28often.20CI.29/near/567260928\">said</a>:</p>\n<blockquote>\n<p>Emily, I’m afraid this is rather close to the classic question “why are there so many books about mathematics and no clear instruction about how to do mathematical research?”. Some things simply seem very hard to communicate, you mostly have to experience them.</p>\n</blockquote>\n<p>That’s a really great way to put it. I think reading everyone’s replies here made me realise that perhaps the “correct” question to be asking might be more akin to something like “What are some tasks I can do in order to improve my understanding of Lean [with the ultimate goal of being able to work on large-scale projects]?”</p>\n<p>I think some of the pointers here form good answers to this: Rothgang’s lecture file, the Growing Mathlib paper, and several of the papers in <a href=\"https://leanprover-community.github.io/papers.html\">https://leanprover-community.github.io/papers.html</a>. Artie's reply also made me realise that one other such task would be studying Mathlib PR’s and the feedback given there and in <a class=\"stream\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4\">#mathlib4</a>. </p>\n<p>I’ll try putting some work into these pointers and keep hanging around here in the Zulip. Thank you very much once again, everyone! :)</p>",
        "id": 567337536,
        "sender_full_name": "Emily de Oliveira Santos",
        "timestamp": 1768068307
    },
    {
        "content": "<p>My recommendation, assuming you are interested in theorem proving for math and not CS, would be to read and do all of the exercises in the first ~9 chapters of #MIL, and then formalize some results you know--starting from simple lemmas and building up. Once you are proving things on your own, you will already be making use of mathlib related to your formalizations and likely already starting to find missing lemmas you think should be there.</p>",
        "id": 567343713,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1768075474
    },
    {
        "content": "<p>Adding to Vlad's answer: there is something to do in almost every area. This might be easier or harder to approach --- but asking \"I'm interested in X, are there interesting projects to work on\" will usually yield helpful ideas.</p>",
        "id": 567376822,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768121380
    },
    {
        "content": "<p>Hey Vlad and Michael!</p>\n<p>I'm currently going through <a href=\"https://github.com/lean-forward/logical_verification_2025\">The Hitchhiker's Guide to Logical Verification</a> and am planning to do MIL next (or maybe functional programming with Lean and then MIL), and after that (and possibly more books; I'm enjoying them quite a bit) find projects to work on. (As you can see I'm happy with learning CS too :)</p>\n<p>Thank you both very much for the tips!</p>",
        "id": 568014072,
        "sender_full_name": "Emily de Oliveira Santos",
        "timestamp": 1768404430
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 568205765,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1768482472
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 568216360,
        "sender_full_name": "Lua Viana Reis",
        "timestamp": 1768484947
    }
]