[
    {
        "content": "<p>Hi, yall!! I just wanted to share a cool project that I've been working on (I hope this is the right channel to share it, lmk if not).</p>\n<p>Anyway, I've implemented some FFI bindings to the Clingo ASP solver (libclingo) (<a href=\"https://potassco.org/\">https://potassco.org/</a>). If you're not familiar with it, answer set programming is a particular family of programming languages that are a mix between prolog and datalog that are particularly suited for solving certain scheduling programs (the full description of the differences are out of scope for this post, but if you're interested, do check it out, it's very interesting).</p>\n<p>I wanted to share them here if anyone is interested in either trying them out, or looking at them for inspiration. It's available here: <a href=\"https://github.com/kiranandcode/cleango\">https://github.com/kiranandcode/cleango</a></p>\n<p>here's what a program in the DSL looks like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">main</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n\n<span class=\"w\">   </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">control</span><span class=\"w\"> </span><span class=\"bp\">&lt;-</span><span class=\"w\"> </span><span class=\"n\">Clingo</span><span class=\"bp\">.</span><span class=\"n\">makeControl</span>\n\n<span class=\"w\">   </span><span class=\"n\">add_clingo_query!</span><span class=\"w\"> </span><span class=\"n\">control</span><span class=\"w\"> </span><span class=\"o\">:</span>\n\n<span class=\"w\">     </span><span class=\"n\">p</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"bp\">.</span>\n<span class=\"w\">     </span><span class=\"n\">q</span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"bp\">.</span>\n<span class=\"w\">     </span><span class=\"n\">q</span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"bp\">.</span>\n\n\n<span class=\"w\">   </span><span class=\"n\">Clingo</span><span class=\"bp\">.</span><span class=\"n\">ground</span><span class=\"w\"> </span><span class=\"n\">control</span>\n<span class=\"w\">   </span><span class=\"n\">Clingo</span><span class=\"bp\">.</span><span class=\"n\">solve</span><span class=\"w\"> </span><span class=\"n\">control</span>\n\n<span class=\"w\">   </span><span class=\"n\">println!</span><span class=\"w\"> </span><span class=\"s2\">\"finished!\"</span>\n</code></pre></div>\n<p><a href=\"/user_uploads/3121/EsvCxnaOx5_LnXmRzS9tCirc/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/EsvCxnaOx5_LnXmRzS9tCirc/image.png\" title=\"image.png\"><img data-original-dimensions=\"504x436\" src=\"/user_uploads/thumbnail/3121/EsvCxnaOx5_LnXmRzS9tCirc/image.png/840x560.webp\"></a></div><p>(and the output: )</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>found<span class=\"w\"> </span>model:\n<span class=\"w\"> </span>-<span class=\"w\"> </span>q<span class=\"o\">(</span>a<span class=\"o\">)</span>\n<span class=\"w\"> </span>-<span class=\"w\"> </span>q<span class=\"o\">(</span>b<span class=\"o\">)</span>\n<span class=\"w\"> </span>-<span class=\"w\"> </span>p<span class=\"o\">(</span>a<span class=\"o\">)</span>\n<span class=\"w\"> </span>-<span class=\"w\"> </span>p<span class=\"o\">(</span>b<span class=\"o\">)</span>\nfinished!\n</code></pre></div>\n<p><a href=\"/user_uploads/3121/r5Oe69Zo4D3f-3XURC6WwQmV/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/r5Oe69Zo4D3f-3XURC6WwQmV/image.png\" title=\"image.png\"><img data-original-dimensions=\"913x263\" src=\"/user_uploads/thumbnail/3121/r5Oe69Zo4D3f-3XURC6WwQmV/image.png/840x560.webp\"></a></div><p>A couple of cool things about the DSL: </p>\n<ul>\n<li>firstly, unlike some other Clingo bindings (mostly those written by me in other languages lol), this DSL does not actually convert user input to strings -- I've set up the DSL macros to actually expand to an AST term with locations corresponding to the original syntax in lean (this means that if the solver encounters an error, it will report it in terms of your DSL in lean, which I thought was really cool!!). This AST is then sent to the C FFI and sent directly to the clingo solver. </li>\n<li>The FFI is pretty comprehensive and also contains a collection of functions to translate the lean encoding of the datatypes into the C encoding expected by the FFI.</li>\n</ul>\n<p>I also made a tweet about it!! (<a href=\"https://x.com/kirancodes/status/1856699430227136525\">https://x.com/kirancodes/status/1856699430227136525</a>). Anyway, I've really fallen in love with Lean's metaprogramming facilities, they're so amazingly ergonomic and maintainable. This is fun!</p>",
        "id": 482183327,
        "sender_full_name": "Kiran",
        "timestamp": 1731507652
    }
]