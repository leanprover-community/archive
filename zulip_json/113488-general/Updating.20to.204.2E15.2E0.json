[
    {
        "content": "<p>I am trying to update CamCombi to 4.15.0 and I get a lot of error lines of the form</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">MD4Lean</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">61</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">MD4Lean</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">26</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plausible</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">2</span><span class=\"n\">c57364ef83406ea86d0f78ce3e342079a2fece5'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">importGraph</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">9</span><span class=\"n\">a0b533c2fbd6195df067630be18e11e4349051c'</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">28</span><span class=\"o\">:</span><span class=\"mi\">63</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">40</span><span class=\"o\">:</span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob.collectArray</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job.collectArray</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">46</span><span class=\"o\">:</span><span class=\"mi\">29</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob.bindSync</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job.mapM</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">aesop</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">2689851</span><span class=\"n\">f387bb2cef351e6825fe94a56a304ca13'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Qq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">f0c584bcb14c5adfb53079781eeea75b26ebbd32'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">e8dc5fc16c625fc4fe08f42d625523275ddbbb4b'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">running</span><span class=\"w\"> </span><span class=\"n\">post</span><span class=\"bp\">-</span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">hooks</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">134</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">addTrace'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">135</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">addTrace'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">138</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">addTrace'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">139</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">addTrace'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">142</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">addTrace'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">144</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">mapM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">BuildJob</span><span class=\"bp\">.</span><span class=\"n\">mapM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">BuildJob</span><span class=\"w\"> </span><span class=\"n\">FilePath</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">144</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">mapM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">Job</span><span class=\"bp\">.</span><span class=\"n\">mapM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Job</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">BuildTrace</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 491859991,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1735981016
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> since I see you literally just bumped mathlib to 4.15.0</p>",
        "id": 491860017,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1735981051
    },
    {
        "content": "<p>I tried bumping mathlib on FLT and got similar errors. Here is the full output:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>buzzard@brutus:~/lean-projects/FLT$<span class=\"w\"> </span>./scripts/update_mathlib.sh\n<span class=\"w\">  </span>%<span class=\"w\"> </span>Total<span class=\"w\">    </span>%<span class=\"w\"> </span>Received<span class=\"w\"> </span>%<span class=\"w\"> </span>Xferd<span class=\"w\">  </span>Average<span class=\"w\"> </span>Speed<span class=\"w\">   </span>Time<span class=\"w\">    </span>Time<span class=\"w\">     </span>Time<span class=\"w\">  </span>Current\n<span class=\"w\">                                 </span>Dload<span class=\"w\">  </span>Upload<span class=\"w\">   </span>Total<span class=\"w\">   </span>Spent<span class=\"w\">    </span>Left<span class=\"w\">  </span>Speed\n<span class=\"m\">100</span><span class=\"w\">    </span><span class=\"m\">25</span><span class=\"w\">  </span><span class=\"m\">100</span><span class=\"w\">    </span><span class=\"m\">25</span><span class=\"w\">    </span><span class=\"m\">0</span><span class=\"w\">     </span><span class=\"m\">0</span><span class=\"w\">    </span><span class=\"m\">106</span><span class=\"w\">      </span><span class=\"m\">0</span><span class=\"w\"> </span>--:--:--<span class=\"w\"> </span>--:--:--<span class=\"w\"> </span>--:--:--<span class=\"w\">   </span><span class=\"m\">106</span>\ninfo:<span class=\"w\"> </span>downloading<span class=\"w\"> </span>component<span class=\"w\"> </span><span class=\"s1\">'lean'</span>\n<span class=\"m\">252</span>.6<span class=\"w\"> </span>MiB<span class=\"w\"> </span>/<span class=\"w\"> </span><span class=\"m\">252</span>.6<span class=\"w\"> </span>MiB<span class=\"w\"> </span><span class=\"o\">(</span><span class=\"m\">100</span><span class=\"w\"> </span>%<span class=\"o\">)</span><span class=\"w\">   </span><span class=\"m\">1</span>.9<span class=\"w\"> </span>MiB/s<span class=\"w\"> </span>ETA:<span class=\"w\">   </span><span class=\"m\">0</span><span class=\"w\"> </span>s\ninfo:<span class=\"w\"> </span>installing<span class=\"w\"> </span>component<span class=\"w\"> </span><span class=\"s1\">'lean'</span>\ninfo:<span class=\"w\"> </span>doc-gen4:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'9d993b252964a394dc4beb84f2a2a210de5f5936'</span>\ninfo:<span class=\"w\"> </span>mathlib:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'a97b21ff86ea58a827f0d95be7ff3d799647b417'</span>\ninfo:<span class=\"w\"> </span>updating<span class=\"w\"> </span>toolchain<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'leanprover/lean4:v4.16.0-rc1'</span>\ninfo:<span class=\"w\"> </span>restarting<span class=\"w\"> </span>Lake<span class=\"w\"> </span>via<span class=\"w\"> </span>Elan\ninfo:<span class=\"w\"> </span>downloading<span class=\"w\"> </span>component<span class=\"w\"> </span><span class=\"s1\">'lean'</span>\n<span class=\"m\">261</span>.1<span class=\"w\"> </span>MiB<span class=\"w\"> </span>/<span class=\"w\"> </span><span class=\"m\">261</span>.1<span class=\"w\"> </span>MiB<span class=\"w\"> </span><span class=\"o\">(</span><span class=\"m\">100</span><span class=\"w\"> </span>%<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"m\">248</span>.0<span class=\"w\"> </span>KiB/s<span class=\"w\"> </span>ETA:<span class=\"w\">   </span><span class=\"m\">0</span><span class=\"w\"> </span>s\ninfo:<span class=\"w\"> </span>installing<span class=\"w\"> </span>component<span class=\"w\"> </span><span class=\"s1\">'lean'</span>\ninfo:<span class=\"w\"> </span>toolchain<span class=\"w\"> </span>not<span class=\"w\"> </span>updated<span class=\"p\">;</span><span class=\"w\"> </span>already<span class=\"w\"> </span>up-to-date\ninfo:<span class=\"w\"> </span>UnicodeBasic:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'470c41643209208d325a5a7315116f293c7443fb'</span>\ninfo:<span class=\"w\"> </span>BibtexQuery:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'46376bc3c8f46ac1a1fd7712856b0f7bd6166098'</span>\ninfo:<span class=\"w\"> </span>MD4Lean:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'f8ed91f3a9d806648ae6a03ab98c8b87e8bedc7e'</span>\nwarning:<span class=\"w\"> </span>././.lake/packages/MD4Lean/lakefile.lean:13:61:<span class=\"w\"> </span>warning:<span class=\"w\"> </span><span class=\"sb\">`</span>Lake.BuildJob<span class=\"sb\">`</span><span class=\"w\"> </span>has<span class=\"w\"> </span>been<span class=\"w\"> </span>deprecated:<span class=\"w\"> </span>use<span class=\"w\"> </span><span class=\"sb\">`</span>Lake.Job<span class=\"sb\">`</span><span class=\"w\"> </span>instead\n\nwarning:<span class=\"w\"> </span>././.lake/packages/MD4Lean/lakefile.lean:26:45:<span class=\"w\"> </span>warning:<span class=\"w\"> </span><span class=\"sb\">`</span>Lake.BuildJob<span class=\"sb\">`</span><span class=\"w\"> </span>has<span class=\"w\"> </span>been<span class=\"w\"> </span>deprecated:<span class=\"w\"> </span>use<span class=\"w\"> </span><span class=\"sb\">`</span>Lake.Job<span class=\"sb\">`</span><span class=\"w\"> </span>instead\n\ninfo:<span class=\"w\"> </span>plausible:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'2c57364ef83406ea86d0f78ce3e342079a2fece5'</span>\ninfo:<span class=\"w\"> </span>importGraph:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'9a0b533c2fbd6195df067630be18e11e4349051c'</span>\nwarning:<span class=\"w\"> </span>././.lake/packages/proofwidgets/lakefile.lean:28:63:<span class=\"w\"> </span>warning:<span class=\"w\"> </span><span class=\"sb\">`</span>Lake.BuildJob<span class=\"sb\">`</span><span class=\"w\"> </span>has<span class=\"w\"> </span>been<span class=\"w\"> </span>deprecated:<span class=\"w\"> </span>use<span class=\"w\"> </span><span class=\"sb\">`</span>Lake.Job<span class=\"sb\">`</span><span class=\"w\"> </span>instead\n\nwarning:<span class=\"w\"> </span>././.lake/packages/proofwidgets/lakefile.lean:40:13:<span class=\"w\"> </span>warning:<span class=\"w\"> </span><span class=\"sb\">`</span>Lake.BuildJob.collectArray<span class=\"sb\">`</span><span class=\"w\"> </span>has<span class=\"w\"> </span>been<span class=\"w\"> </span>deprecated:<span class=\"w\"> </span>use<span class=\"w\"> </span><span class=\"sb\">`</span>Lake.Job.collectArray<span class=\"sb\">`</span><span class=\"w\"> </span>instead\n\nwarning:<span class=\"w\"> </span>././.lake/packages/proofwidgets/lakefile.lean:46:29:<span class=\"w\"> </span>warning:<span class=\"w\"> </span><span class=\"sb\">`</span>Lake.BuildJob.bindSync<span class=\"sb\">`</span><span class=\"w\"> </span>has<span class=\"w\"> </span>been<span class=\"w\"> </span>deprecated:<span class=\"w\"> </span>use<span class=\"w\"> </span><span class=\"sb\">`</span>Lake.Job.mapM<span class=\"sb\">`</span><span class=\"w\"> </span>instead\n\ninfo:<span class=\"w\"> </span>aesop:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'2689851f387bb2cef351e6825fe94a56a304ca13'</span>\ninfo:<span class=\"w\"> </span>Qq:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'f0c584bcb14c5adfb53079781eeea75b26ebbd32'</span>\ninfo:<span class=\"w\"> </span>batteries:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'e8dc5fc16c625fc4fe08f42d625523275ddbbb4b'</span>\ninfo:<span class=\"w\"> </span>mathlib:<span class=\"w\"> </span>running<span class=\"w\"> </span>post-update<span class=\"w\"> </span>hooks\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:134:4:<span class=\"w\"> </span>error:<span class=\"w\"> </span>unknown<span class=\"w\"> </span>identifier<span class=\"w\"> </span><span class=\"s1\">'addTrace'</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:135:4:<span class=\"w\"> </span>error:<span class=\"w\"> </span>unknown<span class=\"w\"> </span>identifier<span class=\"w\"> </span><span class=\"s1\">'addTrace'</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:138:4:<span class=\"w\"> </span>error:<span class=\"w\"> </span>unknown<span class=\"w\"> </span>identifier<span class=\"w\"> </span><span class=\"s1\">'addTrace'</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:139:4:<span class=\"w\"> </span>error:<span class=\"w\"> </span>unknown<span class=\"w\"> </span>identifier<span class=\"w\"> </span><span class=\"s1\">'addTrace'</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:142:4:<span class=\"w\"> </span>error:<span class=\"w\"> </span>unknown<span class=\"w\"> </span>identifier<span class=\"w\"> </span><span class=\"s1\">'addTrace'</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:144:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span><span class=\"s1\">'mapM'</span>,<span class=\"w\"> </span>the<span class=\"w\"> </span>environment<span class=\"w\"> </span>does<span class=\"w\"> </span>not<span class=\"w\"> </span>contain<span class=\"w\"> </span><span class=\"s1\">'Lake.BuildJob.mapM'</span>\n<span class=\"w\">  </span>exeJob\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>BuildJob<span class=\"w\"> </span>FilePath\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:144:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span><span class=\"s1\">'mapM'</span>,<span class=\"w\"> </span>the<span class=\"w\"> </span>environment<span class=\"w\"> </span>does<span class=\"w\"> </span>not<span class=\"w\"> </span>contain<span class=\"w\"> </span><span class=\"s1\">'Lake.Job.mapM'</span>\n<span class=\"w\">  </span>exeJob\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>Job<span class=\"w\"> </span><span class=\"o\">(</span>FilePath<span class=\"w\"> </span>×<span class=\"w\"> </span>BuildTrace<span class=\"o\">)</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:144:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span><span class=\"s1\">'mapM'</span>,<span class=\"w\"> </span>the<span class=\"w\"> </span>environment<span class=\"w\"> </span>does<span class=\"w\"> </span>not<span class=\"w\"> </span>contain<span class=\"w\"> </span><span class=\"s1\">'Lake.JobCore.mapM'</span>\n<span class=\"w\">  </span>exeJob\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>JobCore<span class=\"w\"> </span><span class=\"o\">(</span>JobTask<span class=\"w\"> </span><span class=\"o\">(</span>FilePath<span class=\"w\"> </span>×<span class=\"w\"> </span>BuildTrace<span class=\"o\">))</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:156:22:<span class=\"w\"> </span>error:<span class=\"w\"> </span>failed<span class=\"w\"> </span>to<span class=\"w\"> </span>synthesize\n<span class=\"w\">  </span>FamilyOut<span class=\"w\"> </span>CustomData<span class=\"w\"> </span><span class=\"o\">(</span>bibPrepass.pkg,<span class=\"w\"> </span>bibPrepass.name<span class=\"o\">)</span><span class=\"w\"> </span>?m.7376\nAdditional<span class=\"w\"> </span>diagnostic<span class=\"w\"> </span>information<span class=\"w\"> </span>may<span class=\"w\"> </span>be<span class=\"w\"> </span>available<span class=\"w\"> </span>using<span class=\"w\"> </span>the<span class=\"w\"> </span><span class=\"sb\">`</span>set_option<span class=\"w\"> </span>diagnostics<span class=\"w\"> </span><span class=\"nb\">true</span><span class=\"sb\">`</span><span class=\"w\"> </span>command.\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:160:20:<span class=\"w\"> </span>error:<span class=\"w\"> </span>unknown<span class=\"w\"> </span>constant<span class=\"w\"> </span><span class=\"s1\">'Lake.Job.mixArray'</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:164:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span>notation,<span class=\"w\"> </span><span class=\"nb\">type</span><span class=\"w\"> </span>is<span class=\"w\"> </span>not<span class=\"w\"> </span>of<span class=\"w\"> </span>the<span class=\"w\"> </span>form<span class=\"w\"> </span><span class=\"o\">(</span>C<span class=\"w\"> </span>...<span class=\"o\">)</span><span class=\"w\"> </span>where<span class=\"w\"> </span>C<span class=\"w\"> </span>is<span class=\"w\"> </span>a<span class=\"w\"> </span>constant\n<span class=\"w\">  </span>depDocJobs\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>?m.9091<span class=\"w\"> </span>mod<span class=\"w\"> </span>exeJob<span class=\"w\"> </span>bibPrepassJob<span class=\"w\"> </span>modJob<span class=\"w\"> </span>imports<span class=\"w\"> </span>__do_lift✝¹\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:179:22:<span class=\"w\"> </span>error:<span class=\"w\"> </span>failed<span class=\"w\"> </span>to<span class=\"w\"> </span>synthesize\n<span class=\"w\">  </span>FamilyOut<span class=\"w\"> </span>CustomData<span class=\"w\"> </span><span class=\"o\">(</span>bibPrepass.pkg,<span class=\"w\"> </span>bibPrepass.name<span class=\"o\">)</span><span class=\"w\"> </span>?m.9229\nAdditional<span class=\"w\"> </span>diagnostic<span class=\"w\"> </span>information<span class=\"w\"> </span>may<span class=\"w\"> </span>be<span class=\"w\"> </span>available<span class=\"w\"> </span>using<span class=\"w\"> </span>the<span class=\"w\"> </span><span class=\"sb\">`</span>set_option<span class=\"w\"> </span>diagnostics<span class=\"w\"> </span><span class=\"nb\">true</span><span class=\"sb\">`</span><span class=\"w\"> </span>command.\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:183:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span>notation,<span class=\"w\"> </span><span class=\"nb\">type</span><span class=\"w\"> </span>is<span class=\"w\"> </span>not<span class=\"w\"> </span>of<span class=\"w\"> </span>the<span class=\"w\"> </span>form<span class=\"w\"> </span><span class=\"o\">(</span>C<span class=\"w\"> </span>...<span class=\"o\">)</span><span class=\"w\"> </span>where<span class=\"w\"> </span>C<span class=\"w\"> </span>is<span class=\"w\"> </span>a<span class=\"w\"> </span>constant\n<span class=\"w\">  </span>bibPrepassJob\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>?m.10597<span class=\"w\"> </span>exeJob\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:195:9:<span class=\"w\"> </span>error:<span class=\"w\"> </span>unknown<span class=\"w\"> </span>constant<span class=\"w\"> </span><span class=\"s1\">'Lake.Job.mixArray'</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:199:20:<span class=\"w\"> </span>error:<span class=\"w\"> </span>unknown<span class=\"w\"> </span>constant<span class=\"w\"> </span><span class=\"s1\">'Lake.Job.mixArray'</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:226:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span><span class=\"s1\">'bindM'</span>,<span class=\"w\"> </span>the<span class=\"w\"> </span>environment<span class=\"w\"> </span>does<span class=\"w\"> </span>not<span class=\"w\"> </span>contain<span class=\"w\"> </span><span class=\"s1\">'Lake.BuildJob.bindM'</span>\n<span class=\"w\">  </span>exeJob\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>BuildJob<span class=\"w\"> </span>FilePath\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:226:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span><span class=\"s1\">'bindM'</span>,<span class=\"w\"> </span>the<span class=\"w\"> </span>environment<span class=\"w\"> </span>does<span class=\"w\"> </span>not<span class=\"w\"> </span>contain<span class=\"w\"> </span><span class=\"s1\">'Lake.Job.bindM'</span>\n<span class=\"w\">  </span>exeJob\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>Job<span class=\"w\"> </span><span class=\"o\">(</span>FilePath<span class=\"w\"> </span>×<span class=\"w\"> </span>BuildTrace<span class=\"o\">)</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:226:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span><span class=\"s1\">'bindM'</span>,<span class=\"w\"> </span>the<span class=\"w\"> </span>environment<span class=\"w\"> </span>does<span class=\"w\"> </span>not<span class=\"w\"> </span>contain<span class=\"w\"> </span><span class=\"s1\">'Lake.JobCore.bindM'</span>\n<span class=\"w\">  </span>exeJob\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>JobCore<span class=\"w\"> </span><span class=\"o\">(</span>JobTask<span class=\"w\"> </span><span class=\"o\">(</span>FilePath<span class=\"w\"> </span>×<span class=\"w\"> </span>BuildTrace<span class=\"o\">))</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:241:20:<span class=\"w\"> </span>error:<span class=\"w\"> </span>unknown<span class=\"w\"> </span>constant<span class=\"w\"> </span><span class=\"s1\">'Lake.Job.mixArray'</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:248:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span><span class=\"s1\">'bindM'</span>,<span class=\"w\"> </span>the<span class=\"w\"> </span>environment<span class=\"w\"> </span>does<span class=\"w\"> </span>not<span class=\"w\"> </span>contain<span class=\"w\"> </span><span class=\"s1\">'Lake.BuildJob.bindM'</span>\n<span class=\"w\">  </span>exeJob\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>BuildJob<span class=\"w\"> </span>FilePath\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:248:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span><span class=\"s1\">'bindM'</span>,<span class=\"w\"> </span>the<span class=\"w\"> </span>environment<span class=\"w\"> </span>does<span class=\"w\"> </span>not<span class=\"w\"> </span>contain<span class=\"w\"> </span><span class=\"s1\">'Lake.Job.bindM'</span>\n<span class=\"w\">  </span>exeJob\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>Job<span class=\"w\"> </span><span class=\"o\">(</span>FilePath<span class=\"w\"> </span>×<span class=\"w\"> </span>BuildTrace<span class=\"o\">)</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:248:2:<span class=\"w\"> </span>error:<span class=\"w\"> </span>invalid<span class=\"w\"> </span>field<span class=\"w\"> </span><span class=\"s1\">'bindM'</span>,<span class=\"w\"> </span>the<span class=\"w\"> </span>environment<span class=\"w\"> </span>does<span class=\"w\"> </span>not<span class=\"w\"> </span>contain<span class=\"w\"> </span><span class=\"s1\">'Lake.JobCore.bindM'</span>\n<span class=\"w\">  </span>exeJob\nhas<span class=\"w\"> </span><span class=\"nb\">type</span>\n<span class=\"w\">  </span>JobCore<span class=\"w\"> </span><span class=\"o\">(</span>JobTask<span class=\"w\"> </span><span class=\"o\">(</span>FilePath<span class=\"w\"> </span>×<span class=\"w\"> </span>BuildTrace<span class=\"o\">))</span>\n\nerror:<span class=\"w\"> </span>././.lake/packages/doc-gen4/lakefile.lean:<span class=\"w\"> </span>package<span class=\"w\"> </span>configuration<span class=\"w\"> </span>has<span class=\"w\"> </span>errors\nerror:<span class=\"w\"> </span>mathlib:<span class=\"w\"> </span>failed<span class=\"w\"> </span>to<span class=\"w\"> </span>fetch<span class=\"w\"> </span>cache\nbuzzard@brutus:~/lean-projects/FLT$\n</code></pre></div>\n<p>I was surprised to see lake downloading not one but two versions of Lean during the process but I must confess I don't pay much attention to the process usually.</p>",
        "id": 491860743,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735981796
    },
    {
        "content": "<p>It changed the toolchain first to 4.16.0-rc1, then to 4.15.0</p>",
        "id": 491860939,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1735981978
    },
    {
        "content": "<p>Indeed I started on <code>leanprover/lean4:v4.15.0-rc1</code> (I assume I am usually on an rc because I work with mathlib master) and finished on <code>leanprover/lean4:v4.15.0</code> according to <code>lean-toolchain</code>. (Just to add: I bumped mathlib yesterday and it worked fine, and I'm in no hurry to bump it again, I'm not trying to put pressure on here, I know it's the weekend, I'm just trying to be helpful)</p>",
        "id": 491861085,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735982129
    },
    {
        "content": "<p>Same for <a class=\"stream\" data-stream-id=\"458659\" href=\"/#narrow/channel/458659-Equational\">#Equational</a> by the way.</p>",
        "id": 491873613,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1735993983
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> and <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> could we get some help here? It seems all projects using Mathlib are stuck in their upgrading.</p>",
        "id": 491874462,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1735994714
    },
    {
        "content": "<p>FWIW, I had no problem upgrading Carleson in <a href=\"https://github.com/fpvandoorn/carleson/pull/202\">https://github.com/fpvandoorn/carleson/pull/202</a>. Could it be related to the way the project is set up?</p>",
        "id": 491879013,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1735998682
    },
    {
        "content": "<p>The problem might arise when <code>push.yml</code> in the master branch (not <code>push_pr.yml</code> in the related PR branch) runs. </p>\n<p>See <a href=\"#narrow/stream/442935-Carleson/topic/.5BDOCS.5D.20New.20setup.20for.20doc-gen4\">https://leanprover.zulipchat.com/#narrow/stream/442935-Carleson/topic/.5BDOCS.5D.20New.20setup.20for.20doc-gen4</a></p>",
        "id": 491879363,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1735999003
    },
    {
        "content": "<p>How could this have anything to do with the project's CI? The failure occurs locally</p>",
        "id": 491881126,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736000694
    },
    {
        "content": "<p>Because we use the <code>docbuild</code> thing in Carleson which means that we have separate “channels” to update Mathlib and Doc-Gen.</p>",
        "id": 491881221,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1736000779
    },
    {
        "content": "<p>I guess that the reason why it’s not failing locally for Carleson might be that it’s not updating <code>doc-gen</code>.</p>",
        "id": 491881305,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1736000878
    },
    {
        "content": "<p>Yep, now I am at home and can confirm: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">docbuild</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">carleson</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">docbuild</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">manifest</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">creating</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">scratch</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">535</span><span class=\"n\">c69d52d2359e7973c9c7bdc4041845dfab27e'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">updating</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">restarting</span><span class=\"w\"> </span><span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">via</span><span class=\"w\"> </span><span class=\"n\">Elan</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">docbuild</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">manifest</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">creating</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">scratch</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">updated</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">already</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">date</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">UnicodeBasic</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">fgdorais</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">unicode</span><span class=\"bp\">-</span><span class=\"n\">basic</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">UnicodeBasic</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">470</span><span class=\"n\">c41643209208d325a5a7315116f293c7443fb'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BibtexQuery</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">dupuisf</span><span class=\"bp\">/</span><span class=\"n\">BibtexQuery</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BibtexQuery</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">46376</span><span class=\"n\">bc3c8f46ac1a1fd7712856b0f7bd6166098'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MD4Lean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">acmepjz</span><span class=\"bp\">/</span><span class=\"n\">md4lean</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MD4Lean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">f8ed91f3a9d806648ae6a03ab98c8b87e8bedc7e'</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">MD4Lean</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"mi\">61</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">MD4Lean</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">26</span><span class=\"o\">:</span><span class=\"mi\">45</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">28</span><span class=\"o\">:</span><span class=\"mi\">63</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">40</span><span class=\"o\">:</span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob.collectArray</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job.collectArray</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">46</span><span class=\"o\">:</span><span class=\"mi\">29</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob.bindSync</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job.mapM</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">running</span><span class=\"w\"> </span><span class=\"n\">post</span><span class=\"bp\">-</span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">hooks</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">134</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">addTrace'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">135</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">addTrace'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">138</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">addTrace'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">139</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">addTrace'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">142</span><span class=\"o\">:</span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">addTrace'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">144</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">mapM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">BuildJob</span><span class=\"bp\">.</span><span class=\"n\">mapM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">BuildJob</span><span class=\"w\"> </span><span class=\"n\">FilePath</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">144</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">mapM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">Job</span><span class=\"bp\">.</span><span class=\"n\">mapM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Job</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">BuildTrace</span><span class=\"o\">)</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">144</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">mapM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">JobCore</span><span class=\"bp\">.</span><span class=\"n\">mapM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">JobCore</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">JobTask</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">BuildTrace</span><span class=\"o\">))</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">156</span><span class=\"o\">:</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">synthesize</span>\n<span class=\"w\">  </span><span class=\"n\">FamilyOut</span><span class=\"w\"> </span><span class=\"n\">CustomData</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">bibPrepass</span><span class=\"bp\">.</span><span class=\"n\">pkg</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">bibPrepass</span><span class=\"bp\">.</span><span class=\"n\">name</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">7376</span>\n<span class=\"n\">Additional</span><span class=\"w\"> </span><span class=\"n\">diagnostic</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">available</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">diagnostics</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"bp\">.</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">160</span><span class=\"o\">:</span><span class=\"mi\">20</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">Job</span><span class=\"bp\">.</span><span class=\"n\">mixArray'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">164</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">form</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">constant</span>\n<span class=\"w\">  </span><span class=\"n\">depDocJobs</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">9091</span><span class=\"w\"> </span><span class=\"n\">mod</span><span class=\"w\"> </span><span class=\"n\">exeJob</span><span class=\"w\"> </span><span class=\"n\">bibPrepassJob</span><span class=\"w\"> </span><span class=\"n\">modJob</span><span class=\"w\"> </span><span class=\"n\">imports</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">do_lift</span><span class=\"bp\">✝¹</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">179</span><span class=\"o\">:</span><span class=\"mi\">22</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">synthesize</span>\n<span class=\"w\">  </span><span class=\"n\">FamilyOut</span><span class=\"w\"> </span><span class=\"n\">CustomData</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">bibPrepass</span><span class=\"bp\">.</span><span class=\"n\">pkg</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">bibPrepass</span><span class=\"bp\">.</span><span class=\"n\">name</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">9229</span>\n<span class=\"n\">Additional</span><span class=\"w\"> </span><span class=\"n\">diagnostic</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">may</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">available</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">diagnostics</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"bp\">.</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">183</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">form</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">constant</span>\n<span class=\"w\">  </span><span class=\"n\">bibPrepassJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">10597</span><span class=\"w\"> </span><span class=\"n\">exeJob</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">195</span><span class=\"o\">:</span><span class=\"mi\">9</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">Job</span><span class=\"bp\">.</span><span class=\"n\">mixArray'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">199</span><span class=\"o\">:</span><span class=\"mi\">20</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">Job</span><span class=\"bp\">.</span><span class=\"n\">mixArray'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">226</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">bindM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">BuildJob</span><span class=\"bp\">.</span><span class=\"n\">bindM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">BuildJob</span><span class=\"w\"> </span><span class=\"n\">FilePath</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">226</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">bindM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">Job</span><span class=\"bp\">.</span><span class=\"n\">bindM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Job</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">BuildTrace</span><span class=\"o\">)</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">226</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">bindM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">JobCore</span><span class=\"bp\">.</span><span class=\"n\">bindM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">JobCore</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">JobTask</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">BuildTrace</span><span class=\"o\">))</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">241</span><span class=\"o\">:</span><span class=\"mi\">20</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">Job</span><span class=\"bp\">.</span><span class=\"n\">mixArray'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">248</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">bindM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">BuildJob</span><span class=\"bp\">.</span><span class=\"n\">bindM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">BuildJob</span><span class=\"w\"> </span><span class=\"n\">FilePath</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">248</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">bindM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">Job</span><span class=\"bp\">.</span><span class=\"n\">bindM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Job</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">BuildTrace</span><span class=\"o\">)</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">248</span><span class=\"o\">:</span><span class=\"mi\">2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">bindM'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Lake</span><span class=\"bp\">.</span><span class=\"n\">JobCore</span><span class=\"bp\">.</span><span class=\"n\">bindM'</span>\n<span class=\"w\">  </span><span class=\"n\">exeJob</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">JobCore</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">JobTask</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FilePath</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">BuildTrace</span><span class=\"o\">))</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">package</span><span class=\"w\"> </span><span class=\"n\">configuration</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">errors</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n</code></pre></div>",
        "id": 491884801,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1736004010
    },
    {
        "content": "<p>The title of this thread is wrong, I think. No one is experiencing problems with v4.15.0, it's only v4.16.0-rc1 from what I can see above?</p>",
        "id": 491911540,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736027632
    },
    {
        "content": "<p>I think what has gone wrong is that we prematurely merged <a href=\"https://github.com/leanprover/doc-gen4/pull/255\">https://github.com/leanprover/doc-gen4/pull/255</a>, the PR bumping doc-gen4 to v4.16.0-rc1, because doc-gen4 CI isn't set up to fail on warnings.</p>",
        "id": 491911673,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736027736
    },
    {
        "content": "<p>See <a href=\"https://github.com/leanprover/doc-gen4/actions/runs/12607913996/job/35139815612#step:3:79\">https://github.com/leanprover/doc-gen4/actions/runs/12607913996/job/35139815612#step:3:79</a></p>",
        "id": 491911686,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736027749
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/doc-gen4/issues/256\">https://github.com/leanprover/doc-gen4/issues/256</a></p>",
        "id": 491911779,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736027810
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span>, would you be able to update the CI so this doesn't happen?</p>",
        "id": 491911801,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736027827
    },
    {
        "content": "<p>Actually, maybe this is really a question for <span class=\"user-mention\" data-user-id=\"699684\">@Austin Letson</span> --- could we change the default for <code>lean-action</code> to fail if there are warning during the build?</p>",
        "id": 491911829,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736027852
    },
    {
        "content": "<p>Okay, <a href=\"https://github.com/acmepjz/md4lean/pull/4\">https://github.com/acmepjz/md4lean/pull/4</a> is the (trivial) fix required for md4lean. We're now blocked on merging this. I've asked <span class=\"user-mention\" data-user-id=\"366779\">@Jz Pan</span> for write access to this repository so that I can make fixes like this directly during future releases.</p>",
        "id": 491912269,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736028190
    },
    {
        "content": "<p>Looking further at the messages above, I suspect people are using mismatched versions of things. If you want to be on toolchain v4.16.0-rc1, you need to be using ProofWidgets at v0.0.50, and I don't think you should be seeing the errors messages that <span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span> saw above!</p>",
        "id": 491912400,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736028300
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491911829\">said</a>:</p>\n<blockquote>\n<p>Actually, maybe this is really a question for <span class=\"user-mention silent\" data-user-id=\"699684\">Austin Letson</span> --- could we change the default for <code>lean-action</code> to fail if there are warning during the build?</p>\n</blockquote>\n<p>I made the change to doc-gen in <a href=\"https://github.com/leanprover/doc-gen4/pull/257\">https://github.com/leanprover/doc-gen4/pull/257</a>, unfortunately, unlike it should, the CI does not error on building doc-gen itself as it recovers the build from a cache, this seems to be an indicator to me that the cache key used to compute build results is not taking into accounts things like change of arguments etc. This should probably also be addressed <span class=\"user-mention\" data-user-id=\"699684\">@Austin Letson</span>. Alternatively maybe this is not an issue with lean-action itself but with <code>lake</code>, I can't quite tell.</p>",
        "id": 491913348,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736029142
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> or <span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span>, could you please post instructions to reproduce your problems? (starting with a git clone)</p>",
        "id": 491913371,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736029167
    },
    {
        "content": "<ol>\n<li>Open LeanCamCombi in gitpod</li>\n<li>Run <code>scripts/update_mathlib.sh</code></li>\n</ol>",
        "id": 491913457,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736029226
    },
    {
        "content": "<p>I suspect what is going on is that you are running <code>lake update</code>, that is seeing that <del>Batteries</del> <code>doc-gen4</code> is already at v4.16.0-rc1, so it is moving the toolchain to that, but then you are still using <code>v0.0.48</code> or <code>v0.0.49</code> of ProofWidgets, which is not compatible with v4.16.0-rc1</p>",
        "id": 491913468,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736029237
    },
    {
        "content": "<p>Yes, that sounds plausible, since I see the toolchain jump back and forth when I run <code>lake update</code></p>",
        "id": 491913498,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736029276
    },
    {
        "content": "<p>Kim, thanks a lot for investigating this <span aria-label=\"pray\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"pray\">:pray:</span></p>",
        "id": 491913773,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1736029554
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491913457\">said</a>:</p>\n<blockquote>\n<ol>\n<li>Open LeanCamCombi in gitpod</li>\n<li>Run <code>scripts/update_mathlib.sh</code></li>\n</ol>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> two suggestions:</p>\n<ol>\n<li>It is more helpful if you give a URL, rather than asking people to google for the repo.</li>\n<li>Specifying a commit is helpful for reproducibility.</li>\n</ol>",
        "id": 491913886,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736029641
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span>, I think this comes down to unfortunate behaviour of <code>lake</code>'s new ability to update the toolchain automatically.</p>\n<p>To reproduce:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">clone</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"bp\">@</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"o\">:</span><span class=\"n\">YaelDillies</span><span class=\"bp\">/</span><span class=\"n\">LeanCamCombi</span><span class=\"bp\">.</span><span class=\"n\">git</span>\n<span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">LeanCamCombi</span>\n<span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">checkout</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"n\">a6a670f324b2af82ae17f21f9d51ac0bc859f6f</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">Kenv</span><span class=\"bp\">=</span><span class=\"n\">dev</span><span class=\"w\"> </span><span class=\"n\">update</span>\n</code></pre></div>\n<p>this then prints:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">updating</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">restarting</span><span class=\"w\"> </span><span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">via</span><span class=\"w\"> </span><span class=\"n\">Elan</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">updated</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">already</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">date</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">28</span><span class=\"o\">:</span><span class=\"mi\">63</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"ss\">`Lake.BuildJob</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">deprecated</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`Lake.Job</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n</code></pre></div>\n<p>followed by many more warnings and errors.</p>\n<p>What is going on here?</p>\n<ul>\n<li><code>lake</code> looks at the two declarated dependencies, Mathlib and <code>doc-gen4</code></li>\n<li>sees that they respectively ask for the toolchains v4.15.0 and v4.16.0-rc1</li>\n<li>correctly decides that <code>v4.16.0-rc1</code> is \"the latest\"</li>\n<li>and tries to switch the toolchain to that</li>\n</ul>\n<p>which then breaks everything, because Mathlib master can't cope with <code>v4.16.0-rc1</code>. (In particular, Mathlib master is using ProofWidgets v0.0.48, resulting in the first warning above.)</p>",
        "id": 491914163,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736029886
    },
    {
        "content": "<p>What we need here is support from lake for specifying in the lakefile which dependency to track for the purposes of the toolchain. In this situation, we really want to stay on <code>v4.15.0</code>, because Mathlib being on the right toolchain is more critical than doc-gen4 being on the right toolchain.</p>",
        "id": 491914250,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736029957
    },
    {
        "content": "<p>(In practice, even that is not going to work, and running <code>lake update</code> is simply doomed when Mathlib <code>master</code> and doc-gen4 <code>main</code> rely on different toolchains, as they do today.)</p>",
        "id": 491914287,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736029996
    },
    {
        "content": "<p>Intermediate solutions:</p>\n<ol>\n<li>we can just go ahead and merge <a href=\"https://github.com/leanprover-community/mathlib4/pull/20464\">#20464</a>, getting Mathlib onto v4.16.0-rc1, so everything is available at the same toolchain</li>\n<li>we can <em>please</em> stop adding doc-gen4 as a dependency to development projects, and instead generate docs in a supplementary project, as discussed previously, until such time as we can drop/replace doc-gen4.</li>\n</ol>",
        "id": 491914391,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736030100
    },
    {
        "content": "<p>Last time I tried (a month and a half ago), I failed to understand how to get the new setup working. It's been on my todo list but hasn't bubbled up to the top yet</p>",
        "id": 491914863,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736030536
    },
    {
        "content": "<p>Sorry, I would have given you the link but it's really hard to get it right from a phone</p>",
        "id": 491916200,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736032016
    },
    {
        "content": "<p>I run the following once again and it worked: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">clone</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">sgouezel</span><span class=\"bp\">/</span><span class=\"n\">carleson</span><span class=\"bp\">.</span><span class=\"n\">git</span>\n<span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">carleson</span>\n<span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">origin</span><span class=\"w\"> </span><span class=\"n\">SG_bump_415</span>\n<span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">checkout</span><span class=\"w\"> </span><span class=\"n\">SG_bump_415</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">docbuild</span>\n<span class=\"bp\">../</span><span class=\"n\">scripts</span><span class=\"bp\">/</span><span class=\"n\">setup_lake_package_symlinks</span><span class=\"bp\">.</span><span class=\"n\">sh</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">carleson</span>\n</code></pre></div>\n<p>Now both projects (<code>carleson</code> and <code>docbuild</code>) live on <code>lean4:v4.15.0</code> and everything works fine. </p>\n<p>Please note that the Carleson's setup is not yet aligned with the latest recommendations outlined in the <a href=\"https://github.com/leanprover/doc-gen4/blob/main/README.md\">doc-gen4 README</a>.</p>\n<p>Thank you so much Kim for your help!</p>",
        "id": 491916645,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1736032478
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491914391\">said</a>:</p>\n<blockquote>\n<ol>\n<li>we can just go ahead and merge <a href=\"https://github.com/leanprover-community/mathlib4/pull/20464\">#20464</a>, getting Mathlib onto v4.16.0-rc1, so everything is available at the same toolchain</li>\n</ol>\n</blockquote>\n<p>This will not help projects who want to produce a commit at v4.15.0, which I believe is the recommended thing to do if they want others to be able to depend on them. For projects in this situation that are struggling with point 2, is the second best choice for them to pin doc-gen in their lakefile to the same lean version as mathlib?</p>",
        "id": 491917516,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736033390
    },
    {
        "content": "<p>For scripts, I think it's useful to run lake with <code>--keep-toolchain</code> unless the script wants to use lake to figure out the correct toolchain.</p>",
        "id": 491926493,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1736042651
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491912269\">said</a>:</p>\n<blockquote>\n<p>Okay, <a href=\"https://github.com/acmepjz/md4lean/pull/4\">https://github.com/acmepjz/md4lean/pull/4</a> is the (trivial) fix required for md4lean. We're now blocked on merging this. I've asked <span class=\"user-mention silent\" data-user-id=\"366779\">Jz Pan</span> for write access to this repository so that I can make fixes like this directly during future releases.</p>\n</blockquote>\n<p>Merged.</p>",
        "id": 491927077,
        "sender_full_name": "Jz Pan",
        "timestamp": 1736043266
    },
    {
        "content": "<p>Yes, pinning doc-gen4 seems to be a reasonable option.</p>",
        "id": 491937204,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736054631
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>, here's my attempt to get this new setup working:</p>\n<ol>\n<li>Open <a href=\"https://gitpod.io/#https://github.com/YaelDillies/LeanCamCombi\">https://gitpod.io/#https://github.com/YaelDillies/LeanCamCombi</a></li>\n<li><code>git checkout 6a6a670f324b2af82ae17f21f9d51ac0bc859f6f</code></li>\n<li>Follow the instructions over at <a href=\"https://github.com/leanprover/doc-gen4/blob/main/README.md\">https://github.com/leanprover/doc-gen4/blob/main/README.md</a></li>\n</ol>",
        "id": 491970931,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736087045
    },
    {
        "content": "<p><code>lake update doc-gen4</code> within step 3 fails with the same errors as at the start of this topic</p>",
        "id": 491970974,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736087077
    },
    {
        "content": "<p>I am giving up for now, but feel free to ping me whenever the new instructions work</p>",
        "id": 491971150,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736087228
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491970974\">said</a>:</p>\n<blockquote>\n<p><code>lake update doc-gen4</code> within step 3 fails with the same errors as at the start of this topic</p>\n</blockquote>\n<p>It works without the above error for me, did you follow the advice to pin doc-gen to a certain tag if you are developing against a certain revision, so in your case <a href=\"https://github.com/leanprover/doc-gen4/releases/tag/v4.15.0-rc1\">v4.15.0-rc1</a>?</p>",
        "id": 491971727,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736087753
    },
    {
        "content": "<p>Ah no, I did not. How does one do that with <code>lakefile.toml</code>?</p>",
        "id": 491971843,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736087861
    },
    {
        "content": "<p>It says in the template</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"docbuild\"</span>\n<span class=\"n\">reservoir</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kc\">false</span>\n<span class=\"n\">version</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"0.1.0\"</span>\n<span class=\"n\">packagesDir</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"../.lake/packages\"</span>\n\n<span class=\"k\">[[require]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"Your Library Name\"</span>\n<span class=\"n\">path</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"../\"</span>\n\n<span class=\"k\">[[require]]</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover\"</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"doc-gen4\"</span>\n<span class=\"c1\"># Use revision v4.x if you are developing against a stable Lean version.</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s2\">\"main\"</span>\n</code></pre></div>\n<p>just put the tag at <code>rev</code> instead of <code>\"main\"</code></p>",
        "id": 491972077,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736088044
    },
    {
        "content": "<p>Aaah, okay. It wasn't clear this was meant literally. Lean releases are referred to differently in other parts of the ecosystem</p>",
        "id": 491972179,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736088133
    },
    {
        "content": "<p>What would you expect the sentence to be to make sense for the more casual user?</p>",
        "id": 491972220,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736088186
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">If</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">developing</span><span class=\"w\"> </span><span class=\"n\">against</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">stable</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"ss\">`v4.x</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"ss\">`main</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">below</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"ss\">`v4.x</span><span class=\"bp\">`</span>\n</code></pre></div>",
        "id": 491972306,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736088255
    },
    {
        "content": "<p>Doesn't work still, I now get</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">gitpod</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">workspace</span><span class=\"bp\">/</span><span class=\"n\">LeanCamCombi</span><span class=\"bp\">/</span><span class=\"n\">docbuild</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">6</span><span class=\"n\">a6a670</span><span class=\"bp\">...</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">docbuild</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">manifest</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">creating</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">scratch</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">099</span><span class=\"n\">b90e374ba73983c3fda87595be625f1931669'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">updating</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">restarting</span><span class=\"w\"> </span><span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">via</span><span class=\"w\"> </span><span class=\"n\">Elan</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">docbuild</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">manifest</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">creating</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">scratch</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">updated</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">already</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">date</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">UnicodeBasic</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">d55279d2ff01759fa75752fcf1a93d1db8db18ff'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BibtexQuery</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">982700</span><span class=\"n\">bcf78b93166e5b1af0b4b756b8acfdb54b'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MD4Lean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">URL</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">changed</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">deleting</span><span class=\"w\"> </span><span class=\"bp\">'././../.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">MD4Lean'</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">again</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MD4Lean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">acmepjz</span><span class=\"bp\">/</span><span class=\"n\">md4lean</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MD4Lean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">fe8e6e649ac8251f43c6f6f934f095ebebce7e7c'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">running</span><span class=\"w\"> </span><span class=\"n\">post</span><span class=\"bp\">-</span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">hooks</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n</code></pre></div>",
        "id": 491972336,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736088301
    },
    {
        "content": "<p>My <code>lakefile.toml</code> is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"docbuild\"</span>\n<span class=\"n\">reservoir</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">false</span>\n<span class=\"n\">version</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"0.1.0\"</span>\n<span class=\"n\">packagesDir</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"../.lake/packages\"</span>\n\n<span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"LeanCamCombi\"</span>\n<span class=\"n\">path</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"../\"</span>\n\n<span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover\"</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"doc-gen4\"</span>\n<span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Use</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">developing</span><span class=\"w\"> </span><span class=\"n\">against</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">stable</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"bp\">.</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.15.0-rc1\"</span>\n</code></pre></div>",
        "id": 491972353,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736088317
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491972336\">said</a>:</p>\n<blockquote>\n<p>Doesn't work still, I now get</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">gitpod</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">workspace</span><span class=\"bp\">/</span><span class=\"n\">LeanCamCombi</span><span class=\"bp\">/</span><span class=\"n\">docbuild</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">6</span><span class=\"n\">a6a670</span><span class=\"bp\">...</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">docbuild</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">manifest</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">creating</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">scratch</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">099</span><span class=\"n\">b90e374ba73983c3fda87595be625f1931669'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">updating</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">restarting</span><span class=\"w\"> </span><span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">via</span><span class=\"w\"> </span><span class=\"n\">Elan</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">docbuild</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">manifest</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">creating</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">scratch</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">updated</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">already</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"bp\">-</span><span class=\"n\">to</span><span class=\"bp\">-</span><span class=\"n\">date</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">UnicodeBasic</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">d55279d2ff01759fa75752fcf1a93d1db8db18ff'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BibtexQuery</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">982700</span><span class=\"n\">bcf78b93166e5b1af0b4b756b8acfdb54b'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MD4Lean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">URL</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">changed</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">deleting</span><span class=\"w\"> </span><span class=\"bp\">'././../.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">MD4Lean'</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">again</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MD4Lean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">acmepjz</span><span class=\"bp\">/</span><span class=\"n\">md4lean</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MD4Lean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">fe8e6e649ac8251f43c6f6f934f095ebebce7e7c'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">running</span><span class=\"w\"> </span><span class=\"n\">post</span><span class=\"bp\">-</span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">hooks</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">file</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Yes this is unfortunately a known mathlib issue and just a bug in <code>Cache</code>, you can in fact just ignore it and continue on with your life.</p>",
        "id": 491972484,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736088391
    },
    {
        "content": "<p>I was hoping that someone <span aria-label=\"tm\" class=\"emoji emoji-2122\" role=\"img\" title=\"tm\">:tm:</span> would just get to fixing it but I guess I'll put a note in doc-gen specifically for mathlib</p>",
        "id": 491972619,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736088503
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491972484\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>[...]</p>\n</blockquote>\n<p>Yes this is unfortunately a known mathlib issue and just a bug in <code>Cache</code>, you can in fact just ignore it and continue on with your life.</p>\n</blockquote>\n<p>in the sense that the error is a lie and it <em>does</em> work? or in the sense that running <code>lake exe cache get</code> is only a QOL thing and you can just build the project yourself?</p>",
        "id": 491972664,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736088555
    },
    {
        "content": "<p><code>Cache</code> currently doesn't respect the <code>packagesDir</code> flag of <code>lakefile.toml</code> so it just looks in the wrong directory for a mathlib checkout and then throws this error. If you run <code>lake exe cache get</code> from your actual project directory everything just works.</p>",
        "id": 491972783,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736088666
    },
    {
        "content": "<p>Okay I put out an update to the setup instructions to account for the mathlib error and the unclear instructions with respect to the revision.</p>",
        "id": 491972905,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736088783
    },
    {
        "content": "<p>Btw in \"against a stable Lean version\", we can actually use non-stable versions (aka release candidates), right?</p>",
        "id": 491973016,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736088864
    },
    {
        "content": "<p>Right, it's more of a \"not against nightly\", not quite sure how to describe the sets of versions that contain rcs and full releases but not nightlies</p>",
        "id": 491973137,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736088969
    },
    {
        "content": "<p>\"a release candidate or a stable version\"?</p>",
        "id": 491973525,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736089314
    },
    {
        "content": "<p>Updated again</p>",
        "id": 491973670,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736089442
    },
    {
        "content": "<p>Okay so I pinned the rev to <code>v4.15.0-rc1</code>. Then I thought I would try updating mathlib. So I did</p>\n<ol>\n<li>In <code>docbuild</code>, pin the rev to <code>v4.16.0-rc1</code></li>\n<li><code>lake update</code> in the root folder</li>\n<li><code>cd docbuild</code></li>\n<li><code>lake update LeanCamCombi</code></li>\n<li><code>cd ../</code></li>\n<li><code>lake exe cache get</code></li>\n<li><code>lake build</code></li>\n</ol>",
        "id": 491974362,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736090026
    },
    {
        "content": "<p>But then the cache doesn't work and <code>lake build</code> starts rebuilding all of mathlib</p>",
        "id": 491974439,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736090053
    },
    {
        "content": "<p>Yes, due to the bug in the <code>Cache</code> you need to build from the root directory of your project, there <code>Cache</code> is going to work, then you can go back to your <code>docbuild</code> directory and work there.</p>",
        "id": 491974943,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736090510
    },
    {
        "content": "<p>Ah sorry, I missed a step. Edited</p>",
        "id": 491975204,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736090690
    },
    {
        "content": "<p><code>lake build</code> is failing in the root directory</p>",
        "id": 491975228,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736090703
    },
    {
        "content": "<p>And a manual <code>lake exe cache get</code> also doesn't help that?</p>",
        "id": 491975247,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736090717
    },
    {
        "content": "<p>Nope</p>",
        "id": 491975269,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736090746
    },
    {
        "content": "<p>Then I also don't know what's wrong with <code>Cache</code>, I would suspect that just hard removing <code>.lake</code> and running <code>lake exe cache get</code> is going to fix it but that's not a very nice solution of course.</p>",
        "id": 491975503,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736090928
    },
    {
        "content": "<p>I mean, evidently we are messing with what the people that put <code>Cache</code> in place intended when we set the above environment variable. So maybe just fixing that bug would already get us some of the way there.</p>",
        "id": 491975553,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1736090985
    },
    {
        "content": "<p>I'm also having problems upgrading a local project that depends on mathlib to v4.16.0-rc1. If I delete the <code>.lake</code> folder and run <code>lake exe cache get</code>, everything seems to work fine, but then if I run <code>lake build</code> on the project, it starts to compile everything.</p>",
        "id": 491978870,
        "sender_full_name": "Frédéric Dupuis",
        "timestamp": 1736093791
    },
    {
        "content": "<p>Could it have anything to do with the fact that <code>Qq</code> is still on <code>v4.15.0</code>?</p>",
        "id": 491978917,
        "sender_full_name": "Frédéric Dupuis",
        "timestamp": 1736093856
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span> bumped FLT to current mathlib master and I merged, but I can also confirm that <code>lake exe cache get</code> no longer works for me (even after <code>rm -rf .lake</code> and <code>lake exe cache get!</code>); mathlib starts building from source even though 5000+ files were downloaded without error. So I've reverted the commit and I'm still unable to get FLT working on current mathlib (at least without building mathlib from source)</p>",
        "id": 491982928,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736097394
    },
    {
        "content": "<p>I also observe <code>lake build</code> rebuilding everything despite cache downloading lots of files, on <code>live.lean-lang.org</code>. Clean checkout, latest elan. Does not happen with mathlib stable.</p>",
        "id": 491983119,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1736097579
    },
    {
        "content": "<p>The same thing happened yesterday to <span class=\"user-mention\" data-user-id=\"753178\">@Aaron Hill</span>  -- it might be a different issue but just to be sure, what fixed it for him was deleting the mathlib cache. Have folks confirmed whether that works for you too?</p>",
        "id": 491984684,
        "sender_full_name": "Julian Berman",
        "timestamp": 1736099016
    },
    {
        "content": "<p>I.e. <code>rm -f</code> of <code>~/.cache/mathlib</code> or wherever your <code>MATHLIB_CACHE_DIR</code> is, followed by <code>lake exe cache get</code> again, and then <code>lake build</code> to check whether things are now happy.</p>",
        "id": 491984771,
        "sender_full_name": "Julian Berman",
        "timestamp": 1736099088
    },
    {
        "content": "<p>Heh, just deleting that directory on <a href=\"http://live.lean-lang.org\">live.lean-lang.org</a> takes a lot of time :-) (and removes &gt;100GB of data)</p>",
        "id": 491986040,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1736100218
    },
    {
        "content": "<p>Nope, does not help here.</p>",
        "id": 491986579,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1736100534
    },
    {
        "content": "<p>Unfortunate. But ok, early spring cleaning sounds like :)</p>",
        "id": 491986682,
        "sender_full_name": "Julian Berman",
        "timestamp": 1736100623
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491974362\">said</a>:</p>\n<blockquote>\n<p>Okay so I pinned the rev to <code>v4.15.0-rc1</code></p>\n</blockquote>\n<p>Isn't <a href=\"https://github.com/leanprover-community/mathlib4/tree/v4.15.0-rc1\">4.15.0rc1</a> from long ago?</p>",
        "id": 491989164,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736102840
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491982928\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> bumped FLT to current mathlib master and I merged, but I can also confirm that <code>lake exe cache get</code> no longer works for me (even after <code>rm -rf .lake</code> and <code>lake exe cache get!</code>); mathlib starts building from source even though 5000+ files were downloaded without error. So I've reverted the commit and I'm still unable to get FLT working on current mathlib (at least without building mathlib from source)</p>\n</blockquote>\n<p>In <a href=\"https://github.com/ImperialCollegeLondon/FLT/commit/3fbdf303085b8bbf890d4f9dd13caa227ccffbfa\">your v4.16.0-rc1 update</a> I see this behaviour:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"n\">snip</span><span class=\"bp\">...</span><span class=\"o\">]</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">cat</span><span class=\"w\"> </span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Tactic</span><span class=\"bp\">/</span><span class=\"n\">Linter</span><span class=\"bp\">/</span><span class=\"n\">Header</span><span class=\"bp\">.</span><span class=\"n\">trace</span>\n<span class=\"o\">{</span><span class=\"s2\">\"log\"</span><span class=\"o\">:[],</span><span class=\"s2\">\"depHash\"</span><span class=\"o\">:</span><span class=\"s2\">\"16549332353800634075\"</span><span class=\"o\">}</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"c1\">--no-ansi</span>\n<span class=\"bp\">⚠</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">317</span><span class=\"bp\">/</span><span class=\"mi\">5889</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Junk</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././././</span><span class=\"n\">FLT</span><span class=\"bp\">/</span><span class=\"n\">Junk</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">exit'</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">interrupt</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n<span class=\"bp\">⚠</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">318</span><span class=\"bp\">/</span><span class=\"mi\">5889</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">FLT</span><span class=\"bp\">.</span><span class=\"n\">Junk</span><span class=\"bp\">.</span><span class=\"n\">Algebra2</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././././</span><span class=\"n\">FLT</span><span class=\"bp\">/</span><span class=\"n\">Junk</span><span class=\"bp\">/</span><span class=\"n\">Algebra2</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">exit'</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">interrupt</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n<span class=\"bp\">✔</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">320</span><span class=\"bp\">/</span><span class=\"mi\">5889</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">Header</span>\n<span class=\"o\">[</span><span class=\"bp\">...</span><span class=\"o\">]</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">cat</span><span class=\"w\"> </span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Tactic</span><span class=\"bp\">/</span><span class=\"n\">Linter</span><span class=\"bp\">/</span><span class=\"n\">Header</span><span class=\"bp\">.</span><span class=\"n\">trace</span>\n<span class=\"o\">{</span><span class=\"s2\">\"log\"</span><span class=\"o\">:</span>\n<span class=\"w\"> </span><span class=\"o\">[{</span><span class=\"s2\">\"message\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"...snip...\"</span><span class=\"o\">,</span>\n<span class=\"w\">   </span><span class=\"s2\">\"level\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"trace\"</span><span class=\"o\">}],</span>\n<span class=\"w\"> </span><span class=\"s2\">\"depHash\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"1306935599467847507\"</span><span class=\"o\">}</span>\n</code></pre></div>\n<p>But the only files Mathlib/Tactic/Linter/Header.lean imports are core Lean files. The oleans/ileans for this file are the same before and after <code>lake build</code>, only the trace changes.</p>",
        "id": 491989181,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736102869
    },
    {
        "content": "<p>I think everyone should avoid updating to 4.16.0rc1 until they have updated to 4.15.0, otherwise it is very hard for someone to use multiple projects together</p>",
        "id": 491989375,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736103025
    },
    {
        "content": "<p>But we can't update to 4.15.0 without first declaring <a href=\"https://github.com/leanprover-community/mathlib4/compare/29f9a66d622d9bab7f419120e22bb0d2598676ab%5E...0f1810248782d0843a813d22979f4fa77f0f9db5\">one of these commits</a> to be 4.15.0, as the <a href=\"https://github.com/leanprover-community/mathlib4/tree/v4.15.0\"><code>v4.15.0</code></a> tag as of writing does not exist</p>",
        "id": 491989393,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736103041
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>, did you already create this tag and forget to push?</p>",
        "id": 491989521,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736103160
    },
    {
        "content": "<p>I think the two clear choices for the tag are <code>29f9a66d622d9bab7f419120e22bb0d2598676ab</code> (the very first commit at 4.15.0) or <code>9837ca9d65d9de6fad1ef4381750ca688774e608</code>(the very last commit at 4.15.0). I think we should take the latter to get slightly more mathlib in that release, unless there are reasons to prefer the former.</p>",
        "id": 491989553,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736103192
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 491989698,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736103334
    },
    {
        "content": "<p>If I build Mathlib itself at b552a67b9245b0012c186a4a06f519600b151e28, then I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">Header</span>\n<span class=\"n\">Build</span><span class=\"w\"> </span><span class=\"n\">completed</span><span class=\"w\"> </span><span class=\"n\">successfully</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">cat</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Tactic</span><span class=\"bp\">/</span><span class=\"n\">Linter</span><span class=\"bp\">/</span><span class=\"n\">Header</span><span class=\"bp\">.</span><span class=\"n\">trace</span>\n<span class=\"o\">{</span><span class=\"s2\">\"log\"</span><span class=\"o\">:</span>\n<span class=\"w\"> </span><span class=\"o\">[{</span><span class=\"s2\">\"message\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"...snip...\"</span><span class=\"o\">,</span>\n<span class=\"w\">   </span><span class=\"s2\">\"level\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"trace\"</span><span class=\"o\">}],</span>\n<span class=\"w\"> </span><span class=\"s2\">\"depHash\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"16549332353800634075\"</span><span class=\"o\">}</span>\n</code></pre></div>\n<p>But if I build <a href=\"https://github.com/ImperialCollegeLondon/FLT\">https://github.com/ImperialCollegeLondon/FLT</a> at commit 3fbdf303085b8bbf890d4f9dd13caa227ccffbfa, which imports mathlib at b552a67b9245b0012c186a4a06f519600b151e28, I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">Header</span>\n<span class=\"n\">Build</span><span class=\"w\"> </span><span class=\"n\">completed</span><span class=\"w\"> </span><span class=\"n\">successfully</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">cat</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Tactic</span><span class=\"bp\">/</span><span class=\"n\">Linter</span><span class=\"bp\">/</span><span class=\"n\">Header</span><span class=\"bp\">.</span><span class=\"n\">trace</span>\n<span class=\"o\">{</span><span class=\"s2\">\"log\"</span><span class=\"o\">:</span>\n<span class=\"w\"> </span><span class=\"o\">[{</span><span class=\"s2\">\"message\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"...snip...\"</span><span class=\"o\">,</span>\n<span class=\"w\">   </span><span class=\"s2\">\"level\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"trace\"</span><span class=\"o\">}],</span>\n<span class=\"w\"> </span><span class=\"s2\">\"depHash\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s2\">\"1306935599467847507\"</span><span class=\"o\">}</span>\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> this seems like a regression in v4.16.0-rc1, maybe fallout from <a href=\"https://github.com/leanprover/lean4/pull/6388\">lean4#6388</a>? The oleans/ileans are identical, only the trace changes. This is the \"first\" file for which the trace changes in this way.</p>",
        "id": 491992647,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736105999
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"325367\">Mauricio Collares</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491992647\">said</a>:</p>\n<blockquote>\n<p>This is the \"first\" file for which the trace changes in this way.</p>\n</blockquote>\n<p>This is probably just because it's the first file to be built in Mathlib (i.e.  doesn't come from batteries or another dep)</p>",
        "id": 491995294,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736108369
    },
    {
        "content": "<p>Thanks, I had indeed forgotten to tag v4.15.0, and I've done so now (at <code>9837ca9d65d9de6fad1ef4381750ca688774e608</code>).</p>",
        "id": 491998093,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736110782
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 492000322,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736112781
    },
    {
        "content": "<p>(I'm a little surprised no one else in this thread noticed!)</p>",
        "id": 492000348,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736112804
    },
    {
        "content": "<p>I've been meaning to write a \"toolchain release dashboard\" that would display the status of all the steps, but so far can't justify the time investment for something that will only be used twice a month... But it hopefully would save a lot of these manual catches!!</p>",
        "id": 492003676,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736115841
    },
    {
        "content": "<p>Still slightly buggy, but 15 minutes with Claude gives:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"bp\">./</span><span class=\"n\">release_checklist</span><span class=\"bp\">.</span><span class=\"n\">py</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Batteries</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Toolchain</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n<span class=\"w\">  </span><span class=\"bp\">❌</span><span class=\"w\"> </span><span class=\"n\">Toolchain</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">merged</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">stable</span><span class=\"w\"> </span><span class=\"n\">branch</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">lean4checker</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Toolchain</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Toolchain</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">merged</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">stable</span><span class=\"w\"> </span><span class=\"n\">branch</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"bp\">-</span><span class=\"n\">gen4</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Toolchain</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Verso</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Toolchain</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ProofWidgets4</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Aesop</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Toolchain</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Toolchain</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">merged</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">stable</span><span class=\"w\"> </span><span class=\"n\">branch</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kn\">import</span><span class=\"bp\">-</span><span class=\"n\">graph</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">On</span><span class=\"w\"> </span><span class=\"n\">compatible</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">✅</span><span class=\"w\"> </span><span class=\"n\">Toolchain</span><span class=\"w\"> </span><span class=\"n\">tag</span><span class=\"w\"> </span><span class=\"n\">exists</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plausible</span>\n<span class=\"w\">  </span><span class=\"bp\">❌</span><span class=\"w\"> </span><span class=\"n\">Not</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">needs</span><span class=\"w\"> </span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"w\">  </span><span class=\"bp\">❌</span><span class=\"w\"> </span><span class=\"n\">Not</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">needs</span><span class=\"w\"> </span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n\n<span class=\"n\">Repository</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">REPL</span>\n<span class=\"w\">  </span><span class=\"bp\">❌</span><span class=\"w\"> </span><span class=\"n\">Not</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">target</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">needs</span><span class=\"w\"> </span><span class=\"bp\">&gt;=</span><span class=\"w\"> </span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">15</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 492007186,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736119295
    },
    {
        "content": "<p>As usual, bug fixing takes twice as long as initial implementation, but it is looking pretty good now. I've run it over v4.14.0, v4.15.0-rc1, v4.15.0, and v4.16.0-rc1 and fixed a few problems!</p>",
        "id": 492008784,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736120887
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/6542\">lean#6542</a></p>",
        "id": 492008970,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736121119
    },
    {
        "content": "<p>Nice! To be clear, my comment was not a complaint that this slipped through, but a complaint that in a thread titled \"updating to 4.15.0\", seemingly not one person was actually performing an update to 4.15.0.</p>",
        "id": 492009141,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736121285
    },
    {
        "content": "<p>I think my current advice is to not attempt to update downstream projects to v4.16.0-rc1 yet. It will likely take us a week until we're ready to release <code>rc2</code> (people are still on holidays!).</p>\n<p>In the meantime though, as far as I'm aware there is no obstacle to updating all downstream projects to v4.15.0 (possibly needing to manually pin your <code>doc-gen4</code> requires to the <code>v4.15.0</code> tag of doc-gen4, and possibly using <code>lake update --keep-toolchain</code> instead of <code>lake update</code>).</p>",
        "id": 492012040,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736123948
    },
    {
        "content": "<p>If <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> / <span class=\"user-mention\" data-user-id=\"556875\">@Pietro Monticone</span> / anyone else attempting bumps could try the v4.15.0 bump with those caveats and report back, that would be great. :-)</p>",
        "id": 492012054,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736123983
    },
    {
        "content": "<p>Going to v4.15.0 works fine for my project (but I'm not using doc-gen, it's just a regular project).</p>",
        "id": 492016126,
        "sender_full_name": "Frédéric Dupuis",
        "timestamp": 1736127270
    },
    {
        "content": "<p>If I'm creating a new project should I run something like <code>lake +leanprover/lean4:v4.15.0 new my_project math</code> and then <code>lake update --keep-toolchain</code>?</p>",
        "id": 492023150,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736133181
    },
    {
        "content": "<p>That seems to create more files in the generated project than <code>lake +leanprover/lean4:nightly-2024-04-24 new my_project math</code>? Should I have been doing that all along?</p>",
        "id": 492026280,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736135505
    },
    {
        "content": "<p>For some reason it also set the toolchain to <code>leanprover/lean4:v4.16.0-rc1</code>?</p>",
        "id": 492026565,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736135683
    },
    {
        "content": "<p>In the current settings, you need to invoke <code>lake --keep-toolchain</code> (almost) every time.</p>",
        "id": 492031998,
        "sender_full_name": "François G. Dorais",
        "timestamp": 1736139032
    },
    {
        "content": "<p>Do you mean I should run <code>lake +leanprover/lean4:v4.15.0 new my_project math --keep-toolchain</code>?</p>",
        "id": 492032391,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736139281
    },
    {
        "content": "<p>It seems no matter how I create a new project it sets the toolchain to <code>leanprover/lean4:v4.16.0-rc1</code>.</p>",
        "id": 492033627,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736139974
    },
    {
        "content": "<p>I think that's expected, yeah. For now you'll need to manually change the toolchain</p>",
        "id": 492044749,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1736146082
    },
    {
        "content": "<p><a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/305\">https://github.com/ImperialCollegeLondon/FLT/pull/305</a> I think successfully updates FLT to <code>v4.15.0</code></p>",
        "id": 492046610,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736146997
    },
    {
        "content": "<p>and <br>\n<a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/306\">https://github.com/ImperialCollegeLondon/FLT/pull/306</a>, which we can't merge yet, is a reproducible example of the cache failing in all projects downstream of Mathlib on v4.16.0-rc1.</p>",
        "id": 492046694,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736147033
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113488-general/topic/Updating.20to.204.2E15.2E0/near/492009141\">said</a>:</p>\n<blockquote>\n<p>in a thread titled \"updating to 4.15.0\", seemingly not one person was actually performing an update to 4.15.0.</p>\n</blockquote>\n<p>At the start of this thread I was updating to the latest mathlib, which for a few hours meant 4.15.0</p>",
        "id": 492056946,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736151782
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> I didn't check if the trace for a given mathlib file is the same for all downstream projects. If it is, there is a hack one can do to make cache work without a new Lean release: just push two sets of cache files, one valid for mathlib itself and one valid for downstream projects.</p>",
        "id": 492086372,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736162979
    },
    {
        "content": "<p>But this depends on whether leangz stores the trace file or recomputes it</p>",
        "id": 492086536,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736163036
    },
    {
        "content": "<p>Just checked that <code>Mathlib/Tactic/Linter/Header.trace</code> in FLT is the same as in a brand-new project created with <code>lake new math</code> (pinned to the same mathlib commit, of course). Unfortunately the above hack is not a viable solution because (even with the modified trace) the compiled files for Mathlib/Tactic/Linter/Header.lean get packed as 084e8150a7e80f16.ltar. The ltar changes when the trace changes (you can see the changed trace starting at byte 0x42, but you have to be careful to delete the appropriate files in <code>~/.cache/mathlib</code> because otherwise it doesn't get overwritten), but the filename itself is the same.</p>",
        "id": 492090445,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736164659
    },
    {
        "content": "<blockquote>\n<p>I think my current advice is to not attempt to update downstream projects to v4.16.0-rc1 yet. It will likely take us a week until we're ready to release <code>rc2</code> (people are still on holidays!).</p>\n</blockquote>\n<p>Just coming over to this thread from another one I started <a href=\"#narrow/channel/113488-general/topic/Simple.20getting-started.20guide.3F\">here</a>. If this is unlikely to be resolved in a week, then I am going to need a work-around for the course I am teaching which starts next Monday. So, what steps should I follow (more accurately: advise students to follow) in order to create a new Lean project that imports a reasonably recent version of mathlib, without recompiling mathlib it from scratch?</p>",
        "id": 492093773,
        "sender_full_name": "David Loeffler",
        "timestamp": 1736165993
    },
    {
        "content": "<p>Pinning to 4.15.0 should work for you, though I don't remember the <code>lake new</code> invocation to do that</p>",
        "id": 492094045,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736166113
    },
    {
        "content": "<p>You can change the <code>require</code> line to say</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span>\n<span class=\"w\">  </span><span class=\"s2\">\"https://github.com/leanprover-community/mathlib4.git\"</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"w\"> </span><span class=\"s2\">\"v4.15.0\"</span>\n</code></pre></div>",
        "id": 492094221,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736166184
    },
    {
        "content": "<p>Or, if your project uses <code>lakefile.toml</code> (this is the default for <code>lake new PROJECT_NAME math</code>, so it's likely), you should add a <code>rev = \"v4.15.0\"</code> line like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"mathlib\"</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover-community\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.15.0\"</span>\n</code></pre></div>\n<p>If any lake command is run inside the project (for example, if the project was created using the VS Code extension, which should call <code>lake exe cache get</code>) before you did the change, you probably need to run <code>lake update</code> after this change.</p>",
        "id": 492094698,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736166375
    },
    {
        "content": "<p>Both options are really not ideal if you're not creating the project yourself, but I can't think of anything better. I guess you can supply a correct <code>lake-manifest.json</code> (and perhaps a <code>lakefile.toml</code> as well) and ask students to just overwrite their copy with yours.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/492094045\">said</a>:</p>\n<blockquote>\n<p>Pinning to 4.15.0 should work for you, though I don't remember the <code>lake new</code> invocation to do that</p>\n</blockquote>\n<p>There is none, I just <a href=\"https://github.com/leanprover/lean4/blob/master/src/lake/Lake/CLI/Init.lean\">checked</a>.</p>",
        "id": 492095574,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736166719
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/492012054\">said</a>:</p>\n<blockquote>\n<p>If <span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> / <span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> / anyone else attempting bumps could try the v4.15.0 bump with those caveats and report back, that would be great. :-)</p>\n</blockquote>\n<p>It <a href=\"https://github.com/YaelDillies/LeanCamCombi/commit/bb09c3bb034c1bdae55c66a7009688d6622ad684\">works</a> <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 492096041,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1736166907
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/491982928\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> bumped FLT to current mathlib master and I merged, but I can also confirm that <code>lake exe cache get</code> no longer works for me (even after <code>rm -rf .lake</code> and <code>lake exe cache get!</code>); mathlib starts building from source even though 5000+ files were downloaded without error. So I've reverted the commit and I'm still unable to get FLT working on current mathlib (at least without building mathlib from source)</p>\n</blockquote>\n<p>Same problem here. I'm giving a talk of Lean today and distributed pre-packaged Lean4 Windows version to students. Suddenly I found that the downloaded mathlib cache doesn't work as expected :(</p>",
        "id": 492100318,
        "sender_full_name": "Jz Pan",
        "timestamp": 1736168448
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"325367\">Mauricio Collares</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/492086372\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> I didn't check if the trace for a given mathlib file is the same for all downstream projects. If it is, there is a hack one can do to make cache work without a new Lean release: just push two sets of cache files, one valid for mathlib itself and one valid for downstream projects.</p>\n</blockquote>\n<p>Ah, the filename is not generated by leangz but by the <code>cache</code> script. So in principle this hack can work, and it only requires changes to mathlib. It would require generating a different filename for each <code>.ltar</code> file when the dephash in the trace file changes (but changes to the rest of the trace file shouldn't affect it). That's just reading a value from a JSON file, so it shouldn't be too bad to implement, but there's the question of whether uploading duplicated cache files in CI for downstream projects (as a temporary workaround) is a good idea.</p>",
        "id": 492101977,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736169052
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"325367\">Mauricio Collares</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/492094698\">said</a>:</p>\n<blockquote>\n<p>Or, if your project uses <code>lakefile.toml</code> (this is the default for <code>lake new PROJECT_NAME math</code>, so it's likely), you should add a <code>rev = \"v4.15.0\"</code> line like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"mathlib\"</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover-community\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.15.0\"</span>\n</code></pre></div>\n<p>If any lake command is run inside the project (for example, if the project was created using the VS Code extension, which should call <code>lake exe cache get</code>) before you did the change, you probably need to run <code>lake update</code> after this change.</p>\n</blockquote>\n<p>Thank you! Seems that this solution works.</p>",
        "id": 492114104,
        "sender_full_name": "Jz Pan",
        "timestamp": 1736173374
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/492012054\">said</a>:</p>\n<blockquote>\n<p>If <span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> / <span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> / anyone else attempting bumps could try the v4.15.0 bump with those caveats and report back, that would be great. :-)</p>\n</blockquote>\n<ul>\n<li>Worked for Carleson (see <a href=\"https://github.com/fpvandoorn/carleson/pull/202#event-15826664528\">here</a>). </li>\n<li>Worked for FLT (see <a href=\"https://github.com/ImperialCollegeLondon/FLT/pull/305\">here</a>).</li>\n</ul>",
        "id": 492114688,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1736173570
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"325367\">@Mauricio Collares</span>, your solution worked for me as well!</p>",
        "id": 492132823,
        "sender_full_name": "David Loeffler",
        "timestamp": 1736179354
    },
    {
        "content": "<p>I have a <code>lakefile.lean</code> instead of a <code>lakefile.toml</code>, is that what I should be using or should I somehow convert my file into a TOML?</p>",
        "id": 492173915,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736193490
    },
    {
        "content": "<p>You can run <code>lake translate-config toml</code> in your repo to get the toml version.</p>",
        "id": 492174105,
        "sender_full_name": "Pietro Monticone",
        "timestamp": 1736193575
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/113488-general/topic/Updating.20to.204.2E15.2E0/near/492094221\">said</a>:</p>\n<blockquote>\n<p>You can change the <code>require</code> line to say</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span>\n<span class=\"w\">  </span><span class=\"s2\">\"https://github.com/leanprover-community/mathlib4.git\"</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"w\"> </span><span class=\"s2\">\"v4.15.0\"</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>This is the lakefile.lean version</p>",
        "id": 492174137,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736193588
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"556875\">Pietro Monticone</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/492174105\">said</a>:</p>\n<blockquote>\n<p><code>lake translate-config toml</code></p>\n</blockquote>\n<p>Thanks! Is this the preferred version moving forwards?</p>",
        "id": 492181845,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736196394
    },
    {
        "content": "<p>Yes, provided your configuration is not complicated</p>",
        "id": 492182590,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736196656
    },
    {
        "content": "<p>Do you happen to know whether the FLT configuration is \"complicated\"? <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/main/lakefile.lean\">https://github.com/ImperialCollegeLondon/FLT/blob/main/lakefile.lean</a> (it's certainly complicated from where I'm sitting...)</p>",
        "id": 492183813,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736197106
    },
    {
        "content": "<p>I don't know off the top of my head if the <code>globs =</code> part is supported in the toml configuration. Setting up doc-gen in a subdirectory can be done with a separate toml file (see the doc-gen README), and leanOptions are supported.</p>",
        "id": 492185143,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736197575
    },
    {
        "content": "<p>globs is supported in toml, c.f. the Aesop <a href=\"https://github.com/leanprover-community/aesop/blob/master/lakefile.toml\">lakefile.toml</a></p>",
        "id": 492195646,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736201588
    },
    {
        "content": "<p><code>meta if</code> is not supported in toml, and as Mauricio suggests the preferred solution is to run doc-gen in a subdirectory with it's own lakefile.toml.</p>",
        "id": 492195857,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736201657
    },
    {
        "content": "<blockquote>\n<p>feat: test the cache as if in a downstream project <a href=\"https://github.com/leanprover-community/mathlib4/pull/20532\">#20532</a></p>\n</blockquote>\n<p>can't be merged as is, because v4.16.0-rc1 is broken, but having this in place would have alerted us to the problems in v4.16.0-rc1 when it was still in the nightly-testing process.</p>",
        "id": 492216410,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736210474
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"325367\">Mauricio Collares</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/492094698\">said</a>:</p>\n<blockquote>\n<p>Or, if your project uses <code>lakefile.toml</code> (this is the default for <code>lake new PROJECT_NAME math</code>, so it's likely), you should add a <code>rev = \"v4.15.0\"</code> line like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"mathlib\"</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover-community\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.15.0\"</span>\n</code></pre></div>\n<p>If any lake command is run inside the project (for example, if the project was created using the VS Code extension, which should call <code>lake exe cache get</code>) before you did the change, you probably need to run <code>lake update</code> after this change.</p>\n</blockquote>\n<p>Is <code>lake new PROJECT_NAME math</code> preferred over <code>lake +leanprover/lean4:nightly-2024-04-24 new PROJECT_NAME math</code>? I've been following the instructions at <a href=\"https://leanprover-community.github.io/install/project.html#creating-a-lean-project\">https://leanprover-community.github.io/install/project.html#creating-a-lean-project</a>.</p>",
        "id": 492227739,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736216501
    },
    {
        "content": "<p>The problem with bare <code>lake new</code> is that it could be any version of lake, depending on your setup</p>",
        "id": 492228632,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736216971
    },
    {
        "content": "<p>So it's terrible to include in instructions, as the reader might be using an ancient prerelease of lake</p>",
        "id": 492228661,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736216991
    },
    {
        "content": "<p>It surprises me that the instructions tell you to use a nightly and not <code>stable</code> though</p>",
        "id": 492228726,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736217007
    },
    {
        "content": "<p>Is this expected?</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>pthomas@HP-Laptop:~/Desktop/github/lean$ elan show\ninstalled toolchains\n--------------------\n\nstable (default)\nleanprover/lean4:nightly-2024-04-24\nleanprover/lean4:v4.15.0\n\nactive toolchain\n----------------\n\nstable (default)\nLean (version 4.15.0, x86_64-unknown-linux-gnu, commit 11651562caae, Release)\n\npthomas@HP-Laptop:~/Desktop/github/lean$ lake new my_project math\ninfo: downloading mathlib `lean-toolchain` file\npthomas@HP-Laptop:~/Desktop/github/lean$ cat my_project/\n.git/           .gitignore      lean-toolchain  MyProject.lean\n.github/        lakefile.toml   MyProject/      README.md\npthomas@HP-Laptop:~/Desktop/github/lean$ cat my_project/lean-toolchain\nleanprover/lean4:v4.16.0-rc1\npthomas@HP-Laptop:~/Desktop/github/lean$ elan show\ninstalled toolchains\n--------------------\n\nstable (default)\nleanprover/lean4:nightly-2024-04-24\nleanprover/lean4:v4.15.0\n\nactive toolchain\n----------------\n\nstable (default)\nLean (version 4.15.0, x86_64-unknown-linux-gnu, commit 11651562caae, Release)\n</code></pre></div>",
        "id": 492229286,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736217324
    },
    {
        "content": "<p>I was expecting it to give me v4.15.0, since that is the latest that <code>elan show</code> gave.</p>",
        "id": 492229431,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736217392
    },
    {
        "content": "<p>Is <code>elan</code> saying here that the active toolchain is both stable and 4.15.0, ie, that they are one and the same?</p>",
        "id": 492229689,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736217549
    },
    {
        "content": "<p>What does the <code>+</code> do? I'm not sure I see it in the documentation?</p>",
        "id": 492231282,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736218334
    },
    {
        "content": "<p>What it does that is.</p>",
        "id": 492231304,
        "sender_full_name": "Paige Thomas",
        "timestamp": 1736218351
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0/near/492228726\">said</a>:</p>\n<blockquote>\n<p>It surprises me that the instructions tell you to use a nightly and not <code>stable</code> though</p>\n</blockquote>\n<p>Doesn't that have the same issue?</p>",
        "id": 492250012,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1736230831
    }
]