[
    {
        "content": "<p>Of the following two definitions, only the second one is accepted. Is there a way I could help Lean infer what I mean by <code>.compare</code> and <code>.zero</code> without explicitly typing out the typeclass names?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">mNum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Sub</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Mul</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Neg</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Zero</span><span class=\"w\"> </span><span class=\"n\">α</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">deleteIfNegative</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mNum</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ord</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">compare</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lt</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">none</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"c\">/-</span><span class=\"cm\"> ▶ 10:6-10:22: error:</span>\n<span class=\"cm\">invalid dotted identifier notation, expected type is not of the form (... → C ...) where C is a constant</span>\n<span class=\"cm\">  ?m.120</span>\n\n<span class=\"cm\">▶ 10:25-10:28: error:</span>\n<span class=\"cm\">invalid dotted identifier notation, expected type is not of the form (... → C ...) where C is a constant</span>\n<span class=\"cm\">  ?m.120 -/</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">deleteIfNegative'</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mNum</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ord</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">Zero</span><span class=\"bp\">.</span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lt</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">none</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>",
        "id": 485528788,
        "sender_full_name": "nrs",
        "timestamp": 1733101217
    },
    {
        "content": "<p>Remove the dot, <code>compare</code> resolves to <code>Ord.compare</code>.</p>",
        "id": 485528830,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733101269
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113488-general/topic/Improving.20ergonomics.20of.20custom.20typeclasses/near/485528830\">said</a>:</p>\n<blockquote>\n<p>Remove the dot, <code>compare</code> resolves to <code>Ord.compare</code>.</p>\n</blockquote>\n<p>ah nice thank you! any tips for the <code>.zero</code> case?</p>",
        "id": 485528942,
        "sender_full_name": "nrs",
        "timestamp": 1733101360
    },
    {
        "content": "<p>I think you're meant to use <code>0</code></p>",
        "id": 485528978,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1733101420
    },
    {
        "content": "<p>ohh I see! thanks a lot for the help, <code>compare a 0</code> resolves correctly</p>",
        "id": 485529044,
        "sender_full_name": "nrs",
        "timestamp": 1733101466
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749978\">nrs</span> has marked this topic as resolved.</p>",
        "id": 485529055,
        "sender_full_name": "Notification Bot",
        "timestamp": 1733101487
    }
]