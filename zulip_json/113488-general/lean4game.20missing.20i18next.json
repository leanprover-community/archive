[
    {
        "content": "<p><a href=\"/user_uploads/3121/iQsGrgW87X5hId0arDnsRMba/i18next.png\">i18next.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/iQsGrgW87X5hId0arDnsRMba/i18next.png\" title=\"i18next.png\"><img src=\"/user_uploads/3121/iQsGrgW87X5hId0arDnsRMba/i18next.png\"></a></div><p>What have I done? I'm trying to run a lean game locally with <code>npm start</code>. </p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>buzzard@buster:~/lean-projects/lean4game$ npm start\n\n&gt; lean4-game@0.1.0 start\n&gt; concurrently -n server,client -c blue,green \"npm run start_server\" \"npm run start_client\"\n\n[server]\n[server] &gt; lean4-game@0.1.0 start_server\n[server] &gt; (cd server &amp;&amp; lake build) &amp;&amp; (cd relay &amp;&amp; cross-env NODE_ENV=development nodemon -e mjs --exec \"node ./index.mjs\")\n[server]\n[client]\n[client] &gt; lean4-game@0.1.0 start_client\n[client] &gt; cross-env NODE_ENV=development vite --host\n[client]\n[server] error: compiled configuration is invalid; run with '-R' to reconfigure\n[server] npm run start_server exited with code 1\n[client]\n[client]   VITE v4.5.1  ready in 327 ms\n[client]\n[client]   ➜  Local:   http://localhost:3000/\n[client]   ➜  Network: http://10.110.24.210:3000/\n[client] [vite-plugin-static-copy] Collected 7 items.\n[client] Failed to resolve import \"i18next\" from \"client/src/i18n.ts\". Does the file exist?\n[client] Failed to resolve import \"i18next\" from \"client/src/i18n.ts\". Does the file exist?\n[client] Failed to resolve import \"react-i18next\" from \"client/src/components/landing_page.tsx\". Does the file exist?\n[client] Failed to resolve import \"i18next\" from \"client/src/components/welcome.tsx\". Does the file exist?\n[client] Failed to resolve import \"react-i18next\" from \"client/src/components/level.tsx\". Does the file exist?\n[client] Failed to resolve import \"react-country-flag\" from \"client/src/components/popup/preferences.tsx\". Does the file exist?\n\n(etc etc)\n</code></pre></div>\n<p>My game builds locally, the <code>lean-toolchain</code> is 4.7.0 for both lean4game and my game, and I'm using mathlib commit <code>a45ae63747140c1b2cbad9d46f518015c047047a (HEAD, tag: v4.7.0)</code></p>",
        "id": 452219924,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721264076
    },
    {
        "content": "<p>That sounds like some dependencies aren't installed. Try <code>npm i</code></p>",
        "id": 452221862,
        "sender_full_name": "Julian Berman",
        "timestamp": 1721265080
    },
    {
        "content": "<p>Yeah you're right, I updated <code>lean4game</code> and then just typed <code>npm start</code> as usual, but I had to type <code>npm install</code>again first. All fixed now! Thanks!</p>",
        "id": 452223372,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721265734
    },
    {
        "content": "<p>Oh, I tell a lie, I just get further but now a new error:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>buzzard@buster:~/lean-projects/lean4game$ npm start\n\n&gt; lean4-game@0.1.0 start\n&gt; concurrently -n server,client -c blue,green \"npm run start_server\" \"npm run start_client\"\n\n[client]\n[client] &gt; lean4-game@0.1.0 start_client\n[client] &gt; cross-env NODE_ENV=development vite --host\n[client]\n[server]\n[server] &gt; lean4-game@0.1.0 start_server\n[server] &gt; (cd server &amp;&amp; lake build) &amp;&amp; (cd relay &amp;&amp; cross-env NODE_ENV=development nodemon -e mjs --exec \"node ./index.mjs\")\n[server]\n[server] error: compiled configuration is invalid; run with '-R' to reconfigure\n[server] npm run start_server exited with code 1\n[client]\n[client]   VITE v4.5.3  ready in 340 ms\n[client]\n[client]   ➜  Local:   http://localhost:3000/\n[client]   ➜  Network: http://10.110.24.210:3000/\n[client] [vite-plugin-static-copy] Collected 7 items.\n[client] 02:28:53 [vite] http proxy error at /i18n/g/local/FilterGame/en/Game.json:\n[client] Error: connect ECONNREFUSED 127.0.0.1:8080\n[client]     at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1595:16)\n</code></pre></div>",
        "id": 452224350,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721266175
    },
    {
        "content": "<p>I would try doing what it says I think, if you haven't already. Namely running with <code>-R</code>. Now what command that is meant to be passed to... who knows. But try passing it to <code>npm start</code>, maybe as <code>npm start -- -R</code> and pray?</p>",
        "id": 452224724,
        "sender_full_name": "Julian Berman",
        "timestamp": 1721266306
    },
    {
        "content": "<p>(The end of that message seems to say that the frontend and backend of the app are disagreeing about what port the server is running on, which that configuration probably contains?)</p>",
        "id": 452225029,
        "sender_full_name": "Julian Berman",
        "timestamp": 1721266383
    },
    {
        "content": "<p>So <code>cd server</code> then <code>lake build -R</code> has fixed it completely. Thanks so much Julian! I'm demoing this game in about 7 hours and I've not had any sleep yet :-)</p>",
        "id": 452225648,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721266584
    },
    {
        "content": "<p>Hooray!</p>",
        "id": 452225678,
        "sender_full_name": "Julian Berman",
        "timestamp": 1721266600
    }
]