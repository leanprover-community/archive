[
    {
        "content": "<p>Can anyone update me on what is currently required to use either GitPod of CodeSpaces? I thought one of them allowed to avoid creating a GitHub account but I just tried and it seems they both want a GitHub account. Am I missing something?</p>",
        "id": 482355566,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731579734
    },
    {
        "content": "<p>gitpod requires <em>some</em> account between github, gitlab and bitbucket</p>",
        "id": 482356227,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1731579949
    },
    {
        "content": "<p>I saw only github</p>",
        "id": 482357385,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731580300
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span> I think you tried this recently?</p>",
        "id": 482360161,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731581195
    },
    {
        "content": "<p>I see <a href=\"/user_uploads/3121/lzY7fW_KLNUG462QZLZhh0ct/image.png\">this</a> when trying to connect</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/lzY7fW_KLNUG462QZLZhh0ct/image.png\" title=\"this\"><img data-original-dimensions=\"374x408\" src=\"/user_uploads/thumbnail/3121/lzY7fW_KLNUG462QZLZhh0ct/image.png/840x560.webp\"></a></div>",
        "id": 482360326,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1731581240
    },
    {
        "content": "<p>Very weird. I just tried on the computer of a colleague and saw only GitHub.</p>",
        "id": 482360765,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731581394
    },
    {
        "content": "<p>And then it asks a <em>lot</em> of annoying questions.</p>",
        "id": 482360834,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731581407
    },
    {
        "content": "<p>I think I will try using CodeSpaces today (Iâ€™m giving a GlimpseOfLean session).</p>",
        "id": 482360923,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731581436
    },
    {
        "content": "<p>Both require a Github account. In my experience Gitpod <em>also</em> asks you (or maybe only new Github users) to verify their phone numbers.<br>\nHere are the instructions I've written for using either: (bottom of the README)<br>\n<a href=\"https://github.com/fpvandoorn/LeanCourse24?tab=readme-ov-file#temporary-ways-to-use-lean\">https://github.com/fpvandoorn/LeanCourse24?tab=readme-ov-file#temporary-ways-to-use-lean</a></p>",
        "id": 482361540,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1731581623
    },
    {
        "content": "<p>I ended up using CodeSpaces to avoid having phone calls (indeed I tried with a colleague this morning and he had to get a phone call with a code to type). CodeSpaces was a nightmare. It was very slow and unreliable.</p>",
        "id": 482441612,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731604000
    },
    {
        "content": "<p>It would be really nice to have a usable alternative to all this.</p>",
        "id": 482441653,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1731604018
    },
    {
        "content": "<p>Oh, that surprises me. In my experience it was quite good. But that was more than a year ago.</p>",
        "id": 482457469,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1731609360
    },
    {
        "content": "<p>Has anyone used Lean / Mathlib with Codespaces recently? This course repository worked in Codespaces last year, but no longer does: <a href=\"https://github.com/avigad/lamr\">https://github.com/avigad/lamr</a>. VS Code starts, but it does not fetch Lean. Moreover, Gitpod has been replaced by <a href=\"https://ona.com/\">Ona</a>, which seems to be something else entirely.</p>",
        "id": 567361862,
        "sender_full_name": "Jeremy Avigad",
        "timestamp": 1768100579
    },
    {
        "content": "<p>Strange, <a href=\"https://github.com/PatrickMassot/GlimpseOfLean\">GlimpseOfLean</a> started fine in Codespaces, though it looks like the same setup.</p>",
        "id": 567362317,
        "sender_full_name": "Jeremy Avigad",
        "timestamp": 1768101303
    },
    {
        "content": "<p>Also success with <a href=\"https://github.com/b-mehta/formalising-mathematics-notes\">Formalization of Mathematics in Lean</a> (<span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span>). I'll investigate more tomorrow.</p>",
        "id": 567362574,
        "sender_full_name": "Jeremy Avigad",
        "timestamp": 1768101804
    },
    {
        "content": "<p>Did you get this error? <a class=\"message-link\" href=\"/#narrow/channel/113488-general/topic/musl-based.20elan/near/532372667\">#general &gt; musl-based elan @ ðŸ’¬</a>  As I mention there, it's seemingly random whether it happens or not, so perhaps you could have gotten unlucky with lamr and lucky with GlimpseOfLean and my notes</p>",
        "id": 567362764,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1768102134
    },
    {
        "content": "<p>Curiously, I got no error message at all. Codespace started, but when I opened a Lean file, nothing was syntax highlighted. But maybe I didn't wait long enough. I'll try again tomorrow.</p>",
        "id": 567363203,
        "sender_full_name": "Jeremy Avigad",
        "timestamp": 1768102715
    },
    {
        "content": "<p>I think that means Lean didn't start, and might be consistent with what I had; perhaps the output window contained the error message?</p>",
        "id": 567363346,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1768102908
    },
    {
        "content": "<p>Something we might want to try is rebuilding the community-maintained docker images</p>",
        "id": 567376012,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1768120391
    },
    {
        "content": "<p>For me codespaces works much better with chrome than with firefox, I've never understood why.</p>",
        "id": 567376102,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1768120511
    },
    {
        "content": "<p>Debugging this was a nightmare, because testing any change meant waiting 10 minutes to start up codespaces again, and I finally decided there is a random element to whether or not the Lean extension installs. Some things that may or may not make a difference:</p>\n<ul>\n<li>I updated the image from <code>jammy</code> to <code>noble</code> in the <a href=\"https://github.com/avigad/lamr/blob/main/.devcontainer/Dockerfile#L1\">Dockerfile</a>. </li>\n<li>Adding <code>&amp;&amp; lake build</code> <a href=\"https://github.com/avigad/lamr/blob/main/.devcontainer/devcontainer.json#L8\">here</a> seemed to make the installation hang (even though <code>lake build</code> only takes a few seconds on this repository). Doing it as a <code>postAttachCommand</code> seemed to be less problematic, but I couldn't tell whether it was having an effect on installing the extension.</li>\n</ul>\n<p>Ultimately, I added instructions to the README to install the Lean 4 extension and call <code>lake build</code> manually.</p>",
        "id": 567413280,
        "sender_full_name": "Jeremy Avigad",
        "timestamp": 1768162256
    },
    {
        "content": "<p>This is not surprising. I donâ€™t think codespaces ever worked for me on mathlib. I have always had to install the lean extension, get permission errors while the extension tries to install the toolchain, and then run the installation command in the shell, with some chmod stuff.</p>",
        "id": 567417083,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768167351
    },
    {
        "content": "<p>This is unlike gitpod where mathlib opens and you can already see the cache being fetched</p>",
        "id": 567417113,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1768167383
    },
    {
        "content": "<p>Gitpod sometimes failed to install the extension (or rather, any extensions at all) too, and conversely, I've not seen the behavior on codespaces.</p>",
        "id": 567418853,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1768169344
    },
    {
        "content": "<p>So I think things are just flaky in general</p>",
        "id": 567418861,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1768169353
    },
    {
        "content": "<p>I'm currently trying to understand why codespaces sometimes fails. If anyone has a broken codespace and some time to help me experiment, please let me know. (<span class=\"user-mention silent\" data-user-id=\"246273\">Bhavik Mehta</span> and I have already done a bit of experimenting, and I have some suspicions, but so far I have not yet been able to create a broken codespace myself.)</p>",
        "id": 570854404,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1769707286
    },
    {
        "content": "<p>My current hypothesis is that opening a codespace on a PR/branch that's using the same toolchain as mathlib master should succeed while opening a codespace with mismatching toolchains will usually fail. I'll continue to investigate tomorrow.</p>",
        "id": 570882560,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1769716142
    },
    {
        "content": "<p>The result of the investigation: <a href=\"https://github.com/leanprover-community/mathlib4/pull/34615\">#34615</a></p>\n<p><span class=\"user-mention\" data-user-id=\"110865\">@Jeremy Avigad</span> Trying out the codespaces setup in <a href=\"https://github.com/avigad/lamr\">https://github.com/avigad/lamr</a>, it seems to run into the same problem as described in the PR. Copying over the <code>.devcontainer/</code> directory from my PR into your repo unchanged resulted in a working codespace for me (test it yourself <a href=\"https://github.com/Garmelon/lamr/tree/codespaces-test\">in my fork</a>).</p>",
        "id": 571056355,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1769786312
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110865\">Jeremy Avigad</span> <a href=\"#narrow/channel/113488-general/topic/Access.20to.20gitpod.20or.20codespaces/near/567362317\">said</a>:</p>\n<blockquote>\n<p>Strange, <a href=\"https://github.com/PatrickMassot/GlimpseOfLean\">GlimpseOfLean</a> started fine in Codespaces, though it looks like the same setup.</p>\n</blockquote>\n<p>It does not use the same setup. Instead it uses a setup very similar to my PR. My PR mainly resurrects what Mathlib did a while ago, before it switched to the gitpod prebuilt docker image, so presumably GlimpseOfLean just copied mathlib's setup at a different point in time.</p>",
        "id": 571056806,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1769786416
    },
    {
        "content": "<p>Oh, by the way, you don't need to copy any of <code>.docker/</code> into your own projects, just <code>.devcontainer/</code>, even if you're using the current mathlib setup, since it uses mathlib's pre-built gitpod image and doesn't build it itself.</p>",
        "id": 571057919,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1769786688
    }
]