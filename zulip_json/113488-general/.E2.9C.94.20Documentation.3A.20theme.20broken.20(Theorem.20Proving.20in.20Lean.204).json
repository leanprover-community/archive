[
    {
        "content": "<p>Hi,</p>\n<p>The theme for online book <em>Theorem Proving in Lean 4</em> has been broken for me for about a month.</p>\n<ol>\n<li>The <em>Coal</em> and <em>Ayu</em> themes do not render properly.</li>\n<li>The themes do not stick when switching to a new chapter.</li>\n</ol>\n<p>The other online books, such as <em>Functional Programming in Lean</em> and <em>The Lean 4 manual</em>, seem to be working fine.</p>\n<p>Thanks,<br>\nRick</p>",
        "id": 395570925,
        "sender_full_name": "Rick Hu",
        "timestamp": 1696793881
    },
    {
        "content": "<p>Can't reproduce (chrome, osx).</p>",
        "id": 395591850,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1696813244
    },
    {
        "content": "<p>Can't reproduce either (chrome, mac too). Maybe try clearing the browser cache of the site?</p>",
        "id": 395601872,
        "sender_full_name": "Utensil Song",
        "timestamp": 1696819039
    },
    {
        "content": "<p><del>I've had the same issue until I cleared the cache.</del> I use Firefox and Slackware Linux.</p>",
        "id": 395602438,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1696819383
    },
    {
        "content": "<p>Um, I can't change the theme.</p>",
        "id": 395602813,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1696819597
    },
    {
        "content": "<p>How do you change the theme?</p>",
        "id": 395647980,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1696840998
    },
    {
        "content": "<p>The brush icon opens a picker to choose a different color theme. See <a href=\"https://rust-lang.github.io/mdBook/guide/reading.html#top-menu-bar\">https://rust-lang.github.io/mdBook/guide/reading.html#top-menu-bar</a>.</p>\n<p><a href=\"/user_uploads/3121/DlNithS6jKnTqIfl4PWHl-IJ/tpil.png\">tpil.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/DlNithS6jKnTqIfl4PWHl-IJ/tpil.png\" title=\"tpil.png\"><img src=\"/user_uploads/3121/DlNithS6jKnTqIfl4PWHl-IJ/tpil.png\"></a></div>",
        "id": 395651721,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1696842296
    },
    {
        "content": "<p>I see, thanks! On the light (default) theme the contrast for these buttons is so low that I never realized there were even buttons there...</p>",
        "id": 395652153,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1696842441
    },
    {
        "content": "<p>Now I can reproduce (Firefox 118.0.1, Arch Linux) that the themes don't appear to be preserved upon switching chapters.</p>",
        "id": 395652455,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1696842536
    },
    {
        "content": "<p>So maybe this is a browser compatibility issue of mdBook, there are no similar issues at <a href=\"https://github.com/rust-lang/mdBook/issues\">https://github.com/rust-lang/mdBook/issues</a> yet</p>",
        "id": 395654741,
        "sender_full_name": "Utensil Song",
        "timestamp": 1696843283
    },
    {
        "content": "<p>Judging from some other issue related to theming, it could be JS execution somehow stuck. Maybe if you <a href=\"https://firefox-source-docs.mozilla.org/devtools-user/browser_console/index.html#opening-the-browser-console\">open the developer console</a>, you'll see some errors from JS code.</p>",
        "id": 395655206,
        "sender_full_name": "Utensil Song",
        "timestamp": 1696843439
    },
    {
        "content": "<p>From <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/\">#tpil</a>'s <code>README.md</code>:</p>\n<blockquote>\n<p>This manual is generated by <a href=\"https://github.com/rust-lang/mdBook\">mdBook</a>. We are currently using a <a href=\"https://github.com/leanprover/mdBook\">fork</a> of it for the following additional features:</p>\n</blockquote>\n<p>I think the fork is too old.</p>",
        "id": 395655404,
        "sender_full_name": "Bulhwi Cha",
        "timestamp": 1696843492
    },
    {
        "content": "<p>The buttons should be higher contrast in mainline mdbook as well: <a href=\"https://github.com/rust-lang/mdBook/pull/1470\">https://github.com/rust-lang/mdBook/pull/1470</a></p>",
        "id": 395655854,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1696843622
    },
    {
        "content": "<p>Thanks for looking into this.</p>\n<p>To clarify, I use Firefox on Linux Mint, and Chrome on Windows.  <code>Ayu</code> and <code>Coal</code> themes have been broken for me for about a month for <code>Theorem Proving in Lean 4</code> only.  Before, <code>TPIL</code> worked for me well.  And the other online books such as <code>Functional Programming in Lean</code>, worked for me before and still work for me now.</p>\n<p>I did more experimenting.  I think that the main issue is that when switching chapters, <code>Ayu</code> and <code>Coal</code> themes do not stick.  Even if I try to set them again, it does not render properly.  However, I just discovered that after switching chapters, if I set to the <code>Light (default)</code> theme first, then switch to <code>Ayu</code> or <code>Coal</code>, then it renders properly.</p>",
        "id": 395779898,
        "sender_full_name": "Rick Hu",
        "timestamp": 1696897738
    },
    {
        "content": "<p><a href=\"https://leanprover.github.io/functional_programming_in_lean/\">#fpil</a> uses mdbook version 0.4.17 while <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/\">#tpil</a> uses the fork <a href=\"https://github.com/leanprover/mdBook/compare/master...rust-lang:mdBook:v0.4.17\">41 commits behind it</a> .</p>",
        "id": 395810669,
        "sender_full_name": "Utensil Song",
        "timestamp": 1696915902
    },
    {
        "content": "<p>By skimming the theme-related code, it seems the cause could be <a href=\"https://github.com/rust-lang/mdBook/pull/1698\">rust-lang/mdBook#1698</a> fixed by <a href=\"https://github.com/rust-lang/mdBook/pull/1771\">rust-lang/mdBook#1771</a> .</p>",
        "id": 395810798,
        "sender_full_name": "Utensil Song",
        "timestamp": 1696915984
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"638715\">ab</span> has marked this topic as resolved.</p>",
        "id": 396683269,
        "sender_full_name": "Notification Bot",
        "timestamp": 1697324221
    }
]