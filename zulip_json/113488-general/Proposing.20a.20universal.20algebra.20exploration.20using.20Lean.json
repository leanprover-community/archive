[
    {
        "content": "<p>Hi, I have started a <a href=\"https://terrytao.wordpress.com/2024/09/25/a-pilot-project-in-universal-algebra-to-explore-new-ways-to-collaborate-and-use-machine-assistance/\">discussion on my blog</a> on the possibility of launching a collaborative project to map out the implication geometry of various equational laws in universal algebra, using Lean to verify all contributions.  There is a <a href=\"https://github.com/teorth/equational\">rudimentary github</a> (currently without any blueprint or CI) with some initial Lean proofs of implications between 11 test equational laws <a href=\"https://github.com/teorth/equational/blob/master/Equational/Basic.lean\">here</a>, but the plan is to scale this up to a much larger set of equations.</p>\n<p>I would be interested in any thoughts on how best to set up this project.  One obvious thing is to request a dedicated stream on this Zulip to coordinate the Lean-theoretic components of the project.  Another obvious thing would be to set up a blueprint, though I plan to scale this project up to thousands of equations, and potentially tens of thousands of implications, and I am not sure that the existing blueprint software is ideal for this sort of size (and so a more rudimentary lightweight model might be better).  Any comments would be greatly appreciated, either here or <a href=\"https://terrytao.wordpress.com/2024/09/25/a-pilot-project-in-universal-algebra-to-explore-new-ways-to-collaborate-and-use-machine-assistance/\">on my blog</a>)!</p>",
        "id": 472914164,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727361863
    },
    {
        "content": "<p>I believe that the guided equality saturation paper authors are on this Zulip and this project could potentially benefit from their work. I can't immediately find their repo on my phone. CC: <span class=\"user-mention\" data-user-id=\"315434\">@Andrés Goens</span></p>",
        "id": 472917168,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727362764
    },
    {
        "content": "<p>A little while ago I worked on the formalization of Lawvere theories in Lean, and I think this general framework could be one way to set up this project on the formal side. After all, Lawvere theories are just a categorical formulation of universal algebra. As I understand it, what this project proposes is to map out morphisms between Lawvere theories which have a presentation with one sort, one binary operation, and some arbitrary (finitely many) relations. (Of course, once the general framework is set up, there is a priori no need to restrict to just one sort and/or one operation.)</p>",
        "id": 472921307,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1727363984
    },
    {
        "content": "<p>As for generating blueprints, it would also be possible to generate just graphs illustrating the various implications, on the fly (e.g. using Lean). There is a draft <a href=\"https://github.com/leanprover-community/ProofWidgets4/pull/60\">PR</a> on the proofwidgets repo with a demo that generates (and displays) a graphviz graph constructed on the fly from some expressions. In principle the same could be done in this project -- some metaprogramming could extract all the implications that are available in the project, and generate a graph without any need to have humans write latex.</p>",
        "id": 472922075,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1727364214
    },
    {
        "content": "<p>Also, I think the data structure you are looking for is an e-graph : <a href=\"https://en.wikipedia.org/wiki/E-graph\">https://en.wikipedia.org/wiki/E-graph</a></p>",
        "id": 472922772,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727364412
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/113488-general/topic/Proposing.20a.20universal.20algebra.20exploration.20using.20Lean/near/472917168\">said</a>:</p>\n<blockquote>\n<p>I believe that the guided equality saturation paper authors are on this Zulip and this project could potentially benefit from their work. I can't immediately find their repo on my phone. CC: <span class=\"user-mention silent\" data-user-id=\"315434\">Andrés Goens</span></p>\n</blockquote>\n<p>Thanks! The relevant repo is <a href=\"https://github.com/marcusrossel/lean-egg\">here</a>, which <span class=\"user-mention\" data-user-id=\"372804\">@Marcus Rossel</span> improved a lot over the prototype we had in our paper</p>",
        "id": 472922849,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1727364437
    },
    {
        "content": "<p>I like the tactic name <code>egg</code> (it's like you are <code>egg</code>ing on the saturation algorithm to reach the next milestone)</p>",
        "id": 472923126,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727364521
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"243562\">Adam Topaz</span> <a href=\"#narrow/stream/113488-general/topic/Proposing.20a.20universal.20algebra.20exploration.20using.20Lean/near/472921307\">said</a>:</p>\n<blockquote>\n<p>A little while ago I worked on the formalization of Lawvere theories in Lean, and I think this general framework could be one way to set up this project on the formal side. After all, Lawvere theories are just a categorical formulation of universal algebra. As I understand it, what this project proposes is to map out morphisms between Lawvere theories which have a presentation with one sort, one binary operation, and some arbitrary (finitely many) relations. (Of course, once the general framework is set up, there is a priori no need to restrict to just one sort and/or one operation.)</p>\n</blockquote>\n<p>Actually for this project I'm just focusing for now on theories with a single relation, rather than many.  This of course will exclude a lot of interesting theories, but I wanted to keep things as simple as possible for the pilot project and expand later.  For instance, this has already allowed for a way to assign a standard name to every single theory under consideration: <a href=\"https://github.com/teorth/equational/blob/master/scripts/equations.txt\">https://github.com/teorth/equational/blob/master/scripts/equations.txt</a></p>\n<p>Regarding using Lawvere theory: I know it is the Mathlib way to abstract one's way to as broad a framework as possible, but one of the aims of my project is to involve the broader math-adjacent community, and I would like to keep the level of mathematical sophistication as low as possible, at least for the pilot project.  So if possible I would like to keep the front end of the project at least free of advanced mathematical terminology, though certainly any contributor would be free to use whatever tools they wish to fill in any of the implications.  So one could imagine having some API for Lawvere theories as an import that some contributors could use if they wished, but I would like to retain the ability for someone with minimal training in mathematics and/or Lean to be able to contribute a small proof to this project.</p>",
        "id": 472923484,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727364631
    },
    {
        "content": "<p>I think we would be very happy to see how useful this is/how far we can get with it (can't speak for <span class=\"user-mention\" data-user-id=\"372804\">@Marcus Rossel</span> but I hope/imagine he'd like that too). For context <span class=\"user-mention\" data-user-id=\"657719\">@Terence Tao</span> this connects Lean to a specialized  “good old-fashioned” automated prover as you call it in your blog post and reconstructs a proof for Lean, it's specialized for equational reasoning. The idea/goal we had in <a href=\"https://dl.acm.org/doi/10.1145/3632900\">the paper</a> was to be able to reconstruct the equational reasoning we normally do in pen- and paper where we skip a bunch of steps, so it's kind of like <code>calc</code> and <code>simp</code> but more powerful</p>",
        "id": 472923961,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1727364758
    },
    {
        "content": "<p>It sounds like there might be enough interest to set up a dedicated Zulip stream for this topic (let's call it \"Equational\" as a working title).  I forget who I should contact to request one?</p>",
        "id": 472924382,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727364879
    },
    {
        "content": "<p>CC: <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span></p>",
        "id": 472924473,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727364908
    },
    {
        "content": "<p>Completely understood. I'll sketch out what the general Lawvere stuff looks like in the special case of magmas with one relation</p>",
        "id": 472924544,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1727364932
    },
    {
        "content": "<p>If Johann isn't available, then maybe we should CC <span class=\"user-mention\" data-user-id=\"110596\">@Rob Lewis</span></p>",
        "id": 472925652,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727365283
    },
    {
        "content": "<p>I should be able to create a channel. Give me a few secs to recall how to do it :)</p>",
        "id": 472926244,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1727365457
    },
    {
        "content": "<p>Yes, any &gt;= mod can do it</p>",
        "id": 472926332,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1727365487
    },
    {
        "content": "<p>Oh that's nice. I wrongly thought that privilege was reserved for admins</p>",
        "id": 472926395,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1727365507
    },
    {
        "content": "<p><a href=\"#narrow/stream/458659-Equational/topic/channel.20events/near/472926496\">https://leanprover.zulipchat.com/#narrow/stream/458659-Equational/topic/channel.20events/near/472926496</a></p>",
        "id": 472926603,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1727365563
    },
    {
        "content": "<blockquote>\n<p>Specific examples of magmas, such as the natural numbers with the addition operation, obey some set of equations… but not others, and so could be used to generate a large number of anti-implications.</p>\n</blockquote>\n<p>I guess “specific examples“ could also include “all magmas up to size n” (where n is probably no more than 3, given that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>3</mn><mrow><mn>3</mn><mo>⋅</mo><mn>3</mn></mrow></msup><mo>=</mo><mn>19683</mn></mrow><annotation encoding=\"application/x-tex\">3^{3\\cdot 3}=19683</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span><span class=\"mbin mtight\">⋅</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">19683</span></span></span></span>).  I wonder how if that would be useful, or if most of these random magmas simply don’t satisfy any interesting equation.</p>",
        "id": 472926804,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1727365634
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> <a href=\"#narrow/stream/113488-general/topic/Proposing.20a.20universal.20algebra.20exploration.20using.20Lean/near/472926804\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>Specific examples of magmas, such as the natural numbers with the addition operation, obey some set of equations… but not others, and so could be used to generate a large number of anti-implications.</p>\n</blockquote>\n<p>I guess “specific examples“ could also include “all magmas up to size n” (where n is probably no more than 3, given that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>3</mn><mrow><mn>3</mn><mo>⋅</mo><mn>3</mn></mrow></msup><mo>=</mo><mn>19683</mn></mrow><annotation encoding=\"application/x-tex\">3^{3\\cdot 3}=19683</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">3</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span><span class=\"mbin mtight\">⋅</span><span class=\"mord mtight\">3</span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">19683</span></span></span></span>).  I wonder how if that would be useful, or if most of these random magmas simply don’t satisfy any interesting equation.</p>\n</blockquote>\n<p>Part of my intention of this project is to gather some empirical data to help answer these sorts of questions (in this case, \"how useful are random finite magmas for distinguishing different theories?\").  I kind of view the ostensible goal of working out the implication poset as sort of a MacGuffin, to help discover other interesting math and interesting workflows.</p>",
        "id": 472927752,
        "sender_full_name": "Terence Tao",
        "timestamp": 1727365944
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/113488-general/topic/Proposing.20a.20universal.20algebra.20exploration.20using.20Lean/near/472923126\">said</a>:</p>\n<blockquote>\n<p>I like the tactic name <code>egg</code> (it's like you are <code>egg</code>ing on the saturation algorithm to reach the next milestone)</p>\n</blockquote>\n<p>it comes from the underlying reasoning <a href=\"https://egraphs-good.github.io/\">engine</a> we're using, which is called <strong>e</strong>-<strong>g</strong>raphs <strong>g</strong>ood</p>",
        "id": 472929330,
        "sender_full_name": "Andrés Goens",
        "timestamp": 1727366417
    }
]