[
    {
        "content": "<p>I have an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> below:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Playground</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">hygiene</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> This works but produces no unexpanders</span>\n<span class=\"cm\">infixl:65 \" + \" =&gt; add</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Doesn't work here</span>\n<span class=\"cm\">notation3:65 (priority := 1001) a:66 \" + \" b:65 =&gt; add a b</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">MyNewAlgebra</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">add_assoc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">c</span>\n\n<span class=\"n\">notation3</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1001</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"mi\">66</span><span class=\"w\"> </span><span class=\"s2\">\" + \"</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">MyNewAlgebra</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Playground</span>\n</code></pre></div>\n<p>When I <code>set_option hygiene false</code>,I can declare notation using <code>infixl</code> before declaring the function that it denotes. But this doesn't work with <code>notation3</code> and I am forced to use the function name <code>add</code> to define <code>add_assoc</code>. Is there a way around this?</p>",
        "id": 455223467,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722374582
    },
    {
        "content": "<p>Does <code>local notation3</code> work?</p>",
        "id": 455224212,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722374914
    },
    {
        "content": "<p>Nope. Same error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Playground</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">hygiene</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> This works but produces no unexpanders</span>\n<span class=\"cm\">infixl:65 \" + \" =&gt; add</span>\n<span class=\"cm\">-/</span>\n\n\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"n\">notation3</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1001</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"mi\">66</span><span class=\"w\"> </span><span class=\"s2\">\" + \"</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">MyNewAlgebra</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">MyNewAlgebra</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">add_assoc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">c</span>\n\n<span class=\"c1\">--notation3:65 (priority := 1001) a:66 \" + \" b:65 =&gt; MyNewAlgebra.add a b</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Playground</span>\n</code></pre></div>",
        "id": 455224293,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722374959
    },
    {
        "content": "<p>Error message : <code>unknown identifier 'MyNewAlgebra.add'</code></p>",
        "id": 455224417,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722375006
    },
    {
        "content": "<p>Oh, I see, I thought you were using <code>hygiene</code> for another purpose.</p>\n<p>This isn't supported by <code>notation3</code> since it elaborates the RHS to generate a delaborator.</p>",
        "id": 455224518,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722375052
    },
    {
        "content": "<p>I want to use the notation for <code>add</code> inside the typeclass</p>",
        "id": 455224558,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722375080
    },
    {
        "content": "<p>Unfortunately that's not something you can do with <code>notation3</code>, since it needs to know how to resolve <code>add</code> as a global constant to generate the delaborator.</p>",
        "id": 455224604,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722375115
    },
    {
        "content": "<p>I recall that Mario was able to accomplish something like this for inductive types when helping Philip Wadler to port plfa to lean.</p>",
        "id": 455224671,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722375131
    },
    {
        "content": "<p>Using notation3?</p>",
        "id": 455224675,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722375138
    },
    {
        "content": "<p>I'll try to find that thread though IIRC you did recommend it there.</p>",
        "id": 455224736,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722375179
    },
    {
        "content": "<p>You could follow notation3's advice and use <code>(prettyPrint := false)</code>, then define your own <code>app_unexpander</code> or delaborator later.</p>",
        "id": 455224755,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722375186
    },
    {
        "content": "<p>That defeats the purpose of using notation3</p>",
        "id": 455224778,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722375200
    },
    {
        "content": "<p>At least for me, the free lunch (unexpander) is the reason to use <code>notation3</code></p>",
        "id": 455224827,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722375229
    },
    {
        "content": "<p>There's just no way <code>notation3</code> can have any information about what <code>add</code> is before <code>MyNewAlgebra</code> is defined, so there's no way it can construct the delaborator.</p>",
        "id": 455224907,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722375252
    },
    {
        "content": "<p><code>infixl</code> and <code>notation</code> generate unexpanders though, and <code>hygiene</code> controls whether it does any name resolution checking when defining the unexpander. (It doesn't seem to work in this context though.)</p>",
        "id": 455224982,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722375284
    },
    {
        "content": "<p>I tried <code>notation</code> and <code>infixl</code> first and was not getting unexpanders since in proof mode (it was much bigger than this)</p>",
        "id": 455225281,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722375393
    },
    {
        "content": "<p>Unexpanders are keyed to the global constant name, and a problem is that <code>add</code> isn't a global constant so it's not adding an unexpander.</p>\n<p>A future version of <code>infix</code>/<code>notation</code> will give a warning when it doesn't create an unexpander.</p>",
        "id": 455225712,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722375594
    },
    {
        "content": "<p>Found the thread you mentioned. Mario used <code>local infix</code>: <a href=\"#narrow/stream/270676-lean4/topic/Prettyprinting.20the.20result.20of.20an.20.23eval/near/403046669\">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/Prettyprinting.20the.20result.20of.20an.20.23eval/near/403046669</a></p>",
        "id": 455226483,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722375813
    },
    {
        "content": "<p>Notice needing to declare the notation twice. First, as <code>local infix</code> in a section for use inside the types, and again as actual <code>infix</code> now that the definitions exist.</p>",
        "id": 455226604,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1722375850
    },
    {
        "content": "<p>It doesn't seem to work for me:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Playground</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">hygiene</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1001</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"mi\">66</span><span class=\"w\"> </span><span class=\"s2\">\" + \"</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">MyNewAlgebra</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">add_assoc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MyNewAlgebra</span>\n\n<span class=\"c1\">--Uncommenting the below line leads to ambiguous notation</span>\n<span class=\"c1\">-- notation:65 (priority := 1001) a:66 \" + \" b:65 =&gt; MyNewAlgebra.add a b</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">test_unexpander</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MyNewAlgebra</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- no unexpander</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Playground</span>\n</code></pre></div>",
        "id": 455227616,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722376229
    },
    {
        "content": "<p>Oh wait I am missing a section</p>",
        "id": 455227732,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722376298
    },
    {
        "content": "<p>Yes that worked. Thanks a lot :)</p>",
        "id": 455227922,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722376385
    },
    {
        "content": "<p>I do wish it was simpler than this.</p>",
        "id": 455227929,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722376392
    },
    {
        "content": "<p>For anyone looking for this in the future, here's a working version:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Playground</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">hygiene</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">Temp</span>\n\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1001</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"mi\">66</span><span class=\"w\"> </span><span class=\"s2\">\" + \"</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">MyNewAlgebra</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span>\n<span class=\"w\">  </span><span class=\"n\">add_assoc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Temp</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MyNewAlgebra</span>\n\n<span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1001</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">:</span><span class=\"mi\">66</span><span class=\"w\"> </span><span class=\"s2\">\" + \"</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"mi\">65</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">MyNewAlgebra</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">test_unexpander</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MyNewAlgebra</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Playground</span>\n</code></pre></div>",
        "id": 455228084,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1722376462
    }
]