[
    {
        "content": "<p>I believe this has been discussed before, but I can't find the relevant discussions: Can we make rid lake's output of the irrelevant parts of the path to files?</p>",
        "id": 518842983,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747506893
    },
    {
        "content": "<p>For example, <a href=\"https://github.com/leanprover-community/mathlib4/actions/runs/15086908073/job/42410601301\">this job</a> prints</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">actions</span><span class=\"bp\">-</span><span class=\"n\">runner</span><span class=\"bp\">/_</span><span class=\"n\">work</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">GroupWithZero</span><span class=\"bp\">/</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">7</span><span class=\"o\">:</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">instead</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">actions</span><span class=\"bp\">-</span><span class=\"n\">runner</span><span class=\"bp\">/_</span><span class=\"n\">work</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">GroupWithZero</span><span class=\"bp\">/</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">remove</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">TypeTags</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"o\">]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">actions</span><span class=\"bp\">-</span><span class=\"n\">runner</span><span class=\"bp\">/_</span><span class=\"n\">work</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">Ring</span><span class=\"bp\">/</span><span class=\"n\">IsNonarchimedean</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">remove</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">GroupWithZero</span><span class=\"bp\">.</span><span class=\"n\">Action</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"o\">]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">actions</span><span class=\"bp\">-</span><span class=\"n\">runner</span><span class=\"bp\">/_</span><span class=\"n\">work</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Tropical</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">remove</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">GroupWithZero</span><span class=\"bp\">.</span><span class=\"n\">Action</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"o\">]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">/</span><span class=\"n\">actions</span><span class=\"bp\">-</span><span class=\"n\">runner</span><span class=\"bp\">/_</span><span class=\"n\">work</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">RingTheory</span><span class=\"bp\">/</span><span class=\"n\">Valuation</span><span class=\"bp\">/</span><span class=\"n\">Discrete</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">remove</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">GroupWithZero</span><span class=\"bp\">.</span><span class=\"n\">Int</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 518842987,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747506897
    },
    {
        "content": "<p>There are several things that are wrong with it:</p>\n<ul>\n<li>\n<p>The first error is on the same line as <code>Warning:</code>, meaning it shows differently to the other ones, ie <br>\n<a href=\"/user_uploads/3121/U7lcVl9GHjx0J-j1oLwc2kg2/image.png\">like this</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/U7lcVl9GHjx0J-j1oLwc2kg2/image.png\" title=\"like this\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1277x134\" src=\"/user_uploads/thumbnail/3121/U7lcVl9GHjx0J-j1oLwc2kg2/image.png/840x560.webp\"></a></div></li>\n<li>\n<p>The repeated <code>/home/lean/actions-runner/_work/mathlib4/mathlib4/</code> drown the important information</p>\n</li>\n</ul>",
        "id": 518843178,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747506999
    },
    {
        "content": "<p>It's possible part of this is an issue with <a href=\"https://github.com/leanprover-community/gh-problem-matcher-wrap\">https://github.com/leanprover-community/gh-problem-matcher-wrap</a></p>",
        "id": 518843330,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747507085
    },
    {
        "content": "<p>It looks like the <code>--gh-style</code> flag isn't doing as well as it could</p>",
        "id": 518846624,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747509532
    },
    {
        "content": "<p>Which confusingly, seems to currently mean <code>--lean-style</code>, which is then handled by the matcher you link</p>",
        "id": 518846918,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747509768
    },
    {
        "content": "<p>As opposed to directly using <a href=\"https://github.com/leanprover-community/mathlib3/blob/master/scripts/detect_errors.py#L6-L24\">the actual github style</a></p>",
        "id": 518846921,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747509774
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> is looking into fixing the absolute paths, if I understand correctly. Hopefully this will be better in the next release.</p>",
        "id": 518858297,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1747518652
    }
]