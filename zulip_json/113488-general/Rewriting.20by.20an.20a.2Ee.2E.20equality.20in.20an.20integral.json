[
    {
        "content": "<p>When rewriting by an equality, I'll often use <code>conv =&gt; equals &lt;new_rhs&gt;</code> to obtain a goal of the form <code>&lt;lhs&gt; = &lt;new_rhs&gt;</code>.  However, I need to rewrite an integral using an inequality that only holds almost everywhere (<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/MeasureTheory/Integral/Bochner/Basic.html#MeasureTheory.integral_congr_ae\">MeasureTheory.integral_congr_ae</a>). Is there anything similar to the <code>conv =&gt; equals</code> pattern that would allow me to perform a targeted rewrite within an integral along an almost-everywhere equal relation, without needing to write out the full expression?</p>\n<p>Currently, I'm relying on copy-pasting the entire expression from the infoview and fixing pretty-printing roundtrip issues</p>",
        "id": 531954894,
        "sender_full_name": "Aaron Hill",
        "timestamp": 1753921215
    },
    {
        "content": "<p>Can grw do it/should it be able to?</p>",
        "id": 532001085,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1753947148
    },
    {
        "content": "<p>Unfortunately grw cannot handle this currently, see <a href=\"#narrow/channel/287929-mathlib4/topic/Announcement.3A.20New.20.60grw.60.20tactic/near/525569530\">#mathlib4 &gt; Announcement: New &#96;grw&#96; tactic @ ðŸ’¬</a><br>\n(there is some discussion in that thread about possibly updating  rw and grw to handle bound variables in the future) </p>\n<p>I have ran into this kind of thing a lot and found a few tricks to avoid rewriting the whole thing but unfortunately no catch all solution (which grw could possibly be if it could handle bound variables). Perhaps write a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>.</p>",
        "id": 532027895,
        "sender_full_name": "David Ledvinka",
        "timestamp": 1753955137
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"753178\">@Aaron Hill</span> could you share a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>\n<p>It is true that <code>grw</code> currently can't rewrite under binders, but in such a situation you can use the <code>gcongr</code> tactic, in combination with a <code>calc</code> block.</p>",
        "id": 535044388,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1755568966
    }
]