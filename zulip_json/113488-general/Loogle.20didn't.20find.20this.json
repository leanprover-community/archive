[
    {
        "content": "<p>Using <a href=\"https://loogle.lean-lang.org/?q=_+%E2%89%A4+nonZeroDivisors+_\">_ ≤ nonZeroDivisors _</a> did not find <a href=\"https://loogle.lean-lang.org/?q=Ideal.primeCompl_le_nonZeroDivisors\">Ideal.primeCompl_le_nonZeroDivisors</a>?</p>",
        "id": 548329283,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762021921
    },
    {
        "content": "<p>This is a known issue: loogle includes all instance names in the search, so it fails to find theorems that take a different path in the instance resolution.</p>",
        "id": 548330060,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1762022644
    },
    {
        "content": "<p>As a workaround, I use something like <a href=\"https://loogle.lean-lang.org/?q=%7C-+_+%E2%89%A4+_%2C+nonZeroDivisors\">|- _ ≤ _, nonZeroDivisors</a>. It gives some false positives though.</p>",
        "id": 548330112,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1762022700
    },
    {
        "content": "<p>I have no idea what Yury's answer means. The proof is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">primeCompl_le_nonZeroDivisors</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NoZeroDivisors</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">IsPrime</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">primeCompl</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">nonZeroDivisors</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">le_nonZeroDivisors_of_noZeroDivisors</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">not_not_intro</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">zero_mem</span>\n</code></pre></div>\n<p>Where is the \"different path in the instance resolution\"?</p>",
        "id": 553235725,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762079966
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> I've used <code>pp.explicit</code> to print out the two expressions and compared them:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">pp</span><span class=\"bp\">.</span><span class=\"n\">explicit</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">nonZeroDivisors</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">primeCompl_le_nonZeroDivisors</span>\n</code></pre></div>\n<p>and for everyone's convenience I've extracted out the two important parts: the resolution for the LE instance and the MulOneClass instance (for submonoid)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- from #check _ ≤ nonZeroDivisors _</span>\n\n<span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Preorder</span><span class=\"bp\">.</span><span class=\"n\">toLE</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">PartialOrder</span><span class=\"bp\">.</span><span class=\"n\">toPreorder</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">CompletePartialOrder</span><span class=\"bp\">.</span><span class=\"n\">toPartialOrder</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">CompleteLattice</span><span class=\"bp\">.</span><span class=\"n\">toCompletePartialOrder</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">        </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Submonoid</span><span class=\"bp\">.</span><span class=\"n\">instCompleteLattice</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)))))</span>\n\n<span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Submonoid</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">3</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">MulZeroOneClass</span><span class=\"bp\">.</span><span class=\"n\">toMulOneClass</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">3</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">MonoidWithZero</span><span class=\"bp\">.</span><span class=\"n\">toMulZeroOneClass</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">3</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">4</span><span class=\"o\">)))</span>\n\n<span class=\"c1\">-- from #check Ideal.primeCompl_le_nonZeroDivisors</span>\n\n<span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Preorder</span><span class=\"bp\">.</span><span class=\"n\">toLE</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">PartialOrder</span><span class=\"bp\">.</span><span class=\"n\">toPreorder</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">OmegaCompletePartialOrder</span><span class=\"bp\">.</span><span class=\"n\">toPartialOrder</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">CompleteLattice</span><span class=\"bp\">.</span><span class=\"n\">instOmegaCompletePartialOrder</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">        </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Submonoid</span><span class=\"bp\">.</span><span class=\"n\">instCompleteLattice</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)))))</span>\n\n<span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Submonoid</span><span class=\"w\"> </span><span class=\"n\">R</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">MulZeroOneClass</span><span class=\"bp\">.</span><span class=\"n\">toMulOneClass</span><span class=\"w\"> </span><span class=\"n\">R</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">NonAssocSemiring</span><span class=\"bp\">.</span><span class=\"n\">toMulZeroOneClass</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)))</span>\n</code></pre></div>\n<p>and I would guess that it is because of the subtle differences here.</p>",
        "id": 553236189,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762080458
    },
    {
        "content": "<p>the second one actually would seem more likely, and the difference is the two different ways to obtain MulZeroOneClass:</p>\n<ul>\n<li><code>@MonoidWithZero.toMulZeroOneClass ?m.3 ?m.4</code> vs.</li>\n<li><code>@NonAssocSemiring.toMulZeroOneClass R _</code></li>\n</ul>",
        "id": 553236301,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762080554
    }
]