[
    {
        "content": "<p>This raises an error:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>❯<span class=\"w\"> </span>git<span class=\"w\"> </span>clone<span class=\"w\"> </span>https://github.com/lean-ja/lean-by-example.git\nCloning<span class=\"w\"> </span>into<span class=\"w\"> </span><span class=\"s1\">'lean-by-example'</span>...\nremote:<span class=\"w\"> </span>Enumerating<span class=\"w\"> </span>objects:<span class=\"w\"> </span><span class=\"m\">4641</span>,<span class=\"w\"> </span><span class=\"k\">done</span>.\nremote:<span class=\"w\"> </span>Counting<span class=\"w\"> </span>objects:<span class=\"w\"> </span><span class=\"m\">100</span>%<span class=\"w\"> </span><span class=\"o\">(</span><span class=\"m\">681</span>/681<span class=\"o\">)</span>,<span class=\"w\"> </span><span class=\"k\">done</span>.\nremote:<span class=\"w\"> </span>Compressing<span class=\"w\"> </span>objects:<span class=\"w\"> </span><span class=\"m\">100</span>%<span class=\"w\"> </span><span class=\"o\">(</span><span class=\"m\">307</span>/307<span class=\"o\">)</span>,<span class=\"w\"> </span><span class=\"k\">done</span>.\nremote:<span class=\"w\"> </span>Total<span class=\"w\"> </span><span class=\"m\">4641</span><span class=\"w\"> </span><span class=\"o\">(</span>delta<span class=\"w\"> </span><span class=\"m\">410</span><span class=\"o\">)</span>,<span class=\"w\"> </span>reused<span class=\"w\"> </span><span class=\"m\">563</span><span class=\"w\"> </span><span class=\"o\">(</span>delta<span class=\"w\"> </span><span class=\"m\">368</span><span class=\"o\">)</span>,<span class=\"w\"> </span>pack-reused<span class=\"w\"> </span><span class=\"m\">3960</span>\nReceiving<span class=\"w\"> </span>objects:<span class=\"w\"> </span><span class=\"m\">100</span>%<span class=\"w\"> </span><span class=\"o\">(</span><span class=\"m\">4641</span>/4641<span class=\"o\">)</span>,<span class=\"w\"> </span><span class=\"m\">1</span>.11<span class=\"w\"> </span>MiB<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span><span class=\"m\">2</span>.58<span class=\"w\"> </span>MiB/s,<span class=\"w\"> </span><span class=\"k\">done</span>.\nResolving<span class=\"w\"> </span>deltas:<span class=\"w\"> </span><span class=\"m\">100</span>%<span class=\"w\"> </span><span class=\"o\">(</span><span class=\"m\">3213</span>/3213<span class=\"o\">)</span>,<span class=\"w\"> </span><span class=\"k\">done</span>.\n\n~<span class=\"w\"> </span>took<span class=\"w\"> </span>2s\n❯<span class=\"w\"> </span><span class=\"nb\">cd</span><span class=\"w\"> </span>.<span class=\"se\">\\l</span>ean-by-example<span class=\"se\">\\</span>\n\nlean-by-example<span class=\"w\"> </span>on<span class=\"w\"> </span><span class=\"w\"> </span>main\n❯<span class=\"w\"> </span>lake<span class=\"w\"> </span>update\nerror:<span class=\"w\"> </span>could<span class=\"w\"> </span>not<span class=\"w\"> </span>detect<span class=\"w\"> </span>the<span class=\"w\"> </span>configuration<span class=\"w\"> </span>of<span class=\"w\"> </span>the<span class=\"w\"> </span>Lake<span class=\"w\"> </span>installation\n</code></pre></div>\n<p>I don't know how to resolve this.</p>",
        "id": 450388056,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720601813
    },
    {
        "content": "<p>my OS: Windows 11</p>",
        "id": 450388089,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720601830
    },
    {
        "content": "<p>elan toolchain: </p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>lean-by-example<span class=\"w\"> </span>on<span class=\"w\"> </span><span class=\"w\"> </span>main\n❯<span class=\"w\"> </span>elan<span class=\"w\"> </span>toolchain<span class=\"w\"> </span>list\nleanprover/lean4:nightly\nleanprover/lean4:stable<span class=\"w\"> </span><span class=\"o\">(</span>default<span class=\"o\">)</span>\nleanprover/lean4:v4.10.0-rc1\nleanprover/lean4:v4.8.0\nleanprover/lean4:v4.8.0-rc1\nleanprover/lean4:v4.8.0-rc2\nleanprover/lean4:v4.9.0\nleanprover/lean4:v4.9.0-rc2\nleanprover/lean4:v4.9.0-rc3\n</code></pre></div>",
        "id": 450388135,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720601858
    },
    {
        "content": "<p><code>lake build</code> also does not work.</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>lean-by-example<span class=\"w\"> </span>on<span class=\"w\"> </span><span class=\"w\"> </span>main\n❯<span class=\"w\"> </span>lake<span class=\"w\"> </span>build\nerror:<span class=\"w\"> </span>could<span class=\"w\"> </span>not<span class=\"w\"> </span>detect<span class=\"w\"> </span>the<span class=\"w\"> </span>configuration<span class=\"w\"> </span>of<span class=\"w\"> </span>the<span class=\"w\"> </span>Lake<span class=\"w\"> </span>installation\n</code></pre></div>",
        "id": 450388296,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720601915
    },
    {
        "content": "<p>For me <code>lake update</code> works fine:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span>lake<span class=\"w\"> </span>update\nNo<span class=\"w\"> </span>files<span class=\"w\"> </span>to<span class=\"w\"> </span>download\nDecompressing<span class=\"w\"> </span><span class=\"m\">4799</span><span class=\"w\"> </span>file<span class=\"o\">(</span>s<span class=\"o\">)</span>\nUnpacked<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"m\">11518</span><span class=\"w\"> </span>ms\nCompleted<span class=\"w\"> </span>successfully!\ninfo:<span class=\"w\"> </span>mdgen:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/Seasawher/mdgen<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/mdgen'</span>\ninfo:<span class=\"w\"> </span>mathlib:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/mathlib4.git<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/mathlib'</span>\ninfo:<span class=\"w\"> </span>batteries:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/batteries<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/batteries'</span>\ninfo:<span class=\"w\"> </span>Qq:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/quote4<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/Qq'</span>\ninfo:<span class=\"w\"> </span>aesop:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/aesop<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/aesop'</span>\ninfo:<span class=\"w\"> </span>proofwidgets:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/ProofWidgets4<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/proofwidgets'</span>\ninfo:<span class=\"w\"> </span>importGraph:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/import-graph<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/importGraph'</span>\ninfo:<span class=\"w\"> </span>Cli:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover/lean4-cli<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/Cli'</span>\ninfo:<span class=\"w\"> </span>mathlib:<span class=\"w\"> </span>running<span class=\"w\"> </span>post-update<span class=\"w\"> </span>hooks\n$\n</code></pre></div>\n<p>This is on commit <code>a881e6777e8c3f9c5f58766f697f52f1f2d2964a</code> of the repo.</p>",
        "id": 450389846,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720602288
    },
    {
        "content": "<p>this problem is Windows specific?</p>",
        "id": 450389945,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720602323
    },
    {
        "content": "<p>I don't know. But I'm on Ubuntu.</p>",
        "id": 450390033,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720602356
    },
    {
        "content": "<p>I tested this on devcontainer (<code>mcr.microsoft.com/devcontainers/base:jammy</code>). It works fine on Ubuntu...</p>",
        "id": 450391980,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720602988
    },
    {
        "content": "<p>(outdated)</p>",
        "id": 450397598,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720604313
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 450397775,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720604362
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 450401994,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720605470
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 450403277,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720605901
    },
    {
        "content": "<p>(del)</p>",
        "id": 450403469,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720605957
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 450415626,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720609648
    },
    {
        "content": "<p>I tried to reproduce this issue on GitHub Action.</p>\n<p>Here is my workflow file:</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">CI on Windows</span>\n\n<span class=\"c1\"># https://docs.github.com/en/actions/using-jobs/using-concurrency#example-only-cancel-in-progress-jobs-or-runs-for-the-current-workflow</span>\n<span class=\"nt\">concurrency</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"nt\">group</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">${{ github.workflow }}-${{ github.ref }}</span>\n<span class=\"w\">  </span><span class=\"nt\">cancel-in-progress</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">true</span>\n\n<span class=\"nt\">on</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"nt\">pull_request</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"nt\">push</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nt\">branches</span><span class=\"p\">:</span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">main</span>\n<span class=\"w\">  </span><span class=\"nt\">workflow_dispatch</span><span class=\"p\">:</span>\n\n<span class=\"nt\">jobs</span><span class=\"p\">:</span>\n<span class=\"w\">  </span><span class=\"nt\">build</span><span class=\"p\">:</span>\n<span class=\"w\">    </span><span class=\"nt\">runs-on</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">windows-latest</span>\n<span class=\"w\">    </span><span class=\"nt\">steps</span><span class=\"p\">:</span>\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">checkout</span>\n<span class=\"w\">        </span><span class=\"nt\">uses</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">actions/checkout@v4</span>\n\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">install elan</span>\n<span class=\"w\">        </span><span class=\"nt\">run</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span>\n<span class=\"w\">          </span><span class=\"no\">curl -O --location https://raw.githubusercontent.com/leanprover/elan/master/elan-init.ps1</span>\n<span class=\"w\">          </span><span class=\"no\">echo 1 | powershell -ExecutionPolicy Bypass -f elan-init.ps1</span>\n<span class=\"w\">          </span><span class=\"no\">del elan-init.ps1</span>\n<span class=\"w\">        </span><span class=\"nt\">shell</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">pwsh</span>\n\n<span class=\"w\">      </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">run lake build</span>\n<span class=\"w\">        </span><span class=\"nt\">run</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">|</span>\n<span class=\"w\">          </span><span class=\"no\">echo \"::group::add PATH\"</span>\n<span class=\"w\">          </span><span class=\"no\">$ENV:Path+=\";$env:USERPROFILE\\.elan\\bin\"</span>\n<span class=\"w\">          </span><span class=\"no\">echo \"::endgroup::\"</span>\n\n<span class=\"w\">          </span><span class=\"no\">echo \"::group::Mathlib Cache\"</span>\n<span class=\"w\">          </span><span class=\"no\">lake exe cache get</span>\n<span class=\"w\">          </span><span class=\"no\">echo \"::endgroup::\"</span>\n\n<span class=\"w\">          </span><span class=\"no\">echo \"::group::lake build\"</span>\n<span class=\"w\">          </span><span class=\"no\">lake build --quiet</span>\n<span class=\"w\">          </span><span class=\"no\">echo \"::endgroup::\"</span>\n<span class=\"w\">        </span><span class=\"nt\">shell</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">pwsh</span>\n</code></pre></div>\n<p>but this workflow does not raise an error!! <br>\nsee: <a href=\"https://github.com/Seasawher/lean-by-example-fork/actions/runs/9873274985/job/27265175764\">https://github.com/Seasawher/lean-by-example-fork/actions/runs/9873274985/job/27265175764</a></p>\n<p>I don't understand this issue.</p>",
        "id": 450421264,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1720610865
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"626349\">@Asei Inoue</span>, have you tried deleting your <code>.elan</code> and reinstalling elan?</p>",
        "id": 450425000,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1720611559
    },
    {
        "content": "<p>As kim suggested, this error means that your Lake installation is likely corrupted. Thus,  deleting and reinstalling the the current toolchain (either via <code>elan uninstall</code> or reinstalling elan altogether) is likely the best solution.</p>",
        "id": 450821406,
        "sender_full_name": "Mac Malone",
        "timestamp": 1720735510
    }
]