[
    {
        "content": "<p>I would like to replicate the Lean Game Server locally. I tried with just the server and one game, but ran into build problems, I thinking probably due to version skew. It would be helpful if the Lean Game Server would list the urls and version tags of the server and all of the supplied games to make it easier to reproduce. It would also be helpful if directions were supplied on how to do this.</p>",
        "id": 566003333,
        "sender_full_name": "Richard L Ford",
        "timestamp": 1767307073
    },
    {
        "content": "<p>I've had no problems with running everything locally, following the instructions here <a href=\"https://github.com/leanprover-community/lean4game/blob/main/doc/running_locally.md\">https://github.com/leanprover-community/lean4game/blob/main/doc/running_locally.md</a> (and I did this a lot when I was developing NNG). However I note that currently lean4game is not passing CI <a href=\"https://github.com/leanprover-community/lean4game/actions/runs/20576820292/job/59095589334\">https://github.com/leanprover-community/lean4game/actions/runs/20576820292/job/59095589334</a> -- perhaps this is your issue?</p>",
        "id": 566004601,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1767308984
    },
    {
        "content": "<p>The issue comes from the use of <a href=\"http://gitpkg.vercel.app\">gitpkg.vercel.app</a> in the dependencies, which has been shut down for some reason recently. From what I've seen, there has been some efforts to fix this issue: <a href=\"https://github.com/leanprover-community/lean4game/pull/431\">https://github.com/leanprover-community/lean4game/pull/431</a><br>\nI also have tried on my side with no success since I'm not really familiar with the node-npm ecosystem</p>",
        "id": 566031937,
        "sender_full_name": "PAUL BERNARD",
        "timestamp": 1767342340
    },
    {
        "content": "<p>Indeed, Alex has a half-finished fix and I've allocated as much time as necessary from 6.-12. January to fix the installation issues.<br>\nI'm sorry it's not installable currently without tricky workarounds or with cache.</p>\n<p>As for the URL of games, there isn't a button right now, but you can open a game's overview page and replace <code>adam.math.hhu.de/#/g/</code> with <code>github.com/</code> and you should be on the source repo of the game (i.e. the last two parts of the url are deliberately <code>gitbhub-user/github-repo</code>)</p>",
        "id": 566131932,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1767426003
    },
    {
        "content": "<p>I see. Thanks for the information. So getting the URLs is easy. If the hashes of the live versions were available, then one could deploy locally even if the master version is broken. I did look back in the test history for lean4game and see the last version that passed CI, so I'll try that version and see if I have success.</p>",
        "id": 566367419,
        "sender_full_name": "Richard L Ford",
        "timestamp": 1767623821
    },
    {
        "content": "<p>I don't think you will find an old version that works because the setup broke when an external server that we relied on stopped working.</p>",
        "id": 566370991,
        "sender_full_name": "Alexander Bentkamp",
        "timestamp": 1767624726
    },
    {
        "content": "<p>OK. Good to know. I'll wait for the fix while also studying the source code to understand how the game server works.</p>",
        "id": 566371301,
        "sender_full_name": "Richard L Ford",
        "timestamp": 1767624809
    },
    {
        "content": "<p>But if that is the case, why does the live version at <a href=\"http://hhu.de\">hhu.de</a> still work?</p>",
        "id": 566371500,
        "sender_full_name": "Richard L Ford",
        "timestamp": 1767624857
    },
    {
        "content": "<p>It's only <code>npm install</code> that is a problem. Once the problematic dependencies are cached, even <code>npm install</code> works.</p>",
        "id": 566380259,
        "sender_full_name": "Alexander Bentkamp",
        "timestamp": 1767626987
    },
    {
        "content": "<p>OK. Thanks.</p>",
        "id": 566380498,
        "sender_full_name": "Richard L Ford",
        "timestamp": 1767627038
    },
    {
        "content": "<p>I looked a little at vercel. It looks like it was useful at managing node dependencies. Is the plan now to change things to avoid vercel?</p>",
        "id": 566383083,
        "sender_full_name": "Richard L Ford",
        "timestamp": 1767627672
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"296262\">@Richard L Ford</span> I forked the server and got it running without the Vercel dependency. You can see what I did here: <a href=\"https://github.com/RichardKelley/lean4game/tree/remove-vercel\">https://github.com/RichardKelley/lean4game/tree/remove-vercel</a>. It's not much code, so I suspect that this will get resolved rather soon.</p>",
        "id": 566647892,
        "sender_full_name": "Richard Kelley",
        "timestamp": 1767750453
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"783025\">@Richard Kelley</span>, Thanks. I'll take a look.</p>",
        "id": 566729684,
        "sender_full_name": "Richard L Ford",
        "timestamp": 1767791140
    },
    {
        "content": "<p>I've now merged <span class=\"user-mention\" data-user-id=\"129120\">@Alexander Bentkamp</span>'s fix including <span class=\"user-mention\" data-user-id=\"783025\">@Richard Kelley</span>'s adjustments. Big thank you to both of you!</p>\n<p>I hope this means the projects should be installable again. Let me know if you have further issues with it!</p>",
        "id": 566931471,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1767875547
    },
    {
        "content": "<p>It now works for me.  Thanks!</p>",
        "id": 566958920,
        "sender_full_name": "Richard L Ford",
        "timestamp": 1767883397
    }
]