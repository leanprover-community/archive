[
    {
        "content": "<p>I'm slowly recovering from some mild illness and my brain is still mashed potatoes...<br>\nThere is a command to list all decls in a file that are not used by some given decl. I thought it was <code>#show_unused</code>. But my Lean disagrees.<br>\nWhat was it again? And can we please list a bunch of new MWE techniques in <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>",
        "id": 462777365,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1723811725
    },
    {
        "content": "<p>The command seems to exist:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">ShowUnused</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">XX</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">intro</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">YY</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">XX</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">ZZ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">YY</span>\n\n<span class=\"bp\">#</span><span class=\"n\">show_unused</span><span class=\"w\"> </span><span class=\"n\">YY</span>\n</code></pre></div>",
        "id": 462782559,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723813321
    },
    {
        "content": "<p>It tells you that <code>ZZ</code> is not used in <code>YY</code>.</p>",
        "id": 462782640,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723813341
    },
    {
        "content": "<p>Maybe it should be imported in <code>Mathlib.Init</code>?</p>",
        "id": 462782656,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723813351
    },
    {
        "content": "<p>Is it imported anywhere in mathlib right now or did it fall victim to Kim's import minimizations?</p>",
        "id": 462782715,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723813386
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 462782754,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1723813416
    },
    {
        "content": "<p>It is not imported anywhere before <code>Mathlib.lean</code>, that now imports <code>Batteries</code>.</p>",
        "id": 462783806,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723813731
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/113488-general/topic/command.20to.20list.20unused.20decls.20in.20files/near/462782656\">said</a>:</p>\n<blockquote>\n<p>Maybe it should be imported in <code>Mathlib.Init</code>?</p>\n</blockquote>\n<p>I would be in favour of this.  Besides, the imports of the command are <code>Lean.Util.FoldConsts</code> and <code>Lean.Linter.UnusedVariables</code>: the first I consider to be a quite basic file, the second \"is\" the <code>UnusedVariables</code> linter and should definitely be in <code>Mathlib.Init</code>!</p>",
        "id": 462784659,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723814073
    }
]