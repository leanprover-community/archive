[
    {
        "content": "<p>In <a href=\"https://sebasti.a.nullri.ch/lean4/doc/monads/states.lean.html\">https://sebasti.a.nullri.ch/lean4/doc/monads/states.lean.html</a> there is an implementation of tic-tac-toe as an example for the state monad.<br>\nIn version <code>leanprover/lean4:v4.26.0-rc2</code> I got two errors in that file:</p>\n<ol>\n<li>in function <code>playGame</code>the line <code>while true do</code></li>\n<li>in function <code>tic-tac-toe</code>the  <code>let gs := { .... }</code></li>\n</ol>\n<p>Can anybody help to fix that?</p>",
        "id": 561145762,
        "sender_full_name": "Burkhardt Renz",
        "timestamp": 1764592341
    },
    {
        "content": "<p>What are the errors? Can you post the code you used? I'm looking at the page right now and see a lot more errors.</p>",
        "id": 561147022,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1764592651
    },
    {
        "content": "<p>I don't know anything about monads but that looks like a pretty suspicious link you're giving. Are you sure that's the official \"Lean Manual\"? (It might be, but I was expecting something hosted by the lean FRO)</p>",
        "id": 561147075,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1764592664
    },
    {
        "content": "<p>some of the content seems to be from this file <a href=\"https://github.com/leanprover/lean4/tree/master/doc/examples\">https://github.com/leanprover/lean4/tree/master/doc/examples</a></p>",
        "id": 561150228,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1764593553
    },
    {
        "content": "<p>That link is under Sebastian's domain. It's the old mdbook manual that was removed about a year ago, previously under <code>lean4/doc</code>.</p>",
        "id": 561152560,
        "sender_full_name": "Chris Henson",
        "timestamp": 1764594155
    },
    {
        "content": "<p>The PR that removed this was <a href=\"https://github.com/leanprover/lean4/pull/6401\">lean4#6401</a>. If I take the file <code>doc/monads/states.lean</code> that is removed there and update the hashmap import to <code>Batteries.Data.HashMap</code>, everything seems to work as expected. If you post an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> someone may diagnose what you are running into.</p>",
        "id": 561158901,
        "sender_full_name": "Chris Henson",
        "timestamp": 1764595690
    },
    {
        "content": "<p>Hi Chris,<br>\nyou are right. </p>\n<p>But as soon as I import Mathlib instead of Batteries.Data.HashMap I get the error in line 157 and in line 164.</p>",
        "id": 561197631,
        "sender_full_name": "Burkhardt Renz",
        "timestamp": 1764603769
    },
    {
        "content": "<p>I managed to fix the problems. When replacing Batteries.HashMap with Std.HashMap, we need to change one function (empty =&gt; emptyWithCapacity) and some types. <br>\nHere the fixed file: <a href=\"https://esb-dev.github.io/mat/FPLTicTacToe.lean\">https://esb-dev.github.io/mat/FPLTicTacToe.lean</a></p>",
        "id": 562615414,
        "sender_full_name": "Burkhardt Renz",
        "timestamp": 1765266174
    }
]