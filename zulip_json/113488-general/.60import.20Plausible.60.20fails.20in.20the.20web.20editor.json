[
    {
        "content": "<p>Can this be enabled somehow?</p>",
        "id": 483933141,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732288962
    },
    {
        "content": "<p>I think you just need to add <code>import Plausible</code> to the top <code>Mathlib.lean</code> for that to happen.</p>",
        "id": 483954007,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1732295216
    },
    {
        "content": "<p>Until then it seems you can import the components of plausible, e.g.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Plausible</span><span class=\"bp\">.</span><span class=\"n\">Random</span>\n</code></pre></div>\n<p>But it seems nothing in mathlib imports <code>Plausible</code>, so the <code>cache</code> doesn’t include it?</p>",
        "id": 483954088,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1732295244
    },
    {
        "content": "<p>Does the web editor only work for imports in the mathlib cache?</p>",
        "id": 483955222,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732295622
    },
    {
        "content": "<p>I thought there was a different system that supported <code>import Batteries</code></p>",
        "id": 483955442,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732295704
    },
    {
        "content": "<p>The web editor basically runs <code>lake exec cache get</code> and hopes that that is sufficient to get all of mathlib (including dependencies of interest). There is no support for loading other libraries besides mathlib.</p>",
        "id": 483974481,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1732302718
    },
    {
        "content": "<p>As far as I can tell, <code>import ProofWidgets</code> does not appear anywhere in mathlib, yet it works in the web editor:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"n\">run_cmd</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"ss\">`ProofWidgets</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">getEnv</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">header</span><span class=\"bp\">.</span><span class=\"n\">moduleNames</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"s2\">\"Part of mathlib\"</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"s2\">\"Not part of mathlib\"</span>\n</code></pre></div>",
        "id": 483975056,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732302965
    },
    {
        "content": "<p>Perhaps the answer is here? <a href=\"https://github.com/leanprover-community/lean4web/blob/5240162d56b902da2cde0c69b22a6319a3c516e9/Projects/mathlib-demo/MathlibLatest.lean#L2\">https://github.com/leanprover-community/lean4web/blob/5240162d56b902da2cde0c69b22a6319a3c516e9/Projects/mathlib-demo/MathlibLatest.lean#L2</a></p>",
        "id": 483975672,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732303222
    },
    {
        "content": "<p>Indeed.  But why shouldn't Mathlib import Plausible, like Batteries, so that everyone can do <code>import Plausible</code> after fetching the cache?</p>",
        "id": 484081361,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1732382690
    },
    {
        "content": "<p>I would actually expect <code>Mathlib.Tactic</code> to already <code>import Plausible</code></p>",
        "id": 484083108,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732384224
    },
    {
        "content": "<p>or even <code>Mathlib.Tactic.Common</code></p>",
        "id": 484083115,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732384233
    },
    {
        "content": "<p>chore: import Plausible in Tactic.Common <a href=\"https://github.com/leanprover-community/mathlib4/pull/19429\">#19429</a></p>",
        "id": 484112645,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732413522
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> <a href=\"#narrow/stream/113488-general/topic/.60import.20Plausible.60.20fails.20in.20the.20web.20editor/near/483974481\">said</a>:</p>\n<blockquote>\n<p>The web editor basically runs <code>lake exec cache get</code> and hopes [...]</p>\n</blockquote>\n<p>It also runs <code>lake build</code> as Eric found out. I merged Eric's PR on lean4web as it's not hurtful, but probably the mathlib PR will reach the live editor first</p>",
        "id": 484140640,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1732443871
    },
    {
        "content": "<p>Indeed, so does the version of the script running on <a href=\"http://live.lean-lang.org\">live.lean-lang.org</a>. My bad.</p>",
        "id": 484161588,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1732463954
    }
]