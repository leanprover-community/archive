[
    {
        "content": "<p>Discussion of the new FRO roadmap for year 3 <a class=\"message-link\" href=\"/#narrow/channel/113486-announce/topic/Lean.20FRO/near/532936698\">#announce &gt; Lean FRO @ üí¨</a> can happen here</p>",
        "id": 532942210,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754408344
    },
    {
        "content": "<p>I'm excited to read about a code formatter. Can you share some more details? Does that mean working on pretty-printer based formatting linters for mathlib is a bit of a waste of time now (if an auto-formatter is coming soon)?</p>",
        "id": 532942353,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754408402
    },
    {
        "content": "<p>Small detail: you mention the formatter in objective 6 in the intro and deliverables, but the strategy mentions it in objective 3. Is this intentional?</p>",
        "id": 532942515,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754408453
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/532942353\">said</a>:</p>\n<blockquote>\n<p>I'm excited to read about a code formatter. Can you share some more details? Does that mean working on pretty-printer based formatting linters for mathlib is a bit of a waste of time now (if an auto-formatter is coming soon)?</p>\n</blockquote>\n<p>To clarify: I'm very happy if the answer is \"yes, you can do other things now\" :-)</p>",
        "id": 532942638,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754408494
    },
    {
        "content": "<p>Very exciting! Could you share more details on the following two points?</p>\n<blockquote>\n<p>We will also unify existing rewriting tactics, such as¬†<code>rw</code>¬†and¬†<code>simp_rw</code>, into a single, more intuitive and powerful rewrite tool. </p>\n</blockquote>\n<blockquote>\n<p>A next-generation simplifier, inspired by¬†<code>simp</code>¬†but designed to scale to industrial use cases, will be engineered and released.</p>\n</blockquote>\n<p>What are (specific) aspects which are supposed to improve with the new rewriting and simplifier tactics?</p>",
        "id": 532943902,
        "sender_full_name": "Marcus Rossel",
        "timestamp": 1754408949
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/532942353\">said</a>:</p>\n<blockquote>\n<p>I'm excited to read about a code formatter. Can you share some more details? Does that mean working on pretty-printer based formatting linters for mathlib is a bit of a waste of time now (if an auto-formatter is coming soon)?</p>\n</blockquote>\n<p>Can you elaborate on the objectives of this approach? The pretty printer is, inherently due to its requirements and implementation, often incapable of producing something that is faithful to the original syntax so I don't see an obvious approach to using it for formatting hints.</p>",
        "id": 532943925,
        "sender_full_name": "Henrik B√∂ving",
        "timestamp": 1754408957
    },
    {
        "content": "<p>The objective is \"reduce formatting errors in mathlib by checking for some violations automatically\". If there's a tool that can be useful now without having false positives, I'm all for it. That tool need not be an auto-formatter, detecting some broken-ness already helps.<br>\nThere is a mathlib linter (see <a href=\"https://github.com/leanprover-community/mathlib4/pull/24465\">#24465</a>) which checks for whitespace in declarations, which is quite useful already. #<a href=\"https://github.com/leanprover-community/mathlib4/pull/26926\">26926</a> (in progress) extends this to \"most of mathlib\" --- deferring to the pretty-printer for most formatting, but the source code for line breaks. Not perfect by any means, but useful. <a href=\"https://github.com/leanprover-community/mathlib4/pull/27525\">#27525</a> (in progress) checks indentation of lean files.</p>",
        "id": 532945688,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754409532
    },
    {
        "content": "<p>Independent of whether or not parse+format will be the way a code formatter would be organized, please keep collecting whitespace issues with the current formatting!</p>\n<p>Ideally the pretty printer output would be the source of truth for a neutral style, but this is still often not the case.</p>",
        "id": 532946607,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1754409847
    },
    {
        "content": "<p>What are <code>TotalOrd</code> and <code>StrictWeakOrd</code> supposed to be?</p>",
        "id": 532947937,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1754410343
    },
    {
        "content": "<p>The \"IDE and tooling\" part of the roadmap only talks about VS Code. I know lean.nvim is not an official plugin, but I really hope neovim users won't be left behind and that things will keep compatibility with other editors in mind (especially the code formatting part)</p>",
        "id": 532953258,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1754412329
    },
    {
        "content": "<p>I'm sad to see that the debugger has been deprioritised and isn't on the roadmap this year either. print-like debugging isn't the greatest experience</p>",
        "id": 532955086,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1754413076
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"286014\">Robin Carlier</span> <a href=\"#narrow/stream/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/532953258\">said</a>:</p>\n<blockquote>\n<p>The \"IDE and tooling\" part of the roadmap only talks about VS Code. I know lean.nvim is not an official plugin, but I really hope neovim users won't be left behind and that things will keep compatibility with other editors in mind (especially the code formatting part)</p>\n</blockquote>\n<p>I want to second this. I don't know the numbers, but there are definitely users like myself that exclusively use Lean via neovim. I have been very pleased in the past to see the FRO support lean.nvim and hope that this will continue. I am very excited about year three of the roadmap, especially the formatter and Verso. Thank you all for your work!</p>",
        "id": 532958950,
        "sender_full_name": "Chris Henson",
        "timestamp": 1754414713
    },
    {
        "content": "<p>When does the new code generator land, or has it already? The roadmap says June 2025. Also, will it come with <code>@[unbox]</code> support?</p>",
        "id": 532980439,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1754423477
    },
    {
        "content": "<p>The new code generator is already active and being actively improved, the bug you saw in UInt128 is because of a pass in the new code generator^^</p>",
        "id": 532980531,
        "sender_full_name": "Henrik B√∂ving",
        "timestamp": 1754423522
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik B√∂ving</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/532980531\">said</a>:</p>\n<blockquote>\n<p>The new code generator is already active and being actively improved, the bug you saw in UInt128 is because of a pass in the new code generator^^</p>\n</blockquote>\n<p>That's exciting! I am glad I could contribute to its improvement. :)</p>",
        "id": 532981076,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1754423710
    },
    {
        "content": "<p>Is there a place where Lean users can suggest what they would like to see in proof automation?</p>",
        "id": 532985974,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1754425900
    },
    {
        "content": "<p>We pay attention to this Zulip <span class=\"user-mention\" data-user-id=\"110637\">@Ching-Tsun Chou</span>, and <a class=\"stream\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4\">#lean4</a> is a reasonable starting point for making suggestions and discussing ideas.</p>",
        "id": 532986529,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1754426158
    },
    {
        "content": "<p>Here's one suggestion: <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/Can.20simp.20find.20useful.20equations.20automatically.3F/with/532991209\">#lean4 &gt; Can simp find useful equations automatically?</a></p>",
        "id": 532991263,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1754428726
    },
    {
        "content": "<p>I think one conclusion from the thread I forked above is that Lean tactics need much better documentations.  I don't think one could learn that <code>simp</code> can do the sort of things that <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> and <span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> pointed out by reading the <a href=\"https://leanprover-community.github.io/mathlib-manual/html-multi/Tactics/All-tactics/#simp-next\">manual</a>.  It is also very hard to really understand the manual without many examples.</p>",
        "id": 532997968,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1754432925
    },
    {
        "content": "<p>I‚Äôm writing Lean manual with a lot of examples (but Japanese only) </p>\n<p><a href=\"https://lean-ja.github.io/lean-by-example/\">https://lean-ja.github.io/lean-by-example/</a></p>",
        "id": 533007646,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1754441472
    },
    {
        "content": "<p>I see that there is a new <code>do</code> notation and <code>async</code>-<code>await </code> in the roadmap, where can i get more informations about that ?<br>\nAny chances  to include <code>coroutines</code> (yield) instead of async-await ? it would allow different implementations of async-await on top of different async primitives (event loop vs threads). Also you don't want to enter function coloring issues that are plaging <code>Rust</code> (sync and async functions have to be implemented twice). So designing a proper async-await abstraction is key .</p>",
        "id": 533007918,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1754441761
    },
    {
        "content": "<p>I'm curious about how <code>async</code>/<code>await</code> fits into Lean's monadic viewpoint; I'd internalized that we effectively already have it, with <code>def f : m X</code> being a more general case of <code>async def f : X</code> and <code>(‚Üê f)</code>  being the generalization of <code>await f</code>. Is this a bad take?</p>",
        "id": 533008121,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754441950
    },
    {
        "content": "<p>I had thought so too, with <code>def f : Task Nat</code> being basically a <code>async def f : Nat</code>. It does let you do things like <code>f.get : Nat</code> in a non-monadic context, so it's not as strict as, say, JavaScript, because you have the ability to stall the current thread in order to wait for tasks to finish.</p>",
        "id": 533017491,
        "sender_full_name": "Niels Voss",
        "timestamp": 1754450470
    },
    {
        "content": "<p>What does \"MVP for the Lean Online Platform as a web-only UI solution with secure sandboxing\" mean? Is this kind of like Lean4web, or does it aim to run Lean in the browser itself?</p>",
        "id": 533036970,
        "sender_full_name": "Pim Otte",
        "timestamp": 1754463816
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/8003\">lean4#8003</a> might give a bit more information about how async/await fits into <code>do</code> notation and why</p>",
        "id": 533048253,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1754468084
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"519269\">Pim Otte</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/533036970\">schrieb</a>:</p>\n<blockquote>\n<p>What does \"MVP for the Lean Online Platform as a web-only UI solution with secure sandboxing\" mean? Is this kind of like Lean4web, or does it aim to run Lean in the browser itself?</p>\n</blockquote>\n<p>The former</p>",
        "id": 533055664,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1754470660
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"687698\">Chris Henson</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/532958950\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"286014\">Robin Carlier</span> <a href=\"#narrow/stream/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/532953258\">said</a>:</p>\n<blockquote>\n<p>The \"IDE and tooling\" part of the roadmap only talks about VS Code. I know lean.nvim is not an official plugin, but I really hope neovim users won't be left behind and that things will keep compatibility with other editors in mind (especially the code formatting part)</p>\n</blockquote>\n<p>I want to second this. I don't know the numbers, but there are definitely users like myself that exclusively use Lean via neovim. I have been very pleased in the past to see the FRO support lean.nvim and hope that this will continue. I am very excited about year three of the roadmap, especially the formatter and Verso. Thank you all for your work!</p>\n</blockquote>\n<p>We are very grateful for <span class=\"user-mention\" data-user-id=\"321696\">@Julian Berman</span>'s work on the NeoVim plugin, and will definitely keep coordinating potential breaking changes to the language server with lean.nvim :-)</p>\n<p>Generally, I'm happy to extend this level of coordination to all Lean plugins that are both being actively maintained by someone I can quickly discuss changes with and that have a sufficient level of support for Lean in particular (e.g. some level of InfoView interactivity).</p>\n<p>As for the formatter, it will definitely be available for other plugins as well. Formatting is just a standard LSP functionality.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/532942353\">said</a>:</p>\n<blockquote>\n<p>Does that mean working on pretty-printer based formatting linters for mathlib is a bit of a waste of time now (if an auto-formatter is coming soon)?</p>\n</blockquote>\n<p>The auto-formatter will hopefully be fully functional by the end of year 3, which is still quite a while away, so any work on formatting-related linters will certainly be beneficial until then. Whether it will obsolete all formatting-related linters that Mathlib may want isn't clear to me yet at this point.</p>",
        "id": 533061774,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1754472632
    },
    {
        "content": "<p>Thanks for the clarification!</p>",
        "id": 533064496,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754473488
    },
    {
        "content": "<p>I'm glad to see that support for literate programming via a LaTeX-inspired DSL is on the roadmap. Is it reasonable to expect that this can be used to generate blueprints for formalization projects in the future? While the current blueprint framework is already quite fantastic and has been used successfully in many large-scale formalization projects, I think it might be nice to have the added convenience of having the informal text and the Lean code in the same file.</p>",
        "id": 533068936,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1754475013
    },
    {
        "content": "<p>Yes, absolutely!</p>",
        "id": 533069162,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1754475106
    },
    {
        "content": "<p>That's great! Also, will the TeX part of the editor have the LaTeX LSP running with features like syntax highlighting auto-complete?</p>",
        "id": 533069989,
        "sender_full_name": "Anand Rao Tadipatri",
        "timestamp": 1754475404
    },
    {
        "content": "<blockquote>\n<h3><strong>7. Case Studies</strong></h3>\n<p><strong>Description:</strong> These case studies will demonstrate Lean‚Äôs maturity and utility by applying it in real-world contexts, particularly in software and hardware verification.<br>\n<strong>Strategy:</strong> We plan to develop multiple high-impact, end-to-end case studies that showcase Lean‚Äôs strengths. Each will focus on a concrete problem and highlight both challenges and solutions.<br>\n<strong>Deliverables:</strong> Each case study will be published as a public repository, accompanied by detailed write-ups explaining the approach, methodology, and insights gained. Together, they will serve as concrete evidence of Lean‚Äôs readiness for serious applied work.</p>\n</blockquote>\n<p>Are the existing projects in scope? I'm happy to share the experiences verifying a real-world regex implementation!</p>",
        "id": 533117909,
        "sender_full_name": "pandaman",
        "timestamp": 1754491114
    },
    {
        "content": "<p>We have specific projects in mind that we want to see the light of day. But independent of that, please do share your experience and let people know what went well and what not. Here on Zulip, or a blog post, or maybe a talk at the Lean workshop at ITP?</p>",
        "id": 533129890,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1754494941
    },
    {
        "content": "<blockquote>\n<p>We will also release an MVP for the Lean Online Platform as a web-only UI solution with secure sandboxing</p>\n</blockquote>\n<p>Is this <a href=\"#narrow/channel/270676-lean4/topic/lockdown.20mode\">lockdown mode</a>, but in a slightly different and easier to maintain form?</p>",
        "id": 533135297,
        "sender_full_name": "(deleted)",
        "timestamp": 1754496582
    },
    {
        "content": "<p>Now that I think of it it's perfect. I hope this will be open source.</p>",
        "id": 533135456,
        "sender_full_name": "(deleted)",
        "timestamp": 1754496626
    },
    {
        "content": "<p>I'm glad that there's more attention to program verification. This is my favorite field. Recently the imperative framework has been released. And I can't wait to see what else can be achieved. The real value of Lean is in ensuring the safety and correctness of software, not just to serve as a playground for reinforcement learning.</p>",
        "id": 533140067,
        "sender_full_name": "(deleted)",
        "timestamp": 1754497430
    },
    {
        "content": "<p>I also find Lean really useful for verifying the correctness of mathematics: despite AI flocking to that area, it can (and I presume is mostly done) by humans without AI help. Given how nice programming in Lean is, I also look forward to its software verification story improving :-)</p>",
        "id": 533140555,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754497521
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> <a href=\"#narrow/stream/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/533129890\">said</a>:</p>\n<blockquote>\n<p>We have specific projects in mind that we want to see the light of day. But independent of that, please do share your experience and let people know what went well and what not. Here on Zulip, or a blog post, or maybe a talk at the Lean workshop at ITP?</p>\n</blockquote>\n<p>Iceland is a bit too far for me<span aria-label=\"cry\" class=\"emoji emoji-1f622\" role=\"img\" title=\"cry\">:cry:</span></p>",
        "id": 533189265,
        "sender_full_name": "pandaman",
        "timestamp": 1754520532
    },
    {
        "content": "<p>At least it's far for almost everyone on the world :-)</p>",
        "id": 533265831,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1754563287
    },
    {
        "content": "<p>New Zealand is slightly further from Iceland than Australia. :-)</p>",
        "id": 533283244,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754569895
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873547\">Robin Arnez</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/533048253\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover/lean4/pull/8003\">lean4#8003</a> might give a bit more information about how async/await fits into <code>do</code> notation and why</p>\n</blockquote>\n<p>Is there a discussion thread to help in the design?</p>",
        "id": 533299528,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1754575075
    },
    {
        "content": "<blockquote>\n<p>Additionally, we are working on a counterexample generator to complement proof automation with early error detection capabilities.</p>\n</blockquote>\n<p>Could anyone in the know expand more on what this entails? Is it just better UX around Plausible?</p>\n<p>Not too long ago, I discussed with the Lean-SMT maintainers about reflecting SMT models back into Lean values and displaying those somehow in the InfoView. It would be great if the FRO built some generic infrastructure for us to hook into for this purpose.</p>",
        "id": 533330517,
        "sender_full_name": "George P√Ærlea",
        "timestamp": 1754585675
    },
    {
        "content": "<p>I'm also curious about what's coming for counterexample generation. It'd be great to have access to both random-input generation based and SMT based approaches. Even more powerful would be a combination of techniques, e.g. instantiating some values and then proving/disproving the remaining statement by a hammer.</p>\n<p>(I've been experimenting with some ideas in counterexample generation for error detection in coding, see e.g. <a href=\"https://gasstationmanager.github.io/ai/2025/05/22/alphabeta-goose.html\">this post</a> )</p>",
        "id": 533370647,
        "sender_full_name": "GasStationManager",
        "timestamp": 1754605144
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"542918\">George P√Ærlea</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/533330517\">said</a>:</p>\n<blockquote>\n<p>Is it just better UX around Plausible?</p>\n</blockquote>\n<p>Take this with a grain of salt, but I think our hope is that a major overhaul of Plausible (not just UX, a complete rebuild of internals) will get us most of the way there.</p>",
        "id": 533375756,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754608834
    },
    {
        "content": "<p>Historical question: Was Plausible already the result of a complete rewrite of the slimcheck internals?</p>",
        "id": 533401835,
        "sender_full_name": "Ya√´l Dillies",
        "timestamp": 1754632773
    },
    {
        "content": "<p>Plausible is mostly a port of slim check back in the very early days of Lean</p>",
        "id": 533403394,
        "sender_full_name": "Henrik B√∂ving",
        "timestamp": 1754633730
    },
    {
        "content": "<p>Early days of Lean 4?</p>",
        "id": 533468535,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754661136
    },
    {
        "content": "<p>Yes</p>",
        "id": 533472989,
        "sender_full_name": "Henrik B√∂ving",
        "timestamp": 1754662664
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"303675\">Anand Rao Tadipatri</span> <a href=\"#narrow/channel/113488-general/topic/Discussion.3A.20Lean.20FRO.20roadmap.2C.20year.203/near/533068936\">said</a>:</p>\n<blockquote>\n<p>I'm glad to see that support for literate programming via a LaTeX-inspired DSL is on the roadmap. Is it reasonable to expect that this can be used to generate blueprints for formalization projects in the future? While the current blueprint framework is already quite fantastic and has been used successfully in many large-scale formalization projects, I think it might be nice to have the added convenience of having the informal text and the Lean code in the same file.</p>\n</blockquote>\n<p>Since it‚Äôs 2025 already, I think the FRO should seriously investigate building things on top of Typst rather than LaTeX. It would probably be much easier anyway. The obvious downside is that currently a lot more people know LaTeX, but we are talking about long term plans here.</p>",
        "id": 533533594,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1754690352
    },
    {
        "content": "<p>I'm really excited about the rust bindings.</p>",
        "id": 533623784,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1754803799
    },
    {
        "content": "<p>With regards to the <code>do</code> notation improvements, one request I have would be a construct for resource lifetime management (like <code>with</code> in Python or <code>try-with-resources</code> in Java) that would work with mutable variables and return like <code>if</code> and <code>for</code>.</p>\n<p>I'm not sure of the exact design, but I'd hope this could work with functions for resource management as well as tracing and other monadic combinators.  e.g., <code>with (let f := File.open ...) do ..</code> and <code>with (profileM </code>name) do`.</p>",
        "id": 536827943,
        "sender_full_name": "Joe Hendrix",
        "timestamp": 1756486213
    },
    {
        "content": "<p>Would this also allow to <code>return</code> from inside something like <code>withLocalDecl type fun fvar =&gt; do ...</code>?</p>",
        "id": 536830513,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1756487224
    },
    {
        "content": "<p>I think that's theoretically feasible, but would require some changes to the <code>withLocalDecl</code>'s interface.  In Python, <code>with</code> is implemented using a <a href=\"https://docs.python.org/3/reference/compound_stmts.html#with\">context manager interface</a>.</p>\n<p>If Lean followed this approach, the idea would roughly be that a function like <code>withLocalDecl type</code> would need to return a value that implements an enter and exit method, and <code>with</code> in Lean would hide the calling of those functions.</p>",
        "id": 536839954,
        "sender_full_name": "Joe Hendrix",
        "timestamp": 1756491143
    },
    {
        "content": "<p>I think Jovan is asking a deeper question about how to make callbacks participate in <code>do</code> flow control</p>",
        "id": 536840375,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1756491316
    },
    {
        "content": "<p>Though maybe the answer is \"frame everything in a way suitable for <code>with</code>\", just as we already do for <code>for</code></p>",
        "id": 536840590,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1756491407
    },
    {
        "content": "<p>8 messages were moved from this topic to <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/With.20notation.20for.20context.20managers/with/536855880\">#general &gt; With notation for context managers</a> by <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>.</p>",
        "id": 536855884,
        "sender_full_name": "Notification Bot",
        "timestamp": 1756498033
    }
]