[
    {
        "content": "<p>given</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">positive</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">negative</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>which is the better way to define neutral?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">neutral</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">positive</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">negative</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">neutral</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">positive</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">negative</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>This is a toy example, I run into this question often</p>",
        "id": 573262665,
        "sender_full_name": "Lhr",
        "timestamp": 1770809702
    },
    {
        "content": "<p>When you want type class instances of the thing on the rhs of your <code>def</code> to be reused for the thing you are defining use <code>abbrev</code>, otherwise don't.</p>",
        "id": 573267019,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1770811120
    },
    {
        "content": "<p>I don't think it is only about typeclass instances. Also <code>simp</code> can often see through <code>abbrev</code>, and you might not want to create a new set of simp lemmas just for a thin layer above.</p>",
        "id": 573268291,
        "sender_full_name": "Mirek Olšák",
        "timestamp": 1770811499
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"395550\">Henrik Böving</span> <a href=\"#narrow/channel/113488-general/topic/when.20to.20use.20abbrev.20over.20def.3F/near/573267019\">said</a>:</p>\n<blockquote>\n<p>When you want type class instances of the thing on the rhs of your <code>def</code> to be reused for the thing you are defining use <code>abbrev</code>, otherwise don't.</p>\n</blockquote>\n<p>Or when you are defining a type and don’t want to have to tell lean that the lhs and rhs are equal by definition when a type check fails</p>",
        "id": 573351124,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1770831822
    }
]