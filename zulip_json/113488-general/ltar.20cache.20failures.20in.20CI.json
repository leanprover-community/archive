[
    {
        "content": "<p>CI <a href=\"https://github.com/leanprover-community/mathlib4/actions/runs/5928141448/job/16073108508#step:6:155\">seems to be failing</a> with</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">thread</span> <span class=\"bp\">'&lt;</span><span class=\"n\">unnamed</span><span class=\"bp\">&gt;'</span> <span class=\"n\">panicked</span> <span class=\"n\">at</span> <span class=\"bp\">'</span><span class=\"n\">called</span> <span class=\"bp\">`</span><span class=\"n\">Result</span><span class=\"o\">::</span><span class=\"n\">unwrap</span><span class=\"o\">()</span><span class=\"bp\">`</span> <span class=\"n\">on</span> <span class=\"n\">an</span> <span class=\"bp\">`</span><span class=\"n\">Err</span><span class=\"bp\">`</span> <span class=\"n\">value</span><span class=\"o\">:</span> <span class=\"n\">Error</span> <span class=\"o\">{</span> <span class=\"n\">kind</span><span class=\"o\">:</span> <span class=\"n\">UnexpectedEof</span><span class=\"o\">,</span> <span class=\"n\">message</span><span class=\"o\">:</span> <span class=\"s2\">\"failed to fill whole buffer\"</span> <span class=\"o\">}</span><span class=\"bp\">'</span><span class=\"o\">,</span> <span class=\"bp\">/</span><span class=\"n\">project</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">ltar.rs</span><span class=\"o\">:</span><span class=\"mi\">57</span><span class=\"o\">:</span><span class=\"mi\">34</span>\n<span class=\"n\">note</span><span class=\"o\">:</span> <span class=\"n\">run</span> <span class=\"k\">with</span> <span class=\"bp\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"bp\">`</span> <span class=\"n\">environment</span> <span class=\"kd\">variable</span> <span class=\"n\">to</span> <span class=\"n\">display</span> <span class=\"n\">a</span> <span class=\"n\">backtrace</span>\n<span class=\"n\">thread</span> <span class=\"bp\">'&lt;</span><span class=\"n\">unnamed</span><span class=\"bp\">&gt;'</span> <span class=\"n\">panicked</span> <span class=\"n\">at</span> <span class=\"bp\">'</span><span class=\"n\">called</span> <span class=\"bp\">`</span><span class=\"n\">Result</span><span class=\"o\">::</span><span class=\"n\">unwrap</span><span class=\"o\">()</span><span class=\"bp\">`</span> <span class=\"n\">on</span> <span class=\"n\">an</span> <span class=\"bp\">`</span><span class=\"n\">Err</span><span class=\"bp\">`</span> <span class=\"n\">value</span><span class=\"o\">:</span> <span class=\"n\">Error</span> <span class=\"o\">{</span> <span class=\"n\">kind</span><span class=\"o\">:</span> <span class=\"n\">UnexpectedEof</span><span class=\"o\">,</span> <span class=\"n\">message</span><span class=\"o\">:</span> <span class=\"s2\">\"failed to fill whole buffer\"</span> <span class=\"o\">}</span><span class=\"bp\">'</span><span class=\"o\">,</span> <span class=\"bp\">/</span><span class=\"n\">project</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">ltar.rs</span><span class=\"o\">:</span><span class=\"mi\">57</span><span class=\"o\">:</span><span class=\"mi\">34</span>\n<span class=\"n\">thread</span> <span class=\"bp\">'&lt;</span><span class=\"n\">unnamed</span><span class=\"bp\">&gt;'</span> <span class=\"n\">panicked</span> <span class=\"n\">at</span> <span class=\"bp\">'</span><span class=\"n\">called</span> <span class=\"bp\">`</span><span class=\"n\">Result</span><span class=\"o\">::</span><span class=\"n\">unwrap</span><span class=\"o\">()</span><span class=\"bp\">`</span> <span class=\"n\">on</span> <span class=\"n\">an</span> <span class=\"bp\">`</span><span class=\"n\">Err</span><span class=\"bp\">`</span> <span class=\"n\">value</span><span class=\"o\">:</span> <span class=\"n\">Error</span> <span class=\"o\">{</span> <span class=\"n\">kind</span><span class=\"o\">:</span> <span class=\"n\">UnexpectedEof</span><span class=\"o\">,</span> <span class=\"n\">message</span><span class=\"o\">:</span> <span class=\"s2\">\"failed to fill whole buffer\"</span> <span class=\"o\">}</span><span class=\"bp\">'</span><span class=\"o\">,</span> <span class=\"bp\">/</span><span class=\"n\">project</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">ltar.rs</span><span class=\"o\">:</span><span class=\"mi\">57</span><span class=\"o\">:</span><span class=\"mi\">34</span>\n<span class=\"n\">thread</span> <span class=\"bp\">'&lt;</span><span class=\"n\">unnamed</span><span class=\"bp\">&gt;'</span> <span class=\"n\">panicked</span> <span class=\"n\">at</span> <span class=\"bp\">'</span><span class=\"n\">called</span> <span class=\"bp\">`</span><span class=\"n\">Result</span><span class=\"o\">::</span><span class=\"n\">unwrap</span><span class=\"o\">()</span><span class=\"bp\">`</span> <span class=\"n\">on</span> <span class=\"n\">an</span> <span class=\"bp\">`</span><span class=\"n\">Err</span><span class=\"bp\">`</span> <span class=\"n\">value</span><span class=\"o\">:</span> <span class=\"n\">Error</span> <span class=\"o\">{</span> <span class=\"n\">kind</span><span class=\"o\">:</span> <span class=\"n\">UnexpectedEof</span><span class=\"o\">,</span> <span class=\"n\">message</span><span class=\"o\">:</span> <span class=\"s2\">\"failed to fill whole buffer\"</span> <span class=\"o\">}</span><span class=\"bp\">'</span><span class=\"o\">,</span> <span class=\"bp\">/</span><span class=\"n\">project</span><span class=\"bp\">/</span><span class=\"n\">src</span><span class=\"bp\">/</span><span class=\"n\">ltar.rs</span><span class=\"o\">:</span><span class=\"mi\">57</span><span class=\"o\">:</span><span class=\"mi\">34</span>\n</code></pre></div>",
        "id": 386416856,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1692631036
    },
    {
        "content": "<p>This just happened in two bors runs (admittedly one was a rerun of the same PR).</p>",
        "id": 386433706,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1692635626
    },
    {
        "content": "<p>I noticed that just rerunning the failed task doesnâ€™t work, you have to redo everything for it to fix itself</p>",
        "id": 386433852,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1692635680
    },
    {
        "content": "<p>Do we understand what is going on here? It's totally opaque to me.</p>",
        "id": 386434015,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1692635747
    },
    {
        "content": "<p>That error message means that the <code>.ltar</code> file was truncated in the middle</p>",
        "id": 386479504,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1692654117
    },
    {
        "content": "<p>usually this happens when the download fails or is cancelled and the cleanup doesn't work for some reason</p>",
        "id": 386479570,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1692654144
    },
    {
        "content": "<p>although it could also be that the cache file uploaded to the server was truncated</p>",
        "id": 386479604,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1692654170
    },
    {
        "content": "<p>Can there be some sort of checksum at the start of ltar files or something to check that the file isn't corrupted / truncated and emit a good error message / redownload in that case?</p>",
        "id": 386485000,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1692657528
    }
]