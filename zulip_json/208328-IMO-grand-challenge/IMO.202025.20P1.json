[
    {
        "content": "<p>Has anyone tried manually formalizing P1? Especially in a way that first captures only colinearity and then shows that the given subset of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> models this relation?</p>",
        "id": 529795625,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1753085642
    },
    {
        "content": "<p>(<code>Configuration.HasLines</code> ?)</p>",
        "id": 529822975,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1753090133
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110789\">@Jakob von Raumer</span> you mean a solution to P1?</p>",
        "id": 529847649,
        "sender_full_name": "Jason Rute",
        "timestamp": 1753094127
    },
    {
        "content": "<p>Uh, yes</p>",
        "id": 529871879,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1753097807
    },
    {
        "content": "<p>No, but I did do ~half of P3: <a href=\"https://github.com/leanprover-community/mathlib4/compare/master...imo2025-3\">https://github.com/leanprover-community/mathlib4/compare/master...imo2025-3</a><br>\nThis took me about 2.5 hours, already starting from a non-formalized solution. (This is a much worse problem statement than given by Joseph Myers.)</p>",
        "id": 529893520,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1753105200
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110789\">Jakob von Raumer</span> <a href=\"#narrow/channel/208328-IMO-grand-challenge/topic/IMO.202025.20problem.20statements/near/529795625\">said</a>:</p>\n<blockquote>\n<p>Has anyone tried manually formalizing P1? Especially in a way that first captures only colinearity and then shows that the given subset of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> models this relation?</p>\n</blockquote>\n<p>I have been working on a solution for Numina over the past week, but it's been a bit of a slog, I am about 400 lines in, but most of the finicky-seeming edges cases aren't done yet. <span aria-label=\"oh no\" class=\"emoji emoji-1f615\" role=\"img\" title=\"oh no\">:oh_no:</span> I haven't tried anything particularly complicated in terms of modelling collinearity relationships precisely.</p>",
        "id": 529949805,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1753124193
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"282271\">@Bolton Bailey</span> Uploaded the start of my attempt <a href=\"https://gist.github.com/javra/f4fa2ce94920f6fbed272a8e99a5aa64\">here</a>. I think it would be nice to have a full proof of this in the archive as a benchmark for this kind of geometric combinatorics problem. Not sure when I'll find the time to continue on this. Showing that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">k=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span> is impossible for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">n = 3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span></span></span></span> is already not that easy.</p>",
        "id": 530538546,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1753357323
    },
    {
        "content": "<p>6 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"208328\" href=\"/#narrow/channel/208328-IMO-grand-challenge/topic/IMO.202025.20problem.20statements/with/529446378\">#IMO-grand-challenge &gt; IMO 2025 problem statements</a> by <span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span>.</p>",
        "id": 530547236,
        "sender_full_name": "Notification Bot",
        "timestamp": 1753359267
    },
    {
        "content": "<p>This is not human formalized, but the seed prover AI proof for P1 has been posted here if it helps: <a href=\"https://github.com/ByteDance-Seed/Seed-Prover/blob/main/SeedProver/imo2025/p1.lean\">https://github.com/ByteDance-Seed/Seed-Prover/blob/main/SeedProver/imo2025/p1.lean</a></p>",
        "id": 530547561,
        "sender_full_name": "Jason Rute",
        "timestamp": 1753359336
    },
    {
        "content": "<p>Yes, I saw that it actually manages to exclude the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">k = 2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span> case</p>",
        "id": 530548169,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1753359475
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/channel/208328-IMO-grand-challenge/topic/IMO.202025.20P1/near/530547561\">said</a>:</p>\n<blockquote>\n<p>This is not human formalized, but the seed prover AI proof for P1 has been posted here if it helps: <a href=\"https://github.com/ByteDance-Seed/Seed-Prover/blob/main/SeedProver/imo2025/p1.lean\">https://github.com/ByteDance-Seed/Seed-Prover/blob/main/SeedProver/imo2025/p1.lean</a></p>\n</blockquote>\n<p>Did the AI come up with the formalization of the problem statement here? Distinguishing between functions and verticals might actually be the best choice here.</p>",
        "id": 530731721,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1753435476
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110789\">Jakob von Raumer</span> <a href=\"#narrow/channel/208328-IMO-grand-challenge/topic/IMO.202025.20P1/near/530731721\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"115715\">Jason Rute</span> <a href=\"#narrow/channel/208328-IMO-grand-challenge/topic/IMO.202025.20P1/near/530547561\">said</a>:</p>\n<blockquote>\n<p>This is not human formalized, but the seed prover AI proof for P1 has been posted here if it helps: <a href=\"https://github.com/ByteDance-Seed/Seed-Prover/blob/main/SeedProver/imo2025/p1.lean\">https://github.com/ByteDance-Seed/Seed-Prover/blob/main/SeedProver/imo2025/p1.lean</a></p>\n</blockquote>\n<p>Did the AI come up with the formalization of the problem statement here? Distinguishing between functions and verticals might actually be the best choice here.</p>\n</blockquote>\n<p>human formalized problem statement, AI prove it</p>",
        "id": 530795838,
        "sender_full_name": "Zheng Yuan",
        "timestamp": 1753456213
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"266253\">@Joseph Myers</span> Do you think it's good to have lemmas like this one in mathlib? (Maybe generalized to points instead of <code>!‚ÇÇ[x‚ÇÄ, y‚ÇÄ]</code>)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">mem_line_iff</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x‚ÇÄ</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÄ</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÄ</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚à®</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÄ</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"o\">[</span><span class=\"n\">‚Ñù</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">!‚ÇÇ</span><span class=\"o\">[</span><span class=\"n\">x‚ÇÄ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÄ</span><span class=\"o\">],</span><span class=\"w\"> </span><span class=\"bp\">!‚ÇÇ</span><span class=\"o\">[</span><span class=\"n\">x‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÅ</span><span class=\"o\">]]</span><span class=\"w\"> </span><span class=\"bp\">‚Üî</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÄ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÄ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÄ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÄ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>They make my life much easier solving this problem and I couldn't find anything like this in mathlib. Same for equalities of lines, colinearity of points, ...</p>",
        "id": 530837587,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1753472429
    },
    {
        "content": "<p>There have been comments before about the difficulty in applying abstract mathlib geometry to concrete expressions with coordinates. I think it's reasonable to add such lemmas for use in applications (probably not going to be used much in mathlib itself since mathlib lemmas are generally for an arbitrary affine space). The above statement should work for any <code>Fin 2 ‚Üí ùïú</code> for a field <code>ùïú</code> (using <code>![...]</code> in that case, of course), with the <code>EuclideanSpace</code> / <code>!‚ÇÇ[...]</code> lemma then being a variant for that specific case (the two statements should be defeq, but users should avoid abusing that defeq, so both statements should be provided).</p>",
        "id": 530868680,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1753489285
    },
    {
        "content": "<p>A previous discussion concerned computing angles with a concrete orientation of <code>EuclideanSpace</code>, and I think that definitely showed up missing lemmas as well.</p>",
        "id": 530869194,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1753489642
    },
    {
        "content": "<p>There may be scope for slightly more abstract versions of the lemmas where you're given a <code>Fin 2</code> basis of a space rather than making it literally one of the two concrete spaces referred to above, but the versions with <code>Fin 2 ‚Üí ùïú</code> and <code>EuclideanSpace</code> make sense as well.</p>",
        "id": 530869416,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1753489796
    },
    {
        "content": "<p>Thank you for your comments! Will see when I find the time to complete the formalization of the solution, will PR the helper lemmas then</p>",
        "id": 530909754,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1753516042
    },
    {
        "content": "<p>Created a WIP PR at <a href=\"https://github.com/leanprover-community/mathlib4/pull/27813\">#27813</a> for this. Happy to receive feedback, there's a few geometric sorries and one combinatoric sorry left. I mostly stuck to the problem statement given by <span class=\"user-mention\" data-user-id=\"266253\">@Joseph Myers</span></p>",
        "id": 532285263,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1754047622
    },
    {
        "content": "<p>Will move some of the preliminaries to their own PRs once it's fleshed out</p>",
        "id": 532285364,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1754047649
    },
    {
        "content": "<p>Hi I am a new contributor and I have made a PR with the solution: <br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/27817\">https://github.com/leanprover-community/mathlib4/pull/27817</a><br>\nIt would be best to have an API for  hyperplanes in n-dimensional vector spaces, dimensions of hyperplanes, (hyper)-colinarity, etc., in mathlib, and use that API. If necessary, I will be happy to contribute to the relevant parts of mathlib.</p>",
        "id": 532296127,
        "sender_full_name": "Yizheng Zhu",
        "timestamp": 1754051347
    },
    {
        "content": "<p>Let's first pull out all the preliminaries about the plane then, your file seems more complete than mine in that aspect! Then we can afterwards see how we can patch together the most succint proof of the problem from our files <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span></p>",
        "id": 532297405,
        "sender_full_name": "Jakob von Raumer",
        "timestamp": 1754051775
    },
    {
        "content": "<p>Both PRs have lemmas such as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">point_sub</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">!‚ÇÇ</span><span class=\"o\">[</span><span class=\"n\">x‚ÇÅ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÅ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"bp\">!‚ÇÇ</span><span class=\"o\">[</span><span class=\"n\">x‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÇ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">!‚ÇÇ</span><span class=\"o\">[</span><span class=\"n\">x‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x‚ÇÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">y‚ÇÇ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">fin_cases</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n</code></pre></div>\n<p>or</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">vec_mul</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\"> </span><span class=\"bp\">!‚ÇÇ</span><span class=\"o\">[</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">!‚ÇÇ</span><span class=\"o\">[</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">fin_cases</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n</code></pre></div>\n<p>that are meaningful for vectors with explicit coordinates in any number of dimensions, not just two dimensions. Maybe that means they should actually be implemented as simprocs (and also implemented to work with other subscripts, not just 2, i.e. for <code>WithLp.toLp</code> in general, though other subscripts would probably be rarely used).</p>\n<p>(Note: I've never written a simproc, but there's a guide to them on the community blog. There may also be other approaches not involving simprocs to allow such lemmas to apply for any number of coordinates.)</p>",
        "id": 532362607,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1754074771
    },
    {
        "content": "<p>I have a PR open that works towards these; in the meantime both statements can be proved with <code>FinVec.etaExpand_eq _ |&gt;.symm</code></p>",
        "id": 532449281,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754137063
    },
    {
        "content": "<p>I think it might be preferable to use what I'm calling a \"rw_proc\", which eschews the <code>simp</code> machinery in favor of abusing autoParams, and works in <code>rw</code> as a result</p>",
        "id": 532449406,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754137133
    }
]