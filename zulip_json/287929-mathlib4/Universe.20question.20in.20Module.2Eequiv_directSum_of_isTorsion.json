[
    {
        "content": "<p>The <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Module.equiv_directSum_of_isTorsion#doc\">docs#Module.equiv_directSum_of_isTorsion</a> is the structure theorem of finitely generated torsion module <code>N</code> over PID <code>R</code>. The <code>R</code> is at universe level <code>u</code>, but the <code>N</code> is at universe level <code>max u v</code> which seems strange to me. Doesn't it work if <code>N</code> is only at universe level <code>v</code>? Any reason behind it?</p>",
        "id": 514603514,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745724822
    },
    {
        "content": "<p>Seems that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=lequivProdOfRightSplitExact#doc\">docs#lequivProdOfRightSplitExact</a> is faulty as it is of same-universe. Its construction relies on category theory so it can only be same-universe version. It also doesn't have <code>apply</code> simps lemmas. Personally I think we shouldn't depend on category theory on such simple results, the one is that we can have universe polymorphic versions for them, and we can have <code>apply</code> simps lemmas for them.</p>",
        "id": 514605044,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745726112
    },
    {
        "content": "<p>Now I'm trying to decipher <a href=\"https://github.com/leanprover-community/mathlib4/blob/99dfc6ca1575c39bc68769e61409965d8b9ac3f1/Mathlib/Algebra/Module/PID.lean#L198-L209\">https://github.com/leanprover-community/mathlib4/blob/99dfc6ca1575c39bc68769e61409965d8b9ac3f1/Mathlib/Algebra/Module/PID.lean#L198-L209</a> ...</p>",
        "id": 514605221,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745726281
    },
    {
        "content": "<p>OK I think I have a cheap solution: if <code>N : Type v</code> then its lifting to <code>Type max u v</code> satisfies the condition of the original result, but this lifting is isomorphic so we are done. <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 514613790,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745733609
    },
    {
        "content": "<p>PR created as <a href=\"https://github.com/leanprover-community/mathlib4/pull/24403\">#24403</a>.</p>",
        "id": 514614484,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745734134
    },
    {
        "content": "<p>Conversely if N is f.g. over R then N is isomorphic to a quotient of R^n so there is something isomorphic to N in R's universe <code>u</code>, namely R^n / (kernel of the surjection)</p>",
        "id": 514620101,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745738977
    },
    {
        "content": "<p>I will make the bold statement that for FLT all this use of universes is just noise and we could get away with doing all algebra in universe 0, although it will still be helpful to have multi-universe category theory because sometimes you go up to a higher universe and then use tricks like the ones we're using to go back to universe 0</p>",
        "id": 514620208,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745739066
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Universe.20question.20in.20Module.2Eequiv_directSum_of_isTorsion/near/514620101\">said</a>:</p>\n<blockquote>\n<p>Conversely if N is f.g. over R then N is isomorphic to a quotient of R^n so there is something isomorphic to N in R's universe <code>u</code>, namely R^n / (kernel of the surjection)</p>\n</blockquote>\n<p>Yes we have this result <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Module.Finite.small#doc\">docs#Module.Finite.small</a></p>\n<blockquote>\n<p>I will make the bold statement that for FLT all this use of universes is just noise and we could get away with doing all algebra in universe 0</p>\n</blockquote>\n<p>I think you need universe 1 if you want to talk about Grothendieck group (K, K_0, K_1 etc) of some abelian category over universe 0. But it is (canonically?) isomorphic to some object in universe 0, so it's still OK.</p>",
        "id": 514625789,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745743777
    },
    {
        "content": "<p>Right -- I think it's important to allow higher universes in category theory, and have theorems saying things like \"you computed the etale cohomology of projective n-space by taking a large limit which means that it has great functoriality properties but it's in Type 1, fortunately here's a theorem which says that there's a group in Type 0 which it's isomorphic to and hopefully the diagrams commute\". But away from category theory I wonder whether we need any types other than Type 0 to do, say, 90% of the remainder of mathlib.</p>",
        "id": 514625977,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745743960
    },
    {
        "content": "<p>I found a nicer solution that doesn't require modifying <code>equiv_directSum_of_isTorsion</code> at all, <a href=\"https://github.com/leanprover-community/mathlib4/pull/24419\">#24419</a></p>",
        "id": 514678315,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745783415
    },
    {
        "content": "<p>Though this all seems a bit fishy to me; shouldn't <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=lequivProdOfRightSplitExact#doc\">docs#lequivProdOfRightSplitExact</a> come with some lemma that characterizes what the module isomorphism is?</p>",
        "id": 514678994,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745783959
    },
    {
        "content": "<p>My suspicious is that by the time we've proved that, the category theory route to the proof is an unecessary detour</p>",
        "id": 514679017,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745783985
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Universe.20question.20in.20Module.2Eequiv_directSum_of_isTorsion/near/514678994\">said</a>:</p>\n<blockquote>\n<p>Though this all seems a big fishy to me; shouldn't <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=lequivProdOfRightSplitExact#doc\">docs#lequivProdOfRightSplitExact</a> come with some lemma that characterizes what the module isomorphism is?</p>\n</blockquote>\n<p>Yes that was my original plan. Will look at it later.</p>",
        "id": 514694582,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745796498
    }
]