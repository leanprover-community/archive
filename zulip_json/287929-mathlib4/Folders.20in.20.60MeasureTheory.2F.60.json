[
    {
        "content": "<p>Motivated by <span class=\"user-mention\" data-user-id=\"350992\">@Rémy Degenne</span> 's comment in <a href=\"https://github.com/leanprover-community/mathlib4/pull/16205\">#16205</a>. How do folders in <code>MeasureTheory/</code> work? Should <code>MeasurableSpace/</code> contain everything about σ-algebras? If yes, then we should move more stuff (e.g., parts of <code>Constructions/Borel</code>) there. If no, then where's the line between \"goes to <code>MeasurableSpace/</code>\" and \"goes to <code>Constructions/</code>, <code>Function/</code> etc\"?</p>",
        "id": 467256249,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725370189
    },
    {
        "content": "<p>I personally don't understand the current folder system at all. Eg we have <code>MeasurableSpace.Defs</code> but also <code>MeasureSpaceDef</code>, and the latter contains very little about <code>MeasureSpace</code> as it's instead about <code>Measure</code></p>",
        "id": 467264795,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1725372126
    },
    {
        "content": "<p><code>MeasureSpaceDef</code> is the result of an old split (before we decided to have .Defs or .Basic files) of <code>MeasureSpace</code> (which has always been more about <code>Measure</code>) into two files: one that contained only basic facts and was imported by the <code>measurability</code> tactic, and another one that could use that tactic.<br>\nThe tactic changed a lot and that split might not even be useful anymore. I agree that the file name is strange in any case.</p>",
        "id": 467266593,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1725372570
    },
    {
        "content": "<p>My understanding of the MeasurableSpace folder was that it was supposed to contain only properties of the spaces, not of functions defined on them (those go to the folder Function). The scope of Constructions is a bit unclear to me as well.</p>",
        "id": 467267501,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1725372799
    },
    {
        "content": "<p>I suggest that we clearly split theory about σ-algebras from theory about measures.</p>",
        "id": 467308319,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725381257
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"350992\">Rémy Degenne</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Folders.20in.20.60MeasureTheory.2F.60/near/467266593\">said</a>:</p>\n<blockquote>\n<p><code>MeasureSpace</code> (which has always been more about <code>Measure</code>)</p>\n</blockquote>\n<p>Before <a href=\"https://github.com/leanprover-community/mathlib/pull/3373\">!3#3373</a> many parts of the library (e.g., integrals) assumed <code>[measure_space _]</code> instead of <code>[measurable_space α] (μ : measure α)</code> and assumed that the only interesting measure is <code>volume</code>.</p>",
        "id": 467309679,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725381661
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"350992\">Rémy Degenne</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Folders.20in.20.60MeasureTheory.2F.60/near/467267501\">said</a>:</p>\n<blockquote>\n<p>My understanding of the MeasurableSpace folder was that it was supposed to contain only properties of the spaces, not of functions defined on them (those go to the folder Function). The scope of Constructions is a bit unclear to me as well.</p>\n</blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Measurable#doc\">docs#Measurable</a> is defined in <code>MeasurableSpace/Defs</code> and measurability of functions like <code>Prod.fst</code> is proved in <code>MeasurableSpace/Basic</code>.</p>",
        "id": 467309997,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725381740
    },
    {
        "content": "<p>Well yes, those lemmas are in there, but I'd say more for historical reasons than anything else. When someone (Floris?) changed MeasureTheory from one folder with many files and zero sub-folders to something more organized, the MeasurableSpace folder did not exist and the reorganization left the file MeasurableSpace.lean (or perhaps it was already two files) outside of any sub-folder, with many basic definitions for measure theory. Then more recently someone created a MeasurableSpace folder and the content of the MeasurableSpace file(s) ended up in there.</p>\n<p>Anyway, my point is that the different folders we have are not the result of one phase of design with clear specification for the contents of each folder, but the result of several successive moves as the library grew, each of which mostly kept together the lemmas that happened to be in the same file. Thus I also don't want to claim that I know clearly what should go where. That's why my comment on your PR was that ultimately you could choose what you thought was best.</p>\n<p>If someone wants to spend time reorganizing everything in MeasureTheory with a clear scope for each sub-folder, that would be nice (but that's a lot of work).</p>",
        "id": 467324789,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1725385727
    },
    {
        "content": "<p>I can start reorganizing, but we need to agree on the goal first. I suggest that we separate theory about <code>[MeasurableSpace α]</code> from theory about <code>[MeasurableSpace α] {μ : Meausre α}</code>, because the latter usually needs more dependencies.</p>",
        "id": 467325350,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725385860
    },
    {
        "content": "<p>That sounds like a good first split.</p>",
        "id": 467326788,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1725386213
    },
    {
        "content": "<p>Then I'll merge the PR as is, then start moving stuff that doesn't depend on <code>Measure</code> to <code>MeasurableSpace/</code>.</p>",
        "id": 467327259,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1725386320
    }
]