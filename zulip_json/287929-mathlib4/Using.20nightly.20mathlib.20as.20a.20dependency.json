[
    {
        "content": "<p>We are <a href=\"https://github.com/opencompl/lean-mlir/blob/main/lakefile.toml#L6-L9\">using</a> nightly versions of mathlib as a dependency, but a <a href=\"https://github.com/leanprover-community/mathlib4-nightly-testing/commit/135bc017f183036f6ba32c5a298e3c6ffe8c5972\">recent change</a> to the <code>cache</code> program broke this use case (cf <a href=\"https://github.com/leanprover-community/mathlib4/issues/28594\">this issue</a>)</p>\n<p>What is the best way forward for this use case?</p>\n<p>cc <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span></p>",
        "id": 534971633,
        "sender_full_name": "Leo Stefanesco",
        "timestamp": 1755529711
    },
    {
        "content": "<p>I was thinking that one possibility would be to put the new behavior behind an environment variable, since it's only going to be used by advanced users.</p>\n<p>What do you think <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>?</p>",
        "id": 535995567,
        "sender_full_name": "Leo Stefanesco",
        "timestamp": 1756117529
    },
    {
        "content": "<p>Ping <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span></p>",
        "id": 540750274,
        "sender_full_name": "Leo Stefanesco",
        "timestamp": 1758533115
    },
    {
        "content": "<p>By the way, I have also found that I cannot get cache from adaptation branches in <a href=\"https://github.com/leanprover-community/mathlib4-nightly-testing\">mathlib4-nightly-testing</a>, which is kind of annoying. And <code>!bench</code> also doesn't work there.</p>",
        "id": 540813543,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1758549901
    },
    {
        "content": "<p>I opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/29935\">this PR</a> which hopefully fixes my issue by only enabling the new behavior when ran from the mathlib repo itself.</p>",
        "id": 541187768,
        "sender_full_name": "Leo Stefanesco",
        "timestamp": 1758707572
    },
    {
        "content": "<p>I don't know if it also fixes <span class=\"user-mention\" data-user-id=\"479299\">@Jovan Gerbscheid</span>'s issue</p>",
        "id": 541187811,
        "sender_full_name": "Leo Stefanesco",
        "timestamp": 1758707587
    },
    {
        "content": "<p>Sorry about the very slow response here. I've started another discussion about this issue at <a href=\"#narrow/channel/536994-ecosystem-infrastructure/topic/.60cache.20get.60.20fails.20when.20depending.20on.20Mathlib.20nightly-testing\">#ecosystem infrastructure &gt; &#96;cache get&#96; fails when depending on Mathlib nightly-testing</a> , and proposed a different fix in <a href=\"https://github.com/leanprover-community/mathlib4/pull/30571\">#30571</a>.</p>",
        "id": 544874587,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1760502895
    }
]