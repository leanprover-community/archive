[
    {
        "content": "<p>In the CGT repo, I've had a lot of success adding the following line:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">attribute</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"n\">aesop</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">coeff_one</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">coeff_C</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">coeff_X</span>\n</code></pre></div>\n<p>These lemmas all rewrite an expression in terms of an <code>if</code>, e.g. <code>coeff_one : coeff 1 n = if n = 0 then 1 else 0</code>. They make pretty terrible <code>simp</code> lemmas, but I think they make great <code>aesop simp</code> lemmas, since <code>aesop</code> is then able to split the resulting <code>if</code> statements, and it's often able to prove both cases of whatever remains separately.</p>\n<p>Would it be desirable to upstream these attributes (and similar attributes for similar lemmas) to Mathlib?</p>",
        "id": 537980717,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1757140950
    },
    {
        "content": "<p>Does <code>aesop</code> apply these lemmas even if it can't make progress?</p>",
        "id": 537990888,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1757152434
    },
    {
        "content": "<p><code>aesop</code> first applies any lemmas tagged <code>simp</code> or <code>aesop simp</code>, then continues onto its other stages.</p>",
        "id": 537990981,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1757152549
    },
    {
        "content": "<p>I'm curious if you've tried using <code>grind</code> here. We tend to happily (indeed encourage) tag <code>@[grind =]</code> lemmas that create an if on the RHS, as grind is happy to case split.</p>",
        "id": 538959270,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1757635646
    },
    {
        "content": "<p>I haven't! I'll have to learn that tactic sooner than later.</p>",
        "id": 539059384,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1757682034
    }
]