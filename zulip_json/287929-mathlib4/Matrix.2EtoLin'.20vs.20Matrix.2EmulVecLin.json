[
    {
        "content": "<p>Which one of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.mulVecLin#doc\">docs#Matrix.mulVecLin</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.toLin%27#doc\">docs#Matrix.toLin'</a> is supposed to be the normal form for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.mulVec#doc\">docs#Matrix.mulVec</a> as a linear map?</p>",
        "id": 515131201,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745950698
    },
    {
        "content": "<p>Note that <code>toLin'</code> has an extra <code>DecidableEq</code> assumption that is only needed for the <code>invFun</code> part of the equivalence.</p>",
        "id": 515131281,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745950727
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> Matrix.toLin'</p>",
        "id": 515131620,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745950854
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/Matrix/ToLin.html#Matrix.toLin%27\">Matrix.toLin'</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/Matrix/ToLin.html#Matrix.toLin_eq_toLin%27\">Matrix.toLin_eq_toLin'</a>, and <a href=\"https://loogle.lean-lang.org/?q=Matrix.toLin%27\">61 more</a></p>",
        "id": 515131624,
        "sender_full_name": "loogle",
        "timestamp": 1745950855
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> Matrix.mulVecLin</p>",
        "id": 515131649,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745950865
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/Matrix/ToLin.html#Matrix.mulVecLin\">Matrix.mulVecLin</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/Matrix/ToLin.html#Matrix.mulVecLin_transpose\">Matrix.mulVecLin_transpose</a>, and <a href=\"https://loogle.lean-lang.org/?q=Matrix.mulVecLin\">20 more</a></p>",
        "id": 515131652,
        "sender_full_name": "loogle",
        "timestamp": 1745950866
    },
    {
        "content": "<p>The unbundled one should be the normal form I think</p>",
        "id": 515154193,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745959429
    },
    {
        "content": "<p>Then I'll make a PR adding the missing <code>simp</code> lemmas and replacing <code>toLin'</code> with <code>mulVecLin</code>.</p>",
        "id": 515163220,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745963167
    },
    {
        "content": "<p>BTW, should we have a <code>def</code> for matrix nullity?</p>",
        "id": 515163243,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745963180
    },
    {
        "content": "<p>We have one for rank, but for nullity we use the <code>finrank</code> of the kernel of <code>mulVecLin</code> (or <code>toLin'</code>)</p>",
        "id": 515163276,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745963202
    },
    {
        "content": "<p>(in fact, we have 3 <code>def</code>s for <code>rank</code> with different codomains)</p>",
        "id": 515163319,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745963223
    },
    {
        "content": "<p>I think <span class=\"user-mention\" data-user-id=\"329425\">@Peter Nelson</span> was in the process of refactoring matrix ranks to remove finiteness conditions</p>",
        "id": 515182224,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745974149
    },
    {
        "content": "<p>Remove in which sense?</p>",
        "id": 515182274,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745974194
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.rank#doc\">docs#Matrix.rank</a></p>",
        "id": 515182333,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745974210
    },
    {
        "content": "<p>I see, it assumes fintype for no reason. It should be just <code>m.crank.toNat</code></p>",
        "id": 515182449,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745974277
    },
    {
        "content": "<p>But this refactor is orthogonal to my question</p>",
        "id": 515182475,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745974299
    },
    {
        "content": "<p>(it was in response to your parenthetical)</p>",
        "id": 515184119,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1745975208
    },
    {
        "content": "<p>After the refactor, we may still have 3 versions with codomains <code>Cardinal</code>, <code>ENat</code>, and <code>Nat</code>, but <code>Nat</code> version probably won't assume <code>Fintype</code>.</p>",
        "id": 515187954,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745977773
    },
    {
        "content": "<p>UPD: wait, we need <code>Fintype</code> to define <code>mulVec</code>, scratch that.</p>",
        "id": 515188001,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745977802
    },
    {
        "content": "<p>Or do you want to redefine <code>Matrix.rank</code> as the rank of the submodule generated by the columns without <code>mulVec</code>?</p>",
        "id": 515188178,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745977903
    },
    {
        "content": "<p>You donâ€™t need <code>mulVec</code> for rank. It is the dimension of the row or column span.</p>",
        "id": 515188179,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1745977905
    },
    {
        "content": "<p>I see.</p>",
        "id": 515188548,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745978144
    }
]