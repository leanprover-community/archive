[
    {
        "content": "<p>We have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=induced_iInf#doc\">docs#induced_iInf</a>, tagged <code>@[simp]</code>, meaning that the simp normal form for <code>induced g (⨅ i, t i)</code> is <code>⨅ i, induced g (t i)</code>.</p>\n<p>We apparently have no such lemma for <code>sInf</code> though:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Order</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">@[simp]</span>\n<span class=\"cm\">theorem induced_iInf {ι : Sort w} {t : ι → TopologicalSpace α} :</span>\n<span class=\"cm\">    (⨅ i, t i).induced g = ⨅ i, (t i).induced g := ...</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">induced</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⨅</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⊥</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ ⨅ i, induced g (t i) = ⊥</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n\n<span class=\"c1\">-- no corresponding lemma for sInf though</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">induced</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sInf</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⊥</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"c1\">-- simp made no progress</span>\n</code></pre></div>\n<p>The proof of <code>induced_iInf</code> is <code>(gc_coinduced_induced g).u_iInf</code>, and the analogous <code>u_sInf</code> lemma <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=GaloisConnection.u_sInf#doc\">docs#GaloisConnection.u_sInf</a> would rewrite <code>induced g (sInf s)</code> to <code>⨅ a ∈ s, induced g a</code>. In the application this came up with, I wanted the answer to be <code>sInf ((induced g) '' s)</code>. Whether or not this is the simp normal form doesn't really bother me, but what bothers me is that I need to prove <code>induced_sInf</code> but right now I don't know whether it should say</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">induced_sInf</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">induced</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sInf</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">sInf</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">induced</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">''</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sInf_eq_iInf'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sInf_image'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">induced_iInf</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>or</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">induced_sInf'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">induced</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">sInf</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⨅</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">induced</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[(</span><span class=\"n\">gc_coinduced_induced</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">u_sInf</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>and I also don't know whether it should be <code>@[simp]</code> or not. This was brought up <a href=\"https://github.com/leanprover-community/mathlib4/pull/16895/files#r1764095027\">here</a> (which was my application) and I guess this is the question which is blocking progress here. Does anyone have an opinion on this? <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> or <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span>  maybe?</p>",
        "id": 472676441,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727264611
    },
    {
        "content": "<p>The <code>⨅ a ∈ s, _</code>  spelling is the preferred one</p>",
        "id": 472676650,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727264675
    },
    {
        "content": "<p>My argument for why we should prefer the <code>sInf (f '' s)</code> spelling is that we can also uses it in conditionally-complete lattices; so a more universally-applicable rule is \"use <code>sInf</code> on the RHS if you used it on the LHS\".</p>",
        "id": 472678224,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727265163
    },
    {
        "content": "<p>Good point. I also like the spelling <code>⨅ a ∈ s, _</code> better myself, but it's a footgun in conditionally-complete lattices.</p>",
        "id": 472681713,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1727266331
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/normal.20form.20for.20pullback.20of.20Inf.20of.20topologies/near/472678224\">said</a>:</p>\n<blockquote>\n<p>My argument for why we should prefer the <code>sInf (f '' s)</code> spelling is that we can also uses it in conditionally-complete lattices; so a more universally-applicable rule is \"use <code>sInf</code> on the RHS if you used it on the LHS\".</p>\n</blockquote>\n<p>But this is a question specifically about topological spaces, which are a complete lattice. Does this make any difference here?</p>\n<p>I really don't have an opinion on this stuff, I just thought I could try and make progress with <a href=\"https://github.com/leanprover-community/mathlib4/pull/16895\">#16895</a> by figuring out what I'm supposed to be doing on this point.</p>",
        "id": 472683165,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727266835
    },
    {
        "content": "<p>Since you are keying off <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=TopologicalSpace.induced#doc\">docs#TopologicalSpace.induced</a>, I think it is fine as a simp lemma here.</p>",
        "id": 472685997,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1727267711
    },
    {
        "content": "<p>But which one?</p>",
        "id": 472686885,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727267973
    },
    {
        "content": "<p>The former</p>",
        "id": 472686921,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1727267982
    },
    {
        "content": "<p>You could even have both with different priorities</p>",
        "id": 472687201,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1727268059
    },
    {
        "content": "<p>Clarification: both means the former and a more generic <code>sInf</code> one</p>",
        "id": 472698492,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1727271130
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/287929-mathlib4/topic/normal.20form.20for.20pullback.20of.20Inf.20of.20topologies/near/472683165\">said</a>:</p>\n<blockquote>\n<p>I really don't have an opinion on this stuff, I just thought I could try and make progress with <a href=\"https://github.com/leanprover-community/mathlib4/pull/16895\">#16895</a> by figuring out what I'm supposed to be doing on this point.</p>\n</blockquote>\n<p>I think probably we can make an arbitrary decision in that PR, and clean up later if we decide on a clearer convention.</p>",
        "id": 472699225,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727271359
    }
]