[
    {
        "content": "<p>At <a href=\"https://github.com/leanprover-community/mathlib4/pull/24473\">#24473</a> I wrote a delaborator for pretty printing <code>inner</code>, because when working with real inner products, it's really annoying to not see the <code>âŸªx, yâŸ«</code> notation. However, I found out it's not necessary to write a delaborator: we can use the automatically generated unexpander, if <code>inner</code> takes <code>ğ•œ</code> as an explicit argument. This is now possible thank's to the feature added by <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span>. So should we make this change?</p>",
        "id": 515307930,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1746020361
    },
    {
        "content": "<p>To be clear, what would happen with your proposal is the following:</p>\n<ol>\n<li><code>ğ•œ</code> becomes explicit in <code>inner</code>.</li>\n<li>the notation <code>âŸªx, yâŸ«_ğ•œ</code> inserts <code>ğ•œ</code> into the explicit (instead of the current implicit) slot</li>\n<li><code>inner ğ•œ x y</code> delaborates to <code>âŸªx, yâŸ«_ğ•œ</code></li>\n<li>within the scope of <code>RealInnerProductSpace</code> (resp. <code>ComplexInnerProductSpace</code>), <code>âŸªx, yâŸ«</code> still elaborates to <code>inner â„ x y</code> (resp. <code>inner â„‚ x y</code>), but delaborates to <code>âŸªx, yâŸ«_â„</code> (resp. <code>âŸªx, yâŸ«_â„‚</code>). So you can still write <code>âŸªx, yâŸ«</code> in the source, but there's no roundtripping.</li>\n<li>due to (4), this essentially only affects delaboration, and very few changes are needed across Mathlib.</li>\n</ol>\n<p>Is that an accurate summaary?</p>",
        "id": 515324353,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1746024397
    },
    {
        "content": "<p>If so, <span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span></p>",
        "id": 515324389,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1746024405
    },
    {
        "content": "<p><code>âŸªx, yâŸ«_ğ•œ</code> is scoped notation inside <code>InnerProductSpace</code>, so it only pretty prints like that in that scope. So <code>inner â„ x y</code> is printed as <code>âŸªx, yâŸ«</code> when using it in its scope.</p>\n<p>In the case that all scopes are open, we can choose which one we get by reordering the <code>notation</code> commands.</p>",
        "id": 515328285,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1746025251
    },
    {
        "content": "<p>Do you think <code>âŸªx, yâŸ«_ğ•œ</code> should be global notation? That seems reasonable to me.</p>",
        "id": 515328478,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1746025289
    },
    {
        "content": "<p>Another option is to have a custom delaborator that shows <code>inner (K := K) x y</code> when <code>K</code> isn't real, and omits it otherwise</p>",
        "id": 515328837,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746025369
    },
    {
        "content": "<p>Do you mean in order to get the appExpanders to work?</p>",
        "id": 515329239,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1746025445
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Pretty.20printing.20.60inner.60.2C.20and.20argument.20explicitness/near/515328837\">said</a>:</p>\n<blockquote>\n<p>Another option is to have a custom delaborator that shows <code>inner (K := K) x y</code> when <code>K</code> isn't real, and omits it otherwise</p>\n</blockquote>\n<p>I don't see how that's better than having <code>ğ•œ</code> as an explicit argument</p>",
        "id": 515330910,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1746025868
    },
    {
        "content": "<p>Sorry, I meant that the <code>InnerProductSpace</code> notation stays in that scope.</p>",
        "id": 515439952,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1746070518
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/24499\">#24499</a> makes the argument explicit</p>",
        "id": 515478169,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1746093555
    }
]