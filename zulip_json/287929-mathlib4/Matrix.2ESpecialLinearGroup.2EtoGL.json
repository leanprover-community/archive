[
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/Matrix/SpecialLinearGroup.html#Matrix.SpecialLinearGroup.toGL\">Matrix.SpecialLinearGroup.toGL</a> defines \"the map\" from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">L</mi></mrow><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SL}_n(R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">SL</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span>​ to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">L</mi></mrow><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{GL}_n(R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">GL</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span>​ (here <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> is a CommRing). I expected the target of this map to be <br>\n<code>Matrix.GeneralLinearGroup n R</code>and the map being the natural inclusion of groups of matrices, but instead the target is <code>LinearMap.GeneralLinearGroup R (n → R)</code>. <br>\nShouldn't  the natural inclusion of the matrix groups be defined in mathlib (or maybe it is and I didn't find it?), and wouldn't it be good to call it <code>Matrix.SpecialLinearGroup.toGL</code>? </p>\n<p>(There are maps like <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/Matrix/GeneralLinearGroup/Defs.html#Matrix.SpecialLinearGroup.toGLPos\">Matrix.SpecialLinearGroup.toGLPos</a>, which are defined as I would have expected.)</p>",
        "id": 484176499,
        "sender_full_name": "Judith Ludwig",
        "timestamp": 1732478709
    },
    {
        "content": "<p>That does surprise me, I'd expect the same thing as you here</p>",
        "id": 484177304,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732479584
    },
    {
        "content": "<p>The function you're looking for is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.SpecialLinearGroup.coeToGL#doc\">docs#Matrix.SpecialLinearGroup.coeToGL</a>, which is badly named</p>",
        "id": 484177378,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732479640
    },
    {
        "content": "<p>IMO we should drop <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.SpecialLinearGroup.toGL#doc\">docs#Matrix.SpecialLinearGroup.toGL</a> entirely, and force users to translate first to the matrix GL, and then to the linear map GL, via separate maps</p>",
        "id": 484177469,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732479723
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Matrix.2ESpecialLinearGroup.2EtoGL/near/484177378\">said</a>:</p>\n<blockquote>\n<p>The function you're looking for is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.SpecialLinearGroup.coeToGL#doc\">docs#Matrix.SpecialLinearGroup.coeToGL</a>, which is badly named</p>\n</blockquote>\n<p>I guess I do claim that it would be nice to have the multiplicative map (with the map <code>Matrix.SpecialLinearGroup.coeToGL</code> as the underlying toFun). </p>\n<p>(This came up when I wanted to define the restriction of an action of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">L</mi></mrow><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{GL}_n(R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">GL</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span> on some set to the subgroup <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow><mi mathvariant=\"normal\">S</mi><mi mathvariant=\"normal\">L</mi></mrow><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{SL}_n(R)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathrm\">SL</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span>, and I was surprised I had to define the group hom first. I guess there are many other situations where the group hom would be good to have?)</p>",
        "id": 484178487,
        "sender_full_name": "Judith Ludwig",
        "timestamp": 1732480716
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Matrix.2ESpecialLinearGroup.2EtoGL/near/484177469\">said</a>:</p>\n<blockquote>\n<p>IMO we should drop <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.SpecialLinearGroup.toGL#doc\">docs#Matrix.SpecialLinearGroup.toGL</a> entirely, and force users to translate first to the matrix GL, and then to the linear map GL, via separate maps</p>\n</blockquote>\n<p>I agree that this refactoring is the correct thing to do. As a temporary workaround, you may compose with the inverse of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.GeneralLinearGroup.toLin#doc\">docs#Matrix.GeneralLinearGroup.toLin</a> or <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.GeneralLinearGroup.toLinear#doc\">docs#Matrix.GeneralLinearGroup.toLinear</a> to get back to the world of matrices, but going back and forth between matrices and linear maps is definitely not ideal. (Note that these two decls are exact duplicates: both were added 3 years ago, the former by <span class=\"user-mention\" data-user-id=\"389019\">@Chris Birkbeck</span> in mathlib3<a href=\"https://github.com/leanprover-community/mathlib3/commit/abe81bcb4635095980e826f4d7f444e7b2827454#diff-d08f20f44c666637088bccaeb8b78d8f500879b22f5e2752adc23590b018f8b8R44\">#8466</a>,the latter by <span class=\"user-mention\" data-user-id=\"252920\">@Alex Kontorovich</span> in <a href=\"https://github.com/leanprover-community/mathlib3/commit/9c4e41aea85ee16790b16e6da0acf3a65d9771e3#diff-d08f20f44c666637088bccaeb8b78d8f500879b22f5e2752adc23590b018f8b8R94\">#8611</a>, and when doing the refactoring we should also remove one of them and use the other to do the transition between matrices and linear maps which is a part of the original <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.SpecialLinearGroup.toGL#doc\">docs#Matrix.SpecialLinearGroup.toGL</a>.)</p>",
        "id": 484495014,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1732621871
    },
    {
        "content": "<p>Yeah I agree, we should refactor (and remove the duplicating! sorry about that!)  and leave the map into the linear version as something separate since so far in my experience its rarely used.</p>",
        "id": 484496015,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1732622188
    },
    {
        "content": "<p>Thanks everyone for your input on this. I've refactored as suggested in <a href=\"https://github.com/leanprover-community/mathlib4/pull/19523\">#19523</a>.</p>",
        "id": 484595455,
        "sender_full_name": "Judith Ludwig",
        "timestamp": 1732654825
    },
    {
        "content": "<p>Thanks! I left some comments but will wait for another reviewer (preferably original authors). It's a pretty easy PR; <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.SpecialLinearGroup.toGL#doc\">docs#Matrix.SpecialLinearGroup.toGL</a> is indeed not used in Mathlib.</p>",
        "id": 484599005,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1732656331
    },
    {
        "content": "<p>Thanks for doing this!</p>",
        "id": 484600609,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1732657067
    }
]