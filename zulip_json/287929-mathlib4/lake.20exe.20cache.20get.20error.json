[
    {
        "content": "<p>I am getting the error below when running  <code>lake exe cache get</code> on a mathlib branch. I tried running <code>lake clean</code> first, but it did not solve the issue.</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>lake exe cache get\n✖ [10/10] Building cache\ntrace: .&gt; /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/bin/leanc -o ././.lake/build/bin/cache ././.lake/build/ir/Cache/Main.c.o.export ././.lake/build/ir/Cache/IO.c.o.export ././.lake/build/ir/Cache/Hashing.c.o.export ././.lake/build/ir/Cache/Requests.c.o.export\ninfo: stderr:\nld.lld: error: undefined symbol: __dladdr\n&gt;&gt;&gt; referenced by dladdr.o:(dladdr) in archive /lib/x86_64-linux-gnu/libdl.a\n\nld.lld: error: undefined symbol: __dlsym\n&gt;&gt;&gt; referenced by dlsym.o:(dlsym) in archive /lib/x86_64-linux-gnu/libdl.a\n\nld.lld: error: undefined symbol: _dl_deallocate_tls\n&gt;&gt;&gt; referenced by allocatestack.c:277\n&gt;&gt;&gt;               pthread_create.o:(free_stacks) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by allocatestack.c:804\n&gt;&gt;&gt;               pthread_create.o:(__deallocate_stack) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by allocatestack.c:804\n&gt;&gt;&gt;               pthread_create.o:(__free_tcb) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced 1 more times\n\nld.lld: error: undefined symbol: _dl_make_stack_executable\n&gt;&gt;&gt; referenced by allocatestack.c:814\n&gt;&gt;&gt;               pthread_create.o:(__make_stacks_executable) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_stack_flags\n&gt;&gt;&gt; referenced by allocatestack.c:525\n&gt;&gt;&gt;               pthread_create.o:(__pthread_create_2_1) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by allocatestack.c:647\n&gt;&gt;&gt;               pthread_create.o:(__pthread_create_2_1) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_allocate_tls_init\n&gt;&gt;&gt; referenced by allocatestack.c:247\n&gt;&gt;&gt;               pthread_create.o:(__pthread_create_2_1) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_allocate_tls\n&gt;&gt;&gt; referenced by allocatestack.c:502\n&gt;&gt;&gt;               pthread_create.o:(__pthread_create_2_1) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by allocatestack.c:622\n&gt;&gt;&gt;               pthread_create.o:(__pthread_create_2_1) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: __tunable_get_val\n&gt;&gt;&gt; referenced by elision-conf.c:110 (../sysdeps/unix/sysv/linux/x86/elision-conf.c:110)\n&gt;&gt;&gt;               elision-lock.o:(elision_init) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by elision-conf.c:112 (../sysdeps/unix/sysv/linux/x86/elision-conf.c:112)\n&gt;&gt;&gt;               elision-lock.o:(elision_init) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by elision-conf.c:114 (../sysdeps/unix/sysv/linux/x86/elision-conf.c:114)\n&gt;&gt;&gt;               elision-lock.o:(elision_init) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced 3 more times\n\nld.lld: error: undefined symbol: _dl_x86_cpu_features\n&gt;&gt;&gt; referenced by elision-conf.c:66 (../sysdeps/unix/sysv/linux/x86/elision-conf.c:66)\n&gt;&gt;&gt;               elision-lock.o:(_dl_tunable_set_elision_enable) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: __libc_stack_end\n&gt;&gt;&gt; referenced by nptl-init.c:272\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by pthread_getattr_np.c:98\n&gt;&gt;&gt;               pthread_getattr_np.o:(pthread_getattr_np) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by pthread_getattr_np.c:125\n&gt;&gt;&gt;               pthread_getattr_np.o:(pthread_getattr_np) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_get_tls_static_info\n&gt;&gt;&gt; referenced by nptl-init.c:311\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_pagesize\n&gt;&gt;&gt; referenced by nptl-init.c:335\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by nptl-init.c:344\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by nptl-init.c:393\n&gt;&gt;&gt;               nptl-init.o:(__pthread_get_minstack) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced 2 more times\n\nld.lld: error: undefined symbol: _dl_init_static_tls\n&gt;&gt;&gt; referenced by nptl-init.c:360\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_wait_lookup_done\n&gt;&gt;&gt; referenced by nptl-init.c:362\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: __dlopen\n&gt;&gt;&gt; referenced by dlopen.o:(dlopen) in archive /lib/x86_64-linux-gnu/libdl.a\n</code></pre></div>",
        "id": 480463330,
        "sender_full_name": "María Inés de Frutos Fernández",
        "timestamp": 1730732340
    },
    {
        "content": "<p>That's a puzzling (and novel) error. Could you check it (still) works with older mathlib commits? What does</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">foo</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.14.0-rc1/bin/leanc -o ././.lake/build/bin/cache ././.lake/build/ir/Cache/Main.c.o.export ././.lake/build/ir/Cache/IO.c.o.export ././.lake/build/ir/Cache/Hashing.c.o.export ././.lake/build/ir/Cache/Requests.c.o.export -v</span>\n</code></pre></div>\n<p>print?</p>",
        "id": 480468668,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1730733797
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>/home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/bin/clang -I /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/include -fstack-clash-protection -fwrapv -fPIC -fvisibility=hidden -nostdinc -isystem /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/include/clang -o ././.lake/build/bin/cache ././.lake/build/ir/Cache/Main.c.o.export ././.lake/build/ir/Cache/IO.c.o.export ././.lake/build/ir/Cache/Hashing.c.o.export ././.lake/build/ir/Cache/Requests.c.o.export -v -L /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib -L /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/glibc /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/glibc/libc_nonshared.a /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/glibc/libpthread_nonshared.a -Wl,--as-needed -Wl,-Bstatic -lgmp -lunwind -luv -lpthread -ldl -lrt -Wl,-Bdynamic -Wl,--no-as-needed -fuse-ld=lld -L /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/lean -Wl,--start-group -lleancpp -lLean -Wl,--end-group -lStd -Wl,--start-group -lInit -lleanrt -Wl,--end-group -Wl,-Bstatic -lc++ -lc++abi -Wl,-Bdynamic -lLake -Wl,--as-needed -lgmp -luv -lpthread -ldl -lrt -Wl,--no-as-needed -lm -ldl -pthread -Wno-unused-command-line-argument\nclang version 15.0.1 (https://github.com/llvm/llvm-project b73d2c8c720a8c8e6e73b11be4e27afa6cb75bdf)\nTarget: x86_64-unknown-linux-gnu\nThread model: posix\nInstalledDir: /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/bin\nFound candidate GCC installation: /usr/lib/gcc/x86_64-linux-gnu/9\nSelected GCC installation: /usr/lib/gcc/x86_64-linux-gnu/9\nCandidate multilib: .;@m64\nSelected multilib: .;@m64\n \"/home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/bin/ld.lld\" -pie -z relro --hash-style=gnu --eh-frame-hdr -m elf_x86_64 -dynamic-linker /lib64/ld-linux-x86-64.so.2 -o ././.lake/build/bin/cache /lib/x86_64-linux-gnu/Scrt1.o /lib/x86_64-linux-gnu/crti.o /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/clang/15.0.1/lib/x86_64-unknown-linux-gnu/clang_rt.crtbegin.o -L/home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib -L/home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/glibc -L/home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/lean -L/usr/lib/gcc/x86_64-linux-gnu/9 -L/usr/lib/gcc/x86_64-linux-gnu/9/../../../../lib64 -L/lib/x86_64-linux-gnu -L/lib/../lib64 -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib64 -L/home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/bin/../lib -L/lib -L/usr/lib ././.lake/build/ir/Cache/Main.c.o.export ././.lake/build/ir/Cache/IO.c.o.export ././.lake/build/ir/Cache/Hashing.c.o.export ././.lake/build/ir/Cache/Requests.c.o.export /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/glibc/libc_nonshared.a /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/glibc/libpthread_nonshared.a --as-needed -Bstatic -lgmp -lunwind -luv -lpthread -ldl -lrt -Bdynamic --no-as-needed --start-group -lleancpp -lLean --end-group -lStd --start-group -lInit -lleanrt --end-group -Bstatic -lc++ -lc++abi -Bdynamic -lLake --as-needed -lgmp -luv -lpthread -ldl -lrt --no-as-needed -lm -ldl /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/clang/15.0.1/lib/x86_64-unknown-linux-gnu/libclang_rt.builtins.a -lpthread -lc /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/clang/15.0.1/lib/x86_64-unknown-linux-gnu/libclang_rt.builtins.a /home/foo/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/lib/clang/15.0.1/lib/x86_64-unknown-linux-gnu/clang_rt.crtend.o /lib/x86_64-linux-gnu/crtn.o\nld.lld: error: undefined symbol: l_IO_println___at_Lean_instEval___spec__1\n&gt;&gt;&gt; referenced by Main.c\n&gt;&gt;&gt;               ././.lake/build/ir/Cache/Main.c.o.export:(l_main___lambda__4)\n&gt;&gt;&gt; referenced by Main.c\n&gt;&gt;&gt;               ././.lake/build/ir/Cache/Main.c.o.export:(l_main___lambda__4)\n&gt;&gt;&gt; referenced by Main.c\n&gt;&gt;&gt;               ././.lake/build/ir/Cache/Main.c.o.export:(l_main___lambda__7)\n&gt;&gt;&gt; referenced 38 more times\n\nld.lld: error: undefined symbol: l_Lean_Json_getObjValAs_x3f___at___private_Lean_Message_0__Lean_fromJsonBaseMessage____x40_Lean_Message___hyg_2633____spec__1\n&gt;&gt;&gt; referenced by Requests.c\n&gt;&gt;&gt;               ././.lake/build/ir/Cache/Requests.c.o.export:(l_Cache_Requests_downloadFiles___lambda__5)\n&gt;&gt;&gt; referenced by Requests.c\n&gt;&gt;&gt;               ././.lake/build/ir/Cache/Requests.c.o.export:(l_Cache_Requests_downloadFiles___lambda__7)\n&gt;&gt;&gt; referenced by Requests.c\n&gt;&gt;&gt;               ././.lake/build/ir/Cache/Requests.c.o.export:(l_Cache_Requests_downloadFiles___lambda__7)\n&gt;&gt;&gt; referenced 1 more times\n\nld.lld: error: undefined symbol: __dladdr\n&gt;&gt;&gt; referenced by dladdr.o:(dladdr) in archive /lib/x86_64-linux-gnu/libdl.a\n\nld.lld: error: undefined symbol: __dlsym\n&gt;&gt;&gt; referenced by dlsym.o:(dlsym) in archive /lib/x86_64-linux-gnu/libdl.a\n\nld.lld: error: undefined symbol: _dl_deallocate_tls\n&gt;&gt;&gt; referenced by allocatestack.c:277\n&gt;&gt;&gt;               pthread_create.o:(free_stacks) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by allocatestack.c:804\n&gt;&gt;&gt;               pthread_create.o:(__deallocate_stack) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by allocatestack.c:804\n&gt;&gt;&gt;               pthread_create.o:(__free_tcb) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced 1 more times\n\nld.lld: error: undefined symbol: _dl_make_stack_executable\n&gt;&gt;&gt; referenced by allocatestack.c:814\n&gt;&gt;&gt;               pthread_create.o:(__make_stacks_executable) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_stack_flags\n&gt;&gt;&gt; referenced by allocatestack.c:525\n&gt;&gt;&gt;               pthread_create.o:(__pthread_create_2_1) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by allocatestack.c:647\n&gt;&gt;&gt;               pthread_create.o:(__pthread_create_2_1) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_allocate_tls_init\n&gt;&gt;&gt; referenced by allocatestack.c:247\n&gt;&gt;&gt;               pthread_create.o:(__pthread_create_2_1) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_allocate_tls\n&gt;&gt;&gt; referenced by allocatestack.c:502\n&gt;&gt;&gt;               pthread_create.o:(__pthread_create_2_1) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by allocatestack.c:622\n&gt;&gt;&gt;               pthread_create.o:(__pthread_create_2_1) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: __tunable_get_val\n&gt;&gt;&gt; referenced by elision-conf.c:110 (../sysdeps/unix/sysv/linux/x86/elision-conf.c:110)\n&gt;&gt;&gt;               elision-lock.o:(elision_init) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by elision-conf.c:112 (../sysdeps/unix/sysv/linux/x86/elision-conf.c:112)\n&gt;&gt;&gt;               elision-lock.o:(elision_init) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by elision-conf.c:114 (../sysdeps/unix/sysv/linux/x86/elision-conf.c:114)\n&gt;&gt;&gt;               elision-lock.o:(elision_init) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced 3 more times\n\nld.lld: error: undefined symbol: _dl_x86_cpu_features\n&gt;&gt;&gt; referenced by elision-conf.c:66 (../sysdeps/unix/sysv/linux/x86/elision-conf.c:66)\n&gt;&gt;&gt;               elision-lock.o:(_dl_tunable_set_elision_enable) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: __libc_stack_end\n&gt;&gt;&gt; referenced by nptl-init.c:272\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by pthread_getattr_np.c:98\n&gt;&gt;&gt;               pthread_getattr_np.o:(pthread_getattr_np) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by pthread_getattr_np.c:125\n&gt;&gt;&gt;               pthread_getattr_np.o:(pthread_getattr_np) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_get_tls_static_info\n&gt;&gt;&gt; referenced by nptl-init.c:311\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_pagesize\n&gt;&gt;&gt; referenced by nptl-init.c:335\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by nptl-init.c:344\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced by nptl-init.c:393\n&gt;&gt;&gt;               nptl-init.o:(__pthread_get_minstack) in archive /lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt; referenced 2 more times\n\nld.lld: error: undefined symbol: _dl_init_static_tls\n&gt;&gt;&gt; referenced by nptl-init.c:360\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: _dl_wait_lookup_done\n&gt;&gt;&gt; referenced by nptl-init.c:362\n&gt;&gt;&gt;               nptl-init.o:(__pthread_initialize_minimal_internal) in archive /lib/x86_64-linux-gnu/libpthread.a\n\nld.lld: error: undefined symbol: __dlopen\n&gt;&gt;&gt; referenced by dlopen.o:(dlopen) in archive /lib/x86_64-linux-gnu/libdl.a\n\nld.lld: error: undefined symbol: __dlerror\n&gt;&gt;&gt; referenced by dlerror.o:(dlerror) in archive /lib/x86_64-linux-gnu/libdl.a\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre></div>",
        "id": 480470085,
        "sender_full_name": "María Inés de Frutos Fernández",
        "timestamp": 1730734210
    },
    {
        "content": "<p>I noticed the error in <a href=\"https://github.com/leanprover-community/mathlib4/pull/18172\">#18172</a> and I also get it in the current Mathlib master, but I do not get it for instance in <a href=\"https://github.com/leanprover-community/mathlib4/pull/18388\">#18388</a> (from last week, and in which I have not merged master).</p>",
        "id": 480470716,
        "sender_full_name": "María Inés de Frutos Fernández",
        "timestamp": 1730734414
    },
    {
        "content": "<p>I just updated FLT and got the same error. I tried</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>buzzard@buster:~/.elan/toolchains$<span class=\"w\"> </span>rm<span class=\"w\"> </span>-rf<span class=\"w\"> </span>leanprover--lean4---v4.14.0-rc1\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>buzzard@buster:~/.elan/update-hashes$<span class=\"w\"> </span>rm<span class=\"w\"> </span>-rf<span class=\"w\"> </span>leanprover--lean4---v4.14.0-rc1\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>buzzard@buster:~/lean-projects/FLT$<span class=\"w\"> </span>rm<span class=\"w\"> </span>-rf<span class=\"w\"> </span>.lake\n</code></pre></div>\n<p>and I get</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>buzzard@buster:~/lean-projects/FLT$<span class=\"w\"> </span>lake<span class=\"w\"> </span>exe<span class=\"w\"> </span>cache<span class=\"w\"> </span>get\ninfo:<span class=\"w\"> </span>mathlib:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/mathlib4.git<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/mathlib'</span>\ninfo:<span class=\"w\"> </span>checkdecls:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/PatrickMassot/checkdecls.git<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/checkdecls'</span>\ninfo:<span class=\"w\"> </span>batteries:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/batteries<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/batteries'</span>\ninfo:<span class=\"w\"> </span>Qq:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/quote4<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/Qq'</span>\ninfo:<span class=\"w\"> </span>aesop:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/aesop<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/aesop'</span>\ninfo:<span class=\"w\"> </span>proofwidgets:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/ProofWidgets4<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/proofwidgets'</span>\ninfo:<span class=\"w\"> </span>importGraph:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/import-graph<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/importGraph'</span>\ninfo:<span class=\"w\"> </span>LeanSearchClient:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/LeanSearchClient<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/LeanSearchClient'</span>\ninfo:<span class=\"w\"> </span>plausible:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/plausible<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/plausible'</span>\ninfo:<span class=\"w\"> </span>Cli:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover/lean4-cli<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/Cli'</span>\n✖<span class=\"w\"> </span><span class=\"o\">[</span><span class=\"m\">10</span>/10<span class=\"o\">]</span><span class=\"w\"> </span>Building<span class=\"w\"> </span>cache\ntrace:<span class=\"w\"> </span>.&gt;<span class=\"w\"> </span>/home/buzzard/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/bin/leanc<span class=\"w\"> </span>-o<span class=\"w\"> </span>././.lake/packages/mathlib/.lake/build/bin/cache<span class=\"w\"> </span>././.lake/packages/mathlib/.lake/build/ir/Cache/Main.c.o.export<span class=\"w\"> </span>././.lake/packages/mathlib/.lake/build/ir/Cache/IO.c.o.export<span class=\"w\"> </span>././.lake/packages/mathlib/.lake/build/ir/Cache/Hashing.c.o.export<span class=\"w\"> </span>././.lake/packages/mathlib/.lake/build/ir/Cache/Requests.c.o.export\ninfo:<span class=\"w\"> </span>stderr:\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>__dladdr\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>dladdr.o:<span class=\"o\">(</span>dladdr<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libdl.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>__dlsym\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>dlsym.o:<span class=\"o\">(</span>dlsym<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libdl.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>_dl_deallocate_tls\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>allocatestack.c:277\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_create.o:<span class=\"o\">(</span>free_stacks<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>allocatestack.c:804\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_create.o:<span class=\"o\">(</span>__deallocate_stack<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>allocatestack.c:804\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_create.o:<span class=\"o\">(</span>__free_tcb<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span><span class=\"m\">1</span><span class=\"w\"> </span>more<span class=\"w\"> </span><span class=\"nb\">times</span>\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>_dl_make_stack_executable\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>allocatestack.c:814\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_create.o:<span class=\"o\">(</span>__make_stacks_executable<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>_dl_stack_flags\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>allocatestack.c:525\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_create.o:<span class=\"o\">(</span>__pthread_create_2_1<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>allocatestack.c:647\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_create.o:<span class=\"o\">(</span>__pthread_create_2_1<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>_dl_allocate_tls_init\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>allocatestack.c:247\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_create.o:<span class=\"o\">(</span>__pthread_create_2_1<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>_dl_allocate_tls\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>allocatestack.c:502\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_create.o:<span class=\"o\">(</span>__pthread_create_2_1<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>allocatestack.c:622\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_create.o:<span class=\"o\">(</span>__pthread_create_2_1<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>__tunable_get_val\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>elision-conf.c:110<span class=\"w\"> </span><span class=\"o\">(</span>../sysdeps/unix/sysv/linux/x86/elision-conf.c:110<span class=\"o\">)</span>\n&gt;&gt;&gt;<span class=\"w\">               </span>elision-lock.o:<span class=\"o\">(</span>elision_init<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>elision-conf.c:112<span class=\"w\"> </span><span class=\"o\">(</span>../sysdeps/unix/sysv/linux/x86/elision-conf.c:112<span class=\"o\">)</span>\n&gt;&gt;&gt;<span class=\"w\">               </span>elision-lock.o:<span class=\"o\">(</span>elision_init<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>elision-conf.c:114<span class=\"w\"> </span><span class=\"o\">(</span>../sysdeps/unix/sysv/linux/x86/elision-conf.c:114<span class=\"o\">)</span>\n&gt;&gt;&gt;<span class=\"w\">               </span>elision-lock.o:<span class=\"o\">(</span>elision_init<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span><span class=\"m\">3</span><span class=\"w\"> </span>more<span class=\"w\"> </span><span class=\"nb\">times</span>\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>_dl_x86_cpu_features\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>elision-conf.c:66<span class=\"w\"> </span><span class=\"o\">(</span>../sysdeps/unix/sysv/linux/x86/elision-conf.c:66<span class=\"o\">)</span>\n&gt;&gt;&gt;<span class=\"w\">               </span>elision-lock.o:<span class=\"o\">(</span>_dl_tunable_set_elision_enable<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>__libc_stack_end\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>nptl-init.c:272\n&gt;&gt;&gt;<span class=\"w\">               </span>nptl-init.o:<span class=\"o\">(</span>__pthread_initialize_minimal_internal<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>pthread_getattr_np.c:98\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_getattr_np.o:<span class=\"o\">(</span>pthread_getattr_np<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>pthread_getattr_np.c:125\n&gt;&gt;&gt;<span class=\"w\">               </span>pthread_getattr_np.o:<span class=\"o\">(</span>pthread_getattr_np<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>_dl_get_tls_static_info\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>nptl-init.c:311\n&gt;&gt;&gt;<span class=\"w\">               </span>nptl-init.o:<span class=\"o\">(</span>__pthread_initialize_minimal_internal<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>_dl_pagesize\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>nptl-init.c:335\n&gt;&gt;&gt;<span class=\"w\">               </span>nptl-init.o:<span class=\"o\">(</span>__pthread_initialize_minimal_internal<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>nptl-init.c:344\n&gt;&gt;&gt;<span class=\"w\">               </span>nptl-init.o:<span class=\"o\">(</span>__pthread_initialize_minimal_internal<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>nptl-init.c:393\n&gt;&gt;&gt;<span class=\"w\">               </span>nptl-init.o:<span class=\"o\">(</span>__pthread_get_minstack<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span><span class=\"m\">2</span><span class=\"w\"> </span>more<span class=\"w\"> </span><span class=\"nb\">times</span>\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>_dl_init_static_tls\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>nptl-init.c:360\n&gt;&gt;&gt;<span class=\"w\">               </span>nptl-init.o:<span class=\"o\">(</span>__pthread_initialize_minimal_internal<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>_dl_wait_lookup_done\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>nptl-init.c:362\n&gt;&gt;&gt;<span class=\"w\">               </span>nptl-init.o:<span class=\"o\">(</span>__pthread_initialize_minimal_internal<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libpthread.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>__dlopen\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>dlopen.o:<span class=\"o\">(</span>dlopen<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libdl.a\n\nld.lld:<span class=\"w\"> </span>error:<span class=\"w\"> </span>undefined<span class=\"w\"> </span>symbol:<span class=\"w\"> </span>__dlerror\n&gt;&gt;&gt;<span class=\"w\"> </span>referenced<span class=\"w\"> </span>by<span class=\"w\"> </span>dlerror.o:<span class=\"o\">(</span>dlerror<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>archive<span class=\"w\"> </span>/lib/x86_64-linux-gnu/libdl.a\nclang:<span class=\"w\"> </span>error:<span class=\"w\"> </span>linker<span class=\"w\"> </span><span class=\"nb\">command</span><span class=\"w\"> </span>failed<span class=\"w\"> </span>with<span class=\"w\"> </span><span class=\"nb\">exit</span><span class=\"w\"> </span>code<span class=\"w\"> </span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">(</span>use<span class=\"w\"> </span>-v<span class=\"w\"> </span>to<span class=\"w\"> </span>see<span class=\"w\"> </span>invocation<span class=\"o\">)</span>\nerror:<span class=\"w\"> </span>external<span class=\"w\"> </span><span class=\"nb\">command</span><span class=\"w\"> </span><span class=\"s1\">'/home/buzzard/.elan/toolchains/leanprover--lean4---v4.14.0-rc1/bin/leanc'</span><span class=\"w\"> </span>exited<span class=\"w\"> </span>with<span class=\"w\"> </span>code<span class=\"w\"> </span><span class=\"m\">1</span>\nSome<span class=\"w\"> </span>required<span class=\"w\"> </span>builds<span class=\"w\"> </span>logged<span class=\"w\"> </span>failures:\n-<span class=\"w\"> </span>cache\nerror:<span class=\"w\"> </span>build<span class=\"w\"> </span>failed\nbuzzard@buster:~/lean-projects/FLT$\n</code></pre></div>",
        "id": 480762054,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730825078
    },
    {
        "content": "<p>There is now <a href=\"https://github.com/leanprover/lean4/pull/5966\">lean4#5966</a> to fix it</p>",
        "id": 480762280,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1730825152
    },
    {
        "content": "<p>I am surprised that I'm getting the error locally but CI is passing in FLT</p>",
        "id": 480769563,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730827752
    },
    {
        "content": "<p>Can I not work on FLT any more until this fix makes it to mathlib?</p>",
        "id": 480806790,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730844021
    },
    {
        "content": "<p>Should be fixed in mathlib in a few hours.</p>",
        "id": 480810971,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730846291
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/18682\">#18682</a></p>",
        "id": 480819572,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730851786
    },
    {
        "content": "<p>As ever, thank you to our amazing community for getting things back up and running so quickly!</p>",
        "id": 480889950,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730889400
    },
    {
        "content": "<p>And I can confirm that we're back on track! Many thanks again.</p>",
        "id": 480908013,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1730895635
    },
    {
        "content": "<p>It worked for me too. Thanks!</p>",
        "id": 480948119,
        "sender_full_name": "María Inés de Frutos Fernández",
        "timestamp": 1730907752
    },
    {
        "content": "<p>I just cloned mathlib, entered the folder and tried <code>lake exe cache get</code>. I get a warning about an unused argument in clang and the cache is not downloaded.<br>\nThis is on windows.</p>\n<p>Here is the output of <code>lake exe cache get</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plausible</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">plausible</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plausible</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">1622</span><span class=\"n\">a8693b31523c8f82db48e01b14c74bc1f155'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LeanSearchClient</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">LeanSearchClient</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LeanSearchClient</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">003</span><span class=\"n\">ff459cdd85de551f4dcf95cdfeefe10f20531'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">importGraph</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"kn\">import</span><span class=\"bp\">-</span><span class=\"n\">graph</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">importGraph</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">9</span><span class=\"n\">cb79405471ae931ac718231d6299bfaffef9087'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">ProofWidgets4</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">07</span><span class=\"n\">f60e90998dfd6592688a14cd67bd4e384b77b2'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">aesop</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">aesop</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">aesop</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">79402</span><span class=\"n\">ad9ab4be9a2286701a9880697e2351e4955'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Qq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">quote4</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Qq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">f0c584bcb14c5adfb53079781eeea75b26ebbd32'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">batteries</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">b2e8b6868397fcd93c00aca7278b933c16c0ffb3'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Cli</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">cli</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Cli</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">0</span><span class=\"n\">c8ea32a15a4f74143e4e1e107ba2c412adb90fd'</span>\n<span class=\"bp\">Ô£ö</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"bp\">.</span><span class=\"n\">IO</span>\n<span class=\"bp\">Ô£ö</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"bp\">.</span><span class=\"n\">Hashing</span>\n<span class=\"bp\">Ô£ö</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"bp\">.</span><span class=\"n\">IO</span><span class=\"o\">:</span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"bp\">Ô£ö</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">5</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"bp\">.</span><span class=\"n\">Requests</span>\n<span class=\"bp\">Ô£ö</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">6</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"bp\">.</span><span class=\"n\">Hashing</span><span class=\"o\">:</span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"bp\">Ô£ö</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"bp\">.</span><span class=\"n\">Main</span>\n<span class=\"bp\">Ô£ö</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">8</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"bp\">.</span><span class=\"n\">Requests</span><span class=\"o\">:</span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"bp\">Ô£ö</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">9</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"bp\">.</span><span class=\"n\">Main</span><span class=\"o\">:</span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"bp\">Ôä╣</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">10</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"n\">unused</span><span class=\"w\"> </span><span class=\"n\">during</span><span class=\"w\"> </span><span class=\"n\">compilation</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'-</span><span class=\"n\">static</span><span class=\"bp\">-</span><span class=\"n\">libgcc'</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"n\">Wunused</span><span class=\"bp\">-</span><span class=\"n\">command</span><span class=\"bp\">-</span><span class=\"n\">line</span><span class=\"bp\">-</span><span class=\"n\">argument</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Any idea of what the issue is, and how I can get a cache?</p>",
        "id": 491967154,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1736083719
    },
    {
        "content": "<p>That's on 4.16.0-rc1. I tried lake exe cache get on a branch on 4.15.0 and it works fine (I don't see any warning and I get a download).</p>",
        "id": 491967536,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1736084055
    },
    {
        "content": "<p>I assume this happens on Windows?</p>",
        "id": 491969420,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736085804
    },
    {
        "content": "<p>Yes, this is on windows</p>",
        "id": 491969527,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1736085874
    },
    {
        "content": "<p>Oh, you had already mentioned that, sorry</p>",
        "id": 491969551,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736085895
    },
    {
        "content": "<p>If I had to guess, I'd say this is a regression from <a href=\"https://github.com/leanprover/lean4/pull/6176\">lean4#6176</a>, which probably exposes problems with other toolchain setups. See, for example, <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/lake.20exe.20cache.20get.20error.20on.20NixOS\">#mathlib4 &gt; lake exe cache get error on NixOS</a></p>",
        "id": 491969694,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736086012
    },
    {
        "content": "<p>I tested it on ubuntu as well, and I have no problem there.</p>",
        "id": 491969696,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1736086013
    },
    {
        "content": "<p>The flags passed to the linker are in <a href=\"https://github.com/leanprover/lean4/blob/master/script/prepare-llvm-mingw.sh\">script/prepare-llvm-mingw.sh</a> (they're defined as CMake variables which are substituted into <a href=\"https://github.com/leanprover/lean4/blob/master/src/util/ffi.cpp\">src/util/ffi.cpp</a>). But this should just be a compiler warning. I guess Mathlib treats any noise as an error and doesn't run the <code>cache</code> binary? Do you see any lines starting with <code>error</code> instead of <code>warning</code>?</p>",
        "id": 491974464,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736090086
    },
    {
        "content": "<p>I think Lake <a href=\"https://github.com/leanprover/lean4/commit/f156f22d7c4fcc3dd6c148e5cd8ae28ca1313925#diff-2e31f8d33c30e43250f61509a841412e5676c0c9b79ceba96eab1a935962c2c9R77\">wanted to pass <code>-Wno-unused-command-line-argument</code></a> to suppress these warnings, but I couldn't follow the code to see if it does that for the bundled compiler</p>",
        "id": 491974999,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736090527
    },
    {
        "content": "<p>I got the following error on Windows last night after checking out latest master; it looks different than yours, but may be caused by the same change on master.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"bp\">...\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">downloading</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean'</span>\n<span class=\"mf\">252.2</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mf\">252.2</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"mf\">18.8</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">ETA</span><span class=\"o\">:</span><span class=\"w\">   </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">installing</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean'</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">compiled</span><span class=\"w\"> </span><span class=\"n\">configuration</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">'-</span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">reconfigure</span>\n</code></pre></div>\n<p>I tried <code>lake exe cache clean!</code> but I got the same error. After searching the error message on Zulip, I found a <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20error.3A.20lake.20setup-file.20failed.20with.20invalid.20configuration/near/450443185\">message</a> suggesting to delete the <code>.lake</code> folder. I did that and then <code>lake exe cache get</code> worked normally, but I'm not sure why it solved the problem.</p>",
        "id": 491975060,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1736090594
    },
    {
        "content": "<p>Same error after I deleted .lake (which is not very surprising, since I got the error on a fresh clone)</p>",
        "id": 491975256,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1736090731
    },
    {
        "content": "<p>That seems like a different problem, but lake should just recompile the configuration on its own if it detects an invalid <code>lakefile.olean</code></p>",
        "id": 491975340,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736090777
    },
    {
        "content": "<p>I also get failure to download cache on mathlib master, on Windows. Here is my error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">Sebastien</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">downloading</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean'</span>\n<span class=\"mf\">260.5</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mf\">260.5</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"mf\">85.0</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">ETA</span><span class=\"o\">:</span><span class=\"w\">   </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">installing</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plausible</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">1622</span><span class=\"n\">a8693b31523c8f82db48e01b14c74bc1f155'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LeanSearchClient</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">003</span><span class=\"n\">ff459cdd85de551f4dcf95cdfeefe10f20531'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">importGraph</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">9</span><span class=\"n\">cb79405471ae931ac718231d6299bfaffef9087'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">07</span><span class=\"n\">f60e90998dfd6592688a14cd67bd4e384b77b2'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">aesop</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">79402</span><span class=\"n\">ad9ab4be9a2286701a9880697e2351e4955'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Qq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">f0c584bcb14c5adfb53079781eeea75b26ebbd32'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">b2e8b6868397fcd93c00aca7278b933c16c0ffb3'</span>\n<span class=\"bp\">Ô£û</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">10</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">Sebastien</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1\\bin\\clang.exe -o .\\.\\.lake\\build\\bin\\cache.exe .\\.\\.lake\\build\\ir\\Cache\\Main.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\IO.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Hashing.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Requests.c.o.noexport -L c:\\Users\\Sebastien\\.elan\\toolchains\\leanprover--lean4---v4.16.0-rc1/lib -static-libgcc -Wl,-Bstatic -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lunwind -Wl,-Bdynamic -fuse-ld=lld -L c:\\Users\\Sebastien\\.elan\\toolchains\\leanprover--lean4---v4.16.0-rc1\\lib\\lean -Wl,--start-group -lleancpp -lLean -Wl,--end-group -lStd -Wl,--start-group -lInit -lleanrt -Wl,--end-group -lc++ -lc++abi -lLake -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lucrtbase -Wl,--stack,104857600 -licu -lm -lbcrypt -pthread</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"n\">unused</span><span class=\"w\"> </span><span class=\"n\">during</span><span class=\"w\"> </span><span class=\"n\">compilation</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'-</span><span class=\"n\">static</span><span class=\"bp\">-</span><span class=\"n\">libgcc'</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"n\">Wunused</span><span class=\"bp\">-</span><span class=\"n\">command</span><span class=\"bp\">-</span><span class=\"n\">line</span><span class=\"bp\">-</span><span class=\"n\">argument</span><span class=\"o\">]</span>\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">mingw_init_ehandler</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">__</span><span class=\"n\">tmainCRTStartup</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">security_init_cookie</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">l_startw</span><span class=\"o\">)</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">l_start</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_app_type</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_app_type</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initcharmax</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initcharmax</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initltssuo_force</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initltssuo_force</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initltsdyn_force</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initltsdyn_force</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initltsdrot_force</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initltsdrot_force</span><span class=\"o\">)</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">Sebastien</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1\\bin\\clang.exe' exited with code 1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">builds</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n</code></pre></div>",
        "id": 491975475,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736090884
    },
    {
        "content": "<p>Removing from the path the directory <code>c:/Strawberry/c/bin</code> (which contains a copy of <code>ld</code>) fixes the build. I still get the warning that a flag is not used, but it's not an error, and cache works fine afterwards:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">Ôä╣</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">10</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"n\">unused</span><span class=\"w\"> </span><span class=\"n\">during</span><span class=\"w\"> </span><span class=\"n\">compilation</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'-</span><span class=\"n\">static</span><span class=\"bp\">-</span><span class=\"n\">libgcc'</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"n\">Wunused</span><span class=\"bp\">-</span><span class=\"n\">command</span><span class=\"bp\">-</span><span class=\"n\">line</span><span class=\"bp\">-</span><span class=\"n\">argument</span><span class=\"o\">]</span>\n<span class=\"n\">Attempting</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">download</span><span class=\"w\"> </span><span class=\"mi\">5824</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span>\n<span class=\"n\">Downloaded</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">5824</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">attempted</span><span class=\"w\"> </span><span class=\"mi\">5824</span><span class=\"bp\">/</span><span class=\"mi\">5824</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">success</span><span class=\"o\">)</span>\n<span class=\"n\">Decompressing</span><span class=\"w\"> </span><span class=\"mi\">5824</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span>\n<span class=\"n\">Unpacked</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mi\">13100</span><span class=\"w\"> </span><span class=\"n\">ms</span>\n<span class=\"n\">Completed</span><span class=\"w\"> </span><span class=\"n\">successfully!</span>\n</code></pre></div>",
        "id": 491976539,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736091746
    },
    {
        "content": "<p>So <code>lake</code> doesn't treat noise as an error. I wonder why <span class=\"user-mention\" data-user-id=\"350992\">@Rémy Degenne</span> doesn't see proper errors then.</p>",
        "id": 491977649,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736092685
    },
    {
        "content": "<p>To be clear, I was on commit a36b4f2f1dc49c3c40c95b80d96fbba3f1ec98f1 (21 hours ago), which is before <a href=\"https://github.com/leanprover-community/mathlib4/pull/20464\">#20464</a> was merged (12 hours ago).</p>",
        "id": 491977723,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1736092786
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/6535\">lean#6535</a> tests if we can just remove the linted linker argument</p>",
        "id": 491981942,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736096566
    },
    {
        "content": "<p>I can reproduce</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">argument</span><span class=\"w\"> </span><span class=\"n\">unused</span><span class=\"w\"> </span><span class=\"n\">during</span><span class=\"w\"> </span><span class=\"n\">compilation</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'-</span><span class=\"n\">static</span><span class=\"bp\">-</span><span class=\"n\">libgcc'</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"n\">Wunused</span><span class=\"bp\">-</span><span class=\"n\">command</span><span class=\"bp\">-</span><span class=\"n\">line</span><span class=\"bp\">-</span><span class=\"n\">argument</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>on my windows box at the tag <code>v4.16.0-rc1</code>, and confirm that changing the lean-toolchain to <code>leanprover/lean4-pr-releases:pr-release-6535</code> makes it go away again!</p>\n<p>So I think we will be merging <a href=\"https://github.com/leanprover/lean4/pull/6535\">lean#6535</a> soon, and I'll cut a v4.16.0-rc2 with (at least!!) that.</p>",
        "id": 492001836,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736114234
    },
    {
        "content": "<p>Awesome, thanks for testing!</p>",
        "id": 492001861,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736114266
    },
    {
        "content": "<p>I'm still surprised that that warning, with no other errors, is enough to stop <code>lake exe cache get</code> from working in some cases. Is that really what's happening on Windows? Regardless, fixing the warning is much appreciated, of course.</p>",
        "id": 492002092,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736114445
    },
    {
        "content": "<p>Ah, perhaps it's a combination of this and the other bug for projects depending on mathlib: you get this warning, then <code>cache</code> runs but doesn't actually produce a working cache because of the trace mismatch</p>",
        "id": 492002627,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736114916
    },
    {
        "content": "<p>The warning is likely completely independent of the cache fetch failure given the latter happens on any platform</p>",
        "id": 492005869,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736117942
    },
    {
        "content": "<p>Is the issue that the warning gets recorded in a data file somewhere so that lake can replay it later, and is therefore incorporated into the hash?</p>",
        "id": 492006107,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736118170
    },
    {
        "content": "<p>So platforms with the warning get a different hash to CI which did not have the warning</p>",
        "id": 492006128,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736118193
    },
    {
        "content": "<p>I'm not sure if that is correct or not, but if it is, I will release v4.16.0-rc2 asap (without waiting for other fixes which might take until next week when Mac is back).</p>",
        "id": 492012212,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736124098
    },
    {
        "content": "<p>So far I can not reproduce the failure of <code>lake exe cache get</code> on my windows box. My guess is that <a href=\"https://github.com/leanprover/lean4/pull/6535\">lean#6535</a> is independent of the cache failure, and so we are not justified in making <code>v4.16.0-rc2</code> just for <a href=\"https://github.com/leanprover/lean4/pull/6535\">lean#6535</a>.</p>\n<p>(<span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>, so we won't try out the release checklist today!)</p>",
        "id": 492046507,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736146935
    },
    {
        "content": "<p>We will need to make an <code>rc2</code> later for the cache problems in downstream projects, but that still needs a solution!</p>",
        "id": 492046540,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736146965
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/lake.20exe.20cache.20get.20error/near/492006107\">said</a>:</p>\n<blockquote>\n<p>Is the issue that the warning gets recorded in a data file somewhere so that lake can replay it later, and is therefore incorporated into the hash?</p>\n</blockquote>\n<p>That's a good question. I had assumed that the trace hash is based only on inputs (file contents of the file source and it's dependencies' source, toolchain versions, flags) so that it can be computed ahead of time for the whole tree of jobs (like nix works). In that architecture, the output of one job (whether messages or actual build artifacts) can't affect the trace of depending jobs. But maybe I'm wrong and the trace really takes the dependencies' build artifacts into account.</p>",
        "id": 492073581,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1736158049
    },
    {
        "content": "<p>i also have issues with getting cache... i'm not sure if this is the same error or not though, as i haven't seen part of my error message here yet...</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\"><pre><span></span><code>$ lake exe cache get\ninfo: plausible: cloning https://github.com/leanprover-community/plausible\ninfo: plausible: checking out revision &#39;1622a8693b31523c8f82db48e01b14c74bc1f155&#39;\ninfo: LeanSearchClient: cloning https://github.com/leanprover-community/LeanSearchClient\ninfo: LeanSearchClient: checking out revision &#39;003ff459cdd85de551f4dcf95cdfeefe10f20531&#39;\ninfo: importGraph: cloning https://github.com/leanprover-community/import-graph\ninfo: importGraph: checking out revision &#39;9cb79405471ae931ac718231d6299bfaffef9087&#39;\ninfo: proofwidgets: cloning https://github.com/leanprover-community/ProofWidgets4\ninfo: proofwidgets: checking out revision &#39;07f60e90998dfd6592688a14cd67bd4e384b77b2&#39;\ninfo: aesop: cloning https://github.com/leanprover-community/aesop\ninfo: aesop: checking out revision &#39;79402ad9ab4be9a2286701a9880697e2351e4955&#39;\ninfo: Qq: cloning https://github.com/leanprover-community/quote4\ninfo: Qq: checking out revision &#39;f0c584bcb14c5adfb53079781eeea75b26ebbd32&#39;\ninfo: batteries: cloning https://github.com/leanprover-community/batteries\ninfo: batteries: checking out revision &#39;b2e8b6868397fcd93c00aca7278b933c16c0ffb3&#39;\ninfo: Cli: cloning https://github.com/leanprover/lean4-cli\ninfo: Cli: checking out revision &#39;0c8ea32a15a4f74143e4e1e107ba2c412adb90fd&#39;\nΓ£û [10/10] Building cache\ntrace: .&gt; c:\\Users\\edege\\.elan\\toolchains\\leanprover--lean4---v4.16.0-rc1\\bin\\clang.exe -o .\\.\\.lake\\build\\bin\\cache.exe .\\.\\.lake\\build\\ir\\Cache\\Main.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\IO.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Hashing.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Requests.c.o.noexport -L c:\\Users\\edege\\.elan\\toolchains\\leanprover--lean4---v4.16.0-rc1/lib -static-libgcc -Wl,-Bstatic -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lunwind -Wl,-Bdynamic -fuse-ld=lld -L c:\\Users\\edege\\.elan\\toolchains\\leanprover--lean4---v4.16.0-rc1\\lib\\lean -Wl,--start-group -lleancpp -lLean -Wl,--end-group -lStd -Wl,--start-group -lInit -lleanrt -Wl,--end-group -lc++ -lc++abi -lLake -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lucrtbase -Wl,--stack,104857600 -licu -lm -lbcrypt -pthread\ninfo: stderr:\nclang: warning: argument unused during compilation: &#39;-static-libgcc&#39; [-Wunused-command-line-argument]\nld.lld: error: C:/MinGW/lib/crt2.o: machine type x86 conflicts with x64\nld.lld: error: C:/MinGW/lib/gcc/mingw32/6.3.0/crtbegin.o: machine type x86 conflicts with x64\nld.lld: error: C:/MinGW/lib/gcc/mingw32/6.3.0/crtend.o: machine type x86 conflicts with x64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nerror: external command &#39;c:\\Users\\edege\\.elan\\toolchains\\leanprover--lean4---v4.16.0-rc1\\bin\\clang.exe&#39; exited with code 1\nSome required builds logged failures:\n- cache\nerror: build failed\n</code></pre></div>\n</div></div>\n<p>my machine runs windows.</p>",
        "id": 492074103,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736158236
    },
    {
        "content": "<p>Same issue as I had above: building <code>cache</code> tries to use your own compiler or linker (probably on the path) instead of the one shipped with Lean. Removing your compiler from the path should probably fix it.</p>",
        "id": 492076260,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736159059
    },
    {
        "content": "<p><del>it's not on my path</del> not anymore</p>",
        "id": 492086801,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736163138
    },
    {
        "content": "<p>at least now <code>cache</code> compiles</p>",
        "id": 492086834,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736163158
    },
    {
        "content": "<p>What exactly do you mean by \"not anymore\"? Changing the path in the system settings requires a reboot afaik</p>",
        "id": 492087254,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736163346
    },
    {
        "content": "<p>no, you can just edit them</p>",
        "id": 492087353,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736163372
    },
    {
        "content": "<p>No, not a reboot: just reopening the terminal once you have changed the path is enough.</p>",
        "id": 492087360,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736163375
    },
    {
        "content": "<p>i had to reopen VScode</p>",
        "id": 492087416,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736163404
    },
    {
        "content": "<p>but that might be because of how VScode handles terminals</p>",
        "id": 492087461,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736163423
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/6547\">lean#6547</a> might fix this issue</p>",
        "id": 492089563,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736164275
    },
    {
        "content": "<p>I don’t know if this is the same issue/related (but the timing is suspicious): after updating my lean stuff today after a while, cache also fails to build on NixOS. Tested on mathlib as well as on an other mathlib-dependent project. I see no sign of it picking up the wrong linker or compiler though. Full build failure log is too big for zulip so <a href=\"https://gist.github.com/robin-carlier/019c566a7c715ba9df92fe8ff4b2ebcb\">here’s a gist</a>.</p>",
        "id": 492132096,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1736179150
    },
    {
        "content": "<p>You need to use elan from recent nixpkgs-unstable (and then reinstall the toolchain), see <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/lake.20exe.20cache.20get.20error.20on.20NixOS\">#mathlib4 &gt; lake exe cache get error on NixOS</a></p>",
        "id": 492139336,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736181294
    },
    {
        "content": "<p>Oh, unrelated then, I could have scrolled a bit more in the topic list <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>, thanks! I’ll use the toolchain from that pr</p>",
        "id": 492141458,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1736181962
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> or <span class=\"user-mention\" data-user-id=\"684366\">@Edward van de Meent</span> are either of you able to provide instructions for reproducing this problem? Presumably such instructions should including modifying the windows PATH to <em>include</em> some system compiler and/or linker?</p>\n<p>I would love to be able to reproduce your issue, and verify that <a href=\"https://github.com/leanprover/lean4/pull/6547\">lean#6547</a> fixes it, but despite having a (virtual) windows box available I don't know what to do yet.</p>",
        "id": 492207108,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736205844
    },
    {
        "content": "<p>It would involve installing MingW or Strawberry Perl or whatever contains gcc and ld, and adding it to the path. A simpler way of testing things would be that you give me precise instructions (for dummies :-)  on how to test the branch on my own computer.</p>",
        "id": 492253010,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736233027
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>  it seems <span class=\"user-mention\" data-user-id=\"626349\">@Asei Inoue</span> has a CI step failing because of this, see the link at <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/Updating.20to.204.2E16.2E0-rc1\">#general &gt; Updating to 4.16.0-rc1</a></p>",
        "id": 492286035,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736247081
    },
    {
        "content": "<p>i suspect that at the very least is reproducable</p>",
        "id": 492286126,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736247113
    },
    {
        "content": "<p>maybe not minimal, but it's something</p>",
        "id": 492286210,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736247131
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/287929-mathlib4/topic/lake.20exe.20cache.20get.20error/near/492253010\">said</a>:</p>\n<blockquote>\n<p>It would involve installing MingW or Strawberry Perl or whatever contains gcc and ld, and adding it to the path. A simpler way of testing things would be that you give me precise instructions (for dummies :-)  on how to test the branch on my own computer.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span>, it should just be a matter of checking out <code>lean-pr-testing-6547</code>. Hopefully on <code>master</code> adding or removing the executables from from path makes a difference, but on <code>lean-pr-testing-6547</code> it always works.</p>",
        "id": 492444675,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736319697
    },
    {
        "content": "<p>No, it is still failing.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">Sebastien</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">checkout</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">pr</span><span class=\"bp\">-</span><span class=\"n\">testing</span><span class=\"bp\">-</span><span class=\"mi\">6547</span>\n<span class=\"n\">Switched</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">pr</span><span class=\"bp\">-</span><span class=\"n\">testing</span><span class=\"bp\">-</span><span class=\"mi\">6547</span><span class=\"bp\">'</span>\n<span class=\"n\">Branch</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">pr</span><span class=\"bp\">-</span><span class=\"n\">testing</span><span class=\"bp\">-</span><span class=\"mi\">6547</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">track</span><span class=\"w\"> </span><span class=\"n\">remote</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">pr</span><span class=\"bp\">-</span><span class=\"n\">testing</span><span class=\"bp\">-</span><span class=\"mi\">6547</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">origin'</span><span class=\"bp\">.</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">Sebastien</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">pull</span>\n<span class=\"n\">Already</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">date</span><span class=\"bp\">.</span>\n<span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">Sebastien</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">downloading</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean'</span>\n<span class=\"mf\">335.2</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mf\">335.2</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">100</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"o\">)</span><span class=\"w\">   </span><span class=\"mf\">2.7</span><span class=\"w\"> </span><span class=\"n\">MiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">ETA</span><span class=\"o\">:</span><span class=\"w\">   </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">installing</span><span class=\"w\"> </span><span class=\"n\">component</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">lean'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plausible</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">7</span><span class=\"n\">a6030b92f001a0e08c59c8f39a97cdf32f627ed'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">8</span><span class=\"n\">ab7504dc86b82d7e15c0ad52412e85932e7d4db'</span>\n<span class=\"bp\">Ô£û</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">10</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">Sebastien</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4-pr-releases---pr-release-6547\\bin\\clang.exe -o .\\.\\.lake\\build\\bin\\cache.exe .\\.\\.lake\\build\\ir\\Cache\\Main.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\IO.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Hashing.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Requests.c.o.noexport -L c:\\Users\\Sebastien\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547/lib -Wl,-Bstatic -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lunwind -Wl,-Bdynamic -fuse-ld=lld --ld-path=c:\\Users\\Sebastien\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547/bin/ld.lld -L c:\\Users\\Sebastien\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547\\lib\\lean -Wl,--start-group -lleancpp -lLean -Wl,--end-group -lStd -Wl,--start-group -lInit -lleanrt -Wl,--end-group -lc++ -lc++abi -lLake -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lucrtbase -Wl,--stack,104857600 -licu -lm -lbcrypt -pthread</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">mingw_init_ehandler</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">__</span><span class=\"n\">tmainCRTStartup</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">security_init_cookie</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">l_startw</span><span class=\"o\">)</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">l_start</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_app_type</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_app_type</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initcharmax</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initcharmax</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initltssuo_force</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initltssuo_force</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initltsdyn_force</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initltsdyn_force</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initltsdrot_force</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initltsdrot_force</span><span class=\"o\">)</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">invocation</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">Sebastien</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4-pr-releases---pr-release-6547\\bin\\clang.exe' exited with code 1</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">builds</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n</code></pre></div>",
        "id": 492445812,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736320414
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> Could you please run the traced cmdline with <code>-v</code> appended?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">Sebastien</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4-pr-releases---pr-release-6547\\bin\\clang.exe -o .\\.\\.lake\\build\\bin\\cache.exe .\\.\\.lake\\build\\ir\\Cache\\Main.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\IO.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Hashing.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Requests.c.o.noexport -L c:\\Users\\Sebastien\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547/lib -Wl,-Bstatic -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lunwind -Wl,-Bdynamic -fuse-ld=lld --ld-path=c:\\Users\\Sebastien\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547/bin/ld.lld -L c:\\Users\\Sebastien\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547\\lib\\lean -Wl,--start-group -lleancpp -lLean -Wl,--end-group -lStd -Wl,--start-group -lInit -lleanrt -Wl,--end-group -lc++ -lc++abi -lLake -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lucrtbase -Wl,--stack,104857600 -licu -lm -lbcrypt -pthread -v</span>\n</code></pre></div>",
        "id": 492458460,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736326240
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sgouezel_A</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">&gt;</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sgouezel_A</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4-pr-releases---pr-release-6547\\bin\\clang.exe -o .\\.\\.lake\\build\\bin\\cache.exe .\\.\\.lake\\build\\ir\\Cache\\Main.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\IO.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Hashing.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Requests.c.o.noexport -L c:\\Users\\sgouezel_A\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547/lib -Wl,-Bstatic -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lunwind -Wl,-Bdynamic -fuse-ld=lld --ld-path=c:\\Users\\sgouezel_A\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547/bin/ld.lld -L c:\\Users\\sgouezel_A\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547\\lib\\lean -Wl,--start-group -lleancpp -lLean -Wl,--end-group -lStd -Wl,--start-group -lInit -lleanrt -Wl,--end-group -lc++ -lc++abi -lLake -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lucrtbase -Wl,--stack,104857600 -licu -lm -lbcrypt -pthread -v</span>\n<span class=\"n\">clang</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">15.0</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"n\">Target</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">windows</span><span class=\"bp\">-</span><span class=\"n\">gnu</span>\n<span class=\"n\">Thread</span><span class=\"w\"> </span><span class=\"n\">model</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">posix</span>\n<span class=\"n\">InstalledDir</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">sgouezel_A</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4-pr-releases---pr-release-6547/bin</span>\n<span class=\"w\"> </span><span class=\"s2\">\"c:</span><span class=\"se\">\\\\</span><span class=\"s2\">Users</span><span class=\"se\">\\\\</span><span class=\"s2\">sgouezel_A</span><span class=\"se\">\\\\</span><span class=\"s2\">.elan</span><span class=\"se\">\\\\</span><span class=\"s2\">toolchains</span><span class=\"se\">\\\\</span><span class=\"s2\">leanprover--lean4-pr-releases---pr-release-6547/bin/ld.lld\"</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">i386pep</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">Bdynamic</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"s2\">\".</span><span class=\"se\">\\\\</span><span class=\"s2\">.</span><span class=\"se\">\\\\</span><span class=\"s2\">.lake</span><span class=\"se\">\\\\</span><span class=\"s2\">build</span><span class=\"se\">\\\\</span><span class=\"s2\">bin</span><span class=\"se\">\\\\</span><span class=\"s2\">cache.exe\"</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">gcc</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"mf\">8.3</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">/</span><span class=\"n\">crtbegin</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"s2\">\"-Lc:</span><span class=\"se\">\\\\</span><span class=\"s2\">Users</span><span class=\"se\">\\\\</span><span class=\"s2\">sgouezel_A</span><span class=\"se\">\\\\</span><span class=\"s2\">.elan</span><span class=\"se\">\\\\</span><span class=\"s2\">toolchains</span><span class=\"se\">\\\\</span><span class=\"s2\">leanprover--lean4-pr-releases---pr-release-6547/lib\"</span><span class=\"w\"> </span><span class=\"s2\">\"-Lc:</span><span class=\"se\">\\\\</span><span class=\"s2\">Users</span><span class=\"se\">\\\\</span><span class=\"s2\">sgouezel_A</span><span class=\"se\">\\\\</span><span class=\"s2\">.elan</span><span class=\"se\">\\\\</span><span class=\"s2\">toolchains</span><span class=\"se\">\\\\</span><span class=\"s2\">leanprover--lean4-pr-releases---pr-release-6547</span><span class=\"se\">\\\\</span><span class=\"s2\">lib</span><span class=\"se\">\\\\</span><span class=\"s2\">lean\"</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">LC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">gcc</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"mf\">8.3</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">LC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">LC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">mingw</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">LC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">LC</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">sys</span><span class=\"bp\">-</span><span class=\"n\">root</span><span class=\"bp\">/</span><span class=\"n\">mingw</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">Lc</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">sgouezel_A</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4-pr-releases---pr-release-6547/lib/clang/15.0.1/lib/windows \".\\\\.\\\\.lake\\\\build\\\\ir\\\\Cache\\\\Main.c.o.noexport\" \".\\\\.\\\\.lake\\\\build\\\\ir\\\\Cache\\\\IO.c.o.noexport\" \".\\\\.\\\\.lake\\\\build\\\\ir\\\\Cache\\\\Hashing.c.o.noexport\" \".\\\\.\\\\.lake\\\\build\\\\ir\\\\Cache\\\\Requests.c.o.noexport\" -Bstatic -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lunwind -Bdynamic --start-group -lleancpp -lLean --end-group -lStd --start-group -lInit -lleanrt --end-group -lc++ -lc++abi -lLake -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lucrtbase --stack 104857600 -licu -lm -lbcrypt -lmingw32 c:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/lib/clang/15.0.1/lib/windows/libclang_rt.builtins-x86_64.a -lmoldname -lmingwex -lpthread -ladvapi32 -lshell32 -luser32 -lkernel32 -lmingw32 c:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/lib/clang/15.0.1/lib/windows/libclang_rt.builtins-x86_64.a -lmoldname -lmingwex -lkernel32 C:/Strawberry/c/lib/gcc/x86_64-w64-mingw32/8.3.0/crtend.o</span>\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">mingw_init_ehandler</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">__</span><span class=\"n\">tmainCRTStartup</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">security_init_cookie</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">l_startw</span><span class=\"o\">)</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">l_start</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_app_type</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_app_type</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initcharmax</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initcharmax</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initltssuo_force</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initltssuo_force</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initltsdyn_force</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initltsdyn_force</span><span class=\"o\">)</span>\n\n<span class=\"n\">ld</span><span class=\"bp\">.</span><span class=\"n\">lld</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mingw_initltsdrot_force</span>\n<span class=\"bp\">&gt;&gt;&gt;</span><span class=\"w\"> </span><span class=\"n\">referenced</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Strawberry</span><span class=\"bp\">/</span><span class=\"n\">c</span><span class=\"bp\">/</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">mingw32</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">crt2</span><span class=\"bp\">.</span><span class=\"n\">o</span><span class=\"o\">:(</span><span class=\"bp\">.</span><span class=\"n\">refptr</span><span class=\"bp\">.</span><span class=\"n\">mingw_initltsdrot_force</span><span class=\"o\">)</span>\n<span class=\"n\">clang</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">linker</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">invocation</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 492462532,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736327696
    },
    {
        "content": "<p>I can try as many command lines as you want to see if you can find a combination of flags ensuring the <code>Strawberry</code> directories are not included in the search path :-)</p>",
        "id": 492462918,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736327850
    },
    {
        "content": "<p>(Don't be surprised by the change from <code>Sebastien</code> to <code>sgouezel_A</code> directory, I am on a different computer -- but the very same problem shows up)</p>",
        "id": 492463145,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736327931
    },
    {
        "content": "<p>(A hack would be to empty the path before compiling :-)</p>",
        "id": 492464276,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736328244
    },
    {
        "content": "<p>Wow, I'm surprised LLVM would use <code>PATH</code> to look up object files...?</p>",
        "id": 492464828,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736328435
    },
    {
        "content": "<p>Just for the record, emptying the path works fine:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sgouezel_A</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">&gt;</span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">PATH</span><span class=\"bp\">=</span>\n\n<span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sgouezel_A</span><span class=\"bp\">\\</span><span class=\"n\">Desktop</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">&gt;</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">sgouezel_A</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4-pr-releases---pr-release-6547\\bin\\clang.exe -o .\\.\\.lake\\build\\bin\\cache.exe .\\.\\.lake\\build\\ir\\Cache\\Main.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\IO.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Hashing.c.o.noexport .\\.\\.lake\\build\\ir\\Cache\\Requests.c.o.noexport -L c:\\Users\\sgouezel_A\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547/lib -Wl,-Bstatic -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lunwind -Wl,-Bdynamic -fuse-ld=lld --ld-path=c:\\Users\\sgouezel_A\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547/bin/ld.lld -L c:\\Users\\sgouezel_A\\.elan\\toolchains\\leanprover--lean4-pr-releases---pr-release-6547\\lib\\lean -Wl,--start-group -lleancpp -lLean -Wl,--end-group -lStd -Wl,--start-group -lInit -lleanrt -Wl,--end-group -lc++ -lc++abi -lLake -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lucrtbase -Wl,--stack,104857600 -licu -lm -lbcrypt -pthread -v</span>\n<span class=\"n\">clang</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">15.0</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"n\">Target</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">w64</span><span class=\"bp\">-</span><span class=\"n\">windows</span><span class=\"bp\">-</span><span class=\"n\">gnu</span>\n<span class=\"n\">Thread</span><span class=\"w\"> </span><span class=\"n\">model</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">posix</span>\n<span class=\"n\">InstalledDir</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">sgouezel_A</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4-pr-releases---pr-release-6547/bin</span>\n<span class=\"w\"> </span><span class=\"s2\">\"c:</span><span class=\"se\">\\\\</span><span class=\"s2\">Users</span><span class=\"se\">\\\\</span><span class=\"s2\">sgouezel_A</span><span class=\"se\">\\\\</span><span class=\"s2\">.elan</span><span class=\"se\">\\\\</span><span class=\"s2\">toolchains</span><span class=\"se\">\\\\</span><span class=\"s2\">leanprover--lean4-pr-releases---pr-release-6547/bin/ld.lld\"</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">i386pep</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">Bdynamic</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"s2\">\".</span><span class=\"se\">\\\\</span><span class=\"s2\">.</span><span class=\"se\">\\\\</span><span class=\"s2\">.lake</span><span class=\"se\">\\\\</span><span class=\"s2\">build</span><span class=\"se\">\\\\</span><span class=\"s2\">bin</span><span class=\"se\">\\\\</span><span class=\"s2\">cache.exe\"</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">Users</span><span class=\"bp\">/</span><span class=\"n\">sgouezel_A</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4-pr-releases---pr-release-6547/lib/crt2.o c:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/lib/crtbegin.o \"-Lc:\\\\Users\\\\sgouezel_A\\\\.elan\\\\toolchains\\\\leanprover--lean4-pr-releases---pr-release-6547/lib\" \"-Lc:\\\\Users\\\\sgouezel_A\\\\.elan\\\\toolchains\\\\leanprover--lean4-pr-releases---pr-release-6547\\\\lib\\\\lean\" -Lc:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/x86_64-w64-mingw32/lib -Lc:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/x86_64-w64-mingw32/mingw/lib -Lc:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/lib -Lc:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/x86_64-w64-mingw32/sys-root/mingw/lib -Lc:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/lib/clang/15.0.1/lib/windows \".\\\\.\\\\.lake\\\\build\\\\ir\\\\Cache\\\\Main.c.o.noexport\" \".\\\\.\\\\.lake\\\\build\\\\ir\\\\Cache\\\\IO.c.o.noexport\" \".\\\\.\\\\.lake\\\\build\\\\ir\\\\Cache\\\\Hashing.c.o.noexport\" \".\\\\.\\\\.lake\\\\build\\\\ir\\\\Cache\\\\Requests.c.o.noexport\" -Bstatic -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lunwind -Bdynamic --start-group -lleancpp -lLean --end-group -lStd --start-group -lInit -lleanrt --end-group -lc++ -lc++abi -lLake -lgmp -luv -lpsapi -luser32 -ladvapi32 -liphlpapi -luserenv -lws2_32 -ldbghelp -lole32 -lshell32 -lucrtbase --stack 104857600 -licu -lm -lbcrypt -lmingw32 c:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/lib/clang/15.0.1/lib/windows/libclang_rt.builtins-x86_64.a -lmoldname -lmingwex -lpthread -ladvapi32 -lshell32 -luser32 -lkernel32 -lmingw32 c:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/lib/clang/15.0.1/lib/windows/libclang_rt.builtins-x86_64.a -lmoldname -lmingwex -lkernel32 c:/Users/sgouezel_A/.elan/toolchains/leanprover--lean4-pr-releases---pr-release-6547/lib/crtend.o</span>\n</code></pre></div>",
        "id": 492465301,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736328599
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> Could you please try lean-pr-testing-6574 instead?</p>",
        "id": 492498132,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736340776
    },
    {
        "content": "<p>It works!</p>",
        "id": 492498482,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736340895
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 492498704,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736340966
    },
    {
        "content": "<p>Something strange happening (on Windows) today after mergin latest mathlib (4e6cc37012f75c9de40476ad722f02512a8b1f09, probably already happening with 89f60e1045dca9bba5a7d8706ec160706782d7ef):</p>\n<blockquote>\n<p>PS C:\\Users\\xujys\\mathlib4&gt; lake exe cache get<br>\ninfo: downloading component 'lean'<br>\n260.5 MiB / 260.5 MiB (100 %)  24.4 MiB/s ETA:   0 s<br>\ninfo: installing component 'lean'<br>\nerror: toolchain 'leanprover/lean4:v4.16.0-rc1' does not have the binary <code>C:\\Users\\xujys\\.elan\\toolchains\\leanprover--lean4---v4.16.0-rc1\\bin\\lake.exe</code></p>\n</blockquote>\n<blockquote>\n<p>PS C:\\Users\\xujys\\mathlib4&gt; elan update<br>\ninfo: syncing channel updates for 'stable'<br>\ninfo: latest update on stable, lean version v4.15.0<br>\ninfo: downloading component 'lean'<br>\n252.2 MiB / 252.2 MiB (100 %)  39.2 MiB/s ETA:   0 s<br>\ninfo: installing component 'lean'<br>\nerror: could not remove 'toolchain directory' directory: 'C:\\Users\\xujys\\.elan\\toolchains\\leanprover--lean4---stable'</p>\n<p>leanprover/lean4:stable update failed - Lean (version 4.2.0, commit 0d7051497ea0, Release)</p>\n<p>error: could not create link from 'C:\\Users\\xujys\\.elan\\bin\\elan.exe' to 'C:\\Users\\xujys\\.elan\\bin\\lake.exe'</p>\n</blockquote>",
        "id": 492565348,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1736362306
    },
    {
        "content": "<p>Eventually, I found a folder <code>leanprover--lean4---v4.16.tmp</code> under <code>.elan/toolchains</code> and copied its content into <code>leanprover--lean4---v4.16.0-rc1</code>, then <code>lake exe cache get</code> works again.</p>",
        "id": 492565478,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1736362352
    },
    {
        "content": "<p>We've had this error before but the <code>tmp</code> information is new, thanks! Unfortunately it is still mysterious to me: what we are doing is to unpack the toolchain into the <code>tmp</code> directory, then rename it: <a href=\"https://github.com/leanprover/elan/blob/master/src/elan-dist/src/manifestation.rs#L108-L132\">https://github.com/leanprover/elan/blob/master/src/elan-dist/src/manifestation.rs#L108-L132</a>. Your first cmdline doesn't show any error in this part of the code. So how could we end up with a whole tmp and a partial final directory?</p>",
        "id": 492670794,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736414206
    },
    {
        "content": "<p>I'm not sure; leanprover--lean4---v4.16.0-rc1 contained only a <code>src</code> folder.</p>",
        "id": 492684685,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1736418146
    },
    {
        "content": "<p>I haven't followed the discussion in detail; sorry if this is obvious:<br>\nIs it safe now to update to the latest Mathlib in a project that depends on it (without having to then build all of Mathlib locally)?</p>",
        "id": 492738262,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1736433518
    },
    {
        "content": "<p>No. You should stay on 4.15.0 for now.</p>",
        "id": 492740090,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736433982
    },
    {
        "content": "<p>Is there some indication regarding how long it will take for the problem to be resolved?</p>",
        "id": 492742173,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1736434498
    },
    {
        "content": "<p>I don't even know if the cause of the problem has been identified...</p>",
        "id": 492742988,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1736434714
    },
    {
        "content": "<p>The change that caused the problem is very likely <a href=\"https://github.com/leanprover/lean4/pull/6388\">lean4#6388</a>. It extensively refactored the trace calculation</p>",
        "id": 492744199,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736435023
    },
    {
        "content": "<p>But reverting it is a bit annoying since it includes tons of API changes</p>",
        "id": 492744452,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736435078
    },
    {
        "content": "<p>Lake code is very hard to understand (architecturally speaking) in a few hours, so if I understand correctly the current status is \"waiting for Mac to come back from holidays\"</p>",
        "id": 492744885,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736435192
    },
    {
        "content": "<p>Hoping for a fix and then a <code>v4.16.0-rc2</code> early next week.</p>",
        "id": 492844166,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736467372
    },
    {
        "content": "<p>Note that if the CI adjustment <a href=\"https://github.com/leanprover-community/mathlib4/pull/20532\">#20532</a> had been in place, we would have caught this well before releasing <code>v4.16.0-rc1</code>. If anyone can think of further ways to more robustly test the behaviour of Mathlib with respect to downstream projects, within Mathlib CI, I would love to see these implemented!</p>",
        "id": 492844349,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736467457
    },
    {
        "content": "<p>Do also consider having your project follow Mathlib <code>stable</code> instead of <code>master</code> if you don't want to be among the first to be exposed to new issues from either Lean or Mathlib :)</p>",
        "id": 492908953,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1736501151
    },
    {
        "content": "<p>My use case is that I'm developing stuff that I want to get into Mathlib successively, so that whenever one of the PRs gets merged, I want to update Mathlib in my project so that I can remove the parts that have been upstreamed. For this it doesn't help so much to be restricted to the once-in-a-while stable releases; I need the finer granularity.</p>",
        "id": 492914381,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1736503024
    },
    {
        "content": "<p>Small update: I've nuked the <code>.lake</code> directory 3-4 times in the last few days, each time after checking out some branch with recent <code>master</code> merged into it. Error messages are like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">PS</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">xujys</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plausible</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">1622</span><span class=\"n\">a8693b31523c8f82db48e01b14c74bc1f155'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">importGraph</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">9</span><span class=\"n\">cb79405471ae931ac718231d6299bfaffef9087'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">07</span><span class=\"n\">f60e90998dfd6592688a14cd67bd4e384b77b2'</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">compiled</span><span class=\"w\"> </span><span class=\"n\">configuration</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">'-</span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">reconfigure</span>\n</code></pre></div>\n<p>Compared to <a href=\"#narrow/channel/287929-mathlib4/topic/lake.20exe.20cache.20get.20error/near/491975060\">my previous report</a> there's no \"info: installing component 'lean'\" step but these \"checking out revision\" info were new.</p>",
        "id": 492930241,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1736508537
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/lake.20exe.20cache.20get.20error/near/492930241\">said</a>:</p>\n<blockquote>\n<p>I've nuked the <code>.lake</code> directory 3-4 times in the last few days,</p>\n</blockquote>\n<p><em>by</em> running <code>lake exe cache get</code> or <em>before</em> running it?</p>",
        "id": 492930492,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736508624
    },
    {
        "content": "<p>Each time I ran <code>lake exe cache get</code>, got the error</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">compiled</span><span class=\"w\"> </span><span class=\"n\">configuration</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">'-</span><span class=\"n\">R'</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">reconfigure</span>\n</code></pre></div>\n<p>and my current solution to the error is to nuke <code>.lake</code>.</p>",
        "id": 492931627,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1736509012
    },
    {
        "content": "<p>I also got the same error after merging an old PR into the latest Mathlib master just now (on version <code>leanprover/lean4:v4.17.0-rc1</code>)</p>",
        "id": 500928074,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1740070743
    }
]