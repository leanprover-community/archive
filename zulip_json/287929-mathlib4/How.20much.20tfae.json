[
    {
        "content": "<p>What's a reasonable amount of lemmas to have for a <code>TFAE</code>? I'm assuming 17 is too many. Which ones should I keep?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Coherent</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Specialization</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">alexandrovDiscrete_tfae</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">tX</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">[</span>\n<span class=\"w\">      </span><span class=\"n\">AlexandrovDiscrete</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋂₀</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">),</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">IsClosed</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">IsClosed</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋃₀</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">),</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">nhds</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">⋂₀</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">nhds</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">nhds</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">ker</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">nhds</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">exterior</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"o\">}),</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">exterior</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">),</span>\n<span class=\"w\">      </span><span class=\"n\">tX</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">upperSet</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">specializationPreorder</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span>\n<span class=\"w\">      </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">tX</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">upperSet</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">tX</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">lowerSet</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"n\">interior</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋂₀</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⋂</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">interior</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋃₀</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⋃</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">toSet</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">⤳</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">⤳</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">@</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">IsCoherentWith</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">tX</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">setOf</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"o\">),</span>\n<span class=\"w\">      </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">↑</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⁻¹'</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">]</span><span class=\"bp\">.</span><span class=\"n\">TFAE</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- proof omitted</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 515734694,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746198020
    },
    {
        "content": "<p>Why is it too many?</p>",
        "id": 515740001,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1746199568
    },
    {
        "content": "<p>Hot take: you should not use a TFAE here at all</p>",
        "id": 515740646,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746199770
    },
    {
        "content": "<p>This should be a series of lemmas of the form <code>alexandrovDiscrete_iff_foo</code></p>",
        "id": 515740705,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746199787
    },
    {
        "content": "<p>(you can use a <code>private</code> tfae internally if it helps you set up the API, but it's not a good interface for referring to the result later)</p>",
        "id": 515740808,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746199809
    },
    {
        "content": "<p>Not sure it should be private, it's nice to have it show up in the docs (like it would appear in books)<br>\nThe <code>tfae</code> tactics are definitely very useful in proving TFAEs.</p>",
        "id": 515741079,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1746199895
    },
    {
        "content": "<p>I have an issue with putting TFAE at the end; wouldn't that be TAAE instead? If you don't want the <code>List.</code> you can <code>open List (TFAE)</code>.</p>",
        "id": 515741261,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1746199940
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/How.20much.20tfae/near/515740646\">said</a>:</p>\n<blockquote>\n<p>Hot take: you should not use a TFAE here at all</p>\n</blockquote>\n<p>It's so I can prove the result without pain, eg. I have a loop <code>1 → 15 → 8 → 14 → 17 → 2 ↔ 1</code>, so it's easier to get the iff by having the TFAE.</p>",
        "id": 515744593,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746200945
    },
    {
        "content": "<p>RIght, that's what I mean by \"internally if it helps set things up\"</p>",
        "id": 515745877,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746201327
    },
    {
        "content": "<p>I think it's worth having, but probably <em>also</em> to have iffs for each with the preferred spelling (which is probably <code>AlexandrovDiscrete X</code>)</p>",
        "id": 515745922,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1746201346
    },
    {
        "content": "<p>But only put the things in it that actually help, the goal is not to try and make the tfae exhaustive, as that's what the API is for</p>",
        "id": 515745932,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746201349
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/How.20much.20tfae/near/515745932\">said</a>:</p>\n<blockquote>\n<p>But only put the things in it that actually help, the goal is not to try and make the tfae exhaustive, as that's what the API is for</p>\n</blockquote>\n<p>How do I know what helps?</p>",
        "id": 515746352,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746201487
    },
    {
        "content": "<p>Make the <code>TFAE</code> be <code>1 → 15 → 8 → 14 → 17 → 2 ↔ 1</code>, expose <code>15 ↔  1</code>, <code>8 ↔  1</code>, <code>14 ↔  1</code>, <code>17 ↔  1</code>, <code>2 ↔  1</code> as separate lemmas, use those separate lemmas for the remainder of the statements you have in your list.</p>",
        "id": 515765030,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1746207413
    },
    {
        "content": "<p>ok let me collect all my tfae lemmas here so you can see why I don't know which ones are \"necessary\"</p>\n<ul>\n<li><code>1 ↔ 2</code></li>\n<li><code>8 → 9</code></li>\n<li><code>1 → 15</code></li>\n<li><code>1 → 11</code></li>\n<li><code>1 → 12</code></li>\n<li><code>1 → 3</code></li>\n<li><code>9 ↔ 10</code></li>\n<li><code>9 → 2</code></li>\n<li><code>7 → 6</code></li>\n<li><code>2 → 7</code></li>\n<li><code>3 → 2</code></li>\n<li><code>6 → 5</code></li>\n<li><code>17 → 2</code></li>\n<li><code>16 → 17</code></li>\n<li><code>17 → 16</code></li>\n<li><code>15 → 8</code></li>\n<li><code>11 → 2</code></li>\n<li><code>12 → 11</code></li>\n<li><code>4 → 5</code></li>\n<li><code>5 → 2</code></li>\n<li><code>2 → 4</code></li>\n<li><code>8 → 14</code></li>\n<li><code>13 ↔ 14</code></li>\n<li><code>14 → 17</code></li>\n</ul>",
        "id": 515765758,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746207670
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/FWNkvfideLFpu61Sq4BlayA_/Screenshot-2025-05-02-at-10.43.07AM.png\">Screenshot 2025-05-02 at 10.43.07 AM.png</a> Here is a flowchart if that helps</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/FWNkvfideLFpu61Sq4BlayA_/Screenshot-2025-05-02-at-10.43.07AM.png\" title=\"Screenshot 2025-05-02 at 10.43.07 AM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1208x1552\" src=\"/user_uploads/thumbnail/3121/FWNkvfideLFpu61Sq4BlayA_/Screenshot-2025-05-02-at-10.43.07AM.png/840x560.webp\"></a></div>",
        "id": 515766118,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1746207796
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"282271\">Bolton Bailey</span> <a href=\"#narrow/channel/287929-mathlib4/topic/How.20much.20tfae/near/515766118\">said</a>:</p>\n<blockquote>\n<p><a href=\"/user_uploads/3121/FWNkvfideLFpu61Sq4BlayA_/Screenshot-2025-05-02-at-10.43.07AM.png\">Screenshot 2025-05-02 at 10.43.07 AM.png</a></p>\n</blockquote>\n<p>neat</p>",
        "id": 515766160,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746207811
    },
    {
        "content": "<p>so to me it's still not very clear which ones are the main results</p>",
        "id": 515766487,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746207914
    },
    {
        "content": "<p>and it looks like I can delete <code>1 → 2</code> and <code>1 → 11</code>, making my proof 1 line shorter (it's 200 lines long)</p>",
        "id": 515766668,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746207978
    },
    {
        "content": "<p>I'd perhaps suggest making the 1,2,3 loop (since 1 is the canonical spelling) with TFAE, then adding the two API lemmas, then doing a TFAE for the remainder of the graph with those edged contracted.</p>",
        "id": 515773336,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746210290
    },
    {
        "content": "<p>10, 13, and 16 could be dropped from it entirely</p>",
        "id": 515773484,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746210353
    },
    {
        "content": "<p>I'm thinking I'll just put the tfae in and then add a bunch of <code>alexandrovDiscrete_iff_foo</code> lemmas right after</p>",
        "id": 515780787,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746212936
    },
    {
        "content": "<p>I claim that TFAEs, while hard to apply and should definitely have the iff lemmas succeeding it, is a nice way to present the results and is good for discoverability and thus should be kept.</p>",
        "id": 515805675,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1746223327
    },
    {
        "content": "<p>btw, where should this go? In <a href=\"https://tqft.net/mathlib4files/Topology/AlexandrovDiscrete\">file#Topology/AlexandrovDiscrete</a>, or in a new file?</p>",
        "id": 515806302,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746223653
    },
    {
        "content": "<p>If some of the proofs need more machinery than others, this might be good evidence not to put everything in a TFAE</p>",
        "id": 515806413,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746223698
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/stream/287929-mathlib4/topic/How.20much.20tfae/near/515805675\">said</a>:</p>\n<blockquote>\n<p>I claim that TFAEs, while hard to apply and should definitely have the iff lemmas succeeding it, is a nice way to present the results and is good for discoverability and thus should be kept.</p>\n</blockquote>\n<p>I'd argue the discoverability mechanism here is <code>@loogle AlexandrovDiscrete _ \\iff _</code></p>",
        "id": 515806746,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746223900
    },
    {
        "content": "<p>The problem is that <code>Topology.upperSet</code>, used in the statement, is defined in a later file.</p>",
        "id": 515806752,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746223905
    },
    {
        "content": "<p>Then you should definitely prove the 1-2-3 loop separately, in an earlier file</p>",
        "id": 515806843,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746223933
    },
    {
        "content": "<p>I don't think it is reasonable to assume that an external tool which requires internet access and requests to online servers should be the main discoverability mechanism.</p>",
        "id": 515807796,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1746224426
    },
    {
        "content": "<p>Loogle can be used offline, just like the docs can</p>",
        "id": 515807956,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746224521
    },
    {
        "content": "<p>And frankly a grep would be equally effective here</p>",
        "id": 515808020,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746224539
    },
    {
        "content": "<p>(which is also what you'd do to find the TFAE, but there the grep is more complicated)</p>",
        "id": 515808146,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746224613
    },
    {
        "content": "<p>But a bunch of iffs scattered in different places each perhaps with different side conditions that you need to check one by one is less straightforward to users (at least to me) compared to say two big lists of tfaes where one has one side condition and one has the other.</p>",
        "id": 515808599,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1746224832
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/How.20much.20tfae/near/515807956\">said</a>:</p>\n<blockquote>\n<p>Loogle can be used offline, just like the docs can</p>\n</blockquote>\n<p>And (perhaps off topic but) how do I do this?</p>",
        "id": 515808642,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1746224860
    },
    {
        "content": "<p>I think the reality of mathlib is that it's not wise or even possible to put all the Iffs that you could possibly care about in once place</p>",
        "id": 515808871,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746224987
    },
    {
        "content": "<p>(I suggest a new thread for the loogle question)</p>",
        "id": 515808955,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746225011
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/How.20much.20tfae/near/515808871\">said</a>:</p>\n<blockquote>\n<p>I think the reality of mathlib is that it's not wise or even possible to put all the Iffs that you could possibly care about in once place</p>\n</blockquote>\n<p>So this is why you put a tfae at the end to point to all the iff lemmas proved somewhere in the library.</p>",
        "id": 515809574,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1746225367
    },
    {
        "content": "<p>But then the file this TFAE lives in is unimportable, since all its constituent parts have fewer dependencies</p>",
        "id": 515809655,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1746225425
    },
    {
        "content": "<p>\"at the end\" here has to mean \"at the end of the import (sub)graph\" not \"at the end of the file\"</p>",
        "id": 515809897,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746225585
    },
    {
        "content": "<p>At which point, what makes it discoverable?</p>",
        "id": 515809914,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746225599
    },
    {
        "content": "<p>As in you don't need to remember all the iff lemmas scattered around the library and you can just remember one declaration and consult that when necessary.</p>",
        "id": 515810046,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1746225658
    },
    {
        "content": "<p>So what should I do with this proof?</p>",
        "id": 515812586,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746227126
    },
    {
        "content": "<p>My vote would be split it</p>",
        "id": 515816885,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746229798
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"548935\">@Thomas Murrills</span> not sure if that extension is still on your radar, but if so, this seems like a good test case.</p>",
        "id": 515818048,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1746230480
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/How.20much.20tfae/near/515816885\">said</a>:</p>\n<blockquote>\n<p>My vote would be split it</p>\n</blockquote>\n<p>What should I split it into?</p>",
        "id": 515820005,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746231635
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/stream/287929-mathlib4/topic/How.20much.20tfae/near/515818048\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"548935\">Thomas Murrills</span> not sure if that extension is still on your radar, but if so, this seems like a good test case.</p>\n</blockquote>\n<p>I haven’t worked on it lately, but it still is on my radar! I’ve been lurking in this thread and thinking the same thing… <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 515820237,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1746231793
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/stream/287929-mathlib4/topic/How.20much.20tfae/near/515820005\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/How.20much.20tfae/near/515816885\">said</a>:</p>\n<blockquote>\n<p>My vote would be split it</p>\n</blockquote>\n<p>What should I split it into?</p>\n</blockquote>\n<p>Put the 1-2-3 cycle (and anything else that fits) into the existing file, and everything else into a new file with heavier imports.</p>",
        "id": 515841508,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1746245170
    }
]