[
    {
        "content": "<p>I've always been sad about theorem names with primes. Sometimes though it is really hard to come up with a better name.</p>\n<p>How about we add a linter that requires that theorem names ending with a prime have a doc-string. The linter error should explain that the doc-string should at least explain how the statement differs from the unprimed version, and possibly explain why no better naming scheme is possible. (Thereby forcing people to think about it before just going with a prime!)</p>\n<p>Of course we would have to nolint or set_option all the existing primed lemmas.</p>",
        "id": 469234466,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726012137
    },
    {
        "content": "<p>Or fix all the existing primed lemmas!</p>",
        "id": 469239926,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1726014385
    },
    {
        "content": "<p>Thanks, Bhavik, looking forward to merging your PR. :-)</p>",
        "id": 469259539,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726022463
    },
    {
        "content": "<p>This will add a massive entry in our technical-debt-counters table</p>",
        "id": 469265292,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726024351
    },
    {
        "content": "<p>Better late than never?</p>",
        "id": 469265410,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726024423
    },
    {
        "content": "<p>Yeah, I didn't mean to suggest that we shouldn't do this <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 469268235,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726025406
    },
    {
        "content": "<p>I'm looking into this!</p>",
        "id": 469279012,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726029414
    },
    {
        "content": "<p>Should the doc-string of the <code>'</code> declaration explicitly mention the un-primed declaration (whether it exists or not), or is it enough for it to have a doc-string?</p>",
        "id": 469279099,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726029451
    },
    {
        "content": "<p>I think it would be okay to merely enforce having a doc-string.</p>",
        "id": 469280102,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726029884
    },
    {
        "content": "<p>If people want to say \"this differs from the unprimed version by ...\" I don't think we want to police that.</p>",
        "id": 469280130,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726029901
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/16694\">#16694</a></p>",
        "id": 469284670,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726031742
    },
    {
        "content": "<p>It is doing its very first run, so I expect some issues to surface!  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 469284740,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726031763
    },
    {
        "content": "<p>... such as forgetting to import it in <code>Mathlib.Init</code>. <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span></p>",
        "id": 469284922,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726031890
    },
    {
        "content": "<p>Should the current exceptions be flagged with <code>set_option</code> or should there be a nolint file containing them?</p>",
        "id": 469285323,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726032084
    },
    {
        "content": "<p>By the way, I set up the linter to catch <code>'</code> <em>anywhere</em> in their name.  Is this ok, or were you thinking of just <em>terminal</em> <code>'</code>?</p>",
        "id": 469286623,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726032559
    },
    {
        "content": "<p>A rough estimate is that there are</p>\n<ul>\n<li>~8k exceptions with a <code>'</code> anywhere, and</li>\n<li>~6k exceptions with a terminal <code>'</code>.</li>\n</ul>",
        "id": 469287967,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726033172
    },
    {
        "content": "<p>Wow... that is a lot of exceptions. :-(</p>",
        "id": 469293019,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726035671
    },
    {
        "content": "<p>Ok, there are really 6119 exception in Mathlib.</p>",
        "id": 469293273,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726035799
    },
    {
        "content": "<p>We can't possibly do that with <code>set_option</code>, I think. I don't know, I'd want to have buy in from everyone before adding that many <code>set_option</code>s...</p>",
        "id": 469293327,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726035829
    },
    {
        "content": "<p>and 4811 with a terminal <code>'</code>-</p>",
        "id": 469293367,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726035841
    },
    {
        "content": "<p>The exceptions are distributed over 1419 files, so even blanket exceptions at the beginning of the files may not cut it...</p>",
        "id": 469293584,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726035934
    },
    {
        "content": "<p>The files with at least 20 exceptions:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"mi\">20</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Group</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">20</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Geometry</span><span class=\"bp\">/</span><span class=\"n\">Manifold</span><span class=\"bp\">/</span><span class=\"n\">SmoothManifoldWithCorners</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">20</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">20</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Topology</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">OrderClosed</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">21</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Homology</span><span class=\"bp\">/</span><span class=\"n\">ShortComplex</span><span class=\"bp\">/</span><span class=\"n\">Preadditive</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">22</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">Nat</span><span class=\"bp\">/</span><span class=\"n\">Defs</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">22</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Topology</span><span class=\"bp\">/</span><span class=\"n\">ContinuousOn</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">22</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Topology</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">23</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Topology</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">24</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Homology</span><span class=\"bp\">/</span><span class=\"n\">ShortComplex</span><span class=\"bp\">/</span><span class=\"n\">LeftHomology</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">24</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">MeasureTheory</span><span class=\"bp\">/</span><span class=\"n\">Integral</span><span class=\"bp\">/</span><span class=\"n\">Lebesgue</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">25</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Homology</span><span class=\"bp\">/</span><span class=\"n\">ShortComplex</span><span class=\"bp\">/</span><span class=\"n\">Homology</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">25</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Analysis</span><span class=\"bp\">/</span><span class=\"n\">Asymptotics</span><span class=\"bp\">/</span><span class=\"n\">Asymptotics</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">25</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">GroupTheory</span><span class=\"bp\">/</span><span class=\"n\">Complement</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">26</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">CubicDiscriminant</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">26</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">BigOperators</span><span class=\"bp\">/</span><span class=\"n\">Group</span><span class=\"bp\">/</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">26</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">CompleteLattice</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">26</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">Filter</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">27</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Analysis</span><span class=\"bp\">/</span><span class=\"n\">Calculus</span><span class=\"bp\">/</span><span class=\"n\">FDeriv</span><span class=\"bp\">/</span><span class=\"n\">Mul</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">29</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">Num</span><span class=\"bp\">/</span><span class=\"n\">Lemmas</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">30</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">Group</span><span class=\"bp\">/</span><span class=\"n\">Unbundled</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">30</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">ConditionallyCompleteLattice</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">30</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Topology</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">Lattice</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">31</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">ToIntervalMod</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">31</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">/</span><span class=\"n\">Matrix</span><span class=\"bp\">/</span><span class=\"n\">BilinearForm</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">33</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">Matrix</span><span class=\"bp\">/</span><span class=\"n\">Block</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">34</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Homology</span><span class=\"bp\">/</span><span class=\"n\">ShortComplex</span><span class=\"bp\">/</span><span class=\"n\">RightHomology</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">34</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">/</span><span class=\"n\">Matrix</span><span class=\"bp\">/</span><span class=\"n\">SesquilinearForm</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">34</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">MeasureTheory</span><span class=\"bp\">/</span><span class=\"n\">Function</span><span class=\"bp\">/</span><span class=\"n\">LpSeminorm</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">34</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">MeasureTheory</span><span class=\"bp\">/</span><span class=\"n\">Integral</span><span class=\"bp\">/</span><span class=\"n\">SetToL1</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">35</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">GroupTheory</span><span class=\"bp\">/</span><span class=\"n\">MonoidLocalization</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">36</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">/</span><span class=\"n\">Matrix</span><span class=\"bp\">/</span><span class=\"n\">ToLin</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">37</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">Filter</span><span class=\"bp\">/</span><span class=\"n\">Lift</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">39</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">List</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">39</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">List</span><span class=\"bp\">/</span><span class=\"n\">Chain</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">41</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Module</span><span class=\"bp\">/</span><span class=\"n\">LocalizedModule</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">47</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">RingTheory</span><span class=\"bp\">/</span><span class=\"n\">Localization</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">51</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">Order</span><span class=\"bp\">/</span><span class=\"n\">Monoid</span><span class=\"bp\">/</span><span class=\"n\">Unbundled</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">59</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Analysis</span><span class=\"bp\">/</span><span class=\"n\">Normed</span><span class=\"bp\">/</span><span class=\"n\">Group</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">65</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">Ordmap</span><span class=\"bp\">/</span><span class=\"n\">Ordset</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"mi\">94</span><span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">Finset</span><span class=\"bp\">/</span><span class=\"n\">Lattice</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n</code></pre></div>",
        "id": 469293941,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726036099
    },
    {
        "content": "<p>A bunch of such lemmas are due to the <code>Group</code> vs <code>GroupWithZero</code> naming convention. However, we have decided ages ago to switch from <code>'</code>/<code> to </code>/<code>₀</code>. I would rather have us finish those renames before enforcing a \"no prime policy\".</p>",
        "id": 469294355,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1726036261
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/345428-mathlib-reviewers/topic/theorem.20names.20with.20primes.3F/near/469294355\">said</a>:</p>\n<blockquote>\n<p>A bunch of such lemmas are due to the <code>Group</code> vs <code>GroupWithZero</code> naming convention. However, we have decided ages ago to switch from <code>'</code>/<code> </code> to <code> </code>/<code>₀</code>. I would rather have us finish those renames before enforcing a \"no prime policy\".</p>\n</blockquote>",
        "id": 469294366,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1726036269
    },
    {
        "content": "<p>Is there some easy way to tell if a declaration has a prime due to the <code>GroupWithZero</code> convention?  Even if it is not failsafe, but does not require looking at too many concurrent issues, I could try to include it in the linter and see if that reduces drastically the number of exceptions.</p>",
        "id": 469294952,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726036479
    },
    {
        "content": "<p>If it only cuts it down by a factor of 2 or 3, it may not be enough to address that issue first.</p>",
        "id": 469295012,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726036509
    },
    {
        "content": "<p>For instance, there are only 686 declarations with a <code>'</code> and containing the substring <code>mul</code>.</p>",
        "id": 469295224,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726036590
    },
    {
        "content": "<p>Here is a random sample of primed names</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">elim'_none</span>\n<span class=\"n\">inf_compl_eq_bot'</span>\n<span class=\"n\">NeZero</span><span class=\"bp\">.</span><span class=\"n\">ne'</span>\n<span class=\"n\">le_coe_unbot'</span>\n<span class=\"n\">inv_le_iff_one_le_mul'</span>\n<span class=\"n\">le_div_iff_of_neg'</span>\n<span class=\"n\">ciSup_or'</span>\n<span class=\"n\">map₂Right'_nil_cons</span>\n<span class=\"n\">Chain'</span><span class=\"bp\">.</span><span class=\"n\">take</span>\n<span class=\"n\">inf'_product_right</span>\n<span class=\"n\">Applicative</span><span class=\"bp\">.</span><span class=\"n\">pure_seq_eq_map'</span>\n<span class=\"n\">orbitRel</span><span class=\"bp\">.</span><span class=\"n\">quotient_eq_of_quotient_subgroup_eq'</span>\n<span class=\"n\">finSuccEquiv'_symm_coe_below</span>\n<span class=\"n\">mem_span_insert'</span>\n<span class=\"n\">min'_eq_sorted_zero</span>\n<span class=\"n\">linearIndependent_equiv'</span>\n<span class=\"n\">mul_top'</span>\n<span class=\"n\">neg_of_smul_neg_left'</span>\n<span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">toLinAlgEquiv'_toMatrixAlgEquiv'</span>\n<span class=\"n\">ofDigits_zmodeq'</span>\n<span class=\"n\">algEquiv_symm_mk'</span>\n<span class=\"n\">natDegree_pow'</span>\n<span class=\"n\">map_comp_heq'</span>\n<span class=\"n\">composePath_comp'</span>\n<span class=\"n\">homologyMap'_eq</span>\n<span class=\"n\">toIocDiv_sub'</span>\n<span class=\"n\">Continuous</span><span class=\"bp\">.</span><span class=\"n\">quotient_map'</span>\n<span class=\"n\">nhdsWithin_Ici_eq'</span>\n<span class=\"n\">cauchy_map_iff'</span>\n<span class=\"n\">NNReal</span><span class=\"bp\">.</span><span class=\"n\">closedBall_zero_eq_Icc'</span>\n<span class=\"n\">str'</span>\n<span class=\"n\">algebraMap_eq_inl'</span>\n<span class=\"n\">ext_to_X'</span>\n<span class=\"n\">Basis</span><span class=\"bp\">.</span><span class=\"n\">det_map'</span>\n<span class=\"n\">coe_chainTop'</span>\n<span class=\"n\">hasProd_nat_add_iff'</span>\n<span class=\"n\">sum_apply_eq_zero'</span>\n<span class=\"n\">dist_le_norm_add_norm'</span>\n<span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">norm_prod_le'</span>\n<span class=\"n\">rpow_add_natCast'</span>\n<span class=\"n\">lintegral_rpow_nnnorm_lt_top_of_eLpNorm'_lt_top</span>\n<span class=\"n\">coe_flipₗᵢ'</span>\n<span class=\"n\">integral_neg'</span>\n<span class=\"n\">conjneg_neg'</span>\n<span class=\"n\">negAddY_eq'</span>\n<span class=\"n\">map_on_summand₀'</span>\n<span class=\"n\">iteratedFDerivWithin_eventually_congr_set'</span>\n<span class=\"n\">expSeries_apply_eq'</span>\n<span class=\"n\">stolzCone_subset_stolzSet_aux'</span>\n<span class=\"n\">algebraMap_adicCompletion'</span>\n<span class=\"n\">apriori_edist_iterate_efixedPoint_le'</span>\n<span class=\"n\">dart_edge_eq_mk'_iff'</span>\n<span class=\"n\">unpaired'</span>\n<span class=\"n\">destutter'_nil</span>\n<span class=\"n\">valid'_singleton</span>\n<span class=\"n\">pNilradical_eq_bot'</span>\n<span class=\"n\">inv_rnDeriv'</span>\n<span class=\"n\">orbitRelEquiv_apply_mk''</span>\n<span class=\"n\">measurableSet_eq_of_countable_range'</span>\n<span class=\"n\">Cotangent</span><span class=\"bp\">.</span><span class=\"n\">val_smul'''</span>\n<span class=\"n\">closure_def'</span>\n</code></pre></div>\n<p>(I extracted the exceptions whose position in the list of exception is divisible by 100.)</p>",
        "id": 469295604,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726036749
    },
    {
        "content": "<p>Do any involve names of definitions that already include a prime?<br>\n(Does this need to be in the private stream?)</p>",
        "id": 469297174,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1726037340
    },
    {
        "content": "<p>Let me move it out, sorry, my mistake.</p>",
        "id": 469297342,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726037400
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/469297174\">said</a>:</p>\n<blockquote>\n<p>Do any involve names of definitions that already include a prime?<br>\n(Does this need to be in the private stream?)</p>\n</blockquote>\n<p>Very likely (and the primed definition would be linted as well).</p>",
        "id": 469297874,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726037568
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/469294355\">said</a>:</p>\n<blockquote>\n<p>A bunch of such lemmas are due to the <code>Group</code> vs <code>GroupWithZero</code> naming convention. However, we have decided ages ago to switch from <code>'</code>/<code> to </code>/<code>₀</code>. I would rather have us finish those renames before enforcing a \"no prime policy\".</p>\n</blockquote>\n<p>Aren't these consistent policies? Switching from primes to zeros and enforcing \"no prime\" seem to go hand-in-hand rather than opposing each other</p>",
        "id": 469307507,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1726040054
    },
    {
        "content": "<p>I agree, although the fix is different.</p>",
        "id": 469307628,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726040084
    },
    {
        "content": "<p>Yes, my point is that those Group/GroupWithZero renames are a principled established way of removing the primes which don't involve people removing primes in random ways because the technical debt counter said so</p>",
        "id": 469308368,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1726040243
    },
    {
        "content": "<p>I was just adding a primed lemma! <span aria-label=\"frown\" class=\"emoji emoji-1f641\" role=\"img\" title=\"frown\">:frown:</span></p>",
        "id": 469330434,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726044718
    },
    {
        "content": "<p>Specifically, I wanted to generalize the universes of a theorem, but had to keep the old version due to the issue where a <code>Small.{u, max u v}</code> instance can't be synthesized. So, I guess this is an example of tech debt.</p>",
        "id": 469330670,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726044762
    },
    {
        "content": "<p>You, and 6119 other people before you...</p>",
        "id": 469330722,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726044771
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/469285323\">said</a>:</p>\n<blockquote>\n<p>Should the current exceptions be flagged with <code>set_option</code> or should there be a nolint file containing them?</p>\n</blockquote>\n<p>My understanding was that <code>set_option</code> is intended for \"I know what I'm doing stop annoying me\", and <code>nolints.json</code> is for \"here is a TODO list of things to fix\"</p>",
        "id": 469400803,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1726062108
    },
    {
        "content": "<p>Ok, so then the linter should be made aware of the exceptions by reading from the appropriate nolints file. (Not a problem, just a small extra piece of code.)</p>",
        "id": 469408788,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726063454
    },
    {
        "content": "<p>Now that I think of it, the linter misses out on declarations that do not have explicitly a <code>'</code> but that are inside a <code>namespace SomethingWith'</code>.</p>",
        "id": 469416260,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726064720
    },
    {
        "content": "<p>(There are not that many such namespaces, but there are some.)</p>",
        "id": 469416507,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726064756
    },
    {
        "content": "<p>I added the list of exceptions to the primed linter.  It failed the latest run, since yet another primed declaration was added.  It also did not get a chance to run on Archive and Counterexamples.</p>",
        "id": 469643145,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726140403
    },
    {
        "content": "<p>Does adding this linter seem like a good idea, or not really?</p>",
        "id": 469643196,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726140422
    },
    {
        "content": "<p>I think it's a good idea that primed theorems should have docstring <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> </p>\n<p>Regarding <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/469294355\"><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> 's remark</a></p>\n<blockquote>\n<p>However, we have decided ages ago to switch from <code>'</code>/ <code>to</code> /<code>₀</code>. [in group theory]</p>\n</blockquote>\n<p>is this noted somewhere? If not, it would probably be good if people deciding this made an effort of getting it done, and I think the no-lint file in this PR might actually help with the chore.</p>",
        "id": 469650736,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1726142275
    },
    {
        "content": "<p>I think it's actually good idea. It adds an annoyingly large amount to our nolint file, and I don't think we need to aspire to dealing with that quickly, but it would be good to have a better trajectory going forward.</p>",
        "id": 469652858,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726142736
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/469650736\">said</a>:</p>\n<blockquote>\n<p>it would probably be good if people deciding this made an effort of getting it done</p>\n</blockquote>\n<p>It is one of my (many) battles</p>",
        "id": 469655374,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1726143319
    },
    {
        "content": "<p>Ok, I need to think a bit more about the nolint file though.  Right now, the linter reads the exceptions from a file.  Adding an exception to the file, though, does not re-trigger building files that logged warnings.</p>",
        "id": 469657776,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726143897
    },
    {
        "content": "<p>This means that to add an exception, you should add it to the exception file <em>and</em> modify the file with the primed lemma (or an earlier file), since otherwise lake will replay the file with the warning, even though the warning would not be there this time!</p>",
        "id": 469658193,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726143972
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/469655374\">said</a>:</p>\n<blockquote>\n<p>It is one of my (many) battles</p>\n</blockquote>\n<p>This linter might help with that, suggesting using ₀ instead of ' if appropriate.</p>",
        "id": 469658427,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726144036
    },
    {
        "content": "<p>Btw, is there a <code>lake</code> setting that will take <code>warning as errors</code> seriously and rebuild files that had warning, instead of replaying them?</p>",
        "id": 469659899,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726144407
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span>, I think it is <code>lake build --wfail</code></p>",
        "id": 469830071,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726197303
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/469416260\">said</a>:</p>\n<blockquote>\n<p>Now that I think of it, the linter misses out on declarations that do not have explicitly a <code>'</code> but that are inside a <code>namespace SomethingWith'</code>.</p>\n</blockquote>\n<p>I recommend only flagging declarations that <em>end</em> with a prime. If there is a prime anywhere else, that likely indicates that it is something about another primed declaration, and there is no reason to flag this declaration as well as the other one.</p>",
        "id": 469856081,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1726205548
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/469830071\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span>, I think it is <code>lake build --wfail</code></p>\n</blockquote>\n<p>That is what is already in CI and it fails the whole build with warnings, but replays them the second time, instead of rebuilding them.  At least, this is what I think it does based on what is happening with this PR.</p>",
        "id": 469871798,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726210780
    },
    {
        "content": "<p>You may need to ask Mac for that one, I don't think it exists.</p>",
        "id": 469872358,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726210916
    },
    {
        "content": "<p>I think Sebastian once told me of a way you can include the no-lint json as build artifact so that modifying it causes lean files depending on it (or the entire project?) to be rebuild. I dont remember how though</p>",
        "id": 469876448,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1726211944
    },
    {
        "content": "<p>One of the things we should do in order to get rid of <code>'</code> in theorem names is to stop using <code>neg</code> both for <code>&lt; 0</code> and for <code>-</code> (unary minus).</p>",
        "id": 469891206,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1726215095
    },
    {
        "content": "<p>I recently came across two other widespread uses of primes:</p>\n<ul>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.Chain%27#doc\">docs#List.Chain'</a> which disambiguates from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.Chain#doc\">docs#List.Chain</a></li>\n<li>Lemmas on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ConditionallyCompleteLinearOrderBot#doc\">docs#ConditionallyCompleteLinearOrderBot</a> generally use primes to distinguish from other weaker typeclasses, e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=le_csSup_iff%27#doc\">docs#le_csSup_iff'</a></li>\n</ul>",
        "id": 470331012,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726404006
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417654\">Martin Dvořák</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/469891206\">said</a>:</p>\n<blockquote>\n<p>One of the things we should do in order to get rid of <code>'</code> in theorem names is to stop using <code>neg</code> both for <code>&lt; 0</code> and for <code>-</code> (unary minus).</p>\n</blockquote>\n<p>There is a thread somewhere about switching to <code>lt_zero</code> naming</p>",
        "id": 470338535,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1726408196
    },
    {
        "content": "<p>I made the linter only flag terminal <code>'</code> in names.</p>",
        "id": 470476448,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726469930
    },
    {
        "content": "<p>As for building issues, I think that it may be useful to have <code>lake build</code> take various flags, since replaying-with-warnings is useful, as is rebuilding-from-warnings!</p>",
        "id": 470476809,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726470021
    },
    {
        "content": "<p>I'm wondering whether it would be acceptable to make the linter import the exceptions file (where all the file consists of a commented list of exceptions), so that any change in that file triggers a rebuild from scratch.</p>",
        "id": 470476990,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726470076
    },
    {
        "content": "<p>What do people think of the <code>docPrime</code> linter?  Should declarations ending in <code>'</code> be allowed without a doc-string?</p>",
        "id": 471490950,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726753741
    },
    {
        "content": "<p>If not, then it would be good to know this in advance, since every time that I merged master, there were a couple of new primed-declarations in mathlib that required a full re-run.</p>",
        "id": 471491098,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726753794
    },
    {
        "content": "<p>If not, then I can simply close the PR and be happy about it!  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 471491169,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726753807
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/471491098\">said</a>:</p>\n<blockquote>\n<p>If not, then it would be good to know this in advance, since every time that I merged master, there were a couple of new primed-declarations in mathlib that required a full re-run.</p>\n</blockquote>\n<p>that means it's working</p>",
        "id": 471494737,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1726754786
    },
    {
        "content": "<p>Should we have a poll?</p>",
        "id": 471495219,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1726754906
    },
    {
        "content": "<p>/poll Should declarations whose name ends with <code>'</code> be required to have a doc-string?<br>\nYes<br>\nNo</p>",
        "id": 471505697,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726757910
    },
    {
        "content": "<p>(Note that an implication of voting <code>Yes</code> is somehow dealing with close to 5k current exceptions that would be placed in a nolint file in bulk.)</p>",
        "id": 471506115,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726758032
    },
    {
        "content": "<p>As there seems to be a good support for the PR, I preemptively updated the nolints file, so the current run should be green and contain all of the latest commits.</p>",
        "id": 471519681,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726762121
    },
    {
        "content": "<p>I left the mechanism for adding exceptions to the file intentionally awkward, since I get the impression that the nolints file should only decrease, after its creation.</p>",
        "id": 471519944,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726762206
    },
    {
        "content": "<p>Should this change, I can always add better infrastructure for managing the file.</p>",
        "id": 471519949,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726762207
    },
    {
        "content": "<p>I agree with this on principle, but I'd first like to see an action plan to either refactor or document the broad families of exceptions we have. Otherwise we'll just keep adding more and more primed lemmas, most of which will have very useless docstrings.</p>",
        "id": 471884890,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726896494
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/470331012\">said</a>:</p>\n<blockquote>\n<p>I recently came across two other widespread uses of primes:</p>\n<ul>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.Chain%27#doc\">docs#List.Chain'</a> which disambiguates from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.Chain#doc\">docs#List.Chain</a></li>\n<li>Lemmas on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ConditionallyCompleteLinearOrderBot#doc\">docs#ConditionallyCompleteLinearOrderBot</a> generally use primes to distinguish from other weaker typeclasses, e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=le_csSup_iff%27#doc\">docs#le_csSup_iff'</a></li>\n</ul>\n</blockquote>\n<p>Here's a third potential source of trouble: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.aleph%27#doc\">docs#Cardinal.aleph'</a> (which is disambiguated from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.aleph#doc\">docs#Cardinal.aleph</a> by including finite cardinals). I don't think we currently have any lemmas ending in <code>aleph'</code>, but it's perfectly reasonable we might add some later on, which might not necessarily make sense or be true for <code>aleph</code>.</p>",
        "id": 471884998,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726896591
    },
    {
        "content": "<p>I really hope that this would be an incentive to write <em>good</em> documentation.  When I find a primed lemma name, it is not always easy to figure out what is the difference with the unprimed version and I welcome docstrings explaining differences and related lemmas.</p>",
        "id": 471898743,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726903614
    },
    {
        "content": "<p>As for the nolints, it would be great if docstrings were added, but I view it as \"these lemmas should have a docstring, but sadly they do not have one\".</p>",
        "id": 471898861,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726903684
    },
    {
        "content": "<p>Perhaps <code>Foo.bar_baz'</code> should be automatically allowed if <code>Foo.baz'</code> exists / is mentioned in the statement?</p>",
        "id": 471926143,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1726916825
    },
    {
        "content": "<p>Thinking about it a bit more, I agree with at least the conditionally complete lattice lemmas that they should each document how they differ from their unprimed versions. I'll get to that at some point.</p>",
        "id": 471929067,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1726917911
    },
    {
        "content": "<p>A heads up to everyone: the linter is now active!</p>",
        "id": 472716540,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727276006
    },
    {
        "content": "<p>As mentioned elsewhere, it is \"hard\" to silence it, unless you add a docstring.  Hopefully this will encourage people to write good explanations for their primes!</p>",
        "id": 472716708,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727276047
    },
    {
        "content": "<p>Should it be really obnoxious, let me know and we'll come up with better solutions.</p>",
        "id": 472716803,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727276077
    },
    {
        "content": "<p>It just complained to me about a <em>double</em> primed lemma on <code>nightly-testing</code>, and eventually I realised the correct solution was to delete the lemma and replace its use with the unprimed version. :-) Feels like a win to me!</p>",
        "id": 472792148,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727310005
    },
    {
        "content": "<p>Avoiding primes or adding documentation are definitely wins!</p>",
        "id": 472809512,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727323176
    },
    {
        "content": "<p>There is a potential issue raised in <a href=\"#narrow/stream/458659-Equational/topic/Issue.20running.20this.20in.20gitpod\">this thread</a>: it could be the project downstream of mathlib that do not get the cache from Mathlib, but build it locally may trigger the linter.</p>",
        "id": 473093527,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727439215
    },
    {
        "content": "<p>I do not understand how project-options work in detail to even know if this is a possible issue or not.</p>",
        "id": 473093686,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727439244
    },
    {
        "content": "<p>If it is, would it be a good idea to preemptively add to the nolint file all primed lemmas in mathlib dependencies to prevent this?</p>",
        "id": 473094169,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727439352
    },
    {
        "content": "<p>Maybe the linter should only look at things in the <code>Mathlib.</code> namespace then? or at least exclude anything that's in <code>Lean</code>, <code>Std</code>, <code>Batteries</code>, etc...</p>\n<p>I dont see this linter being super useful outside mathlib, so I think the first could be a valid option and more robust</p>",
        "id": 473107734,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1727442864
    },
    {
        "content": "<p>(or defined in mathlib, <code>Mathlib.</code> doesnt even exist consistently does it?)</p>",
        "id": 473107885,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1727442916
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span>, can we modify the linter so it doesn't require doc-strings when the prime \"comes from\" another declaration? In this case <code>mk'</code> definitely needs a doc-string, but then <code>coe_mk'</code> doesn't.</p>",
        "id": 474173427,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727837652
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315577\">Mac Malone</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Caching.20of.20lints/near/474170732\">said</a>:</p>\n<blockquote>\n<p>My suggestion would be to add the no lint files as a <code>target</code> (via <code>inputTextFile</code>) and an <code>extraDepTargets</code> of the relevant libaries (or the whole package). For example, something like this:</p>\n</blockquote>\n<p>Presumably this can't be translated to a toml, so lets find another solution here.</p>",
        "id": 474173511,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727837692
    },
    {
        "content": "<p>I am aware that the linter is hard to silence <em>without</em> adding a doc-string.  The idea is that the linter should make you prefer to add a doc-string, rather than increase the <code>nolints</code> file.  For this reason, I would like to think hard about making it easier to increase the nolints file.</p>",
        "id": 474198008,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727848707
    },
    {
        "content": "<p>A cheap way of silencing the linter after you extended the nolints file, is to add another modification to the file where the nolint was found (or earlier), as that would trigger recompilation, rather than replay.</p>",
        "id": 474198071,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727848759
    },
    {
        "content": "<p>Having said that, I'll think about Kim's suggestion: I agree that just having a <code>'</code> at the end may not be enough to justify a doc-string, so making the linter's logic a bit more elaborate is my preference.</p>",
        "id": 474198277,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727848824
    },
    {
        "content": "<p>Btw, the idea of not linting when a <code>'</code> \"comes from\" another declaration, is the reason why the linter only looks at terminal <code>'</code>, rather than all of them.</p>",
        "id": 474198567,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727848893
    },
    {
        "content": "<p>Btw, <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F\">this</a> is the thread with the discussion of the linter and the awkwardness of silencing it.</p>",
        "id": 474198780,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727848954
    },
    {
        "content": "<p>Does allowing declarations that end in <code>_mk'</code> seem reasonable?</p>",
        "id": 474200538,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727849541
    },
    {
        "content": "<p>It \"fixes\" the current issue and allows the removal of 126 nolints.</p>",
        "id": 474200561,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727849548
    },
    {
        "content": "<p>Another suggestion would be to inspect the constants ending in <code>'</code> that are \"visible\" in the declaration and if one of them is not linted (either because of a doc-string or because it is in the nolints file), then ignore the current one as well.</p>",
        "id": 474204026,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727850703
    },
    {
        "content": "<p>I have not thought a lot about whether this would exclude declarations for which you would really like a doc-string: this does not check that it <em>comes from</em> the other, just that it <em>uses</em> the other.</p>",
        "id": 474204234,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727850762
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Caching.20of.20lints/near/474204234\">said</a>:</p>\n<blockquote>\n<p>I have not thought a lot about whether this would exclude declarations for which you would really like a doc-string: this does not check that it <em>comes from</em> the other, just that it <em>uses</em> the other.</p>\n</blockquote>\n<p>I'd guess it's not too hard to make it approximate this - the constant identified must be terminal in the current name?</p>",
        "id": 474226086,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1727856377
    },
    {
        "content": "<p>So you are saying the if <code>x.y'</code> is no-linted, then <code>x.y_mk'</code> should also not be linted?  Possibly generalizing also over <code>mk</code>?</p>",
        "id": 474240258,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727860100
    },
    {
        "content": "<p>Oh, that's not what I meant and now I realise I misunderstood what you were saying. My mistake, sorry for the noise</p>",
        "id": 474255064,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1727864858
    },
    {
        "content": "<p>Could be disable <code>linter.docPrime</code> on <code>private</code> declarations?</p>",
        "id": 474282217,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727871812
    },
    {
        "content": "<p>This example should be fixed by locally disabling the linter, not adding to nolints, right?</p>",
        "id": 474319710,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727880948
    },
    {
        "content": "<p>I changed the nolints because other declarations in the same file were listed there rather than locally silenced with <code>set_option</code>. That would also work, but it should probably be done consistently?</p>",
        "id": 474325841,
        "sender_full_name": "𝚠𝚘𝚓𝚌𝚒𝚎𝚌𝚑 𝚗𝚊𝚠𝚛𝚘𝚌𝚔𝚒",
        "timestamp": 1727882231
    },
    {
        "content": "<p>I think the rule is that <code>nolints</code> contains everything that still needed to be dealt with when the linter is created (the author of the linter shouldn't necessarily be burdened with fixing all existing code first), and <code>set_option</code> is for when the correct thing to do is silence the linter.</p>",
        "id": 474327744,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727882547
    },
    {
        "content": "<p>I don't like this linter (sorry Damiano!), I just didn't comment on the relevant thread in time to voice my objection.</p>",
        "id": 474343037,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1727886340
    },
    {
        "content": "<p>It's ok not to like stuff, no worries!  Do you not like at all the idea of documenting primed declarations, or is it just how this is implemented?</p>",
        "id": 474349331,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727887823
    },
    {
        "content": "<p>I don't like the idea of forcing documentation of primed declarations, as I think there are too many situations where it just doesn't make sense / isn't needed. The above example I think is the most obvious case of this, but I also think it's not necessary for many other primed declarations, and the ones for which it <em>is</em> necessary generally already get docstrings detailing the difference. (But I was grossly outvoted in the other thread, so perhaps my opinion shouldn't matter much.)</p>",
        "id": 474351787,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1727888670
    },
    {
        "content": "<p>I certainly agree that documenting <em>all</em> primed declarations is excessive.  I am also happy when I find a doc-string on a primed declaration that explains the difference with the unprimed twin and that there have been cases where there was no such doc-string.</p>",
        "id": 474352227,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727888813
    },
    {
        "content": "<p>I think that the \"success\" of this linter depends on being able to find a good heuristic for when to flag a declaration, though, I also completely agree that flagging everything is <em>not</em> (yet) the good heuristic!  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 474352359,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727888864
    },
    {
        "content": "<p>With respect to the poll, I would not necessarily give it much weight: one thing is to agree with the idea of something, another thing is to actually see it in action.  I do think that experimenting a little with automatic exclusions might yield an overall improvement.</p>",
        "id": 474352578,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727888926
    },
    {
        "content": "<p>This is an important discussion to have, but I intended this thread to be about Lake caching rather than the merits of any specific linter. Would an admin be able to split off the linter discussion into a separate thread?</p>",
        "id": 474353490,
        "sender_full_name": "𝚠𝚘𝚓𝚌𝚒𝚎𝚌𝚑 𝚗𝚊𝚠𝚛𝚘𝚌𝚔𝚒",
        "timestamp": 1727889264
    },
    {
        "content": "<p>... and actually moving it to the docPrime thread?</p>",
        "id": 474353661,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727889325
    },
    {
        "content": "<p><a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F\">#mathlib4 &gt; theorem names with primes?</a></p>",
        "id": 474353696,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727889337
    },
    {
        "content": "<p>26 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/stream/287929-mathlib4/topic/Caching.20of.20lints\">#mathlib4 &gt; Caching of lints</a> by <span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span>.</p>",
        "id": 474353745,
        "sender_full_name": "Notification Bot",
        "timestamp": 1727889355
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/474282217\">said</a>:</p>\n<blockquote>\n<p>Could be disable <code>linter.docPrime</code> on <code>private</code> declarations?</p>\n</blockquote>\n<p>Yaël: <a href=\"https://github.com/leanprover-community/mathlib4/pull/17361\">#17361</a>.</p>",
        "id": 474360978,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727891214
    },
    {
        "content": "<p>I also realize that maybe the linter does not have support for continuing, but this change was so simple that I simply went ahead and did it!  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 474361044,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727891248
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/474200538\">said</a>:</p>\n<blockquote>\n<p>Does allowing declarations that end in <code>_mk'</code> seem reasonable?</p>\n</blockquote>\n<p>This would be really nice. There's a few misnamed lemmas on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=aleph%27#doc\">docs#aleph'</a> like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=aleph%27_cof#doc\">docs#aleph'_cof</a> that should really end in <code>aleph'</code>, but I can't fix them without triggering the linter.</p>",
        "id": 476482547,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728698420
    },
    {
        "content": "<p>I'm also working on introducing a function <code>omega'</code>, and the linter is getting in my way</p>",
        "id": 476482648,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728698484
    },
    {
        "content": "<p>The docs for <code>aleph'</code> already explain the difference with <code>aleph</code>, I shouldn't have to repeat this explanation for every single lemma on it that happens to trigger the linter...</p>",
        "id": 476482721,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728698526
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/476482547\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/474200538\">said</a>:</p>\n<blockquote>\n<p>Does allowing declarations that end in <code>_mk'</code> seem reasonable?</p>\n</blockquote>\n<p>This would be really nice. There's a few misnamed lemmas on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=aleph%27#doc\">docs#aleph'</a> like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=aleph%27_cof#doc\">docs#aleph'_cof</a> that should really end in <code>aleph'</code>, but I can't fix them without triggering the linter.</p>\n</blockquote>\n<p>You are allowed to edit <code>no_lints_prime.txt</code>!</p>",
        "id": 476498343,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1728714200
    },
    {
        "content": "<p>You are also allowed to add a docstring :-). The goal is that it should be easier to add a docstring than to fix the nolint file -- because more docstrings is always good.</p>",
        "id": 476498853,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1728714729
    },
    {
        "content": "<p>Yes but docstrings shouldn't be added during unrelated refactors.</p>\n<ol>\n<li>That's scope-creep</li>\n<li>That's the recipe for low-quality docstrings</li>\n</ol>",
        "id": 476498996,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1728714941
    },
    {
        "content": "<p>I definitely don't count docstrings as scope-creep. And I trust people to add good docstrings.</p>",
        "id": 476499771,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1728715717
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/476498343\">said</a>:</p>\n<blockquote>\n<p>You are allowed to edit <code>no_lints_prime.txt</code>!</p>\n</blockquote>\n<p>Aren't you specifically _not_ supposed to do this, and instead you should use <code>set_option linter.docPrime false in</code>?</p>",
        "id": 476502352,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728718249
    },
    {
        "content": "<p>To give my actual example, say I rename <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.aleph%27_isNormal#doc\">docs#Cardinal.aleph'_isNormal</a> to <code>Cardinal.isNormal_aleph'</code> (I won't since this lemma will get deprecated for irrelevant reasons, but morally I should). </p>\n<p>What sort of docstring could I add? \"The <code>aleph'</code> function is normal\"? What info does this provide that the name or type signature didn't already immediately convey? Should I also add \"The aleph function is normal\" to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.aleph_isNormal#doc\">docs#Cardinal.aleph_isNormal</a> ?</p>",
        "id": 476502371,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728718276
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/471926143\">said</a>:</p>\n<blockquote>\n<p>Perhaps <code>Foo.bar_baz'</code> should be automatically allowed if <code>Foo.baz'</code> exists / is mentioned in the statement?</p>\n</blockquote>\n<p>You're asking for this feature, right?</p>",
        "id": 476502489,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728718343
    },
    {
        "content": "<p>Yep</p>",
        "id": 476502594,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728718464
    },
    {
        "content": "<p>I guess another alternative might be to rename <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.aleph%27#doc\">docs#Cardinal.aleph'</a>, but I have no idea how to do this</p>",
        "id": 476502613,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728718505
    },
    {
        "content": "<p>\"the aleph function except we also enumerate the finite cardinals\" doesn't really have a name in literature and isn't very easy to condense. In my view, the docstring already gets the point across.</p>",
        "id": 476502645,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728718556
    },
    {
        "content": "<p>How is it possible that <a href=\"https://github.com/leanprover-community/mathlib4/pull/18917\">#18917</a> passed CI, given that it removed <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=div_le_div_iff%27#doc\">docs#div_le_div_iff'</a> from the nolints list, but doesn't seem to have added a docstring to that lemma?</p>",
        "id": 483383938,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1732062707
    },
    {
        "content": "<p>(I'm curious because this change -- now merged to master -- seems to be making <a href=\"https://github.com/leanprover-community/mathlib4/pull/19262\">#19262</a> fail.)</p>",
        "id": 483384411,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1732063012
    },
    {
        "content": "<p>Yes, I am also investigating this, as I have also been affected...</p>",
        "id": 483384620,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732063157
    },
    {
        "content": "<p>I suspect that this is the same mechanism that makes silencing the linter annoying without touching the file with the exception or something earlier than it: modifying the <code>no_lints</code> file for the linter does not trigger a re-build.  So <code>lake</code> will replay the noiseless file, even though if it recompiled it, it would be noisy.</p>",
        "id": 483384987,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732063413
    },
    {
        "content": "<p>I imagine that if the only change that a PR did was removing the no_lints file, CI would pass for that PR, as there would be no build, just replay.  However, after that, every modification in a file that contains or is followed by a file with a docPrime extension would trigger the linter.</p>",
        "id": 483385146,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732063516
    },
    {
        "content": "<p>We should be adding <code>no_lints</code> as a dependency of the mathlib library in the lakefile</p>",
        "id": 483385503,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732063750
    },
    {
        "content": "<p>I've readded the primed lemma to the no_lints file and I am rebuilding everything: <a href=\"https://github.com/leanprover-community/mathlib4/pull/19267\">#19267</a>.</p>",
        "id": 483385600,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732063823
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/483385503\">said</a>:</p>\n<blockquote>\n<p>We should be adding <code>no_lints</code> as a dependency of the mathlib library in the lakefile</p>\n</blockquote>\n<p>I agree: I knew that it was hard to silence the linter, so that was an incentive to not add exceptions to the <code>no_lints</code> and actually add doc-strings.  However, I had not realized until now that there was the possibility of someone removing a still existing lemma from the <code>no_lints</code> file!</p>",
        "id": 483385971,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732064073
    },
    {
        "content": "<p>Wait, I'm confused again; does any lean code actually read the no_lints file?</p>",
        "id": 483386021,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732064120
    },
    {
        "content": "<p>Yes, the docPrime linter.</p>",
        "id": 483386041,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732064134
    },
    {
        "content": "<p>Oh, <code>nolints-style.txt</code> not <code>nolints.json</code></p>",
        "id": 483386072,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732064155
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/25b91b6001b15abdba13e10b8dcf838cfe9d292f/Mathlib/Tactic/Linter/DocPrime.lean#L67\">https://github.com/leanprover-community/mathlib4/blob/25b91b6001b15abdba13e10b8dcf838cfe9d292f/Mathlib/Tactic/Linter/DocPrime.lean#L67</a></p>",
        "id": 483386140,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732064181
    },
    {
        "content": "<p>Actually, <code>scripts/no_lints_prime_decls.txt</code>.</p>",
        "id": 483386191,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732064205
    },
    {
        "content": "<p>Ouch, can we not have a single nolints file?</p>",
        "id": 483386274,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732064267
    },
    {
        "content": "<p>Or at least, decide whether it is <code>nolints</code> or <code>no_lints</code></p>",
        "id": 483386332,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732064285
    },
    {
        "content": "<p>Given how short <code>scripts/nolints-style.txt</code> is, I think that simply appending the content of <code>scripts/no_lints_prime_decls.txt</code> to that file and aiming the linter there would work.</p>",
        "id": 483386416,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732064358
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/483385503\">said</a>:</p>\n<blockquote>\n<p>We should be adding <code>no_lints</code> as a dependency of the mathlib library in the lakefile</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/19275\">#19275</a> does this</p>",
        "id": 483386434,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732064384
    },
    {
        "content": "<p>I delegated it, since this has been causing issues for a while and I am no longer convinced that it is working as intended anyway!  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 483386626,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732064508
    },
    {
        "content": "<p>You'll probably have to re-add the lemma...</p>",
        "id": 483386725,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732064560
    },
    {
        "content": "<p>With the lemma added back to the no_lints file, rebuilding all of mathlib no longer gives a warning.  So, hopefully, Eric's PR will then solve these issues.</p>",
        "id": 483388482,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732065910
    },
    {
        "content": "<p>Off-topic, but in the weeks since we started enforcing this I've become more and more in favor of the change. Most of the primed lemmas in the files I frequent turned out to just be bad API.</p>",
        "id": 483564782,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732134054
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260507\">Heather Macbeth</span> <a href=\"#narrow/channel/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/483383938\">said</a>:</p>\n<blockquote>\n<p>How is it possible that <a href=\"https://github.com/leanprover-community/mathlib4/pull/18917\">#18917</a> passed CI, given that it removed <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=div_le_div_iff%27#doc\">docs#div_le_div_iff'</a> from the nolints list, but doesn't seem to have added a docstring to that lemma?</p>\n</blockquote>\n<p>Looks like <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> silenced this in <a href=\"https://github.com/leanprover-community/mathlib4/pull/19279\">#19279</a> by adding a <code>set_option linter.docPrime false</code> to that declaration.  I would have thought the right move here was to add it back to the nolints list, do I misunderstand the system?</p>",
        "id": 483572393,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1732137137
    },
    {
        "content": "<p>Ah, that explains how the linter was silent, the declaration was present and the no_lints file had not been touched!  I would also agree that the name should be in the no_lints file.</p>",
        "id": 483573349,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732137594
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/19309\">#19309</a></p>",
        "id": 483573778,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1732137776
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260507\">Heather Macbeth</span> <a href=\"#narrow/channel/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/483572393\">said</a>:</p>\n<blockquote>\n<p>do I misunderstand the system?</p>\n</blockquote>\n<ul>\n<li><code>set_option linter.docPrime false in</code> is for \"I assert that this lint violation is deliberate (and the reviewers agree it is ok)\"</li>\n<li><code>nolints</code> is for \"I do not want to deal with this right now\".</li>\n</ul>",
        "id": 483575631,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732138604
    },
    {
        "content": "<p>Given the file is full of primes, it does look like the second case</p>",
        "id": 483575853,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732138707
    },
    {
        "content": "<p>It's unfortunate that the ease of use of the two mechanisms is reversed -- I really didn't want to deal with this right now, as I was just doing a dependency bump, and the easiest thing to reach for was <code>set_option</code>. Thanks for cleaning up my mess...</p>",
        "id": 483595945,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732149288
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/theorem.20names.20with.20primes.3F/near/483575853\">said</a>:</p>\n<blockquote>\n<p>Given the file is full of primes, it does look like the second case</p>\n</blockquote>\n<p>Actually I would say we are in the first case here <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 483634519,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1732175464
    }
]