[
    {
        "content": "<p>Another discussion that was brought up on <a href=\"https://github.com/leanprover-community/mathlib4/pull/178\">PR 178</a> is that the <code>swap i</code> tactic doesn't really swap the <code>i</code>-th goal with the first one except for the particular case when <code>i</code> equals <code>2</code>.</p>\n<p>A few ideas have been brought up to make it less confusing:</p>\n<ul>\n<li>Gabriel suggested a different name: <code>pick</code></li>\n<li>Sebastian mentioned Isabelle's <code>prefer</code></li>\n<li>I proposed making <code>swap</code> do a proper interchange of goals (not guaranteed to be consistent with Lean 3 mathlib AFAIK)</li>\n</ul>\n<p>I'm bringing the discussion to Zulip because it's easier to discuss here</p>\n<p>And just to make the trade-off clearer, the tactic name has to make sense even when used without a parameter because the default value is <code>2</code>.</p>",
        "id": 270718509,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643983368
    },
    {
        "content": "<p>I like <code>pick</code>. But in that case I would say that there doesn't have to be a default value.</p>",
        "id": 270719247,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1643983661
    },
    {
        "content": "<p>So maybe <code>pick</code> and <code>swap</code> can both exist? Where <code>swap</code> does a proper swap of the goals (with default value <code>2</code>). And <code>pick</code> just moves goal <code>n</code> to the start of the list of goals.</p>",
        "id": 270719370,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1643983698
    },
    {
        "content": "<p>That's a good one. Do you think it would be too troublesome to backport this behavior to mathlib?</p>",
        "id": 270719826,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643983912
    },
    {
        "content": "<p>Hmm, I don't know if that's worth it.</p>",
        "id": 270720040,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1643984007
    },
    {
        "content": "<p><code>mathport</code> could just translate <code>swap n</code> to <code>pick n</code>, but translate <code>swap</code> to <code>swap</code>.</p>",
        "id": 270720082,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1643984026
    },
    {
        "content": "<p>I like the idea of consistency with other systems when the tactics have the same behaviour and we dont have compelling reasons not to, it should make lean code more readable by others and conversely other systems more readable to people familiar with lean</p>",
        "id": 270721973,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1643984897
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"127136\">@Alex J. Best</span> do you mean you prefer <code>prefer</code>? <span aria-label=\"upside down\" class=\"emoji emoji-1f643\" role=\"img\" title=\"upside down\">:upside_down:</span></p>",
        "id": 270722193,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643985009
    },
    {
        "content": "<p>Worth also checking what Coq does in this area then</p>",
        "id": 270722474,
        "sender_full_name": "Reid Barton",
        "timestamp": 1643985179
    },
    {
        "content": "<p>If it has the same behaviour as your new tactics then yes, but if something else (in isabelle or coq for example) is even closer then I preferannly prefer those and preferably not prefer <code>prefer</code></p>",
        "id": 270722477,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1643985181
    },
    {
        "content": "<p><code>prefer</code> is a bad name though; it's very hard to guess. I say we stay consistent only where the other systems have made sensible decisions. Same for broken semantics: if, say, Coq <code>swap</code> works like Lean 3 <code>swap</code>, faithfully implementing a <code>swap</code> that doesn't swap still wouldn't be helpful.</p>",
        "id": 270723550,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1643985735
    },
    {
        "content": "<p><code>prefer</code> would make sense in a world where tactics try to apply to later goals if they fail when applied to the first goal. I don't know if that's actually how Isabelle works though.</p>",
        "id": 270723719,
        "sender_full_name": "Reid Barton",
        "timestamp": 1643985826
    },
    {
        "content": "<p>Not automatically, no. I assume the intention is more like \"I prefer to start with this goal, it looks way easier\".</p>",
        "id": 270724092,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1643986001
    },
    {
        "content": "<p>Just to mention these possibilities, even though they're long, <code>pick_goal i</code> or <code>prefer_goal i</code> are super explicit</p>",
        "id": 270724764,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643986325
    },
    {
        "content": "<p>So we'd have</p>\n<ul>\n<li><code>pick_goal i</code></li>\n<li><code>swap_goal i</code></li>\n<li><code>work_on_goal i</code></li>\n</ul>",
        "id": 270724899,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643986385
    },
    {
        "content": "<p>The consensus, however, is that we want those three behaviors. I'm gonna implement them and we can choose names afterwards</p>",
        "id": 270726043,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643986887
    },
    {
        "content": "<p>I like this suggestion--these tactics are probably pretty rare so being explicit has more advantages and less cost. Otherwise <code>pick</code> could sound pretty similar to <code>use</code> or <code>choose</code>.</p>",
        "id": 270726094,
        "sender_full_name": "Reid Barton",
        "timestamp": 1643986906
    },
    {
        "content": "<p>That's exactly what I thought. Or it could even look like some mysterious form of <code>specialize</code></p>\n<p>Let me also include <code>rotate_goals n</code> in the suggested package (instead of <code>rotate</code>)</p>",
        "id": 270726270,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643986967
    },
    {
        "content": "<p>Is the intended behaviour for <code>swap i</code> that it literally swaps the current goal for the <code>ith</code> goal in the queue and vice versa?  So, for example, if I have current goal <code>g1</code> and a list of subsequent goals <code>[g2, g3, g4, g5, ...]</code> then <code>swap 4</code> would leave me with current goal <code>g4</code> and subsequent goals <code>[g2, g3, g1, g5, ...]</code>?  If so, it's not obvious to me (in my limited experience) that this behaviour would be very useful.  Do any other systems have a tactic that does a literal swap like this?</p>",
        "id": 270728475,
        "sender_full_name": "Stuart Presnell",
        "timestamp": 1643987914
    },
    {
        "content": "<p>It's indeed a small detail, but we have the chance to make the semantics consistent this time</p>",
        "id": 270730799,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643988960
    },
    {
        "content": "<p>But is there a reason for wanting this behaviour in particular, other than the fact that we currently have a tactic that has been (mis-)named <code>swap</code>?</p>",
        "id": 270731228,
        "sender_full_name": "Stuart Presnell",
        "timestamp": 1643989146
    },
    {
        "content": "<p>I don't think so. Ultimately, we could get away just with <code>pick_goal i</code>. And <code>swap_goal</code> or <code>swap</code> would just call <code>pick_goal 2</code></p>",
        "id": 270732313,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643989612
    },
    {
        "content": "<p>FWIW <code>rotate</code> is another of these goal management commands</p>",
        "id": 270735060,
        "sender_full_name": "Reid Barton",
        "timestamp": 1643990679
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 270735915,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643991033
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/178\">PR updated</a></p>",
        "id": 270741421,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643993442
    },
    {
        "content": "<p>That was really good input <span class=\"user-mention\" data-user-id=\"422543\">@Stuart Presnell</span>. It simplifies things a lot</p>",
        "id": 270741987,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1643993721
    },
    {
        "content": "<p>Just to see what a stack manipulation language chose as words: in Forth, the word for removing the nth element of the stack and putting it on top is called <code>roll</code> (it's a roll of the top n elements). That's to contrast it with <code>rot</code> which is a roll of just the top 3 elements, which is a common operation.  <code>pick</code> copies the nth element to the top. <code>swap</code> swaps the top two elements.</p>",
        "id": 270753731,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1643999286
    },
    {
        "content": "<p>Nice. That's what <code>swap</code> does on the current state of the PR. And <code>roll i</code> is accomplished by <code>pick_goal i</code>. I think these two operations should be enough for most use cases when writing proofs.</p>\n<p>Also, do we really need <code>rotate</code>?</p>",
        "id": 270755569,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644000095
    },
    {
        "content": "<p>Actually <code>rotate</code> is useful if I want to say \"this is really ugly and I want to deal with it last\"</p>",
        "id": 270756284,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644000431
    },
    {
        "content": "<p>Yeah, <code>rotate</code> applies to the entire queue, but <code>pick_goal</code> only applies to the front.</p>\n<p>Some more name suggestions to add to your list: <code>roll_goals</code>, <code>lift_goal</code>, <code>raise_goal</code>.</p>",
        "id": 270757937,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1644001129
    },
    {
        "content": "<p>For simplicity you should just implement <code>permute_goals σ</code> and let the user do the rest of the work</p>",
        "id": 270758028,
        "sender_full_name": "Stuart Presnell",
        "timestamp": 1644001174
    },
    {
        "content": "<p>Even simpler, we only need <code>rotate</code> and <code>swap</code> with no arguments since they generate the symmetric group <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 270758967,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1644001587
    },
    {
        "content": "<p>/poll Name for a tactic that moves the first goal to the back<br>\nrotate<br>\nrotate_goals<br>\nroll<br>\nroll_goals</p>",
        "id": 270761336,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644002775
    },
    {
        "content": "<p>/poll Name for a tactic that moves the n-th goal to the top<br>\npop_goal<br>\nlift_goal<br>\npick_goal<br>\nraise_goal<br>\npop<br>\nlift<br>\npick<br>\nraise</p>",
        "id": 270763055,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644003660
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/tactics.html#lift\">tactic#lift</a> is already a thing, so it shouldn't be that!</p>",
        "id": 270763746,
        "sender_full_name": "Rob Lewis",
        "timestamp": 1644004025
    },
    {
        "content": "<p>I really like the version involving the word goal. Otherwise there are simply too many conflicts with mathematical operations.</p>",
        "id": 270776484,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1644010638
    },
    {
        "content": "<p>I second that. I would even suggest that it starts with the word goal</p>",
        "id": 270777904,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1644011545
    },
    {
        "content": "<p>Consensus is <del>impossible</del> really hard <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span> <br>\nI hope the next tactics go more smoothly</p>",
        "id": 270782350,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644014091
    },
    {
        "content": "<p>/poll Which one do you prefer?<br>\nrotate, swap<br>\nrotate_goals, swap_goals</p>",
        "id": 270782402,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644014130
    },
    {
        "content": "<p>Actually nevermind. I think there's enough data to move forward. Thanks everyone for the inputs!</p>",
        "id": 270783479,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644014832
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/178\">This is the PR</a> in case anyone wants to review it further.</p>",
        "id": 270784259,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644015373
    },
    {
        "content": "<p>I think the majority of uses of <code>swap</code> in mathlib are to close a goal not listed first. For this purpose, you really don't want to reorder the remaining goals: a literal <code>swap</code> is a useless tactic that I don't see any reason to have. I wonder if we should instead have a tactic like <code>case</code> but with ordinal goals. (In fact maybe it can even be <code>case</code>? Like <code>case 1 =&gt; ...</code>)</p>",
        "id": 270789014,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644018884
    },
    {
        "content": "<p>It's awkward to do indentation around <code>swap</code> because it doesn't follow the usual goal structuring behavior: the previous tactic produced two goals so we would normally use braces afterward but we want to solve the goals in reverse order so it ends up looking like</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">induction</span> <span class=\"n\">n</span><span class=\"o\">,</span>\n<span class=\"n\">swap</span><span class=\"o\">,</span> <span class=\"o\">{</span> <span class=\"n\">prove</span> <span class=\"n\">goal</span> <span class=\"mi\">2</span> <span class=\"o\">},</span>\n<span class=\"o\">{</span> <span class=\"n\">prove</span> <span class=\"n\">goal</span> <span class=\"mi\">1</span> <span class=\"o\">}</span>\n</code></pre></div>",
        "id": 270789175,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019004
    },
    {
        "content": "<p>I think in this case (which is syntactically fairly easy to detect in mathport) we should translate it to</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">induction</span> <span class=\"n\">n</span>\n<span class=\"n\">case</span> <span class=\"mi\">2</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">prove</span> <span class=\"n\">goal</span> <span class=\"mi\">2</span>\n<span class=\"n\">prove</span> <span class=\"n\">goal</span> <span class=\"mi\">1</span>\n</code></pre></div>\n<p>unless someone has a better idea for the name</p>",
        "id": 270789313,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019088
    },
    {
        "content": "<p>Isn't that <code>pick_goal 2</code>?</p>",
        "id": 270789730,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644019334
    },
    {
        "content": "<p>no, <code>pick_goal 2</code> isn't a combinator</p>",
        "id": 270789771,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019363
    },
    {
        "content": "<p>this is <code>pick_goal 2; { ... }</code></p>",
        "id": 270789810,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019386
    },
    {
        "content": "<p>but the point is that these are actually connected operations, the swapping isn't the point, it's focusing on a non-first goal</p>",
        "id": 270789844,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019421
    },
    {
        "content": "<p>and in particular we are adding the constraint of closing the goal at the end of the block</p>",
        "id": 270789927,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019465
    },
    {
        "content": "<p>although I think you can opt out of that with many lean 4 tactics if you use <code>?_</code> as the tactic</p>",
        "id": 270789942,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019488
    },
    {
        "content": "<p>so that <code>case 2 =&gt; ?_</code> would be equivalent to <code>pick_goal 2</code></p>",
        "id": 270789954,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019500
    },
    {
        "content": "<p>I dislike the new names for being too verbose for a structural operation, but if I can avoid the need for them then it's fine</p>",
        "id": 270790085,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019588
    },
    {
        "content": "<p>lean 4 tactic mode is all about finding better ways to structure proofs, so I don't mind discouraging these tactics that manipulate the goals in a low level way</p>",
        "id": 270790152,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019660
    },
    {
        "content": "<p>while we're in the renaming mood, I would suggest <code>work_on_goal n tacs</code> -&gt; <code>on_goal n =&gt; tacs</code></p>",
        "id": 270790301,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019778
    },
    {
        "content": "<p>so it's just the same as <code>case</code> but it doesn't close the goal at the end</p>",
        "id": 270790317,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644019800
    },
    {
        "content": "<p><code>focusn</code></p>",
        "id": 270790554,
        "sender_full_name": "Reid Barton",
        "timestamp": 1644020013
    },
    {
        "content": "<p>you mean for <code>case</code>?</p>",
        "id": 270790699,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644020112
    },
    {
        "content": "<p><code>case</code> already exists and has exactly the right semantics so if possible I would just reuse that name</p>",
        "id": 270790714,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644020130
    },
    {
        "content": "<p>that is, either overload the syntax to accept a numeral or modify the syntax in lean 4 core to allow <code>case 2 =&gt; ...</code></p>",
        "id": 270790772,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644020165
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> something is wrong in my code:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">syntax</span> <span class=\"o\">(</span><span class=\"n\">name</span> <span class=\"o\">:=</span> <span class=\"n\">on_goal</span><span class=\"o\">)</span> <span class=\"s2\">\"on_goal\"</span> <span class=\"n\">ppSpace</span> <span class=\"s2\">\"-\"</span><span class=\"bp\">?</span> <span class=\"n\">num</span> <span class=\"n\">ppSpace</span> <span class=\"n\">tacticSeq</span> <span class=\"n\">ppSpace</span> <span class=\"s2\">\"=&gt;\"</span> <span class=\"o\">:</span> <span class=\"n\">tactic</span>\n<span class=\"kd\">@[tactic on_goal]</span> <span class=\"kd\">def</span> <span class=\"n\">evalOnGoal</span> <span class=\"o\">:</span> <span class=\"n\">Tactic</span> <span class=\"o\">:=</span> <span class=\"k\">fun</span> <span class=\"n\">stx</span> <span class=\"bp\">=&gt;</span> <span class=\"k\">do</span>\n<span class=\"k\">match</span> <span class=\"n\">stx</span> <span class=\"k\">with</span>\n  <span class=\"bp\">|</span> <span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"n\">on_goal</span> <span class=\"bp\">$</span><span class=\"n\">n</span> <span class=\"bp\">$</span><span class=\"n\">seq</span><span class=\"o\">:</span><span class=\"n\">tacticSeq</span> <span class=\"bp\">=&gt;</span><span class=\"o\">)</span>  <span class=\"bp\">=&gt;</span> <span class=\"n\">onGoal</span> <span class=\"n\">n.toNat</span> <span class=\"n\">seq</span> <span class=\"n\">false</span>\n  <span class=\"bp\">|</span> <span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"n\">on_goal</span> <span class=\"bp\">-$</span><span class=\"n\">n</span> <span class=\"bp\">$</span><span class=\"n\">seq</span><span class=\"o\">:</span><span class=\"n\">tacticSeq</span> <span class=\"bp\">=&gt;</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">onGoal</span> <span class=\"n\">n.toNat</span> <span class=\"n\">seq</span> <span class=\"n\">true</span>\n  <span class=\"bp\">|</span> <span class=\"n\">_</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">throwUnsupportedSyntax</span>\n<span class=\"n\">where</span>\n  <span class=\"n\">onGoal</span> <span class=\"o\">(</span><span class=\"n\">n</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">seq</span> <span class=\"o\">:</span> <span class=\"n\">Syntax</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">reverse</span> <span class=\"o\">:</span> <span class=\"n\">Bool</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">TacticM</span> <span class=\"n\">Unit</span> <span class=\"o\">:=</span> <span class=\"k\">do</span>\n    <span class=\"k\">let</span> <span class=\"o\">(</span><span class=\"n\">nth</span><span class=\"o\">,</span> <span class=\"n\">goals</span><span class=\"o\">)</span> <span class=\"bp\">←</span> <span class=\"n\">roundTripNth</span> <span class=\"n\">n</span> <span class=\"n\">reverse</span>\n    <span class=\"k\">match</span> <span class=\"n\">nth</span> <span class=\"k\">with</span>\n      <span class=\"bp\">|</span> <span class=\"mi\">0</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">throwError</span> <span class=\"s2\">\"goals are 1-indexed\"</span>\n      <span class=\"bp\">|</span> <span class=\"n\">n'</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span> <span class=\"bp\">=&gt;</span>\n        <span class=\"k\">match</span> <span class=\"n\">goals.splitAt</span> <span class=\"n\">n'</span> <span class=\"k\">with</span>\n          <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">_</span><span class=\"o\">,</span> <span class=\"o\">[])</span> <span class=\"bp\">=&gt;</span> <span class=\"n\">throwError</span> <span class=\"s2\">\"not enough goals\"</span>\n          <span class=\"bp\">|</span> <span class=\"o\">(</span><span class=\"n\">gls</span><span class=\"o\">,</span> <span class=\"n\">g</span> <span class=\"o\">::</span> <span class=\"n\">grs</span><span class=\"o\">)</span> <span class=\"bp\">=&gt;</span>\n            <span class=\"n\">setGoals</span> <span class=\"o\">[</span><span class=\"n\">g</span><span class=\"o\">]</span>\n            <span class=\"n\">evalTactic</span> <span class=\"n\">seq</span>\n            <span class=\"n\">setGoals</span> <span class=\"bp\">$</span> <span class=\"n\">gls</span> <span class=\"bp\">++</span> <span class=\"o\">(</span><span class=\"bp\">←</span> <span class=\"n\">getUnsolvedGoals</span><span class=\"o\">)</span> <span class=\"bp\">++</span> <span class=\"n\">grs</span>\n</code></pre></div>",
        "id": 270791106,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644020487
    },
    {
        "content": "<p>How to make the syntax for <code>on_goal n =&gt;</code>?</p>",
        "id": 270791133,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644020521
    },
    {
        "content": "<p>Ah, wait</p>",
        "id": 270791221,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644020593
    },
    {
        "content": "<p><code>syntax (name := on_goal) \"on_goal\" ppSpace \"-\"? num ppSpace \"=&gt;\" ppSpace tacticSeq : tactic</code> works <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 270791297,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644020651
    },
    {
        "content": "<p>PR updated</p>",
        "id": 270791464,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644020824
    },
    {
        "content": "<p>you can actually put spaces in the tokens if you need <code>ppSpace</code> around them</p>",
        "id": 270791774,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644021102
    },
    {
        "content": "<p>like<br>\n<code>syntax (name := on_goal) \"on_goal \" \"-\"? num \" =&gt; \" tacticSeq : tactic</code></p>",
        "id": 270791787,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644021116
    },
    {
        "content": "<p>Alright. While I'm at it, do you know a simple toy example that both <code>simp</code> and <code>rw</code> fail but <code>simp_rw</code> closes it? I'm also opening a PR with your code</p>",
        "id": 270791927,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644021237
    },
    {
        "content": "<p>does <a href=\"https://leanprover-community.github.io/mathlib_docs/tactics.html#simp_rw\">tactic#simp_rw</a> have anything?</p>",
        "id": 270792001,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644021289
    },
    {
        "content": "<p>it does</p>",
        "id": 270792020,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644021311
    },
    {
        "content": "<p>Yeah but can we state that one in Mathlib4? I tried it and it but I didn't know what to import to make it work</p>",
        "id": 270792112,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644021397
    },
    {
        "content": "<p>it looks pretty basic, something like data.set.basic should suffice although I don't know if we have much of that</p>",
        "id": 270792245,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644021546
    },
    {
        "content": "<p>We don't have <code>Data.Set</code> yet</p>",
        "id": 270792431,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644021746
    },
    {
        "content": "<p>Here's a standalone version of the example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span> <span class=\"o\">{</span><span class=\"n\">a</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span><span class=\"o\">}</span>\n  <span class=\"o\">(</span><span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">-</span> <span class=\"mi\">1</span> <span class=\"bp\">≤</span> <span class=\"n\">b</span> <span class=\"bp\">↔</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">b</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span><span class=\"o\">)</span>\n  <span class=\"o\">(</span><span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">≤</span> <span class=\"n\">b</span> <span class=\"bp\">↔</span> <span class=\"bp\">∀</span> <span class=\"n\">c</span><span class=\"o\">,</span> <span class=\"n\">c</span> <span class=\"bp\">&lt;</span> <span class=\"n\">a</span> <span class=\"bp\">→</span> <span class=\"n\">c</span> <span class=\"bp\">&lt;</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"bp\">∀</span> <span class=\"n\">b</span><span class=\"o\">,</span> <span class=\"n\">a</span> <span class=\"bp\">-</span> <span class=\"mi\">1</span> <span class=\"bp\">≤</span> <span class=\"n\">b</span><span class=\"o\">)</span> <span class=\"bp\">=</span> <span class=\"bp\">∀</span> <span class=\"n\">b</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">Nat</span><span class=\"o\">,</span> <span class=\"n\">c</span> <span class=\"bp\">&lt;</span> <span class=\"n\">a</span> <span class=\"bp\">→</span> <span class=\"n\">c</span> <span class=\"bp\">&lt;</span> <span class=\"n\">b</span> <span class=\"bp\">+</span> <span class=\"mi\">1</span> <span class=\"o\">:=</span>\n<span class=\"kd\">by</span> <span class=\"n\">simp_rw</span> <span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">,</span> <span class=\"n\">h2</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 270793305,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644022622
    },
    {
        "content": "<p>What about copyrights? I'm copying a lot of stuff from mathlib repo, like tests and docstrings. I'm unsure how to proceed.<br>\nDo I mark the copyright with my name since I'm creating the file, but then list the original authors?</p>",
        "id": 270793734,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1644022924
    },
    {
        "content": "<p>The copyright header on ported files should be copied from the original, although you can add your own name</p>",
        "id": 270795119,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1644024211
    }
]