[
    {
        "content": "<p>The <code>unusedHaveSuffices</code> linter does not pick up unused <code>obtain</code> calls:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">Lint</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">I_dont_have_unused_haves</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">I_am_used</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">trivial</span>\n<span class=\"w\">  </span><span class=\"n\">trivial</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">I_have_unused_haves</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">I_am_unused</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">trivial</span>\n<span class=\"w\">  </span><span class=\"n\">trivial</span>\n\n<span class=\"bp\">#</span><span class=\"n\">lint</span>\n<span class=\"c1\">-- Found 1 error in 2 declarations (plus 0 automatically generated ones) in the current file with 15 linters</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> The `unusedHavesSuffices` linter reports:</span>\n<span class=\"cm\">THE FOLLOWING DECLARATIONS HAVE INEFFECTUAL TERM MODE HAVE/SUFFICES BLOCKS. In the case of `have` this is a term of the form `have h := foo, bar` where `bar` does not refer to `foo`. Such statements have no effect on the generated proof, and can just be replaced by `bar`, in addition to being ineffectual, they may make unnecessary assumptions in proofs appear as if they are used. For `suffices` this is a term of the form `suffices h : foo, proof_of_goal, proof_of_foo` where `proof_of_goal` does not refer to `foo`. Such statements have no effect on the generated proof, and can just be replaced by `proof_of_goal`, in addition to being ineffectual, they may make unnecessary assumptions in proofs appear as if they are used. -/</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">I_have_unused_haves</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> unnecessary have I_am_unused : True -/</span>\n</code></pre></div>",
        "id": 508927272,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1743258638
    },
    {
        "content": "<p>It looks like the <code>obtain</code> doesn't actually make it into the final proof term</p>",
        "id": 508927638,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1743258909
    },
    {
        "content": "<p>It's as if you used a <code>haveI</code></p>",
        "id": 508927839,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1743259075
    }
]