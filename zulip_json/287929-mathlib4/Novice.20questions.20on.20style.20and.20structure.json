[
    {
        "content": "<p>Hi, for Carleson upstreaming I am looking for some advice on how to approach things and what the preference/etiquette is, before spending time on a PR that might end up wasted.</p>\n<ol>\n<li>There are the two following forms:</li>\n</ol>\n<ul>\n<li>In <code>Data/Set/Pairwise/Lattice.lean</code>:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">pairwise_sUnion</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">DirectedOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">⋃₀</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">Pairwise</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Pairwise</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">r</span>\n</code></pre></div>\n<ul>\n<li>In <code>Data/Set/Lattice.lean</code>:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">pairwise_iUnion₂</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">DirectedOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">Pairwise</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋃</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">Pairwise</span><span class=\"w\"> </span><span class=\"n\">r</span>\n</code></pre></div>\n<ul>\n<li>Is the former (stronger) statement indeed preferred? And should the latter be moved to the former file?</li>\n<li>If so, what is the procedure for making that change? Can I just change the statement and announce a (trivial) breaking change? And how to go about moving the declaration?</li>\n</ul>\n<ol start=\"2\">\n<li>My original aim is to transfer these results to <code>IsChain</code> (for the subset relation) through a trivial application of <code>IsChain.directedOn</code>.</li>\n</ol>\n<ul>\n<li>Is that considered useful?</li>\n<li>Does a new file <code>Data/Set/Pairwise/Chain.lean</code> sound like a natural place for that? <code>#find_home</code> suggests <code>Order/CompleteLattice</code>but that only contains the Hausdorff maximality principle at the moment.</li>\n</ul>\n<p>Apologies if these questions are elementary and especially if I could have found the answers somewhere in the docs; I did try...</p>",
        "id": 533435794,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1754647874
    },
    {
        "content": "<p>These are different unions, right?</p>",
        "id": 533436604,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1754648302
    },
    {
        "content": "<p>Yes they are different but comparable results, but the one is stated as implication and the other as iff</p>",
        "id": 533436670,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1754648335
    },
    {
        "content": "<p>In both cases the iff result is true</p>",
        "id": 533436713,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1754648360
    },
    {
        "content": "<p>Okay, then I think we should have the iff for both. I think it's probably fine to replace the existing lemma; it should be easy to adapt any downstream consumers to that</p>",
        "id": 533437035,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1754648524
    },
    {
        "content": "<p>I don't have an opinion on moving things around right now</p>",
        "id": 533437097,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1754648554
    },
    {
        "content": "<p>Having an iff is slightly more annoying since you have to put parens (the exception is when there are no explicit arguments before the iff)</p>",
        "id": 533437135,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754648570
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Novice.20questions.20on.20style.20and.20structure/near/533437135\">said</a>:</p>\n<blockquote>\n<p>Having an iff is slightly more annoying since you have to put parens (the exception is when there are no explicit arguments before the iff)</p>\n</blockquote>\n<p>For this you can use the <code>|&gt;</code> pipe operator in most cases, right?</p>",
        "id": 533439020,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1754649420
    },
    {
        "content": "<p>NB. I would also be happy about some input on question 2 <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 533439102,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1754649471
    },
    {
        "content": "<p>Iff one direction of the iff is commonly used, you can also have both the iff and just the common direction.</p>",
        "id": 533439419,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754649630
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Novice.20questions.20on.20style.20and.20structure/near/533439419\">said</a>:</p>\n<blockquote>\n<p>Iff one direction of the iff is commonly used, you can also have both the iff and just the common direction.</p>\n</blockquote>\n<p>I'll go with this, the least controversial option. Then someone else with more stance in the community may follow up if so desired.<br>\nI'll also create the new file as that seems the obvious thing to do. Thanks for your input. I will refer to this thread in the PR.</p>",
        "id": 533461014,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1754658515
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Novice.20questions.20on.20style.20and.20structure/near/533439419\">said</a>:</p>\n<blockquote>\n<p>Iff one direction of the iff is commonly used, you can also have both the iff and just the common direction.</p>\n</blockquote>\n<p>Often this is done by proving the <code>Iff</code>, and then using <code>alias</code> to create a shorthand for one direction</p>",
        "id": 533461233,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754658600
    },
    {
        "content": "<p>Or you can prove the common direction first, and then use that in the proof of the <code>iff</code>. (If the \"common direction\" proof is a bit longer, this can be nicer. If both directions have short proofs, the iff can be nicer. And in general, probably both ways are fine.)</p>",
        "id": 533462814,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754659156
    },
    {
        "content": "<p>PR is up: <a href=\"https://github.com/leanprover-community/mathlib4/pull/28119\">#28119</a>. Thanks for your input!</p>",
        "id": 533470112,
        "sender_full_name": "Jasper Mulder-Sohn",
        "timestamp": 1754661652
    }
]