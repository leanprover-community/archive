[
    {
        "content": "<p>It seems that <code>lift</code> sometimes duplicates a hypothesis rather than replacing it. Is this intended, or -- if it's a bug -- has it been reported? Example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">Mathlib.Tactic.Lift</span>\n\n<span class=\"kd\">example</span> <span class=\"o\">(</span><span class=\"n\">k</span> <span class=\"o\">:</span> <span class=\"n\">ℕ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">ℤ</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h1</span> <span class=\"o\">:</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">k</span> <span class=\"bp\">=</span> <span class=\"mi\">0</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">h2</span> <span class=\"o\">:</span> <span class=\"mi\">0</span> <span class=\"bp\">≤</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">k</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">False</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span>\n  <span class=\"n\">lift</span> <span class=\"n\">x</span> <span class=\"bp\">*</span> <span class=\"n\">k</span> <span class=\"n\">to</span> <span class=\"n\">ℕ</span> <span class=\"n\">using</span> <span class=\"n\">h2</span> <span class=\"k\">with</span> <span class=\"n\">z</span> <span class=\"n\">hz</span>\n  <span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>The goal state now features a duplication</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>h1✝ h1: ↑z = 0\n</code></pre></div>\n<p>Don't know if it's related, but I also noticed this happening in <code>rw</code>, see<br>\n<a href=\"#narrow/stream/270676-lean4/topic/rw.20duplicates.20a.20hypothesis\">https://leanprover.zulipchat.com/#narrow/stream/270676-lean4/topic/rw.20duplicates.20a.20hypothesis</a></p>",
        "id": 342763351,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1679139482
    },
    {
        "content": "<p>I opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/3000\">!4#3000</a> for this.</p>",
        "id": 343179713,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1679332488
    }
]