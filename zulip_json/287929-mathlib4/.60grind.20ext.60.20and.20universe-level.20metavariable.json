[
    {
        "content": "<p>Here is a funny thing I just ran into: in <a href=\"https://github.com/leanprover-community/mathlib4/blob/82ecf95ecd3b4a4620b9cfca5e027cffa258ee22/Mathlib/CategoryTheory/Action/Limits.lean#L238-L248\">this piece of code in Mathlib</a>, the proofs look \"very grindable\". To do so, I added </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">add_hom</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">neg_hom</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Action</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">hom</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">attribute</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"n\">cases</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Action</span><span class=\"bp\">.</span><span class=\"n\">Hom</span>\n<span class=\"kn\">attribute</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">grind</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">add_hom</span><span class=\"w\"> </span><span class=\"n\">zero_hom</span><span class=\"w\"> </span><span class=\"n\">neg_hom</span>\n<span class=\"kn\">attribute</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"n\">ext</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Action</span><span class=\"bp\">.</span><span class=\"n\">hom_ext</span>\n</code></pre></div>\n<p>just above the instance I linked, and hoped that <code>grind</code> would work.<br>\nIn fact, it did not, and started complaining about expressions containing metavariables. The way I could resolve this was to specify a universe level for the category V at the top of the file (that was introduced via <code>(V : Type*) [Category V]</code>). Only then did <code>grind</code> work .</p>",
        "id": 529717580,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1753052340
    },
    {
        "content": "<p>I think this example shows once more that the <code>(... : Type*) [Category ...]</code> idiom is bad (<a href=\"#narrow/channel/287929-mathlib4/topic/Task.2026.3A.20Replace.20Type.20u.20by.20Type*.20wherever.20possible/near/525554316\">it can also cause huge slowdowns</a>), though <code>(... : Type*) [... : Category.{v}]</code> is good.<br>\nIf we ever want to use grind somewhat massively in category theory, this might clash with the very common usage of the idiom <code>(... : Type*) [... : Category]</code> in the library.</p>",
        "id": 529718155,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1753053050
    },
    {
        "content": "<p>Should we have a <code>Category.{*}</code> syntax?</p>",
        "id": 529719309,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1753054669
    },
    {
        "content": "<p>Since there is no ETA for that <code>Category.{*}</code> syntax, in the meantime, can we have maintainers word on the policy to adopt about <code>(X : Type*) [Category X]</code> (whether we ban it and tell people in review to avoid it or not)?</p>",
        "id": 532044291,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1753960092
    },
    {
        "content": "<p>What is <code>[Category _]</code>?</p>",
        "id": 532048955,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1753961615
    },
    {
        "content": "<p>I think encouraging people to write <code>Category.{v}</code> is good.</p>",
        "id": 532049038,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1753961639
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.60grind.20ext.60.20and.20universe-level.20metavariable/near/532048955\">said</a>:</p>\n<blockquote>\n<p>What is <code>[Category _]</code>?</p>\n</blockquote>\n<p>Sorry, meant to write <code>[Category X]</code></p>",
        "id": 532049631,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1753961810
    }
]