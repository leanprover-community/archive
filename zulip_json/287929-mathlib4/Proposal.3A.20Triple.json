[
    {
        "content": "<p>I propose the following definition:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Triple</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">thd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>The context is that when <span class=\"user-mention\" data-user-id=\"464700\">@David Ang</span> was working with elliptic curves (which are defined with three coordinates x y z), he found that <code>Fin 3 → R</code> was a bit tricky to work with, and <code>R × R × R</code> while being better also had problems (mainly because of the idiom <code>x.2.1</code> and <code>x.2.2</code> instead of <code>x.2</code> and <code>x.3</code>... so I propose <code>Triple</code> to solve this problem.</p>\n<p>(I guess this doesn't have to be low in the hierarchy, I suppose David and I can just have this defined customly in the elliptic curve files.)</p>\n<p>What do yall think?</p>",
        "id": 524721400,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750257009
    },
    {
        "content": "<p>Will this be useful for curves in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">P</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{P}^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">P</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> more generally?</p>",
        "id": 524721712,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1750257091
    },
    {
        "content": "<p>Does <code>α</code> need to be the same for all three factors?</p>",
        "id": 524722134,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1750257217
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Proposal.3A.20Triple/near/524721712\">said</a>:</p>\n<blockquote>\n<p>Will this be useful for curves in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">P</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{P}^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">P</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> more generally?</p>\n</blockquote>\n<p>I'm doing experiments. I'll find out later.</p>",
        "id": 524722234,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750257245
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Proposal.3A.20Triple/near/524722134\">said</a>:</p>\n<blockquote>\n<p>Does <code>α</code> need to be the same for all three factors?</p>\n</blockquote>\n<p>Maybe <code>HTriple</code> for that?</p>",
        "id": 524722309,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750257264
    },
    {
        "content": "<p>Maybe I'm wrong because it will be isolated enough (to elliptic curves), but this seems like a bad idea to me. All of a sudden you can't easily translate between <code>α × α × α</code> and this triple or <code>Fin 3 → α</code> and this triple (or you have to write dedicated API to do so). Basically anything you end up needing related to <code>Prod</code> you then have to duplicate for <code>Triple</code>. Why not just add some specialized API for <code>Fin 3 → α</code> (or <code>α × α × α</code>, whichever is used in elliptic curves)?</p>",
        "id": 524722757,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1750257415
    },
    {
        "content": "<p>I think I saw a proposal to define <code>foo.x</code>, <code>foo.y</code> and <code>foo.z</code> for <code>foo : α × β × γ</code>. That seems reasonable.</p>",
        "id": 524722987,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1750257495
    },
    {
        "content": "<p>I remember in Haskell, they have a separate tuple type for all the different sizes, which would lead to a lot of duplication. How about the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">Tripple</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">α</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tripple</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tripple</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tripple</span><span class=\"bp\">.</span><span class=\"n\">thd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tripple</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"m\">2</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tripple</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"c1\">-- t.snd : α</span>\n</code></pre></div>",
        "id": 524725273,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1750258170
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Proposal.3A.20Triple/near/524725273\">said</a>:</p>\n<blockquote>\n<p>I remember in Haskell, they have a separate tuple type for all the different sizes</p>\n</blockquote>\n<p>This is because Haskell can't have <code>Fin n</code> (at least not without several language extensions which give you an approximation of dependent types).</p>",
        "id": 524726923,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1750258625
    },
    {
        "content": "<p>Yes, that's true, but what I meant was that instead of writing <code>α × β × γ</code> as <code>α × (β × γ)</code> (which is also possible in Haskell), they have a separate \"Tuple 3\" to represent <code>α × β × γ</code></p>",
        "id": 524727491,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1750258795
    },
    {
        "content": "<p>My suggestion above keeps the advantages of using <code>R × R × R</code>, but replaces the idiom <code>x.2.1</code> by <code>x.snd</code> and <code>x.2.2</code> by <code>x.thd</code>.</p>",
        "id": 524728419,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1750259015
    },
    {
        "content": "<p>i'd just like to say that imo <code>x.2.1</code> should basically never occur anyway, since writing <code>x.snd.fst</code> is more explicit about what's going on.</p>",
        "id": 524731258,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1750259799
    },
    {
        "content": "<p>53 messages were moved from this topic to <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/bikeshed.3A.20mp.20and.20mpr/with/524731643\">#mathlib4 &gt; bikeshed: mp and mpr</a> by <span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span>.</p>",
        "id": 524828403,
        "sender_full_name": "Notification Bot",
        "timestamp": 1750317571
    }
]