[
    {
        "content": "<p><a href=\"/user_uploads/3121/5cnOl1jQ5Tbhin_TWfeDNhPQ/induction-uses\">induction-uses</a></p>",
        "id": 507418143,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742623843
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/23211\">#23211</a> is the first big automated commit in my plan to remove induction'. It targets mainly <code>Nat</code> induction, which by far is the most common target of <code>induction'</code> in current mathlib</p>",
        "id": 507429340,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742632198
    },
    {
        "content": "<p>Is there a clear consensus that <code>induction'</code> should be removed?</p>",
        "id": 507502641,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742685791
    },
    {
        "content": "<p>Yes; see the other thread about cases'</p>",
        "id": 507504341,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742687235
    },
    {
        "content": "<p>And <a href=\"#narrow/channel/270676-lean4/topic/To.20replace.20.60induction'.20h.20.3A.20f.20x.60/near/499485119\">#lean4 &gt; To replace &#96;induction' h : f x&#96; @ ðŸ’¬</a></p>",
        "id": 507504626,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742687458
    },
    {
        "content": "<p>(now that the missing functionality has been added to plain <code>induction</code> and is available in current mathlib I am free to go remove <code>induction'</code>)</p>",
        "id": 507504737,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742687536
    },
    {
        "content": "<p>I acknowledge that not all the stated instances have been removed, but as 400+ of 1000 instances are removed by <a href=\"https://github.com/leanprover-community/mathlib4/pull/23211\">#23211</a> I'd really want to get this merged quickly so I can go again without suffering rot</p>",
        "id": 507512088,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742693757
    },
    {
        "content": "<p>The way I would read that discussion is that a particular obstacle to its removal was identified, and that now that obstacle is gone. But I wouldnâ€™t call that a clear consensus.</p>",
        "id": 507556548,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742729559
    },
    {
        "content": "<p><code>induction'</code> isnâ€™t the same as <code>cases'</code>, because there is no <code>rcases</code> or <code>obtain</code>-like syntax to replace it with.</p>",
        "id": 507556763,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742729752
    },
    {
        "content": "<p>Doesn't the fact that the PR was fully automated with a script mean that it's trivial to deal with rot? You just <code>git reset --hard origin/master</code> and rerun the script.</p>",
        "id": 507560145,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742732485
    },
    {
        "content": "<p>The thing that slightly concerns me here is that removing (or discouraging) <code>induction'</code> is pushing users towards equation-compiler-like syntax with <code>|</code> and <code>=&gt;</code>, which is a departure from the dots and indents of the rest of tactic mode. While I now use <code>induction</code> myself, I think that <code>induction'</code> is often better for new users finding their feet, and unlike with the removal of <code>cases'</code>, these users don't have alternatives.</p>\n<p>I'm not saying the change shouldn't be made, but it feels like this is something a single user is pushing for, rather than where there is a clear statement from the maintainers that this change is intended.</p>",
        "id": 507563870,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742735403
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/23324\">#23324</a> deprimes <code>Data.List</code></p>",
        "id": 508161645,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742954046
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"329425\">Peter Nelson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/507563870\">said</a>:</p>\n<blockquote>\n<p>I'm not saying the change shouldn't be made, but it feels like this is something a single user is pushing for, rather than where there is a clear statement from the maintainers that this change is intended.</p>\n</blockquote>\n<p>There is a clear approval for this change: <a href=\"#narrow/channel/270676-lean4/topic/To.20replace.20.60induction'.20h.20.3A.20f.20x.60/near/499485250\">#lean4 &gt; To replace &#96;induction' h : f x&#96; @ ðŸ’¬</a></p>",
        "id": 508161767,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742954114
    },
    {
        "content": "<p>The situation with <code>induction'</code> and <code>induction</code> is like Python 2 and Python 3. All the major players in the software industry had deprecated Python 2 and moved on but there were a number of users <em>irrationally</em> clinging on to Python 2</p>",
        "id": 508162835,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742954630
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"329425\">Peter Nelson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/507563870\">said</a>:</p>\n<blockquote>\n<p>The thing that slightly concerns me here is that removing (or discouraging) <code>induction'</code> is pushing users towards equation-compiler-like syntax with <code>|</code> and <code>=&gt;</code>, which is a departure from the dots and indents of the rest of tactic mode.</p>\n</blockquote>\n<p>Diversity of syntax is a Good Thing for new users â€“ it makes code visually more appealing and prevents misconceptions about tactic mode. <code>|</code> and <code>=&gt;</code> will help them learn the equation compiler</p>",
        "id": 508164282,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742955389
    },
    {
        "content": "<p>I don't see the \"clear approval\".<br>\nI think these refactors should be explored, but no decision has been made.</p>",
        "id": 508165075,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1742955880
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197836\">@Jireh Loreaux</span> left a comment on my last merged depriming PR (<a href=\"https://github.com/leanprover-community/mathlib4/pull/22533\">#22533</a>): <a href=\"https://github.com/leanprover-community/mathlib4/pull/22533#discussion_r2007860604\">https://github.com/leanprover-community/mathlib4/pull/22533#discussion_r2007860604</a></p>\n<blockquote>\n<p>I'm glad this is getting fixed. I think this is a particularly egregious example of the lack of explicit structure in <code>induction'</code></p>\n</blockquote>\n<p>Can we agree that uses of <code>induction'</code> with <strong>five or more</strong> introduced variables are \"egregious\" and should be deprimed?</p>",
        "id": 508165384,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742956062
    },
    {
        "content": "<p>(And if <strong>zero</strong> variables are introduced, it can always be replaced straight up with <code>induction</code>)</p>",
        "id": 508165780,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742956283
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/2a0Ofj5N2dDA0qDypbBmJs-c/induction-uses\">induction-uses</a><br>\n<a href=\"/user_uploads/3121/j6xNxuRaCvoJw0Bh1xnCCfHA/replace.py\">replace.py</a></p>",
        "id": 508218834,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742980826
    },
    {
        "content": "<p>I beefed up my script. Now it leaves less than 450 instances of <code>induction'</code></p>",
        "id": 508219395,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742980982
    },
    {
        "content": "<p>(to be precise, 430)</p>",
        "id": 508241557,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742986715
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598052\">@Jeremy Tan</span> , I think I agree that removing <code>induction'</code> makes sense. But you are being impatient, and glibly dismissive of any resistance. Often people that act this way are in fact trying to push for something bad.</p>",
        "id": 508244312,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742987469
    },
    {
        "content": "<p>Anyone trying to push through a large change has to be impatient to some extent â€“ has to address the concerns of the resistance as far as they can, but ignore the remainder. Otherwise they will be quickly defeated</p>",
        "id": 508250193,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742989182
    },
    {
        "content": "<p>I have addressed your concerns as far as I can here, and <a href=\"https://github.com/leanprover-community/mathlib4/pull/23211\">#23211</a> is now error-free</p>",
        "id": 508250412,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742989239
    },
    {
        "content": "<p>I think that <code>Nat</code> is one of the more defensible settings for the use of <code>induction'</code>. </p>\n<p>In contrast to structural examples with a ton of introduced variables, induction on the natural numbers is intuitive to any mathematician without the concept of â€˜deconstructingâ€™ some <code>n</code>, and the <code>induction'</code> syntax is more sympathetic to that perspective.</p>",
        "id": 508271167,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742994829
    },
    {
        "content": "<p>Maybe tackling the examples with large numbers of variables, rather than <code>Nat</code>, would be a natural place to start?</p>",
        "id": 508274747,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742995562
    },
    {
        "content": "<p>Jeremy, my comment was <em>specifcally</em> about that use of <code>induction'</code> with many branches.</p>\n<p>In general, I <em>personally</em> (not a mandate from the maintainers) prefer the extra structure with the <code>induction</code> tactic, even if it is slightly more verbose, especially because we have a code action for it. However, from the other thread, it was clear that removing <code>induction'</code> was not as desirable in all situations as removing <code>cases'</code> (thanks for doing that!). The reason I merged that one PR of yours about <code>induction'</code> is that all of those replacements did not seem to be relevant to the condition mentioned in the other thread. (I have not had time to review your other PRs on this topic, so I don't know about those.)</p>",
        "id": 508290882,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742998927
    },
    {
        "content": "<p>I'm going to make a PR (or rather overwrite an existing PR) removing those <code>induction'</code> with five or more named variables â€“ see <a href=\"https://github.com/leanprover-community/mathlib4/compare/master...option2\">https://github.com/leanprover-community/mathlib4/compare/master...option2</a></p>",
        "id": 508292219,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742999241
    },
    {
        "content": "<p>I may later extend that to four variables</p>",
        "id": 508292324,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742999266
    },
    {
        "content": "<p>okay, but why not wait for some consensus on how to proceed? Instead of jumping the gun, first determine what the community <em>wants</em>.</p>",
        "id": 508292492,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742999292
    },
    {
        "content": "<p>Only <span class=\"user-mention\" data-user-id=\"329425\">@Peter Nelson</span> has given his thoughts and I'm not sure the community has any opinions on this</p>",
        "id": 508292755,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742999366
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/508165075\">said</a>:</p>\n<blockquote>\n<p>I don't see the \"clear approval\".<br>\nI think these refactors should be explored, but no decision has been made.</p>\n</blockquote>\n<p>This is the message that should make you stop and think: \"hmmm, maybe I should wait on this.\"</p>",
        "id": 508293099,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742999433
    },
    {
        "content": "<p>But I might have to wait forever on that</p>",
        "id": 508294806,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1742999769
    },
    {
        "content": "<p>yes. and that's ok</p>",
        "id": 508295031,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1742999820
    },
    {
        "content": "<p>Jeremy, I'm taking steps in the other thread now to see if we can come to a decision. But indeed, sometimes you (or even me!) have to wait indefinitely for certain things.</p>\n<p>(For instance, I would love to see a global <code>PartialOrder â„‚</code> instance, but that hasn't won enough approval in the past to warrant the change.)</p>",
        "id": 508295870,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742999996
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"329425\">Peter Nelson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/508274747\">said</a>:</p>\n<blockquote>\n<p>Maybe tackling the examples with large numbers of variables, rather than <code>Nat</code>, would be a natural place to start?</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/23324\">#23324</a></p>",
        "id": 508331314,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743007481
    },
    {
        "content": "<p>Searching that PR for <code>| h_</code> flags a number of induction principles whose arguments should be renamed (in a separate PR)</p>",
        "id": 508339004,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743009633
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/508339004\">said</a>:</p>\n<blockquote>\n<p>Searching that PR for <code>| h_</code> flags a number of induction principles whose arguments should be renamed (in a separate PR)</p>\n</blockquote>\n<p>I have a plan to go through all induction principles in mathlib by hand and rename them</p>",
        "id": 508344219,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1743011298
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/508339004\">said</a>:</p>\n<blockquote>\n<p>Searching that PR for <code>| h_</code> flags a number of induction principles whose arguments should be renamed (in a separate PR)</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/23358\">#23358</a></p>",
        "id": 508421950,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743045811
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"598052\">@Jeremy Tan</span>, if you're waiting on decisions here, let me invite you to join in our quest to reduce the use of <code>erw</code> in Mathlib.</p>\n<p>The goal isn't to just replace it with other tactics or rely on unification to blast through the defeq problems, but instead to improve simp (better normal forms, better confluence) lemmas to avoid needing <code>erw</code> in the first place. There are &gt;1000 <code>erw</code> still in the library. Have a look at recent PRs with <code>erw</code> in the title if you'd like inspiration.</p>\n<p>(Of course, feel free to do anything else --- it just occurred to me that this is a project you might enjoy!)</p>",
        "id": 508429196,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1743050762
    },
    {
        "content": "<p>Could we support syntax like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">someInductionOn</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span>\n<span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">someInductionOn</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span>\n</code></pre></div>\n<p>just when <code>someInductionOn</code> has only one branch with new variables <code>a b c</code>? <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span></p>",
        "id": 510327992,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743825085
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"329425\">@Peter Nelson</span> Would the above proposal be a suitable replacement for single-branch <code>cases'/induction'</code>?</p>",
        "id": 510328110,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743825165
    },
    {
        "content": "<p>We can do <code>induction x using someInductionOn with | _ a b c</code>. The problem with omitting <code>| _</code> is that right after <code>with</code> the syntax is looking for a tactic.</p>",
        "id": 510330277,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743826745
    },
    {
        "content": "<p>Peter said <a href=\"https://github.com/leanprover-community/mathlib4/pull/23676#discussion_r2029595617\">here</a> that that \"makes the line longer and introduces a lot of functional programming boilerplate\"</p>",
        "id": 510330432,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743826828
    },
    {
        "content": "<p>In fact the blanked-branch syntax is what Eric put into one of my prior depriming induction PRs</p>",
        "id": 510330499,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743826911
    },
    {
        "content": "<p>How about <code>cases1</code> and <code>induction1</code>?</p>",
        "id": 510330692,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743827056
    },
    {
        "content": "<p>Or even</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">induct</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">someInductionOn</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span>\n</code></pre></div>\n<p>(since <code>induct</code> would be a new tactic, <code>with</code> is not constrained to expect a tactic afterwards)</p>",
        "id": 510333019,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743828817
    },
    {
        "content": "<p>I feel like creating a new tactic just to remove another defies the purpose?</p>",
        "id": 510339001,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743833636
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/510339001\">said</a>:</p>\n<blockquote>\n<p>I feel like creating a new tactic just to remove another defies the purpose?</p>\n</blockquote>\n<p>Or we could make some new field (e.g. <code>with1</code>) for <code>cases</code> and <code>induction</code> to indicate \"there is exactly one branch, here are its variables\"</p>",
        "id": 510342565,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743836552
    },
    {
        "content": "<p>(i.e. <code>with1</code> or whatever we decide on cannot be used with <code>with</code> and will error if the inductor has more than one branch)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">someInductionOn</span><span class=\"w\"> </span><span class=\"n\">with1</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span>\n<span class=\"bp\">=</span>\n<span class=\"n\">induction'</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">someInductionOn</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span>\n</code></pre></div>",
        "id": 510342747,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743836701
    },
    {
        "content": "<p>It must be understood that this is just a nice-looking shorthand for the blanked-branch syntax</p>",
        "id": 510343583,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743837364
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598052\">Jeremy Tan</span> <a href=\"#narrow/stream/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/510330432\">said</a>:</p>\n<blockquote>\n<p>Peter said <a href=\"https://github.com/leanprover-community/mathlib4/pull/23676#discussion_r2029595617\">here</a> that that \"makes the line longer and introduces a lot of functional programming boilerplate\"</p>\n</blockquote>\n<p>The specific comment I made was that <br>\n<code>cases p with | _ m s =&gt; ?_</code> looks worse than<br>\n<code>inductionâ€™ p with m s</code>.</p>\n<p>I donâ€™t have a strong view on what syntax is used, but in that specific instance, <code>cases</code> looks very clunky</p>",
        "id": 510358134,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1743848738
    },
    {
        "content": "<p>Yeah, that's pretty much the worst case and I wouldn't mind shortening it somehow. I'm not sure I'd add a whole separate tactic for it if it didn't exist yet, though</p>",
        "id": 510361566,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1743851194
    },
    {
        "content": "<p>Ideally <code>obtain</code> or <code>rcases</code> would work here, but it doesn't support the custom eliminators</p>",
        "id": 510363545,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743852567
    },
    {
        "content": "<p>Is expanding <code>obtain</code>/<code>rcases</code> on the roadmap?</p>",
        "id": 510367167,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1743855045
    },
    {
        "content": "<p>And if it is, what's the hurry to remove <code>induction'</code>?</p>",
        "id": 510368398,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1743856030
    },
    {
        "content": "<p>There is no hurry</p>",
        "id": 510368450,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1743856078
    },
    {
        "content": "<p>I think there's a reasonable argument to start removing <code>induction'</code> where the replacement is obviously more readable, in that it's general cleanup and it identifies the places which are <em>not</em> more readable.</p>",
        "id": 510368627,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743856196
    },
    {
        "content": "<p>But I think there's an element of Goodhart's law going on here, in that I think this is included in the technical debt counters</p>",
        "id": 510368710,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743856250
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> I do have <a href=\"https://github.com/leanprover-community/mathlib4/pull/23686\">#23686</a> ready for review, fixing more induction branch names (and <code>motive</code>s)</p>",
        "id": 510395763,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743875596
    },
    {
        "content": "<p>What does renaming motives to <code>motive</code> do? I haven't seen any discussion about this.</p>\n<p>There aren't any systems that require the motive to be named <code>motive</code> (you can tell it's a motive because the return type has it as the head function). There's an overly-specific pretty printer that looks for an argument named <code>motive</code>, but I've been thinking of fixing that.</p>\n<p>I suppose it's nice knowing that an argument is the motive by looking at it, but on the other hand whenever you see some higher-order named argument like <code>(argName := fun a b c =&gt; ...)</code>, very often it's something motive-like.</p>",
        "id": 510396155,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743875909
    },
    {
        "content": "<p>Eric insisted on fixing up the <code>motive</code>s in a previous PR on the same topic</p>",
        "id": 510396203,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743875947
    },
    {
        "content": "<p>There was a poll somewhere about this, and the result was <code>motive</code> is the preferred spelling.</p>",
        "id": 510396218,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1743875964
    },
    {
        "content": "<p>(as opposed to <code>p</code> or <code>P</code> or whatever)</p>",
        "id": 510396235,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1743875976
    },
    {
        "content": "<p><a href=\"#narrow/channel/287929-mathlib4/topic/Induction.20argument.20order/near/471521389\">https://leanprover.zulipchat.com/#narrow/channel/287929-mathlib4/topic/Induction.20argument.20order/near/471521389</a></p>",
        "id": 510396316,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1743876020
    },
    {
        "content": "<p>from the looks of it, you even voted on the polls, Kyle <span aria-label=\"face with open eyes and hand over mouth\" class=\"emoji emoji-1fae2\" role=\"img\" title=\"face with open eyes and hand over mouth\">:face_with_open_eyes_and_hand_over_mouth:</span></p>",
        "id": 510396516,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743876162
    },
    {
        "content": "<p>I have a pr <a href=\"https://github.com/leanprover-community/mathlib4/pull/23489\">#23489</a> that will rename all the motives I can find once I finish it</p>",
        "id": 510396650,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1743876245
    },
    {
        "content": "<p>Thanks! I forgot about the poll.</p>\n<p>(<a href=\"https://github.com/leanprover/lean4/blob/851a63bd011c9092522877f396b6e118971b63e3/src/Lean/PrettyPrinter/Delaborator/Builtins.lean#L411\">This</a> is the core delaborator code that is overly restrictive with what it considers to be a <code>motive</code> argument.)</p>",
        "id": 510396925,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743876442
    },
    {
        "content": "<p>the motive argument is just the argument which provides the head symbol for the returntype, right? (this seems to be how the machinery of <code>induction</code> does it?)</p>",
        "id": 510397609,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743876887
    },
    {
        "content": "<p>i.e. if you use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Meta.getElimExprInfo#doc\">docs#Lean.Meta.getElimExprInfo</a> you should get the right argument, i think?</p>",
        "id": 510397682,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743876941
    },
    {
        "content": "<p>although i guess this does not capture induction with multiple motives</p>",
        "id": 510397760,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743876986
    },
    {
        "content": "<p>Yes <span class=\"user-mention\" data-user-id=\"684366\">@Edward van de Meent</span>:<br>\n<span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/510396155\">said</a>:</p>\n<blockquote>\n<p>you can tell it's a motive because the return type has it as the head function</p>\n</blockquote>",
        "id": 510399545,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743878353
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/510396155\">said</a>:</p>\n<blockquote>\n<p>you can tell it's a motive because the return type has it as the head function</p>\n</blockquote>\n<p>That's not necessarily the case; in mutual recursors there are additional motives which are not the head of the return type</p>",
        "id": 510401704,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1743879762
    },
    {
        "content": "<p>Indeed<br>\n<span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/510397760\">said</a>:</p>\n<blockquote>\n<p>although i guess this does not capture induction with multiple motives</p>\n</blockquote>",
        "id": 510401750,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1743879805
    },
    {
        "content": "<p>I didn't meant that to be an if-and-only-if.</p>\n<p>At least the motives all appear in the return types of the minor premises, right? I'm not sure though, maybe you need to look in the arguments of minor premises as well... In any case, multi-motive is a place where it doesn't work to name every motive <code>motive</code>.</p>",
        "id": 510401975,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743879951
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/7830\">lean4#7830</a> is a prototype testing out the change to the <code>cases</code>/<code>induction</code> syntaxes that I was suggesting.</p>\n<p>With this, you can write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span>\n</code></pre></div>\n<p>as as shorthand for</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n</code></pre></div>\n<p>If you name cases, then you can also write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span>\n<span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">tac1</span>\n<span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">tac2</span>\n</code></pre></div>\n<p>rather than</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">tac1</span>\n<span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">tac2</span>\n</code></pre></div>\n<p>It's not possible to write <code>induction n with | _ | _ n ih</code>. Somewhere <span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> suggested that <code>cases</code>/<code>induction</code> should support multiple wildcards. Until today, I didn't realize that <code>_</code> causes the alternative to apply to <em>every</em> remaining pattern. I find this to be unexpected, and I wonder if this should be changed; should <code>_</code> mean \"next remaining case\" and have a new <code>*</code> to mean \"every remaining case\"?</p>",
        "id": 510416180,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743890150
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/510416180\">said</a>:</p>\n<blockquote>\n<p>With this, you can write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span>\n</code></pre></div>\n<p>as as shorthand for</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I would like to see the shorthand I suggested for the one-branch case:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">with1</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span>\n</code></pre></div>\n<p>Once again the conditions for using <code>with1</code> are that there is only one branch and that <code>with</code> is not used</p>",
        "id": 510432229,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1743904093
    },
    {
        "content": "<p>Introducing a new keyword to save three characters doesn't seem like something core Lean would go for.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">with1</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span>\n</code></pre></div>\n<p>Maybe the rcases pattern syntax could accept named constructors in addition to anonymous constructor notation. That could give the alternatives</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span>\n<span class=\"c1\">-- or perhaps</span>\n<span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span>\n<span class=\"c1\">-- or, for short</span>\n<span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span>\n</code></pre></div>\n<p>(I'm assuming that the rcases system would know about custom cases eliminators. I'm not sure how rcases should accept <code>using</code> clauses. The point of rcases is that it's recursive deconstruction, so it seems to me that it shouldn't be a single top-level <code>using</code> clause.)</p>\n<p>Potentially there could be a special pattern to do induction too. It's possible to have something like this work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">induct</span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"bp\">âŸ©</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span>\n</code></pre></div>\n<p>It's just something that came to mind, and I'm not sure I'd want to see it implemented. But, it's clear that it could be convenient sometimes:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">induct</span><span class=\"o\">(</span><span class=\"bp\">âŸ¨_|_|</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"bp\">âŸ©</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">strongRecOn</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span>\n</code></pre></div>\n<p>That's strong induction on <code>n</code> and then immediately doing cases on <code>n</code> into the 0, 1, and n+2 cases.</p>",
        "id": 510511683,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743966944
    },
    {
        "content": "<p>one possibility is something like haskell view patterns, like <code>obtain (Nat.strongRecOn =&gt; âŸ¨n, ihâŸ©) := n</code>. It gets a bit cluttered though, I worry a bit about it turning into something unreadable like ssreflect intro patterns</p>",
        "id": 510511862,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1743967082
    },
    {
        "content": "<p>I worry too, but at least in Lean we get to set the tactic infos, letting people step through intermediate states to some degree; my understanding of ssreflect is that you can only see the before and after state.</p>",
        "id": 510512032,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743967225
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/510511683\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">s</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>OK, I'll be content with this</p>",
        "id": 511554196,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1744343097
    },
    {
        "content": "<p>Currently open PRs in this direction:</p>\n<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/29123\">#29123</a> (<code>Data.{*Nat, Int, *Real}</code>)</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/29124\">#29124</a> (<code>Data.*Fin*</code>)</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/29285\">#29285</a> (most of <code>RingTheory</code>)</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/29286\">#29286</a> (most of <code>Algebra</code>)</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/29313\">#29313</a> (<code>Data.List</code>)</li>\n</ul>\n<p>There are less than 500 uses of <code>induction'</code> left. I would really appreciate it if all these PRs were merged sooner rather than later (all are independent of each other)</p>",
        "id": 537774284,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1757031591
    },
    {
        "content": "<p>Especially <a href=\"https://github.com/leanprover-community/mathlib4/pull/29313\">#29313</a> since most files touched in that PR are at the base of the import web for all mathlib</p>",
        "id": 537774494,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1757031780
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> did you mean to maintainer merge <a href=\"https://github.com/leanprover-community/mathlib4/pull/29123\">#29123</a> after I addressed your review comments (I have done so)?</p>",
        "id": 537775698,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1757032821
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/29542\">#29542</a> removes the <strong>last</strong> uses of <code>induction'</code> in mathlib, archive and counterexamples</p>",
        "id": 538795242,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1757578193
    },
    {
        "content": "<p>After this is merged, all that will be left is to add <code>induction'</code> to the deprecated syntax linter</p>",
        "id": 538795327,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1757578220
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598052\">Jeremy Tan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/538795327\">said</a>:</p>\n<blockquote>\n<p>After this is merged, all that will be left is to add <code>induction'</code> to the deprecated syntax linter</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/29548\">#29548</a> does this</p>",
        "id": 538835405,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1757590922
    },
    {
        "content": "<p>/poll Poll for <a href=\"https://github.com/leanprover-community/mathlib4/pull/29548\">#29548</a>, now that induction' has been completely removed from main mathlib<br>\nYes<br>\nNo</p>",
        "id": 538862240,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1757598065
    },
    {
        "content": "<p>It would be nice if the deprecation were to come with a \"try this\" suggestion. I see that the linter is being added without being enabled, so that's less of a concern, but if it ever were enabled by default for downstream projects I think we have some responsibility to smooth the migration.</p>\n<p>That's tricky though since <code>induction'</code> is unstructured. At least it could suggest a structure that someone could use to copy in cases from the rest of the proof. For example, <code>induction' n with n ih</code> could suggest</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"n\">next</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>for a close analogue to the old version. It could give both that and the <code>where</code> option as well, with more work.</p>",
        "id": 538909485,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757610503
    },
    {
        "content": "<p>Isn't it easiest to just suggest <code>induction n with | zero | succ n ih</code>?</p>",
        "id": 538911604,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757611350
    },
    {
        "content": "<p>If it works, then that would be best, but you'll have to work out when to use <code>@</code> and whether the <code>with</code> variables actually can always be lined up with alternatives.</p>",
        "id": 538912187,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757611585
    },
    {
        "content": "<p>Where would the try this live? In the tactic itself?</p>",
        "id": 538912245,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1757611607
    },
    {
        "content": "<p>Matching the unstructured list of names to the alternatives? Sounds like a fair bit of engineering that might not be worth it for a deprecation</p>",
        "id": 538912279,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1757611619
    },
    {
        "content": "<p>From what I remember, linters can't use that machinery</p>",
        "id": 538912280,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1757611620
    },
    {
        "content": "<p>Now that (as of recently) Try This exists as a widget in MessageData, linters can in fact add a clickable suggestion! (But still not the corresponding code action)</p>",
        "id": 538926830,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1757617684
    },
    {
        "content": "<p>I'm getting to <code>induction</code> in my Real Analysis Game in a week or two, so would love to know what to tell the students. I guess I can jerry rig my own local version (which would be my preferred: <code>induction n with n hn</code>, which currently requires a prime), but I'd love for it not to be too far from the actual Mathlib usage...? (Not that Mathlib decisions should take my stupid little game into account...)</p>",
        "id": 539082983,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1757688370
    },
    {
        "content": "<p>I don't think we're losing the primed version any time soon, only banning it from mathlib. If we implement Kyle's suggestion, the lesson on translating to mathlib style would teach itself!</p>",
        "id": 539129013,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1757696746
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/The.20plan.20to.20remove.20induction'/near/539129013\">said</a>:</p>\n<blockquote>\n<p>I don't think we're losing the primed version any time soon, only banning it from mathlib. If we implement Kyle's suggestion, the lesson on translating to mathlib style would teach itself!</p>\n</blockquote>\n<p>Yes, that is my intention. Can you please vote yes in the poll so <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> can maintainer merge?</p>",
        "id": 539191722,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1757729145
    },
    {
        "content": "<p>Thanks, the sentiment of the community is useful information. Note however that this kind of decision is not made by public polls. The maintainers will take it under consideration in internal discussions.</p>",
        "id": 539256910,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1757755045
    },
    {
        "content": "<p>I am a bit unsatisfied with the proccess (not about removing <code>induction'</code>, I am nutrual about this), there isn't a suggestion for fixing anywhere, codes just broke and fixing need to read them all over. I noticed this change only until I found this thread, without any prior notification in code or even announce.</p>\n<p>Back to the problem itself, how should I trigger the deprecate syntax? Is there an unified way to replace <code>induction' _ with ......</code> where <code>......</code> are about naming the variables?</p>",
        "id": 539608221,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1757954949
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"749361\">@Nailin Guan</span> There do not seem to have been any changes to <code>induction'</code> yet, and the change proposed in this thread is to add a deprecation warning, not remove it.</p>\n<p>Maybe you're working in a file that doesn't import the tactic? It's in <code>Mathlib.Tactic.Cases</code>.</p>",
        "id": 539615335,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1757957520
    },
    {
        "content": "<p>Yeah, Tactic.Cases used to be pulled in much more widely</p>",
        "id": 539619645,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1757959139
    },
    {
        "content": "<p>Importing this makes things work, thanks.</p>",
        "id": 539673018,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1757989587
    },
    {
        "content": "<p>Well you need to import</p>",
        "id": 539673149,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757989714
    },
    {
        "content": "<p>Back to my second question, for example what is the ideal way to change <code>induction' z using Polynomial.induction_on' wiith f g hf hg n a</code> into <code>induction ...</code>? I don't think <code>rename_i</code> is good enough?</p>",
        "id": 539673617,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1757990182
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">induction_on'</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"n\">hg</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">monomial</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 539690600,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1758003509
    },
    {
        "content": "<p>The names <code>add</code> and <code>monomial</code> come from the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.induction_on%27#doc\">docs#Polynomial.induction_on'</a> and, as you can see, the arguments are the same as for the <code>induction'</code> tactic, in the same order, with the advantage (so I feel) that you can switch the <code>add</code> and <code>monomial</code> proofs if you prefer so.</p>",
        "id": 539690727,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1758003603
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"749361\">@Nailin Guan</span> <code>induction'</code> has been banned from mathlib since <a href=\"https://github.com/leanprover-community/mathlib4/commit/5e8936e560f53cd39eb49ed22e93662a0f0a1928\">https://github.com/leanprover-community/mathlib4/commit/5e8936e560f53cd39eb49ed22e93662a0f0a1928</a></p>",
        "id": 539710054,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1758010947
    }
]