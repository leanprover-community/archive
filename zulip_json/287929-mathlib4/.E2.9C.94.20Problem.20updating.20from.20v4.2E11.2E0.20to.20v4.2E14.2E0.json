[
    {
        "content": "<p>I am trying to update a project from v4.11.0 to v4.14.0.  <code>lake build</code> is giving me the following error message:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">✖</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">415</span><span class=\"bp\">/</span><span class=\"mi\">2514</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">widgetJsAll</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">widget</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">npm</span><span class=\"w\"> </span><span class=\"n\">clean</span><span class=\"bp\">-</span><span class=\"n\">install</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">execute</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">process</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">npm'</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">npm'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">255</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">builds</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">widgetJsAll</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n</code></pre></div>\n<p>Suggestions for how to fix this?</p>",
        "id": 489110432,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1734292676
    },
    {
        "content": "<p>Perhaps I don't have npm and I need to install it?</p>",
        "id": 489111170,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1734293353
    },
    {
        "content": "<p>Deleting the <code>.lake</code> directory and retrying I think is the fix</p>",
        "id": 489111803,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1734293965
    },
    {
        "content": "<p>(and make sure you have an Internet connection when you retry)</p>",
        "id": 489111814,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1734293983
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"453098\">Dan Velleman</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Problem.20updating.20from.20v4.2E11.2E0.20to.20v4.2E14.2E0/near/489111170\">said</a>:</p>\n<blockquote>\n<p>Perhaps I don't have npm and I need to install it?</p>\n</blockquote>\n<p>No, you don’t need this. What you are seeing is an unfortunate bug, sorry about that. Many people had this issue during the past few weeks. The “fix” is to remove the <code>.lake</code> folder and try again.</p>",
        "id": 489111899,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1734294051
    },
    {
        "content": "<p>Thanks.  I'll try that.</p>",
        "id": 489112246,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1734294419
    },
    {
        "content": "<p>It looks like that fixed it.  Thanks!</p>",
        "id": 489112354,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1734294503
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"453098\">Dan Velleman</span> has marked this topic as resolved.</p>",
        "id": 489273013,
        "sender_full_name": "Notification Bot",
        "timestamp": 1734364383
    }
]