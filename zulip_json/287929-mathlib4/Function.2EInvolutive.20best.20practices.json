[
    {
        "content": "<p>Imagine we have something like the following declarations in Mathlib:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">foo_foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">foo</span><span class=\"bp\">.</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">foo_involutive</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"bp\">.</span><span class=\"n\">Involutive</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">foo_foo</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">foo_bijective</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"bp\">.</span><span class=\"n\">Bijective</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">foo_involutive</span><span class=\"bp\">.</span><span class=\"n\">bijective</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">foo_injective</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"bp\">.</span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">foo_bijective</span><span class=\"bp\">.</span><span class=\"n\">injective</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">foo_surjective</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"bp\">.</span><span class=\"n\">Surjective</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">foo_bijective</span><span class=\"bp\">.</span><span class=\"n\">surjective</span>\n</code></pre></div>\n<ul>\n<li>Do we want to keep both <code>foo_foo</code> and <code>foo_involutive</code> in the API? Or only one of them?</li>\n<li>Do we want to keep <code>foo_injective</code> in the API, even though it can be obtained from <code>foo_bijective</code> definitionally?</li>\n<li>Do we want to keep <code>foo_surjective</code> in the API, even though it can be obtained from <code>foo_bijective</code> definitionally?</li>\n</ul>\n<p>Depending on the answers, I might be more questions.</p>",
        "id": 494822421,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1737382757
    },
    {
        "content": "<p>I think yes, keep all of them for convenience</p>",
        "id": 494822560,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1737382799
    },
    {
        "content": "<p>/poll Assuming we keep all of them, in which order should the lemmas after <code>foo_involutive</code> come?<br>\nBijective first; Injective and Surjective proved from Bijective<br>\nBijective, Injective, Surjective, (in this order) all proved directly from Involutive<br>\nInjective, Surjective, Bijective (in this order) all proved directly from Involutive<br>\nInjective and Surjective first (proved from Involutive), Bijective last (proved from Injective and Surjective)</p>",
        "id": 494824188,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1737383229
    },
    {
        "content": "<p>Having both <code>foo_foo</code> and <code>foo_involutive</code> (or <code>foo_foo</code> and <code>foo_bijective</code> when <code>Involutive</code> is ill-typed such as for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Equiv.symm#doc\">docs#Equiv.symm</a>) is certainly useful, the other three lemmas are nice for convenience but not so big a deal that I'd push either for their inclusion or removal.</p>",
        "id": 494830441,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737384790
    },
    {
        "content": "<p>Does this happen often enough that it should be kept in sync and hence automated?</p>",
        "id": 494831181,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737384975
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Function.2EInvolutive.20best.20practices/near/494830441\">said</a>:</p>\n<blockquote>\n<p>Having both <code>foo_foo</code> and <code>foo_involutive</code> (or <code>foo_foo</code> and <code>foo_bijective</code> when <code>Injective</code> is ill-typed) is certainly useful, the other three lemmas are nice for convenience but not so big a deal that I'd push either for their inclusion or removal.</p>\n</blockquote>\n<p>I see a bit of a difference between including <code>bijective</code> on top of <code>involutive</code> and including <code>injective</code> and <code>surjective</code> on top of the rest. I see the former as useful because not everybody knows that <code>involutive</code> implies <code>bijective</code> and/or the name of the relevant lemma. The latter looks more like an unnecessary boilerplate because everybody knows they can take <code>injective</code> and <code>surjective</code> directly from the definition.</p>",
        "id": 494831825,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1737385149
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Function.2EInvolutive.20best.20practices/near/494831181\">said</a>:</p>\n<blockquote>\n<p>Does this happen often enough that it should be kept in sync and hence automated?</p>\n</blockquote>\n<p>I don't know. If they should be all included for every <code>Involutive</code> function, there will be quite a few of them I guess!</p>",
        "id": 494832022,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1737385203
    }
]