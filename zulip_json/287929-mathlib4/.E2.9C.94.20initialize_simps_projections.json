[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Mathlib</span><span class=\"bp\">\\</span><span class=\"n\">Algebra</span><span class=\"bp\">\\</span><span class=\"n\">Group</span><span class=\"bp\">\\</span><span class=\"n\">Subsemigroup</span><span class=\"bp\">\\</span><span class=\"n\">Defs</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">   </span><span class=\"mi\">99</span>\n<span class=\"w\">  </span><span class=\"mi\">100</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">Subsemigroup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">101</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">AddSubsemigroup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">102</span>\n\n<span class=\"n\">Mathlib</span><span class=\"bp\">\\</span><span class=\"n\">ModelTheory</span><span class=\"bp\">\\</span><span class=\"n\">Substructures</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"mi\">108</span>\n<span class=\"w\">  </span><span class=\"mi\">109</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">Substructure</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">110</span>\n\n<span class=\"n\">Mathlib</span><span class=\"bp\">\\</span><span class=\"n\">Order</span><span class=\"bp\">\\</span><span class=\"n\">UpperLower</span><span class=\"bp\">\\</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"mi\">431</span>\n<span class=\"w\">  </span><span class=\"mi\">432</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">UpperSet</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">433</span>\n\n<span class=\"w\">  </span><span class=\"mi\">457</span>\n<span class=\"w\">  </span><span class=\"mi\">458</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">LowerSet</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">459</span>\n\n<span class=\"n\">Mathlib</span><span class=\"bp\">\\</span><span class=\"n\">Topology</span><span class=\"bp\">\\</span><span class=\"n\">Sets</span><span class=\"bp\">\\</span><span class=\"n\">Closeds</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"mi\">276</span>\n<span class=\"w\">  </span><span class=\"mi\">277</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">Clopens</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">278</span>\n\n<span class=\"n\">Mathlib</span><span class=\"bp\">\\</span><span class=\"n\">Topology</span><span class=\"bp\">\\</span><span class=\"n\">Sets</span><span class=\"bp\">\\</span><span class=\"n\">Compacts</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">   </span><span class=\"mi\">47</span>\n<span class=\"w\">   </span><span class=\"mi\">48</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">Compacts</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">   </span><span class=\"mi\">49</span>\n\n<span class=\"w\">  </span><span class=\"mi\">199</span>\n<span class=\"w\">  </span><span class=\"mi\">200</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">NonemptyCompacts</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">201</span>\n\n<span class=\"w\">  </span><span class=\"mi\">290</span>\n<span class=\"w\">  </span><span class=\"mi\">291</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">PositiveCompacts</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">292</span>\n\n<span class=\"w\">  </span><span class=\"mi\">419</span>\n<span class=\"w\">  </span><span class=\"mi\">420</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">CompactOpens</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">421</span>\n\n<span class=\"n\">Mathlib</span><span class=\"bp\">\\</span><span class=\"n\">Topology</span><span class=\"bp\">\\</span><span class=\"n\">Sets</span><span class=\"bp\">\\</span><span class=\"n\">Opens</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"mi\">120</span>\n<span class=\"w\">  </span><span class=\"mi\">121</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">Opens</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">122</span>\n\n<span class=\"n\">Mathlib</span><span class=\"bp\">\\</span><span class=\"n\">Topology</span><span class=\"bp\">\\</span><span class=\"n\">Sets</span><span class=\"bp\">\\</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"mi\">38</span>\n<span class=\"w\">  </span><span class=\"mi\">39</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">initialize_simps_projections</span><span class=\"w\"> </span><span class=\"n\">ClopenUpperSet</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">carrier</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coe</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"mi\">40</span>\n</code></pre></div>",
        "id": 491795668,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1735929511
    },
    {
        "content": "<p>Yep probably all of these should be fixed at once</p>",
        "id": 491795955,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1735929641
    },
    {
        "content": "<p>Are they all definitely bad?</p>",
        "id": 491795993,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1735929668
    },
    {
        "content": "<p>Definitely</p>",
        "id": 491796568,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1735929960
    },
    {
        "content": "<p>What is definitely wrong with them, out of interest?</p>",
        "id": 491797398,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735930382
    },
    {
        "content": "<p>For each <code>SetLikeStructure</code> above, when you apply the <code>@[simps]</code> attribute to <code>def foo : SetLikeStructure</code>, the <code>simp</code> lemma generated that unpacks the set coercion to the <code>carrier</code> field is named <code>foo_coe</code> rather than <code>coe_foo</code>.</p>",
        "id": 491797631,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1735930485
    },
    {
        "content": "<p>PR: <a href=\"https://github.com/leanprover-community/mathlib4/pull/20451\">#20451</a></p>",
        "id": 491797647,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1735930496
    },
    {
        "content": "<p>Example (one of the few that is referenced directly): <code>IsOpenMap.functor_obj_coe</code> -&gt; <code>IsOpenMap.coe_functor_obj</code></p>",
        "id": 491807522,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1735935609
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"400289\">Artie Khovanov</span> has marked this topic as resolved.</p>",
        "id": 491829215,
        "sender_full_name": "Notification Bot",
        "timestamp": 1735950035
    }
]