[
    {
        "content": "<p>Why is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.restrictScalars#doc\">docs#LinearMap.restrictScalars</a> tagged as <code>coe</code>? This leads to the following mumble-jumble when pretty-printing:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"c1\">-- ↑ℝ : (?m.6 →ₗ[?m.5] ?m.7) → ?m.6 →ₗ[ℝ] ?m.7</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">restrictScalars</span><span class=\"w\"> </span><span class=\"n\">ℝ</span>\n</code></pre></div>",
        "id": 485650453,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1733153397
    },
    {
        "content": "<p>Since the coercion <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.coeIsScalarTower#doc\">docs#LinearMap.coeIsScalarTower</a> is defined as <code>restrictScalars</code>, our default rule would be to tag <code>restrictScalars</code> as <code>@[coe]</code>. But I am not sure whether that coercion is even a good idea, since <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CoeHTCT#doc\">docs#CoeHTCT</a> is an implementation detail that we shouldn't have instances for...</p>",
        "id": 485651048,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1733153538
    },
    {
        "content": "<p>Personally I think this instance is a bad idea and we should just write <code>restrictScalars</code> out in full</p>",
        "id": 485670311,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733159024
    },
    {
        "content": "<p>If that's really too long, we could introduced a scoped notation</p>",
        "id": 485670350,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733159040
    },
    {
        "content": "<p>I'm <a href=\"https://github.com/leanprover-community/mathlib4/pull/19085#discussion_r1865627126\">observing</a> some <code>simp</code> timeout if I don't get rid of a certain <code>restrictScalars</code>. Could it be related?</p>",
        "id": 485670813,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1733159174
    }
]