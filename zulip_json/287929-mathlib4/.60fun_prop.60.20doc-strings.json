[
    {
        "content": "<p>I noticed <code>Mathlib.Tactic.FunProp.Theorems</code> has quite a few \"fake\" doc-strings <code>/-- -/</code>.</p>",
        "id": 461982434,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1723508971
    },
    {
        "content": "<p>It would be great if <span class=\"user-mention\" data-user-id=\"346070\">@Tomas Skrivan</span> (or anyone else who wants to gain familiarity with this code) could fill them in. Particularly for <code>structure</code> I really think we should not be skimping on documentation.</p>",
        "id": 461982438,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1723508975
    },
    {
        "content": "<p>More generally for reviewers: New tactics are great --- <code>fun_prop</code> has been a real success --- but it's important Mathlib sets itself up so that tactics are maintainable even if the original author is not available. I know meta reviewing at Mathlib is already a bottleneck, but here even more than elsewhere we should not subvert the doc-string linter!</p>",
        "id": 461982440,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1723508976
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> is this currently addressed in <a href=\"https://github.com/leanprover-community/mathlib4/pull/11092\">#11092</a> ?</p>",
        "id": 461995011,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1723514241
    },
    {
        "content": "<p>Oops, apparently not since that was merged!</p>",
        "id": 461995049,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1723514271
    },
    {
        "content": "<p>Ups I forgot about those in the latest PR. I will fix it soonish.</p>",
        "id": 461998703,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1723515438
    },
    {
        "content": "<p>WhitespaceDocString looks like another linter...  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 462020413,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723525380
    },
    {
        "content": "<p>Not sure if I'm just lazy but the requirement to have a doc string on every function seems to me a bit too extreme. For example, I looked up the Linux kernel and it is definitely not the case there. I find it tedious to write a \"doc\" for a function that literally does what the name says and then I'm not all that motivated to document functions that actually need it as it is not obvious from their code what they do.<br>\nAlso for future maintainability of meta code/tactic I think it would be nice if a concrete person gets assigned as a reviewer/future backup maintainer and they should invest some time to get at least rough overview of the main idea behind the code. I think it would improve the code a lot more and make the process a lot smoother.</p>",
        "id": 462024153,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1723527237
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.60fun_prop.60.20doc-strings/near/462024153\">said</a>:</p>\n<blockquote>\n<p>and then I'm not all that motivated to document functions that actually need it as it is not obvious from their code what they do</p>\n</blockquote>\n<p>I don't understand this part. Aren't the functions where it is not obvious from the code what they do exactly the ones that need carefully written doc-strings?</p>",
        "id": 462024468,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1723527441
    },
    {
        "content": "<p>Ahh I didn't write that properly. I find writing documentation for every function tedious. Because of that I find myself writing worse documentation for functions that actually need an extensive documentation.</p>",
        "id": 462025409,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1723528159
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.60fun_prop.60.20doc-strings/near/461982440\">said</a>:</p>\n<blockquote>\n<p>More generally for reviewers: New tactics are great --- <code>fun_prop</code> has been a real success --- but it's important Mathlib sets itself up so that tactics are maintainable even if the original author is not available. I know meta reviewing at Mathlib is already a bottleneck, but here even more than elsewhere we should not subvert the doc-string linter!</p>\n</blockquote>\n<p>I assume this is mainly directed at <a href=\"https://github.com/leanprover-community/mathlib4/pull/10040\">mathlib4#10040</a> introducing <code>fun_prop</code> originally, isn't it? (In that PR, the missing docstrings are even mentioned as review comment) Generally I completely agree! </p>\n<p>Regarding <a href=\"https://github.com/leanprover-community/mathlib4/pull/11092\">#11092</a>, I think this was one of the PRs that was just too large for anybody to spend the time actually reviewing it with complete confidence. If a single PR just added documentation, it would be much easier to spot that it's missing a few. Maybe we could  expand on the contribution guideline, so that one can link to that when a PR is simply too large to be fun reviewing. Currently it says this:</p>\n<blockquote>\n<p>If you've made a lot of changes/additions, try to make many PRs containing small, self-contained pieces; in general, the smaller the better! This helps you get feedback as you go along, and it is much easier to review. This is especially important for new contributors as it prevents wasted effort.</p>\n</blockquote>",
        "id": 462035863,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723532484
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.60fun_prop.60.20doc-strings/near/462024153\">said</a>:</p>\n<blockquote>\n<p>Also for future maintainability of meta code/tactic I think it would be nice if a concrete person gets assigned as a reviewer/future backup maintainer and they should invest some time to get at least rough overview of the main idea behind the code. I think it would improve the code a lot more and make the process a lot smoother.</p>\n</blockquote>\n<p>If you have a second maintainer for a tactic that's great, but I think it's not realistic to assume that you'll find people for that. Rather, it should be possible from the docs to figure out the details within 1-2 hours. Lean core is not doing the greatest job at documenting their code, but that shouldn't be an example for us to follow, also because there are more contributors in mathlib.</p>",
        "id": 462035880,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1723532493
    },
    {
        "content": "<p>I find that the vast majority of the time, when you think \"writing this docstring is pointless, it would just restate the function name\", this actually means your docstring is not long enough. In particular, your docstring should mention every single argument to the function, by name, and explain its contribution to the effect of the function. Usually just doing that already gets you significantly past the \"restating the function name\" stage, but if you are still having trouble finding things to say, talk about what role it plays within the larger module or tactic, or why someone would want to call it; these are things that even reading the full function definition won't tell you, and can really help illuminate the way you the author think about the code to others.</p>",
        "id": 462182050,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723573405
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.60fun_prop.60.20doc-strings/near/462024153\">said</a>:</p>\n<blockquote>\n<p>Not sure if I'm just lazy but the requirement to have a doc string on every function seems to me a bit too extreme.</p>\n</blockquote>\n<p>Note that the way to ignore this requirement is to write <code>@[nolint docBlame]</code> or similar, not <code>/-- -/</code></p>",
        "id": 462191760,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723575818
    },
    {
        "content": "<p>actually, even better than <code>@[nolint docBlame]</code> is nothing at all in the file itself and then when the linter complains you use the <code>--update</code> option to add the affected declarations to the nolints.json file. The difference is that <code>@[nolint]</code> is for \"deliberate\" lint suppression while nolints.json is a technical debt counter</p>",
        "id": 462194331,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723576594
    },
    {
        "content": "<p>Well, in this case it seems like Tomas did it deliberately :)</p>",
        "id": 462199833,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723578268
    },
    {
        "content": "<p>I did :) I had no clue about nolint or nolint.json. It was also my first contribution to mathlib so I was trying to figure out what it all takes to get  <span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> from CI.</p>",
        "id": 462204688,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1723580052
    }
]