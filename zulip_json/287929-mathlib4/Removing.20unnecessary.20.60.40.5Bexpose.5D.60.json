[
    {
        "content": "<p>When we switched Mathlib to the module system, we added <code>@[expose] public section</code> at the top of every file.</p>\n<p>These PRs remove the <code>@[expose]</code> from those files without <code>def</code>s or <code>instance</code>s:</p>\n<table>\n<thead>\n<tr>\n<th>PR</th>\n<th>Directory</th>\n<th>Files</th>\n<th>URL</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>Analysis/Calculus</td>\n<td>87</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33565\">https://github.com/leanprover-community/mathlib4/pull/33565</a></td>\n</tr>\n<tr>\n<td>2</td>\n<td>Analysis/SpecialFunctions</td>\n<td>56</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33567\">https://github.com/leanprover-community/mathlib4/pull/33567</a></td>\n</tr>\n<tr>\n<td>3</td>\n<td>Analysis/Normed</td>\n<td>80</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33568\">https://github.com/leanprover-community/mathlib4/pull/33568</a></td>\n</tr>\n<tr>\n<td>4</td>\n<td>Analysis/Complex</td>\n<td>52</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33569\">https://github.com/leanprover-community/mathlib4/pull/33569</a></td>\n</tr>\n<tr>\n<td>5</td>\n<td>Algebra/Order</td>\n<td>95</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33570\">https://github.com/leanprover-community/mathlib4/pull/33570</a></td>\n</tr>\n<tr>\n<td>6</td>\n<td>Algebra/Group</td>\n<td>86</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33571\">https://github.com/leanprover-community/mathlib4/pull/33571</a></td>\n</tr>\n<tr>\n<td>7</td>\n<td>Algebra/rest</td>\n<td>62</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33572\">https://github.com/leanprover-community/mathlib4/pull/33572</a></td>\n</tr>\n<tr>\n<td>8</td>\n<td>RingTheory</td>\n<td>137</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33573\">https://github.com/leanprover-community/mathlib4/pull/33573</a></td>\n</tr>\n<tr>\n<td>9</td>\n<td>Data</td>\n<td>146</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33574\">https://github.com/leanprover-community/mathlib4/pull/33574</a></td>\n</tr>\n<tr>\n<td>10</td>\n<td>Topology</td>\n<td>110</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33575\">https://github.com/leanprover-community/mathlib4/pull/33575</a></td>\n</tr>\n<tr>\n<td>11</td>\n<td>MeasureTheory</td>\n<td>94</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33576\">https://github.com/leanprover-community/mathlib4/pull/33576</a></td>\n</tr>\n<tr>\n<td>12</td>\n<td>CategoryTheory</td>\n<td>59</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33577\">https://github.com/leanprover-community/mathlib4/pull/33577</a></td>\n</tr>\n<tr>\n<td>13</td>\n<td>NumberTheory</td>\n<td>69</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33578\">https://github.com/leanprover-community/mathlib4/pull/33578</a></td>\n</tr>\n<tr>\n<td>14</td>\n<td>LinearAlgebra+Order</td>\n<td>122</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33579\">https://github.com/leanprover-community/mathlib4/pull/33579</a></td>\n</tr>\n<tr>\n<td>15</td>\n<td>Probability+Geometry</td>\n<td>111</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33580\">https://github.com/leanprover-community/mathlib4/pull/33580</a></td>\n</tr>\n<tr>\n<td>16</td>\n<td>Misc</td>\n<td>47</td>\n<td><a href=\"https://github.com/leanprover-community/mathlib4/pull/33581\">https://github.com/leanprover-community/mathlib4/pull/33581</a></td>\n</tr>\n</tbody>\n</table>",
        "id": 566270149,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1767583556
    },
    {
        "content": "<p>I think that we can also remove <code>@[expose]</code> from files with <code>Prop</code>-valued instances only, right?</p>",
        "id": 566271621,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767584831
    },
    {
        "content": "<p>BTW, did Claude prepare the whole PRs, or did it write a metaprogram that identifies these files?</p>",
        "id": 566271711,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767584901
    },
    {
        "content": "<p>Let me post numbers in separate messages, so that we can see the status here.</p>",
        "id": 566271934,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585079
    },
    {
        "content": "<p>Analysis/Calculus <a href=\"https://github.com/leanprover-community/mathlib4/pull/33565\">#33565</a></p>",
        "id": 566271943,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585088
    },
    {
        "content": "<p>Analysis/SpecialFunctions <a href=\"https://github.com/leanprover-community/mathlib4/pull/33567\">#33567</a></p>",
        "id": 566271952,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585098
    },
    {
        "content": "<p>Analysis/Normed <a href=\"https://github.com/leanprover-community/mathlib4/pull/33568\">#33568</a></p>",
        "id": 566271968,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585109
    },
    {
        "content": "<p>Analysis/Complex <a href=\"https://github.com/leanprover-community/mathlib4/pull/33569\">#33569</a></p>",
        "id": 566271981,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585117
    },
    {
        "content": "<p>Algebra/Order <a href=\"https://github.com/leanprover-community/mathlib4/pull/33570\">#33570</a></p>",
        "id": 566271998,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585127
    },
    {
        "content": "<p>Algebra/Group <a href=\"https://github.com/leanprover-community/mathlib4/pull/33571\">#33571</a></p>",
        "id": 566272009,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585133
    },
    {
        "content": "<p>Algebra/rest <a href=\"https://github.com/leanprover-community/mathlib4/pull/33572\">#33572</a></p>",
        "id": 566272025,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585142
    },
    {
        "content": "<p>RingTheory <a href=\"https://github.com/leanprover-community/mathlib4/pull/33573\">#33573</a></p>",
        "id": 566272045,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585154
    },
    {
        "content": "<p>Data <a href=\"https://github.com/leanprover-community/mathlib4/pull/33574\">#33574</a></p>",
        "id": 566272052,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585161
    },
    {
        "content": "<p>Topology <a href=\"https://github.com/leanprover-community/mathlib4/pull/33575\">#33575</a></p>",
        "id": 566272062,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585168
    },
    {
        "content": "<p>MeasureTheory <a href=\"https://github.com/leanprover-community/mathlib4/pull/33576\">#33576</a></p>",
        "id": 566272073,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585174
    },
    {
        "content": "<p>CategoryTheory <a href=\"https://github.com/leanprover-community/mathlib4/pull/33577\">#33577</a></p>",
        "id": 566272082,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585180
    },
    {
        "content": "<p>NumberTheory <a href=\"https://github.com/leanprover-community/mathlib4/pull/33578\">#33578</a></p>",
        "id": 566272094,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585187
    },
    {
        "content": "<p>LinearAlgebra+Order <a href=\"https://github.com/leanprover-community/mathlib4/pull/33579\">#33579</a></p>",
        "id": 566272103,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585195
    },
    {
        "content": "<p>Probability+Geometry <a href=\"https://github.com/leanprover-community/mathlib4/pull/33580\">#33580</a></p>",
        "id": 566272111,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585204
    },
    {
        "content": "<p>Misc <a href=\"https://github.com/leanprover-community/mathlib4/pull/33581\">#33581</a></p>",
        "id": 566272119,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585208
    },
    {
        "content": "<p>At least some of these PRs fail CI</p>",
        "id": 566272264,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585348
    },
    {
        "content": "<p>E.g., the measure theory one.</p>",
        "id": 566272271,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1767585357
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Removing.20unnecessary.20.60.40.5Bexpose.5D.60/near/566271711\">said</a>:</p>\n<blockquote>\n<p>BTW, did Claude prepare the whole PRs, or did it write a metaprogram that identifies these files?</p>\n</blockquote>\n<p>It wrote a script (just some grepping, no Lean metaprogramming)</p>",
        "id": 566276254,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1767588854
    },
    {
        "content": "<p>The remaining PRs all pass CI.</p>",
        "id": 566299350,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1767602447
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Removing.20unnecessary.20.60.40.5Bexpose.5D.60/near/566271621\">said</a>:</p>\n<blockquote>\n<p>I think that we can also remove <code>@[expose]</code> from files with <code>Prop</code>-valued instances only, right?</p>\n</blockquote>\n<p>I can't find the info in the reference manual anymore (looks like the module system section has been entirely reworked), but I thought instances always exposed their body?</p>",
        "id": 566299729,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1767602577
    },
    {
        "content": "<p>I'm running</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"gp\">$ </span>git<span class=\"w\"> </span>diff<span class=\"w\"> </span>--word-diff<span class=\"w\"> </span>upstream/master...<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>rg<span class=\"w\"> </span><span class=\"s2\">\"\\[[-+]\"</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>rg<span class=\"w\"> </span>-v<span class=\"w\"> </span><span class=\"s2\">\"^\\[-@\\[expose\\]-\\]public section</span>$<span class=\"s2\">\"</span>\n</code></pre></div>\n<p>on these locally, to double check that Claude has not been naughty.</p>",
        "id": 566301649,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1767603322
    }
]