[
    {
        "content": "<p>Over at <a href=\"https://github.com/leanprover-community/mathlib4/pull/23909\">#23909</a>, the lint-style job fails now --- both for CI-related reasons. (The error message says <code>lake not found</code>; that PR doesn't touch any .yml files.) CC <span class=\"user-mention\" data-user-id=\"238446\">@Anne Baanen</span> since you modified that job recently.</p>",
        "id": 520407017,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1748253245
    },
    {
        "content": "<p>Compare <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/Is.20there.20a.20problem.20with.20Lake.20at.20the.20moment.3F/near/520406390\">#mathlib4 &gt; Is there a problem with Lake at the moment? @ ðŸ’¬</a></p>",
        "id": 520407194,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1748253302
    },
    {
        "content": "<p>This seems to be <code>curl</code> failing in <code>lean-action</code> but not actually causing the workflow to fail:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">curl</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">22</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">requested</span><span class=\"w\"> </span><span class=\"n\">URL</span><span class=\"w\"> </span><span class=\"n\">returned</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">404</span>\n\n<span class=\"n\">elan</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">sSfL</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">releases</span><span class=\"bp\">/</span><span class=\"n\">latest</span><span class=\"bp\">/</span><span class=\"n\">download</span><span class=\"bp\">/</span><span class=\"n\">elan</span><span class=\"bp\">-</span><span class=\"n\">x86_64</span><span class=\"bp\">-</span><span class=\"n\">unknown</span><span class=\"bp\">-</span><span class=\"n\">linux</span><span class=\"bp\">-</span><span class=\"n\">gnu</span><span class=\"bp\">.</span><span class=\"n\">tar</span><span class=\"bp\">.</span><span class=\"n\">gz</span>\n\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/</span><span class=\"n\">work</span><span class=\"bp\">/_</span><span class=\"n\">actions</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">action</span><span class=\"bp\">/</span><span class=\"n\">f807b338d95de7813c5c50d018f1c23c9b93b4ec</span><span class=\"bp\">/</span><span class=\"n\">scripts</span><span class=\"bp\">/</span><span class=\"n\">install_elan</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span>\n\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/</span><span class=\"n\">work</span><span class=\"bp\">/_</span><span class=\"n\">actions</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">action</span><span class=\"bp\">/</span><span class=\"n\">f807b338d95de7813c5c50d018f1c23c9b93b4ec</span><span class=\"bp\">/</span><span class=\"n\">scripts</span><span class=\"bp\">/</span><span class=\"n\">install_elan</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">bin</span><span class=\"bp\">/</span><span class=\"n\">lake</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">directory</span>\n</code></pre></div>",
        "id": 520407220,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1748253308
    },
    {
        "content": "<p>(Shall we merge the two threads?)</p>",
        "id": 520407680,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1748253450
    },
    {
        "content": "<p>The CI issue seems to be related to having a new Lake release that is only compiled for Apple: <a href=\"https://github.com/leanprover/elan/releases/tag/v4.1.2\">https://github.com/leanprover/elan/releases/tag/v4.1.2</a></p>",
        "id": 520407782,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1748253482
    },
    {
        "content": "<p>The other thread has two issues, IIUC - let's use this for the style-lint issue?</p>",
        "id": 520407861,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1748253504
    },
    {
        "content": "<p>Same over at <a href=\"https://github.com/leanprover-community/mathlib4/pull/24149\">#24149</a></p>",
        "id": 520407877,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1748253514
    },
    {
        "content": "<p>So all \"important\" mathlib CI jobs are borked right now, correct? Wow, that's bad.</p>",
        "id": 520408018,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1748253565
    },
    {
        "content": "<p>CC <span class=\"user-mention\" data-user-id=\"110024\">@Sebastian Ullrich</span> since you just released a new elan version</p>",
        "id": 520408210,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1748253615
    },
    {
        "content": "<p>It looks like  <code>lake build</code> is still running, but all PRs will fail CI anyway.</p>",
        "id": 520408226,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1748253619
    },
    {
        "content": "<p>Does the cache generation and upload still work?</p>",
        "id": 520408306,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1748253637
    },
    {
        "content": "<p>I don't know, the PR that I am running through CI right now needs to rebuild all of mathlib.</p>",
        "id": 520408423,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1748253670
    },
    {
        "content": "<p>So as far as I can tell, what seems to have happened is the ongoing GitHub issues caused the Elan release to fail for all but one build, and that build ended up creating the release anyway.</p>",
        "id": 520408624,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1748253728
    },
    {
        "content": "<p>I have been able to download the cache for <a href=\"https://github.com/leanprover-community/mathlib4/pull/25203\">#25203</a>, so I think that the \"Build\" CI is working correctly.</p>",
        "id": 520408852,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1748253804
    },
    {
        "content": "<p>in <a href=\"https://github.com/leanprover-community/mathlib4/pull/24809\">#24809</a> (which I updated recently) the cache generation upload worked correctly (despite the lint-style failure)</p>",
        "id": 520408891,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1748253818
    },
    {
        "content": "<p>So now everyone trying to install the latest Elan on Linux or Windows is going to run into errors. I assume the Hoskinson runners still have Elan in their cache so they are still up.</p>",
        "id": 520409002,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1748253847
    },
    {
        "content": "<p>One solution is to rerun the build jobs until the ongoing GitHub issues let them through by random chance...</p>",
        "id": 520410318,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1748254226
    },
    {
        "content": "<p>Elan linux builds were released a few minutes ago, and lint-style seems to work now.</p>",
        "id": 520411906,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1748254705
    }
]