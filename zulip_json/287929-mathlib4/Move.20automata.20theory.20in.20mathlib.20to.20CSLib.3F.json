[
    {
        "content": "<p>Is there interest in moving automata theory from mathlib to cslib perhaps? Reviewing efforts currently span over the two libs (<a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/with/555492863\">#mathlib4 &gt; Regular languages: the review queue</a> ), and it would certainly be good to unify the APIs (some of the convenient APIs we use in CSLib to define automata are out of scope for mathlib).</p>\n<p>We really try to avoid duplicating results in CSLib, but sometimes this requires developing boilerplate. That's ok per se, but sometimes it's not so straightforward to tell people when they should just go for a CSLib 'native' API approach or instead direct them to go through a mathlib compat layer to reuse results in mathlib somehow... it also depends on how much proof automation can help with the compat theorems.</p>\n<p>(In fact, one could even make an argument for moving all of computability to CSLib, but for now I'd like to have a more focused discussion.)</p>",
        "id": 563159088,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1765451554
    },
    {
        "content": "<p>A relevant thread from a couple of months ago that expressed some concerns with moving things from Mathlib to CSLib: <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Is.20there.20a.20plan.20to.20offload.20Mathlib.2EComputability.20to.20Cslib.3F/with/543107114\">#mathlib4 &gt; Is there a plan to offload Mathlib.Computability to Cslib?</a></p>\n<p>I would guess that some of these concerns are still held. I think (as a CSLib maintainer, but a single opinion) that there is merit to the idea that some areas of Mathlib might have been in CSLib to begin with if it existed earlier. At the same time however, I am open to the idea but not in a rush to move anything. While I have personally made a large effort to make CSLib adhere to the standards that Mathlib uses, there is a differential that comes with experience. As the person who is often maintaining the nightly testing and Mathlib compatibility, I am very willing to take a longer timeline on this to ensure that we are all comfortable with what it would mean to move anything to CSLib.</p>",
        "id": 563166731,
        "sender_full_name": "Chris Henson",
        "timestamp": 1765453507
    },
    {
        "content": "<p>Thanks for your availability. We should definitely take our time in doing it, if we do it.</p>\n<p>That thread contains some good points.<br>\nIn general, if the relevant people are comfortable contributing to cslib, then moving computability things to cslib sounds reasonable to me. Computability is a vast topic, with results and APIs that clearly don't fall into mathlib's current reviewing interests. It'd be good to put it in one place.</p>",
        "id": 563172579,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1765455587
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"929508\">Fabrizio Montesi</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Move.20automata.20theory.20in.20mathlib.20to.20CSLib.3F/near/563172579\">said</a>:</p>\n<blockquote>\n<p>if the relevant people are comfortable contributing to cslib</p>\n</blockquote>\n<p>Should we tag them? (I'm not sure what's the etiquette)</p>",
        "id": 563211203,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765465764
    },
    {
        "content": "<p>and by \"them\" I'm thinking of everyone involved in <a href=\"https://github.com/leanprover-community/mathlib4/pull/31247\">#31247</a></p>",
        "id": 563211817,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765465919
    },
    {
        "content": "<p>Sure, thanks. I was unsure as to whom to reach out to.</p>",
        "id": 563224729,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1765468643
    },
    {
        "content": "<p>Btw, that's an example of parallel APIs in the making: <a href=\"https://leanprover.github.io/cslib/docs/Cslib/Computability/Automata/DA/Prod.html\">https://leanprover.github.io/cslib/docs/Cslib/Computability/Automata/DA/Prod.html</a></p>\n<p>Some operations can be generally stated for (F)LTSs, which are out of mathlib's scope, so CSLib is destined to have some parallel work on discrete/probabilistic/etc. automata.</p>",
        "id": 563225916,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1765468864
    },
    {
        "content": "<p>I think, as a matter of courtesy,  everyone in the following thread should be notified of this discussion:<br>\n<a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/with/555492863\">#mathlib4 &gt; Regular languages: the review queue</a></p>",
        "id": 563243021,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1765473118
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"786070\">@Rudy Peterson</span> <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span></p>",
        "id": 563246372,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765474132
    },
    {
        "content": "<p>I see this move as a good idea. I'm happy to review computability theory, but I am not particularly qualified to do so</p>",
        "id": 563267439,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1765481240
    },
    {
        "content": "<p>How do we feel about moving other components of <code>Computability/</code> to CSLib, such as the development of Turing Machines and Polynomial time computation? After adding P vs NP to formal-conjectures, I have been thinking of doing a larger Turing-machine based development of complexity classes in <a href=\"https://github.com/leanprover-community/CSLib/pull/192\">CSLib#192</a>, but I think it would be a bit awkward if the definitions and higher-level lemmas about them straddle the libraries.</p>",
        "id": 563273535,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1765483312
    },
    {
        "content": "<p>Oh, sorry, I see now that you mentioned you wanted this discussion to be more focused, perhaps I will share my thoughts in the other thread linked above.</p>",
        "id": 563273770,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1765483393
    },
    {
        "content": "<p>I would be interested in adding libraries for weighted language theory, which may be a better fit for CSLib: <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Weighted.20Formal.20Languages/with/502371390\">#mathlib4 &gt; Weighted Formal Languages</a></p>",
        "id": 563297133,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1765493932
    },
    {
        "content": "<p>Are there some good references on weighted formal langauges?</p>",
        "id": 563314463,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1765506088
    },
    {
        "content": "<p>Does CSLib depend on Mathlib? Some parts of the automata theory can be very useful in dynamics (but we aren't there yet).</p>",
        "id": 563320008,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1765511366
    },
    {
        "content": "<p>Yes, very much so</p>",
        "id": 563320667,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1765512026
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Move.20automata.20theory.20in.20mathlib.20to.20CSLib.3F/near/563320008\">said</a>:</p>\n<blockquote>\n<p>Does CSLib depend on Mathlib? Some parts of the automata theory can be very useful in dynamics (but we aren't there yet).</p>\n</blockquote>\n<p>Yes, we do.</p>",
        "id": 563322017,
        "sender_full_name": "Chris Henson",
        "timestamp": 1765513244
    },
    {
        "content": "<p>I don't see why this requires moving anything anywhere. You can PR things to mathlib to make the automata theory that exists more consistent with the cslib design</p>",
        "id": 563539896,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1765564668
    },
    {
        "content": "<p>Won't it always require boilerplate? How will I make things like NFA use the defs and results about LTS from cslib? (Which is what we do in cslib.)</p>",
        "id": 563541721,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1765565447
    },
    {
        "content": "<p>the boilerplate only happens if you have two equivalent but unequal definitions. You should avoid that by upstreaming and downstreaming things until they are using the same definitions</p>",
        "id": 563545196,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1765566855
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110637\">Ching-Tsun Chou</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Move.20automata.20theory.20in.20mathlib.20to.20CSLib.3F/near/563314463\">said</a>:</p>\n<blockquote>\n<p>Are there some good references on weighted formal langauges?</p>\n</blockquote>\n<p>The main resource I've based my work on is: <a href=\"https://drive.google.com/file/d/1wXv-e5tL6WxwK7vzBuVSDySYjkuoGW7f/view\">https://drive.google.com/file/d/1wXv-e5tL6WxwK7vzBuVSDySYjkuoGW7f/view</a><br>\nThis book is associated with this course: <a href=\"https://rycolab.io/classes/aflt-s24/\">https://rycolab.io/classes/aflt-s24/</a></p>\n<p>This textbook also seems good: <a href=\"https://link.springer.com/book/10.1007/978-3-642-01492-5\">https://link.springer.com/book/10.1007/978-3-642-01492-5</a></p>",
        "id": 563560546,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1765573313
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Move.20automata.20theory.20in.20mathlib.20to.20CSLib.3F/near/563545196\">said</a>:</p>\n<blockquote>\n<p>You should avoid that by upstreaming and downstreaming things until they are using the same definitions</p>\n</blockquote>\n<p>To elaborate, I think this is generally a reasonably good worflow:</p>\n<ul>\n<li>Look at the mathlib definition, and conclude that it might not quite work for your use-case</li>\n<li>Try a new definition downstream, duplicating some API, and investigate whether the new definition actually ends up more convenient.</li>\n<li>Once the new definition is stable (for instance, I think CSLib has redefined NFA a few times), consider upstreaming the design by merging it into the mathlib version</li>\n</ul>",
        "id": 563563318,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1765574543
    },
    {
        "content": "<p>So far I can see five opinions for, a few neutrals, and one opinion against. More opinions are always welcome. There's also been some discussion about computability at large, but that's less pressing and imo we can discuss that later, case by case.</p>\n<p>I'd like to get a better idea of what a good process would be (<em>if</em> we decided to go ahead). Rough draft:</p>\n<ol>\n<li>We declare the intention to move and create a dedicated topic.</li>\n<li>PRs to add the content of automata theory from mathlib are submitted to the cslib repo. These PRs refactor defs to align with cslib's design (types go under the <code>Cslib</code> namespace, theorems from other parts of cslib are reused when it makes sense, etc.).</li>\n<li>When we're all happy with the code in cslib, automata theory files are deprecated in mathlib with a pointer to cslib.</li>\n</ol>",
        "id": 563608216,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1765620130
    },
    {
        "content": "<p><del>If the types moved to mathlib, they would not be under the <code>Cslib</code> namespace, of course. You could alias them to the <code>Cslib</code> namespace but I don't see why you would</del> Oh, you mean for moving from mathlib to cslib</p>",
        "id": 563608457,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1765620385
    },
    {
        "content": "<p>Note that steps 1 and 2 can be done in cslib without step 3. That corresponds to Eric's first two bullets</p>",
        "id": 563608629,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1765620627
    },
    {
        "content": "<p>Yes, that's by design. :⁠-⁠)</p>",
        "id": 563608790,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1765620821
    },
    {
        "content": "<p>which is to say, you can start with that and delay deciding whether mathlib will defer to cslib or vice versa once you have your better design (i.e. step 1 can come after step 2)</p>",
        "id": 563608829,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1765620882
    },
    {
        "content": "<p>I can probably live with that, but let me take a round of internal discussion.</p>",
        "id": 563610659,
        "sender_full_name": "Fabrizio Montesi",
        "timestamp": 1765622943
    }
]