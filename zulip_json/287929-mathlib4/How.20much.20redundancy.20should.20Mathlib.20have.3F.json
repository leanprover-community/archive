[
    {
        "content": "<p>Judging from the activity here on channel, there is a lot of generalization, refactoring, and manipulation of structures to handle a lot of instances of proof.  Mathlib is supposed to \"handle it all\", or most of it, being the 21st century (or at least for this decade) foundations of mathematics.</p>\n<p>How much redundancy is there? More specifically, how much redundancy is planned?</p>\n<p>For this post, the main kind of redundancy is two or more proofs of the same concept.  For purposes of pedagogy alone, I would like to see a proof of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>∑</mo><mrow><mn>1</mn><mo>≤</mo><mi>k</mi><mo>≤</mo><mi>n</mi></mrow></msub><mi>k</mi><mo>=</mo><mfrac><mrow><mi>n</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\sum_{1 \\le k \\le n} k = \\frac{n(n+1)}{2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1449em;vertical-align:-0.3949em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1864em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mrel mtight\">≤</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">≤</span><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3949em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.355em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">+</span><span class=\"mord mtight\">1</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> by induction, by algebra, and by \"geometry\" (stacking blocks, however that might look in Lean).  There are more elaborate examples, but I imagine there are other reasons for redundancy.</p>\n<p>Note: the redundant proofs might be instantiated in an alternate repository like Batteries or Plausible.  They might be of such a nature that they are less perfomant but more robust, and not subject to breakage upon addition of new features and extensions to mathlib.  Then those who would trade stability for performance could use this alternate repository.</p>\n<p>Has this idea/issue been raised before?  Where can I read more about the philosophy in the design of Mathlib?</p>",
        "id": 576082839,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1772126824
    },
    {
        "content": "<p>My understanding is that mathlib is not at all interested in collecting <em>proofs</em>, and really only cares about proven <em>statements</em></p>",
        "id": 576086587,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1772127860
    },
    {
        "content": "<p>(a possible exception is the Archive folder)</p>",
        "id": 576086622,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1772127870
    },
    {
        "content": "<p>So if I have an acceptable proof of the Goldbach conjecture in Lean, someone runs the kernel on it, and if the proof is accepted, then the proof is forgotten and only the (formalized) conclusion is added into Mathlib? (To extremize an example.)</p>",
        "id": 576087936,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1772128246
    },
    {
        "content": "<p>well, the proof has to be in mathlib so as to demonstrate it was really proved in the latest version, but we only want the \"best\" proof</p>",
        "id": 576089087,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1772128604
    },
    {
        "content": "<p>In a very literal sense, Lean itself forgets (or doesn't care) about which proof you have. That is, if <code>P : Prop</code> is some statement and you produce two proofs <code>proof1 : P</code> and <code>proof2 : P</code> of that statement, then <code>proof1 = proof2</code> <em>by definition</em> in Lean.</p>\n<p>Now, that's not to say it is impossible for <em>readers</em> of a proof to extract value from the structure of the proof, as of course there is value in such things. However, at this time it is not Mathlib's purview to collect different proofs. Nevertheless, this could be done in a repository downstream of Mathlib. If you wanted to be a bit cheeky, you could call such a repo <code>TheBook</code>.</p>",
        "id": 576089092,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1772128605
    },
    {
        "content": "<p>There are already two repositories formalising proofs from The Book (by Ziegler and Aigner), fwiw.</p>",
        "id": 576089229,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1772128643
    },
    {
        "content": "<p>I see two exceptions to the rule above:</p>\n<ul>\n<li>a second really nice proof, which is added to the Archive (this is very very rare)</li>\n<li>a second proof develops lots of nice theory: in this case, the supporting theory should be added (but the proof itself not). As a case in point, there are two in-flight proofs that the alternating group on at least five letters is simple, following different strategies: the theory-building ingredients of both should be merged, but only one proof of the result.</li>\n</ul>",
        "id": 576089507,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1772128729
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/287929-mathlib4/topic/How.20much.20redundancy.20should.20Mathlib.20have.3F/near/576089092\">said</a>:</p>\n<blockquote>\n<p>Now, that's not to say it is impossible for <em>readers</em> of a proof to extract value from the structure of the proof, as of course there is value in such things. However, at this time it is not Mathlib's purview to collect different proofs. Nevertheless, this could be done in a repository downstream of Mathlib. If you wanted to be a bit cheeky, you could call such a repo <code>TheBook</code>.</p>\n</blockquote>\n<p>All due respect to (appropriate unicode rendering of Erdos Pal), I would name it <code>MyBook</code>.  Indeed, this question is inspired by a rewrite of one of  his ?!slick!? proofs.</p>\n<p>So perhaps for other purposes, such a collection of other proofs should not be in Mathlib proper, but in another repository (let's call it Alternative, or Alsoran) for the purpose of pedagogy or robustness.   </p>\n<p>Regarding Michael's exceptions, I have a hard time imagining the theory of a second proof being added without at least an isomorphic entry also added that would be a restatement of the proof existing in Mathlib.  Is there not room in (the ecosystem of) Mathlib for a statement and a restatement?</p>",
        "id": 576091943,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1772129446
    },
    {
        "content": "<p>I don't have too much to add to what other maintainers have already said, but here's a post in my starred messages from when this came up a few years ago:</p>\n<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/116395-maths/topic/Alternative.20proofs/near/251051977\">said</a>:</p>\n<blockquote>\n<p>Note that it is very common for different proofs (in the usual mathematical sense) of the same statement to generalize in different directions, so having multiple generalized statements is one way to get alternate proofs in mathlib</p>\n</blockquote>",
        "id": 576093977,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1772130150
    },
    {
        "content": "<p>Hmm.  So it sounds like after I submit my proof of Goldbach's Theorem, I could then submit my proof of BachGold's Theorem (for every even n &gt; 100,  n = p +q where p is a prime of the form 4n+1 and q is another prime), and both statements would be accepted?</p>",
        "id": 576094911,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1772130430
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/channel/287929-mathlib4/topic/How.20much.20redundancy.20should.20Mathlib.20have.3F/near/576093977\">said</a>:</p>\n<blockquote>\n<p>I don't have too much to add to what other maintainers have already said, but here's a post in my starred messages from when this came up a few years ago:</p>\n<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/116395-maths/topic/Alternative.20proofs/near/251051977\">said</a>:</p>\n<blockquote>\n<p>Note that it is very common for different proofs (in the usual mathematical sense) of the same statement to generalize in different directions, so having multiple generalized statements is one way to get alternate proofs in mathlib<br>\n</p>\n</blockquote>\n</blockquote>\n<p>Can you post a link to the context around this? It sounds quite intriguing.</p>",
        "id": 576095552,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1772130627
    },
    {
        "content": "<p>The \"said\" is a link that should take you to the original thread.</p>",
        "id": 576096178,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1772130823
    },
    {
        "content": "<p>Sorry, the glare here is hiding the blue.  Thanks.</p>",
        "id": 576096380,
        "sender_full_name": "J. J. Issai (project started by GRP)",
        "timestamp": 1772130882
    }
]