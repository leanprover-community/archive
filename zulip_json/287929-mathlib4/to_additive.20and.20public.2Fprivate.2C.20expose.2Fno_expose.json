[
    {
        "content": "<p>Does <code>to_additive</code> currently handle <code>public</code> and <code>private</code> and <code>expose</code> and <code>no_expose</code> appropriately when they are listed on individual declarations?</p>",
        "id": 571751325,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1770148875
    },
    {
        "content": "<p>I'm not sure if this answers your question, but <a class=\"stream-topic\" data-stream-id=\"239415\" href=\"/#narrow/channel/239415-metaprogramming-.2F-tactics/topic/to_additive.20.20and.20module.20system/with/561764674\">#metaprogramming / tactics &gt; to_additive  and module system</a>  is likely relevant</p>",
        "id": 571751913,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1770149063
    },
    {
        "content": "<p>Thanks, but I don't think this answers the question.</p>",
        "id": 571752360,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1770149210
    },
    {
        "content": "<p>Basically, if one does:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kn\">private</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>is the additive version also <code>private</code>? Likewise for <code>no_expose</code>, etc.</p>",
        "id": 571752576,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1770149272
    },
    {
        "content": "<p>This has to be tested. <code>to_additive</code> uses <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.addDecl#doc\">docs#Lean.addDecl</a> (with <code>forceExpose := false</code>) and I believe this is then added to the public scope iff you're in a public section.</p>\n<p>If <code>@[to_additive] private def ...</code> is a macro for </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">private</span><span class=\"w\"> </span><span class=\"kn\">section</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>(I don't know if it is), then this should work correctly.</p>",
        "id": 571934930,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1770217543
    },
    {
        "content": "<p>never mind, <code>@[to_additive]</code> deals with both of those things:<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/blob/9687699f0e8199c06fb088bac1e8a1086400082e/Mathlib/Tactic/Translate/Core.lean#L227-L230\">private</a><br>\n<a href=\"https://github.com/leanprover-community/mathlib4/blob/9687699f0e8199c06fb088bac1e8a1086400082e/Mathlib/Tactic/Translate/Core.lean#L690\">expose</a></p>",
        "id": 571944059,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1770219514
    }
]