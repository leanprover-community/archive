[
    {
        "content": "<p>I want to work with cartesian closed categories in a computable way, but everything in <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Closed/Cartesian.html\"> Mathlib.CategoryTheory.Closed.Cartesian</a> is marked as <code>noncomputable</code>, even though it seems that almost all of the definitions are already computable. Is there a reason we can't remove the global <code>noncomputable</code> and mark the few noncomputable definitions instead?</p>\n<p>There are four noncomputable definitions:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">internalizeHom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚ä§_</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">‚ü∂</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">‚üπ</span><span class=\"w\"> </span><span class=\"n\">Y</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">powZero</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsInitial</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CartesianClosed</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">‚üπ</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">‚âÖ</span><span class=\"w\"> </span><span class=\"mi\">ùüô</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">C</span>\n</code></pre></div>\n<p>These can be made computable by replacing <code>‚ä§_ C</code> with <code>ùüô_ C</code> (which is available since we assume <code>ChosenFiniteProducts C</code> anyway).</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">prodCoprodDistrib</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HasBinaryCoproducts</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CartesianClosed</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">cartesianClosedOfEquiv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">‚âå</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CartesianClosed</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CartesianClosed</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">letI</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">inverse</span><span class=\"bp\">.</span><span class=\"n\">monoidalOfChosenFiniteProducts</span>\n<span class=\"w\">  </span><span class=\"n\">MonoidalClosed</span><span class=\"bp\">.</span><span class=\"n\">ofEquiv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">inverse</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">.</span><span class=\"n\">toAdjunction</span>\n</code></pre></div>\n<p>These remain noncomputable since they depend on the noncomputable  <code>HasBinaryCoproducts C</code> <code>MonoidalClosed.ofEquiv</code> respectively.</p>",
        "id": 505356972,
        "sender_full_name": "Albus Dompeldorius",
        "timestamp": 1741855637
    },
    {
        "content": "<p>No objection.</p>",
        "id": 505364132,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1741857567
    },
    {
        "content": "<p>Great! I will make a PR.</p>",
        "id": 505365105,
        "sender_full_name": "Albus Dompeldorius",
        "timestamp": 1741857785
    },
    {
        "content": "<p>Opened pull request here: <a href=\"https://github.com/leanprover-community/mathlib4/pull/22896\">PR</a>.</p>",
        "id": 505375843,
        "sender_full_name": "Albus Dompeldorius",
        "timestamp": 1741860529
    }
]