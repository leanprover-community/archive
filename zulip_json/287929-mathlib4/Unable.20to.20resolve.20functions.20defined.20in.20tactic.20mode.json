[
    {
        "content": "<p>I am facing difficulty while unfolding functions defined using tactic mode, particularly with cases inside their definition. A dummy example is here:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">myfunction</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">t₁</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">a</span>\n\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">t₂</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t₂</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">t₁</span><span class=\"w\"> </span><span class=\"k\">with</span>\n\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">b</span>\n\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">t₂</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mytheorem</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">myfunction</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">myfunction</span>\n\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">casesAuxOn</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">casesOn</span>\n\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- stuck at</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ Nat.rec (motive := fun x =&gt; a = x → ℕ) (fun h =&gt; b) (fun n n_ih h =&gt; a + b) a ⋯ = a + b</span>\n\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>How do I get rid of <code>Nat.rec</code>? I faced the same issue with <code>And.rec</code> in my actual code. Any help will be highly appreciated! I am new to Lean and still only picking up these things. Thanks! :)</p>",
        "id": 506222288,
        "sender_full_name": "Mrigank Pawagi",
        "timestamp": 1742233688
    },
    {
        "content": "<p>Try <code>cases a</code></p>",
        "id": 506222743,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742233814
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> That did not change anything... Actually I must mention that I am hoping to not change <code>myfunction</code> at all and taking it as is.</p>\n<p>Edit: Did you mean <code>cases a</code> in the theorem?</p>",
        "id": 506223757,
        "sender_full_name": "Mrigank Pawagi",
        "timestamp": 1742234094
    },
    {
        "content": "<p>Yes, I mean your next step in the proof should be <code>cases a</code></p>",
        "id": 506223880,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742234133
    },
    {
        "content": "<p>The way to simplify <code>Nat.rec _ _ a</code> is to turn <code>a</code> into <code>0</code> or <code>succ _</code></p>",
        "id": 506223950,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742234151
    },
    {
        "content": "<p>Perhaps a more pertinent remark is that it is recommended that you don't use tactic mode to make definitions</p>",
        "id": 506234489,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742237089
    },
    {
        "content": "<p>Thanks, that worked for this example, and something similar worked for my case of <code>And.rec</code>!</p>",
        "id": 506235629,
        "sender_full_name": "Mrigank Pawagi",
        "timestamp": 1742237431
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> thanks for your remark! I actually went and changed my function a bit to minimize the \"tactic mode part\" and the proof immediately became much simpler. I should keep this in mind.</p>",
        "id": 506235911,
        "sender_full_name": "Mrigank Pawagi",
        "timestamp": 1742237506
    }
]