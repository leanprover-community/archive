[
    {
        "content": "<p>I encountered an error that seems to result from a conflict between Verso and Mathlib (both <code>v4.23.0</code>):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">VersoManual</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Verso</span><span class=\"bp\">.</span><span class=\"n\">Genre</span><span class=\"w\"> </span><span class=\"n\">Manual</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Verso</span><span class=\"bp\">.</span><span class=\"n\">Genre</span><span class=\"bp\">.</span><span class=\"n\">Manual</span><span class=\"bp\">.</span><span class=\"n\">InlineLean</span>\n\n<span class=\"bp\">#</span><span class=\"n\">doc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Manual</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"Mathlib conflict?\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"bp\">%%%</span>\n<span class=\"bp\">%%%</span>\n\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">A</span>\n<span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">B</span>\n<span class=\"mf\">1.</span><span class=\"w\"> </span><span class=\"n\">C</span>\n</code></pre></div>\n<p>This triggers following errors:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">TacticAnalysis</span><span class=\"bp\">.</span><span class=\"n\">tacticAnalysis</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">operating</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"n\">without</span><span class=\"w\"> </span><span class=\"n\">range</span>\n<span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">TacticAnalysis</span><span class=\"bp\">.</span><span class=\"n\">tacticAnalysis</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">operating</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"n\">without</span><span class=\"w\"> </span><span class=\"n\">range</span>\n<span class=\"n\">linter</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">TacticAnalysis</span><span class=\"bp\">.</span><span class=\"n\">tacticAnalysis</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">operating</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"n\">without</span><span class=\"w\"> </span><span class=\"n\">range</span>\n</code></pre></div>\n<p>Removing either <code>import Mathlib</code> or the three bullet lists makes the error disappear. Also, adding <code>set_option linter.tacticAnalysis false</code> does not remove these errors.</p>\n<p>It looks like <code>Mathlib.TacticAnalysis</code> runs on Verso syntax nodes without range info. How can I resolve this conflict?</p>",
        "id": 543352839,
        "sender_full_name": "Palalansouk√Æ",
        "timestamp": 1759765367
    },
    {
        "content": "<p>This is a mistake in my original implementation of the tactic analysis linter, assuming that the syntax ranges have a relevant meaning. I have updated <a href=\"https://github.com/leanprover-community/mathlib4/pull/28950\">#28950</a> to completely remove this wrong check.</p>",
        "id": 543366045,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1759769186
    },
    {
        "content": "<p>Thanks for pointing this out!</p>",
        "id": 543366220,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1759769247
    }
]