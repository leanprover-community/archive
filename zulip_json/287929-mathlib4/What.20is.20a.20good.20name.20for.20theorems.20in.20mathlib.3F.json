[
    {
        "content": "<p>Hello,<br>\nI have an open PR with the following theorem:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">name1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">per_p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasPeriod</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">per_q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasPeriod</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">len</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">gcd</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasPeriod</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">gcd</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>It is known as the Periodicity Lemma, or as the Fine and Wilf Theorem.</p>\n<p>I also plan to submit its generalization for  more periods:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">name2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">len</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fwlength</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">periods</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">\\</span><span class=\"o\">{</span><span class=\"mi\">0</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">HasPeriod</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasPeriod</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">gcd</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I wanted to call the name1 <code>periodicity_lemma</code>, and the name2 <code>multiperiodicity_lemma</code>. But <br>\n<span class=\"user-mention\" data-user-id=\"417654\">@Martin Dvořák</span>  suggested  name1 to be <code>hasPeriod_gcd</code>.</p>\n<p>What is more suitable for mathlib? And what should be name2 then?</p>",
        "id": 537939102,
        "sender_full_name": "Stepan Holub",
        "timestamp": 1757102637
    },
    {
        "content": "<p>The convention is usually to name theorems structurally so you find them more easily.<br>\n<code>name1</code> should probably even be <code>HasPeriod.gcd</code> so you can use <code>hp.gcd hq hlen</code> here.<br>\n<code>name2</code> could be named <code>hasPeriod_finsetGcd</code> or <code>hasPeriod_gcd_of_fwlength_lt</code> (or, really, any contraction of <code>hasPeriod_finsetGcd_id_of_fwlength_lt_length_of_forall_mem_sdiff_singleton_zero_hasPeriod</code>)</p>",
        "id": 537944883,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757105257
    },
    {
        "content": "<p>maybe, <code>Finset.HasPeriod.gcd</code> would also work for name2 ?</p>",
        "id": 537964212,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1757119876
    },
    {
        "content": "<p>I suggested <code>HasPeriod.finsetGcd</code></p>",
        "id": 537964569,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757120280
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/What.20is.20a.20good.20name.20for.20theorems.20in.20mathlib.3F/near/537964569\">said</a>:</p>\n<blockquote>\n<p>I suggested <code>HasPeriod.finsetGcd</code></p>\n</blockquote>\n<p>How would that work? There is no <code>HasPeriod</code> in assumptions, so I see no possible h.finsetGcd. Perhaps something like HasAllPeriods.finsetGcd with</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">HasAllPeriods</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">HasPeriod</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">x</span>\n</code></pre></div>",
        "id": 537973093,
        "sender_full_name": "Stepan Holub",
        "timestamp": 1757132319
    },
    {
        "content": "<p>So maybe <code>hasPeriod_finsetGcd</code>? Though, even if it cannot be used with dot syntax it can still be named <code>HasPeriod.finsetGcd</code> just because of analogy with <code>HasPeriod.gcd</code>.</p>",
        "id": 537990952,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757152513
    },
    {
        "content": "<p>I guess you could still use <code>.finsetGcd ...</code> though</p>",
        "id": 537990986,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757152558
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873547\">Robin Arnez</span> <a href=\"#narrow/channel/287929-mathlib4/topic/What.20is.20a.20good.20name.20for.20theorems.20in.20mathlib.3F/near/537990986\">said</a>:</p>\n<blockquote>\n<p>I guess you could still use <code>.finsetGcd ...</code> though</p>\n</blockquote>\n<p>Can you explain how?</p>",
        "id": 537991606,
        "sender_full_name": "Stepan Holub",
        "timestamp": 1757153187
    },
    {
        "content": "<p>Well there are two kinds of dot notation:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">succ</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>The first one works based on the type of the inner expression and the second one works based on the expected type. So if you had the expected type <code>HasPeriod x (P.gcd id)</code>, you could use <code>.finsetGcd</code> to refer to <code>HasPeriod.finsetGcd</code></p>",
        "id": 537992153,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1757153755
    },
    {
        "content": "<p>I see, like in</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasPeriod</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">gcd</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">   </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">finsetGcd</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">   </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>Although I do not see much of an advantage here.</p>",
        "id": 537993816,
        "sender_full_name": "Stepan Holub",
        "timestamp": 1757155643
    }
]