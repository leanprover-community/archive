[
    {
        "content": "<p>Hi everyone.</p>\n<p>How can I import my own lean files to another lean file?</p>\n<p>I've tried several things but everything gives me an error. </p>\n<p>Also, how can I update mathlib? Because in the documentation page for mathlib there are files that I don't have in my computer, I suppose because it has been updated.</p>",
        "id": 468752245,
        "sender_full_name": "Esteban Martínez Vañó",
        "timestamp": 1725878711
    },
    {
        "content": "<p>Have you read <a href=\"https://leanprover-community.github.io/install/project.html\">this page</a>?</p>",
        "id": 468755374,
        "sender_full_name": "María Inés de Frutos Fernández",
        "timestamp": 1725879648
    },
    {
        "content": "<p>Okay, I hadn't read the last part. It is clear now how to update Mathlib</p>",
        "id": 468802828,
        "sender_full_name": "Esteban Martínez Vañó",
        "timestamp": 1725889250
    },
    {
        "content": "<p>But, I still don't know how to import my own files. I mean, if in a project I create some file \"Example.lean\" with some definitions and theorems, and after that I create another file \"Example2.lean\", how can I call the definitions and theorem in Example.lean?</p>",
        "id": 468803239,
        "sender_full_name": "Esteban Martínez Vañó",
        "timestamp": 1725889334
    },
    {
        "content": "<p>likely something along the lines of <code>import MyProject.Path.To.Example</code> might work</p>",
        "id": 468807121,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1725890159
    },
    {
        "content": "<p>i think the path is relative to the root folder.</p>",
        "id": 468807251,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1725890186
    },
    {
        "content": "<p>It doen't work. It says that no directory or file with that name exists. And, if I put it in one of the folders it says is looking at, it says that there is no .olean file with that name</p>",
        "id": 468825578,
        "sender_full_name": "Esteban Martínez Vañó",
        "timestamp": 1725893778
    },
    {
        "content": "<p>Can you take a screenshot of your directory tree in vscode?</p>",
        "id": 468825884,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1725893856
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/PokZrJKYrVs1ORwzhCMgeBQw/imagen.png\">imagen.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/PokZrJKYrVs1ORwzhCMgeBQw/imagen.png\" title=\"imagen.png\"><img data-original-dimensions=\"1920x1023\" src=\"/user_uploads/thumbnail/3121/PokZrJKYrVs1ORwzhCMgeBQw/imagen.png/840x560.webp\"></a></div>",
        "id": 468847264,
        "sender_full_name": "Esteban Martínez Vañó",
        "timestamp": 1725898014
    },
    {
        "content": "<p>Can you post your <code>lakefile.lean</code>?</p>",
        "id": 468914667,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725915398
    },
    {
        "content": "<p>Here it is, altough it is a new project I've created using the steps in the link above and I haven't changed anything apart from copying an archive to the root folder and trying to import that same archive.</p>\n<p><a href=\"/user_uploads/3121/TXE6Lf1uycQVgmWLYau8wL9c/lakefile.lean\">lakefile.lean</a></p>",
        "id": 469080577,
        "sender_full_name": "Esteban Martínez Vañó",
        "timestamp": 1725972419
    },
    {
        "content": "<p>You need to add <code>lean_lib Nets where</code> to your lakefile.lean</p>",
        "id": 469084853,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1725973363
    },
    {
        "content": "<p>and then add <code>Nets.lean</code> in the root directory that imports everything from <code>Nets</code>.</p>",
        "id": 469084992,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1725973394
    },
    {
        "content": "<p>You can add <code>@[default_target]</code> before <code>lean_lib</code> if you want <code>lake build</code> to automatically build it.</p>",
        "id": 469085075,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1725973417
    },
    {
        "content": "<p>Otherwise you will need to use <code>lake build Nets</code>.</p>",
        "id": 469085104,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1725973426
    },
    {
        "content": "<p>Right now Lean probably expects to see Lean files in a directory called <code>FunctionalAnalysis</code> judging by the lakefile, which doesn't mention <code>Nets</code> at all right now so I guess the error message is not surprising.</p>",
        "id": 469085524,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725973518
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Import.20my.20own.20lean.20files/near/469084853\">ha dicho</a>:</p>\n<blockquote>\n<p>You need to add <code>lean_lib Nets where</code> to your lakefile.lean</p>\n</blockquote>\n<p>That worked. Thanks!</p>\n<p>I suppose I'll have to do that for every new folder I create?</p>",
        "id": 469285040,
        "sender_full_name": "Esteban Martínez Vañó",
        "timestamp": 1726031959
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> I really think we need to change the default so that <code>lake build</code> <em>at least</em> builds everything in the main project directory. It seems the current choices we offer are:</p>\n<ul>\n<li>users must remember to add each file as an import line to the main <code>Project.lean</code> manually, as they create them.</li>\n<li>somehow find the glob incantation (e.g. I can never remember/find it, so can't recommend it to people)</li>\n<li>set up their own ad-hoc scripts to keep <code>Project.lean</code> up to date.</li>\n</ul>\n<p>All of these choices are bad, right??</p>",
        "id": 469288773,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726033632
    },
    {
        "content": "<p>(<span class=\"user-mention\" data-user-id=\"733419\">@Esteban Martínez Vañó</span>, sorry to hijack your thread, but yes.)</p>",
        "id": 469288794,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726033657
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> Note that none of these would solve the issue of this thread, which is adding Lean files outside (next to) the library directory  / file.</p>",
        "id": 469405159,
        "sender_full_name": "Mac Malone",
        "timestamp": 1726062848
    },
    {
        "content": "<p>Yes, that's true. But still!</p>",
        "id": 469530626,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726103491
    },
    {
        "content": "<p>This is a point on which I think documentation could be improved.  When I first starting using Lean, I assumed that any Lean file could import any other Lean file.  I didn't know what \"build\" meant, I didn't know what an olean was, and I didn't know what a library was.  I eventually figured those things out, but it took me a while.  Is this all explained somewhere?  In my reading, I didn't find it.</p>",
        "id": 469679258,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1726148378
    },
    {
        "content": "<p>What would be the right places to put this documentation? (I agree, by the way, that there is some significant missing documentation here. <code>lake</code> shouldn't be assuming that its users know what \"a build system\" is, or have ever used one before.)</p>\n<p>I <em>think</em> that the right approach here is to put paragraph long comments into the default <code>lakefile.toml</code> that Lake creates (cf. <a href=\"https://github.com/leanprover-community/mathlib4/pull/4106\">#4106</a>), explaining how everything works (including down to the level of detail \"here is where you put new files, and this is what you need to do to make sure <code>lake build</code> will include them).</p>",
        "id": 469832983,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1726197811
    },
    {
        "content": "<p>I would prefer minimal new comments in the lakefile, but a line linking to an online manual or quickstart seems fine</p>",
        "id": 469875244,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1726211700
    },
    {
        "content": "<p>I think it is worth at least thinking about what such a landing page should look like, the lake readme is not very discoverable and it's also trying to do too many things at once</p>",
        "id": 469875700,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1726211784
    },
    {
        "content": "<p>it should probably be rewritten as a subsection of the lean manual</p>",
        "id": 469875820,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1726211807
    },
    {
        "content": "<p>I think that in addition to explaining what \"build\" means, it would be good to explain what \"import\" does.  As I understand it (and someone please correct me if I've got it wrong), if you put <code>import foo</code> at the top of a file, then what gets imported is <code>foo.olean</code>, not <code>foo.lean</code>.  And that means that you have to make sure that your <code>lakefile</code> is set up so that Lean will produce <code>foo.olean</code>.  If you just put <code>foo.lean</code> in the top directory of your project, then Lean will be willing to open it and process it, but it won't produce <code>foo.olean</code>.  You have to put <code>foo.lean</code> in a library to get Lean to produce <code>foo.olean</code>.</p>",
        "id": 470032287,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1726253658
    },
    {
        "content": "<p>This is true, but I think it would be best to explain this without including the concept of olean files, because you also can't just put a pre-compiled <code>foo.olean</code> at the top of your project and get <code>import foo</code> to work. The short version is that without a lakefile, <code>import</code> can only import files in lean core (i.e. <code>Lean.*</code>, <code>Std.*</code> and <code>Lake.*</code>). If you need anything else (including mathlib or your own project files) you need a project setup</p>",
        "id": 470035860,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1726255279
    }
]