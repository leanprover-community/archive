[
    {
        "content": "<p>Why do we have the both of these? <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Squash#doc\">docs#Squash</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Trunc#doc\">docs#Trunc</a></p>",
        "id": 409039976,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1703032019
    },
    {
        "content": "<p>The latter was ported from lean3's <a href=\"https://leanprover-community.github.io/mathlib_docs/find/trunc\">docs3#trunc</a></p>",
        "id": 409044154,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703033603
    },
    {
        "content": "<p>I guess lean 4 core independently decided it wanted this and invented a different name</p>",
        "id": 409044364,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703033680
    },
    {
        "content": "<p>I guess it's worth deduplicating, right?</p>",
        "id": 409047431,
        "sender_full_name": "Eric Rodriguez",
        "timestamp": 1703034482
    },
    {
        "content": "<p>My impression from talking to agda users is that trunc is a standard name? :-/</p>",
        "id": 409049343,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1703034988
    },
    {
        "content": "<p><code>Squash</code> is not used in Lean outside of a single test. It might be reasonable to simply remove it from Lean.</p>",
        "id": 409067301,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1703039413
    },
    {
        "content": "<p>This feels like something that belongs in Std.</p>",
        "id": 409067346,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1703039424
    },
    {
        "content": "<p>Has this been worked on yet?</p>",
        "id": 506002742,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742163763
    },
    {
        "content": "<p>I found <a href=\"https://github.com/leanprover-community/mathlib4/pull/18952\">#18952</a></p>",
        "id": 506002877,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742163908
    },
    {
        "content": "<p>I redefined <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Squash#doc\">docs#Squash</a> to take a <code>Sort*</code> argument some two months ago, but we never finished phasing out <code>Trunc</code>.</p>",
        "id": 506003429,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1742164338
    },
    {
        "content": "<p>I half recall trying to replace <code>Trunc</code> by <code>Squash</code> in some branch, and running into some issues, due to <code>Squash</code> being defined in terms of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Quot#doc\">docs#Quot</a>, while <code>Trunc</code> is defined in terms of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Quotient#doc\">docs#Quotient</a>. It might be worth doing a core PR to upstream <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=trueQuotient#doc\">docs#trueQuotient</a> and re-define <code>Squash = Quotient trueQuotient</code> (this is def-eq, but allows us to use the stronger theorems on <code>Quotient</code>). At that point, replacing <code>Trunc</code> by <code>Squash</code> should be a simple matter of copy-replace.</p>",
        "id": 506003718,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1742164585
    },
    {
        "content": "<p>That looks like <a href=\"https://github.com/leanprover/lean4/pull/6642\">lean4#6642</a></p>",
        "id": 506003865,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742164764
    },
    {
        "content": "<p>I think there's some contention over whether the current Setoid / Quotient design is correct in general (eg, the pile of mk functions it results in everywhere), and upstreaming to core is going to make it way harder to change that.</p>",
        "id": 506004321,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742165156
    },
    {
        "content": "<p>I don't think the Trunc / Squash duplication is so bad that it warrants painting ourselves into a tighter corner for Quotient</p>",
        "id": 506004406,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742165217
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Squash.2C.20Trunc/near/506004321\">said</a>:</p>\n<blockquote>\n<p>I think there's some contention over whether the current Setoid / Quotient design is correct in general (eg, the pile of mk functions it results in everywhere), and upstreaming to core is going to make it way harder to change that.</p>\n</blockquote>\n<p>What would the alternative be?</p>",
        "id": 506004931,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1742165531
    },
    {
        "content": "<p>Something I'd like to see gain traction is a <code>QuotLike</code> class where you can say that a certain type has the universal properties of a quotient, and all the Quotient/Quot theorems would be in terms of this class instead. If the relation is an outParam, then the theorems could even make sure the correct relation gets used in the theorems.</p>",
        "id": 506006895,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1742166105
    },
    {
        "content": "<p>What kinds of instances do you expect to see for <code>QuotLike</code>?</p>",
        "id": 506009342,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742166675
    },
    {
        "content": "<p><code>QuotientGroup</code>, <code>Submodule.Quotient</code>, <code>Ideal.Quotient</code>, <code>RingCon.Quotient</code>, ...</p>",
        "id": 506009641,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742166738
    },
    {
        "content": "<p>Also, I would like to see a <code>QuotLike</code> instance for the product of 2 groups with <code>QuotLike</code> instances.</p>",
        "id": 506012692,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1742168967
    },
    {
        "content": "<p>(though this may be more questionable)</p>",
        "id": 506012700,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1742168976
    },
    {
        "content": "<p>Let's not forget about concrete types like <code>Surreal</code> which could also have <code>QuotLike</code> instances to avoid duplicating all the basic quotient API</p>",
        "id": 506015810,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1742171416
    },
    {
        "content": "<p>Concretely, I guess you get something like this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">QuotientLike</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">outParam</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">outParam</span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Q</span>\n<span class=\"w\">  </span><span class=\"n\">sound</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"w\">  </span><span class=\"n\">lift_mk</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"n\">ind</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">q</span>\n</code></pre></div>",
        "id": 506065333,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1742197107
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Quot.sound#doc\">docs#Quot.sound</a></p>",
        "id": 506067053,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1742197646
    },
    {
        "content": "<p>I think this might actually have issues, since I think you'd need to know what universe you're going to eliminate into before you quotient?</p>",
        "id": 506067622,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1742197821
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Squash.2C.20Trunc/near/506065333\">said</a>:</p>\n<blockquote>\n<p>Concretely, I guess you get something like this?</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">QuotientLike</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">outParam</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">outParam</span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Q</span>\n<span class=\"w\">  </span><span class=\"n\">sound</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"w\">  </span><span class=\"n\">ind</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">forall</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I don't think you get <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Quotient.exists_rep#doc\">docs#Quotient.exists_rep</a> this way? Might be wrong, didn't really check too hard.</p>",
        "id": 506102573,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742206309
    },
    {
        "content": "<p>you do, you can prove it by induction</p>",
        "id": 506112797,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742208645
    },
    {
        "content": "<p>oh, but the <code>ind</code> rule in that message is wrong, that's not <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Quot.ind#doc\">docs#Quot.ind</a> at all but rather <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Quot.lift_mk#doc\">docs#Quot.lift_mk</a></p>",
        "id": 506113188,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742208744
    },
    {
        "content": "<p>Ah, you're right! (I wrote it on mobile, so had a hard time cross-referencing)</p>",
        "id": 506149999,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1742217733
    },
    {
        "content": "<p>AFAIR, there is a series of PRs introducing this typeclass.</p>",
        "id": 506153651,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1742218583
    },
    {
        "content": "<p>i found <a href=\"https://github.com/leanprover-community/mathlib4/pull/16421\">#16421</a></p>",
        "id": 506158960,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1742219767
    },
    {
        "content": "<p>also, discussion for above PR at <a href=\"#narrow/channel/287929-mathlib4/topic/migrate.20to.20.60QuotLike.60.20API\">#mathlib4 &gt; migrate to &#96;QuotLike&#96; API</a></p>",
        "id": 506159336,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1742219846
    },
    {
        "content": "<p>Just got reminded of this.</p>",
        "id": 535223083,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755652508
    },
    {
        "content": "<p>I have an open PR to core which is broken because of a label I don't know how to remove: <a href=\"https://github.com/leanprover/lean4/pull/6642\">https://github.com/leanprover/lean4/pull/6642</a></p>",
        "id": 535223524,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755652901
    },
    {
        "content": "<p>I'm also not sure how to do the rebase Kim asked me to. Help welcome.</p>",
        "id": 535223646,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755653007
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Squash.2C.20Trunc/near/535223646\">said</a>:</p>\n<blockquote>\n<p>I'm also not sure how to do the rebase Kim asked me to. Help welcome.</p>\n</blockquote>\n<p>I just copy the <code>git rebase</code> command that <a href=\"https://github.com/leanprover/lean4/pull/6642#issuecomment-3016330848\">the bot gives me</a></p>",
        "id": 535223731,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755653084
    },
    {
        "content": "<p>Well I did that. Now how do I remove the awaiting-mathlib label?</p>",
        "id": 535224233,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755653545
    },
    {
        "content": "<p>(Or alternatively, how do I ensure that this doesn't break mathlib?)</p>",
        "id": 535224309,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755653602
    },
    {
        "content": "<p>If you've rebased correctly, then the bot should remove the label after it verifies that Mathlib compiles against it.</p>\n<p>It if doesn't, you need to push changes to the lean-pr-testing-6642 branch on the mathlib4-nightly-testing fork. (e.g. by making a PR to that fork and pinging someone)</p>",
        "id": 535224396,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755653677
    },
    {
        "content": "<p>Why did Linux build for six hours and then fail? Why hasn't the label been removed yet? Did I do something wrong?</p>",
        "id": 535543675,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755795291
    },
    {
        "content": "<p>Github had an outage <a href=\"https://www.githubstatus.com/incidents/c7kq3ctclddp\">last night</a>. <span aria-label=\"woman shrugging\" class=\"emoji emoji-1f937-200d-2640\" role=\"img\" title=\"woman shrugging\">:woman_shrugging:</span></p>",
        "id": 535590502,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755817344
    },
    {
        "content": "<p>I'll retry CI.</p>",
        "id": 535590633,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1755817446
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Squash.2C.20Trunc/near/506067622\">said</a>:</p>\n<blockquote>\n<p>I think this might actually have issues, since I think you'd need to know what universe you're going to eliminate into before you quotient?</p>\n</blockquote>\n<p>Why not just</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">QuotientLike</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">outParam</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">outParam</span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">repr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Quot</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 535861540,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755980261
    },
    {
        "content": "<p>Can someone please help me? I have no idea how to fix what's going on with my PR.</p>",
        "id": 547074332,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1761416380
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/6642\">https://github.com/leanprover/lean4/pull/6642</a></p>",
        "id": 547074336,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1761416383
    },
    {
        "content": "<p>Would it be better if I just re-opened this?</p>",
        "id": 547074365,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1761416418
    },
    {
        "content": "<p>is there a problem here</p>",
        "id": 547075457,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761417598
    },
    {
        "content": "<p>it's both awaiting mathlib and breaks mathlib</p>",
        "id": 547075514,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761417649
    },
    {
        "content": "<p>Yeah, I have no idea how to get rid of the tags on the PR, nor how to get it to build</p>",
        "id": 547076610,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1761418935
    },
    {
        "content": "<p>it should not be awaiting mathlib</p>",
        "id": 547076631,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1761418955
    },
    {
        "content": "<p>The <code>awaiting-mathlib</code> label means it will not be merged until (at least) there is evidence that Mathlib can build against it. </p>\n<p>The <code>breaks-mathlib</code> label means the last attempt to produce this evidence failed.</p>",
        "id": 547097894,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1761447979
    },
    {
        "content": "<p>To fix this situation, you need to push or PR changes to the Mathlib <code>lean-pr-testing-NNNN</code> branch on the nightly-testing fork.</p>",
        "id": 547097983,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1761448094
    },
    {
        "content": "<p>Came back to this. Opened a new PR since clearly I screwed something up in the old one.<br>\n<a href=\"https://github.com/leanprover/lean4/pull/12281\">lean4#12281</a></p>",
        "id": 571660230,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1770125087
    }
]