[
    {
        "content": "<p>I was trying to make a pull request for my file showing that the sphere is simply connected <a href=\"https://github.com/leanprover-community/mathlib4/pull/28246\">here</a>. However, the build is failing with the following error:<br>\n<code>warning: Mathlib/AlgebraicTopology/FundamentalGroupoid/SimplyConnectedSphere.lean:12:0: Modules starting with Mathlib.AlgebraicTopology are not allowed to import modules starting with Mathlib.SetTheory. This module depends on Mathlib.SetTheory.Cardinal.Defs</code>.</p>\n<p>Why aren't algebraic topology files allowed to import set theory files? That seems like a weird restriction to me. Anyways, in my case I want to use the theorem <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/NormedSpace/Connected.html#isPathConnected_compl_singleton_of_one_lt_rank\">isPathConnected_compl_singleton_of_one_lt_rank</a>, which seems like a sensible result for one to use in algebraic topology. However, this result is located in <code>Mathlib.Analysis.NormedSpace.Connected</code> which apparently imports results from set theory. I've listed the chain of imports below in case it matters. The error message also says \"Exceptions can be added to <code>overrideAllowedImportDirs</code>\" but I am not entirely sure what that means.</p>\n<p><code>This module depends on Mathlib.SetTheory.Cardinal.Defs\nwhich is imported by Mathlib.SetTheory.Cardinal.Order,\nwhich is imported by Mathlib.SetTheory.Cardinal.Basic,\nwhich is imported by Mathlib.SetTheory.Cardinal.ENat,\nwhich is imported by Mathlib.SetTheory.Cardinal.ToNat,\nwhich is imported by Mathlib.SetTheory.Cardinal.Finite,\nwhich is imported by Mathlib.LinearAlgebra.Quotient.Basic,\nwhich is imported by Mathlib.LinearAlgebra.Projection,\nwhich is imported by Mathlib.LinearAlgebra.Basis.VectorSpace,\nwhich is imported by Mathlib.LinearAlgebra.AffineSpace.Independent,\nwhich is imported by Mathlib.LinearAlgebra.AffineSpace.Basis,\nwhich is imported by Mathlib.Analysis.Convex.Combination,\nwhich is imported by Mathlib.Analysis.Convex.Topology,\nwhich is imported by Mathlib.Analysis.Normed.Module.Convex,\nwhich is imported by Mathlib.Analysis.NormedSpace.Connected,\nwhich is imported by this module.</code></p>",
        "id": 533832533,
        "sender_full_name": "Sebastian Kumar",
        "timestamp": 1754931151
    },
    {
        "content": "<p>My understanding is that this check if not a hard and fast rule \"you must never import <code>SetTheory</code>\", but more rather \"if you add a new import like this, please check if all files are placed right --- or perhaps some file should be in a different directory to begin with\". At the scale of mathlib, it's really easy to cause a mess; forcing some deliberation is necessary to prevent that from happening too badly.</p>",
        "id": 533833285,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754931418
    },
    {
        "content": "<p>How about you open a PR and your reviewer can help to determine the best way forward? (That might well mean adding an exception.)</p>",
        "id": 533833410,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754931472
    },
    {
        "content": "<p>Honestly, it is a bit weird that we import cardinals to define <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.card#doc\">docs#Nat.card</a>. That seems very unnecessary. Simultaneously, cardinals <em>are</em> quite basic, and maybe we shouldn't shy away from them so much</p>",
        "id": 533833617,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754931561
    },
    {
        "content": "<p><em>If</em> you want to silence the linter, I'd edit <code>Mathlib/Tactic/Linter/DirectoryDependency.lean</code> and remove the line </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"ss\">`Mathlib.AlgebraicTopology</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"ss\">`Mathlib.SetTheory</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>on line 311.</p>",
        "id": 533833638,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754931572
    },
    {
        "content": "<p>What are the actual mathematical prerequisites of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/NormedSpace/Connected.html#isPathConnected_compl_singleton_of_one_lt_rank\">isPathConnected_compl_singleton_of_one_lt_rank</a>? Could this be moved earlier?</p>",
        "id": 533887419,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754958441
    },
    {
        "content": "<p>One dubious step here is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"o\">,</span>\n<span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n</code></pre></div>\n<p>Presumably it is possible to set up the basic theory of linear quotients without ever mentioning finiteness. Perhaps splitting this file would be helpful (if not for this PR, more generally).</p>",
        "id": 533887472,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754958489
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/28277\">#28277</a> manages to clean this up quite a bit.</p>\n<p>It allows us to add <code>assert_not_exists Cardinal</code> in <code>Mathlib.Analysis.Convex.Combination</code> (the 4th last in the chain above).</p>\n<p>Doing so in <code>Mathlib.Analysis.Convex.Topology</code> would be more complicated. It looks like the the import of <code>Mathlib.GroupTheory.Coset.Card</code> into <code>Mathlib.GroupTheory.GroupAction.Quotient</code> is the critical one. I would advise splitting <code>Mathlib.GroupTheory.GroupAction.Quotient</code> into one file containing the basic theory, and another file containing the orbit-stabilizer theorem and its consequences.</p>",
        "id": 533888504,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754959440
    },
    {
        "content": "<p>I should mention that, to make my <a href=\"https://github.com/leanprover-community/mathlib4/pull/28246\">pull request</a> build, I also needed to allow AlgebraicTopology to depend on Geometry (because I use <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Geometry/Manifold/Instances/Sphere.html#stereographic'\">stereographic'</a> from Geometry to prove properties like path connectedness for the sphere) and on NumberTheory because of the import chain:<br>\n<code>This module depends on Mathlib.NumberTheory.Divisors\nwhich is imported by Mathlib.GroupTheory.OrderOfElement,\nwhich is imported by Mathlib.Analysis.Normed.Ring.Lemmas,\nwhich is imported by Mathlib.Analysis.Normed.Field.Lemmas,\nwhich is imported by Mathlib.Analysis.Normed.Module.Basic,\nwhich is imported by Mathlib.Analysis.Normed.Module.Convex,\nwhich is imported by Mathlib.Analysis.NormedSpace.Connected,\nwhich is imported by this module.</code></p>",
        "id": 534002572,
        "sender_full_name": "Sebastian Kumar",
        "timestamp": 1755011512
    },
    {
        "content": "<p>Would it make sense to move the topological construction of stereographic projection to <code>Topology</code>, prove its continuity there, and keep just the smoothness proof in <code>Geometry</code>?</p>",
        "id": 534017505,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1755016396
    },
    {
        "content": "<p>The number theory import also feels a bit unobvious to me, but I don't have a good intuition yet whether it is avoidable.</p>",
        "id": 534017796,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1755016500
    },
    {
        "content": "<p>I don't see why normed rings should know about the order of an element</p>",
        "id": 534017897,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1755016545
    },
    {
        "content": "<p>Sorry, Sebastian, that you tripped on a small \"import bomb\". On the other hand, your PR made (at least me) realise further clean-up opportunities for mathlib :-)</p>",
        "id": 534018155,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1755016642
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Warning.20that.20AlgebraicTopology.20can't.20import.20SetTheory/near/534017897\">said</a>:</p>\n<blockquote>\n<p>I don't see why normed rings should know about the order of an element</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/28318\">#28318</a> seems easy enough</p>",
        "id": 534075776,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755047860
    },
    {
        "content": "<p>I see that a lot of polynomial theory, starting at <code>Polynomial.Coeff</code>, imports <code>CharP</code> in a way that could probably be deferred quite a long way.</p>",
        "id": 534075807,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755047889
    },
    {
        "content": "<p>In another PR related to combinatorial aspects of simplicial sets <a href=\"https://github.com/leanprover-community/mathlib4/pull/28351\">#28351</a>, I will also need to import <code>Mathlib.SetTheory.Ordinal.Rank</code> in order to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsWellFounded.rank#doc\">docs#IsWellFounded.rank</a><br>\n<a href=\"https://github.com/joelriou/mathlib4/blob/75af19d7ca7cb2472da4687d1c7670b95f97f7b1/Mathlib/AlgebraicTopology/SimplicialSet/AnodyneExtensions/RankNat.lean#L46-L48\">https://github.com/joelriou/mathlib4/blob/75af19d7ca7cb2472da4687d1c7670b95f97f7b1/Mathlib/AlgebraicTopology/SimplicialSet/AnodyneExtensions/RankNat.lean#L46-L48</a></p>",
        "id": 534260488,
        "sender_full_name": "Joël Riou",
        "timestamp": 1755100774
    },
    {
        "content": "<p>Do you really need to detour via <code>Ordinal</code> there? You immediately prove that the ordinal is actually a nat: can you just redefine the rank function in some special case where you assume enough finiteness?</p>",
        "id": 534313804,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755124162
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"936817\">@Sebastian Kumar</span>, now that we've merged a few PRs cutting imports out of your dependencies, would you mind merging master again, and giving us an update on how the dependency checker complains now?</p>",
        "id": 534313892,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755124209
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Warning.20that.20AlgebraicTopology.20can't.20import.20SetTheory/near/534313804\">said</a>:</p>\n<blockquote>\n<p>Do you really need to detour via <code>Ordinal</code> there? You immediately prove that the ordinal is actually a nat: can you just redefine the rank function in some special case where you assume enough finiteness?</p>\n</blockquote>\n<p>By some moderate duplication of code, I was able to remove the dependency.</p>",
        "id": 534335124,
        "sender_full_name": "Joël Riou",
        "timestamp": 1755141683
    },
    {
        "content": "<p>Is the fact that we can't import <code>SetTheory</code> in <code>AlgebraicTolopogy</code> a problem for studying interactions between locally presentable categories and model categories?</p>",
        "id": 534437482,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1755161757
    },
    {
        "content": "<p><del>No, this is unrelated (so far).</del> It may be an issue as soon as I introduce finiteness conditions on simplicial sets (which corresponds to being presentable relative to the first infinite cardinal...), so that the small object argument becomes usable for simplicial sets.</p>",
        "id": 534437810,
        "sender_full_name": "Joël Riou",
        "timestamp": 1755161899
    },
    {
        "content": "<p>Maybe we could split AlgebraicTopology (the directory, perhaps also the github label) into the \"naive\" part and the more set theoretic part? Only if people felt it was sufficiently natural to do so. We can of course relax the import restrictions, although I think so far the above experience has been that the restriction was really helpful to prompt us to un-snarl some unnecessary import thickets...</p>",
        "id": 534563105,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755206965
    },
    {
        "content": "<p>Given that the non-\"naive\" part of the folder is highly category-theoretic, wouldn't it make sense to move it inside <code>CategoryTheory</code>?<br>\nIt would have the side-effect of moving quasicategories to <code>CategoryTheory</code>, which would make sense given that they are a model for higher categories (and hopefully, at some point quasi-category theory will pick up in mathlib, and then it would make no sense that <code>CategoryTheory</code> can import things that <code>QuasiCategory</code> can't, but this is of course for a future that is far from now).</p>",
        "id": 534564485,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1755207740
    },
    {
        "content": "<p><code>CategoricalTopology/</code>? <span aria-label=\"woman shrugging\" class=\"emoji emoji-1f937-200d-2640\" role=\"img\" title=\"woman shrugging\">:woman_shrugging:</span></p>",
        "id": 534599751,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755235086
    },
    {
        "content": "<p>I do not think it makes sense to move <code>AlgebraicTopology</code> into <code>CategoryTheory</code>. It is a fact that algebraic topology <em>uses</em> category theory, and among these categorical methods, the small object argument makes use of regular cardinals, etc, but in the end, the point is to prove results about simplicial sets, topological spaces, etc. For example, I intend to prove the Whitehead theorem for CW-complexes as a consequence of the abstract version in homotopical algebra (which is already in <a href=\"https://github.com/leanprover-community/mathlib4/pull/28392\">#28392</a>). As the proof that <code>TopCat</code> has a model category structure uses some of <code>SetTheory</code>, if we keep restricting imports, it means that the \"naive\" homotopy theory of topological spaces cannot use the Whitehead theorem. Eventually, the only reasonable solution I see is to remove the import restriction when it becomes necessary.</p>",
        "id": 534599848,
        "sender_full_name": "Joël Riou",
        "timestamp": 1755235187
    },
    {
        "content": "<p>One thing we can do is use finer import restrictions, e.g. so AlgebraicTopology can only import from SetTheory/Cardinal, but not other subdirectories.</p>",
        "id": 534600962,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755236188
    },
    {
        "content": "<p>(Obviously with all of this the maths must happen, and at the end of the day the real logical dependencies win. We just need to keep up the defences against unnecessary dependencies.)</p>",
        "id": 534601023,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755236249
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> I agree that things like Whitehead's theorem for CW complexes, and facts about topological spaces derived via simplicial methods make more sense in <code>AlgebraicTopology</code>.<br>\nI am however still not convinced it is the right home for simplicial sets/simplicial objects and quasicategories: I am not sure what's the best home for the former, but the latter are more relevant as category-theory objects.</p>",
        "id": 534605581,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1755239899
    },
    {
        "content": "<p>About quasicategories, I have been insisting that things that are specific to quasicategory should not be mixed with the files involving simplicial sets. Then, if this develops significantly, the subfolder <code>AlgebraicTopology.Quasicategory</code> could be moved out easily.</p>",
        "id": 534608249,
        "sender_full_name": "Joël Riou",
        "timestamp": 1755241737
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Warning.20that.20AlgebraicTopology.20can't.20import.20SetTheory/near/534313892\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"936817\">Sebastian Kumar</span>, now that we've merged a few PRs cutting imports out of your dependencies, would you mind merging master again, and giving us an update on how the dependency checker complains now?</p>\n</blockquote>\n<p>I did this and I am now getting the complaint:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">This</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"n\">depends</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">ENat</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">ToNat</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">GroupTheory</span><span class=\"bp\">.</span><span class=\"n\">Coset</span><span class=\"bp\">.</span><span class=\"n\">Card</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">GroupTheory</span><span class=\"bp\">.</span><span class=\"n\">GroupAction</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Convex</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Normed</span><span class=\"bp\">.</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Convex</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">NormedSpace</span><span class=\"bp\">.</span><span class=\"n\">Connected</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 534775447,
        "sender_full_name": "Sebastian Kumar",
        "timestamp": 1755365646
    },
    {
        "content": "<p>Let's see if this works - <a href=\"https://github.com/leanprover-community/mathlib4/pull/28529\">#28529</a></p>",
        "id": 534777570,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1755368200
    },
    {
        "content": "<p>Looks like a pretty good improvement, though <code>Mathlib.Analysis.Normed.Module.Convex</code> still imports cardinals through another path</p>",
        "id": 534781182,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1755373418
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">Defs'</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">transitively</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"n\">via</span>\n<span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">ENat</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">ToNat</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">SetTheory</span><span class=\"bp\">.</span><span class=\"n\">Cardinal</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">InfiniteSum</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">InfiniteSum</span><span class=\"bp\">.</span><span class=\"n\">NatInt</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">InfiniteSum</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Instances</span><span class=\"bp\">.</span><span class=\"n\">NNReal</span><span class=\"bp\">.</span><span class=\"n\">Lemmas</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Instances</span><span class=\"bp\">.</span><span class=\"n\">ENNReal</span><span class=\"bp\">.</span><span class=\"n\">Lemmas</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">InfiniteSum</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">SpecificLimits</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">MetricSpace</span><span class=\"bp\">.</span><span class=\"n\">HausdorffDistance</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">MetricSpace</span><span class=\"bp\">.</span><span class=\"n\">Thickening</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Normed</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Pointwise</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 534781280,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1755373548
    },
    {
        "content": "<p>Oh, I thought this would be bad, but just moving <code>tprod_const</code> out of <code>Mathlib.Topology.Algebra.InfiniteSum.Group</code> seems like it pushes the needle at least as far as <code>Mathlib.Topology.Instances.ENNReal.Lemmas</code>. Might pull on that thread later, unless someone else has time earlier</p>",
        "id": 534781449,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1755373887
    }
]