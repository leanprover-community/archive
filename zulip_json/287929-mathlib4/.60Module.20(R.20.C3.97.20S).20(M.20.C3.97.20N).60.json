[
    {
        "content": "<p>This really doesn't exist especially when <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Pi.module%27#doc\">docs#Pi.module'</a> does? Is anyone already planning on adding it by any chance?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">infer_instance</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n</code></pre></div>",
        "id": 520332981,
        "sender_full_name": "Tian Chen",
        "timestamp": 1748213860
    },
    {
        "content": "<p>What should happen if <code>M := (R × S)</code>?</p>",
        "id": 520333496,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748214248
    },
    {
        "content": "<p>I had to do this in FLT <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/main/FLT%2FMathlib%2FTopology%2FAlgebra%2FModule%2FModuleTopology.lean#L459\">here</a>, but I'm not going to upstream this right now.</p>",
        "id": 520333540,
        "sender_full_name": "Matthew Jasper",
        "timestamp": 1748214295
    },
    {
        "content": "<p>Or for a simpler example, what instance should <code>Module (R × R) ((M × M) × (M × M))</code> find? Is it:</p>\n<ul>\n<li><code>(a, b) • ((c, d), (e, f)) = ((a•c, a•d), (b•e, b•f))</code>, as you are presumably suggesting?</li>\n<li><code>(a, b) • ((c, d), (e, f)) = ((a•c, b•d), (a•e, b•f))</code>, which is what mathlib does today?</li>\n</ul>",
        "id": 520333649,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748214378
    },
    {
        "content": "<p>Oh hmm.</p>",
        "id": 520334108,
        "sender_full_name": "Tian Chen",
        "timestamp": 1748214827
    },
    {
        "content": "<p>There's also the analagous choice for <code>Module (ι → R) (ι → ι → R)</code> between <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Pi.module#doc\">docs#Pi.module</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Pi.module%27#doc\">docs#Pi.module'</a> and mathlib finds the latter. I'm not sure which is preferrable though</p>",
        "id": 520335579,
        "sender_full_name": "Tian Chen",
        "timestamp": 1748216344
    },
    {
        "content": "<p>Yes, that instance is bad too (there's a diagram in my thesis that shows what happens in that example), but indeed it is committed to mathlib anyway</p>",
        "id": 520335998,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748216806
    },
    {
        "content": "<p>In FLT we're taking the attitude that if we're ever faced with the funny examples that Eric comes up with then as mathematicians we'll be well aware that care needs to be taken and will act accordingly</p>",
        "id": 520336296,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748217143
    },
    {
        "content": "<p>Yes, I think \"record the funny example in a comment and use it anyway\" is fine in FLT, but I'd worry about doing it in mathlib</p>",
        "id": 520336336,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748217224
    },
    {
        "content": "<p>Eg I've been happily letting <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mo>⊗</mo><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">A\\otimes B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⊗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> be a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span>-algebra because 99% of the time this is not problematic and when <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mo>=</mo><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">A=B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> then mathematicians take pains to spell out what structure they're using</p>",
        "id": 520336383,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748217251
    },
    {
        "content": "<p>But note that we are moving towards <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mo>=</mo><mi>B</mi></mrow><annotation encoding=\"application/x-tex\">A=B</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span></span></span> in the theory of group schemes because this is the scheme way of saying <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo>×</mo><mi>G</mi></mrow><annotation encoding=\"application/x-tex\">G\\times G</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">G</span></span></span></span> which is the domain of multiplication (you can't curry in schemes)</p>",
        "id": 520336469,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748217365
    }
]