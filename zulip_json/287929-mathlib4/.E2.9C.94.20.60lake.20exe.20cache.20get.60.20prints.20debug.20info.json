[
    {
        "content": "<p>I've noticed that <code>lake exe cache get</code> has recently become quite a bit more verbose.</p>\n<p>Out of curiosity: are the debug lines like<br>\n<code>git for-each-ref --contains [commit-hash] refs/remotes/upstream/pr/* --format=%(refname) returned:</code><br>\nintended to be temporary?</p>\n<p>If the command succeeds (exit code is 0), would it make sense to suppress this output? It might help keep the output cleaner while still preserving useful info when something goes wrong.</p>\n<p>Here’s an example of the current output for reference:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">Current</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">branch</span><span class=\"bp\">-</span><span class=\"n\">name</span><span class=\"o\">]</span>\n<span class=\"ss\">`git</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"bp\">-</span><span class=\"n\">each</span><span class=\"bp\">-</span><span class=\"n\">ref</span><span class=\"w\"> </span><span class=\"c1\">--contains [commit-hash] refs/remotes/upstream/pr/* --format=%(refname)` returned:</span>\n<span class=\"w\">         </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.</span>\n<span class=\"ss\">`git</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"bp\">-</span><span class=\"n\">each</span><span class=\"bp\">-</span><span class=\"n\">ref</span><span class=\"w\"> </span><span class=\"c1\">--contains [commit-hash] refs/remotes/upstream/pr/* --format=\"%(refname)\"` returned:</span>\n<span class=\"w\">         </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.</span>\n<span class=\"n\">Using</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">origin</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">github</span><span class=\"bp\">-</span><span class=\"n\">username</span><span class=\"o\">]</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span>\n<span class=\"n\">Attempting</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">download</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">N</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n<span class=\"bp\">…</span>\n</code></pre></div>",
        "id": 527006094,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1751551663
    },
    {
        "content": "<p>Apologies for the extra verbosity. It succeeds in that the exit code is nonzero but in reality it probably should not because the syntax is mal-formed in one command. There might a bit of this in production because user feedback is a vital component to address all edge cases that might arise. It should settle down in a few weeks hopefully and go back to being invisible. I appreciate everyone's patience.</p>",
        "id": 527006927,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1751551847
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"683979\">Isak Colboubrani</span> has marked this topic as resolved.</p>",
        "id": 527007378,
        "sender_full_name": "Notification Bot",
        "timestamp": 1751551935
    }
]