[
    {
        "content": "<p>(The discussion thread for RFC <a href=\"https://github.com/leanprover/lean4/pull/6394\">lean4#6394</a> is <a href=\"#narrow/channel/270676-lean4/topic/RFC.3A.20let.20.60export.60.20create.20namespace.20aliases/near/489122763\">#lean4 &gt; RFC: let &#96;export&#96; create namespace aliases @ ðŸ’¬</a>)</p>\n<p>The proposed change has some affects on mathlib. With the change, <code>export</code> can create namespace aliases too. For example, since <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=HasSubset.Subset#doc\">docs#HasSubset.Subset</a> has an <code>export HasSubset (Subset)</code> and <code>HasSubset.Subset</code> is used as a namespace, then if you write <code>Subset.trans</code> it can now resolve to <code>HasSubset.Subset.trans</code>.</p>\n<p>This is causing a small problem, where there are a number of instances where, with <code>open Set</code>, people would write <code>Subset.trans</code> and want it to resolve to <code>Set.Subset.trans</code>, but now it resolves to <code>HasSubset.Subset.trans</code> as well, causing an \"ambiguous identifiers\" error. The fixes are to write either <code>Set.Subset.trans</code> explicitly or to use <code>subset_trans</code>, which avoids the issue.</p>\n<p>Arguably it's odd that <code>Subset.trans</code> ever worked since <code>Set.Subset</code> is protected; however, name resolution doesn't have a concept of a protected namespace.</p>\n<p>Annoyingly, the ambiguity ought to be harmless, since both interpretations of <code>Subset.trans</code> give defeq elaboration results. Maybe it would be worth allowing ambiguity in this case? (That would be a separate RFC.)</p>",
        "id": 489312531,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1734373723
    },
    {
        "content": "<p>Anyway, the purpose of this thread is to get some feedback, both for my mathlib fixes, <a href=\"https://github.com/leanprover-community/mathlib4/commit/62142e216163a87e9e76d3e0bd1ff7e37e8a3ecd\">commit 1</a> and <a href=\"https://github.com/leanprover-community/mathlib4/commit/60fc1b84c495d2d686d0d93caa89472d4fafd180\">commit 2</a> (whether my workarounds are acceptable; like whether <code>Set.Subset.trans</code> would be better than <code>subset_trans</code> for example), and to get a sense of whether we need to find better solutions to this problem (like the \"ambiguity is OK if results are defeq\" proposal, or maybe introducing protected namespaces).</p>",
        "id": 489312541,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1734373727
    },
    {
        "content": "<p>Those commits look fine to me -- in fact I'd say that moving more towards dot notation is a strict improvement.</p>",
        "id": 489357618,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1734388083
    },
    {
        "content": "<p>These diffs look perfectly fine to me! Thanks for these improvements!</p>",
        "id": 489542933,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1734458429
    }
]