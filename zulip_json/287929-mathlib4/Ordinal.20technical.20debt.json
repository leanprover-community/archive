[
    {
        "content": "<p>There's a few weird idiosyncrasies in our treatment of ordinals that are biting us back now that others have tried using that file.</p>",
        "id": 462389263,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723656312
    },
    {
        "content": "<p>One of them is <code>Ordinal.sup</code>. This is totally synonymous with <code>iSup</code>, which has way more lemmas and notation. I imagine the intention was for the former to have its universes constrained so that it always exists (instead of defaulting to <code>0</code>) but this condition should be imposed on the theorems that require it instead.</p>",
        "id": 462389600,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723656462
    },
    {
        "content": "<p>Another one has to do with <code>Ordinal.bsup</code>. The intention of that definition was to be able to call <code>Ordinal.sup</code> with families that nominally are indexed by a higher universe. But really this isn't needed, all we'd have to do is create some theorem stating that the supremum of families with a small range (like <code>Iio o -&gt; a</code>) are in fact the supremum (larger than all elements of the family, etc.)</p>",
        "id": 462390407,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723656793
    },
    {
        "content": "<p>Getting rid of the ad-hoc notion of <code>BFamilies</code> would go a long way in removing code duplication throughout all these files.</p>",
        "id": 462390494,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723656836
    },
    {
        "content": "<p>Just to be sure: do we all agree on this? Should I attempt to remove <code>Ordinal.sup</code> and <code>Ordinal.bsup</code> in that order?</p>",
        "id": 462390855,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723656972
    },
    {
        "content": "<p>Yes, I agree</p>",
        "id": 462399869,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723661029
    },
    {
        "content": "<p>What should happen to <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/SetTheory/Ordinal/Arithmetic.html#Ordinal.lsub\"><code>Ordinal.lsub</code></a>? I've found it decently useful in definitions such as e.g. the rank of a well-founded order, or the natural operations on ordinals, so I don't want to ditch it entirely. Maybe its lemmas should be moved elsewhere? They could be generalized to <code>ConditionallyCompleteLattice</code> + <code>SuccOrder</code>.</p>",
        "id": 462410838,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723666311
    },
    {
        "content": "<p>But doing this would require us to write down the generalizations for <code>CompleteLattice</code> + <code>SuccOrder</code>, and the order dual forms. Are these useful anywhere else?</p>",
        "id": 462411214,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723666506
    },
    {
        "content": "<p>I guess the alternative of just writing down <code>⨆ i, succ (f i)</code> isn't all too bad</p>",
        "id": 462411776,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723666775
    },
    {
        "content": "<p>Can we keep the name <code>lsub</code> in lemmas though? Just explaining with a note somewhere</p>",
        "id": 462411808,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723666800
    },
    {
        "content": "<p>Another question, for lemmas like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Ordinal</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">le_ciSup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">bddAbove_range</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>What should the name be? The current name is <code>le_sup</code>. I think it should be changed to <code>le_iSup</code>, or to <code>le_ciSup</code>, making the theorem protected in the latter case.</p>",
        "id": 462412143,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723666950
    },
    {
        "content": "<p>Or actually, should we even have these lemmas that are just lemmas from conditionally complete lattices + <code>bddAbove_range</code>?</p>",
        "id": 462412545,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723667136
    },
    {
        "content": "<p>I don't think the convenience of not writing a few characters outweighs all the API duplication.</p>",
        "id": 462412654,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723667181
    },
    {
        "content": "<p>In fact, there's a few lemmas on ordinals that seem to be missing in the more general case, like <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/SetTheory/Ordinal/Arithmetic.html#Ordinal.lt_sup\"><code>Ordinal.lt_sup</code></a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/SetTheory/Ordinal/Arithmetic.html#Ordinal.ne_sup_iff_lt_sup\"><code>Ordinal.ne_sup_iff_lt_sup</code></a></p>",
        "id": 462413100,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723667409
    },
    {
        "content": "<p><code>ciSup_eq_bot_iff</code> also seems to be missing</p>",
        "id": 462413495,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723667617
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> think you could help out with those? You're much more familiar with those files than I am</p>",
        "id": 462413593,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723667660
    },
    {
        "content": "<p>(Don't wait for my approval on this topic, I won't have time to review it)</p>",
        "id": 462413683,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723667713
    },
    {
        "content": "<p>I think I'll simply deprecate these <code>le_sup</code>, etc. lemmas for now. Removing <code>sup</code> and removing all the now redundant lemmas can be two separate refactors</p>",
        "id": 462414966,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723668322
    },
    {
        "content": "<p>Probably <code>sup</code>, <code>bsup</code>, and <code>lsub</code> should be done as separate refactors</p>",
        "id": 462415074,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723668368
    },
    {
        "content": "<p>Is there a way to turn off deprecation warnings for a file?</p>",
        "id": 462415076,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723668368
    },
    {
        "content": "<p>You can turn them off one lemma at a time with <code>set_option linter.deprecated false in</code></p>",
        "id": 462415121,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723668393
    },
    {
        "content": "<p>Per-file is risky, because then people can add lemmas and not realize the linter isn't running on them</p>",
        "id": 462415146,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723668411
    },
    {
        "content": "<p>Yeah, I'll stick that over <code>Ordinal.lean</code> for now</p>",
        "id": 462415147,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723668411
    },
    {
        "content": "<p>If you just want to do it temporarily, put <code>set_option linter.deprecated false</code> at the top</p>",
        "id": 462415177,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723668432
    },
    {
        "content": "<p>My current goal is simply to have Mathlib compile without <code>Ordinal.sup</code></p>",
        "id": 462415238,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723668476
    },
    {
        "content": "<p>I'm expecting that this alone will require changes across hundreds of lines</p>",
        "id": 462415307,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723668494
    },
    {
        "content": "<p>Cleaning up what's left behind is going to be a separate step</p>",
        "id": 462415321,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723668503
    },
    {
        "content": "<p>On that note, is it ok if I leave a bunch of TODO comments throughout the file?</p>",
        "id": 462415567,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723668652
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 462417280,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723669518
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Ordinal.20technical.20debt/near/462411808\">said</a>:</p>\n<blockquote>\n<p>Can we keep the name <code>lsub</code> in lemmas though? Just explaining with a note somewhere</p>\n</blockquote>\n<p>I personally would never know what it stands for</p>",
        "id": 462421684,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723672004
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Ordinal.20technical.20debt/near/462415307\">said</a>:</p>\n<blockquote>\n<p>I'm expecting that this alone will require changes across hundreds of lines</p>\n</blockquote>\n<p>I don't think ordinals are even used in hundreds of files!</p>",
        "id": 462421797,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723672075
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Ordinal.20technical.20debt/near/462413593\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> think you could help out with those? You're much more familiar with those files than I am</p>\n</blockquote>\n<p>Sure, but looks like you're faring well already</p>",
        "id": 462421859,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723672096
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Ordinal.20technical.20debt/near/462421797\">said</a>:<br>\nI don't think ordinals are even used in hundreds of files!</p>\n</blockquote>\n<p>But the ordinal supremum is definitely used a few hundred times across those files!</p>",
        "id": 462421961,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723672191
    },
    {
        "content": "<p>Sorry, I clearly need to change glasses <span aria-label=\"nerd\" class=\"emoji emoji-1f913\" role=\"img\" title=\"nerd\">:nerd:</span></p>",
        "id": 462422169,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723672306
    },
    {
        "content": "<p>Yeah! The Ordinal.Arithmetic file compiles</p>",
        "id": 462423804,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723673218
    },
    {
        "content": "<p>Hopefully that was the hardest part</p>",
        "id": 462423817,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723673227
    },
    {
        "content": "<p>I made a preliminary PR at <a href=\"https://github.com/leanprover-community/mathlib4/pull/15820\">#15820</a>, I still got a lot of files to comb through though!</p>",
        "id": 462424292,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723673528
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Ordinal.20technical.20debt/near/462414966\">said</a>:</p>\n<blockquote>\n<p>I think I'll simply deprecate these <code>le_sup</code>, etc. lemmas for now. Removing <code>sup</code> and removing all the now redundant lemmas can be two separate refactors</p>\n</blockquote>\n<p>Actually, I changed my mind on this. The most basic theorems like <code>le_sup</code> and such are useful in this version, so I'll keep those</p>",
        "id": 462426306,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723674801
    },
    {
        "content": "<p>I think it's fine having them be protected lemmas. It's important to be careful when using them, or you'll accidentally needlessly restrict the universes of your result.</p>",
        "id": 462426598,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723674967
    },
    {
        "content": "<p>The good news is that I think this first refactor is done</p>",
        "id": 462431316,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723677526
    },
    {
        "content": "<p>The bad news is that GitHub is down <span aria-label=\"frown\" class=\"emoji emoji-1f641\" role=\"img\" title=\"frown\">:frown:</span></p>",
        "id": 462431331,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723677531
    },
    {
        "content": "<p>It builds!</p>",
        "id": 462443046,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723683721
    },
    {
        "content": "<p>Now to appease the linter...</p>",
        "id": 462446067,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723684677
    },
    {
        "content": "<p>Alright, this is ready for review at <a href=\"https://github.com/leanprover-community/mathlib4/pull/15820\">#15820</a></p>",
        "id": 462458905,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723692282
    },
    {
        "content": "<p>You've been discussing the fact that <code>Ordinal.sup</code> is equivalent to <code>iSup</code>, but with more restrictive universe levels.<br>\nYou've argued that restricting the universe levels like this is not useful.</p>\n<p>I notice that <code>Ordinal.mex</code> has exactly the same type signature as <code>Ordinal.sup</code>. Should its type signature similarly be relaxed?</p>",
        "id": 462851738,
        "sender_full_name": "finegeometer",
        "timestamp": 1723839872
    },
    {
        "content": "<p><code>Ordinal.mex</code>is weird. Ideally I'd want to generalize it to other conditionally complete linear orders so that these API concerns can be delegated, but unfortunately I don't think it's a very useful definition outside of Nim. For that reason, it might be better to just remove it altogether and inline it wherever needed.</p>",
        "id": 462853018,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723840585
    },
    {
        "content": "<p>But if we are to keep it, then yeah, at some point we should do this analogous refactor.</p>",
        "id": 462853035,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723840597
    },
    {
        "content": "<p>Just to clarify, I do think restricting the universe levels <strong>in lemmas</strong> about <code>sup</code> can be useful. But restricting the universes within the definition itself has caused a lot of needless API pain.</p>",
        "id": 462853235,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723840690
    },
    {
        "content": "<p>Also you don't need to restrict the universe lemmas in lemmas at all: Instead of having <code>ι : Type u</code>, you can have <code>ι : Type*</code> + <code>Small.{u} ι</code></p>",
        "id": 462853766,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723840878
    },
    {
        "content": "<p>You're right! That's so much more useful</p>",
        "id": 462853874,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723840925
    },
    {
        "content": "<p>That way you don't have to annoyingly cast across <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Logic/Small/Defs.html#equivShrink\"><code>equivShrink</code></a></p>",
        "id": 462853919,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723840952
    },
    {
        "content": "<p>I don't think I can implement this quite yet, without making the diff like 300 lines larger. But I'll add it in the PR list of future refactors.</p>",
        "id": 462853986,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723840999
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Ordinal.20technical.20debt/near/462853018\">said</a>:</p>\n<blockquote>\n<p><code>Ordinal.mex</code>is weird. Ideally I'd want to generalize it to other conditionally complete linear orders so that these API concerns can be delegated, but unfortunately I don't think it's a very useful definition outside of Nim. For that reason, it might be better to just remove it altogether and inline it wherever needed.</p>\n</blockquote>\n<p>I'm not even sure it makes sense for general conditionally complete linear orders. Or, at least, the <em>name</em> doesn't. \"Mex\" stands for \"minimum excluded\", yet the only reasonable candidate for the mex of <code>(-∞,0] ⊆ ℝ</code> is zero, which isn't \"excluded\". So while <code>mex</code> makes sense for well-orders, generalizing any farther makes the name \"mex\" confusing.</p>\n<p>I want to say I like your suggestion of removing <code>mex</code> entirely. But I suspect that if it hadn't been there, I'd be asking on this exact forum why it's missing. Maybe it should be deprecated rather than removed, so searching <code>mex</code> in the docs leads to an explanation of why it's not there anymore?</p>",
        "id": 462856361,
        "sender_full_name": "finegeometer",
        "timestamp": 1723842295
    },
    {
        "content": "<p>It makes sense for <code>ConditionallyCompleteLinearOrderBot</code>. Of which the only relevant instances are <code>ℕ</code>, <code>Cardinal</code>, and <code>Ordinal</code>. But the case for <code>Ordinal</code> basically subsumes the case for <code>ℕ</code>, and I've never come across the <code>Cardinal</code> <code>mex</code>.</p>",
        "id": 462857021,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723842685
    },
    {
        "content": "<p>I'm not sure if I like the idea of simply deprecating it and keeping it there. The \"minimum viable API\" for even a basic definition like this is decently large. We'd need versions of theorems for both an indexed and a set version of <code>mex</code>, plus helper lemmas in the case where the indexed type is <code>Small</code>.  And the only benefit (?) is that we don't have to write <code>sInf sᶜ</code>.</p>",
        "id": 462857361,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723842918
    },
    {
        "content": "<p>That's my same reasoning to removing the much more useful <code>lsub</code>. The cost of maintaining the API outweighs the keystrokes of just writing the definition in full.</p>",
        "id": 462857703,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723843110
    },
    {
        "content": "<p>What's bothering me is that if <code>Ordinal.mex</code> hadn't been there, I would have been confused why it wasn't. So I was looking for a way to make searching <code>mex</code> lead the user to a note that <em>reminds</em> them that they can just use <code>sInf sᶜ</code>. It's not that I want the API to exist; it's that I want the search bar in the docs to point the user in the right direction.</p>",
        "id": 462857923,
        "sender_full_name": "finegeometer",
        "timestamp": 1723843225
    },
    {
        "content": "<p>If there's a way to do that, then I'm all for it</p>",
        "id": 462857953,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723843249
    },
    {
        "content": "<p>So we wouldn't even make an API then? Just a single deprecated definition</p>",
        "id": 462857995,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723843273
    },
    {
        "content": "<p>That's basically what I was thinking. Is it a sensible thing to do?</p>",
        "id": 462858105,
        "sender_full_name": "finegeometer",
        "timestamp": 1723843337
    },
    {
        "content": "<p>No idea. But if there's any precedent for this, then we definitely should do it</p>",
        "id": 462858152,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723843371
    },
    {
        "content": "<p>In fact, I think this refactor should be largely orthogonal to the <code>sup</code> refactor</p>",
        "id": 462858184,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723843391
    },
    {
        "content": "<p>I could do it soon-ish</p>",
        "id": 462858199,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723843402
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"741219\">finegeometer</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Ordinal.20technical.20debt/near/462851738\">said</a>:</p>\n<blockquote>\n<p>I notice that <code>Ordinal.mex</code> has exactly the same type signature as <code>Ordinal.sup</code>. Should its type signature similarly be relaxed?</p>\n</blockquote>\n<p>I've been working with nimbers these past few days and I can safely say, we don't need <code>mex</code></p>",
        "id": 464771826,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1724463351
    },
    {
        "content": "<p><code>sInf sᶜ</code> has worked perfectly for everything. And in fact, I now have an example where <code>mex</code> would be substantially worse than it</p>",
        "id": 464771891,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1724463407
    },
    {
        "content": "<p>The definition of the nimber inverse <code>a⁻¹</code> is as the minimum excluded value in the set <code>S</code>, recursively defined as the least set so that <code>0 ∈ S</code> and <code>(1 + (a' + a) * b) / a ∈ S</code> for <code>0 &lt; a' &lt; a</code> and <code>b ∈ S</code></p>",
        "id": 464772285,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1724463750
    },
    {
        "content": "<p>With <code>sInf</code>, it's not hard to get this definition to work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">inv'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nimber</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nimber</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">sInf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⋂₀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">inv'</span><span class=\"w\"> </span><span class=\"n\">a'</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">})</span><span class=\"bp\">ᶜ</span>\n<span class=\"n\">termination_by</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>",
        "id": 464772305,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1724463782
    },
    {
        "content": "<p>Now, proving that this is set is nonempty (and thus the infimum isn't just a dummy value) is somewhat difficult, as you need to build a function from a small type that contains these values in its range. But the nice thing is that this is a separate concern from the definition, <code>inv'</code> is already defined by now.</p>",
        "id": 464772406,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1724463898
    },
    {
        "content": "<p>With <code>mex</code>, you'd be forced to do these two things at once. I have no idea if that could even be made to work.</p>",
        "id": 464772444,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1724463928
    }
]