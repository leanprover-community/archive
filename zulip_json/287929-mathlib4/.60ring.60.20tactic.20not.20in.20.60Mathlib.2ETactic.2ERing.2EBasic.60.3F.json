[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">exp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n</code></pre></div>\n<p>This gives me the error <code>unknown tactic</code> however <code>ring1!</code> works, why is this happening?</p>",
        "id": 493113721,
        "sender_full_name": "Edison Xie",
        "timestamp": 1736617189
    },
    {
        "content": "<p>This is maybe confusing, but it seems like <code>ring</code> is defined <a href=\"https://github.com/leanprover-community/mathlib4/blob/347912d7951da47784fcb92719b8a7501d97de6b/Mathlib/Tactic/Ring/RingNF.lean#L280\">in <code>RingNF.lean</code></a>, not <code>Basic.lean</code>?</p>",
        "id": 493115006,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1736618406
    },
    {
        "content": "<p>(Changing your example to this works)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">RingNF</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">exp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 493115062,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1736618451
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/.02klzzwxh.3A0000.03.20tactic.20not.20in.20.02klzzwxh.3A0001.03.3F\">#lean4 &gt; <code>ring</code> tactic not in <code>Mathlib.Tactic.Ring.Basic</code>?</a> by <span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span>.</p>",
        "id": 493191358,
        "sender_full_name": "Notification Bot",
        "timestamp": 1736690104
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"699016\">@Edison Xie</span> note that this is not a question about lean 4 itself so it's better in the mathlib channel. Also, here's how to answer your question yourself. First do this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">exp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n</code></pre></div>\n<p>and then control-click on <code>ring</code> and you'll jump to the file where it's defined, and this is the file you need to import.</p>",
        "id": 493191501,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736690237
    },
    {
        "content": "<p>Thanks for letting me know and the question I’m really having is that I have a file that uses ring tactic and lake shake —fix changes my import to Ring.Basic and it no longer works</p>",
        "id": 493192267,
        "sender_full_name": "Edison Xie",
        "timestamp": 1736690837
    },
    {
        "content": "<p>Aah! Maybe that's a known issue with shake? You could just put your file in noshake I guess.</p>",
        "id": 493193181,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736691572
    },
    {
        "content": "<p>What’s noshake? <span aria-label=\"face holding back tears\" class=\"emoji emoji-1f979\" role=\"img\" title=\"face holding back tears\">:face_holding_back_tears:</span></p>",
        "id": 493193572,
        "sender_full_name": "Edison Xie",
        "timestamp": 1736691845
    },
    {
        "content": "<p><code>noshake.json</code> is a file in the <code>scripts</code> directory.Search mathlib for mentions of <code>noshake</code> and you can find more information.</p>",
        "id": 493193709,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736691983
    },
    {
        "content": "<p>okay!</p>",
        "id": 493194797,
        "sender_full_name": "Edison Xie",
        "timestamp": 1736692920
    },
    {
        "content": "<p>The usual routine is:</p>\n<ul>\n<li><code>lake exe shake --fix</code></li>\n<li><code>lake build</code></li>\n<li>identify any changes that caused failure (usually due to tactics) and revert just those</li>\n<li><code>lake exe shake --update</code></li>\n<li><code>lake build</code></li>\n</ul>\n<p>You can avoid doing the <code>lake build</code>s locally by pushing a branch and relying on CI to provide oleans.</p>",
        "id": 493226540,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1736719960
    },
    {
        "content": "<p>(you should import <code>Mathlib.Tactic.Ring</code>, not <code>Mathlib.Tactic.Ring.Basic</code>)</p>",
        "id": 499862526,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1739582440
    },
    {
        "content": "<p>one of the downsides of shaking everything is that you end up importing internal-ish files like <code>Linarith.Frontend</code> even if there is a top level import which you should be using instead</p>",
        "id": 499862674,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1739582524
    },
    {
        "content": "<p>in particular, doing this for <code>NormNum</code> is bad because you can easily import the tactic without getting any of the extensions that make it actually work</p>",
        "id": 499862720,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1739582561
    },
    {
        "content": "<p>thanks！</p>",
        "id": 499867222,
        "sender_full_name": "Edison Xie",
        "timestamp": 1739585381
    }
]