[
    {
        "content": "<p>In the <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Filter/Defs.html#Filter.EventuallyEq\"><code>Filter.EventuallyEq</code> docs</a> (under 'Equations'), the <code>∀ᶠ</code> (<code>Filter.Eventually</code>)  notation is not clickable. However, the <code>=ᶠ[l]</code> notation is rendered as a link, and takes you to <code>Filter.EventuallyEq</code>.</p>\n<p>Is it possible to make the <code>∀ᶠ</code> render as a link in the mathlib docs?</p>",
        "id": 494590979,
        "sender_full_name": "Aaron Hill",
        "timestamp": 1737251231
    },
    {
        "content": "<p>I had a brief go at trying to make that work about a month ago by modifying docgen, but the side effect was that parentheses in the expression would become links too.</p>\n<p>It should be doable though in the end.</p>\n<p>The reason that <code>EventuallyEq</code> works is that it's defined using <code>notation</code>, which causes tokens to be annotated with the head constant when the option <code>pp.tagAppFns</code> is true.</p>\n<p>On the mathlib side, I suppose we could make <code>notation3</code> do the same thing. It probably would work, and it wouldn't need docgen modification.</p>",
        "id": 494591858,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737252016
    },
    {
        "content": "<p>what does <code>notation3</code> do for us that we can't do with <code>notation</code>?</p>",
        "id": 494596700,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1737256373
    },
    {
        "content": "<p>Scoped notations and more sophisticated delaborators.</p>",
        "id": 494597087,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737256692
    },
    {
        "content": "<p>For example, you can't do this with <code>notation</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">notation3</span><span class=\"w\"> </span><span class=\"s2\">\"∀ᶠ \"</span><span class=\"o\">(</span><span class=\"bp\">...</span><span class=\"o\">)</span><span class=\"s2\">\" in \"</span><span class=\"n\">f</span><span class=\"s2\">\", \"</span><span class=\"n\">r</span><span class=\"o\">:(</span><span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Eventually</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">r</span>\n</code></pre></div>",
        "id": 494597134,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737256756
    },
    {
        "content": "<p>off-topic, but what does the 3 in notation3 stand for?</p>",
        "id": 494690175,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1737328252
    },
    {
        "content": "<p>It has the features that Lean 3's notation command had.</p>",
        "id": 494690280,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737328326
    },
    {
        "content": "<p>Originally it was a compatibility command for mathport, but it's now its own thing.</p>\n<p>I'm hoping some of the features will make it back to core eventually.</p>",
        "id": 494690318,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737328370
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/20861\">mathlib4#20861</a> has a <code>notation3</code> fix for this</p>",
        "id": 494695778,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737332549
    },
    {
        "content": "<p>Can someone remind me if there's a way to run docgen on a branch to test this?</p>",
        "id": 494695801,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737332571
    },
    {
        "content": "<p>(I think I can use a similar technique in core to get dot notation to appear as links too. Edit: made <a href=\"https://github.com/leanprover/lean4/pull/6703\">lean4#6703</a>)</p>",
        "id": 494695853,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737332617
    },
    {
        "content": "<p>We don't have anything in mathlib4 that can automatically trigger doc-gen on a branch (though maybe we should?). It'd be a bit of work, but you could maybe clone and adapt the <a href=\"https://github.com/leanprover-community/mathlib4_docs/\">mathlib4_docs</a> repo, or just repeat the steps locally: <a href=\"https://github.com/leanprover-community/mathlib4_docs/blob/main/.github/workflows/docs.yaml\">https://github.com/leanprover-community/mathlib4_docs/blob/main/.github/workflows/docs.yaml</a></p>",
        "id": 494696265,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737332939
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>, I got building documentation locally to work with <code>mathlib4_docs</code>.</p>",
        "id": 494707549,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737341345
    },
    {
        "content": "<p>The docs are updated now. In <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Filter.eventually_bot#doc\">docs#Filter.eventually_bot</a> for example you can see links on the Eventually notation.</p>",
        "id": 494901595,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737402663
    },
    {
        "content": "<p>Interestingly the <code>in</code> and <code>,</code> are also highlighted</p>",
        "id": 494902440,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737403052
    },
    {
        "content": "<p>Thanks for fixing this!</p>",
        "id": 494902454,
        "sender_full_name": "Aaron Hill",
        "timestamp": 1737403058
    },
    {
        "content": "<p>It is a little weird that <code>∃ᶠ</code> gets a docs link now, but not <code>∃</code>!</p>",
        "id": 494902576,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1737403096
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> It's using the rule that <code>notation</code> uses. It causes every token to be linked to the constant. I thought through a few different heuristics for linkifying only certain tokens, but they all fail on certain notations. Maybe in the future, if it bothers people, we could have a way to say which tokens \"are\" the notation for purposes of linking.</p>\n<p>And yes, core notations will need their own treatment. I made <a href=\"https://github.com/leanprover/lean4/pull/6704\">lean4#6704</a> yesterday, but I might take a more drastic approach (make app unexpanders <em>in general</em> set the ref to the head constant, so that individual app unexpanders don't need to consider this issue).</p>",
        "id": 494904866,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1737404063
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Filter.2EEventually.20.28.60.E2.88.80.E1.B6.A0.60.29.20notation.20is.20not.20clickable.20in.20docs/near/494902440\">said</a>:</p>\n<blockquote>\n<p>Interestingly the <code>in</code> and <code>,</code> are also highlighted</p>\n</blockquote>\n<p>This is slightly weird, but I think it's actually nice: it shows you better which bits are part of the syntax.</p>",
        "id": 494917974,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1737409230
    }
]