[
    {
        "content": "<p>Should we make more definitions in Mathlib irreducible? I'm working on some code about <code>List</code>s, and a theorem was extremely slow (15s for a few <code>simp</code> calls). It turns out that Lean tried to unfold <code>List.modify</code> 50K times, because some definitions in the file weren't irreducible. I wonder if we have more performance hits because of Lean trying to unfold definitions.</p>\n<p>E.g., can we see which definitions get unfolded most in unsuccessful <code>isDefEq</code> calls?</p>",
        "id": 498560163,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1739070958
    },
    {
        "content": "<p><code>diagnostics</code> should give you grand totals, does that help?</p>",
        "id": 498604781,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1739111828
    },
    {
        "content": "<p>Per file or over the whole repo?</p>",
        "id": 498604811,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1739111858
    },
    {
        "content": "<p>Per declaration</p>",
        "id": 498604874,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1739111894
    },
    {
        "content": "<p>I'll see if I can figure out how to sum over the repo after I come back home (flying to a week in the office in a few hours, will have very little time for Mathlib there).</p>",
        "id": 498604938,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1739111979
    }
]