[
    {
        "content": "<p>We have long wanted to refactor <code>WithTop</code> and <code>WithBot</code> as <del>one-field structures</del> inductive types, rather than having them be synonyms for <code>Option</code>.</p>\n<p>We've delayed doing this because today we rely on these being defeq in many places, in order to set up the order duals of various theories.</p>\n<p>There is a plan to stop relying on this defeq (cf <span class=\"user-mention\" data-user-id=\"479299\">@Jovan Gerbscheid</span>'s new <code>to_dual</code> tactic), but there is not obstacle to getting started already, by making <code>WithBot</code> a <del>one-field structure</del> inductive type, and then defining <code>WithTop</code> as a synonym. This lets us get (more than?) half the work done now, and later we can break the defeq between the two.</p>\n<p>I've started this in <a href=\"https://github.com/leanprover-community/mathlib4/pull/27918\">#27918</a>. The files I've modified so far are working, but there are more to go.</p>\n<p>If anyone would like to help (or take over!) getting this done, that would be amazing. (We are keen to get started on some new tactic work that will be easier if this refactor is settled sooner rather than later.)</p>",
        "id": 532626384,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754272905
    },
    {
        "content": "<p>One field structures or a custom inductive type?</p>",
        "id": 532714110,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754309369
    },
    {
        "content": "<p>The PR seems to do the latter</p>",
        "id": 532714132,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754309378
    },
    {
        "content": "<p>Yes. An inductive is the right solution here, right?</p>",
        "id": 532728510,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754314276
    },
    {
        "content": "<p>A one-field structure gives us more defeqs with option like <code>(x.map f).toOption = x.toOption.map f</code></p>",
        "id": 532728958,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754314414
    },
    {
        "content": "<p>But making <code>match</code> about as annoying as it currently is</p>",
        "id": 532729003,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754314425
    },
    {
        "content": "<p>I'd argue that annoyance is a lean bug though (edit: <a href=\"https://github.com/leanprover/lean4/pull/9712\">lean4#9712</a>):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- status quo</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MyOption</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">match_pattern</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MyOption</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">MyOption</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">some</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">match_pattern</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MyOption</span><span class=\"bp\">.</span><span class=\"n\">null</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyOption</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">none</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyOption</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">null</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">wat</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">foo</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- fails, equation lemma is wrong</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- one field structure</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">MyOptionStruct</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toOption</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">match_pattern</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MyOptionStruct</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">MyOptionStruct</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">⟨.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">⟩</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">match_pattern</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MyOptionStruct</span><span class=\"bp\">.</span><span class=\"n\">null</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyOptionStruct</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">Option</span><span class=\"bp\">.</span><span class=\"n\">none</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyOptionStruct</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">null</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">wat</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">foo</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n</code></pre></div>",
        "id": 532729360,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754314553
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Bug.20in.20instance.20synthesis.3F/near/529889141\">said</a>:</p>\n<blockquote>\n<p>Interesting (and surprising to me) comment of <span class=\"user-mention silent\" data-user-id=\"110024\">Sebastian Ullrich</span> on the issue:</p>\n<blockquote>\n<p>I believe this amounts to a misuse of <code>def</code> which is hard/unlikely to be addressed across the entire elaborator. Because of its context-dependent reducibility, the main difference of <code>def</code> to <code>abbrev</code> is performance-related, it should not be used to create semantically distinct types. Actually irreducible declarations like <code>structure</code> should be the preferred way for doing so.</p>\n</blockquote>\n<p>I read this as a \"won't fix\", if I understand correctly.</p>\n</blockquote>\n<p>I read this as directing us to Eric's approach. </p>\n<p>Given this, some removal of current friction for this approach would be much appreciated.</p>",
        "id": 532735438,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1754316474
    },
    {
        "content": "<p>I don't think there's much prior conversation right now as to whether one-field structures or custom inductives are better</p>",
        "id": 532736151,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754316707
    },
    {
        "content": "<p>Is there an advantage to custom inductives?</p>",
        "id": 532737353,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1754317109
    },
    {
        "content": "<p>Avoiding <a href=\"https://github.com/leanprover/lean4/pull/9712\">lean4#9712</a>, and supporting <code>obtain</code></p>",
        "id": 532738376,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754317469
    },
    {
        "content": "<p>I thought that the point was to move away from abusing <code>Option</code> related defeqs. So I'm in favour of the custom inductive approach.</p>",
        "id": 532740089,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1754318040
    },
    {
        "content": "<p>I think defeq abuse here refers to type equalities like <code>Option = WithTop</code> or things that rely on them like <code>Option.some x = WithTop.some x</code>, not things like <code>(x.map f).toOption = x.toOption.map f</code> which we can still have with a one-field structure.</p>",
        "id": 532740473,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754318164
    },
    {
        "content": "<p>I generally worry about the convenience (for all parties) of one custom inductive per instance but would be happy to be disabused.</p>",
        "id": 532740977,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1754318331
    },
    {
        "content": "<p>My (now old) PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/19668\">#19668</a> feels relevant to this discussion</p>",
        "id": 532763014,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754325769
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"238446\">@Anne Baanen</span> since you were assigned to it</p>",
        "id": 532763089,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754325800
    },
    {
        "content": "<p>Any further comments here? If I push this through we will merge?</p>",
        "id": 533393148,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754625343
    },
    {
        "content": "<p>Can we refactor them as one-field structures around <code>Option</code> first? This will already show where all issues are</p>",
        "id": 533403636,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754633881
    },
    {
        "content": "<p>Why? Don't we get better match statements with an inductive?</p>",
        "id": 533405625,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754635079
    },
    {
        "content": "<p>I guess so</p>",
        "id": 533406209,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754635443
    },
    {
        "content": "<p>Secretly my hope is that you first refactor <code>WithTop</code> and <code>WithBot</code> in such a way that they are defeq, as I know this will remove a lot of bad defeqs but still keep the good \"dualising\" defeq between <code>(WithTop α)ᵒᵈ</code> and <code>WithBot αᵒᵈ</code>. Without that defeq, you will really suffer, at least until the advent of <code>to_dual</code></p>",
        "id": 533406330,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754635531
    },
    {
        "content": "<p>That's what Kim is doing in <a href=\"https://github.com/leanprover-community/mathlib4/pull/27918\">#27918</a> right?</p>",
        "id": 533411312,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1754638129
    },
    {
        "content": "<p>Oh! I had completely missed that</p>",
        "id": 533412167,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754638539
    },
    {
        "content": "<p>What API are we going to duplicate from the model type to provide? If that type has a large API surface, there is going to be tension in all directions - duplicate code, missing capabilities, etc. </p>\n<p>Option might be small enough but I don’t know. </p>\n<p>A version of deriving that clones API from a template type would be helpful and probably by the best approach.</p>",
        "id": 533430115,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1754645387
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/287929-mathlib4/topic/refactoring.20WithTop.2FWithBot.20as.20inductive.20types/near/533405625\">said</a>:</p>\n<blockquote>\n<p>Why? Don't we get better match statements with an inductive?</p>\n</blockquote>\n<p>Sure, but we also get better match statements if we fix <a href=\"https://github.com/leanprover/lean4/pull/9712\">lean4#9712</a> (without which <code>match_pattern</code> isn't very useful)</p>",
        "id": 533430644,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754645589
    },
    {
        "content": "<p>What we get with the structure is nice defeqs around <code>toOption</code>/<code>fromOption</code></p>",
        "id": 533430679,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754645607
    },
    {
        "content": "<p>I guess <code>[OptionLike T]</code> is theoretically an option (heh) for consistent API but I’d worry the overhead would eat all the benefit</p>",
        "id": 533431222,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1754645849
    },
    {
        "content": "<p>That gives us no <code>match</code> and no defeqs, so seems worse than all options suggested so far</p>",
        "id": 533431340,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754645910
    },
    {
        "content": "<p>Sure but custom inductives come with no built in API</p>",
        "id": 533431572,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1754646011
    },
    {
        "content": "<p>Note: I’m just thinking out loud and not locked in on any option</p>",
        "id": 533431808,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1754646099
    },
    {
        "content": "<p>What why doesn’t that give a match?</p>",
        "id": 533432158,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1754646245
    },
    {
        "content": "<p>You can only use <code>match_pattern</code> on things that reduce to constructors</p>",
        "id": 533434049,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754647094
    },
    {
        "content": "<p>I wasn’t thinking about pulling back via an embedding/equivalence necessarily.</p>",
        "id": 533434722,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1754647388
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/refactoring.20WithTop.2FWithBot.20as.20inductive.20types/near/533434049\">said</a>:</p>\n<blockquote>\n<p>You can only use <code>match_pattern</code> on things that reduce to constructors</p>\n</blockquote>\n<p>Why can't we have fully custom match patterns, the way we can with <code>cases</code> and <code>induction</code>?</p>",
        "id": 533435981,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1754647971
    },
    {
        "content": "<p>That sounds like a much bigger ask than <a href=\"https://github.com/leanprover/lean4/pull/9712\">lean4#9712</a>!</p>",
        "id": 533440677,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754650139
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/287929-mathlib4/topic/refactoring.20WithTop.2FWithBot.20as.20inductive.20types/near/533435981\">schrieb</a>:</p>\n<blockquote>\n<p>Why can't we have fully custom match patterns</p>\n</blockquote>\n<p>Well you want to make sure that you're still able to match on constructors and since you usually have these, there isn't really much room to put in custom eliminators... Also <code>match</code> heavily relies on being able to reduce everything fully which would definitely cause problems for custom eliminators.</p>",
        "id": 533459432,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1754657910
    },
    {
        "content": "<p>I'd like to make progress here that doesn't depend on language features, or bug fixes that don't have an assigned owner. </p>\n<p>It looks like we're going to postpone slightly the new machinery which had motivated me to clean this up, but hopefully it gets done by the time I actually need it. :-)</p>",
        "id": 533710722,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754893604
    },
    {
        "content": "<p>I have resumed work on this. I would love assistance if anyone is interested.</p>",
        "id": 535621010,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755842981
    },
    {
        "content": "<p>I have run into an annoying issue on the PR at <a href=\"https://github.com/leanprover-community/mathlib4/pull/27918\">#27918</a>, where <code>WithOne</code> (and hence <code>WithZero</code>) are defined as <code>Option</code>. However later in their development, particularly <code>Mathlib.Algebra.Order.GroupWithZero.Canonical</code>, we abuse the defeq with <code>WithBot</code>.</p>\n<p>Any suggestions here? I think we probably should just redefine <code>WithOne</code> as <code>WithBot</code> for now, and that seems like the more painful defeq to break at the moment (i.e. lose the defeq with <code>Option</code> instead). This will require adding an import, but I think that's okay.</p>\n<p>If anyone would like to look at this file, please do checkout the branch! I'm happy to give write access, or merge changes into this branch. This is high priority again for me.</p>",
        "id": 536133721,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756169990
    },
    {
        "content": "<p>Ah yeah, I think I recall being somewhat negatively surprised at that at some point, though I don't recall what I was doing. I might be able to find a bit of time to look at it</p>",
        "id": 536167029,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756189365
    },
    {
        "content": "<p>Does this refactor mean that we will need to duplicate (a fraction of) the API for <code>Option</code> to the type synonyms (e.g. the <a href=\"https://loogle.lean-lang.org/?q=Option%2C+%7C-+Equiv+_+_\">27 equivalences</a> involving <code>Option</code>?). <br>\nThat is probably just a cost we'll have to pay...</p>",
        "id": 536182653,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1756196148
    },
    {
        "content": "<p>I don't think it makes sense to have many of these, other than an <code>Option α ≃ WithBot α</code>. It would seem more sensible to instead have some <code>OrderIso</code> when applicable.</p>",
        "id": 536183982,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1756196649
    },
    {
        "content": "<p>I've got some changes building; will see how for I get</p>",
        "id": 536188046,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756198122
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> see <a href=\"https://github.com/leanprover-community/mathlib4/pull/28957\">#28957</a>; I didn't make a pr to your fork because I started from a newer master</p>",
        "id": 536226267,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756211637
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span>, what shall we do with the old <code>WithOne.map</code>? Rename it to <code>WithOne.mapMulHom</code>?</p>",
        "id": 536233059,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756213733
    },
    {
        "content": "<p>(Why the double prime on your new version? I can't find any collision with a single primed version.)</p>",
        "id": 536233250,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756213791
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span>, I pushed a commit back to your PR doing the renames.</p>",
        "id": 536237775,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756215130
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> thanks! <code>WithZero.map'</code> exists, but <code>WithOne.map'</code> doesn't</p>",
        "id": 536242502,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756216360
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> Yaël is wondering about the <code>mapD</code> name to replace <code>Option.elim</code> in <a href=\"https://github.com/leanprover-community/mathlib4/pull/30119\">#30119</a>; would you mind responding after you've cut the release?</p>",
        "id": 544749016,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1760448427
    },
    {
        "content": "<p>I think <code>mapD</code> would have made sense if we had <code>map?</code> and <code>map!</code>. But <code>map?</code> is just called <code>map</code>, so I don't think <code>mapD</code> fits the pattern.</p>",
        "id": 544749882,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1760448628
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span>, now that your <a href=\"https://github.com/leanprover-community/mathlib4/pull/19668\">#19668</a> has landed, might I interested you in fixing up <code>Mathlib/Algebra/Order/GroupWithZero/Canonical.lean</code> on <a href=\"https://github.com/leanprover-community/mathlib4/pull/27918\">#27918</a> (the <code>WithBot_refactor</code> branch)?</p>",
        "id": 547090099,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1761436983
    },
    {
        "content": "<p>Sure! although I would rather wait a few days for <a href=\"https://github.com/leanprover-community/mathlib4/pull/30848\">#30848</a> to be merged (which is also fitting in that I am mostly unavailable this coming week).</p>",
        "id": 547108995,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1761462142
    }
]