[
    {
        "content": "<p>With the newly introduced module system, seems that the <code>irreducible_def</code> (defined in mathlib, but not vanilla Lean) is equivalent to the public non-exposed def in module system. Is that true? (Of course <code>irreducible_def</code> also works for non-module file.)</p>",
        "id": 564904623,
        "sender_full_name": "Jz Pan",
        "timestamp": 1766336761
    },
    {
        "content": "<p>Well with non-exposed defs their contents are still exposed to the private scope</p>",
        "id": 564905684,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766338305
    },
    {
        "content": "<p>Yes, I think we should eventually get rid of all uses of <code>irreducible_def</code> in favour of not exposing the body.</p>\n<p>The problem for now is that other projects that depend on mathlib may not have switched to the module system yet. So then the unexposed bodies of definitions are going to be exposed anyways there.</p>",
        "id": 564917463,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1766354326
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/287929-mathlib4/topic/irreducible_def.20.3D.20public.20non-exposed.20def.20.3F/near/564917463\">said</a>:</p>\n<blockquote>\n<p>The problem for now is that other projects that depend on mathlib may not have switched to the module system yet. So then the unexposed bodies of definitions are going to be exposed anyways there.</p>\n</blockquote>\n<p>I haven't checked the behavior of a non-module file importing a module file. Will it also import the private section of a file?</p>",
        "id": 564959541,
        "sender_full_name": "Jz Pan",
        "timestamp": 1766393780
    },
    {
        "content": "<p>Yes, a non-module always imports everything</p>",
        "id": 564974889,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1766399316
    }
]