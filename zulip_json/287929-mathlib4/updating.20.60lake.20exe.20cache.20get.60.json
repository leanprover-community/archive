[
    {
        "content": "<p>With <a href=\"https://github.com/leanprover-community/mathlib4/pull/21666\">#21666</a> the first of a couple PRs making changes to <code>cache</code> is going to land. I'd hope there won't be any hick-ups (all changes are properly reviewed and tested by CI as well as manually) but just in case things do break down at some point, I wanted to announce it here: Please report any problems so that they can be quickly fixed or any problematic PRs reversed :)</p>",
        "id": 499094865,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1739306601
    },
    {
        "content": "<p>As a very small data point, my daily use of <code>lake exe cache get</code> is still normal with the current master.</p>",
        "id": 499168149,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739346901
    },
    {
        "content": "<p>The next tricky thing with Cache is (or was) making it work on projects using mathlib as a dependency. If someone can confirm that works, then there's likely nothing else to fear</p>",
        "id": 499432758,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1739441907
    },
    {
        "content": "<p>I just cloned the <a class=\"stream\" data-stream-id=\"442935\" href=\"/#narrow/channel/442935-Carleson\">#Carleson</a> project and ran</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span>lake<span class=\"w\"> </span>update<span class=\"w\"> </span>mathlib\ninfo:<span class=\"w\"> </span>mathlib:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'d321983b9320ffdc8c1d97770e7f99ce46aa8015'</span>\ninfo:<span class=\"w\"> </span>toolchain<span class=\"w\"> </span>not<span class=\"w\"> </span>updated<span class=\"p\">;</span><span class=\"w\"> </span>already<span class=\"w\"> </span>up-to-date\ninfo:<span class=\"w\"> </span>LeanSearchClient:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'0c169a0d55fef3763cfb3099eafd7b884ec7e41d'</span>\ninfo:<span class=\"w\"> </span>importGraph:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'461b96f5527089718cb23d3f1fd2960a5d0ff516'</span>\ninfo:<span class=\"w\"> </span>proofwidgets:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'322a050322e97b0a701588d9b1efbe2bee7f8527'</span>\ninfo:<span class=\"w\"> </span>batteries:<span class=\"w\"> </span>checking<span class=\"w\"> </span>out<span class=\"w\"> </span>revision<span class=\"w\"> </span><span class=\"s1\">'b18855cb0f9a19bd4d7e21f3e5525272e377f431'</span>\ninfo:<span class=\"w\"> </span>mathlib:<span class=\"w\"> </span>running<span class=\"w\"> </span>post-update<span class=\"w\"> </span>hooks\nAttempting<span class=\"w\"> </span>to<span class=\"w\"> </span>download<span class=\"w\"> </span><span class=\"m\">6115</span><span class=\"w\"> </span>file<span class=\"o\">(</span>s<span class=\"o\">)</span>\nDownloaded:<span class=\"w\"> </span><span class=\"m\">6115</span><span class=\"w\"> </span>file<span class=\"o\">(</span>s<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span>attempted<span class=\"w\"> </span><span class=\"m\">6115</span>/6115<span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">100</span>%<span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"m\">100</span>%<span class=\"w\"> </span>success<span class=\"o\">)</span>\nDecompressing<span class=\"w\"> </span><span class=\"m\">6115</span><span class=\"w\"> </span>file<span class=\"o\">(</span>s<span class=\"o\">)</span>\nUnpacked<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"m\">29242</span><span class=\"w\"> </span>ms\nCompleted<span class=\"w\"> </span>successfully!\n</code></pre></div>",
        "id": 499462781,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739450504
    },
    {
        "content": "<p>So, this is looking good!</p>",
        "id": 499462814,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739450515
    },
    {
        "content": "<p><code>lake build</code> then started building stuff, but, as far as I could tell, the files being built were all in <code>Carleson</code>.</p>",
        "id": 499462950,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739450547
    },
    {
        "content": "<p>There is a CI step which tests this with a sample dowstream project in <code>Mathlib/DownstreamTest</code>. If there is any doubt this test isn't thorough enough, we should probably improve this test setup</p>",
        "id": 499465967,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1739451461
    },
    {
        "content": "<p>I had forgotten about <code>DownstreamTest</code>!</p>",
        "id": 499471358,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739452970
    }
]