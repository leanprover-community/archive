[
    {
        "content": "<p>In <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/AlgebraicGeometry/Gluing.html#AlgebraicGeometry.Scheme.GlueData\">1</a> there is a link \"<a href=\"https://leanprover-community.github.io/mathlib4_docs/AlgebraicGeometry/PresheafedSpace/Gluing.html\">AlgebraicGeometry/PresheafedSpace/Gluing.lean</a>\" which is a 404 when one clicks on it (<a href=\"https://github.com/leanprover-community/mathlib4/blob/f97711ce192b158e45d248af341d53eb7bce298c/Mathlib/AlgebraicGeometry/Gluing.lean#L44\">Permalink to source code</a>). Maybe we can have a linter to check for links?</p>",
        "id": 522680720,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749164653
    },
    {
        "content": "<p>Sounds like a good idea. Anyone have experience with existing solutions? There must be many tools that check for dead links.</p>",
        "id": 522879091,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1749280534
    },
    {
        "content": "<p>There is a problem that the doc is build in a separate repository, so of course such linter is naturally added to <code>doc-gen4</code> but it will not catch the problem until a day later (or so).</p>\n<p>If you want a linter to check docstrings then its function will parallel to <code>doc-gen4</code> which IMHO produces code duplications.</p>",
        "id": 522879338,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749280946
    },
    {
        "content": "<p>I think this type of linter shouldn't run on every PR. It should rather run once a week, and post a report to zulip.</p>",
        "id": 522879374,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1749280987
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Linter.20for.20links.3F/near/522879374\">said</a>:</p>\n<blockquote>\n<p>I think this type of linter shouldn't run on every PR. It should rather run once a week, and post a report to zulip.</p>\n</blockquote>\n<p>Oh that's OK. Then we can implement it in <code>doc-gen4</code> and let it generate a report each time the mathlib4 docs is rebuild (which is three times a day).</p>",
        "id": 522879516,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749281210
    },
    {
        "content": "<p>Sounds good, but I think it shouldn't post 3x a day. 1/d or 1/w sounds plenty.</p>",
        "id": 522879574,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1749281281
    },
    {
        "content": "<p>I don't think we actually care about dead links. We care about filenames which don't exist. That is a much cheaper linter to run.</p>",
        "id": 522884650,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749288775
    },
    {
        "content": "<p>While we are at it, we might as well care about dead links.</p>",
        "id": 522884676,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1749288802
    },
    {
        "content": "<p>I think human readers are usually a good enough tool for spotting those. At any rate, this thread was motivated by a bad filename, not a bad external link</p>",
        "id": 522884731,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749288874
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Linter.20for.20links.3F/near/522884650\">said</a>:</p>\n<blockquote>\n<p>I don't think we actually care about dead links. We care about filenames which don't exist. That is a much cheaper linter to run.</p>\n</blockquote>\n<p>And it could be implemented within mathlib!</p>",
        "id": 522888145,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749293531
    },
    {
        "content": "<p>Exactly!</p>",
        "id": 522888372,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749293847
    }
]