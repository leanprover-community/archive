[
    {
        "content": "<p>I had a need for <a href=\"https://en.wikipedia.org/wiki/Mean_value_theorem#Mean_value_theorems_for_definite_integrals\">https://en.wikipedia.org/wiki/Mean_value_theorem#Mean_value_theorems_for_definite_integrals</a><br>\nfor something I'm working on. It doesn't seem to exist in Mathlib4 though it's not hard to prove. I now want to contribute it to Mathlib, but I'm unsure where to put it.</p>\n<p>The proof relies on IntervalIntegral.FundThmCalculus but the statement itself says nothing about derivatives. It also doesn't make sense to put it with the usual derivative MVT.</p>",
        "id": 536588697,
        "sender_full_name": "Jeremy Parker",
        "timestamp": 1756381893
    },
    {
        "content": "<p>We do have both that the function achieves values at least the average (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.exists_average_le#doc\">docs#MeasureTheory.exists_average_le</a>) and at most the average (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.exists_le_average#doc\">docs#MeasureTheory.exists_le_average</a>) so if you import those you should be done by IVT (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=mem_range_of_exists_le_of_exists_ge#doc\">docs#mem_range_of_exists_le_of_exists_ge</a>)</p>",
        "id": 536592256,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756383196
    },
    {
        "content": "<p>Are you proposing this for the proof or are you saying that you don't think mathlib needs the classical result for intervalIntegral?</p>",
        "id": 536652897,
        "sender_full_name": "Jeremy Parker",
        "timestamp": 1756401631
    },
    {
        "content": "<p>I'm proposing this for a proof</p>",
        "id": 536653164,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756401735
    },
    {
        "content": "<p>we should probably have all the versions</p>",
        "id": 536653181,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756401741
    },
    {
        "content": "<p>this proof doesn't seems to use derivatives anywhere</p>",
        "id": 536653285,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756401788
    },
    {
        "content": "<p>Putting those results together as you suggest, it's not too hard to prove<br>\n∃ c ∈ uIcc a b, f c = ⨍ (x : ℝ) in a..b, f x</p>\n<p>but really I would like to do<br>\n∃ c ∈ uIoo a b, f c = ⨍ (x : ℝ) in a..b, f x<br>\nI can do this via exists_deriv_eq_slope, but it's going to be messy trying to do it via exists_le_setAverage because the latter could give one of the interval endpoints</p>",
        "id": 536749956,
        "sender_full_name": "Jeremy Parker",
        "timestamp": 1756459392
    },
    {
        "content": "<p>In answer to my original question about where to put it, MeasureTheory.Integral.IntervalAverage makes a lot of sense</p>",
        "id": 536750094,
        "sender_full_name": "Jeremy Parker",
        "timestamp": 1756459453
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"947076\">Jeremy Parker</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Integral.20mean.20value.20theorem/near/536749956\">said</a>:</p>\n<blockquote>\n<p>Putting those results together as you suggest, it's not too hard to prove<br>\n∃ c ∈ uIcc a b, f c = ⨍ (x : ℝ) in a..b, f x</p>\n<p>but really I would like to do<br>\n∃ c ∈ uIoo a b, f c = ⨍ (x : ℝ) in a..b, f x<br>\nI can do this via exists_deriv_eq_slope, but it's going to be messy trying to do it via exists_le_setAverage because the latter could give one of the interval endpoints</p>\n</blockquote>\n<p>You have to use the stronger version which says that the set of values where the function is at least the average has positive measure</p>",
        "id": 536766287,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756465942
    },
    {
        "content": "<p>That works, although it ended up being still quite messy: <a href=\"https://github.com/leanprover-community/mathlib4/pull/29114\">https://github.com/leanprover-community/mathlib4/pull/29114</a> I'm sure this can be refined a lot but I'm not yet experienced enough</p>",
        "id": 536836430,
        "sender_full_name": "Jeremy Parker",
        "timestamp": 1756489664
    }
]