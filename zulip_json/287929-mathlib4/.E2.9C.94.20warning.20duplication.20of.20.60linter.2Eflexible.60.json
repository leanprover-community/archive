[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Tactic</span>\n\n<span class=\"kd\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter.flexible</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">warning: 'simp' is a flexible tactic modifying '⊢'…</span>\n<span class=\"sd\">note: this linter can be disabled with `set_option linter.flexible false`</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">warning</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"w\">  </span><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">    </span><span class=\"c\">/-</span>\n<span class=\"cm\">    'simp' is a flexible tactic modifying '⊢'…</span>\n<span class=\"cm\">    note: this linter can be disabled with `set_option linter.flexible false`</span>\n<span class=\"cm\">    -/</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 475359650,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1728324472
    },
    {
        "content": "<p>warning of linter displayed even if <code>#guard_msgs</code> is used. My hope is that the original message will disappear after verifying the warning content with #guard_msgs.</p>",
        "id": 475359749,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1728324503
    },
    {
        "content": "<p>The standard trick to avoid this is to set it to <code>false</code> before the <code>#guard_msgs</code> and then then using <code>set_option ... true in</code> <em>inside</em> the <code>#guard_msgs</code>.</p>",
        "id": 475378517,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1728329835
    },
    {
        "content": "<p>This has to do with some mind-bending time-travel that happens due to <code>#guard_msgs</code> parsing the command twice.</p>",
        "id": 475378606,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1728329869
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">flexible</span><span class=\"w\"> </span><span class=\"n\">false</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">warning: 'simp' is a flexible tactic modifying '⊢'…</span>\n<span class=\"sd\">note: this linter can be disabled with `set_option linter.flexible false`</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">warning</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">flexible</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"w\">  </span><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"c\">/-</span>\n<span class=\"cm\">    'simp' is a flexible tactic modifying '⊢'…</span>\n<span class=\"cm\">    note: this linter can be disabled with `set_option linter.flexible false`</span>\n<span class=\"cm\">    -/</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 475378824,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1728329919
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> Thank you!!</p>",
        "id": 475378863,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1728329936
    },
    {
        "content": "<p>(note that you are only catching <code>warning</code>s, so the <code>info</code>s are let through.)</p>",
        "id": 475378883,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1728329945
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> has marked this topic as resolved.</p>",
        "id": 475380805,
        "sender_full_name": "Notification Bot",
        "timestamp": 1728330658
    },
    {
        "content": "<p>That #guard_msg issue is well-known, but doesn't seem to have an issue filed. Doing so would be welcome, I think!</p>",
        "id": 475402150,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728336403
    },
    {
        "content": "<p>I've tried to fix this issue once and for all in <a href=\"https://github.com/leanprover/lean4/pull/5644\">lean4#5644</a></p>\n<p>No more time travel or closed timelike curves <span aria-label=\"times up\" class=\"emoji emoji-231b\" role=\"img\" title=\"times up\">:times_up:</span></p>",
        "id": 475435846,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1728350554
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> Nice!!!!</p>",
        "id": 475515859,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1728378843
    }
]