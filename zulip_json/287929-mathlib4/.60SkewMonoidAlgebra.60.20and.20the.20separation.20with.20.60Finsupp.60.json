[
    {
        "content": "<p>Hi everyone,<br>\nAs a part of a bigger project aiming to get <a href=\"https://en.wikipedia.org/wiki/Drinfeld_module\">Drinfeld Modules</a> into Mathlib, <span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span>  and I have been trying to get a generalization of <code>MonoidAlgebra</code>, <code>SkewMonoidAlgebra</code>, into Mathlib. (<a href=\"https://github.com/leanprover-community/mathlib4/pull/10541\">#10541</a>)<br>\nSomething that has been slowing down the acceptance of the PR is the separation that we have made with <code>Finsupp</code> like discussed <a href=\"#narrow/stream/287929-mathlib4/topic/Separate.20.60Finsupp.60.20from.20.60AddMonoidAlgebra.60/near/421624155\">here</a>.</p>\n<p>In my opinion, I think the PR is in a good shape at the moment. But following <a href=\"https://github.com/leanprover-community/mathlib4/pull/10541#issuecomment-2248062238\">this discussion</a> on GitHub, the general question that I have is whether people are satisfied with the current separation we have. I expected to be able to follow the separation that is currently in Mathlib for <code>Polynomial</code>, but there have been several comments from reviewers that highlighted a few issues with it (<a href=\"https://github.com/leanprover-community/mathlib4/pull/10541#discussion_r1680458770\">Example</a>). We have adjusted for these issues in our PR.</p>\n<p>Specifically, the current separation we have consists of:</p>\n<ol>\n<li>Wrapping the definition with a structure.</li>\n<li>Making basic operations such as <code>add</code> private and irreducible.</li>\n<li>Adapting relevant definitions.</li>\n<li>Copying and adapting relevant theorems from the base construct to obtain statements in terms of our new object.</li>\n</ol>\n<p>Is this what everyone has in mind? If so, are there parts of the current PR that come short in respect to any of these?</p>\n<p>I am happy to integrate suggestions to improve the separation if there are any!</p>\n<p>Thanks a lot for your attention and help!<br>\nXavier</p>",
        "id": 456834154,
        "sender_full_name": "Xavier Généreux",
        "timestamp": 1722944833
    },
    {
        "content": "<p>Looking at the PR it seems that there are some problems with the first 100 lines of the file <code>Mathlib/Algebra/SkewMonoidAlgebra/Basic.lean</code>. Given that the file alone is 1200 lines long and the PR is nearly 6 months old, this for me is evidence that the PR should be closed or made into WIP as a reference, and a new PR should be opened with e.g. just the first 150 or so lines of <code>Mathlib/Algebra/SkewMonoidAlgebra/Basic.lean</code>. PRs which add 1600 lines of code are unlikely to make it into mathlib any time soon, because it takes infinite time to review them.</p>",
        "id": 456861000,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1722952059
    },
    {
        "content": "<p>See <a href=\"https://github.com/leanprover-community/mathlib4/pull/15878\">#15878</a>.</p>",
        "id": 462773154,
        "sender_full_name": "Xavier Généreux",
        "timestamp": 1723810056
    },
    {
        "content": "<p>We have addressed all of the comments in this PR. The last remaining question was whether <code>smul</code> should be an irreducible definition, but this does not seem possible as it would cause a diamond later on:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DistribMulAction</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">instDistribMulAction</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">DistribMulAction</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">ˣ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SkewMonoidAlgebra</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"n\">SkewMonoidAlgebra</span><span class=\"bp\">.</span><span class=\"n\">distribMulAction</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">with_reducible_and_instances</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- this would not work with irreducible `smul`.</span>\n</code></pre></div>",
        "id": 474286796,
        "sender_full_name": "María Inés de Frutos Fernández",
        "timestamp": 1727873200
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> Do you have further remarks for this PR?</p>",
        "id": 474322035,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727881550
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>, do you have more feedback on <a href=\"https://github.com/leanprover-community/mathlib4/pull/15878\">#15878</a>?</p>",
        "id": 479273660,
        "sender_full_name": "María Inés de Frutos Fernández",
        "timestamp": 1730121531
    },
    {
        "content": "<p>I'll try to make time to look tomorrow, sorry for the silence here</p>",
        "id": 479274223,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1730121689
    },
    {
        "content": "<p>Hi everyone,</p>\n<p>Sorry to bring this up again but I would highly appreciate it if someone reviewed <a href=\"https://github.com/leanprover-community/mathlib4/pull/15878\">#15878</a>.<br>\nDoes anyone have further remarks? <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>  did you get a chance to look at it?</p>\n<p>Thank you for your time.</p>",
        "id": 481950435,
        "sender_full_name": "Xavier Généreux",
        "timestamp": 1731418541
    }
]