[
    {
        "content": "<p>But maybe that should be generalized to a much larger class of instances...</p>\n<p>We see questions regularly where someone has <code>[AddGroup R] [Ring R]</code>. And a syntax linter could flag: hey, you now have two different ways to synth <code>Add R</code>, namely these two paths: ..., ...</p>",
        "id": 558695896,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1763740826
    },
    {
        "content": "<p>Ah, I see...that sounds quite costly <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span> I'm guessing it's not specific to DecidableEq either, right?</p>",
        "id": 558695918,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1763740830
    },
    {
        "content": "<p>Maybe we could curate (or better, automatically construct) a collection of <em>common</em> diamonds, so that we get some benefit but are still performant? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 558696389,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1763740941
    },
    {
        "content": "<p>(My thinking is that a <em>fully</em> general diamond detector would need to simply try to re-synthesize various instances after turning some others off one by one, and that this would be too costly.)</p>",
        "id": 558696791,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1763741043
    },
    {
        "content": "<p>What does <code>variable?</code> do?</p>",
        "id": 558696829,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1763741055
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"548935\">@Thomas Murrills</span> should we move this to another thread? (in new thread: I'm not sure if this is a good idea, but we could have some \"forward instance\" machinery infrastructure so that given Ring A then the machine generates AddCommMonoid A etc, and then we compare those instances, but then this also sounds very expensive...; alternatively, we store by hand the various \"extends\" relation for this forward instance implementation, because sometimes we might want more than \"extends\"; or maybe \"extends\" is enough and we can try to see where that leads us first?)</p>",
        "id": 558696977,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1763741096
    },
    {
        "content": "<p>(I don't think I have Zulip permissions to do so, but I encourage someone who does to move the messages! <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span>)</p>",
        "id": 558697415,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1763741219
    },
    {
        "content": "<p>I think what we could have that isn't too expensive, and that would catch the most common paper cuts, including the two mentioned above, is this: For each explicit <code>[Foo]</code> in context, consider only data-carrying structure projections (transitive closure included) of <code>Foo</code>. If two instances in context, say <code>Foo</code> and <code>Bar</code>, have a data-carrying class <code>Baz</code> in common, then the linter complains. Given that we use forgetful inheritance, I think this should catch mistakes. It obviously won't be able to detect \"true diamonds\", but I think we don't actually care.</p>\n<p>It would be nice to have this linter on, at least in CI, hat would process each declaration, but it would also be nice to have a command / tactic to call it independently as a sanity check for yourself. I think this would be a huge benefit to new users especially.</p>",
        "id": 558701838,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1763742293
    },
    {
        "content": "<p>8 messages were moved here from <a href=\"#narrow/channel/144837-PR-reviews/topic/.2329422.20.5BLinearOrder.20.CE.B1.5D.20.5BDecidableEq.20.CE.B1.5D\">#PR reviews &gt; #29422 &#91;LinearOrder α&#93; &#91;DecidableEq α&#93;</a> by <span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span>.</p>",
        "id": 558797066,
        "sender_full_name": "Notification Bot",
        "timestamp": 1763799840
    },
    {
        "content": "<p>I wrote a linter that did that, started fixing the exceptions, but I remember that there were <em>many</em> exceptions.</p>",
        "id": 558807337,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1763810055
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14731\">#14731</a>, I think.</p>",
        "id": 558807425,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1763810154
    },
    {
        "content": "<p>If seems like Matthew had the same idea there as mine above. Your linter seems to be doing much more work than I'm going for.</p>",
        "id": 558816964,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1763820043
    }
]