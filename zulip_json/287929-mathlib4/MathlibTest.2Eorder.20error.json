[
    {
        "content": "<p>Can someone please explain why my PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/30482\">#30482</a> fails to build? The error is that some example in <code>MathlibTest.order</code> fails with an error that isn't exactly the same as the error that it's supposed to give? I can't really tell what's going on nor what caused it.</p>",
        "id": 544440917,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760317873
    },
    {
        "content": "<p>Here's the exact error:</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\"><pre><span></span><code>✖ [7429/7458] Building MathlibTest.order (3.2s)\nError: error: MathlibTest/order.lean:128:2: No contradiction found.\n\nAdditional diagnostic information may be available using the `set_option trace.order true` command.\ninfo: MathlibTest/order.lean:128:2: [order] Working on type α (partial order)\n[order] Collected atoms:\n    #0 := a ⊓ (b ⊔ c)\n    #1 := a\n    #2 := b ⊔ c\n    #3 := b\n    #4 := c\n    #5 := a ⊓ b ⊔ a ⊓ c\n    #6 := a ⊓ b\n    #7 := a ⊓ c\n[order] Collected facts:\n    #3 ≤ #2\n    #4 ≤ #2\n    #2 := #3 ⊔ #4\n    #0 ≤ #1\n    #0 ≤ #2\n    #0 := #1 ⊓ #2\n    #6 ≤ #1\n    #6 ≤ #3\n    #6 := #1 ⊓ #3\n    #7 ≤ #1\n    #7 ≤ #4\n    #7 := #1 ⊓ #4\n    #6 ≤ #5\n    #7 ≤ #5\n    #5 := #6 ⊔ #7\n    #0 ≠ #5\n    ¬ #0 &lt; #5\n[order] Working on type ℕ (linear order)\n[order] Collected atoms:\n    #0 := x\n    #1 := y\n[order] Collected facts:\n    #0 ≠ #1\n    #0 ≤ #1\nError: error: MathlibTest/order.lean:126:0: ❌️ Docstring on `#guard_msgs` does not match generated message:\n\n  error: No contradiction found.\n\n  Additional diagnostic information may be available using the `set_option trace.order true` command.\n  ---\n- trace: [order] Working on type ℕ (linear order)\n+ trace: [order] Working on type α (partial order)\n  [order] Collected atoms:\n-     #0 := x\n-     #1 := y\n- [order] Collected facts:\n-     #0 ≠ #1\n-     #0 ≤ #1\n- [order] Working on type α (partial order)\n- [order] Collected atoms:\n      #0 := a ⊓ (b ⊔ c)\n      #1 := a\n      #2 := b ⊔ c\n      #3 := b\n      #4 := c\n      #5 := a ⊓ b ⊔ a ⊓ c\n      #6 := a ⊓ b\n      #7 := a ⊓ c\n  [order] Collected facts:\n      #3 ≤ #2\n      #4 ≤ #2\n      #2 := #3 ⊔ #4\n      #0 ≤ #1\n      #0 ≤ #2\n      #0 := #1 ⊓ #2\n      #6 ≤ #1\n      #6 ≤ #3\n      #6 := #1 ⊓ #3\n      #7 ≤ #1\n      #7 ≤ #4\n      #7 := #1 ⊓ #4\n      #6 ≤ #5\n      #7 ≤ #5\n      #5 := #6 ⊔ #7\n      #0 ≠ #5\n      ¬ #0 &lt; #5\n+ [order] Working on type ℕ (linear order)\n+ [order] Collected atoms:\n+     #0 := x\n+     #1 := y\n+ [order] Collected facts:\n+     #0 ≠ #1\n+     #0 ≤ #1\nerror: Lean exited with code 1\n</code></pre></div>\n</div></div>",
        "id": 544440961,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760317933
    },
    {
        "content": "<p>I think all that really happened was that the messages got rearranged? Is the test non-deterministic? Seems like a bad test if so.</p>",
        "id": 544441070,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1760318071
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"552388\">@Vasilii Nesterov</span> might have an idea here</p>",
        "id": 544583032,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1760370466
    },
    {
        "content": "<p>Yes, the order in which types are printed here is arbitrary, and changes in the imports of <code>order.lean</code> can change this order. I realized it only after this test got merged. I delete the second type from the test in <a href=\"https://github.com/leanprover-community/mathlib4/pull/30510\">#30510</a>.</p>",
        "id": 544585033,
        "sender_full_name": "Vasilii Nesterov",
        "timestamp": 1760371207
    },
    {
        "content": "<p>The right thing to do is to test the output up to permutation, but we don't have a tool for it</p>",
        "id": 544585480,
        "sender_full_name": "Vasilii Nesterov",
        "timestamp": 1760371354
    }
]