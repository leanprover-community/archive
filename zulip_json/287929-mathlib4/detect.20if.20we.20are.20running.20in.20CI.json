[
    {
        "content": "<p>How can I have a tactic detect if we are running in CI?</p>\n<p>The <code>says</code> combinator proposed in <a href=\"https://github.com/leanprover-community/mathlib4/pull/5980\">#5980</a> has a <code>set_option says.verify true</code> mode that tries to regenerate the right-hand-side. I think it makes sense to run this in CI.</p>\n<p>However I can't just set <code>-Dsays.verify=true</code>, because this is not a built-in option, and so not available until the build actually reaches that file.</p>\n<p>Is there some way to detect that we are in CI? I think all we need is some already-defined global option that we can stuff a flag into, but that is not already in use.</p>",
        "id": 376497496,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1689725083
    },
    {
        "content": "<p>Would it make sense simply to add a <code>CI</code> option to Lean core?</p>",
        "id": 376498057,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1689725347
    },
    {
        "content": "<p>Alternatively you could also check an environment variable.</p>",
        "id": 376500473,
        "sender_full_name": "Gabriel Ebner",
        "timestamp": 1689726368
    },
    {
        "content": "<p>This works great! I'm just looking for the <code>CI</code> environment variable, as github sets this automatically. I've written some tests that verify it is working as expected locally.</p>",
        "id": 376509807,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1689730187
    }
]