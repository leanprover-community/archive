[
    {
        "content": "<p>How can we write the 2-norm of <code>u : Fin n → ℝ</code>, i.e. <code>‖u‖₂ = √(∑ i, u i ^ 2)</code>? Sometimes it’s unavoidable to use <code>Fin n → ℝ</code> instead of <code>EuclideanSpace ℝ (Fin n)</code> to represent vectors. For example, in the following problem:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c\">/-</span>\n<span class=\"cm\">P5.2.12 Show that if $A \\in \\mathbb{R}^{n \\times n}$ and $a_i=A(:, i)$, then</span>\n<span class=\"cm\">$$</span>\n<span class=\"cm\">|\\operatorname{det}(A)| \\leq\\left\\|a_1\\right\\|_2 \\cdots\\left\\|a_n\\right\\|_2 .</span>\n<span class=\"cm\">$$</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">abs_det_le_product_norm_columns</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">det</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">∏</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">transpose</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">‖₂</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I’ve found an ugly way to write <code>‖(WithLp.toLp (p := 2) (Aᵀ i) : EuclideanSpace ℝ (Fin n))‖</code>, and I’m not satisfied with it.</p>",
        "id": 557894821,
        "sender_full_name": "Yi.Yuan",
        "timestamp": 1763462553
    },
    {
        "content": "<p>You can do this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">WithLp</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">abs_det_le_product_norm_columns</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">det</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">∏</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"n\">toLp</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">A</span><span class=\"bp\">.</span><span class=\"n\">transpose</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 557896510,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1763463005
    },
    {
        "content": "<p>Cool, thanks a lot, it really works well.</p>",
        "id": 557898531,
        "sender_full_name": "Yi.Yuan",
        "timestamp": 1763463545
    },
    {
        "content": "<p>I have a proof of this result (in transposed form) which I was actually planning to PR today, in case that's useful to you</p>",
        "id": 557905839,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1763465558
    },
    {
        "content": "<p><code>A.col i</code> I think is a slightly better working than using transpose</p>",
        "id": 557927934,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1763470998
    }
]