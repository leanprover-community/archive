[
    {
        "content": "<p>I'd be pretty happy to see the end of <code>PartENat</code> (I appreciate there is some difference regarding computability, but I think this is irrelevant for the places in Mathlib that currently use it).</p>",
        "id": 485200077,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732948481
    },
    {
        "content": "<p>I had a quick look at <code>Mathlib.RingTheory.PowerSeries</code>, one of the few places still using it. It's clear that one can switch out PartENat for ENat there --- the <a href=\"https://github.com/leanprover-community/mathlib4/tree/powerseries_enat\">branch#powerseries_enat</a> is partial progress, and just needs some proof repair: everything downstream works.</p>",
        "id": 485200117,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732948532
    },
    {
        "content": "<p>If anyone would like to adopt that, that would be lovely. :-)</p>",
        "id": 485200125,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732948541
    },
    {
        "content": "<p>Otherwise, hopefully <a href=\"https://github.com/leanprover-community/mathlib4/pull/19624\">#19624</a> goes a long way to reducing our use of PartENat, by introducing <code>ENat.card</code>, and switching over <code>Set.encard</code> to use it (+ some cleanup elsewhere).</p>",
        "id": 485202557,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732950925
    },
    {
        "content": "<p>In fact, it looks like we can just deprecate PartENat.card at the same time.</p>",
        "id": 485202955,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732951249
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/19622\">#19622</a> completes the removal of PartENat from PowerSeries.</p>",
        "id": 485437963,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733018506
    },
    {
        "content": "<p>and the followup <a href=\"https://github.com/leanprover-community/mathlib4/pull/19648\">#19648</a> finishes the deprecation of <code>PartENat.card</code>, incidentally giving some substantial import reductions elsewhere.</p>",
        "id": 485450018,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733031277
    },
    {
        "content": "<p>I guess your plan is to land the first just before the 1.14 release, and the second just after?</p>",
        "id": 485462209,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733043011
    },
    {
        "content": "<p>I think both can go in now, can't they?</p>",
        "id": 485462231,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733043042
    },
    {
        "content": "<p>I though deprecations were supposed to stick around for at least one non-rc release</p>",
        "id": 485467520,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733046866
    },
    {
        "content": "<p>Otherwise a user bumping only through releases one at a time will never see the warning</p>",
        "id": 485467541,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733046887
    },
    {
        "content": "<p>All the deprecations are sticking around?</p>",
        "id": 485482501,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733060535
    },
    {
        "content": "<p>Oh, you don't like that I've moved the deprecations into <code>Deprecated</code>.</p>",
        "id": 485482522,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733060561
    },
    {
        "content": "<p>Okay, let's wait for <a href=\"https://github.com/leanprover-community/mathlib4/pull/19648\">#19648</a> for at least a few days then.</p>",
        "id": 485482642,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733060648
    },
    {
        "content": "<p>Oh, your PR title confused me</p>",
        "id": 485483908,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733061527
    },
    {
        "content": "<p>But I didn't think the <code>Deprecated</code> folder was part of our deprecation process, since that still breaks everyone who doesn't import it</p>",
        "id": 485483948,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733061543
    },
    {
        "content": "<p>Yes, I moved things to <code>Deprecated</code> specifically in order to be able to avoid importing these files, as it significantly untangles the import graph in this case.</p>",
        "id": 485542998,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733113162
    },
    {
        "content": "<p>I really don't want to wait 6 months for these import reductions.</p>",
        "id": 485543148,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733113299
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Removing.20unnecessary.20uses.20of.20.60PartENat.60/near/485483948\">said</a>:</p>\n<blockquote>\n<p>But I didn't think the <code>Deprecated</code> folder was part of our deprecation process, since that still breaks everyone who doesn't import it</p>\n</blockquote>\n<p>I don't think that there are many downstream projects affected by this move. And if so, it's nothing a <code>grep</code> can't solve. We regularly move lemmas between files (or split them), and people have to deal with the fallout. I don't think this is any worse.</p>",
        "id": 485648735,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1733152956
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Removing.20unnecessary.20uses.20of.20.60PartENat.60/near/485543148\">said</a>:</p>\n<blockquote>\n<p>I really don't want to wait 6 months for these import reductions.</p>\n</blockquote>\n<p>I think we can speed up any deprecation to a single release if it makes things easier; so the worst case should be only one month, assuming Lean keeps up its release cadence (and if it doesn't, mathlib can always set its own tagging cadence in future)</p>",
        "id": 485648975,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733153023
    },
    {
        "content": "<p>Or throw <code>import Mathlib</code> at it</p>",
        "id": 485649025,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1733153035
    },
    {
        "content": "<p><code>grep</code> isn't reliable in the face of <code>to_additive</code></p>",
        "id": 485649260,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733153090
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Removing.20unnecessary.20uses.20of.20.60PartENat.60/near/485649025\">said</a>:</p>\n<blockquote>\n<p>Or throw <code>import Mathlib</code> at it</p>\n</blockquote>\n<p>It would be great if we could document this somewhere as a migration recommendation for people running <code>lake update Mathlib</code></p>",
        "id": 485649446,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733153142
    },
    {
        "content": "<p>(though it would be even better if Lean could look at the ileans of all dependencies and suggest imports when you reference a name that doesn't exist!)</p>",
        "id": 485649628,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733153182
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Removing.20unnecessary.20uses.20of.20.60PartENat.60/near/485649628\">said</a>:</p>\n<blockquote>\n<p>(though it would be even better if Lean could look at the ileans of all dependencies and suggest imports when you reference a name that doesn't exist!)</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"221921\">@Marc Huisinga</span>, is there any possibility of doing this? Somehow giving extra hints in VSCode to the user about names that don't exist, but would with further imports?</p>",
        "id": 485744475,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733195310
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Removing.20unnecessary.20uses.20of.20.60PartENat.60/near/485649446\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Removing.20unnecessary.20uses.20of.20.60PartENat.60/near/485649025\">said</a>:</p>\n<blockquote>\n<p>Or throw <code>import Mathlib</code> at it</p>\n</blockquote>\n<p>It would be great if we could document this somewhere as a migration recommendation for people running <code>lake update Mathlib</code></p>\n</blockquote>\n<p>I have added a section at <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency\">https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency</a></p>",
        "id": 485745726,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733196258
    },
    {
        "content": "<p>(both suggesting <code>import Mathlib</code>, and explaining how to incrementally bump through intermediate tagged releases)</p>",
        "id": 485745742,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733196281
    },
    {
        "content": "<p>Thanks! I've kicked it on the queue now.</p>",
        "id": 485761456,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1733205046
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Removing.20unnecessary.20uses.20of.20.60PartENat.60/near/485744475\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Removing.20unnecessary.20uses.20of.20.60PartENat.60/near/485649628\">said</a>:</p>\n<blockquote>\n<p>(though it would be even better if Lean could look at the ileans of all dependencies and suggest imports when you reference a name that doesn't exist!)</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"221921\">Marc Huisinga</span>, is there any possibility of doing this? Somehow giving extra hints in VSCode to the user about names that don't exist, but would with further imports?</p>\n</blockquote>\n<p>This is planned for next quarter, though it's a bit more complicated than what Eric suggests.</p>",
        "id": 485780940,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1733213403
    }
]