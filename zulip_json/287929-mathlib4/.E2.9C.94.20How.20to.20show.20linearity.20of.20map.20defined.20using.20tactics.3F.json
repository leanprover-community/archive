[
    {
        "content": "<p>Hi so I have a map defined using some tactics that I want to show is linear (and an isometry infact). How should I go about proving the linearity in map_add'? here is a minimal working example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Normed</span><span class=\"bp\">.</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Dual</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">LinMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NontriviallyNormedField</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span>\n<span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedSpace</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"bp\">‚Üí‚Çó·µ¢</span><span class=\"o\">[</span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">val</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">map_add'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x1</span><span class=\"w\"> </span><span class=\"n\">x2</span>\n\n<span class=\"w\">  </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">map_smul'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"n\">norm_map'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>in particular I want to be able to use the propsitions h and the definition of val in my proof. How should I go about this?</p>\n<p>I have also attached a picture of the infoview below:</p>\n<p><a href=\"/user_uploads/3121/W6-0_dnBtEUxKlN59zo7lxOc/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/W6-0_dnBtEUxKlN59zo7lxOc/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"406x667\" src=\"/user_uploads/thumbnail/3121/W6-0_dnBtEUxKlN59zo7lxOc/image.png/840x560.webp\"></a></div>",
        "id": 498035846,
        "sender_full_name": "Rahul Sahjwani",
        "timestamp": 1738817422
    },
    {
        "content": "<p>To be clear I just want to know what tactic I should use to be able to invoke the proposition h and the definition of val</p>",
        "id": 498037495,
        "sender_full_name": "Rahul Sahjwani",
        "timestamp": 1738818347
    },
    {
        "content": "<p>Have you just tried <code>dsimp</code>?</p>",
        "id": 498043951,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1738822488
    },
    {
        "content": "<p>dsimp doesn't seem to include h, which I would prefer to use somehow (although I could prove it again inside)</p>",
        "id": 498044112,
        "sender_full_name": "Rahul Sahjwani",
        "timestamp": 1738822583
    },
    {
        "content": "<p>You could move the <code>have</code> onto a preliminary lemma. If you post something with fewer sorries maybe someone can suggest something better?</p>",
        "id": 498051662,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1738826491
    },
    {
        "content": "<p>Try <code>intro</code>?</p>",
        "id": 498116654,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738847236
    },
    {
        "content": "<p>Actually, that won't work</p>",
        "id": 498116750,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738847274
    },
    {
        "content": "<p>See also <a class=\"message-link\" href=\"/#narrow/channel/116395-maths/topic/How.20to.20show.20linearity.20of.20a.20map.20defined.20via.20tactics.3F/near/498038307\">#maths &gt; How to show linearity of a map defined via tactics? @ üí¨</a></p>",
        "id": 498116949,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1738847330
    },
    {
        "content": "<p><code>lift_lets</code> from <a href=\"https://tqft.net/mathlib4files/Mathlib/Tactic/LiftLets\">file#Mathlib/Tactic/LiftLets</a> works for the <code>let</code> bindings but not for the <code>let_fun</code> bindings</p>",
        "id": 498127456,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738850468
    },
    {
        "content": "<p>After that you can <code>intro</code> the <code>let</code> binding</p>",
        "id": 498127612,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738850510
    },
    {
        "content": "<p>Hi Aaron, thanks for the response! That works!</p>",
        "id": 498211367,
        "sender_full_name": "Rahul Sahjwani",
        "timestamp": 1738876412
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"739556\">Rahul Sahjwani</span> has marked this topic as resolved.</p>",
        "id": 498211517,
        "sender_full_name": "Notification Bot",
        "timestamp": 1738876487
    }
]