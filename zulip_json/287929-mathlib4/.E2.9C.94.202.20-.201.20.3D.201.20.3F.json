[
    {
        "content": "<p>Hi everyone,<br>\nI'm new to lean and mathlib4, and for my internship, i tried to use them in order to do some proof on hybrid systems.<br>\nHowever, at one point I have to do some calculus, and in particular, I have to proof that 2 - 1 = 1.<br>\nUsing the tactic \"rfl\", it's immediate if 2 and 1 are Natural.<br>\nHowever, if you force 2 and 1 to be real (which I need), then the proof :</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Real</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">two</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">two</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span><span class=\"w\">  </span><span class=\"n\">two</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">one</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>Fail. How can I prove that then ?</p>\n<p>Thank you !</p>",
        "id": 522314668,
        "sender_full_name": "newos20",
        "timestamp": 1749030779
    },
    {
        "content": "<p>Please include import statements in your <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>.<br>\nYou can use the <code>norm_num</code> tactic to do numerical computations.</p>",
        "id": 522314881,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1749030841
    },
    {
        "content": "<p>indeed, although you might need to unfold the definitions of <code>one</code> and <code>two</code> first</p>",
        "id": 522314987,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1749030873
    },
    {
        "content": "<p>if the <code>def</code>s are because you want to tell lean these are real numbers rather than naturals, and not an artefact of your minimization: you can use type ascriptions to the same effect, like so: <code>(2 : Real) - (1 : Real) = 1</code></p>",
        "id": 522315380,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1749030989
    },
    {
        "content": "<p>Thanks for your quick answers !<br>\nThe first calc step is here to unfold the definitions, and sadly the norm_num tactic fail as well to prove the last goal. Thanks for the type ascription trick also, it's indeed what I wanted to do</p>",
        "id": 522315757,
        "sender_full_name": "newos20",
        "timestamp": 1749031113
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"926453\">newos20</span> <a href=\"#narrow/channel/287929-mathlib4/topic/2.20-.201.20.3D.201.20.3F/near/522315757\">said</a>:</p>\n<blockquote>\n<p>and sadly the norm_num tactic fail as well to prove the last goal</p>\n</blockquote>\n<p>what do you mean? the following works?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Real</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">two</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">two</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span><span class=\"w\">  </span><span class=\"n\">two</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">one</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>",
        "id": 522316068,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1749031204
    },
    {
        "content": "<p>Ah it works, I tried to use <code>norm_num</code> along with <code>rw</code>and it failed.<br>\nThank you !</p>",
        "id": 522316700,
        "sender_full_name": "newos20",
        "timestamp": 1749031392
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"926453\">newos20</span> has marked this topic as resolved.</p>",
        "id": 522316744,
        "sender_full_name": "Notification Bot",
        "timestamp": 1749031408
    },
    {
        "content": "<p><code>:= by norm_num [one, two]</code> should work as the whole proof</p>",
        "id": 522384546,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749049851
    }
]