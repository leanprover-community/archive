[
    {
        "content": "<p>I've run into a use case where it would be useful to be able to make a <code>Discrete</code> category whose morphisms live in a different universe level than its objects. Specifically, I'm generalizing <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/Category/Cat/Limit.html\">the construction of explicit limits of size <code>v</code> in <code>Cat.{v, v}</code></a> to limits of size <code>w</code> in <code>Cat.{v, u}</code> with <code>w ≤ u, v</code>, and in the process I ended up wanting a proof that <code>objects</code>preserves <em>all</em> limits in <code>Cat.{v, u}</code>, even the ones too big to fit. </p>\n<p>In the process of completing that proof, I ended up rolling my own version of <code>Discrete</code>: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"kd\">@[</span><span class=\"n\">ext</span><span class=\"kd\">]</span>\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Discrete'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ULift</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">α</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Discrete'</span>\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">v'</span><span class=\"w\"> </span><span class=\"n\">u'</span><span class=\"w\"> </span><span class=\"n\">v₁</span><span class=\"w\"> </span><span class=\"n\">u₁</span><span class=\"w\"> </span><span class=\"n\">v₂</span><span class=\"w\"> </span><span class=\"n\">u₂</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">simps</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"kd\">]</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Discrete'</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">Hom</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ULift</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">PLift</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"bp\">.</span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"bp\">.</span><span class=\"n\">as</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ULift</span><span class=\"bp\">.</span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">PLift</span><span class=\"bp\">.</span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rintro</span><span class=\"w\"> </span><span class=\"bp\">⟨⟩</span><span class=\"w\"> </span><span class=\"bp\">⟨⟩</span><span class=\"w\"> </span><span class=\"bp\">⟨⟩</span><span class=\"w\"> </span><span class=\"bp\">⟨⟨⟨⟩⟩⟩</span><span class=\"w\"> </span><span class=\"bp\">⟨⟨⟨⟩⟩⟩;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"bp\">⟨⟨</span><span class=\"n\">rfl</span><span class=\"bp\">⟩⟩</span>\n<span class=\"c1\">-- ...</span>\n</code></pre></div>\n<p>The only difference between this and the original <code>Discrete</code> is that <code>Discrete</code> is a <code>SmallCategory</code>, thus has morphisms in <code>Type u</code>, whereas this has morphisms in some arbitrary<code>Type v</code>. This allows me to, for example, easily make images of simple types in whatever <code>Cat</code> level I like, rather than being restricted to homogenous universe levels.</p>",
        "id": 521005726,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1748484895
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> Inspection of <code>ULiftHom</code> seems to have resolved the dilemma we were having in office hours; I'm going to go find out if this breaks anything in my local Mathlib if I change <code>Discrete</code> to this</p>",
        "id": 521005788,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1748484943
    },
    {
        "content": "<p>... And it seems the answer is \"no\", though I haven't tried building all of Mathlib. In fact I barely had to change anything; we don't often use universe levels with Discrete in the current definition, so there's very little to change when adding an extra level.</p>",
        "id": 521007271,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1748486115
    },
    {
        "content": "<p>Hm. Okay, a few things popped up when I ran CI over it, but still just a few here and there. It does seem like there might be a market for <code>DiscreteSmall</code>, defined as the original definition, though. Or some other abbreviated sensible default</p>",
        "id": 521009371,
        "sender_full_name": "Robert Maxton",
        "timestamp": 1748487634
    }
]