[
    {
        "content": "<p>Hi, I'm Anish, an undergraduate math major @ CMU</p>\n<p>I recently formalized the Stone Space of n-types (types in Model Theory, not Type Theory) and showed it is a Baire space (by showing it is T2 and compact). My plan is to use this fact to prove the Omitting Types Theorem, (by talking about an omittable set of types as meager). I was wondering if this would be a good fit for mathlib? I've linked the repository below. I'm refactoring the code right now to fit all the mathlib guidelines, but the actual logic is correct. </p>\n<p>TLDR : Was wondering if this formalization of the n-type space and proof of Hausdorff + compactness is a good fit for mathlib</p>\n<p><a href=\"https://github.com/anishrajeev/ModelTheoryFun/blob/main/ModelTheoryFun/Stone.lean\">https://github.com/anishrajeev/ModelTheoryFun/blob/main/ModelTheoryFun/Stone.lean</a></p>",
        "id": 562195166,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1764975576
    },
    {
        "content": "<p>You show in <code>disjoint_open_sets</code> that the space of types is totally separated, I feel like it would be better to show they are T0 (for any pair of types, there is an open set containing one but not the other) and zero-dimensional (there is a basis of clopen sets), this implies totally separated.</p>",
        "id": 562196507,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1764976555
    },
    {
        "content": "<p>I can change this, sure. Two questions, though:<br>\n1) Any particular reason that way is better than just registering the space as Totally Separated? Just curious for when I write more lean in the future<br>\n2) I checked on loogle and didn't spot a zero dimensional class; Is that something you want me to define? I can define it and prove the T0 + zero dimensional -&gt; totally separated, but would prefer to do it after I finish proving the Omitting Types Theorem</p>",
        "id": 562201724,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1764981098
    },
    {
        "content": "<p>I think Aaron Liu is referring to this theorem: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Separation/Profinite.html#totallySeparatedSpace_of_t0_of_basis_clopen\">totallySeparatedSpace_of_t0_of_basis_clopen</a>.</p>",
        "id": 562204138,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1764983550
    },
    {
        "content": "<p>This would be great to add (once the code is stylistically ready, and a few things are generalized).</p>",
        "id": 562264821,
        "sender_full_name": "Aaron Anderson",
        "timestamp": 1765054056
    },
    {
        "content": "<p>I have worked on similar things in the past, but I never quite got to the level of PRing to mathlib - I'd be happy to review any PRs on this subject.</p>",
        "id": 562264917,
        "sender_full_name": "Aaron Anderson",
        "timestamp": 1765054176
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"669043\">Yongxi Lin (Aaron)</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Model.20Theory.3A.20Space.20of.20n-types.20formalized/near/562204138\">said</a>:</p>\n<blockquote>\n<p>I think Aaron Liu is referring to this theorem: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Separation/Profinite.html#totallySeparatedSpace_of_t0_of_basis_clopen\">totallySeparatedSpace_of_t0_of_basis_clopen</a>.</p>\n</blockquote>\n<p>Oh I see, that makes sense. I just updated the codebase to prove T0 and zero dim -&gt; totally separated as suggested. <br>\n<span class=\"user-mention silent\" data-user-id=\"302826\">Aaron Anderson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Model.20Theory.3A.20Space.20of.20n-types.20formalized/near/562264821\">said</a>:</p>\n<blockquote>\n<p>This would be great to add (once the code is stylistically ready, and a few things are generalized).</p>\n</blockquote>\n<p>Good to hear! I'll make a PR after cleaning it up</p>",
        "id": 562272771,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765065421
    },
    {
        "content": "<p>I'm sorry to say this, but I made a pull request (<a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a>) last week that did this as well <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span>. I do think that your proof is much nicer though, a version of this should probably be merged.</p>",
        "id": 562317538,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765123440
    },
    {
        "content": "<p>Oh no I came to put the link to my PR here and just saw this message! My PR is <a href=\"https://github.com/leanprover-community/mathlib4/pull/32546\">#32546</a>. Is there some action I should take to merge them together somehow? I think I have the additional property of total separation on the space that I think can be added at least? Sorry, this is my first time adding anything to open source, so I'm a little unfamiliar with the whole process.</p>",
        "id": 562320750,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765126858
    },
    {
        "content": "<p>Also, for future reference so we don't end up stepping on each others toes, what is your future plans with the type space? I ideally wouldn't want both of us to end up working on the same thing independently</p>",
        "id": 562322146,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765128269
    },
    {
        "content": "<p>I don't have any concrete plans at the moment, so feel free to do whatever you want.</p>\n<p>I think that your compactness proof is definitely the nicer one and should be merged. Totally separatedness I think can be done much cleaner, you don't need all the T0 stuff, you can just directly provide two separating clopens (some formula is in one type but not in the other), look at <code>totallySeparatedSpace_iff_exists_isClopen</code> for example.</p>",
        "id": 562329730,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765136055
    },
    {
        "content": "<p>I will mark my pull request as WIP in the meantime. There was also some discussion earlier as to what the best way to add this to mathlib is, because at the moment the model theory library isn't allowed to import files from topology</p>",
        "id": 562329984,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765136306
    },
    {
        "content": "<p>I think the most helpful thing you both could do is review each other's work on github and try to figure out which parts of each PR are best suited for mathlib</p>",
        "id": 562330160,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1765136451
    },
    {
        "content": "<p>For the import issue, please adjust <code>Mathlib/Tactic/Linter/DirectoryDependency.lean</code> in your PR so it passes CI and gets on the <a href=\"https://leanprover-community.github.io/queueboard/\">#queueboard</a> , and leave it to the reviewer to decide what to do about it</p>",
        "id": 562330305,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1765136617
    },
    {
        "content": "<p>I think the answer is pretty clearly merge a cleaned up version of Anish' proof</p>",
        "id": 562330468,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765136817
    },
    {
        "content": "<p>For the <code>TotallySeparatedSpace</code>, I think a <a href=\"https://github.com/jonasvanderschaaf/mathlib4/blob/d48aca6e2c312cda553dccbd0a6a33672939ccdf/Mathlib/ModelTheory/Topology/Types.lean#L106\">proof like this</a> is much simpler</p>",
        "id": 562345722,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765141841
    },
    {
        "content": "<p>I think I agree with you on that being much nicer</p>",
        "id": 562346221,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765141947
    },
    {
        "content": "<p>I wanted the proof with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=totallySeparatedSpace_of_t0_of_basis_clopen#doc\">docs#totallySeparatedSpace_of_t0_of_basis_clopen</a> because having a basis of clopen sets is a stronger property you can separate out into another lemma</p>",
        "id": 562346311,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1765141967
    },
    {
        "content": "<p>It's equivalent in this case, and mathlib has <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Separation/Profinite.html#isTopologicalBasis_isClopen\">an instance</a> which infers it. It's also essentially proven in the file I sent because my <code>typesWith_clopen</code> proves that the basis I constructed only has clopen sets.</p>",
        "id": 562347690,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765142293
    },
    {
        "content": "<blockquote>\n<p>There was also some discussion earlier as to what the best way to add this to mathlib is</p>\n</blockquote>\n<p>I saw some discussion about this earlier in a thread. I think it deserves to be in the model theory library, but also will defer to the actual mathematicians. I think another way is to formalize and prove these properties of the Stone Space in the topology directory, and then register the type space as an instance of it? Still would have to refer to the topology directory though I think, so not sure if that solves the problem but feels more right maybe</p>",
        "id": 562347975,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765142364
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"986582\">Anish Rajeev</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Model.20Theory.3A.20Space.20of.20n-types.20formalized/near/562347975\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>There was also some discussion earlier as to what the best way to add this to mathlib is</p>\n</blockquote>\n<p>I saw some discussion about this earlier in a thread. I think it deserves to be in the model theory library, but also will defer to the actual mathematicians. I think another way is to formalize and prove these properties of the Stone Space in the topology directory, and then register the type space as an instance of it? Still would have to refer to the topology directory though I think, so not sure if that solves the problem but feels more right maybe</p>\n</blockquote>\n<p>Oh the problem was already solved, the solution is to do as Ruben said earlier.</p>",
        "id": 562348642,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765142525
    },
    {
        "content": "<p>Oh i see</p>",
        "id": 562348860,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765142584
    },
    {
        "content": "<p>I’ve also done some golfing on your proof to get <a href=\"https://github.com/jonasvanderschaaf/mathlib4/blob/test/Mathlib/ModelTheory/Topology/Types.lean#L55\">this one</a>. I’m also relatively new here so I don’t know if it’s better, but it’s shorter for sure.</p>",
        "id": 562361998,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765145772
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"986582\">Anish Rajeev</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Model.20Theory.3A.20Space.20of.20n-types.20formalized/near/562320750\">said</a>:</p>\n<blockquote>\n<p>Oh no I came to put the link to my PR here and just saw this message! My PR is <a href=\"https://github.com/leanprover-community/mathlib4/pull/32546\">#32546</a>. Is there some action I should take to merge them together somehow? I think I have the additional property of total separation on the space that I think can be added at least? Sorry, this is my first time adding anything to open source, so I'm a little unfamiliar with the whole process.</p>\n</blockquote>\n<p>Here's my proposal: I remove the proof of compactness from my pull request. I do think I will keep the definition of the topological structure in the pull request (if only for the proof that the basis is a basis). </p>\n<p>You can then clean up your proof and rebase it on master to merge it. This means that the pull requests are more compartmentalized anyway.</p>",
        "id": 562550647,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765225049
    },
    {
        "content": "<p>That sounds good with me</p>",
        "id": 562559997,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765228691
    },
    {
        "content": "<p>Do I understand correctly that the plan is to remove a bunch of stuff from <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a> and then make <a href=\"https://github.com/leanprover-community/mathlib4/pull/32546\">#32546</a> depend on what's left of <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a>? Or will they be independent?</p>",
        "id": 562998042,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1765384075
    },
    {
        "content": "<p>Hi sorry, got busy there with finals but I'm back now; This is what I understood to be the case yes. <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a> would have the definition of the topological space along the proof that the basis is a basis and that the space is totally separated, while <a href=\"https://github.com/leanprover-community/mathlib4/pull/32546\">#32546</a> would depend on <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a> and prove compactness. I'm confused why <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a> is marked as a draft though?</p>",
        "id": 563214318,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765466506
    },
    {
        "content": "<p>Ok, I've marked <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a> as open (no longer draft) and <code>awaiting-author</code>, and <a href=\"https://github.com/leanprover-community/mathlib4/pull/32546\">#32546</a> as dependent on <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a></p>",
        "id": 563229595,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1765469660
    },
    {
        "content": "<p>I've removed the compactness proof, and added some more small quality of life lemmas. You should be able to slot your proof into this not <span class=\"user-mention\" data-user-id=\"986582\">@Anish Rajeev</span> .</p>",
        "id": 563631318,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765642650
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"519559\">Dagur Asgeirsson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Model.20Theory.3A.20Space.20of.20n-types.20formalized/near/563229595\">said</a>:</p>\n<blockquote>\n<p>Ok, I've marked <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a> as open (no longer draft) and <code>awaiting-author</code>, and <a href=\"https://github.com/leanprover-community/mathlib4/pull/32546\">#32546</a> as dependent on <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a></p>\n</blockquote>\n<p>I have done the work I stated and I think my pull request could be merged (if you have no remarks yourself).</p>",
        "id": 564122149,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765914833
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"986582\">@Anish Rajeev</span> could you review <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a>?</p>",
        "id": 564132681,
        "sender_full_name": "Dagur Asgeirsson",
        "timestamp": 1765919197
    },
    {
        "content": "<p>Ok I just updated <a href=\"https://github.com/leanprover-community/mathlib4/pull/32546\">#32546</a> to prove compactness for the space defined in <a href=\"https://github.com/leanprover-community/mathlib4/pull/32215\">#32215</a>, I  think it also should be good for being merged</p>",
        "id": 564143305,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765923851
    },
    {
        "content": "<p>Yes I can review it</p>",
        "id": 564143327,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765923861
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"986582\">@Anish Rajeev</span> I’m fairly sure you can replace Fin n by an arbitrary type and still have your code compile. Could you make this change?</p>",
        "id": 564146884,
        "sender_full_name": "Jonas van der Schaaf",
        "timestamp": 1765926014
    },
    {
        "content": "<p>Good call, just fixed that</p>",
        "id": 564154671,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1765931328
    },
    {
        "content": "<p>Hi is there any updates on this? I think I reviewed the PR properly, but let me know if I missed doing something.</p>",
        "id": 566000961,
        "sender_full_name": "Anish Rajeev",
        "timestamp": 1767303704
    },
    {
        "content": "<p>I've made a few comments</p>",
        "id": 566001438,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1767304369
    }
]