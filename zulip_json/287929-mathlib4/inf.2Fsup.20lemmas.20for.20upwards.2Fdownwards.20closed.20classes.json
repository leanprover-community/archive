[
    {
        "content": "<p>I frequently use that FG submodules are closed under intersection (over noetherian rings). The following lemmas therefore appeared useful to me:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FG</span><span class=\"bp\">.</span><span class=\"n\">inf_left</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hS</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">.</span><span class=\"n\">FG</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">⊓</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">FG</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">hS</span><span class=\"bp\">.</span><span class=\"n\">of_le</span><span class=\"w\"> </span><span class=\"n\">inf_le_left</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FG</span><span class=\"bp\">.</span><span class=\"n\">inf_right</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hT</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">FG</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">⊓</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">FG</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">hT</span><span class=\"bp\">.</span><span class=\"n\">of_le</span><span class=\"w\"> </span><span class=\"n\">inf_le_right</span>\n</code></pre></div>\n<p>I proposed them as part of <a href=\"https://github.com/leanprover-community/mathlib4/pull/33993\">#33993</a> but was asked to remove them because they can be easily proved from FG being downwards closed.</p>\n<p>The same happened in my PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/34006\">#34006</a> on co-finitely generated submodules. I proposed</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">CoFG</span><span class=\"bp\">.</span><span class=\"n\">sup_left</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hS</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">.</span><span class=\"n\">CoFG</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">⊔</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">CoFG</span>\n<span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hS</span><span class=\"bp\">.</span><span class=\"n\">of_cofg_le</span><span class=\"w\"> </span><span class=\"n\">le_sup_left</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">CoFG</span><span class=\"bp\">.</span><span class=\"n\">sup_right</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hT</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">CoFG</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">⊔</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">CoFG</span>\n<span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hT</span><span class=\"bp\">.</span><span class=\"n\">of_cofg_le</span><span class=\"w\"> </span><span class=\"n\">le_sup_right</span>\n</code></pre></div>\n<p>but was asked to remove because these lemmas are \"just a more obscure way of saying upwards closed\".</p>\n<p>I also proposed</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">alias</span><span class=\"w\"> </span><span class=\"n\">FG</span><span class=\"bp\">.</span><span class=\"n\">inf</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">FG</span><span class=\"bp\">.</span><span class=\"n\">inf_right</span>\n<span class=\"kn\">alias</span><span class=\"w\"> </span><span class=\"n\">CoFG</span><span class=\"bp\">.</span><span class=\"n\">sup</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">CoFG</span><span class=\"bp\">.</span><span class=\"n\">sup_left</span>\n</code></pre></div>\n<p>I agree that these lemmas are, to a degree, redundant. Nevertheless, here are my main arguments for them:</p>\n<ul>\n<li>discoverability: if I am thinking of sup/inf it is easier for me to discover these lemmas rather than to remember that these classes are also upwards/downwards closed.</li>\n<li>I use them often enough so as to have an actual gain from writing <code>hS.inf T</code> or <code>hS.sup T</code> in place of using the <code>of_le</code>-lemmas all over the place.</li>\n<li>there will be similar lemmas in the future that mix FG and CoFG submodules and the proposed lemmas above complete this family of combinations.</li>\n</ul>\n<p>I decided to not push for these in my PRs, but would pick this up again if it becomes too annoying in future PRs to not have them. I also understand that having these lemmas would set a precedent for similar situations. For this reason I would like to have this discussed now, perhaps in order to understand why we absolutely do not want to have them.</p>",
        "id": 569431783,
        "sender_full_name": "Martin Winter",
        "timestamp": 1769070735
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> <span class=\"user-mention\" data-user-id=\"459227\">@Violeta Hernández</span> <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span></p>",
        "id": 569432396,
        "sender_full_name": "Martin Winter",
        "timestamp": 1769070992
    },
    {
        "content": "<p>I feel like these lemmas set a bad precedent. Do we also want versions for <code>sInf</code>/<code>sSup</code>? Then surely we also want versions for <code>iInf</code>/<code>iSup</code>, as well as <code>biInf</code>/<code>biSup</code> and now we're writing substantial boilerplate for something that's entirely obvious.</p>",
        "id": 569437319,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1769072526
    },
    {
        "content": "<p>The <code>of_le</code> versions also have the advantage that you don't have to remember whether <code>left</code> or <code>right</code> in the theorem name refers to the <code>FG</code> submodule or to the submodule that you're taking an infimum with.</p>",
        "id": 569437694,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1769072627
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/287929-mathlib4/topic/inf.2Fsup.20lemmas.20for.20upwards.2Fdownwards.20closed.20classes/near/569437319\">said</a>:</p>\n<blockquote>\n<p>I feel like these lemmas set a bad precedent. Do we also want versions for <code>sInf</code>/<code>sSup</code>? Then surely we also want versions for <code>iInf</code>/<code>iSup</code>, as well as <code>biInf</code>/<code>biSup</code> and now we're writing substantial boilerplate for something that's entirely obvious.</p>\n</blockquote>\n<p>To get around the precedent argument we say that these lemmas need to be justified by how often they get used. Then neither all the other sSup/iSup/... lemmas nor analogous lemmas in other situations would follow automatically.</p>\n<p>Being \"obvious\" feels not like a good measure - many things in mathlib are obvious.</p>",
        "id": 569455598,
        "sender_full_name": "Martin Winter",
        "timestamp": 1769078210
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"950805\">Martin Winter</span> <a href=\"#narrow/channel/287929-mathlib4/topic/inf.2Fsup.20lemmas.20for.20upwards.2Fdownwards.20closed.20classes/near/569431783\">said</a>:</p>\n<blockquote>\n<p>I decided to not push for these in my PRs, but would pick this up again if it becomes too annoying in future PRs to not have them. I also understand that having these lemmas would set a precedent for similar situations. For this reason I would like to have this discussed now, perhaps in order to understand why we absolutely do not want to have them.</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"950805\">Martin Winter</span> <a href=\"#narrow/channel/287929-mathlib4/topic/inf.2Fsup.20lemmas.20for.20upwards.2Fdownwards.20closed.20classes/near/569455598\">said</a>:</p>\n<blockquote>\n<p>To get around the precedent argument we say that these lemmas need to be justified by how often they get used. Then neither all the other sSup/iSup/... lemmas nor analogous lemmas in other situations would follow automatically.</p>\n</blockquote>\n<p>I think this is a good idea. If you need these a lot, and you can golf many bits of proofs, then we should reconsider.</p>",
        "id": 569496492,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1769090347
    },
    {
        "content": "<p>Thanks for everybody's feedback. I will include them in future PRs if they turn out helpful. I will point here for the discussion.</p>",
        "id": 569946930,
        "sender_full_name": "Martin Winter",
        "timestamp": 1769339266
    }
]