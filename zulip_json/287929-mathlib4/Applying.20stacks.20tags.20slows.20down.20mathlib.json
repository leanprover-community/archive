[
    {
        "content": "<p>Looking at <code>FieldTheory/SeparablyGenerated.lean</code> from <a href=\"https://github.com/leanprover-community/mathlib4/pull/30998\">#30998</a>, one striking thing are some slow declarations towards the end. Using <code>set_option profiler true</code>, I get a quite surprising outcome: the bottleneck is applying the stacks attribute.</p>\n<ul>\n<li><code>exists_isTranscendenceBasis_and_isSeparable_of_linearIndepOn_pow_of_adjoin_eq_top</code> yields \"attribute application took 4.28s\", with the only attribute being <code>@[stacks 0H71]</code></li>\n<li><code>exists_isTranscendenceBasis_and_isSeparable_of_linearIndepOn_pow_of_fg</code> (right afterwards) takes 850ms to apply <code>@[stacks 030W \"(2) â‡’ (1) finitely genenerated case\"]</code></li>\n</ul>\n<p>Any ideas why this is so slow? <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> I believe you initially wrote this.</p>",
        "id": 560334969,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1764147099
    },
    {
        "content": "<p>Maybe this is being measured weirdly due to async elaboration? <code>@[stacks]</code> modifies the docstring, so one possibility is it has to wait for the whole declaration to be elaborated before the docstring becomes available (not sure that this is indeed the case, but it seems possible).</p>",
        "id": 560339120,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1764148321
    }
]