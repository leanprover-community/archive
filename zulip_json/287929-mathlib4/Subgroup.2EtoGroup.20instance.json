[
    {
        "content": "<p>The toGroup instance in Subgroup is defined as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">toGroup</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">fast_instance</span><span class=\"bp\">%</span>\n<span class=\"w\">  </span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">coe_injective</span><span class=\"bp\">.</span><span class=\"n\">group</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>Here, H is a Subgroup G, not a Type u, so why is Group H a valid instance? It seems like H can also be regarded as Type u.</p>",
        "id": 509609176,
        "sender_full_name": "Lingwei Peng (彭灵伟)",
        "timestamp": 1743574419
    },
    {
        "content": "<p>Indeed it can, using the CoeSort instance</p>",
        "id": 509612108,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1743575765
    },
    {
        "content": "<p>You can read <a href=\"https://leanprover-community.github.io/mathematics_in_lean/C08_Groups_and_Rings.html#subgroups\">https://leanprover-community.github.io/mathematics_in_lean/C08_Groups_and_Rings.html#subgroups</a> for more information about that.</p>",
        "id": 509617940,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1743577969
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Subgroup.2EtoGroup.20instance/near/509612108\">said</a>:</p>\n<blockquote>\n<p>Indeed it can, using the CoeSort instance</p>\n</blockquote>\n<p>Are you saying that:<br>\n• The instance SetLike (Subgroup G) G allows Subgroup to be treated as a Set;<br>\n• The instance CoeSort (Set α) (Type u) enables a Set to be viewed as Type u;<br>\n• Therefore, H can also be regarded as Type u?</p>",
        "id": 509621663,
        "sender_full_name": "Lingwei Peng (彭灵伟)",
        "timestamp": 1743579231
    },
    {
        "content": "<p>Not quite, your middle step is wrong. Instead it's that we have an instance <code>[SetLike A B] → CoeSort A (Type _)</code>. See <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SetLike.instCoeSortType#doc\">docs#SetLike.instCoeSortType</a>.</p>",
        "id": 509625484,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1743580382
    },
    {
        "content": "<p>Oh, now it makes complete sense. Thank you very much.</p>",
        "id": 509626491,
        "sender_full_name": "Lingwei Peng (彭灵伟)",
        "timestamp": 1743580697
    }
]