[
    {
        "content": "<p>What's the right way to create a deprecated alias for a lemma with <code>to_additive</code>?</p>",
        "id": 475150337,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1728253169
    },
    {
        "content": "<p><code>@[to_additive (attr := deprecated (since := \"2024-10-07\"))]</code></p>",
        "id": 475153313,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1728254017
    },
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/actions/runs/11204670478/job/31143326980?pr=17472\">https://github.com/leanprover-community/mathlib4/actions/runs/11204670478/job/31143326980?pr=17472</a> (see <a href=\"https://github.com/leanprover-community/mathlib4/blob/030f8a44964cdf7c7dbcae23858a95da4ec3670f/Mathlib/Topology/Algebra/ContinuousMonoidHom.lean#L146\">code</a>) it fails to add a docstring.</p>",
        "id": 475153563,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1728254191
    },
    {
        "content": "<p>I tried to split it into parts in the latest commit in <a href=\"https://github.com/leanprover-community/mathlib4/pull/17472\">#17472</a>, not sure if it works.</p>",
        "id": 475153628,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1728254233
    },
    {
        "content": "<p>(and it looks worse)</p>",
        "id": 475153635,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1728254239
    },
    {
        "content": "<p>Oh, I see. <code>to_additive</code> indeed doesn't copy docstrings by itself...</p>",
        "id": 475267032,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1728297313
    },
    {
        "content": "<p>I \"fixed\" by using <code>@[deprecated] alias</code> on both defs, then adding <code>to_additive existing</code> while turning off a linter.</p>",
        "id": 475287321,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1728304584
    },
    {
        "content": "<p>See <a href=\"https://github.com/leanprover-community/mathlib4/pull/17472/files#diff-4309635e878709d756b5fc7f46dcf0868bdae0ba1aa5b7e94d169e235d3da362R146\">https://github.com/leanprover-community/mathlib4/pull/17472/files#diff-4309635e878709d756b5fc7f46dcf0868bdae0ba1aa5b7e94d169e235d3da362R146</a></p>",
        "id": 475287430,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1728304621
    },
    {
        "content": "<p>One more issue: while <code>@[deprecated] alias name := other_name</code> generates <code>@[deprecated other_name] theorem name := _</code>, <code>@[to_additive (attr := deprecated)]</code> creates a nameless deprecation.</p>",
        "id": 475886345,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1728485566
    },
    {
        "content": "<p>So, if someone uses the lemma, they don't see the preferred name in the warning.</p>",
        "id": 475886505,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1728485604
    }
]