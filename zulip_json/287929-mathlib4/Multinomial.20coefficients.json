[
    {
        "content": "<p>Multinomial coefficients are defined in mathlib by <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.multinomial#doc\">docs#Nat.multinomial</a>, that constructs <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mo>∑</mo><mrow><mi>i</mi><mo>∈</mo><mi>s</mi></mrow></msub><msub><mi>a</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">!</mo><mi mathvariant=\"normal\">/</mi><msub><mo>∏</mo><mrow><mi>i</mi><mo>∈</mo><mi>s</mi></mrow></msub><msub><mi>a</mi><mi>i</mi></msub><mo stretchy=\"false\">!</mo></mrow><annotation encoding=\"application/x-tex\"> (\\sum_{i\\in s} a_i)!/\\prod_{i\\in s} a_i! </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0771em;vertical-align:-0.3271em;\"></span><span class=\"mopen\">(</span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.162em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3271em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)!</span><span class=\"mord\">/</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∏</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.162em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">∈</span><span class=\"mord mathnormal mtight\">s</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3271em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">!</span></span></span></span>, for some <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"bold\">N</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbf N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6861em;\"></span><span class=\"mord mathbf\">N</span></span></span></span>-valued function <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\"> a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span>, and some finite set <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">s</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">s</span></span></span></span>.</p>\n<p>In our work on divided powers, <span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span> and  fI need to access multinomial coefficients so that  the multinomial number associated with the set <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mn>1</mn><mo separator=\"true\">,</mo><mn>2</mn><mo separator=\"true\">,</mo><mn>2</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{1,2,2\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mclose\">}</span></span></span></span> of natural numbers is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn><mo stretchy=\"false\">!</mo><mi mathvariant=\"normal\">/</mi><mn>1</mn><mo stretchy=\"false\">!</mo><mn>2</mn><mo stretchy=\"false\">!</mo><mn>2</mn><mo stretchy=\"false\">!</mo><mo>=</mo><mn>30</mn></mrow><annotation encoding=\"application/x-tex\">5!/1!2!2! = 30</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">5</span><span class=\"mclose\">!</span><span class=\"mord\">/1</span><span class=\"mclose\">!</span><span class=\"mord\">2</span><span class=\"mclose\">!</span><span class=\"mord\">2</span><span class=\"mclose\">!</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">30</span></span></span></span>.</p>\n<p>We develop that notion in <a href=\"https://github.com/leanprover-community/mathlib4/pull/35830\">#35830</a> but reached a name-conflict since <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Multiset.multinomial#doc\">docs#Multiset.multinomial</a> already exists, and gives <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn></mrow><annotation encoding=\"application/x-tex\">3</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span></span></span></span> in that case. <br>\nOur solution has been to name our coefficients <code>Multiset.plurinomial</code>, trading a Greek root for a Latine one.  </p>\n<p>However, in their review, <span class=\"user-mention\" data-user-id=\"459227\">@Violeta Hernández</span>  suggested that we'd rather name our coefficients <code>Multiset.plurinomial</code> and rename <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Multiset.multinomial#doc\">docs#Multiset.multinomial</a> as <code>Multiset.countPerms</code>. — Indeed, it counts the number of lists that give rise to the given multiset.</p>\n<p>We're of course ready to do that change but felt natural to have a more general discussion here.</p>",
        "id": 576314094,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1772213003
    },
    {
        "content": "<p>I also think this would be a great change, I have an old incomplete draft PR doing this <a href=\"https://github.com/leanprover-community/mathlib4/pull/31601\">#31601</a> (the main motivation of that PR being a version of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.choose#doc\">docs#Nat.choose</a> with an easy <code>positivity</code> plugin), feel free to steal lemmas from that if needed.</p>\n<p>In my PR I named this function <code>Nat.multinomial'</code>, which I think tells me that this is the function I expected \"multinomial\" to name, and so I think this renaming is appropriate.</p>",
        "id": 576343071,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1772223579
    }
]