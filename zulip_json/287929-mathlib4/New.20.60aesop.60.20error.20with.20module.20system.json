[
    {
        "content": "<p>After merging master in <a href=\"https://github.com/leanprover-community/mathlib4/pull/32852\">#32852</a>, I get a new error</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">aesop</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">norm</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Unknown</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"w\"> </span><span class=\"ss\">`_private.Mathlib.Algebra.Order.Support</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">.</span><span class=\"n\">Submonoid</span><span class=\"bp\">.</span><span class=\"n\">mem_supportSubgroup</span><span class=\"bp\">._</span><span class=\"n\">simp_4</span><span class=\"bp\">`</span>\n</code></pre></div>\n<p>I suspect this is something to do with the interaction of the new module system, <code>to_additive</code>, and <code>aesop</code>, but I don't know how to isolate the issue let alone suggest a fix. </p>\n<p>My reasoning:</p>\n<ol>\n<li><code>Submonoid.mem_supportSubgroup</code> works fine as an <code>aesop</code> rule in the file it's defined in.</li>\n<li><code>Submonoid.mem_supportSubgroup</code> breaks any <code>aesop</code> proofs that attempt to invoke it in downstream files.</li>\n<li><code>Submonoid.mem_supportSubgroup</code> is registered as an <code>aesop</code> rule using <code>@[to_additive (attr := aesop simp)]</code>. When it is registered without using <code>to_additive</code>, it works fine in downstream files.</li>\n<li><code>Submonoid.mem_supportSubgroup</code> works fine in my personal repository, where I don't have modules enabled.</li>\n</ol>\n<p>I tried using <code>set_option backward.privateInPublic true</code> but that didn't help.</p>",
        "id": 564848133,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1766257728
    },
    {
        "content": "<p>Update never mind I was using <code>set_option backward.privateInPublic true</code> wrong. It fixes the issue when applied to the rule declaration (as opposed to the rule use).</p>",
        "id": 564849100,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1766259037
    }
]