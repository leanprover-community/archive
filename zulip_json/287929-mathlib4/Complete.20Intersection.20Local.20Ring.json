[
    {
        "content": "<p>Hello, we have a new plan about working on complete intersection ring, here is a small issue here about the definition. For a noetherian local ring <code>R</code>, there are two definitions we currently know.<br>\nFirst is purely self contained by defining <code>\\epsilon_1(R)</code> as the dimension of <code>H_1</code> of Koszul complex of a set of minimal generators of the unique maximal ideal over residue field, and define complete intersection as the ring making <code>\\epsilon_1(R) ≥ dimension of cotangent space - dim(R)</code> is equality. The problem with this definition is that it is hard to use and we don't have Koszul complex...<br>\nThe second is more straight forward, its completion is isomphic to quotient of a regular local ring by regular sequence, however the problem is how to arrange the data, I think either stated as exist such ring or make that ring just a part of the data isn't good enough.</p>",
        "id": 542246431,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1759230774
    },
    {
        "content": "<p>By the way, with Cohen Macaulay ring developed, we are trying to work on Gorenstein ring. If we have a good definition of complete intersection, we are able to finish the chain of noetherian local ring<code>regular local =&gt; complete intersection =&gt; Gorestein =&gt; Cohen Macaulay =&gt; universal catenary</code>.</p>",
        "id": 542247123,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1759230994
    },
    {
        "content": "<p>We settled the definition few days ago, here is an announce of our plan:<br>\n1: the definition is based on <code>epsilon_1</code><br>\n2: since we need to deal with completion in ci ring, we found some missing instance about <code>IsNoethrianRing</code> and <code>IsLocalRing</code>, which is not very trivial, this might need a few PRs.<br>\n3: Koszul complex is being  constructed using exterior power by <span class=\"user-mention\" data-user-id=\"750070\">@Wang Jingting</span> <br>\n4: We need a corollary of Cohen Structure Theorem, which says any complete local ring is quotient of regular local ring, do anyone have suggestions about how to proceed? (This part haven't started yet)<br>\nMost of our work will be gathered into the following branch in the process<br>\n<a href=\"https://github.com/Thmoas-Guan/mathlib4_fork/tree/Complete-Intersection-Ring\">https://github.com/Thmoas-Guan/mathlib4_fork/tree/Complete-Intersection-Ring</a></p>",
        "id": 570247647,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1769498314
    },
    {
        "content": "<p>We finished formalizing basic properties of complete intersection local ring. See our draft <a href=\"https://github.com/leanprover-community/mathlib4/pull/34913\">#34913</a>, depending on some of our previous work on CM ring and regular local ring. The contents follows <em>Commutative Ring Theory</em> Matsumura<br>\nWe are currently having some sorries in the following areas:<br>\n1: Koszul complex and cocomplex.<br>\n2: Noetherian/Local of adic completion<br>\n3: Cohen structure theorem.</p>",
        "id": 572380610,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1770385661
    },
    {
        "content": "<p>I met some problems when formalizing Cohen Structure Theorem.<br>\nMy current approach follows the proof in Stacks Project, if anyone have better idea please let me know, thanks.<br>\nThe technical problems are two of its lemmas.<br>\n1: it is in lemma 10.159.1, for monogenic extension things are trivial, given <code>(R,m,k)</code>, <code>K</code> an extension of <code>k</code>, it proceed by giving <code>K</code> a total order then do induction. Things work fine when <code>x</code> in <code>K</code> has predecessor, the problem is I need to take colimit when there isn't one, how should I state the induction hypothesis to make things work? Since I need the morphisms between previously constructed rings, but it involves the way we construct it.<br>\n2: for lemma 10.160.7, since I doesn't know in what degree formally smooth is developed, how should I proceed? (This seems to be a well known result used in many proofs I saw).</p>",
        "id": 572781572,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1770644555
    },
    {
        "content": "<p>For 10.159.1 <a href=\"https://stacks.math.columbia.edu/tag/03C2\">(link)</a> just use Zorn's lemma (this would be valid in Lean, the set-theoretic objection which de Jong has is not a problem in Lean).</p>",
        "id": 572795991,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1770647581
    },
    {
        "content": "<p>OK, thanks, I'll try to figure it out.</p>",
        "id": 572803503,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1770649042
    },
    {
        "content": "<p>Let me run this through to check it's OK. For my own sanity let's restrict to the case where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi></mrow><annotation encoding=\"application/x-tex\">R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> are in the same universe <code>Type u</code> (you can probably reduce to this case by ULifting). Then the category is \"large\", so its objects are in <code>Type u</code> but the collection <code>C</code> of all of them has <code>C : Type (u + 1)</code>.  To apply Zorn to get a maximal element it will not be good enough to show that all chains indexed by <code>J : Type u</code> have an upper bound -- a counterexample would be the class of all ordinals: in set-theoretic speak, any set of ordinals has an upper bound (their union) but there is no largest ordinal. So one would have to allow chains indexed by <code>J : Type (u + 1)</code> and now the problem is that the limit is no longer in <code>C</code>. So I think I am going to have to retract my assertion :-/</p>",
        "id": 572813188,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1770651109
    },
    {
        "content": "<p>The triples form a category which is not a preorder (there may be multiple morphisms between two objects), so Zorn's lemma isn't immediately applicable and you need <a href=\"https://gist.github.com/ChrisHughes24/e97dcf6be2b0e67449ab0fa1f5540d58\">categorical Zorn</a> or follow what I did for <a href=\"https://gist.github.com/alreadydone/daa9760056383d31669755bbb41e2695\">algebraic closure</a>.</p>\n<p>For the transfinite recursion approach, for every element x in the well-ordered set, you need to construct a functor from <code>Set.Iio x</code> to the category of local rings with flat local ring maps, and you do this by induction on <code>x</code>. (You can state this using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=DirectedSystem#doc\">docs#DirectedSystem</a>, no need of category theory.) You probably want to adjoin a top element to the well-ordered set like I do in <a href=\"https://github.com/leanprover-community/mathlib4/pull/18067/changes\">#18067</a>.</p>",
        "id": 572837249,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1770656411
    },
    {
        "content": "<p>(moved)</p>",
        "id": 573964579,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1771149108
    },
    {
        "content": "<p>Sorry that I haven't solve 10.159.1 yet, but I have in mind how to proceed, I'll try working on it anyway.</p>",
        "id": 573966413,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1771151171
    },
    {
        "content": "<p>I currently opened some preliminary PRs:<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/35337\">#35337</a>: span rank of <code>M</code> over local ring <code>(R,m)</code> is the dimension of <code>M/mM</code> over <code>R/m</code><br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/35347\">#35347</a>: when ideal fg, adic completion is complete<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/35348\">#35348</a>: span rank of maximal ideal of adic completion</p>",
        "id": 573983505,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1771168458
    },
    {
        "content": "<p>The next step would be proving Noetherian, I currently follow lemma <a href=\"https://stacks.math.columbia.edu/tag/05GH\">10.97.5</a>, however this involves associated graded ring (even though we have it in some PR, this might not be a good idea), any suggestions for this?</p>\n<p>Furthermore is another problem here. I want to prove that for Noetherian local ring, dimension of its completion is equal to dimension of itself. I only know the proof via length of <code>m^n/m^(n+1)</code> (named Poincare series?), however this is not how we proceed in mathlib, how should I prove this in the current setup?</p>",
        "id": 573983555,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1771168511
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/34936\">#34936</a> also proves that adic completion is complete.</p>",
        "id": 573984017,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1771169040
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Complete.20Intersection.20Local.20Ring/near/573984017\">发言道</a>：</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/34936\">#34936</a> also proves that adic completion is complete.</p>\n</blockquote>\n<p>Sorry for not finding it carfully.  now what should we do?</p>",
        "id": 573984948,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1771169873
    },
    {
        "content": "<p>The easiest way is probably if you can help review that PR and we can try to get that into mathlib soon.</p>",
        "id": 573987530,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1771171980
    },
    {
        "content": "<p>And then you can PR the rest of your results.</p>",
        "id": 573987539,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1771171991
    },
    {
        "content": "<p>I closed mine for now, most of our approach really over laps.</p>",
        "id": 574022993,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1771206379
    },
    {
        "content": "<p>Hi Nailin! I'm sorry that our work overlapped, please do review <a href=\"https://github.com/leanprover-community/mathlib4/pull/34936\">#34936</a> when you have a chance! Once that is merged, I’d look forward to seeing the rest of your results PR'd as Andrew mentioned</p>",
        "id": 574415211,
        "sender_full_name": "Bingyu Xia",
        "timestamp": 1771378476
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"758816\">Bingyu Xia</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Complete.20Intersection.20Local.20Ring/near/574415211\">发言道</a>：</p>\n<blockquote>\n<p>Hi Nailin! I'm sorry that our work overlapped, please do review <a href=\"https://github.com/leanprover-community/mathlib4/pull/34936\">#34936</a> when you have a chance! Once that is merged, I’d look forward to seeing the rest of your results PR'd as Andrew mentioned</p>\n</blockquote>\n<p>There is nothing to be sorry about, since I didn't saw it. But sorry that I am currently busy working on Cohen structure  theorem, I'll have a look when I have time.</p>",
        "id": 574416362,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1771379313
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Complete.20Intersection.20Local.20Ring/near/572837249\">发言道</a>：</p>\n<blockquote>\n<p>The triples form a category which is not a preorder (there may be multiple morphisms between two objects), so Zorn's lemma isn't immediately applicable and you need <a href=\"https://gist.github.com/ChrisHughes24/e97dcf6be2b0e67449ab0fa1f5540d58\">categorical Zorn</a> or follow what I did for <a href=\"https://gist.github.com/alreadydone/daa9760056383d31669755bbb41e2695\">algebraic closure</a>.</p>\n<p>For the transfinite recursion approach, for every element x in the well-ordered set, you need to construct a functor from <code>Set.Iio x</code> to the category of local rings with flat local ring maps, and you do this by induction on <code>x</code>. (You can state this using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=DirectedSystem#doc\">docs#DirectedSystem</a>, no need of category theory.) You probably want to adjoin a top element to the well-ordered set like I do in <a href=\"https://github.com/leanprover-community/mathlib4/pull/18067/changes\">#18067</a>.</p>\n</blockquote>\n<p>The only two obstacles left are :<br>\n1: separable extension is formally etale hence formally smooth, the problem here is separable here needs to be possibly transcendental, so we may need to refactor <code>IsSeparable</code>?<br>\n2: The transfinite recrusion approach in <a href=\"https://stacks.math.columbia.edu/tag/03C2\">10.159.1</a> is still difficult to formalize, since it can do only the following work: we have a functor from <code>Set.Iio x</code> to some <code>CommAlgCat R</code> with flat morphisms and appropriate residue extension, then we can extend it to <code>Set.Ico x</code>. How should I proceed?</p>",
        "id": 576410369,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1772273236
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"224323\">@Junyan Xu</span>  Where can I use the categorical Zorn you mentioned?<br>\nFor the algebraic closure approach, do you mean by construct the corresponding type of <code>ale_extension</code>? Sorry that I didn't understand it very clearly, could you please explain a bit more? Thanks.</p>",
        "id": 576410926,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1772273761
    },
    {
        "content": "<p>(deleted, misread the problem)</p>",
        "id": 576412159,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1772274961
    },
    {
        "content": "<p>I have not checked the details, but using a suitable category and a suitable <code>SuccStruct</code> the construction in these files may also be useful <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/SmallObject/Iteration/Basic.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/SmallObject/Iteration/Basic.html</a> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/SmallObject/Iteration/Nonempty.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/CategoryTheory/SmallObject/Iteration/Nonempty.html</a></p>",
        "id": 576412866,
        "sender_full_name": "Joël Riou",
        "timestamp": 1772275601
    },
    {
        "content": "<p>Thanks for the suggestion, however in this case, how to define succ might be a problem? Also, how can I make sure there is an element making it reach the whole field? I'll try to have some investigation on this.</p>",
        "id": 576413736,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1772276426
    },
    {
        "content": "<p>Beside these, for the noetherianess of <code>AdicCompletion</code>, do anyone have idea other than using associated graded ring as in <a href=\"https://stacks.math.columbia.edu/tag/05GH\">Stacks 05GH</a>? If not, I have to dig out associated graded ring written long ago.</p>",
        "id": 576413745,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1772276437
    },
    {
        "content": "<p>Given a local ring <code>R</code> with residue field <code>k</code>, and an extension <code>K/k</code>, the rough idea would be to introduce a category of local flat <code>R</code>-algebras <code>A</code> equipped with an embedding of the residue field of <code>A</code> into <code>K</code>. The <code>SuccStruct</code> would take such an <code>A</code>, and do nothing when the residue field of <code>A</code> is already the whole <code>K</code>, and otherwise choose <code>a : K</code> not in the residue field of <code>A</code>, take a suitable localization of <code>A[X]</code> or <code>A[X]/(P)</code> depending on whether <code>a</code> is algebraic or not. If you iterate this over an infinite successor cardinal that is bigger than the cardinal of <code>K</code>, we should get an <code>A</code> whose residue field is <code>K</code>. (But as I said, this is only a sketch...)</p>",
        "id": 576414152,
        "sender_full_name": "Joël Riou",
        "timestamp": 1772276788
    }
]