[
    {
        "content": "<p>Currently <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Finset/Sort.html#Finset.sort\">Finset.sort</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Multiset/Sort.html#Multiset.sort\">Multiset.sort</a> take a [<a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#DecidableRel\">DecidableRel</a> r] [<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Defs/Unbundled.html#IsTrans\">IsTrans</a> α r] [<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Defs/Unbundled.html#IsAntisymm\">IsAntisymm</a> α r] [<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Defs/Unbundled.html#IsTotal\">IsTotal</a> α r] relation as an argument. It seems that <a href=\"https://loogle.lean-lang.org/?q=Finset.sort+_+_\">in practice, when this relation is explicitly given, it's almost always the less-than-or-equal relation</a>.</p>\n<p>Do people think it would make sense to rename <code>Finset.sort</code> and <code>Multiset.sort</code> to something like <code>sortBy</code> so that <code>sort</code> itself can be used specifically for less-than-or-equals with <code>LinearOrder</code>? I think this would be easier to remember and would also potentially make mathlib more consistent with languages like rust or python, where I think functions named <code>sort</code> typically assume a &lt;= instance.</p>",
        "id": 532390070,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1754089180
    },
    {
        "content": "<p>I think while <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.mergeSort#doc\">docs#List.mergeSort</a> has the signature it does, consistency here is probably least confusing</p>",
        "id": 532390973,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754089840
    },
    {
        "content": "<p>Maybe the answer is to use a default argument for <code>r</code> as that does?</p>",
        "id": 532390987,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754089859
    },
    {
        "content": "<p>I was going to say that a similar renaming could be done on mergeSort, but the default argument idea is interesting.</p>",
        "id": 532391603,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1754090342
    },
    {
        "content": "<p>Is there a reason why the default argument on <code>mergeSort</code> uses <code>by exact fun a b =&gt; a ≤ b</code> instead of simply <code>fun a b =&gt; a ≤ b</code>?</p>",
        "id": 532392020,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1754090644
    },
    {
        "content": "<p>because you don't know if your type has a <code>≤</code> so you want to delay elaboration from compile time to <del>runtime</del> use time</p>",
        "id": 532392197,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754090783
    },
    {
        "content": "<p>if you do simply do <code>fun a b =&gt; a ≤ b</code> then you will get \"failed to synthesize <code>LE α</code>\"</p>",
        "id": 532392265,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754090831
    },
    {
        "content": "<p>I was concerned it was something hacky like that.</p>",
        "id": 532392279,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1754090839
    },
    {
        "content": "<p>I guess we don't have a better way to express wanting to delay elaboration?</p>",
        "id": 532392422,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1754090935
    },
    {
        "content": "<p>Note that this isn't delaying elaboration in the usual meaning of <code>by exact</code>, this is <code>(x := y)</code> being <code>optParam</code> while <code>(x := by exact y)</code> being <code>autoParam</code></p>",
        "id": 532393754,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754091994
    },
    {
        "content": "<p>That is, <code>(x := by exact y)</code> and <code>(x := (by exact y))</code> mean very different things</p>",
        "id": 532393785,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754092018
    },
    {
        "content": "<p><code>optParam</code> stores the value and <code>autoParam</code> stores the syntax object which will be elaborated at the use site</p>",
        "id": 532393923,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754092125
    },
    {
        "content": "<p>Is there any way to communicate that I want autoParam without using <code>by</code> or <code>exact</code>? If the point of saying <code>by exact</code> is just to take advantage of some tactic mode thing that makes it turn out autoparam, then it would be clearer to the reader what is happening if I could just say something like <code>foo (x : α := autoParam(y))</code></p>",
        "id": 532394154,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1754092298
    },
    {
        "content": "<p>Incidentally, does the leanguage reference have an entry for default arguments? I have tried looking for information about how that works before, but haven't found it.</p>",
        "id": 532394259,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1754092384
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Redefine.20.7BFin.2FMulti.7Dset.2Esort.20to.20take.20linear.20order.3F/near/532393923\">said</a>:</p>\n<blockquote>\n<p><code>optParam</code> stores the value and <code>autoParam</code> stores the syntax object which will be elaborated at the use site</p>\n</blockquote>\n<p>Would you mind if I added this exact sentence to the docstring for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=autoParam#doc\">docs#autoParam</a> ?</p>",
        "id": 532394468,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1754092562
    },
    {
        "content": "<p>And I guess per the docs, the syntax I am looking for is actually <code>foo (x : autoParam α y)</code></p>",
        "id": 532394631,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1754092700
    },
    {
        "content": "<p>But it's really <code>autoParam α tacticSyntaxForY</code></p>",
        "id": 532395829,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754093490
    },
    {
        "content": "<p>I've sometimes used this with the &gt;= relation, and I think I've used it for an order without an LE in the past but I can't recall what exactly... I think the autoParam idea sounds great</p>",
        "id": 532396569,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1754094077
    },
    {
        "content": "<p>One downside of the autoParam is that it makes it much easier to accidentally state theorems without passing the argument, and ending up with something less general as a result</p>",
        "id": 532397643,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754094989
    },
    {
        "content": "<p>That's a general \"downside\" with autoParams, right? Not specific to this situation</p>",
        "id": 532398086,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1754095374
    },
    {
        "content": "<p>I guess the RFC here would be a version of autoParams which are disabled in the context of a <code>theorem</code> signature</p>",
        "id": 532398298,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754095553
    },
    {
        "content": "<p>Maybe that's lintable</p>",
        "id": 532398325,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754095573
    }
]