[
    {
        "content": "<p>We have both <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Category/CommAlgCat/Basic.html#CommAlgCat\">CommAlgCat</a> and Under R, and they are equivalent categories under <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Category/CommAlgCat/Basic.html#commAlgCatEquivUnder\">commAlgCatEquivUnder</a>. There are essentially two difference that I can think of:</p>\n<ol>\n<li>CommAlgCat is universe polymorphic, i.e. the algebra can belong to a different universe than the base ring.</li>\n<li>CommAlgCat stores the Algebra instance whereas Under R just stores the ring hom, which would lead to a round trip being not defeq (because the SMul instance in the Algebra can be not defeq to <code>algebraMap _ _ r * x</code>!)</li>\n</ol>\n<p>Are these two the main reasons why we have two idioms?</p>",
        "id": 528949655,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752617445
    },
    {
        "content": "<p>Yes, but your second point is the main reason.</p>",
        "id": 528963060,
        "sender_full_name": "Christian Merten",
        "timestamp": 1752626285
    },
    {
        "content": "<p>Either the module or definition docstring should definitely explain this</p>",
        "id": 529049661,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1752669367
    },
    {
        "content": "<p>It even looks like I asked for it to be explained in the implementation notes of the file during review, but that never happened</p>",
        "id": 529049832,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1752669418
    }
]