[
    {
        "content": "<p>I'm changing <code>show</code> to its documented behavior in <a href=\"https://github.com/leanprover/lean4/pull/7395\">lean4#7395</a>; however, as a consequence \"trivial\" <code>show</code>s (i.e. <code>show</code>s that don't change the goal) get flagged by the unused tactic linter. Should <code>show</code> be added as an exception for this linter then to allow for <code>show</code>s as \"checkpoints\"? Example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">UnusedTactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_assoc</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- warns: ... tactic does nothing</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">add_comm</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 523633408,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749673492
    },
    {
        "content": "<p>In the online editor, there is no warning.</p>",
        "id": 523633872,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749673705
    },
    {
        "content": "<p>Yes, again, the warning occurs with this PR; the warning behavior can be compared to <code>change</code> today</p>",
        "id": 523633998,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749673757
    },
    {
        "content": "<p>Still, I think that it is a good idea to know when <code>show</code> is literally not doing anything, or when it is doing something.</p>",
        "id": 523634110,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749673808
    },
    {
        "content": "<p>The <code>unusedTactic</code> linter has a <em>very</em> strict notion of not doing anything.  For instance, <code>refine ?_</code> is doing something, according to the linter.</p>",
        "id": 523634426,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749673926
    },
    {
        "content": "<p>Yeah, the change with this PR for the unused tactic linter is that it no longer works like a <code>refine</code> but rather a <code>change</code></p>",
        "id": 523634556,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749673990
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/unused.20tactic.20linter.20for.20.60show.60/near/523634110\">said</a>:</p>\n<blockquote>\n<p>Still, I think that it is a good idea to know when <code>show</code> is literally not doing anything, or when it is doing something.</p>\n</blockquote>\n<p>Why should a <code>show</code> need to change the goal? It could be a reminder of what's being shown.</p>",
        "id": 523634682,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749674055
    },
    {
        "content": "<p>Maybe a better example that I found on mathlib (no attempt on making it an mwe, just for illustration):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">preimage_asSubtype</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→.</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">asSubtype</span><span class=\"w\"> </span><span class=\"bp\">⁻¹'</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"bp\">⁻¹'</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">preimage</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_preimage</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">mem_setOf_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">PFun</span><span class=\"bp\">.</span><span class=\"n\">asSubtype</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">PFun</span><span class=\"bp\">.</span><span class=\"n\">mem_preimage</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">fn</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">val</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span>\n<span class=\"w\">    </span><span class=\"n\">Iff</span><span class=\"bp\">.</span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">⟨_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Part</span><span class=\"bp\">.</span><span class=\"n\">get_mem</span><span class=\"w\"> </span><span class=\"bp\">_⟩</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ys</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">fxy</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">fn</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">property</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Part</span><span class=\"bp\">.</span><span class=\"n\">get_mem</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">      </span><span class=\"n\">Part</span><span class=\"bp\">.</span><span class=\"n\">mem_unique</span><span class=\"w\"> </span><span class=\"n\">fxy</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">ys</span>\n</code></pre></div>\n<p>The unused tactic linter warning implies that you <em>should</em> remove the <code>show</code> here.</p>",
        "id": 523634719,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749674075
    },
    {
        "content": "<p>But that's maybe not fair, since the <code>show</code> here helps for proof readability and to \"show\" intermediate states.</p>",
        "id": 523634846,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749674145
    },
    {
        "content": "<p>This <code>show</code> tactic is friendlier than <code>guard_target</code>, and it has a more sophisticated elaboration strategy that's more likely to succeed. The latter tactic is allowed by the linter, right?</p>",
        "id": 523634928,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749674186
    },
    {
        "content": "<p>My personal opinion is that when <code>show</code> is actually not doing anything, it should be flagged.</p>",
        "id": 523634938,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749674192
    },
    {
        "content": "<p><code>guard_target</code> <em>should</em> (and I think is) allowed.</p>",
        "id": 523634988,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749674213
    },
    {
        "content": "<p>But that tactic is expected to not change the goal in any way, so calling it means \"I know that this is not changing anything, but I still want to do it\".</p>",
        "id": 523635048,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749674241
    },
    {
        "content": "<p>Can you substantiate that opinion? There's a clear benefit to discretionary shows.</p>",
        "id": 523635049,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749674241
    },
    {
        "content": "<p>(Oops, didn't see your substantiation.)</p>",
        "id": 523635102,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749674274
    },
    {
        "content": "<p>I would say that if you want to guarantee that the goal is something, you should use <code>guard_target</code>, not <code>show</code>.</p>",
        "id": 523635110,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749674277
    },
    {
        "content": "<p>I view <code>show</code> as a means to change the goal to something defeq to what is already there, <em>but not identical</em>.</p>",
        "id": 523635177,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749674314
    },
    {
        "content": "<p>That's what <code>change</code> is for though, isn't it?</p>",
        "id": 523635278,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749674362
    },
    {
        "content": "<p>Here is an example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">UnusedTactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">change</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"c1\">-- useless, flagged</span>\n<span class=\"w\">  </span><span class=\"n\">change</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"c1\">-- not useless, not flagged</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 523635289,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749674368
    },
    {
        "content": "<p>I think I remember the argument about change being linted is that change sounds like it should change the goal.</p>",
        "id": 523635419,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749674433
    },
    {
        "content": "<p>I personally would not treat <code>change</code> and <code>show</code> differently and I think that the purpose of the <code>unusedTactic</code> linter is to let you know when some tactic can be omitted, unless the tactic is there to serve a goal that is not making progress towards a proof.</p>",
        "id": 523635947,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749674724
    },
    {
        "content": "<p>The thing about <code>guard_target</code> though is that it's more for tests (it's not even used in mathlib outside of <code>MathlibTest</code>) and is generally more awkward to write.</p>",
        "id": 523636465,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749675008
    },
    {
        "content": "<p>Besides, if you really wanted to make sure it has an effect, you can always use <code>change</code></p>",
        "id": 523636845,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749675197
    },
    {
        "content": "<p>Okay, well, how should I then go about fixing the warnings in mathlib? Making <code>show</code> an exception was the original but should I instead use <code>guard_target</code>? Remove these tactic calls altogether?</p>",
        "id": 523639816,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749676518
    },
    {
        "content": "<p>As I think more about this, I think that my personal view is shifting to thinking that <code>show</code> and <code>change</code> should be merged into a single tactic.  I personally do not see too much value in adding <code>show</code> midproof to help legibility: unless the proof is really trivial, reading lean code without looking at the infoview is not really what you should do to understand a proof.</p>",
        "id": 523639822,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749676522
    },
    {
        "content": "<p>My preference would be to remove the calls.  But others may have a different view.</p>",
        "id": 523639896,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749676562
    },
    {
        "content": "<p>In some cases, <code>set_option ... false in</code> may ne a better solution.</p>",
        "id": 523639953,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749676586
    },
    {
        "content": "<p>Hmm let's maybe wait and see what other people think</p>",
        "id": 523640210,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749676731
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> I think one of the values of <code>show</code> is that it's a checkpoint after a heavy <code>simp only [...]</code> for example. It's less awkward than trying to phrase things using <code>suffices</code>.</p>\n<p>I agree with Robin that <code>guard_target</code> is a testing-oriented tactic. I thought that it was in the unused tactic exception list because it's used heavily in test files and it would be inconvenient to have to add <code>set_option</code>s there.</p>\n<p>There are some differences between <code>show</code> and <code>guard_target</code> for elaboration too. Both <code>show</code> and <code>change</code> work harder to interleave elaboration and the defeq check to get some tricker instance problems to succeed, but <code>guard_target</code>, being a testing-oriented tactic, I think shouldn't try to absorb instances from the target while elaborating. Example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">change</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ^ works</span>\n<span class=\"w\">  </span><span class=\"n\">guard_target</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ^ doesn't work</span>\n<span class=\"w\">  </span><span class=\"c1\">-- typeclass instance problem is stuck, it is often due to metavariables</span>\n<span class=\"w\">  </span><span class=\"c1\">--   Decidable ?m.4386</span>\n</code></pre></div>\n<p>Another perspective on this is: why should <code>show</code> not be allowed if we allow the <code>show t from ...</code> term when the expected type is known and exactly <code>t</code>?</p>",
        "id": 523646392,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749680295
    },
    {
        "content": "<p>One last thought: maybe mathlib can lint <code>show</code> to make sure that it doesn't change the goal?</p>\n<p>The feature Robin has been working on is to make <code>show</code> select a goal. This will be disallowed by the stream-of-consciousness linter anyway.  It seems reasonable to have a \"this <code>show</code> should be a <code>change</code> linter\".</p>",
        "id": 523646767,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749680555
    },
    {
        "content": "<p>I like the idea of <code>show</code> being linted to not change the goal and only use <code>change</code> for that.  I'd be happy with that choice.</p>",
        "id": 523669719,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1749697281
    },
    {
        "content": "<p>Yeah, I guess that would be a reasonable compromise. I'm probably not going to do this directly in the mathlib adaptation though but rather in a different PR. For now I'm just going to disable the unused tactic linter for <code>show</code>.</p>",
        "id": 523691488,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749712837
    },
    {
        "content": "<p>Oh, hmm since the change to use forks instead of write permission on mathlib, I can't actually push to the adaptation branch</p>",
        "id": 523692523,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749713262
    },
    {
        "content": "<p>Should I make a PR then?</p>",
        "id": 523692541,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749713268
    },
    {
        "content": "<p>Yes please!</p>",
        "id": 523692674,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1749713316
    },
    {
        "content": "<p>Okay here: <a href=\"https://github.com/leanprover-community/mathlib4/pull/25749\">#25749</a>. I actually decided to add the linter though</p>",
        "id": 523701633,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749716361
    },
    {
        "content": "<p>Just a quick confirmation: Is everybody fine with this change? The new behavior is that <code>show</code> doesn't get caught by the unused tactic linter (basically like before) but there is a mathlib style linter to warn if the <code>show</code> did actually change the goal.</p>",
        "id": 523778405,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749740936
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/unused.20tactic.20linter.20for.20.60show.60/near/523669719\">said</a>:</p>\n<blockquote>\n<p>I like the idea of <code>show</code> being linted to not change the goal and only use <code>change</code> for that.  I'd be happy with that choice.</p>\n</blockquote>\n<p>Isn't this inconsistent with term-mode <code>show</code>, which explicitly changes the goal?</p>",
        "id": 523779808,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1749741339
    },
    {
        "content": "<p>I guess but for tactic mode there is an alternative, <code>change</code>, an for term mode there isn't</p>",
        "id": 523783395,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1749742418
    },
    {
        "content": "<p>The term-mode <code>show</code> can explicitly change the expected type, but it's also not specifically <em>for</em> changing the expected type. I'm not sure there's an inconsistency.</p>\n<p>Expected types are also somewhat different from goals. With a goal, you must produce a term of that type, and in contrast expected types are mere suggestions — it's up to elaborators to decide if the term they receive from <code>elabTerm</code> is ok.</p>",
        "id": 523796766,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749747269
    }
]