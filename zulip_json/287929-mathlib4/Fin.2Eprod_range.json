[
    {
        "content": "<p>Why do we have both <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.prod_range#doc\">docs#Finset.prod_range</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin.prod_univ_eq_prod_range#doc\">docs#Fin.prod_univ_eq_prod_range</a> ?</p>",
        "id": 484080154,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732381658
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin.prod_univ_eq_prod_range#doc\">docs#Fin.prod_univ_eq_prod_range</a></p>",
        "id": 484086787,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732387644
    },
    {
        "content": "<p>Given that the proof is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">prod_range</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommMonoid</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∏</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∏</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">prod_univ_eq_prod_range</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n</code></pre></div>\n<p>it is clear that this was intentional, at least.</p>",
        "id": 484086970,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732387806
    },
    {
        "content": "<p>Not sure if I agree with that given that both lemmas are in very different files</p>",
        "id": 484087170,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732388018
    },
    {
        "content": "<p>(In particular, <code>Fin.prod_range</code> requires many more imports)</p>",
        "id": 484087188,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732388036
    },
    {
        "content": "<p>I mean the proof of one uses the other so they weren't added independently by people who didn't realise that the other one existed.</p>",
        "id": 484087396,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732388212
    },
    {
        "content": "<p>Perhaps the proof was simply golfed during porting?</p>",
        "id": 484087448,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732388251
    },
    {
        "content": "<p>Actually, this had a longer proof in Lean 3 apparently: <a href=\"https://github.com/leanprover-community/mathlib4/commit/f0a4e27ecde075e2061b26a8406ef588de283783#diff-53474c1bc0645f14175824ab090185307a25bcf6cc09e9d764c2287035f79008R36\">https://github.com/leanprover-community/mathlib4/commit/f0a4e27ecde075e2061b26a8406ef588de283783#diff-53474c1bc0645f14175824ab090185307a25bcf6cc09e9d764c2287035f79008R36</a></p>",
        "id": 484087526,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732388294
    },
    {
        "content": "<p>It was then golfed by <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span> in <a href=\"https://github.com/leanprover-community/mathlib4/pull/4875\">#4875</a></p>",
        "id": 484087546,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732388321
    },
    {
        "content": "<p>So this all points to being an oversight</p>",
        "id": 484087583,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732388363
    },
    {
        "content": "<p>The question now is: which theorem should stay?</p>",
        "id": 484087588,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1732388372
    },
    {
        "content": "<p>Yes, I've noticed the duplication but golfed instead of properly deduplicating.</p>",
        "id": 484092667,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1732392800
    }
]