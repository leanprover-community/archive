[
    {
        "content": "<p>This is a leaf file, since 2018. I don't really see what it would be useful for, and I just ran into it during a (tedious, long, painful) refactor that unfortunately needs doing.</p>\n<p>Could we get it out of the way so no one needs to run into it next time?</p>\n<p>If there are projects using it I'm happy to hear that, but otherwise, let's clean up!</p>",
        "id": 537029094,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756699150
    },
    {
        "content": "<p>I'd like to see the entirety of <code>Part</code> go. I understand there's computational nuances that make it different from <code>Option</code> but I don't think said nuances are relevant to Mathlib at all. Just my two cents.</p>",
        "id": 537033524,
        "sender_full_name": "Violeta HernÃ¡ndez",
        "timestamp": 1756703323
    },
    {
        "content": "<p><code>Part</code> is useful computationally, but usually I find it's too general (arbitrary proof is needed), whereas <code>Option</code> is too restrictive (failure must be decidable)</p>",
        "id": 537103189,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756730777
    },
    {
        "content": "<blockquote>\n<p>chore: deprecate PartENatÂ <a href=\"https://github.com/leanprover-community/mathlib4/pull/29231\">#29231</a></p>\n</blockquote>",
        "id": 537200751,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756782063
    },
    {
        "content": "<p>Am I right to understand that the only purpose of <code>Part</code> instead of <code>Option</code> is to avoid using classical logic?</p>",
        "id": 538006254,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1757167983
    },
    {
        "content": "<p>the purpose of <code>Part</code> is to make certain things computable</p>",
        "id": 538006801,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757168454
    },
    {
        "content": "<p>Do you have an example where <code>#eval</code> isn't otherwise possible?</p>",
        "id": 538006903,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1757168558
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/287929-mathlib4/topic/deprecate.20Mathlib.2EData.2ENat.2EPartENat.3F/near/538006903\">said</a>:</p>\n<blockquote>\n<p>Do you have an example where <code>#eval</code> isn't otherwise possible?</p>\n</blockquote>\n<p>when you have a function <code>(x : Î±) â†’ P x â†’ Î²</code> where <code>P : Î± â†’ Prop</code> is a predicate which is not recursively enumerable, you can make this into a <code>Î± â†’ Part Î²</code> but you can't make this into a function <code>Î± â†’ Option Î²</code> using <code>partial_fixpoint</code></p>",
        "id": 538007705,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757169096
    },
    {
        "content": "<p>if the predicate is RE then you can make a computable <code>Î± â†’ Option Î²</code> with <code>partial_fixpoint</code>, but it will never return <code>none</code> (it will run forever instead)</p>",
        "id": 538007879,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757169208
    },
    {
        "content": "<p>if the predicate is decidable then you can make this into a total function <code>Î± â†’ Option Î²</code> which is computable and always terminates</p>",
        "id": 538007914,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757169232
    },
    {
        "content": "<p>I don't have any non-RE predicates on me now, so no concrete example</p>",
        "id": 538008022,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757169312
    },
    {
        "content": "<p>Sure, but can you <code>#eval</code> a <code>Part</code>? If not, I feel like this is a \"no\" to my question</p>",
        "id": 538008060,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1757169332
    },
    {
        "content": "<p>you can <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Part.get#doc\">docs#Part.get</a> a <code>Part</code></p>",
        "id": 538008135,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757169381
    },
    {
        "content": "<p>if you don't feel like providing a proof then you can <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Part.unwrap#doc\">docs#Part.unwrap</a> it (but this is unsound)</p>",
        "id": 538008205,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757169440
    },
    {
        "content": "<p>and these are all computable</p>",
        "id": 538008229,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757169453
    },
    {
        "content": "<p>But surely such a thing belongs in Batteries?</p>",
        "id": 538008432,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1757169607
    },
    {
        "content": "<p>maybe</p>",
        "id": 538008576,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757169711
    },
    {
        "content": "<p>So from what I understand, if we make e.g. <code>Array.find?'</code> that returns a <code>Part</code>, then using that is equivalent (in the runtime) to using <code>Array.find</code>, but it delays the moment at which a proof needs to be given, because <code>Array.find</code> requires the proof upfront.</p>",
        "id": 538009025,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1757170053
    },
    {
        "content": "<p>yeah that sounds right, modulo the fact that I can't find <code>Array.find</code> anywhere</p>",
        "id": 538009096,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757170120
    },
    {
        "content": "<p>I'm sure lean will get around to making that API at some point. Or they will make <code>Array.find</code> return a <code>Part</code> <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 538009191,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1757170200
    },
    {
        "content": "<p>unfortunately the important operation <code>Part.Ï‰Sup</code> is noncomputable, and there's no way to make it computable since <code>Part</code> is too general</p>",
        "id": 538009243,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757170241
    },
    {
        "content": "<p>Wait, there is <code>Part</code> API for things that aren't computable when the whole point was computability?</p>",
        "id": 538009326,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1757170301
    },
    {
        "content": "<p>yeah it's a bit weird</p>",
        "id": 538009365,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757170337
    },
    {
        "content": "<p>right now the behavior of getting a <code>none</code> is \"undefined behavior\", if that were weakened to \"infinite loop\" then <code>Part.Ï‰Sup</code> could be computable</p>",
        "id": 538009531,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757170493
    },
    {
        "content": "<p>Huh, but you prove in <code>get</code> that you can't get a <code>none</code>?</p>",
        "id": 538009613,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1757170554
    },
    {
        "content": "<p>yes</p>",
        "id": 538009683,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757170606
    },
    {
        "content": "<p>here I have a thread <a class=\"message-link\" href=\"/#narrow/channel/217875-Is-there-code-for-X.3F/topic/Divergence.20monad/near/486460234\">#Is there code for X? &gt; Divergence monad @ ðŸ’¬</a></p>",
        "id": 538010194,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757171059
    }
]