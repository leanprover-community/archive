[
    {
        "content": "<p>Seems that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Algebra.algHom#doc\">docs#Algebra.algHom</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsScalarTower.toAlgHom#doc\">docs#IsScalarTower.toAlgHom</a> are the same map, the latter has more APIs. Should we remove <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Algebra.algHom#doc\">docs#Algebra.algHom</a> in favor of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsScalarTower.toAlgHom#doc\">docs#IsScalarTower.toAlgHom</a> ?</p>",
        "id": 569828872,
        "sender_full_name": "Jz Pan",
        "timestamp": 1769221055
    },
    {
        "content": "<p>It seems that <a href=\"https://github.com/leanprover-community/mathlib4/pull/22912\">#22912</a> <a href=\"https://github.com/leanprover-community/mathlib4/commit/a31d3a8602aad3cb7461fb010641b9ca9546a79e\">introduced</a> <code>Algebra.algHom</code> as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">algHom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">→ₐ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>but then they <a href=\"https://github.com/leanprover-community/mathlib4/pull/22912#discussion_r2010362962\">noticed</a> that this is a special case of a tower so it was generalized even though the tower version already existed.</p>",
        "id": 569830700,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769223476
    },
    {
        "content": "<p>(and the tower version was introduced in <a href=\"https://github.com/leanprover-community/mathlib3/pull/3272\">mathlib3#3272</a>, named <code>to_alg_hom</code>)</p>",
        "id": 569830937,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769223732
    },
    {
        "content": "<p>Meanwhile, <code>Algebra.algHom</code> as in the message above is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Algebra.ofId#doc\">docs#Algebra.ofId</a></p>",
        "id": 569831003,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1769223826
    },
    {
        "content": "<p>Which seems like a lousy name</p>",
        "id": 569831008,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1769223840
    },
    {
        "content": "<p>As I answered in a comments of the merged PR, I find it mathematically awkward to rely on <code>IsScalarTower</code> for an algebra morphism that should be there just after the definition of an algebra, and whose absence at this place in the library will prevent people to discover it. For automation, it is probably better to have only one, and maybe that could be achieved by a clever use of <code>simp</code> tags.</p>",
        "id": 569860747,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1769256226
    },
    {
        "content": "<p>Sorry but I don't understand your argument. To define <code>A →ₐ[R] B</code> the condition <code>IsScalarTower R A B</code> is required, so IMO it is an inherent property of <code>IsScalarTower</code>. To define <code>R →ₐ[R] A</code> the <code>IsScalarTower</code> is not necessary, but there is already <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Algebra.ofId#doc\">docs#Algebra.ofId</a> for you.</p>\n<p>As for the discoverability problem, a simple search <code>IsScalarTower, |- AlgHom ..</code> on Loogle will reveal <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsScalarTower.toAlgHom#doc\">docs#IsScalarTower.toAlgHom</a>, and <code>Algebra, |- AlgHom ?a ?a ?b</code> will reveal <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Algebra.ofId#doc\">docs#Algebra.ofId</a>.</p>",
        "id": 569861866,
        "sender_full_name": "Jz Pan",
        "timestamp": 1769257099
    },
    {
        "content": "<p>(<code>ofId</code> was introduced in <a href=\"https://github.com/leanprover-community/mathlib3/pull/536\">mathlib3#536</a> as <code>of_id</code>, together with the definition of <code>Algebra</code>)</p>",
        "id": 569879147,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769270757
    },
    {
        "content": "<p><code>Algebra.ofId</code> is also just a special case of <del><code>IsScalarTower.algHom</code></del> <code>IsScalarTower.toAlgHom</code> (why is it <code>to</code>) so would we get rid of it too</p>",
        "id": 569879279,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1769270870
    },
    {
        "content": "<p>There is precedent for having special cases in files higher in the import hierarchy, e.g. <code>EMetricSpace</code>/<code>PseudoEMetricSpace</code> come before <code>PseudoMetricSpace</code> which comes before <code>MetricSpace</code>, and among them have some instance diamonds on purpose just to make the instances available earlier</p>",
        "id": 569885070,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769272088
    }
]