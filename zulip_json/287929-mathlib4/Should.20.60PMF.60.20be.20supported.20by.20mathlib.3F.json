[
    {
        "content": "<p>To me this should just be a special case of <code>withDensity</code> or <code>pdf</code> when the reference measure is the counting measure. To support <code>PMF</code> properly we basically have to duplicate every theorem about pdfs and/or with <code>withDensity</code>.</p>",
        "id": 538533986,
        "sender_full_name": "David Ledvinka",
        "timestamp": 1757452828
    },
    {
        "content": "<p>One argument about keeping PMF, is that I understand what \"a function <code>α → ℝ≥0∞</code> such that the values have (infinite) sum <code>1</code>.\" means, and I have absolutely zero idea what \"Radon–Nikodym derivative of the push-forward measure of <code>ℙ</code> along <code>X</code> with respect to <code>μ</code>.\" means. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> <br>\nBut I'm not against defining <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PMF#doc\">docs#PMF</a> in terms of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.pdf#doc\">docs#MeasureTheory.pdf</a>.</p>",
        "id": 538553119,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757466958
    },
    {
        "content": "<p>That's a half joke though, I know what a pdf is. If you want to remove <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PMF#doc\">docs#PMF</a> what API would you propose instead? I've been using it for finite sets and often it doesn't require going into measure theory at all.</p>",
        "id": 538553878,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757467750
    },
    {
        "content": "<p>Technically <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PMF#doc\">docs#PMF</a> does not correspond to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.pdf#doc\">docs#MeasureTheory.pdf</a> directly, since PMF as defined is more like a \"pre density\" (for either a measure or a random variable) but I assume most theorems about PMFs generalize to functions that integrate to one with respect to a reference measure (unclear if a definition for this like <code>probabilityDensity</code> is needed, or the theorems that are actually desired can be restated with <code>withDensity</code> and/or <code>pdf</code>)</p>",
        "id": 538555590,
        "sender_full_name": "David Ledvinka",
        "timestamp": 1757468777
    },
    {
        "content": "<p>Personally I don't think not requiring measure theory is a good reason to support it in mathlib similar to how there is not an API in mathlib to do limits without filters, especially for contributions in mathlib that would also work in more general cases. I do think it could be good to have a top level API (whether its hosted in mathlib or not) for doing elementary probability which specializes the measure theoretic approach so that people can play around with it, but I don't think it should be used to prove stuff in mathlib.</p>",
        "id": 538556030,
        "sender_full_name": "David Ledvinka",
        "timestamp": 1757469271
    },
    {
        "content": "<p>The thing about filters though, is that once you understand them it doesn't \"get in your way\" (and can often help). If it were the case that even for someone who understands the theory it is still much easier to use PMFs to prove things then pdfs/densities then I think there is an argument to keep it. But I think that is unlikely to be the case once the API for pdfs is good enough (although right now I think pdf and PMF are still missing a lot).</p>",
        "id": 538556255,
        "sender_full_name": "David Ledvinka",
        "timestamp": 1757469510
    },
    {
        "content": "<p>FWIW I think if the API is good enough you shouldn't have to actually understand the theory of Radon-Nikodym derivative is to use it (similar to how <code>Measure</code> is defined in terms of <code>Outer measure</code> but with the great <code>Measure</code> API this is almost never relevant). However I think understanding some measure theory (even if its just enough to figure out how to reduce to the special case) is a reasonable expectation for mathlib.</p>",
        "id": 538556692,
        "sender_full_name": "David Ledvinka",
        "timestamp": 1757469908
    },
    {
        "content": "<p>In one of <a href=\"https://ohaithe.re/Lean-QuantumInfo/ClassicalInfo/Distribution.html\">my larger projects</a> I don't use PMF, specifically because it has the somewhat annoying (to me) aspect that it uses ENNReal. The numbers must, of course, all be between 0 and 1, so they could at least be NNReal, but really I think that a \"probability\" is its own first-class type (identified with <code>Set.Icc 0 1</code>) and that's what it uses.</p>\n<p>(I could see myself, later, changing it to use <code>HasSum 1</code> instead of <code>Fintype.sum</code>.)</p>",
        "id": 538562424,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1757475562
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"223948\">David Ledvinka</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Should.20.60PMF.60.20be.20supported.20by.20mathlib.3F/near/538555590\">said</a>:</p>\n<blockquote>\n<p>Technically <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PMF#doc\">docs#PMF</a> does not correspond to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.pdf#doc\">docs#MeasureTheory.pdf</a> directly, since PMF as defined is more like a \"pre density\" (for either a measure or a random variable) but I assume most theorems about PMFs generalize to functions that integrate to one with respect to a reference measure (unclear if a definition for this like <code>probabilityDensity</code> is needed, or the theorems that are actually desired can be restated with <code>withDensity</code> and/or <code>pdf</code>)</p>\n</blockquote>\n<p>I agree with you. I think it's probably better to replace PMF with pdf/wthDensity and would welcome such an API.</p>",
        "id": 538618955,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757501332
    }
]