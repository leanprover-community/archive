[
    {
        "content": "<p>Hello, I wonder if there is an automated tool/script that can upgrade a set of Lean files from one version to a more recent one. For example, upgrading from 4.17 to 4.18. Thanks.</p>",
        "id": 513824611,
        "sender_full_name": "Roozbeh Yousefzadeh",
        "timestamp": 1745401540
    },
    {
        "content": "<p>Is your \"set of lean files\" part of a <a href=\"https://leanprover-community.github.io/install/project.html\">project</a>?</p>",
        "id": 513825471,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1745401793
    },
    {
        "content": "<p>The short answer is that there isn't, and in the FLT project I am dealing with this by bumping every week or so and if something goes wrong then the changes tend to be fresh in the community's mind so it's not hard to find someone who can fix the problem for you. I agree that this is not ideal, but with lean still in a period of very dynamic development and mathlib not able to promise any backwards compatibility for this and other reasons, that's how things work right now.</p>",
        "id": 513829316,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745402795
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/channel/287929-mathlib4/topic/automatic.20upgrade.20of.20files.20to.20a.20newer.20mathlib.20version/near/513825471\">said</a>:</p>\n<blockquote>\n<p>Is your \"set of lean files\" part of a <a href=\"https://leanprover-community.github.io/install/project.html\">project</a>?</p>\n</blockquote>\n<p>Yes, files are part of multiple projects. It is possible to merge them into a single file.</p>",
        "id": 513833079,
        "sender_full_name": "Roozbeh Yousefzadeh",
        "timestamp": 1745403980
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/automatic.20upgrade.20of.20files.20to.20a.20newer.20mathlib.20version/near/513829316\">said</a>:</p>\n<blockquote>\n<p>The short answer is that there isn't, and in the FLT project I am dealing with this by bumping every week or so and if something goes wrong then the changes tend to be fresh in the community's mind so it's not hard to find someone who can fix the problem for you. I agree that this is not ideal, but with lean still in a period of very dynamic development and mathlib not able to promise any backwards compatibility for this and other reasons, that's how things work right now.</p>\n</blockquote>\n<p>This is helpful to know. Thank you so much for explaining.</p>",
        "id": 513833824,
        "sender_full_name": "Roozbeh Yousefzadeh",
        "timestamp": 1745404209
    },
    {
        "content": "<p>Often, the compiler shows some messages that some lemma is deprecated and it should be replaced with some other lemma. Would it be helpful for people if I write a script that reads those messages and tries to replace those lemmas automatically? I understand this might not resolve all the issues that might arise when upgrading the Mathlib version.</p>",
        "id": 513833937,
        "sender_full_name": "Roozbeh Yousefzadeh",
        "timestamp": 1745404250
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/automatic.20upgrade.20of.20files.20to.20a.20newer.20mathlib.20version/near/513829316\">said</a>:</p>\n<blockquote>\n<p>bumping every week or so </p>\n</blockquote>\n<p>and if you don't bump mathlib for more than a month, depending on the amount of code you had you might find yourself in some deep trouble :-(</p>",
        "id": 513842312,
        "sender_full_name": "Edison Xie",
        "timestamp": 1745406916
    },
    {
        "content": "<p>I should mention the <a href=\"https://github.com/leanprover-community/lean-update\"><code>lean-update</code> action</a> which you can set up to run at regular intervals. This will try to do the update for you and depending on whether it succeeded without changes, you can choose between merge the new version, making a pull request or creating an issue in the repository.</p>",
        "id": 513850562,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1745409343
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"698751\">Roozbeh Yousefzadeh</span> <a href=\"#narrow/channel/287929-mathlib4/topic/automatic.20upgrade.20of.20files.20to.20a.20newer.20mathlib.20version/near/513833937\">said</a>:</p>\n<blockquote>\n<p>Often, the compiler shows some messages that some lemma is deprecated and it should be replaced with some other lemma. Would it be helpful for people if I write a script that reads those messages and tries to replace those lemmas automatically? I understand this might not resolve all the issues that might arise when upgrading the Mathlib version.</p>\n</blockquote>\n<p>I think such code already exists: <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> had a prototype for this at <a href=\"https://github.com/adomani/UpdateDeprecations\">https://github.com/adomani/UpdateDeprecations</a>. See <a href=\"#narrow/channel/113488-general/topic/Auto-replace.20deprecated.20aliases.3F\">this thread</a> for further discussion.</p>",
        "id": 513858054,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1745411256
    },
    {
        "content": "<p>Thank you everyone for your helpful comments and suggestions. I appreciate it.</p>",
        "id": 513991788,
        "sender_full_name": "Roozbeh Yousefzadeh",
        "timestamp": 1745458316
    }
]