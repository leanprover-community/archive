[
    {
        "content": "<p>Recently when making PR and reading other PR, I found it unclear on the naming of theorems like the following</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo_bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">stuff</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>The question is whether this should be <code>foo_bar</code> or <code>bar_foo</code>. The <a href=\"https://leanprover-community.github.io/contribute/naming.html\">naming convention doc</a> doesn't seem to mention this. On the surface, it seems that it should be <code>foo_var</code> just as how it appears in the statement. However, consider the following</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo_bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">bar</span><span class=\"bp\">.</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">stuff</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>where the functions are defined under namespaces like <code>T.bar: T → U</code> and <code>U.foo</code> and are invoked using the dot syntax. <code>bar</code> and <code>foo</code> now appears in the reverse order in the statement, but still represents the same application order as the previous version. Should the name be kept as <code>foo_bar</code>?</p>\n<p>Existing theorems in the library seem to give contradictory answers, such as <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Path.html#Path.refl_symm\">Path.refl_symm</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Path.html#Path.symm_cast\">Path.symm_cast</a> which I found when reading <a href=\"https://github.com/leanprover-community/mathlib4/pull/27261\">#27261</a>. There are also <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/HahnSeries/Multiplication.html#HahnSeries.mul_coeff\">HahnSeries.mul_coeff</a> which is deprecated in favor of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/HahnSeries/Multiplication.html#HahnSeries.coeff_mul\">HahnSeries.coeff_mul</a>, suggesting the <code>foo_bar</code> style is preferred regardless of the dot. Could we add this to the naming convention to clarify it?</p>",
        "id": 533593944,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1754763337
    },
    {
        "content": "<p>The Lean core naming convention is a bit more precise about this: <a href=\"https://github.com/leanprover/lean4/blob/master/doc/std/naming.md\">https://github.com/leanprover/lean4/blob/master/doc/std/naming.md</a>; I guess most of what's written there applies to mathlib similarly, so yeah <code>foo_bar</code> regardless of dot notation.</p>",
        "id": 533594256,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1754763792
    },
    {
        "content": "<p>But it would probably be good to make this clear in <a href=\"https://leanprover-community.github.io/contribute/naming.html\">https://leanprover-community.github.io/contribute/naming.html</a> as well</p>",
        "id": 533594291,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1754763839
    },
    {
        "content": "<p>Does the latter link the former anywhere?</p>",
        "id": 533594375,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754763914
    },
    {
        "content": "<p><span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span> I didn't know the existence of the core naming convention doc</p>",
        "id": 533594403,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1754763944
    },
    {
        "content": "<p>I don't know if we want to commit to something as strong as the core guidelines taking precedence, but we could add a sentence like \"if your question isn't covered here, look at the core guidelines\"</p>",
        "id": 533594415,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754763962
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Naming.20convention.3A.20function.20application/near/533594375\">schrieb</a>:</p>\n<blockquote>\n<p>Does the latter link the former anywhere?</p>\n</blockquote>\n<p>I don't think so, I believe the core naming convention doc got written later</p>",
        "id": 533594427,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1754763982
    },
    {
        "content": "<p>The core naming convention is (more or less) the understanding of the mathlib naming convention by the core devs</p>",
        "id": 533594649,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754764245
    },
    {
        "content": "<p>This means that the mathlib naming convention takes precedence AND pushes the core naming convention to adapt (with someone from core approving the change, obviously)</p>",
        "id": 533594721,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754764337
    },
    {
        "content": "<p>Note: I am not a core Lean dev, but I've been through several iterations of the above process</p>",
        "id": 533594742,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754764368
    },
    {
        "content": "<p>Certainly the Mathlib naming conventions take precedence for Mathlib, and the core naming conventions take precedence for core. But we would like these to be in sync as much as possible! It makes life easier for everyone.</p>",
        "id": 533708294,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754892194
    }
]