[
    {
        "content": "<p>Why have both? <code>LeftInverse f g</code> is exactly the same as <code>RightInverse g f</code>.</p>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Function.LeftInverse#doc\">docs#Function.LeftInverse</a> <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Function.RightInverse#doc\">docs#Function.RightInverse</a></p>",
        "id": 565724092,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767045296
    },
    {
        "content": "<p>These defs are made in 2016, before Mathlib was curved out as math library from Lean.<br>\n<a href=\"https://github.com/leanprover-community/lean/commit/93692d01af6ee90051a47f9912953b2ee73a50b8\">https://github.com/leanprover-community/lean/commit/93692d01af6ee90051a47f9912953b2ee73a50b8</a></p>",
        "id": 565763110,
        "sender_full_name": "Miyahara Kō",
        "timestamp": 1767085208
    },
    {
        "content": "<p>Do we need any of them? We could write <code>f ∘ g = id</code>?</p>",
        "id": 565763497,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1767085408
    },
    {
        "content": "<p>Personally, I think it is useful to have at least one of them. These propositions are mainly convenient for proving <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Function.html#Function.RightInverse.surjective\">surjectivity</a> or <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Function.html#Function.LeftInverse.injective\">injectivity</a>, and they can be used via dot notation, which is quite helpful.</p>",
        "id": 565764152,
        "sender_full_name": "Miyahara Kō",
        "timestamp": 1767085850
    },
    {
        "content": "<p>But in my experience you in fact <em>never</em> have a <code>LeftInverse</code> assumption lying around, meaning that actually <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Function.RightInverse.surjective#doc\">docs#Function.RightInverse.surjective</a> should be renamed to <code>Function.Surjective.of_rightInverse</code> so as to leverage anonymous dot notation on <code>Function.Surjective</code>. At this point, one could indeed get rid of <code>Function.RightInverse</code></p>",
        "id": 565764563,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1767086171
    },
    {
        "content": "<p>Indeed, when actually carrying out proofs, assumptions or conclusions of the form <code>∀ x, f (g x) = x</code> appear much more often. However, this is just my personal view, but from the perspective of theorem searchability, I think it is better to introduce definitions for important properties, even if they can be written in a very simple form.</p>\n<p>A representative example is <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Logic/Function/Defs.html#Function.IsFixedPt\"><code>Function.IsFixedPt</code></a>. Although this is a very simple definition that could be written directly as <code>f x = x</code>, explicitly rewriting it as <code>Function.IsFixedPt</code> and placing it as an assumption of a theorem makes it much easier to find relevant results via Loogle when results from dynamical systems are needed.</p>\n<p>That said, even I think that <code>Function.LeftInverse</code> and <code>Function.RightInverse</code> should be unified, and I honestly wonder why <code>Function.HasLeftInverse</code> and <code>Function.HasRightInverse</code> are still in Mathlib at this point <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 565768073,
        "sender_full_name": "Miyahara Kō",
        "timestamp": 1767088634
    },
    {
        "content": "<p>I'm not sure how I feel about <code>IsFixedPt</code> either. If not for perhaps discoverability, this feels like a wrapper that's too simple for its own good. But that can be another thread.</p>",
        "id": 565835648,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767130300
    },
    {
        "content": "<p>At least in <code>IsFixedPt</code> there is a variable that appears twice in the body: <code>IsFixedPt f x := f x = x</code> vs <code>LeftInverse f g := f ∘ g = id</code>.</p>",
        "id": 565835730,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1767130380
    },
    {
        "content": "<p>I think we could try out the <code>Surjective.of_rightInverse</code>/<code>Injective.of_leftInverse</code> design you mention. I suspect this would get rid of 95% of uses of these predicates, and then we can figure out the other 5%.</p>",
        "id": 565835802,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767130448
    },
    {
        "content": "<p>I think at least one of them is worth keeping, since it saves you having to decide whether to quantify your inverse property or state it as an equality of functions.</p>",
        "id": 565837958,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1767132458
    },
    {
        "content": "<p>we could merge them</p>",
        "id": 565837993,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767132487
    },
    {
        "content": "<p>which one has the better argument order</p>",
        "id": 565838014,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767132520
    },
    {
        "content": "<p>I think the argument for having both is that <code>LeftInverse g</code> as a predicate implies <code>Injective</code> and similarly for <code>RightInverse g</code> and <code>Surjective</code>; that is, each has a \"main\" argument</p>",
        "id": 565838098,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1767132636
    },
    {
        "content": "<p>I'm not sure this is necessarily a good design, but I do think it is intentional</p>",
        "id": 565838112,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1767132657
    },
    {
        "content": "<p>I can never remember which one is which.</p>",
        "id": 565838135,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767132676
    },
    {
        "content": "<p>Renaming to <code>f.IsRightInvOf g</code> would help</p>",
        "id": 565838183,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1767132723
    },
    {
        "content": "<p>Dot notation didn't work on functions way back when these were defined</p>",
        "id": 565838218,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1767132751
    }
]