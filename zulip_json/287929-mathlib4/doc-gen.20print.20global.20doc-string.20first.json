[
    {
        "content": "<p>Dear All,</p>\n<p>maybe this has already been addressed, but I could not find it.</p>\n<p>Suppose that there is a declaration such as</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"sd\">/-- Main doc -/</span>\n<span class=\"kd\">structure</span> <span class=\"n\">foo</span> <span class=\"n\">where</span>\n  <span class=\"sd\">/-- this is an implementation detail -/</span>\n  <span class=\"n\">bar</span> <span class=\"o\">:</span> <span class=\"n\">String</span>\n</code></pre></div>\n<p>I think that the documentation page would display this something like </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">structure</span> <span class=\"n\">foo</span>\n    <span class=\"n\">this</span> <span class=\"n\">is</span> <span class=\"n\">an</span> <span class=\"n\">implementation</span> <span class=\"n\">detail</span>\n  <span class=\"n\">bar</span> <span class=\"o\">:</span> <span class=\"n\">String</span>\n<span class=\"n\">Main</span> <span class=\"n\">doc</span>\n</code></pre></div>\n<p>Would it be possible/desirable to display <code>Main doc</code> first, and then everything else?  Something along the lines of</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">structure</span> <span class=\"n\">foo</span>\n<span class=\"n\">Main</span> <span class=\"n\">doc</span>\n    <span class=\"n\">this</span> <span class=\"n\">is</span> <span class=\"n\">an</span> <span class=\"n\">implementation</span> <span class=\"n\">detail</span>\n  <span class=\"n\">bar</span> <span class=\"o\">:</span> <span class=\"n\">String</span>\n</code></pre></div>\n<p>I am bringing this up, since I just looked up <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasurableSpace#doc\">docs#MeasurableSpace</a> and the first thing that I read is <code>Predicate saying that a given set is measurable. Use MeasurableSet in the root namespace instead.</code> which confused me, until I realized that this was actually talking about <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasurableSpace.MeasurableSet%27#doc\">docs#MeasurableSpace.MeasurableSet'</a> instead!</p>",
        "id": 385839588,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1692342161
    },
    {
        "content": "<p>Personally I think it should be</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">structure</span> <span class=\"n\">foo</span>\n  <span class=\"n\">Main</span> <span class=\"n\">doc</span>\n\n  <span class=\"n\">bar</span> <span class=\"o\">:</span> <span class=\"n\">String</span>\n    <span class=\"n\">this</span> <span class=\"n\">is</span> <span class=\"n\">an</span> <span class=\"n\">implementation</span> <span class=\"n\">detail</span>\n</code></pre></div>\n<p>It's jarring having some docstrings before the thing they document and others after</p>",
        "id": 385843966,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1692344023
    },
    {
        "content": "<p>Though I think even with leaving the main doc in the same place, that would help; compare:</p>\n<p><a href=\"/user_uploads/3121/p_l_QPRqwocAWBSYpNf0Q_65/image.png\">image.png</a> <br>\n<a href=\"/user_uploads/3121/5AGqYV343__F2BMJacIQi5Pn/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/p_l_QPRqwocAWBSYpNf0Q_65/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/p_l_QPRqwocAWBSYpNf0Q_65/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/5AGqYV343__F2BMJacIQi5Pn/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/5AGqYV343__F2BMJacIQi5Pn/image.png\"></a></div>",
        "id": 385844501,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1692344210
    },
    {
        "content": "<p>Eric, I like your suggestion.  And I agree that with your suggestion I would probably not have been confused.</p>",
        "id": 385844649,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1692344265
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/doc-gen4/pull/137\">https://github.com/leanprover/doc-gen4/pull/137</a></p>",
        "id": 385844932,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1692344378
    },
    {
        "content": "<p>Would making the list have bullets be an improvement?</p>",
        "id": 385845123,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1692344449
    },
    {
        "content": "<p>I think that might be confusing for <code>Nat</code>, for which the corresponding versions are</p>\n<p><a href=\"/user_uploads/3121/LqY7Hz7B92-QGxbpt5tsXfcQ/image.png\">image.png</a><br>\n<a href=\"/user_uploads/3121/TjBd0SgiUMa0k31CjmEbXWmy/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/LqY7Hz7B92-QGxbpt5tsXfcQ/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/LqY7Hz7B92-QGxbpt5tsXfcQ/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/TjBd0SgiUMa0k31CjmEbXWmy/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/TjBd0SgiUMa0k31CjmEbXWmy/image.png\"></a></div>",
        "id": 385845421,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1692344595
    },
    {
        "content": "<p>Ah, sure, inductives already have their <code>|</code>.  Maybe only for <code>structure</code>s?</p>",
        "id": 385845562,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1692344655
    },
    {
        "content": "<p>In any case, from what you showed earlier, I find the current change already a big readability improvement!</p>",
        "id": 385845838,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1692344760
    },
    {
        "content": "<p>Eric, if I wanted to see the effect of the changes that you are putting in the PR, how could I do that?</p>",
        "id": 385847350,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1692345075
    },
    {
        "content": "<p>(I mean, generating a sample doc-page -- the actual changes I can see in github! <span aria-label=\"upside down\" class=\"emoji emoji-1f643\" role=\"img\" title=\"upside down\">:upside_down:</span> )</p>",
        "id": 385847518,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1692345118
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/doc-gen.20print.20global.20doc-string.20first/near/385847350\">said</a>:</p>\n<blockquote>\n<p>Eric, if I wanted to see the effect of the changes that you are putting in the PR, how could I do that?</p>\n</blockquote>\n<p>Wait for <span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span> to decide if the changes are good and for it to be merged if so... I previewed the change by manually tweaking the page in the web inspector.</p>",
        "id": 385847981,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1692345202
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/doc-gen.20print.20global.20doc-string.20first/near/385847350\">said</a>:</p>\n<blockquote>\n<p>Eric, if I wanted to see the effect of the changes that you are putting in the PR, how could I do that?</p>\n</blockquote>\n<p>I have a local std4 laying around that I usually look at with a custom doc-gen</p>",
        "id": 385859517,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1692347739
    },
    {
        "content": "<p>It's merged now, should be in the next update for mathlib's docs in a couple of hours</p>",
        "id": 385867475,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1692350096
    },
    {
        "content": "<p>Thank you very much!  Also, the docs are great -- I'm very grateful for all the work that goes into making it available for everyone!</p>",
        "id": 385868125,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1692350327
    },
    {
        "content": "<p>The new format is live and I find it great!  Thank you very much!</p>",
        "id": 385986369,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1692391449
    }
]