[
    {
        "content": "<p>Which form is preferred in mathlib?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">toNNReal</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">√</span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"c1\">-- or</span>\n<span class=\"n\">NNReal</span><span class=\"bp\">.</span><span class=\"n\">sqrt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">toNNReal</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Neither of them simplifies to the other, and I think the <code>√</code> notation is only supported for real numbers.</p>",
        "id": 566101937,
        "sender_full_name": "Niels Voss",
        "timestamp": 1767388617
    },
    {
        "content": "<p>Surely <code>Real.toNNReal 5 = 5</code>?</p>",
        "id": 566101959,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1767388646
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">toNNReal</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 566102001,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1767388677
    },
    {
        "content": "<p>Sorry, 5 was meant as a placeholder, it's really an arbitrary real valued <code>x : ℝ</code></p>",
        "id": 566102032,
        "sender_full_name": "Niels Voss",
        "timestamp": 1767388697
    },
    {
        "content": "<p>To be more specific, it is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">public</span><span class=\"w\"> </span><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">singularValues</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">≥</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Finsupp</span><span class=\"bp\">.</span><span class=\"n\">embDomain</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">valEmbedding</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">    </span><span class=\"n\">Finsupp</span><span class=\"bp\">.</span><span class=\"n\">ofSupportFinite</span>\n<span class=\"w\">      </span><span class=\"c1\">-- TODO: Consider using `NNReal.sqrt` and pushing the coercion inside.</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">toNNReal</span><span class=\"w\"> </span><span class=\"bp\">√</span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"bp\">.</span><span class=\"n\">isSymmetric_adjoint_comp_self</span><span class=\"bp\">.</span><span class=\"n\">eigenvalues</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">))</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">toFinite</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>from <a class=\"stream-topic\" data-stream-id=\"217875\" href=\"/#narrow/channel/217875-Is-there-code-for-X.3F/topic/Singular.20Value.20Decomposition/with/563698892\">#Is there code for X? &gt; Singular Value Decomposition</a> (I got permission in a DM to work on the finite-dimensional case first)</p>",
        "id": 566102100,
        "sender_full_name": "Niels Voss",
        "timestamp": 1767388757
    }
]