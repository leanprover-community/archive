[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/32872\">#32872</a>, I encountered some <code>SimpNF</code> timeouts, and I verified that these timeouts only occur when not in a <code>module</code>. The time-outs come from unfolding things that are tagged <code>@[no_expose]</code>.</p>\n<p>So, I think <code>SimpNF</code> should run inside a <code>module</code>. Does anyone know how to fix this?</p>\n<p>Relatedly, does Mathlib currently actually want PRs that make use of <code>@[no_expose]</code>, like <a href=\"https://github.com/leanprover-community/mathlib4/pull/32872\">#32872</a>? The issue is that this makes the experience worse for users who are not using the module system.</p>",
        "id": 564596511,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1766105532
    },
    {
        "content": "<p>I think we need to add the argument <code>(level := .exported)</code> to <code>importModules</code> in <code>runLinter</code> in Batteries <a href=\"https://github.com/leanprover-community/batteries/blob/6cae843edf5b3abc871c557614eaffdcb4492d89/scripts/runLinter.lean#L104C13-L104C27\">here</a> (see docstring for <code>importModules</code>); though, perhaps there should also be an optional argument <code>--as-module</code> (or equivalent) to <code>runLinter</code> which we pass in in CI, otherwise (I think?) users would be unable to use <code>runLinter</code> on non-<code>module</code> files.</p>",
        "id": 564597789,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1766106364
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60SimpNF.60.20and.20module.20system/near/564596511\">said</a>:</p>\n<blockquote>\n<p>Relatedly, does Mathlib currently actually want PRs that make use of <code>@[no_expose]</code>, like <a href=\"https://github.com/leanprover-community/mathlib4/pull/32872\">#32872</a>? The issue is that this makes the experience worse for users who are not using the module system.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"479299\">@Jovan Gerbscheid</span>, what do you mean? For a downstream user isn't <code>no_expose</code> a noop? Oh, you mean using <code>no_expose</code> <strong>instead</strong> of <code>irreducible_def</code>?</p>",
        "id": 564639258,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1766131874
    }
]