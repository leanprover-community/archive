[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/29218\">#29218</a>, it looks like CI hangs at the \"test mathlib\" stage. The output I see (<a href=\"https://github.com/leanprover-community/mathlib4/actions/runs/17384644048/job/49350783892?pr=29218\">here</a>) is</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Run cd pr-branch\n+ cd pr-branch\n+ lake --iofail test\n✔ [1398/1658] Built MathlibTest.Replace (365ms)\n✔ [2760/2999] Built MathlibTest.InferParam (431ms)\n✔ [2982/2999] Built MathlibTest.UnusedTactic (530ms)\n✔ [2984/3000] Built MathlibTest.Have (544ms)\n✔ [2985/3000] Built MathlibTest.DocString (598ms)\n✔ [2987/3312] Built MathlibTest.choose_reduction (1.1s)\n✔ [2988/3312] Built MathlibTest.BigOps (1.1s)\n✔ [3302/3731] Built MathlibTest.success_if_fail_with_msg (731ms)\n✔ [4307/4701] Built MathlibTest.itauto (1.1s)\n✔ [4693/5118] Built MathlibTest.ModuleCasing (611ms)\n✔ [6405/6678] Built MathlibTest.Complex (2.1s)\n✔ [7162/7267] Built MathlibTest.finiteness (2.6s)\n✔ [7163/7267] Built MathlibTest.fun_prop_dev (2.7s)\n✔ [7164/7267] Built MathlibTest.Use (1.1s)\n✔ [7165/7267] Built MathlibTest.polyrith (1.1s)\n✔ [7166/7267] Built MathlibTest.CategoryTheory.MonoidalComp (1.1s)\n✔ [7167/7267] Built MathlibTest.CategoryTheory.ToApp (1.3s)\n(...)\n✔ [7424/7462] Built MathlibTest.deriving_countable (1.3s)\n✔ [7425/7462] Built MathlibTest.enat_to_nat (1.2s)\n✔ [7426/7462] Built MathlibTest.linarith (12s)\n✔ [7427/7462] Built MathlibTest.norm_num_rpow (1.5s)\n✔ [7428/7462] Built MathlibTest.conv (467ms)\n✔ [7429/7462] Built MathlibTest.mod_cases (1.0s)\n✔ [7430/7462] Built MathlibTest.Contrapose (786ms)\n✔ [7431/7462] Built MathlibTest.DefEqTransformations (888ms)\n✔ [7432/7462] Built MathlibTest.eval_elab (1.2s)\n✔ [7433/7462] Built MathlibTest.DeprecateTo (514ms)\n✔ [7434/7462] Built MathlibTest.rsuffices (789ms)\n✔ [7435/7462] Built MathlibTest.Monotonicity (1.5s)\n✔ [7436/7462] Built MathlibTest.apply_congr (922ms)\n✔ [7437/7462] Built MathlibTest.ErwQuestion (469ms)\n✔ [7438/7462] Built MathlibTest.Find (10s)\n✔ [7439/7462] Built MathlibTest.linear_combination (6.4s)\n✔ [7440/7462] Built MathlibTest.linear_combination' (3.6s)\n✔ [7441/7462] Built MathlibTest.antidiagonal (2.1s)\n✔ [7442/7462] Built MathlibTest.Clear_ (388ms)\n✔ [7443/7462] Built MathlibTest.ClearExclamation (488ms)\n✔ [7444/7462] Built MathlibTest.SplitIfs (614ms)\n✔ [7445/7462] Built MathlibTest.apply_fun (1.5s)\n✔ [7446/7462] Built MathlibTest.recover (371ms)\n✔ [7447/7462] Built ProofWidgets (533ms)\n✔ [7448/7462] Built MathlibTest.nontriviality (1.2s)\n✔ [7449/7462] Built MathlibTest.ApplyAt (1.2s)\n✔ [7450/7462] Built MathlibTest.apply_rules (1.1s)\n✔ [7451/7462] Built MathlibTest.abel (2.4s)\n✔ [7452/7462] Built MathlibTest.DeprecatedModuleTest (396ms)\n✔ [7453/7462] Built MathlibTest.CommDiag (935ms)\n✔ [7454/7462] Built MathlibTest.StringDiagram (1.3s)\n✔ [7455/7462] Built MathlibTest.tactic_timeout (7.6s)\n✔ [7456/7462] Built MathlibTest.norm_num (7.6s)\n✔ [7457/7462] Built MathlibTest.TautoSet (6.0s)\n✔ [7458/7462] Built MathlibTest.import_all (2.9s)\n✔ [7459/7462] Built MathlibTest.MathlibTestExecutable (2.0s)\n✔ [7460/7462] Built MathlibTest.reduce_mod_char (16s)\n</code></pre></div>\n<p>and then nothing further seems to happen (this step has been running for 15 minutes now; I had canceled and restarted the workflow previously in the hope that it was a transient issue).</p>\n<p>Any idea what could cause this?</p>",
        "id": 537162162,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1756754576
    },
    {
        "content": "<p>It did actually finish after a bit more than half an hour. The last  line is</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>✔ [7461/7462] Built MathlibTest.sqrt (1973s)\n</code></pre></div>\n<p>Can this be related to the new <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.ratSqrt#doc\">docs#Nat.ratSqrt</a> ? <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span></p>",
        "id": 537165361,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1756756568
    },
    {
        "content": "<p>Well the test works with a 1 million digit number...</p>",
        "id": 537169916,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1756759397
    },
    {
        "content": "<p>Hmmmm, it runs very quickly locally for me. I'll take a look.</p>",
        "id": 537179875,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756766942
    },
    {
        "content": "<p>I've double checked that it runs within seconds on my machine, but indeed CI takes 30 minutes. I will remove the test while investigating.</p>",
        "id": 537187099,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756772299
    },
    {
        "content": "<p>I remain mystified here. I've checked that the test is fast on my machine (macos), on <code>chonk</code> (linux), on hoskinson (the CI runner, linux), and even on hoskinson under the landrun wrapper.</p>",
        "id": 537189048,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756773707
    },
    {
        "content": "<p>Could it be a memory issue during the ci run, such that it has to hit swap a lot?</p>",
        "id": 537189724,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1756774250
    },
    {
        "content": "<p>Woah... on any of the above machines:</p>\n<ul>\n<li><code>lake env lean MathlibTest/sqrt.lean</code> is fast</li>\n<li><code>lake build MathlibTest</code> is fast</li>\n<li><code>lake test</code> is super slow</li>\n</ul>",
        "id": 537189783,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756774285
    },
    {
        "content": "<blockquote>\n<p>chore: temporarily turn off mysteriously slow test <a href=\"https://github.com/leanprover-community/mathlib4/pull/29226\">#29226</a></p>\n</blockquote>\n<p>until we work it out...</p>",
        "id": 537190730,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756774993
    }
]