[
    {
        "content": "<p>Since a few weeks, there is a <code>Mathlib.Init</code> file that is supposed to have minimal imports and is imported by virtually any file in mathlib, except for a handful of exceptions (such as the style linters).</p>\n<p>However, there are currently 9 files that neither import, nor are imported by <code>Mathlib.Init</code> (with the exception of <code>Mathlib.Init</code> itself):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">DList</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Notation</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Stream</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Deprecated</span><span class=\"bp\">.</span><span class=\"n\">Combinator</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">AdmitLinter</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">FlexibleLinter</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">TextBased</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">StacksAttribute</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Util</span><span class=\"bp\">.</span><span class=\"n\">AssertExistsExt</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>I am responsible for adding some linters and some extension after <code>Mathlib.Init</code> was created.  Nevertheless, should there be a CI step that makes sure that the list above stays empty?</p>",
        "id": 469143703,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1725984920
    },
    {
        "content": "<p>I think it suffices to check this by hand once every while (3~4 times per year?).</p>",
        "id": 469162092,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725989186
    },
    {
        "content": "<p>I think it is unlikely that it will cause anybody trouble that this list is non-empty in practice.</p>",
        "id": 469162225,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725989220
    },
    {
        "content": "<p>Ok, maybe it can be on a cron job, like lean4checker, but with a slower frequency.</p>",
        "id": 469216577,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726003209
    },
    {
        "content": "<p>What would the cronjob do, if the list is non-empty?</p>",
        "id": 469265575,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726024491
    },
    {
        "content": "<p>It could add <code>import Mathlib.Init</code> to the import-earliest files that do not import <code>Mathlib.Init</code> and create a PR, maybe?</p>",
        "id": 469273818,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1726027472
    },
    {
        "content": "<p>Sure, but it could also add those files to <code>Mathlib.Init</code>. And I guess it might be 50-50 which option a file needs... so I think we can't really automate this</p>",
        "id": 469561363,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726120154
    }
]