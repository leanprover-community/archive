[
    {
        "content": "<p>There are quite a few predicates involving <code>Filter</code>s that can be written in several ways and Mathlib uses all these ways without clear guidelines. It would be nice to decide which forms are preferred, either everywhere through the library or depending on a use case.</p>\n<ul>\n<li>membership: we use<ul>\n<li><code>s âˆˆ f</code> / <code>{x | p x} âˆˆ f</code></li>\n<li><code>âˆ€á¶  x in f, x âˆˆ s</code> / <code>âˆ€á¶  x in f, p x</code></li>\n<li><code>f â‰¤ ğ“Ÿ s</code> / <code>f â‰¤ ğ“Ÿ {x | p x}</code></li>\n</ul>\n</li>\n<li>set equality along a filter; while for functions we consistently(?) use <code>f =á¶ [l] g</code>, for sets we use<ul>\n<li><code>s =á¶ [l] t</code>, mostly in the measure theory part of the library, with <code>l = ae Î¼</code>;</li>\n<li><code>Î¼ (s âˆ† t) = 0</code> (rarely<del>, because <code>symmDiff</code> is a recent addition to the library</del>)</li>\n<li><code>ğ“[s] x = ğ“[t] x</code></li>\n<li><code>s âˆˆ ğ“[t] x</code> and <code>t âˆˆ ğ“[s] x</code> as two separate assumptions</li>\n</ul>\n</li>\n<li>set inequality along a filter; similarly, we use<ul>\n<li><code>s â‰¤áµ[Î¼] t</code>;</li>\n<li><code>Î¼(t \\ s) = 0</code>;</li>\n<li><code>ğ“[s] x â‰¤ ğ“[t] x</code>;</li>\n<li><code>t âˆˆ ğ“[s] x</code>.</li>\n</ul>\n</li>\n</ul>\n<p>Each way has its pros and cons but I think that consistency is better than the current \"each def/theorem uses whatever its author likes more\" approach.</p>",
        "id": 452992936,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721573116
    },
    {
        "content": "<p>I think your second bullet has a typo, it doesn't mention <code>f</code></p>",
        "id": 452994748,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1721574018
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.28simp.29.20normal.20forms.20for.20expressions.20about.20.60Filter.60s/near/452992936\">said</a>:</p>\n<blockquote>\n<ul>\n<li><code>Î¼ (s âˆ† t) = 0</code> (rarely, because <code>symmDiff</code> is a recent addition to the library)</li>\n</ul>\n</blockquote>\n<p>What? <a href=\"https://github.com/leanprover-community/mathlib/pull/6469\">It was added in 2021</a>!</p>",
        "id": 453003150,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1721578286
    },
    {
        "content": "<p>And made its way to measure theory library in 2022 <a href=\"https://github.com/leanprover-community/mathlib/pull/16918\">!3#16918</a></p>",
        "id": 453003670,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721578530
    },
    {
        "content": "<p>I guess adoption is slow here, and even slower since Patrick scoped the notation...</p>",
        "id": 453005485,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1721579085
    },
    {
        "content": "<p>This is a tricky question. The only one I really want to get rid of is <code>s âˆˆ f</code>/ <code>{x | p x} âˆˆ f</code>.</p>",
        "id": 453104275,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721633934
    },
    {
        "content": "<p>About your second list, I am not shocked that things are expressed differently in topology and measure theory.</p>",
        "id": 453104367,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721633981
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.28simp.29.20normal.20forms.20for.20expressions.20about.20.60Filter.60s/near/453104275\">said</a>:</p>\n<blockquote>\n<p>This is a tricky question. The only one I really want to get rid of is <code>s âˆˆ f</code>/ <code>{x | p x} âˆˆ f</code>.</p>\n</blockquote>\n<p>I can try to drop <code>Membership</code> (probably, deprecating it first) and migrate to <code>Filter.Eventually</code>.</p>",
        "id": 453180835,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721656247
    },
    {
        "content": "<p>But we'll need guidelines about <code>Eventually</code> vs <code>â‰¤ principal _</code>. I would use <code>Eventually</code> everywhere but I know that you <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>  prefer <code>â‰¤ principal _</code> in some cases (e.g., in the definition of <code>IsCompact</code>).</p>",
        "id": 453181550,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721656479
    },
    {
        "content": "<p>This may be a bit too drastic.</p>",
        "id": 453181560,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721656482
    },
    {
        "content": "<p>And I remember I was so proud when I managed to define that membership notation instead of using <code>s âˆˆ f.sets</code>. I think this was during the first Lean Together meeting. <span aria-label=\"older man\" class=\"emoji emoji-1f474\" role=\"img\" title=\"older man\">:older_man:</span></p>",
        "id": 453182049,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721656622
    },
    {
        "content": "<p>Then what do you suggest?</p>",
        "id": 453182164,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721656660
    },
    {
        "content": "<p>Not much, I think this is a difficult question.</p>",
        "id": 453182324,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721656708
    },
    {
        "content": "<p>I would like to see <code>s âˆˆ f</code> less often but still let people use it</p>",
        "id": 453182393,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1721656733
    },
    {
        "content": "<p>I don't see a way to reduce usage of <code>s âˆˆ f</code> without deprecating (all lemmas about) it.</p>",
        "id": 453182977,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721656897
    },
    {
        "content": "<p>... and possibly replacing <code>Filter.sets</code> with <code>Filter.Eventually</code>.</p>",
        "id": 453183031,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721656916
    },
    {
        "content": "<p>I think migrating to <code>Filter.Eventually</code> for the first set is nice, but I also think it's fine to let people use membership or <code>â‰¤ ğ“Ÿ</code></p>",
        "id": 453183185,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1721656950
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.28simp.29.20normal.20forms.20for.20expressions.20about.20.60Filter.60s/near/453104367\">said</a>:</p>\n<blockquote>\n<p>About your second list, I am not shocked that things are expressed differently in topology and measure theory.</p>\n</blockquote>\n<p>AFAIR, I came up with this trick for measure theory. Topology&amp;analysis had their conventions set up by then.</p>",
        "id": 453192975,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1721659128
    }
]