[
    {
        "content": "<p>Most docstrings in mathlib (at least from my experience) seem <em>not</em> to use LaTeX.  What is the desired convention here?  Is LaTeX something to be desired?  I have no problem using LaTeX but wondering if it is something that people even want. </p>\n<p>When reading the source code of mathlib, I would rather not have to read LaTeX source code because I have to decipher the LaTeX source in my mind while reading the docstring but when reading the generated docs I definitely prefer reading the rendered LaTeX.  Thus, since I normally read the source code and not the generated docs I would tend to side with not using LaTeX.</p>\n<p>Curious where others stand/sit on this issue?</p>\n<p>An aside, I would love to see a way to embed rended LaTeX within the lean source files but not sure how this would even be implemented or if at all possible??</p>",
        "id": 418938317,
        "sender_full_name": "Newell Jensen",
        "timestamp": 1706656874
    },
    {
        "content": "<p>In mathlib3, if you wrote markdown with LaTeX in doc strings (embedded in the same way as you might write a question or answer on math.stackexchange or mathoverflow), doc-gen3 was able to generate HTML with the LaTeX rendered by MathJax. </p>\n<p>In principle we could with some effort port the same collection of hacks over to doc-gen4, but my impression is it's probably better to wait until <a href=\"https://github.com/leanprover/verso\">Verso</a> is ready for this sort of thing.</p>",
        "id": 418941228,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1706658460
    },
    {
        "content": "<p>Looks like LaTeX in docstrings is still working for mathlib4 from what I can see <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Lie/CartanMatrix.html\">here for example</a></p>\n<p>But maybe you are referring to something else?</p>",
        "id": 418942042,
        "sender_full_name": "Newell Jensen",
        "timestamp": 1706658926
    },
    {
        "content": "<p>(Ah, I guess doc-gen4 has some LaTeX + markdown capabilities, but compare your example to <a href=\"https://leanprover-community.github.io/mathlib_docs/algebra/lie/cartan_matrix.html#lie-algebras-from-cartan-matrices\">the output of doc-gen3</a>.)</p>\n<p>Reading over your first message in the thread again, I think I missed the point the first time around. Sorry for the noise!</p>",
        "id": 418947699,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1706662209
    },
    {
        "content": "<p>Yeah, there are some differences there between the outputs. No worries! Better than silence ;P</p>",
        "id": 418947954,
        "sender_full_name": "Newell Jensen",
        "timestamp": 1706662420
    },
    {
        "content": "<p>A good compromise is sometimes to use latex with unicode math</p>",
        "id": 418976783,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1706683206
    },
    {
        "content": "<p>I only resort to LaTex after convincing myself that pure unicode just can't do the job. This usually happens only in longer text, such as module doc strings.</p>",
        "id": 419010384,
        "sender_full_name": "Oliver Nash",
        "timestamp": 1706697172
    },
    {
        "content": "<p>A rule I'd propose is to use unicode (in backticks) if it's (almost) valid lean syntax, otherwise use latex (preferring unicode math where possible). Using pseudo code that's neither correct lean nor pretty LaTeX seems like a bad compromise to me</p>",
        "id": 419124974,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1706736000
    },
    {
        "content": "<p>Often a good use of LaTeX in a docstring is when the lean statement is becoming hard to read, since someone reading the web docs can most likely read the \"regular math\" faster than the lean statement</p>",
        "id": 419125301,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1706736124
    },
    {
        "content": "<p>Heyhey, I am sorry to resurrect an old thread, but I just noticed that <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Distribution/SchwartzSpace.html#Schwartz-space\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Distribution/SchwartzSpace.html#Schwartz-space</a> had its LaTeX replaced by backticks. My personal rule was similar to what Eric wrote above and so I am slightly confused because the change IMO contradicts that. I have no particularly strong opinions on the matter, but is it the consensus now that we only use LaTeX only if backticks are almost impossible?</p>",
        "id": 563603163,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1765613409
    },
    {
        "content": "<p>I guess that was <a href=\"https://github.com/leanprover-community/mathlib4/pull/32299\">#32299</a></p>",
        "id": 563610135,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1765622391
    },
    {
        "content": "<p>(cc <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> who merged it and <span class=\"user-mention\" data-user-id=\"481963\">@David Loeffler</span> who PR'd it)</p>",
        "id": 563610250,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1765622499
    },
    {
        "content": "<p>I wasn't aware of this previous debate,  sorry. In the file in question, I thought \"... all multiindices $Œ±, Œ≤$\" definitely didn't need to be latexed, but with the other formula I agree it's less clear-cut and I probably should have left it be. If <span class=\"user-mention\" data-user-id=\"412682\">@Moritz Doll</span> wants it changed back I certainly have no objection.</p>",
        "id": 563615108,
        "sender_full_name": "David Loeffler",
        "timestamp": 1765627358
    },
    {
        "content": "<p>Same for me</p>",
        "id": 563624154,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1765635630
    },
    {
        "content": "<p>I am a big fan of Unicode and avoid LaTeX when possible.</p>\n<p>My opinion could be heavily biased by the fact that I read the code much more often than the autogenerated docs. One of the reason (but definitely not the only reason) is that searching in the docs gives me \"<a href=\"http://\">Cannot fetch data, please check your network connection. TypeError: Failed to fetch</a>\" almost every time, and so, when I want to look up something in the docs, I usually go to Zulip and send a message to myself with docs hashtag keyword, which works almost always; however, as this process is time-consuming, I almost always end up searching in the code directly.</p>",
        "id": 563629120,
        "sender_full_name": "Martin Dvo≈ô√°k",
        "timestamp": 1765640594
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417654\">Martin Dvo≈ô√°k</span> <a href=\"#narrow/channel/287929-mathlib4/topic/LaTeX.20in.20docstrings/near/563629120\">said</a>:</p>\n<blockquote>\n<p>I usually go to Zulip and send a message to myself with docs hashtag keyword, which works almost always; however, as this process is time-consuming, I almost always end up searching in the code directly.</p>\n</blockquote>\n<p>You can skip Zulip if you use the same template it uses for docs URLs:<br>\n<code>https://leanprover-community.github.io/mathlib4_docs/find/?pattern=your-query-here#doc</code><br>\nI think it's even possible to add this as a \"search engine\" in most browsers, which should let you type e.g. \"docs\" then press tab, write the query and press enter</p>",
        "id": 563633347,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1765644599
    },
    {
        "content": "<p>I usually use loogle as a faster docs search</p>",
        "id": 563667134,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1765692334
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"481963\">David Loeffler</span> <a href=\"#narrow/channel/287929-mathlib4/topic/LaTeX.20in.20docstrings/near/563615108\">said</a>:</p>\n<blockquote>\n<p>I wasn't aware of this previous debate,  sorry. In the file in question, I thought \"... all multiindices $Œ±, Œ≤$\" definitely didn't need to be latexed, but with the other formula I agree it's less clear-cut and I probably should have left it be. If <span class=\"user-mention silent\" data-user-id=\"412682\">Moritz Doll</span> wants it changed back I certainly have no objection.</p>\n</blockquote>\n<p>No worries! I am less interested in what to do in this particular file (I liked how it was, but that is a very personal preference), but more what the guiding principles are. I was using LaTeX there because the definition with multiindices is not at all what we do in mathlib, so I was thinking that writing <code>Œ±, Œ≤</code> instead of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œ±</mi><mo separator=\"true\">,</mo><mi>Œ≤</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha, \\beta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">Œ±</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">Œ≤</span></span></span></span> is misleading because it implies the definition is using multiindices.<br>\nThere is a closely related question, namely <em>where</em> LaTeX is appropriate. I wouldn't want to use it in doc-strings for definitions or theorems, but only in module docstrings, basically the module docstring says what maths concept is being formalized and can refer to the formal and informal world, whereas the theorems and definitions only refer to the formalized world.<br>\nBut as I said this is purely my own way of doing things and I think it would be nice to talk about this and I am interested in other opinions.</p>",
        "id": 563713832,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1765748553
    },
    {
        "content": "<p>Personally I'm a strong believer in \"use unicode math if at all possible\" (only switching to LaTeX if the unicode version is completely illegible). My reason for this is that swapping between dialects involves a certain amount of friction ‚Äì¬†particularly with things like calligraphic alphabets, where understanding the text might crucially require you to work out that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">A</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{A}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\">A</span></span></span></span> and <code>ùíú</code> are supposed to be the same as each other, but both are different from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">A</mi></mrow><annotation encoding=\"application/x-tex\">\\mathscr{A}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7em;\"></span><span class=\"mord mathscr\" style=\"margin-right:0.22925em;\">A</span></span></span></span>. So I prefer to keep this code-switching to a minimum ‚Äì and since a very large chunk of the mathematical text in mathlib is absolutely required to be in unicode, that means playing along with that in docstrings etc as well. But clearly there is room for multiple views on this; we can adopt the rule \"contributor decides for their own contributions\" (as we do for American / British English in spelling, etc).</p>",
        "id": 563743836,
        "sender_full_name": "David Loeffler",
        "timestamp": 1765780924
    },
    {
        "content": "<p>(<span class=\"user-mention\" data-user-id=\"412682\">@Moritz Doll</span> I'm curious whether your thumbs-up is pointing to the last sentence of my post, the rest of it, or both :-) )</p>",
        "id": 563744459,
        "sender_full_name": "David Loeffler",
        "timestamp": 1765781373
    },
    {
        "content": "<p>Haha, mainly as a I can see you point (even though I disagree on the conclusion). I think that switching a lot is not good, but I don't think that that implies not to use LaTeX at all. In the file that started the discussion, the module docstring was fully in LaTeX (if I remember correctly) and the contents there were somewhat far from the actual formalization.<br>\nI also agree that having some contributer's choice is good.<br>\nFinally, I respect opinions I disagree with (<span aria-label=\"thumbs down\" class=\"emoji emoji-1f44e\" role=\"img\" title=\"thumbs down\">:thumbs_down:</span> feels borderline passive-aggressive to me, when used for anything other than \"you are factually wrong\") <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 563745181,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1765781920
    },
    {
        "content": "<p>Here is a PR to revert the change: <a href=\"https://github.com/leanprover-community/mathlib4/pull/32890\">#32890</a></p>",
        "id": 563750834,
        "sender_full_name": "David Loeffler",
        "timestamp": 1765784685
    },
    {
        "content": "<p>I like a tradition of \"instead of <span aria-label=\"-1\" class=\"emoji emoji-1f44e\" role=\"img\" title=\"-1\">:-1:</span>-ing a post, write one explaining why you disagree (which can be in friendly words!) - and then other can <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> that one. Very often, that works very well.</p>",
        "id": 563761138,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1765788170
    },
    {
        "content": "<p>The rust project disabled the <span aria-label=\"-1\" class=\"emoji emoji-1f44e\" role=\"img\" title=\"-1\">:-1:</span> reaction on github for this reason.</p>",
        "id": 563761209,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1765788187
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/287929-mathlib4/topic/LaTeX.20in.20docstrings/near/563761209\">said</a>:</p>\n<blockquote>\n<p>The rust project disabled the <span aria-label=\"-1\" class=\"emoji emoji-1f44e\" role=\"img\" title=\"-1\">:-1:</span> reaction on github for this reason.</p>\n</blockquote>\n<p>I thought you couldn't configure the standard 8 reactions</p>",
        "id": 563763897,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1765788945
    },
    {
        "content": "<p>It might be that github has disabled <span aria-label=\"-1\" class=\"emoji emoji-1f44e\" role=\"img\" title=\"-1\">:-1:</span> themselves now. (Rust did this a number of years ago; maybe that was different then.)</p>",
        "id": 563766651,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1765789791
    }
]