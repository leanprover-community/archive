[
    {
        "content": "<p>The following seems to be missing lemmas, but I am a bit suspicious. Is there a reason they shouldn't exist? </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">bot_eq_zero'''</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CompleteLattice</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsOrderedAddMonoid</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">CanonicallyOrderedAdd</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⊥</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"c1\">-- `exact?`, `simp` and all versions of `bot_eq_zero` fail here</span>\n<span class=\"w\">  </span><span class=\"n\">bot_le</span><span class=\"bp\">.</span><span class=\"n\">antisymm</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">zero_le</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">bot_eq_zero''''</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CompleteLinearOrder</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsOrderedAddMonoid</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">CanonicallyOrderedAdd</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⊥</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"c1\">-- `exact?`, `simp` and all existing versions of `bot_eq_zero` fail here</span>\n<span class=\"w\">  </span><span class=\"n\">bot_eq_zero'''</span>\n</code></pre></div>",
        "id": 512327621,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1744725406
    },
    {
        "content": "<p>You're in trouble for the first one, there's an instance diamond</p>",
        "id": 512328560,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744725605
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CanonicallyOrderedAdd.toOrderBot#doc\">docs#CanonicallyOrderedAdd.toOrderBot</a> is a bad instance</p>",
        "id": 512328661,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744725629
    },
    {
        "content": "<p>(it used to be ok, but <a href=\"https://github.com/leanprover-community/mathlib4/pull/17444\">#17444</a> unbundled it which made it bad)</p>",
        "id": 512328920,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744725689
    },
    {
        "content": "<p>Oh yeah, I have fixed that instance once already <span aria-label=\"raised\" class=\"emoji emoji-1f928\" role=\"img\" title=\"raised\">:raised:</span></p>",
        "id": 512329037,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1744725715
    },
    {
        "content": "<p>(cc <span class=\"user-mention\" data-user-id=\"455791\">@Yuyang Zhao</span>)</p>",
        "id": 512329077,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744725722
    },
    {
        "content": "<p>I don't think I've wrapped my head around this. What does the 'good' version of this look like?</p>",
        "id": 512331483,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1744726260
    },
    {
        "content": "<p>The good version is that <code>CanonicallyOrderedAdd.toOrderBot</code> is deleted and your statements above are solved with <code>bot_eq_zero</code></p>",
        "id": 512332408,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744726451
    },
    {
        "content": "<p>Ok, I can remove it. Is it better as a <code>def</code> or just removed completely?</p>",
        "id": 512360775,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1744733271
    },
    {
        "content": "<p>The latter involves fixing a few proofs that use lemmas about <code>OrderBot</code>.</p>",
        "id": 512361035,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1744733340
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/24094\">#24094</a> remove them.</p>",
        "id": 512384036,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1744740215
    },
    {
        "content": "<p>As does <a href=\"https://github.com/leanprover-community/mathlib4/pull/24090\">#24090</a></p>",
        "id": 512384823,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744740449
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"329425\">@Peter Nelson</span>, you made the mistake of not linking to the PR from the Zulip thread to prevent someone else repeating your work, while <span class=\"user-mention\" data-user-id=\"455791\">@Yuyang Zhao</span>, you forgot to link in the other direction!</p>",
        "id": 512385396,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744740631
    },
    {
        "content": "<p>How about merging your changes that avoid <code>OrderBot</code> assumptions into <a href=\"https://github.com/leanprover-community/mathlib4/pull/24094\">#24094</a> and adding co-authored-by? <span class=\"user-mention\" data-user-id=\"329425\">@Peter Nelson</span></p>",
        "id": 512387701,
        "sender_full_name": "Yuyang Zhao",
        "timestamp": 1744741363
    },
    {
        "content": "<p>Doh! I got distracted while working on the PR and forgot to link it. Thanks for adding me and my code to yours anyway, <span class=\"user-mention\" data-user-id=\"455791\">@Yuyang Zhao</span> .</p>",
        "id": 512427967,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1744757966
    },
    {
        "content": "<p><span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 512450777,
        "sender_full_name": "vxctyxeha",
        "timestamp": 1744772540
    }
]