[
    {
        "content": "<p>With <code>pp.analyze true</code> the output of delaboration doesn't survive round-trip. Can we improve this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">pp</span><span class=\"bp\">.</span><span class=\"n\">analyze</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- ⊢ ∑ i, ↑i = 3</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n</code></pre></div>\n<p>The problem was found here: <a href=\"#narrow/channel/113489-new-members/topic/.60rewrite.60.20doesn't.20match.20in.20a.20seemingly.20matching.20goal\">#new members &gt; &#96;rewrite&#96; doesn't match in a seemingly matching goal</a></p>",
        "id": 564618872,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766120055
    },
    {
        "content": "<p>Hmm, I've tried using <code>trace</code> or <code>logInfo</code> in Delab function, but neither seem to work (they compile, but there's no output in infoview). Does anyone know of a way to add debug logging to Delab function?</p>",
        "id": 564621522,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766122426
    },
    {
        "content": "<p>You can use <code>dbgTrace</code> I think</p>",
        "id": 564625137,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1766125112
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/pp.2Eanalyze.20for.20summation.20notation/near/564625137\">said</a>:</p>\n<blockquote>\n<p>You can use <code>dbgTrace</code> I think</p>\n</blockquote>\n<p><del>Doesn't work either.</del></p>",
        "id": 564625985,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766125589
    },
    {
        "content": "<p>Ah, no, sorry, it works! I've accidentally edited <code>Finset.prod</code> instead of <code>Finset.sum</code>.</p>",
        "id": 564627202,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766126050
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/33070\">#33070</a></p>",
        "id": 564631046,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1766128009
    }
]