[
    {
        "content": "<p>Given an analytic function at a point, <a href=\"https://github.com/girving/ray/blob/main/Ray/Analytic/Analytic.lean\">https://github.com/girving/ray/blob/main/Ray/Analytic/Analytic.lean</a> defines <code>orderAt</code> to be the least <code>n</code> s.t. the <code>n</code>th power series coefficient is nonzero, and <code>leadingCoeff</code> to be that nonzero coefficient.  Currently both are defined only for 1D power series:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"sd\">/-- The order of a zero at a point.</span>\n<span class=\"sd\">    We define this in terms of the function alone so that expressions involving order can</span>\n<span class=\"sd\">    depend only on `f`. -/</span>\n<span class=\"kd\">def</span> <span class=\"n\">orderAt</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"bp\">ùïú</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">E</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"bp\">ùïú</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñï</span> <span class=\"o\">:=</span>\n  <span class=\"k\">if</span> <span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">AnalyticAt</span> <span class=\"bp\">ùïú</span> <span class=\"n\">f</span> <span class=\"n\">c</span> <span class=\"k\">then</span> <span class=\"o\">(</span><span class=\"n\">choose</span> <span class=\"n\">p</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">order</span> <span class=\"k\">else</span> <span class=\"mi\">0</span>\n\n<span class=\"sd\">/-- The leading nonzero coefficient of `f`'s power series -/</span>\n<span class=\"kd\">def</span> <span class=\"n\">leadingCoeff</span> <span class=\"o\">(</span><span class=\"n\">f</span> <span class=\"o\">:</span> <span class=\"bp\">ùïú</span> <span class=\"bp\">‚Üí</span> <span class=\"n\">E</span><span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"bp\">ùïú</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"n\">E</span> <span class=\"o\">:=</span>\n  <span class=\"o\">((</span><span class=\"n\">Function.swap</span> <span class=\"n\">dslope</span> <span class=\"n\">c</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">[</span><span class=\"n\">orderAt</span> <span class=\"n\">f</span> <span class=\"n\">c</span><span class=\"o\">])</span> <span class=\"n\">f</span> <span class=\"n\">c</span>\n</code></pre></div>\n<p>I also prove a variety of lemmas about that, such as that factoring out a monomial power does what one expects.</p>\n<ol>\n<li>Do these already exist?</li>\n<li>If not, should I upstream them in some form?</li>\n</ol>\n<p>I think the formulations are a bit weird unless one is living only in analytic function land: I could certainly define them more generally to apply to not-necessarily-analytic functions.  So I expect if I should upstream them, I need to refactor a significant amount first.</p>",
        "id": 398757161,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1698350085
    },
    {
        "content": "<p>There is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=HasFPowerSeriesAt.iterate_dslope_fslope_ne_zero#doc\">docs#HasFPowerSeriesAt.iterate_dslope_fslope_ne_zero</a> which would benefit from <code>leadingCoeff</code>, and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=HasFPowerSeriesAt.eq_pow_order_mul_iterate_dslope#doc\">docs#HasFPowerSeriesAt.eq_pow_order_mul_iterate_dslope</a> is a factoring.</p>\n<p>About generalizing, what would make more sense, setting it to 0 if the function is not analytic, or doing some complicated incantations so that a C^5 functions can e.g. have order 3 it its first few derivatives vanish?</p>",
        "id": 398759763,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1698351059
    },
    {
        "content": "<p>I'm not sure about the generalizations: one problem is that nonanalytic functions can vanish to fractional orders (or worse).  But it does seem pretty annoying if the definition doesn't apply to just differentiable functions at least some of the time.</p>",
        "id": 398760044,
        "sender_full_name": "Geoffrey Irving",
        "timestamp": 1698351178
    }
]