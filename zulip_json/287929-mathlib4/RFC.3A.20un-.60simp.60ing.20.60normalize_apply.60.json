[
    {
        "content": "<p>So I was looking at some porting notes in <code>Algebra.GCDMonoid.Basic</code> and noticed that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=normalize_apply#doc\">docs#normalize_apply</a> seems to get in the way of simplification quite often. It states <code>normalize x = x * normUnit x</code>. I don't like how it turns a thing I'm familiar with, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=normalize#doc\">docs#normalize</a>, into a longer expression involving a rather mysterious <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NormalizationMonoid.normUnit#doc\">docs#NormalizationMonoid.normUnit</a>. Moreover, we have quite a few lemmas that are explicitly given higher priority than <code>normalize_apply</code>.</p>\n<p>Do we really want this as a <code>simp</code> lemma?</p>\n<p>I opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/18006\">#18006</a> as a proof of concept PR to remove the <code>simp</code> attribute and it's about evenly matched between removals of <code>simp [- normalize_apply]</code> and additions of <code>simp [normalize_apply]</code>.</p>",
        "id": 478069373,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1729519409
    },
    {
        "content": "<p>Similarly for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Localization.mk_eq_monoidOf_mk%27_apply#doc\">docs#Localization.mk_eq_monoidOf_mk'_apply</a> which we also have to carefully avoid when simplifying (although I am more sympathetic to keeping this around, and simply updating the <code>simp</code> set so it is more confluent).</p>",
        "id": 478069837,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1729519513
    },
    {
        "content": "<p>I never liked it much, so +1 from me</p>",
        "id": 478071382,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729519892
    },
    {
        "content": "<p>(Probably Ya-el will point out it has <code>x</code> twice on the RHS)</p>",
        "id": 478071474,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729519915
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"238446\">Anne Baanen</span> <a href=\"#narrow/channel/287929-mathlib4/topic/RFC.3A.20un-.60simp.60ing.20.60normalize_apply.60/near/478069837\">said</a>:</p>\n<blockquote>\n<p>Similarly for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Localization.mk_eq_monoidOf_mk%27_apply#doc\">docs#Localization.mk_eq_monoidOf_mk'_apply</a> which we also have to carefully avoid when simplifying (although I am more sympathetic to keeping this around, and simply updating the <code>simp</code> set so it is more confluent).</p>\n</blockquote>\n<p>See PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/18015\">#18015</a>.</p>",
        "id": 478077394,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1729521370
    },
    {
        "content": "<p>There seems to be no objection over the past days, should we go ahead with the change?</p>",
        "id": 478455722,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1729677074
    }
]