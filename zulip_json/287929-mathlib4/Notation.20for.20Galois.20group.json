[
    {
        "content": "<p>Would people be happy in the notation <code>Gal(L|K)</code> for <code>L ≃ₐ[K] L</code>? I think <code>L ≃ₐ[K] L</code> is quite unreadable both for beginners and more experienced users and this issue popped up in the CFT workshop two months ago.</p>",
        "id": 543192520,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759697953
    },
    {
        "content": "<p>I always support more notation</p>",
        "id": 543192557,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759697989
    },
    {
        "content": "<p>one question that would pop up is whether the delab should happen as well, and whether that would produce \"false positives\"</p>",
        "id": 543192607,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759698030
    },
    {
        "content": "<p>That would be my next question. When do we want this notation? Are we happy to write <code>Gal(L|K)</code> for non galois extensions? Are we happy to write <code>Gal(B|A)</code> for <code>B</code>a galois algebra over <code>A</code> (e.g. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"script\">O</mi><mi>L</mi></msub><mi mathvariant=\"normal\">/</mi><msub><mi mathvariant=\"script\">O</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathcal{O}_L/\\mathcal{O}_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">L</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi mathvariant=\"normal\">/</mi><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">L/K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> galois)?</p>",
        "id": 543193552,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759699126
    },
    {
        "content": "<p>well are you suggesting that we might want to try to synthesize some instance inside the delaborator</p>",
        "id": 543193649,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759699237
    },
    {
        "content": "<p>I am suggesting we should first figure out when we want to use this notation. How to write the delaborator will depend on this.</p>",
        "id": 543193688,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759699298
    },
    {
        "content": "<p>well practicality is a concern too, because it seems way easier (and \"morally purer\" whatever that means) to just elab and delab unconditionally, and assuming that I would not mind delaborating globally</p>\n<p>(or maybe we can also <code>scoped</code> the notation to <code>IsGalois</code>)</p>",
        "id": 543193816,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759699487
    },
    {
        "content": "<p>so my current suggestion is to <code>scoped</code> the notation to <code>IsGalois</code> and delab unconditionally</p>",
        "id": 543193837,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759699517
    },
    {
        "content": "<p>This doesn't answer the question about when we want to use (as in write down) the notation. <br>\nCan we figure this out before we jump to implementation details?</p>",
        "id": 543193907,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759699609
    },
    {
        "content": "<p>I think mathematically people would prefer <code>Aut(B|A)</code> if it isn't a (finite) galois extension of fields</p>",
        "id": 543194564,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759700346
    },
    {
        "content": "<p>we could write <code>Aut(B|A)</code> in general and <code>Gal(L|K)</code> when it is finite galois field-ext</p>",
        "id": 543194590,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759700375
    },
    {
        "content": "<p>and the group theory one can be written <code>Aut(G)</code></p>",
        "id": 543195018,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759700835
    },
    {
        "content": "<p>Surely Gal(L/K) (not |) and Aut_A(B) are more standard?</p>",
        "id": 543196126,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759702250
    },
    {
        "content": "<p>I think we've decided that <code>[]</code> is the lean equivalent of pseudo-tex <code>_</code>?</p>",
        "id": 543196171,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759702310
    },
    {
        "content": "<p>I also would prefer <code>Gal(L/K)</code> but the parser doesn't like that and confuses it with division.</p>",
        "id": 543196195,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759702339
    },
    {
        "content": "<p>In <span class=\"user-mention\" data-user-id=\"699016\">@Edison Xie</span>'s BrauerGroup repo, I've introduced the notation <code>Gal(L, K)</code> and it's been tremendously useful in terms of readability (although it does trigger for non-Galois extensions)</p>",
        "id": 543220148,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1759727698
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Notation.20for.20Galois.20group/near/543196195\">said</a>:</p>\n<blockquote>\n<p>I also would prefer <code>Gal(L/K)</code> but the parser doesn't like that and confuses it with division.</p>\n</blockquote>\n<p>Just playing around here, but</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"s2\">\"Gal(\"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">:</span><span class=\"n\">prec</span><span class=\"w\"> </span><span class=\"s2\">\"/\"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"s2\">\")\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">term</span>\n</code></pre></div>\n<p>with <code>prec</code> strictly above <code>70</code> (division’s precedence) seems to work. :) (If we want <code>Gal(L x / K)</code> to work, we want to keep it below <code>arg</code> (<code>1023</code>)).</p>\n<p>(But <code>Gal(L, K)</code> might actually be more readable in Lean source.)</p>",
        "id": 543224054,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1759730795
    },
    {
        "content": "<p>Slightly unrelated, but I think that in general moving over to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsGaloisGroup#doc\">docs#IsGaloisGroup</a> will help reduce the pain of <code>L ≃ₐ[K] L</code> everywhere.</p>",
        "id": 543224055,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1759730795
    },
    {
        "content": "<p>Note: in the literature, both traditions exist, either of calling <code>Gal</code> the group of a non-Galois extension, or of having two notations for <code>Aut</code>, namely using <code>Gal</code> when it is Galois. The first one is OK, I believe, and consistent with the fact that in his framework, Galois only considered Galois extensions. (The group he considered was the group of permutations of all roots that preserve algebraic relations.)</p>",
        "id": 543235509,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1759735870
    },
    {
        "content": "<p>I am slightly agains using <code>Gal</code> for <code>L ≃ₐ[K] L</code>, I must say. My main reasons are</p>\n<ul>\n<li>This goes a little bit agains the general Mathlib philosophy of living with generality even if it makes us depart slightly from math conventions: the typical example is <code>Module</code> instead of Vector Space. Although a bit puzzling at the beginning, I like it very much. Another is <code>IsFractionRing</code> without the need of <code>FractionField</code>.</li>\n<li>The second is that it does not convey any information about the assumptions, unlike the <code>_a</code> in the <code>L ≃ₐ[K] L</code>: yet, if we're going to set this notation generally, we would end up with, for instance, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Q</mi><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">Z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Gal}(\\mathbb{Q}/\\mathbb{Z})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Gal</span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">Q</span><span class=\"mord\">/</span><span class=\"mord mathbb\">Z</span><span class=\"mclose\">)</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">C</mi><mo stretchy=\"false\">[</mo><mi>X</mi><mo separator=\"true\">,</mo><mi>y</mi><mo stretchy=\"false\">]</mo><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">Z</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Gal}(\\mathbb{C}[X,y]/\\mathbb{Z}(X))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Gal</span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">C</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">]</span><span class=\"mord\">/</span><span class=\"mord mathbb\">Z</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">))</span></span></span></span> without a clear indication of what is meant.</li>\n</ul>\n<p>I certainly hear Thomas' point of view, but I would perhaps prefer sticking to local notations instead of global ones.</p>",
        "id": 543245159,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1759738646
    },
    {
        "content": "<p>I guess another way of saying Filippo's point: the argument for using <code>Gal(L|K)</code> instead of <code>L ≃ₐ[K] L</code> is that <code>L ≃ₐ[K] L</code> looks confusing. However <code>Gal(ℂ|ℤ)</code> also looks confusing (for different reasons).</p>",
        "id": 543246096,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759738874
    },
    {
        "content": "<p>I don't understand Filippo's first point but I totally agree with the second being potentially a problem. This is why I have been pushing us to have a discussion on when this notation is appropriate. For example <code>Gal(ℚ|ℤ)</code> definitely should not appear.</p>",
        "id": 543247273,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759739173
    },
    {
        "content": "<p>We can always discourage (i.e. forbidding in mathlib) to use <code>Gal(A|B)</code> unless <code>A</code> and <code>B</code> are fields (or whatever we want). The notation would still work, but in practice it is not used.</p>",
        "id": 543249115,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759739691
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Notation.20for.20Galois.20group/near/543247273\">said</a>:</p>\n<blockquote>\n<p>I don't understand the first point</p>\n</blockquote>\n<p>It doesn't look confusing to us, but all these little a's and square brackets are mathlibisms so they look confusing to the general reader.</p>",
        "id": 543249674,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759739851
    },
    {
        "content": "<p>Sorry I meant Filippo's first point.</p>",
        "id": 543249801,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759739884
    },
    {
        "content": "<blockquote>\n<p>We can always discourage (i.e. forbidding in mathlib)</p>\n</blockquote>\n<p>Yeah that was the idea. But I am still not sure what to allow. Are we happy with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Gal}(\\mathbb{Q}(X)/\\mathbb{Q})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Gal</span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">Q</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord mathbb\">Q</span><span class=\"mclose\">)</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">Z</mi><mo stretchy=\"false\">[</mo><mi>i</mi><mo stretchy=\"false\">]</mo><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">Z</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Gal}(\\mathbb{Z}[i]/\\mathbb{Z})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Gal</span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">Z</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">]</span><span class=\"mord\">/</span><span class=\"mord mathbb\">Z</span><span class=\"mclose\">)</span></span></span></span>?</p>",
        "id": 543250162,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759739992
    },
    {
        "content": "<p>Using the notation outside the realm of fields is the reason for which I would prefer <code>Aut</code>.</p>",
        "id": 543250355,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1759740058
    },
    {
        "content": "<p>(If the two notations coexist, one will probably have to rewrite one into the other occasionally.)</p>",
        "id": 543250439,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1759740085
    },
    {
        "content": "<p>\"rewrite\"? This is just notation</p>",
        "id": 543251083,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1759740256
    },
    {
        "content": "<p>OK then.</p>",
        "id": 543255169,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1759741347
    },
    {
        "content": "<p>The proposal is <a href=\"https://github.com/leanprover-community/mathlib4/pull/30266\">#30266</a></p>",
        "id": 543299448,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759753541
    },
    {
        "content": "<p>Is it possible to have a linter checking this is used only for fields? <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span></p>",
        "id": 543303505,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759754577
    },
    {
        "content": "<p>I think it is possible to tweak the elaborator to make <code>Gal(S/R)</code> not parse if we want to.</p>",
        "id": 543303823,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759754660
    },
    {
        "content": "<p>But then it wouldn't be notation, right (i.e., it's not a <code>macro</code>)? Instead it's an <code>elab</code>.</p>",
        "id": 543306462,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1759755321
    },
    {
        "content": "<p>/poll when should we use the notation Gal(L/K)?<br>\nfor any rings<br>\nfor any fields<br>\nfor any fields with IsGalois</p>",
        "id": 543306670,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759755370
    },
    {
        "content": "<p>I think it can still be a <code>macro_rules</code>. But is this an important difference? I don't really know here.</p>",
        "id": 543306777,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759755393
    },
    {
        "content": "<p>I could be wrong as I'm not an expert here, but I think it <em>can't</em> be a <code>macro_rules</code> because that's still has type <code>Syntax → Syntax</code>, so you're in the wrong monad for elaboration.</p>",
        "id": 543307219,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1759755491
    },
    {
        "content": "<p>but what difference does this make? i don't see why this is a point for or against the extra elaboration rule</p>",
        "id": 543307545,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759755563
    },
    {
        "content": "<p>Yes you are right. <code>macro_rules</code> only allows <code>MacroM</code> which couldn't really do anything. But I'm not sure what the downsides of <code>elab</code> are.</p>",
        "id": 543307618,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759755580
    },
    {
        "content": "<p>are we discussing implementation detail here?</p>",
        "id": 543307637,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759755585
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Notation.20for.20Galois.20group/near/543307618\">said</a>:</p>\n<blockquote>\n<p>Yes you are right. <code>macro_rules</code> only allows <code>MacroM</code> which couldn't really do anything. But I'm not sure what the downsides of <code>elab</code> are.</p>\n</blockquote>\n<p>maybe nothing, but I thought I would point it out since we were discussing this in the context of <em>notation</em>. The other example I can think of off the top of my head where we do elaboration when parsing the syntax is the <code>Finset</code> notations. This causes some headaches (because you have to decide whether to parse as a <code>Set</code> or a <code>Finset</code>).</p>",
        "id": 543308567,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1759755813
    },
    {
        "content": "<p>A linter should definitely be able to check whether the arguments to <code>Gal(L|K)</code> are fields.  However, if this is what it is desired, why not make already the notation use a definition that has the <code>Field</code> typeclasses present?</p>",
        "id": 543308666,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1759755836
    },
    {
        "content": "<p>Because then you need a separate declaration?</p>",
        "id": 543308776,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1759755863
    },
    {
        "content": "<p>Then you would have to convert between the new definition and the algequiv</p>",
        "id": 543308828,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759755876
    },
    {
        "content": "<p>Ok, so it is possible, but it does require to extract the appropriate instances, since sometimes I imagine that some of these fields are going to be quotients of rings by maximal ideals, and the <code>Field</code> instance will not be explicitly present.</p>",
        "id": 543309352,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1759755995
    },
    {
        "content": "<p>it will use <code>synthInstance</code></p>",
        "id": 543309614,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759756059
    },
    {
        "content": "<p>Right, but you need to recreate the appropriate context for that to be able to synthesize the instance.</p>",
        "id": 543309721,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1759756085
    },
    {
        "content": "<p>I guess Damiano's question is whether we should allow </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">IsMaximal</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">IsMaximal</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Gal</span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>when <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ideal.Quotient.field#doc\">docs#Ideal.Quotient.field</a> is turned off.</p>",
        "id": 543310689,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759756325
    },
    {
        "content": "<p>Yes, I think that naïvely checking that the instances are present as <code>Field F</code> is easy, but will not be what is expected.</p>",
        "id": 543311229,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1759756442
    },
    {
        "content": "<p>well when it is turned off then they are not fields so we shouldn't use that notation</p>",
        "id": 543311457,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759756500
    },
    {
        "content": "<p>I think in this case one can just an exception to the linter, as maybe <code>p</code> is prime that in practice is always maximal, but in mathlib we allow <code>p=0</code> simply because the theorem is still true, even if nobody cares about that case.</p>",
        "id": 543312041,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759756653
    },
    {
        "content": "<p>similarly, maybe you don't turn the quotient into a field because you don't need it, but morally it is a field</p>",
        "id": 543312276,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759756715
    },
    {
        "content": "<p>We could make <code>IsField</code> into a class? But presumably there's good reasons for not doing this (because it's not currently)?</p>",
        "id": 543320864,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759758615
    },
    {
        "content": "<p>I assume <code>IsField</code> is not a class in order to clearly distinguish with our actual <code>Field</code> class. (And I have encountered <code>IsField</code> more commonly in the form <code>¬ (IsField R)</code>, for which being a class does not help much.)</p>",
        "id": 543366906,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1759769501
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Notation.20for.20Galois.20group/near/543247273\">said</a>:</p>\n<blockquote>\n<p>I don't understand Filippo's first point but I totally agree with the second being potentially a problem. This is why I have been pushing us to have a discussion on when this notation is appropriate. For example <code>Gal(ℚ|ℤ)</code> definitely should not appear.</p>\n</blockquote>\n<p>Just to answer Andrew: what I meant is that <code>Gal(L/K)</code> just means <code>Hom_K(L, L)</code> when</p>\n<ul>\n<li>K, L are fields; and</li>\n<li><code>L/K</code> is normal</li>\n</ul>\n<p>This seems pretty much to me as \"V is a K-vector space\" just means \"V is a K-module\" when K is a field. In both cases the notation does not contain more information (i. e.: its elements are not a subtype of some more general type), and it seems to me to be more mathlib-ish (and nicer, at the end) to avoid introducing these kind of abreviations just to align with \"usual\" math jargon.</p>",
        "id": 543571349,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1759853423
    },
    {
        "content": "<p>I understand your point now and I agree there is a tradeoff being made. To me, readability of a syntax means how much cognitive load would be required to know both what it means mathematically and what it will be parsed into as a <code>Expr</code> tree. I agree that this notation make it harder to know that it is merely a <code>AlgEquiv</code> under the hood, but the benefit on the other side is way larger to me in this case. To see <code>&lt;a long terms&gt; ≃ₐ[K] &lt;another long term&gt;</code> and to parse this as a \"galois group\", one would need to meticulously check if the two long terms are equal and this has a huge cognitive cost to me.</p>\n<p>On the other hand it is extremely easy to see <code>Module</code> and parse it as \"vector space\" mathematically.</p>",
        "id": 543584438,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1759857162
    },
    {
        "content": "<p>Having thought a little bit more about this, I am not sure that I am completely onboard that, if <code>Gal</code> is used, that it should require its arguments to be fields.</p>\n<p>In the Galois group/deck transformation analogy, I consider it to be pretty standard to talk about the equivalence between \"the group of deck transformations acts transitively on the fibers\" and \"the total space is connected\".  From the perspective of Galois groups, only allowing fields means that you only always have transitive actions.</p>",
        "id": 543584647,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1759857230
    },
    {
        "content": "<p>In concrete terms, I would not find it particularly strange to say that the Galois group of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi><mo>⊕</mo><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q} \\oplus \\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⊕</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> is trivial.</p>",
        "id": 543585163,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1759857387
    },
    {
        "content": "<p>It's not -- you can switch the factors!</p>",
        "id": 543585536,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759857508
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Notation.20for.20Galois.20group/near/543585163\">said</a>:</p>\n<blockquote>\n<p>In concrete terms, I would not find it particularly strange to say that the Galois group of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi><mo>⊕</mo><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q} \\oplus \\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⊕</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> is trivial.</p>\n</blockquote>\n<p>Well, but this goes against the goal of making all-other-mathematicians-out-there's life simple. Because the situation, now, is that we have things of the form <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo><msub><mo>≅</mo><mi>a</mi></msub><mo stretchy=\"false\">[</mo><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">]</mo><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}(i)\\cong_{a}[\\mathbb{Q}]\\mathbb{Q}(i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Q</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\"><span class=\"mrel\">≅</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathbb\">Q</span><span class=\"mclose\">]</span><span class=\"mord mathbb\">Q</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span></span></span></span> (and hovering over the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mo>≅</mo><mi>a</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\cong_{a}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.739em;vertical-align:-0.15em;\"></span><span class=\"mrel\"><span class=\"mrel\">≅</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> tells you these are algebra homomorphisms); while in your setting we'd have <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">C</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">C</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Gal}(\\mathbb{C}(X)/\\mathbb{C})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Gal</span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">C</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord mathbb\">C</span><span class=\"mclose\">)</span></span></span></span> and people might wonder what this beast is. Given the abundance of junk values all over Mathlib, if someone has finally learnt that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>7</mn><mi mathvariant=\"normal\">/</mi><mn>0</mn><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">7/0=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">7/0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> and <a href=\"https://arxiv.org/pdf/2503.00959v4\">ζ(1)=1/2 (γ − log 4π)</a> they might equally well believe that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">C</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">C</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">{</mo><mn>1</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Gal}(\\mathbb{C}(X)/\\mathbb{C})=\\{1\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Gal</span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">C</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord mathbb\">C</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord\">1</span><span class=\"mclose\">}</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi></mrow><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">C</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">C</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msub><mi mathvariant=\"fraktur\">S</mi><mn>37</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Gal}(\\mathbb{C}(X)/\\mathbb{C})=\\mathfrak{S}_{37}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Gal</span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">C</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord mathbb\">C</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8414em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathfrak\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">37</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>.</p>",
        "id": 543600706,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1759862877
    },
    {
        "content": "<p>You could make it so that hovering over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mrow><mi mathvariant=\"normal\">G</mi><mi mathvariant=\"normal\">a</mi><mi mathvariant=\"normal\">l</mi></mrow><mo stretchy=\"false\">(</mo><mi>L</mi><mi mathvariant=\"normal\">/</mi><mi>K</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\mathrm{Gal}(L/K)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathrm\">Gal</span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">L</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose\">)</span></span></span></span> shows that it is algebra isomorphisms.</p>",
        "id": 543600972,
        "sender_full_name": "Christian Merten",
        "timestamp": 1759862974
    },
    {
        "content": "<p>That's true.</p>",
        "id": 543601143,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1759863028
    },
    {
        "content": "<p>but Gal(C(X)/C) is clearly PGL(2,C)</p>",
        "id": 543601809,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759863282
    },
    {
        "content": "<p>This is true in the sense of <a href=\"https://en.m.wikipedia.org/wiki/Differential_Galois_theory\">differential Galois theory</a> (edit: this might actually be false because those Galois groups I think have to preserve d?)</p>",
        "id": 543605738,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759864878
    },
    {
        "content": "<p>I am resurfacing this discussion because the PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/30266\">#30266</a> is slightly prone to rot. <br>\nTo reiterate, the current proposal is that </p>\n<ol>\n<li><code>Gal(L/K)</code> always elaborates to <code>L ≃ₐ[K] L</code> (with the hover saying that it is <code>AlgEquiv</code> under the hood)</li>\n<li><code>L ≃ₐ[K] L</code> delaborates to <code>Gal(L/K)</code> when <code>Field L</code> and <code>Field K</code> could be synthesized.</li>\n<li>We only allow the usage of <code>Gal(L/K)</code> in mathlib when we are actually considering them as (not necessarily galois) field extensions, but there are no guardrails and it is up to the reviewers to uphold this.</li>\n</ol>",
        "id": 544778551,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1760455249
    },
    {
        "content": "<p>LGTM, I guess the only question is if we want <code>IsGalois K L</code> in 2</p>",
        "id": 544833130,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1760474439
    },
    {
        "content": "<p>I'm personally not convinced that the <code>Gal</code> notation should be reserved for fields. I would like to be able to (eventually) write <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>a</mi><mi>l</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mi mathvariant=\"normal\">/</mi><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Gal(X/Y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span></span></span></span> when <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi><mo>→</mo><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">X \\to Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span></span></span> is a Galois etale cover of schemes, for example. Or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>a</mi><mi>l</mi><mo stretchy=\"false\">(</mo><mi>L</mi><mi mathvariant=\"normal\">∣</mi><mi>K</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Gal(L|K)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">L</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mclose\">)</span></span></span></span> when <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi mathvariant=\"normal\">∣</mi><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">L|K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> is a Picard-Vessiot extension of differential fields (in which case <code>Gal</code> might have additional structure). Or in any other context where we have \"a Galois theory\".</p>",
        "id": 544971988,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1760535695
    },
    {
        "content": "<p>There is a small annoyance that in field theory we take <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi mathvariant=\"normal\">∣</mi><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">L|K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> to be an extension of fields to mean that there is a map <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo>→</mo><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">K \\to L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span> satisfying an assumption, but in topological/geometric contexts the map is in the reverse direction (i.e. a cover as opposed to an extension). On paper we would still write <code>Gal</code> in both contexts.</p>",
        "id": 544972606,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1760535855
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span>, just to clarify, are you okay with merging this PR (which checks for field instances), but would just like to see it potentially generalized in the future?</p>\n<p>I just want to make sure I don't ignore your comment by recommending a merge of the current design after review (where we check for field instances during delaboration). :)</p>",
        "id": 545155979,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1760581311
    },
    {
        "content": "<p>Yes, I’m happy for the PR to get merged if there is a general consensus. We can always generalize later when there is a reason to do so.</p>",
        "id": 545156180,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1760581441
    },
    {
        "content": "<p>I am slightly sceptical regarding the approach of merging this PR after the poll<br>\n<a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/Notation.20for.20Galois.20group/near/543306670\">#mathlib4 &gt; Notation for Galois group @ 💬</a> <br>\nwhere the outcome was not very clear (and the option \"only for Galois extensions\" got 0 votes).</p>",
        "id": 545239738,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1760607267
    },
    {
        "content": "<p>Ah, perhaps I was a bit too hasty to recommend a merge? I apologize; my impression was that there was general consensus at this point in the thread, and that the poll was too early in the thread for it to be reflective of opinions post-discussion.</p>\n<p>This notation will continue to evolve and change, though, so please don’t let the merging of this PR stifle discussion on changes you’d like to see to it (or whether we use it)! :)</p>",
        "id": 545377348,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1760629502
    },
    {
        "content": "<p>in lemma names do we spell it as <code>gal</code> or as <code>algEquiv</code>?</p>",
        "id": 546711556,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761233464
    },
    {
        "content": "<p>This lends itself to an amusing <code>galEquiv</code> misspelling.</p>",
        "id": 546711763,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1761233522
    },
    {
        "content": "<p>I personally think we should still name it <code>algEquiv</code> since our consensus seems to be to treat it as merely a notation and to not forget that it is <code>L ≃ₐ[K] L</code> under the hood.</p>",
        "id": 546728443,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1761238317
    },
    {
        "content": "<p>I personally think that since we've introduced <code>Gal</code> and we write <code>Gal</code> and it prints back to <code>Gal</code> then we should have <code>gal</code> in the names</p>",
        "id": 546733883,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761240195
    },
    {
        "content": "<p>This is in the context of <a href=\"https://github.com/leanprover-community/mathlib4/pull/30738\">#30738</a> and given that there will be many misnamed lemmas in mathlib if we go for gal as the name, I think that this is not your problem in the PR and you should just use algEquiv</p>",
        "id": 546744650,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761243973
    },
    {
        "content": "<p>At some point, perhaps far in the future, I would like to see Galois groups incorporate base change, so we would have Gal_A^B(R) for R an A-algebra meaning R-algebra automorphisms of  B \\otimes_A R. This would let us describe properties of extensions more geometrically, e.g., IsGalois means a constant sheaf, inseparable field extensions have nonreduced Galois groups, something about generic fibers for ramification.</p>",
        "id": 554277478,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1762508654
    }
]