[
    {
        "content": "<p>I plan to formalize what's sometimes called \"The fundamental theorem of plane curves\" in elementary differential geometry, which roughly says that given a curvature function we can pretty much completely determine the plane curve.<br>\nWhat I wanted to ask here is first how do you recommend to define what a plane curve is.<br>\nSecondly, I originally wanted to define the curvature at point of a plane curve using the arc-length reparamentrization which I proved exists for any regular parametrized curve in PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/33330\">#33330</a>, and then show that it also can be calculated in general with some formula (which holds not only for arc-length curves), however it seems like some people in Mathlib work on a general definition of length for curves and plan to define with it a more general definition of arc-length reparamentrization (although I still didn't get an answer as to whether my work could be useful in any way or not),  so maybe I should just define curvature using the general formula (and perhaps also write a theorem about the case where the plane curve is parametrized by arc-length, although that's not essential) ?<br>\nAdditionally, please let me know if there are plans to create any generalizations that would make this work a waste of time, because when I worked on the arc-length reparametrization project and talked with experienced Mathlib contributors here in Zulip no one told me that there are plans of writing somemthing more general. I've been told that there is work being done on defining curvature very generally, but that I can have a definition just for plane curves and in the future once the general definition exists we could prove that the plane curves definition is the same as the general definition applied to plane curves, so I think this work should be a productive contribution to Mathlib, but still I want to ask this again to make sure.</p>",
        "id": 574146172,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771259077
    },
    {
        "content": "<p>So I made a first draft skeleton for this project and would really appreciate some feedback about it:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">section</span>\n\n<span class=\"sd\">/-- Curvature for plane curves. This definition is meaningful only for regular plane curves which</span>\n<span class=\"sd\">are twice continuousely differentiable on an interval I. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">curvature</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\">  </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">iteratedDeriv</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">i</span>\n<span class=\"w\">  </span><span class=\"n\">M</span><span class=\"bp\">.</span><span class=\"n\">det</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‖</span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">‖^</span><span class=\"mi\">3</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- This is the plane curve we construct in the fundamental theorem of plane curves, given curvature</span>\n<span class=\"sd\">function κ, initial position p₀ at time t₀ and initial velocity vector condition given by an angle</span>\n<span class=\"sd\">θ₀ (this angle is a choice of direction for the unit velocity vector at time t₀). This definition is</span>\n<span class=\"sd\">only meaningful when κ is continuous on some given interval. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">curvatureToPlaneCurve</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∫</span><span class=\"n\">τ</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"bp\">..</span><span class=\"n\">t</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">cos</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">∫</span><span class=\"n\">ξ</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"bp\">..</span><span class=\"n\">τ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">ξ</span><span class=\"o\">)))</span>\n<span class=\"w\">    </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∫</span><span class=\"n\">τ</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"bp\">..</span><span class=\"n\">t</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">∫</span><span class=\"n\">ξ</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"bp\">..</span><span class=\"n\">τ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">ξ</span><span class=\"o\">)))</span>\n\n<span class=\"sd\">/-- The plane curve we construct from the given curvature function κ is twice continuousely</span>\n<span class=\"sd\">differentiable on the given interval I. -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">curvatureToPlaneCurve_is_twice_contDiff</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hI</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hκ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ht₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">ContDiffOn</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">curvatureToPlaneCurve</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"n\">θ₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"sd\">/-- The plane curve we construct from the given curvature function κ is parametrized by</span>\n<span class=\"sd\">  arc-length or in other words has unit speed. -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">curvatureToPlaneCurve_has_unit_speed</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hI</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hκ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ht₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">ht</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">curvatureToPlaneCurve</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"n\">θ₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"sd\">/-- The plane curve we construct from a given function κ has curvature function κ. -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">curvatureToPlaneCurve_to_curvature</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hI</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hκ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ht₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">ht</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">curvature</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">curvatureToPlaneCurve</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"n\">θ₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"sd\">/-- The plane curve we construct is at the point p₀ at time t₀ (position initial condition). -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">curvatureToPlaneCurve_position_initial_condition</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">hI</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hκ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ht₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">curvatureToPlaneCurve</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"n\">θ₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"sd\">/-- The plane curve we construct has unit velocity vector at the direction of the angle θ₀ at time</span>\n<span class=\"sd\">t₀ (velocity initial condition). -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">curvatureToPlaneCurve_velocity_initial_condition</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">hI</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hκ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ht₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">curvatureToPlaneCurve</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"n\">θ₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">cos</span><span class=\"w\"> </span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sin</span><span class=\"w\"> </span><span class=\"n\">θ₀</span>\n<span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"sd\">/-- This is the uniqueness part of the fundamental theorem of plane curves: given a curvature</span>\n<span class=\"sd\">function κ and intital conditions (position p₀ at some time t₀ and unit velocity vector at time t₀</span>\n<span class=\"sd\">at direction given by angle θ₀) the plane curve we construct is the only such twice continuousely</span>\n<span class=\"sd\">differentiable plane curve parametrized bt arc-length with curvature κ ands satisfing the initial</span>\n<span class=\"sd\">position and velocity conditions. -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">curvatureToPlaneCurve_is_unique</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hI</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsOpen</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">hκ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ht₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">twice_contDiff</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContDiffOn</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">has_unit_speed</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‖</span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">‖</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">has_curvature_κ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">curvature</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">position_condition</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">p₀</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">velocity_condition</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">cos</span><span class=\"w\"> </span><span class=\"n\">θ₀</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sin</span><span class=\"w\"> </span><span class=\"n\">θ₀</span><span class=\"o\">):</span>\n<span class=\"w\">  </span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">EqOn</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">curvatureToPlaneCurve</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"n\">t₀</span><span class=\"w\"> </span><span class=\"n\">p₀</span><span class=\"w\"> </span><span class=\"n\">θ₀</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 574369805,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771356494
    },
    {
        "content": "<p>By the way here is the theorem written in English, with similar (although slightly different) notation to what I use in my file: <br>\n<a href=\"/user_uploads/3121/FrrYs4uRqXlJDhm9xkJ5YTIX/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/FrrYs4uRqXlJDhm9xkJ5YTIX/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1635x940\" src=\"/user_uploads/thumbnail/3121/FrrYs4uRqXlJDhm9xkJ5YTIX/image.png/840x560.webp\"></a></div>",
        "id": 574370775,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771356813
    },
    {
        "content": "<p>I do think <a href=\"https://github.com/leanprover-community/mathlib4/pull/33330\">#33330</a> can be useful for mathlib --- it just needs to be revised to take the review feedback into account. (I am aware that this is a substantial revision.) In other words, you could</p>\n<ul>\n<li><del>define the arc-length of a curve (without requiring differentiability)</del> edit: already exists, see below</li>\n<li>prove that the arc-length coincides with your formula for C¹ curves</li>\n<li>prove that the reparametrisation you give yields curves of unit speed</li>\n</ul>\n<p>The first bullet could be its own PR. Definitions can be tricky to formalise nicely; I'm sure <span class=\"user-mention\" data-user-id=\"197836\">@Jireh Loreaux</span> or I could suggest some useful basic properties for you to prove (as a test that your definition works well). (I'm just on my way to two weeks of holiday/work travel, so likely will only have time after that.)</p>",
        "id": 575084243,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771677218
    },
    {
        "content": "<p>In other words: it's not a binary \"your work is useful\" / \"your work is no good\"! Working on this topic can be useful --- to get incorporated into mathlib, it just needs to be at the right level of generality. (Knowing this level can require some mathematical maturity; you can always ask here on zulip if you're unsure.)</p>",
        "id": 575084247,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771677220
    },
    {
        "content": "<p>Regarding your question above:</p>\n<ul>\n<li>my medium-term goal is to define curvature \"in general\" (for Riemannian manifolds). This will take a few months to get merged into mathlib, I'm sure.</li>\n<li>even when this is completed, having a lemma/theorem \"for a plane curve, its curvature is given by the following expression\" is useful! So, it's fine to define a notion of curvature the way you propose (and later, when the definition of curvature for manifolds gets merged, prove that it equals the formula you give).</li>\n<li>it's good to have a curvature formula for <em>all</em> plane curves (and then have a specialisation to unit speed curves)! (It's also good to have arc length defined, as I said above.)</li>\n</ul>",
        "id": 575084623,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771677705
    },
    {
        "content": "<p>Here are some comments about the code snippet you posted.</p>\n<ul>\n<li>is your first definition <code>curvature</code> also meaningful for a curve into <code>R^n</code>? If so, you could use a general indexing type <code>ι</code> (with the assumption <code>[Finite ι]</code>) instead of <code>Fin 2</code> (in many places). It's very possible some results will work in n dimensions, and others will be specific to two.</li>\n<li>Your name <code>curvature</code> is very general; you probably want to move it to some namespace (to make clear it's not Ricci/scalar/... curvature defined on manifolds). Maybe <code>EuclideanSpace.curvature</code>? (It's fine to not address this at first, and only do so when you're polishing your code for a mathlib PR.)</li>\n<li>I'd call <code>curvatureToPlaneCurve</code>rather <code>initialCurve_of_curvature</code>.</li>\n<li><code>curvatureToPlaneCurve_is_twice_contDiff</code> should be <code>ContDiffOn.curvatureToPlanCurve</code> (and renamed accordingly to that you name your previous definition).</li>\n<li><code>curvatureToPlaneCurve_to_curvature</code> should be named <code>curvature_curvatureToPlaneCurve</code> (and adapted, etc.) --- a statement about <code>curvature foo</code> is named <code>curvature_foo</code> in mathlib's convention.</li>\n</ul>",
        "id": 575085652,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771678404
    },
    {
        "content": "<p>A final question: the fundamental theorem I saw in class worked for curves into R^3 (and this also generalises to R^n, to some extent). I wonder if it's useful to make your code more forward-looking, by anticipating such a generalisation.</p>",
        "id": 575085760,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771678460
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Formalizing.20the.20fundamental.20theorem.20of.20plane.20curves/near/575084243\">said</a>:</p>\n<blockquote>\n<p>I do think <a href=\"https://github.com/leanprover-community/mathlib4/pull/33330\">#33330</a> can be useful for mathlib --- it just needs to be revised to take the review feedback into account. (I am aware that this is a substantial revision.) In other words, you could</p>\n<ul>\n<li>define the arc-length of a curve (without requiring differentiability)</li>\n<li>prove that the arc-length coincides with your formula for C¹ curves</li>\n<li>prove that the reparametrisation you give yields curves of unit speed</li>\n</ul>\n</blockquote>\n<p>We already have the arc-length of a curve. It's called <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=variationOnFromTo#doc\">docs#variationOnFromTo</a>.</p>",
        "id": 575098118,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1771690905
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Formalizing.20the.20fundamental.20theorem.20of.20plane.20curves/near/575085760\">said</a>:</p>\n<blockquote>\n<p>A final question: the fundamental theorem I saw in class worked for curves into R^3 (and this also generalises to R^n, to some extent). I wonder if it's useful to make your code more forward-looking, by anticipating such a generalisation.</p>\n</blockquote>\n<p>There's also such a theorem for space curves as you said, but in the case of space curves, the curve is determined not only by the curvature function but also by the torsion function. I probably would like to prove the theorem for space curves as well after I finish with the theorem for plane curves.</p>",
        "id": 575099245,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771692096
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Formalizing.20the.20fundamental.20theorem.20of.20plane.20curves/near/575085652\">said</a>:</p>\n<blockquote>\n<p>Here are some comments about the code snippet you posted.</p>\n<ul>\n<li>is your first definition <code>curvature</code> also meaningful for a curve into <code>R^n</code>? If so, you could use a general indexing type <code>ι</code> (with the assumption <code>[Finite ι]</code>) instead of <code>Fin 2</code> (in many places). It's very possible some results will work in n dimensions, and others will be specific to two.</li>\n<li>Your name <code>curvature</code> is very general; you probably want to move it to some namespace (to make clear it's not Ricci/scalar/... curvature defined on manifolds). Maybe <code>EuclideanSpace.curvature</code>? (It's fine to not address this at first, and only do so when you're polishing your code for a mathlib PR.)</li>\n<li>I'd call <code>curvatureToPlaneCurve</code>rather <code>initialCurve_of_curvature</code>.</li>\n<li><code>curvatureToPlaneCurve_is_twice_contDiff</code> should be <code>ContDiffOn.curvatureToPlanCurve</code> (and renamed accordingly to that you name your previous definition).</li>\n<li><code>curvatureToPlaneCurve_to_curvature</code> should be named <code>curvature_curvatureToPlaneCurve</code> (and adapted, etc.) --- a statement about <code>curvature foo</code> is named <code>curvature_foo</code> in mathlib's convention.</li>\n</ul>\n</blockquote>\n<p>Thank you very much for all the suggestions. I made quite a few challenges to the code already, for example I work now in <code>EuclideanSpace ℝ (Fin 2)</code>, and I will do further changes based on your suggestions. I have two questions: </p>\n<ol>\n<li>Since I only learned very basic elementary differential geometry I don't know if there's a general formula for curvature of curves in R^n, is there such a formula? From the little I did learned I'm inclined to believe that at least for the case of plane curves, how curvature is usually defined is unique or at least different from space curves because for plane curves the curvature can be positive, negative or zero, but for space curves the curvature is always non-negative - it is the length of the acceleration vector (assuming the curve is parametrized by arc-length). </li>\n<li>when I work with plane curves is it o.k that I use <code>Fin 2</code> or should I use a general finite type with two elements?</li>\n</ol>",
        "id": 575100419,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771693256
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Formalizing.20the.20fundamental.20theorem.20of.20plane.20curves/near/575098118\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Formalizing.20the.20fundamental.20theorem.20of.20plane.20curves/near/575084243\">said</a>:</p>\n<blockquote>\n<p>I do think <a href=\"https://github.com/leanprover-community/mathlib4/pull/33330\">#33330</a> can be useful for mathlib --- it just needs to be revised to take the review feedback into account. (I am aware that this is a substantial revision.) In other words, you could</p>\n<ul>\n<li>define the arc-length of a curve (without requiring differentiability)</li>\n<li>prove that the arc-length coincides with your formula for C¹ curves</li>\n<li>prove that the reparametrisation you give yields curves of unit speed</li>\n</ul>\n</blockquote>\n<p>We already have the arc-length of a curve. It's called <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=variationOnFromTo#doc\">docs#variationOnFromTo</a>.</p>\n</blockquote>\n<p>My question is: Is there work being done about also defining the speed of a curve more generally and also arc-length (i.e, unit-speed) reparametrization generally? And could my work (PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/33330\">#33330</a>) be somewhat useful in any way for proving some theorem in the special case of differentiable curves?</p>",
        "id": 575100866,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771693685
    },
    {
        "content": "<p>I'm not aware of such work.</p>",
        "id": 575100993,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771693795
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> what do you think we should do with <a href=\"https://github.com/leanprover-community/mathlib4/pull/31766\">#31766</a> ? Do you think it's simply not necessary?</p>",
        "id": 575101009,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771693809
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Formalizing.20the.20fundamental.20theorem.20of.20plane.20curves/near/575100993\">said</a>:</p>\n<blockquote>\n<p>I'm not aware of such work.</p>\n</blockquote>\n<p>In this case, should it be done (I possibly could try to do it), or is there no need for such generality and using speed only for differentiable curves enough (in which case it seems like that's exactly what I did in <a href=\"https://github.com/leanprover-community/mathlib4/pull/33330\">#33330</a> - I didn't define the length of a curve - I defined the arc-length reparametrization of a curve, i.e, unit-speed reparametrization)?</p>",
        "id": 575101908,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771694723
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Formalizing.20the.20fundamental.20theorem.20of.20plane.20curves/near/575101009\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> what do you think we should do with <a href=\"https://github.com/leanprover-community/mathlib4/pull/31766\">#31766</a> ? Do you think it's simply not necessary?</p>\n</blockquote>\n<p>There are two parts in <a href=\"https://github.com/leanprover-community/mathlib4/pull/31766\">#31766</a>:<br>\n(a): introducing a new definition for <code>arclength</code>, which is essentially a wrapper around <code>eVariationOn (Icc ...)</code><br>\n(b) prove continuity statements for the arclength.</p>\n<p>I have no opinion on (a): I have the impression that working just with <code>eVariationOn</code> would be perfectly viable, but if it helps to add the wrapper then why not (although duplicating API is often not a good idea). For (b), though, I'd rather see the statements proved in the right generality, i.e., directly for <code>eVariationOn</code> as this would apply in strictly more cases. Incidentally, I have an open PR which does essentially this, see <a href=\"https://github.com/leanprover-community/mathlib4/pull/34559\">#34559</a>...</p>",
        "id": 575109992,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1771703680
    },
    {
        "content": "<p>I've put it on my list.</p>",
        "id": 575112883,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771707059
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"952635\">Michael Novak</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Formalizing.20the.20fundamental.20theorem.20of.20plane.20curves/near/575100419\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Formalizing.20the.20fundamental.20theorem.20of.20plane.20curves/near/575085652\">said</a>:</p>\n<blockquote>\n<p>Here are some comments about the code snippet you posted.</p>\n<ul>\n<li>is your first definition <code>curvature</code> also meaningful for a curve into <code>R^n</code>? If so, you could use a general indexing type <code>ι</code> (with the assumption <code>[Finite ι]</code>) instead of <code>Fin 2</code> (in many places). It's very possible some results will work in n dimensions, and others will be specific to two.</li>\n<li>Your name <code>curvature</code> is very general; you probably want to move it to some namespace (to make clear it's not Ricci/scalar/... curvature defined on manifolds). Maybe <code>EuclideanSpace.curvature</code>? (It's fine to not address this at first, and only do so when you're polishing your code for a mathlib PR.)</li>\n<li>I'd call <code>curvatureToPlaneCurve</code>rather <code>initialCurve_of_curvature</code>.</li>\n<li><code>curvatureToPlaneCurve_is_twice_contDiff</code> should be <code>ContDiffOn.curvatureToPlanCurve</code> (and renamed accordingly to that you name your previous definition).</li>\n<li><code>curvatureToPlaneCurve_to_curvature</code> should be named <code>curvature_curvatureToPlaneCurve</code> (and adapted, etc.) --- a statement about <code>curvature foo</code> is named <code>curvature_foo</code> in mathlib's convention.</li>\n</ul>\n</blockquote>\n<p>Thank you very much for all the suggestions. I made quite a few challenges to the code already, for example I work now in <code>EuclideanSpace ℝ (Fin 2)</code>, and I will do further changes based on your suggestions. I have two questions: </p>\n<ol>\n<li>Since I only learned very basic elementary differential geometry I don't know if there's a general formula for curvature of curves in R^n, is there such a formula? From the little I did learned I'm inclined to believe that at least for the case of plane curves, how curvature is usually defined is unique or at least different from space curves because for plane curves the curvature can be positive, negative or zero, but for space curves the curvature is always non-negative - it is the length of the acceleration vector (assuming the curve is parametrized by arc-length). </li>\n<li>when I work with plane curves is it o.k that I use <code>Fin 2</code> or should I use a general finite type with two elements?</li>\n</ol>\n</blockquote>\n<p>In regards to question 1., I've read a bit about how curvature of curves is defined in general in the curves section of <a href=\"https://en.wikipedia.org/wiki/Curvature#Curves\">this</a> Wikipedia article and it seems like in general it is the same as what one usually learns about space curves in elementary differential geometry - it is the magnitude of the derivative of the unit tangent vector, and there is also the curvature vector which is the derivative of the unit tangent vector. But for the special case of plane curves, what in most elementary differential geometry books is called just the curvature is called in this Wikipedia article the signed / oriented curvature, which is the curvature that's used in the fundamental theorem of plane curves. So, I think maybe we should also  call it something like <code>PlaneCurves.orientedCurvature</code>, or something similar, and in the future when formalizing the fundamental theorem for space curves we can work with curvature which is defined for any curve (any dimension). What do you think?</p>",
        "id": 575143368,
        "sender_full_name": "Michael Novak",
        "timestamp": 1771744088
    }
]