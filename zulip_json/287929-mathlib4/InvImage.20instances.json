[
    {
        "content": "<p>Hi, I'm working on <a href=\"https://github.com/leanprover-community/PR/pull/20310\">PR#20310</a> which defines the shortlex relation on lists. I'm following the given advice to prove more general theorems first, and then apply them. </p>\n<p>The shortlex order is defined as the InvImage of something; where ought I put these instances/theorems?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">InvImage</span><span class=\"bp\">.</span><span class=\"n\">trichotomous</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsTrichotomous</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">InvImage</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">InvImage</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Injective</span><span class=\"bp\">.</span><span class=\"n\">eq_iff</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">IsTrichotomous</span><span class=\"bp\">.</span><span class=\"n\">trichotomous</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">InvImage</span><span class=\"bp\">.</span><span class=\"n\">isAsymm</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsAsymm</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsAsymm</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">InvImage</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">asymm</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">IsAsymm</span><span class=\"bp\">.</span><span class=\"n\">asymm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n</code></pre></div>\n<p>The most similar place looks to be <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Defs/Unbundled.html#InvImage.trans\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Defs/Unbundled.html#InvImage.trans</a> but those lemmas (<code>InvImage.trans</code> and <code>InvImage.irreflexive</code>) are listed as deprecated</p>",
        "id": 498234525,
        "sender_full_name": "Hannah Fechtner",
        "timestamp": 1738887019
    },
    {
        "content": "<p>Can the first one be stated with <code>IsTrichotomous</code>?</p>",
        "id": 498235185,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1738887414
    },
    {
        "content": "<p>It could be,  but typeclass inference won't find the hypothesis that <code>f</code> is injective, so it's easier to use as a theorem. Then I can use it with <code>apply</code>, and Lean will leave me with a goal to prove <code>f</code>'s infectivity</p>",
        "id": 498236940,
        "sender_full_name": "Hannah Fechtner",
        "timestamp": 1738888340
    },
    {
        "content": "<p>Usually I think we'd handle this by writing it through the typeclass but not making it an instance; but probably <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> and <span class=\"user-mention\" data-user-id=\"459227\">@Violeta Hernández</span> have opinions here, and I think it's not a big deal either way.</p>",
        "id": 498257382,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1738901880
    },
    {
        "content": "<p>You _could_ make it an instance for embeddings</p>",
        "id": 498257457,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1738901912
    },
    {
        "content": "<p>We really ought to have one single canonical way of stating that a relation is trichotomous/asymmetric/reflexive/whatever. For better or worse (I'd argue for better) the way most of Mathlib currently writes this down is via the <code>Is*</code> typeclasses, so my recommendation is to just use those even if your theorem is not an instance.</p>",
        "id": 498274867,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738913155
    },
    {
        "content": "<p>I also have to say that <code>InvImage</code> is a weird name for a perfectly common operation on relations, and I am not sure how I feel about stating theorems using it</p>",
        "id": 498275744,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1738913585
    },
    {
        "content": "<p>There's some very useful instances on <code>InvImage</code>, such as \"the inverse image of a well-founded relation is well-founded\".</p>",
        "id": 498277134,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738914341
    },
    {
        "content": "<p>Precisely. That's not very useful because no one finds themselves using <code>InvImage</code>. Instead in applications you rather have a subrelation <code>s</code> of <code>InvImage r f</code> for some <code>r</code> and <code>f</code> (where <code>r</code> and <code>f</code> are not necessarily obvious!). A lemma would be much better suited here. Back when I was doing arguments of this form, no such lemma existed so I had to resort to some obscure combination of three unfindable lemmas to do the job</p>",
        "id": 498277761,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1738914659
    },
    {
        "content": "<p>Maybe the solution is to just use <code>InvImage</code> more? This seems very analogous to the preimage, which is also a very simple definition we all agree to use notation for anyways because of how many nice properties it satisfies.</p>",
        "id": 498277990,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1738914779
    },
    {
        "content": "<p>I don't see the situations as analogous. <code>f ⁻¹ s</code> is genuinely a useful object people prove things about. <code>InvImage r f</code> not so much. As I said, we rather prove things about a relation <code>s</code> for which <em>there exist</em> some <code>r</code> and <code>f</code> such that <code>s ≤ InvImage r f</code></p>",
        "id": 498278193,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1738914885
    },
    {
        "content": "<p>Is <code>InvImage r f</code> the same as <code>r on f</code>? (edit: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=InvImage#doc\">docs#InvImage</a> suggests it is)</p>",
        "id": 498650939,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739148744
    },
    {
        "content": "<p>Ok so now we know for sure one of them must go</p>",
        "id": 498651022,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739148828
    },
    {
        "content": "<p>I think in practice <code>on</code> is only every used for Prop</p>",
        "id": 498651066,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739148845
    },
    {
        "content": "<p>You could check that by restricting the universe of <code>onFun</code> and seeing if anything breaks</p>",
        "id": 498651096,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739148874
    },
    {
        "content": "<p>Personally I prefer the <code>on</code> naming, but the notation has been controversial in the past</p>",
        "id": 498651133,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739148914
    },
    {
        "content": "<p>If nothing uses it for Sort I propose we drop that support</p>",
        "id": 498651156,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739148941
    },
    {
        "content": "<p><code>Nat.choose on Nat.factorial</code> isn't exactly obvious notation</p>",
        "id": 498651222,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739148965
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/InvImage.20instances/near/498650939\">said</a>:</p>\n<blockquote>\n<p>Is <code>InvImage r f</code> the same as <code>r on f</code>? (edit: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=InvImage#doc\">docs#InvImage</a> suggests it is)</p>\n</blockquote>\n<p>Yes, that's part of my quibble with it</p>",
        "id": 498686331,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1739172901
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/InvImage.20instances/near/498651066\">said</a>:</p>\n<blockquote>\n<p>I think in practice <code>on</code> is only every used for Prop</p>\n</blockquote>\n<p>I'm pretty sure it gets used in API around <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.PairwiseDisjoint#doc\">docs#Set.PairwiseDisjoint</a> ?</p>",
        "id": 498764171,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1739194852
    },
    {
        "content": "<p>Ah, I was wrong. I was thinking of its definition: <code>s.PairwiseDisjoint f := s.Pairwise (Disjoint on f)</code> which indeed uses it for prop</p>",
        "id": 498765153,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1739195087
    },
    {
        "content": "<p>Wait, is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=InvImage#doc\">docs#InvImage</a> also equal to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Order.Preimage#doc\">docs#Order.Preimage</a> ?</p>",
        "id": 500139695,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739787340
    },
    {
        "content": "<p><em>audible sigh</em></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Function</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">InvImage</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">⁻¹'</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 500140817,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739787626
    },
    {
        "content": "<p>So what now?</p>",
        "id": 500141458,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739787789
    },
    {
        "content": "<p>I think <code>Order.Preimage</code> is the one of the three which makes the most sense from a didactic point of view. But unfortunately <code>InvImage</code> is the one that's in Core.</p>",
        "id": 500149757,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739789671
    },
    {
        "content": "<p>I'm testing whether <code>onFun</code> is only used on <code>Prop</code> here: <a href=\"https://github.com/leanprover-community/mathlib4/pull/21982\">#21982</a></p>",
        "id": 500149884,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739789696
    },
    {
        "content": "<p>Yep, save for a single <code>rfl</code> theorem <code>onFun</code> is only ever used on relations.</p>",
        "id": 500260148,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739819611
    },
    {
        "content": "<p>So to me it's clear two of these need to go.</p>",
        "id": 500260172,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739819617
    },
    {
        "content": "<p>InvImage works on Sort, Order.Preimage does not</p>",
        "id": 500298372,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739840929
    },
    {
        "content": "<p>So for the full comparison:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span>\n\n<span class=\"n\">recall</span><span class=\"w\"> </span><span class=\"n\">InvImage</span><span class=\"w\">       </span><span class=\"c1\">-- no notation</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\">   </span><span class=\"o\">{</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\">                            </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"n\">recall</span><span class=\"w\"> </span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Preimage</span><span class=\"w\"> </span><span class=\"c1\">-- notation `f ⁻¹'o r`</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_2</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_3</span><span class=\"o\">}</span><span class=\"w\">              </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\">             </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"n\">recall</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">onFun</span><span class=\"w\"> </span><span class=\"c1\">-- notation `r on f`</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u₁</span><span class=\"o\">}</span><span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u₂</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">φ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u₃</span><span class=\"o\">}</span><span class=\"w\">             </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">φ</span><span class=\"o\">)</span><span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">φ</span>\n</code></pre></div>",
        "id": 500298803,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739841227
    },
    {
        "content": "<p>I like the <code>f ⁻¹o r</code> notation the most: it makes very clear that this is essentially a preimage construction, whereas neither <code>InvImage</code> nor <code>on</code> are very obvious.</p>",
        "id": 500322192,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739856887
    },
    {
        "content": "<p>That said, if the objective is to be left with a single one of these three definitions, <code>InvImage</code> probably gives us the least amount of hassle, being defined in Core Lean.</p>",
        "id": 500322283,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739856957
    },
    {
        "content": "<p>Could we perhaps make <code>⁻¹o</code> notation for <code>InvImage</code>?</p>",
        "id": 500322360,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1739856992
    },
    {
        "content": "<p>That sounds at least theoretically possible, not having looked at the code</p>",
        "id": 500350487,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1739869637
    },
    {
        "content": "<p>Okay, so if I follow correctly, I'll keep using <code>InvImage</code> for my <a href=\"https://github.com/leanprover-community/PR/pull/20310\">PR#20310</a> and I'll use the <code>IsTrichotomous</code> notation for the theorem</p>",
        "id": 500960998,
        "sender_full_name": "Hannah Fechtner",
        "timestamp": 1740082222
    }
]