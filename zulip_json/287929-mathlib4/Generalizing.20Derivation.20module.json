[
    {
        "content": "<p>Hello everyone! While studying the¬†<code>Derivation</code>¬†module, I noticed opportunities for some natural generalizations.</p>\n<p>The current structure limitations:</p>\n<ol>\n<li>Restricted to commutative algebras</li>\n<li>The 2020¬†<code>TODO</code>¬†about bimodules remains unresolved</li>\n<li>Lacks support for graded derivations</li>\n<li>There are no inner derivations and related theory</li>\n</ol>\n<p>Would this be valuable for mathlib? What other ideas and suggestions will there be?</p>\n<p>I'm a third-year physics student and this seems like an ideal summer project for me. I am ready to take on the implementation.</p>\n<p>Best regards,<br>\nKirill Ferediakin</p>",
        "id": 521485154,
        "sender_full_name": "Reklle",
        "timestamp": 1748734693
    },
    {
        "content": "<p>I attempted point 2 back in <a href=\"https://github.com/leanprover-community/mathlib/pull/18936\">!3#18936</a>, in case that's of interest</p>",
        "id": 521485682,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748735404
    },
    {
        "content": "<p>I don't think we can make progress on that without <a href=\"https://github.com/leanprover-community/mathlib4/pull/7152\">#7152</a></p>",
        "id": 521485697,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748735435
    },
    {
        "content": "<p>I think maybe the first step here is to add <code>op_nsmul</code> and <code>op_zsmul</code> fields to additive monoids and additive groups?</p>",
        "id": 521552207,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748783166
    },
    {
        "content": "<p>In the process of formalizing <code>DifferentialGradedAlgebra</code>, we encountered a situation where the standard definition of a derivation, which implicitly assumes commutativity for the product rule, was insufficient. This is because multiplication in exterior algebra is non-commutative (specifically, anti-commutative).</p>\n<p>I'm wondering if there's some easy way in the short term to define a non-commutative derivative so that the definition we need doesn't fail due to commutativity. <span aria-label=\"face with spiral eyes\" class=\"emoji emoji-1f635-200d-1f4ab\" role=\"img\" title=\"face with spiral eyes\">:face_with_spiral_eyes:</span></p>",
        "id": 521554043,
        "sender_full_name": "Âº†ÂÆà‰ø°(Shouxin Zhang)",
        "timestamp": 1748784388
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"721922\">@Âº†ÂÆà‰ø°(Shouxin Zhang)</span> What's the mathematical definition?</p>",
        "id": 521554468,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748784639
    },
    {
        "content": "<p>How about defining differential graded (A-)algebras as algebra objects in the monoidal category of chain complexes of A-modules? I guess there will need a lot of unfolding to do to get the operations, but here the anticommutativity is \"baked in\" the sign rules for the tensor product of chain complexes.</p>",
        "id": 521554914,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1748784920
    },
    {
        "content": "<p>What is the mathematical definition?</p>",
        "id": 521555272,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748785143
    },
    {
        "content": "<p>What I wrote above is a mathematical definition. Or perhaps you're unhappy with the term \"Algebra object\"? To me, this is synonym to \"Monoid object internal to a monoidal category\".</p>",
        "id": 521555474,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1748785281
    },
    {
        "content": "<p>(The point of view of monoids in the category of chain complexes is also more suited to study the homotopy theory of (commutative) dg-algebras, i.e the localization of this category at the class of weak equivalences given by morphisms that induce a quasi-isomorphism of the underlying chain complexes)</p>",
        "id": 521555965,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1748785607
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Generalizing.20Derivation.20module/near/521554468\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"721922\">Âº†ÂÆà‰ø°(Shouxin Zhang)</span> What's the mathematical definition?</p>\n</blockquote>\n<p>Our def of math is as follow<br>\n<a href=\"/user_uploads/3121/4-EzLlzZBRhVdf-tfHG6FKVU/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/4-EzLlzZBRhVdf-tfHG6FKVU/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1352x158\" src=\"/user_uploads/thumbnail/3121/4-EzLlzZBRhVdf-tfHG6FKVU/image.png/840x560.webp\"></a></div><p>The lean code is </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">DGA</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùìê</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">DifferentialGradedAlgebra</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">GradedAlgebra</span><span class=\"w\"> </span><span class=\"n\">ùìê</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Derivation</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">A</span>\n<span class=\"w\">  </span><span class=\"n\">deriv_isHomogeneous</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ùìê</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">deriv</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">ùìê</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">DGA</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">]</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">L</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">exteriorIntGrading</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ExteriorAlgebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">‚ãÄ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"bp\">^</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">L</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">negSucc</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GradedAlgebra</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"w\"> </span><span class=\"bp\">‚Ü¶</span><span class=\"w\"> </span><span class=\"bp\">‚ãÄ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"bp\">^</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ExteriorAlgebra</span><span class=\"bp\">.</span><span class=\"n\">gradedAlgebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">L</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SetLike</span><span class=\"bp\">.</span><span class=\"n\">GradedMonoid</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">exteriorIntGrading</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">one_mem</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">exteriorIntGrading</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">mul_mem</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">exteriorIntGrading</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"n\">gi</span><span class=\"w\"> </span><span class=\"n\">gj</span><span class=\"w\"> </span><span class=\"n\">hgi</span><span class=\"w\"> </span><span class=\"n\">hgj</span>\n<span class=\"w\">    </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hgi</span><span class=\"w\"> </span><span class=\"n\">hgj</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">SetLike</span><span class=\"bp\">.</span><span class=\"n\">mul_mem_graded</span><span class=\"w\"> </span><span class=\"n\">hgi</span><span class=\"w\"> </span><span class=\"n\">hgj</span>\n<span class=\"w\">      </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">negSucc</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp_all</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">negSucc</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp_all</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">GradedAlgebra</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">exteriorIntGrading</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">GradedAlgebra</span><span class=\"bp\">.</span><span class=\"n\">ofAlgHom</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">AlgHom</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">GradedAlgebra</span><span class=\"bp\">.</span><span class=\"n\">liftŒπ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">DirectSum</span><span class=\"bp\">.</span><span class=\"n\">toAlgebra</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">DirectSum</span><span class=\"bp\">.</span><span class=\"n\">lof</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">‚Ñ§</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">‚Ü•</span><span class=\"o\">(</span><span class=\"n\">exteriorIntGrading</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">        </span><span class=\"n\">Submodule</span><span class=\"bp\">.</span><span class=\"n\">inclusion</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">ofNat_eq_coe</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">cast_ofNat_Int</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">coe_comp</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">comp_apply</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"n\">ai</span><span class=\"w\"> </span><span class=\"n\">aj</span>\n<span class=\"w\">      </span><span class=\"n\">dsimp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">ofNat_eq_coe</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">natCast_add</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">LinearMap</span><span class=\"bp\">.</span><span class=\"n\">coe_comp</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">comp_apply</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n\n<span class=\"c1\">-- instance (f : L ‚Üí‚Çó[R] R) : DifferentialGradedAlgebra (R := R) (A := (ExteriorAlgebra R L)) (exteriorIntGrading R L):= by sorry</span>\n</code></pre></div>\n<p>Here, in the final part, we need <code>R</code> is <code>CommRing</code>.</p>",
        "id": 521558998,
        "sender_full_name": "Âº†ÂÆà‰ø°(Shouxin Zhang)",
        "timestamp": 1748787566
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"721922\">@Âº†ÂÆà‰ø°(Shouxin Zhang)</span> If there are no other options, perhaps it is worth writing a temporary module for </p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>d</mi><mo>:</mo><mi>A</mi><mo>‚Üí</mo><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">d : A \\to A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">‚Üí</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span></span></p>",
        "id": 521563945,
        "sender_full_name": "Reklle",
        "timestamp": 1748790352
    },
    {
        "content": "<blockquote>\n<p>Our def of math is as follow</p>\n</blockquote>\n<p>What is an algebra over a non-commutative ring? (re \"a graded algebra A over R\")</p>",
        "id": 521572275,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748795087
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Generalizing.20Derivation.20module/near/521572275\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>Our def of math is as follow</p>\n</blockquote>\n<p>What is an algebra over a non-commutative ring? (re \"a graded algebra A over R\")</p>\n</blockquote>\n<p>I believe they might have meant a non-commutative algebra over a commutative ring</p>",
        "id": 521573590,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748795734
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"286014\">Robin Carlier</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Generalizing.20Derivation.20module/near/521555474\">said</a>:</p>\n<blockquote>\n<p>What I wrote above is a mathematical definition. Or perhaps you're unhappy with the term \"Algebra object\"? To me, this is synonym to \"Monoid object internal to a monoidal category\".</p>\n</blockquote>\n<p>I'm very sorry, but we do indeed need to work on a concrete definition at the moment. Therefore, the best solution for now might be to temporarily create a generalized version of a derivation as a substitute.</p>",
        "id": 521635857,
        "sender_full_name": "Âº†ÂÆà‰ø°(Shouxin Zhang)",
        "timestamp": 1748834671
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"286014\">Robin Carlier</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Generalizing.20Derivation.20module/near/521554914\">said</a>:</p>\n<blockquote>\n<p>How about defining differential graded (A-)algebras as algebra objects in the monoidal category of chain complexes of A-modules? I guess there will need a lot of unfolding to do to get the operations, but here the anticommutativity is \"baked in\" the sign rules for the tensor product of chain complexes.</p>\n</blockquote>\n<p>To be honest, I don't know much about category theory. Previously, other students used a categorical API to prove that the derivative <code>d</code> of the Koszul complex satisfies <code>d^2 = 0</code>. I was responsible for porting this into a proof based on concrete definitions, under the guidance of other more experienced students. Therefore, I may not be able to answer your question. &gt;_&lt;</p>",
        "id": 521636330,
        "sender_full_name": "Âº†ÂÆà‰ø°(Shouxin Zhang)",
        "timestamp": 1748834991
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Generalizing.20Derivation.20module/near/521573590\">ÂèëË®ÄÈÅì</a>Ôºö</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Generalizing.20Derivation.20module/near/521572275\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>Our def of math is as follow</p>\n</blockquote>\n<p>What is an algebra over a non-commutative ring? (re \"a graded algebra A over R\")</p>\n</blockquote>\n<p>I believe they might have meant a non-commutative algebra over a commutative ring</p>\n</blockquote>\n<p>Yes, it is a non-commutative algebra over a commutative ring. Therefore, we only need to change the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Derivation#doc\">docs#Derivation</a> from</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">AlgebraMap</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Derivation</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">‚Üí‚Çó</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"kn\">protected</span><span class=\"w\"> </span><span class=\"n\">map_one_eq_zero'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toLinearMap</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"kn\">protected</span><span class=\"w\"> </span><span class=\"n\">leibniz'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toLinearMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\"> </span><span class=\"n\">toLinearMap</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\"> </span><span class=\"n\">toLinearMap</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>\n<p>to </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">AlgebraMap</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Derivation</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">AddCommMonoid</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">‚Üí‚Çó</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"kn\">protected</span><span class=\"w\"> </span><span class=\"n\">map_one_eq_zero'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toLinearMap</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"kn\">protected</span><span class=\"w\"> </span><span class=\"n\">leibniz'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">toLinearMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\"> </span><span class=\"n\">toLinearMap</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\"> </span><span class=\"n\">toLinearMap</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>\n<p>I think this will have little negative impact.</p>",
        "id": 521650541,
        "sender_full_name": "Yongle Hu",
        "timestamp": 1748842647
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"721922\">Âº†ÂÆà‰ø°(Shouxin Zhang)</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Generalizing.20Derivation.20module/near/521636330\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"286014\">Robin Carlier</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Generalizing.20Derivation.20module/near/521554914\">said</a>:</p>\n<blockquote>\n<p>How about defining differential graded (A-)algebras as algebra objects in the monoidal category of chain complexes of A-modules? I guess there will need a lot of unfolding to do to get the operations, but here the anticommutativity is \"baked in\" the sign rules for the tensor product of chain complexes.</p>\n</blockquote>\n<p>To be honest, I don't know much about category theory. Previously, other students used a categorical API to prove that the derivative <code>d</code> of the Koszul complex satisfies <code>d^2 = 0</code>. I was responsible for porting this into a proof based on concrete definitions, under the guidance of other more experienced students. Therefore, I may not be able to answer your question. &gt;_&lt;</p>\n</blockquote>\n<p>Both point of views (concrete &amp; abstract categorical) are probably useful to have anyway (just like Mathlib has both algebras in unbundled form, and the equivalence between <code>AlgCat A</code> and <code>Mon_ (ModuleCat A)</code>). Since so far monoids in monoidal categories are bundled (I recall seeing a PR trying to have a type-class based version), this will also not play nice with your \"defining everything as a class approach anyway\"</p>\n<p>I was asking about the abstract categorical definition because of what I wrote after in parenthesis, where the equivalent definition really pays off when one wants to look at the homotopy theory of cdgas (and hopefully, Mathlib will want some derived algebraic geometry, of which one flavor of is heavily using this homotopy theory, when the time will be ripe).</p>\n<p>I also felt that it would be interesting to \"get the formulas\" out of the purely categorical definitions, which is most certainly possible, but I also looked a bit at it and Mathlib still needs a lot more infrastructure on its monoidal categories side to make this work anyways.</p>",
        "id": 521654752,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1748844574
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"631684\">@Yongle Hu</span>, that definition is not correct, you need to reverse the second multiplication. Please look at the in <a href=\"https://github.com/leanprover-community/mathlib/pull/18936\">!3#18936</a> I linked for the correct version</p>",
        "id": 521692072,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748856033
    },
    {
        "content": "<p>In general, generalizing a definition requires more thought than just making the code compile</p>",
        "id": 521692342,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748856101
    },
    {
        "content": "<p>The nuclear approach is to refactor groups once again (giving monoids this opposite action of Nat) but I wonder whether this would give me easier access to the right module structure on a tensor product of modules? I'm finding that It's very convenient to just switch it on occasionally in API development.</p>",
        "id": 521939451,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748939830
    },
    {
        "content": "<p>I think we should do that nuclear approach</p>",
        "id": 522067244,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748942028
    },
    {
        "content": "<p>Before or after or at the same time as adding the PNat_smul field?</p>",
        "id": 522067534,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748942102
    },
    {
        "content": "<p>It's already justified elsewhere as without it we can't talk about <code>TrivSqZeroExt Nat M</code> for some additive monoids <code>M</code>.</p>",
        "id": 522069276,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748942565
    },
    {
        "content": "<p>And the more we generalize to two-sided actions, the less will work for Nat / int</p>",
        "id": 522069410,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748942601
    },
    {
        "content": "<p>Other than duplication what was the thought process on <code>LSMul</code> and <code>RSMul</code></p>",
        "id": 522192958,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1748976022
    },
    {
        "content": "<p>That still needs the new field in AddMonoid, right?</p>",
        "id": 522193395,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748976160
    },
    {
        "content": "<p>I think ultimately that question is orthogonal to derivations, in that context it is at best a bikeshed about notation that we can revisit once we have a shed to paint.</p>",
        "id": 522193970,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748976385
    },
    {
        "content": "<p>I think it depends on how set it up. I would imagine (with limited forethought) that central actions would get abstracted out as something that extends both with some compatibilities.</p>",
        "id": 522194467,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1748976600
    },
    {
        "content": "<p>We already have central actions, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsCentralScalar#doc\">docs#IsCentralScalar</a></p>",
        "id": 522195212,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748976860
    },
    {
        "content": "<p>But even if things are central, the right action has to come from somewhere, and you can't build it from the left action without creating a diamond.</p>",
        "id": 522195312,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748976898
    },
    {
        "content": "<p>I agree. I think you will need some propositional compatibilities with each piece of data you add. But it would nice if it was one package that feeds directly into the existing typeclasses rather than having to retrofit each time. </p>\n<p>It seems like <code>[SMul M N] [SMul M·µê·µí·µñ N]</code> then trying to use the fact that \"M and M·µê·µí·µñ are the same\" sets you up for trouble.</p>",
        "id": 522196105,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1748977174
    },
    {
        "content": "<p><code>[SMul M N] [SMul M·µê·µí·µñ N] [IsCentralScalar M N]</code> works just fine today, the problem is that it is not currently satisfied by <code>Algebra M N</code>, or for <code>M := Nat</code> by <code>AddMonoid N</code>, or for <code>M := Int</code> by <code>AddGroup N</code>,</p>",
        "id": 522196741,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748977388
    },
    {
        "content": "<p>(It's satisfied mathematically, but we can't teach lean this is so without introducing new data fields)</p>",
        "id": 522196814,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748977416
    },
    {
        "content": "<blockquote>\n<p>I think you will need some propositional compatibilities with each piece of data you add.</p>\n</blockquote>\n<p>Indeed, we need one of these in each of AddMonoid, AddGroup, and Algebra</p>",
        "id": 522197049,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748977499
    },
    {
        "content": "<p>And <code>[LeftSMul Nat A] [RightSMul Nat A] [IsCentralBiSMul Nat A]</code> fails even worse for <code>AddMonoid A</code> since it is hallucinated and then isn't supported assuming some indulgence. </p>\n<p>Perhaps I am the outlier but it this situation and in others it seems more natural to the human thought process to split the <code>SMul</code> typeclass than to continue with op-fication.</p>",
        "id": 522198543,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1748978079
    },
    {
        "content": "<p>Yay let's have <code>luMS M R</code>, I think that's much more sensible than <code>SMul R^{mop} M</code> (apart from the silly name, that's obviously a bit less sensible but hopefully indicates what it's supposed to represent)</p>",
        "id": 522212576,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1748983717
    },
    {
        "content": "<p>30 messages were moved from this topic to <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Right.20actions.20on.20tensor.20products.20.28again.29/with/522212704\">#mathlib4 &gt; Right actions on tensor products (again)</a> by <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>.</p>",
        "id": 522226597,
        "sender_full_name": "Notification Bot",
        "timestamp": 1748989898
    }
]