[
    {
        "content": "<p>Is it really the case that none of our 222 <code>Fintype</code> instances are scoped?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Meta</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"w\"> </span><span class=\"n\">Command</span>\n\n<span class=\"kd\">run_cmd</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"c1\">-- 222, 0</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">dt</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">liftCoreM</span><span class=\"w\"> </span><span class=\"n\">getGlobalInstancesIndex</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">globalNames</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">Name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">dt.fold</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[])</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">arr</span><span class=\"w\"> </span><span class=\"n\">keys</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">const</span><span class=\"w\"> </span><span class=\"ss\">`Fintype</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">keys</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span><span class=\"bp\">!</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">inst.attrKind</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">global</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">        </span><span class=\"n\">arr.push</span><span class=\"w\"> </span><span class=\"n\">inst.globalName</span><span class=\"bp\">?.</span><span class=\"n\">get</span><span class=\"bp\">!</span>\n<span class=\"w\">      </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">arr</span>\n<span class=\"w\">    </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">arr</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">scopedNames</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">dt.fold</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[])</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">arr</span><span class=\"w\"> </span><span class=\"n\">keys</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">const</span><span class=\"w\"> </span><span class=\"ss\">`Fintype</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">keys</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span><span class=\"bp\">!</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">inst.attrKind</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">scoped</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">        </span><span class=\"n\">arr.push</span><span class=\"w\"> </span><span class=\"n\">inst.globalName</span><span class=\"bp\">?.</span><span class=\"n\">get</span><span class=\"bp\">!</span>\n<span class=\"w\">      </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">arr</span>\n<span class=\"w\">    </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">arr</span>\n<span class=\"w\">  </span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"bp\">!</span><span class=\"s2\">\"{globalNames.size}, {scopedNames.size}\"</span>\n</code></pre></div>",
        "id": 459471323,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723209294
    },
    {
        "content": "<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Here are their names</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Unique.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.FinCategory.fintypeObj</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SetLike.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">NonemptyFiniteLinearOrder.toFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FinEnum.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">IsSimpleOrder.instFintypeOfDecidableEq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"bp\">.</span><span class=\"n\">fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeSymbol</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Submodule.Quotient.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Submodule.QuotientTop.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">QuotientGroup.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">QuotientAddGroup.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.FinCategory.fintypeHom</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.Limits.WidePullbackShape.fintypeHom</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.finBiconeHom</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.FinCategory.instFintypeHomObjAsType</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.Limits.WidePushoutShape.fintypeHom</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.discreteHomFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Configuration.instFintypeDual</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Turing.PartrecToTM2.instFintypeΓ'</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.Limits.fintypeWalkingParallelPair</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Polynomial.Gal.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Matrix.instFintypeOfDecidableEq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Additive.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">minpoly.AlgHom.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Lex.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Finset.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.Limits.instFintypeWalkingParallelPairHom</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">RelHom.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.instFintypeColoring</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.Limits.WidePullbackShape.fintypeObj</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">ULift.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">compositionAsSetFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Turing.TM2to1.Γ'.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Polynomial.IsSplittingField.instFintypeSplittingField</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.finBicone</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">NumberField.Embeddings.instFintypeRingHom</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">GaloisField.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeConjClassesOfDecidableRelIsConj</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeUnitsOfDecidableEq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">UnitsInt.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SetTheory.PGame.fintypeRightMoves</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SetTheory.PGame.fintypeRightMovesOfStateAux</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeSum</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">equivFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Subtype.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Fintype.subtypeEq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Finset.fintypeCoeSort</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">List.Subtype.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Multiset.Subtype.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Finset.Subtype.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FinsetCoe.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeUniv</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeUnion</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeSep</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeInter</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeInterOfLeft</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeInterOfRight</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeDiff</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeDiffLeft</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeiUnion</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypesUnion</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeBiUnion'</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeBind'</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeEmpty</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeSingleton</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypePure</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeInsert</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeInsert'</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeImage</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeRange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeMap</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeImage2</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeSeq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeSeq'</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeMemFinset</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Submonoid.fintypePowers</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">AddSubmonoid.fintypeMultiples</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">RingHom.fintypeRangeS</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">RingHom.fintypeRange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeIcc</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeIco</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeIoc</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeIoo</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeIci</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeIoi</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeIic</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeIio</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeUIcc</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">LinearMap.fintypeRange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">NonUnitalRingHom.fintypeRange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">NonUnitalAlgHom.fintypeRange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">AlgHom.fintypeRange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Subgroup.instFintypeSubtypeMemOfDecidablePred</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">AddSubgroup.instFintypeSubtypeMemOfDecidablePred</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Subgroup.fintypeBot</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">AddSubgroup.fintypeBot</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">MonoidHom.fintypeMrange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">AddMonoidHom.fintypeMrange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">MonoidHom.fintypeRange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">AddMonoidHom.fintypeRange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">conjugatesOf.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">ConjClasses.instFintypeElemCarrier</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Polynomial.rootSetFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">IsNoetherian.instFintypeElemOfVectorSpaceIndex</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FiniteDimensional.instFintypeElemOfVectorSpaceIndex</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">RingHom.fintypeFieldRange</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.neighborSetFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.Subgraph.finiteAt</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.Subgraph.instFintypeElemNeighborSetOfVertsOfDecidablePredMemSet</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeElemImageToSetOfDecidableEqOfSingletonSet</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Fintype.subtypeEq'</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.fintypeSetWalkLength</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.fintypeSubtypeWalkLength</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.fintypeSetPathLength</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">rootsOfUnity.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">NumberField.Units.instFintypeSubtypeUnitsRingOfIntegersMemSubgroupTorsion</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeElemPermDerangements</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">alternatingGroup.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.Subgraph.coeFiniteAt</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Equiv.Perm.VectorsProdEqOne.instFintypeElemVectorVectorsProdEqOne</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">fintypeNodupList</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FreeGroup.instFintypeSubtypeListProdBoolRed</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeLTNat</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeLENat</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.fintypeEdgeSet</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.fintypeEdgeSetBot</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.fintypeEdgeSetSup</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.fintypeEdgeSetInf</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.fintypeEdgeSetSdiff</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.instFintypeElemSym2EdgeSetFromEdgeSetOfDecidableEq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.incidenceSetFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.instFintypeElemSym2EdgeSetEdge</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeProd</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintypeOffDiag</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.boxProdFintypeNeighborSet</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeElemProdNatSetOfLtSndCountFst</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Cycle.fintypeNodupNontrivialCycle</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Cycle.fintypeNodupCycle</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintype_memPartition</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Profinite.NobelingProof.instFintypeElemForallBoolπMemFinset</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">PLift.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">PLift.fintypeProp</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Fintype.instPEmpty</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.Dart.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">compositionFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimpleGraph.instFintypeConnectedComponent</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Vector.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.Limits.fintypeWalkingPair</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeSym'OfDecidableEq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">ZMod.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.Limits.FintypeCat.finiteColimitOfFiniteDiagram</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">QuaternionGroup.instFintypeOfNeZeroNat</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Function.Embedding.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeSimpleGraphOfDecidableEq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Module.Free.ChooseBasisIndex.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Multiplicative.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.Limits.FintypeCat.finiteLimitOfFiniteDiagram</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">RelEmbedding.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Fintype.instEmpty</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Quotient.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">QuotientAddGroup.fintypeQuotientRightRel</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">QuotientGroup.fintypeQuotientRightRel</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SetTheory.PGame.fintypeLeftMoves</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SetTheory.PGame.fintypeLeftMovesOfStateAux</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">AlgEquiv.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeAlgEquivOfIsDomainOfIsIntegrallyClosedOfFiniteOfNoZeroSMulDivisors</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeClassGroupOfIsPrincipalIdealRing</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FunctionField.RingOfIntegers.instFintypeClassGroupSubtypeMemSubalgebraPolynomialRingOfIntegers</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">NumberField.RingOfIntegers.instFintypeClassGroup</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Unit.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">PUnit.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimplicialObject.Splitting.IndexSet.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Nat.Partition.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Hamming.instFintypeOfDecidableEq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">LucasLehmer.X.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">DihedralGroup.instFintypeOfNeZeroNat</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeSymOfDecidableEq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Bool.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SignType.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">NumberField.InfinitePlace.NumberField.InfinitePlace.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">DFinsupp.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Affine.Simplex.instFintypePointsWithCircumcenterIndex</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Multiset.fintypeCoe</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FirstOrder.Ring.instFintypeSymbolsRing</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Shrink.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Sym2.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">OrderDual.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeProd</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Fin.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Abelianization.instFintypeOfDecidablePredMemSubgroupCommutator</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">PSigma.fintypePropLeft</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">PSigma.fintypePropRight</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">PSigma.fintypePropProp</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">PSigma.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.Limits.WidePushoutShape.fintypeObj</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">ConjAct.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Finpartition.instFintypeOfDecidableEq</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">LieModule.Weight.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Computability.Γ'.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Finsupp.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Sigma.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.discreteFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Fin2.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">OnePoint.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Module.End.instFintypeEigenvalues</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">instFintypeOption</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Set.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">TruncatedWittVector.instFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">pfunFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"k\">Pi</span><span class=\"bp\">.</span><span class=\"n\">fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">AlgebraicGeometry.Scheme.instFintypeJFiniteSubcover</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FintypeCat.instFintypeα</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FinBoolAlg.isFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FinBddDistLat.isFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FinTopCat.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FinTopCat.instFintypeαTopologicalSpaceObjTopCatForget₂</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FinPartOrd.isFintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">SimplexCategory.instFintypeObjForget</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">FinTopCat.instFintypeObjForget</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">Computability.Γ.fintype</span><span class=\"o\">,</span>\n<span class=\"w\"> </span><span class=\"n\">CategoryTheory.Mat_.fintype</span><span class=\"o\">]</span>\n</code></pre></div>\n</div></div>",
        "id": 459471891,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723209432
    },
    {
        "content": "<p>My understanding was that <code>scoped instance</code> was only for instances that carry surprising or controversial data; and the fact that <code>Subsingleton (Fintype _)</code> is true means that Fintype instances should never be surprising.</p>",
        "id": 459472300,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723209519
    },
    {
        "content": "<p>How much work does Lean need to do to not be surprised?</p>",
        "id": 459473455,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723209779
    },
    {
        "content": "<p><code>CommSemiring</code> is 69, 0 so this behavior is the case across all classes</p>",
        "id": 459473888,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723209871
    },
    {
        "content": "<p>I would imagine any instance declared in <code>CategoryTheory</code> should be scoped to <code>CategoryTheory</code> for example</p>",
        "id": 459474354,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723209968
    },
    {
        "content": "<p>No one is accidentally using <code>Quiver.Hom</code> notation.</p>",
        "id": 459474915,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723210100
    },
    {
        "content": "<p>Shouldn't that mean that those instances aren't ever checked in the first place when people aren't using them? So there's no need to scope them?</p>",
        "id": 459475324,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1723210195
    },
    {
        "content": "<p>(the category theory ones, not <code>CommSemiring</code>)</p>",
        "id": 459475403,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1723210210
    },
    {
        "content": "<p>It depends on the keys.</p>",
        "id": 459475428,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723210217
    },
    {
        "content": "<p>If those are robust enough, then yes. But in some cases they are not, eg <a href=\"https://github.com/leanprover/lean4/pull/4932\">lean#4932</a></p>",
        "id": 459475612,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723210258
    },
    {
        "content": "<p>For example, <code>CategoryTheory.FinCategory.fintypeObj</code> will be tried for any search for <code>Fintype</code> on a <code>Subtype</code></p>",
        "id": 459476334,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723210507
    },
    {
        "content": "<p>I think rather than disabling instances, it might be better to try and come up with a better keying algorithm</p>",
        "id": 459477477,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723210836
    },
    {
        "content": "<p>Perhaps along the lines of allowing a custom key generator for certain types like <code>Subtype</code></p>",
        "id": 459477539,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723210864
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/4932\">lean#4932</a> should fix the <code>Subtype</code> issue itself but philosophically why should one want to have anything to do with <code>CategoryTheory</code> instances if they are not working explicitly on <code>CategoryTheory</code> when all the basic notation is scoped to that namespace already</p>",
        "id": 459477855,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723210983
    },
    {
        "content": "<p>One thing that the keying algorithm doesn't do is look in the context. One could imagine some light weight filtering based on this information.</p>",
        "id": 459478210,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723211112
    }
]