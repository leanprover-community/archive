[
    {
        "content": "<p>In <a href=\"https://github.com/urkud/SardMoreira\">https://github.com/urkud/SardMoreira</a>, I need <code>fderiv Real (fun y =&gt; f (a, y)) b</code> a lot, both in this form and as <code>fderiv Real f (a, b) |&gt;.comp (.inr _ _ _)</code>. AFAIR, <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> needed partial derivatives of a similar kind for sphere eversion. Should we add them to Mathlib?</p>",
        "id": 564365126,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1766018786
    },
    {
        "content": "<p>Indeed I used that in sphere eversion but <span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span> pushed a lot against it.</p>",
        "id": 564540179,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1766085113
    },
    {
        "content": "<p>Yeah, we definitely used that in sphere eversion.<br>\nI was worried about writing it as a new definition, which then requires a duplication of almost all of the <code>fderiv</code> API, and we have to copy this API for first partial derivative on <code>Prod</code>, second partial derivative on <code>Prod</code>, and the <code>i</code>-th partial derivative in <code>(i : \\i) -&gt; E i</code>.<br>\nIt is not clear to me that this duplication is desirable. But if it would make working with partial derivatives a lot easier (does it?), then it is probably worth it.</p>",
        "id": 564690845,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1766149224
    },
    {
        "content": "<p>For me, the main issue is that we have at least 3 ways to write this:</p>\n<ul>\n<li><code>fderiv Real (fun y =&gt; f (a, y)) b</code></li>\n<li><code>(fderiv Real f (a, b)).comp (.inl Real _ _)</code></li>\n<li><code>fderiv Real (f.curry a) b</code>.</li>\n</ul>\n<p>I'm OK if instead of introducing the definition, we just agree on which one is the normal form.</p>",
        "id": 564779972,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1766181017
    },
    {
        "content": "<p>The last one has no counterpart for <code>fderiv_1</code>, so it's a bad candidate. The first two are equal for differentiable functions, but not for a function that's differentiable in <code>y</code> but not in <code>(x, y)</code>.</p>",
        "id": 564780094,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1766181090
    },
    {
        "content": "<p>In the SardMoreira project, I failed to choose one form, so had to rewrite back and forth here and there.</p>",
        "id": 564789624,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1766188413
    },
    {
        "content": "<p>Did that experience teach you which one should be preferred?</p>",
        "id": 564805545,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1766210705
    },
    {
        "content": "<p>Not yet. I was too busy rushing to the result.</p>",
        "id": 564805582,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1766210742
    },
    {
        "content": "<p>I think that the first spelling makes more sense, because it works for functions that aren't differentiable in both variables.</p>",
        "id": 564805616,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1766210784
    },
    {
        "content": "<p>From my experience in the sphere eversion project, I used<br>\n<code>fderiv Real (fun y =&gt; f (a, y)) b</code>. In some computations I used that is was equal to option 2.<br>\nOption 3 is defeq (though probably not reducible defeq) to 1, right?</p>",
        "id": 565146795,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1766492380
    },
    {
        "content": "<p>Yes, Option 3 is defeq but not reducibly defeq to Option 1. Let's say that we try to use Option 1.</p>",
        "id": 565166862,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1766500690
    }
]