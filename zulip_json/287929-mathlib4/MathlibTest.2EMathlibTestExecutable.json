[
    {
        "content": "<p>Am I correct that <code>MathlibTest.MathlibTestExecutable</code> (the <code>lean_exe</code> target for <a href=\"https://github.com/leanprover-community/mathlib4/blob/f531e60051b4034a728c12e0608f2e081ef091b3/MathlibTest/MathlibTestExecutable.lean#L10\">this file</a>) is not included in the Mathlib test driver? If I wanted something similar but also want to include it with the runner called for <code>lake test</code>, what would be the recommended way to do this?</p>",
        "id": 547674520,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761732416
    },
    {
        "content": "<p>I think it is <em>built</em> by <code>lake test</code>, but not compiled. That we only do in a once-daily CI job. (Which, incidentally, has been failing for more than a week, and I haven't got around to investigating why. <span aria-label=\"embarrassed\" class=\"emoji emoji-1f633\" role=\"img\" title=\"embarrassed\">:embarrassed:</span>)</p>",
        "id": 547686703,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1761735822
    },
    {
        "content": "<p>I'm actually not sure how to ask for compilation via <code>lake test</code>. I guess you could write an auxiliary test file that shells out <code>lake exe MathlibTest.MathlibTestExecutable</code> (ick?)</p>",
        "id": 547686934,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1761735884
    },
    {
        "content": "<p>Yeah, that ick is why I asked. We currently have something similar proposed in <a href=\"https://github.com/leanprover/cslib/pull/131\">cslib#131</a> and I was hoping there was a better way...</p>",
        "id": 547687652,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761736092
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span>, I guess we need to ask you? Can we ask for <em>compilation</em> of some module from <code>lake test</code>?</p>",
        "id": 547691828,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1761737557
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> An executable itself can be a test driver, which I think would achieve the desired result here.</p>",
        "id": 547912018,
        "sender_full_name": "Mac Malone",
        "timestamp": 1761824364
    },
    {
        "content": "<p>What I meant here is a single test driver composed of multiple <code>lean_exe</code> and <code>lean_lib</code> from the lakefile. In the example of Mathlib for instance, both <code>MathlibTest</code> and  and an executable like <code>MathlibTest.MathlibTestExecutable</code>.</p>",
        "id": 547913083,
        "sender_full_name": "Chris Henson",
        "timestamp": 1761824695
    },
    {
        "content": "<p>In that case I think we need:</p>\n<blockquote>\n<p>chore: support multiple Lake test driversÂ <a href=\"https://github.com/leanprover-community/mathlib4/pull/10531\">#10531</a></p>\n</blockquote>",
        "id": 548037698,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1761860679
    },
    {
        "content": "<p>(warning, that PR was written by some random AI and I don't particularly vouch for it, hence it languishing in <code>draft</code> as I never got back to reviewing it.)</p>",
        "id": 548037763,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1761860723
    }
]