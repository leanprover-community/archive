[
    {
        "content": "<p>It looks like the same notion exists twice in Mathlib, as <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=partialSups#doc\">docs#partialSups</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Accumulate#doc\">docs#Accumulate</a> (weird capitalization for the latter, by the way):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">partialSups</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Accumulate</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">partialSups_eq_sup_range</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Accumulate</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">lt_succ_iff</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Is it worth cleaning?</p>",
        "id": 562786859,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1765310604
    },
    {
        "content": "<p>The difference is that <code>partialSups</code> requires locally finiteness on the index and only asks for existence of finite unions. <code>Set.Accumulate</code> only requires an arbitrary <code>LE</code> on the index but (should) only work for lattices with infinite unions (it actually only works for <code>Set _</code> which is weird).</p>\n<p>But I don't know if  we want both.</p>",
        "id": 562788386,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1765311096
    },
    {
        "content": "<p>Given their different type-class assumptions, I think it makes sense to have both, but maybe with more similar names (and the generalization Andrew mentions)</p>",
        "id": 562789865,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1765311504
    },
    {
        "content": "<p>(The capitalization might be a Mathport quirk: didn't it capitalize names of sets, since those are \"really Props\"? This might show how little <code>Accumulate</code> is used.)</p>",
        "id": 562790475,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1765311681
    },
    {
        "content": "<p>I'm just writing a proof where I would need <code>Accumulate</code> and <code>disjointed</code>. They would naturally go together, but there is no API linking the two because all the API for <code>disjointed</code> is in terms of <code>partialSups</code>. So it's not very convenient...</p>",
        "id": 562793346,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1765312587
    },
    {
        "content": "<p>This came up a while ago for the same reason, but in the end I found another way so didn't go with it. <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Set.2EAccumulate.20vs.20partialSups/with/502593837\">#mathlib4 &gt; Set.Accumulate vs partialSups</a></p>",
        "id": 562794436,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1765312933
    },
    {
        "content": "<p>IMO both definitions could reasonably be dropped? They provide easy to derive API for easy to write functions</p>",
        "id": 562811735,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1765318814
    },
    {
        "content": "<p>I myself am guilty of having added more API to <code>partialSups</code> in my mindless youth</p>",
        "id": 562811902,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1765318870
    }
]