[
    {
        "content": "<p>In PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/20621\">#20621</a>:<br>\nJob <code>post-ot-update-summary-content</code> fails with output:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Run</span><span class=\"w\"> </span><span class=\"n\">PR</span><span class=\"bp\">=</span><span class=\"s2\">\"20621\"</span>\n<span class=\"n\">HEAD</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">now</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"n\">fea628435</span><span class=\"w\"> </span><span class=\"n\">Merge</span><span class=\"w\"> </span><span class=\"mi\">624611</span><span class=\"n\">a2fdf76d7c9ba368f9baca73abf651052f</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"mi\">039</span><span class=\"n\">d0c764222c952a7433440024a4adb1aaebaba</span>\n<span class=\"n\">Updated</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">paths</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"n\">dcf6fc0b2</span>\n<span class=\"n\">HEAD</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">now</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"n\">fea628435</span><span class=\"w\"> </span><span class=\"n\">Merge</span><span class=\"w\"> </span><span class=\"mi\">624611</span><span class=\"n\">a2fdf76d7c9ba368f9baca73abf651052f</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"mi\">039</span><span class=\"n\">d0c764222c952a7433440024a4adb1aaebaba</span>\n<span class=\"n\">Previous</span><span class=\"w\"> </span><span class=\"n\">HEAD</span><span class=\"w\"> </span><span class=\"n\">position</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"n\">fea628435</span><span class=\"w\"> </span><span class=\"n\">Merge</span><span class=\"w\"> </span><span class=\"mi\">624611</span><span class=\"n\">a2fdf76d7c9ba368f9baca73abf651052f</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"mi\">039</span><span class=\"n\">d0c764222c952a7433440024a4adb1aaebaba</span>\n<span class=\"n\">HEAD</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">now</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"mi\">039</span><span class=\"n\">d0c7642</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"o\">(</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">CharP</span><span class=\"bp\">/</span><span class=\"n\">LinearMaps</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"w\"> </span><span class=\"n\">errors</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">#</span><span class=\"mi\">20679</span><span class=\"o\">)</span>\n<span class=\"n\">Updated</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">paths</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"n\">dcf6fc0b2</span>\n<span class=\"n\">Previous</span><span class=\"w\"> </span><span class=\"n\">HEAD</span><span class=\"w\"> </span><span class=\"n\">position</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"mi\">039</span><span class=\"n\">d0c7642</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"o\">(</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Algebra</span><span class=\"bp\">/</span><span class=\"n\">CharP</span><span class=\"bp\">/</span><span class=\"n\">LinearMaps</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">Fix</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"w\"> </span><span class=\"n\">errors</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">#</span><span class=\"mi\">20679</span><span class=\"o\">)</span>\n<span class=\"n\">HEAD</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">now</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"n\">fea628435</span><span class=\"w\"> </span><span class=\"n\">Merge</span><span class=\"w\"> </span><span class=\"mi\">624611</span><span class=\"n\">a2fdf76d7c9ba368f9baca73abf651052f</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"mi\">039</span><span class=\"n\">d0c764222c952a7433440024a4adb1aaebaba</span>\n<span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">pull</span><span class=\"bp\">/</span><span class=\"mi\">20621</span>\n<span class=\"n\">Previous</span><span class=\"w\"> </span><span class=\"n\">HEAD</span><span class=\"w\"> </span><span class=\"n\">position</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"n\">fea628435</span><span class=\"w\"> </span><span class=\"n\">Merge</span><span class=\"w\"> </span><span class=\"mi\">624611</span><span class=\"n\">a2fdf76d7c9ba368f9baca73abf651052f</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"mi\">039</span><span class=\"n\">d0c764222c952a7433440024a4adb1aaebaba</span>\n<span class=\"n\">Switched</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">artie2000</span><span class=\"bp\">-</span><span class=\"n\">closure</span><span class=\"bp\">-</span><span class=\"n\">abstract'</span>\n<span class=\"n\">branch</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">artie2000</span><span class=\"bp\">-</span><span class=\"n\">closure</span><span class=\"bp\">-</span><span class=\"n\">abstract'</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">track</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">origin</span><span class=\"bp\">/</span><span class=\"n\">artie2000</span><span class=\"bp\">-</span><span class=\"n\">closure</span><span class=\"bp\">-</span><span class=\"n\">abstract'</span><span class=\"bp\">.</span>\n<span class=\"bp\">***</span><span class=\"w\">  </span><span class=\"n\">pr_summary</span><span class=\"w\"> </span><span class=\"n\">passed</span><span class=\"w\">  </span><span class=\"bp\">***</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/</span><span class=\"n\">work</span><span class=\"bp\">/_</span><span class=\"n\">temp</span><span class=\"bp\">/</span><span class=\"mi\">06</span><span class=\"n\">a5414e</span><span class=\"bp\">-</span><span class=\"n\">c0ac</span><span class=\"bp\">-</span><span class=\"mi\">4</span><span class=\"n\">f62</span><span class=\"bp\">-</span><span class=\"n\">aad4</span><span class=\"bp\">-</span><span class=\"mi\">461</span><span class=\"n\">cce7b216b</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">line</span><span class=\"w\"> </span><span class=\"mi\">49</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">./</span><span class=\"n\">scripts</span><span class=\"bp\">/</span><span class=\"n\">update_PR_comment</span><span class=\"bp\">.</span><span class=\"n\">sh</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Argument</span><span class=\"w\"> </span><span class=\"n\">list</span><span class=\"w\"> </span><span class=\"n\">too</span><span class=\"w\"> </span><span class=\"n\">long</span>\n<span class=\"n\">Error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Process</span><span class=\"w\"> </span><span class=\"n\">completed</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mf\">126.</span>\n</code></pre></div>",
        "id": 493461283,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1736806594
    },
    {
        "content": "<p>Did you try merging a recent master and pushing again?</p>",
        "id": 493464611,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736807751
    },
    {
        "content": "<p>This error is similar, but slightly different, from errors that I have seen before.</p>",
        "id": 493465423,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736808018
    },
    {
        "content": "<p>If merging master does not fix it, I will take a look.</p>",
        "id": 493465458,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736808031
    },
    {
        "content": "<p>(Note that a change to a part of the summary was merged an hour or so ago: I was not expecting PRs to break with the change, but you never know.)</p>",
        "id": 493465580,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736808085
    },
    {
        "content": "<p>Ok, that did not work.</p>",
        "id": 493466247,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736808325
    },
    {
        "content": "<p>Let me investigate.</p>",
        "id": 493466258,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736808332
    },
    {
        "content": "<p>still broken<br>\ncan't be that change bc the error started appearing even yesterday<br>\nstarted after I rebased my existing changes onto <a href=\"https://github.com/leanprover-community/mathlib4/pull/20638\">#20638</a></p>",
        "id": 493466343,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1736808362
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Strange.20error.20in.20CI/near/493466258\">said</a>:</p>\n<blockquote>\n<p>Let me investigate.</p>\n</blockquote>\n<p>thank you!</p>",
        "id": 493466370,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1736808369
    },
    {
        "content": "<p>The failing job is not one of the ones required for us to merge the PR (the ones starting with \"continuous integration\" are the ones we (and bors) pay attention to), so I wouldn't worry about it too much.</p>",
        "id": 493466617,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1736808478
    },
    {
        "content": "<p>It looks as though the message that the bot would post is too long, since there seems to be a 100 lines limit on arguments passed.</p>",
        "id": 493470998,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736810027
    },
    {
        "content": "<p>Oh<br>\nthat's fine ig</p>",
        "id": 493471101,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1736810059
    },
    {
        "content": "<p>However, there have been PRs that touched thousands of files and I do not think that this problem ever came up.</p>",
        "id": 493471110,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736810066
    },
    {
        "content": "<p>problem also doesn't come up in <a href=\"https://github.com/leanprover-community/mathlib4/pull/20638\">#20638</a>, and the file diff between <a href=\"https://github.com/leanprover-community/mathlib4/pull/20638\">#20638</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/20621\">#20621</a> is (currently) very small, only like 4 files?</p>",
        "id": 493471239,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1736810120
    },
    {
        "content": "<p>despite both PRs affecting over 100 files</p>",
        "id": 493471271,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1736810135
    },
    {
        "content": "<p>Right, something else is off, but the script is complaining that it is receiving an input that is too long in your PR.</p>",
        "id": 493471570,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736810243
    },
    {
        "content": "<p>But I cannot find anything that seems exceptionally long...</p>",
        "id": 493471606,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736810258
    },
    {
        "content": "<p>E.g. <a href=\"https://github.com/leanprover-community/mathlib4/pull/20436\">#20436</a> is comparable in size, both in terms of number of files and number of lines, but also had no problems.</p>",
        "id": 493472049,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736810429
    },
    {
        "content": "<p>I am not really sure what is going on: the shell limit for the argument should be 20 times bigger than what I observe and yet bash complains that the argument list is too long also locally.</p>",
        "id": 493473653,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736811124
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> do you know what might be happening?</p>",
        "id": 493473703,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736811148
    },
    {
        "content": "<p>This happens when <code>.github/workflows/PR_summary.yaml</code> reaches its final line <code>./scripts/update_PR_comment.sh \"${message}\" \"${title}\" \"${PR}\"</code>: <code>$message</code> is a variable that is long, but does not seem insane:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span><span class=\"nb\">echo</span><span class=\"w\"> </span><span class=\"s2\">\"</span><span class=\"nv\">$message</span><span class=\"s2\">\"</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>wc\n<span class=\"w\">    </span><span class=\"m\">147</span><span class=\"w\">    </span><span class=\"m\">3755</span><span class=\"w\">  </span><span class=\"m\">132733</span>\n</code></pre></div>",
        "id": 493474060,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736811298
    },
    {
        "content": "<p>I’m not at a computer now but are there any suspicious substrings in <code>$message</code>? If not then I’d look at the other long examples that do work and see if there are any obvious differences</p>",
        "id": 493474689,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1736811559
    },
    {
        "content": "<p>The string does not contain double quotes <code>\"</code>, it contains 4 single quotes <code>'</code> but does not seem to contain any weird character that would not have appeared in other strings.</p>",
        "id": 493474843,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736811622
    },
    {
        "content": "<p>For instance, it contains lots of backticks, but these are all over the place in other messages.</p>",
        "id": 493474878,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736811641
    },
    {
        "content": "<p>maybe for the time being you can try having the script truncate the string to various lengths and seeing when it breaks?</p>",
        "id": 493476047,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1736812198
    },
    {
        "content": "<p>I do not have time now to investigate further, but here is a gist which should reproduce the issue:</p>\n<p><a href=\"https://gist.github.com/adomani/52d9ca2c0387e5b9cfc67261f07f13d7\">https://gist.github.com/adomani/52d9ca2c0387e5b9cfc67261f07f13d7</a></p>",
        "id": 493476223,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736812274
    },
    {
        "content": "<p>The variable <code>$message</code> does have a very long line and I think that the long line might be the culprit, but I have not isolated the issue completely.</p>",
        "id": 493476397,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736812335
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Strange.20error.20in.20CI/near/493476047\">said</a>:</p>\n<blockquote>\n<p>maybe for the time being you can try having the script truncate the string to various lengths and seeing when it breaks?</p>\n</blockquote>\n<p>This is essentially what I tried: I took <code>| head xx</code> and <code>| tail xx</code> of the string and both from the top and from the bottom it choked when it reached the same long line.</p>",
        "id": 493476552,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736812418
    },
    {
        "content": "<p>Probably the issue is that there are almost 3k files that changed their imports by the same amount and this may be the first time that the number of files does not exceed the limit that the script uses and is large enough to cause problems.  <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span></p>",
        "id": 493476738,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736812503
    },
    {
        "content": "<p>The limit for posting on GitHub is here:</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/2b06bd42bb773436dae0db6119c16b294ea8d2aa/scripts/import_trans_difference.sh#L70\">https://github.com/leanprover-community/mathlib4/blob/2b06bd42bb773436dae0db6119c16b294ea8d2aa/scripts/import_trans_difference.sh#L70</a></p>\n<p>If I remember correctly, there is a pretty large margin: probably 2 or 3 times this length would be allowed on GitHub.  But the issue now is with the shell, before it reaches the time to post the comment on GitHub.</p>",
        "id": 493477006,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736812634
    },
    {
        "content": "<p>Anyway, it is time to go to bed for me now!</p>",
        "id": 493477053,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736812660
    },
    {
        "content": "<p>Not sure if it's connected, but GitHub had an issue for some period:<br>\n<a href=\"/user_uploads/3121/nZBKsJ2rSTkrC5iTETH45Bdm/Pasted-image-20250114011250.png\">Pasted image 20250114011250.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/nZBKsJ2rSTkrC5iTETH45Bdm/Pasted-image-20250114011250.png\" title=\"Pasted image 20250114011250.png\"><img data-original-dimensions=\"1579x1009\" src=\"/user_uploads/thumbnail/3121/nZBKsJ2rSTkrC5iTETH45Bdm/Pasted-image-20250114011250.png/840x560.webp\"></a></div><p>Other symptoms:<br>\n<a href=\"/user_uploads/3121/f-dhv1TAdaasztnkisPbvTqK/Pasted-image-20250114010746.png\">Pasted image 20250114010746.png</a><br>\n<a href=\"/user_uploads/3121/v9vnhuwX2bisKrLeF-0YgEzX/Pasted-image-20250114005056.png\">Pasted image 20250114005056.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/f-dhv1TAdaasztnkisPbvTqK/Pasted-image-20250114010746.png\" title=\"Pasted image 20250114010746.png\"><img data-original-dimensions=\"1579x1016\" src=\"/user_uploads/thumbnail/3121/f-dhv1TAdaasztnkisPbvTqK/Pasted-image-20250114010746.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/v9vnhuwX2bisKrLeF-0YgEzX/Pasted-image-20250114005056.png\" title=\"Pasted image 20250114005056.png\"><img data-original-dimensions=\"1580x1009\" src=\"/user_uploads/thumbnail/3121/v9vnhuwX2bisKrLeF-0YgEzX/Pasted-image-20250114005056.png/840x560.webp\"></a></div>",
        "id": 493493988,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1736820682
    },
    {
        "content": "<p>I attempted to reproduce on my macOS machine (in both zsh and bash shells) but am not seeing the error. (If it matters, the commit of <code>origin/master</code> is <code>93a78ce08172d64f34b00d48cee6c0cc12c949ea</code> and <code>artie2000-closure-abstract</code> is <code>16be1f426a8d82c391bf59b92ce3de6bb1cc8b76</code>; the <code>update_PR_comment.sh</code> script fails when it can't find <code>GITHUB_REPOSITORY</code> and <code>GITHUB_TOKEN</code>; filling in those and <code>comment_id</code> with dummy values results in the <code>curl</code> command failing to connect, as expected).</p>\n<p>To make the script more robust against \"argument list too long\", maybe we could save <code>message</code> to a file and then use that everywhere instead of a shell variable? Both <code>jq</code> and <code>curl</code> should be able to read / write input from files just as easily.</p>",
        "id": 493666856,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1736887410
    },
    {
        "content": "<p>Yes, maybe saving the message to a file is a good solution: on my machine I could reproduce.</p>",
        "id": 493667869,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736887819
    },
    {
        "content": "<p>(Also, I had forgotten that I had to replace the variables with dummy names, but it was indeed one of the steps that I also had to go through!)</p>",
        "id": 493667928,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736887845
    },
    {
        "content": "<p>I'll see if I can open a PR to fix the script along these lines tonight or tomorrow <span aria-label=\"fingers crossed\" class=\"emoji emoji-1f91e\" role=\"img\" title=\"fingers crossed\">:fingers_crossed:</span></p>",
        "id": 493681026,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1736893219
    },
    {
        "content": "<p>I made a start towards this: <a href=\"https://github.com/leanprover-community/mathlib4/pull/20761\">#20761</a>.</p>",
        "id": 493686608,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736896311
    },
    {
        "content": "<p>It looks like Bryan's idea to store the message in a file works!</p>",
        "id": 493800530,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736927432
    },
    {
        "content": "<p>I think that the issue was that there was a really long <em>line</em> in the string that was being passed around.</p>",
        "id": 493800539,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736927438
    },
    {
        "content": "<p>So, while the total length of the string and the total number of lines in the string was not bigger than in other PRs, there may be a limit on length of individual lines that triggered an error in some function.</p>",
        "id": 493800541,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1736927439
    },
    {
        "content": "<p>It works! thanks</p>",
        "id": 494474451,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1737169934
    },
    {
        "content": "<blockquote>\n<p>store the message in a file</p>\n</blockquote>\n<p>I've observed some github-actions bots are now posting comments on PRs with the sole content <code>messageFile.md</code>, e.g. <a href=\"https://github.com/leanprover-community/mathlib4/pull/20591#issuecomment-2578868585\">here</a> where it should post PR summary with import changes, declarations diff and tech debt change.</p>",
        "id": 494537831,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1737221581
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Strange.20error.20in.20CI/near/494537831\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>store the message in a file</p>\n</blockquote>\n<p>I've observed some github-actions bots are now posting comments on PRs with the sole content <code>messageFile.md</code>, e.g. <a href=\"https://github.com/leanprover-community/mathlib4/pull/20591#issuecomment-2578868585\">here</a> where it should post PR summary with import changes, declarations diff and tech debt change.</p>\n</blockquote>\n<p>See <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/messageFile.2Emd\">#mathlib4 &gt; messageFile.md</a> .</p>",
        "id": 494538538,
        "sender_full_name": "Christian Merten",
        "timestamp": 1737222109
    },
    {
        "content": "<p>As <span class=\"user-mention\" data-user-id=\"648495\">@Christian Merten</span> said, this should be fixed by merging <code>master</code>. I can't really comment on the cause, other than to say it appears to be the <code>PR_summary</code> workflow from <a href=\"https://github.com/leanprover-community/mathlib4/pull/20761\">#20761</a> running against <code>scripts/update_PR_comment.sh</code> from a pre-20761 commit.</p>",
        "id": 494538863,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737222273
    },
    {
        "content": "<p>The cause is that the script used to take as input the string to be updated, but now it takes the name of a file containing the message.</p>",
        "id": 494544556,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737226427
    },
    {
        "content": "<p>Since the \"fix\" is simply to merge master, it was decided to not add extra backwards compatibility fluff in the script.</p>",
        "id": 494544759,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737226579
    },
    {
        "content": "<p>I wonder if its worth having a script that pings PR authors to merge master if a newer <code>scripts</code> dir is needed?</p>",
        "id": 494552896,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737233161
    },
    {
        "content": "<p>I hope that these scripts change seldom enough that it may not be worth it.  However, I will keep it in mind: rather than printing the file name, this time it would have been minimal effort to make it print \"Merge current master and push again to see the PR summary report.\".</p>",
        "id": 494553314,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1737233506
    },
    {
        "content": "<p>Oh good point. You don't really need to do anything fancy, just put a message in the same place you were already going to.</p>",
        "id": 494553517,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737233676
    },
    {
        "content": "<p>(It's not hard to find all such PRs. If you would like to mass-post, ping me and I can compute this easily.)</p>",
        "id": 494569051,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737238791
    }
]