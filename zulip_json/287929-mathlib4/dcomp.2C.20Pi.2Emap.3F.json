[
    {
        "content": "<p>We have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Function.dcomp#doc\">docs#Function.dcomp</a> which is used only a few times across the library. What do you think about replacing it with a bit less generic</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">inline</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Pi</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>so that lemmas like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Function.surjective_pi_map#doc\">docs#Function.surjective_pi_map</a> can be formulated as <code>|- Surjective (F ∘' ·)</code> (if we keep notation) or <code>|- Surjective (Pi.map F)</code> (w/o notation)?</p>",
        "id": 459888485,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1723380973
    },
    {
        "content": "<p>With current definition, <code>(F ∘' ·)</code> fails to elaborate.</p>",
        "id": 459888508,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1723381006
    },
    {
        "content": "<p>More details: <code>(F _ ∘' ·)</code> elaborates if the type is known.</p>",
        "id": 459889824,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1723382060
    },
    {
        "content": "<p>See <a href=\"https://github.com/leanprover-community/mathlib4/pull/15694\">#15694</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/15744\">#15744</a> for context</p>",
        "id": 460116971,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1723479967
    },
    {
        "content": "<p>UPD: making <code>dcomp</code> less dependent doesn't work with usage in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.lmarginal_image#doc\">docs#MeasureTheory.lmarginal_image</a></p>",
        "id": 460118689,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1723480382
    }
]