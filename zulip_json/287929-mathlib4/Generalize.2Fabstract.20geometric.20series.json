[
    {
        "content": "<p>In mathlib there is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=geom_series_mul_neg#doc\">docs#geom_series_mul_neg</a>, which is stated for <code>NormedRing</code>. I have a similar lemma for PowerSeries for my own use (I didn't find this in mathlib. Is it there?)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">PowerSeries</span><span class=\"bp\">.</span><span class=\"n\">geom_series_mul_neg</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">IsTopologicalRing</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">⟦</span><span class=\"n\">X</span><span class=\"bp\">⟧</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">.</span><span class=\"n\">order</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I could PR this as-is, but I wonder if there is a way to have a more abstract way to include both, and possibly more forms of geometric series?</p>",
        "id": 544429271,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1760303406
    },
    {
        "content": "<p>(btw I think the thoerem is misnamed because there isn't a \"neg\" in the statement)</p>",
        "id": 544429368,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1760303540
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873350\">Weiyi Wang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Generalize.2Fabstract.20geometric.20series/near/544429271\">said</a>:</p>\n<blockquote>\n<p>more abstract way to include both</p>\n</blockquote>\n<p>maybe state it in terms of Int[[x]]?</p>",
        "id": 544433468,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760308638
    },
    {
        "content": "<p>What do you mean?<br>\nI probably should clarify that \"include both\" means a general theorem that implies the NormedRing version and the PowerSeries version (with possibly some modification to hypothesis). Int[[X]] doesn't imply the NormedRing version, right?</p>",
        "id": 544433599,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1760308820
    },
    {
        "content": "<p>well I would hope that if f and g are power series and they both converge in a normed ring (for b) then f(b) g(b) = (fg)(b)</p>",
        "id": 544459859,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760333554
    },
    {
        "content": "<p>and 1-x and 1 always converge</p>",
        "id": 544459882,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760333569
    },
    {
        "content": "<p>I don't think there are theory of evaluating power series in normed ring in mathlib yet</p>",
        "id": 544526629,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1760355150
    },
    {
        "content": "<p>There is, it just uses FormalMultilinearSeries</p>",
        "id": 544534629,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1760357297
    },
    {
        "content": "<p>of course</p>",
        "id": 544534818,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760357350
    },
    {
        "content": "<p>But I am doing combinatorics and I don't need to evaluate. The original question was just asking if there is a way to unify, and I am fine if the answer is \"no\" or \"too difficult\"</p>",
        "id": 544536507,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1760357804
    },
    {
        "content": "<p>Oh, I might have misread your message. Let me think a bit...</p>",
        "id": 544537840,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1760358136
    },
    {
        "content": "<p>For PowerSeries, there is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PowerSeries.mk_add_choose_mul_one_sub_pow_eq_one#doc\">docs#PowerSeries.mk_add_choose_mul_one_sub_pow_eq_one</a></p>",
        "id": 544604782,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1760380249
    },
    {
        "content": "<p>Yeah I am aware of that, but the one I need is substituting X with an arbitrary (x : PowerSeries R) (I haven't tried actually using the substitution lemmas for PowerSeries yet, which I will do soon)</p>",
        "id": 544605032,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1760380375
    },
    {
        "content": "<p>Sorry for missing that! You may be able to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=HahnSeries.SummableFamily.one_sub_self_mul_hsum_powers#doc\">docs#HahnSeries.SummableFamily.one_sub_self_mul_hsum_powers</a> after some translation.</p>",
        "id": 544606727,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1760381212
    },
    {
        "content": "<p>I am almost sure we have the substituon of one power series into another in maximal generality (even for infinitely many variables).</p>",
        "id": 544606976,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1760381367
    }
]