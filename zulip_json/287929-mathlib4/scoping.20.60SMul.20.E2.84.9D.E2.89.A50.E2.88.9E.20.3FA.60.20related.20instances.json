[
    {
        "content": "<p>Can we scope all the instances in <a href=\"http://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/ENNReal/Action.html\">this file</a>? We don't have any of the hypotheses in Mathlib: <span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> |- SMul ENNReal ?_</p>\n<p>And it slows down type class inference in the more common scenario when we want to get an <code>ℝ≥0</code> instance from the one for <code>ℝ</code>.</p>",
        "id": 512360258,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1744733119
    },
    {
        "content": "<p><span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span> nothing found</p>",
        "id": 512360263,
        "sender_full_name": "loogle",
        "timestamp": 1744733120
    },
    {
        "content": "<p>The instance is used by</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">NNReal</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">≥</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℝ</span><span class=\"bp\">≥</span><span class=\"mi\">0</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"bp\">≥</span><span class=\"mi\">0</span><span class=\"bp\">∞</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 512364200,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744734216
    },
    {
        "content": "<p>These come from my <a href=\"https://github.com/leanprover-community/mathlib/pull/7846\">!3#7846</a></p>",
        "id": 512365027,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744734424
    },
    {
        "content": "<p>I was hoping I had written a nice explanation there of why the instances go this way around, but alas</p>",
        "id": 512365197,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744734466
    },
    {
        "content": "<p>I claim it makes sense to <code>scope</code> that instance to the <code>ENNReal</code> namespace.</p>",
        "id": 512392112,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1744742926
    },
    {
        "content": "<p>I claim that scoping instances isn't really a good pattern in general, as I think it means you can get into a state mid-proof where the instance is in the goal view, but the lemmas about it won't apply because the instance can't be re-synthesized</p>",
        "id": 512398679,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744745274
    },
    {
        "content": "<p>(things like <code>ComplexOrder</code> seem just about ok because we scoped them due to confusing semantics in the first place)</p>",
        "id": 512398811,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744745314
    },
    {
        "content": "<p>We can at least lower the priority of these instances, so that the Real instances will be tried first.</p>",
        "id": 512458036,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1744776934
    }
]