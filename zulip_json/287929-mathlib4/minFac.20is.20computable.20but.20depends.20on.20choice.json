[
    {
        "content": "<p>This is probably a silly question, but how is this possible:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- `Nat.minFac` uses `Classical.choice` ...</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">axioms</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">minFac</span>\n<span class=\"c1\">-- ... but is computable</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">minFac</span><span class=\"w\"> </span><span class=\"mi\">9</span>\n</code></pre></div>\n<p>Is there just a wasted call to Classical.choice somewhere in the foundations of mathlib that gets pulled into <code>Nat.minFac</code>but is not actually executed or why does <code>#eval</code> not trip over the <code>noncomputable</code> / <code>axiom</code>?</p>",
        "id": 506994455,
        "sender_full_name": "Christoph Spiegel",
        "timestamp": 1742481994
    },
    {
        "content": "<p>If it's used in a proof that some computable function has a certain property, then this should be fine, no?</p>",
        "id": 506994727,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742482046
    },
    {
        "content": "<p>Looks to me that the data part of the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.minFacAux#doc\">docs#Nat.minFacAux</a> is computable but the proof that the \"definition is well-defined\", i.e. that the algorithm <em>always</em> terminates on any input, uses axioms.</p>",
        "id": 506995562,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742482210
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">axiom</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">9</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">37</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"bp\">⟩</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"c1\">-- 37</span>\n\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">axioms</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"c1\">-- foo</span>\n</code></pre></div>",
        "id": 506995989,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742482322
    },
    {
        "content": "<p>Ah, that does make sense. Thanks for the example!</p>",
        "id": 506996910,
        "sender_full_name": "Christoph Spiegel",
        "timestamp": 1742482550
    }
]