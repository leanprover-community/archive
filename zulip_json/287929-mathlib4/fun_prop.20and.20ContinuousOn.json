[
    {
        "content": "<p>I'm often confused by how fun_prop interacts with things like ContinuousOn vs. Continuous. I thought I had a good grasp on it, but then today:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">continuousOn_rpow_Ioi</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Ioi</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Continuous</span><span class=\"bp\">.</span><span class=\"n\">continuousOn</span>\n<span class=\"w\">  </span><span class=\"n\">fun_prop</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">continuousOn_rpow_Ioi_2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Ioi</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">fun_prop</span><span class=\"w\"> </span><span class=\"c1\">--fails?</span>\n</code></pre></div>\n<p>despite Continuous.continuousOn being marked fun_prop.</p>",
        "id": 574217641,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1771303684
    },
    {
        "content": "<p>This part of the trace reveals the issue</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">fun_prop</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">❌️</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Ioi</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">▼</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"n\">candidate</span><span class=\"w\"> </span><span class=\"n\">theorems</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">HPow</span><span class=\"bp\">.</span><span class=\"n\">hPow</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">applying</span><span class=\"w\"> </span><span class=\"ss\">`ContinuousOn</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">theorems</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"ss\">`HPow.hPow</span><span class=\"bp\">`</span>\n<span class=\"w\">               </span><span class=\"n\">now</span><span class=\"w\"> </span><span class=\"n\">trying</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">prove</span><span class=\"w\"> </span><span class=\"ss\">`ContinuousOn</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">another</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">property</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"n\">candidate</span><span class=\"w\"> </span><span class=\"n\">transition</span><span class=\"w\"> </span><span class=\"n\">theorems</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">@</span><span class=\"n\">Continuous</span><span class=\"bp\">.</span><span class=\"n\">continuousOn</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">DifferentiableOn</span><span class=\"bp\">.</span><span class=\"n\">continuousOn</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">ContDiffOn</span><span class=\"bp\">.</span><span class=\"n\">continuousOn_zero</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">❌️</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">applying</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Continuous</span><span class=\"bp\">.</span><span class=\"n\">continuousOn</span><span class=\"w\"> </span><span class=\"bp\">▼</span>\n<span class=\"w\">    </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">❌️</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Continuous</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">▼</span>\n<span class=\"w\">      </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"n\">candidate</span><span class=\"w\"> </span><span class=\"n\">theorems</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">HPow</span><span class=\"bp\">.</span><span class=\"n\">hPow</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">continuous_const_rpow</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">continuous_const_cpow</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">❌️</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">applying</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">continuous_const_rpow</span><span class=\"w\"> </span><span class=\"bp\">▶</span>\n<span class=\"w\">      </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">❌️</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">applying</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">continuous_const_cpow</span><span class=\"w\"> </span><span class=\"bp\">▶</span>\n<span class=\"w\">      </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">applying</span><span class=\"w\"> </span><span class=\"ss\">`Continuous</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">theorems</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"ss\">`HPow.hPow</span><span class=\"bp\">`</span>\n<span class=\"w\">                   </span><span class=\"n\">now</span><span class=\"w\"> </span><span class=\"n\">trying</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">prove</span><span class=\"w\"> </span><span class=\"ss\">`Continuous</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">another</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"n\">property</span>\n<span class=\"w\">      </span><span class=\"o\">[]</span><span class=\"w\"> </span><span class=\"n\">maximum</span><span class=\"w\"> </span><span class=\"n\">transition</span><span class=\"w\"> </span><span class=\"n\">depth</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">reached</span>\n<span class=\"w\">              </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">want</span><span class=\"w\"> </span><span class=\"ss\">`fun_prop</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">continue</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">increase</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">maximum</span><span class=\"w\"> </span><span class=\"n\">depth</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"ss\">`fun_prop</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">maxTransitionDepth</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">`</span>\n</code></pre></div>\n<p><code>fun_prop</code> changes from one function property <code>ContinuousOn</code> to another function property <code>Continuous</code> it uses so called \"transition theorems\" and right now it is allowed to use only one transition theorem. The rationale is that even with length two the number of paths could explode <code>ContinuousOn &lt;- Continuous &lt;- ContDiff</code>, <code>ContinuousOn &lt;- ContDiffOn &lt;- ContDiff</code>, ...  but maybe this is not an issue in practice and the default depth should be <a href=\"https://github.com/leanprover-community/mathlib4/blob/32fe3f9354729a268ba178d0b5ae06eca180c247/Mathlib/Tactic/FunProp/Types.lean#L88\">higher</a>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">continuousOn_rpow_Ioi_2</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Ioi</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">fun_prop</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">maxTransitionDepth</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Also when <code>fun_prop</code> hits the maximum transition depth <a href=\"https://github.com/leanprover-community/mathlib4/blob/32fe3f9354729a268ba178d0b5ae06eca180c247/Mathlib/Tactic/FunProp/Types.lean#L173\">here</a> it should log it with <a href=\"https://github.com/leanprover-community/mathlib4/blob/32fe3f9354729a268ba178d0b5ae06eca180c247/Mathlib/Tactic/FunProp/Types.lean#L190C5-L190C13\"><code>logError</code></a> such that it is reported back to user without digging through the trace.</p>",
        "id": 574233592,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1771315254
    },
    {
        "content": "<p>Ha :) I think you incorrectly formalized the statement you got <code>ContinuousOn (fun r : ℕ =&gt; x ^ r) (Set.Ioi 0)</code> which is true because you have discrete topology on natural numbers.</p>",
        "id": 574234051,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1771315469
    },
    {
        "content": "<p>Maybe you wanted to say this?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">continuousOn_rpow_Ioi</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Ioi</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">fun_prop</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">disch</span><span class=\"o\">:=</span><span class=\"n\">assumption</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 574234360,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1771315607
    },
    {
        "content": "<p>I remember there was a request in the past to make <code>assumption</code> as the default discharger ... I havn't done it yet though</p>",
        "id": 574234549,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1771315700
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"448405\">Alex Meiburg</span> <a href=\"#narrow/channel/287929-mathlib4/topic/fun_prop.20and.20ContinuousOn/near/574217641\">said</a>:</p>\n<blockquote>\n<p>I'm often confused by how fun_prop interacts with things like ContinuousOn vs. Continuous. I thought I had a good grasp on it, but then today:</p>\n</blockquote>\n<p>To your original question, when working with the <code>*On</code> variants you almost always want to run <code>fun_prop</code> with a discharger to prove the side conditions.</p>",
        "id": 574234696,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1771315765
    },
    {
        "content": "<p>Oh, yes I did notice later that it was a bad statement, but mostly I was confused about it not being \"transitive\" <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> but this makes sense. Yes, a nicer error message would be good, I just thought it wasn't able to find a path at all! </p>\n<p>Thanks! <span aria-label=\"folded hands\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"folded hands\">:folded_hands:</span></p>",
        "id": 574278599,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1771331348
    },
    {
        "content": "<p>BTW, should <code>fun_prop</code> know that a function on discrete topology is continuous?</p>",
        "id": 574323824,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771343235
    },
    {
        "content": "<p>I'm pretty sure it does, and that's what it used here.</p>",
        "id": 574330221,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1771344865
    },
    {
        "content": "<p>Yes the trace or show_term shows that it uses <code>continuous_of_discreteTopology</code></p>",
        "id": 574331472,
        "sender_full_name": "David Ledvinka",
        "timestamp": 1771345142
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"346070\">Tomas Skrivan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/fun_prop.20and.20ContinuousOn/near/574233592\">said</a>:</p>\n<blockquote>\n<p>but maybe this is not an issue in practice and the default depth should be <a href=\"https://github.com/leanprover-community/mathlib4/blob/32fe3f9354729a268ba178d0b5ae06eca180c247/Mathlib/Tactic/FunProp/Types.lean#L88\">higher</a>.</p>\n</blockquote>\n<p>I don't think that's what this is communicating. I think rather it means that we should be adding the intermediate lemmas for specific functions, even if we end up proving them using <code>by fun_prop</code>.</p>",
        "id": 574346233,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771348771
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"311453\">@Frédéric Dupuis</span> I think this <code>maxTransitionDepth</code> has bitten us before, so I wanted to draw your attention to it.</p>",
        "id": 574346406,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771348807
    },
    {
        "content": "<p>Ahh right, I remember talking about this before and the conclusion was to add missing theorems rather than increasing the maximum transition depth.</p>\n<p>So the error message could suggest increasing the transition depth as a temporary fix and suggest that there is a missing transition theorem. Unfortunately, it is not clear to me how to generate the statement of the missing theorem so you don't have to crawl through <code>fun_prop</code> trace and figure out what is missing.</p>",
        "id": 574350467,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1771349942
    },
    {
        "content": "<p>What about something like: if fun_prop fails, it re-runs itself with maxTransitionDepth one higher. If that passes, it still \"fails\" as a tactic, but prints out an error message explaining the situation. (\"You can either pass <code>maxTransitionDepth := 2</code> to use this tactic, but likely this means that there is a lemma you should have but don't. The following proof ... was found.\")</p>\n<p>... but I guess, does that run the issue where when fun_prop is used as a discharger or whatever, we still get the slowdown? But maybe we'd still want this behavior in that case?</p>",
        "id": 574363808,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1771354437
    },
    {
        "content": "<p>I mean I'm trying to think of a way to let people know that this can be done, and you should add the theorem, but keep it fast on solid proofs</p>",
        "id": 574363876,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1771354459
    },
    {
        "content": "<p>I don't think a second run with higher transition depth is the way to go as fast failure is important too</p>",
        "id": 574370782,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1771356814
    },
    {
        "content": "<p>Mm. I wonder how easy it would be for a tactic to detect if it's a \"top-level\" tactic (that is, actual user input, as opposed to a discharger for something else) and then try harder... hmph</p>",
        "id": 574371373,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1771357051
    },
    {
        "content": "<p>Maybe we can have a variant <code>fun_prop!</code> that has the auto-rerunning behaviour?</p>",
        "id": 574386534,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771363059
    },
    {
        "content": "<p>I have a recent thread where I suggested that failing tactics should come with error messages that tell how to debug them. They could also come with \"try this more expensive but more powerful suggestion, but beware it probably means you are missing X, Y or Z\".</p>\n<p>Basically, failing tactics shouldn't just fail, they should provide the user with a bunch of clickable options to try.</p>",
        "id": 574413568,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771377381
    },
    {
        "content": "<p>I guess the most common <code>fun_prop</code> failure is a missing theorem. Would it be a good idea to have a code action that would replace <code>fun_prop</code> with for example <code>have : Continuous foo := sorry; fun_prop</code>.</p>\n<p>And it is users responsibility appropriately generalize <code>foo</code> to turn that <code>have</code> into free standing theorem.</p>",
        "id": 574463056,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1771407113
    },
    {
        "content": "<p>I don't think there's any way to determine what <code>foo</code> should be, is there? As multiple lemmas might apply.</p>",
        "id": 574525596,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771425963
    },
    {
        "content": "<p>It might be too verbose (I don't know), but a good outer approximation would be printing out all the terminal goals - any goals where fun_prop couldn't find any applicable theorem. (This is sort of similar to the error message it already prints, which is very good.)</p>",
        "id": 574538266,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1771428984
    },
    {
        "content": "<p>Aesop (and therefore also <code>continuity</code>, etc) prints out the goals after applying only the safe subset of rules. Maybe we can do the same for <code>fun_prop</code> (and others)?</p>",
        "id": 574544177,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1771430343
    },
    {
        "content": "<p>I don't know that there exist \"safe\" rules for <code>fun_prop</code> (certainly not formally, but even informally I'm not sure what would qualify). But certainly this kind of thing would be great for tactics in general.</p>",
        "id": 574558299,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771433773
    }
]