[
    {
        "content": "<p>i get the error \"error: mathlib: failed to fetch cache\", no further explanation.</p>",
        "id": 492964617,
        "sender_full_name": "Jared green",
        "timestamp": 1736520201
    },
    {
        "content": "<p>before that, it says attempting to download 5773 files, 5690 downloads failed</p>",
        "id": 492964938,
        "sender_full_name": "Jared green",
        "timestamp": 1736520312
    },
    {
        "content": "<p>Do you mean that those were two different invocations of <code>lake exe cache get</code>?<br>\nAnd you didn't run other commands in between?</p>",
        "id": 492967180,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1736521041
    },
    {
        "content": "<p>that was just from 'lake update'</p>",
        "id": 492967376,
        "sender_full_name": "Jared green",
        "timestamp": 1736521099
    },
    {
        "content": "<p>i ran it again and it still failed on 5690 files</p>",
        "id": 492967477,
        "sender_full_name": "Jared green",
        "timestamp": 1736521135
    },
    {
        "content": "<p>Aha. Updating has problems this week <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span></p>",
        "id": 492967487,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1736521138
    },
    {
        "content": "<p>We hope to have an rc2 release next week, that will fix this problem.</p>",
        "id": 492967543,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1736521157
    },
    {
        "content": "<p>what can be done by me about it?</p>",
        "id": 492967573,
        "sender_full_name": "Jared green",
        "timestamp": 1736521173
    },
    {
        "content": "<p>See also <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/lake.20exe.20cache.20get.20error\">#mathlib4 &gt; lake exe cache get error</a></p>",
        "id": 492967611,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1736521184
    },
    {
        "content": "<p>you recommend i go back to 4.15.0, and then what?</p>",
        "id": 492967910,
        "sender_full_name": "Jared green",
        "timestamp": 1736521273
    },
    {
        "content": "<p>Yeah, it's a bit annoying, but then you could try again 1 week from now.</p>",
        "id": 492969487,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1736521782
    },
    {
        "content": "<p>\"and then what\" can either be interpreted as frustration or a request for further technical instructions, among other things. I guess Johan interpreted it as the former (which makes sense), but please clarify if you meant something else.</p>",
        "id": 492972744,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736522810
    },
    {
        "content": "<p>i change the toolchain to 4.15.0, and then what is the next step?</p>",
        "id": 492976492,
        "sender_full_name": "Jared green",
        "timestamp": 1736524008
    },
    {
        "content": "<p>like, how do i install that version now? and roll back the mathlib if thats required</p>",
        "id": 492978469,
        "sender_full_name": "Jared green",
        "timestamp": 1736524663
    },
    {
        "content": "<p>Then <code>lake exe cache get</code> should work. If it doesn't, please tell us what the error is</p>",
        "id": 492978475,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736524665
    },
    {
        "content": "<p>Do you have a lakefile.lean or a lakefile.toml in your project?</p>",
        "id": 492978595,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736524691
    },
    {
        "content": "<p>i have both files</p>",
        "id": 492978692,
        "sender_full_name": "Jared green",
        "timestamp": 1736524727
    },
    {
        "content": "<p>Unexpected, but in this case lakefile.lean should take precedence</p>",
        "id": 492978820,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736524763
    },
    {
        "content": "<p>You should have a line like this in there:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span>\n<span class=\"w\">  </span><span class=\"s2\">\"https://github.com/leanprover-community/mathlib4.git\"</span>\n</code></pre></div>",
        "id": 492978906,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736524791
    },
    {
        "content": "<p>Update it to look like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">require</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span>\n<span class=\"w\">  </span><span class=\"s2\">\"https://github.com/leanprover-community/mathlib4.git\"</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"w\"> </span><span class=\"s2\">\"v4.15.0\"</span>\n</code></pre></div>",
        "id": 492978948,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736524801
    },
    {
        "content": "<p>actually i have lakefile.lean</p>",
        "id": 492979031,
        "sender_full_name": "Jared green",
        "timestamp": 1736524808
    },
    {
        "content": "<p>Then run <code>lake update</code></p>",
        "id": 492979032,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736524808
    },
    {
        "content": "<p>attempting to download 5826 files, 5664 downloads failed</p>",
        "id": 492981336,
        "sender_full_name": "Jared green",
        "timestamp": 1736525557
    },
    {
        "content": "<p>Can you paste the full output of <code>lake exe cache get</code>?</p>",
        "id": 492981454,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736525595
    },
    {
        "content": "<p>Maybe this is nothing to do with the 4.16-rc1 cache issue. Did you try deleting <code>.lake</code> and running <code>lake update</code> again?</p>",
        "id": 492981474,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736525602
    },
    {
        "content": "<p>lake exe cache get<br>\ninfo: downloading component 'lean'<br>\nTotal: 245.7 MiB Speed:  19.6 MiB/s<br>\ninfo: installing component 'lean'<br>\nerror: ././.lake/packages/proofwidgets/lakefile.lean:40:14: error: unknown constant 'Lake.Job.collectArray'</p>\n<p>error: ././.lake/packages/proofwidgets/lakefile.lean:46:29: error: invalid field notation, type is not of the form (C ...) where C is a constant<br>\n  deps<br>\nhas type<br>\n  ?m.4714 fs deps✝¹ __do_lift✝</p>\n<p>error: ././.lake/packages/proofwidgets/lakefile.lean:78:2: error: type mismatch<br>\n  widgetJsAllTarget pkg.toPackage false<br>\nhas type<br>\n  FetchM (Job (Array FilePath)) : Type<br>\nbut is expected to have type<br>\n  FetchM (BuildJob (Array FilePath)) : Type</p>\n<p>error: ././.lake/packages/proofwidgets/lakefile.lean:81:2: error: type mismatch<br>\n  widgetJsAllTarget pkg.toPackage true<br>\nhas type<br>\n  FetchM (Job (Array FilePath)) : Type<br>\nbut is expected to have type<br>\n  FetchM (BuildJob (Array FilePath)) : Type</p>\n<p>error: ././.lake/packages/proofwidgets/lakefile.lean: package configuration has errors</p>",
        "id": 492982413,
        "sender_full_name": "Jared green",
        "timestamp": 1736525930
    },
    {
        "content": "<p>then i try it again after changing the lakefile:<br>\nlake exe cache get<br>\nwarning: manifest out of date: git revision of dependency 'mathlib' changed; use <code>lake update mathlib</code> to update it<br>\nerror: ././.lake/packages/proofwidgets/lakefile.lean:40:14: error: unknown constant 'Lake.Job.collectArray'</p>\n<p>error: ././.lake/packages/proofwidgets/lakefile.lean:46:29: error: invalid field notation, type is not of the form (C ...) where C is a constant<br>\n  deps<br>\nhas type<br>\n  ?m.4714 fs deps✝¹ __do_lift✝</p>\n<p>error: ././.lake/packages/proofwidgets/lakefile.lean:78:2: error: type mismatch<br>\n  widgetJsAllTarget pkg.toPackage false<br>\nhas type<br>\n  FetchM (Job (Array FilePath)) : Type<br>\nbut is expected to have type<br>\n  FetchM (BuildJob (Array FilePath)) : Type</p>\n<p>error: ././.lake/packages/proofwidgets/lakefile.lean:81:2: error: type mismatch<br>\n  widgetJsAllTarget pkg.toPackage true<br>\nhas type<br>\n  FetchM (Job (Array FilePath)) : Type<br>\nbut is expected to have type<br>\n  FetchM (BuildJob (Array FilePath)) : Type</p>\n<p>error: ././.lake/packages/proofwidgets/lakefile.lean: package configuration has errors</p>",
        "id": 492983132,
        "sender_full_name": "Jared green",
        "timestamp": 1736526163
    },
    {
        "content": "<p>Yeah, that's definitely not expected after <code>lake update</code> (this means you're on a version of proofwidgets suitable for v4.16.0-rc1). I'd recommend following Kevin's suggestion of just deleting <code>.lake</code> and running <code>lake update</code> again.</p>",
        "id": 492983141,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736526166
    },
    {
        "content": "<p>i did that. i still get:<br>\n5664 downloads failed<br>\nerror: mathlib: failed to fetch cache</p>",
        "id": 492987588,
        "sender_full_name": "Jared green",
        "timestamp": 1736527685
    },
    {
        "content": "<p>What is the <em>first</em> error that you get?</p>",
        "id": 492987807,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736527773
    },
    {
        "content": "<p>Do you have some kind of <code>lean-toolchain</code> v <code>lakefile.lean</code> mismatch? Can you post the contents of both files?</p>",
        "id": 492987915,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736527808
    },
    {
        "content": "<p>the whole project is at <a href=\"https://github.com/jaredgreen2/polySat\">https://github.com/jaredgreen2/polySat</a></p>",
        "id": 492988268,
        "sender_full_name": "Jared green",
        "timestamp": 1736527937
    },
    {
        "content": "<p>that by the way is the first error i get</p>",
        "id": 492988650,
        "sender_full_name": "Jared green",
        "timestamp": 1736528089
    },
    {
        "content": "<p>I can reproduce at this end.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">buzzard</span><span class=\"bp\">@</span><span class=\"n\">buster</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">projects</span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">clone</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"bp\">@</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"o\">:</span><span class=\"n\">jaredgreen2</span><span class=\"bp\">/</span><span class=\"n\">polySat</span><span class=\"bp\">.</span><span class=\"n\">git</span>\n<span class=\"n\">Cloning</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">polySat'</span><span class=\"bp\">...</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Enumerating</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">242</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Counting</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">242</span><span class=\"bp\">/</span><span class=\"mi\">242</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Compressing</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">156</span><span class=\"bp\">/</span><span class=\"mi\">156</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Total</span><span class=\"w\"> </span><span class=\"mi\">242</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">delta</span><span class=\"w\"> </span><span class=\"mi\">151</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">reused</span><span class=\"w\"> </span><span class=\"mi\">168</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">delta</span><span class=\"w\"> </span><span class=\"mi\">77</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">pack</span><span class=\"bp\">-</span><span class=\"n\">reused</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"n\">Receiving</span><span class=\"w\"> </span><span class=\"n\">objects</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">242</span><span class=\"bp\">/</span><span class=\"mi\">242</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"mf\">80.91</span><span class=\"w\"> </span><span class=\"n\">KiB</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mf\">541.00</span><span class=\"w\"> </span><span class=\"n\">KiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">Resolving</span><span class=\"w\"> </span><span class=\"n\">deltas</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">151</span><span class=\"bp\">/</span><span class=\"mi\">151</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"bp\">.</span>\n<span class=\"n\">buzzard</span><span class=\"bp\">@</span><span class=\"n\">buster</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">projects</span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">polySat</span><span class=\"bp\">/</span>\n<span class=\"n\">buzzard</span><span class=\"bp\">@</span><span class=\"n\">buster</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">polySat</span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">ls</span>\n<span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"w\">       </span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span><span class=\"w\">  </span><span class=\"n\">PolySat</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">manifest</span><span class=\"bp\">.</span><span class=\"n\">json</span><span class=\"w\">  </span><span class=\"n\">PolySat</span><span class=\"w\">         </span><span class=\"n\">README</span>\n<span class=\"n\">buzzard</span><span class=\"bp\">@</span><span class=\"n\">buster</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">polySat</span><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Duper</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">duper</span><span class=\"bp\">.</span><span class=\"n\">git</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Duper</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">07456</span><span class=\"n\">e26254a478db9a48b0a37d9f5b8c8022dbc'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">.</span><span class=\"n\">git</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">9837</span><span class=\"n\">ca9d65d9de6fad1ef4381750ca688774e608'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">batteries</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">batteries</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">8</span><span class=\"n\">d6c853f11a5172efa0e96b9f2be1a83d861cdd9'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">auto</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">auto</span><span class=\"bp\">.</span><span class=\"n\">git</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">auto</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">4</span><span class=\"n\">d73b99262f1ce80a33ac832bef26549cf3c2034'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plausible</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">plausible</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">plausible</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">2</span><span class=\"n\">c57364ef83406ea86d0f78ce3e342079a2fece5'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LeanSearchClient</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">LeanSearchClient</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LeanSearchClient</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">003</span><span class=\"n\">ff459cdd85de551f4dcf95cdfeefe10f20531'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">importGraph</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"kn\">import</span><span class=\"bp\">-</span><span class=\"n\">graph</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">importGraph</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">9</span><span class=\"n\">a0b533c2fbd6195df067630be18e11e4349051c'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">ProofWidgets4</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">2</span><span class=\"n\">b000e02d50394af68cfb4770a291113d94801b5'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">aesop</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">aesop</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">aesop</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">2689851</span><span class=\"n\">f387bb2cef351e6825fe94a56a304ca13'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Qq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">quote4</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Qq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">f0c584bcb14c5adfb53079781eeea75b26ebbd32'</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Cli</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">-</span><span class=\"n\">cli</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Cli</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">0</span><span class=\"n\">c8ea32a15a4f74143e4e1e107ba2c412adb90fd'</span>\n<span class=\"n\">Attempting</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">download</span><span class=\"w\"> </span><span class=\"mi\">5664</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span>\n<span class=\"n\">Downloaded</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">attempted</span><span class=\"w\"> </span><span class=\"mi\">5664</span><span class=\"bp\">/</span><span class=\"mi\">5664</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"bp\">%</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">success</span><span class=\"o\">)</span>\n<span class=\"n\">Warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"n\">were</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"bp\">.</span>\n<span class=\"n\">This</span><span class=\"w\"> </span><span class=\"n\">usually</span><span class=\"w\"> </span><span class=\"n\">means</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"n\">checkout</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">mathlib4</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">diverged</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">upstream</span><span class=\"bp\">.</span>\n<span class=\"n\">If</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">push</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"n\">commits</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">branch</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">mathlib4</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">CI</span><span class=\"w\"> </span><span class=\"n\">will</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">oleans</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">they</span><span class=\"w\"> </span><span class=\"n\">will</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">available</span><span class=\"w\"> </span><span class=\"n\">later</span><span class=\"bp\">.</span>\n<span class=\"n\">Decompressing</span><span class=\"w\"> </span><span class=\"mi\">162</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"o\">)</span>\n<span class=\"n\">Unpacked</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mi\">208</span><span class=\"w\"> </span><span class=\"n\">ms</span>\n<span class=\"n\">Completed</span><span class=\"w\"> </span><span class=\"n\">successfully!</span>\n<span class=\"n\">buzzard</span><span class=\"bp\">@</span><span class=\"n\">buster</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">polySat</span><span class=\"bp\">$</span>\n</code></pre></div>\n<p>In your lakefile.lean you are requiring mathlib v4.15.0 (which uses Lean v4.15), duper v0.0.21 (which uses Lean v4.14.0) and LeanCopilot v1.5.1 (which uses Lean v4.11.0-rc1) so my guess is that things are not going to go too well in general, but I don't know if that is the cause of the <code>Downloaded: 0 file(s)</code> issue.</p>",
        "id": 492989234,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736528284
    },
    {
        "content": "<p>require leancopilot... is commented out. as for duper, i could remove that too unless <span class=\"user-mention\" data-user-id=\"436568\">@Josh Clune</span> updates duper first.</p>",
        "id": 492990520,
        "sender_full_name": "Jared green",
        "timestamp": 1736528694
    },
    {
        "content": "<p>You're absolutely right and I don't understand what's going on.</p>",
        "id": 492990652,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736528734
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394803\">Jared green</span> <a href=\"#narrow/stream/287929-mathlib4/topic/error.3A.20mathlib.3A.20failed.20to.20fetch.20cache/near/492990520\">said</a>:</p>\n<blockquote>\n<p>require leancopilot... is commented out. as for duper, i could remove that too unless <span class=\"user-mention silent\" data-user-id=\"436568\">Josh Clune</span> updates duper first.</p>\n</blockquote>\n<p>I intend to push a version of Duper compatible with v4.15.0 within the next couple of days. Apologies for any inconvenience caused by the delay</p>",
        "id": 492991818,
        "sender_full_name": "Josh Clune",
        "timestamp": 1736529127
    },
    {
        "content": "<p>but i am not so sure thats the problem necessarily</p>",
        "id": 492991930,
        "sender_full_name": "Jared green",
        "timestamp": 1736529180
    },
    {
        "content": "<p>FWIW I commented out the Duper dependency and still get 0 files downloaded; furthermore nothing builds because batteries won't build.</p>",
        "id": 492991965,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736529191
    },
    {
        "content": "<p>you have to eliminate it from the lake-manifest too</p>",
        "id": 492992541,
        "sender_full_name": "Jared green",
        "timestamp": 1736529380
    },
    {
        "content": "<p>I assume the problem has been solved already, but just to confirm: commenting out duper from the lakefile and rerunning <code>lake update</code> restores the cache functionality. The reason, as alluded above, is that duper and mathlib require conflicting <code>batteries</code> versions.</p>",
        "id": 493000639,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736532409
    },
    {
        "content": "<p>i get errors in the infoview:/Users/programr/.elan/toolchains/leanprover--lean4---v4.16.0-rc1/bin/lake setup-file /Users/programr/polySat/PolySat/basic2.lean Init Init.Data.List Init.PropLemmas Mathlib.Data.List.Dedup Mathlib.Data.List.Pairwise Mathlib.Data.List.Basic Mathlib.Data.List.Defs Mathlib.Data.List.Infix Mathlib.Data.List.Lattice Mathlib.Data.List.Lemmas Mathlib.Data.Bool.AllAny Mathlib.Data.Bool.Basic Mathlib.Logic.Basic Batteries.Data.List.Lemmas Batteries.Data.List.Basic PolySat.IList Aesop` failed:</p>\n<p>stderr:<br>\nwarning: ././.lake/packages/proofwidgets/lakefile.lean:28:63: warning: <code>Lake.BuildJob</code> has been deprecated: use <code>Lake.Job</code> instead</p>\n<p>warning: ././.lake/packages/proofwidgets/lakefile.lean:40:13: warning: <code>Lake.BuildJob.collectArray</code> has been deprecated: use <code>Lake.Job.collectArray</code> instead</p>\n<p>(there is more where that came from, but i am dealing with them one at a time)</p>",
        "id": 493014689,
        "sender_full_name": "Jared green",
        "timestamp": 1736538022
    },
    {
        "content": "<p>it might help if i had all the dependencies on a version compatible with 4.15. for proofwidgets, thats 0.0.49</p>",
        "id": 493016635,
        "sender_full_name": "Jared green",
        "timestamp": 1736538991
    },
    {
        "content": "<p>The infoview errors stem from the fact that it still does seem to be using v4.16.0-rc1 for some reason. Perhaps you need to restart the server, or perhaps <code>lean-toolchain</code> got overwritten somehow</p>",
        "id": 493023941,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736542390
    },
    {
        "content": "<p>i changed it to 4.15 because 4.16-rc1 has issues</p>",
        "id": 493027031,
        "sender_full_name": "Jared green",
        "timestamp": 1736543932
    },
    {
        "content": "<p>Sure, I remember that. What I meant was the opposite: The infoview logs you pasted start with <code>/Users/programr/.elan/toolchains/leanprover--lean4---v4.16.0-rc1/bin/lake</code>, implying an old v4.16.0-rc1 server is still running somewhere. So restarting VS Code should fix it.</p>",
        "id": 493099084,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736604450
    },
    {
        "content": "<p>done</p>",
        "id": 493100238,
        "sender_full_name": "Jared green",
        "timestamp": 1736605331
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394803\">Jared green</span> <a href=\"#narrow/channel/287929-mathlib4/topic/error.3A.20mathlib.3A.20failed.20to.20fetch.20cache/near/492990520\">said</a>:</p>\n<blockquote>\n<p>require leancopilot... is commented out. as for duper, i could remove that too unless <span class=\"user-mention silent\" data-user-id=\"436568\">Josh Clune</span> updates duper first.</p>\n</blockquote>\n<p>Duper version v0.0.22 has been pushed and is now compatible with Lean version v4.15.0.</p>",
        "id": 493142806,
        "sender_full_name": "Josh Clune",
        "timestamp": 1736644966
    },
    {
        "content": "<p>I am having this issue on a project I haven't worked on for a while, I was trying to update it.</p>",
        "id": 503769045,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1741260709
    },
    {
        "content": "<p>It is a public repo: <a href=\"https://github.com/linesthatinterlace/xmss\">https://github.com/linesthatinterlace/xmss</a></p>",
        "id": 503769255,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1741260761
    },
    {
        "content": "<p>Possibly I need to update the lean toolchain but I thought <code>lake update</code> would do that for me?</p>",
        "id": 503769389,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1741260797
    },
    {
        "content": "<p>Hmm, no, looks like<br>\n<code>curl https://raw.githubusercontent.com/leanprover-community/mathlib4/master/lean-toolchain -o lean-toolchain</code><br>\nfixed it...</p>",
        "id": 503769505,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1741260840
    },
    {
        "content": "<p>I seem to remember that <code>lake update</code> tries to update the toolchain, but in order to succeed it needs to be able to parse the new <code>lakefile</code> with the old toolchain. This is because the copying is defined as post-update hook in the <code>lakefile</code>. So if the lakefile syntax changed it might fail. (this might be an outdated memory from about a year or two ago when I had these issues frequently, not sure if anything happened on this front recently).</p>\n<p>So yes, updating <code>lean-toolchain</code> first manually (e.g. with your <code>curl</code>) is the more robust way.</p>",
        "id": 503771930,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1741261600
    },
    {
        "content": "<p>This happened to me just yesterday when moving from v4.14.0-rc1</p>",
        "id": 503772326,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1741261710
    }
]