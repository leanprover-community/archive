[
    {
        "content": "<p>I'm currently trying to refactor <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ordinal.enumOrd#doc\">docs#Ordinal.enumOrd</a>, but I'm unsure about what to do with these theorems <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.ord_aleph%27_eq_enum_card#doc\">docs#Cardinal.ord_aleph'_eq_enum_card</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Cardinal.ord_aleph_eq_enum_card#doc\">docs#Cardinal.ord_aleph_eq_enum_card</a>.</p>",
        "id": 472441290,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727168926
    },
    {
        "content": "<p>The issue is that I feel like there's more than one change that needs to happen to these lemmas:</p>\n<ul>\n<li>They should be written in terms of the (not yet in Mathlib) <code>ω</code> function, rather than <code>ord ⚬ aleph</code></li>\n<li>They should use some <code>IsInitial</code> predicate (also not yet in Mathlib), rather than the odd spelling <code>o.card.ord = o</code></li>\n</ul>\n<p>And this is adding to my planned <code>enumOrd</code> refactor, which would replace <code>Unbounded (· &lt; ·)</code> in the auxiliary lemmas above with <code>¬ BddAbove</code></p>",
        "id": 472442019,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727169158
    },
    {
        "content": "<p>Adding onto this, another one of my planned refactors is to <em>define</em> the <code>ω</code> function as the enumerator function of initial ordinals. This should lead to the much cleaner definition of <code>aleph</code> as <code>card ⚬ omega</code> (the current definition basically proves the existence of the enumerator function from scratch).</p>",
        "id": 472442746,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727169376
    },
    {
        "content": "<p>So, at the end of this series of refactors, these lemmas wouldn't even be needed.</p>",
        "id": 472442882,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727169419
    },
    {
        "content": "<p>And as a final point - I don't even think these lemmas are very useful to begin with? \"<code>ord ⚬ aleph'</code> enumerates the initial ordinals\" amounts to saying the function is strictly monotonic and its range is the initial ordinals. Both of these have simpler spellings.</p>",
        "id": 472443291,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727169543
    },
    {
        "content": "<p>Is it ok if I simply deprecate this whole series of lemmas, even if there's no direct replacement?</p>",
        "id": 472443344,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727169560
    },
    {
        "content": "<p>cc. <span class=\"user-mention\" data-user-id=\"565854\">@Nir Paz</span></p>",
        "id": 472443368,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727169570
    },
    {
        "content": "<p>I think just deprecating them is alright. I guess it might not be the \"safest\" way to do this, but with how big and overarching the current refactors are in the set theory library, I don't think we should put a lot of extra work into this for the nonexistent chance these lemmas will be needed for something in the couple of weeks before everything they talk about changes anyways.</p>",
        "id": 472454028,
        "sender_full_name": "Nir Paz",
        "timestamp": 1727172153
    },
    {
        "content": "<p>Maybe people who were involved in big refactors like these ones have a more informed opinion</p>",
        "id": 472454336,
        "sender_full_name": "Nir Paz",
        "timestamp": 1727172233
    },
    {
        "content": "<p>FYI I've opened a GitHub issue keeping track of all the refactors currently underway: <a href=\"https://github.com/leanprover-community/mathlib4/pull/17033\">#17033</a></p>",
        "id": 472455746,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727172569
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Deprecate.20.60ord_aleph'_eq_enum_card.60/near/472455746\">said</a>:</p>\n<blockquote>\n<p>FYI I've opened a GitHub issue keeping track of all the refactors currently underway: <a href=\"https://github.com/leanprover-community/mathlib4/pull/17033\">#17033</a></p>\n</blockquote>\n<p>Terrifying.</p>",
        "id": 472457038,
        "sender_full_name": "Nir Paz",
        "timestamp": 1727173006
    },
    {
        "content": "<p>Yeah... there's a lot of piled up technical debt.</p>",
        "id": 472457130,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727173036
    },
    {
        "content": "<p>(and I'm responsible for most of it <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>)</p>",
        "id": 472457191,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727173071
    },
    {
        "content": "<p>Is there a notion of supremum I'm missing, or is the idea to get rid of everything except <code>iSup</code> (and the def same <code>sSup</code>)?</p>",
        "id": 472457256,
        "sender_full_name": "Nir Paz",
        "timestamp": 1727173086
    },
    {
        "content": "<p>That's basically it, yes.</p>",
        "id": 472457322,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727173118
    },
    {
        "content": "<p>I still think <code>lsub</code> can <em>maybe</em> be useful if it's generalized to conditionally complete lattices with a successor. But the amount of API that would be required to have that at the same level of functionality as <code>iSup</code> is probably too much to be worth it when you can type the definition out explicitly.</p>",
        "id": 472457472,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727173181
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Deprecate.20.60ord_aleph'_eq_enum_card.60/near/472457191\">said</a>:</p>\n<blockquote>\n<p>(and I'm responsible for most of it <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>)</p>\n</blockquote>\n<p>Well without you we'd have a lot less set theory, so you're excused xD</p>",
        "id": 472457889,
        "sender_full_name": "Nir Paz",
        "timestamp": 1727173322
    },
    {
        "content": "<p>I've opened a PR for this deprecation <a href=\"https://github.com/leanprover-community/mathlib4/pull/17077\">#17077</a> by the way. Worth noting these lemmas are all unused throughout the rest of Mathlib.</p>",
        "id": 472458306,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1727173490
    }
]