[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"198366\">David Holmes</span> <a href=\"#narrow/channel/113488-general/topic/O.281000.29.20definitions.20for.20Annals/near/573286427\">said</a>:</p>\n<blockquote>\n<p>Starting from the top: \"Abelian variety (in alg geom)\". I wrote the def of abelian scheme in lean, v easy. Then I tried to prove they are commutative, not so simple. Probably doable if one assumes (Cohomology and Base-Change) and (proper pushforward of coherent is coherent), though I still have some sorries where gremlins may lurk. But actually writing down the def seems to me in this case not the hard part, unlike proving anything non-trivial.</p>\n</blockquote>\n<p>What is your definition of abelian variety?<br>\nMine are commutative by definition. But I guess you can do the theorem of the cube stuff, etc...</p>",
        "id": 573289737,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1770817440
    },
    {
        "content": "<p>Let's see some definitions!</p>",
        "id": 573293761,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1770818419
    },
    {
        "content": "<p>\"Smooth proper geometrically connected group variety\" is a definition over fields for which commutativity is true but hard</p>",
        "id": 573371893,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1770838541
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/abelian.20schemes/near/573371893\">said</a>:</p>\n<blockquote>\n<p>\"Smooth proper geometrically connected group variety\" is a definition over fields for which commutativity is true but hard</p>\n</blockquote>\n<p>unexpected token; expected command</p>",
        "id": 573380291,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1770841484
    },
    {
        "content": "<p>I think we might be just about ready for this though?</p>",
        "id": 573381595,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1770841956
    },
    {
        "content": "<p>I read above it was very easy</p>",
        "id": 573384295,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1770842997
    },
    {
        "content": "<p>Along the lines of Kevin's definition:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">AlgebraicGeometry</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">AlgebraicGeometry</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">GeometricallyConnected</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Spec</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">connectedSpace_pullback</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ConnectedSpace</span>\n<span class=\"w\">    </span><span class=\"bp\">↑</span><span class=\"o\">(</span><span class=\"n\">pullback</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Spec</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">CommRingCat</span><span class=\"bp\">.</span><span class=\"n\">ofHom</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">AlgebraicClosure</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">))))</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Scheme</span><span class=\"bp\">.</span><span class=\"n\">Hom</span><span class=\"bp\">.</span><span class=\"n\">GeometricallyConnected</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">geometricallyConnected_fiber</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">AlgebraicGeometry</span><span class=\"bp\">.</span><span class=\"n\">GeometricallyConnected</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">fiberToSpecResidueField</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Abelian</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">GrpObj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Over</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">),</span>\n<span class=\"w\">  </span><span class=\"n\">Smooth</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">IsProper</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">GeometricallyConnected</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">AlgebraicGeometry</span>\n</code></pre></div>",
        "id": 573390111,
        "sender_full_name": "Christian Merten",
        "timestamp": 1770845129
    },
    {
        "content": "<p>Although, this should also be correct?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">AlgebraicGeometry</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Limits</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">AlgebraicGeometry</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Abelian</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Scheme</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"o\">}}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">GrpObj</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Over</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">),</span>\n<span class=\"w\">    </span><span class=\"n\">Smooth</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">IsProper</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">connectedSpace_fiber</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ConnectedSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">fiber</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">AlgebraicGeometry</span>\n</code></pre></div>",
        "id": 573390585,
        "sender_full_name": "Christian Merten",
        "timestamp": 1770845339
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/35354\">#35354</a> shows that proper geometrically-integral group schemes over fields are commutative.<br>\n(This follows from Zariski's main theorem, and it is done in a very productive week with Joël and Junyan in Utrecht organized by Christian)</p>\n<p>We also know that proper reduced group schemes over algebraically closed fields are smooth (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AlgebraicGeometry.smooth_of_grpObj_of_isAlgClosed#doc\">docs#AlgebraicGeometry.smooth_of_grpObj_of_isAlgClosed</a>) and we can generalize to geometrically reduced + arbitrary base field once fpqc descent for smoothness from Christian's pi1 repo is upstreamed.</p>",
        "id": 574014851,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1771197368
    }
]