[
    {
        "content": "<p>I think we should redefine <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=eLpNorm#doc\">docs#eLpNorm</a> to be <code>∞</code> when the function is not <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.AEStronglyMeasurable#doc\">docs#MeasureTheory.AEStronglyMeasurable</a>.<br>\nCurrently the value for non-measurable <code>f</code> is \"the supremum of <code>‖g‖_{L^p}</code> for measurable <code>g</code> that a.e. satisfy <code>‖g‖ ≤ ‖f‖</code>\".</p>\n<p>The reason for this is twofold:</p>\n<ul>\n<li>I think it's a slightly better junk value. It means that some results can be stated without measurability assumption, e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.eLpNorm_add_le#doc\">docs#MeasureTheory.eLpNorm_add_le</a> will be true unconditionally. Of course, there will be other results that need an additional assumption, e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.eLpNorm_mono_ae#doc\">docs#MeasureTheory.eLpNorm_mono_ae</a>.</li>\n<li>I think it plays a lot better with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasureTheory.MemLp#doc\">docs#MeasureTheory.MemLp</a>, which could be redefined as <code>eLpNorm f p μ &lt; ∞</code> in the new situation. I think it's much nicer if all non-L^p functions have infinite L^p norm.</li>\n</ul>\n<p>One thing I'm not sure about is whether the <code>L^0</code> norm should be constantly 0 or also <code>∞</code> for non-measurable functions.</p>\n<p>Thoughts? (cc <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span>, <span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span>, <span class=\"user-mention\" data-user-id=\"350992\">@Rémy Degenne</span>)</p>",
        "id": 576232499,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1772190061
    },
    {
        "content": "<p>Very good idea</p>",
        "id": 576232588,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1772190091
    },
    {
        "content": "<p>To elaborate on the second point: this ensures that all the information is captured by the norm. I think this will be very useful if we want to consider operations on seminorms/quasinorms, such as abstract interpolation theory (a very preliminary experiment is <a href=\"https://github.com/fpvandoorn/carleson/compare/master...abstract_interpolation\">here</a>)</p>",
        "id": 576233254,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1772190322
    },
    {
        "content": "<p>I agree it's probably a good idea.</p>",
        "id": 576245285,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1772194319
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span> <a href=\"#narrow/channel/287929-mathlib4/topic/eLpNorm.20junk.20value/near/576232499\">said</a>:</p>\n<blockquote>\n<p>One thing I'm not sure about is whether the <code>L^0</code> norm should be constantly 0 or also <code>∞</code> for non-measurable functions.</p>\n</blockquote>\n<p>Is the fact that the <code>L^0</code> norm is 0 actually used anywhere?</p>",
        "id": 576321009,
        "sender_full_name": "James E Hanson",
        "timestamp": 1772215139
    },
    {
        "content": "<p>Not intentionally, but we should probably make a choice that results in the fewest <code>p \\ne 0</code> hypotheses.</p>",
        "id": 576321251,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1772215222
    },
    {
        "content": "<p>This isn't specifically about non-measurable functions, but would it make sense to actually define it in terms of the limiting behavior of <code>L^p</code> seminorms as <code>p</code> goes to 0?</p>",
        "id": 576327032,
        "sender_full_name": "James E Hanson",
        "timestamp": 1772217364
    },
    {
        "content": "<p>Some time ago, I wanted to redefine the norm so that</p>\n<ul>\n<li>we drop the outer <code>(_)^(1/p)</code> for <code>0 &lt; p &lt; 1</code></li>\n<li>we use the measure of <code>support f</code> for <code>p = 0</code><br>\nbut I failed to finish the refactor before it rot.</li>\n</ul>",
        "id": 576340531,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1772222500
    },
    {
        "content": "<p>This <span aria-label=\"up\" class=\"emoji emoji-2b06\" role=\"img\" title=\"up\">:up:</span> would allow us to drop <code>Fact (1 ≤ p)</code> here and there.</p>",
        "id": 576340663,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1772222558
    },
    {
        "content": "<p>E.g., we get a <code>SeminormedGroup</code> for any <code>p</code>, but it's a <code>p</code>-norm.</p>",
        "id": 576340805,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1772222617
    },
    {
        "content": "<p>That would have the benefit of generalizing of the existing meanings of the '<code>L^0</code> norm' in the literature (i.e., the <code>L^0</code> norm of of a vector in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> being the number of non-zero entries).</p>",
        "id": 576350236,
        "sender_full_name": "James E Hanson",
        "timestamp": 1772226838
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"904624\">James E Hanson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/eLpNorm.20junk.20value/near/576350236\">said</a>:</p>\n<blockquote>\n<p>That would have the benefit of generalizing of the existing meanings of the '<code>L^0</code> norm' in the literature (i.e., the <code>L^0</code> norm of of a vector in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> being the number of non-zero entries).</p>\n</blockquote>\n<p>This formula depends on the specific choice of coordinates you are using, while the other <code>L^p</code> norms are invariant under linear maps preserving the volume (and are in particular coordinate independent), so I don't see how they could play well together.</p>",
        "id": 576352375,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1772227793
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/287929-mathlib4/topic/eLpNorm.20junk.20value/near/576352375\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"904624\">James E Hanson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/eLpNorm.20junk.20value/near/576350236\">said</a>:</p>\n<blockquote>\n<p>That would have the benefit of generalizing of the existing meanings of the '<code>L^0</code> norm' in the literature (i.e., the <code>L^0</code> norm of of a vector in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> being the number of non-zero entries).</p>\n</blockquote>\n<p>This formula depends on the specific choice of coordinates you are using, while the other <code>L^p</code> norms are invariant under linear maps preserving the volume (and are in particular coordinate independent), so I don't see how they could play well together.</p>\n</blockquote>\n<p>When I say the seminorm is 'on' <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>, I mean that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> is the corresponding vector space, not the corresponding measure space. In that example, the measure space in question is the measure space with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> elements and the counting measure.</p>",
        "id": 576354344,
        "sender_full_name": "James E Hanson",
        "timestamp": 1772228646
    },
    {
        "content": "<p>Ah, thanks for clarifying!</p>",
        "id": 576356134,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1772229525
    },
    {
        "content": "<p>Although now I just realized that in Mathlib <code>0 ^ 0 = 1</code> in <code>ℝ</code>, so it wouldn't immediately match the definition I mentioned.</p>",
        "id": 576356384,
        "sender_full_name": "James E Hanson",
        "timestamp": 1772229617
    },
    {
        "content": "<p>Ah, but this is already covered by Yury's proposal.</p>",
        "id": 576356442,
        "sender_full_name": "James E Hanson",
        "timestamp": 1772229643
    }
]