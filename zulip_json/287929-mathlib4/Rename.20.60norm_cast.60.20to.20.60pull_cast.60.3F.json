[
    {
        "content": "<p>I was looking at the tactic cheat sheet, and it says:</p>\n<p><code>push</code>/<code>pull</code>: move the given constant inwards/outwards<br>\n<code>norm_cast</code>: simplify the expression by moving casts outwards<br>\n<code>push_cast</code>: push casts inwards</p>\n<p>This makes me wonder if <code>norm_cast</code> should be called <code>pull_cast</code>. I'm not saying that it should, but I'd be curious to hear what others think.</p>",
        "id": 545336890,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1760623573
    },
    {
        "content": "<p>agreed</p>",
        "id": 545337242,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760623625
    },
    {
        "content": "<p>This is a Mathlib tactic, so I'm going to move this thread to <a class=\"stream\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4\">#mathlib4</a> .</p>",
        "id": 545347518,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1760625153
    },
    {
        "content": "<p>This topic was moved here from <a href=\"#narrow/channel/270676-lean4/topic/Rename.20.60norm_cast.60.20to.20.60pull_cast.60.3F\">#lean4 &gt; Rename &#96;norm_cast&#96; to &#96;pull_cast&#96;?</a> by <span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span>.</p>",
        "id": 545347688,
        "sender_full_name": "Notification Bot",
        "timestamp": 1760625179
    },
    {
        "content": "<p>I am weakly in favour. Apart from the pain of renaming/deprecating everywhere, I can see the objection being that <code>norm_cast</code> defines a normal form (which also helps with knowing how to phrase declarations), while <code>pull_cast</code> would not.</p>",
        "id": 545348276,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1760625262
    },
    {
        "content": "<p>That would not be a strong enough objection for me to block the change though.</p>",
        "id": 545348470,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1760625288
    },
    {
        "content": "<p><code>norm_cast</code> is a Lean core tactic, it was upstreamed in 2024: <a href=\"https://github.com/leanprover/lean4/pull/3322\">lean4#3322</a></p>",
        "id": 545348704,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1760625320
    },
    {
        "content": "<p>Should I move it back?</p>",
        "id": 545357166,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1760626436
    },
    {
        "content": "<p><code>norm_cast</code> also does some simplification , e.g. normalizing <code>↑n &lt; ↑m</code> to <code>n &lt; m</code>. You can view that as \"pulling the cast outside <code>&lt;</code>, which just happens to make it go away\", but I think the name <code>norm_cast</code> is also fine, given this \"extra\" normalization step.</p>",
        "id": 545374689,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1760629063
    },
    {
        "content": "<p>I'm not against the rename, but personally I don't think it's worth the effort, since I also like the current name.</p>",
        "id": 545374834,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1760629090
    },
    {
        "content": "<p>Yeah, I see the goal of <code>norm_cast</code> mostly as removing casts rather than pulling them</p>",
        "id": 545386064,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1760630846
    },
    {
        "content": "<p>I think of removing casts and pulling casts as mostly the same thing</p>",
        "id": 545405462,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760634435
    },
    {
        "content": "<p>Note that the goal of <code>push_neg</code> is often just to remove a negation rather than pushing it.</p>",
        "id": 545407557,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1760635025
    },
    {
        "content": "<p>So should it be <code>norm_neg</code>?</p>",
        "id": 545408660,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1760635358
    },
    {
        "content": "<p>Well, it is a macro for <code>push ¬ _</code>...</p>",
        "id": 545413371,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1760636738
    },
    {
        "content": "<p>it's funny to contrast the duality that pushing negations in allows you to cancel them and that pulling casts out allows you to cancel them.</p>",
        "id": 545449665,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1760651717
    },
    {
        "content": "<p>If you push the cast in <code>↑(Fin.mk n ...)</code> with <code>push_cast</code> it cancels the cast. So it isn't just <code>norm_cast</code> doing that.</p>",
        "id": 545451962,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1760653081
    }
]