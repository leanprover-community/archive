[
    {
        "content": "<p>Can I nerdsnipe someone (maybe <span class=\"user-mention\" data-user-id=\"268315\">@Anatole Dedecker</span> ?) into golfing this into oblivion for me? It seems like it should be far easier than this. I'm open to slight changes in the statement if it makes it easier. E.g., <code>hâ‚</code> could become the equivalent statements: <code>âˆ€ s âˆˆ la, Tendsto f (ğ“Ÿ sá¶œ Ã—Ë¢ lb) lc</code> or <code>âˆƒá¶  s in la.smallSets, Tendsto f (ğ“Ÿ sá¶œ Ã—Ë¢ lb) lc</code>.</p>\n<p>It seems like it should be easier than I'm making it out to be, most likely because I'm missing something obvious.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Prod</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Filter</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Tendsto</span><span class=\"bp\">.</span><span class=\"n\">coprod_of_prod_top_right</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"bp\">Ã—</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">lb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">lc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hâ‚</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">âˆ€</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">á¶œ</span><span class=\"w\"> </span><span class=\"bp\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ“Ÿ</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"n\">lb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hâ‚‚</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"bp\">âŠ¤</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">la</span><span class=\"bp\">.</span><span class=\"n\">coprod</span><span class=\"w\"> </span><span class=\"n\">lb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coprod_eq_prod_top_sup_top_prod</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">sup</span><span class=\"w\"> </span><span class=\"n\">hâ‚‚</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">tc</span><span class=\"w\"> </span><span class=\"n\">htc</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨</span><span class=\"n\">ta</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hta</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">âŸ©</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mem_prod_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">hâ‚‚</span><span class=\"w\"> </span><span class=\"n\">htc</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨</span><span class=\"n\">ta'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hta'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tb</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">htb</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h'</span><span class=\"bp\">âŸ©</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mem_prod_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">hâ‚</span><span class=\"w\"> </span><span class=\"n\">ta</span><span class=\"bp\">á¶œ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">htc</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mem_map</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mem_prod_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">âŠ¢</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨</span><span class=\"n\">univ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">univ_mem</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tb</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">htb</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Subset</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">union_subset</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">h'</span><span class=\"o\">)</span><span class=\"bp\">âŸ©</span>\n<span class=\"w\">  </span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">ta</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"n\">tb</span><span class=\"w\"> </span><span class=\"bp\">âˆª</span><span class=\"w\"> </span><span class=\"n\">ta</span><span class=\"bp\">á¶œ</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"n\">tb</span>\n<span class=\"w\">  </span><span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">â†</span><span class=\"w\"> </span><span class=\"n\">union_prod</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">gcongr</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 553487588,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1762206820
    },
    {
        "content": "<p>(the context is that to show some function tendsto <code>l</code> along <code>cobounded (Î± Ã— Î²)</code>, it suffices to show that <code>f</code> tendsto to <code>l</code> along <code>cobounded Î± Ã—Ë¢ âŠ¤</code> and along <code>s Ã— cobounded Î²</code> for every bounded set <code>s</code>.)</p>",
        "id": 553488033,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1762207010
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/287929-mathlib4/topic/filter.20coprod.20lemma/near/553487588\">said</a>:</p>\n<blockquote>\n<p>E.g., <code>hâ‚</code> could become the equivalent statements: <code>âˆ€ s âˆˆ la, Tendsto f (ğ“Ÿ sá¶œ Ã—Ë¢ lb) lc</code> or <code>âˆƒá¶  s in la.sets, Tendsto f (ğ“Ÿ sá¶œ Ã—Ë¢ lb) lc</code>.</p>\n</blockquote>\n<p>Is <code>âˆƒá¶  s in la.sets, Tendsto f (ğ“Ÿ sá¶œ Ã—Ë¢ lb) lc</code> type correct?</p>",
        "id": 553488081,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762207029
    },
    {
        "content": "<p>sorry, I meant <code>smallSets</code>, corrected now.</p>",
        "id": 553488140,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1762207050
    },
    {
        "content": "<p>I think you can probably do some coheyting magic here but the coframe structure on filters isn't really developed in mathlib</p>",
        "id": 553492757,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762209150
    },
    {
        "content": "<p>there's just <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Filter.instCoframe#doc\">docs#Filter.instCoframe</a></p>",
        "id": 553492818,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762209182
    },
    {
        "content": "<p>not really much else</p>",
        "id": 553492834,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762209191
    },
    {
        "content": "<p>Does <code>grind</code> count as oblivion? I switched to the first alternate version of <code>h1</code> that you suggested</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Prod</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Filter</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Tendsto</span><span class=\"bp\">.</span><span class=\"n\">coprod_of_prod_top_right</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"bp\">Ã—</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">lb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">lc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hâ‚</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">âˆ€</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ“Ÿ</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">á¶œ</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"n\">lb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hâ‚‚</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"bp\">âŠ¤</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">la</span><span class=\"bp\">.</span><span class=\"n\">coprod</span><span class=\"w\"> </span><span class=\"n\">lb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coprod_eq_prod_top_sup_top_prod</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tendsto_sup</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mem_top</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tendsto_prod_iff</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mem_top</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mem_principal</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tendsto_prod_iff</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 553531399,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1762234975
    },
    {
        "content": "<p>Here's my proposal for a proof staying in filter land. I'm not satisfied, because it is still quite long and it relies on ultrafilters, but I don't have much more time to actively think about this for now.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Prod</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Ultrafilter</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Filter</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Tendsto</span><span class=\"bp\">.</span><span class=\"n\">coprod_of_prod_top_right</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"bp\">Ã—</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">lb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">lc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hâ‚</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">âˆ€</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ“Ÿ</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">á¶œ</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"n\">lb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hâ‚‚</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"bp\">âŠ¤</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">la</span><span class=\"bp\">.</span><span class=\"n\">coprod</span><span class=\"w\"> </span><span class=\"n\">lb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">tendsto_iff_ultrafilter</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">hu</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coprod_eq_prod_top_sup_top_prod</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Ultrafilter</span><span class=\"bp\">.</span><span class=\"n\">le_sup_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hu</span>\n<span class=\"w\">  </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">hu'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"bp\">Ã—</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">â‰¤</span><span class=\"w\"> </span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"bp\">âŠ¤</span>\n<span class=\"w\">  </span><span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hâ‚‚</span><span class=\"bp\">.</span><span class=\"n\">mono_left</span><span class=\"w\"> </span><span class=\"n\">hu'</span>\n<span class=\"w\">  </span><span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">replace</span><span class=\"w\"> </span><span class=\"n\">hu</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hu</span><span class=\"bp\">.</span><span class=\"n\">resolve_left</span><span class=\"w\"> </span><span class=\"n\">hu'</span>\n<span class=\"w\">    </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">prod_top</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">â†</span><span class=\"w\"> </span><span class=\"n\">tendsto_iff_comap</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_tendsto_iff_exists_frequently_notMem</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">Ultrafilter</span><span class=\"bp\">.</span><span class=\"n\">frequently_iff_eventually</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hu'</span>\n<span class=\"w\">    </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">hu'</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hsu</span><span class=\"bp\">âŸ©</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hâ‚</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">mono_left</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span>\n<span class=\"w\">      </span><span class=\"n\">le_prod</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">top_prod</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tendsto_iff_comap</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">hu</span><span class=\"bp\">âŸ©</span>\n</code></pre></div>",
        "id": 553565039,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1762249007
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/filter.20coprod.20lemma/near/553492757\">said</a>:</p>\n<blockquote>\n<p>I think you can probably do some coheyting magic here but the coframe structure on filters isn't really developed in mathlib</p>\n</blockquote>\n<p><del> If I'm understanding correctly your suggestion, my proof is essentially doing this but using ultrafilters as points to make my life easier </del> (I don't think this is true actually)</p>",
        "id": 553565739,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1762249227
    },
    {
        "content": "<p>Here is another version of the same argument:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Prod</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Ultrafilter</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Filter</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">lb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">la</span><span class=\"bp\">.</span><span class=\"n\">coprod</span><span class=\"w\"> </span><span class=\"n\">lb</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"bp\">âŠ¤</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">âŠ”</span><span class=\"w\"> </span><span class=\"bp\">â¨†</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">la</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ğ“Ÿ</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">á¶œ</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"n\">lb</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coprod_eq_prod_top_sup_top_prod</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sup_eq_sup_iff_left</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">prod_top</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">top_prod</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">le_iff_ultrafilter</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ultrafilter</span><span class=\"bp\">.</span><span class=\"n\">le_sup_iff</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">â†</span><span class=\"w\"> </span><span class=\"n\">tendsto_iff_comap</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">or_iff_not_imp_left</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">not_tendsto_iff_exists_frequently_notMem</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Ultrafilter</span><span class=\"bp\">.</span><span class=\"n\">frequently_iff_eventually</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">hu</span><span class=\"w\"> </span><span class=\"bp\">âŸ¨</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hsu</span><span class=\"bp\">âŸ©</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">le_iSupâ‚‚_of_le</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">le_prod</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hsu</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hu</span><span class=\"o\">])</span>\n<span class=\"w\">  </span><span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">iSupâ‚‚_le</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"bp\">â†¦</span><span class=\"w\"> </span><span class=\"n\">le_sup_of_le_right</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prod_mono</span><span class=\"w\"> </span><span class=\"n\">le_top</span><span class=\"w\"> </span><span class=\"n\">le_rfl</span><span class=\"o\">)</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Tendsto</span><span class=\"bp\">.</span><span class=\"n\">coprod_of_prod_top_right</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"w\"> </span><span class=\"bp\">Ã—</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">lb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î²</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">lc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"w\"> </span><span class=\"n\">Î³</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hâ‚</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">âˆ€</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">Î±</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">âˆˆ</span><span class=\"w\"> </span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ“Ÿ</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">á¶œ</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"n\">lb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">hâ‚‚</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">la</span><span class=\"w\"> </span><span class=\"bp\">Ã—Ë¢</span><span class=\"w\"> </span><span class=\"bp\">âŠ¤</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">la</span><span class=\"bp\">.</span><span class=\"n\">coprod</span><span class=\"w\"> </span><span class=\"n\">lb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">lc</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">foo</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tendsto_sup</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tendsto_iSup</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hâ‚‚</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 553572758,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1762251152
    }
]