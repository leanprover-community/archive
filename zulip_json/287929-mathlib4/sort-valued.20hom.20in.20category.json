[
    {
        "content": "<p>why does <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.Category#doc\">docs#CategoryTheory.Category</a> not take Sort-valued hom?</p>",
        "id": 544336632,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760203555
    },
    {
        "content": "<p>I think it used to</p>",
        "id": 544336674,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760203596
    },
    {
        "content": "<p>We tried in Lean 3 and it didn't go well; AFAIK nobody tried in Lean 4.</p>",
        "id": 544336737,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760203652
    },
    {
        "content": "<p>do you remember what the problem was?</p>",
        "id": 544336756,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760203676
    },
    {
        "content": "<p>Universe levels become more complicated, and in particular the universe unification algorithm didn't know how to solve for the universe levels in many common cases</p>",
        "id": 544336930,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1760203858
    },
    {
        "content": "<p>See <a class=\"message-link\" href=\"/#narrow/channel/113489-new-members/topic/.E2.9C.94.20Universe.20Restriction.20on.20CategoryTheory.2ECategory/near/479078691\">#new members &gt; âœ” Universe Restriction on CategoryTheory.Category @ ðŸ’¬</a></p>",
        "id": 544336974,
        "sender_full_name": "JoÃ«l Riou",
        "timestamp": 1760203885
    },
    {
        "content": "<p>I found <a href=\"https://github.com/leanprover-community/mathlib3/pull/1412\">mathlib3#1412</a></p>",
        "id": 544337228,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760204122
    },
    {
        "content": "<p>have we fixed the <code>Category.{v} C</code> bug yet? i.e. do we still have to write <code>.{v}</code> for the code to be performant?</p>",
        "id": 544337304,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760204217
    },
    {
        "content": "<p>I don't see this as a bug</p>",
        "id": 544337336,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760204251
    },
    {
        "content": "<p>I've been referred to that issue and thread previously and still don't quite understand the problem. Would someone be willing to explain it again here?</p>",
        "id": 544338559,
        "sender_full_name": "Chris Henson",
        "timestamp": 1760205447
    },
    {
        "content": "<p>The bottom universe level - the universe of propositions - works differently to the others, which can cause problems in certain situations where Lean doesn't know whether a type is in the bottom universe. The obvious fix - which is to force these problematic types to not be in the bottom universe - causes a mess.<br>\n(did I understand right?)</p>",
        "id": 544357396,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1760225517
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"400289\">Artie Khovanov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/sort-valued.20hom.20in.20category/near/544357396\">said</a>:</p>\n<blockquote>\n<p>The bottom universe level - the universe of propositions - works differently to the others, which can cause problems in certain situations where Lean doesn't know whether a type is in the bottom universe. The obvious fix - which is to force these problematic types to not be in the bottom universe - causes a mess.<br>\n(did I understand right?)</p>\n</blockquote>\n<p>Not sure what kind of mess you mean but this is the solution currently in mathlib and sometimes it's annoying to work with</p>",
        "id": 544358383,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760227177
    },
    {
        "content": "<p>Probably not helpful since it is counterintuitive: the basic category data should be the homomorphisms not the objects.</p>",
        "id": 544366223,
        "sender_full_name": "FranÃ§ois G. Dorais",
        "timestamp": 1760238042
    },
    {
        "content": "<p>(That philosophy usually fixes all universe issues for me.)</p>",
        "id": 544366400,
        "sender_full_name": "FranÃ§ois G. Dorais",
        "timestamp": 1760238114
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"119741\">@FranÃ§ois G. Dorais</span> we do place the homomorphisms first, which is why we have <code>[Category.{v} C]</code></p>",
        "id": 544377941,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760253166
    },
    {
        "content": "<p>maybe using <code>[Category.{v} C]</code> will fix the problem we experienced in the past with sort-based hom?</p>",
        "id": 544377961,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760253192
    },
    {
        "content": "<p>I'm thinking about <code>class Category {Î± : Sort _} (Î² : Î± â†’ Î± â†’ Sort _) where ...</code> No need for <code>.{v}</code> since the homs are the principal argument.</p>",
        "id": 544379270,
        "sender_full_name": "FranÃ§ois G. Dorais",
        "timestamp": 1760254940
    },
    {
        "content": "<p>it is expensive to unify functions</p>",
        "id": 544379309,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760254985
    },
    {
        "content": "<p>Works fine for me. But it's radically different.</p>",
        "id": 544379331,
        "sender_full_name": "FranÃ§ois G. Dorais",
        "timestamp": 1760255025
    },
    {
        "content": "<p>I do use wrappers to ease class synthesis.</p>",
        "id": 544380336,
        "sender_full_name": "FranÃ§ois G. Dorais",
        "timestamp": 1760256137
    },
    {
        "content": "<p>yes, we should use one-param structures</p>",
        "id": 544380354,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760256169
    },
    {
        "content": "<p>It seems very unlikely that this could make it into mathlib.</p>",
        "id": 544384748,
        "sender_full_name": "JoÃ«l Riou",
        "timestamp": 1760260544
    }
]