[
    {
        "content": "<p>In the <a href=\"https://leanprover-community.github.io/contribute/index.html\">pull request guidelines</a> it says (emphasis mine):</p>\n<blockquote>\n<p>On the main page for a PR, on the right-hand side, there should be a sidebar with panels \"reviewers\", \"assignees\", \"labels\", etc. Click on the \"labels\" header to add or remove labels from the current project. (Labels can only be edited by \"GitHub collaborators\", which is approximately the same as \"people who have write access\".) <strong>Anyone can edit the labels by writing the following commands in a comment on the PR</strong> (each on its own line):</p>\n<ul>\n<li><code>awaiting-author</code> will add the <strong>\"awaiting-author\"</strong> label</li>\n<li><code>-awaiting-author</code> will remove the <strong>\"awaiting-author\"</strong> label</li>\n<li><code>WIP</code> will add the <strong>\"WIP\"</strong> label</li>\n<li><code>-WIP</code> will remove the <strong>\"WIP\"</strong> label</li>\n</ul>\n</blockquote>\n<p>I have an <a href=\"https://github.com/leanprover-community/mathlib4/pull/26423\">easy PR</a> where I would like to add the \"easy\" label, but commenting \"easy\" on the PR did nothing. Is this because I am a new contributor? Did I misunderstand something?</p>",
        "id": 525821821,
        "sender_full_name": "Paul Schwahn",
        "timestamp": 1750911560
    },
    {
        "content": "<p>I am not sure that <code>easy</code> is a label for which there is this automation.  Did you try adding the label directly?  It might work...</p>",
        "id": 525824090,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1750913795
    },
    {
        "content": "<p>Surely nobody can add labels directly any more and the actual diagnosis is that the guidelines are out of date since we moved to the fork model.</p>",
        "id": 525837314,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1750922078
    },
    {
        "content": "<p>Everyone who used to have write access should still have triage access, which is sufficient to add and remove labels.</p>",
        "id": 525838922,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1750922749
    },
    {
        "content": "<p>I'm happy to give out triage access to anyone who asks.</p>",
        "id": 525838946,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1750922761
    },
    {
        "content": "<p>It is also easy to add the automation that labels <code>easy</code> on comment and also add that this automation exists in the guidelines.</p>",
        "id": 525839334,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1750922910
    },
    {
        "content": "<p>And possibly adding that the list in the guidelines is <em>exhaustive</em>, since it is easy to generalise that <em>any</em> label can be added via the same mechanism, but this is not actually what the action does.</p>",
        "id": 525839529,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1750922970
    },
    {
        "content": "<p>So does this mean that future contributors should ask for triage access?</p>",
        "id": 525839959,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1750923113
    },
    {
        "content": "<p>I'd kind of prefer to not have that overhead of responding to the requests?</p>",
        "id": 525844219,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1750924467
    },
    {
        "content": "<p>But it's fine</p>",
        "id": 525844225,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1750924471
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PR.20labels.20as.20a.20new.20contributor/near/525839334\">said</a>:</p>\n<blockquote>\n<p>It is also easy to add the automation that labels <code>easy</code> on comment and also add that this automation exists in the guidelines.</p>\n</blockquote>\n<p>We could crib an idea from the Rust project: you comment</p>\n<ul>\n<li><code>@rustbot author</code> to make a PR as awaiting-author</li>\n<li><code>@rustbot ready</code> to make it as ready for review</li>\n<li>something like <code>@rustbot label -S-waiting-on-author +S-waiting-on-review</code> to add or remove labels</li>\n</ul>\n<p>(<a href=\"https://rustc-dev-guide.rust-lang.org/rustbot.html\">this page</a> has more information about the possible commands). If we want to be selective about not supporting any label, that could certainly be implemented.</p>",
        "id": 525909611,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750945834
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/44315fb3ed86ecbd046328c9da92db7ba5a98fd3/.github/workflows/labels_from_comment.yml\">Here's our current label from comment workflow file</a>; it supports exactly the commands in the list on the pull request guidelines quoted above, but as Damiano said, it would be easy to add <code>easy</code> <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 525910126,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1750946006
    },
    {
        "content": "<p>So new contributors cannot manually relabel their PR (say, if autolabel had a bug or a PR spans multiple areas), right? Allowing to add those seems useful.</p>",
        "id": 525910415,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750946091
    },
    {
        "content": "<p>Right, we could also add topic tags to the label-from-comment workflow.</p>",
        "id": 525910889,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1750946212
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PR.20labels.20as.20a.20new.20contributor/near/525844219\">said</a>:</p>\n<blockquote>\n<p>I'd kind of prefer to not have that overhead of responding to the requests?</p>\n</blockquote>\n<p>I guess ultimately there needs to be some sort of change, right? Because eg new contributors wouldn't be able to remove the \"awaiting author\" label?</p>",
        "id": 525957152,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1750961233
    },
    {
        "content": "<p>They already can by commenting \"<code>-awaiting-author</code>\" on the PR.</p>",
        "id": 525957552,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1750961347
    },
    {
        "content": "<p>Does that workflow have a bug, in that typing <code>-WIP</code> would re-add the label again?</p>",
        "id": 525958247,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750961565
    },
    {
        "content": "<p>My impression is that both <code>wip</code> (<a href=\"https://github.com/leanprover-community/mathlib4/blob/7260822b747892e2a72b6f2a6c530c398e4d1adf/.github/workflows/labels_from_comment.yml#L26\">source</a>) and <code>removeWip</code> (<a href=\"https://github.com/leanprover-community/mathlib4/blob/7260822b747892e2a72b6f2a6c530c398e4d1adf/.github/workflows/labels_from_comment.yml#L29\">source</a>) would be true for a comment \"-WIP\"...</p>",
        "id": 525958320,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750961589
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PR.20labels.20as.20a.20new.20contributor/near/525957552\">said</a>:</p>\n<blockquote>\n<p>They already can by commenting \"<code>-awaiting-author</code>\" on the PR.</p>\n</blockquote>\n<p>Does that  still work? <code>!bench</code> doesn't work anymore, you need to add the <code>bench-after-CI</code> label</p>",
        "id": 525958611,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1750961684
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PR.20labels.20as.20a.20new.20contributor/near/525958320\">said</a>:</p>\n<blockquote>\n<p>My impression is that both <code>wip</code> (<a href=\"https://github.com/leanprover-community/mathlib4/blob/7260822b747892e2a72b6f2a6c530c398e4d1adf/.github/workflows/labels_from_comment.yml#L26\">source</a>) and <code>removeWip</code> (<a href=\"https://github.com/leanprover-community/mathlib4/blob/7260822b747892e2a72b6f2a6c530c398e4d1adf/.github/workflows/labels_from_comment.yml#L29\">source</a>) would be true for a comment \"-WIP\"...</p>\n</blockquote>\n<p>It's possible that there are bugs... I can look later.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"400289\">Artie Khovanov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PR.20labels.20as.20a.20new.20contributor/near/525958611\">said</a>:</p>\n<blockquote>\n<p>Does that  still work? <code>!bench</code> doesn't work anymore, you need to add the <code>bench-after-CI</code> label</p>\n</blockquote>\n<p>The workflow is triggered on <code>issue_comment</code> and doesn't require the triggering user to have any particular permissions, so the issues that affect <code>!bench</code> are separate.</p>",
        "id": 525959002,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1750961825
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PR.20labels.20as.20a.20new.20contributor/near/525838922\">said</a>:</p>\n<blockquote>\n<p>Everyone who used to have write access should still have triage access, which is sufficient to add and remove labels.</p>\n</blockquote>\n<p>I think I was one of the last people who was granted write access before we moved to the fork model, but I don't think I have triage access now because I could not edit the labels.</p>",
        "id": 525959086,
        "sender_full_name": "Paul Schwahn",
        "timestamp": 1750961860
    },
    {
        "content": "<p>But I suppose the best solution would just be to add the \"easy\" label to the aforementioned workflow, right?</p>",
        "id": 525959884,
        "sender_full_name": "Paul Schwahn",
        "timestamp": 1750962137
    },
    {
        "content": "<p>I'll try and expand the list of tags that the workflow can handle when I look at it. Thanks for bringing this up, by the way; I had been meaning to come back to this after adding the <code>-</code> functionality in <a href=\"https://github.com/leanprover-community/mathlib4/pull/25723\">#25723</a> but it slipped my mind.</p>",
        "id": 525960385,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1750962344
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/26456\">#26456</a> restructures the previous action managing labels from comments.  I kept <code>awaiting-author</code> and <code>WIP</code>.  I also added <code>easy</code>, and nothing else.</p>",
        "id": 525979575,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1750971424
    },
    {
        "content": "<p>My intention was to make the action easily extensible, so that adding more labels should be completely straightforward: the labels that the action manages are simply an array that forms an input to the code.</p>",
        "id": 525979726,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1750971491
    },
    {
        "content": "<p>The current workflow for adding/removing labels should allow the following.  On any comment, if a line consists of <code>awaiting-author</code>, <code>WIP</code> or <code>easy</code> up to whitespace, and possibly preceded by <code>-</code>, then the corresponding label will be added (if <code>-</code> is not present)/removed (if <code>-</code> is present).</p>",
        "id": 526388033,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751286011
    },
    {
        "content": "<p>If multiple lines refer to the same label, then the script will follow the latest instruction.</p>",
        "id": 526388040,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751286012
    },
    {
        "content": "<p>This has received very little testing, so if something does not seem to work, please report it.</p>",
        "id": 526388104,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751286032
    },
    {
        "content": "<p>If this works, then adding awareness to more labels should be a very simple change.</p>",
        "id": 526388169,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751286049
    }
]