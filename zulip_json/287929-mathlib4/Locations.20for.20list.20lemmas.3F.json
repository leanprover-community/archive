[
    {
        "content": "<p>In the course of my <a href=\"https://github.com/leanprover-community/mathlib4/pull/26295\">current computability PR</a>, I ended up needing to state a handful of lemmas purely about lists - so they should really be placed somewhere besides Computability:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">filter_length_ne_zero_iff</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">filter_length_eq_length_iff</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">filter_eq_filtermap_ite</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">L</span><span class=\"bp\">.</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">filterMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">L</span>\n</code></pre></div>\n<p>I was planning to put them all in Data.List.Basic, but I figured I'd ask if anyone had any better ideas. #find_home only suggests that location for the last lemma, whereas it suggests Batteries.Data.List.Basic for the other two, which doesn't feel right to me.</p>\n<p>(I'm also not completely sold on the name of the last one - open to suggestions!)</p>",
        "id": 532532953,
        "sender_full_name": "David J. Webb",
        "timestamp": 1754209316
    },
    {
        "content": "<p>These are stated very strangely! The first should be <code>(L.filter f).length ≠ 0 ↔ ...</code>, etc. </p>\n<p>I don't understand the purpose of the <code>b</code> in any of the statements above.</p>",
        "id": 532536430,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754212062
    },
    {
        "content": "<p>Lemmas about <code>List</code> can go in <code>Data.List.Basic</code>, although if they are genuinely missing lemmas about basic operations, you probably should tell me about them and I'll put them in the core library.</p>",
        "id": 532536495,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1754212120
    },
    {
        "content": "<p>Originally they were all have statements inside of the actual theorems, but grunweg asked me to extract them since they're purely about lists.</p>\n<p>I'm just as happy to tuck them back into their respective theorems - only the third one is actually used more than once (and only twice, at that).</p>",
        "id": 532659936,
        "sender_full_name": "David J. Webb",
        "timestamp": 1754291089
    },
    {
        "content": "<p>Also <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> caught the weird phrasing, it looks like, I just hadn't seen those suggestions yet!</p>",
        "id": 532664826,
        "sender_full_name": "David J. Webb",
        "timestamp": 1754293004
    },
    {
        "content": "<p>Thankfully I was able to simplify these down and eliminate <del>two</del> <em>all</em> of them from the PR, which cleans things up substantially</p>",
        "id": 533216381,
        "sender_full_name": "David J. Webb",
        "timestamp": 1754542188
    }
]