[
    {
        "content": "<p>I have <a href=\"https://github.com/pimotte/TutteLean/blob/main/TutteLean.lean\">a proof of Tutte's theorem</a> that compiles. This topic will serve as a tracker for upstreaming it into mathlib. </p>\n<p>Merged PRs:</p>\n<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/11667\">#11667</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/14622\">#14622</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/12960\">#12960</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/14623\">#14623</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/14977\">#14977</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15237\">#15237</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15357\">#15357</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15539\">#15539</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/16352\">#16352</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15652\">#15652</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/17436\">#17436</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/19094\">#19094</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/18905\">#18905</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/19250\">#19250</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/19611\">#19611</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/20023\">#20023</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/19373\">#19373</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/19377\">#19377</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/20602\">#20602</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/20800\">#20800</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/20024\">#20024</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/20830\">#20830</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/20398\">#20398</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/18878\">#18878</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/20705\">#20705</a> (not mine, but needed)</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/21250\">#21250</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/21981\">#21981</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/22034\">#22034</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/22125\">#22125</a></li>\n</ul>\n<p>Open PRs, in dependency order:</p>\n<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/22119\">#22119</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/22915\">#22915</a></li>\n</ul>\n<p>Closed, unmerged PRs:</p>\n<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/14976\">#14976</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/16610\">#16610</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15666\">#15666</a></li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/21097\">#21097</a></li>\n</ul>",
        "id": 451831293,
        "sender_full_name": "Pim Otte",
        "timestamp": 1721154513
    },
    {
        "content": "<p>Hey, thanks for the good work! Please ask for my review on github when you open a combinatorics PR <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 451833095,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721154916
    },
    {
        "content": "<p>There's a couple of things that I suspect are a bit wonky, so I'm looking for some feedback on how to improve that, or an indication that the direction I took is likely fine.</p>\n<ul>\n<li><a href=\"https://github.com/pimotte/TutteLean/blob/1067d8bd273088466c543e92f2ef011235990a91/TutteLean.lean#L456\">Extending a matching free graph to a maximal one</a></li>\n<li><a href=\"https://github.com/pimotte/TutteLean/blob/1067d8bd273088466c543e92f2ef011235990a91/TutteLean.lean#L2271\">Definition of alternating subgraph</a></li>\n<li><a href=\"https://github.com/pimotte/TutteLean/blob/1067d8bd273088466c543e92f2ef011235990a91/TutteLean.lean#L2955\">Explicit construction of a path in a subgraph that's a cycle</a></li>\n<li><a href=\"https://github.com/pimotte/TutteLean/blob/1067d8bd273088466c543e92f2ef011235990a91/TutteLean.lean#L5027\">Explicit construction of matching-alternating path that yields contradiction matching</a></li>\n</ul>\n<p>These are kind of major things that I'm not entirely sure I went the right way on, so if anyone has pointers for better ways to approach these I'd love to hear them. I have a lot of time the coming month and a half, so I could put some time into working out vague ideas too, anything helps:)</p>",
        "id": 451834277,
        "sender_full_name": "Pim Otte",
        "timestamp": 1721155230
    },
    {
        "content": "<p>Tutte’s theorem is a good project!</p>\n<p>You are doing quite a bit of work considering maximal objects with definitions from scratch. i think you could tighten things by using the material in <code>Order.minimal</code>.</p>",
        "id": 452030251,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1721214157
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> As follow-up to <a href=\"https://github.com/leanprover-community/mathlib4/pull/14977#discussion_r1685822727\">this discussion</a> I started a rewrite of sndOfNotNil to getVert</p>\n<p>Is this a sane definition of tail, or is this going to cause problems down the road?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- The walk obtained by removing the first dart of a non-nil walk. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Nil</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">getVert</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">notNilRec</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">getVert_zero</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">getVert_zero</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">hp</span>\n</code></pre></div>",
        "id": 453876043,
        "sender_full_name": "Pim Otte",
        "timestamp": 1721892841
    },
    {
        "content": "<p>Looks sensible</p>",
        "id": 453876171,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721892870
    },
    {
        "content": "<p>You might even want to generalise it to <code>drop</code> first</p>",
        "id": 453876203,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721892887
    },
    {
        "content": "<p>The <code>¬ p.Nil</code> assumption looks like it can now go away</p>",
        "id": 453876300,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721892912
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Tutte's.20theorem/near/453876203\">said</a>:</p>\n<blockquote>\n<p>You might even want to generalise it to <code>drop</code> first</p>\n</blockquote>\n<p>I don't quite get this, what are you suggesting here?</p>",
        "id": 453876935,
        "sender_full_name": "Pim Otte",
        "timestamp": 1721893075
    },
    {
        "content": "<p>Here is a parallel: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.tail#doc\">docs#List.tail</a> is a special case of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.drop#doc\">docs#List.drop</a>. It looks like your new definition straightforwardly generalises to <code>drop</code> (by replacing the <code>1</code> by an arbitrary number), meaning that you can define it first then recover <code>tail</code> as <code>drop 1</code></p>",
        "id": 453878195,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721893413
    },
    {
        "content": "<p>Gotcha, I think this does feel okay, I'll go down this path:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- The walk obtained by removing the first n darts of a walk. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">drop</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">getVert</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">nil</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">nil</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">getVert_zero</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">getVert_zero</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">cons_getVert_succ</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">drop</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"sd\">/-- The walk obtained by removing the first dart of a non-nil walk. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">getVert</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">drop</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 453880207,
        "sender_full_name": "Pim Otte",
        "timestamp": 1721894199
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 453880238,
        "sender_full_name": "Pim Otte",
        "timestamp": 1721894214
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> Another small query. Is the thing below legal? I don't think I've ever seen a hole in a statement, but I don't quite know what would fill it:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">cons_tail_eq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">Walk</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">getVert_zero</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">cons_getVert_succ</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">cons_getVert_succ</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 453886275,
        "sender_full_name": "Pim Otte",
        "timestamp": 1721896340
    },
    {
        "content": "<p>Oh you should use <code>Walk.copy</code> rather than <code>▸</code> here</p>",
        "id": 453886483,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721896417
    },
    {
        "content": "<p>In the drop definition or just in the lemma?</p>",
        "id": 453886666,
        "sender_full_name": "Pim Otte",
        "timestamp": 1721896486
    },
    {
        "content": "<p>Both</p>",
        "id": 453886678,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721896495
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> I'm having trouble proving the lemma below and now I'm doubting if it's even true. The <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Combinatorics/SimpleGraph/Subgraph.html#SimpleGraph.Subgraph.completelyDistribLatticeMinimalAxioms\">documentation</a> mentions that Subgraphs are not boolean algebra because of <code>verts</code>. I feel like I'm overlooking something to do with that. Any thoughts?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Combinatorics</span><span class=\"bp\">.</span><span class=\"n\">SimpleGraph</span><span class=\"bp\">.</span><span class=\"n\">Subgraph</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"bp\">.</span><span class=\"n\">Subgraph</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sdiff_adj'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G₁</span><span class=\"w\"> </span><span class=\"n\">G₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subgraph</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">}:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G₁</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"w\"> </span><span class=\"n\">G₂</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">G₁</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">G₂</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">le_sup_right</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G₁</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">G₂</span><span class=\"w\"> </span><span class=\"bp\">⊔</span><span class=\"w\"> </span><span class=\"n\">G₁</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h'</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">h₁</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"bp\">⟩</span>\n\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 454769523,
        "sender_full_name": "Pim Otte",
        "timestamp": 1722243952
    },
    {
        "content": "<p>I am still trying to wrap my head around how <code>sdiff</code> is defined for <code>SimpleGraph.Subgraph</code>, but your statement looks like it might be false because if <code>a</code> and <code>b</code> are vertices of both graphs, they are not vertices of the difference, so the RHS can hold without the LHS holding.</p>",
        "id": 454801860,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1722252205
    },
    {
        "content": "<p>Yes, Peter is exactly right</p>",
        "id": 454802369,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1722252335
    },
    {
        "content": "<p>Ok, so in that case, does it make sense to revisit <a href=\"https://github.com/leanprover-community/mathlib4/pull/14976\">this PR</a> ? The current definition of symmDiff builds on the sdiff from the Lattice instance, but for augmenting matchings we definitely do need to be more inclusive of vertices.</p>",
        "id": 454805155,
        "sender_full_name": "Pim Otte",
        "timestamp": 1722253155
    },
    {
        "content": "<p>Yes, this notion of difference isn’t the right one for augmenting paths. But perhaps it is useful for other things.</p>\n<p>Augmenting path arguments are probably more at home with the boolean algebra on <code>SimpleGraph V</code> rather than on subgraphs. In proving something like Tutte’s theorem, do you ever need to consider a graph with strictly fewer vertices?</p>",
        "id": 454968861,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1722294014
    },
    {
        "content": "<p>Specifically, the coercion of <code>Iic G</code> to a type is essentially the type of <em>spanning</em> subgraphs of G - probably a proof of Tutte will go smoothly if you stay in that setting.</p>",
        "id": 454970355,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1722294417
    },
    {
        "content": "<p>I sort of ended up with Subgraphs because that's where IsMatching is, but I think what you're saying makes sense, so I'll try that route:)</p>",
        "id": 455026761,
        "sender_full_name": "Pim Otte",
        "timestamp": 1722315283
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"329425\">Peter Nelson</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Tutte's.20theorem/near/452030251\">said</a>:</p>\n<blockquote>\n<p>Tutte’s theorem is a good project!</p>\n<p>You are doing quite a bit of work considering maximal objects with definitions from scratch. i think you could tighten things by using the material in <code>Order.minimal</code>.</p>\n</blockquote>\n<p>I just realized that the reason I ended up doing something specific is that I needed <code>[Decidable G.Adj]</code> for the resulting graph. <br>\nA general approach using order on a set of graphs that's matching-free won't get me <code>[Decidable G.Adj]</code> for a maximal element, and adding the decidability as a constraint might mean the maximal in the set is not maximal from a matching-free point of perspective.</p>\n<p>Am I missing something? Is there a cleaner way to do this, making use of existing theory?</p>",
        "id": 455153088,
        "sender_full_name": "Pim Otte",
        "timestamp": 1722354035
    },
    {
        "content": "<p>Why don't you just use <code>classical</code>?</p>",
        "id": 455153437,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1722354140
    },
    {
        "content": "<p>For some reason I thought that wasn't possible, but reflecting on it I think I know how to do that now, thanks:)</p>",
        "id": 455154327,
        "sender_full_name": "Pim Otte",
        "timestamp": 1722354466
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> I had set up some infrastructure for graphs consisting of a single edge: <a href=\"https://github.com/pimotte/TutteLean/blob/f5014a54ebff9dafde9c86e90f52198544058f0e/TutteLean.lean#L271\">def</a>, <a href=\"https://github.com/pimotte/TutteLean/blob/f5014a54ebff9dafde9c86e90f52198544058f0e/TutteLean.lean#L4393\">example usage</a></p>\n<p>Is that something that makes sense to PR or did I miss a more idiomatic way to handle that?</p>",
        "id": 456482288,
        "sender_full_name": "Pim Otte",
        "timestamp": 1722847846
    },
    {
        "content": "<p>That sounds reasonable, but I think I remember <span class=\"user-mention\" data-user-id=\"598052\">@Jeremy Tan</span> doing something similar? so maybe coordinate</p>",
        "id": 456492166,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1722850784
    },
    {
        "content": "<p>Jeremy pointed me to <a href=\"https://github.com/leanprover-community/mathlib4/blob/dc72d4cff3bc92208c623e848ba1e493ed474f5d/Mathlib/Combinatorics/SimpleGraph/Operations.lean#L145\">https://github.com/leanprover-community/mathlib4/blob/dc72d4cff3bc92208c623e848ba1e493ed474f5d/Mathlib/Combinatorics/SimpleGraph/Operations.lean#L145</a>, so I'll build on that:)</p>",
        "id": 465465024,
        "sender_full_name": "Pim Otte",
        "timestamp": 1724767763
    },
    {
        "content": "<p>I've split off a somewhat coherent part of the argument, but I'm doubting how to move forward in polishing it for mathlib. See <a href=\"https://github.com/pimotte/TutteLean/blob/665c0842f4e7cb5d3d19a679f38906f91e5321ec/TutteLean/PartNew.lean#L10\">here</a> for the work in progress.</p>\n<p>A lot of the proof of Tutte as a whole works with the following stuff:</p>\n<ul>\n<li><code>{v : V | ∀ w, v ≠ w → G.Adj w v}</code> the nodes connected to all other nodes</li>\n<li><code>((⊤ : Subgraph G).deleteVerts {v : V | ∀ w, v ≠ w → G.Adj w v}).coe</code> the graph created by deleting these nodes.</li>\n</ul>\n<p>In addition I have:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">rep</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ConnectedComponent</span><span class=\"w\"> </span><span class=\"n\">Gsplit</span><span class=\"bp\">.</span><span class=\"n\">coe</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">exists_vert</span><span class=\"bp\">.</span><span class=\"n\">choose</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">oddVerts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"bp\">''</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">rep</span><span class=\"w\"> </span><span class=\"bp\">''</span><span class=\"w\"> </span><span class=\"o\">{(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ConnectedComponent</span><span class=\"w\"> </span><span class=\"n\">Gsplit</span><span class=\"bp\">.</span><span class=\"n\">coe</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">supp</span><span class=\"bp\">.</span><span class=\"n\">ncard</span><span class=\"o\">)})</span>\n</code></pre></div>\n<p>which is specific to this part of the proof, a subset of nodes, one from each odd component.</p>\n<p>I currently have some sub-results in \"haves\", but this function is growing way too long and the compiler feedback loop is a bit long. </p>\n<p>I see a couple of options:</p>\n<ul>\n<li>Keep it like this</li>\n<li>Extract the haves to lemmas, not abstracting the names</li>\n<li>Introduce definitions with names for the objects above and then prove lemmas about them. (I'm not aware of commonly used names for above objects, so I'd make something up)</li>\n</ul>\n<p>In the end I'm tempted to put all of this in a file specifically for Tutte's theorem.</p>\n<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> Any thoughts on the above, as big-picture stuff? (I'm aware there's probably a lot to be golfed and polished on the detailed level, but I'd love to do that in a proper global structure.)</p>",
        "id": 466258913,
        "sender_full_name": "Pim Otte",
        "timestamp": 1725021399
    },
    {
        "content": "<p>I think you should come up with names for those things, and prove lemmas about them. It's the mathlib way. :-)</p>\n<p><code>allConnectedVerts</code> and <code>deleteAllConnectedVerts</code>?</p>",
        "id": 467420522,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1725428515
    },
    {
        "content": "<p>Hi! <span class=\"user-mention\" data-user-id=\"519269\">@Pim Otte</span> you opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/20024\">#20024</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/21097\">#21097</a> which I think define the same thing, but the former being specific to connected components while the latter working for any quotient. It seems reasonable to me to have a <code>SetLike</code> instance for equivalence classes but in that case I think <code>ConnectedComponent</code> should be reworked for that change? In particular couldn't there be a conflict between the two <code>SetLike</code> instances? (there is already one for <code>ConnectedComponents</code>) Tagging <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> and <span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> who reviewed <a href=\"https://github.com/leanprover-community/mathlib4/pull/20024\">#20024</a>.</p>",
        "id": 496354826,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1738076110
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"703970\">@Etienne Marion</span> yes, there's a related question I've asked in <a href=\"https://github.com/leanprover-community/mathlib4/pull/20024\">#20024</a> too, about the usage of explicit calls to <code>.supp</code> rather than using coercion. </p>\n<p>Since <a href=\"https://github.com/leanprover-community/mathlib4/pull/21097\">#21097</a> is in a new file, there's no immediate problems, and I'd be happy to do a follow-up PR refactoring to switch to the new instance (and possibly coercion instead of explicit supp), or include it in <a href=\"https://github.com/leanprover-community/mathlib4/pull/21097\">#21097</a> if that's preferable </p>\n<p>I'm not sure which one is preferable from a strategic point, so that's something that I also look to <span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> for (or maybe <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> ?)</p>",
        "id": 496363829,
        "sender_full_name": "Pim Otte",
        "timestamp": 1738078509
    },
    {
        "content": "<p>I'll take a look at this tomorrow, unless someone beats me to it!</p>",
        "id": 496373231,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1738081133
    },
    {
        "content": "<p>I agree it seems reasonable to have a <code>SetLike</code> instance for equivalence classes, and that <code>ConnectedComponent</code> should be reworked for that. Probably the best way forward is to get <a href=\"https://github.com/leanprover-community/mathlib4/pull/21097\">#21097</a> merged, then follow up amending <code>ConnectedComponent</code>, and then adapt <a href=\"https://github.com/leanprover-community/mathlib4/pull/20024\">#20024</a> to adjust (or maybe it'll be redundant by that point).</p>",
        "id": 496691826,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1738211576
    },
    {
        "content": "<p>Sounds good:) I'm pretty sure that <a href=\"https://github.com/leanprover-community/mathlib4/pull/20024\">#20024</a> will be redundant, I tested one of the earlier variations and they were all defeq, so I'll close that one and follow up once <a href=\"https://github.com/leanprover-community/mathlib4/pull/21097\">#21097</a> is merged</p>",
        "id": 496694921,
        "sender_full_name": "Pim Otte",
        "timestamp": 1738213952
    }
]