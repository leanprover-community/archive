[
    {
        "content": "<p>Recall that a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=GradedRing#doc\">docs#GradedRing</a> <code>(ğ’œ : Î¹ â†’ Ïƒ)</code> requires (assumptions):</p>\n<ol>\n<li><code>Semiring A</code></li>\n<li><code>AddSubmonoidClass Ïƒ A</code></li>\n<li><code>AddMonoid Î¹</code></li>\n<li><code>GradedRing ğ’œ</code> (I'll add itself to facilitate discussion)</li>\n</ol>\n<p>and a graded ring isomorphism <code>e</code> satisfies (conditions):</p>\n<ol>\n<li><code>x âˆˆ ğ’œ i â†’ e x âˆˆ â„¬ i</code></li>\n<li><code>x âˆˆ ğ’œ i â†” e x âˆˆ â„¬ i</code></li>\n</ol>\n<p>With the full list of assumptions (1, 2, 3, 4), conditions 1 and 2 are equivalent, so we should only ask for condition 1. So now there are two ways to set it up:</p>\n<ol>\n<li>Require assumption 1 for <code>GradedRingEquiv</code>, and then delay 2, 3, 4 as much as possible.</li>\n<li>Require assumptions 1, 2, 3, 4 for <code>GradedRingEquiv</code>.</li>\n</ol>\n<p>It might seem stupid at first to not assume <code>GradedRing</code> for <code>GradedRingEquiv</code>, but notice that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RingEquiv#doc\">docs#RingEquiv</a> also only assumes <code>Mul</code> and <code>Add</code>.</p>",
        "id": 543962394,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760016976
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/287929-mathlib4/topic/How.20to.20define.20graded.20ring.20isomorphisms.3F/near/543962394\">said</a>:</p>\n<blockquote>\n<ol>\n<li>delay 2, 3, 4 as much as possible</li>\n</ol>\n</blockquote>\n<p>note that it's basically only possible to define <code>refl</code> and <code>trans</code>, so 2 3 4 will be assumed very early in the file</p>",
        "id": 543965632,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760017785
    },
    {
        "content": "<p>I assume you did not mean for the two conditions to be the same?</p>",
        "id": 544048358,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1760044535
    },
    {
        "content": "<p>there's an imp and there's an iff</p>",
        "id": 544048537,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760044625
    },
    {
        "content": "<p>not sure if these are the same under certain assumptions</p>",
        "id": 544048568,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760044638
    },
    {
        "content": "<p>they're the same when we have graded ring on both sides</p>",
        "id": 544048639,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760044667
    },
    {
        "content": "<p>(otherwise they're just random submodules)</p>",
        "id": 544048664,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760044680
    },
    {
        "content": "<p>I think you you use all four assumptions and the weaker condition</p>",
        "id": 544052318,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1760046572
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> interesting, I went with the <a href=\"https://github.com/leanprover-community/mathlib4/pull/30379/files#diff-bdb0bf75879841d2f8ceb9138dccd10a03a3b3335e090b143991722b66fcf896R18\">other approach in #30379</a> since I thought that would lessen the burden on typeclass searching, but as I remarked earlier, I ended up assuming 1, 2, 3, 4 as soon as Line 68.</p>",
        "id": 544052689,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760046804
    },
    {
        "content": "<p>That probably increases the burden because the typeclasses can't be immediately unified</p>",
        "id": 544057484,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1760049843
    },
    {
        "content": "<p>But most importantly I claim the definition is just wrong if you can't define <code>symm</code> at the same level of generality as the definition</p>",
        "id": 544057577,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1760049917
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> i've updated <a href=\"https://github.com/leanprover-community/mathlib4/pull/30379\">#30379</a> to use your suggested approach</p>",
        "id": 544058845,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760050871
    }
]