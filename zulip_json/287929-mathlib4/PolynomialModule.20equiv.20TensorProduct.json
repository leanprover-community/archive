[
    {
        "content": "<p>Hi,<br>\nSo, I have a proof of the following that I'd like to submit as a PR to Mathlib:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">AddCommGroup</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">TensorProductEquivPolynomialModule</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">⊗</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≃ₗ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">]]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">PolynomialModule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>(Well, that it is not only that <code>def</code> that I want to submit, but that is the main result).</p>\n<p>This will be my first Mathlib PR and I guess I'm asking for tips on \"how to proceed\"...! (Hope I've posted this in at least a somewhat reasonable place...)</p>\n<ul>\n<li>Maybe a first comment to make is this: I never got the notation <code>M[X]</code> to work ... so I just wrote <code>PolynomialModule R M</code> everywhere.  That seems consistent with the <em>code</em> that I see <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Polynomial/Module/Basic.html\">here</a>, though not with all of the prose.</li>\n<li>I expect that I could use some guidance I'm aware of the <a href=\"https://leanprover-community.github.io/contribute/index.html\">contribution guidlines</a> and I know there are still things that need to be done before I actually make the pull-request (at least: name-changes and inclusion of module-level docstring...) But I'm a bit vague on a few things:<ul>\n<li>sections and namespaces. (I mean, I believe I understand what they do. But it is not completely clear e.g. in my case whether to put everything in the <code>PolynomialModule</code> name space, or what...)</li>\n<li>imports: if e.g. in the PR I added a new file to <code>Mathlib/Algebra/Polynomial/Module</code> do I need to add an <code>import</code> line for that file to <code>Mathlib.lean</code>? (Seems a bit unlikely, but I'm not sure how the relevant import statement would get there...)</li>\n</ul>\n</li>\n<li>you can <a href=\"https://github.com/gmcninch-tufts/LeanAlg/blob/main/LeanAlg/PolynomialModule/Polynomial-module.lean\">see my code here</a></li>\n</ul>",
        "id": 534842301,
        "sender_full_name": "George McNinch",
        "timestamp": 1755459020
    },
    {
        "content": "<p>I'm always in favour of more notation: I suppose <code>M[X]</code> wouldn't work because of conflict with <code>R[X]</code>, but what about <code>M[X]_R</code>?</p>",
        "id": 534842885,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755459888
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"486215\">George McNinch</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PolynomialModule.20equiv.20TensorProduct/near/534842301\">said</a>:</p>\n<blockquote>\n<ul>\n<li>do I need to add an <code>import</code> line for that file to <code>Mathlib.lean</code></li>\n</ul>\n</blockquote>\n<p>yes, but it's supposed to be automatic once you run the command <code>lake exe mk_all</code></p>",
        "id": 534843133,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755460125
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"486215\">George McNinch</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PolynomialModule.20equiv.20TensorProduct/near/534842301\">said</a>:</p>\n<blockquote>\n<ul>\n<li>sections and namespaces.</li>\n</ul>\n</blockquote>\n<p>it will be more clear in the context of a PR</p>",
        "id": 534843167,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755460149
    },
    {
        "content": "<p>Contrary to what Kenny says (I am always <em>against</em> more notation :-), don't worry about improving the notational situation if you are fighting against it. PolynomialModule is fine for your PR.</p>",
        "id": 534855069,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1755476101
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PolynomialModule.20equiv.20TensorProduct/near/534855069\">said</a>:</p>\n<blockquote>\n<p>Contrary to what Kenny says (I am always <em>against</em> more notation :-), don't worry about improving the notational situation if you are fighting against it. PolynomialModule is fine for your PR.</p>\n</blockquote>\n<p>Right; thanks. My PR isn't going to propose any notation!</p>",
        "id": 534858647,
        "sender_full_name": "George McNinch",
        "timestamp": 1755480087
    },
    {
        "content": "<p>a middle path could be local notation <span aria-label=\"melt\" class=\"emoji emoji-1fae0\" role=\"img\" title=\"melt\">:melt:</span></p>",
        "id": 534908864,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1755509644
    },
    {
        "content": "<p>It's still usually best to develop the mathematics in separate PRs from the notation</p>",
        "id": 534911968,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755510649
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/stream/287929-mathlib4/topic/PolynomialModule.20equiv.20TensorProduct/near/534843133\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"486215\">George McNinch</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PolynomialModule.20equiv.20TensorProduct/near/534842301\">said</a>:</p>\n<blockquote>\n<ul>\n<li>do I need to add an <code>import</code> line for that file to <code>Mathlib.lean</code></li>\n</ul>\n</blockquote>\n<p>yes, but it's supposed to be automatic once you run the command <code>lake exe mk_all</code></p>\n</blockquote>\n<p>Aha that makes sense.</p>",
        "id": 534929312,
        "sender_full_name": "George McNinch",
        "timestamp": 1755516751
    },
    {
        "content": "<p>So I've made the PR. First round, I had some whitespace at the end of lines, which I fixed and updated the commite. The lint-check now passes.</p>\n<p>But now there is an error in the build, as follows:</p>\n<blockquote>\n<p>Run if [[ \"skipped\" != \"success\" ]]; then<br>\n+ [[ skipped != \\s\\u\\c\\c\\e\\s\\s ]]<br>\n+ echo 'Please run '\\''lake exe mk_all'\\'' to regenerate the import all files'<br>\n+ exit 1<br>\nPlease run 'lake exe mk_all' to regenerate the import all files</p>\n</blockquote>\n<blockquote>\n<p>Error: Process completed with exit code 1.</p>\n</blockquote>\n<p>I did run <code>lake exe mk_all</code> before the commit. I didn't re-run it after fixing the whitespace issues though.</p>\n<p>But the error message seems to tell me to rerun it, but when I do so I get:</p>\n<blockquote>\n<p>george@valhalla:~/Prof-VC/mathlib4$ lake exe mk_all<br>\nNo update necessary</p>\n</blockquote>\n<blockquote>\n<p>george@valhalla:~/Prof-VC/mathlib4$ git status<br>\nOn branch PolyModuleTensor<br>\nYour branch is up to date with 'origin/PolyModuleTensor'.<br>\nnothing to commit, working tree clean</p>\n</blockquote>\n<p>and there is a line <code>import Mathlib.Algebra.Polynomial.Module.TensorProduct</code> in <code>Mathlib.lean</code>.</p>\n<p>Any suggestion as to how to proceed?</p>",
        "id": 534986935,
        "sender_full_name": "George McNinch",
        "timestamp": 1755535043
    },
    {
        "content": "<p>Try merging master?</p>",
        "id": 534987149,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1755535128
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/PolynomialModule.20equiv.20TensorProduct/near/534987149\">said</a>:</p>\n<blockquote>\n<p>Try merging master?</p>\n</blockquote>\n<p>Good idea, but unfortunately didn't work. (pulling on the master branch didn't produce any changes)</p>",
        "id": 534988049,
        "sender_full_name": "George McNinch",
        "timestamp": 1755535569
    },
    {
        "content": "<p>Nevermind for now -- I see the problem. I had <code>import Mathlib</code> at the top of the file.</p>\n<p>Just before making the PR, I ran <code>lake build</code> which worked, and then ran <code>lake exe mk_all</code>. <br>\nI didn't try <code>lake build</code> again, but a subsequent <code>lake build</code> fails because of <code>bad import</code>.</p>\n<p>So I just need to work out required imports.</p>\n<p>Sorry for the noise!</p>",
        "id": 534988821,
        "sender_full_name": "George McNinch",
        "timestamp": 1755535949
    },
    {
        "content": "<p>OK --my PR is all set. Thanks all around for the help/advice etc.</p>",
        "id": 534998746,
        "sender_full_name": "George McNinch",
        "timestamp": 1755540404
    }
]