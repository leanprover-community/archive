[
    {
        "content": "<p>Hi, while working, I found some issue : there is no goal in my lemma but the kernel says it's not done. Here is a minimal example.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">EqToHom</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">]</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">тед</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"c1\">--(h_map := ?_)</span>\n<span class=\"w\">  </span><span class=\"c1\">--sorry</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">congr_hom</span>\n</code></pre></div>\n<p>It seems that the issue is comming from the implicit use of aesop_cat in order to infer the argument h_map in Functor.ext, because if we uncomment the commented part (a sorry is added because the order of the goals are reversed) the issue disapear.</p>\n<p>Moreover, i tried to reproduce the issue with a copy of category independent of Mathlib and in this case there is no more issue.</p>\n<p>(maybe <span class=\"user-mention\" data-user-id=\"256311\">@Jannis Limperg</span>  could be interested)</p>",
        "id": 517121023,
        "sender_full_name": "yannis monbru",
        "timestamp": 1746799860
    },
    {
        "content": "<p>This also works</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">ext</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">U</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Functor</span><span class=\"bp\">.</span><span class=\"n\">congr_hom</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>So maybe the second <code>apply</code> is also fishy?</p>",
        "id": 517122661,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1746800308
    },
    {
        "content": "<p>What i can tell is that the second apply try to prove the same statement than aesop_cat two line before</p>",
        "id": 517132838,
        "sender_full_name": "yannis monbru",
        "timestamp": 1746803077
    },
    {
        "content": "<p>Seems to be some weird interaction between the other goal being in the type unifying with a new metavariable that solves both the other goal and the new metavariable while creating a new one</p>",
        "id": 517134517,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1746803598
    }
]