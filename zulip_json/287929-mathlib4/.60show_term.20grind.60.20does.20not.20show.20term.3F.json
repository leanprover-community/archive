[
    {
        "content": "<p>When I wanted to see what <code>grind</code> does, I tried <code>show_term</code> but it shows the theorem itself, is this normal? how can I see the proof term generated by <code>grind</code>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">show_term</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"c1\">-- Try this: [apply] _example._proof_1 p hp</span>\n<span class=\"w\">  </span><span class=\"n\">grind</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hpq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">show_term</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"c1\">-- found a proof, but the corresponding tactic failed:</span>\n<span class=\"w\">                  </span><span class=\"c1\">--(expose_names; exact _example._proof_1 p q hp hpq)</span>\n</code></pre></div>",
        "id": 564222993,
        "sender_full_name": "Yoh Tanimoto",
        "timestamp": 1765969131
    },
    {
        "content": "<p>Not entirely clear what you want to see but here is more information:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">show_term</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"c1\">-- Try this: [apply] foo._proof_1_1 p hp</span>\n<span class=\"w\">  </span><span class=\"n\">grind</span>\n\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"bp\">._</span><span class=\"n\">proof_1_1</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">theorem foo._proof_1_1 : âˆ€ (p : Prop), p â†’ p :=</span>\n<span class=\"cm\">fun p hp â†¦ Classical.byContradiction fun h â†¦ id (Eq.mp (Eq.trans (Eq.symm (eq_true hp)) (eq_false h)) True.intro)</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>",
        "id": 564224341,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1765969556
    },
    {
        "content": "<p>ok, so <code>#print foo._proof_1_1</code> works... </p>\n<p>From what I know, if I write <code>show_term</code> before a tactic, it gives the proof term of that line.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hpq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hqr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">â†’</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">show_term</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hqr</span><span class=\"w\"> </span><span class=\"c1\">--Try this: [apply] refine hqr ?_</span>\n<span class=\"w\">  </span><span class=\"n\">show_term</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\">     </span><span class=\"c1\">-- found a proof, but the corresponding tactic failed: (expose_names; exact _example._proof_1 p q hp hpq)</span>\n</code></pre></div>\n<p>Instead, when there is <code>grind</code> in the proof, infoview suggests a line including the theorem itself. Is this the intended behaviour? How can I see the proof term produced by <code>grind</code> for that line?</p>",
        "id": 564226016,
        "sender_full_name": "Yoh Tanimoto",
        "timestamp": 1765970112
    },
    {
        "content": "<p>I think that this is by design: <a href=\"#narrow/channel/287929-mathlib4/topic/What.20happened.20to.20.60show_term.60/near/555329552\">#mathlib4 &gt; What happened to &#96;show_term&#96; @ ðŸ’¬</a>.</p>",
        "id": 564228850,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1765971147
    },
    {
        "content": "<p>I see, so in other words, I should give name, say <code>foo</code>,  to the theorem and use <code>#print foo._proof_1_1</code>, too see the whole proof, not of that line alone. Thanks!</p>",
        "id": 564245029,
        "sender_full_name": "Yoh Tanimoto",
        "timestamp": 1765976335
    }
]