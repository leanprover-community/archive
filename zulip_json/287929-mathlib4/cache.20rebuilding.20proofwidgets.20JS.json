[
    {
        "content": "<p>After pulling the new master, removing <code>.lake</code> and getting the cache, <code>lake build</code> fails for me.  Below is what I see.</p>\n<p>I saw that there was some discussion about proofwidgets: should I do something special to make cache work again?</p>\n<p>Thanks!</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span>lake<span class=\"w\"> </span>exe<span class=\"w\"> </span>cache<span class=\"w\"> </span>get\ninfo:<span class=\"w\"> </span>batteries:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/batteries<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/batteries'</span>\ninfo:<span class=\"w\"> </span>Qq:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/quote4<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/Qq'</span>\ninfo:<span class=\"w\"> </span>aesop:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/aesop<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/aesop'</span>\ninfo:<span class=\"w\"> </span>proofwidgets:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/ProofWidgets4<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/proofwidgets'</span>\ninfo:<span class=\"w\"> </span>importGraph:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/import-graph<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/importGraph'</span>\ninfo:<span class=\"w\"> </span>LeanSearchClient:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/LeanSearchClient<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/LeanSearchClient'</span>\ninfo:<span class=\"w\"> </span>Cli:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover/lean4-cli<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/Cli'</span>\n⚠<span class=\"w\"> </span><span class=\"o\">[</span><span class=\"m\">13</span>/24<span class=\"o\">]</span><span class=\"w\"> </span>Ran<span class=\"w\"> </span>proofwidgets:extraDep\nwarning:<span class=\"w\"> </span>building<span class=\"w\"> </span>from<span class=\"w\"> </span>source<span class=\"p\">;</span><span class=\"w\"> </span>failed<span class=\"w\"> </span>to<span class=\"w\"> </span>fetch<span class=\"w\"> </span>GitHub<span class=\"w\"> </span>release<span class=\"w\"> </span><span class=\"o\">(</span>run<span class=\"w\"> </span>with<span class=\"w\"> </span><span class=\"s1\">'-v'</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span>details<span class=\"o\">)</span>\nAttempting<span class=\"w\"> </span>to<span class=\"w\"> </span>download<span class=\"w\"> </span><span class=\"m\">5235</span><span class=\"w\"> </span>file<span class=\"o\">(</span>s<span class=\"o\">)</span>\nDownloaded:<span class=\"w\"> </span><span class=\"m\">5235</span><span class=\"w\"> </span>file<span class=\"o\">(</span>s<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span>attempted<span class=\"w\"> </span><span class=\"m\">5235</span>/5235<span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">100</span>%<span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"m\">100</span>%<span class=\"w\"> </span>success<span class=\"o\">)</span>\nDecompressing<span class=\"w\"> </span><span class=\"m\">5235</span><span class=\"w\"> </span>file<span class=\"o\">(</span>s<span class=\"o\">)</span>\nUnpacked<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"m\">6648</span><span class=\"w\"> </span>ms\nCompleted<span class=\"w\"> </span>successfully!\n\n$<span class=\"w\"> </span>lake<span class=\"w\"> </span>build\n⚠<span class=\"w\"> </span><span class=\"o\">[</span><span class=\"m\">5</span>/5247<span class=\"o\">]</span><span class=\"w\"> </span>Ran<span class=\"w\"> </span>proofwidgets:extraDep\nwarning:<span class=\"w\"> </span>building<span class=\"w\"> </span>from<span class=\"w\"> </span>source<span class=\"p\">;</span><span class=\"w\"> </span>failed<span class=\"w\"> </span>to<span class=\"w\"> </span>fetch<span class=\"w\"> </span>GitHub<span class=\"w\"> </span>release<span class=\"w\"> </span><span class=\"o\">(</span>run<span class=\"w\"> </span>with<span class=\"w\"> </span><span class=\"s1\">'-v'</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span>details<span class=\"o\">)</span>\n✖<span class=\"w\"> </span><span class=\"o\">[</span><span class=\"m\">419</span>/5247<span class=\"o\">]</span><span class=\"w\"> </span>Building<span class=\"w\"> </span>proofwidgets/widgetJsAll\ntrace:<span class=\"w\"> </span>././.lake/packages/proofwidgets/widget&gt;<span class=\"w\"> </span>npm<span class=\"w\"> </span>clean-install\ntrace:<span class=\"w\"> </span>stderr:\ncould<span class=\"w\"> </span>not<span class=\"w\"> </span>execute<span class=\"w\"> </span>external<span class=\"w\"> </span>process<span class=\"w\"> </span><span class=\"s1\">'npm'</span>\nerror:<span class=\"w\"> </span>external<span class=\"w\"> </span><span class=\"nb\">command</span><span class=\"w\"> </span><span class=\"s1\">'npm'</span><span class=\"w\"> </span>exited<span class=\"w\"> </span>with<span class=\"w\"> </span>code<span class=\"w\"> </span><span class=\"m\">255</span>\nSome<span class=\"w\"> </span>required<span class=\"w\"> </span>builds<span class=\"w\"> </span>logged<span class=\"w\"> </span>failures:\n-<span class=\"w\"> </span>proofwidgets/widgetJsAll\nerror:<span class=\"w\"> </span>build<span class=\"w\"> </span>failed\n</code></pre></div>",
        "id": 477593858,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729237007
    },
    {
        "content": "<p>I'm guessing you don't have npm installed?</p>",
        "id": 477595922,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729237619
    },
    {
        "content": "<p>Oh, indeed:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span>npm\nCommand<span class=\"w\"> </span><span class=\"s1\">'npm'</span><span class=\"w\"> </span>not<span class=\"w\"> </span>found,<span class=\"w\"> </span>but<span class=\"w\"> </span>can<span class=\"w\"> </span>be<span class=\"w\"> </span>installed<span class=\"w\"> </span>with:\nsudo<span class=\"w\"> </span>apt<span class=\"w\"> </span>install<span class=\"w\"> </span>npm\n</code></pre></div>",
        "id": 477596027,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729237657
    },
    {
        "content": "<p>Let me try again...</p>",
        "id": 477596047,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729237662
    },
    {
        "content": "<p>Maybe relevant: <a class=\"stream-topic\" data-stream-id=\"428973\" href=\"/#narrow/channel/428973-nightly-testing/topic/ProofWidgets4\">#nightly-testing &gt; ProofWidgets4</a> <a href=\"#narrow/channel/287929-mathlib4/topic/mathlib4.20speedcenter/near/475832473\">https://leanprover.zulipchat.com/#narrow/channel/287929-mathlib4/topic/mathlib4.20speedcenter/near/475832473</a></p>",
        "id": 477596211,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729237712
    },
    {
        "content": "<p>It's still not working, but I need to run now!  I'll report better soon!</p>",
        "id": 477597242,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729238002
    },
    {
        "content": "<p>I think that I now see also errors from <code>npm</code>, but at the same time, the cache still is not working.</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span>rm<span class=\"w\"> </span>-rf<span class=\"w\"> </span>.lake/\n\n$<span class=\"w\"> </span>lake<span class=\"w\"> </span>exe<span class=\"w\"> </span>cache<span class=\"w\"> </span>get\ninfo:<span class=\"w\"> </span>batteries:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/batteries<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/batteries'</span>\ninfo:<span class=\"w\"> </span>Qq:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/quote4<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/Qq'</span>\ninfo:<span class=\"w\"> </span>aesop:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/aesop<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/aesop'</span>\ninfo:<span class=\"w\"> </span>proofwidgets:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/ProofWidgets4<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/proofwidgets'</span>\ninfo:<span class=\"w\"> </span>importGraph:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/import-graph<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/importGraph'</span>\ninfo:<span class=\"w\"> </span>LeanSearchClient:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover-community/LeanSearchClient<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/LeanSearchClient'</span>\ninfo:<span class=\"w\"> </span>Cli:<span class=\"w\"> </span>cloning<span class=\"w\"> </span>https://github.com/leanprover/lean4-cli<span class=\"w\"> </span>to<span class=\"w\"> </span><span class=\"s1\">'././.lake/packages/Cli'</span>\n⚠<span class=\"w\"> </span><span class=\"o\">[</span><span class=\"m\">13</span>/24<span class=\"o\">]</span><span class=\"w\"> </span>Ran<span class=\"w\"> </span>proofwidgets:extraDep\nwarning:<span class=\"w\"> </span>building<span class=\"w\"> </span>from<span class=\"w\"> </span>source<span class=\"p\">;</span><span class=\"w\"> </span>failed<span class=\"w\"> </span>to<span class=\"w\"> </span>fetch<span class=\"w\"> </span>GitHub<span class=\"w\"> </span>release<span class=\"w\"> </span><span class=\"o\">(</span>run<span class=\"w\"> </span>with<span class=\"w\"> </span><span class=\"s1\">'-v'</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span>details<span class=\"o\">)</span>\nNo<span class=\"w\"> </span>files<span class=\"w\"> </span>to<span class=\"w\"> </span>download\nDecompressing<span class=\"w\"> </span><span class=\"m\">5235</span><span class=\"w\"> </span>file<span class=\"o\">(</span>s<span class=\"o\">)</span>\nUnpacked<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"m\">6740</span><span class=\"w\"> </span>ms\nCompleted<span class=\"w\"> </span>successfully!\n\n$<span class=\"w\"> </span>lake<span class=\"w\"> </span>build\n⚠<span class=\"w\"> </span><span class=\"o\">[</span><span class=\"m\">5</span>/5247<span class=\"o\">]</span><span class=\"w\"> </span>Ran<span class=\"w\"> </span>proofwidgets:extraDep\nwarning:<span class=\"w\"> </span>building<span class=\"w\"> </span>from<span class=\"w\"> </span>source<span class=\"p\">;</span><span class=\"w\"> </span>failed<span class=\"w\"> </span>to<span class=\"w\"> </span>fetch<span class=\"w\"> </span>GitHub<span class=\"w\"> </span>release<span class=\"w\"> </span><span class=\"o\">(</span>run<span class=\"w\"> </span>with<span class=\"w\"> </span><span class=\"s1\">'-v'</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span>details<span class=\"o\">)</span>\n✖<span class=\"w\"> </span><span class=\"o\">[</span><span class=\"m\">915</span>/5247<span class=\"o\">]</span><span class=\"w\"> </span>Building<span class=\"w\"> </span>proofwidgets/widgetJsAll\ntrace:<span class=\"w\"> </span>././.lake/packages/proofwidgets/widget&gt;<span class=\"w\"> </span>npm<span class=\"w\"> </span>clean-install\ntrace:<span class=\"w\"> </span>stdout:\n\nadded<span class=\"w\"> </span><span class=\"m\">267</span><span class=\"w\"> </span>packages,<span class=\"w\"> </span>and<span class=\"w\"> </span>audited<span class=\"w\"> </span><span class=\"m\">268</span><span class=\"w\"> </span>packages<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>4s\n\n<span class=\"m\">29</span><span class=\"w\"> </span>packages<span class=\"w\"> </span>are<span class=\"w\"> </span>looking<span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span>funding\n<span class=\"w\">  </span>run<span class=\"w\"> </span><span class=\"sb\">`</span>npm<span class=\"w\"> </span>fund<span class=\"sb\">`</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span>details\n\n<span class=\"o\">[</span>lots<span class=\"w\"> </span>of<span class=\"w\"> </span>lines<span class=\"w\"> </span>that<span class=\"w\"> </span>appear<span class=\"w\"> </span>an<span class=\"w\"> </span>npm<span class=\"w\"> </span>report<span class=\"o\">]</span>\n\ntrace:<span class=\"w\"> </span>././.lake/packages/proofwidgets/widget&gt;<span class=\"w\"> </span>npm<span class=\"w\"> </span>run<span class=\"w\"> </span>build\ntrace:<span class=\"w\"> </span>stdout:\n\n&gt;<span class=\"w\"> </span>proofwidgets4@0.1.0<span class=\"w\"> </span>build\n&gt;<span class=\"w\"> </span>npx<span class=\"w\"> </span>tsc<span class=\"w\"> </span><span class=\"o\">&amp;&amp;</span><span class=\"w\"> </span>rollup<span class=\"w\"> </span>--environment<span class=\"w\"> </span>NODE_ENV:production<span class=\"w\"> </span>--config\ntrace:<span class=\"w\"> </span>stderr:\n/home/damiano/Matematica/Lean4/mathlib4/.lake/packages/proofwidgets/widget/node_modules/typescript/lib/tsc.js:92\n<span class=\"w\">  </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"nb\">let</span><span class=\"w\"> </span><span class=\"nv\">i</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>startIndex<span class=\"w\"> </span>??<span class=\"w\"> </span><span class=\"m\">0</span><span class=\"p\">;</span><span class=\"w\"> </span>i<span class=\"w\"> </span>&lt;<span class=\"w\"> </span>array.length<span class=\"p\">;</span><span class=\"w\"> </span>i++<span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">                           </span>^\n\nSyntaxError:<span class=\"w\"> </span>Unexpected<span class=\"w\"> </span>token<span class=\"w\"> </span><span class=\"s1\">'?'</span>\n<span class=\"w\">    </span>at<span class=\"w\"> </span>wrapSafe<span class=\"w\"> </span><span class=\"o\">(</span>internal/modules/cjs/loader.js:915:16<span class=\"o\">)</span>\n<span class=\"w\">    </span>at<span class=\"w\"> </span>Module._compile<span class=\"w\"> </span><span class=\"o\">(</span>internal/modules/cjs/loader.js:963:27<span class=\"o\">)</span>\n<span class=\"w\">    </span>at<span class=\"w\"> </span>Object.Module._extensions..js<span class=\"w\"> </span><span class=\"o\">(</span>internal/modules/cjs/loader.js:1027:10<span class=\"o\">)</span>\n<span class=\"w\">    </span>at<span class=\"w\"> </span>Module.load<span class=\"w\"> </span><span class=\"o\">(</span>internal/modules/cjs/loader.js:863:32<span class=\"o\">)</span>\n<span class=\"w\">    </span>at<span class=\"w\"> </span>Function.Module._load<span class=\"w\"> </span><span class=\"o\">(</span>internal/modules/cjs/loader.js:708:14<span class=\"o\">)</span>\n<span class=\"w\">    </span>at<span class=\"w\"> </span>Module.require<span class=\"w\"> </span><span class=\"o\">(</span>internal/modules/cjs/loader.js:887:19<span class=\"o\">)</span>\n<span class=\"w\">    </span>at<span class=\"w\"> </span>require<span class=\"w\"> </span><span class=\"o\">(</span>internal/modules/cjs/helpers.js:85:18<span class=\"o\">)</span>\n<span class=\"w\">    </span>at<span class=\"w\"> </span>Object.&lt;anonymous&gt;<span class=\"w\"> </span><span class=\"o\">(</span>/home/damiano/Matematica/Lean4/mathlib4/.lake/packages/proofwidgets/widget/node_modules/typescript/bin/tsc:2:1<span class=\"o\">)</span>\n<span class=\"w\">    </span>at<span class=\"w\"> </span>Module._compile<span class=\"w\"> </span><span class=\"o\">(</span>internal/modules/cjs/loader.js:999:30<span class=\"o\">)</span>\n<span class=\"w\">    </span>at<span class=\"w\"> </span>Object.Module._extensions..js<span class=\"w\"> </span><span class=\"o\">(</span>internal/modules/cjs/loader.js:1027:10<span class=\"o\">)</span>\nerror:<span class=\"w\"> </span>external<span class=\"w\"> </span><span class=\"nb\">command</span><span class=\"w\"> </span><span class=\"s1\">'npm'</span><span class=\"w\"> </span>exited<span class=\"w\"> </span>with<span class=\"w\"> </span>code<span class=\"w\"> </span><span class=\"m\">1</span>\nSome<span class=\"w\"> </span>required<span class=\"w\"> </span>builds<span class=\"w\"> </span>logged<span class=\"w\"> </span>failures:\n-<span class=\"w\"> </span>proofwidgets/widgetJsAll\nerror:<span class=\"w\"> </span>build<span class=\"w\"> </span>failed\n</code></pre></div>",
        "id": 477621749,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729246144
    },
    {
        "content": "<p>It's really important that this all works <em>without</em> <code>npm</code> installed.</p>",
        "id": 477627457,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1729248329
    },
    {
        "content": "<p>So please don't install it to try to fix such problems. :-)</p>",
        "id": 477627468,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1729248338
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span>?</p>",
        "id": 477627620,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1729248392
    },
    {
        "content": "<p>Ok, I'll (happily) remove it</p>",
        "id": 477627651,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729248405
    },
    {
        "content": "<blockquote>\n<p><code>warning: building from source; failed to fetch GitHub release (run with '-v' for details)</code></p>\n</blockquote>\n<p>This is the relevant line, could you try that?</p>",
        "id": 477631099,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1729249708
    },
    {
        "content": "<p>What does that mean?</p>",
        "id": 477631146,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729249725
    },
    {
        "content": "<p><code>lake exe cache get -v</code>?</p>",
        "id": 477631166,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729249735
    },
    {
        "content": "<p>The line is from <code>build</code>, so <code>lake build -v</code></p>",
        "id": 477631260,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1729249763
    },
    {
        "content": "<p>I get a really long list of <code>trace</code> outputs and finally</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">ℹ</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">5248</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">Util</span><span class=\"bp\">.</span><span class=\"n\">Pickle</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">LEAN_PATH</span><span class=\"bp\">=././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.13.0-rc3/bin/lean -Dlinter.missingDocs=true ././././Batteries/Util/Pickle.lean -R ./././. -o ././.lake/build/lib/Batteries/Util/Pickle.olean -i ././.lake/build/lib/Batteries/Util/Pickle.ilean -c ././.lake/build/ir/Batteries/Util/Pickle.c --json</span>\n<span class=\"n\">ℹ</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">5249</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">Batteries</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">LEAN_PATH</span><span class=\"bp\">=././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.13.0-rc3/bin/lean -Dlinter.missingDocs=true ././././Batteries.lean -R ./././. -o ././.lake/build/lib/Batteries.olean -i ././.lake/build/lib/Batteries.ilean -c ././.lake/build/ir/Batteries.c --json</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">builds</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">widgetJsAll</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">failed</span>\n</code></pre></div>",
        "id": 477631463,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729249837
    },
    {
        "content": "<p>It starts like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">v</span>\n<span class=\"bp\">✖</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Optional</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">Fetching</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"n\">optRelease</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">ProofWidgets4</span><span class=\"bp\">.</span><span class=\"n\">tar</span><span class=\"bp\">.</span><span class=\"n\">gz</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">ssh</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">git</span><span class=\"bp\">@</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">ProofWidgets4</span><span class=\"bp\">/</span><span class=\"n\">releases</span><span class=\"bp\">/</span><span class=\"n\">download</span><span class=\"bp\">/</span><span class=\"n\">v0</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">.</span><span class=\"m\">43</span><span class=\"bp\">/</span><span class=\"n\">ProofWidgets4</span><span class=\"bp\">.</span><span class=\"n\">tar</span><span class=\"bp\">.</span><span class=\"n\">gz</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">curl</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">Protocol</span><span class=\"w\"> </span><span class=\"s2\">\"ssh\"</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">supported</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">disabled</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">libcurl</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">curl'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">⚠</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">5</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Ran</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"n\">extraDep</span>\n<span class=\"n\">warning</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">building</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">source</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">GitHub</span><span class=\"w\"> </span><span class=\"n\">release</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"n\">optRelease'</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">details</span><span class=\"o\">)</span>\n<span class=\"n\">ℹ</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">15</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Lint</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">LEAN_PATH</span><span class=\"bp\">=././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.13.0-rc3/bin/lean -Dlinter.missingDocs=true ././././Batteries/Tactic/Lint/Basic.lean -R ./././. -o ././.lake/build/lib/Batteries/Tactic/Lint/Basic.olean -i ././.lake/build/lib/Batteries/Tactic/Lint/Basic.ilean -c ././.lake/build/ir/Batteries/Tactic/Lint/Basic.c --json</span>\n<span class=\"n\">ℹ</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">16</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Lint</span><span class=\"bp\">.</span><span class=\"n\">Misc</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">LEAN_PATH</span><span class=\"bp\">=././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.13.0-rc3/bin/lean -Dlinter.missingDocs=true ././././Batteries/Tactic/Lint/Misc.lean -R ./././. -o ././.lake/build/lib/Batteries/Tactic/Lint/Misc.olean -i ././.lake/build/lib/Batteries/Tactic/Lint/Misc.ilean -c ././.lake/build/ir/Batteries/Tactic/Lint/Misc.c --json</span>\n</code></pre></div>",
        "id": 477631557,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729249893
    },
    {
        "content": "<p>The interesting step is <code>Ran proofwidgets:extraDep</code>, it's likely near the top</p>",
        "id": 477631558,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1729249894
    },
    {
        "content": "<p>lots of lines with <code>trace</code>s, then</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">ℹ</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">394</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">ImportGraph</span><span class=\"bp\">.</span><span class=\"n\">Imports</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">LEAN_PATH</span><span class=\"bp\">=././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">batteries</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.13.0-rc3/bin/lean ././././ImportGraph/Imports.lean -R ./././. -o ././.lake/build/lib/ImportGraph/Imports.olean -i ././.lake/build/lib/ImportGraph/Imports.ilean -c ././.lake/build/ir/ImportGraph/Imports.c --json</span>\n<span class=\"n\">ℹ</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">418</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">widgetPackageLock</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././</span><span class=\"n\">widget</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">npm</span><span class=\"w\"> </span><span class=\"n\">install</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stdout</span><span class=\"o\">:</span>\n\n<span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">date</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">audited</span><span class=\"w\"> </span><span class=\"mi\">269</span><span class=\"w\"> </span><span class=\"n\">packages</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mi\">891</span><span class=\"n\">ms</span>\n\n<span class=\"mi\">29</span><span class=\"w\"> </span><span class=\"n\">packages</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">looking</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">funding</span>\n<span class=\"w\">  </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"ss\">`npm</span><span class=\"w\"> </span><span class=\"n\">fund</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">details</span>\n\n<span class=\"n\">found</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">vulnerabilities</span>\n<span class=\"bp\">✖</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">419</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">widgetJsAll</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/</span><span class=\"n\">widget</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">npm</span><span class=\"w\"> </span><span class=\"n\">clean</span><span class=\"bp\">-</span><span class=\"n\">install</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">execute</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">process</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">npm'</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">npm'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">255</span>\n<span class=\"n\">ℹ</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">433</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Where</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">LEAN_PATH</span><span class=\"bp\">=././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"w\"> </span><span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">runner</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.13.0-rc3/bin/lean -Dlinter.missingDocs=true ././././Batteries/Tactic/Where.lean -R ./././. -o ././.lake/build/lib/Batteries/Tactic/Where.olean -i ././.lake/build/lib/Batteries/Tactic/Where.ilean -c ././.lake/build/ir/Batteries/Tactic/Where.c --json</span>\n<span class=\"n\">ℹ</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">542</span><span class=\"bp\">/</span><span class=\"mi\">5251</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Replayed</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Gcd</span>\n</code></pre></div>",
        "id": 477631662,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729249924
    },
    {
        "content": "<p>then more lines with traces ending with what is above.</p>",
        "id": 477631678,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729249932
    },
    {
        "content": "<blockquote>\n<p><code>curl: (1) Protocol \"ssh\" not supported or disabled in libcurl</code></p>\n</blockquote>\n<p>Oh interesting, that definitely shouldn't happen</p>",
        "id": 477631759,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1729249970
    },
    {
        "content": "<p>I'm glad to be interesting... <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 477631835,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729250003
    },
    {
        "content": "<p>I don't know why Lake would choose a different proofwidgets URL for you than, apparently, for everyone else</p>",
        "id": 477632635,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1729250339
    },
    {
        "content": "<p>Also, this happened now, until today, I had no problem...</p>",
        "id": 477632712,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729250374
    },
    {
        "content": "<p>(Could have been in the last week, as I was not using this computer in the meantime, but another with a virtually identical setup.)</p>",
        "id": 477632843,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729250420
    },
    {
        "content": "<p>Is there a way that I can change the proofwidgets URL on my side, or is this something that I should not touch?</p>",
        "id": 477632972,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729250479
    },
    {
        "content": "<p>Your lake-manifest.json is in fact in sync with master?</p>",
        "id": 477633057,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1729250516
    },
    {
        "content": "<p>I think so:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">checkout</span><span class=\"w\"> </span><span class=\"n\">origin</span><span class=\"bp\">/</span><span class=\"n\">master</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"bp\">-</span><span class=\"n\">manifest</span><span class=\"bp\">.</span><span class=\"n\">json</span>\n<span class=\"n\">Updated</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">paths</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"n\">c2bcdaae3</span>\n</code></pre></div>",
        "id": 477633180,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729250554
    },
    {
        "content": "<p>As an experiment, I cloned a new copy of mathlib, downloaded the cache and ran <code>lake build</code>, with the same outcome.</p>",
        "id": 477643831,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729254250
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span>  For some reason, Lake has deduced an SSH URL for ProofWidgets. One thing I would check is what remote the ProofWidgets dependency is set to:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"c1\"># in mathlib4</span>\n$<span class=\"w\"> </span>git<span class=\"w\"> </span>-C<span class=\"w\"> </span>.lake/packages/proofwidgets<span class=\"w\"> </span>remote<span class=\"w\"> </span>get-url<span class=\"w\"> </span>origin\n</code></pre></div>\n<p>It should be the below, but I suspect it is probably not:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">ProofWidgets4</span>\n</code></pre></div>",
        "id": 477710348,
        "sender_full_name": "Mac Malone",
        "timestamp": 1729276749
    },
    {
        "content": "<p>I get</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>ssh://git@github.com/leanprover-community/ProofWidgets4\n</code></pre></div>\n<p>I hope that this is different enough to justify what is happening!</p>",
        "id": 477717003,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729279535
    },
    {
        "content": "<p>I think it means that Mac's conjecture was correct!</p>",
        "id": 477729517,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729283066
    },
    {
        "content": "<p>Indeed, but I'm still not sure how to proceed.  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 477730693,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729283580
    },
    {
        "content": "<p>one hack would be to edit the <code>.git/config</code> file and update the upstream url to that <code>https</code> one.</p>",
        "id": 477732063,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1729284237
    },
    {
        "content": "<p>Adam, can you be a bit more explicit and tell me what I should write in <code>.git/config</code>?  In my file, there is no mention of <code>ProofWidgets</code>...</p>",
        "id": 477769685,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729310174
    },
    {
        "content": "<p>Here is my <code>.git/config</code> file:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span>cat<span class=\"w\"> </span>.git/config\n<span class=\"o\">[</span>core<span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"nv\">repositoryformatversion</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">0</span>\n<span class=\"w\">    </span><span class=\"nv\">filemode</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">true</span>\n<span class=\"w\">    </span><span class=\"nv\">bare</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">false</span>\n<span class=\"w\">    </span><span class=\"nv\">logallrefupdates</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">true</span>\n<span class=\"o\">[</span>remote<span class=\"w\"> </span><span class=\"s2\">\"origin\"</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"nv\">url</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>git@github.com:leanprover-community/mathlib4.git\n<span class=\"w\">    </span><span class=\"nv\">fetch</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>+refs/heads/*:refs/remotes/origin/*\n<span class=\"o\">[</span>branch<span class=\"w\"> </span><span class=\"s2\">\"master\"</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"nv\">remote</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>origin\n<span class=\"w\">    </span><span class=\"nv\">merge</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>refs/heads/master\n</code></pre></div>",
        "id": 477769712,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729310210
    },
    {
        "content": "<p>Sorry, I should have clarified: its <code>.lake/packages/proofwidgets/.git/config</code>. The file in my copy of mathlib looks like this:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"o\">[</span>core<span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"nv\">repositoryformatversion</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">0</span>\n<span class=\"w\">    </span><span class=\"nv\">filemode</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">true</span>\n<span class=\"w\">    </span><span class=\"nv\">bare</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">false</span>\n<span class=\"w\">    </span><span class=\"nv\">logallrefupdates</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">true</span>\n<span class=\"o\">[</span>remote<span class=\"w\"> </span><span class=\"s2\">\"origin\"</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"nv\">url</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>https://github.com/leanprover-community/ProofWidgets4\n<span class=\"w\">    </span><span class=\"nv\">fetch</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>+refs/heads/*:refs/remotes/origin/*\n<span class=\"o\">[</span>branch<span class=\"w\"> </span><span class=\"s2\">\"main\"</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"nv\">remote</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>origin\n<span class=\"w\">    </span><span class=\"nv\">merge</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>refs/heads/main\n</code></pre></div>",
        "id": 477801831,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1729340914
    },
    {
        "content": "<p>But I don't think one is ever meant to edit files in the <code>.lake/packages</code> folder. That should all be handled properly by <code>lake</code>. I only made the suggestion to get you going again.</p>",
        "id": 477801862,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1729340953
    },
    {
        "content": "<p>Ok, thanks!  Anyway, my <code>.lake/packages/proofwidgets/.git/config</code> file is the same as yours:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"o\">[</span>core<span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"nv\">repositoryformatversion</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"m\">0</span>\n<span class=\"w\">    </span><span class=\"nv\">filemode</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">true</span>\n<span class=\"w\">    </span><span class=\"nv\">bare</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">false</span>\n<span class=\"w\">    </span><span class=\"nv\">logallrefupdates</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nb\">true</span>\n<span class=\"o\">[</span>remote<span class=\"w\"> </span><span class=\"s2\">\"origin\"</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"nv\">url</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>https://github.com/leanprover-community/ProofWidgets4\n<span class=\"w\">    </span><span class=\"nv\">fetch</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>+refs/heads/*:refs/remotes/origin/*\n<span class=\"o\">[</span>branch<span class=\"w\"> </span><span class=\"s2\">\"main\"</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"nv\">remote</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>origin\n<span class=\"w\">    </span><span class=\"nv\">merge</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>refs/heads/main\n</code></pre></div>",
        "id": 477812100,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729348456
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> <span aria-label=\"exploding head\" class=\"emoji emoji-1f92f\" role=\"img\" title=\"exploding head\">:exploding_head:</span>   Apparently Git is performing some magic to produce an SSH URL despite the repository being configured with a HTTPS one. I have no clue why (my attempts ot search for a reason this could happen failed). However, <a href=\"https://github.com/leanprover-community/ProofWidgets4/pull/83\">ProofWidgets4#83</a> should prevent whatever magic is happening is here from causing problems in the future.</p>",
        "id": 477824133,
        "sender_full_name": "Mac Malone",
        "timestamp": 1729358398
    },
    {
        "content": "<p>Hmm,  a little more searching just now returned a Git feature that could be the culprit:</p>\n<p><code>git config [--global] url.&lt;base&gt;.insteadOf &lt;other_url&gt;</code></p>\n<p>(<a href=\"https://stackoverflow.com/questions/1722807/how-to-convert-git-urls-to-http-urls\">StackOverflow</a>, <a href=\"https://git-scm.com/docs/git-config#Documentation/git-config.txt-urlltbasegtinsteadOf\">Git Docs</a>, <a href=\"https://stackoverflow.com/a/22027731\">StackOverflow example for GitHub</a>)</p>",
        "id": 477824493,
        "sender_full_name": "Mac Malone",
        "timestamp": 1729358755
    },
    {
        "content": "<p>Maybe check if your global git config has this option set? (e.g., <code>~/.gitconfig</code> or <code>git config --global -e</code>)</p>",
        "id": 477824597,
        "sender_full_name": "Mac Malone",
        "timestamp": 1729358848
    },
    {
        "content": "<p>If it helps, I once had some git-related problem which nobody else had, and I pasted the output of <code>git config -l</code> <a href=\"#narrow/channel/113488-general/topic/how.20to.20resolve.20conflicts.20without.20messing.20up.20branch.3F/near/448696746\">here</a> and within 4 minutes Ruben pointed out my problem and how to fix it!</p>",
        "id": 477829347,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729363508
    },
    {
        "content": "<p>From the home dir, I get</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span>git<span class=\"w\"> </span>config<span class=\"w\"> </span>-l\nuser.email<span class=\"o\">=</span>adomani@gmail.com\nuser.name<span class=\"o\">=</span>adomani\ncore.editor<span class=\"o\">=</span>code<span class=\"w\"> </span>--new-window<span class=\"w\"> </span>--wait\ncore.excludesfile<span class=\"o\">=</span>/home/damiano/.gitignore\nurl.ssh://git@github.com/.insteadof<span class=\"o\">=</span>https://github.com/\n</code></pre></div>\n<p>and the last line looks promising...</p>",
        "id": 477833959,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729367905
    },
    {
        "content": "<p>Should I just delete it?  I still would like to use <code>ssh</code> to log into git (and I thought that this was required since a few months).</p>",
        "id": 477834032,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729367988
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span>  Is there a way that I can test the fix that you mention above?</p>",
        "id": 477834288,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729368197
    },
    {
        "content": "<p>I would consider that quite a risky option, yeah. You can always change the remote in individual repositories, I believe</p>",
        "id": 477834784,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729368712
    },
    {
        "content": "<p>Ruben, the \"risky option\" is using <code>https</code>, right?</p>",
        "id": 477834848,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729368753
    },
    {
        "content": "<p>Besides, before changing anything in my configuration, I think that trying out the fix proposed above could be a good test for it.</p>",
        "id": 477834894,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729368802
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> A global URL override like this is quite disruptive. I think the standard pratice is to set  SSH urls on the indivudal repository remotes you plan to push to. However, should you not wish to change your practice, the ProofWidgets patch will hopefully fix this.</p>",
        "id": 477846371,
        "sender_full_name": "Mac Malone",
        "timestamp": 1729380013
    },
    {
        "content": "<p>To beta test the fix, you could manually apply the <code>releaseRepo :=</code> patch to your current <code>.lake/packages/proofwidgets/lakefile.lean</code>.</p>",
        "id": 477846484,
        "sender_full_name": "Mac Malone",
        "timestamp": 1729380148
    },
    {
        "content": "<p>The URL fix is merged now in <code>v0.0.44-pre2</code>. The proper <code>v0.0.44</code> release should come out when mathlib moves over to the next Lean version.</p>",
        "id": 477858387,
        "sender_full_name": "𝚠𝚘𝚓𝚌𝚒𝚎𝚌𝚑 𝚗𝚊𝚠𝚛𝚘𝚌𝚔𝚒",
        "timestamp": 1729391902
    },
    {
        "content": "<p>I scanned the <code>.lake/packages/proofwidgets/lakefile.lean</code> file and I could not find <code>releaseRepo :=</code> in it, so I give up trying to check whether the fix works on my computer.</p>",
        "id": 477863938,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729397649
    },
    {
        "content": "<p>Unsetting the global git option does fix the build, though!</p>",
        "id": 477864891,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729398649
    },
    {
        "content": "<p>Thanks for your help debugging this!</p>",
        "id": 477864899,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729398659
    },
    {
        "content": "<p>Now I'm getting the same error.</p>",
        "id": 480000826,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1730440455
    },
    {
        "content": "<p>I've temporarily installed <code>npm</code> but this is probably not the right way to go.</p>",
        "id": 480001506,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1730440924
    },
    {
        "content": "<p>I'm using ProofWidgets v0.0.43</p>",
        "id": 480001551,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1730440959
    },
    {
        "content": "<p>I have <code>*insteadOf</code> in my git config but disabling them didn't work (and I override towards <code>https</code>, not <code>ssh</code>).</p>",
        "id": 480001591,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1730440991
    },
    {
        "content": "<p>I just advanced the Mathlib toolchain from <code>v4.13.0-rc3</code> to <code>v4.13.0</code>. <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span> ?!?</p>",
        "id": 480005805,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730444275
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> I think this is just because Mac's fixes to the PW4 lakefile are included in 0.0.44, but mathlib is still on 0.0.43.</p>",
        "id": 480078816,
        "sender_full_name": "𝚠𝚘𝚓𝚌𝚒𝚎𝚌𝚑 𝚗𝚊𝚠𝚛𝚘𝚌𝚔𝚒",
        "timestamp": 1730477888
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/cache.20and.20proofwidgets/near/480000826\">said</a>:</p>\n<blockquote>\n<p>Now I'm getting the same error.</p>\n</blockquote>\n<p>What do you mean by \"the same error\"? The SSH one? Or simply the original \"failed to fetch\" error?</p>",
        "id": 480080632,
        "sender_full_name": "Mac Malone",
        "timestamp": 1730478576
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/18529\">#18529</a> should fix this.</p>",
        "id": 480080856,
        "sender_full_name": "𝚠𝚘𝚓𝚌𝚒𝚎𝚌𝚑 𝚗𝚊𝚠𝚛𝚘𝚌𝚔𝚒",
        "timestamp": 1730478652
    },
    {
        "content": "<p>I was getting the \"<code>npm</code> not found\" error.</p>",
        "id": 480088276,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1730481444
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/cache.20and.20proofwidgets/near/480088276\">said</a>:</p>\n<blockquote>\n<p>I was getting the \"<code>npm</code> not found\" error.</p>\n</blockquote>\n<p>Hmm, that's different, but it does arise as a consequence of the cloud release failing to fetch, so hopefully fixing that should fix it for you.</p>",
        "id": 480105874,
        "sender_full_name": "𝚠𝚘𝚓𝚌𝚒𝚎𝚌𝚑 𝚗𝚊𝚠𝚛𝚘𝚌𝚔𝚒",
        "timestamp": 1730489189
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"128280\">Wojciech Nawrocki</span> <a href=\"#narrow/channel/287929-mathlib4/topic/cache.20and.20proofwidgets/near/480080856\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/18529\">#18529</a> should fix this.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span>, should the <code>v4.13.0</code> tag in mathlib be moved to point here?</p>",
        "id": 480118432,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1730495302
    },
    {
        "content": "<p>I am also getting the error \"could not execute external process 'npm'\", when building an external project on v4.13.0. I can't figure out from the above messages what the fix is (or if one exists?)</p>",
        "id": 480434336,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1730723786
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/cache.20and.20proofwidgets/near/480118432\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"128280\">Wojciech Nawrocki</span> <a href=\"#narrow/channel/287929-mathlib4/topic/cache.20and.20proofwidgets/near/480080856\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/18529\">#18529</a> should fix this.</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span>, should the <code>v4.13.0</code> tag in mathlib be moved to point here?</p>\n</blockquote>\n<p>Sorry, missed this earlier. I've updated the tag now.</p>",
        "id": 480553740,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730767887
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span>, if you can point your external project to the new <code>v4.13.0</code> tag on Mathlib (or later), and let us know if that fixes things for you?</p>",
        "id": 480553768,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730767911
    },
    {
        "content": "<p>Seems to work, thanks!</p>",
        "id": 480556730,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1730769895
    },
    {
        "content": "<p>I am also getting this issue suddenly for no particular reason...</p>",
        "id": 481164493,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1730999304
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"330967\">@Wrenna Robson</span>, could you give some more details? Which project/commit? Is it something reproducible we can look at?</p>",
        "id": 481202560,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731014772
    },
    {
        "content": "<p>And also, does the fix suggested above by Kim work for you too?</p>",
        "id": 481202635,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1731014813
    },
    {
        "content": "<p>I am afraid I don't know how to reproduce it, but nuking my .lake worked.</p>",
        "id": 481208507,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1731017703
    },
    {
        "content": "<p>Just to report that I saw this happen again when helping a Lean-beginner - they were on a project on v4.14.0-rc2, and the same npm error happened. get cache + clean + get cache is what caused it, then nuking .lake and doing clean + get cache fixed it. Unfortunately I don't quite know how to reproduce it, but recording this in case others get it too.</p>",
        "id": 481843964,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1731375370
    },
    {
        "content": "<p>(Helpful with reports like this to include the SHA of \"current master\".)</p>",
        "id": 481910195,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731406575
    },
    {
        "content": "<p>(In the case I mentioned it was aef008c6189004dead2c9ab604463667f2003202)</p>",
        "id": 481910396,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1731406637
    },
    {
        "content": "<p>Parallel discussion: <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/CI.20building.20ProofWidgets.20every.20time\">#mathlib4 &gt; CI building ProofWidgets every time</a></p>",
        "id": 481914981,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1731408060
    },
    {
        "content": "<p>Is that the same issue as this one? I don't see mention of \"<code>npm</code> not found\" errors there</p>",
        "id": 481927146,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1731411908
    },
    {
        "content": "<p>A message was moved from this topic to <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/CI.20building.20ProofWidgets.20oleans.20every.20time\">#mathlib4 &gt; CI building ProofWidgets oleans every time</a> by <span class=\"user-mention silent\" data-user-id=\"110024\">Sebastian Ullrich</span>.</p>",
        "id": 481932739,
        "sender_full_name": "Notification Bot",
        "timestamp": 1731413676
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246273\">Bhavik Mehta</span> <a href=\"#narrow/channel/287929-mathlib4/topic/cache.20rebuilding.20proofwidgets.20JS/near/481927146\">said</a>:</p>\n<blockquote>\n<p>Is that the same issue as this one? I don't see mention of \"<code>npm</code> not found\" errors there</p>\n</blockquote>\n<p>Okay, I think I've now split the two threads by that distinction</p>",
        "id": 481933144,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1731413787
    },
    {
        "content": "<p>I have this \"npm not found\" ProofWidgets error on my mathlib currently.  Is there a known fix yet?</p>",
        "id": 484010930,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1732320158
    },
    {
        "content": "<p>When this happened to me it meant I had no network connection</p>",
        "id": 484011187,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732320318
    },
    {
        "content": "<p>The logic is something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">try</span>\n<span class=\"w\">  </span><span class=\"n\">fetchFromTheWeb</span>\n<span class=\"n\">catch</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"n\">tryRunningNPM</span>\n</code></pre></div>",
        "id": 484011228,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732320345
    },
    {
        "content": "<p>Hmm, but I am connected to the internet!</p>",
        "id": 484011336,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1732320386
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"246273\">Bhavik Mehta</span> <a href=\"#narrow/channel/287929-mathlib4/topic/cache.20rebuilding.20proofwidgets.20JS/near/481843964\">said</a>:</p>\n<blockquote>\n<p>nuking .lake and doing clean + get cache fixed it. </p>\n</blockquote>\n<p>Is this the current recommended fix?</p>",
        "id": 484011452,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1732320473
    },
    {
        "content": "<p>OK, I just did that and it worked.  (Seems like it would be useful to have a <code>lake</code> command <code>lake really-clean</code> which nukes .lake, is that on the roadmap?)</p>",
        "id": 484011767,
        "sender_full_name": "Heather Macbeth",
        "timestamp": 1732320649
    },
    {
        "content": "<p>Pinging <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span>. :-)</p>",
        "id": 484057024,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1732361442
    },
    {
        "content": "<p>Does the fact that fully removing <code>.lake</code> fixes some of these issues indicate unsound (i.e., happens but should not happen) caching?</p>",
        "id": 484090013,
        "sender_full_name": "𝚠𝚘𝚓𝚌𝚒𝚎𝚌𝚑 𝚗𝚊𝚠𝚛𝚘𝚌𝚔𝚒",
        "timestamp": 1732390498
    },
    {
        "content": "<p>We are hoping that <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span>'s <a href=\"https://github.com/leanprover-community/mathlib4/pull/19728\">#19728</a> (just sent to bors) resolves the problem.</p>",
        "id": 486195600,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733354367
    }
]