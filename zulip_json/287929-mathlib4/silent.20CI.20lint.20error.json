[
    {
        "content": "<p>in <a href=\"https://github.com/leanprover-community/mathlib4/actions/runs/10126311030/job/28002812448#step:5:21\">this pipeline</a>, the step throws an error but succeeds anyway?</p>",
        "id": 454527007,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1722113553
    },
    {
        "content": "<p>that's not intended, right?</p>",
        "id": 454527049,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1722113616
    },
    {
        "content": "<p>No, that is definitely not intended!</p>",
        "id": 454679193,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722209420
    },
    {
        "content": "<p>The reason it continues is probably this line</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/master/.github%2Fworkflows%2Flint_and_suggest_pr.yml#L25\">https://github.com/leanprover-community/mathlib4/blob/master/.github%2Fworkflows%2Flint_and_suggest_pr.yml#L25</a></p>\n<p>It is probably intended that the linting continues, but there is probably a missing final step that catches all failures.</p>\n<p>The reason this step fails, though, is likely that <code>lake</code> is not installed, so a previous CI step in this workflow should make it available.</p>",
        "id": 454687988,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722214529
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span>, would you be able to look into making sure <code>lake</code> is installed there?</p>",
        "id": 454691175,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722216322
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/15250\">#15250</a></p>",
        "id": 454701600,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722222012
    },
    {
        "content": "<p>As always, CI is very tricky!  This step must have never worked: I checked one of my latest PRs and indeed it was failing.  It does not fail on the PR linked above.</p>",
        "id": 454701732,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722222099
    },
    {
        "content": "<p>It seems that the same battery of tests is also run on CI and after <code>elan</code>/<code>lake</code> is installed, so there were no missed linting, just missed suggestions, I think.</p>",
        "id": 454701847,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722222148
    },
    {
        "content": "<p>While we are at it, I also enabled <code>reviewdog</code> to suggest missing imports.  I did it in the same PR, since it was just a one -line addition to CI.</p>",
        "id": 454710172,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722225425
    },
    {
        "content": "<p>The way in which it works is that the <code>continue-on-error: true</code> step allows the following <code>reviewdog</code> step to apply the suggestions of the previous step.  Thus, there is no need to add a later check catching these failures, since reviewdog will comment on the PR.</p>\n<p>I added a comment to the <code>continue-on-error: true</code> steps.</p>",
        "id": 454712400,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722226097
    },
    {
        "content": "<p>Thanks so much!</p>",
        "id": 454720792,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722228362
    }
]