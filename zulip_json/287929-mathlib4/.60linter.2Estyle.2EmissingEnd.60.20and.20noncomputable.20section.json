[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">Linter</span><span class=\"bp\">.</span><span class=\"n\">Style</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">style</span><span class=\"bp\">.</span><span class=\"n\">missingEnd</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"c1\">-- no complaints</span>\n<span class=\"c1\">-- (End of file)</span>\n</code></pre></div>\n<p>Is this intended?</p>",
        "id": 532259634,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1754038403
    },
    {
        "content": "<p>Yes, it was: this is an explicit exception in the linter.</p>",
        "id": 532260311,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754038603
    },
    {
        "content": "<p>(Let me investigate why...)</p>",
        "id": 532260337,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754038612
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14378\">#14378</a> added the linter</p>",
        "id": 532260496,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754038674
    },
    {
        "content": "<p>I would imagine this is to avoid having extra <code>end</code> at the end of every file when we just want to make everything in the file noncomputable?</p>",
        "id": 532260619,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1754038713
    },
    {
        "content": "<p>See <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/linting.20for.20unclosed.20sections.3F/with/451487929\">#mathlib4 &gt; linting for unclosed sections?</a>  for the zulip discussion of the linter (where the consensus to not lint this case emerged).</p>",
        "id": 532261221,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754038906
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"286014\">Robin Carlier</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60linter.2Estyle.2EmissingEnd.60.20and.20noncomputable.20section/near/532260619\">said</a>:</p>\n<blockquote>\n<p>I would imagine this is to avoid having extra <code>end</code> at the end of every file when we just want to make everything in the file noncomputable?</p>\n</blockquote>\n<p>My impression from the zulip thread was that this was mostly not linted for convenience (not having to fix another 700 files in mathlib).</p>",
        "id": 532261321,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754038934
    },
    {
        "content": "<p>In other words, it <em>could</em> be changed.</p>",
        "id": 532261344,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754038941
    },
    {
        "content": "<p>Is there a particular reason you'd <em>like</em> this change, or were you just surprised and wanted to clarify this is not a new bug?</p>",
        "id": 532261444,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1754038966
    },
    {
        "content": "<p>The latter: I ran into it, got surprised, and thought that was unintended behavior.<br>\n(More precisely, I tried to remove a \"noncomputable\" before a section, and suddenly a linter warning popped, which I thought was weird).</p>",
        "id": 532261635,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1754039016
    },
    {
        "content": "<p>I don't think this would be a good change. In Lean 3 we had <code>noncomputable theory</code> which had no end delimiter, and that was great. In Lean 4, we still have <code>open Classical</code> which doesn't an end delimiter either.</p>",
        "id": 532262219,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754039209
    },
    {
        "content": "<p>The fact that <code>noncomputable theory</code> became <code>noncomputable section</code> and therefore acquired an end delimiter is, to me, an implementation detail</p>",
        "id": 532262335,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754039249
    },
    {
        "content": "<p>I understand and I have no strong opinion on this, except that it sounds like confusion for free that <code>noncomputable section</code> does not really follow the rules of regular sections. I get that it makes historical sense, though keep in mind not everyone knows history, and this won’t stop people being randomly tripped up.</p>",
        "id": 532263499,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1754039610
    },
    {
        "content": "<p>I still feel that we should change back <code>noncomputable section</code> to a no-end-delimiter command, but I don't know if I would get support from core...</p>",
        "id": 532264034,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1754039783
    },
    {
        "content": "<p>Core is very much moving in the opposite direction; with the module system, there will be things like <code>public section</code>, <code>@[expose] section</code> and if you like even <code>@[expose] public noncomputable section</code>.</p>",
        "id": 532264617,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1754039996
    },
    {
        "content": "<p>This is primarily intended as a porting help however and there will likely be code actions to eliminate them gradually</p>",
        "id": 532280546,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1754045790
    }
]