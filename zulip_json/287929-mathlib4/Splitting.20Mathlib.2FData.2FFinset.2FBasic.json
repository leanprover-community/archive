[
    {
        "content": "<p>The addition of a 4-line lemma in <code>Mathlib/Data/Finset/Basic.lean</code>, see <a href=\"https://github.com/leanprover-community/mathlib4/pull/17046\">#17046</a>, made it be 2 lines longer than the 3100 line limit. So either I change the counter at the end, or I try to split it, but it is not clear to me how to do it in a reasonable way (beyond putting roughly each section into a different file).</p>",
        "id": 473745973,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1727705583
    },
    {
        "content": "<p>The counter is there to be changed <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 473746396,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727705672
    },
    {
        "content": "<p>So let me put it at 314159 lines and everybody will be happy for some time.</p>",
        "id": 473746566,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1727705706
    },
    {
        "content": "<p>Add 200, please</p>",
        "id": 473761574,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1727708398
    },
    {
        "content": "<p>And with a bit of luck Yaël will deal with it <span aria-label=\"innocent\" class=\"emoji emoji-1f607\" role=\"img\" title=\"innocent\">:innocent:</span></p>",
        "id": 473761885,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1727708437
    },
    {
        "content": "<p>The design should be that you cannot choose what the value is, automation will tell you what to use.  If that is not the case, then it is a bug in the linter.</p>",
        "id": 473827436,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727722817
    },
    {
        "content": "<p>The linter had indeed a bug that would not check that the increase in the limit was \"small\".  I fixed this, as well as a few other hanging issues with the linter:</p>\n<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/17311\">#17311</a>, isolates the tests for the <code>longFile</code> to a separate file (probably completely uncontroversial);</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/17312\">#17312</a>, introduces the default value for file lengths, rather than hardcoding the 1500 limit (previously discussed on <a href=\"#narrow/stream/270676-lean4/topic/Retrieving.20.60weak.60.20options/near/468301685\">Zulip</a>, probably also uncontroversial, though maybe less so than the previous one);</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/17309\">#17309</a> combining the previous changes and revising the logic to really fix the issue at hand.</li>\n</ul>",
        "id": 473875805,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727735766
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/17311\">#17311</a> <img alt=\":merge:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/37577b95.png\" title=\"merge\"> <br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/17312\">#17312</a> <span aria-label=\"writing\" class=\"emoji emoji-270d\" role=\"img\" title=\"writing\">:writing:</span></p>",
        "id": 474040895,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727789987
    },
    {
        "content": "<p>Thanks Johan, for the merge and the suggestion!</p>",
        "id": 474041262,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727790072
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/17312\">#17312</a> <img alt=\":merge:\" class=\"emoji\" src=\"https://avatars.zulip.com/3121/emoji/images/37577b95.png\" title=\"merge\"></p>",
        "id": 474041733,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727790187
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/17309\">#17309</a> is now available: it implements the correct behaviour, I hope.</p>\n<p>Although it is labeled as <code>t-linter</code>, there is nothing meta to the PR, just a tricky sequence of <code>if ... then... else</code> that is supposed to</p>\n<ul>\n<li>disallow setting the linter value to a quantity less than or equal to the default,</li>\n<li>disallow setting the linter value, if the length is at most the default,</li>\n<li>suggest the second multiple of 100 larger than the file length, if needed;</li>\n<li>allow also the first multiple of 100 larger than the file length.</li>\n</ul>",
        "id": 474075835,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727799823
    },
    {
        "content": "<p>I find the tests and catching an issue in current master very encouraging.  The testing has been <em>much</em> improved by moving <code>longFile</code> to a separate file and the customizable option.</p>",
        "id": 474076108,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1727799933
    },
    {
        "content": "<p>I just left a few comments. I would encourage another follow-up, auditing all occurrences of the magic number 1500 :-) and will be happy to review that quickly.<br>\nAnd I would suggest <em>even more</em> tests for that linter. The logic is subtle enough; having close to complete test coverage actually seems useful here.</p>",
        "id": 474391107,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727900864
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Splitting.20Mathlib.2FData.2FFinset.2FBasic/near/474075835\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/17309\">#17309</a> is now available: it implements the correct behaviour, I hope.</p>\n<p>Although it is labeled as <code>t-linter</code>, there is nothing meta to the PR, just a tricky sequence of <code>if ... then... else</code> that is supposed to</p>\n<ul>\n<li>disallow setting the linter value to a quantity less than or equal to the default,</li>\n<li>disallow setting the linter value, if the length is at most the default,</li>\n<li>suggest the second multiple of 100 larger than the file length, if needed;</li>\n<li>allow also the first multiple of 100 larger than the file length.</li>\n</ul>\n</blockquote>\n<p>and I should add: complain if the user set an option that is \"unnecessarily\" high (or not needed at all)</p>",
        "id": 474391232,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727900912
    }
]