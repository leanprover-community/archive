[
    {
        "content": "<p>I can't believe we're missing these -- am I just not looking in the wrong place? (I guess they all work for monoids too)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- do we not have this?</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">u</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"bp\">À£</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"bp\">‚Åª¬π</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">À£</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"n\">val_inv</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">inv_val</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n\n<span class=\"c1\">-- do we not have these?</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\">  </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\">  </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>While I'm here, which of these should I be using in a \"prod\" lemma?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">NNReal</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"bp\">‚â•</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- a thing (under extra assumptions)</span>\n\n<span class=\"c1\">-- which should be ringHaarChar_prod? Or should I have both?</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">ringHaarChar_prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">ringHaarChar_prod'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">uv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"n\">uv</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"n\">uv</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"n\">uv</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 518849375,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747511273
    },
    {
        "content": "<p>Aah, found it: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MulEquiv.prodUnits#doc\">docs#MulEquiv.prodUnits</a></p>",
        "id": 518849864,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747511671
    },
    {
        "content": "<p>So I'm supposed to write this?!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulEquiv</span><span class=\"bp\">.</span><span class=\"n\">prodUnits</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">uv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"n\">uv</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulEquiv</span><span class=\"bp\">.</span><span class=\"n\">prodUnits</span><span class=\"w\"> </span><span class=\"n\">uv</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">ringHaarChar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MulEquiv</span><span class=\"bp\">.</span><span class=\"n\">prodUnits</span><span class=\"w\"> </span><span class=\"n\">uv</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>My versions look more beautiful! Do we want my suggestions?</p>",
        "id": 518850208,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747511981
    },
    {
        "content": "<p>I do think this looks like useful API.</p>",
        "id": 519814596,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747914634
    },
    {
        "content": "<p>Though I think you'd want them as MulHoms, no?</p>",
        "id": 519816213,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747915198
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">simps!?</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 519816270,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747915204
    },
    {
        "content": "<p>This kind of thing</p>",
        "id": 519816278,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747915208
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">toHomUnits</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">prodMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">coeHom</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">coeHom</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">))</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 519817087,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747915468
    },
    {
        "content": "<p>Think it's this if I've got the right library functions. Let me write out the simp lemmas (<code>simps</code> doesn't seem to make something nice, kinda chokes on <code>Prod.map</code> it seems, which feels a bit like a deficiency in <code>Prod.map_apply</code> but anyway).</p>",
        "id": 519817274,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747915527
    },
    {
        "content": "<p>I suspect what Kevin is observing is a common pattern across a lot of API; that we declare some heavily bundled equivalence, and don't bother trying to write definitions for all the separate pieces (especially if those pieces don't hold in any greater generality.</p>",
        "id": 519818300,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747915813
    },
    {
        "content": "<p>Arguably this is a deliberate decision; it reduces the amount of API we have to maintain, and the number of lemmas we have to write that just duplicate API about the equivalence</p>",
        "id": 519818384,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747915846
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">Units</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Monoid</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">]</span>\n\n<span class=\"sd\">/-- A map from the product of the units of two monoids to the units of their product. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"s2\">\"A map from the product of the additive units of two</span>\n<span class=\"s2\">    additive monoids to the additive units of their product.\"</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">toHomUnits</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">prodMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">coeHom</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">coeHom</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">))</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">attr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">val_prod_apply</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">val_prod_apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">.</span><span class=\"n\">val</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">attr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">val_inv_prod_apply</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">val_inv_prod_apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"bp\">‚Åª¬π.</span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"bp\">‚Åª¬π.</span><span class=\"n\">val</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"bp\">‚Åª¬π.</span><span class=\"n\">val</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"sd\">/-- The first element of the units of the product of two monoids. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">attr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">simps!</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"The first element of the additive units of the</span>\n<span class=\"s2\">  product of two additive monoids.\"</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- The second element of the units of the product of two monoids. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">attr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">simps!</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"The second element of the additive units of the</span>\n<span class=\"s2\">  product of two additive monoids.\"</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">attr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">fst_prod</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">fst_prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">attr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">snd_prod</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">snd_prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">attr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">prod_fst_snd</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">prod_fst_snd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">Units</span>\n</code></pre></div>",
        "id": 519822768,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747917109
    },
    {
        "content": "<p>Something like this I think.</p>",
        "id": 519822790,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747917118
    },
    {
        "content": "<p>Unless there's any obvious comments I'll make a PR.</p>",
        "id": 519822912,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747917148
    },
    {
        "content": "<p>Do you also want to have the reverse, the inl and inr, given that products and coproducts are the same here?</p>",
        "id": 519823695,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747917366
    },
    {
        "content": "<p>Oh that's a good point</p>",
        "id": 519825096,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747917764
    },
    {
        "content": "<p>And presumably they have some relation to fst and snd?</p>",
        "id": 519825205,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747917791
    },
    {
        "content": "<p>Yeah, <code>fst (inl u N)</code> is going to be <code>u</code>, <code>snd (inl u N)</code> is going to be 1, etc.</p>",
        "id": 519826123,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747918049
    },
    {
        "content": "<p>Weirdly we seem to have (for MonoidHom, not units), <code>fst_comp_inl</code> rather than <code>fst_inl</code> as I might expect, i.e. it is the same theorem but not applied.</p>",
        "id": 519826282,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918087
    },
    {
        "content": "<p>Which seems a bit off-style but maybe not here? Which do you think is better?</p>",
        "id": 519826319,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918099
    },
    {
        "content": "<p>Well, it's a lemma about composition of monoid homs which gives another monoid hom, either <code>id</code> or <code>1</code>.</p>",
        "id": 519826405,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747918129
    },
    {
        "content": "<p>True, true.</p>",
        "id": 519826436,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918140
    },
    {
        "content": "<p>Here I could do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">fst_comp_inl</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fst</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"bp\">```</span>\n<span class=\"n\">or</span>\n<span class=\"bp\">```</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">fst_inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"bp\">```</span>\n</code></pre></div>",
        "id": 519826563,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918182
    },
    {
        "content": "<p>(Related PR of mine, <a href=\"https://github.com/leanprover-community/mathlib4/pull/22420\">#22420</a>), just haven't had time to actually sit down and tidy it, nor do the plain GroupWithZero homs.</p>",
        "id": 519826738,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747918221
    },
    {
        "content": "<p>I feel like the latter feels better here.</p>",
        "id": 519826756,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918226
    },
    {
        "content": "<p>You could have both.</p>",
        "id": 519826796,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747918238
    },
    {
        "content": "<p>True, just sort of feel I want it for MonoidHom as well. But I guess reviewers can decide that.</p>",
        "id": 519826870,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918260
    },
    {
        "content": "<p>Is there an associated equiv? It feels like no?</p>",
        "id": 519827797,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918498
    },
    {
        "content": "<p>Which would be the equiv here?</p>",
        "id": 519827975,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747918549
    },
    {
        "content": "<p>The equiv is already <code>Units.prod</code>.</p>",
        "id": 519828069,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747918567
    },
    {
        "content": "<p>iiuc</p>",
        "id": 519828134,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747918588
    },
    {
        "content": "<p>Sorry, what I meant was the existing <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MulEquiv.prodUnits#doc\">docs#MulEquiv.prodUnits</a></p>",
        "id": 519828272,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747918628
    },
    {
        "content": "<p>I meant apart from that.</p>",
        "id": 519828341,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918650
    },
    {
        "content": "<p>so <code>Units.prod := MulEquiv.prodUnits.symm.toMonoidHom</code></p>",
        "id": 519828401,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747918665
    },
    {
        "content": "<p>But I think an equiv version is already enough?</p>",
        "id": 519828608,
        "sender_full_name": "Jz Pan",
        "timestamp": 1747918713
    },
    {
        "content": "<p>Seems that it does not have simp lemmas (together with a lot of things in that file).</p>",
        "id": 519828903,
        "sender_full_name": "Jz Pan",
        "timestamp": 1747918793
    },
    {
        "content": "<p>Yes, as Kevin noted originally, but what he was asking for was something more ergonomic to use API-wise.</p>",
        "id": 519829245,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918868
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/25112\">#25112</a></p>",
        "id": 519829626,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918947
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> especially would like your opinion on this give you were asking for it.</p>",
        "id": 519829701,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747918971
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"366779\">@Jz Pan</span> What Kevin was saying here was that he could do it but that API would make it more beautiful (I agree). <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/Units.2Eprod.2C.20Units.2Efst.2C.20Units.2Esnd/near/518850208\">#mathlib4 &gt; Units.prod, Units.fst, Units.snd @ üí¨</a></p>",
        "id": 519830047,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747919057
    },
    {
        "content": "<p>I am swayed by Eric's </p>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Units.2Eprod.2C.20Units.2Efst.2C.20Units.2Esnd/near/519818384\">said</a>:</p>\n<blockquote>\n<p>Arguably this is a deliberate decision; it reduces the amount of API we have to maintain, and the number of lemmas we have to write that just duplicate API about the equivalence</p>\n</blockquote>\n<p>message enough to make me wonder whether we should just stick to what we have.</p>",
        "id": 519843027,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747922309
    },
    {
        "content": "<p>I personally think it's worth it - having just been editing one of the only places it's used, having these defined was extremely nice.</p>",
        "id": 519843342,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747922397
    },
    {
        "content": "<p>Arguably I suppose whether you define the equivalence first and then create synonyms of its projections.</p>",
        "id": 519843501,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747922430
    },
    {
        "content": "<p>But then we wouldn't have the <code>inl</code> and <code>inr</code> as noted above.</p>",
        "id": 519844048,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747922560
    },
    {
        "content": "<p>The equivalence now becomes<br>\n<code>def prodUnits : (M √ó N)À£ ‚âÉ* MÀ£ √ó NÀ£ := (fst.prod snd).toMulEquiv prod rfl rfl</code></p>",
        "id": 519844264,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747922614
    },
    {
        "content": "<p>Wheras the non-predefined version would look like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">prodUnits</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚âÉ*</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">((</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)))</span><span class=\"bp\">.</span><span class=\"n\">toMulEquiv</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">toHomUnits</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">prodMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">coeHom</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">coeHom</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 519844509,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747922669
    },
    {
        "content": "<p>Well, you can compress that to</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">prodUnits</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚âÉ*</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">((</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)))</span><span class=\"bp\">.</span><span class=\"n\">toMulEquiv</span>\n<span class=\"w\">  </span><span class=\"o\">((</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">coeHom</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">prodMap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Units</span><span class=\"bp\">.</span><span class=\"n\">coeHom</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">toHomUnits</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 519845033,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747922798
    },
    {
        "content": "<p>I mean I don't disagree and that's sort of nicer but it isn't very readable. Either way I think giving names to the projections is good.</p>",
        "id": 519845190,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747922848
    },
    {
        "content": "<p>I think that's a nicer definition that the current definition, but I don't think it's a good idea to define <code>Units.snd</code> as <code>Units.map (.snd _ _)</code></p>",
        "id": 519845239,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747922863
    },
    {
        "content": "<p>Do we really want to define a (<code>fst</code>, <code>snd</code>, <code>proj</code>, ...) for every type that defines a <code>map</code>?</p>",
        "id": 519845277,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747922875
    },
    {
        "content": "<p>Units one could argue is often a bit clunkier without extra API (or so I have found in the past).</p>",
        "id": 519845460,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747922912
    },
    {
        "content": "<p>Any more so than <code>ULift</code> or <code>MulOpposite</code> or <code>QuotientGroup</code> or ... ?</p>",
        "id": 519845564,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747922942
    },
    {
        "content": "<p>No, fair.</p>",
        "id": 519845598,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747922951
    },
    {
        "content": "<p>If one could automate it I'd say do that.</p>",
        "id": 519845641,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747922959
    },
    {
        "content": "<p>Even then, the user still has to decide whether to unfold <code>Units.fst</code> to work with theorems about <code>map</code></p>",
        "id": 519845747,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747922984
    },
    {
        "content": "<p>True, though I would say \"ideally not\" if you write the API well enough.</p>",
        "id": 519845880,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923013
    },
    {
        "content": "<p>So do you copy the entire API around map too? <code>fst.comp (map f) = map (f \\comp fst)</code>, <code>(map f).comp fst = map (fst \\comp f)</code>, ...?</p>",
        "id": 519846048,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747923062
    },
    {
        "content": "<p><del>(maybe this is a straw man because <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Units.map#doc\">docs#Units.map</a> has no API to begin with...)</del></p>",
        "id": 519846184,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747923103
    },
    {
        "content": "<p>Well it has a little... but yeah. IDK!</p>",
        "id": 519846310,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923127
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"n\">prodUnits</span><span class=\"bp\">.</span><span class=\"n\">toMonoidHom</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">‚Üí*</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"n\">prodUnits</span><span class=\"bp\">.</span><span class=\"n\">toMonoidHom</span>\n</code></pre></div>",
        "id": 519846410,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923156
    },
    {
        "content": "<p>So if you did use the nice definition above, this is what defining them in terms of projections would mean.</p>",
        "id": 519846475,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923175
    },
    {
        "content": "<p>Don't have a nice definition of <code>inl</code> and <code>inr</code>, of course.</p>",
        "id": 519846521,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923189
    },
    {
        "content": "<p>Obviously you then also have<br>\n<code>def prod : MÀ£ √ó NÀ£ ‚Üí* (M √ó N)À£ := prodUnits.symm.toMonoidHom</code></p>",
        "id": 519846614,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923224
    },
    {
        "content": "<p>Oh the other nice thing about having <code>Units.fst</code> and <code>Units.snd</code> is that you can use projection notation: <code>u.fst</code> etc.</p>",
        "id": 519846981,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923327
    },
    {
        "content": "<p>Hrrm.</p>",
        "id": 519848242,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923661
    },
    {
        "content": "<p>I have what looks like a diamond issue here.</p>",
        "id": 519848327,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923683
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">coprod_inl_inr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MonoidHom</span><span class=\"bp\">.</span><span class=\"n\">coprod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"n\">prodUnits</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">.</span><span class=\"n\">toMonoidHom</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 519848334,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923686
    },
    {
        "content": "<p>Error:</p>",
        "id": 519848354,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923691
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">mismatch</span>\n<span class=\"w\">  </span><span class=\"n\">prodUnits</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">.</span><span class=\"n\">toMonoidHom</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"bp\">@</span><span class=\"n\">MonoidHom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">55835</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">55836</span><span class=\"bp\">À£</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">55835</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">55836</span><span class=\"o\">)</span><span class=\"bp\">À£</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">instMulOneClass</span>\n<span class=\"w\">    </span><span class=\"n\">instMulOneClass</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"m\">55833</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"m\">55834</span><span class=\"o\">)</span>\n<span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"bp\">@</span><span class=\"n\">MonoidHom</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">53414</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">53415</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">53416</span><span class=\"w\"> </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">instMulOneClass</span>\n<span class=\"w\">    </span><span class=\"n\">Monoid</span><span class=\"bp\">.</span><span class=\"n\">toMulOneClass</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"m\">53412</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"m\">53413</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"m\">53411</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 519848369,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923696
    },
    {
        "content": "<p>Oh it might be because I don't have CommMonoid...</p>",
        "id": 519848811,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923801
    },
    {
        "content": "<p>This may not even be true. Anyway!</p>",
        "id": 519849392,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747923942
    },
    {
        "content": "<p>Basically in general this is: if  you have<code>prodEquiv : T (M √ó N) ‚âÉ T M √ó T N</code>,  maybe with some extra structure preservation, then do you want the projection <code>T (M √ó N) -&gt; T M</code> to be called <code>fst</code>?</p>",
        "id": 519850404,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747924202
    },
    {
        "content": "<p>(Where <code>T</code>, I guess, is some operator like <code>Units</code>, <code>AddOpposite</code>, etc.)</p>",
        "id": 519850617,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747924246
    },
    {
        "content": "<p>(and add <code>snd</code>, <code>prod</code>, etc., to taste).</p>",
        "id": 519850804,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747924285
    },
    {
        "content": "<p>What if T is the composition of two operators?</p>",
        "id": 519851092,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747924351
    },
    {
        "content": "<p>Then you don't, I guess.</p>",
        "id": 519851170,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747924368
    },
    {
        "content": "<p>I think there's a tension here between usability and maintenace burden that I don't feel qualified to opine on.</p>",
        "id": 519851290,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747924395
    },
    {
        "content": "<p>But I think the neater definition of the equiv (and moving its namespace) at the very least are good ideas.</p>",
        "id": 519853213,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747924833
    },
    {
        "content": "<p>Eric, are you asking, basically, how much should we lemma-tize functoriality?</p>",
        "id": 519859274,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747926330
    },
    {
        "content": "<p>I think I'm more generally advocating against breaking a big bundled object into smaller ones, unless the object is heavily used (eg the work to do precisely this for <code>WithLp.equiv</code>)</p>",
        "id": 519860159,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747926574
    },
    {
        "content": "<p>I think I am quite pro- breaking up when convenient but I take your point about needing a consistent approach. I do instinctively feel Units is Notably A Pain but I can't entirely justify this.</p>",
        "id": 519860602,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1747926683
    },
    {
        "content": "<p>If one approaches it from the \"functorial\" perspective, how does one show that the functor <code>Units</code> from <code>CommMon_</code> to <code>CommGrp_</code> preserves (co)products? Wouldn't one have to provide the homs here as witnesses?</p>",
        "id": 519862696,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1747927234
    },
    {
        "content": "<p>I think I find that fairly compelling. As an aside (but related): <a href=\"http://Units.map\">Units.map</a> could do with better API. Honestly I think if it had it that might actually render this somewhat redundant. Similarly I have to say I don't see why <code>Prod.map_apply'</code> is not in the simp set but <code>Prod.map_apply</code> is.</p>",
        "id": 520046879,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1748004615
    },
    {
        "content": "<p>I am going to look at a PR for <code>Units.map</code> improvements.</p>",
        "id": 520047092,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1748004701
    },
    {
        "content": "<p>PRs adding new theorems for existing definitions are generally much easier to review than PRs adding new definitions :)</p>",
        "id": 520049152,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748005346
    },
    {
        "content": "<p>Indeed!</p>",
        "id": 520056357,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1748007481
    },
    {
        "content": "<p>Alright, I think in the end I can't see a nicer way of defining <code>Units.map</code> unless one were to use, say, <code>Invertible</code>, which doesn't seem to be the general style.</p>",
        "id": 520659034,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1748349768
    },
    {
        "content": "<p>And I am finding that <code>fst</code>, <code>snd</code>, etc. have utility - they are just <em>nice</em>, it is good to get access to these constructions easily.</p>",
        "id": 520659132,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1748349804
    },
    {
        "content": "<p>I do note that we seem to lack <code>Invertible.prod</code>.</p>",
        "id": 520659764,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1748349980
    },
    {
        "content": "<p>Oh: <code>idealProdEquiv</code> is a good example of somewhere where we do something fairly similar to this, and there we absolutely do define <code>fst</code>, <code>snd</code>, and <code>prod</code>.</p>",
        "id": 520678755,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1748355030
    },
    {
        "content": "<p>So I really am convinced this API would be good and not redundant.</p>",
        "id": 520678890,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1748355081
    }
]