[
    {
        "content": "<p><strong>Background for the non-maintainers.</strong> Mathlib has a very general notion of \"manifolds with boundary and corners\". It allows boundaryless manifolds, manifolds with boundary, corners of any order (e.g., modelled on any Euclidean quadrant) and more. This is slightly different from most textbooks, in that mathlib's definition is just putting in \"these are the minimal properties we need\" (and extending this list as we realise more conditions are needed) as opposed to demanding a particular model.</p>\n<p><strong>Impetus.</strong> Specifically, mathlib's current definition of models with corners is wrong, in the sense of being too general. A complex manifold (of current mathlib) need not be a real manifold. (The reason is that the condition <code>UniqueDiffOn C target</code> does not imply <code>UniqueDiffOn R target</code>; unique differentiability over C is a weaker condition.) That is very undesirable, so we'd like to add another condition. This was discussed in <a href=\"https://github.com/leanprover-community/mathlib4/pull/18403\">#18403</a>; <span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> proposed that we add the requirement \"the interior of <code>range I</code> is convex\". In <a href=\"https://github.com/leanprover-community/mathlib4/pull/23657\">#23657</a> (a pre-requisite to <a href=\"https://github.com/leanprover-community/mathlib4/pull/23658\">#23658</a> which makes that change), he proposed dropping the \"interior\" in that statement.</p>\n<p><strong>New discovery.</strong> However, since then <span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span> and I realised that this condition is too strong. There is a notion of (finite-dimensional) complex manifolds with boundary (see <a href=\"https://math.stackexchange.com/questions/1957840/what-is-the-definition-of-a-complex-manifold-with-boundary/1958392#1958392\">Jack Lee's stackoverflow answer</a> <a href=\"https://math.stackexchange.com/a/3340426\">and a follow-up</a> for a definition). In short, the proper definition is to allow models with range $${z\\in U \\colon\\; f(z)\\leq 0\\}$, where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi><mo>⊂</mo><msup><mi mathvariant=\"double-struck\">C</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">U\\subset\\mathbb{C}^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7224em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⊂</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> is open and $$f\\colon U\\to\\mathbb{R}$ is a smooth submersion. This range, however, need not be convex.</p>\n<p><strong>What to do?</strong> Floris and I wondered if we can make this the general definition. To boot, this raises a few questions:</p>\n<ul>\n<li>\n<p>how to define complex manifolds with corners? We certainly would like to have them in mathlib, so we can take finite products of manifolds.<br>\nA first naive definition is \"the model has range $$f^{-1}((-\\infty,0])\\cap g^{-1}((-\\infty,0])$\", where $f,g\\colon U\\to\\mathbb{R}$ are two real submersions (and similarly for higher-order corners).<br>\nThis is not correct yet, as it would e.g. allow ${z: Im z = 0}$ as a complex manifold with corners (via the submersions <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>z</mi><mo stretchy=\"false\">)</mo><mo>:</mo><mo>=</mo><mi>R</mi><mi>e</mi><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">f(z):= Re z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">ez</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>g</mi><mo>=</mo><mo>−</mo><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">g = -f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>). We need to add some non-degeneracy condition. </p>\n</li>\n<li>\n<p>what about Banach manifolds with corners? Many textbooks (e.g. Lang or <a href=\"https://arxiv.org/pdf/2112.08114.pdf\">Schmeding</a>) do not speak about this. <a href=\"https://shop.elsevier.com/books/differential-topology/margalef-roig/978-0-444-88434-3\">Roig-Dominguez</a> define Banach manifolds with boundary and corners, in a similar way as above: you can take <code>k</code> linearly independent linear functionals <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">f_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> on your model space, and consider models with range <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>⋂</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>k</mi></msubsup><msubsup><mi>f</mi><mi>i</mi><mrow><mo>−</mo><mn>1</mn></mrow></msubsup><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∞</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\bigcap_{i=1}^k f_i^{-1}([0,\\infty))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2887em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">⋂</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.989em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8542em;\"><span style=\"top:-2.4231em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2769em;\"><span></span></span></span></span></span></span><span class=\"mopen\">([</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">∞</span><span class=\"mclose\">))</span></span></span></span>.</p>\n</li>\n</ul>\n<p><strong>New proposal.</strong> Thus, here is a strawman proposal. We add a new constraint to the definition of models with corners modelled over an <code>RCLike</code> field, consisting of</p>\n<ul>\n<li>data: a finite set of maps <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mspace></mspace><mspace width=\"0.1111em\"/><mo lspace=\"0em\" rspace=\"0.17em\"></mo><mtext> ⁣</mtext><mo lspace=\"0em\" rspace=\"0em\">:</mo><mspace width=\"0.3333em\"/><mi>E</mi><mo>→</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">f_i\\colon E\\to\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace nobreak\"></span><span class=\"mspace\" style=\"margin-right:0.1111em;\"></span><span class=\"mpunct\"></span><span class=\"mspace\" style=\"margin-right:-0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mrel\">:</span></span><span class=\"mspace\" style=\"margin-right:0.3333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span></li>\n<li>a proof that all these maps are submersions,</li>\n<li>a non-degeneracy condition: for each <code>z</code> in the range of the model, if precisely <code>k</code> of our submersions vanish at <code>z</code>, then their differentials at <code>z</code> are linearly independent (as vectors in the space of real linear maps <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mo>→</mo><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">E\\to\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span>). (If all submersions are linear, this is precisely \"all submersions are linearly independent.)</li>\n<li>the condition that our model with corners have range <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>⋂</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>k</mi></msubsup><msubsup><mi>f</mi><mi>i</mi><mrow><mo>−</mo><mn>1</mn></mrow></msubsup><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∞</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\bigcap_{i=1}^k f_i^{-1}([0,\\infty))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.2887em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">⋂</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.989em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8542em;\"><span style=\"top:-2.4231em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span><span style=\"top:-3.1031em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2769em;\"><span></span></span></span></span></span></span><span class=\"mopen\">([</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">∞</span><span class=\"mclose\">))</span></span></span></span> (or perhaps, considering suitable restrictions of <code>f_i</code> instead)</li>\n</ul>\n<p>This proposal</p>\n<ul>\n<li>allows for complex manifolds with boundary and also allows corners there</li>\n<li>is, over the real numbers, equivalent to the standard definition using Euclidean quadrants. (This requires a little work to prove, but follows since in suitable charts, submersions are just a coordinate projection.)</li>\n<li>implies the range is \"large\": its interior is dense in the range, and</li>\n<li>and implies the unique differentiability condition over R or C.</li>\n</ul>\n<p>It also ensures complex manifolds are always real manifolds (as complex linearly independent vectors are also real linearly independent).</p>\n<p>Tagging <span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> (whom else?)</p>",
        "id": 515049529,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1745929857
    },
    {
        "content": "<p>If the issue is that complex manifolds are not always real manifolds, can't you just demand that, in the RCLike case, the range has UniqueDiffOn for R?</p>",
        "id": 515051359,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745930292
    },
    {
        "content": "<p>I'd like to fix the definition of model spaces, instead of playing this game \"let's work with the weakest definition of model spaces that can prove theorems <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo separator=\"true\">,</mo><mo>…</mo><mo separator=\"true\">,</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">1, \\ldots, N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord\">1</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span> and if theorem <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">N+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> requires an additional condition on model spaces, then we change its definition.\"</p>\n<p>Michael mentioned the collar neighbourhood theorem recently, which probably also requires an additional condition on model spaces for real manifold with boundaries (without corners). Another example: I'm not sure if we can prove with the current definition that the boundary of a p-adic manifold is empty.</p>\n<p>So Michael's proposal is a proposal to significantly restrict model spaces, while supporting all model spaces that I'm currently aware exist in the literature (which might not be exhaustive, of course). <br>\nIn fact, maybe we should go one step further: if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">k</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">k</span></span></span></span> is a field extension of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span> (or maybe if  <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">k</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">k</span></span></span></span> is RC-like?) then we add the boundary data as in Michael's proposal, and otherwise we require that the model has range <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span>, so that we also get nice model spaces for e.g. the p-adics.<br>\nIf we do that, we can get rid of the unique differentiability condition and the condition that the interior is dense, since that follows from these conditions.</p>",
        "id": 515059471,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1745932306
    },
    {
        "content": "<p>I'm definitely on par with enforcing that the range is <code>univ</code> when the field is not RCLike. </p>\n<p>For RCLike fields, though, the definition proposed by Michael looks very specific. I'm not saying we should be general for the sake of being general, but rather for the sake of clarifying the picture and simplifying the proofs: Often, focusing on specific details hides the big picture of what is really going on, and tends to make proofs harder because you have too many things available and you don't know which tool to use.</p>\n<p>For more specific theorems, of course, you will need more specific assumptions. For instance, the collar theorem only makes sense for manifolds with boundary, not manifolds with corners, because you need the boundary to be a manifold in itself.</p>",
        "id": 515063247,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745933171
    },
    {
        "content": "<p>This being said, we could change the definition to be whatever definition you like, prove from it the basic properties (the range is UniqueDiffOn, the interior of the range is dense, whatever) and then only use these properties when building the theory. I wouldn't mind at all. What I'm afraid of is that users of the library would try to come back to the initial very specific definition too often, and would get lost in it. But this could be avoided by a thorough docstring saying: \"don't use this definition unless really necessary, use the API provided by such and such\".</p>",
        "id": 515064009,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745933358
    },
    {
        "content": "<p>If you're mostly worried about discovery of the important properties of model spaces, then I'm definitely happy to add in docstrings/module docs text of the form \"these 2+ properties are often the only properties you need to do basic manifold theory\" and prove these properties early.</p>",
        "id": 515065523,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1745933727
    },
    {
        "content": "<p>(Note that the definition of complex manifold with boundary pointed by Michael can not be implemented in current Mathlib, as the model space would have to depend on the point you're looking at in the manifold, while we're working with a fixed model space all over the place).</p>",
        "id": 515065625,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745933760
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/515065625\">said</a>:</p>\n<blockquote>\n<p>(Note that the definition of complex manifold with boundary pointed by Michael can not be implemented in current Mathlib, as the model space would have to depend on the point you're looking at in the manifold, while we're working with a fixed model space all over the place).</p>\n</blockquote>\n<p>I have no idea how difficult implementing this generalization would be, but it would be very useful when we want to construct smooth manifolds attached to smooth schemes over the complex numbers (or over the reals). Otherwise, we would need equidimensional assumptions, which would be very annoying.</p>",
        "id": 515067128,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745934113
    },
    {
        "content": "<p>To be honest, I am not convinced yet that there is anything to be gained by changing the definition (apart from requiring that over C there is also real UniqueDiffOn for the range over the reals, but even for that it could even be better to have this as an additional typeclass over <code>I</code> added when needed, instead of being part of the definition). I think that to be convinced I just need to be shown a theorem where this is important.</p>",
        "id": 515067364,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745934169
    },
    {
        "content": "<p>Smooth manifolds in mathlib are indeed constant-dimensional globally, otherwise it's just a nightmare.</p>",
        "id": 515067612,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745934236
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/515065625\">said</a>:</p>\n<blockquote>\n<p>(Note that the definition of complex manifold with boundary pointed by Michael can not be implemented in current Mathlib, as the model space would have to depend on the point you're looking at in the manifold, while we're working with a fixed model space all over the place).</p>\n</blockquote>\n<p>True, although that design decision is orthogonal to this one.</p>",
        "id": 515067627,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1745934240
    },
    {
        "content": "<p>In the same way, vector bundles have fixed dimension of the fiber.</p>",
        "id": 515068017,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745934330
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/515067364\">said</a>:</p>\n<blockquote>\n<p>To be honest, I am not convinced yet that there is anything to be gained by changing the definition (apart from requiring that over C there is also real UniqueDiffOn for the range over the reals, but even for that it could even be better to have this as an additional typeclass over <code>I</code> added when needed, instead of being part of the definition). I think that to be convinced I just need to be shown a theorem where this is important.</p>\n</blockquote>\n<p>That is another route we could take. Michael's definition does simplify the definition manifold with boundary without corner (or with <code>n</code>-corners but no <code>(n+1)</code>-corners): you can just say that any point is in at most <code>n</code> zero sets. But another option is to just have a type-class \"this manifold has a nice smooth boundary and (therefore) no corners\" and prove theorems that need that using that class.</p>",
        "id": 515068907,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1745934536
    },
    {
        "content": "<p>We definitely need a class for model with corners with nice boundary, because they are needed to endow the boundary with a manifold structure, which should be available to typeclass inference.</p>",
        "id": 515069337,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745934639
    },
    {
        "content": "<p>I guess using the current (general) definition the interior + boundary of the Koch snowflake is a manifold (I believe). Do we care about that?</p>",
        "id": 515069449,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1745934665
    },
    {
        "content": "<p>It's not a smooth manifold, so no problem here as far as I can see.</p>",
        "id": 515069779,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745934736
    },
    {
        "content": "<p>Is it not? It is a model space, and I can use 1 chart to model it.</p>",
        "id": 515069953,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1745934780
    },
    {
        "content": "<p>Ah, for this weird model with corners yes, definitely. But the weird model with corners doesn't have a nice boundary.</p>",
        "id": 515073536,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745935554
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> maybe for the analytic space associated to a scheme of finite type over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">C</span></span></span></span> we need some new definition then? e.g. complex analytic spaces? And then maybe in the smooth case we show that their components are manifolds?</p>",
        "id": 515074712,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745935821
    },
    {
        "content": "<p>If we're not uncomfortable with the fact that Mathlib has smooth manifolds with fractal boundary, then I can also live with adding Michael's conditions as a type-class on top of <code>ModelWithCorners</code>. <br>\nHowever, I would be happier to go in that direction if there is an actual use-case of the current <code>ModelWithCorners</code> besides being general for the sake of being general.</p>",
        "id": 515083158,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1745937734
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/515069337\">said</a>:</p>\n<blockquote>\n<p>We definitely need a class for model with corners with nice boundary, because they are needed to endow the boundary with a manifold structure, which should be available to typeclass inference.</p>\n</blockquote>\n<p>By the way, <a href=\"https://github.com/leanprover-community/mathlib4/pull/22059\">#22059</a> is my current proposal in that area. It carries data (but that should be fine, given that we don't care about the particular choice of data, but merely about the existence of such data). The code is not maximally polished: it depends on a few not-yet-merged PRs, as a few sorries for unused PRs, and the last 200 lines can probably be ignored --- but this could give a first idea.<br>\nBefore landing that in mathlib, we should probably merge a definition of smooth embeddings first (which I'm also working on).</p>\n<p>Note that is a typeclass on the manifold, <em>not</em> the model with corners.</p>",
        "id": 515084844,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1745938112
    },
    {
        "content": "<p>I think a statement \"if M is a real manifold modelled on the upper half space in R^n, then its boundary is a smooth real manifold\" is false without additional assumptions. To start, note that M could be boundaryless (e.g., if M is in fact modelled on an open ball in the interior of the model's range). For an actual counterexample, let $n=2$ and let $M$ be the top right quadrant in R² (which has boundary and a corner). We embed M into the upper half space so the corner is on the real line. I believe that currently, this is allowed.</p>",
        "id": 515085327,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1745938218
    },
    {
        "content": "<p>I don't get your example. To me, if you have a smooth real manifold modelled on the upper half space of dimension <code>n+1</code>, then its boundary is definitely a smooth real manifold (of dimension <code>n</code>, without boundary). Sketch of proof: at a point <code>x</code> of the boundary, the corresponding chart <code>c</code> of <code>M</code> sends a neighborhood of this point to some set in the upper half space, and a neighborhood of <code>∂M</code> around <code>x</code> to a subset of <code>ℝ^n</code>. The restriction of <code>c</code> to <code>∂M</code> is your chart, taking values in <code>ℝ^n</code>. The change of coordinates are smooth, everything looks fine to me. Am I overlooking something?</p>",
        "id": 515090342,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745938934
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/515074712\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"459699\">Joël Riou</span> maybe for the analytic space associated to a scheme of finite type over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">C</span></span></span></span> we need some new definition then? e.g. complex analytic spaces? And then maybe in the smooth case we show that their components are manifolds?</p>\n</blockquote>\n<p>Yes, anyways, we will have to introduce a new definition so as to include singularities.</p>",
        "id": 515091972,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745939264
    },
    {
        "content": "<p>But as far as I understand all this is blocked until we have invariance of domain, anyway.</p>",
        "id": 515093319,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745939615
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> what is it specifically that makes the theory of manifolds a nightmare is the dimension, resp the local type, is not constant?</p>",
        "id": 515157182,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1745960687
    },
    {
        "content": "<p>Honestly, I haven't even tried, since I avoid dependent type hell whenever I can. The issue is that, if the type of the model space, the charts, the model with corner, and so on, depend on the point of the manifold, then rewriting becomes impossible (well, not impossible, but a much more complicated dance).</p>",
        "id": 515219638,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1745995379
    },
    {
        "content": "<p>This zulip discussion seems to have reached a steady state. Let me summarize what was discussed after the initial proposal.</p>\n<ul>\n<li>to make e.g. an ellipsoid in R^2k a complex manifold with boundary, the model with corners would have to depend on the base point. (Perhaps this can be avoided by working harder to construct a model. I haven't tried very hard.)</li>\n<li>Currently, mathlib assumes the model space is constant. Changing this could be involved (e.g., the identification of tangent spaces with the model space would break; one cannot <code>rw</code> by this any more) --- but also orthogonal to the other changes proposed. In other words, this could be a change independent of this one. Assuming a constant model space also means a manifold has constant dimension (which some applications may wish to not assume... but that is another discussion for the future).</li>\n<li>Note that with the current definition of models with corners, the interior and boundary of the Koch snowflake are a smooth manifold (for this very particular model).</li>\n<li><code>p</code>-adic manifolds are funny objects; often <code>p</code>-adic spaces are the much more interesting objects to study. But <code>p</code>-adic Lie groups are studied, so we should keep manifolds for this reason.</li>\n</ul>\n<p>Overall, there are (at least) two options forward.</p>\n<h3>Option 1: \"minimal changes\"</h3>\n<p>Add a condition that complex manifolds also have unique derivatives over R. Prove that complex manifolds are also real manifolds. If the future need arises, add a type class \"has nice boundary\" which could state the quadrant condition above.</p>\n<h3>Option 1b: \"almost minimal changes\"</h3>\n<p>Like Option 1, but also demand that p-adic manifolds have no boundary. (Perhaps with a TODO to remove this condition, if it can be deduced from the others. In paper mathematics, it can --- I haven't investigated if this is also true in mathlib. Whoever uses p-adic manifolds can look into this.)</p>\n<h3>Option 1c: also require convexity</h3>\n<p>Require that the range of the model with corners is convex in the real or complex case, and univ otherwise. (This implies the conditions in option 1b and 1c.) This condition is important to define Riemannian manifolds: if you want to say that, locally, the distance in the manifold is comparable to the distance in the model space, then you need (some form of) convexity in the model space. And you need this comparability to say that the distance induced by a Riemannian metric defines the same topology as the preexisting one.</p>\n<h3>Option 2. require Euclidean quadrants</h3>\n<p>Change the definition of models with corners substantially: demand that it be defined using finitely many linearly independent functionals, and that the range of the model with corners is the simultaneous non-negativity set of all of these. This nicely yields a definition of \"boundary without corners\". Deduce the current properties from this definition. Augment the doc-string to emphasize that usually, we only use these properties of models.<br>\nThis is stronger than option 1c.<br>\nBiggest downside: this excludes e.g. the ellipsoid, or complex manifolds with boundary (like option 1c).</p>\n<h3>Option 2b: require \"curved quadrants\"</h3>\n<p>Weaker than option 2: instead of linear functionals, take real submersions (as detailed above). This is now a non-standard definition, but is general enough to include complex manifolds with boundary.</p>\n<h3>Option 3: add a <code>ConvexModel</code> typeclass instead</h3>\n<p>This would be assumed for a theorem \"complex manifolds are real manifolds\", or for studying manifolds with a Riemannian metric.</p>",
        "id": 522572964,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749124507
    },
    {
        "content": "<p>Is this a fair summary? Is something missing? Please let me know and I can edit it.</p>",
        "id": 522573039,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749124525
    },
    {
        "content": "<p>All this considered, I propose going ahead with option 1 (and optionally also option 1b) --- for now.</p>",
        "id": 522573152,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749124549
    },
    {
        "content": "<p>There is also Option 1c: require that the range of the model with corners is convex in the real or complex case, and univ otherwise.</p>",
        "id": 522588052,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1749128976
    },
    {
        "content": "<p>That would be important to define Riemannian manifolds: if you want to say that, locally, the distance in the manifold is comparable to the distance in the model space, then you need (some form of) convexity in the model space. And you need this comparability to say that the distance induced by a Riemannian metric defines the same topology as the preexisting one.</p>",
        "id": 522588471,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1749129108
    },
    {
        "content": "<p>Option 1c will exclude complex manifolds with boundary, right?</p>",
        "id": 522589095,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749129293
    },
    {
        "content": "<p>Added to the summary above</p>",
        "id": 522589115,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749129297
    },
    {
        "content": "<p>option 1c is weaker than option 2, right? Because a Euclidean quadrant is always convex. So if you're happy with 2, you should also be happy with 1c?</p>",
        "id": 522589620,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1749129441
    },
    {
        "content": "<p>... right. I added option 2b to use \"curved quadrants\" (as Floris and I originally proposed).</p>",
        "id": 522590387,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749129633
    },
    {
        "content": "<p>I guess, at this point I'm happy to postpone discussions about complex manifolds with boundary a bit further, and revisit that decision if/when somebody would like to formalise them.</p>",
        "id": 522590514,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749129665
    },
    {
        "content": "<p>In other words: I'm also happy to go with option 1c.</p>",
        "id": 522590634,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749129692
    },
    {
        "content": "<p>I'm happy with 1c. I can have a go at it if you like (and if nobody objects)</p>",
        "id": 522590969,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1749129792
    },
    {
        "content": "<blockquote>\n<p>I can have a go at it if you like</p>\n</blockquote>\n<p>Given <a href=\"https://github.com/leanprover-community/mathlib4/pull/23658\">#23658</a> exists, how about we split this: you can fix <code>Instances/Real.lean</code>(feel free to ask for my review), and then I'll re-base <a href=\"https://github.com/leanprover-community/mathlib4/pull/23658\">#23658</a> on top of your PR?</p>\n<p>(Assuming there are no further objections.)</p>",
        "id": 522591568,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749129956
    },
    {
        "content": "<p>I just remembered that all convexity results needed (if one talks about the range of the model, as opposed to its interior) are already in mathlib, hence <a href=\"https://github.com/leanprover-community/mathlib4/pull/23658\">#23658</a> just needs a touch-up. I just did most of it, but am stuck with two sorries. <span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> Would you like to have a go at fixing those? This would be most welcome.</p>",
        "id": 522612913,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749135567
    },
    {
        "content": "<p>In this PR, it would also make sense to deduce unique differentiability and the fact it's the closure of the interior from the convexity. Can I try to do that in the branch?</p>",
        "id": 522618499,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1749137095
    },
    {
        "content": "<p>Sure! (In fact, Floris and I stumbled across the fact that we wanted convexity of the whole range to do some of this --- so having it proven would be great to have.)</p>",
        "id": 522626493,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749139545
    },
    {
        "content": "<p>Adding an instance \"a complex model with corners is a real model with corners\" could also be nice to have (but I can also do that, if you prefer).</p>",
        "id": 522626774,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749139630
    },
    {
        "content": "<p>I just tried to do so, and pushed what I have to the branch.</p>",
        "id": 522676821,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749161841
    },
    {
        "content": "<p>Oh, I didn't expect we would now go with excluding certain complex manifold with boundaries... Probably not my preferred option, but I can live with it, especially if it's also useful for Riemannian manifolds.</p>\n<p>Michael, I don't understand why your ellipsoid example needs a point-dependent model space (or why an ellipsoid would have a boundary), but let's discuss that live.</p>",
        "id": 522680982,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1749164816
    },
    {
        "content": "<p>I have a working branch in <code>SG_test3</code> (compiles, no sorry). <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span>, so you want to merge it into <a href=\"https://github.com/leanprover-community/mathlib4/pull/23658\">#23658</a>?</p>",
        "id": 522886020,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1749290514
    },
    {
        "content": "<p>Thanks a lot! Looking over the diff, my impression is that this does several unrelated clean-ups also. Can you split these out, please? (I'll be happy to approve quickly... it certainly LGTM now.)</p>\n<ul>\n<li>one for renaming <code>ModelWithCorners.transDiffeomorph</code> and <code>Diffeomorph.toTransDiffeomorph</code></li>\n<li>perhaps one for turning <code>symm_toLinearEquiv</code> around<br>\nMerging the remainder into my branch sounds good.</li>\n</ul>",
        "id": 522889751,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1749295650
    },
    {
        "content": "<p>The transDiffeomorph change is directly related to the branch: currently, it's for composing with a diffeomorphism, but once one switches to convex sets one can only compose with linear equivs, hence the change of name from <code>transDiffeomorph</code> to <code>transContinuousLinearEquiv</code>.</p>\n<p>For the turning around of <code>symm_toLinearEquiv</code> (which I need to fix a proof), I'll wait until there is a conclusion in the other discussion.</p>",
        "id": 522890222,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1749296199
    },
    {
        "content": "<p>8 messages were moved from this topic to <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Invariant.20of.20domain/with/524049228\">#mathlib4 &gt; Invariant of domain</a> by <span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span>.</p>",
        "id": 524110895,
        "sender_full_name": "Notification Bot",
        "timestamp": 1749971968
    },
    {
        "content": "<p>Discussing with <span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span> and <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> at Big Proof turned up two further options. If I understand correctly, Heather was nervous of using typeclass synthesis for the definition of models with corners. (I didn't catch why precisely --- perhaps you can articulate that?) Hence, two further options emerged:</p>\n<ul>\n<li>keep the current definition of models with corners: with the understanding that it is \"too general\" in some sense, but serving as a minimal common ground for surprisingly many theorems. Add a <code>ConvexModel</code> typeclass, stating that the model with corners has convex range. Then the relation between real and complex manifolds becomes \"a complex manifold with a <code>ConvexModel</code> is a real manifold (with a <code>ConvexModel</code>). Many theorems will just assume a convex model, just like a number of results assume Hausdorff or second countable results.</li>\n<li>remove the talk about p-adic manifolds, and restrict to the real or complex numbers. This is much more radical, but means we don't get to deal with any case distinctions any more: the base field of a manifold is always <code>RCLike</code>, and this is baked into the definition. This certainly surprised me on first glance; the argument in favour is that <code>p</code>-adic manifolds are very weird objects to begin with. Generally, you'd want to work with adic spaces instead. (That's what I hear, I don't know myself.)</li>\n</ul>",
        "id": 524710714,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750254176
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/25824#issuecomment-2972548949\">On Github</a>, Sebastién wrote the following:</p>\n<blockquote>\n<p>My idea is to include in model with corners whatever we need to cover the standard examples in the literature, while being able to prove the maximum number of theorems we can, and minimize the pain for users.</p>\n</blockquote>\n<blockquote>\n<p>We need to include something like convexity of the range of model with corners, for Riemannian geometry: otherwise, if you have norms on tangent spaces, and you define the distance between two points as the inf of lenghts of C^1 paths between these points, this may not define the same topology as the original one (think of a comb-like model with corners, with branches of height 1 accumulating at a branch at 0: then the geodesic distance between (0,0) and (1/n, 0) is of the order of 2 (because you need to get up the branches to link these two points) while for the topology they are very close).</p>\n</blockquote>\n<blockquote>\n<p>One could have a class [ConvexRange I] for good model with corners, registering that the range is convex, but this would be one more typeclass that the user would need to type. Since it is satisfied in all standard examples, it seems simpler to me to include it directly in the definition of model with corners. It is a little painful to state, but the good news is that this will only show up when defining model with corners, not when using them. Hopefully we already have all the standard examples of models with corners in mathlib, so I expect users will never have to deal with this weird definition with case distinction -- they will only use the API saying that the range is convex, if their field happens to be R or C.</p>\n</blockquote>\n<blockquote>\n<p>It's a little bit like <code>minSmoothness</code> , defined using a case disjunction and making it possible to talk about a C^3 Lie group over R or C, and an analytic Lie group over other fields. Once the API is in place, users never need to unfold the definition.</p>\n</blockquote>",
        "id": 524710903,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750254232
    },
    {
        "content": "<p>Personally: I don't really care which decision we pick --- but this thread has been drawing out for long enough.<br>\nI'd be very interested in a quick resolution here: I'm visiting Patrick right now (for a month), and working on Riemannian manifolds would be a very nice topic. But this is only possible if such blockers get resolved <em>in some way</em>.</p>",
        "id": 524711271,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750254323
    },
    {
        "content": "<p>I think we should absolutely keep p-adic manifolds, not for p-adic manifolds by themselves, but for p-adic Lie groups which are definitely a thing.</p>",
        "id": 524711299,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750254334
    },
    {
        "content": "<p>If there is a need for discussion, I can accomodate this. But I would rather prefer not stalling this for \"no good reason\".</p>",
        "id": 524711365,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750254359
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/524710714\">said</a>:</p>\n<blockquote>\n<p>If I understand correctly, Heather was nervous of using typeclass synthesis for the definition of models with corners. </p>\n</blockquote>\n<p>typeclass synthesis is not used when defining models with corners with the convexity condition: it's of the form \"if some prop holds then foo else bar\" (and it's again a prop), so there is no data involved, and no typeclass synthesis involved.</p>",
        "id": 524711730,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750254455
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"260507\">@Heather Macbeth</span> Do you mind weighing in here? At this point, I'd rather not debug my faulty memory what you said, but let you speak directly.</p>",
        "id": 524712093,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750254530
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/524711299\">said</a>:</p>\n<blockquote>\n<p>I think we should absolutely keep p-adic manifolds, not for p-adic manifolds by themselves, but for p-adic Lie groups which are definitely a thing.</p>\n</blockquote>\n<p>They certainly are a thing, but they are basically only the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic points of the corresponding algebraic group with the induced topology from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi><mi>n</mi></msubsup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.072em;vertical-align:-0.3831em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-2.453em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3831em;\"><span></span></span></span></span></span></span></span></span></span> (unlike true <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic manifolds) so I don't know if it is worth it to be bothered by them.</p>",
        "id": 524806940,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1750300248
    },
    {
        "content": "<p>In the <a href=\"https://people.math.harvard.edu/~lurie/papers/cobordism.pdf\">proof of the cobordism hypothesis</a>, boundaries of manifolds with cirners are considered. Sorry if it interrupts some. </p>\n<p>But it could he good to take a glance because of how ordinary cobordism and bordism theory do not cover the patterns that the theory there does.</p>",
        "id": 524816845,
        "sender_full_name": "Jeremy Ravenel",
        "timestamp": 1750310385
    },
    {
        "content": "<p>Thanks for trying to help. I'm not quite sure, though - can you clarify how what you're saying relates to this thread? My reading is that everybody agrees that having manifolds with corners is good, and that talking about the boundary of a manifold with corners (as a manifold with boundary) is useful.<br>\nDo you want to say \"this particular reference has an interesting use of manifolds with corners\"?</p>",
        "id": 524823903,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750315623
    },
    {
        "content": "<p>For p-adic Lie groups, the point is you want to talk about their Lie algebra, and relate properties of the Lie algebra to the Lie group. This should be done in a single framework, not separately over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">C</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span>.</p>",
        "id": 524824027,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750315709
    },
    {
        "content": "<p>But is there a single example in the p-adic setting when you're not using algebraic groups? In algebraic geometry if G is a group variety over an arbitrary field k then the k-points G(k) are a group, the identity element corresponds via the usual algebraic geometry yoga to a maximal ideal <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span> of a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span>-algebra <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span> and then you can define the Lie algebra of G to be the dual of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi mathvariant=\"normal\">/</mi><msup><mi>m</mi><mn>2</mn></msup><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">m/m^2.</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mord\">.</span></span></span></span> If furthermore <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> has a topology then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo stretchy=\"false\">(</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">G(k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span> inherits a topology and if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span> is an open subgroup of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mo stretchy=\"false\">(</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">G(k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span> then you can just define the Lie algebra of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">H</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span> to be the dual of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi><mi mathvariant=\"normal\">/</mi><msup><mi>m</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">m/m^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0641em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord\">/</span><span class=\"mord\"><span class=\"mord mathnormal\">m</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span> as well. All functoriality for algebraic maps exists in the algebraic world and you don't need any of the manifold framework or any assumptions on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> at all. For example what I've said above all works for a power series field <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">(</mo><mi>t</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">F((t))</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mopen\">((</span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">))</span></span></span></span> over a finite field <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi></mrow><annotation encoding=\"application/x-tex\">F</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span></span></span></span>.</p>\n<p>I am quite conflicted by this. I've seen the claim that \"Serre once used <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic Lie groups\" but I don't know the details. I've had to deal a lot with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic geometry in my work and I've always used totally different foundations to those of the manifold library (adic spaces etc). We don't want to design <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> out of the manifold system if someone can actually point to a place where it would be useful but if it's causing more problems than it's solving then I would not personally care at all if it went. I definitely want the open mapping theorem for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic Banach spaces and a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic logarithm but I'm not at all clear yet on whether I want <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic manifolds with the classical definition.</p>",
        "id": 524830682,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1750318471
    },
    {
        "content": "<p>I have also been using the Lie group / Lie algebra yoga when the former were showing up as Galois groups of big non abelian extensions, but the algebraic approach was enough. I agree with <span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> that things should be done uniformly whenever possible  but if that makes life too hard for serious differential geometry, it might not be worth the effort.</p>",
        "id": 524891107,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1750341086
    },
    {
        "content": "<p>I think the difference with ordinary cobordism (just boundaries) and manifolds with corners as it arises in the tangle hypothesis (which later got renamed) arises in situations where one considers boundaries between boundaries, boundaries between those, etc. (edit: Inrealized this could be kind of unclear, since I meant bordisms!)</p>\n<p>I mentioned it since it was suggested to build in a condition as to when the boundary is itself one of a number oc things, such as a manifold or manifold with corners.</p>\n<p>Possibly that (edit: what it \"cobords\") is not possible without extra information about the manifold, such as is already the case with a cobordism, that it consists of a designated two manifolds even though one could consider an empty one along with the disjoint union of the others. So, more would be built on top of it to get bordisms.</p>",
        "id": 524901721,
        "sender_full_name": "Jeremy Ravenel",
        "timestamp": 1750344477
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/524891107\">said</a>:</p>\n<blockquote>\n<p>if that makes life too hard for serious differential geometry, it might not be worth the effort.</p>\n</blockquote>\n<p>It doesn't make life hard, as far as I can tell.</p>",
        "id": 524904803,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1750345539
    },
    {
        "content": "<p>I'm happy with <a href=\"https://github.com/leanprover-community/mathlib4/pull/25824\">#25824</a>. I think that approach is almost perfect.</p>\n<p>There is a small risk in that it might exclude some (complex) manifolds with boundaries, but it is not clear if it actually does (or whether the separate design decision of having the model being independent of the point in the manifold already excludes some of these). If we later decide that this is actually a problem, we can then decide to refactor and put the convexity in a separate mixin class on the model with corners.</p>",
        "id": 525509890,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1750769101
    },
    {
        "content": "<p>I would say the existence of an atlas of corners (with partitions of unity) by which one can demonstrate Stoke's theorem using the case for corners is important.</p>",
        "id": 525585392,
        "sender_full_name": "pro-Lie stabilizer",
        "timestamp": 1750794799
    },
    {
        "content": "<p>P.S. Consider an effective epimorphism <code>f : X → Y</code> such that prop₁(X) and such that the maps out of the pullback <code>π₁, π₂ : pullback (f, f)  → X</code> have special property prop₂(π₁, dom(π₁), cod(π₁)), prop₂(π₂, dom(π₂), cod(π₂)),  in addition to being effective epimorphisms satisfying prop₁(X). (surjective local homeomorphisms are particular effective epimorphisms locally compact spaces). </p>\n<p>e.g. </p>\n<p>prop₁(X) of \"<code>X</code> is a corner\",  and prop₂(πᵢ,dom(πᵢ), cod(πᵢ)) of \"<code>πᵢ</code> is a local diffeomorphism between open subsets of corners\".</p>\n<p>It's typical not to count disjoint unions (it's either the regular or strict ones that don't lose generality), so this is actually consistent with the approach here:</p>\n<p>e.g. <br>\nprop₁(X) is the convexity assumption used here, which seems to imply connected,  and prop₂(πᵢ,dom(πᵢ), cod(πᵢ)) varies subsequently.</p>",
        "id": 525586761,
        "sender_full_name": "pro-Lie stabilizer",
        "timestamp": 1750795357
    },
    {
        "content": "<p>Sorry, I wasn't following closely enough I think.</p>",
        "id": 525606558,
        "sender_full_name": "pro-Lie stabilizer",
        "timestamp": 1750805001
    },
    {
        "content": "<p>Status update: This question is slowly but surely becoming the bottleneck for landing Sébastien's work on Riemannian manifolds, which is on the path towards upstreaming Patrick's and mine. If there's no further comment (from Heather or anybody else) by Sunday, I suggest we merge <a href=\"https://github.com/leanprover-community/mathlib4/pull/25824\">#25824</a>. If follow-up discussions yield a better alternative, we can always switch to that, going forward.</p>",
        "id": 525633022,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750825760
    },
    {
        "content": "<p>I think we can even go ahead earlier than Sunday.</p>",
        "id": 525688175,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1750849802
    },
    {
        "content": "<p>Sure, let me add this clause: if all other PRs are reviewed and merged before, than we should also go ahead.</p>",
        "id": 525695886,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750852417
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/524830682\">said</a>:</p>\n<blockquote>\n<p>I am quite conflicted by this. I've seen the claim that \"Serre once used <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic Lie groups\" but I don't know the details. I've had to deal a lot with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic geometry in my work and I've always used totally different foundations to those of the manifold library (adic spaces etc). We don't want to design <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"double-struck\">Q</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.975em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> out of the manifold system if someone can actually point to a place where it would be useful but if it's causing more problems than it's solving then I would not personally care at all if it went. I definitely want the open mapping theorem for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic Banach spaces and a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic logarithm but I'm not at all clear yet on whether I want <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic manifolds with the classical definition.</p>\n</blockquote>\n<p>Well, Bourbaki's <em>Lie groups</em> requires <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-adic manifolds, and in fact, manifolds over any field which is complete for a nontrivial ultrametric absolute value. In characteristic <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>, this is used to state the correct version of the correspondence between Lie algebras and a local version of Lie subgroups (“groupuscules”). They are not at all extremely terrible objects and it would be a pity that they disappear from mathlib.</p>",
        "id": 525797145,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1750889320
    },
    {
        "content": "<p>On the other hand, I don't know of any objects with corners in this setting.</p>",
        "id": 525797322,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1750889432
    },
    {
        "content": "<p>Rest assured: p-adic manifolds will stay in mathlib; this thread has convinced me thoroughly.</p>",
        "id": 525835897,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750921556
    },
    {
        "content": "<p>p-adic manifolds never have boundary: somebody explained that on zulip, a while ago.</p>",
        "id": 525836125,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1750921640
    },
    {
        "content": "<p>This thread seems to have converged. Assuming there is no further discussion until tomorrow morning, I think we should get this merged. Since both Sébastien and I authored significant parts of the code, and we discussed this a lot --- would you like to do the honours, <span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span>?</p>",
        "id": 526263275,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1751196136
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> <span class=\"user-mention\" data-user-id=\"130609\">@Antoine Chambert-Loir</span> <span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span> <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> </p>\n<p>Yesterday I left a comment questioning how this was said to converge. I'm leaving this comment here publicly since it is apparent that the objection I made to that has been deleted.</p>",
        "id": 538091483,
        "sender_full_name": "CylindricalTransportInvariantExistence&UniquenessofPreimagesforHomotopynFunctorsofaWeakEquivalence",
        "timestamp": 1757263148
    },
    {
        "content": "<p>In that post, I asked whether a complex model with curved corners is a real model with ordinary corners when regarded as a real model.</p>",
        "id": 538092735,
        "sender_full_name": "CylindricalTransportInvariantExistence&UniquenessofPreimagesforHomotopynFunctorsofaWeakEquivalence",
        "timestamp": 1757264483
    },
    {
        "content": "<p>So basically any theorem that people made in Lean which was proved is \"not true for all Complex Manifolds\" is now not correct because the definition was too general and could have had something being a complex manifold without also being a real manifold? <span aria-label=\"scream\" class=\"emoji emoji-1f631\" role=\"img\" title=\"scream\">:scream:</span> </p>\n<p>This reinforces my stance that only proofs whose propositions can be stated in simple terms can be trusted to be what they pretend to be(e.g. FLT). All other propositions fall into the category of \"useful\" but may not prove what you think they prove on the surface. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 538109812,
        "sender_full_name": "Mr Proof",
        "timestamp": 1757284917
    },
    {
        "content": "<p>No, we wouldn’t have taken such a non-sensical result in Mathlib. That’s part of the maintainer team job.</p>",
        "id": 538152335,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1757317585
    },
    {
        "content": "<p>According to what you have said, there must be a complex model with curved corners which, when regarded as a smooth real model, is not a real model with ordinary real corners.</p>",
        "id": 538229325,
        "sender_full_name": "CylindricalTransportInvariantExistence&UniquenessofPreimagesforHomotopynFunctorsofaWeakEquivalence",
        "timestamp": 1757338737
    },
    {
        "content": "<p>I suggest you first accept some kind of result about <strong>smooth real coordinate changes on analytic real charts combined with the implicit function theorem and straightening for transversely intersecting submanifolds</strong>, later proceeding with an example about curved complex cornered manifolds which do not induce smooth real manifolds with ordinary real corners.</p>",
        "id": 538232494,
        "sender_full_name": "CylindricalTransportInvariantExistence&UniquenessofPreimagesforHomotopynFunctorsofaWeakEquivalence",
        "timestamp": 1757339565
    },
    {
        "content": "<p>Please stop posting AI-generated rubbish or you will be banned; it is against the rules of the site. Please take this as your last warning. If you think there is a problem with manifolds with corners, it's your job to post an explicit problem, not just keep on posting nonsense and asking other people to do something.</p>",
        "id": 538234647,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1757340069
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/EcqN51mbqusZmvF6swo2LJmW/Screenshot-2025-09-08-at-9.57.59AM.png\">Screenshot 2025-09-08 at 9.57.59 AM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/EcqN51mbqusZmvF6swo2LJmW/Screenshot-2025-09-08-at-9.57.59AM.png\" title=\"Screenshot 2025-09-08 at 9.57.59 AM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1838x1454\" src=\"/user_uploads/thumbnail/3121/EcqN51mbqusZmvF6swo2LJmW/Screenshot-2025-09-08-at-9.57.59AM.png/840x560.webp\"></a></div>",
        "id": 538234728,
        "sender_full_name": "CylindricalTransportInvariantExistence&UniquenessofPreimagesforHomotopynFunctorsofaWeakEquivalence",
        "timestamp": 1757340088
    },
    {
        "content": "<p>I'm well aware that previous nonsense you posted was deleted.</p>",
        "id": 538234935,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1757340135
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/tYIn8eeRZtg62FZSSHLdOhvn/1553-mathlib4-Fixing-the-definition-of-models-with-corners-Lean-Zulip.pdf\">(1553) #mathlib4 &gt; Fixing the definition of models with corners - Lean - Zulip.pdf</a></p>",
        "id": 538250776,
        "sender_full_name": "CylindricalTransportInvariantExistence&UniquenessofPreimagesforHomotopynFunctorsofaWeakEquivalence",
        "timestamp": 1757343943
    },
    {
        "content": "<p>To be fair, the hint of such an issue is contained in the backscroll here:</p>\n<ul>\n<li>requiring the range of a model with corners to be convex excludes certain complex manifolds with corners. Unless, perhaps they also admit such a presentation. It is not obvious to me which ones, if any, do --- let alone if all manifolds do.)</li>\n<li>At the same time, it was not obvious to anybody in the thread what a good definition of complex manifolds with corners and boundaries is.  (I am not a complex geometer, and neither are Floris van Doorn or Sébastien Gouezel.) The previous definition was also wrong; that was the impetus of this entire thread. (A definition in terms of Euclidean quadrants is an option, but also has its downsides.)</li>\n<li>If needed, the convexity requirement can be dropped.</li>\n</ul>\n<p>Ultimately, the decision was to change the definition as proposed here --- and revisit this when the need arises (and somebody who is actually well familiar with complex manifolds with boundary has time to engage here). This was a conscious decision.</p>",
        "id": 538261816,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1757346453
    },
    {
        "content": "<p>To summarise: the current definition is not perfect (but better than the previous version), everybody knew this, and this was a conscious decision</p>",
        "id": 538261932,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1757346482
    },
    {
        "content": "<p>I do not expect you to read all of zulip. But looking at this previous thread is a reasonable bar (and if you haven't, please say so clearly and be prepared to retract your message). Much of what you said has been discussed previously. Also: you're proposing a sweeping change, hence should convince us why this is useful. Not the other way around.</p>",
        "id": 538262668,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1757346669
    },
    {
        "content": "<p>Just tuning in here. <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> <span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>   I don't wish to make things more difficult or to suggest it has to be perfect, but it seems like the atlas used in John Lee's answer is consistent with the following lemma:</p>\n<p>Let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span> be a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>C</mi><mi>k</mi></msup></mrow><annotation encoding=\"application/x-tex\">C^{k}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span></span></span></span></span></span></span></span></span> submersion from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"double-struck\">R</mi><mtext>n</mtext></msup></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}^{\\text{n}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord text mtight\"><span class=\"mord mtight\">n</span></span></span></span></span></span></span></span></span></span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{R}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span>. Then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">{</mo><mi>x</mi><mo>∈</mo><msup><mi mathvariant=\"double-struck\">R</mi><mi>n</mi></msup><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"normal\">/</mi><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>≤</mo><mn>0</mn><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">\\{ x \\in \\mathbb{R}^{n} // f(x) \\leq 0 \\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span><span class=\"mord\">//</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">0</span><span class=\"mclose\">}</span></span></span></span> is a smooth real manifold with corners.</p>\n<p>The surprise-factor is that it's a real manifold with boundary, so the corner is of the form <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>0</mn><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">∞</mi><mo stretchy=\"false\">)</mo><mo>×</mo><msup><mi mathvariant=\"double-struck\">R</mi><mrow><mi>d</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>s</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">[0,\\infty) \\times \\mathbb{R}^{dimension- 1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">∞</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8491em;\"></span><span class=\"mord\"><span class=\"mord mathbb\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8491em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">d</span><span class=\"mord mathnormal mtight\">im</span><span class=\"mord mathnormal mtight\">e</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mord mathnormal mtight\">s</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mord mathnormal mtight\">o</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span>.</p>",
        "id": 538272738,
        "sender_full_name": "K768",
        "timestamp": 1757349128
    },
    {
        "content": "<p>[I decided to delete this message but I couldn't find the delete button <span aria-label=\"sob\" class=\"emoji emoji-1f62d\" role=\"img\" title=\"sob\">:sob:</span>]</p>",
        "id": 538308931,
        "sender_full_name": "Mr Proof",
        "timestamp": 1757362966
    },
    {
        "content": "<p>I am surprised and have not seen this kind of indifference towards a question before. I think it's safe to conclude with respect to John Lee's example that real manifolds with corners, later referred to as \"a definition in terms of Euclidian quadrants\" (is that the same thing or not?) but after reading a code heavy thread with no examples and an awful lot of entitlement I am really surprised at how unclear this is, especially in terms of presentation.</p>",
        "id": 538316949,
        "sender_full_name": "K768",
        "timestamp": 1757366486
    },
    {
        "content": "<p>...that complex manifolds with curved corners are, when regarded as a real manifold, a smooth real manifold with corners, but it was suggested that this is a sweeping change... wouldn't it be more reasonable to have first solved this mathematical problem and only then decided to encode it?</p>",
        "id": 538317560,
        "sender_full_name": "K768",
        "timestamp": 1757366801
    },
    {
        "content": "<p>... and the same for complex manifolds with boundary of the kind that Lee defines in that post.</p>",
        "id": 538323367,
        "sender_full_name": "K768",
        "timestamp": 1757370228
    },
    {
        "content": "<p>Indifference towards which question? There is no problem at all working with complex manifolds having a real boundary in current mathlib, and no plan to change that.</p>",
        "id": 538364573,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1757401666
    },
    {
        "content": "<p>And don’t know what “Lee defines in that post” refers to. Which post are you talking about?</p>",
        "id": 538364730,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1757401751
    },
    {
        "content": "<p>I don't understand what question you're asking <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/538272738\">here</a>. Presuming this lemma is true (I haven't thought about it much yet), what would we use it for?</p>",
        "id": 538375339,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1757405271
    },
    {
        "content": "<p>(There are lots of potentially useful lemmas missing from mathlib, but we all only have so much time. I wouldn't mind a PR adding it. I don't see yet if this is just a single lemma or fits into some broader context.)</p>",
        "id": 538375482,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1757405316
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"935917\">Zaytsev Vasil Innokentievich</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Fixing.20the.20definition.20of.20models.20with.20corners/near/538317560\">said</a>:</p>\n<blockquote>\n<p>wouldn't it be more reasonable to have first solved this mathematical problem and only then decided to encode it?</p>\n</blockquote>\n<p>In the abstract, I would agree with you here. I'm not convinced this applies here, though:</p>\n<p>There <em>was</em> a mathematical problem solved: what is the right abstraction of manifolds to cover finite and infinite-dimensional manifolds, potentially with boundary and corners, over the reals, complexes or p-adics? (That question is not fully answered in the literature, AFAICT. And I did search.) The definition prior to this thread was approximating the answer, the current definition is a better approximation (and enables progress). Deciding \"we have to solve this other mathematical problem first before we can make any progress\" would have been worse.</p>\n<p>I do want to find the perfect definition, everybody here does. But there is a trade-off of \"get things perfect\" and \"get things done\".</p>",
        "id": 538376946,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1757405803
    },
    {
        "content": "<p>(That trade-off comes up a lot in software engineering. <a href=\"https://bholley.net/blog/2016/the-right-fix.html\">Here's a blog post I like</a> which discusses it.)</p>",
        "id": 538377040,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1757405834
    },
    {
        "content": "<p>Maybe we need to be clearer: as far as we know, the definition currently in Mathlib covers all cases that appear in the real world. It is already much more general that what you would find in any standard graduate level differential geometry textbook.</p>",
        "id": 538387061,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1757408859
    },
    {
        "content": "<p>How about, simply, the new option:<br>\n<a href=\"/user_uploads/3121/HuoljpfEZIf-Q3IyxfzCRJUF/Screenshot-2025-09-09-at-2.47.56PM.png\">Screenshot 2025-09-09 at 2.47.56 PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/HuoljpfEZIf-Q3IyxfzCRJUF/Screenshot-2025-09-09-at-2.47.56PM.png\" title=\"Screenshot 2025-09-09 at 2.47.56 PM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1496x1064\" src=\"/user_uploads/thumbnail/3121/HuoljpfEZIf-Q3IyxfzCRJUF/Screenshot-2025-09-09-at-2.47.56PM.png/840x560.webp\"></a></div>",
        "id": 538508179,
        "sender_full_name": "CylindricalTransportInvariantExistence&UniquenessofPreimagesforHomotopynFunctorsofaWeakEquivalence",
        "timestamp": 1757443722
    },
    {
        "content": "<p>This seems like a great idea, so sorry I didn't appreciate it at first. I must have been worrying that there is some kind of \"inherently complex\" corner.</p>",
        "id": 538509916,
        "sender_full_name": "CylindricalTransportInvariantExistence&UniquenessofPreimagesforHomotopynFunctorsofaWeakEquivalence",
        "timestamp": 1757444127
    },
    {
        "content": "<p>Well, that was discussed in the thread above: If I recall correctly,</p>\n<ul>\n<li>it's not clear what generality it would enable</li>\n<li>at the same time, it runs the risk of making proofs <em>less</em> conceptual (by relying on a specific model with quadrants, as opposed to some properties of its range</li>\n</ul>\n<p>Why would you prefer making this change? (Bear in mind that change has a cost --- it is possible, but it needs to have a good reason.)</p>",
        "id": 538517545,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1757446264
    },
    {
        "content": "<p>I think two reasons are:</p>\n<p>Firstly, Stoke's theorem for a corner is very simple, and so is Stoke's theorem for a cube. The prospects for making an API for calculus are interesting, but for one thing the boundary needs to be one on which one can make sense of the integral of a differential form dω.</p>\n<p>Secondly, in cobordism one can consider the product of manifolds as having a boundary. This was remarked earlier in the thread and I definitely agree with it.</p>",
        "id": 538520916,
        "sender_full_name": "CylindricalTransportInvariantExistence&UniquenessofPreimagesforHomotopynFunctorsofaWeakEquivalence",
        "timestamp": 1757447711
    },
    {
        "content": "<p>All this is perfectly fine with the current definition we have in mathlib. It is even designed for these applications.</p>",
        "id": 538521231,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1757447833
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/23138\">#23138</a> defines bordism groups, and things work out fine. (That branch has not been updated to current mathlib, because it is still blocked on other work, but I'm pretty confident things will work.)</p>",
        "id": 538544268,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1757458626
    }
]