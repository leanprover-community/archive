[
    {
        "content": "<p>I'm working on <a href=\"https://github.com/leanprover-community/mathlib4/pull/33364\">#33364</a> where I am refactoring the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimplicialComplex#doc\">docs#SimplicialComplex</a> , which is currently</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">SimplicialComplex</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- the faces of this simplicial complex: currently, given by their spanning vertices -/</span>\n<span class=\"w\">  </span><span class=\"n\">faces</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- the empty set is not a face: hence, all faces are non-empty -/</span>\n<span class=\"w\">  </span><span class=\"n\">empty_notMem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÖ</span><span class=\"w\"> </span><span class=\"bp\">‚àâ</span><span class=\"w\"> </span><span class=\"n\">faces</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- the vertices in each face are affine independent: this is an implementation detail -/</span>\n<span class=\"w\">  </span><span class=\"n\">indep</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">faces</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">AffineIndependent</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">‚Üë</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- faces are downward closed: a non-empty subset of its spanning vertices spans another face -/</span>\n<span class=\"w\">  </span><span class=\"n\">down_closed</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">faces</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚äÜ</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">.</span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">faces</span>\n<span class=\"w\">  </span><span class=\"n\">inter_subset_convexHull</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">faces</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">faces</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span>\n<span class=\"w\">    </span><span class=\"n\">convexHull</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚à©</span><span class=\"w\"> </span><span class=\"n\">convexHull</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"bp\">‚Üë</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚äÜ</span><span class=\"w\"> </span><span class=\"n\">convexHull</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚à©</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span>\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> points out that we could drop the empty_notMem condition, then simplify the down_closed condition to <code>IsLowerSet faces</code>. We might even be able to refactor the definition as an extension of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LowerSet#doc\">docs#LowerSet</a> (or an extension of a new <code>AbstractSimplicialComplex</code> type extending <code>LowerSet</code>).</p>\n<p>There are a couple ways I could see to do this.</p>\n<ul>\n<li>Do this without any other changes. This means that now the emptyset is considered to be included in all Simplicial Complexes, except for a new complex which is empty.</li>\n<li>Do this but add a requirement that emptyset is in the set of faces. This means hat now the emptyset is considered to be included in all Simplicial Complexes, which are in bijection with how it was defined before.</li>\n</ul>\n<p>Is it a problem, mathematically, to have simplicial complexes defined this way? The drawback I know of for sure is that Wikipedia does not seem to define it with emptyset allowed, so possibly this is a well known convention that will confuse people to see.</p>",
        "id": 573196453,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1770782648
    },
    {
        "content": "<p>If you haven't already done so, I'll try a refactor to see what in mathlib breaks</p>",
        "id": 573197263,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1770783247
    },
    {
        "content": "<p>Go for it, but I think <code>SimplicialComplex</code> is currently a leaf file so I am thinking more about the future.</p>",
        "id": 573197368,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1770783324
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/35115\">#35115</a> has an initial cleanup</p>",
        "id": 573199662,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1770785054
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/35116\">#35116</a> is another orthogonal cleanup to the same file</p>",
        "id": 573199971,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1770785332
    },
    {
        "content": "<p>Good point about it being a leaf file, and so this not being a very valuable experiment</p>",
        "id": 573199978,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1770785343
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"246273\">@Bhavik Mehta</span> and <span class=\"user-mention\" data-user-id=\"387244\">@Ya√´l Dillies</span>, as authors of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Geometry.SimplicialComplex#doc\">docs#Geometry.SimplicialComplex</a></p>",
        "id": 573200066,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1770785404
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"282271\">Bolton Bailey</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Definition.20of.20Simplicial.20Complex/near/573196453\">said</a>:</p>\n<blockquote>\n<ul>\n<li>This means that now the emptyset is considered to be included in all Simplicial Complexes, except for a new complex which is empty.</li>\n</ul>\n</blockquote>\n<p>My take is that we should do this, for the same reason that we do for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Filter#doc\">docs#Filter</a>. In the rare case where this extra complex is annoying, we can use <code>NeBot</code> just as we do for filters.</p>",
        "id": 573200106,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1770785452
    },
    {
        "content": "<p>These trivial complexes have names btw, the void and irrelevant complexes for the complexes that do not even include emptyset as a face and the one that only includes emptyset as a face. The suspension of the irrelevant complex is two points, e.g. an S^0, so in a sense the irrelevant complex is an S^{-1}.</p>",
        "id": 573211816,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1770793571
    },
    {
        "content": "<p>Right -- if we allow the empty set then all of a sudden we have simplices with dimension -1 which might cause more pain elsewhere.</p>",
        "id": 573275660,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1770813865
    },
    {
        "content": "<p>something something <code>WithBot Nat</code></p>",
        "id": 573276243,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770814046
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"761203\">Vlad Tsyrklevich</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Definition.20of.20Simplicial.20Complex/near/573211816\">said</a>:</p>\n<blockquote>\n<p>These trivial complexes have names btw, the void and irrelevant complexes for the complexes that do not even include emptyset as a face and the one that only includes emptyset as a face. The suspension of the irrelevant complex is two points, e.g. an S^0, so in a sense the irrelevant complex is an S^{-1}.</p>\n</blockquote>\n<p>Just to make sure I understand that right - this void complex would be the only new complex we're gaining, right? And it has a unique map to every other complex, but no other complex has a map to it - so categorically, what this would do is freely adjoin an initial object to a category that already has one?</p>",
        "id": 573315731,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1770823309
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Definition.20of.20Simplicial.20Complex/near/573275660\">said</a>:</p>\n<blockquote>\n<p>Right -- if we allow the empty set then all of a sudden we have simplices with dimension -1 which might cause more pain elsewhere.</p>\n</blockquote>\n<p>The theory of abstract polytopes requires that every abstract polytope has a top and bottom; the bottom element is traditionally considered to have rank/dimension -1. So there is precedent to this!</p>",
        "id": 573318745,
        "sender_full_name": "Violeta Hern√°ndez",
        "timestamp": 1770824025
    },
    {
        "content": "<p>This feels very related to the distinction between simplicial sets as presheaves on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimplexCategory#doc\">docs#SimplexCategory</a> and augmented simplicial sets as presheaves on <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AugmentedSimplexCategory#doc\">docs#AugmentedSimplexCategory</a>, but I must say I've never quite understood the advantages of the latter - I've just always worked with plain simplicial sets instead. I think one advantage in that context is that the empty simplex functions as the unit of a monoidal structure you otherwise wouldn't have, but is that all or is there more to the distinction that would also apply to simplicial complexes?</p>",
        "id": 573318838,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1770824055
    },
    {
        "content": "<p>(I'm just asking this out of curiosity by the way - I think I've already seen enough to be convinced that removing the <code>empty_notMem</code> condition is at the very least not a bad idea)</p>",
        "id": 573319219,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1770824158
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"646363\">Ben Eltschig</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Definition.20of.20Simplicial.20Complex/near/573315731\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"761203\">Vlad Tsyrklevich</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Definition.20of.20Simplicial.20Complex/near/573211816\">said</a>:</p>\n<blockquote>\n<p>These trivial complexes have names btw, the void and irrelevant complexes for the complexes that do not even include emptyset as a face and the one that only includes emptyset as a face. The suspension of the irrelevant complex is two points, e.g. an S^0, so in a sense the irrelevant complex is an S^{-1}.</p>\n</blockquote>\n<p>Just to make sure I understand that right - this void complex would be the only new complex we're gaining, right? And it has a unique map to every other complex, but no other complex has a map to it - so categorically, what this would do is freely adjoin an initial object to a category that already has one?</p>\n</blockquote>\n<p>My reading was the other way around. I believe the definition in the original message allows void but not irrelevant. Irrelevant seems useful to have (you want a bottom element/closure under intersection) and void I have no idea if it‚Äôs ever useful</p>",
        "id": 573325117,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1770825530
    },
    {
        "content": "<p>Oh, right - void is the initial object in both categories then I guess, and irrelevant a postinitial object with unique maps to everything but void. Looks like the category you get is still isomorphic to the usual category of simplicial complexes with an initial object adjoined though, what I got wrong is just which object is called what</p>",
        "id": 573327212,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1770826006
    },
    {
        "content": "<p>Dimension for simplicial complexes seems complicated. We already have the irrelevant complex which has, I think, dimension -1, and the question is whether to allow the void complex (with an even lower dimension?). But also we can have complexes with no bound on the size of their faces, so I guess it is not even possible to define dimension as a function at all currently, perhaps this is something else we want to change.</p>",
        "id": 573371169,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1770838281
    },
    {
        "content": "<p><code>WithBot (WithBot Nat)</code> incoming</p>",
        "id": 573373849,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770839243
    },
    {
        "content": "<p><code>WithBot (WithBot ENat)</code> in order to cover complexes without an dimension bound as well :)</p>",
        "id": 573379866,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1770841363
    },
    {
        "content": "<p>I‚Äôm not sure we need void. For example, <a href=\"https://en.wikipedia.org/wiki/Independence_system\">https://en.wikipedia.org/wiki/Independence_system</a> explicitly disallows it. Is there some natural construction by which you get a void complex back?</p>",
        "id": 573380724,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1770841638
    },
    {
        "content": "<p>Void just feels very odd to me, defining a simplicial cone operator for example doesn‚Äôt behave very well with it, the normal construction would force you to define the cone of void as a point and then you‚Äôve gone up 2 in dimension and it‚Äôs equal to the cone of the irrelevant complex. You could define it to be the irrelevant complex but this feels arbitrary</p>",
        "id": 573381469,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1770841910
    },
    {
        "content": "<p>I guess I don't quite understand the join of simplicial complexes (cones are just joins with a point, right?) well enough yet: without (-1)-dimensional faces I would've defined it as \"a set is a face of the join of K and L iff it is a face of K, a face of L or the disjoint union of a face of K with a face of L\", and I briefly thought that if you include the (-1)-dimensional face this simplifies to \"the faces of the join of K and L are precisely the disjoint unions of faces of K with faces of L\", but then due to void having no faces any join with void would have no faces either, which I feel would be bad because then the set of vertices of a join is suddenly no longer the disjoint union of the two vertex sets</p>",
        "id": 573389149,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1770844722
    },
    {
        "content": "<p>At least abstractly, I feel like void is very natural to include though. Simplicial complexes without empty faces can be viewed (up to equivalence of categories) as concrete presheaves on the category of nonempty finite sets, and simplicial complexes with potentially empty faces as concrete presheaves on the full category of finite sets: in both cases the initial object is the constant presheaf on the empty set, i.e. a complex with no faces at all. Since such a concrete presheaf exists on any concrete site, I don't think it's possible to maintain this view of simplicial complexes as concrete presheaves while disallowing void</p>",
        "id": 573390952,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1770845493
    },
    {
        "content": "<p>In my experience, the void and the irrelevant simplicial complex are <em>very</em> different.</p>\n<p>The void complex, the one that does not even contain the empty face, is \"contractible\", while the irrelevant complex is \"the <code>-1</code>-dimensional sphere\".</p>\n<p>You can also tell the difference between them by computing the Euler characteristic of their face complexes.</p>\n<p>However, I am not sure why there would have to be two nested <code>WithBot</code>s.  Maybe it is enough to have <code>-1</code>, and above.  Whether or not you want to add an infinity is a different matter.</p>",
        "id": 573393185,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1770846490
    },
    {
        "content": "<p>clearly the void complex is -2 dimensional</p>",
        "id": 573394203,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770846914
    },
    {
        "content": "<p>I would have said that since its suspension is the 0-dimensional sphere and suspension increases dimension by 1, that its dimension would be -1.</p>",
        "id": 573394474,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1770847011
    },
    {
        "content": "<p>Ah, sorry, <em>void</em>, not <em>irrelevant</em>!</p>",
        "id": 573394563,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1770847044
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Definition.20of.20Simplicial.20Complex/near/573393185\">said</a>:</p>\n<blockquote>\n<p>The void complex, the one that does not even contain the empty face, is \"contractible\", while the irrelevant complex is \"the <code>-1</code>-dimensional sphere\".</p>\n</blockquote>\n<p>What is \"contractible\"?</p>",
        "id": 573394773,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770847134
    },
    {
        "content": "<p>A space is contractible is the identity map is homotopic to a constant map.</p>",
        "id": 573395043,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1770847231
    },
    {
        "content": "<p>However, in the case of abstract simplicial complexes, you can read off a lot of topological information from the face complex and that normally works well also for the \"degenerate\" cases, giving you ways into getting induction arguments for instance starting at the void or irrelevant complex and yielding meaningful information for all complexes/</p>",
        "id": 573395289,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1770847311
    },
    {
        "content": "<p>I don't think the void complex would be <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContractibleSpace#doc\">docs#ContractibleSpace</a></p>",
        "id": 573395995,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770847592
    },
    {
        "content": "<p>because it has no vertices</p>",
        "id": 573396066,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770847620
    },
    {
        "content": "<p>I think that it would be according to the wikipedia definition of contractible:</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Contractible_space\">https://en.wikipedia.org/wiki/Contractible_space</a></p>",
        "id": 573396452,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1770847784
    },
    {
        "content": "<p>Mathlib uses the definition \"homotopy-equivalent to a point\", so every contractible space is in particular nonempty</p>",
        "id": 573396878,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1770847951
    },
    {
        "content": "<p>I think it is standard to require contractible spaces to be nonempty</p>",
        "id": 573397105,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1770848043
    },
    {
        "content": "<p>The empty space is only \"precontractible\".</p>",
        "id": 573660957,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1770955463
    },
    {
        "content": "<p>Let me mention that the choice of allowing empty in simplicial complexes has come up a few times in the past:</p>\n<ul>\n<li><a class=\"message-link\" href=\"/#narrow/channel/116395-maths/topic/Simplicial.20complex/near/256769127\">#maths &gt; Simplicial complex @ üí¨</a> </li>\n<li><a class=\"message-link\" href=\"/#narrow/channel/144837-PR-reviews/topic/.239762.20simplicial.20complex/near/258831362\">#PR reviews &gt; #9762 simplicial complex @ üí¨</a> </li>\n<li><a class=\"message-link\" href=\"/#narrow/channel/116395-maths/topic/Abstract.20Simplicial.20Complex/near/457400690\">#maths &gt; Abstract Simplicial Complex @ üí¨</a></li>\n</ul>",
        "id": 573661856,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1770956066
    }
]