[
    {
        "content": "<p>I am running into the following error working with terminal objects in a category (definition doesn't depend on cartesian closed but it is minimal reproducible example)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Closed</span><span class=\"bp\">.</span><span class=\"n\">Cartesian</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory</span><span class=\"w\"> </span><span class=\"n\">Limits</span><span class=\"w\"> </span><span class=\"n\">CartesianClosed</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">mul_points</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HasFiniteProducts</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">⊤_</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">⊤_</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"bp\">⊤_</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⨯</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">diag</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⊤_</span><span class=\"n\">C</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">≫</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">prod</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">compiler</span><span class=\"w\"> </span><span class=\"n\">IR</span><span class=\"w\"> </span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">mul_points</span><span class=\"bp\">._</span><span class=\"n\">rarg'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unknown</span><span class=\"w\"> </span><span class=\"n\">declaration</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">CategoryTheory</span><span class=\"bp\">.</span><span class=\"n\">Limits</span><span class=\"bp\">.</span><span class=\"n\">terminal'</span>\n</code></pre></div>",
        "id": 464905150,
        "sender_full_name": "mdnestor",
        "timestamp": 1724536545
    },
    {
        "content": "<p>that's lean very badly trying to say \"you forgot <code>noncomputable</code>\"</p>",
        "id": 464905945,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1724537289
    },
    {
        "content": "<p>makes sense! thank you</p>",
        "id": 464906168,
        "sender_full_name": "mdnestor",
        "timestamp": 1724537524
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"519306\">mdnestor</span> has marked this topic as resolved.</p>",
        "id": 464906181,
        "sender_full_name": "Notification Bot",
        "timestamp": 1724537527
    },
    {
        "content": "<p>You should thumbs up the bug to make the error message nicer for this.</p>",
        "id": 464907005,
        "sender_full_name": "Julian Berman",
        "timestamp": 1724538423
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/issues/1785\">https://github.com/leanprover/lean4/issues/1785</a> this one -- which it looks like it's been a full 5 hours since someone else ran into :)</p>",
        "id": 464907039,
        "sender_full_name": "Julian Berman",
        "timestamp": 1724538479
    },
    {
        "content": "<p>(Oh, nice, which it looks like Kyle has a PR open to fix.)</p>",
        "id": 464907120,
        "sender_full_name": "Julian Berman",
        "timestamp": 1724538582
    }
]