[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/21546\">#21546</a>, I have proved two trivial lemmas that say that compute the degree and the leading coefficient of a polynomial when the ring is a subsingleton (hence the polynomial is 0). The only reason I added those lemmas is that the <code>nontriviality</code> tactic doesn't conclude if it isn't informed about these lemmas.</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/e65ecd800c3065b3f9468cab71b412ca6071f3d1/Mathlib/RingTheory/MvPolynomial/MonomialOrder.lean#L508\">https://github.com/leanprover-community/mathlib4/blob/e65ecd800c3065b3f9468cab71b412ca6071f3d1/Mathlib/RingTheory/MvPolynomial/MonomialOrder.lean#L508</a></p>",
        "id": 500420511,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1739890515
    },
    {
        "content": "<p>(In his review, <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> managed to convince me that it is not reasonable to translate any single lemma for the zero object in a ring to a lemma for arbitrary objects on subsingletons, but in this case I need it.)</p>",
        "id": 500420879,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1739890591
    },
    {
        "content": "<p>Bringing the conversation back from github.</p>\n<p><span class=\"user-mention\" data-user-id=\"366779\">@Jz Pan</span> <a href=\"https://github.com/leanprover-community/mathlib4/pull/21546#discussion_r1959984625\">said</a>:</p>\n<blockquote>\n<p>There is a problem that we have both <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/One/Defs.html#Subsingleton.eq_one\">Subsingleton.eq_one</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/One/Defs.html#Subsingleton.eq_zero\">Subsingleton.eq_zero</a>. Maybe neither of them should be <code>@[nontriviality]</code> lemmas, as if it has both one and zero, there will be an infinity loop. So maybe <code>@[nontriviality] degree_subsingleton</code> is a reasonable choice.</p>\n</blockquote>\n<p>But then we're back to writing a <code>nontriviality</code> lemma computing <code>f 0</code> for every single function <code>f</code></p>",
        "id": 500429225,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1739892642
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/nontriviality.20and.20lemmas.20for.20subsingleton/near/500429225\">said</a>:</p>\n<blockquote>\n<p>But then we're back to writing a <code>nontriviality</code> lemma computing <code>f 0</code> for every single function <code>f</code></p>\n</blockquote>\n<p>I don't understand what do you mean.</p>\n<p>At least for <code>Polynomial</code> there are already <code>@[nontriviality]</code> lemmas: <a href=\"https://loogle.lean-lang.org/?q=Polynomial%2C+Subsingleton\">https://loogle.lean-lang.org/?q=Polynomial%2C+Subsingleton</a> and I don't find reasons why we shouldn't add it. The <code>nontriviality R</code> tactics only searches <code>@[nontriviality]</code> lemmas with <code>Subsingleton R</code> as an assumption, which I think wouldn't slow down if we add <code>MvPolynomial.degree_of_subsingleton</code> as a <code>@[nontriviality]</code> lemma.</p>\n<p>They are not <code>@[simp]</code>, though. So perhaps we should remove <code>@[simp]</code> from the lemma. Also, for the consistent of the naming, it should be named <code>MvPolynomial.degree_of_subsingleton</code>, i.e. there is an <code>of</code>.</p>",
        "id": 500433672,
        "sender_full_name": "Jz Pan",
        "timestamp": 1739893802
    },
    {
        "content": "<p>In essence, you are arguing that for every function <code>foo : α → β</code>, we should write <code>@[nontriviality] lemma foo_of_subsingleton [Subsingleton α] (a : α) : f a = something_equal_to_f_0</code></p>",
        "id": 500434038,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1739893911
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/nontriviality.20and.20lemmas.20for.20subsingleton/near/500434038\">said</a>:</p>\n<blockquote>\n<p>In essence, you are arguing that for every function <code>foo : α → β</code>, we should write <code>@[nontriviality] lemma foo_of_subsingleton [Subsingleton α] (a : α) : f a = something_equal_to_f_0</code></p>\n</blockquote>\n<p>... if and only if <code>f 0 = XXX</code> is already a <code>@[simp]</code> lemma and <code>Nontrivial α</code> use case is common.</p>\n<p>Yes I admit that it's a limitation of <code>nontriviality</code> tactics: if there is <code>f x</code> with <code>x : α</code> and <code>[Subsingleton α]</code>, it should try to see if there are <code>@[simp]</code> lemmas of form <code>f y = XXX</code> where <code>y</code> is any other term of type <code>α</code> (which must be equal to <code>x</code>). But for now I think add <code>XXX_of_subsingleton</code> as <code>@[nontriviality]</code> lemmas is a useful workaround.</p>",
        "id": 500440297,
        "sender_full_name": "Jz Pan",
        "timestamp": 1739895581
    }
]