[
    {
        "content": "<p>As we're (slowly) working through Iwaniec-Kowalski (see <a href=\"https://alexkontorovich.github.io/PrimeNumberTheoremAnd/blueprint/IK-chapter.html\">here</a> for Ch. 1), we realized that the <code>σ</code> function (sum of divisor powers) is currently defined as an <code>ArithmeticFunction</code> where the powers <code>k</code> (and hence codomain) are the naturals. There's a lot of API already developed in that setting. But for things like Fourier coefficients of nonholomorphic Eisenstein series (e.g.), we'll want to allow <code>k</code> to be a complex number, and hence <code>σ</code> to take complex values. In the short term, we made our own definition:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">sigmaC</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HPow</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ArithmeticFunction</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">divisors</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">s</span>\n<span class=\"w\">  </span><span class=\"n\">map_zero'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n</code></pre></div>\n<p>which can handle complex or natural exponents. But before we get too far, it'd be great to get community input on whether it'd be better to refactor the existing <code>σ</code> function? <span class=\"user-mention\" data-user-id=\"479359\">@Michael Stoll</span>  <span class=\"user-mention\" data-user-id=\"481963\">@David Loeffler</span></p>",
        "id": 573379139,
        "sender_full_name": "Alex Kontorovich",
        "timestamp": 1770841098
    },
    {
        "content": "<p>My gut feeling is that we should keep the version with natural exponents as converting between <code>pow</code> and <code>cpow</code> is a bit of a hassle.<br>\nBut it would certainly be OK to use the more general one version to refactor proofs of API lemmas for the natural exponent version (if this gives simpler proofs, which I'm not necessarily convinced of).</p>",
        "id": 573384231,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1770842976
    }
]