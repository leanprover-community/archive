[
    {
        "content": "<p>MvPolynomials are defined by the following</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">AddMonoidAlgebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>On the other hand MvPowerseries does not require that R is commutative (or even a Semiring for that matter). This means we can only use truncation when we specialize R to a CommSemiring. I see no reason why this is the case?</p>",
        "id": 573769606,
        "sender_full_name": "William Coram",
        "timestamp": 1770996524
    },
    {
        "content": "<p>I see no reason either. Feel free to change</p>",
        "id": 573774599,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1770997799
    },
    {
        "content": "<p>Note that my plan in the not-so-far future is to turn <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MvPolynomial#doc\">docs#MvPolynomial</a> into an <code>abbrev</code> and remove most of its API (in favour of the more general <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddMonoidAlgebra#doc\">docs#AddMonoidAlgebra</a> one)</p>",
        "id": 573774827,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1770997863
    },
    {
        "content": "<p>Sounds good. I'll try and make a PR this weekend addressing this.</p>",
        "id": 573777207,
        "sender_full_name": "William Coram",
        "timestamp": 1770998544
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddMonoidAlgebra#doc\">docs#AddMonoidAlgebra</a> -- indeed, only uses <code>Semiring</code> so refactoring the def should be easy</p>",
        "id": 573794158,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1771003456
    },
    {
        "content": "<blockquote>\n<p>Sounds good. I'll try and make a PR this weekend addressing this.</p>\n</blockquote>\n<p>So this turns out to be a lot more work than expected. I may get around to this, or leave it to Yaël when they do their refactor.</p>",
        "id": 575541794,
        "sender_full_name": "William Coram",
        "timestamp": 1771939885
    },
    {
        "content": "<p>I think we tried this many years ago</p>",
        "id": 575644737,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1771968480
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span>  Why do you think having it as an <code>abbrev</code> is better?</p>",
        "id": 575653246,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771972016
    },
    {
        "content": "<p>My reasoning is that there are no semantic difference between <code>MvPolynomial</code> and <code>AddMonoidAlgebra</code>. A multivariate polynomial <em>is</em> an element of some add monoid algebra, while eg an element of an add monoid algebra <em>can be represented as</em> a finitely supported function.</p>",
        "id": 575659128,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1771974987
    },
    {
        "content": "<p>Now that Lean is becoming stricter about type synonyms, the halfway situation <code>MvPoynomial</code> finds itself in has become unsustainable and we need to either make it a one-field structure or an <code>abbrev</code>. I claim the former would bring unnecessary code duplication, while the latter is perfectly motivated by the mathematics.</p>",
        "id": 575659396,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1771975131
    }
]