[
    {
        "content": "<p>At the moment <code>Mathlib.Order.Minimal</code> defines <code>maximals r s : Set α</code> and <code>minimals r s : Set α</code> <br>\nfor <code>r : α → α → Prop</code> and <code>s : Set α</code>. This is awkward to use in the common case where <code>s = SetOf P</code>. </p>\n<p>I'd like to refactor things to have a predicate <code>Maximal r P : α → Prop</code> where <code>P : α → Prop</code> instead. This will allow for good API with dot notation,  and can be later be used to unify ad hoc expressions of max/minimality in places like  <code>LinearIndependent.Maximal</code> and <code>Set.Finite.exists_maximal_wrt</code>. </p>\n<p>I wanted to run a couple of questions by people. </p>\n<ul>\n<li>Should the existing <code>maximals</code> and <code>minimals</code> remain as definitions in terms of the new <code>Maximal</code>/<code>Minimal</code>, or should they be replaced entirely by   <code>{x | Maximal r (· ∈ s) x}</code> instead? </li>\n<li>Should <code>Maximal r P x</code> instead be <code>Maximal P x</code> with a <code>[Preorder α]</code>, as implemented in terms <br>\nof an auxiliary less-used <code>MaximalWrt r P x</code>? Most uses of <code>Maximal</code> are in practice with an existing<br>\npreorder <code>(· ≤ ·)</code>; the exception of <code>α = Set β</code> can be easily smoothed over with API.</li>\n</ul>",
        "id": 450696755,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1720700990
    },
    {
        "content": "<ul>\n<li>Probably not</li>\n<li>I think one of my motivations for <code>maximals</code>/<code>minimals</code> was Zorn's lemma, which in mathlib has an unbundled relation version, so it might be nice to not assume <code>Preorder</code>. On the other hand I'm not a huge fan of unbundled preorder relations... I think you could just specialise everything to <code>Preorder</code> without anyone complaining</li>\n</ul>",
        "id": 450697907,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1720701345
    },
    {
        "content": "<p>One motivation for having sets (rather than indexed sets) for bases of vector spaces is that then you can prove every vector space has a basis quite nicely with Zorn's lemma, but every single other use of bases seems to prefer the indexed version. Initially I was in two minds about what a basis should be but now I'm absolutely convinced that Zorn was leading me astray here.</p>",
        "id": 450749471,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720713998
    },
    {
        "content": "<p>Yes, sets for bases and linear independence are also a complete no-go for matroid theory. If you have a non-injective function <code>f : α → W</code> for a vector space <code>W</code>, then this gives a matroid in which any two distinct elements in <code>f ⁻¹' {v}</code> form an independent set. It is impossible to express this idea if independence isn't indexed.</p>",
        "id": 450759409,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1720716672
    },
    {
        "content": "<p>just weighing in on vector spaces as a mathematician: when we say {v, w} is linearly independent iff v and w are not vector multiples of each other, we're implicitly assuming linear combinations are defined in terms of multisets (or some other indexed structure)</p>",
        "id": 450836513,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1720742074
    },
    {
        "content": "<p>Since {v, v} = {v} is linearly independent as a set if v ≠ 0</p>",
        "id": 450836521,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1720742087
    },
    {
        "content": "<p>Yup. It’s certainly a technicality that we carefully avoid talking about when teaching linear algebra.</p>",
        "id": 450836604,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1720742157
    },
    {
        "content": "<p>I was taught linear algebra by <span class=\"user-mention silent\" data-user-id=\"479731\">Lenny Taelman</span> who <em>did</em> point these things out to us (-;</p>",
        "id": 450868895,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1720756450
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/14721\">#14721</a>. Also see <a href=\"#narrow/stream/144837-PR-reviews/topic/.2314721.20change.20minimality.20to.20a.20predicate/near/451240312\">the PR review thread</a>. </p>\n<p>Reviews appreciated!</p>",
        "id": 451240442,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1720915784
    }
]