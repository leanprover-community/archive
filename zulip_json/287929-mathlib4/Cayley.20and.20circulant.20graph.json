[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/287929-mathlib4/topic/NormedGroup.20convention.20in.20Mathlib/near/572833228\">said</a>:</p>\n<blockquote>\n<p>let me point out that mathlib's definition for the cayley graph (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.circulantGraph#doc\">docs#SimpleGraph.circulantGraph</a>, horrible name imo)</p>\n</blockquote>\n<p>That's because this is the <a href=\"https://en.wikipedia.org/wiki/Circulant_graph\">circulant graph</a> rather than the general cayley graph!</p>",
        "id": 572839048,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1770656716
    },
    {
        "content": "<p>why is it that not (the general definition for) the cayley graph?</p>",
        "id": 572842259,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770657501
    },
    {
        "content": "<p>the definition in mathlib seems like the exact definition of the cayley graph, modulo commutativity/existance of inverse</p>",
        "id": 572842701,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770657609
    },
    {
        "content": "<p>and if i can trust the wikipedia definition, <a href=\"\">docs#circulantGraph</a> is only a circulant graph when the group is cyclic</p>",
        "id": 572843531,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770657862
    },
    {
        "content": "<p>(moved this discussion since it's unrelated to the previous)</p>",
        "id": 572844096,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1770657990
    },
    {
        "content": "<p>Yeah, I think you're right - it was intended to be a general definition of circulant graph but I hadn't realised it ended up being Cayley graphs! There's still a distinction in that Cayley graphs typically want their edges labelled by the generator which corresponds to it, and Cayley graphs should be allowed to be multiplicative. But you're right that the current version is essentially an unlabelled Cayley graph! (The history here is that I wanted Paley graphs for computing small Ramsey numbers, and those are nicely generalised as circulant graphs, and cycle graphs are too)</p>",
        "id": 572844966,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1770658172
    },
    {
        "content": "<p>should i make a renaming/generalizing PR?</p>",
        "id": 572845689,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770658344
    },
    {
        "content": "<p>By \"generalizing\" do you mean <code>@[to_additive]</code>?</p>",
        "id": 572845836,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770658388
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cayley.20and.20circulant.20graph/near/572845689\">said</a>:</p>\n<blockquote>\n<p>should i make a renaming/generalizing PR?</p>\n</blockquote>\n<p>Yeah that'd be good :)</p>",
        "id": 572845876,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1770658398
    },
    {
        "content": "<p>yes, and also generalizing to a <code>Semigroup</code> or even <code>Mul</code> context</p>",
        "id": 572845938,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770658416
    },
    {
        "content": "<p>although to be honest, that might get a bit much for a single PR...</p>",
        "id": 572846403,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770658551
    },
    {
        "content": "<p>as in, having <code>SimpleGraph.cayley</code> in the <code>Circulant.lean</code> folder might be confusing...</p>",
        "id": 572846594,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770658602
    },
    {
        "content": "<p>That sounds good, but it's worth noting that while this file is barely imported I'd rather it didn't accrue many imports, so that it'll still be okay to import it from other places without it being a significant import</p>",
        "id": 572846680,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770658629
    },
    {
        "content": "<p>let me see where i get...</p>",
        "id": 572846821,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770658673
    },
    {
        "content": "<p>Bear in mind that the current circulant graph is used to define the cycle graph, and as Snir says, that probably shouldn't have too many big imports. It might be reasonable to have the defs in one file, just enough to get (actual) circulant and cycle graphs, and put the group-theoretically-interesting stuff in a later file</p>",
        "id": 572847104,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1770658764
    },
    {
        "content": "<p>If there are nice results to be had that use imports from algebra maybe separating <code>cycleGraph</code> from <code>circulantGraph</code> is a good solution</p>",
        "id": 572847111,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770658766
    },
    {
        "content": "<p>/poll What should the PR do? (also naming-wise)<br>\ncreate <code>SimpleGraph.cayley</code><br>\ncreate <code>SimpleGraph.mulCayley</code><br>\ncreate <code>SimpleGraph.addCayley</code><br>\nadd API (free space for the bingoers)<br>\nrename the file/create a folder <code>Cayley.lean</code><br>\nrename add a different file/folder <code>Cayley.lean</code></p>",
        "id": 572847581,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770658882
    },
    {
        "content": "<p>I've picked the options I think should happen, at the moment I don't have a strong preference whether it's one or two PRs.</p>",
        "id": 572847814,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1770658937
    },
    {
        "content": "<p>Without labelled generators it seems difficult to use in many of the places you'd use a Cayley graph. Incidentally I had at some point started formalizing some theory for cayley graphs <a href=\"https://github.com/vlad902/misc-lean-proofs/blob/main/MiscLeanProofs/CayleyGraph.lean\">here</a> but I think the feedback I got was the right generality was to formalize Schreier coset graphs <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/How.20to.20structure.20Cayley.20graph.20API/near/537885578\">#mathlib4 &gt; How to structure Cayley graph API @ ðŸ’¬</a> (or at the very least they really should be defined for non-simple digraphs where we have no API.)</p>",
        "id": 572865112,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1770664206
    },
    {
        "content": "<p>Anyways, the cycle graph should probably be redefined to drop the import requirements on groups. I have two PRs related to cycleGraphs right now so I'd be happy to take that (independent of whatever choice is made above)</p>",
        "id": 572865428,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1770664297
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"761203\">Vlad Tsyrklevich</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cayley.20and.20circulant.20graph/near/572865112\">said</a>:</p>\n<blockquote>\n<p>the feedback I got was the right generality was to formalize Schreier coset graphs</p>\n</blockquote>\n<p>in the sense that you'd define <code>Adj u v</code> via <code>âˆƒ g, g â€¢ u = v</code>? (i'm not very familiar with the definitions in this field)<br>\nI've thought about this, but i'm not sure how to formally generalize the fact that you want <code>G</code> to induce a (left) graph action if <code>G</code> is not commutative?</p>",
        "id": 572872399,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770666466
    },
    {
        "content": "<p>informally, you could say \"let G have a left and right action on X\" such that <code>(g â€¢&gt; u) &lt;â€¢ f = g â€¢&gt; (u &lt;â€¢ f)</code>, define the graph using the right action, and show that the left action induces a graph hom (modulo one of the actions being cancellative because simple graphs are irreflexive), but i'm not sure what the right phrasing in lean would be</p>",
        "id": 572873681,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770666886
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"761203\">Vlad Tsyrklevich</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cayley.20and.20circulant.20graph/near/572865112\">said</a>:</p>\n<blockquote>\n<p>Without labelled generators it seems difficult to use in many of the places you'd use a Cayley graph.</p>\n</blockquote>\n<p>If you mean edge labels, we can define a function alongside the cayley one that returns <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.EdgeLabeling#doc\">docs#SimpleGraph.EdgeLabeling</a>. For the general <code>Monoid</code> case the labeling can return a set, and for a <code>LeftCancelMonoid</code> it can return an element since it's unique.</p>",
        "id": 572895289,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770674334
    },
    {
        "content": "<p>actually it won't be unique (i think) since <code>SimpleGraph</code> isn't directed...</p>",
        "id": 572899409,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770675960
    },
    {
        "content": "<p>can someone point me to an example where one needs this kind of labeling?</p>",
        "id": 572899780,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770676071
    },
    {
        "content": "<p>for now i made a PR at <a href=\"https://github.com/leanprover-community/mathlib4/pull/35084\">#35084</a></p>",
        "id": 573039296,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1770730046
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cayley.20and.20circulant.20graph/near/572899780\">said</a>:</p>\n<blockquote>\n<p>can someone point me to an example where one needs this kind of labeling?</p>\n</blockquote>\n<p>Looking at the API for circulantGraph again I take back my statement. I misunderstood the definition and what it allowed.</p>",
        "id": 573130701,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1770751581
    },
    {
        "content": "<p>Hi! I wanted to flag that I've opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/35467\">#35467</a>, which takes the quiver-based Schreier coset graph approach mentioned by @Vlad Tsyrklevich earlier in this thread. It defines Schreier graphs, Cayley graphs with labeled edges and covering properties, connectivity, and vertex-transitivity, building on the Lean 3 PR <a href=\"https://github.com/leanprover-community/mathlib3/pull/18693\">leanprover-community/mathlib3#18693</a>.</p>\n<p>I think this complements @Edward van de Meent's <a href=\"https://github.com/leanprover-community/mathlib4/pull/35084\">#35084</a> â€” the quiver approach handles directed labeled graphs with covering theory, while mulCayley/addCayley handles the undirected SimpleGraph<br>\ncase. The PR also includes Cayley sum graphs (u + v âˆˆ s) as a separate SimpleGraph construction, which is distinct from both approaches.</p>\n<p>Happy to coordinate if there are any concerns about overlap!</p>",
        "id": 574418048,
        "sender_full_name": "Daniel Zhou",
        "timestamp": 1771380681
    }
]