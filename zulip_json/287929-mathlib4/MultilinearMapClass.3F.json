[
    {
        "content": "<p>I've started looking into adding <code>MultilinearMapClass</code> to avoid code duplication between <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MultilinearMap#doc\">docs#MultilinearMap</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AlternatingMap#doc\">docs#AlternatingMap</a> and their <code>Continuous*</code> versions. The first obstacle is that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MultilinearMap.map_add#doc\">docs#MultilinearMap.map_add</a> doesn't needs the scalars ring, so we can't have it as a lemma for <code>MultilinearMapClass</code>. Which way is better?</p>\n<ul>\n<li>leave it as is;</li>\n<li>add <code>MultiadditiveMap</code> and <code>MultiadditiveMapClass</code>;</li>\n<li>add <code>MultiadditiveMapClass</code>, postpone adding <code>MultiadditiveMap</code> until we need it.</li>\n</ul>\n<p>While writing this, I've realized that we have a projection from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SemilinearMapClass#doc\">docs#SemilinearMapClass</a> to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddMonoidHomClass#doc\">docs#AddMonoidHomClass</a> and it works. Why? Doesn't Lean start searching for <code>SemilinearMapClass ?σ M N</code> with unknown <code>R</code>, <code>S</code>, and <code>σ : R →+* S</code> whenever it needs <code>AddMonoidHomClass</code>, which should fail?</p>",
        "id": 473127715,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727448379
    },
    {
        "content": "<p>I think it works because all the arguments to the <code>MapClass</code>es are outParams</p>",
        "id": 473131242,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727449335
    },
    {
        "content": "<p>That is, if you know the bundled type, there is only one possible domain, codomain, and relevant ring,</p>",
        "id": 473131304,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727449351
    },
    {
        "content": "<p>Either 2 or 3 sounds fine to me</p>",
        "id": 473131355,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727449364
    },
    {
        "content": "<p>Does it mean that I have 1 more option:</p>\n<ul>\n<li>make <code>map_update_add</code> a lemma about <code>MultilinearMapClass</code>?</li>\n</ul>",
        "id": 473131502,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727449407
    },
    {
        "content": "<p>Yes, I think so</p>",
        "id": 473131748,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727449470
    },
    {
        "content": "<p>Maybe that makes more sense in the short term</p>",
        "id": 473131766,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727449475
    },
    {
        "content": "<p>I think I'll go this way, then we can add <code>MultiadditiveMapClass</code>/<code>MultiadditiveMap</code> whenever we need it.</p>",
        "id": 473131903,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727449523
    },
    {
        "content": "<p>I want to rename <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MultilinearMap.map_smul#doc\">docs#MultilinearMap.map_smul</a> (about <code>f (update m i (c • x))</code>) to <code>_root_.map_update_smul</code>. How should I call <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MultilinearMap.map_update_smul#doc\">docs#MultilinearMap.map_update_smul</a> ? It's about <code>f (update (c • m) i x)</code>.</p>",
        "id": 473272760,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727492594
    },
    {
        "content": "<p><code>map_smul_update</code>? Something else?</p>",
        "id": 473272832,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1727492623
    },
    {
        "content": "<p>Map update smul left/right?</p>",
        "id": 473307191,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1727509941
    },
    {
        "content": "<p><code>map_smul_update</code> or <code>map_update_smul'</code> or Ruben\"s suggestions all seem fine to me</p>",
        "id": 473309934,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727511551
    }
]