[
    {
        "content": "<p>In functional analysis, more specifically operator algebras, one often considers topologies weaker than the norm topology. There are a plethora of these, and virtually none of them satisfy <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContinuousMul#doc\">docs#ContinuousMul</a> because multiplication is not jointly continuous, but it <em>is</em> continuous in each variable separately. Sometimes multiplication is jointly continuous on bounded sets.</p>\n<p>In fact, this separate continuity of multiplication is really the correct hypothesis for a bunch of places where we use <code>ContinuousMul</code>. E.g., it is the proper assumption for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.isClosed_centralizer#doc\">docs#Set.isClosed_centralizer</a>, but it's also the correct one for working with topological algebras. Of course, one way to spell this separate continuity is <code>ContinuousConstSMul α α</code> and <code>ContinuousConstSMul αᵐᵒᵖ α</code>, but this is painful because it means (a) you need to write down both classes whenever you want to prove something about it, and (b) all the generic lemmas are about <code>•</code> instead of <code>*</code>. I think this is very inconvenient. So, I was going to create a new class <code>ContinuousConstMul α</code> which assumes continuity in <em>each</em> variable (not just one, because that never arises in practice), but when I went to do so, I saw that the docstring for <code>ContinuousMul</code> <em>explicitly</em> recommends <code>ContinuousConstSMul</code>!</p>\n<p>I think this is terrible for anything but the absolute most basic use cases. I would like to add this <code>ContinuousConstMul</code> class and change the spelling recommendation. Do I have support?</p>",
        "id": 574964419,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771600320
    },
    {
        "content": "<p>I am planning <em>not</em> to <code>to_additive</code>-ize this, because I think separate continuity of addition never arises in practice where one does not already have joint continuity.</p>",
        "id": 574964632,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771600378
    },
    {
        "content": "<p>Defining a new class seems a good idea. what about <code>SeparatelyContinuousMul</code>?</p>",
        "id": 574969911,
        "sender_full_name": "Yoh Tanimoto",
        "timestamp": 1771601790
    },
    {
        "content": "<p>That's fine, I don't really care about the name.</p>",
        "id": 574969981,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771601810
    },
    {
        "content": "<p>I would be inclined to additivize anyway, just for the sake of <code>Additive X</code> etc</p>",
        "id": 575003994,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1771611466
    },
    {
        "content": "<p>I think you'll run into trouble if you try to additivize a proof that uses <code>instContinuousMul.toSeparatelyContinuousMul.continuous_mul_const</code> if <code>SeparatelyContinuousAdd</code> doesn't exist</p>",
        "id": 575004128,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1771611531
    },
    {
        "content": "<p>Yes, I've already decided to do that but for other resasons, just so that I can let <code>@[to_additive]</code> write the pre-existing <code>add_const</code> lemmas instead of writing them myself.</p>",
        "id": 575004144,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771611538
    },
    {
        "content": "<p>Note that <code>Additive X</code> will <del>almost</del> never come up in practice outside of the generic lemmas, because all these things where you have a separate but not jointly continuous mul have a ring structure anyway</p>",
        "id": 575004624,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771611684
    },
    {
        "content": "<p>Can the naming convention follow whatever is done for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MeasurableMul#doc\">docs#MeasurableMul</a> ?</p>",
        "id": 575072633,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1771664420
    },
    {
        "content": "<p>That would be much more disruptive, because the meaning of <code>ContinuousMul</code> would change under everyone's feet.</p>",
        "id": 575091108,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771684004
    },
    {
        "content": "<p>Another option is to rename <code>MeasurableMul</code> to <code>SeparatelyMeasurableMul</code> and set a reminder to rename <code>MeasurableMul_2</code> to <code>MeasurableMul</code> after ~6 months.</p>",
        "id": 575091198,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771684101
    },
    {
        "content": "<p>If we want to unify the names, let's worry about it later and do it the way Yury suggested with a delay. For that we'll need to decide whether we prefer <code>Separately</code> + <code>Mul</code> or <code>Mul</code> + <code>Mul\\_2</code></p>",
        "id": 575092223,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771685338
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/35589\">#35589</a></p>",
        "id": 575102414,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771695311
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/287929-mathlib4/topic/A.20.60ContinuousConstMul.60.20class/near/575091108\">said</a>:</p>\n<blockquote>\n<p>That would be much more disruptive, because the meaning of <code>ContinuousMul</code> would change under everyone's feet.</p>\n</blockquote>\n<p>I understand, but this sort of naming mismatch is of the most annoying kind. Relatedly, did you know that now is probably the last time in history where <code>ContinuousMul</code> is used so little? <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 575112542,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1771706599
    },
    {
        "content": "<p>no, why is that?</p>",
        "id": 575112742,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771706874
    },
    {
        "content": "<p>And again, I'm not saying we can't rename them, but let's not shift it under everyone's feet with no good deprecation mechanism or time in-between.</p>",
        "id": 575112810,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1771706955
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/287929-mathlib4/topic/A.20.60ContinuousConstMul.60.20class/near/575112742\">said</a>:</p>\n<blockquote>\n<p>no, why is that?</p>\n</blockquote>\n<p>I just mean that mathlib keeps on growing and that the earlier a refactor can be done the better</p>",
        "id": 575113032,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1771707294
    },
    {
        "content": "<p>I think that effect is probably worth considering on the timescale of a few months, but less important for the question of \"should this be one PR or two PRs\"</p>",
        "id": 575113792,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1771708221
    },
    {
        "content": "<p>At any rate this ought to be an easy deprecation to do later; no names will change besides the typeclass itself (and instances which are exempt)</p>",
        "id": 575113844,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1771708270
    },
    {
        "content": "<p>This is merged. So if you would like to bikeshed about coordinating naming, I'm happy to do so.</p>",
        "id": 576119337,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1772138391
    },
    {
        "content": "<p>Where did the performance improvement come from?</p>",
        "id": 576119460,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1772138436
    },
    {
        "content": "<p><span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span></p>",
        "id": 576119609,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1772138507
    }
]