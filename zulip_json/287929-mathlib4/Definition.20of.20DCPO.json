[
    {
        "content": "<p>Hello! I have been looking at the CompletePartialOrder class in Mathlib, and I was a bit surprised that the definition of directed sets does not require non-emptiness. It is typical that a directed set must be nonempty (i.e. Def 2.1.8 of Abramsky and Jung <a href=\"https://www.cs.ox.ac.uk/files/298/handbook.pdf\">https://www.cs.ox.ac.uk/files/298/handbook.pdf</a>). The supremum of an empty set must be bottom, but some posets do not have a bottom, so CompletePartialOrder in Mathlib is more like a Pointed DCPO than a regular DCPO.</p>\n<p>Does anyone know why it is like this? Would folks be open to changing the definition so that a directed set must be nonempty?</p>",
        "id": 536771563,
        "sender_full_name": "Noam Zilberstein",
        "timestamp": 1756468194
    },
    {
        "content": "<p>This seems very reasonable to me. <span class=\"user-mention\" data-user-id=\"373192\">@Christopher Hoskin</span>, thoughts?</p>",
        "id": 536772025,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1756468383
    },
    {
        "content": "<p>Great, thanks for getting back to me. If others agree, then I can start putting together a PR</p>",
        "id": 536772674,
        "sender_full_name": "Noam Zilberstein",
        "timestamp": 1756468633
    },
    {
        "content": "<p>I am also surprised that the definition of directed set does not require nonemptiness! Isn't this a standard part of the definition? Where exactly are you seeing this in mathlib?</p>",
        "id": 536775874,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756469843
    },
    {
        "content": "<p>This is the file I was looking at <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Directed.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Directed.html</a></p>",
        "id": 536776014,
        "sender_full_name": "Noam Zilberstein",
        "timestamp": 1756469894
    },
    {
        "content": "<p>maybe we can add a <code>Predirected</code> which does not require nonemptiness</p>",
        "id": 536776363,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1756470023
    },
    {
        "content": "<p>It would be nice too because if <code>DirectedOn</code> implies nonempty, then ScottContinuous would not need to require nonempty: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/ScottContinuity.html#ScottContinuous\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/ScottContinuity.html#ScottContinuous</a></p>",
        "id": 536776635,
        "sender_full_name": "Noam Zilberstein",
        "timestamp": 1756470113
    },
    {
        "content": "<p>Oh wow this is from forever ago. Although Wikipedia doesn't make it clear, directed sets should definitely be nonempty (the empty set needes an upper bound).</p>",
        "id": 536792164,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756475125
    },
    {
        "content": "<p>Although Wikipedia then goes on to claim that every totally ordered set is directed, which is a claim I am not entirely happy with because in my mental model of emptysetology totally ordered sets can definitely be empty!</p>",
        "id": 536792364,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756475192
    },
    {
        "content": "<p>The (incorrect-IMO) definition of directed goes back to the birth of mathlib3; the <a href=\"https://github.com/leanprover-community/mathlib3/commit/deb168147d4ede8848940a797753f026648501a4\">second commit</a> by Mario titled \"import content from lean/library/data and library_dev\" added it into <code>mathlib3/algebra/lattice/filter.lean</code> (with the inequality the other way around; this was changed later on).</p>",
        "id": 536795880,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1756476202
    },
    {
        "content": "<p>FWIW, I think that Abramsky &amp; Jung 1994 is the most commonly accepted reference for directed sets, so I think it makes sense to follow their definitions</p>",
        "id": 536804373,
        "sender_full_name": "Noam Zilberstein",
        "timestamp": 1756478673
    },
    {
        "content": "<p>I would be happy for non-empty to be included in the definition of directed sets - I had to add <code>d.Nonempty →</code> all over the place for Scott Continuity which was rather clunky.</p>",
        "id": 536813497,
        "sender_full_name": "Christopher Hoskin",
        "timestamp": 1756481393
    },
    {
        "content": "<p>Thanks for the discussion everyone, I will work on drafting a PR to implement this change</p>",
        "id": 537305277,
        "sender_full_name": "Noam Zilberstein",
        "timestamp": 1756825111
    }
]