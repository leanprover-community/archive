[
    {
        "content": "<p>Hi! Please let me know if this question belongs in a different channel.</p>\n<p>I tried to prove the following and found that no simple combination of simp?, exact?, ext, rw?, constructor, or apply? can prove it.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span>\n<span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">⋂</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">Iic</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>I adjusted the proposition to the following and simp? found the proof immediately.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span>\n<span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">⋂</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">Iic</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">mem_Iic</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">le_zero_iff'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">iInter_iInter_eq_left</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>I frequently run into issues with ∈ and try to avoid its use whenever possible. But in this case, using ∈ makes finding the prove significantly easier.</p>\n<p>So, what is the critical difference between these two examples? Why is one easier to prove than the other?</p>\n<p>Thank you very much<br>\nMichael</p>",
        "id": 523392781,
        "sender_full_name": "Michael Lane",
        "timestamp": 1749602072
    },
    {
        "content": "<p>In the first one, the set <code>Finset.Iic (0 : Fin n)</code> is implicitly being turned into a type using a coercion. Then, <code>i : Finset.Iic (0 : Fin n)</code> is a term of the set-as-a-type. You can think of <code>i</code> as being an ordered pair, consisting of a term of <code>Fin n</code> and a proof of <code>i ∈ Finset.Iic (0 : Fin n)</code>.</p>\n<p>In the second one, the intersection notation is actually short for <code>⋂ (i : Fin n), ⋂ (h : i ∈ Finset.Iic (0 : Fin n)), f i</code>, and it's a way mathlib encodes bounded intersections. Yes, that's an intersection over all proofs of <code>i ∈ Finset.Iic (0 : Fin n)</code>! When there's a proof the inner intersection is equivalent to <code>f i</code>, but when there's no proof it's <code>Set.univ</code>.</p>",
        "id": 523393053,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1749602328
    },
    {
        "content": "<p>In the first one, it's actually something like <code>Set.iInter fun (i : ↥(Finset.Iic (0 : Fin n))) =&gt; f ↑i</code>, note the <code>↑i</code>. This makes it hard to simplify away since you have this dependence.</p>",
        "id": 523393250,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1749602528
    },
    {
        "content": "<p>I see, thanks! So if something starts as a set (e.g. <code>Finset</code>), then I should use ∈ to keep it as a set, lest the terms become very confusing.</p>",
        "id": 523393554,
        "sender_full_name": "Michael Lane",
        "timestamp": 1749602825
    },
    {
        "content": "<p>Yeah that would be a good rule of thumb. Moving from terms to types just adds an extra layer of complexity.</p>",
        "id": 523393655,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1749602943
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"927576\">Michael Lane</span> has marked this topic as resolved.</p>",
        "id": 523407441,
        "sender_full_name": "Notification Bot",
        "timestamp": 1749613861
    }
]