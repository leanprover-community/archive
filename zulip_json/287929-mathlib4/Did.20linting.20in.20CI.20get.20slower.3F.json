[
    {
        "content": "<p>Watching CI runs, I got the impression that the \"lint mathlib\" step got noticeably slower: until very recently (last week or so), it took a bit over 4 minutes, now it is a bit over 5 minutes. Is this just because Mathlib has been growing a lot, or are there deeper reasons?</p>",
        "id": 482438883,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1731603293
    },
    {
        "content": "<p>It seems to approach 6 minutes by now...</p>",
        "id": 483787953,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1732222927
    },
    {
        "content": "<p>Wild guess: is <a href=\"https://github.com/leanprover-community/mathlib4/pull/18033\">#18033</a> related? (Pending fix in <a href=\"https://github.com/leanprover-community/mathlib4/pull/19260\">#19260</a>.)</p>",
        "id": 483792201,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732224694
    },
    {
        "content": "<p>Getting some data: <a href=\"http://speed.lean-lang.org/mathlib4/repo-detail/e7b27246-a3e6-496a-b552-ff4b45c7236e\">the speed-center reports</a> that the linting step did not get much slower in the past week.</p>",
        "id": 483792338,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732224752
    },
    {
        "content": "<p>It looks like there has been a slow but fairly steady increase (in wall clock time) since mid-October.</p>",
        "id": 483792807,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1732224958
    },
    {
        "content": "<p>Looking at all of November, <a href=\"https://github.com/leanprover-community/mathlib4/pull/17904\">#17904</a> seems to have increased linting instructions by ~4-5% (roughly corresponding to a 15s wall-time increase).</p>",
        "id": 483792874,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732224967
    },
    {
        "content": "<p>(Wall-clock times are fairly noisy; instructions are more stable and seem well-correlated across that time interval.)</p>",
        "id": 483793020,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732225034
    },
    {
        "content": "<p>Sure, but wall-clock time is what you see on the CI run.</p>",
        "id": 483793105,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1732225077
    },
    {
        "content": "<p>Agreed. My point is: for pinpointing regressions, instructions can be more helpful.</p>",
        "id": 483794192,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732225469
    },
    {
        "content": "<p>(It is still <em>much</em> better than in the good old final days of mathlib3, when linting took almost an hour each time...)</p>",
        "id": 483794343,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1732225551
    },
    {
        "content": "<p>The header linter silencing was definitely a performance fiasco, but I don't think that the linting step of CI was affected: the header linter runs during build, not in the later step, I think.</p>",
        "id": 483797981,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1732227014
    },
    {
        "content": "<p>(By the way, I don't mean to pick on your PR in particular. I also remember one PR of mine regressing things pretty badly - and getting fixes eventually.)</p>",
        "id": 483802216,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1732228922
    }
]