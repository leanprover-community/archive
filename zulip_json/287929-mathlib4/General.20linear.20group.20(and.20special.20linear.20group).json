[
    {
        "content": "<p>In mathlib, the general linear group exists </p>\n<ul>\n<li>for matrices, as the unit elements of the matrices (although the docstring says otherwise)</li>\n<li>and accordingly for modules, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.GeneralLinearGroup#doc\">docs#LinearMap.GeneralLinearGroup</a>, the invertible linear maps from a module to itself<br>\nbut it could have been defined for modules, as the linear equivalences from a module to itself. <em>Is there a reason why not?</em></li>\n</ul>\n<p>On the other hand, the special linear group only exists for matrices, as <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.SpecialLlinearGroup#doc\">docs#Matrix.SpecialLlinearGroup</a>, a subtype of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix#doc\">docs#Matrix</a> (hence the group structure is not obvious).<br>\nThe question stems out my trying to define the special linear group for a module, where the easiest definition consists in taking a subtype of the type of linear equivalences, rather than of linear maps.</p>",
        "id": 547342759,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761588200
    },
    {
        "content": "<p>but how do you say \"determinant = 1\" for modules?</p>",
        "id": 547343481,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761588445
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.det#doc\">docs#LinearMap.det</a></p>",
        "id": 547343688,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761588518
    },
    {
        "content": "<p>it might not be a group unless the module is finite and free</p>",
        "id": 547344719,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761588877
    },
    {
        "content": "<p>hence my desire to define it as a subtype of the type of linear equivalences!</p>",
        "id": 547348105,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761590096
    },
    {
        "content": "<p>wait so what happens if the module isn't finite and free</p>",
        "id": 547351860,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761591487
    },
    {
        "content": "<p>If there is no finite basis on the module then <code>LinearMap.det</code> defaults to <code>1</code></p>",
        "id": 547352130,
        "sender_full_name": "Bryan Wang",
        "timestamp": 1761591590
    },
    {
        "content": "<p>… which is OK to define a group and remove the necessity to check one additional hypothesis.</p>",
        "id": 547352281,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761591640
    },
    {
        "content": "<p>so what should the special linear group be</p>",
        "id": 547352293,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761591645
    },
    {
        "content": "<p>I don't mind in that case. The point is to have a definition which doesn't rely on too much hypotheses and is simple enough to start the story.</p>",
        "id": 547352369,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761591669
    },
    {
        "content": "<p>isn't the special linear group also characterized as the quotient of the general linear group by the image of the units by the algebra map was there something like that</p>",
        "id": 547352742,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761591803
    },
    {
        "content": "<p>does that give you something meaningful over not a field</p>",
        "id": 547352807,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761591828
    },
    {
        "content": "<p>No, you would get the projective linear group, which is close to the special linear group, but definitely different.</p>",
        "id": 547352971,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761591889
    },
    {
        "content": "<p>oh I guess I got my matrices mixed up</p>",
        "id": 547353248,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761591994
    },
    {
        "content": "<p>I give up this matrix stuff is too complicated for now</p>",
        "id": 547354165,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761592342
    },
    {
        "content": "<p>You might have been thinking about their associated Lie algebras.</p>",
        "id": 547355407,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1761592829
    },
    {
        "content": "<p>maybe I was maybe I wasn't</p>",
        "id": 547355524,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761592866
    },
    {
        "content": "<p>I still barely understand lie algebras</p>",
        "id": 547355544,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761592872
    },
    {
        "content": "<p>I think it's bad that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.GeneralLinearGroup#doc\">docs#LinearMap.GeneralLinearGroup</a> is not defined using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearEquiv#doc\">docs#LinearEquiv</a>. It probably should be, analogously to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Equiv.Perm#doc\">docs#Equiv.Perm</a>.</p>",
        "id": 547688623,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1761736422
    },
    {
        "content": "<p>As pointed out by <span class=\"user-mention\" data-user-id=\"412682\">@Moritz Doll</span> , it would be useful to clarify the general design that we wish to have for the classical groups. He mentioned that the unitary group <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.unitaryGroup#doc\">docs#Matrix.unitaryGroup</a> is a submonoid of the monoid of matrices.</p>",
        "id": 547699955,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761740124
    },
    {
        "content": "<p>is the 0-th roots of unity of M, <code>M</code> or <code>Units M</code>? (ignore the actual definition in mathlib)</p>",
        "id": 547700090,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761740171
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=rootsOfUnity#doc\">docs#rootsOfUnity</a> is a subgroup of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Units#doc\">docs#Units</a>.</p>",
        "id": 547700218,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761740210
    },
    {
        "content": "<p>ignore the actual definition in mathlib</p>",
        "id": 547700276,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761740226
    },
    {
        "content": "<p>I am pretty sure that this borderline case doesn't exist in standard math, so mathlib can choose what is best. I believe it would be better to have an instance that <code>rootsOfUnity M</code> is a group, and then <code>Units M</code>is forced.</p>",
        "id": 547700733,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761740355
    },
    {
        "content": "<p>well in standard maths you also don't think about whether SLn is a subset of GLn or Mn^x or Mn</p>",
        "id": 547700940,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761740417
    },
    {
        "content": "<p>i think there's a tradeoff in both cases, since subtypes of \"subtypes\" are hard to work with (I know Units M isn't a subtype of M), but the instances are easier</p>",
        "id": 547701210,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761740498
    },
    {
        "content": "<p>This is not the same question: you asked whether the 0-roots of unity of a monoid <code>M</code> were <code>M</code>or <code>Units M</code>; in the former case, it won't be a group unless <code>M</code>is.</p>",
        "id": 547701240,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761740505
    },
    {
        "content": "<p>So maybe you wished to ask whether <code>rootsOfUnity 0 M</code> should be a subtype of <code>M</code> or of <code>Units M</code>?</p>",
        "id": 547701345,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761740538
    },
    {
        "content": "<p>it's a similar question where we have to choose between subtype of M or subtype of Units M</p>",
        "id": 547701347,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761740539
    },
    {
        "content": "<p>yes, \"should be\" is what i meant</p>",
        "id": 547701412,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761740563
    },
    {
        "content": "<p>Definitely, but this is not what you asked (you missed <code>subtype</code>).</p>",
        "id": 547701462,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761740580
    },
    {
        "content": "<p>A complete Bourbaki generality definition of det would be: <br>\nIf P is a finitely generated projective module over R, then the function rk(p) = dim(P \\otimes Frac(R/p)) is locally constant on Spec R, and bounded by the number of generators. Let R = \\Prod_{i} R_i, where Spec(R_i) = {p : rk(p) = i}. Define det(P) = \\Prod_{i} \\Bigwedge^i P \\otimes R_i. <br>\nThen det(P) is an invertible R-module. If f : P \\to P is an invertible linear map, then det(f) : det(P) \\to det(P) to be a unique \\lambda such that det(f) is multiplication by \\lambda.<br>\nThen you can define SL(P) correctly for any finitely generated projective P.</p>",
        "id": 547781066,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761760793
    },
    {
        "content": "<p>is the product finite?</p>",
        "id": 547781587,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761760952
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/287929-mathlib4/topic/General.20linear.20group.20.28and.20special.20linear.20group.29/near/547781587\">said</a>:</p>\n<blockquote>\n<p>is the product finite?</p>\n</blockquote>\n<p>Yes because the rank never exceeds the number of generators of P.</p>",
        "id": 547782022,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761761082
    },
    {
        "content": "<p>I look forward to seeing this in mathlib <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 547782777,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761761307
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/General.20linear.20group.20.28and.20special.20linear.20group.29/near/547781066\">said</a>:</p>\n<blockquote>\n<p>If f : P \\to P is an invertible linear map, then det(f) : det(P) \\to det(P) to be a unique \\lambda such that det(f) is multiplication by \\lambda.</p>\n</blockquote>\n<p>does this step require f to be invertible?</p>",
        "id": 547782887,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761761335
    },
    {
        "content": "<p>(That's perfectly correct, but doesn't address the question, and it would be excellent to have this generalization of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.det#doc\">docs#LinearMap.det</a>, but this is off topic.)</p>",
        "id": 547782988,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1761761357
    },
    {
        "content": "<p>maybe we can start with this part: can we prove that every map M -&gt; M where M is an invertible module is a scalar multiplication? (edit: yes i think this is fine, because you can tensor with M' to get a map R -&gt; R, which must be a scalar multiplication)</p>",
        "id": 547783045,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761761369
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/287929-mathlib4/topic/General.20linear.20group.20.28and.20special.20linear.20group.29/near/547782887\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/General.20linear.20group.20.28and.20special.20linear.20group.29/near/547781066\">said</a>:</p>\n<blockquote>\n<p>If f : P \\to P is an invertible linear map, then det(f) : det(P) \\to det(P) to be a unique \\lambda such that det(f) is multiplication by \\lambda.</p>\n</blockquote>\n<p>does this step require f to be invertible?</p>\n</blockquote>\n<p>No it does not. I was just trying to define SL, and then you would need a lemma which is saying that det carries invertible modules to invertible elements. Which is an obvious corollary of det(fg)=det(f)det(g), so I guess it didn't need stating.</p>",
        "id": 547787434,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761762794
    },
    {
        "content": "<p>Let's have a poll about how <code>GeneralLinearGroup</code> should be defined. Because it's hard to glean consensus from the above discussion.</p>",
        "id": 564062615,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1765897234
    },
    {
        "content": "<p>/poll how should <code>GeneralLinearGroup</code> be defined</p>\n<ul>\n<li>As <code>Units</code> of the endomorphism ring</li>\n<li>Using <code>LinearEquiv</code></li>\n</ul>",
        "id": 564062938,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1765897272
    },
    {
        "content": "<p>(i just want to note that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=MulAut#doc\">docs#MulAut</a> (the group of automorphisms of a group/monoid) uses <code>MulEquiv</code>, so using an \"EquivLike\" structure in this kind of place is not exactly untrodden path)</p>",
        "id": 564065390,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1765897824
    },
    {
        "content": "<p>Ok, I confess that seeing such strong consensus scares me a bit in voting differently, but I had, so let me write down  my main arguments:</p>\n<ol>\n<li>It seems to me that GL is a gadget for which one can equally well try to prove membership or consider terms on their own (unlike many other structures for which one of the two occurs much more often than the other) and the <code>Unit</code> API allows this better than the LinearEquiv one;</li>\n<li>Certain operations that are quite natural, like taking the direct limit over the dimension when defining K-theory, would require a strange operation on the modules if we carry them along in order to use LinearEquiv;</li>\n<li>When considering it as a group scheme, or even just a group-valued functor on rings, I would imagine the library to be already sufficiently complicated to make users wishing they can forget that a category of rings comes with its associated category of modules;</li>\n<li>Extending scalars gives immediately a map on matrices, and the API for units allows to basechange GL very easily. But I fear some kind of diamond if it gets a group structure both as LinearEquiv wrt the smallest ring and as LinearEquiv wrt the largest one, but that stabilize a lattice.</li>\n</ol>\n<p>On the other hand, what I wrote are arguments that (might) apply to GL_n, not to GL(V), and I agree that this would certainly need to be in Mathlib.</p>",
        "id": 564149967,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1765928015
    },
    {
        "content": "<p>Despite my inclination towards <code>LinearEquiv</code>, I would like to note that it is important to use <code>GeneralLinearGroup</code> as a group, ie, using <code>*</code> for multiplication, and not <code>.trans</code>, <code>1</code> for <code>id</code>, etc. Using <code>LinearEquiv</code> rapidly leads to two concurrent notations.</p>",
        "id": 564161681,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1765937261
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> Thanks for your careful arguments!</p>\n<p>I think your final sentence is important, and points out that maybe my poll should be more fine-grained: what to do for GL_n, and what to do for GL(V).</p>\n<p>And another takeaway is that whatever definition we end up with (in both instances of GL), we should make sure that the API makes it as easy as possible to also take the other POV.</p>",
        "id": 564172386,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1765946892
    },
    {
        "content": "<p>/poll How should the general linear group GL(V) be defined, for modules V</p>\n<ul>\n<li>As <code>Units</code> of <code>LinearMap V V</code></li>\n<li>As <code>LinearEquiv V V</code></li>\n</ul>",
        "id": 564172514,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1765947006
    },
    {
        "content": "<p>/poll How should the matrix group <code>GL_n</code> be defined (for a fintype <code>n</code>)</p>\n<ul>\n<li>As <code>Units</code> of <code>Matrix n n R</code> (current implementation)</li>\n<li>As a subtype of <code>Matrix n n R</code>, consisting of those matrices that are <code>IsUnit</code></li>\n</ul>",
        "id": 564172673,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1765947159
    },
    {
        "content": "<p>I am conflicted: I would simultaneously like to vote <code>LinearEquiv</code> for the first case, <code>Units</code> for the second, and that my two votes coincide.</p>",
        "id": 564230259,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1765971634
    },
    {
        "content": "<p>Maybe we need a new <code>InvertibleMatrix</code> type with a coercion to <code>Matrix</code> :-)</p>",
        "id": 564230507,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1765971722
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130609\">Antoine Chambert-Loir</span> <a href=\"#narrow/channel/287929-mathlib4/topic/General.20linear.20group.20.28and.20special.20linear.20group.29/near/564230259\">said</a>:</p>\n<blockquote>\n<p>I am conflicted: I would simultaneously like to vote <code>LinearEquiv</code> for the first case, <code>Units</code> for the second, and that my two votes coincide.</p>\n</blockquote>\n<p>What do you mean by \"coincide\"? I agree that it will be important to have a smooth translation from one to the second when<code>V</code> is free, but beyond that the two votes are a bit independent, no?</p>",
        "id": 564230878,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1765971845
    },
    {
        "content": "<p>I would imagine that \"coincide\" means \"if I've proved a theorem about GL(V) then I would like it apply to GL_n(R) in a completely painless fashion\", a property which the solution we're tending to in the current poll would not have.</p>",
        "id": 564231476,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1765972059
    },
    {
        "content": "<p>Well, I agree, but I think it's clear that it won't probably be \"completely painless\": we might hope that it is \"extremely smooth\", or the like. No?</p>",
        "id": 564231897,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1765972211
    },
    {
        "content": "<p><del>If they're both defined as <code>Units</code> then it probably will be completely painless.</del> Hmm, yes, even if they're both Units, we then run into the issue that we have to translate between Matrix and LinearMap. So probably you're right, we just need to make the isomorphism and having them both as Units doesn't make it rfl.</p>",
        "id": 564232016,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1765972247
    },
    {
        "content": "<p>Yes, I think that one way or another the path would be through <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/End.html#AddAut.toPerm\">AddAut.toPerm</a> (to interpret automorphisms as permutations) and then <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/End.html#Equiv.Perm.equivUnitsEnd\">Equiv.Perm.equivUnitsEnd</a> to interpret the latter as a unit.</p>",
        "id": 564232871,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1765972535
    },
    {
        "content": "<p>But it would be reasonably smooth, as it is now, where <em>some</em> of these morpshism are coercions and invisible to users.</p>",
        "id": 564233198,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1765972631
    },
    {
        "content": "<p>In my mind, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>×</mo><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">n \\times m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">×</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span> matrices <em>are</em> (meaning exactly, without any coercion or interpretation or whatever) the linear maps from <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>R</mi><mi>m</mi></msup></mrow><annotation encoding=\"application/x-tex\">R^m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span></span></span></span></span></span></span></span> to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>R</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">R^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span>.</p>",
        "id": 564346125,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1766007118
    },
    {
        "content": "<p>Well that's going to be quite some refactor!</p>",
        "id": 564349198,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1766008514
    },
    {
        "content": "<p>Note that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix#doc\">docs#Matrix</a> is defined for <em>any</em> type <code>α</code> (why the doc says <code>R</code> if it is <code>α</code> in the code?!), without any operation.</p>\n<p>You can say that this generality is a joke, and I agree, but it captures the intuition \"matrices of real numbers are just tables of real numbers\", that in my opinion is quite good.</p>",
        "id": 564352463,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1766010176
    },
    {
        "content": "<p>Anyway, I don't think we should stress too much about matrices (we should not ignore them either of course): once the basic API is there mathlib should concentrate on linear maps/equiv and use matrices only when needed in proofs.</p>",
        "id": 564353466,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1766010645
    },
    {
        "content": "<p>Well, but for algebraic purposes (as in studying representations of semi simple algebras) they might be your main focus. So I'm not sure to fully agree.</p>",
        "id": 564354806,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1766011152
    },
    {
        "content": "<p>OK, maybe I was a little too drastic, but my point is that if the transition works well for the base theory we can develop linear maps without spending too much time in keeping the two APIs perfectly aligned.</p>",
        "id": 564403477,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1766046443
    },
    {
        "content": "<p>I' ve just realised (and I apologise if that was already clear to everyone) that we've got both <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.GeneralLinearGroup#doc\">docs#Matrix.GeneralLinearGroup</a> (with notation <code>GL</code>) and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.GeneralLinearGroup#doc\">docs#LinearMap.GeneralLinearGroup</a> (but with no dedicated notation), both defined as units of the relative ring: in the latter case it is <code>(M →ₗ[R] M)ˣ</code> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearMap.GeneralLinearGroup.generalLinearEquiv#doc\">docs#LinearMap.GeneralLinearGroup.generalLinearEquiv</a> shows that these units are also (multiplicatively) isomorphic to <code>M ≃ₗ[R] M</code>.  I'm not sure I would change things, beyond perhaps</p>\n<ol>\n<li>Providing some more docs beyond the \"See also <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.GeneralLinearGroup#doc\">docs#Matrix.GeneralLinearGroup</a> \" at the begginning of  <code>Mathlib.LinearAlgebra.GeneralLinearGroup.Basic</code></li>\n<li>Providing the isomorphism between the Matrix and the LinearMap in case of a free module</li>\n<li>Perhaps most importantly, allowing the <code>GL</code> notation for both, as <code>scoped notation</code>, so that one can choose which to use and where.</li>\n</ol>",
        "id": 564415688,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1766050472
    },
    {
        "content": "<p>I think the idea is to get rid of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/GeneralLinearGroup/Basic.html#LinearMap.GeneralLinearGroup\">LinearMap.GeneralLinearGroup</a></p>",
        "id": 564416014,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1766050577
    },
    {
        "content": "<p>Yes yes, I understand, but I'm saying that with appropriate doc I would not see the need for this removal after all.</p>",
        "id": 564416272,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1766050654
    },
    {
        "content": "<p>The reason is that we have two notions that are mathematically exactly the same thing (I am talking about linear equiv and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/GeneralLinearGroup/Basic.html#LinearMap.GeneralLinearGroup\">LinearMap.GeneralLinearGroup</a>, not matrices)</p>",
        "id": 564416474,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1766050720
    },
    {
        "content": "<p>Ah, you mean that you would like to <em>define</em> <code>LinearMap.GeneralLinearGroup </code>as linear equiv on the nose, rather than as units of the endomorphism ring of the module, so that the multiplicative equiv is not needed any more?</p>",
        "id": 564416931,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1766050898
    },
    {
        "content": "<p>Yes, something like that. What is the advantage of <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/LinearAlgebra/GeneralLinearGroup/Basic.html#LinearMap.GeneralLinearGroup\">LinearMap.GeneralLinearGroup</a>? The <code>*</code> notation?</p>",
        "id": 564417170,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1766051002
    },
    {
        "content": "<p>Ah, then I 100% agree.</p>",
        "id": 564417197,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1766051017
    },
    {
        "content": "<p>(Yes, the <code>*</code> notation is handy, but it can probably simply be forced in a dedicated namespace, no?)</p>",
        "id": 564417287,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1766051052
    },
    {
        "content": "<p>My only point was that we certainly want to keep <code>Matrix.GeneralLinearGroup</code>, and to define it as units of the matrix algebra.</p>",
        "id": 564417419,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1766051099
    },
    {
        "content": "<p>Sure, for matrices this seems the best approach</p>",
        "id": 564417532,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1766051144
    },
    {
        "content": "<p>Well, there is the question if we want them to be a submonoid of matrices, but I would say no. On the other hand <code>SL</code> should be a subgroup of <code>GL</code> in my opinion.</p>",
        "id": 564417782,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1766051236
    },
    {
        "content": "<p>Them?</p>",
        "id": 564417839,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1766051255
    },
    {
        "content": "<p><code>GL</code> would be a new type, not a submonoid of <code>Mat</code>. But the same happens for <code>Rˣ</code> and <code>R</code> so it should be good.</p>",
        "id": 564418064,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1766051323
    },
    {
        "content": "<p>This is probably good also to compute the inverse, since <code>M⁻¹</code> will be packaged inside <code>M : GL</code></p>",
        "id": 564418405,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1766051422
    }
]