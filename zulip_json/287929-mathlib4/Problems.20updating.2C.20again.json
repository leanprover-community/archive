[
    {
        "content": "<p>So, to preface this, the reason for my problems this time is probably that I'm a git noob. </p>\n<p>Anyway, I was trying to add some lemmas to mathlib, so I created a local branch, worked on it and PR'ed it (<a href=\"https://github.com/leanprover-community/mathlib4/pull/9130\">#9130</a>). So far so good. But then somebody added a lemma somewhere else to simplify one of my proofs, which was great ! This lemma was PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/9137\">#9137</a> and quickly got merged.  I didn't want to keep that lemma in the wrong place in my PR, so I thought that it would be a good idea to update the copy of mathlib in my branch, and I tried to use the new <code>∀</code> menu in vscode and clicked \"project actions -&gt; update dependency\", and, well my files don't build anymore and I get this wonderful error message:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"bp\">`/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sophie</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.4.0-rc1/bin/lake setup-file /home/sophie/Lean4/mathlib4/Mathlib/LinearAlgebra/Multilinear/Basic.lean Init Mathlib.Algebra.Algebra.Basic Mathlib.Algebra.BigOperators.Order Mathlib.Data.Fintype.BigOperators Mathlib.Data.Fintype.Sort Mathlib.Data.List.FinRange Mathlib.LinearAlgebra.Pi` failed:</span>\n\n<span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">info</span><span class=\"o\">:</span> <span class=\"o\">[</span><span class=\"mi\">304</span><span class=\"bp\">/</span><span class=\"mi\">410</span><span class=\"o\">]</span> <span class=\"n\">Building</span> <span class=\"n\">Mathlib.Data.Bool.Basic</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"bp\">&gt;</span> <span class=\"n\">LEAN_PATH</span><span class=\"bp\">=./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">std</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Qq</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">aesop</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span> <span class=\"n\">LD_LIBRARY_PATH</span><span class=\"bp\">=./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">std</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Qq</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">aesop</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">Cli</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">./.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">build</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"o\">:</span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sophie</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.4.0-rc1/lib/lean:/home/sophie/.elan/toolchains/leanprover--lean4---v4.4.0-rc1/lib:./.lake/build/lib /home/sophie/.elan/toolchains/leanprover--lean4---v4.4.0-rc1/bin/lean -Dpp.unicode.fun=true -Dpp.proofs.withType=false -DautoImplicit=false -DrelaxedAutoImplicit=false ./././Mathlib/Data/Bool/Basic.lean -R ././. -o ./.lake/build/lib/Mathlib/Data/Bool/Basic.olean -i ./.lake/build/lib/Mathlib/Data/Bool/Basic.ilean -c ./.lake/build/ir/Mathlib/Data/Bool/Basic.c</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">stdout</span><span class=\"o\">:</span>\n<span class=\"bp\">./././</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">Bool</span><span class=\"bp\">/</span><span class=\"n\">Basic.lean</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">Declaration</span> <span class=\"n\">Bool.true_eq_decide_iff</span> <span class=\"n\">not</span> <span class=\"n\">found.</span>\n<span class=\"o\">(</span><span class=\"n\">add</span> <span class=\"bp\">`</span><span class=\"kd\">set_option</span> <span class=\"n\">align.precheck</span> <span class=\"n\">false</span><span class=\"bp\">`</span> <span class=\"n\">to</span> <span class=\"n\">suppress</span> <span class=\"n\">this</span> <span class=\"n\">message</span><span class=\"o\">)</span>\n<span class=\"bp\">./././</span><span class=\"n\">Mathlib</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">Bool</span><span class=\"bp\">/</span><span class=\"n\">Basic.lean</span><span class=\"o\">:</span><span class=\"mi\">51</span><span class=\"o\">:</span><span class=\"mi\">30</span><span class=\"o\">:</span> <span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">Declaration</span> <span class=\"n\">Bool.false_eq_decide_iff</span> <span class=\"n\">not</span> <span class=\"n\">found.</span>\n<span class=\"o\">(</span><span class=\"n\">add</span> <span class=\"bp\">`</span><span class=\"kd\">set_option</span> <span class=\"n\">align.precheck</span> <span class=\"n\">false</span><span class=\"bp\">`</span> <span class=\"n\">to</span> <span class=\"n\">suppress</span> <span class=\"n\">this</span> <span class=\"n\">message</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">external</span> <span class=\"n\">command</span> <span class=\"bp\">`/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">sophie</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.4.0-rc1/bin/lean` exited with code 1</span>\n</code></pre></div>\n<p>Okay, so I guess you're not supposed to update a mathlib branch the same way as a project using mathlib as a dependency (in retrospect, I guess strictly speaking mathlib is not a dependency here, so I should have expected it); I did test the  <code>∀</code> menu method on one of my regular projects just after and it worked fine. But then my questions are:<br>\n(1) Was there any way for me to get the new lemmas ? (Maybe that's actually a git question. I am not super comfortable with git as soon as I leave the basic git pull/commit/push world.)<br>\n(2) Is there a way to recover from this, or should I just scratch the PR and create a new one ?</p>",
        "id": 409023279,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703023389
    },
    {
        "content": "<p>Hm, so maybe the correct method was a <code>git fetch</code> followed by a <code>git rebase master</code>. I still don't know how to save my current branch though, unless I try going back 394 commits.</p>",
        "id": 409027955,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703025762
    },
    {
        "content": "<p><code>git rebase master</code> is signing yourself up for a world of hurt</p>",
        "id": 409028937,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703026227
    },
    {
        "content": "<p>Especially because what happens next is you get an error saying \"upstream branch has diverged\", and get tricked into running <code>git merge  master</code> which is what you should have run in the first place anyway</p>",
        "id": 409029021,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703026275
    },
    {
        "content": "<p>(the correct thing to do after a <code>rebase</code> is a <code>git push --force-with-lease</code>, but <code>rebase</code> is often a bad choice even without any mistakes)</p>",
        "id": 409029238,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703026383
    },
    {
        "content": "<p>Well now I'm trying to revert to yesterday's last commit, but there were merges in between so it's complicating my life.</p>",
        "id": 409029268,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703026397
    },
    {
        "content": "<p>Presumably the reason that \"update dependency\" failed you is that you clicked one of the items from this list without checking that it said \"mathlib\"!</p>\n<p><a href=\"/user_uploads/3121/V4Blp2KSBHtmf3bXjSkCU8HK/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/V4Blp2KSBHtmf3bXjSkCU8HK/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/V4Blp2KSBHtmf3bXjSkCU8HK/image.png\"></a></div>",
        "id": 409029334,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703026438
    },
    {
        "content": "<p>I think there's no need to; your git fu made a mess of the history and confused github, but ultimately it seems the files are probably ok</p>",
        "id": 409029453,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703026497
    },
    {
        "content": "<p>I played a trick on github to make it come to its senses</p>",
        "id": 409029476,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703026512
    },
    {
        "content": "<p>I don't remember seeing a list like that tbh, but that's quite possible...</p>",
        "id": 409029489,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703026515
    },
    {
        "content": "<p>Wait, does this mean that I should top flailing to fix the branch ? Because I was still trying.</p>",
        "id": 409029546,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703026559
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"318709\">Sophie Morel</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409029268\">said</a>:</p>\n<blockquote>\n<p>Well now I'm trying to revert to yesterday's last commit, but there were merges in between so it's complicating my life.</p>\n</blockquote>\n<p>The word <code>revert</code> is misleading here; if you make a <code>git</code> mess, <code>git revert</code> will usually only make it worse. <code>reset</code> is the command for \"throw away all this git history\". You need to be careful about pushing when you do this though, and will need the <code>--force-with-lease</code> flag</p>",
        "id": 409029606,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703026584
    },
    {
        "content": "<p>If you do decide to go this route, it looks like things start to go wrong after <code>5bf624186169319f9139df41e4b7803a20dee04a</code>; so I suggest you run</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">git</span> <span class=\"n\">reset</span> <span class=\"c1\">--hard 5bf624186169319f9139df41e4b7803a20dee04a</span>\n<span class=\"n\">git</span> <span class=\"n\">merge</span> <span class=\"n\">origin</span><span class=\"bp\">/</span><span class=\"n\">master</span>\n<span class=\"n\">git</span> <span class=\"n\">push</span> <span class=\"c1\">--force-with-lease</span>\n</code></pre></div>\n<p><strong>THIS WILL THROW AWAY ANY LOCAL CHANGES, MAKE SURE YOU ARE OK WITH THIS</strong></p>",
        "id": 409029814,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703026722
    },
    {
        "content": "<p>(But leaving things as is and cleaning up the small issues is a reasonable option too)</p>",
        "id": 409029883,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703026785
    },
    {
        "content": "<p>I don't know how to clean up. Like, I don't know what to do, at all, at this point.</p>",
        "id": 409029960,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703026805
    },
    {
        "content": "<p>And I'm okay scratching local changes, because I saved the relevant file somewhere else.</p>",
        "id": 409030010,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703026825
    },
    {
        "content": "<p>Yes, the first \"bad\" commit is 5bf624186169319f9139df41e4b7803a20dee04a</p>",
        "id": 409030134,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703026869
    },
    {
        "content": "<p>(Also, yes, I messed up some merges. I stupidly attempted to do them with vscode, and it turns out that it would have been easier to use the command line, because at least I had some experience with that...)</p>",
        "id": 409030563,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703027009
    },
    {
        "content": "<p>Beware \"intuitive\" tools, I guess.</p>",
        "id": 409030728,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703027089
    },
    {
        "content": "<p>I think my zulip was showing your messages with a long delay, sorry for the confusing message interleaving</p>",
        "id": 409030816,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703027153
    },
    {
        "content": "<p>Okay, I seem to have problems writing in my own branch. <span aria-label=\"face palm\" class=\"emoji emoji-1f926\" role=\"img\" title=\"face palm\">:face_palm:</span></p>",
        "id": 409032400,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028101
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">bolzano</span> <span class=\"bp\">~/</span><span class=\"n\">Lean4</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span> <span class=\"bp\">$</span> <span class=\"n\">git</span> <span class=\"n\">push</span> <span class=\"c1\">--force-with-lease</span>\n<span class=\"n\">To</span> <span class=\"n\">github.com</span><span class=\"o\">:</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib.git</span>\n <span class=\"bp\">!</span> <span class=\"o\">[</span><span class=\"n\">rejected</span><span class=\"o\">]</span>            <span class=\"n\">MultilinearMapContDiff</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">MultilinearMapContDiff</span> <span class=\"o\">(</span><span class=\"n\">stale</span> <span class=\"n\">info</span><span class=\"o\">)</span>\n<span class=\"n\">error</span><span class=\"o\">:</span> <span class=\"n\">failed</span> <span class=\"n\">to</span> <span class=\"n\">push</span> <span class=\"n\">some</span> <span class=\"n\">refs</span> <span class=\"n\">to</span> <span class=\"bp\">'</span><span class=\"n\">github.com</span><span class=\"o\">:</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib.git'</span>\n</code></pre></div>",
        "id": 409032717,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028287
    },
    {
        "content": "<p>This is the safety feature of force-with-lease</p>",
        "id": 409032885,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028369
    },
    {
        "content": "<p>It is telling you \"something had been pushed to your remote that you don't know about, so I'm going to refuse to throw it away\"</p>",
        "id": 409032928,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028402
    },
    {
        "content": "<p>This could be for instance another contributor making changes</p>",
        "id": 409032980,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028438
    },
    {
        "content": "<p>I don't see any activity on github though ?</p>",
        "id": 409033093,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028497
    },
    {
        "content": "<p>Do you have multiple copies of the repo?</p>",
        "id": 409033144,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028535
    },
    {
        "content": "<p>I don't think so.</p>",
        "id": 409033161,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028546
    },
    {
        "content": "<p>Sorry if I'm slow, it's half past midnight here and I've had a very long day.</p>",
        "id": 409033176,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028567
    },
    {
        "content": "<p>You can run <code>git fetch</code> to ask git to \"see\" the changes</p>",
        "id": 409033179,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028570
    },
    {
        "content": "<p>It will print out something short about the new commits it found</p>",
        "id": 409033209,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028596
    },
    {
        "content": "<p>Once you've done that git trusts that you know what you're doing and will let you overwrite whatever they were</p>",
        "id": 409033315,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028632
    },
    {
        "content": "<p>I'm trying to run it, but it's not printing anything right now.</p>",
        "id": 409033329,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028640
    },
    {
        "content": "<p>Maybe <code>git fetch origin</code></p>",
        "id": 409033357,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028661
    },
    {
        "content": "<p>Same.</p>",
        "id": 409033442,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028721
    },
    {
        "content": "<p>You can disable the safety feature by using <code>--force</code> without the <code>with-lease</code> bit</p>",
        "id": 409033500,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028739
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">bolzano</span> <span class=\"bp\">~/</span><span class=\"n\">Lean4</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span> <span class=\"bp\">$</span> <span class=\"n\">git</span> <span class=\"n\">push</span> <span class=\"c1\">--force</span>\n<span class=\"n\">Enumerating</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">101259</span><span class=\"o\">,</span> <span class=\"n\">done.</span>\n<span class=\"n\">Counting</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">101259</span><span class=\"bp\">/</span><span class=\"mi\">101259</span><span class=\"o\">),</span> <span class=\"n\">done.</span>\n<span class=\"n\">Delta</span> <span class=\"n\">compression</span> <span class=\"n\">using</span> <span class=\"n\">up</span> <span class=\"n\">to</span> <span class=\"mi\">8</span> <span class=\"n\">threads</span>\n<span class=\"n\">Compressing</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">21435</span><span class=\"bp\">/</span><span class=\"mi\">21435</span><span class=\"o\">),</span> <span class=\"n\">done.</span>\n<span class=\"n\">Writing</span> <span class=\"n\">objects</span><span class=\"o\">:</span>   <span class=\"mi\">4</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">4051</span><span class=\"bp\">/</span><span class=\"mi\">101259</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 409033589,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028807
    },
    {
        "content": "<p>I'm copying this because it seems to have stayed stuck on this 4%.</p>",
        "id": 409033605,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028825
    },
    {
        "content": "<p>What exactly is it pushing?</p>",
        "id": 409033613,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028836
    },
    {
        "content": "<p>I would cancel that</p>",
        "id": 409033637,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028843
    },
    {
        "content": "<p>Ah no, it's 7% now.</p>",
        "id": 409033667,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028847
    },
    {
        "content": "<p>Ok, cancelled.</p>",
        "id": 409033682,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028856
    },
    {
        "content": "<p>It sounds like it might be trying to force push every single branch</p>",
        "id": 409033690,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028861
    },
    {
        "content": "<p>You should specify just your branch</p>",
        "id": 409033711,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028880
    },
    {
        "content": "<p>Strange. Also, I should not have the right to push to other branches.</p>",
        "id": 409033720,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028894
    },
    {
        "content": "<p>Otherwise you would revert everyone else's work by a day or so!</p>",
        "id": 409033725,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028899
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"318709\">Sophie Morel</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409033720\">said</a>:</p>\n<blockquote>\n<p>Strange. Also, I should not have the right to push to other branches.</p>\n</blockquote>\n<p>That's usually true on GitHub, but it's not true for mathlib <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 409033777,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703028930
    },
    {
        "content": "<p>Yes, it's a very good thing that I can't do that, as we are establishing.</p>",
        "id": 409033802,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028943
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409033777\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"318709\">Sophie Morel</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409033720\">said</a>:</p>\n<blockquote>\n<p>Strange. Also, I should not have the right to push to other branches.</p>\n</blockquote>\n<p>That's usually true on GitHub, but it's not true for mathlib <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>\n</blockquote>\n<p>Wait wait wait, I can destroy other people's work ? Oh no, I will never dare push anything to mathlib again.</p>",
        "id": 409033875,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703028978
    },
    {
        "content": "<p>Yes, unfortunately you can. The only thing you can't destroy is stuff that's already merged</p>",
        "id": 409033907,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703029007
    },
    {
        "content": "<p>Aaaaaaaargh...</p>",
        "id": 409033960,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029052
    },
    {
        "content": "<p>Okay, so just to be safe, it's <code>git push --force origin BranchName</code> ?</p>",
        "id": 409033972,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029065
    },
    {
        "content": "<p>Yes, that should destroy only BranchName</p>",
        "id": 409034030,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703029085
    },
    {
        "content": "<p>Hm.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">bolzano</span> <span class=\"bp\">~/</span><span class=\"n\">Lean4</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span> <span class=\"bp\">$</span> <span class=\"n\">git</span> <span class=\"n\">push</span> <span class=\"c1\">--force origin MultilinearMapContDiff</span>\n<span class=\"n\">Enumerating</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">101259</span><span class=\"o\">,</span> <span class=\"n\">done.</span>\n<span class=\"n\">Counting</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">101259</span><span class=\"bp\">/</span><span class=\"mi\">101259</span><span class=\"o\">),</span> <span class=\"n\">done.</span>\n<span class=\"n\">Delta</span> <span class=\"n\">compression</span> <span class=\"n\">using</span> <span class=\"n\">up</span> <span class=\"n\">to</span> <span class=\"mi\">8</span> <span class=\"n\">threads</span>\n<span class=\"n\">Compressing</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">21435</span><span class=\"bp\">/</span><span class=\"mi\">21435</span><span class=\"o\">),</span> <span class=\"n\">done.</span>\n<span class=\"n\">Writing</span> <span class=\"n\">objects</span><span class=\"o\">:</span>   <span class=\"mi\">4</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">4051</span><span class=\"bp\">/</span><span class=\"mi\">101259</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 409034086,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029123
    },
    {
        "content": "<p>Doesn't look very different from the last time.</p>",
        "id": 409034098,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029133
    },
    {
        "content": "<p>Maybe last time was safe after all</p>",
        "id": 409034117,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703029144
    },
    {
        "content": "<p>This one certainly is</p>",
        "id": 409034152,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703029150
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409034152\">said</a>:</p>\n<blockquote>\n<p>This one certainly is</p>\n</blockquote>\n<p>Oh thank god.</p>",
        "id": 409034164,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029161
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"318709\">Sophie Morel</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409033875\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409033777\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"318709\">Sophie Morel</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409033720\">said</a>:</p>\n<blockquote>\n<p>Strange. Also, I should not have the right to push to other branches.</p>\n</blockquote>\n<p>That's usually true on GitHub, but it's not true for mathlib <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>\n</blockquote>\n<p>Wait wait wait, I can destroy other people's work ? Oh no, I will never dare push anything to mathlib again.</p>\n</blockquote>\n<p>Only <code>--force</code> has this power, when you're not using it there is no need to worry :)</p>",
        "id": 409034251,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703029206
    },
    {
        "content": "<p>I think I'm only to do <code>git push origin</code> from now on...</p>",
        "id": 409034252,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029206
    },
    {
        "content": "<p>Well this is slow.</p>",
        "id": 409034310,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029258
    },
    {
        "content": "<p>I dread to think what you're pushing... I guess we'll find out eventually!</p>",
        "id": 409034352,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703029297
    },
    {
        "content": "<p>(At least it's giving me time to check that I did save my local changes, and yes, I did. Whew.)</p>",
        "id": 409034359,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029303
    },
    {
        "content": "<p>(maybe a .lake or build folder got committed somehow?)</p>",
        "id": 409034374,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703029321
    },
    {
        "content": "<p>I have no idea. Maybe I'm pushing my entire collection of math article/book pdfs that got into that repository somehow ? At this point I'll believe anything.</p>",
        "id": 409034534,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029396
    },
    {
        "content": "<p>Well, we do need more documentation…</p>",
        "id": 409034595,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1703029438
    },
    {
        "content": "<p>At least this is a work computer, so no embarrassing files.</p>",
        "id": 409034675,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029469
    },
    {
        "content": "<p>You can run <code>git diff $(git merge-base origin/master HEAD)  --shortstat</code> to find out</p>",
        "id": 409034678,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703029472
    },
    {
        "content": "<p>(it should be safe to run in parallel in another terminal)</p>",
        "id": 409034691,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703029490
    },
    {
        "content": "<p><code> 1 file changed, 252 insertions(+)</code><br>\nWell that's a big file.</p>",
        "id": 409034704,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029502
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409034117\">said</a>:</p>\n<blockquote>\n<p>Maybe last time was safe after all</p>\n</blockquote>\n<p>I was going to say, I’ve never experienced <code>git push --force</code> pushing to anything but the current checked-out branch, and I’ve rebased with abandon as a git noob <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> That would be <em>really</em> scary if it wasn’t safe in that way. Could it ever do that without additional flags?</p>",
        "id": 409034710,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1703029504
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 409034712,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029507
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"318709\">Sophie Morel</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409033875\">said</a>:</p>\n<blockquote>\n<p>Wait wait wait, I can destroy other people's work ? Oh no, I will never dare push anything to mathlib again.</p>\n</blockquote>\n<p>If they already have a PR for their branch, then at least GitHub keeps track of the old commit hash on the PR page whenever you force push, so it's not <em>really</em> destroyed.</p>\n<p><a href=\"/user_uploads/3121/s371te9t46KdXUIBdtLw7BPl/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/s371te9t46KdXUIBdtLw7BPl/image.png\" title=\"image.png\"><img src=\"/user_uploads/3121/s371te9t46KdXUIBdtLw7BPl/image.png\"></a></div><p>Plus, people can always do <code>git reflog</code> locally to see the history of their own copy of their repository and figure this out.</p>",
        "id": 409034922,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1703029656
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"548935\">Thomas Murrills</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409034710\">said</a>:</p>\n<blockquote>\n<p>That would be <em>really</em> scary if it wasn’t safe in that way. Could it ever do that without additional flags?</p>\n</blockquote>\n<p>I think it might do that if your git is configured with <code>push.default matching</code></p>",
        "id": 409034929,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703029660
    },
    {
        "content": "<p>28%, and it's been 12 minutes.</p>",
        "id": 409035260,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029858
    },
    {
        "content": "<p>I'm going to go brush my teeth then, I think I have time. <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 409035282,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703029880
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409034929\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"548935\">Thomas Murrills</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409034710\">said</a>:</p>\n<blockquote>\n<p>That would be <em>really</em> scary if it wasn’t safe in that way. Could it ever do that without additional flags?</p>\n</blockquote>\n<p>I think it might do that if your git is configured with <code>push.default matching</code></p>\n</blockquote>\n<p>Okay, so I ran <code>git config --global push.default simple</code> just in case.</p>",
        "id": 409035562,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703030069
    },
    {
        "content": "<p>(I thought about <code>git config --global push.default nothing</code>, but okay, let's not be <em>too</em> negative...)</p>",
        "id": 409035605,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703030106
    },
    {
        "content": "<p><del>Just curious, what’s your git version?</del> (irrelevant in this case)</p>",
        "id": 409035956,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1703030310
    },
    {
        "content": "<p>Seems matching used to be the default pre 2.0 and now simple is the default. (I have no idea how long ago 2.0 was.)</p>",
        "id": 409036025,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1703030375
    },
    {
        "content": "<p>But if you specify a branch in this way, it would still only push to that branch even with <code>matching</code>, right?</p>",
        "id": 409036188,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1703030462
    },
    {
        "content": "<p>Also, my version is 2.34.1 anyway.</p>",
        "id": 409038663,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703031567
    },
    {
        "content": "<p>Well, my push is only at 53% and it's 1:19 am, I'm off to bed and we'll see what happens tomorrow. Thanks for all the help, <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> !</p>",
        "id": 409038736,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703031602
    },
    {
        "content": "<p>I hope your computer hasn't melted overnight!</p>",
        "id": 409105906,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1703055657
    },
    {
        "content": "<p>My computer appears to think that I have created a new branch with the same name. I'm confused. But it's not melted at least.</p>",
        "id": 409119082,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703060731
    },
    {
        "content": "<p>I don't get it. I pulled again and the local files don't appear to have changed (i.e. yesterday evening's changes are still here).</p>",
        "id": 409119605,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703060956
    },
    {
        "content": "<p>Now will it build, that's the question.</p>",
        "id": 409119639,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703060974
    },
    {
        "content": "<p>It does. I am extremely confused. (But relieved too !)</p>",
        "id": 409120357,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703061312
    },
    {
        "content": "<blockquote>\n<p>Okay, so I guess you're not supposed to update a mathlib branch the same way as a project using mathlib as a dependency (in retrospect, I guess strictly speaking mathlib is not a dependency here, so I should have expected it); I did test the ∀ menu method on one of my regular projects just after and it worked fine.</p>\n</blockquote>\n<p>This is good feedback and suggests that there should be an additional warning message describing the consequences before even getting to see a list of options.</p>",
        "id": 409121132,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1703061657
    },
    {
        "content": "<p>New twist: apparently it did create a new branch (with the same name ?), because I am not pushing into the PRed branch anymore. But on the bright side, all my files are compiling locally.</p>",
        "id": 409123104,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703062512
    },
    {
        "content": "<p>Where did it push to?</p>",
        "id": 409123262,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703062569
    },
    {
        "content": "<p>Okay no, I checked the mathlib branches, and there is still only one with that name.</p>",
        "id": 409123278,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703062578
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409123262\">said</a>:</p>\n<blockquote>\n<p>Where did it push to?</p>\n</blockquote>\n<p>That is what I am trying to determine.</p>",
        "id": 409123329,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703062600
    },
    {
        "content": "<p>(or maybe what I mean is; what was the output of last night's git push?)</p>",
        "id": 409123353,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703062607
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">bolzano</span> <span class=\"bp\">~/</span><span class=\"n\">Lean4</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span> <span class=\"bp\">$</span> <span class=\"n\">git</span> <span class=\"n\">push</span> <span class=\"c1\">--force origin MultilinearMapContDiff</span>\n<span class=\"n\">Enumerating</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">101259</span><span class=\"o\">,</span> <span class=\"n\">done.</span>\n<span class=\"n\">Counting</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">101259</span><span class=\"bp\">/</span><span class=\"mi\">101259</span><span class=\"o\">),</span> <span class=\"n\">done.</span>\n<span class=\"n\">Delta</span> <span class=\"n\">compression</span> <span class=\"n\">using</span> <span class=\"n\">up</span> <span class=\"n\">to</span> <span class=\"mi\">8</span> <span class=\"n\">threads</span>\n<span class=\"n\">Compressing</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">21435</span><span class=\"bp\">/</span><span class=\"mi\">21435</span><span class=\"o\">),</span> <span class=\"n\">done.</span>\n<span class=\"n\">Writing</span> <span class=\"n\">objects</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">101259</span><span class=\"bp\">/</span><span class=\"mi\">101259</span><span class=\"o\">),</span> <span class=\"mi\">47</span><span class=\"bp\">.</span><span class=\"mi\">38</span> <span class=\"n\">MiB</span> <span class=\"bp\">|</span> <span class=\"mi\">15</span><span class=\"bp\">.</span><span class=\"mi\">00</span> <span class=\"n\">KiB</span><span class=\"bp\">/</span><span class=\"n\">s</span><span class=\"o\">,</span> <span class=\"n\">done.</span>\n<span class=\"n\">Total</span> <span class=\"mi\">101259</span> <span class=\"o\">(</span><span class=\"n\">delta</span> <span class=\"mi\">78882</span><span class=\"o\">),</span> <span class=\"n\">reused</span> <span class=\"mi\">100298</span> <span class=\"o\">(</span><span class=\"n\">delta</span> <span class=\"mi\">78255</span><span class=\"o\">),</span> <span class=\"n\">pack</span><span class=\"bp\">-</span><span class=\"n\">reused</span> <span class=\"mi\">0</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span> <span class=\"n\">Resolving</span> <span class=\"n\">deltas</span><span class=\"o\">:</span> <span class=\"mi\">100</span><span class=\"bp\">%</span> <span class=\"o\">(</span><span class=\"mi\">78882</span><span class=\"bp\">/</span><span class=\"mi\">78882</span><span class=\"o\">),</span> <span class=\"n\">done.</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span> <span class=\"n\">Create</span> <span class=\"n\">a</span> <span class=\"n\">pull</span> <span class=\"n\">request</span> <span class=\"n\">for</span> <span class=\"bp\">'</span><span class=\"n\">MultilinearMapContDiff'</span> <span class=\"n\">on</span> <span class=\"n\">GitHub</span> <span class=\"kd\">by</span> <span class=\"n\">visiting</span><span class=\"o\">:</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span>      <span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github.com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span><span class=\"n\">pull</span><span class=\"bp\">/</span><span class=\"n\">new</span><span class=\"bp\">/</span><span class=\"n\">MultilinearMapContDiff</span>\n<span class=\"n\">remote</span><span class=\"o\">:</span>\n<span class=\"n\">To</span> <span class=\"n\">github.com</span><span class=\"o\">:</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib.git</span>\n <span class=\"bp\">*</span> <span class=\"o\">[</span><span class=\"n\">new</span> <span class=\"n\">branch</span><span class=\"o\">]</span>          <span class=\"n\">MultilinearMapContDiff</span> <span class=\"bp\">-&gt;</span> <span class=\"n\">MultilinearMapContDiff</span>\n</code></pre></div>",
        "id": 409123636,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703062721
    },
    {
        "content": "<p>You are likely pushing to your own fork (<code>git remote -v</code>)</p>",
        "id": 409124312,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1703062948
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">bolzano</span> <span class=\"bp\">~/</span><span class=\"n\">Lean4</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span> <span class=\"bp\">$</span> <span class=\"n\">git</span> <span class=\"n\">remote</span> <span class=\"bp\">-</span><span class=\"n\">v</span>\n<span class=\"n\">origin</span>  <span class=\"n\">git</span><span class=\"bp\">@</span><span class=\"n\">github.com</span><span class=\"o\">:</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib.git</span> <span class=\"o\">(</span><span class=\"n\">fetch</span><span class=\"o\">)</span>\n<span class=\"n\">origin</span>  <span class=\"n\">git</span><span class=\"bp\">@</span><span class=\"n\">github.com</span><span class=\"o\">:</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib.git</span> <span class=\"o\">(</span><span class=\"n\">push</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 409124428,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703062994
    },
    {
        "content": "<p>Oh my bad, it's the original repo. But it's mathlib 3!</p>",
        "id": 409124465,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1703063015
    },
    {
        "content": "<p>That would explain why pushing took so long!</p>",
        "id": 409124609,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703063062
    },
    {
        "content": "<p>Oh no, I must have made a mistake when I was configuring git to work with ssh last night at 1 am...</p>",
        "id": 409124673,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703063084
    },
    {
        "content": "<p>You pushed the entire mathlib4 master to a mathlib3 branch</p>",
        "id": 409124685,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703063089
    },
    {
        "content": "<p>Okay, this I should be able to fix this...</p>",
        "id": 409124742,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703063112
    },
    {
        "content": "<p>That explains why it took so long!</p>",
        "id": 409124828,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1703063143
    },
    {
        "content": "<p>Okay, I will try to fix this when I stop laughing.</p>",
        "id": 409125027,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703063198
    },
    {
        "content": "<p>We should probably delete the branch on mathlib3 to save anyone having to wait for it to download mathlib4 when they git fetch, but that's very non urgent</p>",
        "id": 409125294,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703063300
    },
    {
        "content": "<p>I've now pushed to my mathlib4 branch, and I can see on github that it's been updated.</p>",
        "id": 409125402,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703063350
    },
    {
        "content": "<p>And the CI linter is complaining. I never thought I would be so happy to see that.</p>",
        "id": 409125743,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703063481
    },
    {
        "content": "<p>It looks like you might have <a href=\"https://github.com/leanprover-community/mathlib4/compare/681a9fe68a8f6a4a9bc1528fa25f295bd56c0ce7..edf12c38240adee6c2e68dbd7a42de646fd6863c\">clobbered some of your previous work</a></p>",
        "id": 409125934,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703063550
    },
    {
        "content": "<p>You should check there's nothing on that page you meant to keep (you can always just copy paste it from there rather than trying to use git to recover if)</p>",
        "id": 409126092,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703063613
    },
    {
        "content": "<p>Maybe it's just a reordering</p>",
        "id": 409126229,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703063652
    },
    {
        "content": "<p>Thanks ! It's fine, I was obsessively making local saves of the files last night, so nothing would be lost anyway. But I think it's just moving code so it comes after other code that it depends on.</p>",
        "id": 409126348,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703063701
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"318709\">Sophie Morel</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/409125743\">said</a>:</p>\n<blockquote>\n<p>And the CI linter is complaining. I never thought I would be so happy to see that.</p>\n</blockquote>\n<p>Yes, I had a line that was 101 characters, the horror. <span aria-label=\"scream\" class=\"emoji emoji-1f631\" role=\"img\" title=\"scream\">:scream:</span></p>",
        "id": 409126616,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703063804
    },
    {
        "content": "<p>So if I go to the mathlib repo on github and click the little trash can icon next to my new branch's name, does this do what I think it should and delete the thing ?</p>",
        "id": 409126998,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703063941
    },
    {
        "content": "<p>Yes, but make sure it's mathlib <strong>3</strong></p>",
        "id": 409127076,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703063969
    },
    {
        "content": "<p>It is ! The branch doesn't have a PR on it, which is good.</p>",
        "id": 409127251,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703064024
    },
    {
        "content": "<p>Too bad we can't push to <a href=\"https://github.com/leanprover/lean2\">Lean 2</a>'s library too while we're at it <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 409222704,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1703090487
    },
    {
        "content": "<p>So coming back to this, what <em>is</em> the correct way to update mathlib when I'm working inside of a branch of mathlib? Should I merge with<code>main</code>, or is there a way to do it using the <code>∀</code> menu in vscode?</p>",
        "id": 410310374,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703777937
    },
    {
        "content": "<p>Merge with <code>master</code></p>",
        "id": 410311444,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1703778424
    },
    {
        "content": "<p>(GitHub <a href=\"https://github.blog/changelog/2020-10-01-the-default-branch-for-newly-created-repositories-is-now-main/\">decided recently</a> that all new repos would use <code>main</code> rather than <code>master</code> by default, but other than the name the intended use is the same)</p>",
        "id": 410312298,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703778927
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/410312298\">said</a>:</p>\n<blockquote>\n<p>(GitHub decided recently that all new repos would use <code>main</code> rather than <code>master</code> by default, but other than the name the intended use is the same)</p>\n</blockquote>\n<p>Not quite recent; IIRC the change happened after the George Floyd protests</p>",
        "id": 410312467,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1703779013
    },
    {
        "content": "<p>Well, whatever the default, mathlib4 doesn't have a <code>main</code> branch</p>",
        "id": 410313156,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1703779318
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Problems.20updating.2C.20again/near/410311444\">said</a>:</p>\n<blockquote>\n<p>Merge with <code>master</code></p>\n</blockquote>\n<p>To be super clear, you should merge <code>master</code> <em>into</em> your branch (by running <code>git merge origin/master</code>)</p>",
        "id": 410315446,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1703780345
    },
    {
        "content": "<p><code>git merge origin/master</code>?</p>",
        "id": 410316319,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1703780807
    },
    {
        "content": "<p>(Today I made a mess because of that...)</p>",
        "id": 410316364,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1703780832
    },
    {
        "content": "<p>And <code>git fetch origin</code> first</p>",
        "id": 410316712,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1703781006
    },
    {
        "content": "<p>Thanks, that seems to have worked ! I'm bookmarking this thread.</p>",
        "id": 410330865,
        "sender_full_name": "Sophie Morel",
        "timestamp": 1703790017
    }
]