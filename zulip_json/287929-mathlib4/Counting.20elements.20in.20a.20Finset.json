[
    {
        "content": "<p>I am looking for a lemma stating that in a linearly ordered finite set, the number of elements strictly smaller than the element with index <code>k</code> (in the sorted sequence) is exactly <code>k</code>, since I have to deal with some counting problems concerning the relative positions of points and finite sets in linear orders.</p>\n<p>The signature of this lemma should be like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"kt\">Sort</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"o\">)</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">card_filter_lt_orderEmbOfFin</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">F</span><span class=\"bp\">.</span><span class=\"n\">orderEmbOfFin</span><span class=\"w\"> </span><span class=\"bp\">⋯</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)))</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>Essentially this equation is equivalent to <code>{i : Fin F.card | i &lt; k}.card = {x ∈ F | x &lt; (F.orderEmbOfFin ⋯) k}.card</code>. And I prove it by constructing a bijection, which is quite tedious. So I wonder  if there's a golfed proof or even a existing lemma. </p>\n<p>Or maybe I should use <code>List</code> instead? I'm not sure.</p>",
        "id": 564436685,
        "sender_full_name": "Zikang 'Axi' Yu",
        "timestamp": 1766057606
    },
    {
        "content": "<p>I've reduced the original problem to proving <code>{x : Fin F.card | x &lt; k}.card = k</code>.</p>\n<p>I'm still struggling to find a lemma for this, even though it seems like more fundamental and obvious.</p>",
        "id": 564516715,
        "sender_full_name": "Zikang 'Axi' Yu",
        "timestamp": 1766078009
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin.card_Iio#doc\">docs#Fin.card_Iio</a> looks like it might help you here</p>",
        "id": 564547142,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1766087319
    },
    {
        "content": "<p>That's it! Thanks.</p>",
        "id": 564620104,
        "sender_full_name": "Zikang 'Axi' Yu",
        "timestamp": 1766121069
    }
]