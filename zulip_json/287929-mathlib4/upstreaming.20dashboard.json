[
    {
        "content": "<p>I assume the upstreaming dashboard I've been spreading around needs updating? It fetches the data of mathlib PRs from the queueboard</p>",
        "id": 567990570,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1768398670
    },
    {
        "content": "<p>Here is the script in Toric for example: <a href=\"https://github.com/YaelDillies/Toric/blob/master/scripts%2Fupstreaming_dashboard.py\">https://github.com/YaelDillies/Toric/blob/master/scripts%2Fupstreaming_dashboard.py</a></p>",
        "id": 567992670,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1768399258
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/567990570\">said</a>:</p>\n<blockquote>\n<p>I assume the upstreaming dashboard I've been spreading around needs updating? It fetches the data of mathlib PRs from the queueboard</p>\n</blockquote>\n<p>I believe <span class=\"user-mention\" data-user-id=\"439514\">@Marcelo Lynch</span> will be taking a look at this. We're keeping the legacy backend scripts running, so the currently-deployed upstreaming dashboard should continue to work for the time being. (It might be good to collect a list of all known places where that script is used though so we know where to push updates.)</p>",
        "id": 567998876,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768400713
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/567998876\">said</a>:</p>\n<blockquote>\n<p>It might be good to collect a list of all known places where that script is used though so we know where to push updates.</p>\n</blockquote>\n<p>I have a list of 11 of my projects/projects I help maintain that use it. I don't know of other uses.</p>",
        "id": 568084154,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1768426411
    },
    {
        "content": "<p>I was able to update the Toric script to use the new API endpoint, but I'm not sure if that's the model we want to adopt for consuming this data at the moment... Because the upstreaming dashboard as a concept seems generically useful, I'm thinking of creating an action that can be used as part of the GH Pages generation to create the dashboard</p>",
        "id": 568085347,
        "sender_full_name": "Marcelo Lynch",
        "timestamp": 1768426880
    },
    {
        "content": "<p>Indeed that has been my plan all along, but I'm not techy enough that the required time investment has so far been too high to justify</p>",
        "id": 568085567,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1768426977
    },
    {
        "content": "<p>Unfortunately it seems like the Toric page-generation workflow has become too large for the runners (<a href=\"https://github.com/YaelDillies/Toric/actions/runs/20210338903/job/58015168843\">https://github.com/YaelDillies/Toric/actions/runs/20210338903/job/58015168843</a>) so I'm looking into creating a smaller project to iterate on this</p>",
        "id": 568085986,
        "sender_full_name": "Marcelo Lynch",
        "timestamp": 1768427188
    },
    {
        "content": "<p>I copied it a few places, I think FLT and PNT+</p>",
        "id": 568088750,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1768428417
    },
    {
        "content": "<p>6 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/queueboard/with/568080455\">#mathlib4 &gt; queueboard</a> by <span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span>.</p>",
        "id": 568098192,
        "sender_full_name": "Notification Bot",
        "timestamp": 1768433218
    },
    {
        "content": "<p>I've written <a href=\"https://github.com/marcelolynch/gen-upstream-dashboard-action\">a GitHub Action</a> to generate the upstream dashboard data based on the Toric one, adapting <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> 's scripts to the generic case. </p>\n<p>You can see it in action <a href=\"https://github.com/marcelolynch/PagesPlayground/actions/runs/21260707817/workflow\">in this workflow run</a> that has generated the .md snippets for <a href=\"https://marcelolynch.github.io/PagesPlayground/\">this page</a> based on <a href=\"https://github.com/marcelolynch/PagesPlayground/tree/main/Toric\">this puppet of the Toric  project</a> </p>\n<p>I wouldn't depend on this yet as I guess we might want to publish it from an official location rather than my username, I published it to test it end-to-end and gather feedback :)</p>",
        "id": 569568390,
        "sender_full_name": "Marcelo Lynch",
        "timestamp": 1769108455
    },
    {
        "content": "<p>Great, thank you! Now I can request a few improvements:</p>\n<ol>\n<li>There should be some explanation in the text as to what the list of PRs represents</li>\n<li>Taking the current example, there should be a visual way to determine which of</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">    </span><span class=\"n\">feat</span><span class=\"o\">(</span><span class=\"n\">EllipticCurve</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">ZSMul</span><span class=\"w\"> </span><span class=\"n\">formula</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">terms</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">division</span><span class=\"w\"> </span><span class=\"n\">polynomials</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">13782</span>\n<span class=\"w\">    </span><span class=\"n\">t</span><span class=\"bp\">-</span><span class=\"n\">algebra</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">-</span><span class=\"n\">number</span><span class=\"bp\">-</span><span class=\"n\">theory</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">blocked</span><span class=\"bp\">-</span><span class=\"k\">by</span><span class=\"bp\">-</span><span class=\"n\">other</span><span class=\"bp\">-</span><span class=\"n\">PR</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">merge</span><span class=\"bp\">-</span><span class=\"n\">conflict</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">-</span><span class=\"n\">algebraic</span><span class=\"bp\">-</span><span class=\"n\">geometry</span>\n<span class=\"w\">    </span><span class=\"n\">feat</span><span class=\"o\">(</span><span class=\"n\">EllipticCurve</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">universal</span><span class=\"w\"> </span><span class=\"n\">elliptic</span><span class=\"w\"> </span><span class=\"n\">curve</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">13847</span>\n<span class=\"w\">    </span><span class=\"n\">merge</span><span class=\"bp\">-</span><span class=\"n\">conflict</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">awaiting</span><span class=\"bp\">-</span><span class=\"n\">author</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">-</span><span class=\"n\">algebra</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">-</span><span class=\"n\">algebraic</span><span class=\"bp\">-</span><span class=\"n\">geometry</span>\n<span class=\"w\">    </span><span class=\"n\">feat</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">scheme</span><span class=\"w\"> </span><span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">Weierstrass</span><span class=\"w\"> </span><span class=\"n\">curve</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">14167</span>\n<span class=\"w\">    </span><span class=\"n\">merge</span><span class=\"bp\">-</span><span class=\"n\">conflict</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">WIP</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">-</span><span class=\"n\">algebraic</span><span class=\"bp\">-</span><span class=\"n\">geometry</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">workshop</span><span class=\"bp\">-</span><span class=\"n\">AIM</span><span class=\"bp\">-</span><span class=\"n\">AG</span><span class=\"bp\">-</span><span class=\"mi\">2024</span>\n<span class=\"w\">    </span><span class=\"n\">refactor</span><span class=\"o\">(</span><span class=\"n\">Polynomial</span><span class=\"bp\">/</span><span class=\"n\">Bivariate</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">swap</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">improved</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"mi\">27196</span>\n<span class=\"w\">    </span><span class=\"n\">WIP</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"bp\">-</span><span class=\"n\">algebra</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">toric</span>\n</code></pre></div>\n<p>is coming from toric. I suggest you add a configurable (list of?) github label (here, <code>toric</code>) and then display the PRs with this label (here, <a href=\"https://github.com/leanprover-community/mathlib4/pull/27196\">#27196</a>) in bold. The fact that you're printing the labels makes this less useful than before, but I don't find this a very strong visual signal.</p>\n<ol start=\"3\">\n<li>The PR lists should be collapsible</li>\n</ol>",
        "id": 569650025,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1769153189
    },
    {
        "content": "<p>Thanks for the feedback <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> ! Some comments </p>\n<p>(1) Yeah, I guess there is a spectrum of how much 'pre-packaged' the generated files can be, where one end is \"spit out the whole dashboard\". I started with just the <code>.md</code> snippets so people can customize it however they want. But we could also toggle this with some parameter to the task. Also note that the plan is to integrate this within <a href=\"https://github.com/leanprover-community/LeanProject\">https://github.com/leanprover-community/LeanProject</a>, so some of the UI choices/standardization could be made 'outside' the action that generates the snippet.</p>\n<p>(2) Good point! I think the label idea is possible and maybe desirable anyways, but we can even know from the data which fork the PR has come from, so we can group them in that way (\"from this fork\" / \"from elsewhere\")</p>\n<p>(3) Sure, although this and other UI points are related to my question of customizability that I touched above. But I think it makes sense as a 'default'.</p>",
        "id": 569753717,
        "sender_full_name": "Marcelo Lynch",
        "timestamp": 1769184893
    },
    {
        "content": "<ol start=\"2\">\n<li>Not sure what forks have to do with this? One of my goals with the upstreaming dashboard is to allow separate people to upstream files with little to no oversight, so the relevant PRs might come from many different forks</li>\n</ol>",
        "id": 569755444,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1769185371
    },
    {
        "content": "<p>Ah, yes, I got confused there - this whole thing is meant exactly for non-forks. Disregard :-)</p>",
        "id": 569756197,
        "sender_full_name": "Marcelo Lynch",
        "timestamp": 1769185583
    },
    {
        "content": "<p>I incorporated <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span>'s feedback (hopefully!). The action now</p>\n<ul>\n<li>groups PRs by 'including relevant labels' (which are an input to the action) and 'others'</li>\n<li>takes the website directory and writes files under <code>_includes</code>. It generates multiple files including the full dashboard so it suffices to <code>{% include _upstreaming_dashboard/dashboard.md %}</code> to get the whole thing (but one could include only certain snippets, etc.)</li>\n</ul>\n<p>Latest looks <a href=\"https://marcelolynch.github.io/PagesPlayground/\">here</a>.</p>",
        "id": 570157375,
        "sender_full_name": "Marcelo Lynch",
        "timestamp": 1769450526
    },
    {
        "content": "<p>Eventually we could decouple the output with \"Jekyll + GH Pages\" but I think the point is to use it in this scenario to start</p>",
        "id": 570157653,
        "sender_full_name": "Marcelo Lynch",
        "timestamp": 1769450602
    },
    {
        "content": "<p>I have published the action at <a href=\"https://github.com/leanprover-community/upstreaming-dashboard-action\">leanprover-community/upstreaming-dashboard-action</a>. Hopefully this is usable as-is for current users, but additional feedback is appreciated, of course. Some tweaking might be warranted when adding it to <code>leanprover-community/LeanProject</code></p>",
        "id": 570453355,
        "sender_full_name": "Marcelo Lynch",
        "timestamp": 1769564236
    },
    {
        "content": "<p>One quick comment is that it probably would be good to add the YAML syntax for an example workflow step using this action that people can copy and paste into their workflows.</p>",
        "id": 570455330,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1769565950
    }
]