[
    {
        "content": "<p>I thought it might be nice to have a place to collect code action ideas. I'm not sure here is the exact right place as opposed to an issue, but maybe others have their own wishlist.<br>\nThe ones I had (without doing investigating of how feasible they are) were:</p>\n<ul>\n<li>an <code>extract_goal</code> tactic action (mentioned <a href=\"#narrow/channel/287929-mathlib4/topic/Code.20action.20for.20.60success_if_fails_with_msg.60/near/494226206\">here</a> which I'd have moved here but it looks like we have a 7 day limit on moving messages, TIL!)</li>\n<li>a <code>#guard_msg</code> action -- given a line with a command which produces output, insert a <code>guard_msg</code> block above with the output</li>\n<li>a <code>#min_imports</code> action which changes the imports (I think this has been mentioned somewhere and the difficulty was being able to find the lines which contained imports?)</li>\n<li>a consecutive rewrite action -- so, given 3 consecutive lines <code>rw [foo]; rw [bar]; rw [baz, quux]</code> all of which rewrite the same location (here the goal), emit an action which combines the lines into <code>rw [foo, bar, baz, quux]</code></li>\n</ul>",
        "id": 498144555,
        "sender_full_name": "Julian Berman",
        "timestamp": 1738854831
    },
    {
        "content": "<ul>\n<li>Split <code>simpa</code> into <code>simp at h; simp; exact h</code> (inferring which hypothesis is used); I could have used this just now debugging why one broke with a newer mathlib</li>\n</ul>",
        "id": 498151189,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1738856512
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>already has a code action. Is that not doing what you want?</p>",
        "id": 498156552,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1738857842
    },
    {
        "content": "<p>The one I want is to activate on:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"mi\">37</span>\n</code></pre></div>\n<p>or in your example just</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>(because both produce output) and offer to add all of <code>#guard_msgs in + the message</code></p>\n<p>But I admit I wasn't aware of the one you mentioned either so perhaps it's enough as-is (I'll have to play with it and see how happy my fingers are).</p>",
        "id": 498157311,
        "sender_full_name": "Julian Berman",
        "timestamp": 1738858030
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Code.20actions.20wishlist/near/498151189\">said</a>:</p>\n<blockquote>\n<ul>\n<li>Split <code>simpa</code> into <code>simp at h; simp; exact h</code> (inferring which hypothesis is used); I could have used this just now debugging why one broke with a newer mathlib</li>\n</ul>\n</blockquote>\n<p>I wrote a lean RFC that would make this (mostly) redundant. I will try submitting today or tomorrow</p>",
        "id": 498223225,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1738881295
    }
]