[
    {
        "content": "<p>The <code>@[coe]</code> decorator is used to tell Lean's delaborator to print a certain map as an up-arrow, rather than giving the full name of the function. Is there a way to apply this to bundled morphism types, e.g. ring or monoid homomorphisms, without having to assign a separate name for the map coerced to a plain function (meaning rewrite lemmas like <code>rw [map_mul]</code> won't bite on it any more)? </p>\n<p>I'd quite like the natural ring hom <code>SL(2, ℤ) →* SL(2, ℝ)</code> (explicitly given by <code>Matrix.SpecialLinearGroup.cast (Int.castRingHom ℝ)</code>), which appears quite often in modular-forms calculations and is registered as a <code>Coe</code> instance, to print as a coercion.</p>",
        "id": 517917242,
        "sender_full_name": "David Loeffler",
        "timestamp": 1747168013
    },
    {
        "content": "<p>By the way, the <code>@[coe]</code> attribute is also used to let <code>norm_cast</code> and friends know the function is a coercion.</p>\n<p>When it comes to delaboration, all that is special about <code>@[coe]</code> is that there is a pre-defined delaborator that makes use of the attribute. It's definitely possible to make a custom delaborator that looks for <code>Matrix.SpecialLinearGroup.cast (Int.castRingHom ℝ)</code> and pretty prints it in a different way. Could you give an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> of what you see and what you want to see?</p>",
        "id": 517924644,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1747170921
    },
    {
        "content": "<p>If you're talking about wanting to see DFunlike.coe, we explicitly decided a while ago to hide the arrow when the function is applied; but perhaps we could introduce an option to override that behavior</p>",
        "id": 517924866,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747171011
    },
    {
        "content": "<p>Oh, I think I understand now; you want <code>DFunLike.coe myCoeHom x</code> to print as <code>\\u x</code> or similar?</p>",
        "id": 517925074,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747171085
    },
    {
        "content": "<p>So maybe the answer is that the delaborator for DFunlike.coe should also check if the morphisms is tagged with <code>@[coe]</code>?</p>",
        "id": 517925232,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747171154
    },
    {
        "content": "<p>Is there a better way?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">LinearAlgebra</span><span class=\"bp\">.</span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">SpecialLinearGroup</span>\n\n<span class=\"c1\">-- you might want to scope this</span>\n<span class=\"kd\">@[</span><span class=\"n\">delab</span><span class=\"w\"> </span><span class=\"n\">app</span><span class=\"bp\">.</span><span class=\"n\">DFunLike</span><span class=\"bp\">.</span><span class=\"n\">coe</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">delabSLCast</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Delaborator</span><span class=\"bp\">.</span><span class=\"n\">Delab</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Delaborator</span><span class=\"bp\">.</span><span class=\"n\">whenPPOption</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">getPPCoercions</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Delaborator</span><span class=\"bp\">.</span><span class=\"n\">SubExpr</span><span class=\"bp\">.</span><span class=\"n\">getExpr</span>\n<span class=\"w\">    </span><span class=\"n\">e</span><span class=\"bp\">.</span><span class=\"n\">withApp</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">      </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">head</span><span class=\"bp\">.</span><span class=\"n\">cleanupAnnotations</span><span class=\"bp\">.</span><span class=\"n\">isConstOf</span><span class=\"w\"> </span><span class=\"ss\">``DFunLike.coe</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">liftOption</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"bp\">?</span>\n<span class=\"w\">      </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">xs</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">k</span><span class=\"bp\">.</span><span class=\"n\">cleanupAnnotations</span><span class=\"bp\">.</span><span class=\"n\">withApp</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">        </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">head</span><span class=\"bp\">.</span><span class=\"n\">cleanupAnnotations</span><span class=\"bp\">.</span><span class=\"n\">isConstOf</span><span class=\"w\"> </span><span class=\"ss\">``Matrix.SpecialLinearGroup.map</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">liftOption</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span><span class=\"bp\">?</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">liftOption</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"o\">]</span><span class=\"bp\">?</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">liftOption</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">5</span><span class=\"o\">]</span><span class=\"bp\">?</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">liftOption</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">]</span><span class=\"bp\">?</span>\n<span class=\"w\">        </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"bp\">.</span><span class=\"n\">cleanupAnnotations</span><span class=\"bp\">.</span><span class=\"n\">isConstOf</span><span class=\"w\"> </span><span class=\"ss\">``Int</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">cleanupAnnotations</span><span class=\"bp\">.</span><span class=\"n\">isConstOf</span><span class=\"w\"> </span><span class=\"ss\">``Real</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"n\">f</span><span class=\"bp\">.</span><span class=\"n\">cleanupAnnotations</span><span class=\"bp\">.</span><span class=\"n\">withApp</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">          </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">head</span><span class=\"bp\">.</span><span class=\"n\">cleanupAnnotations</span><span class=\"bp\">.</span><span class=\"n\">isConstOf</span><span class=\"w\"> </span><span class=\"ss\">``Fin</span><span class=\"o\">)</span>\n<span class=\"w\">          </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">liftOption</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span><span class=\"bp\">?</span>\n<span class=\"w\">          </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">numeral?</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">          </span><span class=\"n\">u</span><span class=\"bp\">.</span><span class=\"n\">cleanupAnnotations</span><span class=\"bp\">.</span><span class=\"n\">withApp</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">head</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">            </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">head</span><span class=\"bp\">.</span><span class=\"n\">cleanupAnnotations</span><span class=\"bp\">.</span><span class=\"n\">isConstOf</span><span class=\"w\"> </span><span class=\"ss\">``Int.castRingHom</span><span class=\"o\">)</span>\n<span class=\"w\">            </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">liftOption</span><span class=\"w\"> </span><span class=\"n\">xs</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span><span class=\"bp\">?</span>\n<span class=\"w\">            </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"bp\">.</span><span class=\"n\">cleanupAnnotations</span><span class=\"bp\">.</span><span class=\"n\">isConstOf</span><span class=\"w\"> </span><span class=\"ss\">``Real</span><span class=\"o\">)</span>\n<span class=\"w\">            </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Delaborator</span><span class=\"bp\">.</span><span class=\"n\">SubExpr</span><span class=\"bp\">.</span><span class=\"n\">withNaryArg</span><span class=\"w\"> </span><span class=\"mi\">5</span>\n<span class=\"w\">              </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Delaborator</span><span class=\"bp\">.</span><span class=\"n\">delab</span>\n<span class=\"w\">            </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">↑$</span><span class=\"n\">arg</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 517927951,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1747172397
    },
    {
        "content": "<p>perhaps not better, but you could <code>~q</code> match and it would be much shorter</p>",
        "id": 517933600,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747175085
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">Delaborator</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"c1\">-- you might want to scope this</span>\n<span class=\"kd\">@[</span><span class=\"n\">delab</span><span class=\"w\"> </span><span class=\"n\">app</span><span class=\"bp\">.</span><span class=\"n\">DFunLike</span><span class=\"bp\">.</span><span class=\"n\">coe</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">delabSLCast</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Delab</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">whenPPOption</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">getPPCoercions</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">SubExpr</span><span class=\"bp\">.</span><span class=\"n\">getExpr</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">1</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"bp\">~</span><span class=\"n\">q</span><span class=\"o\">(</span><span class=\"bp\">@</span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">SpecialLinearGroup</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">$_</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">$_</span><span class=\"n\">i2</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">),</span>\n<span class=\"w\">      </span><span class=\"bp\">~</span><span class=\"n\">q</span><span class=\"o\">(</span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">SpecialLinearGroup</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">castRingHom</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">inferTypeQ</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">failure</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">arg</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">SubExpr</span><span class=\"bp\">.</span><span class=\"n\">withNaryArg</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"n\">delab</span>\n<span class=\"w\">    </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"bp\">↑$</span><span class=\"n\">arg</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 517934497,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747175557
    },
    {
        "content": "<p>Thanks everyone! Eric's interpretation of my question is correct; I want applications of this particular morphism to print as up-arrow. Here's the MWE:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"kn\">scoped</span><span class=\"w\"> </span><span class=\"n\">MatrixGroups</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SL</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑</span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SL</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SL</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SL</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- I want the goal state to print as `↑(g * h) = ↑g * ↑h`, and I also want the following tactic to work:</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">map_mul</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Aaron's code achieves this – I couldn't get Eric's to work, it  gave an <code>expected token</code> error at the first <code>~q</code>, maybe I had the wrong imports open? But I was hoping for something more general (not specific code for this one particular morphism); ideally I'd want this to work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">coe</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">intCastHom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SL</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→*</span><span class=\"w\"> </span><span class=\"n\">SL</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">SpecialLinearGroup</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">castRingHom</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>This fails with <code>intCastHom has no explicit arguments</code>.</p>",
        "id": 517974760,
        "sender_full_name": "David Loeffler",
        "timestamp": 1747201365
    },
    {
        "content": "<p>A related question: do we have a way to completely remove the up-arrow? I think we had an option in Lean 3.</p>",
        "id": 517996489,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747209813
    },
    {
        "content": "<p>I think my code is missing <code>open Qq</code></p>",
        "id": 517997179,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747210014
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.40.5Bcoe.5D.20and.20bundled.20morphism.20types.3F/near/517996489\">said</a>:</p>\n<blockquote>\n<p>A related question: do we have a way to completely remove the up-arrow? I think we had an option in Lean 3.</p>\n</blockquote>\n<p>Are you looking for <code>set_option pp.coercions false</code>?</p>",
        "id": 518076894,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1747231688
    },
    {
        "content": "<p>No, I want to get rid of the arrow, not to replace it.</p>",
        "id": 518120460,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747242984
    },
    {
        "content": "<p>You could override the notation with some zero width space :-)</p>",
        "id": 518159645,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747257053
    },
    {
        "content": "<p>I considered it (this is in a teaching context of course, nothing Mathlib-related).</p>",
        "id": 518403059,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747344331
    },
    {
        "content": "<p>You can write a custom delaborator that just prints nothing</p>",
        "id": 518404444,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747344899
    },
    {
        "content": "<p>The DFunLike.coe delaborator already does this in most cases, you could do the same for other coercions</p>",
        "id": 518404528,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747344938
    },
    {
        "content": "<p>I know I can do this, my question was: “is there an option doing that as in Lean 3”. It seems the answer is no.</p>",
        "id": 518747894,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1747429696
    }
]