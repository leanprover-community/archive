[
    {
        "content": "<p>For Valued (and now ValuativeRel), we have <code>ùí™[K]</code> notation which means <code>Valued.integer</code> which is <code>Valuation.integer</code> which is the subring of <code>{x | v x &lt;= 1}</code>. This exists when <code>K</code> is a CommRing. There is also <code>Valuation.valuationSubring</code>, which is the same subring, but upgraded to a <code>ValuationSubring</code>, when <code>K</code> is a Field. Anything that holds for the former holds for the latter. But we have many duplicated lemmas -- membership, how to treat as a coerced-to-type, instances.</p>\n<p>One might prefer to use the <code>Valuation.valuationSubring</code> in cases when <code>K</code> is a field, because one gets access to <code>mem_or_inv_mem</code> and associated lemmas.</p>\n<p>Would it be possible to change <code>ùí™[K]</code> from plain <code>notation</code> to an elaborator that gives <code>Valuation.valuationSubring</code> when <code>K</code> is a field, and <code>Valuation.integer</code> otherwise? I am not very familiar with how <code>elab</code> works nor how to make it work conditional on presence of an instance.</p>\n<p>This was inspired by the elaboration assistance that the manifold library is exploring.</p>\n<p>Thoughts? <span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> <span class=\"user-mention\" data-user-id=\"406490\">@Mar√≠a In√©s de Frutos Fern√°ndez</span> <span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span> <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> ?</p>",
        "id": 528662851,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1752499699
    },
    {
        "content": "<p>this is certainly possible, but TBH its not clear to me that <code>Valuation.integer</code> is actually useful when the ring is not a field.</p>",
        "id": 528663619,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1752499859
    },
    {
        "content": "<p>(<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Valued.integer#doc\">docs#Valued.integer</a>) (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Valuation.valuationSubring#doc\">docs#Valuation.valuationSubring</a>)</p>",
        "id": 528664605,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1752500121
    },
    {
        "content": "<p>If we only have <code>ùí™[K]</code> mean <code>valuationSubring</code> (and thus, only work when <code>K</code> is a field), then that might drive duplication because it's not clear whether results should be proven about <code>integer</code> or <code>valuationSubring</code> -- both are present.</p>\n<p>Should we unify them instead, and even though <code>Valuation.integer</code> can be declared over a ring <code>R</code>, tighten the declaration to require <code>Field</code>, make it the valuationSubring, and have only one way to refer to this?</p>",
        "id": 528666375,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1752500697
    },
    {
        "content": "<p>i guess my question is then what results donyou want to prove about integer in general?</p>",
        "id": 528669260,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1752501549
    },
    {
        "content": "<p>its not clear to me that there are any results!</p>",
        "id": 528669287,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1752501558
    },
    {
        "content": "<p>So basically, you're saying that the doubled declarations in <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Valuation/Extension.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Valuation/Extension.html</a> should be unified. Correct?</p>",
        "id": 528670043,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1752501785
    },
    {
        "content": "<p>I mean like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Valuation.HasExtension.instIsScalarTowerInteger#doc\">docs#Valuation.HasExtension.instIsScalarTowerInteger</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Valuation.HasExtension.instIsScalarTower_valuationSubring%27#doc\">docs#Valuation.HasExtension.instIsScalarTower_valuationSubring'</a></p>",
        "id": 528670286,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1752501864
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308899\">Yakov Pechersky</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.F0.9D.92.AA.5BK.5D.20elaboration/near/528662851\">said</a>:</p>\n<blockquote>\n<p>For Valued (and now ValuativeRel), we have <code>ùí™[K]</code> notation which means <code>Valued.integer</code> which is <code>Valuation.integer</code> which is the subring of <code>{x | v x &lt;= 1}</code>. This exists when <code>K</code> is a CommRing. There is also <code>Valuation.valuationSubring</code>, which is the same subring, but upgraded to a <code>ValuationSubring</code>, when <code>K</code> is a Field. Anything that holds for the former holds for the latter. But we have many duplicated lemmas -- membership, how to treat as a coerced-to-type, instances.</p>\n<p>One might prefer to use the <code>Valuation.valuationSubring</code> in cases when <code>K</code> is a field, because one gets access to <code>mem_or_inv_mem</code> and associated lemmas.</p>\n<p>Would it be possible to change <code>ùí™[K]</code> from plain <code>notation</code> to an elaborator that gives <code>Valuation.valuationSubring</code> when <code>K</code> is a field, and <code>Valuation.integer</code> otherwise? I am not very familiar with how <code>elab</code> works nor how to make it work conditional on presence of an instance.</p>\n<p>This was inspired by the elaboration assistance that the manifold library is exploring.</p>\n<p>Thoughts? <span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <span class=\"user-mention silent\" data-user-id=\"406490\">Mar√≠a In√©s de Frutos Fern√°ndez</span> <span class=\"user-mention silent\" data-user-id=\"243562\">Adam Topaz</span> <span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> ?</p>\n</blockquote>\n<p>I have no idea on how this could be done, but it sounds interesting! I've noticed a lot of duplication, indeed, and its main disadvantage is that it makes it little clear to users what to use, and when, among <code>Valuation.valuationSubring</code> and <code>Valuation.integer</code>.</p>",
        "id": 528682816,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1752505519
    },
    {
        "content": "<p>When I get a chance later today I can write up such an elaborator. It's quite easy to do.</p>",
        "id": 528691178,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1752508041
    },
    {
        "content": "<p>But more generally, now that we have <code>ValuativeRel</code>, I think we should always use this as the \"ground truth\" for such constructions. In particular, i think we should have <code>ValuativeRel.integer</code> and <code>ValuativeRel.valuationSubring</code> and <em>remove</em> <code>Valuation.integer</code> and <code>Valuation.valuationSubring</code>.</p>",
        "id": 528691361,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1752508100
    },
    {
        "content": "<p>We can then state all the lemmas we want about this object for a valuation <code>v</code> using a <code>[v.Compatible]</code> instance.</p>",
        "id": 528691514,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1752508148
    },
    {
        "content": "<p>But wouldn't this become a bit cumbersome for global rings? I mean, the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-integers in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> seem easier to define using <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">v_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> rather than by setting a <code>ValuativeRel</code>on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> and then proving <code>v_p.Compatible</code>? Especially if you want to compare two of them, as in Ostrowski-like results.</p>",
        "id": 528692206,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1752508352
    },
    {
        "content": "<p>Here's a very basic prototype:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"s2\">\"ùí™[\"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"s2\">\"]\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">term</span>\n\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">ValuativeRel</span><span class=\"bp\">.</span><span class=\"n\">integer</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ValuativeRel</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">ValuativeRel</span><span class=\"bp\">.</span><span class=\"n\">valuation</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">integer</span>\n\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">ValuativeRel</span><span class=\"bp\">.</span><span class=\"n\">valuationSubring</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ValuativeRel</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">ValuativeRel</span><span class=\"bp\">.</span><span class=\"n\">valuation</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">valuationSubring</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"w\"> </span><span class=\"n\">Term</span>\n\n<span class=\"n\">elab_rules</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">term</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">ùí™</span><span class=\"o\">[</span><span class=\"bp\">$</span><span class=\"n\">K</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">elabTerm</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"n\">none</span>\n<span class=\"w\">  </span><span class=\"n\">try</span>\n<span class=\"w\">    </span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">mkAppOptM</span><span class=\"w\"> </span><span class=\"ss\">``ValuativeRel.valuationSubring</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">K</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">catch</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">mkAppOptM</span><span class=\"w\"> </span><span class=\"ss\">``ValuativeRel.integer</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"n\">K</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- foo.{u_1} (K : Type u_1) [Field K] [ValuativeRel K] : ValuationSubring K</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ValuativeRel</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ùí™</span><span class=\"o\">[</span><span class=\"n\">K</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- bar.{u_1} (K : Type u_1) [CommRing K] [ValuativeRel K] : Subring K</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ValuativeRel</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ùí™</span><span class=\"o\">[</span><span class=\"n\">K</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>What similar thing is being done in the manifolds library?</p>",
        "id": 528706985,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1752513269
    },
    {
        "content": "<p><a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/Differential.20geometry.20elaborators.20experiment/near/527231975\">#mathlib4 &gt; Differential geometry elaborators experiment @ üí¨</a></p>",
        "id": 528707336,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1752513408
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.F0.9D.92.AA.5BK.5D.20elaboration/near/528692206\">said</a>:</p>\n<blockquote>\n<p>I mean, the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>-integers in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> seem easier to define using <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>v</mi><mi>p</mi></msub></mrow><annotation encoding=\"application/x-tex\">v_p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7167em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span> rather than by setting a <code>ValuativeRel</code>on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span> and then proving <code>v_p.Compatible</code>?</p>\n</blockquote>\n<p>We also have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Withval#doc\">docs#Withval</a> which gives a type synonym that currently gets a new <code>Valued</code>. It should likely get a new <code>ValuativeRel</code>.</p>",
        "id": 528707508,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1752513470
    },
    {
        "content": "<p>Here's a use case for <code>integers</code> not on a field. With the way that ValuativeRel works, one can define it directly on Z_p with requiring a coercion onto a larger field. And one has the theorem that when Algebra K L, then Algebra O[K] O[L], and also that O[L] is the integral closure of O[K] in L. Without being able to state O[R] on ring R, one can't state those things as easily.</p>",
        "id": 528741375,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1752527587
    },
    {
        "content": "<p>It's not true in general that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"script\">O</mi><mi>L</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathcal{O}_L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">L</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is the integral closure of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"script\">O</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathcal{O}_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></p>",
        "id": 528741592,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1752527679
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Valuation.Integers#doc\">docs#Valuation.Integers</a></p>",
        "id": 528742221,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1752527936
    },
    {
        "content": "<p>Something I think would be worthwhile to do is to replace <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Valuation.Integers#doc\">docs#Valuation.Integers</a> with an analogous <code>ValuativeRel.Integers</code></p>",
        "id": 528742327,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1752527975
    }
]