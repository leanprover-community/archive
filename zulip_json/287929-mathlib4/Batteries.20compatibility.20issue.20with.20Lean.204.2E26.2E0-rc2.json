[
    {
        "content": "<p>Hey folks! I'm running into some compatibility issues with Batteries and Lean 4.26.0-rc2 and wanted to report it.</p>\n<p>The Problem:<br>\nAfter updating to Lean 4.26.0-rc2, I'm getting build failures in Batteries due to breaking changes in the Substring API. It looks like there's been a major refactor that's breaking existing code.</p>\n<p>What I'm Seeing:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">String</span><span class=\"bp\">/</span><span class=\"n\">Matcher</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">48</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"w\"> </span><span class=\"ss\">`Substring.bsize</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">usable</span><span class=\"w\"> </span><span class=\"n\">parameter</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"ss\">`Substring</span><span class=\"bp\">`</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">String</span><span class=\"bp\">/</span><span class=\"n\">Matcher</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">105</span><span class=\"o\">:</span><span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"ss\">`findSubstr?</span><span class=\"bp\">`</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"ss\">`Substring.Raw.findSubstr?</span><span class=\"bp\">`</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">/</span><span class=\"n\">Data</span><span class=\"bp\">/</span><span class=\"n\">String</span><span class=\"bp\">/</span><span class=\"n\">Matcher</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"o\">:</span><span class=\"mi\">109</span><span class=\"o\">:</span><span class=\"mi\">16</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"ss\">`containsSubstr</span><span class=\"bp\">`</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">contain</span><span class=\"w\"> </span><span class=\"ss\">`Substring.Raw.containsSubstr</span><span class=\"bp\">`</span>\n</code></pre></div>\n<p>Plus a bunch of deprecation warnings saying to use <code>Substring.Raw</code> instead of <code>Substring</code>, but then the Raw version doesn't have the same methods available.</p>\n<p>Is there a specific Batteries version tag that's compatible with Lean 4.26.0-rc2? Or are there migration instructions for the Substring API changes?</p>\n<p>The deprecation messages suggest using <code>Substring.Raw</code>, but then the required methods like <code>findSubstr?</code> and <code>containsSubstr</code> don't seem to be available in that namespace.</p>\n<p>Thanks for any help! <span aria-label=\"folded hands\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"folded hands\">:folded_hands:</span></p>",
        "id": 561008511,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764516876
    },
    {
        "content": "<p>Or I should ask, what is Batteries doing? Can I just delete it?</p>",
        "id": 561008591,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764516918
    },
    {
        "content": "<p>Okay, since even now I don't know what happened to Battery, I'll reject update and get back to v4.25.0</p>",
        "id": 561009543,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764517619
    },
    {
        "content": "<p>Batteries has a <code>v4.26.0-rc2</code> tag that builds successfully with Lean 4.26.0-rc2. The errors suggest that you are using some other revision of Batteries. Could you share the <code>lakefile.toml</code> of your project?</p>",
        "id": 561075409,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1764571238
    },
    {
        "content": "<p>I see. It might be my lakefile.toml fixing another version that compatible to v4.25.0</p>",
        "id": 561084649,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764575190
    },
    {
        "content": "<p>What I try to update from v4.25.0 to v4.26.0 is just typing lake update and I don't know how it will change lakefile.lean (I do not have lakefile.toml) and lake-manifest.json</p>",
        "id": 561085298,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764575431
    },
    {
        "content": "<p>I have already deleted the failed file as I lose patience to check the error. Maybe that every coder has it habit to write code, and also has the right to reject a not so friendly Mathlib update. The \"not so friendly\" may be just from a compatiable problem. :((((((</p>",
        "id": 561136960,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764589773
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260921\">Markus Himmel</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Batteries.20compatibility.20issue.20with.20Lean.204.2E26.2E0-rc2/near/561075409\">said</a>:</p>\n<blockquote>\n<p>Batteries has a <code>v4.26.0-rc2</code> tag that builds successfully with Lean 4.26.0-rc2. The errors suggest that you are using some other revision of Batteries. Could you share the <code>lakefile.toml</code> of your project?</p>\n</blockquote>\n<p>I now see new error about v4.26.0-rc2</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">3221225477</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"n\">Failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"n\">dependencies</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 561777505,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764810241
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"bp\">✖</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">7586</span><span class=\"bp\">/</span><span class=\"mi\">7587</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">12</span><span class=\"n\">s</span><span class=\"o\">)</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">LEAN_PATH</span><span class=\"bp\">=</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">workspace</span><span class=\"bp\">\\</span><span class=\"n\">Lean_workspace</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">-</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">26</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">Cli</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">lean</span><span class=\"bp\">;</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">workspace</span><span class=\"bp\">\\</span><span class=\"n\">Lean_workspace</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">-</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">26</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">batteries</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">lean</span><span class=\"bp\">;</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">workspace</span><span class=\"bp\">\\</span><span class=\"n\">Lean_workspace</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">-</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">26</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">Qq</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">lean</span><span class=\"bp\">;</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">workspace</span><span class=\"bp\">\\</span><span class=\"n\">Lean_workspace</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">-</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">26</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">aesop</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">lean</span><span class=\"bp\">;</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">workspace</span><span class=\"bp\">\\</span><span class=\"n\">Lean_workspace</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">-</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">26</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">proofwidgets</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">lean</span><span class=\"bp\">;</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">workspace</span><span class=\"bp\">\\</span><span class=\"n\">Lean_workspace</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">-</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">26</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">importGraph</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">lean</span><span class=\"bp\">;</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">workspace</span><span class=\"bp\">\\</span><span class=\"n\">Lean_workspace</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">-</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">26</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">LeanSearchClient</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">lean</span><span class=\"bp\">;</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">workspace</span><span class=\"bp\">\\</span><span class=\"n\">Lean_workspace</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">-</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">26</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">plausible</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">lean</span><span class=\"bp\">;</span><span class=\"n\">G</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">workspace</span><span class=\"bp\">\\</span><span class=\"n\">Lean_workspace</span><span class=\"bp\">\\</span><span class=\"n\">mathlib4</span><span class=\"bp\">-</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">26</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span><span class=\"bp\">\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">build</span><span class=\"bp\">\\</span><span class=\"n\">lib</span><span class=\"bp\">\\</span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"bp\">\\</span><span class=\"n\">Users</span><span class=\"bp\">\\</span><span class=\"n\">A1exa</span><span class=\"bp\">\\.</span><span class=\"n\">elan</span><span class=\"bp\">\\</span><span class=\"n\">toolchains</span><span class=\"bp\">\\</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.26.0-rc2\\bin\\lean.exe G:\\workspace\\Lean_workspace\\mathlib4-v4.26.0-rc2\\Mathlib.lean -o G:\\workspace\\Lean_workspace\\mathlib4-v4.26.0-rc2\\.lake\\build\\lib\\lean\\Mathlib.olean -i G:\\workspace\\Lean_workspace\\mathlib4-v4.26.0-rc2\\.lake\\build\\lib\\lean\\Mathlib.ilean -c G:\\workspace\\Lean_workspace\\mathlib4-v4.26.0-rc2\\.lake\\build\\ir\\Mathlib.c --setup G:\\workspace\\Lean_workspace\\mathlib4-v4.26.0-rc2\\.lake\\build\\ir\\Mathlib.setup.json --json</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">3221225477</span>\n<span class=\"n\">Some</span><span class=\"w\"> </span><span class=\"n\">required</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"w\"> </span><span class=\"n\">logged</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"n\">Failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"n\">module</span><span class=\"w\"> </span><span class=\"n\">dependencies</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 561778826,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764811135
    },
    {
        "content": "<p>Why the v4.26.0-rc2 in <a href=\"https://github.com/leanprover-community/mathlib4/tags\">https://github.com/leanprover-community/mathlib4/tags</a> has a Archive.lean?????</p>",
        "id": 561779678,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764811764
    },
    {
        "content": "<p>The README.md show me something but why my Mathlib need IMO???</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">Archive</span>\n\n<span class=\"n\">This</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">an</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">formalizations</span><span class=\"w\"> </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">don't</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">good</span><span class=\"w\"> </span><span class=\"n\">place</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">probably</span><span class=\"w\"> </span><span class=\"n\">because</span><span class=\"w\"> </span><span class=\"n\">there</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">almost</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">math</span><span class=\"w\"> </span><span class=\"n\">depending</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">these</span><span class=\"w\"> </span><span class=\"n\">results</span><span class=\"bp\">.</span>\n\n<span class=\"n\">We</span><span class=\"w\"> </span><span class=\"n\">keep</span><span class=\"w\"> </span><span class=\"n\">these</span><span class=\"w\"> </span><span class=\"n\">formalizations</span><span class=\"w\"> </span><span class=\"n\">here</span><span class=\"w\"> </span><span class=\"n\">so</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"n\">changes</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">we</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">keep</span><span class=\"w\"> </span><span class=\"n\">these</span><span class=\"w\"> </span><span class=\"n\">formalizations</span><span class=\"w\"> </span><span class=\"n\">up</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">date</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">##</span><span class=\"w\"> </span><span class=\"n\">Contributing</span>\n\n<span class=\"n\">If</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">formalization</span><span class=\"w\"> </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">want</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">here</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">just</span><span class=\"w\"> </span><span class=\"n\">make</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">pull</span><span class=\"w\"> </span><span class=\"n\">request</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"bp\">.</span>\n\n<span class=\"n\">When</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">make</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">pull</span><span class=\"w\"> </span><span class=\"n\">request</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"n\">make</span><span class=\"w\"> </span><span class=\"n\">sure</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">put</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"n\">lemmas</span><span class=\"w\"> </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">generally</span><span class=\"w\"> </span><span class=\"n\">useful</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"n\">place</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`Mathlib</span><span class=\"bp\">/`</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"o\">)</span><span class=\"bp\">.</span>\n\n<span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">adhere</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">guidelines</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">They</span><span class=\"w\"> </span><span class=\"n\">will</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">much</span><span class=\"w\"> </span><span class=\"n\">less</span><span class=\"w\"> </span><span class=\"n\">strictly</span><span class=\"w\"> </span><span class=\"n\">enforced</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">archive</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">we</span><span class=\"w\"> </span><span class=\"n\">still</span><span class=\"w\"> </span><span class=\"n\">want</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">adhere</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">conventions</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">make</span><span class=\"w\"> </span><span class=\"n\">maintenance</span><span class=\"w\"> </span><span class=\"n\">easier</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">This</span><span class=\"w\"> </span><span class=\"n\">ensures</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">changing</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"n\">maintainers</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">fix</span><span class=\"w\"> </span><span class=\"n\">these</span><span class=\"w\"> </span><span class=\"n\">contributions</span><span class=\"w\"> </span><span class=\"n\">without</span><span class=\"w\"> </span><span class=\"n\">much</span><span class=\"w\"> </span><span class=\"n\">effort</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Here</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">guidelines</span><span class=\"o\">:</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">style</span><span class=\"w\"> </span><span class=\"n\">guide</span><span class=\"o\">](</span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">.</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">io</span><span class=\"bp\">/</span><span class=\"n\">contribute</span><span class=\"bp\">/</span><span class=\"n\">style</span><span class=\"bp\">.</span><span class=\"n\">html</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">contributors</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"w\"> </span><span class=\"n\">conventions</span><span class=\"o\">](</span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"bp\">/</span><span class=\"n\">blob</span><span class=\"bp\">/</span><span class=\"n\">master</span><span class=\"bp\">/</span><span class=\"n\">doc</span><span class=\"bp\">/</span><span class=\"n\">dev</span><span class=\"bp\">/</span><span class=\"n\">commit_convention</span><span class=\"bp\">.</span><span class=\"n\">md</span><span class=\"o\">)</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">You</span><span class=\"w\"> </span><span class=\"n\">don't</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">follow</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">naming</span><span class=\"w\"> </span><span class=\"n\">conventions</span><span class=\"o\">](</span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">.</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">io</span><span class=\"bp\">/</span><span class=\"n\">contribute</span><span class=\"bp\">/</span><span class=\"n\">naming</span><span class=\"bp\">.</span><span class=\"n\">html</span><span class=\"o\">)</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 561779774,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764811832
    },
    {
        "content": "<p>In this way, I cannot even <code>import Mathlib</code> in a .lean file just because of the 7586 and 7587</p>",
        "id": 561781167,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764812876
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> I may want an assistance from the origin developer, very well thanks.</p>",
        "id": 561781365,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764812999
    },
    {
        "content": "<p>Now I just have a very silly way to deal with it: first open lean 4 web and second #min_imports and third paste it to my file.</p>",
        "id": 561783402,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764814458
    },
    {
        "content": "<p>I really do not know what happens to 7586 and 7587. Maybe I do not need them. But I cannot promise that I will never add new import when writing my code (So in this way I always import the whole Mathlib).</p>",
        "id": 561783439,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764814487
    },
    {
        "content": "<p>We can only help you if you share your <code>lakefile</code>.</p>",
        "id": 561801224,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1764829009
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/QXNUHNR6w8Yz3NRHpKierGyN/lakefile.lean\">lakefile.lean</a><br>\n<a href=\"/user_uploads/3121/IHTIc2wWtgGXomJ1TJm1QOcD/lake-manifest.json\">lake-manifest.json</a><br>\n<a href=\"/user_uploads/3121/1ZhtxGS0yVA2qQuKEV6gLZ02/lean-toolchain\">lean-toolchain</a></p>",
        "id": 561802372,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764829750
    },
    {
        "content": "<p>Ah, so you're working on mathlib itself, not on a project that is downstream of mathlib. Is your code on a branch somewhere on GitHub? That would make it even easier to take a look.</p>",
        "id": 561802558,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1764829852
    },
    {
        "content": "<p>All right. I really do not know how to work on some branch :(</p>",
        "id": 561802635,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764829897
    },
    {
        "content": "<p>Should I download something else?</p>",
        "id": 561802659,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764829912
    },
    {
        "content": "<p>I download it all. <a href=\"https://github.com/leanprover-community/mathlib4/releases/tag/v4.26.0-rc2\">https://github.com/leanprover-community/mathlib4/releases/tag/v4.26.0-rc2</a></p>",
        "id": 561802714,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764829940
    },
    {
        "content": "<p>Downloading mathlib as a zip file from the GitHub releases page is not a supported way of using it.</p>\n<p>If you want to create a new formalization project that uses mathlib, you should install Lean as laid out in <a href=\"https://lean-lang.org/install/\">https://lean-lang.org/install/</a> and then follow the setup guide, which will tell you how to create a project using mathlib.</p>\n<p>If you want to work on mathlib itself instead, you should install Lean as laid out in <a href=\"https://lean-lang.org/install/\">https://lean-lang.org/install/</a> and then follow mathlib's contribution guide: <a href=\"https://leanprover-community.github.io/contribute/index.html#working-on-mathlib\">https://leanprover-community.github.io/contribute/index.html#working-on-mathlib</a></p>",
        "id": 561803597,
        "sender_full_name": "Markus Himmel",
        "timestamp": 1764830475
    },
    {
        "content": "<p>You mean that my work now is trying to add new theorem in Mathlib rather than do my own project, where the latter is exactly what I hope to do and the former is I mistakenly do.</p>",
        "id": 561803750,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764830546
    },
    {
        "content": "<p>If you want to create a project that depends on mathlib, follow the setup guide as Markus explains in the second paragraph</p>",
        "id": 561804935,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1764831205
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"260921\">Markus Himmel</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Batteries.20compatibility.20issue.20with.20Lean.204.2E26.2E0-rc2/near/561803597\">said</a>:</p>\n<blockquote>\n<p>Downloading mathlib as a zip file from the GitHub releases page is not a supported way of using it.</p>\n<p>If you want to create a new formalization project that uses mathlib, you should install Lean as laid out in <a href=\"https://lean-lang.org/install/\">https://lean-lang.org/install/</a> and then follow the setup guide, which will tell you how to create a project using mathlib.</p>\n<p>If you want to work on mathlib itself instead, you should install Lean as laid out in <a href=\"https://lean-lang.org/install/\">https://lean-lang.org/install/</a> and then follow mathlib's contribution guide: <a href=\"https://leanprover-community.github.io/contribute/index.html#working-on-mathlib\">https://leanprover-community.github.io/contribute/index.html#working-on-mathlib</a></p>\n</blockquote>\n<p>Error while checking Lean version: error: error during download info: caused by: [28] Timeout was reached ( Failed to connect to <a href=\"http://raw.githubusercontent.com\">raw.githubusercontent.com</a> port 443 after 21056 ms: Could not connect to server)</p>",
        "id": 561808383,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764832924
    },
    {
        "content": "<p>I may say that Americans and Europeans will never know that why I prefer using edge to download a mathlib.</p>",
        "id": 561808516,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764832991
    },
    {
        "content": "<p>Because the network problem in mainland China makes it hard to connect github through git bash or vs code so every time I will refuse download anything using it.</p>",
        "id": 561808602,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764833050
    },
    {
        "content": "<p>So the \"supported\" method in Europe might not be a supported method in China.</p>",
        "id": 561808748,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764833135
    },
    {
        "content": "<p>No!!!!!!!!!!!!!!!!!!!!! Why it cannot just read the file I've just copied from mathlib to the new project path \".lake/packages\"???</p>",
        "id": 561814747,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1764835627
    }
]