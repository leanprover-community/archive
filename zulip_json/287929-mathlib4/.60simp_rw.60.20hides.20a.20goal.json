[
    {
        "content": "<p>In the example below, using <code>simp_rw</code> when there are two active goals, only shows the first:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">SimpRw</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- infoview shows only one goal just before `simp_rw`</span>\n<span class=\"w\">  </span><span class=\"n\">trivial</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- infoview shows two goals just before `·`</span>\n<span class=\"w\">  </span><span class=\"n\">trivial</span>\n</code></pre></div>",
        "id": 564013486,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1765882596
    },
    {
        "content": "<p>This comes up on <a href=\"https://github.com/leanprover-community/mathlib4/blob/8ee8525c1e1c3a2794c2bfa32465f220ecf0d1a4/Mathlib/Probability/Kernel/Proper.lean#L110\">this line</a>, where</p>\n<ul>\n<li>the <code>multiGoal</code> linter flags a tactic starting with two active goals (correctly),</li>\n<li>the infoview shows that there is only one active goal (incorrectly),</li>\n<li>the <code>multiGoal</code> linter gets disabled as providing a false positive.</li>\n</ul>",
        "id": 564015155,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1765883111
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/32948\">#32948</a> fixes the <code>multiGoal</code> \"exceptions\", including the one above.  It does <em>not</em> solve the <code>simp_rw</code> issue, though.</p>",
        "id": 564020391,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1765884791
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/32956\">#32956</a> should be the <code>simp_rw</code> fix -- assuming that this is desirable!</p>",
        "id": 564025379,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1765886592
    }
]