[
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=prod_le_borel_prod#doc\">docs#prod_le_borel_prod</a> is a bit strange because it only applies to <code>borel</code>, as opposed to an arbitrary <code>[m : MeasurableSpace (α × β)] [BorelSpace (α × β)]</code>. How about this for a variant:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">prod_le_measurableSpace_of_borelSpace</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">BorelSpace</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">BorelSpace</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MeasurableSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">BorelSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Prod</span><span class=\"bp\">.</span><span class=\"n\">instMeasurableSpace</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">BorelSpace</span><span class=\"bp\">.</span><span class=\"n\">measurable_eq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">prod_le_borel_prod</span>\n</code></pre></div>\n<p>I find myself wanting this one in FLT rather than <code>prod_le_borel_prod</code>, becasue I am putting <code>[MeasurableSpace X] [BorelSpace X]</code> assumptions on topological spaces when these are necessary to make theorem statements about Haar characters compile. Would this lemma be welcome in mathlib? I still don't really know much about the measurable space part of the library. Is it already there?</p>",
        "id": 562201635,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1764980996
    },
    {
        "content": "<p>I don't like the idea of having conflicting instances.</p>",
        "id": 562202026,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1764981444
    },
    {
        "content": "<p>Oh! I had not spotted that <code>Prod.instMeasurableSpace</code> was an instance! But I don't want this measurable space structure on my product, I want the Borel space structure.</p>",
        "id": 562202153,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1764981602
    },
    {
        "content": "<p>Although everything is second countable or whatever in my application, so they will actually be equal. Hmm.</p>",
        "id": 562202177,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1764981631
    },
    {
        "content": "<p>I see 2 options:</p>\n<ul>\n<li>if you care about spaces that aren't second countable and you have enough theorems that assume <code>inst \\le borel _</code>, then we can add a typeclass claiming this inequality; then we can see what can be generalized from <code>BorelSpace</code> to this assumption;</li>\n<li>if not, then you can add <code>SecondCountableTopology</code> as assumptions and use the <code>BorelSpace</code> instance for <code>Prod</code>.</li>\n</ul>",
        "id": 562203967,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1764983370
    }
]