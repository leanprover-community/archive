[
    {
        "content": "<p>I couldn’t find a thread on this, but I’m on mobile, so I might’ve missed this. What is the current status on the central limit theorem in Mathlib?</p>\n<p>Is this work in progress or is this wide open? <br>\nIn any case, are there important components (likely) missing?</p>",
        "id": 409812583,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1703421920
    },
    {
        "content": "<p>This is a question for <span class=\"user-mention\" data-user-id=\"243312\">@Jason KY.</span></p>",
        "id": 409817205,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1703426472
    },
    {
        "content": "<p>The main missing piece for the usual proof of that theorem is the definition of the characteristic function, and proofs of its properties.<br>\nI wrote a definition (and basically nothing else) a while ago here: <a href=\"https://github.com/leanprover-community/mathlib4/compare/RD_char_fun\">https://github.com/leanprover-community/mathlib4/compare/RD_char_fun</a> .<br>\nI you want to work on it, feel free to take this definition (or discard it).</p>",
        "id": 409818143,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1703427251
    },
    {
        "content": "<p>Okay, I’ll see if I can get around to that at some stage. I haven’t yet invested too much time into the measure theory parts of Mathlib, I’ll probably turn my attention there once I finish working on Lindelöf spaces.</p>",
        "id": 409819593,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1703428738
    },
    {
        "content": "<p>I think that a feasible approach would be adapting some of the first chapter of Applebaum’s Lévy Processes and Stochastic Calculus. This provides the basic tools to work with characteristic functions (incl eg Lévy’s continuity theorem) and would also lay some more foundations for Lévy process theory at some point. If you’re aware of a better source, please let me know! I’ll try to adapt everything to more general measurable spaces where possible, of course! I’ll work on this somewhere in the new year, can’t say for certain yet when!</p>",
        "id": 409843569,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1703453213
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"350992\">@Rémy Degenne</span> your file looks very good, I'll add some more basic API and make a PR (linearity, Lévy's continuity theorem etc.). Shall I include you in the copyright statement? You provided all the essential pieces!</p>",
        "id": 410264712,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1703754641
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"673728\">@Josha Dekker</span>  I wanted to try setting up a blueprint to learn how it works, and your question about the CLT gave me a good reason: over the last two days I created a project with a blueprint for a proof of CLT using characteristic functions. See <a href=\"https://remydegenne.github.io/CLT/index.html\">https://remydegenne.github.io/CLT/index.html</a> for the blueprint, <a href=\"https://github.com/RemyDegenne/CLT\">https://github.com/RemyDegenne/CLT</a> for the github repository and <a href=\"https://remydegenne.github.io/CLT/dep_graph_document.html\">https://remydegenne.github.io/CLT/dep_graph_document.html</a> for the dependency graph. I have added my characteristic function code to that repository.</p>\n<p>If anyone wants to contribute to the CLT proof, feel free to fork the repository and then open a PR!<br>\nThe blueprint is very much WIP: it is not yet very detailed and many proofs are missing in the latex. I'll continue working on it, and PRs for that aspect of the project are also welcome. The home page of the blueprint lists a few helpful books.</p>\n<p>The proof goes through Prokhorov's theorem, and I think that Kalle Kytölä is working on that. <span class=\"user-mention\" data-user-id=\"373986\">@Kalle Kytölä</span> perhaps you'd like to expand the blueprint with details about your preferred way of proving that theorem?</p>\n<p>The central limit theorem is one of the most embarrassing gaps in our probability library: let's close it!</p>",
        "id": 410301023,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1703773502
    },
    {
        "content": "<p>Thanks, I’ll take a look later! I’ll probably try to work on building some more API for characteristic functions, something like Lévy’s continuity criterion is useful in multiple results!</p>",
        "id": 410302139,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1703774049
    },
    {
        "content": "<p>We might consider a more general CLT like the Lindeberg-Feller CLT as a follow up, which also is proven through characteristic functions and doesn’t require the observations to be iid (which probably makes the approach a bit longer).</p>",
        "id": 410349604,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1703802668
    },
    {
        "content": "<p>I'll take a shot at lemma 4.6!</p>",
        "id": 410403571,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1703837478
    },
    {
        "content": "<p>(I'm not working on that at this point. I was first trying to work on convolution of measures for this, but hit a bump as my proficiency with integrals in Mathlib is too lacking)</p>",
        "id": 413173053,
        "sender_full_name": "Josha Dekker",
        "timestamp": 1705417294
    },
    {
        "content": "<p>Sorry for the very late reply!</p>\n<p><span class=\"user-mention silent\" data-user-id=\"350992\">Rémy Degenne</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Status.20of.20the.20Central.20limit.20theorem/near/410301023\">said</a>:</p>\n<blockquote>\n<p>The proof goes through Prokhorov's theorem, and I think that Kalle Kytölä is working on that. <span class=\"user-mention silent\" data-user-id=\"373986\">Kalle Kytölä</span> perhaps you'd like to expand the blueprint with details about your preferred way of proving that theorem?</p>\n</blockquote>\n<p>Yes, I indeed have a preferred way to do the Prokhorov's theorem <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span> <span aria-label=\"innocent\" class=\"emoji emoji-1f607\" role=\"img\" title=\"innocent\">:innocent:</span>. I checked your blueprint, and it matches my preferred way --- I want to do it via Riesz-Markov-Kakutani. <del>Is there a way I can contribute to the blueprint?</del> <em>[EDIT: I see now you said how to do that.]</em> I don't have an awful lot to add, though... The plan is to use Riesz-Markov-Kakutani on compact spaces <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> to identify the space of probability measures on <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> with a closed subset of the unit ball of the weak dual of continuous functions, and get its compactness from Banach-Alaoglu. This gives Prokhorov's theorem on compact spaces <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>. Then on general Polish spaces Prokhorov's theorem reduces to the case of compact spaces by omitting an <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ε</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\varepsilon&gt;0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\">ε</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> of total mass of tight families.</p>\n<p>(I'd also want metrizability of the convergence in distribution, which is what I am doing in <a href=\"https://github.com/leanprover-community/mathlib4/pull/10406\">#10406</a> etc. This gets rid of any barriers between compactness and sequential compactness, for example.)</p>\n<p>(Riesz-Markov-Kakutani on compact spaces has been proved by <span class=\"user-mention silent\" data-user-id=\"513978\">Jesse Reimann</span> some years ago, but it is not in Mathlib. The PRs of the main content have essentially not been started because of stupid issues regarding the handling subtractions of bounded continuous <code>NNReal</code>-valued functions etc. The plan forward involved a bit of a refactor, but I have not had time to get started with it...)</p>\n<p><span class=\"user-mention silent\" data-user-id=\"350992\">Rémy Degenne</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Status.20of.20the.20Central.20limit.20theorem/near/410301023\">said</a>:</p>\n<blockquote>\n<p>The central limit theorem is one of the most embarrassing gaps in our probability library: let's close it!</p>\n</blockquote>\n<p>Yes!</p>\n<p>If the bottleneck is Prokhorov, then there is, of course, a much simpler way for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span> via cumulative distribution functions (\"Helly's selection theorem\"). I have been intending to PR the cdf characterization of convergence in distribution for some time... I will try to do that soon (it is almost trivial with the portmanteau theorem, which exists in a sufficient form in Mathlib already), so that if someone wants to take the route of Helly's selection, that should not hold back the Central Limit Theorem.</p>\n<p>(I suppose indeed the other needed component for CLT is inversion of characteristic functions, i.e., suitable Fourier theory. In my mind there might be one tricky lemma that is often proven by complex contour integrals, although ways around that seem to exist. Anyway, someone else knows about the status of that better than I do.)</p>",
        "id": 420833628,
        "sender_full_name": "Kalle Kytölä",
        "timestamp": 1707600119
    },
    {
        "content": "<h3>Central limit theorem update</h3>\n<p>There has been some work happening over at <a href=\"https://github.com/RemyDegenne/CLT\">https://github.com/RemyDegenne/CLT</a> and we now have a proof of the central limit theorem for real random variables, if we assume Prokhorov's theorem.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"632105\">Jakob Stiefel</span>  has recently added to Mathlib a proof that characteristic functions separate measures, which is a key ingredient.<br>\nUsing that, we were able to prove the Lévy convergence theorem (weak convergence of measures equivalent to convergence of characteristic functions), assuming Prokhorov's theorem.</p>\n<p><span class=\"user-mention\" data-user-id=\"631691\">@Thomas Zhu</span>  then proved the CLT from there, which needed facts about characteristic functions, independence and Gaussian random variables.</p>\n<p>Prokhorov's theorem is being worked on by <span class=\"user-mention silent\" data-user-id=\"819544\">Arav Bhattacharyya</span> , and once that's done our proof will be complete.<br>\nYou might spot another blue node in the graph leading to the CLT corresponding to a version of Taylor's theorem, but there is an open Mathlib PR for that.</p>\n<p>We are making PRs to Mathlib with the material that does not depend on Prokhorov.</p>",
        "id": 511784605,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1744440980
    },
    {
        "content": "<p>Regarding Prokhorov, I've just sent the Riesz-Markov-Kakutani theorem of <a href=\"https://github.com/leanprover-community/mathlib4/pull/12290\">#12290</a> to bors. This should be an important ingredient for Prokhorov.</p>",
        "id": 511784793,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1744441183
    },
    {
        "content": "<p>Yes, if I recall correctly Arav is assuming RMK and going from there.</p>",
        "id": 511784874,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1744441224
    },
    {
        "content": "<p>Could you add a link to the blueprint on the readme of the project? Otherwise, there is no direct way to find the blueprint when one is on the github page.</p>",
        "id": 511784992,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1744441327
    },
    {
        "content": "<p>There is a link in the \"About\" section on the right of the github page, but I'll add it to the readme as well.</p>",
        "id": 511785026,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1744441370
    },
    {
        "content": "<p>Ah yes, thanks!</p>",
        "id": 511785060,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1744441416
    },
    {
        "content": "<p>And I need to restore the docs too. For now the \"LEAN\" links in the blueprint point nowhere, so it's a bit hard to find the results in the code.</p>",
        "id": 511785171,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1744441505
    },
    {
        "content": "<p>In the <a href=\"https://remydegenne.github.io/CLT/blueprint/dep_graph_document.html\">dependency graph</a> I used a purple border color to denote things that are already in Mathlib, but I don't know how to add an entry in the legend for that color. Does anyone know?</p>",
        "id": 511790950,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1744446657
    },
    {
        "content": "<p>It looks like I forgot that case in the function that creates the legend.</p>",
        "id": 511826187,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1744475957
    },
    {
        "content": "<p>I just pushed a fix. Is your blueprint generated using the master branch of leanblueprint or do you take it from pypi (hence need a release)?</p>",
        "id": 511826443,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1744476138
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"350992\">Rémy Degenne</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Status.20of.20the.20Central.20limit.20theorem/near/511790950\">said</a>:</p>\n<blockquote>\n<p>In the <a href=\"https://remydegenne.github.io/CLT/blueprint/dep_graph_document.html\">dependency graph</a> I used a purple border color to denote things that are already in Mathlib</p>\n</blockquote>\n<p><span aria-label=\"idea\" class=\"emoji emoji-1f4a1\" role=\"img\" title=\"idea\">:idea:</span> New blueprint color discovered</p>",
        "id": 511827596,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1744477107
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Status.20of.20the.20Central.20limit.20theorem/near/511826443\">said</a>:</p>\n<blockquote>\n<p>I just pushed a fix. Is your blueprint generated using the master branch of leanblueprint or do you take it from pypi (hence need a release)?</p>\n</blockquote>\n<p>My CI gets leanblueprint with <code>pip install leanblueprint</code>, so I guess I will have to wait for a release. That's not a big issue anyway. It can wait.</p>",
        "id": 511830843,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1744480013
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Status.20of.20the.20Central.20limit.20theorem/near/511827596\">said</a>:</p>\n<blockquote>\n<p><span aria-label=\"idea\" class=\"emoji emoji-1f4a1\" role=\"img\" title=\"idea\">:idea:</span> New blueprint color discovered</p>\n</blockquote>\n<p>The default color for <code>\\mathlibok</code> is a slightly darker green than the <code>\\leanok</code> color. I can't easily tell them apart, so I replaced it with purple.</p>",
        "id": 511830980,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1744480149
    },
    {
        "content": "<p>You can use <code>pip install git+https://github.com/PatrickMassot/leanblueprint.git@master</code> for installing from the newest github version (or <code>pip install --upgrade --force-reinstall --no-deps git+https://github.com/PatrickMassot/leanblueprint.git@master</code> to force override an existing install)</p>",
        "id": 511832795,
        "sender_full_name": "Thomas Zhu",
        "timestamp": 1744481710
    },
    {
        "content": "<p>Regarding Prokhorov- the easy direction is pretty much done. The other direction (requiring RMK) I will start soon. I’m having to take a little break from working properly on this right now as I have exams over May, but intend to get it done over June. I don’t want to hold up the CLT going in mathlib so if anyone wants to get it done sooner I don’t mind!</p>",
        "id": 511833798,
        "sender_full_name": "Arav Bhattacharyya",
        "timestamp": 1744482572
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"350992\">Rémy Degenne</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Status.20of.20the.20Central.20limit.20theorem/near/511830843\">said</a>:</p>\n<blockquote>\n<p>My CI gets leanblueprint with <code>pip install leanblueprint</code>, so I guess I will have to wait for a release. That's not a big issue anyway. It can wait.</p>\n</blockquote>\n<p>Releases are cheap. Could you try it locally using master? I didn’t test my fix at all…</p>",
        "id": 511834401,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1744483115
    },
    {
        "content": "<p>I tested in local: I have a new legend, but it says</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">statement</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"w\"> </span><span class=\"n\">border</span>\n<span class=\"w\">    </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n</code></pre></div>\n<p>So there is \"The statement of this result is in Mathlib\" where I would expect the color. But I suspect it's my fault. I changed the color with</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">\\</span><span class=\"n\">graphcolor</span><span class=\"o\">{</span><span class=\"n\">mathlib</span><span class=\"o\">}{</span><span class=\"n\">purple</span><span class=\"o\">}{</span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">statement</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">result</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 511834654,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1744483342
    },
    {
        "content": "<p>Ah yes, the laster argument is meant to be a description of the border.</p>",
        "id": 511834708,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1744483395
    },
    {
        "content": "<p>So <code>Purple</code> would be fine.</p>",
        "id": 511834717,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1744483408
    },
    {
        "content": "<p>It looks redundant with the previous argument, but the previous argument could a html color description such as <code>#ff10aa</code></p>",
        "id": 511834738,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1744483440
    },
    {
        "content": "<p>Thanks! It works perfectly in local now.</p>",
        "id": 511834810,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1744483491
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"819544\">Arav Bhattacharyya</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Status.20of.20the.20Central.20limit.20theorem/near/511833798\">said</a>:</p>\n<blockquote>\n<p>Regarding Prokhorov- the easy direction is pretty much done. The other direction (requiring RMK) I will start soon. I’m having to take a little break from working properly on this right now as I have exams over May, but intend to get it done over June. I don’t want to hold up the CLT going in mathlib so if anyone wants to get it done sooner I don’t mind!</p>\n</blockquote>\n<p>I am not aware of any formalization project that desperately needs the CLT right now, so take all the time you need!<br>\nIf at some point your university project is done but there is still something left to do and you want help, ping me.</p>",
        "id": 511835107,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1744483739
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"350992\">Rémy Degenne</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Status.20of.20the.20Central.20limit.20theorem/near/511830980\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Status.20of.20the.20Central.20limit.20theorem/near/511827596\">said</a>:</p>\n<blockquote>\n<p><span aria-label=\"idea\" class=\"emoji emoji-1f4a1\" role=\"img\" title=\"idea\">:idea:</span> New blueprint color discovered</p>\n</blockquote>\n<p>The default color for <code>\\mathlibok</code> is a slightly darker green than the <code>\\leanok</code> color. I can't easily tell them apart, so I replaced it with purple.</p>\n</blockquote>\n<p><span aria-label=\"light bulb\" class=\"emoji emoji-1f4a1\" role=\"img\" title=\"light bulb\">:light_bulb:</span> New blueprint macro discovered</p>",
        "id": 511851569,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1744498726
    },
    {
        "content": "<p>Note this macro is documented in the leanblueprint repo README. So maybe you could discover more things by reading that file.</p>",
        "id": 511895579,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1744539919
    },
    {
        "content": "<p>I just released a new version on pypi with the fix.</p>",
        "id": 511897550,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1744541568
    }
]