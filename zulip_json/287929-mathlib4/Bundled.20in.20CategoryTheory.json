[
    {
        "content": "<p><code>Bundled</code> seems to be used only 4-5 times in mathlib, and both <code>BundledHom</code> and <code>UnbundledHom</code> are used 0 times outside of the files they have been defined in. Should these be/are these in the process of being deprecated? The only time I see <code>Bundled</code> being used is to define subcategories of <code>Cat</code> (e.g. <code>Grpd</code> or <code>Quiver</code>, which should all be replaced with some bicategorical notion at some point anyways) and also at a few places in the model theory library.</p>",
        "id": 556943685,
        "sender_full_name": "Calle Sönne",
        "timestamp": 1763419053
    },
    {
        "content": "<p>It seems that most places where it was used before, it has been replaced by the structure <code>ObjectProperty.FullSubcategory</code>.</p>",
        "id": 556943864,
        "sender_full_name": "Calle Sönne",
        "timestamp": 1763419157
    },
    {
        "content": "<p>Actually a comment in the <code>Bundled</code> file refer to <code>TopCat</code> and <code>MonCat</code> neither of which are implemented using bundled anymore, both instead are implemented manually. So it seems we prefer to not use bundled anymore. I think that I missed when this switch was happening, was this part of solving the <code>erw</code> issues with concrete categories? (Edit: seems so, as I found this: <a href=\"#narrow/channel/287929-mathlib4/topic/Concrete.20category.20class.20redesign/near/493903980\">https://leanprover.zulipchat.com/#narrow/channel/287929-mathlib4/topic/Concrete.20category.20class.20redesign/near/493903980</a> now)</p>",
        "id": 556944740,
        "sender_full_name": "Calle Sönne",
        "timestamp": 1763419578
    },
    {
        "content": "<p>If so, can I remove the final instances of bundled and deprecate these files?</p>",
        "id": 556944798,
        "sender_full_name": "Calle Sönne",
        "timestamp": 1763419604
    },
    {
        "content": "<p>Yes please!</p>",
        "id": 556948514,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1763421387
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"132603\">Calle Sönne</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Bundled.20in.20CategoryTheory/near/556943685\">said</a>:</p>\n<blockquote>\n<p><code>Bundled</code> seems to be used only 4-5 times in mathlib, and both <code>BundledHom</code> and <code>UnbundledHom</code> are used 0 times outside of the files they have been defined in. Should these be/are these in the process of being deprecated? The only time I see <code>Bundled</code> being used is to define subcategories of <code>Cat</code> (e.g. <code>Grpd</code> or <code>Quiver</code>, which should all be replaced with some bicategorical notion at some point anyways) and also at a few places in the model theory library.</p>\n</blockquote>\n<p>I wrote much of that part of the model theory library - would it be helpful for me to rewrite that, or are you working on it already and I should save my thoughts for a review?</p>",
        "id": 560672901,
        "sender_full_name": "Aaron Anderson",
        "timestamp": 1764278916
    },
    {
        "content": "<p>Hi! I planned to contact you about it when I got to that point actually, so it's nice that you messaged here :)</p>\n<p>After a brief look in the model theory library, I didn't see a clear way to remove it from there, but more importantly I need to figure out what should be replacing the ~3 remaining uses in the category theory library. I thought I knew how to replace it, but now I think it is more tricky than that (and maybe something like <code>Bundled</code> will be needed after all). Once I have a solution to this, then maybe it will be clear that the cases in the model theory library can just be refactored to use whatever my solution is.</p>",
        "id": 560833446,
        "sender_full_name": "Calle Sönne",
        "timestamp": 1764351407
    },
    {
        "content": "<p>I think I can take essentially the same approach as <code>MonCat</code> and <code>AddMonCat</code>. It would be nice to also define the actual categories induced by first-order homomorphisms, embeddings, and elementary embeddings on <code>L.Structure</code>s and <code>T.ModelType</code>s, but this would presumably require a bunch of type synonyms.</p>",
        "id": 560853566,
        "sender_full_name": "Aaron Anderson",
        "timestamp": 1764363358
    },
    {
        "content": "<p>I'm trying it here: <a href=\"https://github.com/leanprover-community/mathlib4/pull/32285\">#32285</a></p>",
        "id": 561023943,
        "sender_full_name": "Aaron Anderson",
        "timestamp": 1764529617
    },
    {
        "content": "<p>The category of categories <code>Cat</code> is defined using <code>Bundled</code>. I currently need this for a project. Are there going to be any changes to this soon or am I fine using it?</p>\n<p>Also, I'm naturally inclined to have certain constructions take a <code>C : Cat</code> instead of a <code>C : Type u</code> and a <code>Category C</code>, since I'm using a certain functor <code>F : Cat -&gt; Cat</code>and I don't want to constantly call <code>Bundled.mk</code> to apply it to an argument. Is there some reason I should be discouraged from using this approach?</p>",
        "id": 561024321,
        "sender_full_name": "Adrian Marti",
        "timestamp": 1764529948
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"402440\">Adrian Marti</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Bundled.20in.20CategoryTheory/near/561024321\">said</a>:</p>\n<blockquote>\n<p>The category of categories <code>Cat</code> is defined using <code>Bundled</code>. I currently need this for a project. Are there going to be any changes to this soon or am I fine using it?</p>\n<p>Also, I'm naturally inclined to have certain constructions take a <code>C : Cat</code> instead of a <code>C : Type u</code> and a <code>Category C</code>, since I'm using a certain functor <code>F : Cat -&gt; Cat</code>and I don't want to constantly call <code>Bundled.mk</code> to apply it to an argument. Is there some reason I should be discouraged from using this approach?</p>\n</blockquote>\n<p>I don't think you should worry, as in whatever way it is replaced, most of the API should stay the same. Also I don't think you should be using <code>Bundled.mk</code> but rather <code>Cat.of</code> (which will likely remain the name after that refactor).</p>\n<p>Maybe what you should note is that there is the PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/31807\">#31807</a> which adds type-aliases to distinguish functors and 1-morphisms in <code>Cat</code> as well as natural transformations and 2-morphisms. This should improve automation.</p>",
        "id": 561024833,
        "sender_full_name": "Calle Sönne",
        "timestamp": 1764530360
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"302826\">Aaron Anderson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Bundled.20in.20CategoryTheory/near/560853566\">said</a>:</p>\n<blockquote>\n<p>I think I can take essentially the same approach as <code>MonCat</code> and <code>AddMonCat</code>. It would be nice to also define the actual categories induced by first-order homomorphisms, embeddings, and elementary embeddings on <code>L.Structure</code>s and <code>T.ModelType</code>s, but this would presumably require a bunch of type synonyms.</p>\n</blockquote>\n<p>Yes, but I actually don't fully understand why this is not done using <code>Bundled</code> (or something like it). Much of the setup seems the same.</p>",
        "id": 561024915,
        "sender_full_name": "Calle Sönne",
        "timestamp": 1764530449
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"402440\">Adrian Marti</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Bundled.20in.20CategoryTheory/near/561024321\">said</a>:</p>\n<blockquote>\n<p>... and I don't want to constantly call <code>Bundled.mk</code> to apply it to an argument. Is there some reason I should be discouraged from using this approach?</p>\n</blockquote>\n<p>to start with, you should be using <code>Cat.of</code> instead</p>",
        "id": 561025045,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1764530568
    },
    {
        "content": "<p>Thank both of you I will do that :)</p>",
        "id": 561025492,
        "sender_full_name": "Adrian Marti",
        "timestamp": 1764530945
    }
]