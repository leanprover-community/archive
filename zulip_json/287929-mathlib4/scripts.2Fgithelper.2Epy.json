[
    {
        "content": "<p>After being nerdsniped by <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/all.20future.20PRs.20should.20be.20made.20from.20forks/near/523827738\">#mathlib4 &gt; all future PRs should be made from forks @ ðŸ’¬</a>, I went and actually wrote the script. It is available in PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/26023\">#26023</a>. If you want to try it out right now, you can run <code>curl https://raw.githubusercontent.com/Garmelon/mathlib4/refs/heads/githelper/scripts/githelper.py -o scripts/githelper.py</code> in the root directory of your mathlib repo to download it.</p>\n<p>One possible use is to run it before running the <code>migrate_to_fork.py</code> script to prepare the repo and fork, or after running <code>migrate_to_fork.py</code> if it seems like it has messed something up. My script tries to be more general than <code>migrate_to_fork.py</code> in understanding the repository state, and my hope is that it is more robust as a result. However, it is also a bit more opinionated than <code>migrate_to_fork.py</code>. This can be a good thing - it helps with troubleshooting if everyone has the same setup.</p>\n<p>The script was only tested on Linux, not on Windows, its output could be more helpful, and there might of course be bugs. If you notice anything that seems wrong, please let me know :)</p>",
        "id": 524441940,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1750163489
    },
    {
        "content": "<p>I just tested this on macOS and I got an error at this step:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>WARNING: Branch 'master' should have pushRemote 'origin'.\nUpdate pushRemote of 'master'? [Y/n]:\n$ git config set -- branch.master.pushRemote origin\nusage: git config [&lt;options&gt;]\n\nConfig file location\n&lt;deleted help output from git config&gt;\nERROR: Command failed with status 129\n</code></pre></div>",
        "id": 524443281,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1750163899
    },
    {
        "content": "<p>Hmm, maybe the <code>--</code> syntax is only allowed after the config name in older git versions? Or maybe it is not allowed at all? Can you run <code>git config set branch.master.pushRemote -- origin</code>manually?</p>",
        "id": 524444084,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1750164147
    },
    {
        "content": "<p>I get the same output when I run it manually. My version of git is apparently:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>$ git --version\ngit version 2.39.5 (Apple Git-154)\n</code></pre></div>",
        "id": 524444365,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1750164216
    },
    {
        "content": "<p>What happens when you move the <code>--</code> one argument to the right, or if that doesn't work, remove it entirely?</p>",
        "id": 524444771,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1750164338
    },
    {
        "content": "<p><code>git config set branch.master.pushRemote origin --</code> gives the usage output again, and <code>git config set branch.master.pushRemote origin</code> gives:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>error: key does not contain a section: set\n</code></pre></div>",
        "id": 524445089,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1750164450
    },
    {
        "content": "<p>I see, the <code>git config set</code> subcommand was only added in git 2.46.0. Thanks for the report, I've updated the PR.</p>",
        "id": 524446687,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1750164947
    },
    {
        "content": "<p>The new version runs succeeds without errors, thanks!</p>",
        "id": 524447309,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1750165121
    }
]