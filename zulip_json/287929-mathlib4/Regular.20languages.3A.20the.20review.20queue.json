[
    {
        "content": "<p>As detailed in <a href=\"https://github.com/leanprover-community/mathlib4/pull/24205\">#24205</a>, there's currently quite a mess of many PRs in the regular languages area of <code>Computability</code>, with some of the PRs overlapping each other. As <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span> suggests, it would be good to discuss how to resolve this.</p>\n<p>The main goal these all center around is the equivalence between regular expressions and finite automata, as well as the related area of constructing automata corresponding to various operators on languages.</p>\n<p>Here's a list of PRs that somehow overlap one another:</p>\n<ul>\n<li>a series of PRs by <span class=\"user-mention\" data-user-id=\"712641\">@Tom Kranz</span> , that proves equivalence between REs and NFAs, avoiding the epsilon-NFA step:<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15649\">#15649</a> (GNFAs, going NFA -&gt; GNFA -&gt; RE)</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15651\">#15651</a> (NFA union, concatenation, Kleene's star, i.e. majority of the RE -&gt; NFA direction)</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15654\">#15654</a> (the punchline: RE &lt;-&gt; NFA)</li>\n</ul>\n</li>\n<li>a PR by <span class=\"user-mention\" data-user-id=\"816552\">@Anthony DeRossi</span> which does RE -&gt; epsilon-NFA conversion <a href=\"https://github.com/leanprover-community/mathlib4/pull/20648\">#20648</a></li>\n<li>a PR by <span class=\"user-mention\" data-user-id=\"786070\">@Rudy Peterson</span> which implements NFA union, intersection and reversal <a href=\"https://github.com/leanprover-community/mathlib4/pull/22361\">#22361</a>, which overlaps:<ul>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15651\">#15651</a> by <span class=\"user-mention\" data-user-id=\"712641\">@Tom Kranz</span>, mentioned above, which also includes NFA union</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/21573\">#21573</a> by <span class=\"user-mention\" data-user-id=\"294142\">@Chris Wong</span>, which does NFA reversal (notably this PR already got approved, but has merge conflicts)</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/20238\">#20238</a> by <span class=\"user-mention\" data-user-id=\"814730\">@Mehmet Emre</span> , which does DFA complement and intersection</li>\n</ul>\n</li>\n</ul>\n<p>One key issue is the question: do we want to have e.g. intersection on both DFAs and NFAs? They show the same underlying facts about the class of regular languages, but they could have utility should one desire to put bounds on the number of states of an automaton...</p>\n<p>I'd be interested to hear your ideas on how to resolve this going forward!</p>",
        "id": 514669532,
        "sender_full_name": "Maja Kądziołka",
        "timestamp": 1745777290
    },
    {
        "content": "<p>I think that it makes sense to have operations on different types of automata, even if they have equal power in terms of languages. It would be nice if the authors of the competing PRs</p>\n<ul>\n<li>review each other's PRs;</li>\n<li>resolve differences in design choices, if any; feel free to tag me here with questions;</li>\n<li>reach the state where PRs are compatible with each other; </li>\n<li>tag me here with the list of relevant PRs in the order they should be reviewed. I'll try to find time to review them quickly.</li>\n</ul>",
        "id": 514673002,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745779773
    },
    {
        "content": "<p>Okay. Then another issue is whether we want both the direct RE -&gt; NFA and the RE -&gt; eps-NFA constructions.</p>",
        "id": 514907026,
        "sender_full_name": "Maja Kądziołka",
        "timestamp": 1745875655
    },
    {
        "content": "<p>I think there is a reasonable conceptual distinction between the different constructions. Technically what one is proving is “given any RE, applying &lt;insert method name&gt;  transformation, one gets an equivalent automaton”</p>",
        "id": 514911011,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1745877572
    },
    {
        "content": "<p>The equivalence claim can be separately expressed as “there exists a transformation such that for any RE …”</p>",
        "id": 514911584,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1745877808
    },
    {
        "content": "<p>Having different constructions that lead to the same statement about languages is fine with me, as long as the constructions reference each other in their docs and explain the differences there.</p>",
        "id": 514915049,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745879673
    },
    {
        "content": "<p>E.g., one can use them to transform specific regular expressions to automata.</p>",
        "id": 514915105,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1745879712
    },
    {
        "content": "<p>Regarding NFA reversal.</p>\n<ul>\n<li>I'm unfortunately really busy lately so don't have time to have a close look – it would be great if someone else could help with the merge conflict.</li>\n<li>From a cursory look at Rudy's approach, I prefer my one. The key differences are (a) the individual parts of the reversed NFA are defined separately, and (b) using Exists + Mem instead of Disjoint, and I don't consider those changes to be an improvement.</li>\n</ul>",
        "id": 515334207,
        "sender_full_name": "Chris Wong",
        "timestamp": 1746026729
    },
    {
        "content": "<p>Are there any updates here? E.g., can you agree on some part that is ready for review and chery-pick it to a PR (if it's not a whole existing PR)?</p>",
        "id": 518699219,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1747411360
    },
    {
        "content": "<p>I've resolved the conflicts on <a href=\"https://github.com/leanprover-community/mathlib4/pull/21573\">#21573</a> – given the lack of response from the others, how about we get this PR landed first?</p>",
        "id": 518980187,
        "sender_full_name": "Chris Wong",
        "timestamp": 1747620853
    },
    {
        "content": "<p>I left 2 minor comments. Please address them, then we can merge it.</p>",
        "id": 518980575,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1747621162
    },
    {
        "content": "<p>Thanks Yury. I've responded to the comments <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 519133946,
        "sender_full_name": "Chris Wong",
        "timestamp": 1747665748
    },
    {
        "content": "<p>My apologies for missing the discussion, I will remove the NFA reversal from my PR for sure.</p>\n<p>I can also remove the NFA union from my PR, and if we still would like to have NFA intersection I can leave that in.</p>\n<p>If this sounds good I can migrate my PR to my fork and make these changes.</p>\n<p>Thanks! (and sorry again about the late reply)</p>",
        "id": 544064636,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1760055135
    },
    {
        "content": "<p>I've opened a new PR for <code>NFA</code> concatenation: <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">https://github.com/leanprover-community/mathlib4/pull/30872</a></p>",
        "id": 547014604,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761352227
    },
    {
        "content": "<p>My apologies if I missed a proof or effort somewhere else for closure of regular languages under concatenation, but if not this PR includes this as well.</p>",
        "id": 547014739,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761352377
    },
    {
        "content": "<p>My main goal with <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> is to construct NFA concatenation without epsilon transitions.</p>",
        "id": 547014762,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761352409
    },
    {
        "content": "<p>So I have split up my PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> about NFA concatenation into one just about <code>NFA.acceptsFrom</code> and helper lemmas in <a href=\"https://github.com/leanprover-community/mathlib4/pull/31038\">#31038</a>. I've found it generally useful to have a <code>NFA.acceptsFrom</code> analogous to <code>DFA.acceptsFrom</code>.</p>",
        "id": 547609781,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761698201
    },
    {
        "content": "<p>Just wonder whether the closure of regular languages under concatenation and Kleene star will get into mathlib soon.  I'm working on automata theory on infinite words in cslib and really would like to have those results without having to prove them myself.</p>",
        "id": 553274214,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762117833
    },
    {
        "content": "<p>I'm happy to start working on kleene star closure for regular languages via epsilon NFAs</p>",
        "id": 553274720,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762118351
    },
    {
        "content": "<p>You actually don't need EpsilonNFA to prove the closure under Kleene star.  You can do it directly on NFA:<br>\n<a href=\"https://github.com/ctchou/AutomataTheory/blob/main/AutomataTheory/Automata/Loop.lean\">https://github.com/ctchou/AutomataTheory/blob/main/AutomataTheory/Automata/Loop.lean</a><br>\nIn fact, you can also prove the closure under concatenation on NFA directly as well:<br>\n<a href=\"https://github.com/ctchou/AutomataTheory/blob/main/AutomataTheory/Automata/Concat.lean\">https://github.com/ctchou/AutomataTheory/blob/main/AutomataTheory/Automata/Concat.lean</a><br>\nthough proof is perhaps not as pretty as the one using EpsilonNFA.  Unfortunately, the automata theory I showed above is not formulated in the same way as the one in mathlib, so you can't reuse the code directly.</p>",
        "id": 553275401,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762119065
    },
    {
        "content": "<p>Yeah <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> does concatenation closure with non-epsilon NFAs</p>",
        "id": 553275996,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762119671
    },
    {
        "content": "<p>Any idea about the time line of these results getting into mathlib?</p>",
        "id": 553276151,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762119801
    },
    {
        "content": "<p>The bottleneck for PRs in this area is typically finding reviewers with expertise both in Lean and in the area.</p>",
        "id": 553276248,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762119905
    },
    {
        "content": "<p>OK.  Perhaps I should review them.</p>",
        "id": 553276353,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762120021
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110637\">@Ching-Tsun Chou</span> Please feel free to use issue <a href=\"https://github.com/leanprover/cslib/pull/132\">cslib#132</a> to more broadly track these Mathlib PR dependencies for automata in CSlib. As we did in that case, we have some flexibility to temporarily include code that is currently under review in Mathlib.</p>",
        "id": 553279312,
        "sender_full_name": "Chris Henson",
        "timestamp": 1762122981
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"786070\">Rudy Peterson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/near/553275996\">said</a>:</p>\n<blockquote>\n<p>Yeah <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> does concatenation closure with non-epsilon NFAs</p>\n</blockquote>\n<p>Nice! </p>\n<p>I'm away from my laptop, so can't do a full review. But I would look into using the <code>suffices</code> tactic. It seems like we're using <code>simp only</code> calls to avoid non-terminal simps, which is ok but quite verbose here.</p>",
        "id": 553289892,
        "sender_full_name": "Chris Wong",
        "timestamp": 1762134193
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"294142\">Chris Wong</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/near/553289892\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"786070\">Rudy Peterson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/near/553275996\">said</a>:</p>\n<blockquote>\n<p>Yeah <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> does concatenation closure with non-epsilon NFAs</p>\n</blockquote>\n<p>Nice! </p>\n<p>I'm away from my laptop, so can't do a full review. But I would look into using the <code>suffices</code> tactic. It seems like we're using <code>simp only</code> calls to avoid non-terminal simps, which is ok but quite verbose here.</p>\n</blockquote>\n<p>Interesting, thanks for the tip! I tried <code>suffices</code> in one place, and it definitely helped. I could use it more in <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> but it seems that would involve a lot more manual effort to type out the intended subgoal than it's worth potentially...?</p>",
        "id": 553494786,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762210224
    },
    {
        "content": "<p>I just provided some feedbacks on <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">mathlib#30872</a>.  The PR looks fine to me.  If there is an approve button I can push, I would push it.</p>",
        "id": 553500905,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762213872
    },
    {
        "content": "<p>You can leave an approving review</p>",
        "id": 553503994,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762215987
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110637\">@Ching-Tsun Chou</span>  I don't see any comments from you there. Are they still pending?</p>",
        "id": 553505918,
        "sender_full_name": "Chris Wong",
        "timestamp": 1762217217
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"786070\">Rudy Peterson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/near/553494786\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"294142\">Chris Wong</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/near/553289892\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"786070\">Rudy Peterson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/near/553275996\">said</a>:</p>\n<blockquote>\n<p>Yeah <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> does concatenation closure with non-epsilon NFAs</p>\n</blockquote>\n<p>Nice! </p>\n<p>I'm away from my laptop, so can't do a full review. But I would look into using the <code>suffices</code> tactic. It seems like we're using <code>simp only</code> calls to avoid non-terminal simps, which is ok but quite verbose here.</p>\n</blockquote>\n<p>Interesting, thanks for the tip! I tried <code>suffices</code> in one place, and it definitely helped. I could use it more in <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> but it seems that would involve a lot more manual effort to type out the intended subgoal than it's worth potentially...?</p>\n</blockquote>\n<p>I think my main concern is that the proofs seem a lot more complicated than I thought they'd be. Especially given that most of it is straightforward logical manipulations. I wonder if there's a way to simplify it, whether through pulling out intermediate lemmas, tweaking definitions, or something else.</p>",
        "id": 553506339,
        "sender_full_name": "Chris Wong",
        "timestamp": 1762217522
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"294142\">Chris Wong</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/near/553505918\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110637\">Ching-Tsun Chou</span>  I don't see any comments from you there. Are they still pending?</p>\n</blockquote>\n<p>Sorry. I forgot to submit my review.  I just submitted it.</p>",
        "id": 553515818,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762223277
    },
    {
        "content": "<p>Barring a radically new idea, I doubt there would be a much simpler proof than the one in <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">mathlib#30872</a>.  I used the same automata construction to prove closure under concatenation in my own automata theory project and my proof  is about the same length.  More importantly, I think it is way past due that we have the basic closure results for regular languages in mathlib, so that they can be used to prove other things.  If a shorter proof is found later, a new PR can always be created to replace the long proof with the shorter one.</p>",
        "id": 553518251,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762224824
    },
    {
        "content": "<p>I also provided some feedbacks on <a href=\"https://github.com/leanprover-community/mathlib4/pull/22361\">mathlib#22361</a>.  There I do think the proofs of the closure of regular languages under union and intersection can be greatly simplified.  The trick is to work with DFA rather than NFA.  A simple product construction on DFA can be used to prove both.</p>",
        "id": 553520782,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762226518
    },
    {
        "content": "<p>Of course, there could utility in providing union and intersection constructions for NFA.  But it seems to me that a higher priority should be given to proving the closure properties of regular languages by whatever means.</p>",
        "id": 553521163,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762226847
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110637\">Ching-Tsun Chou</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/near/553520782\">said</a>:</p>\n<blockquote>\n<p>I also provided some feedbacks on <a href=\"https://github.com/leanprover-community/mathlib4/pull/22361\">mathlib#22361</a>.  There I do think the proofs of the closure of regular languages under union and intersection can be greatly simplified.  The trick is to work with DFA rather than NFA.  A simple product construction on DFA can be used to prove both.</p>\n</blockquote>\n<p>so there's also <a href=\"https://github.com/leanprover-community/mathlib4/pull/20238\">#20238</a>, which does these for DFA</p>",
        "id": 553521584,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762227231
    },
    {
        "content": "<p>admittedly, for <a href=\"https://github.com/leanprover-community/mathlib4/pull/22361\">#22361</a>, i'm not sure it will be merged (at least in this form), since several other PRs already do these constructions</p>",
        "id": 553521629,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762227266
    },
    {
        "content": "<p>My <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> sadly also conflicts with <a href=\"https://github.com/leanprover-community/mathlib4/pull/15651\">#15651</a>, and <a href=\"https://github.com/leanprover-community/mathlib4/pull/15651\">#15651</a> is more complete (and with <a href=\"https://github.com/leanprover-community/mathlib4/pull/15649\">#15649</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/15654\">#15654</a> also does the full RE &lt;-&gt; NFA  proofs, so my <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> may not be needed</p>",
        "id": 553521802,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762227353
    },
    {
        "content": "<p>if <a href=\"https://github.com/leanprover-community/mathlib4/pull/15651\">#15651</a> is merged then we get a lot of the closure properties for regular languages</p>",
        "id": 553521915,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762227432
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110637\">Ching-Tsun Chou</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/near/553521163\">said</a>:</p>\n<blockquote>\n<p>Of course, there could utility in providing union and intersection constructions for NFA.  But it seems to me that a higher priority should be given to proving the closure properties of regular languages by whatever means.</p>\n</blockquote>\n<p>yeah, my main goal was definitely to directly do these for NFA, and I agree that likely the overal regular langauges closure results are more important</p>",
        "id": 553522001,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762227495
    },
    {
        "content": "<p>The owner of <a href=\"https://github.com/leanprover-community/mathlib4/pull/15641\">mathlib#15641</a> etc seems to have been inactive since Feb 11.  Can he be relied on to shepherd his PRs to completion?</p>",
        "id": 553522089,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762227572
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/20238\">mathlib#20238</a> seems to have been similarly dormant for a long time.</p>",
        "id": 553522644,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762228176
    },
    {
        "content": "<p>In the meantime, I have created a new PR for DFA closure properties used to prove closure properties for regular languages in <a href=\"https://github.com/leanprover-community/mathlib4/pull/31247\">#31247</a></p>",
        "id": 553554798,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762246018
    },
    {
        "content": "<p>I don't mean to overwhelm the maintainers, but I am happy to help get <a href=\"https://github.com/leanprover-community/mathlib4/pull/31247\">#31247</a> merged if the authors for the other PRs are unavilable</p>",
        "id": 553554954,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762246070
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110637\">@Ching-Tsun Chou</span> what do you think of <a href=\"https://github.com/leanprover-community/mathlib4/pull/31247\">#31247</a>?</p>",
        "id": 553555159,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762246140
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"786070\">@Rudy Peterson</span>  I provided some feedbacks on <a href=\"https://github.com/leanprover-community/mathlib4/pull/31247\">mathlib#31247</a>.</p>",
        "id": 553688575,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762281317
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110637\">Ching-Tsun Chou</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Regular.20languages.3A.20the.20review.20queue/near/553688575\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"786070\">Rudy Peterson</span>  I provided some feedbacks on <a href=\"https://github.com/leanprover-community/mathlib4/pull/31247\">mathlib#31247</a>.</p>\n</blockquote>\n<p>Thanks!</p>",
        "id": 553697063,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1762284608
    },
    {
        "content": "<p>I have approved both <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">mathlib#30872</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/31247\">mathlib#31247</a>.</p>",
        "id": 553759136,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1762314587
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110637\">@Ching-Tsun Chou</span> sorry for the delay, I have a PR for kleene star closure via an NFA construction at <a href=\"https://github.com/leanprover-community/mathlib4/pull/31610\">mathlib#31610</a>.</p>\n<p>Admittedly, my <a href=\"https://github.com/leanprover-community/mathlib4/pull/31610\">mathlib#31610</a> is heavily inspired by <span class=\"user-mention\" data-user-id=\"712641\">@Tom Kranz</span>'s <a href=\"https://github.com/leanprover-community/mathlib4/pull/15651\">mathlib#15651</a>, so I have credited this work in my comments (and if there's more I should do I am happy to oblige).</p>",
        "id": 555483326,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1763080037
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"786070\">@Rudy Peterson</span>  I left some comments in <a href=\"https://github.com/leanprover-community/mathlib4/pull/31610\">mathlib#31610</a>.  I wonder if a slightly different automata construction may simplify the proof.</p>",
        "id": 555492863,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1763085888
    },
    {
        "content": "<p>Hello,</p>\n<p>I’m currently learning Lean and, as someone interested in automata theory, I’ve been reading through the DFA module. I noticed a possible way to simplify the proofs of closure under intersection and union, by factoring them through a general product construction for DFAs. I explored this mainly as a learning exercise, but it turned into a small project that I thought might be worth sharing. </p>\n<p>On the one hand, it seems to simplify the existing proofs, and it also allowed me to prove closure under difference and symmetric difference fairly concisely. On the other hand, it does introduce an additional abstraction, so I’m not sure whether the trade-off is desirable from a library-design perspective. I’ve put a draft implementation here, in case it’s helpful for discussion: <a href=\"https://github.com/leanprover-community/mathlib4/compare/master...knok16:mathlib4:dfa-product-construction?expand=1\">https://github.com/leanprover-community/mathlib4/compare/master...knok16:mathlib4:dfa-product-construction?expand=1</a></p>\n<p>I’m unsure whether this is worth opening a PR for, so I’d appreciate any advice.</p>",
        "id": 566466159,
        "sender_full_name": "Veniamin Viflyantsev",
        "timestamp": 1767664273
    },
    {
        "content": "<p>The automata theory in cslib already takes that approach:<br>\n<a href=\"https://github.com/leanprover/cslib/blob/main/Cslib/Computability/Languages/RegularLanguage.lean\">https://github.com/leanprover/cslib/blob/main/Cslib/Computability/Languages/RegularLanguage.lean</a><br>\nThere are three outstanding PRs in cslib: <a href=\"https://github.com/leanprover/cslib/pull/236\">cslib#236</a>, <a href=\"https://github.com/leanprover/cslib/pull/239\">cslib#239</a>, and <a href=\"https://github.com/leanprover/cslib/pull/241\">cslib#241</a>, which complete all main closure properties of regular and ω-regular languages except for the closure of ω-regular languages under complementation, which will take more time.  I plan to port all results in:<br>\n<a href=\"https://github.com/ctchou/AutomataTheory\">https://github.com/ctchou/AutomataTheory</a><br>\ninto cslib eventually.</p>",
        "id": 566466818,
        "sender_full_name": "Ching-Tsun Chou",
        "timestamp": 1767664815
    },
    {
        "content": "<p>FYI, I naturally read RE as \"recursively enumerable\" (which is at the opposite side of the spectrum, actually). Could we use a different abbreviation for regular languages in the PR descriptions, like REG for example?</p>",
        "id": 566928185,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1767874443
    },
    {
        "content": "<p>Oh wait — you meant \"RE\" as \"regular expression\", not as the adjective for the class of languages! So \"regex\" for short?</p>",
        "id": 566928459,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1767874550
    },
    {
        "content": "<p>Hello, I have been working on proofs which require Kleene's theorem and had formalized the direction which says regular expressions match a regular language. It was done via construction of epsilon-NFAs for closure under concatenation and Kleene star, and proving their correctness.</p>\n<p>Having found this discussion I recognize that this overlaps with <a href=\"https://github.com/leanprover-community/mathlib4/pull/30872\">#30872</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/31610\">#31610</a> which uses NFAs instead of epsilon-NFAs. I have made a draft PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/35332\">#35332</a> and will be keen to help resolve any conflicts, if this PR is necessary at all. Will be most grateful for any advice, thanks!</p>\n<p>I'll be happy to work on the other direction (that every regular language has some regular expression that matches it) too, if <a href=\"https://github.com/leanprover-community/mathlib4/pull/15654\">#15654</a> is not progressing. I have made a draft PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/35600\">#35600</a> with a proof via Kleene's algorithm instead of GNFAs.</p>",
        "id": 573958148,
        "sender_full_name": "Yi Siong Guk",
        "timestamp": 1771141447
    }
]