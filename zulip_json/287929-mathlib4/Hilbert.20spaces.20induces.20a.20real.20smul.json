[
    {
        "content": "<p>The following doesn't work atm:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c1\">--E is a HilbertSpace over ğ•œ</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">RCLike</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">InnerProductSpace</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CompleteSpace</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">]</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">â€¢</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">â€¢</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ofNat_smul_eq_nsmul</span><span class=\"w\"> </span><span class=\"n\">ğ•œ</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">]</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">â€¢</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„š</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">â€¢</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"c1\">--error</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">â€¢</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">â€¢</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"c1\">--eror</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>That is, the <code>ğ•œ</code>-smul works, but there is no <code>â„š</code>-smul or <code>â„</code>-smul. You can write <code>(â†‘(3 : â„š) : ğ•œ) â€¢ x</code> and <code>(â†‘(3 : â„) : ğ•œ) â€¢ x</code> instead. In my view the rat-smul and real-smul are \"natural\" enough that we could offer these SMul instances. Before I write this PR, is there a reason it would be bad?</p>",
        "id": 528708488,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752513830
    },
    {
        "content": "<p>^^ I guess the above is slightly un-minimal, we really only need <code>SeminormedAddCommGroup</code> and there's no need for the <code>CompleteSpace</code>.</p>",
        "id": 528708610,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752513878
    },
    {
        "content": "<p>Yes, this would be bad. Think of what happens when <code>E</code> is <code>\\R</code> or <code>\\C</code> itself.</p>",
        "id": 528709298,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1752514111
    },
    {
        "content": "<p>Oh, right. Hrmg, that's unfortunate.</p>",
        "id": 528709381,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752514140
    },
    {
        "content": "<p>And if they are, the <code>RCLike</code> instance won't give something defeq? If it _was_ defeq it would work, maybe, right?</p>",
        "id": 528709556,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752514199
    },
    {
        "content": "<p>If you need it in a proof, just use <code>RestrictScalars</code> and if you need it in a statement, assume you have the relevant <code>\\R</code> instance and add <code>IsScalarTower</code>.</p>",
        "id": 528709741,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1752514257
    },
    {
        "content": "<p>I think the \"correct\" way to do this is to write <code>[Module â„š E] [IsScalarTower â„š ğ•œ E]</code> or something similar</p>",
        "id": 528709746,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752514258
    },
    {
        "content": "<p>(but you only need to do that if you need it for the <em>statement</em> to compile.)</p>",
        "id": 528709848,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1752514296
    },
    {
        "content": "<p>Ahh I see. Makes sense now, yeah. But man, these things about RCLike remain unintuitive for me!</p>",
        "id": 528709902,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1752514317
    }
]