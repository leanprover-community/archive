[
    {
        "content": "<p>As per the title,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">WellFoundedLT</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">WellFoundedLT</span><span class=\"w\"> </span><span class=\"n\">Bool</span>\n</code></pre></div>\n<p>doesn't work even though the following does</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">Card</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">WellFoundedLT</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">WellFoundedLT</span><span class=\"w\"> </span><span class=\"n\">Bool</span>\n</code></pre></div>",
        "id": 482604112,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731674382
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">attribute</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"kn\">instance</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">WellFounded</span><span class=\"bp\">.</span><span class=\"n\">wellOrderExtension</span><span class=\"bp\">.</span><span class=\"n\">isWellFounded_lt</span><span class=\"w\"> </span><span class=\"c1\">-- deprecated</span>\n<span class=\"w\">  </span><span class=\"n\">IsWellFounded</span><span class=\"bp\">.</span><span class=\"n\">wellOrderExtension</span><span class=\"bp\">.</span><span class=\"n\">isWellOrder_lt</span>\n<span class=\"w\">  </span><span class=\"n\">IsWellFounded</span><span class=\"bp\">.</span><span class=\"n\">wellOrderExtension</span><span class=\"bp\">.</span><span class=\"n\">isWellFounded_lt</span><span class=\"w\"> </span><span class=\"c1\">-- comment this one out to see a failure</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">trace</span><span class=\"bp\">.</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">synthInstance</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">WellFoundedLT</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n</code></pre></div>\n<p>fixes it</p>\n<p>(<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsWellFounded.wellOrderExtension.isWellFounded_lt#doc\">docs#IsWellFounded.wellOrderExtension.isWellFounded_lt</a>)</p>",
        "id": 482606136,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731675061
    },
    {
        "content": "<p>I don't understand what the <span aria-label=\"explosion\" class=\"emoji emoji-1f4a5\" role=\"img\" title=\"explosion\">:explosion:</span> in <code>set_option trace.Meta.synthInstance true</code> is telling me</p>",
        "id": 482606869,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731675293
    },
    {
        "content": "<p>This usually indicates that an exception was thrown.</p>",
        "id": 482609482,
        "sender_full_name": "Jannis Limperg",
        "timestamp": 1731676137
    },
    {
        "content": "<p>Should we rewrite <code>wellOrderExtension</code> to a type synonym <code>WellOrderExtension α r</code> with <code>LinearOrder</code> etc instances on this type synonym?</p>",
        "id": 482625204,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1731680903
    },
    {
        "content": "<p>My personal solution to fixing the issue is adding a shortcut instance for <code>WellFoundedLT Prop</code>. Here is a first step: <a href=\"https://github.com/leanprover-community/mathlib4/pull/19086\">#19086</a></p>",
        "id": 482625863,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731681107
    },
    {
        "content": "<p>My initial impression is that mathlib is not to blame here</p>",
        "id": 482626618,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731681329
    },
    {
        "content": "<p>Minimising this would be helpful!</p>",
        "id": 482683899,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1731699861
    },
    {
        "content": "<p>My guess is that Lean tries <code>isDefEq</code> on this instance (because it's about <code>LT.lt</code>), then something goes wrong. Should we remove more instances that make structural assumptions about instance arguments?</p>",
        "id": 482693162,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1731704128
    },
    {
        "content": "<p>For a long time in mathlib we've assumed it's ok to write instances of the form</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">outerInstance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">@</span><span class=\"n\">SomeClass</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">instSomeNonCanonicalInstanceOnX</span>\n</code></pre></div>\n<p>with the premise that <code>outerInstance</code> is about <code>instSomeNonCanonicalInstanceOnX</code> not <code>X</code>, and so it does not harm for it to be available globally</p>",
        "id": 482701086,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731707931
    },
    {
        "content": "<p>(this comes up, for instance, with \"this non-canonical MulAction satisfies SMulCommClass with the canonical one\")</p>",
        "id": 482701166,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731707968
    },
    {
        "content": "<p>But it means that Lean will try it every time and try to unify <code>instSomeNonCanonicalInstanceOnX</code> with the generated instance.</p>",
        "id": 482746277,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1731741951
    },
    {
        "content": "<p>(BTW, did it change during Lean3-&gt;Lean4 migration?)</p>",
        "id": 482746329,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1731741969
    },
    {
        "content": "<p>One example is <a href=\"https://github.com/leanprover-community/mathlib4/blob/aa5b6a4acd12e898badba2f2cf7aaaff253feb20/Mathlib/Algebra/Algebra/Tower.lean#L164-L168\">IsScalarTower.of_algHom</a>.</p>",
        "id": 482755915,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1731750817
    },
    {
        "content": "<p>This reminds me of another <a href=\"#narrow/channel/287929-mathlib4/topic/erw.20and.20IsDedekindDomain.2EHeightOneSpectrum.2EadicCompletion/near/439394052\">type class failure</a>. It turns out that turning off unification hints solves the problem. This is a bug where the discrimination tree used in unification hints can throw <code>Meta.throwIsDefEqStuck</code>. That is why you see the <span aria-label=\"explosion\" class=\"emoji emoji-1f4a5\" role=\"img\" title=\"explosion\">:explosion:</span> in <code>set_option trace.Meta.synthInstance true</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Meta</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"w\"> </span><span class=\"n\">Command</span>\n<span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"#mysynth\"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span>\n<span class=\"kd\">@[</span><span class=\"n\">command_elab</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">elabSynth</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CommandElab</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">stx</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">stx</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">withoutModifyingEnv</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">runTermElabM</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"n\">withDeclName</span><span class=\"w\"> </span><span class=\"ss\">`_synth_cmd</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"n\">withConfig</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">unificationHints</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"o\">})</span><span class=\"w\"> </span><span class=\"k\">do</span><span class=\"w\"> </span><span class=\"c1\">-- turn off unification hints</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"n\">elabTerm</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"n\">none</span>\n<span class=\"w\">    </span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"n\">synthesizeSyntheticMVarsNoPostponing</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">instantiateMVars</span><span class=\"w\"> </span><span class=\"n\">inst</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">val</span><span class=\"w\">  </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">synthInstance</span><span class=\"w\"> </span><span class=\"n\">inst</span>\n<span class=\"w\">    </span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"n\">val</span>\n<span class=\"w\">    </span><span class=\"n\">pure</span><span class=\"w\"> </span><span class=\"o\">()</span>\n\n<span class=\"c1\">-- succeeds</span>\n<span class=\"bp\">#</span><span class=\"n\">mysynth</span><span class=\"w\"> </span><span class=\"n\">WellFoundedLT</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"bp\">#</span><span class=\"n\">mysynth</span><span class=\"w\"> </span><span class=\"n\">WellFoundedLT</span><span class=\"w\"> </span><span class=\"n\">Bool</span>\n</code></pre></div>",
        "id": 482826068,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1731815486
    },
    {
        "content": "<p>This should be easy to fix by setting <code>Config.isDefEqStuckEx</code> to false when looking up in the discrimination tree when using unificationHints.</p>",
        "id": 482826361,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1731815796
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/WellFoundedLT.20Prop.20is.20not.20found.20when.20importing.20too.20much/near/482625204\">said</a>:</p>\n<blockquote>\n<p>Should we rewrite <code>wellOrderExtension</code> to a type synonym <code>WellOrderExtension α r</code> with <code>LinearOrder</code> etc instances on this type synonym?</p>\n</blockquote>\n<p>Note <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WellOrderExtension#doc\">docs#WellOrderExtension</a> already exists</p>",
        "id": 482833003,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1731822590
    },
    {
        "content": "<p>And yes, I think a type synonym with an actual <code>LinearOrder</code> instance would be better here. Why use unbundled relations when we don't need to?</p>",
        "id": 482833078,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1731822646
    },
    {
        "content": "<p>Actually, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WellOrderExtension#doc\">docs#WellOrderExtension</a> already has a linear order instance</p>",
        "id": 482833263,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1731822852
    },
    {
        "content": "<p>I also just found <a href=\"https://github.com/leanprover-community/mathlib4/pull/18217\">#18217</a>, which introduces the following two looping instances:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">isWellOrder_lt</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">WellFoundedLT</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">IsWellOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">isWellOrder_gt</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">WellFoundedGT</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">IsWellOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n</code></pre></div>",
        "id": 482846253,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731835341
    },
    {
        "content": "<p>(<code>[IsWellOrder α (· &lt; ·)] → WellFoundedLT α</code> is an instance)</p>",
        "id": 482846285,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731835386
    },
    {
        "content": "<p>Loops are OK in some cases, right?</p>",
        "id": 482846625,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731835707
    },
    {
        "content": "<p>Yes but here <code>WellFoundedLT α</code> and <code>IsWellOrder α (· &lt; ·)</code> take or refer to a <code>LT</code> argument which is unlikely to be exactly the same between two rounds of the loop. Indeed, trying <code>#synth WellFoundedLT Prop</code> in <code>Data.Fintype.Card</code> I saw the loop do several rounds before stabilising</p>",
        "id": 482846913,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731836037
    },
    {
        "content": "<p>That's unfortunate, as these instances have to be instantiated separately in a couple of places otherwise</p>",
        "id": 482915476,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1731895008
    },
    {
        "content": "<p>Wait, what two distinct LTs are there for <code>Prop</code>?</p>",
        "id": 482915635,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1731895113
    },
    {
        "content": "<p>I have minimized the bug, and I was about to open an issue, but as of today, this minimized example does the expected behaviour on the nightly version of lean: it just so happens to have gotten fixed by <a href=\"https://github.com/leanprover/lean4/pull/6053\">lean#6053</a>.</p>\n<p>Here's the minimization:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Inhabited'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">default'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Inhabited'</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n\n<span class=\"kn\">opaque</span><span class=\"w\"> </span><span class=\"n\">opaqueProp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Inhabited'</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">default'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">opaqueProp</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">default</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">badInst</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Inhabited'</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">default'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">default</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">goodInst</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Inhabited</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">trace</span><span class=\"bp\">.</span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">synthInstance</span><span class=\"w\"> </span><span class=\"n\">true</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n</code></pre></div>",
        "id": 483108856,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1731958895
    },
    {
        "content": "<p>Thanks Jovan for the minimization, and Leo for always being a step ahead</p>",
        "id": 483112881,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731960326
    },
    {
        "content": "<p>Glad to hear I didn't accidentally screw things up</p>",
        "id": 483169356,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1731984577
    }
]