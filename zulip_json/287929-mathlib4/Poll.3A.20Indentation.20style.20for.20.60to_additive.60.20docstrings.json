[
    {
        "content": "<p>I'm currently normalizing the indentation for <code>to_additive</code> docstrings via automation in <a href=\"https://github.com/leanprover-community/mathlib4/pull/28298\">#28298</a>.</p>\n<p>There are two questions I'd like to ask here.</p>\n<p>First: What overall indentation for multiline docstrings should be preferred?</p>\n<p>(It's my understanding that docstrings should not be indented past their starting column as per <a href=\"https://github.com/leanprover-community/mathlib4/pull/28066#discussion_r2266354158\">this comment</a>, so I'm not including that as an option here.)</p>\n<h3>A – Unindented</h3>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Lorem ipprod dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n\n<span class=\"sd\">Integer aliquet felis ipprod, nec luctus ex porta a. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span>\n<span class=\"sd\">/-- Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n\n<span class=\"sd\">Integer aliquet felis ipsum, nec luctus ex porta a. -/</span><span class=\"kd\">]</span>\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Lorem ipprod dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n\n<span class=\"sd\">Integer aliquet felis ipprod, nec luctus ex porta a. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"sd\">/-- Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n\n<span class=\"sd\">Integer aliquet felis ipsum, nec luctus ex porta a. -/</span><span class=\"kd\">]</span>\n</code></pre></div>\n<h3>B – Indented</h3>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Lorem ipprod dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n\n<span class=\"sd\">Integer aliquet felis ipprod, nec luctus ex porta a. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span>\n<span class=\"w\">  </span><span class=\"sd\">/-- Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">  massa ut, auctor odio.</span>\n\n<span class=\"sd\">  Integer aliquet felis ipsum, nec luctus ex porta a. -/</span><span class=\"kd\">]</span>\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Lorem ipprod dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n\n<span class=\"sd\">Integer aliquet felis ipprod, nec luctus ex porta a. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"sd\">/-- Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">  massa ut, auctor odio.</span>\n\n<span class=\"sd\">  Integer aliquet felis ipsum, nec luctus ex porta a. -/</span><span class=\"kd\">]</span>\n</code></pre></div>",
        "id": 534285603,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1755111060
    },
    {
        "content": "<p>/poll What overall indentation should be preferred for <code>to_additive</code> docstrings?<br>\nA – Unindented<br>\nB – Indented<br>\nA and B should both be equally preferred</p>",
        "id": 534285761,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1755111119
    },
    {
        "content": "<p>The second question:</p>\n<p>Should we prefer newlines before docstrings, or prefer starting them inline with <code>to_additive</code> (or neither)?</p>\n<p>Using A's unindented convention for example purposes:</p>\n<h3>a – Prefer newlines</h3>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Lorem ipprod dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n\n<span class=\"sd\">Integer aliquet felis ipprod, nec luctus ex porta a. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span>\n<span class=\"sd\">/-- Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n\n<span class=\"sd\">Integer aliquet felis ipsum, nec luctus ex porta a. -/</span><span class=\"kd\">]</span>\n</code></pre></div>\n<h3>b – Prefer inline</h3>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Lorem ipprod dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n\n<span class=\"sd\">Integer aliquet felis ipprod, nec luctus ex porta a. -/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"sd\">/-- Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n\n<span class=\"sd\">Integer aliquet felis ipsum, nec luctus ex porta a. -/</span><span class=\"kd\">]</span>\n</code></pre></div>",
        "id": 534286620,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1755111426
    },
    {
        "content": "<p>/poll Should we prefer <code>to_additive</code> doscstrings start on a newline or inline?<br>\na – Prefer newline<br>\nb – Prefer inline<br>\nBoth a and b are equally fine</p>",
        "id": 534286768,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1755111480
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> Oops, I didn’t include the “multiline” qualifier in my second question, but maybe this is a good thing. I’ve added an option so that the options are comprehensive. :)</p>",
        "id": 534292434,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1755113833
    },
    {
        "content": "<p>Another consideration is how to format</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>This</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span>\n<span class=\"sd\">/--</span>\n<span class=\"sd\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n<span class=\"sd\">-/</span><span class=\"kd\">]</span>\n</code></pre></div>\n<p>or should it be</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"sd\">/--</span>\n<span class=\"sd\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n<span class=\"sd\">-/</span><span class=\"kd\">]</span>\n</code></pre></div>\n<p>or even</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n<span class=\"sd\">-/</span><span class=\"w\"> </span><span class=\"kd\">@[</span><span class=\"n\">to_additive</span><span class=\"w\"> </span><span class=\"sd\">/--</span>\n<span class=\"sd\">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam at lacus molestie, fringilla</span>\n<span class=\"sd\">massa ut, auctor odio.</span>\n<span class=\"sd\">-/</span><span class=\"kd\">]</span>\n</code></pre></div>\n</div></div>\n<p>but I think this starts to correlate with earlier choices.</p>",
        "id": 534292725,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755113941
    },
    {
        "content": "<p>Right, hypothetically we could make a choice that takes the delimiter into account (e.g. insist on a newline when <code>/--</code> is alone and remain silent when not) but I wanted to steer clear of the \"<code>/--</code>,<code>-/</code> on their own lines\" debate here and keep the number of total poll options in this thread from exploding. <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 534293500,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1755114231
    },
    {
        "content": "<p>It seems that of the people who have an opinion on this, we generally want</p>\n<ul>\n<li>unindented docstrings</li>\n<li>which start on a newline when (and only when) spanning multiple lines.</li>\n</ul>\n<p>Shall we go with that? :)</p>",
        "id": 536289693,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1756231964
    },
    {
        "content": "<p>Again, this PR will not enforce these style choices in the future; it will just reformat docstrings to match them.</p>",
        "id": 536289868,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1756232033
    },
    {
        "content": "<p>Though, perhaps we should also consider writing this down somewhere as a style choice? (Unless, of course, there are objections from those who voted for the other options.)</p>",
        "id": 536290233,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1756232182
    },
    {
        "content": "<p>If you go around reformatting, it should be in the style guide - otherwise we'll reject it as style changes that aren't in the style guide, as discussed in the other thread <span aria-label=\"innocent\" class=\"emoji emoji-1f607\" role=\"img\" title=\"innocent\">:innocent:</span></p>",
        "id": 536309651,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756241051
    },
    {
        "content": "<p>Makes sense! For the record, what other thread was that?</p>",
        "id": 536309837,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1756241152
    },
    {
        "content": "<p><a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Dropping.20hyphens/with/536291906\">#mathlib4 &gt; Dropping hyphens</a></p>",
        "id": 536310135,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756241285
    }
]