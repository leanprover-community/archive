[
    {
        "content": "<p>Given <code>[CommRing R] [CommRing S] [Algebra R S] [Group G] [MulSemiringAction G R] [MulSemiringAction G S]</code>, is there a typeclass that imposes compatibility between these actions? I.e., <code>g • algebraMap R S r = algebraMap R S (g • r)</code>?</p>\n<p>This condition is equivalent to <code>g • (r • 1) = (g • r) • 1</code>, so <code>IsScalarTower G R S</code> almost works, except that imposing <code>g • (r • s) = (g • r) • s</code> is too strong since implies that <code>G</code> fixes <code>S</code> pointwise (set <code>r = 1</code>).</p>\n<p>(This comes up in PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/27053\">#27053</a> where I need to impose this compatibility condition but don't know of a nice typeclass for it).</p>",
        "id": 547138103,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761491721
    },
    {
        "content": "<p>I'm guessing no, since the lemma <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=algebraMap.coe_smul#doc\">docs#algebraMap.coe_smul</a> is stated in terms of <code>IsScalarTower</code> (in which case, should there be a new typeclass made for this?).</p>",
        "id": 547138348,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761491954
    },
    {
        "content": "<p>In terms of <code>•</code>, I think the desired condition is just a distributive version of <code>IsScalarTower</code>: <code>g • (r • s) = (g • r) • (g • s)</code>.</p>",
        "id": 547138514,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761492094
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"253861\">Thomas Browning</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Typeclass.20for.20compatible.20group.20actions/near/547138103\">said</a>:</p>\n<blockquote>\n<p>This condition is equivalent to <code>g • (r • 1) = (g • r) • 1</code>, so <code>IsScalarTower G R S</code> almost works, except that imposing <code>g • (r • s) = (g • r) • s</code> is too strong since implies that <code>G</code> fixes <code>S</code> pointwise (set <code>r = 1</code>).</p>\n</blockquote>\n<p>I set <code>r = 1</code>, now what? How do I get the fixing pointwise?</p>",
        "id": 547140135,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761493488
    },
    {
        "content": "<p>oh I get it now</p>",
        "id": 547140200,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761493529
    },
    {
        "content": "<p>I had this in one of my PRs for this exact reason <a href=\"https://github.com/leanprover-community/mathlib4/pull/30675/commits/cc9acd2b59739869a4dd73104b5f4470b48f7cb3\">here</a>. But then I figured I didn't need it in that specific PR so I removed it.</p>",
        "id": 547141183,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1761494400
    },
    {
        "content": "<p>If you are adding this typeclass then I am happy to review it. If not I'll open a new PR containing the deleted content in the above commit.</p>",
        "id": 547141374,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1761494553
    },
    {
        "content": "<p>Nice! I won't have time to get around to this for a few days, so feel free to PR it if you have the time.</p>",
        "id": 547141613,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761494782
    },
    {
        "content": "<p>Here's a first stab at this: <a href=\"https://github.com/leanprover-community/mathlib4/pull/30991\">#30991</a></p>",
        "id": 547395134,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1761613802
    }
]