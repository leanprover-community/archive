[
    {
        "content": "<p>Lean 4 switched to <code>fun</code> instead of lambda as syntax for function expressions. But we still can't use lambda for scalars in a field:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">Œª</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span>\n<span class=\"c1\">-- unexpected token ')'; expected '_' or identifier</span>\n</code></pre></div>\n<p>What is needed to make this work?</p>\n<p>cc <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span></p>",
        "id": 464463126,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1724354422
    },
    {
        "content": "<p>Switch is a big word when they also still support lambda for that</p>",
        "id": 464464255,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724354754
    },
    {
        "content": "<p>Fair enough. I would nevertheless really like to get <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œª</mi><mo>:</mo><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda : K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">Œª</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> working.</p>",
        "id": 464465437,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1724355081
    },
    {
        "content": "<p>Yeah, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Parser.Term.fun#doc\">docs#Lean.Parser.Term.fun</a> still allows lambda. I think there is an old RFCs about expanding the allowed letters in identifiers, and perhaps removing lambda for <code>fun</code> could be part of that?</p>\n<p>(\"Switched\" is only eight letters. The biggest near synonyms I could think of would be \"approbated\" or \"acquiesced\" :-))</p>",
        "id": 464466019,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724355292
    },
    {
        "content": "<p>The docs for <code>maxPrec</code>(which lambda in function syntax seems to use) say essentially \"we discourage using higher values but that's not disallowed\". Does ignoring that recommendation give a way to hack around the syntax? (I.e. can <code>notation:(maxPrec + 1)</code> do a thing which makes lambda either a normal identifier again or else always look for some Field class in the environment)?</p>",
        "id": 464466476,
        "sender_full_name": "Julian Berman",
        "timestamp": 1724355480
    },
    {
        "content": "<p>Is there maybe another Unicode character that looks like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œª</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">Œª</span></span></span></span>? Perhaps accessible by typing something like <code>\\lambda1</code>? (is what they sometimes do in other programming languages, but probably for very specific and localised purposes)<br>\n<em>Edit</em> I really feel that the thumbs-down on an innocuous remark phrased as a question is bordering on abuse. Are you trying to prevent discussion? I am getting more and more afraid of participating in this channel. And I am not even saying something false.</p>",
        "id": 464466727,
        "sender_full_name": "Florent Schaffhauser",
        "timestamp": 1724355579
    },
    {
        "content": "<p>No <span class=\"user-mention\" data-user-id=\"321696\">@Julian Berman</span>, in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.isLetterLike#doc\">docs#Lean.isLetterLike</a> lambda is explicitly carved out.</p>",
        "id": 464466930,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724355647
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"513540\">Flo (Florent Schaffhauser)</span> <a href=\"#narrow/stream/287929-mathlib4/topic/lambda/near/464466727\">said</a>:</p>\n<blockquote>\n<p>Is there maybe another Unicode character that looks like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œª</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">Œª</span></span></span></span>? Perhaps accessible by typing something like <code>\\lambda1</code>?</p>\n</blockquote>\n<p>(<a href=\"https://graphemica.com/search?q=lambda\">https://graphemica.com/search?q=lambda</a> is what's in unicode -- but that doesn't mean it's a valid identifier character)</p>",
        "id": 464466968,
        "sender_full_name": "Julian Berman",
        "timestamp": 1724355663
    },
    {
        "content": "<p>I think you <em>might</em> be able to do some one-off syntax, but people will soon want to write things like <code>Œª‚ÇÅ</code> or <code>Œª'</code>, which need <code>Œª</code> to be available as an identifier start character.</p>",
        "id": 464467131,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724355711
    },
    {
        "content": "<p>Plus, that only solves the problem for terms. You'd want these to be usable wherever an <code>ident</code> is expected, like in Johan's use case.</p>",
        "id": 464468167,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724356084
    },
    {
        "content": "<p>I think it would be very nice if we could toggle a switch that makes <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œª</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">Œª</span></span></span></span> behave in CS mode or in maths mode <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 464469874,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1724356745
    },
    {
        "content": "<p>Category theory uses <code>Œª_</code> in some parts of mathlib. But otherwise, <code>Œª</code> almost doesn't appear in mathlib.<br>\nI'm sure there will be plenty of libraries that would be sad to not have CS mode lambda. But mathlib would be very happy with maths mode lambda.</p>",
        "id": 464470380,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1724356886
    },
    {
        "content": "<p>Lean 4 already doesn't have Pi notation (in mathlib we have that as our own extension). It seems reasonable to me to continue with greek letter removal.</p>\n<p>However: the reason that these greek letters aren't allowed in identifiers is so that <code>Œªx =&gt; x</code> parses. If it were an allowed identifier start character, then this would start with the identifier <code>Œªx</code> and lead to a parse error.</p>",
        "id": 464470905,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724357014
    },
    {
        "content": "<p>I personally don't see that as important, but I saw this rationale in the code somewhere so it needs consideration.</p>",
        "id": 464471110,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724357072
    },
    {
        "content": "<p>If you bring this up with Leo, please make it clear that it would be nice but this is not crucial at all.</p>",
        "id": 464476415,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1724358733
    },
    {
        "content": "<p>I found the issue, and I think Leo's comment is where I picked up on the rationale for the restrictions: <a href=\"https://github.com/leanprover/lean4/issues/700\">https://github.com/leanprover/lean4/issues/700</a></p>",
        "id": 464478430,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724359590
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"513540\">Flo (Florent Schaffhauser)</span> <a href=\"#narrow/stream/287929-mathlib4/topic/lambda/near/464466727\">said</a>:</p>\n<blockquote>\n<p>Is there maybe another Unicode character that looks like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Œª</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">Œª</span></span></span></span>? Perhaps accessible by typing something like <code>\\lambda1</code>?</p>\n</blockquote>\n<p>If you were asking whether there is some other unicode character that looks like lambda and that we <em>can</em> use as an identifier, then the answer is no (or it was last time I checked). Perhaps that's how you should interpret the thumbs down? The closest is the capital <code>Œõ</code>.</p>",
        "id": 464482841,
        "sender_full_name": "A.",
        "timestamp": 1724361596
    },
    {
        "content": "<p>There's</p>\n<ul>\n<li>Coptic laula: ‚≤ñ</li>\n<li>Coptic small laula: ‚≤ó</li>\n<li>mathematical sans-serif bold small lamda: ùù∫</li>\n<li>mathematical bold small lamda: ùõå</li>\n<li>Buginese nga:¬†·®Ç</li>\n</ul>\n<p>(via <a href=\"https://shapecatcher.com/\">https://shapecatcher.com/</a>)</p>",
        "id": 464483324,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724361818
    },
    {
        "content": "<p>Does Lean permit those now?</p>",
        "id": 464483456,
        "sender_full_name": "A.",
        "timestamp": 1724361880
    },
    {
        "content": "<p>Oh, I missed \"that we can use as an identifier\". Probably not, I didn't check, but it's more likely that core Lean could provide support for these as identifiers than lambda itself.</p>",
        "id": 464483566,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1724361945
    },
    {
        "content": "<p>No.</p>",
        "id": 464483646,
        "sender_full_name": "A.",
        "timestamp": 1724361976
    },
    {
        "content": "<p>Even if we could use those, I think that would be worse than not using lambda at all</p>",
        "id": 464484740,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724362510
    }
]