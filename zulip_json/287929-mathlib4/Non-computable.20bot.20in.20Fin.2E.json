[
    {
        "content": "<p>There are some instances here for Fin n with [NeZero n]: in particular there's <code>Fin.instBoundedOrder</code>. This is meant to prevent non-computable instances being used to construct these instances non-computably.</p>\n<p>However, in practice if I use <code>⊥</code> in a definition, Lean flags it as noncomputable, and it seems ultimately to be constructing <code>⊥</code> from the CompleteLinearOrder on Fin n, which <em>is</em> non-computable.</p>\n<p>Can we either: a) define the complete linear order on Fin n in a computable way that extends these other instances, or b) stop this non-computable instance of <code>⊥</code> being used?</p>",
        "id": 482415813,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1731597304
    },
    {
        "content": "<p>Possibly related: Lean does not seem able to synthesise an <code>OrderBot</code> for <code>Fin n</code> simply using its <code>BoundedOrder</code> instance.</p>",
        "id": 482417144,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1731597626
    },
    {
        "content": "<p>In these situations, we have in the past added computable shortcut instances</p>",
        "id": 482418665,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731598012
    },
    {
        "content": "<p>Can you click through the infoview to tell us exactly how it went from <code>Bot</code> to <code>CompleteLinearOrder</code> in this case?</p>",
        "id": 482418819,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731598047
    },
    {
        "content": "<p>Aye, and it seems like that <em>ought</em> to work here (<code>Fin.instBoundedOrder</code> is computable!) but in practice it uses non-computable.</p>",
        "id": 482418844,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1731598059
    },
    {
        "content": "<p>... or give us a MWE to do so ourselves</p>",
        "id": 482418849,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731598061
    },
    {
        "content": "<p>Aye, one sec.</p>",
        "id": 482418883,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1731598071
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330967\">Wrenna Robson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Non-computable.20bot.20in.20Fin.2E/near/482418844\">said</a>:</p>\n<blockquote>\n<p>Aye, and it seems like that <em>ought</em> to work here (<code>Fin.instBoundedOrder</code> is computable!) but in practice it uses non-computable.</p>\n</blockquote>\n<p>There might be paths from <code>Bot</code> and <code>CompleteLinearOrder</code> that don't go through <code>BoundedOrder</code></p>",
        "id": 482419040,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1731598108
    },
    {
        "content": "<p>I think this will be fixed in the next Lean release</p>",
        "id": 482419099,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731598127
    },
    {
        "content": "<p>Yeah that is what I think is happening. Just trying to work out how to click through.</p>",
        "id": 482419110,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1731598131
    },
    {
        "content": "<p>In the meantime</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">attribute</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"kn\">instance</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">completeLinearOrder</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bot</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">inferInstance</span>\n</code></pre></div>\n<p>fixes it</p>",
        "id": 482419292,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731598182
    },
    {
        "content": "<p>Aha</p>",
        "id": 482419338,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1731598194
    },
    {
        "content": "<p>Thank you.</p>",
        "id": 482419410,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1731598204
    }
]