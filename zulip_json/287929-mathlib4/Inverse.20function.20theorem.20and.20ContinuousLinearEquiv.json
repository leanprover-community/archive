[
    {
        "content": "<p>WDYT about migrating the inverse function theorem and related results from assuming <code>HasFDerivAt</code> with a coercion of a <code>ContinuousLinearEquiv</code> to assuming <code>(fderiv ..).IsInvertible</code>?</p>",
        "id": 567586606,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768235969
    },
    {
        "content": "<p>We can also introduce <code>StrictlyDifferentiableAt</code>, so that we can assume it without providing an explicit derivative, then use <code>fderiv</code> to get the derivative.</p>",
        "id": 567586836,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768236020
    },
    {
        "content": "<p>I think it's a good idea: <code>IsInvertible</code> wasn't available at the time of writing the inverse function theorem, and it's less natural to have an assumption phrased in terms of a continuous linear equiv when <code>fderiv</code> is already around.</p>",
        "id": 567589809,
        "sender_full_name": "S√©bastien Gou√´zel",
        "timestamp": 1768236707
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"111433\">@A.</span> has been working on <a href=\"https://github.com/leanprover-community/mathlib4/pull/26985\">#26985</a> which was ready to land. Please see <a class=\"message-link\" href=\"/#narrow/channel/116395-maths/topic/Implicit.20function.20theorem.20in.20familiar.20form/near/562662702\">#maths &gt; Implicit function theorem in familiar form @ üí¨</a> for context. This almost-ready PR is now in an uncertain state due to my own PR introducing <code>IsContDiffImplicitAt.implicitFunctionData</code> and due to this thread and <a href=\"https://github.com/leanprover-community/mathlib4/pull/33611\">#33611</a>. They've been feeling dejected as a result, and I think we should coordinate the plan better amongst those interested.</p>",
        "id": 568282069,
        "sender_full_name": "Winston Yin (Â∞πÁ∂≠Êô®)",
        "timestamp": 1768500622
    },
    {
        "content": "<p>In yet another related PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/33611\">#33611</a>, I introduce a parametric version of the theorem. I think that in the case when <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">‚àÇ</mi><mi>f</mi></mrow><mrow><mi mathvariant=\"normal\">‚àÇ</mi><mi>y</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial f}{\\partial y}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4133em;vertical-align:-0.4811em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9322em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">‚àÇ</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4461em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">‚àÇ</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4811em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> is an equivalence, my version (it requires surjectivity only) implies yours. OTOH, my version introduces the kernel of that derivative, which is trivial in your cases. I'm not sure what's the right design here.</p>",
        "id": 568369141,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768547097
    },
    {
        "content": "<p>Ah, I see that you already mention my PR.</p>",
        "id": 568369230,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768547141
    },
    {
        "content": "<p>I need the version from <a href=\"https://github.com/leanprover-community/mathlib4/pull/33611\">#33611</a> in full generality. I'm not 100% sure it conflicts with the other PRs, since it introduces the kernel and the projection onto this kernel into the mix.</p>",
        "id": 568371452,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768548306
    },
    {
        "content": "<p>I think that we should have different constructions of <code>ImplicitFunctionData</code> in <code>Calculus/ImplicitFunction/*.lean</code>.</p>",
        "id": 568371521,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1768548341
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Inverse.20function.20theorem.20and.20ContinuousLinearEquiv/near/568369141\">said</a>:</p>\n<blockquote>\n<p>In yet another related PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/33611\">#33611</a>, I introduce a parametric version of the theorem. I think that in the case when <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mrow><mi mathvariant=\"normal\">‚àÇ</mi><mi>f</mi></mrow><mrow><mi mathvariant=\"normal\">‚àÇ</mi><mi>y</mi></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{\\partial f}{\\partial y}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.4133em;vertical-align:-0.4811em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9322em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">‚àÇ</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.4461em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\" style=\"margin-right:0.05556em;\">‚àÇ</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10764em;\">f</span></span></span></span></span><span class=\"vlist-s\">‚Äã</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4811em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span> is an equivalence, my version (it requires surjectivity only) implies yours. OTOH, my version introduces the kernel of that derivative, which is trivial in your cases. I'm not sure what's the right design here.</p>\n</blockquote>\n<p>Yes I posted code in the other thread to demonstrate the possibility of deriving one implicitFunction from another.</p>",
        "id": 569336951,
        "sender_full_name": "A.",
        "timestamp": 1769023348
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Inverse.20function.20theorem.20and.20ContinuousLinearEquiv/near/568371521\">said</a>:</p>\n<blockquote>\n<p>I think that we should have different constructions of <code>ImplicitFunctionData</code> in <code>Calculus/ImplicitFunction/*.lean</code>.</p>\n</blockquote>\n<p>That‚Äôs fine. Probably easier that way.</p>",
        "id": 569337114,
        "sender_full_name": "A.",
        "timestamp": 1769023393
    },
    {
        "content": "<p>If you move your version to a file there, then I can review&amp;merge it. I think that there is no harm in having many versions there.</p>",
        "id": 569337261,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769023440
    },
    {
        "content": "<p>Please notify me here once you do it to minimize the delay on my side. Thank you!</p>",
        "id": 569816403,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769209722
    },
    {
        "content": "<p>It's done. I created a new file Calculus/ImplicitFunction/OfProdDomain.lean for my own contribution. I also tried to <code>git mv</code> move <span class=\"user-mention\" data-user-id=\"416472\">@Winston Yin (Â∞πÁ∂≠Êô®)</span> 's Calculus/ImplicitContDiff.lean to Calculus/ImplicitFunction/ContDiffAt.lean but Github failed to track it and that screwed up the diff which seemed unhelpful. Perhaps Github will be able to track the move if it's done in its own special PR?</p>",
        "id": 569820416,
        "sender_full_name": "A.",
        "timestamp": 1769212953
    },
    {
        "content": "<p>The commit currently last in the branch had in fact passed CI but lost its green tick when I force pushed to revert the ContDiffAt file move commit.</p>",
        "id": 569820859,
        "sender_full_name": "A.",
        "timestamp": 1769213186
    },
    {
        "content": "<p>In the other thread <span class=\"user-mention\" data-user-id=\"416472\">@Winston Yin (Â∞πÁ∂≠Êô®)</span> suggested that maybe <code>IsContDiffImplicitAt</code> could be deprecated so I did that but it necessitated deleting quite a lot of ImplicitContDiff.lean which worried me. I sent him a message a couple of days ago.</p>",
        "id": 569821463,
        "sender_full_name": "A.",
        "timestamp": 1769213724
    },
    {
        "content": "<p>Git detects file moves based on content. If you move &amp; substantially change in the same PR, then it fails to detect the move.</p>",
        "id": 569830787,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769223597
    },
    {
        "content": "<p>In your PR, could you please move the implicit arguments to <code>variable</code>? <span class=\"user-mention\" data-user-id=\"416472\">@Winston Yin (Â∞πÁ∂≠Êô®)</span> Could you please have a look at the changes to your file?</p>",
        "id": 569830945,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769223743
    },
    {
        "content": "<p>I hope I made the right move in replacing</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">implicitFunctionOfProdDomain</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÇ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÇ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"n\">L</span><span class=\"o\">[</span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÇ</span><span class=\"w\"> </span><span class=\"bp\">‚âÉ</span><span class=\"n\">L</span><span class=\"o\">[</span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">dfu</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasStrictFDerivAt</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f‚ÇÅ</span><span class=\"bp\">.</span><span class=\"n\">coprod</span><span class=\"w\"> </span><span class=\"n\">f‚ÇÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">E‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">¬∑¬∑¬∑</span>\n</code></pre></div>\n<p>with</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">implicitFunctionOfProdDomain</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÇ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÇ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÇ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"n\">L</span><span class=\"o\">[</span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">dfu</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasStrictFDerivAt</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">f'</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">if‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f'</span><span class=\"w\"> </span><span class=\"bp\">‚àò</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÇ</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">IsInvertible</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">E‚ÇÅ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">E‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">¬∑¬∑¬∑</span>\n</code></pre></div>\n<p>?</p>\n<p>My aim was to conform with your plans at the top of the thread.</p>",
        "id": 570299171,
        "sender_full_name": "A.",
        "timestamp": 1769514572
    },
    {
        "content": "<p>Yes, thanks for doing this!</p>",
        "id": 570354786,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769528597
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"111433\">@A.</span> These are good changes. I've left some review comments on your PR. Don't worry about deleting lots of stuff from <code>ContDiffImplicit</code>, as what you did subsumed those parts in a good way.</p>",
        "id": 570934477,
        "sender_full_name": "Winston Yin (Â∞πÁ∂≠Êô®)",
        "timestamp": 1769743096
    }
]