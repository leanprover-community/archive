[
    {
        "content": "<p>Hi, I have a PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/20007\">#20007</a> open for the correspondence theorem for groups, but it is failing linting as I add a couple lemmas that end in <code>...mk'</code>, the constructor name. The bare <code>mk</code> constructor constructs the setoid without bundling the normality assumption, which remains useful. I'm not sure what's the preferred way to resolve this.</p>\n<p>As background, the quotient constructor for modules is named <code>mkQ</code>, and I'm partial to renaming <code>mk'</code> to <code>mkQ</code> for consistency and easier disambiguation[1], though this would probably be a large refactor and a separate concern to my present PR.</p>\n<p>[1]: and also perhaps to rename <code>mk</code> to <code>mkC</code>, signaling cosets</p>",
        "id": 489527018,
        "sender_full_name": "Johannes Choo",
        "timestamp": 1734453328
    },
    {
        "content": "<p>If you have <code>mk'</code> in your lemma name because it refers to a <code>mk'</code> that occurs in the signature, you should add the <code>set_option somethinglinter false in</code> before the lemma</p>",
        "id": 489528257,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1734453684
    },
    {
        "content": "<p>i believe it's along the lines of <code>docPrime</code>?</p>",
        "id": 489528568,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1734453780
    },
    {
        "content": "<p><code>linter.docPrime</code></p>",
        "id": 489528677,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1734453811
    },
    {
        "content": "<p>Got it, thanks!</p>",
        "id": 489594520,
        "sender_full_name": "Johannes Choo",
        "timestamp": 1734480747
    },
    {
        "content": "<p>But please do consider these linter warnings as an opportunity to remove the offending prime in some other definition, if you can come up with a better name!</p>",
        "id": 489627628,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1734502964
    },
    {
        "content": "<p>Hi, I got advised on the PR itself to add said lemmas to <code>scripts/nolint_prime_decls.txt</code>, which seems more appropriate. I think I have an idea of when to use this and when to have <code>docPrime</code>. I'll open a documentation PR regarding this later, so that it's documented somewhere and not just tribal knowledge/folklore</p>",
        "id": 490098348,
        "sender_full_name": "Johannes Choo",
        "timestamp": 1734674080
    },
    {
        "content": "<p>My understanding of the \"tribal knowledge\" around <code>nolint_prime_decls.txt</code> is the following:</p>\n<ul>\n<li>this file this file contains a list of pre-existing violations when the linter was introduced</li>\n<li>this list should only ever shrink, not grow</li>\n<li>in your specific case, perhaps the linter should not complain (as <code>mk'</code> is the name of the constructor; it's not the primed version of some lemma ending in <code>mk</code>)</li>\n<li>in general, when you add a new lemma whose name ends in a prime, you should (a) think if there's a better naming scheme available, and you that if possible (b) if there's none, add/extend a doc-string mentioning how this differs from the unprimed version and why there was no better naming scheme.</li>\n</ul>",
        "id": 490181966,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1734708142
    },
    {
        "content": "<p>Does this explanation make sense, <span class=\"user-mention\" data-user-id=\"603360\">@Johannes Choo</span>? Let me know if something is unclear!</p>",
        "id": 490182201,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1734708227
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60mk'.60.20constructor.20naming.20for.20quotient.20groups/near/490181966\">said</a>:</p>\n<blockquote>\n<ul>\n<li>in your specific case, perhaps the linter should not complain (as <code>mk'</code> is the name of the constructor; it's not the primed version of some lemma ending in <code>mk</code>)</li>\n</ul>\n</blockquote>\n<p>Yes, I think we need to make the linter less aggressive, this just encourages people to write useless docstrings explaining why the lemma about <code>foo (bar' x)</code> is called <code>foo_bar'</code></p>",
        "id": 490184223,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1734708878
    },
    {
        "content": "<p>Alright, I'll update my PR with a <code>linter.docPrime</code>, then look into renaming <code>mk'</code> and co. with a separate PR.</p>",
        "id": 490192700,
        "sender_full_name": "Johannes Choo",
        "timestamp": 1734711737
    }
]