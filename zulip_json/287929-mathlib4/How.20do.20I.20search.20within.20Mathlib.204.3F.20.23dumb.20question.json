[
    {
        "content": "<p>For example, I feel like there must be something in the library I can apply for the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">SMul</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Zero</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Mul</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">scalarscalarmatrix</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n</code></pre></div>\n<p>I feel like there has to be something that I can use for this, but I really don't know how to search the library to try to find things I feel like have to have been done.</p>",
        "id": 448474217,
        "sender_full_name": "Mark Santa Clara Munro",
        "timestamp": 1719883433
    },
    {
        "content": "<p>You've done it again: <code>[Mul α]</code> and <code>[Field α] </code> mean you have two completely unrelated multiplications on <code>α</code>.</p>",
        "id": 448476964,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1719884930
    },
    {
        "content": "<p>I'm confused, does that do a multiplication on alpha? I thought it would allow for other properties. Also, could you answer my question if possible?</p>",
        "id": 448484843,
        "sender_full_name": "Mark Santa Clara Munro",
        "timestamp": 1719887434
    },
    {
        "content": "<p>Yes, Kim is saying that <code>[Field α]</code> gives you multiplication on α, and that having <code>[Mul α]</code> (and <code>[Add α] [Zero α]</code>) is redundant and likely to give you bugs.</p>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=smul_assoc#doc\">docs#smul_assoc</a> is probably what you're looking for for the lemma. (I can't check because the web editor is not starting for me for some reason).</p>",
        "id": 448488362,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1719889046
    },
    {
        "content": "<p>You can search for that result using <code>by exact?</code> but only once the statement is correct. Hence Kim's remark is actually very much on topic. As stated you are searching for a result that is quite possibly not true.</p>",
        "id": 448497010,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1719893074
    },
    {
        "content": "<p>The fact that the hypotheses so far include <code>SMul R \\a</code> but nothing that states any axioms about this scalar multiplication means that the lemma as stated is surely false.</p>",
        "id": 448499907,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1719894778
    },
    {
        "content": "<p>Could you explain what it means for it to be surely false? Is it mathematically incorrect or do you mean I have to include other things so that I am able to prove it? What should I include that would state any axioms about this scalar multiplication? I'm sorry if these are very trivial questions, I am trying to learn</p>",
        "id": 448718820,
        "sender_full_name": "Mark Santa Clara Munro",
        "timestamp": 1719961991
    },
    {
        "content": "<p>It is mathematically incorrect, and to make it mathematically correct/to be able to prove it, you would have to add other things. </p>\n<p>Here is what the proof should look like with the lemma I suggested, but you can see it complains about not being able to synthesize IsScalarTower.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">SMul</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">scalarscalarmatrix</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">smul_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- failed to synthesize IsScalarTower R R (Matrix m n α)</span>\n</code></pre></div>\n<p>What is going on is that there is a definition of multiplication on <code>α</code>, and there is a definition of multiplication on <code>R</code>, and there is a definition of scalar multiplication of <code>α</code> on <code>R</code>. But there is nothing to say that this scalar multiplication that is defined makes any normal sense. It could be the case that  <code>α</code> and <code>R</code> are the rationals, but the scalar multiplication is not normal multiplication but some weird function that returns -17 when the denominator of the left hand side is a prime and 37 otherwise.</p>\n<p>So what is needed is a new hypothesis that says that this scalar multiplication respects the usual associative law. In other words, what is needed is <code>[IsScalarTower R R α]</code>.  And this makes the lemma work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">SMul</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">scalarscalarmatrix</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsScalarTower</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">smul_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- works</span>\n</code></pre></div>",
        "id": 448721894,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1719963247
    },
    {
        "content": "<p>Furthermore you can delete <code>hx</code> and <code>hy</code>, they're unused.</p>",
        "id": 448722198,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719963411
    },
    {
        "content": "<p>Things like <code>[SMul R α]</code> don't mean \"magic up some natural action of R on alpha\", they mean literally nothing more than \"magic up a completely arbitrary function which eats elements of <code>r</code> of R and <code>a</code> of alpha, and returns an element of alpha with notation <code>r • a</code> -- this is just the assumption that the notation makes syntactic sense, not that it has any mathematical meaning.  <code>[SMul R α]</code> is just adding notation. Whereas the assumption <code>[IsScalarTower R R α]</code> is adding an <em>axiom</em>, namely that <code>r • (s • a) = (r * s) • a</code>, which is what you need to complete your proof.</p>",
        "id": 448722827,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719963741
    },
    {
        "content": "<p>If you're a beginner then you might be better off working with exercises which other people have written for now, because writing correct theorem statements is much harder than writing easy proofs if you're just learning.</p>",
        "id": 448722951,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719963815
    },
    {
        "content": "<p>Thank you so much for the help and the thorough explanation! That is very helpful</p>",
        "id": 448723468,
        "sender_full_name": "Mark Santa Clara Munro",
        "timestamp": 1719963986
    },
    {
        "content": "<p>I honestly agree with that of being better off working with exercises which other people have written for now, but I am doing summer research with a professor and these are the things we are working on and that I am told to work on. I will try and add on exercises that other people have written as well, but I will probably still have to ask questions here on zulip and trying to go through documentation to figure out what to write</p>",
        "id": 448724180,
        "sender_full_name": "Mark Santa Clara Munro",
        "timestamp": 1719964225
    },
    {
        "content": "<p>How can I search the library efficiently to find the theorem <code>∀ (P : Prop), P → P</code>?</p>",
        "id": 449277131,
        "sender_full_name": "Anthony Bordg",
        "timestamp": 1720175152
    },
    {
        "content": "<p>#loogle is probably your best bet. Maybe #moogle</p>",
        "id": 449277279,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1720175221
    },
    {
        "content": "<p>Hmm. No linkfiers.</p>",
        "id": 449277319,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1720175236
    },
    {
        "content": "<p>@loogle (P : Prop), P -&gt; P</p>",
        "id": 449278110,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1720175498
    },
    {
        "content": "<p>and <a href=\"http://moogle.ai\">moogle.ai</a></p>",
        "id": 449278250,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1720175551
    },
    {
        "content": "<p>NB: I am not a <code>loogle</code> syntax expert (I occasionally use it to look for constants)</p>",
        "id": 449278326,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1720175586
    },
    {
        "content": "<p>Or you can use </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"bp\">?</span>\n</code></pre></div>",
        "id": 449278610,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1720175721
    },
    {
        "content": "<p>(<code>by exact?</code>)</p>",
        "id": 449345103,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1720195521
    },
    {
        "content": "<p>Thank you Matthew for the references to Loogle and Moogle which I was not aware of (unfortunately, they didn't  prove effective on this particular instance), but <code>exact?#</code> did work.</p>",
        "id": 449354026,
        "sender_full_name": "Anthony Bordg",
        "timestamp": 1720197925
    }
]