[
    {
        "content": "<p>I'm very surprised to notice that apparently <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Subfield#doc\">docs#Subfield</a> s are not fields because they might not be commutative. I know that in French people use \"corps\" and this word is often translated as \"field\" even though commutativity is not assumed, but in English a field is surely always commutative, and the fact that this isn't assumed is not even mentioned in the docstring. Are people happy with this convention? At the very least I'd like to mention this in the docstring but my preference would be to change this to SubdivisionRing or something (i.e. stick with the literature rather than going our own way).</p>",
        "id": 477814458,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729350417
    },
    {
        "content": "<p>I would be in favour of renaming to <code>SubdivisionRing</code>, since a <code>Subfield</code> not being a <code>Field</code> seems very strange.</p>",
        "id": 477814793,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729350681
    },
    {
        "content": "<p>It is mentioned in the module docstring at least, but not in the docstring of Subfield.</p>",
        "id": 477814940,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729350803
    },
    {
        "content": "<p>It would be great if Lean could give you a warning once, every time you introduce a new variable with stuff like this.  E.g. you type <code>(F : Subfield K)</code> and Lean tells you \"Remember, a subfield is not necessarily commutative.\"  And then shuts up when you keep typing stuff.</p>",
        "id": 477815088,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729350916
    },
    {
        "content": "<p>Of course we're going to run into the VectorSpace issue here, which might now be solvable in Lean 3. For younger viewers: we had VectorSpace at some point to be a synonym for Module when the base ring was a field, but it caused problems in Lean 3 and we eventually gave up. Here we'll have subdivisionrings of a division ring and then all over Galois theory we'll either have subdivisionrings of fields or we'll have to duplicate API or we'll have to have the thing which the computer scientists hate, namely subfield just meaning the same thing as subdivisionring</p>",
        "id": 477815100,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729350932
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/subfields.20are.20not.20fields/near/477814940\">said</a>:</p>\n<blockquote>\n<p>It is mentioned in the module docstring at least, but not in the docstring of Subfield.</p>\n</blockquote>\n<p>I am still more in favour of a rename, than writing a warning in the doc-string.</p>",
        "id": 477815189,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729350992
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/subfields.20are.20not.20fields/near/477815100\">said</a>:</p>\n<blockquote>\n<p>Here we'll have subdivisionrings of a division ring and then all over Galois theory we'll either have subdivisionrings of fields or we'll have to duplicate API or we'll have to have the thing which the computer scientists hate, namely subfield just meaning the same thing as subdivisionring</p>\n</blockquote>\n<p>is there a reason not to have <code>Subfield</code> assuming commutativity (while also having <code>SubdivisionRing</code>)?</p>",
        "id": 477815781,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729351449
    },
    {
        "content": "<p>Duplicating API?</p>",
        "id": 477816440,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729351913
    },
    {
        "content": "<p>we can add a coersion, right?</p>",
        "id": 477816504,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729351938
    },
    {
        "content": "<p>i think that should prevent most duplication</p>",
        "id": 477816528,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729351969
    },
    {
        "content": "<p>No, if we have 2 types, then we need to duplicate <code>CompleteLattice</code> instance, <code>map</code>/<code>comap</code> etc.</p>",
        "id": 477816595,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729352032
    },
    {
        "content": "<p>ah right</p>",
        "id": 477816679,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729352065
    },
    {
        "content": "<p>still, you can't really get around that, as they're separate concepts...</p>",
        "id": 477816713,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729352104
    },
    {
        "content": "<p>how <em>should</em> one spell \"commutative subdivisionring\", if we don't add a proper type like <code>Subfield</code>?</p>",
        "id": 477816808,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729352163
    },
    {
        "content": "<p>They're just subdivisionrings of fields.</p>",
        "id": 477816839,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729352184
    },
    {
        "content": "<p>can't a subdivisionring of a divisionring be commutative?</p>",
        "id": 477816878,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729352229
    },
    {
        "content": "<p>It can, but they don't form a <code>CompleteLattice</code>.</p>",
        "id": 477816890,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729352255
    },
    {
        "content": "<p>i don't think \"forming a <code>CompleteLattice</code>\" is the criterion we should use to decide if a definition is useful...</p>",
        "id": 477817000,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729352325
    },
    {
        "content": "<p>We can talk about <code>(S : SubDivisionRing K) [@Std.Commutative S fun a b =&gt; a * b]</code></p>",
        "id": 477817016,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729352346
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/subfields.20are.20not.20fields/near/477816839\">said</a>:</p>\n<blockquote>\n<p>They're just subdivisionrings of fields.</p>\n</blockquote>\n<p>In the actual issue which prompted this question, I have students who want to talk about subfields (assumed commutative) of a division ring (genuinely not commutative). This is a really common concept in the theory of finite-dimensional central simple algebras; they can be understood by understanding maximal commutative subalgebras (which are subfields) and then bootstrapping up from there.</p>",
        "id": 477818127,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729353199
    },
    {
        "content": "<p>What about <code>(S : SubDivisionRing K) [@Std.Commutative ..]</code>?</p>",
        "id": 477818874,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729353830
    },
    {
        "content": "<p>I guess that would work! Note that subfields of a division ring are far from being a lattice, e.g. there are plenty of subfields of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>M</mi><mn>2</mn></msub><mo stretchy=\"false\">(</mo><mi mathvariant=\"double-struck\">R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">M_2(\\mathbb{R})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3011em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">â€‹</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathbb\">R</span><span class=\"mclose\">)</span></span></span></span> which are isomorphic to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">C</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{C}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">C</span></span></span></span>, so there's no sup, no top etc.</p>",
        "id": 477819235,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729354123
    },
    {
        "content": "<p>Of course, another option is to create a structure that extends <code>SubDivisionRing</code> and assumes commutativity, with a <code>SemilatticeInf</code> instance.</p>",
        "id": 477822389,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729356867
    },
    {
        "content": "<p>The <code>comm</code> field can have a default value <code>:= by intros; apply mul_comm</code>, and we can have an equivalence between <code>SubDivisionRing</code> and <code>Subfield</code> (+<code>CompleteLattice</code> instance) in case of a field.</p>",
        "id": 477822448,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729356940
    },
    {
        "content": "<p>This presumably also is relevant for commutative subrings of a noncommutative ring etc</p>",
        "id": 477823901,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729358144
    },
    {
        "content": "<p>Don't we have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Subgroup.IsCommutative#doc\">docs#Subgroup.IsCommutative</a> for pretty much an analogous case?</p>",
        "id": 477823970,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729358184
    }
]