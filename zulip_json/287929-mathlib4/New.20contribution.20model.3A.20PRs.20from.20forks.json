[
    {
        "content": "<p>Dear Mathlib community, cc <span class=\"user-mention channel-wildcard-mention\" data-user-id=\"*\">@channel</span> </p>\n<p>With this message we want to announce the final step in the transition to the new contribution model. All future PRs will be made from personal forks.<br>\nWe realize that this transition has been a bumpy ride, and we apologize for that.</p>\n<p>In this new setting:</p>\n<ul>\n<li>by default, all community members who had \"write\" access now have \"triage\" access (to add/remove labels on PRs)</li>\n<li>currently members of the reviewer and maintainer teams still have \"write\" access; in the near future, many of them (including most maintainers) will also reduce their access to \"triage\"</li>\n<li>the CI team will retain \"write\" access</li>\n</ul>\n<p>For more information on how to create PRs from forks, please see the <a href=\"https://leanprover-community.github.io/contribute/git.html\">Git Guide for Mathlib4 Contributors</a>.</p>\n<p>For more information on how to migrate existing PRs to PRs from forks, please see the page <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Migration-to-PRs-from-forks\">Mathlib4 wiki &gt; Migration to PRs from forks</a>.</p>\n<p>Best regards,<br>\nthe Mathlib maintainers</p>",
        "id": 524695786,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1750249941
    },
    {
        "content": "<p>Congratulations! This is a lot better from a security standpoint. Now that it is done, can it be revealed if this was a preventive measure or done in response to a malicious actor (or someone reporting a vulnerability)?</p>",
        "id": 524699358,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1750251059
    },
    {
        "content": "<p>The previous model was not secure nor sustainable as we grow the number of contributors. This was a preventive measure. We have seen no indication of any attempted exploits but believed it prudent to take action sooner rather than later. The new model is well-tested for large scale active collaboration.</p>",
        "id": 524702884,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1750252025
    },
    {
        "content": "<p>Sorry if I missed this - What's the way to get oleans without opening a pr now?</p>",
        "id": 524703826,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1750252271
    },
    {
        "content": "<p>This is indeed a change. Please feel free to open a draft PR in that scenario.</p>",
        "id": 524704076,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1750252332
    },
    {
        "content": "<p>Have the new permissions changes also affected reviewing as a non-reviewer? E.g. I reviewed <a href=\"https://github.com/leanprover-community/mathlib4/pull/25971\">#25971</a> today, and the approval sign is no longer green, and more importantly, I can't see a small \"approved\" text in the list of PRs that involve me. If so, should there be a new <code>approved</code> tag non-reviewers to use?</p>",
        "id": 524709643,
        "sender_full_name": "Calle SÃ¶nne",
        "timestamp": 1750253857
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/0aGWt2hksSrPcYffejSCpR4N/image.png\">I believe so</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/0aGWt2hksSrPcYffejSCpR4N/image.png\" title=\"I believe so\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"514x74\" src=\"/user_uploads/thumbnail/3121/0aGWt2hksSrPcYffejSCpR4N/image.png/840x560.webp\"></a></div>",
        "id": 524710885,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1750254226
    },
    {
        "content": "<p>Then in my opinion there should be an <code>approved by non-reviewer</code>tag or something similar. Otherwise its quite hard to get an overview over which of the reviews I am involved with that I already looked at.</p>",
        "id": 524711934,
        "sender_full_name": "Calle SÃ¶nne",
        "timestamp": 1750254498
    },
    {
        "content": "<p>Maybe you should be made a reviewer? <span aria-label=\"innocent\" class=\"emoji emoji-1f607\" role=\"img\" title=\"innocent\">:innocent:</span></p>",
        "id": 524712293,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1750254577
    },
    {
        "content": "<p>I agree that this distinction in the GitHub UI is annoying (although I see where it's coming from of course), and I agree that replacing this with a tag would be nice.</p>",
        "id": 524714065,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1750255021
    },
    {
        "content": "<p>I think it's actually good personally for me, so that I can make it clear that I'm not an official reviewer, and my \"approvals\" should be taken less seriously.</p>",
        "id": 524716427,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1750255610
    },
    {
        "content": "<p>So now if I want to review a PR locally (not in Gitpod/codespace) I'll need to add the author's fork as a remote. The git command is nontrivial to type. Can we add a VS Code command in the palette or a lake command to minimize typing / memorization?</p>",
        "id": 524722590,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1750257358
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/287929-mathlib4/topic/New.20contribution.20model.3A.20PRs.20from.20forks/near/524716427\">said</a>:</p>\n<blockquote>\n<p>I think it's actually good personally for me, so that I can make it clear that I'm not an official reviewer, and my \"approvals\" should be taken less seriously.</p>\n</blockquote>\n<p>This distinction is already made by the lack of <code>maintainer-merge</code> label when you approve a PR</p>",
        "id": 524722817,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1750257434
    },
    {
        "content": "<p><code>gh pr checkout XXXXX</code> in the main repository should work</p>",
        "id": 524722893,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1750257460
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/New.20contribution.20model.3A.20PRs.20from.20forks/near/524722590\">said</a>:</p>\n<blockquote>\n<p>So now if I want to review a PR locally (not in Gitpod/codespace) I'll need to add the author's fork as a remote. The git command is nontrivial to type. Can we add a VS Code command in the palette or a lake command to minimize typing / memorization?</p>\n</blockquote>\n<p><code>gh pr checkout 12345</code> should work, which I think is similar in difficulty to the old approach of <code>git checkout some_branch_name</code>.</p>",
        "id": 524722970,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1750257490
    },
    {
        "content": "<p>You can even do this manually without <code>gh</code> or adding another remote using this command: <code>git fetch upstream pull/12345/head:local_branch_name</code>.</p>",
        "id": 524723470,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1750257648
    },
    {
        "content": "<p>Note that you can also do <code>gh pr list --label 't-differential-geometry'</code> to get the number if you forget (like I often do).</p>",
        "id": 524724039,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1750257799
    },
    {
        "content": "<p>Thanks for the suggestions! I just installed GitHub CLI and hopefully it works once I restart my VS Code (or possibly the PC).</p>",
        "id": 524725241,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1750258159
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/287929-mathlib4/topic/New.20contribution.20model.3A.20PRs.20from.20forks/near/524695786\">said</a>:</p>\n<blockquote>\n<ul>\n<li>currently members of the reviewer and maintainer teams still have \"write\" access; in the near future, many of them (including most maintainers) will also reduce their access to \"triage\"</li>\n</ul>\n</blockquote>\n<p>About this: perhaps this is what you want to attain (I haven't followed any of these changes), but note that, last IÂ checked, the triage permission prevents things like closing issues, which can be useful for triage. In the context of the Rocq development, we have a larger pool of contributors with write access than who is actually able to merge PRs. And nobody can push new branches (all PRs are made from forks), except core team members specifically for release branches. All of this is achieved with GitHub new rulesets: <a href=\"https://github.com/rocq-prover/rocq/rules\">https://github.com/rocq-prover/rocq/rules</a><br>\nMaybe you already knew all of this, in this case sorry for the noise, but I wanted to share our experience just in case it is useful.</p>",
        "id": 524740318,
        "sender_full_name": "ThÃ©o Zimmermann",
        "timestamp": 1750262614
    },
    {
        "content": "<p>I wonder if you could maybe also use these rules to allow write access to <code>lean-pr-testing-nnnn</code> and <code>batteries-pr-testing-nnnn</code> branches for the original PR owner? It's definitely convenient if you can just push fixes there (especially if they are trivial) without needing to actually make an additional mathlib PR</p>",
        "id": 524743222,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1750263630
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"873547\">@Robin Arnez</span>, yes the current set up for <code>lean-pr-testing-NNNN</code> PRs is not viable for the long term, and we need to work out how to fix this. This hasn't been a priority while we fix the problems affecting everyone. Likely we will create a designated fork to host these branches.</p>",
        "id": 524794298,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1750287808
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221536\">@ThÃ©o Zimmermann</span> Thanks for sharing those ideas!</p>",
        "id": 524829151,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1750317760
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"557243\">Shubham Kumar ðŸ¦€ (he/him)</span> has marked this topic as resolved.</p>",
        "id": 524852343,
        "sender_full_name": "Notification Bot",
        "timestamp": 1750327058
    }
]