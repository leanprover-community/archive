[
    {
        "content": "<p>I define an n-by-n matrix as M (i j : Fin n) : Prop := i.val = 0 ∨ j.val = 0. <br>\nI want to count the number of 1's (True) in M which is 2n-1. Is there an easy way to count? </p>\n<p>For my purpose, I would need only to prove only the lower bound of it. <br>\nLet t := (filter (fun (i,j) ↦ M i j) univ)<br>\nhave : 2*n - 1 ≤ t.card </p>\n<p>Following Yaël's advice, I plan to use an injective map </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Icc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">posPart</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">negPart</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">--- this line said it failed to synthesize</span>\n<span class=\"w\">  </span><span class=\"n\">AddGroup</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Any advice on how to proceed would be appreciated. Thanks.</p>",
        "id": 472135973,
        "sender_full_name": "Sorrachai Yingchareonthawornchai",
        "timestamp": 1727071740
    },
    {
        "content": "<p>What's the full error?</p>",
        "id": 472136611,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727072015
    },
    {
        "content": "<p>application type mismatch<br>\n  i⁺<br>\nargument<br>\n  i<br>\nhas type<br>\n  Finset ℤ : Type<br>\nbut is expected to have type<br>\n  Fin n : Type</p>",
        "id": 472139154,
        "sender_full_name": "Sorrachai Yingchareonthawornchai",
        "timestamp": 1727072898
    },
    {
        "content": "<p>I think that's a pretty clear description of why your code doesn't work</p>",
        "id": 472139214,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727072924
    },
    {
        "content": "<p>The codomain should be <code>\\Z</code>, not <code>Finset \\Z</code></p>",
        "id": 472139333,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727072967
    },
    {
        "content": "<p>Domain not codomain?</p>",
        "id": 472139540,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727073026
    },
    {
        "content": "<p>Thanks. <br>\napplication type mismatch<br>\n  i⁺<br>\nargument<br>\n  i<br>\nhas type<br>\n  ℤ : Type<br>\nbut is expected to have type<br>\n  Fin n : Type</p>",
        "id": 472139556,
        "sender_full_name": "Sorrachai Yingchareonthawornchai",
        "timestamp": 1727073032
    },
    {
        "content": "<p>So it does not automatically cast an integer to Fin n?</p>",
        "id": 472139673,
        "sender_full_name": "Sorrachai Yingchareonthawornchai",
        "timestamp": 1727073073
    },
    {
        "content": "<p>There's no coercion if n=0 which isn't ruled out</p>",
        "id": 472139684,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727073077
    },
    {
        "content": "<p>I see thanks a lot</p>",
        "id": 472139876,
        "sender_full_name": "Sorrachai Yingchareonthawornchai",
        "timestamp": 1727073143
    },
    {
        "content": "<p>Once you figure out how to get around this (ie by making the assumption which the coercion is expecting to see, in a way which it can see it) then the code will work</p>",
        "id": 472139906,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727073155
    },
    {
        "content": "<p>Unfortunately I'm not at a computer so can only guess. <code>[NeZero n]</code>?</p>",
        "id": 472139981,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1727073191
    },
    {
        "content": "<p>It works now thanks! Somehow the error message does not say much.</p>",
        "id": 472140342,
        "sender_full_name": "Sorrachai Yingchareonthawornchai",
        "timestamp": 1727073334
    },
    {
        "content": "<p>Another question: </p>\n<ul>\n<li>let f :  ℤ → Fin n × Fin n  := fun (i) ↦ ( posPart i , negPart i)</li>\n<li>in my tactic state, it shows f : ℤ → Fin n × Fin n := fun i ↦ ((↑i)⁺, (↑i)⁻)</li>\n<li>but it should be f : ℤ → Fin n × Fin n := fun i ↦ (↑(i⁺), ↑(i⁻))? And how do I enforce this?</li>\n</ul>",
        "id": 472234067,
        "sender_full_name": "Sorrachai Yingchareonthawornchai",
        "timestamp": 1727098353
    },
    {
        "content": "<p>Write <code>let f (i : ℤ) : Fin n × Fin n := (↑(i⁺), ↑(i⁻))</code></p>",
        "id": 472236055,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727098830
    }
]