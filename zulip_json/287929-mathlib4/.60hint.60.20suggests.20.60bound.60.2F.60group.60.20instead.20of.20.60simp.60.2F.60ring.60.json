[
    {
        "content": "<p>This behavior seems very weird to me:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">!!</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">!!</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">!!</span><span class=\"o\">[</span><span class=\"mi\">7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">15</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">22</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">23</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">34</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">hint</span><span class=\"w\">  </span><span class=\"c1\">-- suggests `bound`</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">hint</span><span class=\"w\">  </span><span class=\"c1\">-- suggests `group`</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">sqrt</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">hint</span><span class=\"w\">  </span><span class=\"c1\">-- suggests `group`</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">hint</span><span class=\"w\">  </span><span class=\"c1\">-- suggests `group`</span>\n</code></pre></div>",
        "id": 539161214,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1757710394
    },
    {
        "content": "<p>This presumably means that <code>group</code> and <code>bound</code> are doing too much?</p>",
        "id": 539161246,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1757710410
    },
    {
        "content": "<p>for the first two, <code>decide</code> also solves the goal. so maybe some uncontrolled reduction is involved in <code>bound</code> and <code>group</code> ?</p>",
        "id": 539163760,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1757711715
    },
    {
        "content": "<p>Correct me if I'm wrong but hint doesn't have any notion of tactic complexity or ordering no? It just tries all the tactics added to its bag of tricks in order of addition?</p>\n<p>(Also I think Kim somewhere mentioned hint is scheduled for replacement by <code>try?</code>?)</p>",
        "id": 539165114,
        "sender_full_name": "Julian Berman",
        "timestamp": 1757712511
    },
    {
        "content": "<p>I think <code>group</code> calls <code>ring</code></p>",
        "id": 539165286,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757712622
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/blob/e79947901d3ca3924eb39347c2920381c20f712a/Mathlib/Tactic/Group.lean#L65-L67\">https://github.com/leanprover-community/mathlib4/blob/e79947901d3ca3924eb39347c2920381c20f712a/Mathlib/Tactic/Group.lean#L65-L67</a></p>",
        "id": 539165372,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757712672
    },
    {
        "content": "<p>Should make a PR adding the comment</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- covering for users who used the tactic on a ring forgetting that the</span>\n<span class=\"c1\">-- only group which is a ring is the trivial group</span>\n</code></pre></div>",
        "id": 539167483,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1757713894
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60hint.60.20suggests.20.60bound.60.2F.60group.60.20instead.20of.20.60simp.60.2F.60ring.60/near/539167483\">said</a>:</p>\n<blockquote>\n<p>Should make a PR adding the comment</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- covering for users who used the tactic on a ring forgetting that the</span>\n<span class=\"c1\">-- only group which is a ring is the trivial group</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>believe it or not that's actually not what it's for</p>",
        "id": 539169138,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1757714668
    },
    {
        "content": "<p>it looks like it's there to normalise exponents somehow?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span><span class=\"w\"> </span><span class=\"c1\">-- works</span>\n</code></pre></div>",
        "id": 539170330,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1757715241
    },
    {
        "content": "<p>I have found <code>hint</code> quite unhelpful, because of exactly this issue that it only gives one tactic that closes the goal. I want to know all such tactics, so that I can pick the simplest/best one.</p>",
        "id": 539491660,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1757924812
    },
    {
        "content": "<p>Is this a change? I feel I recall in the past that <code>hint</code> <em>would</em> give multiple tactics when possible.</p>",
        "id": 539683163,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1757998785
    },
    {
        "content": "<p>For the first example above, <code>!![1, 2; 3, 4; 5, 6] * !![1, 2; 3, 4] = !![7, 10; 15, 22; 23, 34]</code>, it suggests both <code>bound</code> and <code>group</code>, of which only <code>bound</code> closes the goal. But for the others it only suggests <code>group</code></p>",
        "id": 539699942,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1758007616
    }
]