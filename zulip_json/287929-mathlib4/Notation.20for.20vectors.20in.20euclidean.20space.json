[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/17732\">#17732</a>, I introduce some notation and a delaborator for <code>(WithLp.equiv 2 _).symm ![x, y, z]</code>, which avoids traps around computing the sup norm by accident. I feel strongly that we should have <em>some</em> notation, but not about what symbols it should use.</p>",
        "id": 476796192,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728914618
    },
    {
        "content": "<p>/poll What should the notation be?</p>\n<ul>\n<li><code>(WithLp.equiv 2 _).symm ![x, y, z]</code> is fine already</li>\n<li><code>![x, y, z]</code>, even though this has the wrong type</li>\n<li><code>!ₑ[1, 2, 3]</code></li>\n<li><code>!₂[1, 2, 3]</code></li>\n</ul>",
        "id": 476796383,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728914673
    },
    {
        "content": "<p>How about a prefix or postfix e instead of in the middle?</p>",
        "id": 476802289,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1728916651
    },
    {
        "content": "<p>I should mention that I'm about to add the L2 norm as a definition with notation <code>‖x‖_[2]</code>. Maybe that's enough for most people?</p>",
        "id": 476802819,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1728916817
    },
    {
        "content": "<p>I don't really have any preference for prefix (<code>ᴱ![x, y, z]</code>)/postfix(<code>![x, y, z]ᴱ</code>), but those are good alternatives</p>",
        "id": 476802824,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728916819
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Notation.20for.20vectors.20in.20euclidean.20space/near/476802819\">said</a>:</p>\n<blockquote>\n<p>I should mention that I'm about to add the L2 norm as a definition with notation <code>‖x‖_[2]</code>.</p>\n</blockquote>\n<p>Making this a new definition rather than just notation strikes me as undesirable; is there a reason that you can't use the <code>WithLp</code> machinery?</p>",
        "id": 476806036,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1728917911
    },
    {
        "content": "<p>Pinging this thread again since some more options have appeared above, and this way people in later time-zones might spot it.</p>",
        "id": 477092651,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729037546
    },
    {
        "content": "<p>One criticism I'd level against <code>![x, y, z]_p</code> is that the applied <code>![x, y, z]_2 2</code> is a little confusing</p>",
        "id": 477307206,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729115884
    },
    {
        "content": "<p>Based on the poll above clearly disliking the <code>e</code> subscript, I've changed <a href=\"https://github.com/leanprover-community/mathlib4/pull/17732\">#17732</a> to support <code>!₂[1, 2, 3]</code>, <code>!₀[x, y, z]</code>, and in the elaborator but not the delaborator, <code>!ₚ[1, 2, 3]</code></p>",
        "id": 477307992,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729116337
    },
    {
        "content": "<p>I suppose another path here would be to introduce <code>withLp 2</code> as a much shorter spelling of <code>(WithLp.equiv 2 _).symm</code></p>",
        "id": 477308076,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729116382
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Notation.20for.20vectors.20in.20euclidean.20space/near/477307206\">said</a>:</p>\n<blockquote>\n<p>One criticism I'd level against <code>![x, y, z]_p</code> is that the applied <code>![x, y, z]_2 2</code> is a little confusing</p>\n</blockquote>\n<p>What about <code>!_2[x, y, z]</code> then?</p>",
        "id": 477404628,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729159090
    },
    {
        "content": "<p>(not sure if that's allowed notation)</p>",
        "id": 477404697,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1729159116
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Notation.20for.20vectors.20in.20euclidean.20space/near/477307992\">said</a>:</p>\n<blockquote>\n<p>Based on the poll above clearly disliking the <code>e</code> subscript, I've changed <a href=\"https://github.com/leanprover-community/mathlib4/pull/17732\">#17732</a> to support <code>!₂[1, 2, 3]</code>, <code>!₀[x, y, z]</code>, and in the elaborator but not the delaborator, <code>!ₚ[1, 2, 3]</code></p>\n</blockquote>\n<p>Unfortunately this seems to have run into a lean bug relating to the subscript parser that I can't track down.</p>",
        "id": 478164100,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729550876
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> do you have a reproduction?</p>",
        "id": 478967584,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1729880171
    },
    {
        "content": "<p>Only the one in the PR</p>",
        "id": 478988284,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729890157
    },
    {
        "content": "<p>The cause is a missing <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.enableInitializersExecution#doc\">docs#Lean.enableInitializersExecution</a> before pretty much every call to <code>withImportModules</code></p>",
        "id": 482287438,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731544557
    },
    {
        "content": "<p><a href=\"#narrow/channel/270676-lean4/topic/Non-builtin.20parser.20aliases/near/482288560\">This thread on parser aliases</a> seems relevant</p>",
        "id": 482288597,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731545366
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/17732\">#17732</a> is now passing CI;.</p>\n<p><span class=\"user-mention\" data-user-id=\"311453\">@Frédéric Dupuis</span>, <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> , <span class=\"user-mention\" data-user-id=\"400544\">@Richard Copley</span>, <span class=\"user-mention\" data-user-id=\"466290\">@Luigi Massacci</span> , you all voted only for <code>![1, 2, 3]_p</code>; are you happy with the <code>!ₚ[1, 2, 3]</code> that the PR provides instead?</p>",
        "id": 483120901,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731963078
    },
    {
        "content": "<p>Not really: the idea was to be able to use an arbitrary <code>p</code>, not hardcode a few values.</p>",
        "id": 483142549,
        "sender_full_name": "Frédéric Dupuis",
        "timestamp": 1731971649
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> I've hacked together a delaborator in <a href=\"https://github.com/leanprover-community/mathlib4/pull/20719\">#20719</a> (<a href=\"https://github.com/leanprover-community/mathlib4/pull/20719/files#diff-0e008d579f070edfb95bd6eb44f0300b7b9d1f35ffc9955c7c68964e15a32d74R786-R802\">here</a>) that is inspired by, but slightly less conservative than, that in <a href=\"https://github.com/leanprover-community/mathlib4/pull/17732\">#17732</a>. Do you think it's worth the effort  to make this shared / usable for <code>!ₚ₊₁[1, 2, 3]</code> and other subscript notations?</p>",
        "id": 494533614,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737218273
    }
]