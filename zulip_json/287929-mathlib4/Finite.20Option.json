[
    {
        "content": "<p>Hi, I needed to have <code>Finite (Option T)</code> at some point in a proof, and I ended up writing a proof of that. Is it interesting to have that in lean4 ? I am willing to open a PR</p>",
        "id": 453973286,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1721920033
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finite#doc\">docs#Finite</a> is in Mathlib. Are you sure you are in the right stream?</p>",
        "id": 453974020,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1721920212
    },
    {
        "content": "<p>Woops probably not indeed</p>",
        "id": 453974111,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1721920229
    },
    {
        "content": "<p>I can't change stream though, do you want me to close this one and open another in <a class=\"stream\" data-stream-id=\"287929\" href=\"/#narrow/stream/287929-mathlib4\">#mathlib4</a> ?</p>",
        "id": 453974256,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1721920273
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/stream/270676-lean4/topic/Finite.20Option\">#lean4 &gt; Finite Option</a> by <span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span>.</p>",
        "id": 453974905,
        "sender_full_name": "Notification Bot",
        "timestamp": 1721920439
    },
    {
        "content": "<p>Thanks !</p>",
        "id": 453975020,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1721920456
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=instFintypeOption#doc\">docs#instFintypeOption</a> is probably what you want?</p>",
        "id": 453975242,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1721920515
    },
    {
        "content": "<p>Oh, you meant actually the <code>Finite</code> version of that. yeah, that would be useful. Please open a PR.</p>",
        "id": 453975381,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1721920544
    },
    {
        "content": "<p>Hmmm, for some reason I could not find it...</p>",
        "id": 453975440,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1721920557
    },
    {
        "content": "<p>Then my question is settled <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span>, thanks !</p>",
        "id": 453975524,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1721920570
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"658705\">Thomas Vigouroux</span> has marked this topic as resolved.</p>",
        "id": 453975533,
        "sender_full_name": "Notification Bot",
        "timestamp": 1721920572
    },
    {
        "content": "<p>I think it is still useful to add a finite instance as well. This now fails:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 453975898,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1721920647
    },
    {
        "content": "<p>As you wish<br>\nI think that my proof of Finite (Option T) is a bit long though</p>",
        "id": 453976104,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1721920700
    },
    {
        "content": "<p>You should be reusing the existing <code>Fintype</code> instance. Or use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=finSuccEquiv#doc\">docs#finSuccEquiv</a> + <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Equiv.optionCongr#doc\">docs#Equiv.optionCongr</a> .<br>\nBut this works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">T</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">T</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">ofFinite</span><span class=\"w\"> </span><span class=\"n\">T</span>\n<span class=\"w\">  </span><span class=\"n\">inferInstance</span>\n\n<span class=\"bp\">#</span><span class=\"n\">min_imports</span><span class=\"w\"> </span><span class=\"c1\">-- Mathlib.Data.Fintype.Option</span>\n</code></pre></div>\n<p>Please PR this!</p>",
        "id": 453977172,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1721920940
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"658705\">Thomas Vigouroux</span> has marked this topic as unresolved.</p>",
        "id": 453977601,
        "sender_full_name": "Notification Bot",
        "timestamp": 1721921023
    },
    {
        "content": "<p>Will do !</p>",
        "id": 453977616,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1721921025
    },
    {
        "content": "<p>Will do !</p>",
        "id": 453977662,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1721921031
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"658705\">@Thomas Vigouroux</span> that's one reason why we don't encourage resolving topics -- it can break stuff :-) But the option is there and can't be switched off so basically it seems to be a hopeless cause.</p>",
        "id": 453980728,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721921582
    },
    {
        "content": "<p>Sorry about that !</p>",
        "id": 453980949,
        "sender_full_name": "Thomas Vigouroux",
        "timestamp": 1721921634
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> has marked this topic as unresolved.</p>",
        "id": 453991418,
        "sender_full_name": "Notification Bot",
        "timestamp": 1721924075
    }
]