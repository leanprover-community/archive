[
    {
        "content": "<p>I think the following is a diamond: </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.RingTheory.DedekindDomain.Instances</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsDedekindDomain</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">p.IsPrime</span><span class=\"o\">]</span>\n\n<span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"kd\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"Rₚ\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Localization.AtPrime</span><span class=\"w\"> </span><span class=\"n\">p</span>\n\n<span class=\"kd\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FaithfulSMul</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">Rₚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">OreLocalization.instAlgebra</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">Rₚ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FractionRing</span><span class=\"w\"> </span><span class=\"n\">Rₚ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">instAlgebraAtPrimeFractionRing</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">Rₚ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">FractionRing</span><span class=\"w\"> </span><span class=\"n\">Rₚ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n</code></pre></div>\n<p>Note that the instance that says that <code>FaithfulSMul R Rₚ</code> is not in Mathlib yet but it is direct to prove (it is proved in <a href=\"https://github.com/leanprover-community/mathlib4/pull/27152\">#27152</a> for example).</p>",
        "id": 532252036,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1754035781
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=instAlgebraAtPrimeFractionRing#doc\">docs#instAlgebraAtPrimeFractionRing</a> should probably be an abbrev just like <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Localization/FractionRing.html#FractionRing.liftAlgebra\">FractionRing.liftAlgebra</a></p>",
        "id": 532256437,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1754037232
    },
    {
        "content": "<p>Is this related to <a href=\"https://github.com/leanprover-community/mathlib4/pull/21344\">#21344</a> ? Just mentioning it because this is definitely a diamond in OreLocalization</p>",
        "id": 532473824,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1754156144
    },
    {
        "content": "<p>Oh no that looks like something different, it's Int-specific</p>",
        "id": 532473886,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1754156201
    },
    {
        "content": "<p>I am pinging <span class=\"user-mention\" data-user-id=\"130384\">@Riccardo Brasca</span> who added <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=instAlgebraAtPrimeFractionRing#doc\">docs#instAlgebraAtPrimeFractionRing</a>. Riccardo, should we change this instance into an abbrev?</p>",
        "id": 534824233,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1755437812
    },
    {
        "content": "<p>Oh yes, why not!</p>",
        "id": 534826977,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1755440816
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/28551\">#28551</a></p>",
        "id": 534830717,
        "sender_full_name": "Xavier Roblot",
        "timestamp": 1755445479
    },
    {
        "content": "<p>I am very busy with non lean things, but feel free to ask my review</p>",
        "id": 534830840,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1755445644
    }
]