[
    {
        "content": "<p>I met the following situation:<br>\nfor<code>ModuleCat.RestrictScalars</code> we have it is left/right adjoint when the universe is of the form <code>max _ _</code> one is the universe of the ring.<br>\nHowever, for only exactness, it is true for arbitrary universe, the problem here is that when trying to synthize <code>Limits.PreservesFiniteLimits</code> and <code>Limits.PreservesFiniteColimits</code>, it tried to synth adjoint first.<br>\nI want to stop it and use the instance  I wrote, what should I do?</p>",
        "id": 565682486,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1767019993
    },
    {
        "content": "<p>Currently I raised the priority of the instance I wrote to high, but it can't be a private instance any more.</p>",
        "id": 565682572,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1767020029
    },
    {
        "content": "<p>This only appeared in the recent 300 commits, do anyone know what caused this? (This may hint a bad instance design)</p>",
        "id": 565683102,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1767020243
    },
    {
        "content": "<p>Naive suggestion: Can you bisect?</p>",
        "id": 565683361,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1767020352
    },
    {
        "content": "<p>Sorry, what do you mean by bisect?</p>",
        "id": 565684102,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1767020587
    },
    {
        "content": "<p>You know that you get the problem commit on commit N, but not on commit N - 300. Do you get it on commit N - 150 ?</p>",
        "id": 565684718,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1767020776
    },
    {
        "content": "<p>OK, let me try.</p>",
        "id": 565685706,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1767021081
    },
    {
        "content": "<p>Just in case, don't do it manually, there is a git tool for that. docs: <a href=\"https://git-scm.com/docs/git-bisect\">https://git-scm.com/docs/git-bisect</a></p>",
        "id": 565688236,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1767022186
    },
    {
        "content": "<p>I think I may got the problem wrong? It is somehow related to private instance? Is it different from the old one in module system? But it works on 12.18, very strange.</p>",
        "id": 565694517,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1767025210
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"942100\">Alfredo Moreira-Rosa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/instance.20for.20exact.20functor/near/565688236\">說</a>：</p>\n<blockquote>\n<p>Just in case, don't do it manually, there is a git tool for that. docs: <a href=\"https://git-scm.com/docs/git-bisect\">https://git-scm.com/docs/git-bisect</a></p>\n</blockquote>\n<p>Sorry that I still not know how to use it, I'll try tomorrow. I currently tried to debug dircetly, but found nothing.</p>",
        "id": 565695564,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1767025792
    },
    {
        "content": "<p>If you are working directly on mathlib, you need to start by doing (on a terminal, command line):</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>git<span class=\"w\"> </span>bisect<span class=\"w\"> </span>start\ngit<span class=\"w\"> </span>bisect<span class=\"w\"> </span>bad\ngit<span class=\"w\"> </span>bisect<span class=\"w\"> </span>good<span class=\"w\"> </span>&lt;commit<span class=\"w\"> </span>or<span class=\"w\"> </span>tag<span class=\"w\"> </span>where<span class=\"w\"> </span>it<span class=\"w\"> </span>was<span class=\"w\"> </span>still<span class=\"w\"> </span>good&gt;\n</code></pre></div>\n<p>After that, git choose the middle commit between those.<br>\nYou need to rebuild Mathlib (can take a lot of time) :</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>lake<span class=\"w\"> </span>build\n</code></pre></div>\n<p>if build fails (because git choose a commit version that don't build, do :</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">bisect</span><span class=\"w\"> </span><span class=\"n\">skip</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n</code></pre></div>\n<p>Then if build pass, test your feature. if your test still fails, do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">bisect</span><span class=\"w\"> </span><span class=\"n\">bad</span>\n</code></pre></div>\n<p>else</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">bisect</span><span class=\"w\"> </span><span class=\"n\">good</span>\n</code></pre></div>\n<p>it will continue checking out a new commit.<br>\nrepeat the process (rebuild mathlib, test, mark good or bad) until git tells you it found the culprit commit. (for 300 commits that's at most 8 times).<br>\nSo it's not an easy process. Because you will need to rebuild mathlib.</p>",
        "id": 565700533,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1767028379
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"942100\">Alfredo Moreira-Rosa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/instance.20for.20exact.20functor/near/565700533\">said</a>:</p>\n<blockquote>\n<p>You need to rebuild Mathlib (can take a lot of time) :</p>\n<p><div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>lake<span class=\"w\"> </span>build\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Shouldn't <code>lake exe cache get</code> work for this?</p>",
        "id": 565700612,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767028426
    },
    {
        "content": "<p>if you don't want to wait hours for mathlib to build</p>",
        "id": 565700664,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767028453
    },
    {
        "content": "<p>I'm not sure there exists a cache for each commit, but i may be wrong, never tried.</p>",
        "id": 565700797,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1767028533
    },
    {
        "content": "<p>Sure there's a cache for each commit</p>",
        "id": 565702077,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1767029166
    }
]