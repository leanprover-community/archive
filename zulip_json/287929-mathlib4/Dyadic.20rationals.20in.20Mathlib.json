[
    {
        "content": "<p>We have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Dyadic#doc\">docs#Dyadic</a> in core, and we use this same type in the CGT repo (as of a few minutes ago, thanks to <a href=\"https://github.com/vihdzp/combinatorial-games/pull/320\">CGT#320</a>). There is currently nothing in Mathlib about dyadic rationals, so we had to build stuff like the <code>CommRing</code> instance from scratch. Would this material he desirable for Mathlib upstreaming?</p>\n<p>I believe <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> said some months ago we should keep this in our repo. But after another thread recently popped up asking about this I'd like to know if that's still our stance.</p>",
        "id": 570676168,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1769641370
    },
    {
        "content": "<p><a href=\"#narrow/channel/113489-new-members/topic/Dyadic.20numbers/with/570410683\">https://leanprover.zulipchat.com/#narrow/channel/113489-new-members/topic/Dyadic.20numbers/with/570410683</a></p>",
        "id": 570676221,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1769641400
    },
    {
        "content": "<p>There's a <code>Lean.Grind.CommRing</code> instance for <code>Dyadic</code>. Just write the conversion function from <code>Lean.Grind.CommRing</code> to <code>(Mathlib.)CommRing</code>, and build the instance using that. Working from scratch is duplicative.</p>",
        "id": 570676316,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769641457
    },
    {
        "content": "<p>I would argue that mathlib should provide <code>CommRing</code> instances for every type that core provides, assuming the ring structure is canonical</p>",
        "id": 570676346,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1769641477
    },
    {
        "content": "<p>But indeed deriving it from the grind structure to avoid repetition makes sense</p>",
        "id": 570676388,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1769641500
    },
    {
        "content": "<p>Are there any future plans to merge these two algebraic hierarchies we now have?</p>",
        "id": 570676436,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1769641528
    },
    {
        "content": "<p>No.</p>",
        "id": 570676445,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769641532
    },
    {
        "content": "<p>They intentionally serve different purposes.</p>",
        "id": 570676462,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769641540
    },
    {
        "content": "<p>I don't see the <code>Lean.Grind.CommRing</code> instance that Kim describes in the docs; maybe it's not in 4.27.0</p>",
        "id": 570676492,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1769641555
    },
    {
        "content": "<p><code>Lean.Grind.*</code> is unapologetically an internal library optimized for the needs of <code>grind</code>.</p>",
        "id": 570676549,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769641584
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Dyadic.20rationals.20in.20Mathlib/near/570676492\">said</a>:</p>\n<blockquote>\n<p>I don't see the instance that Kim describes in the docs</p>\n</blockquote>\n<p><code>Init.Data.Dyadic.Instances</code></p>",
        "id": 570676570,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769641594
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Dyadic/Instances.html\">https://leanprover-community.github.io/mathlib4_docs/Init/Data/Dyadic/Instances.html</a> is blank, perhaps the docs are stale</p>",
        "id": 570676671,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1769641650
    },
    {
        "content": "<p>Mathlib should definitely not provide an instance converting from <code>Lean.Grind.X</code> to <code>(Mathlib.)X</code>, just a def. But then it's fine for <em>individual types</em> such as <code>Dyadic</code> to use that <code>def</code> to build an instance.</p>",
        "id": 570676675,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769641653
    },
    {
        "content": "<p>Sorry, I don't use the Mathlib docs...</p>",
        "id": 570676717,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769641671
    },
    {
        "content": "<p>What do you use instead?</p>",
        "id": 570676775,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1769641703
    },
    {
        "content": "<p>What about theorems such as <code>IsLocalization (powers 2) Dyadic</code>? Do those belong in Mathlib?</p>",
        "id": 570676895,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1769641786
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Dyadic.20rationals.20in.20Mathlib/near/570676671\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Dyadic/Instances.html\">https://leanprover-community.github.io/mathlib4_docs/Init/Data/Dyadic/Instances.html</a> is blank, perhaps the docs are stale</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span>, this looks like it might be a doc-gen bug to me; the page exists and the source link leads to a file that contains what Kim says, but the declarations are missing from the HTML</p>",
        "id": 570677190,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1769641981
    },
    {
        "content": "<p>they're all private</p>",
        "id": 570677261,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1769642017
    },
    {
        "content": "<p>See <a href=\"https://github.com/leanprover/lean4/pull/12199\">lean4#12199</a></p>",
        "id": 570677333,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1769642057
    },
    {
        "content": "<p>not a docgen bug</p>",
        "id": 570677374,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1769642075
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Dyadic.20rationals.20in.20Mathlib/near/570676775\">said</a>:</p>\n<blockquote>\n<p>What do you use instead?</p>\n</blockquote>\n<p>I just grep in the sources (or more often these days, just ask Claude to find/explain something).</p>",
        "id": 570697278,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769655900
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Dyadic.20rationals.20in.20Mathlib/near/570676895\">said</a>:</p>\n<blockquote>\n<p>What about theorems such as <code>IsLocalization (powers 2) Dyadic</code>? Do those belong in Mathlib?</p>\n</blockquote>\n<p>Yes.</p>",
        "id": 570697347,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769655960
    },
    {
        "content": "<p>Is there a reason <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Dyadic.toRat#doc\">docs#Dyadic.toRat</a> isn't registered as a coercion?</p>",
        "id": 570716898,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1769669802
    },
    {
        "content": "<p>I wrote <code>Dyadic</code> initially for internal use (when interval arithmetic was higher on our roadmap), and coercions didn't seem helpful.</p>",
        "id": 570731544,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1769675468
    }
]