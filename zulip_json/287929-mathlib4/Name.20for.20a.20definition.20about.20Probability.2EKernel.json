[
    {
        "content": "<p>What should we name the following kernels, defined in <a href=\"https://github.com/leanprover-community/mathlib4/pull/15466\">#15466</a>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Define a `Kernel α γ` from a `Kernel (α × β) γ` by taking the comap of `fun a ↦ (a, b)` for</span>\n<span class=\"sd\"> a given `b : β`. -/</span>\n<span class=\"w\"> </span><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fst'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Kernel</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Kernel</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">   </span><span class=\"n\">comap</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">measurable_id</span><span class=\"bp\">.</span><span class=\"n\">prod_mk</span><span class=\"w\"> </span><span class=\"n\">measurable_const</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- Define a `Kernel β γ` from a `Kernel (α × β) γ` by taking the comap of `fun b ↦ (a, b)` for</span>\n<span class=\"sd\"> a given `a : α`. -/</span>\n<span class=\"w\"> </span><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">snd'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Kernel</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Kernel</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">   </span><span class=\"n\">comap</span><span class=\"w\"> </span><span class=\"n\">κ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">measurable_const</span><span class=\"bp\">.</span><span class=\"n\">prod_mk</span><span class=\"w\"> </span><span class=\"n\">measurable_id</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>The names <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Probability/Kernel/Composition.html#ProbabilityTheory.Kernel.fst\"><code>Kernel.fst</code></a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Probability/Kernel/Composition.html#ProbabilityTheory.Kernel.snd\"><code>Kernel.snd</code></a> are already used for the cases where the codomain is a product space, while here we have a product in the domain.</p>\n<p>An idea from <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span> is to take inspiration from <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Logic/Embedding/Basic.html#Function.Embedding.sectl\">Function.Embedding.sectl</a> or <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Prod.html#MonoidHom.inl\">MonoidHom.inl</a>.</p>\n<p>Any other suggestions?</p>",
        "id": 472207828,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1727092446
    },
    {
        "content": "<p>Perhaps <code>left</code> and <code>right</code>?</p>",
        "id": 472208794,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1727092702
    },
    {
        "content": "<p><code>sectl</code> would rather be the name of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ProbabilityTheory.Kernel.fst#doc\">docs#ProbabilityTheory.Kernel.fst</a>, right?</p>",
        "id": 472208972,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727092751
    },
    {
        "content": "<p>I think the current <code>Kernel.fst</code> and <code>Kernel.snd</code> are misnamed</p>",
        "id": 472209045,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727092775
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Name.20for.20a.20definition.20about.20Probability.2EKernel/near/472209045\">ha scritto</a>:</p>\n<blockquote>\n<p>I think the current <code>Kernel.fst</code> and <code>Kernel.snd</code> are misnamed</p>\n</blockquote>\n<p>I think the way those names are intended is that <code>Kernel.fst</code> and <code>Kernel.snd</code> correspond to taking the first and second marginals of the measures produced by the kernel.</p>",
        "id": 472212206,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1727093544
    },
    {
        "content": "<p>Would <code>mk_left</code> and <code>mk_right</code> be suitable to this situation?</p>",
        "id": 472212817,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1727093697
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Name.20for.20a.20definition.20about.20Probability.2EKernel/near/472208972\">ha scritto</a>:</p>\n<blockquote>\n<p><code>sectl</code> would rather be the name of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ProbabilityTheory.Kernel.fst#doc\">docs#ProbabilityTheory.Kernel.fst</a>, right?</p>\n</blockquote>\n<p>To me <code>sectl</code> seems closer to <code>fst'</code> than to <code>fst</code>, because it needs an element of the second space to be fixed in order to only consider the variable from the first space, while <code>fst</code> does not need one.</p>",
        "id": 472214589,
        "sender_full_name": "Lorenzo Luccioli",
        "timestamp": 1727094153
    }
]