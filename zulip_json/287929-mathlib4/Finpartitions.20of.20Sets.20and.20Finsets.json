[
    {
        "content": "<p>Hi,<br>\nrecently I was trying to do somethings with Finpartions of Sets. I found the <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finpartition.part#doc\">docs#Finpartition.part</a> operation which returns the part of the finset that a certain element lies in. I was a bit disappointed when I realized that this is only defined for Finpartitions of Finsets. So I got to work trying to replicate the Finpartitions of Finsets Api for Finpartitions of Sets. <br>\nBut most of the lemmas are essentially the same. For example this one:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">subset</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">parts</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"bp\">.</span><span class=\"n\">le</span><span class=\"w\"> </span><span class=\"n\">ha</span>\n</code></pre></div>\n<p>(This is a bit of a handwavy question, but) is there a way to state such a lemma once and get it for sets and finsets?</p>\n<p>My second question is, how should I do the naming (without messing up the existing Api too much). For example the Finpartition.part Function is needed for both Finsets and Sets, but is slightly different, because it uses a different choice function. Do you have any advice how I can do this? (Or should I ask more concretly for the specific instances of my question?)</p>",
        "id": 523826522,
        "sender_full_name": "Christian Krause",
        "timestamp": 1749759714
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span> I think I saw a <a href=\"#narrow/channel/217875-Is-there-code-for-X.3F/topic/Partitions.20of.20a.20set\">Zulip Post</a> from 2023 of you talking about the Finpartition of Finset API but that ended quite abruptly.</p>",
        "id": 523878601,
        "sender_full_name": "Christian Krause",
        "timestamp": 1749795601
    },
    {
        "content": "<p>I don't have good answers here, sorry! The only satisfying way out is IMO to abstract out the order relation between <code>α</code> and <code>Set α</code>/<code>Finset α</code>, ie the former indexes atoms of the latter two.</p>",
        "id": 523880301,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1749796571
    },
    {
        "content": "<p>I tried to do this but this generality has a bunch of drawbacks. I am mainly interested in getting <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finpartition.part#doc\">docs#Finpartition.part</a> for Finpartitions of Sets. Finpartition.part for Finsets is defined using Finset.choose, which would have to be classical.choose for sets (I think). Or am I missing something which would make it possible to abstract this out without having to using classical even for finsets?</p>",
        "id": 529794875,
        "sender_full_name": "Christian Krause",
        "timestamp": 1753085515
    },
    {
        "content": "<p>(I am realizing that I don't fully understand how to \"turn on\" classical selectively, where can I read up on this?)</p>",
        "id": 529801929,
        "sender_full_name": "Christian Krause",
        "timestamp": 1753086686
    }
]