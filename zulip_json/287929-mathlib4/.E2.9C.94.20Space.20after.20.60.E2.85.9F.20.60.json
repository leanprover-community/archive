[
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Invertible#doc\">docs#Invertible</a> has notation</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">prefix</span><span class=\"o\">:</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"s2\">\"⅟ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Invertible</span><span class=\"bp\">.</span><span class=\"n\">invOf</span>\n</code></pre></div>\n<p>which implies that it pretty-prints with a space after <code>⅟</code>: hence <code>⅟ 2</code> appears preferred to <code>⅟2</code>, for instance.</p>",
        "id": 528308924,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752229903
    },
    {
        "content": "<p>Reviewing <a href=\"https://github.com/leanprover-community/mathlib4/pull/26963\">#26963</a>, Eric suggested that this is not what it should be.</p>",
        "id": 528308933,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752229907
    },
    {
        "content": "<p>I am personally somewhat indifferent, but the <code>commandStart</code> linter may enforce the presence or not of a space.</p>",
        "id": 528308945,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752229911
    },
    {
        "content": "<p>What do you think of the space, should it be there or not?</p>\n<p>Vote <span aria-label=\"plus\" class=\"emoji emoji-2795\" role=\"img\" title=\"plus\">:plus:</span> if you are in favour of <em>adding</em> the space, vote <span aria-label=\"minus\" class=\"emoji emoji-2796\" role=\"img\" title=\"minus\">:minus:</span> if you are in favour of <em>removing</em> the space.</p>",
        "id": 528309060,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752229954
    },
    {
        "content": "<p>For what it's worth, the lean 3 source code is written as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- This notation has the same precedence as `has_inv.inv`.</span>\n<span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"bp\">`⅟`</span><span class=\"o\">:</span><span class=\"mi\">1034</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">invertible</span><span class=\"bp\">.</span><span class=\"n\">inv_of</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">inv_of_mul_self</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">has_mul</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">has_one</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">invertible</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">⅟</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"n\">invertible</span><span class=\"bp\">.</span><span class=\"n\">inv_of_mul_self</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">mul_inv_of_self</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">has_mul</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">has_one</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">invertible</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">⅟</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"n\">invertible</span><span class=\"bp\">.</span><span class=\"n\">mul_inv_of_self</span>\n</code></pre></div>",
        "id": 528310718,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1752230494
    },
    {
        "content": "<p>So I think the addition of the space to give the <code>⅟ a</code> spelling was a porting accident</p>",
        "id": 528310794,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1752230521
    },
    {
        "content": "<p>I would similarly expect <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>a</mi><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding=\"application/x-tex\">a^{-1}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span></span> not to look like <code>a ⁻¹</code> (and also <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo stretchy=\"false\">!</mo></mrow><annotation encoding=\"application/x-tex\">n!</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">!</span></span></span></span> not to look like <code>n !</code> but that's a different story)</p>",
        "id": 528318329,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1752233271
    },
    {
        "content": "<p>I've created <a href=\"https://github.com/leanprover-community/mathlib4/pull/26997\">#26997</a> with the fix, but let's wait for a few more votes just in case.</p>",
        "id": 528319032,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1752233544
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Notation.html#%C2%ABterm_%E2%81%BB%C2%B9%C2%BB\">docs#«term_⁻¹»</a> indeed does <em>not</em> have a space, so it prefers <code>a⁻¹</code> over <code>a ⁻¹</code>.</p>",
        "id": 528319867,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752233889
    },
    {
        "content": "<p>I delegated the PR above, since the vote is looking pretty clearly in favor of not having a space in <code>⅟a</code>.</p>",
        "id": 528335842,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1752239002
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> has marked this topic as resolved.</p>",
        "id": 528374357,
        "sender_full_name": "Notification Bot",
        "timestamp": 1752251849
    }
]