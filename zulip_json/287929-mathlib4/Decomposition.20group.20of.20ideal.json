[
    {
        "content": "<p>Greetings! I was thinking about using decomposition group, </p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>D</mi><mi mathvariant=\"fraktur\">p</mi></msub><mo>:</mo><mo>=</mo><mo stretchy=\"false\">{</mo><mi>σ</mi><mo>∈</mo><mi>G</mi><mi>a</mi><mi>l</mi><mo stretchy=\"false\">(</mo><mi>K</mi><mi mathvariant=\"normal\">/</mi><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">)</mo><mo>∣</mo><mi>σ</mi><mo stretchy=\"false\">(</mo><mi mathvariant=\"fraktur\">p</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi mathvariant=\"fraktur\">p</mi><mo stretchy=\"false\">}</mo></mrow><annotation encoding=\"application/x-tex\">D_{\\mathfrak{p}} := \\{ \\sigma \\in Gal(K/\\mathbb{Q}) \\mid \\sigma(\\mathfrak{p}) = \\mathfrak{p}\\}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9657em;vertical-align:-0.2823em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2168em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathfrak mtight\">p</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2823em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">{</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mord\">/</span><span class=\"mord mathbb\">Q</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∣</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mopen\">(</span><span class=\"mord mathfrak\">p</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathfrak\">p</span><span class=\"mclose\">}</span></span></span></span></span></p>\n<p>and I found <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Valuation/RamificationGroup.html#ValuationSubring.decompositionSubgroup\">ValuationSubring.decompositionSubgroup</a>, but it is defined with respect to valuation subring rather than ideal. So I wonder what's the connection between them? Thanks in advance!</p>",
        "id": 466205934,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1725008819
    },
    {
        "content": "<p>I'm not entirely sure if the connection is built in mathlib. Pinging some people who will know: <span class=\"user-mention\" data-user-id=\"406490\">@María Inés de Frutos Fernández</span> <span class=\"user-mention\" data-user-id=\"300245\">@Filippo A. E. Nuccio</span> <span class=\"user-mention\" data-user-id=\"611077\">@Jiang Jiedong</span> <span class=\"user-mention\" data-user-id=\"243562\">@Adam Topaz</span></p>",
        "id": 466211287,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725010180
    },
    {
        "content": "<p>2 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"217875\" href=\"/#narrow/stream/217875-Is-there-code-for-X.3F/topic/kronecker-weber\">#Is there code for X? &gt; kronecker-weber</a> by <span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span>.</p>",
        "id": 466211469,
        "sender_full_name": "Notification Bot",
        "timestamp": 1725010212
    },
    {
        "content": "<p>Let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi mathvariant=\"normal\">/</mi><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">L/K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> be an extension of fields and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span> be a valuation subring of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi></mrow><annotation encoding=\"application/x-tex\">L</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">L</span></span></span></span>. As in mathlib, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Valuation/RamificationGroup.html#ValuationSubring.decompositionSubgroup\">ValuationSubring.decompositionSubgroup</a> is defined as the stabilizer of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span>. This is the same as the stabilizer of the maximal ideal <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">m</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">m</span></span></span></span> of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span>. </p>\n<p>So it is the same with <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi mathvariant=\"fraktur\">p</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_\\frak{p}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9657em;vertical-align:-0.2823em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2168em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathfrak mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2823em;\"><span></span></span></span></span></span></span></span></span></span> when <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span> is the localization of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi mathvariant=\"script\">O</mi><mi>K</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mathcal{O}_K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.02778em;\">O</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> with respect to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"fraktur\">p</mi></mrow><annotation encoding=\"application/x-tex\">\\frak{p}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.713em;vertical-align:-0.1891em;\"></span><span class=\"mord mathfrak\">p</span></span></span></span>.</p>",
        "id": 466213882,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1725010718
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"611077\">@Jiang Jiedong</span> But do we have a way of turning that localization into a bundled-up valuation subring?</p>",
        "id": 466214811,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725010931
    },
    {
        "content": "<p>As far as I know, there isn't such a direct function in mathlib...</p>",
        "id": 466216672,
        "sender_full_name": "Jiang Jiedong",
        "timestamp": 1725011211
    },
    {
        "content": "<p>oh, I see, many thanks!</p>",
        "id": 466218122,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1725011461
    },
    {
        "content": "<p>At the very least you can get a valuation from the prime ideal, then convert the valuation to a valuation sub ring.</p>",
        "id": 466262920,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1725022635
    },
    {
        "content": "<p>The main steps to achieve this are</p>\n<ol>\n<li>Create a term of the prime spectrum (see <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsDedekindDomain.HeightOneSpectrum#doc\">docs#IsDedekindDomain.HeightOneSpectrum</a>) attached to your prime ideal.</li>\n<li>Use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsDedekindDomain.HeightOneSpectrum.valuation#doc\">docs#IsDedekindDomain.HeightOneSpectrum.valuation</a> to get the valuation attached to the ideal seen as an element of the spectrum</li>\n<li>The declaration <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Valuation.valuationSubring#doc\">docs#Valuation.valuationSubring</a> provides the valuation subring associated to a Valuation.</li>\n</ol>",
        "id": 466283802,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1725029023
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Decomposition.20group.20of.20ideal/near/466283802\">发言道</a>：</p>\n<blockquote>\n<p>The main steps to achieve this are</p>\n<ol>\n<li>Create a term of the prime spectrum (see <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsDedekindDomain.HeightOneSpectrum#doc\">docs#IsDedekindDomain.HeightOneSpectrum</a>) attached to your prime ideal.</li>\n<li>Use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsDedekindDomain.HeightOneSpectrum.valuation#doc\">docs#IsDedekindDomain.HeightOneSpectrum.valuation</a> to get the valuation attached to the ideal seen as an element of the spectrum</li>\n<li>The declaration <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Valuation.valuationSubring#doc\">docs#Valuation.valuationSubring</a> provides the valuation subring associated to a Valuation.</li>\n</ol>\n</blockquote>\n<p>Wow, thats very clear, thank you!</p>",
        "id": 466801527,
        "sender_full_name": "Suzuka Yu",
        "timestamp": 1725246058
    },
    {
        "content": "<p>I have formalized the decomposition group in the case of Galois extensions of number fields, you can see the code <a href=\"https://github.com/jjdishere/neukirch/blob/master/AlgebraicNumberTheory/AlgebraicIntegersPart2/HilbertRamificationTheory.lean#L794\">here</a>. I will try to submit PRs to incorporate them into the Mathlib library later.</p>",
        "id": 470334122,
        "sender_full_name": "Yongle Hu",
        "timestamp": 1726406001
    }
]