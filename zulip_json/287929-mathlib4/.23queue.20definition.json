[
    {
        "content": "<p>Prompted by <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard\">this thread</a>, I just compared the definition of the review queue in <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> and the <a href=\"https://jcommelin.github.io/queueboard/index.html\">prototype dashboard</a>. I noticed a few discrepancies. With some of them, the best resolution is not obvious to <em>me</em>. Can we converge on <em>one</em> definition?</p>\n<ul>\n<li>the <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> also excludes the ready-to-merge label: clear improvement, adapted the prototype <span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span></li>\n<li>\n<p>the <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> requires passing CI now <code>status:success</code>, as opposed to \"not failing\"<br>\nI presume that was changed recently. Personal opinion: I can get by that change, and will adapt the queueboard instead. <span aria-label=\"check\" class=\"emoji emoji-2705\" role=\"img\" title=\"check\">:check:</span> </p>\n</li>\n<li>\n<p>the <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> filters for all PRs based on the master branch <code>base:master</code><br>\nI also recall that as different, some time ago, so probably also a recent change.<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pulls?q=is%3Apr+is%3Aopen+-base%3Amaster\">Here are the PRs</a> excluded by imposing this filter. I'm not as certain about this change --- can somebody explain the context to me (or assertive tell me \"we have thought about this hard and this is better)?</p>\n</li>\n<li>\n<p>the prototype proposes also excluding PRs labelled <code>awaiting-zulip</code>. I think this is sensible -&gt; can <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> be adapted?</p>\n</li>\n<li>the prototype is in two minds about PRs labelled <code>help-wanted</code> or <code>please-adopt</code>.<br>\nI'm interested in opinions about this combination. Should this be considered awaiting-review?</li>\n</ul>",
        "id": 472162201,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727079672
    },
    {
        "content": "<p>A related request: if the definition of <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> is changed, can somebody ping me so the dashboard can be updated as well? That probably takes no time, but is much easier than debugging the differences later. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 472162324,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727079716
    },
    {
        "content": "<ul>\n<li>Agreed this is an improvement</li>\n<li>Agreed this is an improvement</li>\n<li>I think non-master PRs should be a separate page on the dashboard, since they are so specialised in who can review them (they are bump PRs mostly, right?). I think the same reasoning means they shouldn't be on the <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>, but I could be convinced otherwise</li>\n<li>Agreed, we should exclude <code>awaiting-zulip</code> from the <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>.</li>\n<li>I think <code>help-wanted</code> and <code>please-adopt</code> should be one separate page on the dashboard, and I think they can be lumped together into one page since the outcome of either label is mostly the same: Someone pushes a few commits to the branch</li>\n</ul>",
        "id": 472178128,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727084177
    },
    {
        "content": "<p>Any maintainer should be able to update <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>, access and account details in the usual place. Feel free to ping me if you're trying to do this and run into trouble.</p>",
        "id": 472182239,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727085339
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.23queue.20definition/near/472178128\">said</a>:</p>\n<blockquote>\n<ul>\n<li>I think the same reasoning means they shouldn't be on the <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>, but I could be convinced otherwise</li>\n</ul>\n</blockquote>\n<p>I think maybe the presence of the <code>RFC</code> tag should override a weird base branch.</p>",
        "id": 472205573,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727091885
    },
    {
        "content": "<p>That is: <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> will continue to exclude PRs with a non-standard base branch; the review dashboard may include non-master PRs labelled with RFC. Sounds good to me!</p>",
        "id": 472211762,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727093438
    },
    {
        "content": "<p>There is a <a href=\"https://jcommelin.github.io/queueboard/index.html#needs-owner\">dashboard</a> for all PRs labelled needs-help or please-adopt already.</p>",
        "id": 472212024,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727093506
    },
    {
        "content": "<p>To summarize the changes proposed:</p>\n<ul>\n<li>awaiting-zulip PRs are removed from <a href=\"https://bit.ly/3Ymuh0U\">#queue</a></li>\n<li>I propose removing please-adopt and help-wanted also; these are tracked separately already</li>\n<li>the dashboard is updated regarding the base branch</li>\n</ul>",
        "id": 472212418,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727093599
    },
    {
        "content": "<p>Any additions or objections? If I don't hear any today, I will make the dashboard changes - and would like help from an admin to update <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>.</p>",
        "id": 472212559,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727093636
    },
    {
        "content": "<p>I think there are two types of PRs that use non-master branches as base:</p>\n<ul>\n<li>The (almost daily) nightly bumping PRs. In this case, anyone can review, but in practice it is done by a handful of reviewers/maintainers.</li>\n<li>Someone does an extensive review of a PR and proposes a rather large refactor in the form of a PR on top of the PR that was reviewed. In this it is basically only the original PR author who can do the review.</li>\n</ul>",
        "id": 472242436,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1727100358
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.23queue.20definition/near/472242436\">said</a>:</p>\n<blockquote>\n<ul>\n<li>The (almost daily) nightly bumping PRs. In this case, anyone can review, but in practice it is done by a handful of reviewers/maintainers.</li>\n</ul>\n</blockquote>\n<p>That said, we would appreciate more eyes on these, both for the immediate gain of catching more mistakes, and the long term gain of sustainably keeping Mathlib up to date.</p>",
        "id": 472354711,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727134606
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.23queue.20definition/near/472242436\">said</a>:</p>\n<blockquote>\n<p>I think there are two types of PRs that use non-master branches as base:</p>\n</blockquote>\n<p>There's a third type I've done which is \"I've made a change to lean that enables n experiments, and each of those will use the same custom lean toolchain\"</p>",
        "id": 472355528,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727134983
    },
    {
        "content": "<p>In fact, pretty much every \"here's a patch to mathlib that goes with an open core PR\" PR fits this description</p>",
        "id": 472355587,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1727135017
    },
    {
        "content": "<p>Thanks for the input. I'll update the dashboard when I have time.<br>\nCan a maintainer update <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> to also filter for \"none of the labels awaiting-review, please-adopt and help-wanted\", please? <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span></p>",
        "id": 472536952,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727197265
    },
    {
        "content": "<p>I just updated the prototype dashboard's definitions accordingly. If all goes well, there will be updated definitions and a new dashboard in 10mins.</p>",
        "id": 472558759,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727205508
    },
    {
        "content": "<p>I have decided to <em>not</em> add \"PRs with the RFC tag to a non-master branch\" to the queue: upon re-reading this thread, these appear rather uncommon. (RFC PRs against master <em>do</em> show up in the queue, in principle.)</p>",
        "id": 472558932,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727205593
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.23queue.20definition/near/472536952\">said</a>:</p>\n<blockquote>\n<p>Thanks for the input. I'll update the dashboard when I have time.<br>\nCan a maintainer update <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> to also filter for \"none of the labels awaiting-review, please-adopt and help-wanted\", please? <span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span></p>\n</blockquote>\n<p>Do any other maintainers know how to do this? (cf bitly account details in the usual place) It would be great if someone could take it on.</p>",
        "id": 473439652,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1727608580
    },
    {
        "content": "<p>I will try to do this later today. (feel free to ping me if it seems like I forgot)</p>",
        "id": 473444328,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1727612587
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/287929-mathlib4/topic/.23queue.20definition/near/472536952\">said</a>:</p>\n<blockquote>\n<p>Thanks for the input. I'll update the dashboard when I have time.<br>\nCan a maintainer update <a href=\"https://bit.ly/3TJI3Yo\">#queue</a> to also filter for \"none of the labels awaiting-review, please-adopt and help-wanted\", please? <span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span></p>\n</blockquote>\n<p><code>awaiting-review</code> no longer exists, so I didn't add it, but I have added <code>-label:please-adopt</code> and <code>-label:help-wanted</code> to the <a href=\"https://bit.ly/3TJI3Yo\">#queue</a> URL</p>\n<p><strong>edit</strong>: Note that the URL has changed, so previous <a href=\"https://bit.ly/3TJI3Yo\">#queue</a> links in Zulip will still point to the old versions of the queue.</p>",
        "id": 473489297,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1727642679
    },
    {
        "content": "<p>Thanks! Sorry for the typo, I meant <code>awaiting-zulip</code> <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span></p>",
        "id": 473630304,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727682604
    },
    {
        "content": "<p>Done! <a href=\"https://bit.ly/4eo6brN\">#queue</a></p>",
        "id": 473633957,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1727683462
    },
    {
        "content": "<p>Working on the queueboard exposed another small bug in the definition of <code>#queue</code>: its query should also contain <code>-label:blocked-by-batt-PR -label:blocked-by-core-PR -label:blocked-by-qq-PR</code>, but currently doesn't.<br>\nThis means <a href=\"https://github.com/leanprover-community/mathlib4/pull/17011\">#17011</a> would (except for the merge conflict it currently has) be on the queue, but it should clearly be marked as <em>blocked</em> instead. Would somebody (e.g. <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> like to update the definition)? Thanks!</p>",
        "id": 477997205,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729500843
    },
    {
        "content": "<p><a href=\"https://bit.ly/4eIDoOJ\">#queue</a>  should be updated now, I think.</p>",
        "id": 478096383,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1729526263
    },
    {
        "content": "<p>Sorry for a basic question, but what is <a href=\"https://bit.ly/4eIDoOJ\">#queue</a>? I mean, I see that it contains some PRs and not others, and it consists of a bunch of filters. But in plain English, what does this queue represent? E.g. PRs to be reviewed, or PRs ready to be merged, or something else entirely.</p>",
        "id": 491369300,
        "sender_full_name": "Vasily Ilin",
        "timestamp": 1735625083
    },
    {
        "content": "<p>It's roughly the PRs as they are going to be reviewed by reviewers/maintainers. Note however that we've mostly switched to using #queueboard instead</p>",
        "id": 491376484,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1735630922
    },
    {
        "content": "<p>Oh, no linkifier. Here it is: <a href=\"https://jcommelin.github.io/queueboard/index.html#queue-new-contributors\">https://jcommelin.github.io/queueboard/index.html#queue-new-contributors</a></p>",
        "id": 491376538,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1735630940
    },
    {
        "content": "<p><a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html\">https://jcommelin.github.io/queueboard/on_the_queue.html</a> explains the filter (applies to <a href=\"https://bit.ly/4eIDoOJ\">#queue</a> too)</p>",
        "id": 491509881,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1735747057
    },
    {
        "content": "<p>Thank you for the explanation. Another basic question: what else needs to happen for PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/19886\">#19886</a> to be merged into mathlib? It says it's on the maintainer queue, but it's been there for two days.</p>",
        "id": 491538182,
        "sender_full_name": "Vasily Ilin",
        "timestamp": 1735775390
    },
    {
        "content": "<p>Things are just moving slow over the holidays, I think.</p>",
        "id": 491539156,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1735776312
    },
    {
        "content": "<p>I did not mean my question as a substitute for \"I want my PR to be merged faster\" but literally: what are the steps that need to happen between the PR being placed on the maintainer queue and being merged?</p>",
        "id": 491539383,
        "sender_full_name": "Vasily Ilin",
        "timestamp": 1735776585
    },
    {
        "content": "<p>Here are the next steps: Currently it's on the <code>t-measure-probability</code> \"maintainer merge\" queue, and a maintainer will take a look and sign off on merging. Signing off means giving it to the Bors merge queue (with <code>bors merge</code>, or perhaps <code>bors +d</code> if they want a small change, letting you do <code>bors merge</code> yourself), which automatically compiles and merges batches of approved PRs, ensuring that the <code>master</code> branch always compiles without any errors.</p>",
        "id": 491539982,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1735777209
    },
    {
        "content": "<p>Thank you! Can I see the list of all maintainers?</p>",
        "id": 491540040,
        "sender_full_name": "Vasily Ilin",
        "timestamp": 1735777302
    },
    {
        "content": "<p>There's a list here: <a href=\"https://leanprover-community.github.io/teams/maintainers.html\">https://leanprover-community.github.io/teams/maintainers.html</a><br>\n(But no need to go around pinging them or anything. Someone will get around to it eventually.)</p>",
        "id": 491540151,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1735777414
    },
    {
        "content": "<p>There's also a list on the readme, with general subject areas: <a href=\"https://github.com/leanprover-community/mathlib4/blob/master/README.md#maintainers\">https://github.com/leanprover-community/mathlib4/blob/master/README.md#maintainers</a></p>",
        "id": 491540512,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1735777751
    }
]