[
    {
        "content": "<p>Hello and sorry if this question is a bit trivial but this is my first time contributing on mathlib.</p>\n<p>I have the following lemma that I believe would be a nice addition in mathlib.<br>\nle_of_dvd_abs {x y : ℤ} (h₁ : y ≠ 0) (h₂ : x ∣ y) : x ≤ |y|</p>\n<p>The issue is that I do not know the exact file where I should add the said lemma. I tried adding it to the same file as \"Int.le_of_dvd\" but this file does not seem to be inside the repository<br>\nAny suggestion is welcome. Thank you.</p>",
        "id": 566459906,
        "sender_full_name": "Evangelos Kitsios",
        "timestamp": 1767659190
    },
    {
        "content": "<p>I'm not confident that we should have this, given we can just prove it as:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">Abs</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">le_of_dvd_abs</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">y</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">le_of_dvd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">abs_pos</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"n\">h₁</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">dvd_abs</span><span class=\"w\"> </span><span class=\"bp\">..</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"n\">h₂</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 566480116,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1767676609
    },
    {
        "content": "<p>Indeed it is not a hard lemma to prove by itself, but isn't this the case with many other lemmas inside mathlib? It seems to me that it is intuitive enough to exist as a standalone theorem.</p>",
        "id": 566572891,
        "sender_full_name": "Evangelos Kitsios",
        "timestamp": 1767715197
    },
    {
        "content": "<p>Can you find some proofs in mathlib that would be simplified using this lemma? That would be good evidence to include it.</p>",
        "id": 566577204,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1767716361
    },
    {
        "content": "<p>Is this proof found by your standard automation (say <code>grind</code> and <code>aesop</code>)? I think such obvious looking statements should either be in mathlib or deduced automatically from lemmas in mathlib.</p>",
        "id": 566581305,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1767717640
    },
    {
        "content": "<p>I did try various automation tactics but none of them were successful.</p>",
        "id": 566588065,
        "sender_full_name": "Evangelos Kitsios",
        "timestamp": 1767719825
    },
    {
        "content": "<p>Either way I think it should be called <code>le_abs_of_dvd</code>.</p>",
        "id": 566601249,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1767724832
    },
    {
        "content": "<p>This works too (found with <code>aesop</code>):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">Abs</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">le_of_dvd_abs</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₁</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h₂</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"n\">y</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Int</span><span class=\"bp\">.</span><span class=\"n\">le_of_dvd</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 566602932,
        "sender_full_name": "Chris Henson",
        "timestamp": 1767725533
    },
    {
        "content": "<p>I think we could add this. We don't have great automation yet for divisibility+orders.</p>",
        "id": 566632392,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1767739066
    },
    {
        "content": "<p>The theorem name is incorrect, though, surely <code>le_abs_of_dvd</code>?</p>",
        "id": 566632419,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1767739081
    },
    {
        "content": "<p>In that case, which file would be the appropriate one for this to be added?</p>",
        "id": 567038078,
        "sender_full_name": "Evangelos Kitsios",
        "timestamp": 1767908526
    },
    {
        "content": "<p><code>Mathlib.Algebra.Order.Ring.Abs</code> sounds reasonable</p>",
        "id": 567039166,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1767909098
    }
]