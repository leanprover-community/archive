[
    {
        "content": "<p>As I continue practicing Lean with some fun theorems, I formalized a proof for <a href=\"https://en.wikipedia.org/wiki/Frobenius_theorem_(real_division_algebras)\">Frobenius theorem</a> (finite dimensional division algebra over real can only be real, complex, or quaternion) at <a href=\"https://github.com/wwylele/mathlib4/blob/algebra-frobenius/Mathlib/Algebra/Algebra/Real.lean\">https://github.com/wwylele/mathlib4/blob/algebra-frobenius/Mathlib/Algebra/Algebra/Real.lean</a>, though because I cared little about code quality, right now it looks like a shitpost <span aria-label=\"face with peeking eye\" class=\"emoji emoji-1fae3\" role=\"img\" title=\"face with peeking eye\">:face_with_peeking_eye:</span> I'll need to clean up a lot of things</p>\n<p>So a few questions:</p>\n<ul>\n<li>This is not yet in mathlib and we want it, right?</li>\n<li>I followed some textbook proof similar to the one in wikipedia, with a few shortcuts taken. Is this optimal, or there is some higher level theory in mathlib that could create a much shorter proof?</li>\n<li>other questions that I can find answers myself, but suggests are also welcome: theorem names? locations?</li>\n</ul>",
        "id": 526169247,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1751075999
    },
    {
        "content": "<p><code>set_option maxHeartbeats 800000</code><br>\nWhat's so expensive?</p>",
        "id": 526169724,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751076533
    },
    {
        "content": "<p>Probably just being long and the <code>fin_cases</code> at the end...</p>",
        "id": 526169777,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1751076607
    },
    {
        "content": "<p>Wow, does that one theorem take up 500 lines? That's like half the mathlib long file limit</p>",
        "id": 526169877,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751076667
    },
    {
        "content": "<p>lol, as I said, the code quality is pretty low at the moment. It definitely can be split up</p>",
        "id": 526169941,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1751076709
    },
    {
        "content": "<p>I guess I shouls make use of QuaternionAlgebra.Basis, though it doesn't have AlgEquiv yet</p>",
        "id": 526174873,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1751083212
    },
    {
        "content": "<p>I think <span class=\"user-mention\" data-user-id=\"699016\">@Edison Xie</span> has a proof of this too</p>",
        "id": 526190215,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1751100907
    },
    {
        "content": "<p>I'd love to see how he did it</p>\n<p>While trying to split the proof into smaller ones, I found it cumbersome because a lot of intermediate result depends on a hypothesis (\"the dimension of D is at least 3\" or equivalent). Attaching the hypothesis to def and lemma is pretty verbose. Is this where I should add a <code>[Fact h]</code> locally just to reduce the verbosity?</p>",
        "id": 526218035,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1751132110
    },
    {
        "content": "<p>Do you know about the <code>variable</code> command? (Looking at your message, I'm not sure if you do.)</p>",
        "id": 526223723,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1751138158
    },
    {
        "content": "<p>If you do: can you give an example what you're talking about? That would make it easier to help you.</p>",
        "id": 526223742,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1751138177
    },
    {
        "content": "<p>I know half of it. I guess you are hinting that I can make a <code>variable {h :...}</code> so it get carried around implicitly. I'll give a try</p>",
        "id": 526223982,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1751138530
    },
    {
        "content": "<p>hmm, the problem with <code>variable {h :...}</code> (or having <code>{h : ...}</code> in general) is that it doesn't automatically get passed around across lemmas. For example</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"o\">}</span>\n\n<span class=\"kn\">noncomputable</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">choose</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">i_prop</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- don't know how to synthesize implicit argument 'h'</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">i_prop2</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- don't know how to synthesize implicit argument 'h'</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">i_prop3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- ok</span>\n</code></pre></div>\n<p>That's why I thought about using instance resolution with <code>Fact</code> to pass it around instead.<br>\nIt's not a big deal. In the end I could just explicitly specify everything. Just want to look for better code style</p>",
        "id": 526229255,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1751146013
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873350\">Weiyi Wang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Frobenius.20theorem.20.28real.20division.20algebras.29/near/526218035\">said</a>:</p>\n<blockquote>\n<p>I'd love to see how he did it<br>\n</p>\n</blockquote>\n<p>By introducing subfield and relying on some facts about it, I will PR it as soon as I figure out whether we need to generalise <code>IntermediateField</code> to non-commutative case or we add some <code>CommSubalgebra</code> and <code>DivisionSubalgebra</code></p>",
        "id": 526237217,
        "sender_full_name": "Edison Xie",
        "timestamp": 1751158546
    },
    {
        "content": "<p>also we need some results about quaternion bases, but if you're interested you are very welcome to checkout my (not-so-secret) Brauer group <a href=\"https://github.com/Whysoserioushah/BrauerGroup_new\">repo</a></p>",
        "id": 526237347,
        "sender_full_name": "Edison Xie",
        "timestamp": 1751158761
    }
]