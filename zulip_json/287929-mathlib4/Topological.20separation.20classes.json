[
    {
        "content": "<p>I found 6 pairs of classes <code>(A, B)</code> in mathlib that are related by <code>(A X â†’ T0Space X) âˆ§ (A X â†” B (SeparationQuotient X))</code>.<br>\nIn order of increasing strength we have</p>\n<ul>\n<li><code>(R0Space, T1Space)</code></li>\n<li><code>(R1Space, T2Space)</code></li>\n<li><code>(RegularSpace, T3Space)</code></li>\n<li><code>(CompletelyRegularSpace, T35Space)</code></li>\n<li><code>(PerfectlyNormalSpace, T6Space)</code></li>\n<li><code>(TopologicalSpace.PseudoMetrizableSpace, TopologicalSpace.MetrizableSpace)</code></li>\n</ul>\n<p>This causes some duplication, and I also remember <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span> saying something about typeclass loops in <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/TC.20loops/near/511729527\">#mathlib4 &gt; TC loops @ ðŸ’¬</a>.<br>\nTherefore I think we should consider removing the second class in each tuple, to reduce duplication and speed up typeclass inference. Does anyone else have a better idea?</p>",
        "id": 512083034,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744638071
    },
    {
        "content": "<p>By \"related\" do you mean \"the Iff lemma exists\" or \"there is an instance in both directions\"?</p>",
        "id": 512084223,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1744638365
    },
    {
        "content": "<p>I mean that it is a true statement that doesn't necessarily have a proof yet in mathlib</p>",
        "id": 512085669,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744638753
    },
    {
        "content": "<p>I don't think people will be happy if you tell them that they should write <code>R1Space (SeparationQuotient X)</code> instead of <code>T2Space X</code>.</p>",
        "id": 512089681,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1744639730
    },
    {
        "content": "<p>If we don't have instances in both directions, then there will not be TC loops, and so you also won't see a TC speedup.</p>",
        "id": 512089786,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1744639755
    },
    {
        "content": "<p>I think it's fine to have both names, and the iff statements. We just shouldn't make instances in both directions.</p>",
        "id": 512089842,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1744639773
    },
    {
        "content": "<p>i imagine the most useful instances will be in the <code>-&gt; SeparationQuotient</code> direction?</p>",
        "id": 512091309,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1744640156
    },
    {
        "content": "<p>wait, what I wrote is <del>wrong</del> too general</p>",
        "id": 512093020,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744640572
    },
    {
        "content": "<p>fixed</p>",
        "id": 512093334,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744640652
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Topological.20separation.20classes/near/512089681\">said</a>:</p>\n<blockquote>\n<p>I don't think people will be happy if you tell them that they should write <code>R1Space (SeparationQuotient X)</code> instead of <code>T2Space X</code>.</p>\n</blockquote>\n<p>I was thinking more like <code>[R1Space X] [T0Space X]</code> instead of <code>[T2Space X]</code> (I don't think people will be too happy with this either)</p>",
        "id": 512094044,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744640832
    },
    {
        "content": "<p>I do remember seeing that to make a sober space you say <code>[QuasiSober X] [T0Space X]</code>.</p>",
        "id": 512095149,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744641106
    },
    {
        "content": "<p>Since these are Prop-valued classes, I also think there is less of an issue. No risk of diamonds at all, and in general, defeq checks are trivial. So I think it's safe to have these TCs.</p>",
        "id": 512099522,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1744642098
    },
    {
        "content": "<p>Surely this is <em>not</em> fine, because <code>T2Space X</code> implies <code>R1Space X</code> in general (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=T2Space.r1Space#doc\">docs#T2Space.r1Space</a>), so a typeclass search could go like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">âŠ¢</span><span class=\"w\"> </span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"n\">X</span>\n<span class=\"bp\">âŠ¢</span><span class=\"w\"> </span><span class=\"n\">R1Space</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SeparationQuotient</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span>\n<span class=\"bp\">âŠ¢</span><span class=\"w\"> </span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SeparationQuotient</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span>\n<span class=\"bp\">âŠ¢</span><span class=\"w\"> </span><span class=\"n\">R1Space</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SeparationQuotient</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SeparationQuotient</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">))</span>\n<span class=\"bp\">âŠ¢</span><span class=\"w\"> </span><span class=\"n\">T2Space</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SeparationQuotient</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">SeparationQuotient</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">))</span>\n<span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 512100408,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1744642325
    },
    {
        "content": "<p>I added instances from <code>T0Space X</code> and <code>R*Space X</code> to <code>T*Space X</code> some time ago, because I was told that Lean 4 TC search can detect cycles.</p>",
        "id": 512101440,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1744642597
    },
    {
        "content": "<p>If we drop <code>T*</code> classes, then we can write <code>[R1Space X] [T0Space X]</code> instead of <code>[T2Space X]</code>. No need to involve <code>SeparationQuotient X</code> at all. BTW, <code>R1Space (SeparationQuotient X)</code> is equivalent to <code>R1Space X</code>, not <code>T2Space X</code>.</p>",
        "id": 512101531,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1744642626
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Topological.20separation.20classes/near/512101531\">said</a>:</p>\n<blockquote>\n<p>BTW, <code>R1Space (SeparationQuotient X)</code> is equivalent to <code>R1Space X</code>, not <code>T2Space X</code>.</p>\n</blockquote>\n<p>Sorry, I got them backwards, <code>T2Space (SeparationQuotient X)</code> is equivalent to <code>R1Space X</code></p>",
        "id": 512108772,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1744644221
    },
    {
        "content": "<p>I think that we need to make <code>variable alias</code> much more usable in Mathlib, especially as we move to more unbundling.</p>",
        "id": 512122935,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1744647795
    },
    {
        "content": "<p>If we're able to simply write <code>[T2Space X]</code> and have it expand to <code>[R1Space X] [T0Space X]</code> <em>behind the scenes</em> (I think this is crucial to preserve readability of the source), then there would be no issue.</p>",
        "id": 512123264,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1744647874
    },
    {
        "content": "<p>(Note: this would mean removing the current <code>T2Space</code> definition as it currently exists.)</p>",
        "id": 512123460,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1744647930
    }
]