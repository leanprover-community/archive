[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/29795\">PR #29795</a> I generalised some theorems related to base change along a morphism. Namely instead of assuming that the category has pullbacks, we just need pullbacks along that morphism to exist. I am wondering if making a typeclass for this is a good idea:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">protected</span><span class=\"w\"> </span><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Hom</span><span class=\"bp\">.</span><span class=\"n\">HasPullback</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">hasPullback</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">W</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">W</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HasPullback</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">f</span>\n</code></pre></div>",
        "id": 540825194,
        "sender_full_name": "joseph hua",
        "timestamp": 1758552597
    },
    {
        "content": "<p>I think <code>[∀ {W} (g : W ⟶ Y), HasPullback g f]</code> is good enough.</p>",
        "id": 540834541,
        "sender_full_name": "Christian Merten",
        "timestamp": 1758554689
    },
    {
        "content": "<p>I have not used category theory much in mathlib but I have noticed similar patterns to what Joseph is suggesting before e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.Limits.HasLimitsOfSize#doc\">docs#CategoryTheory.Limits.HasLimitsOfSize</a> is a class, just defined to mean \"for all J, (another class)\", so why isn't Christian's suggestion an argument against <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.Limits.HasLimitsOfSize#doc\">docs#CategoryTheory.Limits.HasLimitsOfSize</a> ?</p>",
        "id": 540939821,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1758610287
    },
    {
        "content": "<p>For convenience, <code>∀ {W} (g : W ⟶ Y), HasPullback g f</code> could be made into an abbrev.</p>\n<p>I would not mind if somebody implemented a change in the design of <code>HasLimitsOfShape</code> and <code>HasLimitsOfSize</code> to make them abbrevs, as long as <code>!bench</code> produces reasonable results...</p>",
        "id": 541049001,
        "sender_full_name": "Joël Riou",
        "timestamp": 1758642555
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459699\">Joël Riou</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Hom.2EHasPullback/near/541049001\">said</a>:</p>\n<blockquote>\n<p>For convenience, <code>∀ {W} (g : W ⟶ Y), HasPullback g f</code> could be made into an abbrev.</p>\n<p>I would not mind if somebody implemented a change in the design of <code>HasLimitsOfShape</code> and <code>HasLimitsOfSize</code> to make them abbrevs, as long as <code>!bench</code> produces reasonable results...</p>\n</blockquote>\n<p>unless there are any objections I will implement the HasPullback instance as an abbrev in the PR</p>",
        "id": 541055666,
        "sender_full_name": "joseph hua",
        "timestamp": 1758644583
    },
    {
        "content": "<p>Now implemented in <a href=\"https://github.com/leanprover-community/mathlib4/pull/29795\">#29795</a></p>",
        "id": 542022590,
        "sender_full_name": "joseph hua",
        "timestamp": 1759148298
    }
]