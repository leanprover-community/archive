[
    {
        "content": "<p>Hi, in <code>Mathlib/Algebra/Ring/Parity.lean</code> we have this lemmas:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">odd_add_self_one'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">add_assoc</span><span class=\"o\">]</span>\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">odd_add_one_self</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">add_comm</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">]</span>\n<span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">odd_add_one_self'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">add_comm</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>I'm surprised that <code>odd_add_self_one : Odd (a + a + 1)</code> is messing, is there a reason for witch it is messing?</p>",
        "id": 483807361,
        "sender_full_name": "Iván Renison",
        "timestamp": 1732231515
    },
    {
        "content": "<p><del>Does it hold definitionally?</del> I think the point is that this coincides with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=odd_two_mul_add_one#doc\">docs#odd_two_mul_add_one</a> since <code>2 * a = a + a</code>.</p>",
        "id": 483807984,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1732231872
    },
    {
        "content": "<p>Actually because <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=odd_add_self_one%27#doc\">docs#odd_add_self_one'</a> has a prime, I think it's just missing unintentionally.</p>",
        "id": 483808648,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1732232234
    },
    {
        "content": "<p>I think it does not coincide, because adding it like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">odd_add_self_one</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">odd_two_mul_add_one</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>\n<p>Gives error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">mismatch</span>\n<span class=\"w\">  </span><span class=\"n\">odd_two_mul_add_one</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"n\">but</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"n\">Odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n</code></pre></div>",
        "id": 483808892,
        "sender_full_name": "Iván Renison",
        "timestamp": 1732232360
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/287929-mathlib4/topic/odd_add_self_one/near/483808648\">said</a>:</p>\n<blockquote>\n<p>Actually because <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=odd_add_self_one%27#doc\">docs#odd_add_self_one'</a> has a prime, I think it's just missing unintentionally.</p>\n</blockquote>\n<p>Ok, then I will make a pull request adding it</p>",
        "id": 483808967,
        "sender_full_name": "Iván Renison",
        "timestamp": 1732232401
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/19347\">#19347</a></p>",
        "id": 483809378,
        "sender_full_name": "Iván Renison",
        "timestamp": 1732232594
    },
    {
        "content": "<p>I think this is missing because <code>simp</code> reduces it to <code>Even (a + a)</code>?</p>",
        "id": 483813972,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732235111
    },
    {
        "content": "<p>Which is exactly what CI is telling you :)</p>",
        "id": 483814006,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732235135
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"646655\">Iván Renison</span> has marked this topic as resolved.</p>",
        "id": 483902043,
        "sender_full_name": "Notification Bot",
        "timestamp": 1732279066
    }
]