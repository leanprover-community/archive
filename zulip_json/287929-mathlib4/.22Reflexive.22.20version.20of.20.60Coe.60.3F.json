[
    {
        "content": "<p>There's something which came up in an application for FormalizedFormalLogic which would be convenient for me to have. It looks like there is no instance of the typeclass <code>Coe α α</code> in general. Is there some version of <code>Coe</code> for which there is such an instance? If there is, for example I would expect the identity function <code>α → α</code>, seen as a coercion from <code>α</code> to itself, to be an instance.</p>",
        "id": 575786927,
        "sender_full_name": "C7X",
        "timestamp": 1772029557
    },
    {
        "content": "<p>Lean uses <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CoeT#doc\">docs#CoeT</a> to find coercions; the <code>Coe</code> class is a way you add instances to <code>CoeT</code>.</p>",
        "id": 575797572,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1772032187
    },
    {
        "content": "<p>Can you clarify why you need this though? This feels like something weird to want to have</p>",
        "id": 575797759,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1772032241
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873547\">Robin Arnez</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.22Reflexive.22.20version.20of.20.60Coe.60.3F/near/575797759\">said</a>:</p>\n<blockquote>\n<p>Can you clarify why you need this though? This feels like something weird to want to have</p>\n</blockquote>\n<p>I'm working in the library FormalizedFormalLogic. In this library, if I have a structure <code>M</code>, there's already a definition of what it means for a function <code>M^k -&gt; M</code> to be definable over <code>M</code>. I'm working with models of set theory <code>M</code>, and my goal is I would like to talk about definability over <code>M</code> of functions with some other types, like <code>M × Ordinal M -&gt; M</code>. The type <code>Ordinal M</code> has a coercion to <code>M</code> (since each ordinal in a model of set theory is itself a set), and in general the only cases I want to consider are ones where the types of the arguments all have coercions to <code>M</code>.</p>\n<p>So I generalized the definition of definable function to <code>M₁ × ... × Mₖ -&gt; M</code>, where <code>M₁, ..., Mₖ</code> all have coercions to <code>M</code>. However, there is no coercion from <code>M</code> to itself, so I can't use this definition for the original use case of <code>M × ... × M -&gt; M</code> anymore!</p>",
        "id": 575887848,
        "sender_full_name": "C7X",
        "timestamp": 1772059982
    },
    {
        "content": "<p>In this case, instead of using <code>Coe α M</code> to say that <code>α</code> has a coercion to <code>M</code>, you should probably be doing something similar to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SetLike#doc\">docs#SetLike</a> or <del>docs#Encodable</del> <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Primcodable#doc\">docs#Primcodable</a></p>",
        "id": 575889459,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1772060496
    },
    {
        "content": "<p>For SetLike, these aren't the <code>Set</code>s of MathLib, but elements of an arbitrary type with an ∈-relation which satisfy the axioms of Zermelo set theory, so unfortunately I'm thinking that things from MathLib's <code>Set</code> aren't applicable here. Most of the definitions about models of set theory in FormalizedFormalLogic are marked as <code>noncomputable</code>, does this affect the ability to use Primcodable?</p>",
        "id": 575890246,
        "sender_full_name": "C7X",
        "timestamp": 1772060763
    },
    {
        "content": "<p>see also <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Primrec#doc\">docs#Primrec</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Partrec#doc\">docs#Partrec</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Computable#doc\">docs#Computable</a> which do similar where you define what it means to be primrec/partrec/computable on the type <code>Nat</code> and you transfer this notion to an arbitrary type which can be encoded as <code>Nat</code></p>",
        "id": 575890328,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1772060796
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"919332\">C7X</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.22Reflexive.22.20version.20of.20.60Coe.60.3F/near/575890246\">said</a>:</p>\n<blockquote>\n<p>For SetLike, these aren't the <code>Set</code>s of MathLib, but elements of an arbitrary type with an ∈-relation which satisfy the axioms of Zermelo set theory, so unfortunately I'm thinking that things from MathLib's <code>Set</code> aren't applicable here. Most of the definitions about models of set theory in FormalizedFormalLogic are marked as <code>noncomputable</code>, does this affect the ability to use Primcodable?</p>\n</blockquote>\n<p>Of course, it's not the same, but <em>similar</em>. You should not be using <code>Primcodable</code> to define types which embed into your model <code>M</code> because <code>Primcodable</code> is for embedding into <code>Nat</code>. But you should be doing something <em>similar</em>.</p>",
        "id": 575890684,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1772060966
    },
    {
        "content": "<p>I don't understand, should I have a typeclass for things which encode nicely into sets instead of nicely into <code>Nat</code>?</p>",
        "id": 575890823,
        "sender_full_name": "C7X",
        "timestamp": 1772061016
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"919332\">C7X</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.22Reflexive.22.20version.20of.20.60Coe.60.3F/near/575890823\">said</a>:</p>\n<blockquote>\n<p>I don't understand, should I have a typeclass for things which encode nicely into sets instead of nicely into <code>Nat</code>?</p>\n</blockquote>\n<p>if by sets you mean elements of your model of set theory <code>M</code> then yes I think you should be doing that (it might have to be parameterized by <code>M</code>)</p>",
        "id": 575891053,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1772061105
    },
    {
        "content": "<p>Okay, I can try (sorry if I don't respond for a while, I have to go soon)</p>",
        "id": 575891114,
        "sender_full_name": "C7X",
        "timestamp": 1772061128
    }
]