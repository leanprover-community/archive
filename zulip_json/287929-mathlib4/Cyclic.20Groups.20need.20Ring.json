[
    {
        "content": "<p>I am stumbling upon this error</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.GroupTheory.SpecificGroups.Cyclic</span>\n\n<span class=\"n\">assert_not_exists</span><span class=\"w\"> </span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"c1\">-- Declaration Ring is not allowed to be imported by this file.</span>\n</code></pre></div>\n<p>and I believe that there is something that should be done, no? Looking at the error, it seems that it comes from a path</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">Hom</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"o\">,</span>\n<span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Cast</span><span class=\"bp\">.</span><span class=\"n\">Basic</span><span class=\"o\">,</span>\n<span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">CharP</span><span class=\"bp\">.</span><span class=\"n\">Defs</span><span class=\"o\">,</span>\n<span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">CharP</span><span class=\"bp\">.</span><span class=\"n\">Lemmas</span><span class=\"o\">,</span>\n<span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">CharP</span><span class=\"bp\">.</span><span class=\"n\">Two</span><span class=\"o\">,</span>\n<span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Totient</span><span class=\"o\">,</span>\n<span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">imported</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">GroupTheory</span><span class=\"bp\">.</span><span class=\"n\">SpecificGroups</span><span class=\"bp\">.</span><span class=\"n\">Cyclic</span>\n</code></pre></div>\n<p>and I kind of imagine that when speaking about cyclic groups we want to access the totient function, yet that to speak about cyclic groups we need rings seems problematic. Is it not?</p>",
        "id": 519208930,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747684416
    },
    {
        "content": "<p>Agreed! I've been working on similar issues (\"order of an element\" needs rings), and it is never super easy to know what to do</p>",
        "id": 519209177,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747684494
    },
    {
        "content": "<p>Indeed I was typing @ Yaël...</p>",
        "id": 519209336,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747684544
    },
    {
        "content": "<p>In that case, the suspicious import is <code>Algebra.CharP.Two</code> → <code>Data.Nat.Totient</code> IMO. Basic results about the totient function should need no algebra at all!</p>",
        "id": 519209421,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747684562
    },
    {
        "content": "<p>Do you want to give it a go? Otherwise I have a freshly spun out gitpod and another 30min of sunlight before I can go to bed</p>",
        "id": 519209687,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747684633
    },
    {
        "content": "<p>For the context: I am trying to add some cyclicity properties to <code>Mathlib.Algebra.GroupWithZero.Int.lean</code> but it starts with a <code>assert_not_import Ring</code> and then it complains.</p>",
        "id": 519209734,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747684644
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519209687\">said</a>:</p>\n<blockquote>\n<p>Do you want to give it a go? Otherwise I have a freshly spun out gitpod and another 30min of sunlight before I can go to bed</p>\n</blockquote>\n<p>Here sun is down, so if you want to go feel free! Otherwise I can try to do something (but picking up where you left it once you called it a night is also a nice option <span aria-label=\"angel\" class=\"emoji emoji-1f47c\" role=\"img\" title=\"angel\">:angel:</span> ).</p>",
        "id": 519209993,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747684709
    },
    {
        "content": "<p>Just tell me what you prefer.</p>",
        "id": 519210009,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747684714
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519209734\">said</a>:</p>\n<blockquote>\n<p>For the context: I am trying to add some cyclicity properties to <code>Mathlib.Algebra.GroupWithZero.Int.lean</code> but it starts with a <code>assert_not_import Ring</code> and then it complains.</p>\n</blockquote>\n<p>This is a very good stress test of our import sanitisation whether we can do this or not. Right now I can tell you: it will be a solid amount of work</p>",
        "id": 519210171,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747684764
    },
    {
        "content": "<blockquote>\n<p>yet that to speak about cyclic groups we need rings seems problematic.</p>\n</blockquote>\n<p>What's the argument here? Certainly the fact that groups are \"simpler\" than rings doesn't imply that all \"$X groups\" are simpler than \"$Y rings\". For cyclic groups, I would expect it to become handly to know that the integers and naturals form a (semi)ring.</p>",
        "id": 519210215,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747684776
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 519210223,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747684777
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519210171\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519209734\">said</a>:</p>\n<blockquote>\n<p>For the context: I am trying to add some cyclicity properties to <code>Mathlib.Algebra.GroupWithZero.Int.lean</code> but it starts with a <code>assert_not_import Ring</code> and then it complains.</p>\n</blockquote>\n<p>This is a very good stress test of our import sanitisation whether we can do this or not. Right now I can tell you: it will be a solid amount of work</p>\n</blockquote>\n<p>Yes, this I imagine.</p>",
        "id": 519210358,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747684806
    },
    {
        "content": "<p>Eric, this reasoning is very dangerous, because empirically everyone says \"Oh but to prove this why don't you that first? Makes the proof much easier\", and soon enough you're stuck in a long chain of imports cycling through the same few folders in a seemingly random order</p>",
        "id": 519210772,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747684917
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519210215\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>yet that to speak about cyclic groups we need rings seems problematic.</p>\n</blockquote>\n<p>What's the argument here? Certainly the fact that groups are \"simpler\" than rings doesn't imply that all \"$X groups\" are simpler than \"$Y rings\". For cyclic groups, I would expect it to become handly to know that the integers and naturals form a (semi)ring.</p>\n</blockquote>\n<p>I think that the argument is what Yael calls import sanitisation... at any rate, I believe that at least the basics about cyclic groups are really independent of any (semi)ring theory, I would have nothing against seeing them show up in e.g. classification theorems, but not below, no?</p>",
        "id": 519210856,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747684930
    },
    {
        "content": "<p>That being said: if anything <em>interesting</em> about cyclic groups needs ring, we should re-think the <code>assert_not_exists Ring</code> in the basics about <code>GroupWithZero.Int</code>: and there I perhaps agree with Eric that importing Ring when speaking about <code>Int</code> (or the <code>WithZero</code>-ification) is probably ok.</p>",
        "id": 519211288,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747685063
    },
    {
        "content": "<p>Really, the group vs group with zero vs ring vs ... distinction I've been pushing for is kind of arbitrary, but the point is that:</p>\n<ol>\n<li>It is easy for humans to evaluate where a result lies in the hierarchy</li>\n<li>It is easy for Lean to yell at humans when they mess with the distinction, eg <code>assert_not_exists</code> or the forbidden folder imports linter</li>\n<li>It at least somewhat matches the order in which things are taught to an undergrad. I myself sat through a course named \"Groups, Rings and Modules\", and the material was indeed covered in that precise order, with no back and forth</li>\n</ol>",
        "id": 519211468,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747685126
    },
    {
        "content": "<p>I <em>basically</em> agree, but allow me a slightly provocative question (I told you sun is down... <span aria-label=\"wine\" class=\"emoji emoji-1f377\" role=\"img\" title=\"wine\">:wine:</span> <span aria-label=\"smirk\" class=\"emoji emoji-1f60f\" role=\"img\" title=\"smirk\">:smirk:</span> ): for 3., are you sure your teacher <strong>never</strong> multiplied two integers when discussing some nice properties of <code>Int</code> as a (cyclic) group?</p>",
        "id": 519211780,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747685220
    },
    {
        "content": "<p>(I am much older, so memory is probably not serving well, but concerning my GRF course I cannot swear that this has not been used).</p>",
        "id": 519212082,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747685314
    },
    {
        "content": "<p>Sure they did! but they didn't need to appeal to the fact that the properties of multiplication over <code>ℤ</code> (and its interaction with addition) are more general phenomena pertaining to rings. Instead they wrote them down and went on with the course.</p>",
        "id": 519213074,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747685522
    },
    {
        "content": "<p>(And I am now frantically checking all the notes about my <em>lectures</em> to check what I did... <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> <span aria-label=\"note\" class=\"emoji emoji-1f4dd\" role=\"img\" title=\"note\">:note:</span> )</p>",
        "id": 519213160,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747685534
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519213074\">said</a>:</p>\n<blockquote>\n<p>Sure they did! but they didn't need to appeal to the fact that the properties of multiplication over <code>ℤ</code> (and its interaction with addition) are more general phenomena pertaining to rings. Instead they wrote them down and went on with the course.</p>\n</blockquote>\n<p>But that becomes a nightmare, no? Are you suggesting that we prove stupid ring-theoretical results on   <code>Int</code> without appealing to the <code>Ring</code> library to avoid the import?</p>",
        "id": 519213659,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747685649
    },
    {
        "content": "<p>This is a useful attitude to adopt in the Lean ecosystem too because you don't want to be telling the computer scientists \"Well you can't multiply together two indices without importing mathlib because hum well you know multiplication is mathematics\"</p>",
        "id": 519213705,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747685664
    },
    {
        "content": "<p>(Just to be clear: I agree 100% that there is <em>something</em> to be done, just trying to understand <em>what</em>).</p>",
        "id": 519213843,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747685707
    },
    {
        "content": "<p>I know that this seems pure laziness: but is \"just remove <code>assert_not_exists Blah</code> on the go, after informed discussions on Zulip\" too easy? <strong>EDIT</strong> as <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> rightly points out, this must go hand-in-hand with \"and link to that discussion in the commit message\"</p>",
        "id": 519214146,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747685799
    },
    {
        "content": "<p>It certainly has the terrible drawback of being basically irreversible</p>",
        "id": 519214280,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747685847
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519213659\">said</a>:</p>\n<blockquote>\n<p>But that becomes a nightmare, no? Are you suggesting that we prove stupid ring-theoretical results on <code>Int</code> without appealing to the <code>Ring</code> library to avoid the import?</p>\n</blockquote>\n<p>If the result is truly ring-theoretical, then it is not basic. Of course, I am implying that one can and should draw a line between \"basic algebra\" and \"ring theory\". In practice, there seems to always be an obvious answer</p>",
        "id": 519214684,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747685970
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519214146\">said</a>:</p>\n<blockquote>\n<p>I know that this seems pure laziness: but is \"just remove <code>assert_not_exists Blah</code> on the go, after informed discussions on Zulip\" too easy?</p>\n</blockquote>\n<p>Not sure what you mean exactly, but certainly one shouldn't remove <code>assert_not_exists Ring</code> from <code>Algebra.GroupWithZero.Blah</code>. Instead, one should move the relevant results to <code>Algebra.Ring.Blah</code>.</p>",
        "id": 519214921,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747686039
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519214921\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519214146\">said</a>:</p>\n<blockquote>\n<p>I know that this seems pure laziness: but is \"just remove <code>assert_not_exists Blah</code> on the go, after informed discussions on Zulip\" too easy?</p>\n</blockquote>\n<p>Not sure what you mean exactly, but certainly one shouldn't remove <code>assert_not_exists Ring</code> from <code>Algebra.GroupWithZero.Blah</code>. Instead, one should move the relevant results to <code>Algebra.Ring.Blah</code>.</p>\n</blockquote>\n<p>Well, I dare to disagree. If the relevant results concern the GroupWithZero structure of Blah, the fact that somewhere uphill a Ring has been used should not make them fall in <code>Ring.Blah</code>.</p>",
        "id": 519215319,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747686155
    },
    {
        "content": "<p>Of course, changing the proof above so that it does not import <code>Ring</code> anymore is a good option; but then <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> 's objection fires: if we're speaking about (cyclic) groups and we end up using, in an ancillary way, something about rings, it is perhaps safe to allow this import.</p>",
        "id": 519215688,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747686258
    },
    {
        "content": "<p>This is what I meant by \"removing on the go\": on a case-by-case analysis, say something like \"to prove Y, although in principle we don't need X and we enforced a <code>assert_not_exists X</code> , it is actually handy to allow the <code>X</code>-theory: so let's remove the <code>assert_not_exists</code>.\"</p>",
        "id": 519215958,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747686347
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519214146\">said</a>:</p>\n<blockquote>\n<p>I know that this seems pure laziness: but is \"just remove <code>assert_not_exists Blah</code> on the go, after informed discussions on Zulip\" too easy?</p>\n</blockquote>\n<p>In general I think <code>assert_not_exists</code> is a mechanism to ensure discussion and thought happens; if they were meant to be hard rules, then they ought to require an explanation next to each one!</p>",
        "id": 519218827,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747687167
    },
    {
        "content": "<p>Excellent point</p>",
        "id": 519218950,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747687202
    },
    {
        "content": "<p>I think \"and link to that discussion in the commit message\" is another important part that you didn't mention</p>",
        "id": 519219041,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747687231
    },
    {
        "content": "<p>They are meant as hard rules and registered as such centrally in <code>Algebra/README.md</code></p>",
        "id": 519219274,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747687316
    },
    {
        "content": "<p>(please read it!)</p>",
        "id": 519219345,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747687328
    },
    {
        "content": "<p>(I am reading it: but would it been accessible from the doc webpage?)</p>",
        "id": 519219621,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747687428
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519219274\">said</a>:</p>\n<blockquote>\n<p>They are meant as hard rules and registered as such centrally in <code>Algebra/README.md</code></p>\n</blockquote>\n<p>Either this should be in the docstring of <code>assert_not_exists</code>, or it should be a comment on each use in algebra</p>",
        "id": 519219756,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747687465
    },
    {
        "content": "<p>I do think that's a made-up rule, Eric. Discussion on Zulip will point to the README, end of the story.</p>",
        "id": 519219883,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747687503
    },
    {
        "content": "<p>Sadly it is currently not. I tried to ignite a discussion on making those README files be considered by doc-gen, but nothing came out of it</p>",
        "id": 519219939,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747687523
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519219274\">said</a>:</p>\n<blockquote>\n<p>They are meant as hard rules and registered as such centrally in <code>Algebra/README.md</code></p>\n</blockquote>\n<p>I have read it: and with all the due respect, I still believe that Eric has a point: these should not be hard rules (even if they've been written/suggested with a good idea in mind).</p>",
        "id": 519220013,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747687547
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519219883\">said</a>:</p>\n<blockquote>\n<p>That's a made-up rule, Eric.</p>\n</blockquote>\n<p>I wasn't saying this was a rule, I was saying that if what you say really is a rule, surely we want to communicate it more directly than waiting for a human to point the reader to a per-folder readme file via Zulip?</p>",
        "id": 519220575,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747687721
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519219939\">said</a>:</p>\n<blockquote>\n<p>Sadly it is currently not. I tried to ignite a discussion on making those README files be considered by doc-gen, but nothing came out of it</p>\n</blockquote>\n<p>If you use <code>README.lean</code> instead, then it will be considered by doc-gen under current code framework without modifications</p>",
        "id": 519271487,
        "sender_full_name": "Jz Pan",
        "timestamp": 1747707530
    },
    {
        "content": "<p>Yes but then these files also need to:</p>\n<ol>\n<li>Have a copyright header</li>\n<li>Appear in <code>Mathlib.lean</code></li>\n<li>Import <code>Mathlib.Init</code></li>\n</ol>\n<p>and furthermore they could contain non-trivial Lean code. Bug or feature?</p>",
        "id": 519295364,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747719802
    },
    {
        "content": "<ol start=\"4\">\n<li>be valid Lean files  (as opposed to just markdown)</li>\n</ol>",
        "id": 519296520,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1747720454
    },
    {
        "content": "<p>Well, it is surely strange that there is a file, <code>Mathlib/Algebra/README.md</code>, that basically nobody knows about and that contains an hard rule.</p>",
        "id": 519363735,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1747741666
    },
    {
        "content": "<p>Honestly I've ignored it until now. This can very well be my fault, but I am pretty sure we never really discussed the rule itself.</p>",
        "id": 519363907,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1747741716
    },
    {
        "content": "<p>I confess I had never heard/seen the <code>REAMDE.md</code> neither.</p>",
        "id": 519364190,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747741807
    },
    {
        "content": "<p>Quoting the readme:</p>\n<blockquote>\n<p>The basic algebraic hierarchy is split across a series of subfolders that each depend on the<br>\nprevious:</p>\n<ul>\n<li><code>Algebra.Notation</code> for basic algebraic notation</li>\n<li><code>Algebra.Group</code> for semigroups, monoids, groups</li>\n<li><code>Algebra.GroupWithZero</code> for monoids with a zero adjoined, groups with a zero adjoined</li>\n<li><code>Algebra.Ring</code> for semirings, rings</li>\n<li><code>Algebra.Field</code> for semifields, fields</li>\n</ul>\n<p>Files in earlier subfolders should not import files in later ones.</p>\n</blockquote>\n<p>I think the tension here is whether the taxonomy of files is intended to help users or maintainers. I don't think users expect to find a result about cyclic groups in <code>Algebra.Ring</code> just because it happens to need some results from ring theory.</p>",
        "id": 519366488,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747742523
    },
    {
        "content": "<p>But if ultimately we just tell users to <code>import Mathlib</code> then indeed the taxonomy only really matters for maintainers.</p>",
        "id": 519366568,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747742551
    },
    {
        "content": "<p>Well, it actually also matters for contributors when they open a PR.</p>",
        "id": 519367067,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747742712
    },
    {
        "content": "<p>Maintainers and people wanting to contribute.</p>",
        "id": 519367070,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1747742713
    },
    {
        "content": "<p>But ultimately, this is \"development\" documentation rather than \"user documentation\", so perhaps we could say \"read the README.md of the relevant folders\" in the contribution guidelines?</p>",
        "id": 519367539,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1747742845
    },
    {
        "content": "<p>Maybe the answer is “cyclic groups shouldn’t be a part of the ‘basic algebraic hierarchy’ and should go in <code>Mathlib/GroupTheory</code> instead”?</p>",
        "id": 519367852,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747742921
    },
    {
        "content": "<p>I confess I also have some difficulties in understanding the difference between the <code>GroupTheory</code> folder and the <code>Algebra.Group</code> one. That being said, if we consider that importing something from ring theory for <code>Algebra.Group</code> is unreasonable, why would it be OK for <code>Mathlib.GroupTheory</code>?</p>",
        "id": 519369256,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747743308
    },
    {
        "content": "<p>Precisely because it isn't basic anymore</p>",
        "id": 519404278,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747752214
    },
    {
        "content": "<p>Andrew's viewpoint is exactly mine too</p>",
        "id": 519404329,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747752228
    },
    {
        "content": "<p>Can you expand the readme to explain that such \"crossover\" topics likely belong in the *Theory directories?</p>",
        "id": 519421420,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747756373
    },
    {
        "content": "<p>Sure, PR incoming</p>",
        "id": 519421623,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747756430
    },
    {
        "content": "<p>It seems to me that there is no clear consensus and I feel that there are two main options around, so I'm proposing a poll and will try to advance according to the results.</p>",
        "id": 519636207,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747839731
    },
    {
        "content": "<p>/poll What should we do about cyclic groups (with zero) requiring <code>Ring</code>?<br>\nRemove <code>assert_not_exists Ring</code> from <code>Mathlib.Group.GroupWithZero.Int</code><br>\nMove all results about cyclic groups (with zero) away from <code>Mathlib.Algebra.Group</code> to <code>Mathlib.GroupTheory</code></p>",
        "id": 519636911,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747839915
    },
    {
        "content": "<p>Is this poll about anything, really? Do we have examples of cyclic group results that genuinely require <code>Ring</code>?</p>",
        "id": 519637199,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747839976
    },
    {
        "content": "<p>I am running into problems with <a href=\"https://github.com/leanprover-community/mathlib4/pull/24435\">#24435</a>, so \" yes\".</p>",
        "id": 519637508,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747840054
    },
    {
        "content": "<p>Ah! That would have been good to mention from the start <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 519637764,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747840103
    },
    {
        "content": "<p>You have found results that currently import rings. It is not clear to me that they <em>need</em> rings</p>",
        "id": 519638399,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747840221
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"300245\">Filippo A. E. Nuccio</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cyclic.20Groups.20need.20Ring/near/519209734\">said</a>:</p>\n<blockquote>\n<p>For the context: I am trying to add some cyclicity properties to <code>Mathlib.Algebra.GroupWithZero.Int.lean</code> but it starts with a <code>assert_not_import Ring</code> and then it complains.</p>\n</blockquote>",
        "id": 519641403,
        "sender_full_name": "Filippo A. E. Nuccio",
        "timestamp": 1747840967
    },
    {
        "content": "<p>I didn't see the PR <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 519662829,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1747847174
    }
]