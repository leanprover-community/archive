[
    {
        "content": "<p>Would it be a reasonable feature for <code>contrapose</code>/<code>contrapose!</code>, when applied to a goal <code>a ↔ b</code>, to turn it into <code>¬ a ↔ ¬ b</code>? This doesn't interfere with the current behaviour, since <code>contrapose</code> without arguments only works when the goal is of the form <code>a → b</code>, turning it into <code>¬ b → ¬ a</code>.</p>",
        "id": 554559360,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1762691753
    },
    {
        "content": "<p>The current magic spell for this is <code>rw [← not_iff_not]</code> but it always takes me some time to remember it / find it</p>",
        "id": 554565109,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1762697204
    },
    {
        "content": "<p>And usually, you want to push the negation as well, so <code>contrapose!</code> would do this conveniently.</p>",
        "id": 554567823,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1762699476
    },
    {
        "content": "<p>I like this.</p>",
        "id": 554583567,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1762714059
    },
    {
        "content": "<p>A somewhat orthogonal idea I had is that it might be nice for <code>contrapose</code> (without the <code>!</code>) to cancel out a negation that is already present. So it would e.g. replace <code>a → ¬ b</code> with <code>b → ¬ a</code>. This way, it is not \"pushing\" the negation, but just \"cancelling\" it. Note that the <code>by_contra</code> and <code>absurd</code> tactics already have this feature.</p>\n<p>I can imagine that one might not want to run the full power of <code>push_neg</code> (i.e. not use <code>contrapose!</code>), but I cannot imagine why one wouldn't want to cancel out a double negation. (And doing this with a single lemma would create smaller proof terms, and avoid classical logic sometimes)</p>",
        "id": 554603390,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1762734152
    },
    {
        "content": "<p>About contrapose for equivalences, I think it would be nice to include an option to turn it off, for people who directly use <code>contrapose</code> for teaching.</p>",
        "id": 554885647,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1762858481
    },
    {
        "content": "<p>Jovan just made <a href=\"https://github.com/leanprover-community/mathlib4/pull/31510\">#31510</a> which does this (including a teaching option). I'm reviewing it, and have a specification question: do we prefer <code>contrapose</code> on <code>a ↔ b</code> to yield <code>¬ a ↔ ¬ b</code> or <code>¬ b ↔ ¬ a</code>?</p>",
        "id": 554944799,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1762876263
    },
    {
        "content": "<p>I would have expected the latter (and that matches the behaviour for implications). What do others think? Let's have a poll:</p>",
        "id": 554944899,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1762876293
    },
    {
        "content": "<p>/poll What should contrapose do to a bi-implication a ↔ b?<br>\n¬ a ↔ ¬ b<br>\n¬ b ↔ ¬ a<br>\nnothing, i.e. this thread is a bad idea</p>",
        "id": 554945103,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1762876352
    }
]