[
    {
        "content": "<p>Suppose I have <code>A : Matrix m n R</code>, and I want to state that <code>A</code> has linearly independent rows/columns. The few lemmas where this comes up in mathlib use the spelling <code>LinearIndependent R fun (i : m) =&gt; A i</code>, but <code>LinearIndependent  R A</code> also works. Similarly, we can use <code>LinearIndependent R fun (i : n) =&gt; Aᵀ i</code> or just <code>LinearIndependent R Aᵀ</code> for columns. </p>\n<p>I suppose one could argue that the latter is defeq abuse, but the former takes up more space, starts to look ugly when <code>A</code> gets complicated, and uses a meaningless dummy variable that can get confusing when mixed with already plentiful indices when working with matrices. Consider the mess of terms like <code>LinearIndependent R fun k : m ↦ (Matrix.of fun i j ↦ f i j) k</code></p>\n<p>Another option is defining <code>abbrev Matrix.rowFun (A : Matrix m n R) : m -&gt; (n -&gt; R) := A</code> and <code>A.colFun</code> similarly, so one can say <code>LinearIndependent R A.rowFun</code>, which is easier to immediately comprehend and is not abusing defeq.  Any thoughts?</p>",
        "id": 505394622,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1741865519
    },
    {
        "content": "<p>One answer would be to change <code>Matrix</code> to a one-field structure, such that the preferred spelling has an explicit coercion</p>",
        "id": 505431273,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741874807
    },
    {
        "content": "<p>I think <code>A.{row,col}Fun</code> could even be shortened to <code>A.{row,col}</code>. Then one can write <code>A.col j</code> for the <code>j</code>th column.</p>",
        "id": 505467785,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1741882822
    },
    {
        "content": "<p>Unfortunately we already have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.col#doc\">docs#Matrix.col</a> and it means something else.</p>",
        "id": 505469597,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741883275
    },
    {
        "content": "<p>(arguably it's a terrible name for what it defines)</p>",
        "id": 505469784,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741883318
    },
    {
        "content": "<p>Terrible enough to change?</p>",
        "id": 505469952,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1741883365
    },
    {
        "content": "<p>I would be open to it, but I would want buy-in from others first.</p>",
        "id": 505470167,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741883410
    },
    {
        "content": "<p>I agree with Johan that <code>A.row i</code>/ <code>A.col j</code> would be a readability win more generally.</p>",
        "id": 505470350,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1741883456
    },
    {
        "content": "<p>Other names for the current <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.col#doc\">docs#Matrix.col</a> : <code>Matrix.ofCol</code>, <code>Matrix.colConst</code></p>",
        "id": 505470422,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741883472
    },
    {
        "content": "<p>(of course, the same applies to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.row#doc\">docs#Matrix.row</a>)</p>",
        "id": 505470592,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741883519
    },
    {
        "content": "<p>I use <code>LinearIndependent R A</code> for rows and <code>LinearIndependent R Aᵀ</code> for columns. I write it almost daily, so I don't find it weird anymore.</p>",
        "id": 505536664,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1741904476
    },
    {
        "content": "<p>What is the deprecation process for changing the name of something and then adding a different thing with the old name, without waiting 6 months?</p>",
        "id": 505755918,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1741981889
    },
    {
        "content": "<p>I think one month (one tagged release) is considered sufficient, though often we just skip the deprecation altogether and explain what happened in the PR description</p>",
        "id": 505783982,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741995298
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/22957\">#22957</a></p>",
        "id": 505847709,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742044886
    },
    {
        "content": "<p>In the PR review thread (<a class=\"stream-topic\" data-stream-id=\"144837\" href=\"/#narrow/channel/144837-PR-reviews/topic/.2322957.20row.20and.20column.20functions.20of.20matrices/with/505849458\">#PR reviews &gt; #22957 row and column functions of matrices</a> ) I've pointed out that there is a question to be answered about whether <code>Matrix.row</code> and <code>.col</code> should be <code>def</code> or <code>abbrev</code>. Some input on this would be nice.</p>",
        "id": 505976658,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742145581
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Spelling.20of.20linear.20independence.20of.20rows.2C.20columns.2E/near/505783982\">said</a>:</p>\n<blockquote>\n<p>I think one month (one tagged release) is considered sufficient, though often we just skip the deprecation altogether and explain what happened in the PR description</p>\n</blockquote>\n<p>I missed the context here; I think given it, it would be best to not skip the deprecation on row and col; so first rename the existing defs before March 31st, and then make the new ones after that</p>",
        "id": 506020372,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742174593
    },
    {
        "content": "<p>/poll How should the existing <code>Matrix.row</code> / <code>Matrix.col</code> be renamed?<br>\n<code>Matrix.rowConst</code>/<code>Matrix.colConst</code><br>\n<code>Matrix.ofRow</code>/<code>Matrix.ofCol</code><br>\nSomething else<br>\nThey shouldn't</p>",
        "id": 506111176,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742208278
    },
    {
        "content": "<p>At <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> 's suggestion, here is a poll. I've also changed the thread title. </p>\n<p>In case it hasn't been made clear, the issue here is that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.row#doc\">docs#Matrix.row</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.col#doc\">docs#Matrix.col</a> refer to constructions that build a matrix with all rows/columns equal. There seems to be a consensus that these names would be better used in such a way that <code>A.row i</code> refers to 'the <code>i</code>th row of the matrix <code>A</code> and similar for columns. </p>\n<p>To move forward with this, the existing <code>Matrix.row</code> and <code>Matrix.col</code> should be renamed/deprecated before the changed definitions are added. In my draft PR I've used my preferred option of <code>Matrix.***Const</code> - but I don't feel strongly.</p>",
        "id": 506112462,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742208570
    },
    {
        "content": "<p>(The PR is <a href=\"https://github.com/leanprover-community/mathlib4/pull/22957\">#22957</a>, and the review thread is here: <a class=\"stream-topic\" data-stream-id=\"144837\" href=\"/#narrow/channel/144837-PR-reviews/topic/.2322957.20row.20and.20column.20functions.20of.20matrices/with/505849458\">#PR reviews &gt; #22957 row and column functions of matrices</a>  - the PR adds the new definitions as well, which is beyond the scope of the poll here.)</p>",
        "id": 506113276,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742208765
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 506144920,
        "sender_full_name": "Tomas Skrivan",
        "timestamp": 1742216495
    },
    {
        "content": "<p>I added another option for consistency with <code>List.replicate</code>.  (Noting also that <code>Array.mkArray</code> may become <code>Array.replicate</code> soon.)</p>",
        "id": 506283493,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1742254152
    },
    {
        "content": "<p>It looks like this latecomer is quite popular. I've changed my vote; does anyone else care to, so we can have something that looks more like a consensus?</p>",
        "id": 506732170,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742391719
    },
    {
        "content": "<p>I guess one other choice is <code>replicateCol</code> vs <code>colReplicate</code></p>",
        "id": 506749724,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742395585
    },
    {
        "content": "<p>We already have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.updateCol#doc\">docs#Matrix.updateCol</a> though</p>",
        "id": 506749771,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742395599
    },
    {
        "content": "<p>One argument against <code>replicate</code> is that it's sort of an accidental that this repeats a row (when we generalized away from <code>Unit</code>), and the expectation is that it will be used to produce a single row</p>",
        "id": 506749974,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742395656
    },
    {
        "content": "<p>Yes - I figured out while considering this that this is the source of the weird name 'row', which is more reasonable if it means a matrix with just one row.</p>",
        "id": 506763742,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742398813
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60Matrix.2Erow.60.20and.20.60Matrix.2Ecol.60.20renaming/near/506749974\">said</a>:</p>\n<blockquote>\n<p>One argument against <code>replicate</code> is that it's sort of an accidental that this repeats a row (when we generalized away from <code>Unit</code>), and the expectation is that it will be used to produce a single row</p>\n</blockquote>\n<p>Alternatively, we just remove that expectation as well (-;</p>",
        "id": 506772485,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1742400837
    },
    {
        "content": "<p>I don't think that it actually arises much in practice. Currently, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=updateRow_subsingleton#doc\">docs#updateRow_subsingleton</a> and the proof of  <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=vecMul_conjTranspose_mul_self_eq_zero#doc\">docs#vecMul_conjTranspose_mul_self_eq_zero</a> are the only places outside a docstring where <code>row (Fin 1)</code> appears in mathlib, and <code>col (Fin 1)</code> only makes three appearances. </p>\n<p><code>row</code> and <code>col</code> for arbitrary types have many more uses.</p>",
        "id": 506774702,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742401354
    },
    {
        "content": "<p>shouldn't you be looking for <code>row Unit</code>?</p>",
        "id": 506783502,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742403599
    },
    {
        "content": "<p>I think most of the results ended up accidentally generalizing</p>",
        "id": 506788010,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742404862
    },
    {
        "content": "<p>yeah, I would not want to deduce too much from the fact that the famously application-free Mathlib library is able to trivially generalize all uses of <code>Unit</code> away here</p>",
        "id": 506788457,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742405026
    },
    {
        "content": "<p>Yes, fair enough. <code>row Unit</code> has no hits. According to the docstring, <code>Fin 1</code> is preferred in this case.</p>",
        "id": 506789221,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742405273
    },
    {
        "content": "<p>Presumably so it more seamlessly fits with the <code>Fin</code> indexing in parts of the matrix API</p>",
        "id": 506789386,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742405325
    },
    {
        "content": "<p>I am a little torn at this point - <code>rowConst</code> is more mathy, <code>replicateRow</code> is more CSy. I like the fact that the former sounds more like a noun. But maybe consistency with <code>List</code> should win the day?</p>",
        "id": 506789861,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742405474
    },
    {
        "content": "<p>Ok, <a href=\"https://github.com/leanprover-community/mathlib4/pull/23150\">#23150</a> does the renaming, with <code>replicate</code>. I think I liked <code>replicateCol</code>/<code>replicateRow</code> less and  less every time I saw the names get longer and thought about <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> 's point, so I've changed my vote again to give another inconvenient tie.</p>",
        "id": 507008591,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742485200
    },
    {
        "content": "<p>I removed my vote for <code>replicateRow</code>, as I realized it doesn't quite do what I expect because I misread the definition a week ago. (I had imagined that for <code>m n α : Type*</code> it took <code>v : n → α</code> and created the rank-1 <code>A : Matrix m n α := .of fun _ ↦ v</code>)</p>",
        "id": 507018320,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742487417
    },
    {
        "content": "<p>Isn't that what it does?</p>",
        "id": 507019799,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742487743
    },
    {
        "content": "<p><code>def row (ι : Type*) (v : n → α) : Matrix ι n α :=  of fun _ y =&gt; v y</code></p>",
        "id": 507020071,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742487812
    },
    {
        "content": "<p>Oh, then the module doc is wrong.</p>",
        "id": 507024980,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742488844
    },
    {
        "content": "<p>In that case, I would prefer to leave the <code>Matrix.rowConst</code> name available as an abbreviation for <code>Matrix.replicateRow</code> with a <code>[Unique m]</code> hypothesis.</p>",
        "id": 507025456,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742488943
    },
    {
        "content": "<p>Please change the module doc in the PR, because it's simply inaccurate.</p>",
        "id": 507025868,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742489042
    },
    {
        "content": "<p>Note that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Function.const#doc\">docs#Function.const</a> has no such <code>Unique</code> assumption</p>",
        "id": 507031109,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742490422
    },
    {
        "content": "<p>What about <code>Matrix.singleRow</code> or something more explicitly suggesting uniqueness?</p>",
        "id": 507031607,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742490555
    },
    {
        "content": "<p><code>Pi.single</code> and <code>Finsupp.single</code> make that suggestion suboptimal maybe.</p>",
        "id": 507031747,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742490593
    },
    {
        "content": "<p>I'd expect <code>singleRow i v = updateRow 0 i v</code>, which isn't the meaning you want here</p>",
        "id": 507032026,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742490661
    },
    {
        "content": "<p>(I also don't think we should add it unless we need it)</p>",
        "id": 507032071,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742490680
    },
    {
        "content": "<p>I don't know how to proceed here.</p>",
        "id": 507034001,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742491169
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197836\">@Jireh Loreaux</span>, does my comment about <code>Function.const</code> change your opinion?</p>",
        "id": 507035723,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742491658
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60Matrix.2Erow.60.20and.20.60Matrix.2Ecol.60.20renaming/near/507025456\">said</a>:</p>\n<blockquote>\n<p>In that case, I would prefer to leave the <code>Matrix.rowConst</code> name available as an abbreviation for <code>Matrix.replicateRow</code> with a <code>[Unique m]</code> hypothesis.</p>\n</blockquote>\n<p>I said it wrong. I meant: <code>Matrix.rowConst</code> as an abbreviation for <code>Matrix.replicateCol</code> with a <code>[Unique m]</code> hypothesis. Does the <code>Unique</code> requirement make sense now?</p>",
        "id": 507075405,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742504875
    },
    {
        "content": "<p>What's the explanation for why <code>rowConst</code> has <code>Unique</code> but <code>Function.const</code> doesn't?</p>",
        "id": 507075574,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742504929
    },
    {
        "content": "<p>Because a matrix is a two-variable function (not a single variable function), and we want a single row (with constant values for <code>rowConst</code>) so we only want <code>m</code> to have a single element.</p>",
        "id": 507075826,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742505016
    },
    {
        "content": "<p>I think you have the definition wrong in your head. the 1x5 matrix <code>[[1,2,3,4,5]]</code> is an example of something that rowConst can produce.</p>",
        "id": 507075942,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742505073
    },
    {
        "content": "<p>And it is a little strange calling that constant because it has one row.</p>",
        "id": 507076022,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742505101
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"329425\">Peter Nelson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60Matrix.2Erow.60.20and.20.60Matrix.2Ecol.60.20renaming/near/507020071\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">row</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">y</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Or more beneficially to my point</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">row</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Function.const</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"n\">v</span>\n</code></pre></div>",
        "id": 507076063,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742505118
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"329425\">Peter Nelson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60Matrix.2Erow.60.20and.20.60Matrix.2Ecol.60.20renaming/near/507075942\">said</a>:</p>\n<blockquote>\n<p>I think you have the definition wrong in your head.</p>\n</blockquote>\n<p>No, I don't. Note the <code>row</code>/<code>col</code> difference: <code>abbrev Matrix.rowConst := Matrix.replicateCol</code></p>",
        "id": 507076779,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742505380
    },
    {
        "content": "<p>Ohhh</p>",
        "id": 507076829,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742505402
    },
    {
        "content": "<p>I still don't follow the <code>Unique</code>, since the const-ness is only obvious in the non-unique case! But I agree that there's some ambiguity between \"each column is the same element repeated\" vs \"each row is the same\"</p>",
        "id": 507077177,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742505549
    },
    {
        "content": "<p>Eric, I'm arguing for this:</p>\n<ol>\n<li>the current <code>Matrix.row</code> is renamed to <code>Matrix.replicateRow</code> (this takes as input a row, i.e., a function <code>v : n → α</code> and a type <code>m</code> and produces <code>A : Matrix m n α</code> with the row <code>v</code> repeated).</li>\n<li>We reserve the name <code>Matrix.rowConst</code> for <code>abbrev Matrix.rowConst [Unique m] (a : α) := Matrix.replicateCol n (Function.const m a)</code> which produces a (single! ensured by <code>Unique</code>) row such that every entry is <code>a</code>.</li>\n<li>I'm not even arguing that we should add this <code>Matrix.rowConst</code> now, only that it's the natural name for this object, and we should not use that name for <code>replicateRow</code>.</li>\n<li>If you didn't want to require <code>Unique m</code>, then it shouldn't be called <code>Matrix.rowConst</code>, it should be called <code>Matrix.const</code>.</li>\n</ol>",
        "id": 507078426,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742506039
    },
    {
        "content": "<p>If we have <code>const</code>, then what's the point of <code>rowConst</code>?</p>",
        "id": 507078834,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742506199
    },
    {
        "content": "<p>Fair enough, if we had <code>Matrix.const</code>, then there would be no need for <code>Matrix.rowConst</code>/<code>Matrix.colConst</code>, which I suppose is the point Eric was trying to make (sorry if I was being dense). But I think may point remains: <code>Matrix.replicateRow</code> has a clear an unambiguous meaning, whereas <code>Matrix.rowConst</code> definitely seems like it should be <code>Function.const</code> with a single row.</p>",
        "id": 507079379,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742506402
    },
    {
        "content": "<p>Thanks, I was missing the fact you were composing row with an additional <code>Function.const</code> to get your new defs.</p>",
        "id": 507079518,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742506456
    },
    {
        "content": "<p>This makes sense to me. I do appreciate Eric’s point though. Despite mathlib, presumably matrices with exactly one row/column are the standard use case, and the word ‘replicate’ evokes almost the exact opposite idea to that.</p>",
        "id": 507079794,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742506580
    },
    {
        "content": "<p>I think Jireh has persuaded me that constRow is worse than ofRow</p>",
        "id": 507079938,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742506656
    },
    {
        "content": "<p>The reason for this rename is because we want to use <code>Matrix.row</code> for something else, right? Is it a projection?</p>",
        "id": 507079943,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742506659
    },
    {
        "content": "<p>So maybe <code>ofRow</code> is an alternative</p>",
        "id": 507079993,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742506671
    },
    {
        "content": "<p>That would satisfy <code>(Matrix.ofRow r).row = Function.const _ r</code></p>",
        "id": 507080160,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742506726
    },
    {
        "content": "<p>So not quite a projection</p>",
        "id": 507080171,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742506733
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/287929-mathlib4/topic/.60Matrix.2Erow.60.20and.20.60Matrix.2Ecol.60.20renaming/near/507079379\">said</a>:</p>\n<blockquote>\n<p>whereas <code>Matrix.rowConst</code> definitely seems like it should be <code>Function.const</code> with a single row.</p>\n</blockquote>\n<p>To me this sounds like making a matrix where all the rows are the same.</p>",
        "id": 507080223,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742506750
    },
    {
        "content": "<p>I agree with Jireh that <code>rowConst</code> is ambiguous, it could be that the constant is a row or that it is constant on rows</p>",
        "id": 507080301,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742506790
    },
    {
        "content": "<p>and it doesn't help that I don't even know which of the two indices is a row to begin with <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span> I get these names confused in excel</p>",
        "id": 507080522,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742506881
    },
    {
        "content": "<p>This is why excel labels the rows with numbers and the columns with letters.</p>",
        "id": 507080772,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742507001
    },
    {
        "content": "<p>Did we perhaps land on <code>ofRow</code>, then?</p>",
        "id": 507095148,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742514515
    },
    {
        "content": "<p>Personally, I still favor <code>replicateRow</code>. I think it's unambiguous and matches existing naming schemes.</p>",
        "id": 507095293,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1742514606
    },
    {
        "content": "<p>Ok! review thread for <a href=\"https://github.com/leanprover-community/mathlib4/pull/23150\">#23150</a> : <a class=\"stream-topic\" data-stream-id=\"144837\" href=\"/#narrow/channel/144837-PR-reviews/topic/.2323150.20Matrix.20row.2Fcolumn.20rename/with/507095439\">#PR reviews &gt; #23150 Matrix row/column rename</a></p>",
        "id": 507095525,
        "sender_full_name": "Peter Nelson",
        "timestamp": 1742514749
    }
]