[
    {
        "content": "<p>Is there a reason why algebras internal to monoidal categories (<code>Mon_</code>, <code>Mod_</code>, etc.) are designed to be bundled structures?</p>\n<p>Would it be reasonable to have a semi-bundled type class approach like <code>[MonoidalCategory C] (X : C) [Mon_ C]</code>, just like usual algebra type classes in mathlib?</p>\n<p>cc <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span></p>",
        "id": 454596139,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1722162284
    },
    {
        "content": "<p>I assume you mean <code>[Mon_ X]</code>? Personally, I would not mind if we had these.</p>\n<p>On a similar note, I would think that given a functor <code>F</code> between monoidal categories, we should define a typeclass <code>Functor.Monoidal</code> expressing that a functor <code>F</code> is a monoidal functor (resp. lax/oplax). Similarly, if we have a natural transformation between functors which happen to be monoidal, there should be a typeclass saying that the transformation is compatible with the monoidal structure. (I believe that there is also a use for the category <code>MonoidalFunctor</code>, but sooner or later, we shall construct functors which are both monoidal and triangulated. Then, I think that having only the bundled versions would be suboptimal.)</p>\n<p>If we combine the two aspects, we would have instances like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MonoidalCategory</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">MonoidalCategory</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Mon_</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">⥤</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">F.Monoidal</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Mon_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F.obj</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 454603502,
        "sender_full_name": "Joël Riou",
        "timestamp": 1722166579
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span>, unbundled monoidal functors exist already (2019!), but are barely developed.</p>\n<p>See <a href=\"https://tqft.net/mathlib4files/CategoryTheory/Monoidal/Functorial\">file#CategoryTheory/Monoidal/Functorial</a>.</p>",
        "id": 454678958,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722209266
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Algebras.20in.20monoidal.20categories.2C.20bundled.20or.20semi-bundled.3F/near/454678958\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"459699\">Joël Riou</span>, unbundled monoidal functors exist already (2019!), but are barely developed.</p>\n<p>See <a href=\"https://tqft.net/mathlib4files/CategoryTheory/Monoidal/Functorial\">file#CategoryTheory/Monoidal/Functorial</a>.</p>\n</blockquote>\n<p>Good. Then, we should consider deduplicating the API. I think that the prime API show be the unbundled API, and we should redefine the bundled version using the unbundled API.</p>",
        "id": 454713373,
        "sender_full_name": "Joël Riou",
        "timestamp": 1722226780
    },
    {
        "content": "<p>The branch <a href=\"https://github.com/leanprover-community/mathlib4/tree/ymizuno-Mon_Cat\">branch#ymizuno-Mon_Cat</a> is trying out the unbundled version of <code>Mon_</code>.</p>",
        "id": 454729606,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1722232551
    },
    {
        "content": "<p>The experience so far was good and I have opened PRs to add the type classes:</p>\n<ol>\n<li>feat(CategoryTheory/Monoidal): add <code>Mon_Class</code> type class <a href=\"https://github.com/leanprover-community/mathlib4/pull/17185\">#17185</a></li>\n<li>feat(CategoryTheory/Monoidal): add <code>IsMon_Hom</code> type class <a href=\"https://github.com/leanprover-community/mathlib4/pull/17186\">#17186</a></li>\n</ol>\n<p>These PRs only add definitions and do not modify existing code yet. That will be addressed in subsequent PRs.</p>",
        "id": 473058179,
        "sender_full_name": "Yuma Mizuno",
        "timestamp": 1727428700
    },
    {
        "content": "<p>In PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/17904\">#17904</a>, I am refactoring lax/oplax/monoidal functors using typeclasses instead of bundled structures. Given a functor <code>F</code>, one may add instances <code>F.LaxMonoidal</code>, <code>F.OplaxMonoidal</code> or <code>F.Monoidal</code>, instead of defining bundled objects <code>LaxMonoidalFunctor</code>, etc.</p>",
        "id": 477792403,
        "sender_full_name": "Joël Riou",
        "timestamp": 1729331758
    },
    {
        "content": "<p>I merged the dependency PR.</p>",
        "id": 478081346,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729522328
    }
]