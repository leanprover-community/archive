[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Removing.20unnecessary.20uses.20of.20.60PartENat.60/near/485745726\">said</a>:</p>\n<blockquote>\n<p>I have added a section at <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency\">https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency</a></p>\n</blockquote>\n<blockquote>\n<p>This should take insignificant time and not rebuild any mathlib files.</p>\n</blockquote>\n<p>Unfortunately, it seems like this is false nowadays...</p>",
        "id": 485782903,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1733213976
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"714334\">@Javier Lopez-Contreras</span> and I were pair-programming yesterday on FLT using gitpod, and everything was super-laggy until we removed all the <code>import Mathlib</code> from the files upstream of where we were working</p>",
        "id": 485783164,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1733214041
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> for an extra reason not to use <code>import Mathlib</code> in FLT files besides the \"docs take ages to build\" point</p>",
        "id": 485783257,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1733214071
    },
    {
        "content": "<p>Hmm. I really like <code>import Mathlib</code> for the following reason. You sit down for an FLT session, you make a new file, you write down the thing you want to prove, you think \"I'll be a good citizen and minimise imports\", and then you start working on it, and random instances don't fire, and exact? doesn't work, and you get frustrated about how stupid Lean is and/or how bad people were at writing an API for your objects, and then you go back to <code>import Mathlib</code> and your problems are all solved, and then you discover that because of all of this aggressive import minimisation recently, what's happened is that your code is importing <code>FancyThing.Defs</code> to make the statement compile, but not <code>FancyThing.Basic</code> where all the facts/instances about it are. <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> do you have any thoughts on this?</p>",
        "id": 485787342,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733215242
    },
    {
        "content": "<p>I would rather pay the \"docs take ages to build\" price than the frustration of not knowing what to import any more because we've got too good at modularising files in mathlib, at least <em>when developing</em>.</p>",
        "id": 485787630,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733215329
    },
    {
        "content": "<p>Is there some magic switch which I can press, which makes VS Code import all of Mathlib when I'm developing even though I have minimal imports in my files? What I worry about with \"get CI to run shake\" is that I minimise imports and push, and then pull and start again and then everything is degraded because I forgot to change the top line to \"<code>import Mathlib</code> because I'm developing again\". More than once I have thought \"dammit why doesn't this file <code>import Mathlib</code>, that was the problem all along\".</p>",
        "id": 485788515,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733215592
    },
    {
        "content": "<p>I've also noticed that adding <code>import Mathlib</code> at the top of the file adds 5-10 seconds of waiting. This is breaking my flow and definitely very annoying.</p>",
        "id": 485809655,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1733221104
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span>, it's definitely a trade-off. For the most part, I just want to insist that working on the import structure of Mathlib (in particular, untangling, separating, slimming down) is really important for the long-term.</p>\n<p>But there are a couple of things that I think we should do:</p>\n<ol>\n<li>Marc is planning on starting some work (early) next year that will help find missing imports, at least at the level of not-yet-imported identifiers. I'm not sure that there are any plans specifically for helping with missing instances, however.</li>\n<li>Perhaps we could explore an <code>interactive import</code> command, which only runs in VSCode. You'd still have to get the imports right for <code>lake build</code> (i.e. before you can actually commit). This feels a little unlikely to be a good solution to me, but we should think it through!</li>\n<li>\n<p>I think Mathlib should institute a policy (automated!) of having a <code>.lean</code> file for every subdirectory, which simply imports everything in that subdirectory.</p>\n<ul>\n<li>It would be forbidden to import these from Mathlib itself</li>\n<li>But from downstream projects, it would give a good intermediate between minimized imports and <code>import Mathlib</code>. You'd just be able to <code>import Mathlib.RingTheory</code>, etc.</li>\n<li>An obvious objection is that our directories aren't very well organized, and the obvious fix is to organize them better! Hopefully having these import-only files would actually give us some incentive to do that organization.</li>\n<li>Note that Batteries and Lean both already do exactly this, so we would be in good company!</li>\n</ul>\n</li>\n</ol>",
        "id": 485820684,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733224122
    },
    {
        "content": "<p>I also noticed that <code>import Mathlib</code> became unusable and it makes me pretty sad. What happened?</p>",
        "id": 485828162,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1733226299
    },
    {
        "content": "<p>Is the cost of <code>import Mathlib</code> linear in the number of files (as opposed to total file size), and therefore made worst by splitting files?</p>",
        "id": 485840982,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1733229816
    },
    {
        "content": "<p>Could we please try separating \"the line <code>import Mathlib</code> is slow\" and \"the line <code>import Mathlib</code> makes everything below it slow\" (this thread) into two threads? I don't think they have the same cause</p>",
        "id": 485860778,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1733234654
    },
    {
        "content": "<p>For example I can't tell which of the two issues Patrick is referring to (both?)</p>",
        "id": 485861502,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1733234843
    },
    {
        "content": "<p>Yes, I'm not having any trouble with <code>import Mathlib</code> (which is why I'm continually doing it) but for sure I don't need any of the set theory and combinatorics, and right now I don't need the differential geometry either, so there's definitely scope for imports which are more aggressive in number theory/algebra (and thus more likely to pick up all instances I need) whilst not taking in everything.</p>",
        "id": 485877237,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733238522
    },
    {
        "content": "<p>It would be nice if we had multiple mid-level imports like that, assuming we can find enough domain experts to curate them</p>",
        "id": 485880565,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733239320
    },
    {
        "content": "<p>I don't agree with Kim that this should just be a folder level import</p>",
        "id": 485880743,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733239356
    },
    {
        "content": "<p>I was talking about: I start a file with <code>import Mathlib</code> and then I need to wait for a very long time before I can do anything with it. But then Lean behaves normally.</p>",
        "id": 485915060,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1733248149
    },
    {
        "content": "<p>If I ever change imports in a file at any stage then I always \"restart server\" or at least \"restart file\". It's a habit I've got into, I've basically convinced myself that it helps (I might be wrong).</p>",
        "id": 485961529,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733263071
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/287929-mathlib4/topic/import.20Mathlib.20slows.20down.20loading/near/485880743\">said</a>:</p>\n<blockquote>\n<p>I don't agree with Kim that this should just be a folder level import</p>\n</blockquote>\n<p>What is your alternative suggestion?</p>",
        "id": 485965082,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1733264398
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/import.20Mathlib.20slows.20down.20loading/near/485961529\">said</a>:</p>\n<blockquote>\n<p>If I ever change imports in a file at any stage then I always \"restart server\" or at least \"restart file\". It's a habit I've got into, I've basically convinced myself that it helps (I might be wrong).</p>\n</blockquote>\n<p>Please stop doing that and report issues if changing the imports of a file doesn't work correctly.</p>\n<p>Using 'Restart Server' whenever you change the imports induces a significant overhead. All files that you have open as tabs will be re-elaborated entirely and we need to reload all .ileans as well.<br>\nUsing 'Restart File' should not be necessary if VS Code doesn't tell you to use it. Changing the imports of the file already restarts the file worker process, it just doesn't automatically trigger a (potentially expensive) rebuild, which you can then trigger manually with 'Restart File' if VS Code tells you that this is necessary.</p>",
        "id": 486050177,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1733305439
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/287929-mathlib4/topic/import.20Mathlib.20slows.20down.20loading/near/485915060\">said</a>:</p>\n<blockquote>\n<p>I was talking about: I start a file with <code>import Mathlib</code> and then I need to wait for a very long time before I can do anything with it. But then Lean behaves normally.</p>\n</blockquote>\n<p>Okay, let's try distilling that issue. Not necessarily saying there will be a (simple) solution but I at least want to understand Mathlib's scalability. Could you confirm this is about the same time <code>time lake env lean Mathlib.lean</code> takes on the cmdline? It's 1.7s for me but this is also a very fast machine.</p>",
        "id": 486056327,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1733307316
    },
    {
        "content": "<p>FWIW, on my machine (fairly new reasonably fast laptop (Linux)):</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>mstoll@btm2xg:~$ cd lean4/mathlib4/\nmstoll@btm2xg:~/lean4/mathlib4$ time lake env lean Mathlib.lean\n\nreal    0m24,085s\nuser    0m3,149s\nsys     0m4,575s\nmstoll@btm2xg:~/lean4/mathlib4$ time lake env lean Mathlib.lean\n\nreal    0m1,696s\nuser    0m1,393s\nsys     0m0,304s\n</code></pre></div>\n<p>Maybe it had to build something the first time around...</p>",
        "id": 486059433,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1733308243
    },
    {
        "content": "<p>Right, Lake might do some more work in the first invocation depending on what you did before that. The same should be true when restarting the file or changing imports in the editor.</p>",
        "id": 486059845,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1733308364
    },
    {
        "content": "<p>My timings</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"n\">real</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m7</span><span class=\"o\">,</span><span class=\"mi\">198</span><span class=\"n\">s</span>\n<span class=\"n\">user</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m3</span><span class=\"o\">,</span><span class=\"mi\">095</span><span class=\"n\">s</span>\n<span class=\"n\">sys</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">m1</span><span class=\"o\">,</span><span class=\"mi\">153</span><span class=\"n\">s</span>\n</code></pre></div>\n<p>I haven't measured the waiting time when adding <code>import Mathlib</code>, but it seems plausibly in the same ball-park.</p>\n<p>Collected on mathlib revision <code>d7abea93d01641d025a6fdcaa8bc0298f17cd9ee</code> (fresh master, unmodified). Did <code>lake exe cache get</code> before. 12 GB of RAM, somewhat old CPU (i7-6600U, 4 cores). Linux (Debian stable).</p>",
        "id": 486066513,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1733310469
    },
    {
        "content": "<p>Aah, so perhaps the phenomenon I observed (change imports, very long pause, I get frustrated, I restart file, very short pause, deduce that restarting is beneficial) is spurious and what's actually going on is that there's a one-time cost which is independent of the restarting.</p>",
        "id": 486070078,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1733311648
    },
    {
        "content": "<p>On a reasonably fast Windows laptop, the improvement is unfortunately not as great after the first run:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Floris</span><span class=\"bp\">@</span><span class=\"n\">Dell</span><span class=\"bp\">-</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">MINGW64</span><span class=\"w\"> </span><span class=\"bp\">~/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">mathlibf</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">a38db992d08</span><span class=\"bp\">...</span><span class=\"o\">))</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n\n<span class=\"n\">real</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m21</span><span class=\"bp\">.</span><span class=\"m\">173</span><span class=\"n\">s</span>\n<span class=\"n\">user</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m0</span><span class=\"bp\">.</span><span class=\"m\">000</span><span class=\"n\">s</span>\n<span class=\"n\">sys</span><span class=\"w\">     </span><span class=\"mi\">0</span><span class=\"n\">m0</span><span class=\"bp\">.</span><span class=\"m\">000</span><span class=\"n\">s</span>\n\n<span class=\"n\">Floris</span><span class=\"bp\">@</span><span class=\"n\">Dell</span><span class=\"bp\">-</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">MINGW64</span><span class=\"w\"> </span><span class=\"bp\">~/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">mathlibf</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">a38db992d08</span><span class=\"bp\">...</span><span class=\"o\">))</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n\n<span class=\"n\">real</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m6</span><span class=\"bp\">.</span><span class=\"m\">874</span><span class=\"n\">s</span>\n<span class=\"n\">user</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m0</span><span class=\"bp\">.</span><span class=\"m\">000</span><span class=\"n\">s</span>\n<span class=\"n\">sys</span><span class=\"w\">     </span><span class=\"mi\">0</span><span class=\"n\">m0</span><span class=\"bp\">.</span><span class=\"m\">000</span><span class=\"n\">s</span>\n\n<span class=\"n\">Floris</span><span class=\"bp\">@</span><span class=\"n\">Dell</span><span class=\"bp\">-</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">MINGW64</span><span class=\"w\"> </span><span class=\"bp\">~/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">mathlibf</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">a38db992d08</span><span class=\"bp\">...</span><span class=\"o\">))</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n\n<span class=\"n\">real</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m6</span><span class=\"bp\">.</span><span class=\"m\">798</span><span class=\"n\">s</span>\n<span class=\"n\">user</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m0</span><span class=\"bp\">.</span><span class=\"m\">000</span><span class=\"n\">s</span>\n<span class=\"n\">sys</span><span class=\"w\">     </span><span class=\"mi\">0</span><span class=\"n\">m0</span><span class=\"bp\">.</span><span class=\"m\">000</span><span class=\"n\">s</span>\n</code></pre></div>",
        "id": 486091226,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1733318494
    },
    {
        "content": "<p><code>lake build</code> seems to speed up more drastically (this is in the same repository after only running <code>lake env lean Mathlib.lean</code> a few times):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Floris</span><span class=\"bp\">@</span><span class=\"n\">Dell</span><span class=\"bp\">-</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">MINGW64</span><span class=\"w\"> </span><span class=\"bp\">~/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">mathlibf</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">a38db992d08</span><span class=\"bp\">...</span><span class=\"o\">))</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">Build</span><span class=\"w\"> </span><span class=\"n\">completed</span><span class=\"w\"> </span><span class=\"n\">successfully</span><span class=\"bp\">.</span>\n\n<span class=\"n\">real</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m57</span><span class=\"bp\">.</span><span class=\"m\">523</span><span class=\"n\">s</span>\n<span class=\"n\">user</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m0</span><span class=\"bp\">.</span><span class=\"m\">000</span><span class=\"n\">s</span>\n<span class=\"n\">sys</span><span class=\"w\">     </span><span class=\"mi\">0</span><span class=\"n\">m0</span><span class=\"bp\">.</span><span class=\"m\">000</span><span class=\"n\">s</span>\n\n<span class=\"n\">Floris</span><span class=\"bp\">@</span><span class=\"n\">Dell</span><span class=\"bp\">-</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">MINGW64</span><span class=\"w\"> </span><span class=\"bp\">~/</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">mathlibf</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">a38db992d08</span><span class=\"bp\">...</span><span class=\"o\">))</span>\n<span class=\"bp\">$</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n<span class=\"n\">Build</span><span class=\"w\"> </span><span class=\"n\">completed</span><span class=\"w\"> </span><span class=\"n\">successfully</span><span class=\"bp\">.</span>\n\n<span class=\"n\">real</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m1</span><span class=\"bp\">.</span><span class=\"m\">977</span><span class=\"n\">s</span>\n<span class=\"n\">user</span><span class=\"w\">    </span><span class=\"mi\">0</span><span class=\"n\">m0</span><span class=\"bp\">.</span><span class=\"m\">000</span><span class=\"n\">s</span>\n<span class=\"n\">sys</span><span class=\"w\">     </span><span class=\"mi\">0</span><span class=\"n\">m0</span><span class=\"bp\">.</span><span class=\"m\">000</span><span class=\"n\">s</span>\n</code></pre></div>",
        "id": 486093663,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1733319251
    },
    {
        "content": "<p>I did some tests opening a file with only <code>import Mathlib</code> as its contents. This was in a repository where I got a fresh cache and then ran <code>lake env lean Mathlib.lean</code> and <code>lake build</code> a few times. Then I opened a file with only <code>import Mathlib</code>:<br>\nThe first time opening took &gt;60 seconds, I didn't time it exactly.<br>\nRestarting the file then took 32 seconds.<br>\nAfter that, restarting the file or the server, or reloading the VSCode window all take roughly 8-14 seconds.</p>\n<p>The first two loading times are very long, but after that it seems to be quite quick.</p>",
        "id": 486093706,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1733319264
    },
    {
        "content": "<p>So you open VSCode the first time, and it takes &gt; 60s. But after a few restarts, when you close VSCode completely, and open again, then it takes 8-14s?<br>\nCould this have anything to do with loading all oleans in RAM? And when opening VSCode later, the files are still sitting in RAM?</p>\n<p>This is me doing a wild guess...</p>",
        "id": 486112120,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1733324334
    },
    {
        "content": "<p>One test I did was closing VSCode and then immediately reopening it, which indeed was quick. <br>\nBut if I reopen it now, after my computer was turned off, it again takes &gt;60s.</p>",
        "id": 486122583,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1733326976
    },
    {
        "content": "<p>How come</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n</code></pre></div>\n<p>in the web editor is still fast (3-4 seconds)? I don't think it's run on super beefy machines? Some caching machanism in action, like observed by people here after the first run? Anything can be learned from their setup?</p>",
        "id": 486123878,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1733327314
    },
    {
        "content": "<p>So your guess that the files were still in RAM might be right.</p>",
        "id": 486125774,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1733327854
    },
    {
        "content": "<p>I don't really know anything about windows but if you want to check your theory, it looks like the page cache is called the \"standby list\" on Windows, and you can use <a href=\"https://learn.microsoft.com/en-us/sysinternals/downloads/rammap\">https://learn.microsoft.com/en-us/sysinternals/downloads/rammap</a> to clear it (and then check to see if you always get 60s startup).</p>",
        "id": 486136788,
        "sender_full_name": "Julian Berman",
        "timestamp": 1733330814
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110087\">Kim Morrison</span> <a href=\"#narrow/channel/287929-mathlib4/topic/import.20Mathlib.20slows.20down.20loading/near/485965082\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/287929-mathlib4/topic/import.20Mathlib.20slows.20down.20loading/near/485880743\">said</a>:</p>\n<blockquote>\n<p>It would be nice if we had multiple mid-level imports like that, assuming we can find enough domain experts to curate them</p>\n<p>I don't agree with Kim that this should just be a folder level import</p>\n</blockquote>\n<p>What is your alternative suggestion?</p>\n</blockquote>\n<p>Like <code>Mathlib.Tactic</code>: <code>Mathlib.NumberTheory</code> (or maybe <code>Mathlib.Bundles.NumberTheory</code>) would be a file maintained by domain experts to have a reasonable collection of stuff relevant for doing things in number theory. Possibly there would be multiple \"profiles\" depending on whether you want just the basics or something more complete. Probably <code>Mathlib.NumberTheory</code> itself should be reserved for the kitchen sink import. But the details here depend on what \"profiles\" exist and this needs more domain expertise than I have.</p>",
        "id": 486273165,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1733395029
    }
]