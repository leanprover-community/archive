[
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- Mathlib/LinearAlgebra/Matrix/SesquilinearForm.lean:174</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">toLinearMap‚Çõ‚Çó‚ÇÇ'_apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">N‚ÇÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">R‚ÇÅ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">R‚ÇÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"c1\">-- porting note: we don't seem to have `‚àë i j` as valid notation yet</span>\n<span class=\"w\">    </span><span class=\"n\">Matrix</span><span class=\"bp\">.</span><span class=\"n\">toLinearMap‚Çõ‚Çó‚ÇÇ'</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">œÉ‚ÇÅ</span><span class=\"w\"> </span><span class=\"n\">œÉ‚ÇÇ</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">‚àë</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">‚àë</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">œÉ‚ÇÅ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\">  </span><span class=\"n\">œÉ‚ÇÇ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">toLinearMap‚Çõ‚Çó‚ÇÇ'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">toMatrix‚Çõ‚Çó‚ÇÇ'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">LinearEquiv</span><span class=\"bp\">.</span><span class=\"n\">coe_symm_mk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">toLinearMap‚ÇÇ'Aux</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mk‚ÇÇ'‚Çõ‚Çó_apply</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_congr</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_congr</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">smul_comm</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>(<a href=\"https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/LinearAlgebra/Matrix/SesquilinearForm.lean#L174\">https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/LinearAlgebra/Matrix/SesquilinearForm.lean#L174</a>)</p>\n<p>Does anybody know how to make the <code>‚àë i j</code> notation work?</p>",
        "id": 509366907,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1743488044
    },
    {
        "content": "<p>Try <code>‚àë (i) (j)</code>?</p>",
        "id": 509412018,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1743502528
    },
    {
        "content": "<p>Perhaps relevant:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"bp\">‚àÉ</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"c1\">-- ok</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"bp\">‚®Ü</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n</code></pre></div>",
        "id": 509417948,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743504542
    },
    {
        "content": "<p>I guess we can copy something from the elaborator for <code>Exists</code>?</p>",
        "id": 509417985,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743504551
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span>, can <code>notation3</code> be made to support <code>explicitBinders </code>?</p>",
        "id": 509418268,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743504651
    },
    {
        "content": "<p>Fixing limitations in extendedBinders is on the radar.</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/7227\">mathlib4#7227</a> was an experiment awhile back, but I had reservations about it being so complicated. I think it might be flexible enough to accommodate all the <code>Finset.sum</code> elaboration features as part of a <code>notation3</code>-defined notation.</p>",
        "id": 509512144,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743529334
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/notation.3A.20sum.20with.20two.20indices/near/509417948\">said</a>:</p>\n<blockquote>\n<p>Perhaps relevant:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"bp\">‚àÉ</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"c1\">-- ok</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"bp\">‚®Ü</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">‚â†</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>cf. <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/uniformize.20binders/near/479252449\">#mathlib4 &gt; uniformize binders @ üí¨</a></p>",
        "id": 509523665,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1743532932
    },
    {
        "content": "<p>Can we ignore <code>Finset.sum</code> binders for now and at least make <code>Union</code> and <code>iSup</code> match <code>Exists</code>?</p>",
        "id": 509526535,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1743533903
    },
    {
        "content": "<p>That's just a side comment about how flexible the binders in that PR are</p>",
        "id": 509526685,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743533960
    },
    {
        "content": "<p>Have you investigated why it is that Exists supports this yet? There are multiple distinct Exists syntaxes.</p>",
        "id": 509526948,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743534037
    },
    {
        "content": "<p>We're thinking about trying to regularize how binders work in core. If we can get to doing that, that might give a nice resolution to this problem.</p>",
        "id": 509527425,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743534226
    },
    {
        "content": "<p>If there's some acceptable enough hack that can be done to <code>notation3</code> in the meantime, I'm happy to review the idea and the PR</p>",
        "id": 509527633,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743534292
    },
    {
        "content": "<p>Or maybe there's enough will to have mathlib take on the risk of the complexity of <a href=\"https://github.com/leanprover-community/mathlib4/pull/7227\">#7227</a>?</p>",
        "id": 509527895,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1743534378
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> what do you think the risks are?<br>\nAlso, should we rename <code>notation3</code> by now?</p>",
        "id": 511330642,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1744269153
    },
    {
        "content": "<p>I think it's about time we removed all references to \"3\" and \"4\"</p>",
        "id": 511334594,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1744270532
    }
]