[
    {
        "content": "<p>Hi all,</p>\n<p>I am getting the following weird error when trying to run <code>lake exe cache get</code>. My system is NixOS and my channel is 24.11</p>\n<p>Here is the error</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">vatsa</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc2/bin/clang -c -o ././.lake/packages/mathlib/.lake/build/ir/Cache/Main.c.o.export ././.lake/packages/mathlib/.lake/build/ir/Cache/Main.c -I /home/vatsa/.elan/toolchains/leanprover--lean4---v4.16.0-rc2/include -fstack-clash-protection -fwrapv -fPIC -fvisibility=hidden -Wno-unused-command-line-argument --sysroot /home/vatsa/.elan/toolchains/leanprover--lean4---v4.16.0-rc2 -nostdinc -isystem /home/vatsa/.elan/toolchains/leanprover--lean4---v4.16.0-rc2/include/clang -O3 -DNDEBUG -DLEAN_EXPORTING</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXStack</span><span class=\"w\"> </span><span class=\"n\">dump</span><span class=\"o\">:</span>\n<span class=\"mf\">0.</span><span class=\"w\">  </span><span class=\"n\">Program</span><span class=\"w\"> </span><span class=\"n\">arguments</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">vatsa</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc2/bin/clang -c -o ././.lake/packages/mathlib/.lake/build/ir/Cache/Main.c.o.export ././.lake/packages/mathlib/.lake/build/ir/Cache/Main.c -I /home/vatsa/.elan/toolchains/leanprover--lean4---v4.16.0-rc2/include -fstack-clash-protection -fwrapv -fPIC -fvisibility=hidden -Wno-unused-command-line-argument --sysroot /home/vatsa/.elan/toolchains/leanprover--lean4---v4.16.0-rc2 -nostdinc -isystem /home/vatsa/.elan/toolchains/leanprover--lean4---v4.16.0-rc2/include/clang -O3 -DNDEBUG -DLEAN_EXPORTING</span>\n<span class=\"n\">Stack</span><span class=\"w\"> </span><span class=\"n\">dump</span><span class=\"w\"> </span><span class=\"n\">without</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"w\"> </span><span class=\"n\">names</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ensure</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">llvm</span><span class=\"bp\">-</span><span class=\"n\">symbolizer</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"n\">PATH</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">var</span><span class=\"w\"> </span><span class=\"ss\">`LLVM_SYMBOLIZER_PATH</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">point</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"o\">):</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">vatsa</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc2/bin/../lib/libLLVM-15.so(_ZN4llvm3sys15PrintStackTraceERNS_11raw_ostreamEi+0x23) [0x7fb036ae4953]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">vatsa</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc2/bin/../lib/libLLVM-15.so(_ZN4llvm3sys17RunSignalHandlersEv+0xee) [0x7fb036ae292e]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">vatsa</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc2/bin/../lib/libLLVM-15.so(+0x16e4dff) [0x7fb036ae4dff]</span>\n<span class=\"bp\">/</span><span class=\"n\">nix</span><span class=\"bp\">/</span><span class=\"n\">store</span><span class=\"bp\">/</span><span class=\"n\">wn7v2vhyyyi6clcyn0s9ixvl7d4d87ic</span><span class=\"bp\">-</span><span class=\"n\">glibc</span><span class=\"bp\">-</span><span class=\"mf\">2.40</span><span class=\"bp\">-</span><span class=\"mi\">36</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">libc</span><span class=\"bp\">.</span><span class=\"n\">so</span><span class=\"bp\">.</span><span class=\"m\">6</span><span class=\"o\">(</span><span class=\"bp\">+</span><span class=\"mi\">0</span><span class=\"n\">x40620</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">x7fb035247620</span><span class=\"o\">]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">vatsa</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc2/bin/../lib/libLLVM-15.so(_ZN4llvm3sys4path16reverse_iteratorppEv+0x155) [0x7fb036ad5fb5]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">vatsa</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc2/bin/../lib/libLLVM-15.so(_ZN4llvm3sys4path8filenameENS_9StringRefENS1_5StyleE+0x29) [0x7fb036ad86c9]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">vatsa</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc2/bin/clang(_Z10clang_mainiPPc+0x22bb) [0x5611e952460b]</span>\n<span class=\"bp\">/</span><span class=\"n\">nix</span><span class=\"bp\">/</span><span class=\"n\">store</span><span class=\"bp\">/</span><span class=\"n\">wn7v2vhyyyi6clcyn0s9ixvl7d4d87ic</span><span class=\"bp\">-</span><span class=\"n\">glibc</span><span class=\"bp\">-</span><span class=\"mf\">2.40</span><span class=\"bp\">-</span><span class=\"mi\">36</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">libc</span><span class=\"bp\">.</span><span class=\"n\">so</span><span class=\"bp\">.</span><span class=\"m\">6</span><span class=\"o\">(</span><span class=\"bp\">+</span><span class=\"mi\">0</span><span class=\"n\">x2a27e</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">x7fb03523127e</span><span class=\"o\">]</span>\n<span class=\"bp\">/</span><span class=\"n\">nix</span><span class=\"bp\">/</span><span class=\"n\">store</span><span class=\"bp\">/</span><span class=\"n\">wn7v2vhyyyi6clcyn0s9ixvl7d4d87ic</span><span class=\"bp\">-</span><span class=\"n\">glibc</span><span class=\"bp\">-</span><span class=\"mf\">2.40</span><span class=\"bp\">-</span><span class=\"mi\">36</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">libc</span><span class=\"bp\">.</span><span class=\"n\">so</span><span class=\"bp\">.</span><span class=\"m\">6</span><span class=\"o\">(</span><span class=\"bp\">__</span><span class=\"n\">libc_start_main</span><span class=\"bp\">+</span><span class=\"mi\">0</span><span class=\"n\">x89</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">x7fb035231339</span><span class=\"o\">]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">vatsa</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc2/bin/clang(_start+0x2a) [0x5611e952202a]</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">vatsa</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc2/bin/clang' exited with code 139</span>\n</code></pre></div>\n<p>Thanks,<br>\nVatsa</p>",
        "id": 495578720,
        "sender_full_name": "Srivatsa Srinivas",
        "timestamp": 1737663507
    },
    {
        "content": "<p>Is elan working for you otherwise (e.g., does <code>elan toolchain list</code> work as expected)? I would also try <code>rm -rf .lake; lake clean</code> to see if that fixes anything.</p>",
        "id": 495579367,
        "sender_full_name": "Nick Ward",
        "timestamp": 1737663803
    },
    {
        "content": "<p>Please update your Nixpkgs and reinstall the toolchain in question (or all of them by deleting ~/.elan)</p>",
        "id": 495579596,
        "sender_full_name": "Sebastian Ullrich",
        "timestamp": 1737663903
    },
    {
        "content": "<p>Updated NixOS and <code>rm -rf ~/.elan</code> did the trick! </p>\n<p>Weird that just doing those two can get rid of segfaults</p>",
        "id": 495581029,
        "sender_full_name": "Srivatsa Srinivas",
        "timestamp": 1737664529
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"688984\">Srivatsa Srinivas</span> has marked this topic as resolved.</p>",
        "id": 495581040,
        "sender_full_name": "Notification Bot",
        "timestamp": 1737664536
    }
]