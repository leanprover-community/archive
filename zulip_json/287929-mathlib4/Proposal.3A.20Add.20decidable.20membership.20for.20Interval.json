[
    {
        "content": "<p>I am proposing to add the following</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Membership</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Interval</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">mem</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableLE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">NonemptyInterval</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Preorder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableLE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Interval</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 565400110,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766713430
    },
    {
        "content": "<p>It will allow us to do something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">interval</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Interval</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">snd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">fst_le_snd</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">grind</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">NonemptyInterval</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">interval</span><span class=\"w\"> </span><span class=\"c1\">-- true</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">interval</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">interval</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 565400266,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766713695
    },
    {
        "content": "<p>Do we already get the membership instance or is that new</p>",
        "id": 565400317,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766713803
    },
    {
        "content": "<p>As far as I know, I haven't found any implementation about it.</p>",
        "id": 565400365,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766713873
    },
    {
        "content": "<p>Originated from <a class=\"stream-topic\" data-stream-id=\"217875\" href=\"/#narrow/channel/217875-Is-there-code-for-X.3F/topic/membership.20with.20interval/with/565399322\">#Is there code for X? &gt; membership with interval</a></p>",
        "id": 565400403,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766713937
    },
    {
        "content": "<p>After I add the implementations, it seems broke <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Interval/Basic.html#Interval.mem_pure\">Interval.mem_pure</a></p>",
        "id": 565403424,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766718183
    },
    {
        "content": "<p>The proof does not need to go to SetLike; does it even need to be a PartialOrder?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mem_pure</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">pure</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">pure</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"c1\">-- original proof</span>\n<span class=\"w\">  </span><span class=\"c1\">-- rw [← SetLike.mem_coe, coe_pure, mem_singleton_iff]</span>\n</code></pre></div>",
        "id": 565403540,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766718378
    },
    {
        "content": "<p>So it looks like there was already another membership instance</p>",
        "id": 565404044,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766719163
    },
    {
        "content": "<p>You should get rid of your new membership and just use the old one</p>",
        "id": 565404059,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766719185
    },
    {
        "content": "<p>Yet, the older one has a stronger requirement of <code>PartialOrder</code> instead of a weaker requirement of <code>Preorder</code> in the new definition.</p>",
        "id": 565404100,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766719254
    },
    {
        "content": "<p>oh I guess representation as a set isn't faithful if you don't have antisymmetry</p>",
        "id": 565404177,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766719360
    },
    {
        "content": "<p>in that case I don't think <code>Interval</code> correctly captures my intuition on what an interval is</p>",
        "id": 565404198,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766719397
    },
    {
        "content": "<p>so I wouldn't be too concerned about preorders</p>",
        "id": 565404204,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766719417
    },
    {
        "content": "<p>I think we can have intervals well defined in a preorder set.</p>",
        "id": 565404973,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766720521
    },
    {
        "content": "<p>So far from <a href=\"https://isabelle.in.tum.de/dist/library/HOL/HOL-Real_Asymp/HOL-Library.Interval.html\">isabelle</a> I found membership of interval still uses preorder.</p>",
        "id": 565405032,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766720616
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/Interval/Basic.html#NonemptyInterval.instCoeSet\">NonemptyInterval.instCoeSet</a> still uses preorder. I am wondering where do we end up with partial order in mathlib.</p>",
        "id": 565405103,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766720718
    },
    {
        "content": "<p>The reason we need <code>PartialOrder</code> is that <code>SetLike</code> requires the map into a <code>Set</code> to be injective, i.e. two different intervals should also yield two different <code>Set</code>s.</p>",
        "id": 565438009,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1766751372
    },
    {
        "content": "<p>Btw, I have made a PR at <a href=\"https://github.com/leanprover-community/mathlib4/pull/33299\">mathlib4#33299</a></p>",
        "id": 565454742,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766765474
    },
    {
        "content": "<p>Interesting, I am curious why <code>Setlike</code> requires <code>Partialorder</code> / injective?</p>",
        "id": 565454817,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766765535
    },
    {
        "content": "<p>It is sad that we will never be able to define the following without breaking definitional equality</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Membership</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Membership</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">WithBot</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">mem</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">⊥</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">False</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">b</span>\n</code></pre></div>",
        "id": 565462316,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766772894
    },
    {
        "content": "<p>I am curious about the following</p>\n<blockquote>\n<p>An alternative to <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/SetLike/Basic.html#SetLike\">SetLike</a> could have been an extensional <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#Membership\">Membership</a> typeclass:</p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">ExtMembership</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">out_param</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">Membership</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">ext_iff</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span>\n</code></pre></div>\n<blockquote>\n<p>While this is equivalent, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/SetLike/Basic.html#SetLike\">SetLike</a> conveniently uses a carrier set projection directly.</p>\n</blockquote>",
        "id": 565462650,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766773218
    },
    {
        "content": "<p>ExtMembership looks good, which does not require injectivity.</p>",
        "id": 565462858,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766773416
    },
    {
        "content": "<p>no it definitely does require injectivity</p>",
        "id": 565463684,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766774341
    },
    {
        "content": "<p>Hmm, I don't see how?</p>",
        "id": 565463862,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766774577
    },
    {
        "content": "<p>Copied an image from wiki<br>\n<a href=\"/user_uploads/3121/F9cviCxubxtcV4mXLvWcmzy-/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/F9cviCxubxtcV4mXLvWcmzy-/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"250x435\" src=\"/user_uploads/thumbnail/3121/F9cviCxubxtcV4mXLvWcmzy-/image.png/840x560.webp\"></a></div>",
        "id": 565463881,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766774611
    },
    {
        "content": "<p>For this preorder set with <code>x R y</code> defined by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mi mathvariant=\"normal\">/</mi><mn>4</mn><mo>≤</mo><mi>y</mi><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">x / 4 \\le y / 4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mord\">/4</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord\">/4</span></span></span></span> over naturral number. I can define intervals <code>[4, 11]</code> and <code>[6, 9]</code>, which are equal. And the corresponding set is just <code>{4,5,6,7,8,9,10,11}</code>.</p>",
        "id": 565464115,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766774870
    },
    {
        "content": "<p>And it satisfies <code>ext_iff</code>.</p>",
        "id": 565464221,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766775036
    },
    {
        "content": "<p>but <code>[4, 11] ≠ [6, 9]</code> because their left endpoints aren't equal</p>",
        "id": 565464619,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766775528
    },
    {
        "content": "<p>but they have the same members</p>",
        "id": 565464623,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766775534
    },
    {
        "content": "<p>so it's not extensional</p>",
        "id": 565464625,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766775541
    },
    {
        "content": "<p>Doesn't that depend on your definition of interval? The lemma <code>[a,b] = [c,d] \\iff a = c \\and b = d</code> will be false. So then we prove that lemma under the stronger partial order assumption...</p>",
        "id": 565464782,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1766775615
    },
    {
        "content": "<p>I was just going off how the type <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Interval#doc\">docs#Interval</a> works</p>",
        "id": 565464963,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766775740
    },
    {
        "content": "<p>Hmm, I am thinking about extensionality: <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">]</mo><mo>=</mo><mo stretchy=\"false\">[</mo><mi>c</mi><mo separator=\"true\">,</mo><mi>d</mi><mo stretchy=\"false\">]</mo><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mi mathvariant=\"normal\">∀</mi><mi>x</mi><mo separator=\"true\">,</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mi>a</mi><mo separator=\"true\">,</mo><mi>b</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo><mo>=</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo>∈</mo><mo stretchy=\"false\">[</mo><mi>c</mi><mo separator=\"true\">,</mo><mi>d</mi><mo stretchy=\"false\">]</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">[a, b] = [c, d] \\iff \\forall x,  (x \\in [a, b]) = (x \\in [c, d])</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">c</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⟺</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">∀</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">a</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">])</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">c</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mclose\">])</span></span></span></span></p>",
        "id": 565464986,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766775769
    },
    {
        "content": "<p>well if you quotient by extensionality you get extensionality for free</p>",
        "id": 565465012,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766775805
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Proposal.3A.20Add.20decidable.20membership.20for.20Interval/near/565464963\">said</a>:</p>\n<blockquote>\n<p>I was just going off how the type <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Interval#doc\">docs#Interval</a> works</p>\n</blockquote>\n<p>Fair enough. <span aria-label=\"smiley\" class=\"emoji emoji-1f603\" role=\"img\" title=\"smiley\">:smiley:</span> </p>\n<p>I hadn't looked at it <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span></p>",
        "id": 565465056,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1766775860
    },
    {
        "content": "<p>Hmm, ain't partial order kind of like a quotient of preorder? Let me lookup more info.</p>",
        "id": 565465124,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766775923
    },
    {
        "content": "<p>an <code>Interval</code> is either the empty interval, or a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NonemptyInterval#doc\">docs#NonemptyInterval</a> which bundles its two endpoints and a proof the the left endpoint is smaller than the right endpoint</p>",
        "id": 565465134,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766775933
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"939203\">Ka Wing Li</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Proposal.3A.20Add.20decidable.20membership.20for.20Interval/near/565465124\">said</a>:</p>\n<blockquote>\n<p>Hmm, ain't partial order kind of like a quotient of preorder? Let me lookup more info.</p>\n</blockquote>\n<p>see <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Antisymmetrization#doc\">docs#Antisymmetrization</a></p>",
        "id": 565465211,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766775998
    },
    {
        "content": "<p>Is there anything like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mo>≅</mo><mi>b</mi><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mi>f</mi><mi>a</mi><mo>≅</mo><mi>f</mi><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">a \\cong b \\iff f a \\cong f b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.589em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≅</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7184em;vertical-align:-0.024em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⟺</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≅</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">b</span></span></span></span>. Galois connection / natural transformation / ..., can't remember the terminology.</p>",
        "id": 565465740,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766776647
    },
    {
        "content": "<p>a weaker form of extensionality</p>",
        "id": 565465771,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766776680
    },
    {
        "content": "<p>not sure what you mean</p>",
        "id": 565465908,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766776865
    },
    {
        "content": "<p>what is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≅</mo></mrow><annotation encoding=\"application/x-tex\">\\cong</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.589em;\"></span><span class=\"mrel\">≅</span></span></span></span></p>",
        "id": 565465929,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766776881
    },
    {
        "content": "<p>Like the intervals <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mn>4</mn><mo separator=\"true\">,</mo><mn>11</mn><mo stretchy=\"false\">]</mo><mo>≅</mo><mo stretchy=\"false\">[</mo><mn>6</mn><mo separator=\"true\">,</mo><mn>9</mn><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[4, 11] \\cong [6, 9]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">4</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">11</span><span class=\"mclose\">]</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≅</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord\">6</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">9</span><span class=\"mclose\">]</span></span></span></span></p>",
        "id": 565465982,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766776944
    },
    {
        "content": "<p>do you mean <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AntisymmRel#doc\">docs#AntisymmRel</a></p>",
        "id": 565466028,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766776995
    },
    {
        "content": "<p>Just realised interesting stuff: for <code>Preorder a</code>, we have <code>Preorder (NonemptyInterval a)</code></p>",
        "id": 565466124,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766777102
    },
    {
        "content": "<p>Yes, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>≅</mo></mrow><annotation encoding=\"application/x-tex\">\\cong</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.589em;\"></span><span class=\"mrel\">≅</span></span></span></span> is the <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AntisymmRel#doc\">docs#AntisymmRel</a>. I am asking about the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext></mrow><annotation encoding=\"application/x-tex\">\\iff</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.549em;vertical-align:-0.024em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⟺</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span></span></span> part.</p>",
        "id": 565466155,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766777145
    },
    {
        "content": "<p>I don't think we have anything exactly like that then</p>",
        "id": 565466187,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766777184
    },
    {
        "content": "<p>I guess you could build it with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RelIso#doc\">docs#RelIso</a></p>",
        "id": 565466196,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766777196
    },
    {
        "content": "<p>or maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RelEmbedding#doc\">docs#RelEmbedding</a></p>",
        "id": 565466268,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766777274
    },
    {
        "content": "<p>Hmm, then we are going back to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=OrderEmbedding#doc\">docs#OrderEmbedding</a> to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SetLike#doc\">docs#SetLike</a> <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 565466520,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766777562
    },
    {
        "content": "<p>Nvm</p>",
        "id": 565466530,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766777569
    },
    {
        "content": "<p>Quick question, why <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RelEmbedding#doc\">docs#RelEmbedding</a> has to be injective?</p>",
        "id": 565468745,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766779795
    },
    {
        "content": "<p>Originated from why <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=OrderEmbedding#doc\">docs#OrderEmbedding</a> has to be injective?</p>",
        "id": 565468827,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766779866
    },
    {
        "content": "<p>Mathematically we just need <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>≤</mo><mi>y</mi><mtext>  </mtext><mo>⟺</mo><mtext>  </mtext><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>⪯</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>y</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">x\\leq y \\iff f(x)\\preceq f(y)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7719em;vertical-align:-0.136em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">≤</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7194em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⟺</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⪯</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mclose\">)</span></span></span></span></p>",
        "id": 565468879,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766779925
    },
    {
        "content": "<p>imaging working on preorder set</p>",
        "id": 565468958,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766779994
    },
    {
        "content": "<p>I feel like it's not as common to have something like that</p>",
        "id": 565469127,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766780173
    },
    {
        "content": "<p>where it's both ways</p>",
        "id": 565469136,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766780180
    },
    {
        "content": "<p>unless it's an embedding of one thing as a sub-thing of another thing</p>",
        "id": 565469148,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1766780204
    },
    {
        "content": "<p>Hmm, it's not that uncommon if we work on the category of preorder sets.</p>",
        "id": 565469486,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766780646
    },
    {
        "content": "<p>Anyway thanks!</p>",
        "id": 565469657,
        "sender_full_name": "Ka Wing Li",
        "timestamp": 1766780862
    }
]