[
    {
        "content": "<p>We have lemmas that require that two sets coincide locally with the assumption <code>ğ“[s] x = ğ“[t] x</code>, like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=continuousWithinAt_congr_nhds#doc\">docs#continuousWithinAt_congr_nhds</a>, and others with the assumption <code>s =á¶ [ğ“ x] t</code> like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=hasFDerivWithinAt_congr_set#doc\">docs#hasFDerivWithinAt_congr_set</a>. These two assumptions are equivalent, thanks to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=nhdsWithin_eq_iff_eventuallyEq#doc\">docs#nhdsWithin_eq_iff_eventuallyEq</a>, so we should choose a normal form. I'd rather go for <code>s =á¶ [ğ“ x] t</code>(because it admits the nice weakening <code>s =á¶ [ğ“[{y}á¶œ] x] t</code> which shows up in some versions like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=hasFDerivWithinAt_congr_set%27#doc\">docs#hasFDerivWithinAt_congr_set'</a>) and deprecate the other form. Any thought on that?</p>",
        "id": 477653314,
        "sender_full_name": "SÃ©bastien GouÃ«zel",
        "timestamp": 1729257297
    },
    {
        "content": "<p>I would go with the second one, I think it reads better.</p>",
        "id": 477656082,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1729258113
    },
    {
        "content": "<p>There is also one less <code>x</code> appearing in it</p>",
        "id": 477656237,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1729258166
    },
    {
        "content": "<p><code>s =á¶ [ğ“ x] t</code> is abusing the set/function defeq, right?</p>",
        "id": 477656831,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729258334
    },
    {
        "content": "<p>Yes, it's abusing defeqs. That's the only reason that could make me hesitate a little bit here.</p>",
        "id": 477657872,
        "sender_full_name": "SÃ©bastien GouÃ«zel",
        "timestamp": 1729258669
    },
    {
        "content": "<p>There is also the spelling <code>(Â· âˆˆ s) =á¶ [ğ“ x] (Â· âˆˆ t)</code> which is a bit hevier but does not abuse defeqs.</p>",
        "id": 477658388,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1729258822
    },
    {
        "content": "<p>I think we're already using this one quite a lot in measure theory, right?</p>",
        "id": 477658477,
        "sender_full_name": "Anatole Dedecker",
        "timestamp": 1729258855
    },
    {
        "content": "<p>Probably we should find the old thread about defeqs rather than rehashing it here, cc <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span> who I think started it</p>",
        "id": 477659593,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729259189
    },
    {
        "content": "<p>I'll find the old thread soon. I think that we should go with <code>s =á¶ [ğ“ x] t</code> and add an issue to do something about the defeq abuse.</p>",
        "id": 477677320,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729264378
    },
    {
        "content": "<p>Possible solutions to the defeq abuse are (a) add a set-specific notation that unfolds to <code>(Â· âˆˆ s) =á¶ [ğ“ x] (Â· âˆˆ t)</code>; (b) turn <code>Set _</code> into a one-field structure with coercion to function given by <code>(Â· âˆˆ s)</code>.</p>",
        "id": 477677592,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729264443
    },
    {
        "content": "<p>See <a href=\"#narrow/channel/287929-mathlib4/topic/.28simp.29.20normal.20forms.20for.20expressions.20about.20.60Filter.60s\">https://leanprover.zulipchat.com/#narrow/channel/287929-mathlib4/topic/.28simp.29.20normal.20forms.20for.20expressions.20about.20.60Filter.60s</a></p>",
        "id": 477678189,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1729264629
    },
    {
        "content": "<p>First PR to uniformize APIs between different <code>WithinAt</code> notions available at <a href=\"https://github.com/leanprover-community/mathlib4/pull/17927\">#17927</a></p>",
        "id": 477702880,
        "sender_full_name": "SÃ©bastien GouÃ«zel",
        "timestamp": 1729273647
    },
    {
        "content": "<p>I've opted to favor the formulation <code>s =á¶ [ğ“ x] t</code> as it's the one that got most support in this discussion.</p>",
        "id": 477703005,
        "sender_full_name": "SÃ©bastien GouÃ«zel",
        "timestamp": 1729273687
    }
]