[
    {
        "content": "<p>The definition of a totally ordered ring (<code>LinearOrderedRing</code>) appears nonstandard to me -- it requires that multiplication be <em>strictly</em> monotonic, rather than merely monotonic; that is, it \"additionally\" requires the ring to be an integral domain. My \"standard\" definition is what is on Wikipedia, but apparently different textbooks give different definitions.</p>\n<p>This came up when I was trying to refactor positive cones of rings to view them as special kinds of subsemiring. I think I will just force total positive cones to be defined over domains, since the nontrivial theory comes in for fields anyway.</p>\n<p>Is there any particular reason why <code>LinearOrderedRing</code> is defined with this convention and not the other? And is there any need for the weaker version of the typeclass?</p>",
        "id": 463514058,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1724101098
    },
    {
        "content": "<p>Do you know an example of a totally ordered ring which doesn't satisfy the axioms of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=LinearOrderedRing#doc\">docs#LinearOrderedRing</a> ?</p>\n<p>Seems that you can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=OrderedRing#doc\">docs#OrderedRing</a> if you don't mind losing the fact that the order is total.</p>\n<p>I just went through all the history of this by the way. This stuff was all in core initially (in Lean 3) and might well have been written by computer scientists with different applications in mind.</p>",
        "id": 463791486,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1724181935
    },
    {
        "content": "<p>Integers with trivial multipliciation and standard addition and order. Or if you want something more natural, R[eps]/eps^2 with eps infinitessimal (R can be any ordered ring really, but take the reals).</p>",
        "id": 463791678,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1724181976
    },
    {
        "content": "<p>It's not crucial for my application (I am working with fields, which are domains, and obviously the definitions are equivalent for domains), but I thought I would ask.</p>",
        "id": 463791876,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1724182029
    },
    {
        "content": "<p>I don't know what \"trivial multiplication\" means on the integers (whilst preserving the axioms of a ring according to Lean) but I believe the infinitesimal example.</p>",
        "id": 463794843,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1724182993
    },
    {
        "content": "<p>oh yeah oops the integer example has no multiplicative unit</p>",
        "id": 463795019,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1724183044
    },
    {
        "content": "<p>I think there is more discussion at<br>\n<a href=\"https://math.stackexchange.com/questions/3822980/different-definitions-of-ordered-ring\">https://math.stackexchange.com/questions/3822980/different-definitions-of-ordered-ring</a><br>\nProbably that is where I remember the examples from haha</p>",
        "id": 463795093,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1724183082
    },
    {
        "content": "<p>By the way, your \"standard\" definition agrees with Bourbaki Algebra ch. VI, which has the following exercise: Given a totally ordered commutative ring, show that the quotient by the ideal formed by the nilpotent elements is a totally ordered integral domain.  Perhaps the mathlib version should be called <code>StrictLinearOrderedRing</code> instead.</p>",
        "id": 463807727,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1724186223
    },
    {
        "content": "<p>I know this would be a huge change but I kinda want to make it now I'm actually working on ordered ring theory that isn't just an abstraction of properties of the reals or whatever.</p>\n<p>Something like<br>\n(move)<code>LinearOrderedRing</code> -&gt; <code>StrictLinearOrderedRing</code><br>\n(new) <code>LinearOrderedRing extends OrderedRing, LinearOrder</code><br>\n(new) <code>StrictLinearOrderedRing.toLinearOrderedRing</code><br>\n[same for semirings]</p>\n<p>Then go through all usages of <code>StrictLinearOrderedRing</code> and see which can be relaxed to <code>LinearOrderedRing</code> (I bet it's a lot of them).</p>\n<p>What do y'all think? Good idea? Or is it not worth the person-hours to refactor and review unless a mathematically relevant use for the distinction appears?</p>\n<p>By concern with waiting is that we will rack up technical debt. For example, I am currently proving that a <code>LinearOrderedRing R</code> induces <code>LinearOrderedRing</code> on its localisations at <code>S : Submonoid R</code>. The right condition on <code>S</code> is <code>S ≤ R⁰</code>, but, since we are in a domain, this is equivalent to <code>0 ∉ S</code>. I'm sure the \"simpler\" choice is being made all the time across Mathlib when <code>LinearOrderedRing</code> is used.</p>",
        "id": 491043131,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1735343259
    },
    {
        "content": "<p>This sounds like a good idea indeed. Do you think that strictness should be a mixin?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">LinearOrderedRing</span><span class=\"w\"> </span><span class=\"c1\">-- aka BourbakiWikiNonstrictLinOrdRing</span>\n<span class=\"w\">  </span><span class=\"bp\">...</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">IsStrict</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrderedRing</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 491082750,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1735382952
    },
    {
        "content": "<p>We can already mixin <code>NoZeroDivisors</code>. Will need to check if this still works for semirings, but I think it should.</p>",
        "id": 491092203,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1735391968
    },
    {
        "content": "<p>OK, for semirings we need the slightly stronger condition that <code>a &gt; 0</code> implies the map <code>(a * ·)</code> is injective.</p>",
        "id": 491098395,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1735398215
    },
    {
        "content": "<p><code>StrictOrderedFoo</code> (where <code>Foo extends Semiring</code>) is also equivalent to (the conjunction of) the mixins <code>PosMulReflectLT</code> and <code>MulPosReflectLT</code>, so I guess we could have it be an alias for that? This would simplify <code>Mathlib.Algebra.Order.Ring.Defs</code> greatly by removing half the declarations.</p>",
        "id": 491098796,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1735398576
    },
    {
        "content": "<p>(By the way, we can't relax the base structure below <code>Semiring</code> because eg <code>LinearOrderedCommMonoidWithZero</code>requires 0 to be the least element. I guess we could add <code>OrderedNonUnitalSemiring</code> for fun, but no further.)</p>",
        "id": 491099962,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1735399757
    }
]