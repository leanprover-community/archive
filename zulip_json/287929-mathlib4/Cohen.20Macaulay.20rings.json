[
    {
        "content": "<p>This thread is for the announce that we have a project trying to develope <code>Cohen-Macaulay</code> rings in <code>https://github.com/xyzw12345/CohenMacaulay</code> and keep track of it for later developements.<br>\nCurrently we are proving the equivalence of the vanishing order of <code>Ext</code> functor and length of regular squence. The first stage goal is the rees theorem (Matsumura Commutative Algebra Chapter 6 Theorem 28)</p>",
        "id": 510684231,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744035281
    },
    {
        "content": "<p>Currently, the repo is a bit messy and quite a few lemmas needed are in open PRs, so the porting from the repo to the branches of mathlib may take some time.</p>",
        "id": 510684977,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744035437
    },
    {
        "content": "<p>This is great news! Will you also think about Gorenstein and complete intersection rings? These three definitions in commutative ring theory will really demonstrate that we have become a big player in commutative algebra.</p>",
        "id": 510750817,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1744054100
    },
    {
        "content": "<p>These are our current works stopping at the Rees theorem.<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/23877\">#23877</a>  and <a href=\"https://github.com/leanprover-community/mathlib4/pull/23935\">#23935</a> probably need some break down.<br>\n<a href=\"/user_uploads/3121/VTkqaFm0-XGJ9Tz3FgnlYIeS/8f4256d8c45b7c28b4270a88e53d1e9.jpg\">8f4256d8c45b7c28b4270a88e53d1e9.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/VTkqaFm0-XGJ9Tz3FgnlYIeS/8f4256d8c45b7c28b4270a88e53d1e9.jpg\" title=\"8f4256d8c45b7c28b4270a88e53d1e9.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"2039x1079\" src=\"/user_uploads/thumbnail/3121/VTkqaFm0-XGJ9Tz3FgnlYIeS/8f4256d8c45b7c28b4270a88e53d1e9.jpg/840x560.webp\"></a></div>",
        "id": 511557282,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744344890
    },
    {
        "content": "<p>Further developements would be:<br>\n1 : the definition of depth<br>\n2 : depth \\le dim (Matsumura Commutative Algebra Chapter 6 Theorem 29)</p>",
        "id": 511557364,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744344953
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/510750817\">said</a>:</p>\n<blockquote>\n<p>This is great news! Will you also think about Gorenstein and complete intersection rings? These three definitions in commutative ring theory will really demonstrate that we have become a big player in commutative algebra.</p>\n</blockquote>\n<p>We currently don't have plans for them for now. As our proffessor is interested in PBW theorem and we would probably work on that in the near future. We can ask him whether if he is intersted in these rings <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 511557799,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744345209
    },
    {
        "content": "<p>He said he is intersted, however we might not be able to work on it as we don't have enough people working on lean and other projects have existed as mentioned above.<br>\nBeside these, we currently don't have well-organized reference and blueprint for the formalizing of the two class of rings you mentioned, do you have ideas about that? Thank you.</p>",
        "id": 511559279,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744346154
    },
    {
        "content": "<p>I don't want to disrupt your plans! I was just asking to try and find out more about what they were</p>",
        "id": 511562545,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1744348098
    },
    {
        "content": "<p>These are nice results! I have added some comments about <a href=\"https://github.com/leanprover-community/mathlib4/pull/23935\">#23935</a>.</p>",
        "id": 511589835,
        "sender_full_name": "Joël Riou",
        "timestamp": 1744359442
    },
    {
        "content": "<p>In general, I would suggest that instead of stating basic \"diagram lemmas\" about objects in <code>ModuleCat</code>, you phrase them in a general abelian category as much as possible, and as my comments on the PR show, most of these lemmas are already in mathlib. In order to state that an object in an abelian category is zero, the better phrasing is by using <code>IsZero</code>: to ease the relation between properties of types and properties of objects in <code>ModuleCat</code> (or <code>AddCommGrp</code>), it would be good to introduce some <code>isZero_iff_subsingleton</code> lemmas (I did not check if we had these already).</p>",
        "id": 511589854,
        "sender_full_name": "Joël Riou",
        "timestamp": 1744359449
    },
    {
        "content": "<p>Actually, we have <code>isZero_of_subsingleton</code>.</p>",
        "id": 511590090,
        "sender_full_name": "Joël Riou",
        "timestamp": 1744359520
    },
    {
        "content": "<p>I think depth &lt;= dim could be done separately? (If you use the regular sequence def) At least we have that in FLT already.</p>",
        "id": 511626620,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1744370834
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459699\">Joël Riou</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/511589854\">said</a>:</p>\n<blockquote>\n<p>In general, I would suggest that instead of stating basic \"diagram lemmas\" about objects in <code>ModuleCat</code>, you phrase them in a general abelian category as much as possible, and as my comments on the PR show, most of these lemmas are already in mathlib. In order to state that an object in an abelian category is zero, the better phrasing is by using <code>IsZero</code>: to ease the relation between properties of types and properties of objects in <code>ModuleCat</code> (or <code>AddCommGrp</code>), it would be good to introduce some <code>isZero_iff_subsingleton</code> lemmas (I did not check if we had these already).</p>\n</blockquote>\n<p><code>isZero_of_subsingleton</code> exists, but not the other side.</p>",
        "id": 511793432,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744449101
    },
    {
        "content": "<p>There are two supplementary PRs <a href=\"https://github.com/leanprover-community/mathlib4/pull/23876\">#23876</a> moving associated prime file into a folder and <a href=\"https://github.com/leanprover-community/mathlib4/pull/23903\">#23903</a> defining <code>Submodule.submoduleOf</code>, can anybody have a look so we can move on to the finiteness of associated primes.</p>",
        "id": 512536912,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744805196
    },
    {
        "content": "<p>Do you have works on finiteness of associated primes? I think I probably duplicated this work in <a href=\"https://github.com/acmepjz/lean-iwasawa/blob/master/Iwasawalib/RingTheory/CharacteristicIdeal/Basic.lean\">https://github.com/acmepjz/lean-iwasawa/blob/master/Iwasawalib/RingTheory/CharacteristicIdeal/Basic.lean</a>. (I'll need to use it very soon so I formalized it by myself.)</p>",
        "id": 512572563,
        "sender_full_name": "Jz Pan",
        "timestamp": 1744814931
    },
    {
        "content": "<p>Oh found it <a href=\"https://github.com/leanprover-community/mathlib4/pull/23877\">#23877</a>. (I have a much shorter proof than yours <span aria-label=\"sunglasses\" class=\"emoji emoji-1f60e\" role=\"img\" title=\"sunglasses\">:sunglasses:</span>)</p>",
        "id": 512573346,
        "sender_full_name": "Jz Pan",
        "timestamp": 1744815116
    },
    {
        "content": "<p>Feel free to copy my proof if you think it's better.</p>",
        "id": 512573774,
        "sender_full_name": "Jz Pan",
        "timestamp": 1744815211
    },
    {
        "content": "<p>This PR is a bit messy now, I'll try to clean it up when I have time (as there is still a mid-term test ...)<br>\nMaybe you can just help edit that PR (please feel free), or if the current dependency is not good enough you can just open another one and we base on that one.<br>\nThis part is originally developed for using prime avoidance when proving the case depth = 0, so the overall impact should not be big.<br>\nThe only thing I want to make sure is whether the by-products we get on the way are really useful?</p>",
        "id": 512589159,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744819025
    },
    {
        "content": "<p>I have a glance and discussed a little with <span class=\"user-mention\" data-user-id=\"750070\">@Wang Jingting</span>(the author of our version), the conclusion is that we may try to \"merge\" your work into the current PR replacing the duplicated parts when we have time, as your proof is more succinct. Hopefully it should be done within this month.</p>",
        "id": 512593739,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744820188
    },
    {
        "content": "<p>The proof is based on this result <a href=\"https://acmepjz.github.io/lean-iwasawa/blueprint/sect0002.html#noeth-ring-filtration\">https://acmepjz.github.io/lean-iwasawa/blueprint/sect0002.html#noeth-ring-filtration</a> which is in stacks <a href=\"https://stacks.math.columbia.edu/tag/00L0\">https://stacks.math.columbia.edu/tag/00L0</a> and is formalized at <a href=\"https://acmepjz.github.io/lean-iwasawa/docs/Iwasawalib/RingTheory/CharacteristicIdeal/Basic.html#IsNoetherianRing.exists_relSeries_isQuotientEquivQuotientPrime\">https://acmepjz.github.io/lean-iwasawa/docs/Iwasawalib/RingTheory/CharacteristicIdeal/Basic.html#IsNoetherianRing.exists_relSeries_isQuotientEquivQuotientPrime</a>. It gives an induction principle for modules <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/How.20to.20write.20induction.20principle.20for.20modules/with/511873962\">#mathlib4 &gt; How to write induction principle for modules</a> , which implies the finiteness of associated primes.</p>\n<p>Such induction principle also have other applications which I need to use later, for example in the proof of <a href=\"https://acmepjz.github.io/lean-iwasawa/blueprint/sect0003.html#char-ideal-preliminary\">https://acmepjz.github.io/lean-iwasawa/blueprint/sect0003.html#char-ideal-preliminary</a>.</p>",
        "id": 512594731,
        "sender_full_name": "Jz Pan",
        "timestamp": 1744820470
    },
    {
        "content": "<p>I see, I think we are literally doing the same thing. Then the \"merge\" should focus on unifying the APIs. As we don't have much works based on the intermediate results, we would probably mainly use your APIs.</p>",
        "id": 512595507,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1744820698
    },
    {
        "content": "<p>I have a more careful look and I think it no longer depend on the induction principle of relseries, so I would probably close the old one and only bring the useful things to the new one.</p>",
        "id": 513269391,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745151811
    },
    {
        "content": "<p>Here is a chunk of code that I don't know whether useful:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">fg_induction</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h_base</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">⊤</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">IsPrincipal</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h_ext</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">),</span>\n<span class=\"w\">      </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ModuleCat.of</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ModuleCat.of</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hM</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Module.Finite</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"c1\">-- [Stacks 00KZ]</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">exists_LTSeries_quotient_cyclic</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LTSeries</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Submodule</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"n\">p.head</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⊥</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">p.last</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⊤</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">    </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">p.length</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"o\">(</span>\n<span class=\"w\">    </span><span class=\"o\">((</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">i.succ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Submodule.comap</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">i.succ</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">subtype</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin.castSucc</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">))))</span><span class=\"w\"> </span><span class=\"bp\">≃ₗ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>(I didn't see the direct dependency relation between these and the associated primes version.)</p>\n<p>I think all other different things  (only the monotonicity of associated primes left <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> )can find their appropriate places.</p>",
        "id": 513273354,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745154953
    },
    {
        "content": "<p>I didn't use 00KZ, but prove 00L0 directly. On Stacks 00L0 is proved using 00KZ, though.</p>",
        "id": 513279309,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745159525
    },
    {
        "content": "<p>I know, I only wonder is this 00KZ really useful?</p>",
        "id": 513327301,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745200903
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/23877\">#23877</a> is closed and now replaced with <a href=\"https://github.com/leanprover-community/mathlib4/pull/24242\">#24242</a></p>",
        "id": 513327978,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745201317
    },
    {
        "content": "<p>Also requesting review for a easy PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/23718\">#23718</a> for equiv between <code>S^{-1}Hom(M,N)</code> and <code>Hom(S^{-1}M, S^{-1}N)</code></p>",
        "id": 513333094,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745205130
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/513327301\">said</a>:</p>\n<blockquote>\n<p>I know, I only wonder is this 00KZ really useful?</p>\n</blockquote>\n<p>I don't know, personally I didn't use it before.</p>",
        "id": 513347400,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745215339
    },
    {
        "content": "<p>Maybe just keep it somewhere until it is needed in another results.</p>",
        "id": 513350097,
        "sender_full_name": "Jz Pan",
        "timestamp": 1745217151
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span>  Sorry for disturbing, this question may seem impolite, but do you have a plan to PR the linear structure on <code>Ext</code>?<br>\nWe are needing some thing like the following and we want to know in what form and where it would go, thanks.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">CategoryTheory.Abelian.Ext</span><span class=\"w\"> </span><span class=\"n\">DerivedCategory</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Category</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Abelian</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">HasExt</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">Ring</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Linear</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span>\n\n<span class=\"kd\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">noncomputable</span><span class=\"w\"> </span><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">homEquiv₀_linearHom</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ext</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≃ₗ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">⟶</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">__</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">addEquiv₀</span>\n<span class=\"w\">  </span><span class=\"n\">map_smul'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">end</span><span class=\"w\"> </span><span class=\"n\">Ring</span>\n\n<span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">CommRing</span>\n\n<span class=\"kd\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Linear</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">]</span>\n\n<span class=\"kd\">noncomputable</span><span class=\"w\"> </span><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">bilinearCompOfLinear</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">→ₗ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">→ₗ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">where</span>\n<span class=\"w\">  </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">toFun</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">α.comp</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">      </span><span class=\"n\">map_add'</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">      </span><span class=\"n\">map_smul'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">map_add'</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">    </span><span class=\"n\">ext</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">map_smul'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">noncomputable</span><span class=\"w\"> </span><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">postcompOfLinear</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">→ₗ</span><span class=\"o\">[</span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">w</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">bilinearCompOfLinear</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">flip</span><span class=\"w\"> </span><span class=\"n\">f</span>\n\n<span class=\"kd\">end</span><span class=\"w\"> </span><span class=\"n\">CommRing</span>\n</code></pre></div>",
        "id": 513805465,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745396200
    },
    {
        "content": "<p>After some refactor, the following is the current dependency graph:<br>\n<a href=\"/user_uploads/3121/JfwRuNEmK_1YAcs1Ay4NRdAH/4982435f285350165149047e1d313d6.jpg\">4982435f285350165149047e1d313d6.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/JfwRuNEmK_1YAcs1Ay4NRdAH/4982435f285350165149047e1d313d6.jpg\" title=\"4982435f285350165149047e1d313d6.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"1627x1079\" src=\"/user_uploads/thumbnail/3121/JfwRuNEmK_1YAcs1Ay4NRdAH/4982435f285350165149047e1d313d6.jpg/840x560.webp\"></a></div>",
        "id": 513806791,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745396637
    },
    {
        "content": "<p>I already did four prerequisite PRs <a href=\"https://github.com/leanprover-community/mathlib4/pull/23779\">#23779</a>,  <a href=\"https://github.com/leanprover-community/mathlib4/pull/23777\">#23777</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/23815\">#23815</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/24309\">#24309</a>.</p>",
        "id": 513811633,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745397994
    },
    {
        "content": "<p>The API should be as in <a href=\"https://github.com/leanprover-community/mathlib4/blob/jriou_localization/Mathlib/Algebra/Homology/DerivedCategory/Ext/Linear.lean\">https://github.com/leanprover-community/mathlib4/blob/jriou_localization/Mathlib/Algebra/Homology/DerivedCategory/Ext/Linear.lean</a></p>",
        "id": 513813886,
        "sender_full_name": "Joël Riou",
        "timestamp": 1745398651
    },
    {
        "content": "<p>Thanks, we will try unify them.</p>",
        "id": 513848346,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745408725
    },
    {
        "content": "<p>Hi all, I am in Beijing now and I am happy to discuss anything about this. Can you summarize what is your proposed definition of depth?</p>",
        "id": 514972625,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1745908884
    },
    {
        "content": "<p>As we have rees theorem now, the index of first nontrivial <code>Ext(A/I, M)</code> and maximal length of <code>M</code>-regular sequence in <code>I</code> is equal when <code>A</code> Noetherian and <code>M</code> finitely generated.<br>\nSo for the definition of <code>depth</code>, which one should we use? As in the case with conditions mentioned above, any of the two won't matter, however in the non-Noetherian case or not finitely generated case (if we really care), which is better?</p>",
        "id": 514999458,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745916647
    },
    {
        "content": "<p>To unify with <code>ringKrullDim</code>, <code>depth</code> would also be <code>WithBot ℕ∞</code>, however in which case should be positive/negative infinity is not clear yet, for example when <code>M = IM</code> <code>Subsingleton A</code></p>",
        "id": 515000345,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745916874
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"764386\">@Ruiqi Chen</span>  found in some books, there is two definitions, one is <code>grad(I,M)</code> the maximal length of regular sequence, <code>depth(I,M)</code> is the first nontrivial <code>Ext(A/I,M)</code>, then rees theorem show they are the same when <code>A</code> Noetherian and <code>M</code> finitely generated.</p>",
        "id": 515001125,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1745917077
    },
    {
        "content": "<p>There is a small problem withe first nontrivial <code>Ext</code>: what should be the universe of <code>M</code>? Note that to write <code>Ext(X, Y)</code> <code>X</code> and <code>Y</code> must be in the same category (<code>A-Mod</code> here), but in particular they must be in the same universe.</p>",
        "id": 515001479,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1745917183
    },
    {
        "content": "<p>He also mentioned we can define <code>depth(N,M)</code> for two modules, in this case should we use <code>ModuleCat R</code> or <code>[AddCommGroup] [Module R]</code>?</p>",
        "id": 515276099,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746012253
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515001479\">said</a>:</p>\n<blockquote>\n<p>There is a small problem withe first nontrivial <code>Ext</code>: what should be the universe of <code>M</code>? Note that to write <code>Ext(X, Y)</code> <code>X</code> and <code>Y</code> must be in the same category (<code>A-Mod</code> here), but in particular they must be in the same universe.</p>\n</blockquote>\n<p>I think we would align with what we use in rees theorem, <code>M : Type v</code> and <code>Small.{v} R/I</code> then use <code>Shrink.{v} R/I</code></p>",
        "id": 515276275,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746012322
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515276099\">said</a>:</p>\n<blockquote>\n<p>He also mentioned we can define <code>depth(N,M)</code> for two modules, in this case should we use <code>ModuleCat R</code> or <code>[AddCommGroup] [Module R]</code>?</p>\n</blockquote>\n<p>I think <code>Module R M</code>, but one can always use <code>Module.of</code>, so this is not extremely important.</p>",
        "id": 515313870,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1746021846
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515276275\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515001479\">said</a>:</p>\n<blockquote>\n<p>There is a small problem withe first nontrivial <code>Ext</code>: what should be the universe of <code>M</code>? Note that to write <code>Ext(X, Y)</code> <code>X</code> and <code>Y</code> must be in the same category (<code>A-Mod</code> here), but in particular they must be in the same universe.</p>\n</blockquote>\n<p>I think we would align with what we use in rees theorem, <code>M : Type v</code> and <code>Small.{v} R/I</code> then use <code>Shrink.{v} R/I</code></p>\n</blockquote>\n<p>I agree, but we want the theorem that if the module itself is the local ring then one can compute this without using <code>Shrink</code>.</p>",
        "id": 515314139,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1746021914
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515276275\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515001479\">said</a>:</p>\n<blockquote>\n<p>There is a small problem withe first nontrivial <code>Ext</code>: what should be the universe of <code>M</code>? Note that to write <code>Ext(X, Y)</code> <code>X</code> and <code>Y</code> must be in the same category (<code>A-Mod</code> here), but in particular they must be in the same universe.</p>\n</blockquote>\n<p>I think we would align with what we use in rees theorem, <code>M : Type v</code> and <code>Small.{v} R/I</code> then use <code>Shrink.{v} R/I</code></p>\n</blockquote>\n<p>We can define a <code>Module</code> version of <code>Ext</code> which is a wrapper of category version of <code>Ext</code>, i.e. <code>CategoryVersionOfExt (lift of X) (lift of Y)</code></p>",
        "id": 515327605,
        "sender_full_name": "Jz Pan",
        "timestamp": 1746025115
    },
    {
        "content": "<p>This should probably be discussed a bit, since we all want a \"concrete\" version of <code>Ext</code> for modules, but it will probably be something like that. And we still want that if <code>R</code> and <code>M</code> are in the same universe then we can compute it without any <code>lift</code>/<code>shrink</code>.</p>",
        "id": 515328559,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1746025312
    },
    {
        "content": "<p><code>Ext</code> in the category <code>ModuleCat</code> commutes with the <code>uliftFunctor</code> on both arguments (at least assuming the ring is \"small\": the reason is that a projective (or injective) module in a small universe stays so in a higher universe), so that in principle, it should be possible to define a heterogeneous universe version of <code>Ext</code>, but I think it would be extremely painful to construct a <em>good</em> API for that (and I certainly do not intend to formalize this anytime soon). Practically speaking, I would think it would be ok to assume that both modules are in the same universe if we want to use <code>Ext</code>.</p>",
        "id": 515385673,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746042323
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515314139\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515276275\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515001479\">said</a>:</p>\n<blockquote>\n<p>There is a small problem withe first nontrivial <code>Ext</code>: what should be the universe of <code>M</code>? Note that to write <code>Ext(X, Y)</code> <code>X</code> and <code>Y</code> must be in the same category (<code>A-Mod</code> here), but in particular they must be in the same universe.</p>\n</blockquote>\n<p>I think we would align with what we use in rees theorem, <code>M : Type v</code> and <code>Small.{v} R/I</code> then use <code>Shrink.{v} R/I</code></p>\n</blockquote>\n<p>I agree, but we want the theorem that if the module itself is the local ring then one can compute this without using <code>Shrink</code>.</p>\n</blockquote>\n<p>For local ring <code>R</code> <code>R/IsLocalRing.MaximalIdeal</code> is also in the same universe of <code>R</code> same as <code>R/I</code>, I think we still need some <code>Small.{v}</code> and <code>Shrink.{v}</code>?</p>",
        "id": 515429887,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746063536
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/511626620\">said</a>:</p>\n<blockquote>\n<p>I think depth &lt;= dim could be done separately? (If you use the regular sequence def) At least we have that in FLT already.</p>\n</blockquote>\n<p>We currently want to prove <code>depth(M) &lt;= dim(R/p)</code> for associated prime <code>p</code>.<br>\nI saw in Matsumura, if we use <code>Ext</code> definition, it still need a lot more things.<br>\nThanks.</p>",
        "id": 515439164,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746070025
    },
    {
        "content": "<p>Sorry, we found it, but I didn't find it straight forward from the existing result.</p>",
        "id": 515439592,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746070299
    },
    {
        "content": "<p>I was referring to  <a href=\"https://github.com/ImperialCollegeLondon/FLT/blob/5316b38f25349bcdabc7a257ecc96b31686abf00/FLT/Patching/Utils/Depth.lean#L52\">https://github.com/ImperialCollegeLondon/FLT/blob/5316b38f25349bcdabc7a257ecc96b31686abf00/FLT/Patching/Utils/Depth.lean#L52</a> in case you didn't find it.</p>",
        "id": 515481440,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1746095169
    },
    {
        "content": "<p>A small question here (may be a bit unrelated):<br>\nDo we have API for the equiv between <code>Ext^n (N,M)</code> and <code>Ext^n(N,M')</code> for <code>M</code> and <code>M'</code> isomorphic? I want to use this but didn't find it, I want to make sure whether it is there, at least the correct way of proving it, thanks.</p>",
        "id": 515714830,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746192699
    },
    {
        "content": "<p>It follows from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=CategoryTheory.Abelian.extFunctor#doc\">docs#CategoryTheory.Abelian.extFunctor</a>.</p>",
        "id": 515716185,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746193077
    },
    {
        "content": "<p>Sorry, one more question : what about <code>Ext^n (N, M) \\equiv Ext^n (M,N)</code>? Thanks</p>",
        "id": 515722884,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746194913
    },
    {
        "content": "<p>This is not true.</p>",
        "id": 515723275,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746195017
    },
    {
        "content": "<p>Sorry, my fault, there isn't such thing.</p>",
        "id": 515734984,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746198103
    },
    {
        "content": "<p>Do you mean balance of Ext?</p>",
        "id": 515816567,
        "sender_full_name": "Jz Pan",
        "timestamp": 1746229573
    },
    {
        "content": "<p>Sorry for disturbing, when can we have <code>Ext</code> isomorphic to the homology of projective resolution? As I am needing <code>Ext</code> finitely generated when over noetherian ring, thanks.</p>",
        "id": 515864741,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746258687
    },
    {
        "content": "<p>The relation with projective resolutions will take a certain time. The finite generation over noetherian rings can be shown easily by induction with the current setup.</p>",
        "id": 515866178,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746259549
    },
    {
        "content": "<p>Ok, maybe I should use dimension shifting to solve it. However, what about the linear version <code>Ext.covariantSequence</code>, I think we always need this, thanks.</p>",
        "id": 515867476,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746260331
    },
    {
        "content": "<p>It will need a few more PRs including <a href=\"https://github.com/leanprover-community/mathlib4/pull/24309\">#24309</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/24567\">#24567</a>...</p>",
        "id": 515873257,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746264146
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span>  I had a look at your definition of depth and had a small question:<br>\nyou wrote </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Module.depth</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">sSup</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">List.length</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sequence.IsWeaklyRegular</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">maximalIdeal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>\n<p>but in my computer this is taking <code>sSup</code> in <code>ℕ</code> then coe to <code>ℕ∞</code>, is this really able to reach <code>∞</code>?</p>",
        "id": 515997169,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746339025
    },
    {
        "content": "<p>We current ly decide to have our def like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">noncomputable</span><span class=\"w\"> </span><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">moduleDepth</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">sSup</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)}</span>\n</code></pre></div>\n<p>which would reach infinity  when <code>M=0</code>, and compatible with regular sequence def when ring noetherian and both finitely generated and nontrivial.</p>",
        "id": 515997295,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746339123
    },
    {
        "content": "<p>Another question: do we have dimension of noetherian local ring is finite? As we want depth to be finite, thanks.</p>",
        "id": 516001132,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746342455
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/516001132\">said</a>:</p>\n<blockquote>\n<p>Another question: do we have dimension of noetherian local ring is finite? As we want depth to be finite, thanks.</p>\n</blockquote>\n<p>This follows from Krull's height theorem, which is not completely ported yet I think.</p>",
        "id": 516001268,
        "sender_full_name": "Christian Merten",
        "timestamp": 1746342590
    },
    {
        "content": "<p>Well, it's actually ready at <a href=\"https://github.com/leanprover-community/mathlib4/pull/23778\">#23778</a>, you can review it if you have time now. <span class=\"user-mention\" data-user-id=\"648495\">@Christian Merten</span></p>",
        "id": 516001380,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1746342695
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515997169\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span>  I had a look at your definition of depth and had a small question:<br>\nyou wrote </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">depth</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">sSup</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sequence</span><span class=\"bp\">.</span><span class=\"n\">IsWeaklyRegular</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">maximalIdeal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>\n<p>but in my computer this is taking <code>sSup</code> in <code>ℕ</code> then coe to <code>ℕ∞</code>, is this really able to reach <code>∞</code>?</p>\n</blockquote>\n<p>The issue is that <code>sSup</code> isn't currently considered an arithmetic operator, so it doesn't propagate the expected type inside. Do</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">depth</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">sSup</span><span class=\"w\"> </span><span class=\"o\">{(</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sequence</span><span class=\"bp\">.</span><span class=\"n\">IsWeaklyRegular</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">maximalIdeal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)}</span>\n</code></pre></div>\n<p>or, much more idiomatically,</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">depth</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sequence</span><span class=\"bp\">.</span><span class=\"n\">IsWeaklyRegular</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">maximalIdeal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">),</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 516002483,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1746343669
    },
    {
        "content": "<p>In my proof I used the first one you mentioned. See branch <code>definition-of-depth</code></p>",
        "id": 516004331,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746345133
    },
    {
        "content": "<p>Could you then please switch to the second? <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 516004834,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1746345532
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515997295\">said</a>:</p>\n<blockquote>\n<p>We current ly decide to have our def like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">noncomputable</span><span class=\"w\"> </span><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">moduleDepth</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">sSup</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)}</span>\n</code></pre></div>\n<p>which would reach infinity  when <code>M=0</code>, and compatible with regular sequence def when ring noetherian and both finitely generated and nontrivial.</p>\n</blockquote>\n<p>What about this one? Should we change too? What do you think is the proper definition?</p>",
        "id": 516031401,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746367446
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/516004834\">said</a>:</p>\n<blockquote>\n<p>Could you then please switch to the second? <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>\n</blockquote>\n<p>I'll work on it when my current work is finished. However can you tell the advantage of the second one? I am not familiar with these \"_Sup\"s. Thanks.</p>",
        "id": 516031507,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746367544
    },
    {
        "content": "<p>We currently have the following in progress:<br>\n1: Definition of depth on branch <code>definition-of-depth</code> including <code>depth(N,M) = depth_I M</code> for <code>supp(N) = V(I)</code> and the equivalence of maximal regular sequence.<br>\n2: Ischebeck theorem (<code>Ext^i(N,M)</code> vanish for <code>i &lt; depth M - dim N</code>) on branch <code>Ischebeck-theorem</code>, missing the finitely generation of <code>Ext</code><br>\n3:Auslander Buchsbaum on branch <code>mbkybky/AuslanderBuchsbaum</code> still in progress with very limited parts done.</p>",
        "id": 516031971,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746367855
    },
    {
        "content": "<p>I have a question here, how can I prove <code>Ext^i(N,M) = 0</code> iff <code>Ext^i(Shrink(N), Shrink(M)) = 0</code>? This is met when considering depth for the ring itself, thanks.</p>",
        "id": 516341097,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746503322
    },
    {
        "content": "<p>If <code>Shrink N</code> is in the same universe as <code>N</code>, etc, this would follow from the fact that there is an isomorphism in <code>ModuleCat</code> between them. Otherwise, as I have explained it above, it is currently out of reach.</p>",
        "id": 516390554,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746522599
    },
    {
        "content": "<p>Sorry maybe I didn't make it clear, it is the \"Otherwise\" case you mentioned.</p>",
        "id": 516393026,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746523328
    },
    {
        "content": "<p>There is a solution that is available but not that satisfying: we set every thing to same universe, then fix it when universe invariant APIs are ready.</p>",
        "id": 516393292,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746523424
    },
    {
        "content": "<p>The best I can consider doing in the future is defining an induced map on <code>Ext</code>-groups induced by an exact functor (e.g. the ulift functor on <code>ModuleCat</code>) and provide lemmas which would assert these maps are bijections under suitable conditions. As I said above, even with these categorical results, it would be extremely painful to develop a good hererogeneous universe API for <code>Ext</code>, and I certainly do not intend to do that part myself.</p>",
        "id": 516398688,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746525055
    },
    {
        "content": "<p>Then, unless someone volunteers to do a painful work without any reward, the only reasonable solution, when using <code>Ext</code>, is to assume that both modules are in the same universe. Alternatively, it would make sense, when it is possible, to use alternate definitions (e.g. of depth) which do not depend on <code>Ext</code>, and use <code>Ext</code> only in order to prove properties/criteria for these definitions. In the proofs, it would be perfectly fine to use a big enough universe and compute <code>Ext</code> there.</p>",
        "id": 516398717,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746525062
    },
    {
        "content": "<p>Thanks for your works!</p>",
        "id": 516404086,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746526607
    },
    {
        "content": "<p>Although we just think of a way of going aroud through rees theorem, this at least solve the finitely generated case, which include the case we need.</p>",
        "id": 516404089,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746526609
    },
    {
        "content": "<p>We almost finished Auslander Buchsbaum Theorem, but one thing left: <code>Ext(N,-)</code> commute with direct product, especially <code>Ext^n_R(N,M) = 0</code> iff <code>Ext^n_R(N,R) = 0</code> for free module <code>M</code>. Do anyone know the correct way of proving it? Thanks</p>",
        "id": 517099998,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746793875
    },
    {
        "content": "<p>Could you clarify your statement? Are you talking of \"products\" or \"coproducts\"? do you assume <code>R</code> is noetherian and <code>N</code> is finite type?</p>",
        "id": 517106050,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746795682
    },
    {
        "content": "<p>I think we don't need any condition on <code>N</code>, and we only consider finite direct sum, although infinite should be correct.<br>\nI disscussed with another participant, we think it can be done using dimension shifting on <code>N</code>, anyway thanks for your help.</p>",
        "id": 517140850,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746805482
    },
    {
        "content": "<p>Ah, if you consider only finite (bi)products, this just follows from the fact the <code>Ext</code> bifunctor is additive in both variables (I am not sure the <code>Functor.Additive</code> instances have been set, but the proofs should be found automatically because of the <code>add_comp</code> and <code>comp_add</code> lemmas.).</p>",
        "id": 517157845,
        "sender_full_name": "Joël Riou",
        "timestamp": 1746811590
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/516031401\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/515997295\">said</a>:</p>\n<blockquote>\n<p>We current ly decide to have our def like this</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">noncomputable</span><span class=\"w\"> </span><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">moduleDepth</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">sSup</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)}</span>\n</code></pre></div>\n<p>which would reach infinity  when <code>M=0</code>, and compatible with regular sequence def when ring noetherian and both finitely generated and nontrivial.</p>\n</blockquote>\n<p>What about this one? Should we change too? What do you think is the proper definition?</p>\n</blockquote>\n<p>Do anyone have further comments on this? (the choice between <code>sSup</code> and <code>iSup</code>)<br>\nShould depth be the current one or:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">moduleDepth</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">⨆</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ext</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">max</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">N</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)),</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 517267809,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1746891005
    },
    {
        "content": "<p>The latest dependecy graph. The three related to CM is still in progress and quite far from finishing, so PR is not opened yet.<br>\n<a href=\"/user_uploads/3121/DJ_hrJGH_GxYdSwAquImgl1R/79cc59771b63a10c7c1f7ade605717c.jpg\">79cc59771b63a10c7c1f7ade605717c.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/DJ_hrJGH_GxYdSwAquImgl1R/79cc59771b63a10c7c1f7ade605717c.jpg\" title=\"79cc59771b63a10c7c1f7ade605717c.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"1677x1079\" src=\"/user_uploads/thumbnail/3121/DJ_hrJGH_GxYdSwAquImgl1R/79cc59771b63a10c7c1f7ade605717c.jpg/840x560.webp\"></a></div>",
        "id": 518484815,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747384438
    },
    {
        "content": "<p>I have a question here, do we have the dimension of noetherian local ring is finite in any place? Then we won't need to deal with top in <code>ENat</code> all the time in the local case. Thanks.</p>",
        "id": 518525095,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747396595
    },
    {
        "content": "<p>Yes, Krull's height theorem was recently merged, so it's here: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Ideal/KrullsHeightTheorem.html#instFiniteRingKrullDimOfIsNoetherianRingOfIsLocalRing\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Ideal/KrullsHeightTheorem.html#instFiniteRingKrullDimOfIsNoetherianRingOfIsLocalRing</a></p>",
        "id": 518533580,
        "sender_full_name": "Christian Merten",
        "timestamp": 1747398958
    },
    {
        "content": "<p>It's great to see commutative algebra moving along like this!</p>",
        "id": 518535512,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1747399439
    },
    {
        "content": "<p>Some changes in dependency (also the one yesterday isn't very clear):<br>\n<a href=\"/user_uploads/3121/kteCXVKCVCkQPJmPd8C7HsXV/babea80fe540312ffabb055c5a5a2ba.jpg\">babea80fe540312ffabb055c5a5a2ba.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/kteCXVKCVCkQPJmPd8C7HsXV/babea80fe540312ffabb055c5a5a2ba.jpg\" title=\"babea80fe540312ffabb055c5a5a2ba.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"1613x1079\" src=\"/user_uploads/thumbnail/3121/kteCXVKCVCkQPJmPd8C7HsXV/babea80fe540312ffabb055c5a5a2ba.jpg/840x560.webp\"></a></div>",
        "id": 518783569,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747456918
    },
    {
        "content": "<p>I have a problem here :  I have proven the following result</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">depth_le_ringKrullDim_associatedPrime</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsNoetherianRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsLocalRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Small</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">IsLocalRing</span><span class=\"bp\">.</span><span class=\"n\">maximalIdeal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Small</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ModuleCat</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"bp\">.</span><span class=\"n\">Finite</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nontrivial</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ass</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">associatedPrimes</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Small</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">IsLocalRing</span><span class=\"bp\">.</span><span class=\"n\">depth</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">ringKrullDim</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n</code></pre></div>\n<p>but sometimes when I take out an arbitrary associated prime I don't have <code>[Small.{v, u} (R ⧸ P)]</code>, how can I resolve this?</p>\n<p>In particular, I met this problem when using this  to prove <code>IsLocalRing.depth M ≤ ringKrullDim R</code> should I port the result in <code>FLT</code> to mathlib or try to use the result above? Thanks</p>",
        "id": 519804042,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747911150
    },
    {
        "content": "<p>I think <code>[Small.{v, u} (R ⧸ P)]</code> can be obtained by assuming <code>[UnivLE.{u, v}]</code>.</p>",
        "id": 519806409,
        "sender_full_name": "Yongle Hu",
        "timestamp": 1747911927
    },
    {
        "content": "<p><code>[Small.{v, u} R]</code> probably implies <code>[Small.{v, u} (R ⧸ P)]</code>. But shouldn't there be a way to get rid of <code>[Small.{v, u} R]</code>  by showing <code>IsLocalRing.depth</code> is equal under isomorphisms and ulift <code>M</code> to some big universe?</p>",
        "id": 519807959,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747912443
    },
    {
        "content": "<p>I just saw in your WIP PR that <code>Ideal.depth</code> requires <code>[Small.{v} (R ⧸ I)]</code>. I think this is quite bad and we should probably get rid of it.</p>",
        "id": 519808409,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747912597
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/519808409\">said</a>:</p>\n<blockquote>\n<p>I just saw in your WIP PR that <code>Ideal.depth</code> requires <code>[Small.{v} (R ⧸ I)]</code>. I think this is quite bad and we should probably get rid of it.</p>\n</blockquote>\n<p>So, we should <code>Ulift</code> the module?</p>",
        "id": 519810823,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747913391
    },
    {
        "content": "<p>If the module live in <code>max u v</code> where <code>u</code> is the universe of the ring, everything can work well, I don't know <code>Ulift</code> in definition is good enough.</p>",
        "id": 519811269,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747913551
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"439483\">Andrew Yang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/519807959\">said</a>:</p>\n<blockquote>\n<p><code>[Small.{v, u} R]</code> probably implies <code>[Small.{v, u} (R ⧸ P)]</code>. But shouldn't there be a way to get rid of <code>[Small.{v, u} R]</code>  by showing <code>IsLocalRing.depth</code> is equal under isomorphisms and ulift <code>M</code> to some big universe?</p>\n</blockquote>\n<p>There is, but need some extra condition, as we don't have <code>Ext</code> commute with <code>Ulift</code> currently.</p>",
        "id": 519811695,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747913708
    },
    {
        "content": "<p>What about \"<code>[Small.{v, u} R]</code> probably implies <code>[Small.{v, u} (R ⧸ P)]</code>\" you mentioned? This would make all the thing only need <code>[Small.{v, u} R]</code> to ensure <code>Ext</code> exist.</p>",
        "id": 519811884,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747913773
    },
    {
        "content": "<p>I have something like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Small</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Small</span><span class=\"bp\">.</span><span class=\"o\">{</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Surjective</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">comp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Shrink</span><span class=\"bp\">.</span><span class=\"n\">ringEquiv</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toRingHom</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">Quotient</span><span class=\"bp\">.</span><span class=\"n\">mk_surjective</span>\n<span class=\"w\">  </span><span class=\"n\">Small</span><span class=\"bp\">.</span><span class=\"n\">mk'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">RingHom</span><span class=\"bp\">.</span><span class=\"n\">quotientKerEquivOfSurjective</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">.</span><span class=\"n\">toEquiv</span>\n</code></pre></div>\n<p>is this safe to be an instance? (I cuently wrote it as a local instance)</p>",
        "id": 519815959,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747915099
    },
    {
        "content": "<p>The newly updated dependency graph:<br>\n<a href=\"/user_uploads/3121/kSov7W2Ek9Lh5el2ABiSczXR/22010fd4c611d366c2b994c0cd8f369.jpg\">22010fd4c611d366c2b994c0cd8f369.jpg</a><br>\nSorry first appear in <a href=\"https://github.com/leanprover-community/mathlib4/pull/23937\">#23937</a> due to <code>Ext.bilinearCompOfLinear</code> and <code>homEquiv₀_linearHom</code>(the linear version of  <code>addEquiv₀</code>)</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/kSov7W2Ek9Lh5el2ABiSczXR/22010fd4c611d366c2b994c0cd8f369.jpg\" title=\"22010fd4c611d366c2b994c0cd8f369.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"1870x1079\" src=\"/user_uploads/thumbnail/3121/kSov7W2Ek9Lh5el2ABiSczXR/22010fd4c611d366c2b994c0cd8f369.jpg/840x560.webp\"></a></div>",
        "id": 520004416,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747991303
    },
    {
        "content": "<p>Is this suggestion of Joël possible?</p>\n<blockquote>\n<p>Alternatively, it would make sense, when it is possible, to use alternate definitions (e.g. of depth) which do not depend on <code>Ext</code>, and use <code>Ext</code> only in order to prove properties/criteria for these definitions. In the proofs, it would be perfectly fine to use a big enough universe and compute <code>Ext</code> there.</p>\n</blockquote>",
        "id": 520005159,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747991528
    },
    {
        "content": "<p>I think the problem is it is impossible to define <code>grad(N,M)</code> (Matsumura notation) or here <code>depth(N,M)</code> for two modules without <code>Ext</code>. The universe invariant can be proven when appropriate FG and nontrivial condition is added.<br>\nAt least we only need <code>[Small.{v, u} R]</code> now.</p>",
        "id": 520008896,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747992704
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/519815959\">said</a>:</p>\n<blockquote>\n<p>is this safe to be an instance? (I cuently wrote it as a local instance)</p>\n</blockquote>\n<p>You should use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=small_of_surjective#doc\">docs#small_of_surjective</a> and it should be an instance</p>",
        "id": 520009181,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747992786
    },
    {
        "content": "<p>It’s been a while since I last did some serious commutative algebra, so forgive me if this is incorrect, but isn’t <code>depth(N, M)</code> equal to the depth of the annihilator<code>Ann(N)</code> in <code>M</code>? the depth of an ideal in a module is about length of regular sequences IIRC, and that definition should not a priori require Ext.<br>\n(Or is the catch that what I say require f.g modules?)</p>",
        "id": 520010156,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1747993124
    },
    {
        "content": "<p>More precisely <code>depth(N, M)</code> is equal to the depth of the <code>I</code> in <code>M</code> when <code>IM &lt; M</code> and <code>support(N) = V(I)</code> for finitely generated modules over noetherian ring.<br>\nBut we found some reference really caring these things in non-noetherian and non-finitely-generated case.</p>",
        "id": 520010725,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747993288
    },
    {
        "content": "<p>What's the situation with <a href=\"https://github.com/leanprover-community/mathlib4/pull/23935\">#23935</a>? <span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span> <span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> is there anything else that should be done?</p>",
        "id": 520018579,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1747995694
    },
    {
        "content": "<p>It seems like there are still unaddressed comments.</p>",
        "id": 520018745,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747995754
    },
    {
        "content": "<p>Sorry, only because forgot to fix them(</p>",
        "id": 520019671,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1747996074
    },
    {
        "content": "<p>We finally finished the proof of Theorem 30, Chater 6, <em>Commutative Algebra</em>, Matsumura about the most basic facts about CM module and CM ring.<br>\nHere is all the things it depends on. <a href=\"https://github.com/leanprover-community/mathlib4/pull/24697\">#24697</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/24771\">#24771</a> are ready for review. <a href=\"https://github.com/leanprover-community/mathlib4/pull/23935\">#23935</a> met some small problems when addressing some comments. <a href=\"https://github.com/leanprover-community/mathlib4/pull/25213\">#25213</a> is currently the only sorry free PR apart from these.<br>\n<a href=\"/user_uploads/3121/JU9o_GBNco3C7yRBbcrAIP_S/563b4beef5339d43f738255c3b35d8f.jpg\">563b4beef5339d43f738255c3b35d8f.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/JU9o_GBNco3C7yRBbcrAIP_S/563b4beef5339d43f738255c3b35d8f.jpg\" title=\"563b4beef5339d43f738255c3b35d8f.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"1821x1079\" src=\"/user_uploads/thumbnail/3121/JU9o_GBNco3C7yRBbcrAIP_S/563b4beef5339d43f738255c3b35d8f.jpg/840x560.webp\"></a></div>",
        "id": 520596717,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1748330504
    },
    {
        "content": "<p>I have a small qustion here when trying to prove system of parameters form regular sequence in CM local ring: do we have a standard way to state system of parameters? Should I use <code>maximalIdeal R ∈ (Ideal.ofList rs).minimalPrimes</code> ? (we assume noetherian) Thanks.</p>",
        "id": 521641096,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1748837603
    },
    {
        "content": "<p>I assume you would want to be using a function from a fintype?</p>",
        "id": 521677311,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1748852060
    },
    {
        "content": "<p>I don't know both how to state the elements and the relation of the spaned ideal and maximal ideal.<br>\nAs regular sequence is using <code>List</code>, I think in this case for the former one use <code>Ideal.ofList</code> is OK?</p>",
        "id": 521710852,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1748861191
    },
    {
        "content": "<p>We are now trying to formalize Theorem 31, Chater 6, <em>Commutative Algebra</em>, Matsumura.<br>\n(see branch \"CM-local-ring-is-catenary\")<br>\nWe currently finished the following: (main part of Theorem 31 (iii) )<br>\nin noetherian local ring<br>\n1: for regular sequence <code>a1 ... ar</code> we have <code>ht(span{a1 ... ar}) = r</code><br>\n2: extending a seqence <code>a1 ... ar</code> with <code>ht(span{a1 ... ar}) = r</code> to a system of parameters<br>\nin CM local ring<br>\n3: system of parameters is regular</p>\n<p>Newly updated dependency graph<br>\n<a href=\"/user_uploads/3121/Ac-2Ef88Ph8gHxlAQcwjCfMd/50bd4c404c8ef3121fa9763aa4df0e1.jpg\">50bd4c404c8ef3121fa9763aa4df0e1.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Ac-2Ef88Ph8gHxlAQcwjCfMd/50bd4c404c8ef3121fa9763aa4df0e1.jpg\" title=\"50bd4c404c8ef3121fa9763aa4df0e1.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"2160x890\" src=\"/user_uploads/thumbnail/3121/Ac-2Ef88Ph8gHxlAQcwjCfMd/50bd4c404c8ef3121fa9763aa4df0e1.jpg/840x560.webp\"></a></div><p>Here is a small question: do we have definition of \"catenary ring\" or somebody is working on it? Thanks</p>",
        "id": 522585790,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1749128311
    },
    {
        "content": "<p>There is a group of students in Utrecht working on a definition of catenary orders, rings and topological spaces. The person  to ask is <span class=\"user-mention\" data-user-id=\"684366\">@Edward van de Meent</span>.</p>",
        "id": 522586071,
        "sender_full_name": "Christian Merten",
        "timestamp": 1749128382
    },
    {
        "content": "<p>The next few weeks i'm hoping to work on getting some of our work into Mathlib. This includes a definition of catenary orders, but since there are a bunch of auxilary definitions it might take a bunch of PRs and time before it's in mathlib for you to use</p>",
        "id": 522598456,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1749131773
    },
    {
        "content": "<p>Thanks! Good enough! I would be taking final exam so won't be active for the few coming weeks, also there is no urgent need, I can always leave the results as relations of height for now <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 522622253,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1749138226
    },
    {
        "content": "<p>Newly updated dependency graph (migrated to fork):<br>\n<a href=\"/user_uploads/3121/-rdok_2hvo22_7QSRXV8V7rx/d32c676aefca69781e4a0daf0ed8eaa.jpg\">d32c676aefca69781e4a0daf0ed8eaa.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/-rdok_2hvo22_7QSRXV8V7rx/d32c676aefca69781e4a0daf0ed8eaa.jpg\" title=\"d32c676aefca69781e4a0daf0ed8eaa.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"2160x930\" src=\"/user_uploads/thumbnail/3121/-rdok_2hvo22_7QSRXV8V7rx/d32c676aefca69781e4a0daf0ed8eaa.jpg/840x560.webp\"></a></div>",
        "id": 525067895,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1750435223
    },
    {
        "content": "<p>We currently finished proving Theorem 31 (i),(iii) in <a href=\"https://github.com/leanprover-community/mathlib4/pull/26245\">#26245</a> (WIP), should be just one small step from what we have (every proper ideal <code>I</code> have <code>ht I + dim A / I = dim A</code> when <code>A</code> is CM) to catenary when definitions are ready.</p>",
        "id": 525141743,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1750494392
    },
    {
        "content": "<p>We just finished proving a ring <code>R</code> is CM iff the unmixed theorem holds (Theorem 32, Chapter 6) in PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/26957\">#26957</a></p>",
        "id": 528064095,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1752148521
    },
    {
        "content": "<p>Currently we are trying to prove polynomial ring over CM ring is also CM. However we found we are needing some results about height of ideals in <code>R[X]</code>. Is anybody working on related results? For example <code>dim R[X] = dim R + 1</code> for noetherian ring <code>R</code>.</p>",
        "id": 528064104,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1752148526
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/528064104\">said</a>:</p>\n<blockquote>\n<p>Currently we are trying to prove polynomial ring over CM ring is also CM. However we found we are needing some results about height of ideals in <code>R[X]</code>. Is anybody working on related results? For example <code>dim R[X] = dim R + 1</code> for noetherian ring <code>R</code>.</p>\n</blockquote>\n<p>This <a href=\"https://github.com/chrisflav/polydim\">repo</a> (from one of the PKU Workshops) contains this. I believe I have an open PR related to it. I can make more PRs, when I am back from vacation in a week or so. Feel free to take anything from there and make a PR from it in the meantime.</p>",
        "id": 528072989,
        "sender_full_name": "Christian Merten",
        "timestamp": 1752151274
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/528064104\">said</a>:</p>\n<blockquote>\n<p>Currently we are trying to prove polynomial ring over CM ring is also CM. However we found we are needing some results about height of ideals in <code>R[X]</code>. Is anybody working on related results? For example <code>dim R[X] = dim R + 1</code> for noetherian ring <code>R</code>.</p>\n</blockquote>\n<p>I am almost sure I reviewed (and probably merged) a PR of <span class=\"user-mention\" data-user-id=\"439483\">@Andrew Yang</span> with this.</p>",
        "id": 528122099,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1752165494
    },
    {
        "content": "<p>What I did is the easy side of the inequality dim R + 1 &lt;= dim R[X]<br>\nThe other side needs noetherianness and a fair amount of dimension theory (which we mostly already have in mathlib).</p>",
        "id": 528300477,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1752226917
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"648495\">Christian Merten</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/528072989\">說</a>：</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/528064104\">said</a>:</p>\n<blockquote>\n<p>Currently we are trying to prove polynomial ring over CM ring is also CM. However we found we are needing some results about height of ideals in <code>R[X]</code>. Is anybody working on related results? For example <code>dim R[X] = dim R + 1</code> for noetherian ring <code>R</code>.</p>\n</blockquote>\n<p>This <a href=\"https://github.com/chrisflav/polydim\">repo</a> (from one of the PKU Workshops) contains this. I believe I have an open PR related to it. I can make more PRs, when I am back from vacation in a week or so. Feel free to take anything from there and make a PR from it in the meantime.</p>\n</blockquote>\n<p>I am almost finished with polynomial ring over CM ring is CM in <a href=\"https://github.com/leanprover-community/mathlib4/pull/27131\">#27131</a> , except for the following two \"sorry\" : for local ring <code>(R, m)</code>,<br>\n1 : <code>ht (m[X])</code> is not greater than <code>ht(m) = dim R</code><br>\n2 : for a prime ideal <code>p</code>of <code>R[X]</code> and <code>p \\cap R = m</code>, <code>ht (p)</code> is not greater than <code>ht(m) + 1</code><br>\nThe second should be a straight corrollary from the dimension of <code>R[X]</code>, I don't know about the first one. Although I can force it through using height theorem, I can wait for the PRs from that repo.<br>\nAs I am not that familiar with the structure of the repo, I probably wouldn't be able to open good PRs.</p>",
        "id": 528654147,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1752497278
    },
    {
        "content": "<p>By the way, this PR depends on <a href=\"https://github.com/leanprover-community/mathlib4/pull/26106\">#26106</a> which proves <code>IsWeaklyRegular</code> is preserved under flat base change by <span class=\"user-mention\" data-user-id=\"631684\">@Yongle Hu</span> . It should be ready for review as it is not blocked by other PRs now.</p>",
        "id": 528656933,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1752498074
    },
    {
        "content": "<p>Newly updated dependency graph:<br>\n<a href=\"/user_uploads/3121/xMtfZxQCjpQ9JTYtJ-z9hS6S/8b9def0cee1f5a1e1d15479ccc1aaed.jpg\">8b9def0cee1f5a1e1d15479ccc1aaed.jpg</a><br>\ncurrently <a href=\"https://github.com/leanprover-community/mathlib4/pull/26106\">#26106</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/26210\">#26210</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/26219\">#26219</a> are the only sorry free ones, they are independent of each other ready for review.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/xMtfZxQCjpQ9JTYtJ-z9hS6S/8b9def0cee1f5a1e1d15479ccc1aaed.jpg\" title=\"8b9def0cee1f5a1e1d15479ccc1aaed.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"2160x914\" src=\"/user_uploads/thumbnail/3121/xMtfZxQCjpQ9JTYtJ-z9hS6S/8b9def0cee1f5a1e1d15479ccc1aaed.jpg/840x560.webp\"></a></div>",
        "id": 529924853,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1753114967
    },
    {
        "content": "<p>As linear structure on <code>Ext</code> is still missing, other ones are all stuck for now <span aria-label=\"neutral\" class=\"emoji emoji-1f610\" role=\"img\" title=\"neutral\">:neutral:</span> . This sorry and another about FG of <code>Ext</code> over noetherian ring are the only ones. (the tool of dimension shifting is ready so wouldn't be that difficult)<br>\nHowever is it possible for anyone to check whether the definitions are good enough, as they may affect a lot. Thanks</p>",
        "id": 529925444,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1753115194
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/529925444\">said</a>:</p>\n<blockquote>\n<p>As linear structure on <code>Ext</code> is still missing, other ones are all stuck for now <span aria-label=\"neutral\" class=\"emoji emoji-1f610\" role=\"img\" title=\"neutral\">:neutral:</span> .</p>\n</blockquote>\n<p>You may push for someone to review <a href=\"https://github.com/leanprover-community/mathlib4/pull/25931\">#25931</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/26031\">#26031</a> in the \"PR reviews\" channel. (I could PR the followup code where the linear structure on <code>Ext</code> is defined, but I do not like to make dependent PR on top of refactor PR...)</p>",
        "id": 529928166,
        "sender_full_name": "Joël Riou",
        "timestamp": 1753116328
    },
    {
        "content": "<p>Will try to have a look at <a href=\"https://github.com/leanprover-community/mathlib4/pull/25931\">#25931</a> either tonight or tomorrow.</p>",
        "id": 529929560,
        "sender_full_name": "Robin Carlier",
        "timestamp": 1753116892
    },
    {
        "content": "<p>I had a quick look. Your code is very clean. Up to the possible addition of some more documentation, this looks pretty good to me.</p>",
        "id": 529940493,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1753120636
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749361\">Nailin Guan</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Cohen.20Macaulay.20rings/near/528654147\">said</a>:</p>\n<blockquote>\n<p>1 : <code>ht (m[X])</code> is not greater than <code>ht(m) = dim R</code><br>\n2 : for a prime ideal <code>p</code>of <code>R[X]</code> and <code>p \\cap R = m</code>, <code>ht (p)</code> is not greater than <code>ht(m) + 1</code></p>\n</blockquote>\n<p>These are now both contained in <a href=\"https://github.com/leanprover-community/mathlib4/pull/27542\">#27542</a>.</p>",
        "id": 531191902,
        "sender_full_name": "Christian Merten",
        "timestamp": 1753641901
    },
    {
        "content": "<p>We would like to move forward to formalize regular local ring is CM, I would like to know is anybody still working on it. I would like to unify our definition, thanks.</p>",
        "id": 534210848,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1755084629
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459699\">@Joël Riou</span>  sorry for might being impatient, may I ask for a help in updating your PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/27416\">#27416</a>? I met some problem when trying to copy that PR in newer version of mathlib, however I would like to test our PRs on the correct instance.<br>\n(we currently have the module instance on <code>Ext</code> defined as <code>r • x = x.comp (mk₀ (r • 𝟙 Y)) (add_zero _)</code>, which is really to barbaric and cannot dirctly obtain <code>Ext.comp</code> is <code>R</code>-bilinear, but at least there is no sorry in data)<br>\nThank you very much.</p>",
        "id": 540787011,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1758543733
    },
    {
        "content": "<p>There is a chunk of code which had disappeared from some unknown reason. <a href=\"https://github.com/leanprover-community/mathlib4/pull/27416\">#27416</a> should work again now.</p>",
        "id": 540822088,
        "sender_full_name": "Joël Riou",
        "timestamp": 1758551905
    },
    {
        "content": "<p>I merged the branch of <a href=\"https://github.com/leanprover-community/mathlib4/pull/27416\">#27416</a> into my works and rearrage the PRs, now all PRs except polynomial over CM ring is CM is sorry free. (Ignore the ones related to regular local ring)<br>\n<a href=\"/user_uploads/3121/H4T7q4hl2OMMNSL49efqf0at/2b73e2a4381ad2143d0f72cbdfc4b223.jpg\">2b73e2a4381ad2143d0f72cbdfc4b223.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/H4T7q4hl2OMMNSL49efqf0at/2b73e2a4381ad2143d0f72cbdfc4b223.jpg\" title=\"2b73e2a4381ad2143d0f72cbdfc4b223.jpg\"><img data-original-content-type=\"image/jpeg\" data-original-dimensions=\"1801x1079\" src=\"/user_uploads/thumbnail/3121/H4T7q4hl2OMMNSL49efqf0at/2b73e2a4381ad2143d0f72cbdfc4b223.jpg/840x560.webp\"></a></div>",
        "id": 541283757,
        "sender_full_name": "Nailin Guan",
        "timestamp": 1758733820
    }
]