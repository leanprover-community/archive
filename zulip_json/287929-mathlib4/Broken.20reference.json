[
    {
        "content": "<p>Randomly noticed the first reference here is broken<br>\n<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Jordan/Basic.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Jordan/Basic.html</a></p>",
        "id": 462237515,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723597525
    },
    {
        "content": "<p>Is there a way to fix it without exceeding the 100 character per line limit?</p>",
        "id": 462237534,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723597546
    },
    {
        "content": "<p>There is an analogous issue in exactly one other place in mathlib that you can find by grepping <code>set_option linter.longLine false in</code> (untested).</p>",
        "id": 462247994,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723603798
    },
    {
        "content": "<p>Basically, you segment the doc-module string and silence the syntax linter by setting the option.</p>",
        "id": 462248072,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723603842
    },
    {
        "content": "<p>Then you add an exception to the text-based linter.</p>",
        "id": 462248120,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723603865
    },
    {
        "content": "<p>I wanted to remove the need for the second silencing, but have not gotten around to it.</p>",
        "id": 462248156,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723603885
    },
    {
        "content": "<p>(On mobile, sorry for the terse instructions.)</p>",
        "id": 462248171,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723603900
    },
    {
        "content": "<p>Also, I'm not too happy about long references having to be \"fixed\" like this, but I could not find a better way of automatically excluding them from the linter.</p>",
        "id": 462249295,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723604652
    },
    {
        "content": "<p>URLs are excluded by automatically ignoring lines containing <code>http</code> as a substring, but these <code>[...][...]</code> references are trickier.</p>",
        "id": 462249355,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723604720
    },
    {
        "content": "<p>It'd be nice if there were a mechanism for dealing with this within the Markdown itself. Maybe a line could have a trailing <code>\\</code> to signal that whitespace/newlines immediately following it should be ignored?</p>",
        "id": 462250472,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723605570
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- This is a veeeeeeeeee\\</span>\n<span class=\"sd\">  eeeeery long word! -/</span>\n</code></pre></div>",
        "id": 462250492,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723605595
    },
    {
        "content": "<p>Would the reference survive that, though?</p>",
        "id": 462250695,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723605679
    },
    {
        "content": "<p>This would be a very early step in parsing, so it should treat it as if it were just a long line</p>",
        "id": 462250746,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723605708
    },
    {
        "content": "<p>I don't know how/if this could be implemented, though</p>",
        "id": 462250809,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723605728
    },
    {
        "content": "<p>What's the GitHub repo for the tool building the documentation?</p>",
        "id": 462250855,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723605770
    },
    {
        "content": "<p>It's here: <a href=\"https://github.com/leanprover/doc-gen4\">https://github.com/leanprover/doc-gen4</a></p>\n<p>(The repo containing the workflow that actually builds and deploys mathlib4 docs is <a href=\"https://github.com/leanprover-community/mathlib4_docs\">here</a>)</p>",
        "id": 462251060,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1723605926
    },
    {
        "content": "<p>Would the substring <code>&lt;!----&gt;</code> in a doc-module/doc-string be displayed by doc-gen?</p>",
        "id": 462251481,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723606210
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Broken.20reference/near/462247994\">said</a>:</p>\n<blockquote>\n<p>There is an analogous issue in exactly one other place in mathlib that you can find by grepping <code>set_option linter.longLine false in</code> (untested).</p>\n</blockquote>\n<p>The exception is in Mathlib/Data/QPF/Multivariate/Basic.lean</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c\">/-</span><span class=\"cm\">!</span>\n<span class=\"cm\">...</span>\n<span class=\"cm\">each proves that some operations on functors preserves the QPF structure</span>\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">longLine</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"c\">/-</span><span class=\"cm\">!</span>\n<span class=\"cm\">## Reference</span>\n\n<span class=\"cm\">[Jeremy Avigad, Mario M. Carneiro and Simon Hudon, *Data Types as Quotients of Polynomial Functors*][avigad-carneiro-hudon2019]</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>",
        "id": 462252804,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723607332
    },
    {
        "content": "<p>If <code>&lt;!----&gt;</code> in doc-module strings is \"invisible\" to doc-gen, then the linter could ignore lines containing it as well.</p>",
        "id": 462252894,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723607425
    },
    {
        "content": "<p>We already ignore lines containing <code>http</code> (or something like that) in the long lines linter(s). Can't we ignore lines that contain <code>[...](...)</code> or <code>[...][...]</code>?</p>",
        "id": 462283946,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723621284
    },
    {
        "content": "<p>Yes, but that may also ignore some (not properly spaced) assumptions in a lemma.</p>",
        "id": 462284265,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723621397
    },
    {
        "content": "<p>Well, hopefully <em>someone</em> will write a separate linter against that? <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 462284555,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723621501
    },
    {
        "content": "<p>Actually, Jon reviewed my \"pedantic linter\" that does check for whitespace issues!</p>",
        "id": 462285253,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723621786
    },
    {
        "content": "<p>However, that linter is really too strict, so the expectation is that it is not run by default.</p>",
        "id": 462285334,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723621806
    },
    {
        "content": "<p>For <em>seriously</em> linting style there should probably be a formatter for lean code.</p>",
        "id": 462285468,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723621855
    },
    {
        "content": "<p>There's another one here: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Artinian.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/Artinian.html</a></p>",
        "id": 476094557,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728554776
    },
    {
        "content": "<p>[samuel]</p>",
        "id": 476094596,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1728554788
    }
]