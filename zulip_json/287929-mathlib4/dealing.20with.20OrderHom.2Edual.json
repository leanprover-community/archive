[
    {
        "content": "<p>For a theorem I contributed recently (<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/FixedPoints.html#fixedPoints.gfp_eq_sInf_iterate\">fixedPoints.gfp_eq_sInf_iterate</a>), I would like to proof the premise on a complete lattice. Since mathlib does not have either <code>ωCoScottContinuous</code> nor <code>CoScottContinuous</code>, the theorem requires <code>ωScottContinuous ⇑(OrderHom.dual f))</code>.</p>\n<p>However, proving any goal including <code>OrderHom.dual f</code> seems very annoying to me, as all lattice operations are the wrong way around. Is there a clever trick to make the goal look nicer again?</p>\n<p>Simple example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"w\"> </span><span class=\"n\">OmegaCompletePartialOrder</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">f_hom</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">OrderHom</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"w\"> </span><span class=\"n\">ENNReal</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ωScottContinuous</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">OrderHom</span><span class=\"bp\">.</span><span class=\"n\">dual</span><span class=\"w\"> </span><span class=\"n\">f_hom</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ωScottContinuous_iff_map_ωSup_of_orderHom</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">dsimp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">OrderDual</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Chain</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">OrderHom</span><span class=\"bp\">.</span><span class=\"n\">dual</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">OrderDual</span><span class=\"bp\">.</span><span class=\"n\">toDual</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">coe_refl</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">OrderDual</span><span class=\"bp\">.</span><span class=\"n\">ofDual</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">comp_id</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">id_comp</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Equiv</span><span class=\"bp\">.</span><span class=\"n\">coe_fn_mk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ωSup</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">OrderHom</span><span class=\"bp\">.</span><span class=\"n\">coe_mk</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Chain</span><span class=\"bp\">.</span><span class=\"n\">map</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">OrderHom</span><span class=\"bp\">.</span><span class=\"n\">comp_coe</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">comp_apply</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 473666372,
        "sender_full_name": "Ira Fesefeldt",
        "timestamp": 1727689533
    },
    {
        "content": "<p>Note that <code>ωScottContinuous ⇑(OrderHom.dual f))</code> should be written <code>ωScottContinuous (toDual ∘ f ∘ ofDual)</code>. Do you still have in mind the time where the Scott continuity predicate took in an <code>OrderHom</code>?</p>",
        "id": 473685404,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727693490
    },
    {
        "content": "<p>Also note that there is a comment saying that the dual predicates for the different versions of Scott continuity were not defined because we didn't find any use in the literature and didn't need them at the time. If you need them now, you might want to consider adding them.</p>",
        "id": 473685728,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727693568
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/dealing.20with.20OrderHom.2Edual/near/473685404\">said</a>:</p>\n<blockquote>\n<p>Note that <code>ωScottContinuous ⇑(OrderHom.dual f))</code> should be written <code>ωScottContinuous (toDual ∘ f ∘ ofDual)</code>. Do you still have in mind the time where the Scott continuity predicate took in an <code>OrderHom</code>?</p>\n</blockquote>\n<p>Ooops, yes.</p>",
        "id": 473686068,
        "sender_full_name": "Ira Fesefeldt",
        "timestamp": 1727693651
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/stream/287929-mathlib4/topic/dealing.20with.20OrderHom.2Edual/near/473685728\">said</a>:</p>\n<blockquote>\n<p>Also note that there is a comment saying that the dual predicates for the different versions of Scott continuity were not defined because we didn't find any use in the literature and didn't need them at the time. If you need them now, you might want to consider adding them.</p>\n</blockquote>\n<p>I saw that comment. I know that our group uses it quite heavily for connecting fixed point semantics with operational semantics on Markovian models. And could probably find a bit of literature using it. But I couldn't be bothered yet to add cocontinuity myself <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 473687373,
        "sender_full_name": "Ira Fesefeldt",
        "timestamp": 1727693981
    },
    {
        "content": "<p>Should be easier than dealing with <code>toDual ∘ f ∘ ofDual</code> everywhere!</p>",
        "id": 473687559,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1727694014
    }
]