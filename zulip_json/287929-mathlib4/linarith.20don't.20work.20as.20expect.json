[
    {
        "content": "<p>I implement my owned <code>Field</code> class, and implement instance <code>CommRing</code>, <code>LinearOrder</code>,<code>IsStrictOrderedRing</code> for it. the codes like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- Field.lean</span>\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">SMul</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Mul</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Sub</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Neg</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Div</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Zero</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">One</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Pow</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Inv</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> something -/</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">   </span><span class=\"c\">/-</span><span class=\"cm\"> something -/</span>\n\n<span class=\"c1\">-- Ordered.lean</span>\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">Ordered</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">LT</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">   </span><span class=\"c\">/-</span><span class=\"cm\"> something -/</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ordered</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n\n<span class=\"c1\">-- OrderedField.lean</span>\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">OrderedField</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Ordered</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span><span class=\"cm\"> something -/</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">OrderedField</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">priority</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsStrictOrderedRing</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span><span class=\"cm\"> something -/</span>\n\n<span class=\"c1\">-- Bound.lean</span>\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">LeastUpperBoundProperty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">Ordered</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span><span class=\"cm\">something-/</span>\n</code></pre></div>\n<p>and currentlyI I want to prove is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">:</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">linarith</span><span class=\"w\"> </span><span class=\"c1\">--  linarith  failed here</span>\n</code></pre></div>\n<p>I tried to add  <code>set_option trace.linarith true</code> but can not find the reason.</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>[linarith] linarith is running on the following hypotheses: ▼\n[Type u, OrderedField α, LeastUpperBoundProperty α, α, α, 0 &lt; x, s ≤ s - x]\n[linarith] ✅️ Running preprocessors ▼\n  [] ✅️ Mathlib.Tactic.Linarith.splitConjunctions: split conjunctions ▼\n    [] [Type u, OrderedField α, LeastUpperBoundProperty α, α, α, 0 &lt; x, s ≤ s - x]\n  [] ✅️ Mathlib.Tactic.Linarith.filterComparisons: filter terms that are not proofs of comparisons ▼\n    [] [0 &lt; x, s ≤ s - x]\n  [] ✅️ Mathlib.Tactic.Linarith.removeNegations: replace negations of comparisons ▼\n    [] [0 &lt; x, s ≤ s - x]\n  [] ✅️ Mathlib.Tactic.Linarith.natToInt: move nats to ints ▼\n    [] [0 &lt; x, s ≤ s - x]\n  [] ✅️ Mathlib.Tactic.Linarith.strengthenStrictInt: strengthen strict inequalities over int ▼\n    [] [0 &lt; x, s ≤ s - x]\n  [] ✅️ Mathlib.Tactic.Linarith.compWithZero: make comparisons with zero ▶\n  [] ✅️ Mathlib.Tactic.Linarith.cancelDenoms: cancel denominators ▼\n    [] []\n[linarith] after preprocessing, linarith has 0 facts: ▼\n[]\n[linarith] hypotheses appear in 0 different types\n[linarith] ❌️ running on preferred type α\n</code></pre></div>\n<p>anyone can help for it? thanks.</p>",
        "id": 532385747,
        "sender_full_name": "sinianluoye",
        "timestamp": 1754086213
    },
    {
        "content": "<p>Can you give a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> with imports?</p>",
        "id": 532386328,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754086546
    },
    {
        "content": "<p>(<code>OrderedField</code> seems to not exist in mathlib?)</p>",
        "id": 532386444,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1754086607
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/linarith.20don't.20work.20as.20expect/near/532386328\">said</a>:</p>\n<blockquote>\n<p>Can you give a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> with imports?</p>\n</blockquote>\n<p>import Mathlib<br>\nimport Rudin.Chapter1.Ordered<br>\nimport Rudin.Chapter1.Field<br>\nimport Rudin.Chapter1.OrderedField<br>\nimport Rudin.Chapter1.Bound<br>\nimport Rudin.Chapter1.Inequality</p>\n<p>here ,   there are many lines codes to implement for these class,  the test code is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">OrderedField</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LeastUpperBoundProperty</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">:</span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">linarith</span>\n</code></pre></div>\n<p>here, I tried to remove <code>[LeastUpperBoundProperty α]</code> and then <code>linarith</code> worked now.</p>\n<p>LeastUpperBoundProperty defined as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ordered</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">LeastUpperBoundProperty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">Ordered</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">subset_sup_exist</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"bp\">∅</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">BoundAbove</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ExistsSup</span><span class=\"w\"> </span><span class=\"n\">E</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>",
        "id": 532386800,
        "sender_full_name": "sinianluoye",
        "timestamp": 1754086832
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/287929-mathlib4/topic/linarith.20don't.20work.20as.20expect/near/532386444\">said</a>:</p>\n<blockquote>\n<p>(<code>OrderedField</code> seems to not exist in mathlib?)</p>\n</blockquote>\n<p>I wrote Field/Ordered/OrderedField for my codes... and I want to use some mathlib existed tactic for it, so I implement some instance for them</p>",
        "id": 532386999,
        "sender_full_name": "sinianluoye",
        "timestamp": 1754086966
    },
    {
        "content": "<p>after remove  <code>LeastUpperBoundProperty</code></p>\n<p>the linarith log is:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>[linarith] linarith is running on the following hypotheses: ▼\n[Type u, OrderedField α, α, α, x &lt; y, 1 + 1 &gt; 0, x + y ≤ x * (1 + 1)]\n[linarith] ✅️ Running preprocessors ▼\n  [] ✅️ Mathlib.Tactic.Linarith.splitConjunctions: split conjunctions ▼\n    [] [Type u, OrderedField α, α, α, x &lt; y, 1 + 1 &gt; 0, x + y ≤ x * (1 + 1)]\n  [] ✅️ Mathlib.Tactic.Linarith.filterComparisons: filter terms that are not proofs of comparisons ▼\n    [] [x &lt; y, 1 + 1 &gt; 0, x + y ≤ x * (1 + 1)]\n  [] ✅️ Mathlib.Tactic.Linarith.removeNegations: replace negations of comparisons ▶\n  [] ✅️ Mathlib.Tactic.Linarith.natToInt: move nats to ints ▼\n    [] [x &lt; y, 1 + 1 &gt; 0, x + y ≤ x * (1 + 1)]\n  [] ✅️ Mathlib.Tactic.Linarith.strengthenStrictInt: strengthen strict inequalities over int ▼\n    [] [x &lt; y, 1 + 1 &gt; 0, x + y ≤ x * (1 + 1)]\n  [] ✅️ Mathlib.Tactic.Linarith.compWithZero: make comparisons with zero ▶\n  [] ✅️ Mathlib.Tactic.Linarith.cancelDenoms: cancel denominators ▼\n    [] [x - y &lt; 0, 0 - (1 + 1) &lt; 0, x + y - x * (1 + 1) ≤ 0]\n[linarith] after preprocessing, linarith has 3 facts: ▼\n[x - y &lt; 0, 0 - (1 + 1) &lt; 0, x + y - x * (1 + 1) ≤ 0]\n[linarith] hypotheses appear in 1 different types\n[linarith] ✅️ running on preferred type α ▼\n  [] ✅️ Invoking oracle ▼\n    [] found a contradiction: [(1, 1), (3, 1)]\n  [] ✅️ Building final expression ▼\n    []\n          x - y + (x + y - x * (1 + 1))\n        should be both 0 and negative\n</code></pre></div>",
        "id": 532387204,
        "sender_full_name": "sinianluoye",
        "timestamp": 1754087113
    },
    {
        "content": "<p>Please read <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>, this isn't one because you haven't given me something I can run</p>",
        "id": 532387716,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754087424
    },
    {
        "content": "<p>Ideally you can replace your <code>something</code>s with <code>sorry</code> to minimize</p>",
        "id": 532387775,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754087468
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/linarith.20don't.20work.20as.20expect/near/532387716\">said</a>:</p>\n<blockquote>\n<p>Please read <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>, this isn't one because you haven't given me something I can run</p>\n</blockquote>\n<p>Hi <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>   Could you try clone from <a href=\"https://github.com/sinianluoye/LeanOfRudinAnalysis\">https://github.com/sinianluoye/LeanOfRudinAnalysis</a>  and the branch  is chapter1.  Because there are so many  defs and theorems, It is hard to provide that. </p>\n<p>the test code located at   Rudin/Chapter1/PowRat.lean  linbe 15</p>",
        "id": 532388623,
        "sender_full_name": "sinianluoye",
        "timestamp": 1754088042
    },
    {
        "content": "<p>Do we need a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>? Doesn't <code>linarith</code> require you use mathlib's classes, so it would be surprising if it worked with a custom <code>Field</code> class?</p>",
        "id": 532388681,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1754088076
    },
    {
        "content": "<p>I think the idea is that the <code>instance (priority := default-1) : IsStrictOrderedRing α where</code> translates things into the mathlib classes</p>",
        "id": 532388843,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754088193
    },
    {
        "content": "<blockquote>\n<p>the test code located at Rudin/Chapter1/PowRat.lean linbe 15</p>\n</blockquote>\n<p>This file doesn't exist (it should be at <a href=\"https://github.com/sinianluoye/LeanOfRudinAnalysis/blob/chapter1/Rudin/Chapter1/PowRat.lean#L15\">https://github.com/sinianluoye/LeanOfRudinAnalysis/blob/chapter1/Rudin/Chapter1/PowRat.lean#L15</a>)</p>",
        "id": 532388945,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754088264
    },
    {
        "content": "<p>My guess is that either <span class=\"user-mention\" data-user-id=\"943530\">@sinianluoye</span> is missing an instance, has prouced an instance diamond, or <code>linarith</code> is looking for a syntactic instance instead of a defeq one.</p>",
        "id": 532389043,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754088329
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/linarith.20don't.20work.20as.20expect/near/532388945\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>the test code located at Rudin/Chapter1/PowRat.lean linbe 15</p>\n</blockquote>\n<p>This file doesn't exist</p>\n</blockquote>\n<p>here, sorry to forget push <br>\n<a href=\"https://github.com/sinianluoye/LeanOfRudinAnalysis/blob/chapter1/Rudin/Chapter1/PowRat.lean\">https://github.com/sinianluoye/LeanOfRudinAnalysis/blob/chapter1/Rudin/Chapter1/PowRat.lean</a></p>",
        "id": 532389054,
        "sender_full_name": "sinianluoye",
        "timestamp": 1754088335
    },
    {
        "content": "<p>What puzzles me is that when I update the variable from <code>{α: Type u} [OrderedField α] [LeastUpperBoundProperty α]</code> to <code>{α: Type u} [OrderedField α]</code>, then linarith works. I didn't even implement any instance for LeastUpperBoundProperty. <span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span></p>",
        "id": 532389609,
        "sender_full_name": "sinianluoye",
        "timestamp": 1754088768
    },
    {
        "content": "<p>I would guess you are defining two unrelated <code>&lt;</code> operators</p>",
        "id": 532389804,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754088947
    },
    {
        "content": "<p>That says \"let <code>α</code> have one <code>&lt;</code> that is compatible with the field structure, and a different one with the LUB property\"</p>",
        "id": 532389848,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754088987
    },
    {
        "content": "<p>Can I use some codes to prove that?  by code analysis, <code>LeastUpperBoundProperty</code> extends <code>Rudin.Ordered α</code> and <code>OrderedField</code> extends <code>Rudin.Ordered α</code>.  seems they should be same</p>\n<p>when I use <code>#check @LT.lt α _</code> I can confirm that the <code>LT</code> is get from <code>Ordered.toLT</code><br>\n<a href=\"/user_uploads/3121/-Lrx3BmpCgpozrT0eI7vT0GX/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/-Lrx3BmpCgpozrT0eI7vT0GX/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"501x115\" src=\"/user_uploads/thumbnail/3121/-Lrx3BmpCgpozrT0eI7vT0GX/image.png/840x560.webp\"></a></div>",
        "id": 532394122,
        "sender_full_name": "sinianluoye",
        "timestamp": 1754092273
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"943530\">sinianluoye</span> <a href=\"#narrow/channel/287929-mathlib4/topic/linarith.20don't.20work.20as.20expect/near/532394122\">said</a>:</p>\n<blockquote>\n<p>Can I use some codes to prove that?  by code analysis, <code>LeastUpperBoundProperty</code> extends <code>Rudin.Ordered α</code> and <code>OrderedField</code> extends <code>Rudin.Ordered α</code>.  seems they should be same</p>\n<p>when I use <code>#check @LT.lt α _</code> I can confirm that the <code>LT</code> is get from <code>Ordered.toLT</code><br>\n<a href=\"/user_uploads/3121/-Lrx3BmpCgpozrT0eI7vT0GX/image.png\">image.png</a></p>\n</blockquote>\n<p>So that means there's now two different ways to derive a <code>Rudin.Ordered</code>, the one coming from <code>OrderedField</code> and the one coming from <code>LeastUpperBoundProperty</code>, and nothing to say that the two ways get you the same result</p>",
        "id": 532394359,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754092466
    },
    {
        "content": "<p>I'm still a little puzzled. What's a good way to implement the related code? <code>Ordered</code> is enough to define <code>LeastUpperBoundProperty</code>, but for some theorems, I need both <code>LeastUpperBoundProperty</code> and <code>OrderedField</code> to complete the proof. Does this mean I cannot use <code>linarith</code> in the related code?</p>",
        "id": 532396072,
        "sender_full_name": "sinianluoye",
        "timestamp": 1754093650
    },
    {
        "content": "<p>It means you want to unbundle ordered algebra</p>",
        "id": 532397299,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754094700
    },
    {
        "content": "<p>Or you need to add</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">LUBOrderedField</span><span class=\"w\"> </span><span class=\"kn\">extends</span><span class=\"w\"> </span><span class=\"n\">LeastUpperBoundProperty</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">OrderedField</span><span class=\"w\"> </span><span class=\"n\">x</span>\n</code></pre></div>\n<p>because <code>extends</code> deduplicates typeclass members</p>",
        "id": 532397406,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754094794
    },
    {
        "content": "<p>Thanks for your patient answers.</p>\n<p>I also asked Copilot, and it provided two suggestions: one is similar to Eric’s suggestion, and the other is to use the mixin pattern for the Property class, for example, <code>class LeastUpperBoundProperty (α : Type*) [Ordered α] where</code>. I tried both of them, and they both worked.</p>",
        "id": 532398256,
        "sender_full_name": "sinianluoye",
        "timestamp": 1754095509
    }
]