[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/20846\">#20846</a> we define polynomial sequences and prove they are linearly independent in <code>R[X]</code> for <code>R</code> a ring. The question was asked on whether this is true in a semiring. <span class=\"user-mention\" data-user-id=\"703970\">@Etienne Marion</span> <a href=\"https://github.com/leanprover-community/mathlib4/pull/20846/files/bab5332003561d6a380dbe90bc33c503d9855621#r1965987652\">mentioned</a> after discussing with a friend that this seems likely true in a semiring with injective addition, but we don't seem to have an <code>AddCancelCommSemiring</code> class to go along with <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=AddCancelCommMonoid#doc\">docs#AddCancelCommMonoid</a>. I think (especially given I am nearly at the limits of what I understand personally) that for the PR we're going to leave this as a TODO regardless, but it seemed like a good suggestion to confirm that in fact that typeclass doesn't exist with some other name, and/or whether I've missed anything else obvious.</p>",
        "id": 501168170,
        "sender_full_name": "Julian Berman",
        "timestamp": 1740164299
    },
    {
        "content": "<p>Don't we have <code>IsAddCancel</code> or something like that?</p>",
        "id": 501171847,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1740165680
    },
    {
        "content": "<p>Ah indeed there is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsCancelAdd#doc\">docs#IsCancelAdd</a> !</p>",
        "id": 501172020,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1740165745
    },
    {
        "content": "<p>The proof strategy we discussed was to use the fact that a semiring which has <code>IsCancelAdd</code> could be injected in a ring, which we did not check but seemed reasonable. However I'm not at all sure how this should be stated, I'll take any suggestions.</p>\n<p>Maybe it will just be easier to do the proof \"by hand\", I think I'll give it a try this week-end.</p>",
        "id": 501176771,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1740167630
    },
    {
        "content": "<p>Yes, this is related to the fact that the natural map from a commutative cancellative monoid to the groupification is injective. I think this is somewhere in mathlib</p>",
        "id": 501177580,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1740167970
    },
    {
        "content": "<p>Anyway proving this by hand should be easy in any concrete case</p>",
        "id": 501177996,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1740168128
    },
    {
        "content": "<p>This also arose in <a class=\"message-link\" href=\"/#narrow/channel/116395-maths/topic/Linear.20independence.20over.20semirings/near/486592210\">#maths &gt; Linear independence over semirings @ ðŸ’¬</a></p>",
        "id": 501181887,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1740169828
    },
    {
        "content": "<p>Ah indeed! I had no idea there had been a recent change in the definition. I don't feel confident enough to dive in those localization questions.</p>",
        "id": 501185945,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1740171550
    },
    {
        "content": "<p>The previous definition (the usual one just written for semirings) is not very interesting, since <code>1,2,3, ...</code> is <code>â„•</code>-linearly independent.</p>",
        "id": 501188435,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1740172626
    },
    {
        "content": "<p>Yes but I thought the current definition had always been there</p>",
        "id": 501188578,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1740172689
    },
    {
        "content": "<p>I <em>think</em> the current one is the same as \"linear independent over the ringification\" (at least for cancellative semirings)</p>",
        "id": 501188610,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1740172710
    },
    {
        "content": "<p>I just made the word \"ringification\" up, but I mean the same construction as getting <code>â„¤</code> from <code>â„•</code> (the should be the adjoint of the forgetful functor).</p>",
        "id": 501188716,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1740172776
    },
    {
        "content": "<p>for those who missed it and don't feel like searching through the previous thread, under the previous definition, a family was <code>LinearIndependent</code> exactly when the kernel of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finsupp.linearCombination#doc\">docs#Finsupp.linearCombination</a> is trivial. Indeed, the kernel of taking linear combinations of <code>Nat.succ</code> is trivial, but taking linear combinations is not injective (which is the current definition of <code>LinearIndependent</code>)</p>",
        "id": 501189879,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1740173328
    },
    {
        "content": "<p>I got</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">linearIndependent</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsCancelAdd</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsRightCancelMulZero</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sequence</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">LinearIndependent</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span>\n</code></pre></div>\n<p>sorry-free! It needs some tidying though.</p>",
        "id": 501265982,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1740230873
    },
    {
        "content": "<p>Amazing. I saw your \"horrible\" last night :) looking forward to learning from the less-horrible version.</p>",
        "id": 501266204,
        "sender_full_name": "Julian Berman",
        "timestamp": 1740230934
    },
    {
        "content": "<p>Haha yeah I had never dealt with polynomials in Mathlib before and got a little bit frustrated <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 501266385,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1740231005
    },
    {
        "content": "<p>(Just a comment that won't help much, I fear.) This seems to be a particular case of the following situation: Starting from an <code>R</code>-module <code>M</code> with a filtration (which doesn't seem to be formalized in mathlib), that is a monotone family of submodules indexed by an ordered set, you can consider its associated graded module (direct sum of quotient of the filtered parts modulo the sum of the strictly slower ones), and you have a family in that module which induces a basis in the graded moduleâ€”then it is a basis.</p>",
        "id": 501291403,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1740249817
    },
    {
        "content": "<p>(there is an open PR about associated graded rings, and possibly also modules)</p>",
        "id": 501294173,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1740252149
    },
    {
        "content": "<p>Yeah in trying to understand Antoine's comment we found an old thread from you Eric on them :) EDIT: looks like <a href=\"https://github.com/leanprover-community/mathlib4/pull/20913\">#20913</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/20940\">#20940</a></p>",
        "id": 501294226,
        "sender_full_name": "Julian Berman",
        "timestamp": 1740252221
    },
    {
        "content": "<p>Thanks. I'll try to review these PR.</p>",
        "id": 501302659,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1740259465
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130609\">Antoine Chambert-Loir</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Linear.20independence.20of.20polynomial.20sequences.20over.20semirings/near/501291403\">said</a>:</p>\n<blockquote>\n<p>you can consider its associated graded module (direct sum of quotient of the filtered parts modulo the sum of the strictly slower ones)</p>\n</blockquote>\n<p>But for this particular question you only need to consider the <code>R</code>-module structure of this graded module, but not over any graded ring.</p>",
        "id": 501330252,
        "sender_full_name": "Jz Pan",
        "timestamp": 1740281786
    }
]