[
    {
        "content": "<p>I'm not in mathlib mode, I'm in \"write a Lean game using mathlib\" mode and the fact that <code>subset_trans</code> is in the root namespace is really inconvenient. For projects which aren't mathlib, I can really see the appeal of the idea that all mathlib stuff should be in a <code>Mathlib</code> namespace. Even if this never happens, isn't it reasonable to put <code>subset_trans</code> in a <code>Set</code> namespace which I can not open? </p>\n<p>Alternatively, can anyone tell me how I can make <code>MySet.subset_trans</code> and then write some other code which means that I can avoid the error</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">ambiguous</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">possible</span><span class=\"w\"> </span><span class=\"n\">interpretations</span>\n<span class=\"w\">  </span><span class=\"bp\">_</span><span class=\"n\">root_</span><span class=\"bp\">.</span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"n\">hAS</span><span class=\"w\"> </span><span class=\"n\">hST</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">T</span>\n\n<span class=\"w\">  </span><span class=\"n\">MySet</span><span class=\"bp\">.</span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"n\">hAS</span><span class=\"w\"> </span><span class=\"n\">hST</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">T</span>\n</code></pre></div>\n<p>i.e. is there any way I can \"switch off\" <code>_root_.subset_trans</code> whilst still importing <code>Mathlib.Data.Set.Basic</code>? If not then I am faced with what looks like an impossible problem.</p>",
        "id": 452216030,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721261511
    },
    {
        "content": "<p>Hmm, for some reason if I'm in the <code>MySet</code> namespace then this works, the <code>MySet</code> one gets priority. The problem is that I don't want to be in this namespace, I want to be in the <code>MyFilter</code> namespace for this specific proof, and <code>Open MySet</code> doesn't cut it.</p>\n<p>Maybe the answer is that if I'm making a game then I have to make one namespace specific to that game and then I am not allowed to use any namespaces other than that one? I was planning on making several bespoke namespaces where I was putting copies of mathlib lemmas (when users prove a lemma I want to create the illusion that they're making that lemma themselves and it's that lemma which is being used later on, <em>even if the lemma is already there</em>, that's the root of the problem).</p>",
        "id": 452216321,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721261656
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span> I remember you arguing that we didn't need a Mathlib namespace because if we're using Lean and doing mathematics then we should be using Mathlib, not making it all again. Making games is perhaps an exception to this rule.</p>",
        "id": 452216735,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721261889
    },
    {
        "content": "<p>Yeah this is now all working. The moral is that if Mathlib is not going to live in its own namespace then it's forcing me to live in my own namespace and furthermore it's forcing me to have only one namespace. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">MyGame</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">MyFirstNamespace</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">MyFirstNamespace</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">MySecondNamespace</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MyFirstNamespace</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"c1\">-- ambiguous term</span>\n</code></pre></div>",
        "id": 452218290,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721262988
    },
    {
        "content": "<p>Different failure:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">MyFirstNamespace</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">MyFirstNamespace</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">MySecondNamespace</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MyFirstNamespace</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"c1\">-- ambiguous term</span>\n</code></pre></div>",
        "id": 452218329,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721263033
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">MyOnlyNamespace</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">subset_trans</span><span class=\"w\"> </span><span class=\"c1\">-- works, applies my version</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">MyOnlyNamespace</span>\n</code></pre></div>",
        "id": 452218436,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721263103
    },
    {
        "content": "<p>No suggestions on my part, but I CAN'T WAIT to play that game. <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 452218471,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1721263141
    },
    {
        "content": "<p>lol, you should be at <a href=\"https://www.essex.ac.uk/departments/mathematics-statistics-and-actuarial-science/events/lms-undergraduate-summer-school/programme\">https://www.essex.ac.uk/departments/mathematics-statistics-and-actuarial-science/events/lms-undergraduate-summer-school/programme</a></p>",
        "id": 452218502,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1721263181
    },
    {
        "content": "<p>I would still love to namespace Mathlib!</p>",
        "id": 452223113,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721265628
    },
    {
        "content": "<p>I still think this is a bug / missing feature in name resolution</p>",
        "id": 452224278,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1721266128
    },
    {
        "content": "<p>I think there is already an issue for <code>open _root_ hiding (foo)</code></p>",
        "id": 452224316,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1721266148
    }
]