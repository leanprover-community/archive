[
    {
        "content": "<p>Hello,</p>\n<p>In my research it would be helpful to have a boolean Semiring, where addition is or instead of xor.</p>\n<p>Would it make sense to add this, or would such a new Add instance conflict with the existing Boolean Ring instances, where addition is xor?</p>\n<p>Thanks!</p>",
        "id": 547816199,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761773607
    },
    {
        "content": "<p>sounds similar to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IdemSemiring#doc\">docs#IdemSemiring</a></p>",
        "id": 547817321,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761774118
    },
    {
        "content": "<p>if you want a different instance, you should probably use a type synonym, i.e. do something like<br>\n<code>def Bool' := Bool</code><br>\nand then construct the instance on <code>Bool'</code></p>",
        "id": 547817457,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761774181
    },
    {
        "content": "<p>I think they're talking about <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=BooleanRing#doc\">docs#BooleanRing</a></p>",
        "id": 547817490,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761774197
    },
    {
        "content": "<p>not putting a different semiring instance on <code>Bool</code></p>",
        "id": 547817583,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761774238
    },
    {
        "content": "<p>Hey, can you clarify what exactly is a boolean semiring? Is it a specific (family of) ring(s) or is it any semiring satisfying some axioms? If so, do those axioms happen to be captured by <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IdemSemiring#doc\">docs#IdemSemiring</a> ?</p>",
        "id": 547818276,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1761774574
    },
    {
        "content": "<p><a href=\"https://ncatlab.org/nlab/show/Boolean+semiring\">nLab</a> claims there are at least five different definitions of \"boolean semirings\" in the literature</p>",
        "id": 547818850,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1761774876
    },
    {
        "content": "<p>Thanks for all of the replies!</p>\n<p>Basically, I need a <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Ring/Defs.html#Semiring\"><code>Semiring</code></a> instance for <code>Bool</code> where <code>Add</code> is or <code>||</code>. I don't mean a type or family of ring(s).</p>\n<p>For my general work, I believe that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IdemSemiring#doc\">docs#IdemSemiring</a> is too restrictive, since I also care about Semirings in general, not just a Semiring instance for <code>Bool</code>.</p>\n<p>I am worked on <em>weighted</em> formal language theory, where automata and regular expressions also produce a weight, and the type of the weights need to satisfy the <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Ring/Defs.html#Semiring\"><code>Semiring</code></a> axioms.</p>\n<p>Currently, I am working on showing that one may construct an unweighted/standard <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Computability/NFA.html#NFA\"><code>NFA</code></a> given a weighted NFA with boolean weights, and for this case I believe I need the <code>Add</code> operation to be boolean or.</p>",
        "id": 547820431,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761775546
    },
    {
        "content": "<p>Perhaps for this general construction (weighted to unweighted NFA) I do not need the boolean semiring specifically, but I believe it would be the most elegant</p>",
        "id": 547820774,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761775652
    },
    {
        "content": "<p>I performed a similar construction to produce an unweighted/normal <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=DFA#doc\">docs#DFA</a> from a boolean weighted DFA, and this case the Semiring addition operator did not matter since for weighted DFAs only semiring multiplication matters (i think, or at least in this case)</p>",
        "id": 547820981,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761775765
    },
    {
        "content": "<p>see my answer</p>",
        "id": 547821117,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761775840
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/287929-mathlib4/topic/RFC.3A.20Boolean.20Semiring/near/547817457\">said</a>:</p>\n<blockquote>\n<p>if you want a different instance, you should probably use a type synonym, i.e. do something like<br>\n<code>def Bool' := Bool</code><br>\nand then construct the instance on <code>Bool'</code></p>\n</blockquote>\n<p>is this the standard way to get around something like this in Mathlib or Lean when there are instances with different implementations for the same typeclass and data type?</p>",
        "id": 547821248,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761775904
    },
    {
        "content": "<p>yes</p>",
        "id": 547821295,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761775926
    },
    {
        "content": "<p>(see for examples <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Additive#doc\">docs#Additive</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Opposite#doc\">docs#Opposite</a>)</p>",
        "id": 547821385,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1761775982
    },
    {
        "content": "<p>Is there a way to suppress instances from imports and then define my own version of the instance? Or  maybethe <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Ring/BooleanRing.html#BooleanRing\"><code>boolean ring file</code></a> is not that pervasively imported across Matlib, and for my work I could just avoid importing modules that export that?</p>",
        "id": 547821706,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761776155
    },
    {
        "content": "<p>You could disable the instances locally</p>",
        "id": 547821811,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761776206
    },
    {
        "content": "<p>in <code>Counterexamples.CharPZeroNeCharZero</code> there's a <del>semiring</del> addmonoidwithone that's sort of like what you want (the addition and multiplication line up) that they use <code>WithZero Unit</code></p>",
        "id": 547821977,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761776312
    },
    {
        "content": "<p>oh it actually has a semiring instance</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">WithZero</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 547822033,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761776347
    },
    {
        "content": "<p>Depending on which commit of mathlib you use, <code>WithZero Unit</code> may be <code>Fin 2</code>.</p>",
        "id": 547822369,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1761776552
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/RFC.3A.20Boolean.20Semiring/near/547821811\">said</a>:</p>\n<blockquote>\n<p>You could disable the instances locally</p>\n</blockquote>\n<p>do you mean like this? It doesn't get rid of the prior instance entirely...?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">section</span><span class=\"w\"> </span><span class=\"n\">boolean</span>\n\n<span class=\"kn\">attribute</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">-</span><span class=\"kn\">instance</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">instAddBool_mathlib</span>\n\n<span class=\"c1\">-- CommRing.toNonUnitalCommRing.toNonUnitalNonAssocCommRing.toNonUnitalNonAssocCommSemiring.toDistrib.toAdd</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">Bool</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">myAddBool</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"bp\">.</span><span class=\"n\">or</span>\n\n<span class=\"c1\">-- myAddBool</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"w\"> </span><span class=\"n\">Bool</span>\n\n<span class=\"bp\">...</span>\n\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">boolean</span>\n</code></pre></div>",
        "id": 547822630,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761776697
    },
    {
        "content": "<p>yeah you really need to disable a lot of instances</p>",
        "id": 547822913,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761776853
    },
    {
        "content": "<p>I guess for my use-case it would be easier for me to define my own local Semiring Bool instance...</p>",
        "id": 547823105,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761776994
    },
    {
        "content": "<p>just use <code>WithZero Unit</code> instead it will save you a lot of trouble</p>",
        "id": 547823158,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761777022
    },
    {
        "content": "<p>Would a Semiring Bool instance (with Add as or) be good for Mathlib in general </p>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/RFC.3A.20Boolean.20Semiring/near/547823158\">said</a>:</p>\n<blockquote>\n<p>just use <code>WithZero Unit</code> instead it will save you a lot of trouble</p>\n</blockquote>\n<p>what does this do?</p>",
        "id": 547823257,
        "sender_full_name": "Rudy Peterson",
        "timestamp": 1761777071
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"786070\">Rudy Peterson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/RFC.3A.20Boolean.20Semiring/near/547823257\">said</a>:</p>\n<blockquote>\n<p>Would a Semiring Bool instance (with Add as or) be good for Mathlib in general </p>\n</blockquote>\n<p>No it would not since <code>Bool</code> already has a different semiring instance</p>",
        "id": 547823354,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761777119
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"786070\">Rudy Peterson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/RFC.3A.20Boolean.20Semiring/near/547823257\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/RFC.3A.20Boolean.20Semiring/near/547823158\">said</a>:</p>\n<blockquote>\n<p>just use <code>WithZero Unit</code> instead it will save you a lot of trouble</p>\n</blockquote>\n<p>what does this do?</p>\n</blockquote>\n<p>Gives you a way to refer to the semiring you want without fighting typeclass</p>",
        "id": 547823431,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761777165
    }
]