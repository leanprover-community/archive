[
    {
        "content": "<p>If i may, merging master to branches can also trigger issues because you get a graph loop, and if the PR gets open for a long period, and you merged master back many times, when you'll really merge to master, you can get really hard to fix merge conflicts.<br>\nSo my personnal advice is (if you can), rebase from master (git rebase) instead of merging master back.</p>",
        "id": 539761796,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1758027440
    },
    {
        "content": "<p>What?</p>",
        "id": 539763269,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758027859
    },
    {
        "content": "<p>I would not recommend <code>rebase</code> to anybody who doesn't already know what it is</p>",
        "id": 539763777,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758028000
    },
    {
        "content": "<p><span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>In some project culture like the previous one I was in, developers like to recommend git rebase, but yeah I agree you have higher chance of messing up there if you don't know what it does</p>",
        "id": 539765610,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1758028433
    },
    {
        "content": "<p>i may be biaised, but i'm so used to rebasing that i do it as fast as merges.</p>",
        "id": 539769537,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1758029405
    },
    {
        "content": "<p>Sure, but I'm explicitly not talking about you</p>",
        "id": 539770280,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1758029587
    },
    {
        "content": "<p>Since Mathlib is managed via bors, which is an approach of staged squash and merge of individual PRs, rebase doesn't work so well since the squash is an independent commit.</p>",
        "id": 539770508,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1758029655
    },
    {
        "content": "<p>Additionally, stepping through the rebase one conflicted commit at a time fixing proofs can be repetitive and self defeating if a later commit performed yet another refactor or move or something would require more fixes.</p>",
        "id": 539770789,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1758029740
    },
    {
        "content": "<p>8 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/CI.20failure/with/539759905\">#mathlib4 &gt; CI failure</a> by <span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span>.</p>",
        "id": 539771549,
        "sender_full_name": "Notification Bot",
        "timestamp": 1758029895
    },
    {
        "content": "<p>Also, the github PR history is nicely preserved when merging master (and not rebasing)</p>",
        "id": 539774597,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1758030612
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"942100\">ecyrbe</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Rebase.20vs.20merge/near/539761796\">said</a>:</p>\n<blockquote>\n<p>you merged master back many times, when you'll really merge to master, you can get really hard to fix merge conflicts.</p>\n</blockquote>\n<p>I've never seen this behavior; if you merge master many times as you go along, the conflicts are likely to be much <em>easier</em> to solve, not harder.</p>",
        "id": 539774750,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758030654
    },
    {
        "content": "<p>Things go wrong if you mix this strategy with rebasing</p>",
        "id": 539774796,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758030662
    },
    {
        "content": "<p>yes, when you rebase, you have to always rebase. not mix with merge back.</p>",
        "id": 539775045,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1758030730
    },
    {
        "content": "<p><a href=\"https://github.com/mhagger/git-imerge\">https://github.com/mhagger/git-imerge</a> can be quite handy for dealing with nontrivial conflicts</p>",
        "id": 539775757,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758030885
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"479299\">Jovan Gerbscheid</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Rebase.20vs.20merge/near/539774597\">said</a>:</p>\n<blockquote>\n<p>Also, the github PR history is nicely preserved when merging master (and not rebasing)</p>\n</blockquote>\n<p>you can rebase without squash. (squash = rebase -i ; basic rebase = git pull --rebase)</p>",
        "id": 539775999,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1758030921
    },
    {
        "content": "<p>But that's not the actual history, that's a retelling of the history; especially if each commit has merge conflicts that are resolved manually.</p>",
        "id": 539776182,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1758030969
    },
    {
        "content": "<p>For Mathlib, I've found rerere super useful. Especially when I'm updating a lot of branches by a merge master.</p>",
        "id": 539778865,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1758031596
    }
]