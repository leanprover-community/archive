[
    {
        "content": "<p>I stumbled across a typo which I fixed in <a href=\"https://github.com/leanprover-community/mathlib4/pull/26893\">#26893</a>, where <code>tmul</code> was misspelled as <code>tuml</code>. Do we have programmers here which can analyse the whole Mathlib to identify potential typos? Checking against a dictionary won't work, but I thought maybe we can do a frequency analysis, tokenising on each \"word\" to match <code>Tmul</code> or <code>tmul</code> (because we have two different cases conventions), and looking at say the bottom 1% of the frequencies. Is this a good algorithm? I might even write it myself.</p>",
        "id": 527682466,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751979416
    },
    {
        "content": "<p>I think a better idea is the linter to auto-suggest (or auto-verify) the naming convention. There's an implementation already I think.</p>",
        "id": 527687256,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1751980662
    },
    {
        "content": "<p>There is also a suspicious <code>G</code> (vs <code>g</code>) in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ideal.pointwise_smul_toAddSubGroup#doc\">docs#Ideal.pointwise_smul_toAddSubGroup</a>.</p>",
        "id": 527687816,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751980795
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.tensto_primeCounting#doc\">docs#Nat.tensto_primeCounting</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.tendsto_primeCounting%27#doc\">docs#Nat.tendsto_primeCounting'</a>, where the latter is trying to avoid clashing with the intended name of the former!</p>",
        "id": 527688250,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751980910
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Let's.20catch.20typos!/near/527687256\">said</a>:</p>\n<blockquote>\n<p>I think a better idea is the linter to auto-suggest (or auto-verify) the naming convention. There's an implementation already I think.</p>\n</blockquote>\n<p>are there any results?</p>",
        "id": 527688484,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751980970
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Submodule.map_iSup_comap_of_sujective#doc\">docs#Submodule.map_iSup_comap_of_sujective</a>.  I might stop here, but this is fun!</p>",
        "id": 527688623,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751980998
    },
    {
        "content": "<p>did you catch this yourself over time, or is this from a program?</p>",
        "id": 527688714,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751981016
    },
    {
        "content": "<p>I just looked for them after you mentioned this.</p>",
        "id": 527688765,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751981031
    },
    {
        "content": "<p>but how do you know where to look for?</p>",
        "id": 527688817,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751981044
    },
    {
        "content": "<p>I did a poor man's tokenization:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>git<span class=\"w\"> </span>ls-files<span class=\"w\"> </span><span class=\"s1\">'Mathlib/*.lean'</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>xargs<span class=\"w\"> </span>grep<span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"\\(theorem\\|lemma\\) [^ ]*\"</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>awk<span class=\"w\"> </span><span class=\"s1\">'{print $2}'</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>awk<span class=\"w\"> </span>-F_<span class=\"w\"> </span><span class=\"s1\">'{for(i=1;i&lt;=NF;i++) {print $i}}'</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>awk<span class=\"w\"> </span>-F.<span class=\"w\"> </span><span class=\"s1\">'{for(i=1;i&lt;=NF;i++) {print $i}}'</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>sort<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>uniq<span class=\"w\"> </span>-c<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>sort<span class=\"w\"> </span>-n<span class=\"w\"> </span>-k1<span class=\"w\"> </span>-r<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>grep<span class=\"w\"> </span><span class=\"s2\">\"^ *1 \"</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>less\n</code></pre></div>\n<p>and scanned through the output.</p>",
        "id": 527688937,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751981075
    },
    {
        "content": "<p>Not sure if Jireh is also referring to this, but I still think it'd be worth continuing the work started in <a href=\"#narrow/channel/270676-lean4/topic/automatic.20spelling.20generation.20.26.20comparison/near/505760384\">#lean4 &gt; automatic spelling generation &amp; comparison @ üí¨</a> and making it into a linter.</p>",
        "id": 527689053,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1751981096
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Let's.20catch.20typos!/near/527688937\">said</a>:</p>\n<blockquote>\n<p>I did a poor man's tokenization:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>git<span class=\"w\"> </span>ls-files<span class=\"w\"> </span><span class=\"s1\">'Mathlib/*.lean'</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>xargs<span class=\"w\"> </span>grep<span class=\"w\"> </span>-o<span class=\"w\"> </span><span class=\"s2\">\"\\(theorem\\|lemma\\) [^ ]*\"</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>awk<span class=\"w\"> </span><span class=\"s1\">'{print $2}'</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>awk<span class=\"w\"> </span><span class=\"s1\">'BEGIN{FS=\"_\"} {for(i=1;i&lt;=NF;i++) {print $i}}'</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>awk<span class=\"w\"> </span><span class=\"s1\">'BEGIN{FS=\".\"} {for(i=1;i&lt;=NF;i++) {print $i}}'</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>sort<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>uniq<span class=\"w\"> </span>-c<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>sort<span class=\"w\"> </span>-n<span class=\"w\"> </span>-k1<span class=\"w\"> </span>-r<span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>grep<span class=\"w\"> </span><span class=\"s2\">\"^ *1\"</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>less\n</code></pre></div>\n<p>and scanned through the output.</p>\n</blockquote>\n<p>oh wow I was about to spend like 1 hour writing the program, you saved my time by a one liner!</p>",
        "id": 527689177,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751981125
    },
    {
        "content": "<p>Btw, I agree that a linter would be better (as would an autoformaliser)!!</p>",
        "id": 527689209,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751981133
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Let's.20catch.20typos!/near/527689177\">said</a>:</p>\n<blockquote>\n<p>oh wow I was about to spend like 1 hour writing the program, you saved my time by a one liner!</p>\n</blockquote>\n<p>It is a <em>pretty long</em> line...</p>",
        "id": 527689362,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751981169
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NumberField.ComplexEmbedding.IsConj.coe_stabilzer_mk#doc\">docs#NumberField.ComplexEmbedding.IsConj.coe_stabilzer_mk</a></p>",
        "id": 527691416,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751981637
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.smmoothNumbers_eq_factoredNumbers_primesBelow#doc\">docs#Nat.smmoothNumbers_eq_factoredNumbers_primesBelow</a></p>",
        "id": 527692081,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751981799
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Let's.20catch.20typos!/near/527689053\">said</a>:</p>\n<blockquote>\n<p>Not sure if Jireh is also referring to this, but I still think it'd be worth continuing the work started in <a href=\"#narrow/channel/270676-lean4/topic/automatic.20spelling.20generation.20.26.20comparison/near/505760384\">#lean4 &gt; automatic spelling generation &amp; comparison @ üí¨</a> and making it into a linter.</p>\n</blockquote>\n<p>Yep, that's the one I was thinking of.</p>",
        "id": 527692160,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1751981815
    },
    {
        "content": "<p>I remember that a while back I went and fixed typos in authors names in files, but this has relapsed since.</p>",
        "id": 527692449,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751981883
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lagrange.nodalWeight_eq_eval_nodal_derative#doc\">docs#Lagrange.nodalWeight_eq_eval_nodal_derative</a><br>\n<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Polynomial.divByMonic_add_X_sub_C_mul_derivate_divByMonic_eq_derivative#doc\">docs#Polynomial.divByMonic_add_X_sub_C_mul_derivate_divByMonic_eq_derivative</a></p>",
        "id": 527694838,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751982486
    },
    {
        "content": "<p>Oh, should I repeat <a href=\"https://github.com/leanprover/lean4/pull/9175\">lean4#9175</a> on all of mathlib :-)?</p>",
        "id": 527734442,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751992711
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"873547\">@Robin Arnez</span> yes please <span aria-label=\"melt\" class=\"emoji emoji-1fae0\" role=\"img\" title=\"melt\">:melt:</span> did you write a program to do that? does it use the algorithm I suggested above?</p>",
        "id": 527734719,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751992802
    },
    {
        "content": "<p>Oh well it's for typos</p>",
        "id": 527734769,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751992820
    },
    {
        "content": "<p>Something like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PresheafOfModules.Derivation.Universal.desc#doc\">docs#PresheafOfModules.Derivation.Universal.desc</a></p>",
        "id": 527734789,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751992827
    },
    {
        "content": "<p>(doc-string)</p>",
        "id": 527734807,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751992837
    },
    {
        "content": "<p>yes but how are you searching for them?</p>",
        "id": 527734892,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751992857
    },
    {
        "content": "<p>I use a program to generate a list of \"tokens\" (lowercase words)</p>",
        "id": 527735031,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751992888
    },
    {
        "content": "<p>The code for anyone interested:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"n\">partial</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">endLink</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">Pos</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">Pos</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">atEnd</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">p</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">get'</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"o\">)</span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"bp\">‚à®</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">'\\</span><span class=\"n\">n'</span><span class=\"w\"> </span><span class=\"bp\">‚à®</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"n\">p</span>\n<span class=\"w\">    </span><span class=\"k\">else</span>\n<span class=\"w\">      </span><span class=\"n\">endLink</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span>\n\n<span class=\"n\">partial</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">splitStringCamelCase</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[]</span>\n<span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"bp\">.</span><span class=\"n\">Pos</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">atEnd</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">part</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">extract</span><span class=\"w\"> </span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toLower</span>\n<span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">part</span><span class=\"bp\">.</span><span class=\"n\">isEmpty</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">push</span><span class=\"w\"> </span><span class=\"n\">part</span>\n<span class=\"w\">    </span><span class=\"k\">else</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">get'</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">isLower</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">substrEq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\"ttp\"</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">          </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">endLink</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span>\n<span class=\"w\">          </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">push</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">extract</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">pos</span><span class=\"o\">))</span>\n<span class=\"w\">        </span><span class=\"k\">else</span>\n<span class=\"w\">          </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">c'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">get?</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span>\n<span class=\"w\">          </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">c'</span><span class=\"bp\">.</span><span class=\"n\">any</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬∑.</span><span class=\"n\">isUpper</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">            </span><span class=\"c1\">-- boundary</span>\n<span class=\"w\">            </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">part</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">extract</span><span class=\"w\"> </span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">toLower</span>\n<span class=\"w\">            </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">push</span><span class=\"w\"> </span><span class=\"n\">part</span><span class=\"o\">)</span>\n<span class=\"w\">          </span><span class=\"k\">else</span>\n<span class=\"w\">            </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">      </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">isUpper</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">c'</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">get?</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">c'</span><span class=\"bp\">.</span><span class=\"n\">any</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬∑.</span><span class=\"n\">isUpper</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">get?</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c'</span><span class=\"bp\">.</span><span class=\"n\">get!</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">any</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬∑.</span><span class=\"n\">isLower</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">          </span><span class=\"c1\">-- boundary</span>\n<span class=\"w\">          </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">part</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">extract</span><span class=\"w\"> </span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">toLower</span>\n<span class=\"w\">          </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">push</span><span class=\"w\"> </span><span class=\"n\">part</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"k\">else</span>\n<span class=\"w\">          </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">      </span><span class=\"k\">else</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">part</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">extract</span><span class=\"w\"> </span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">toLower</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">part</span><span class=\"bp\">.</span><span class=\"n\">isEmpty</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">push</span><span class=\"w\"> </span><span class=\"n\">part</span>\n<span class=\"w\">        </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">extractNameComponents</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Name</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">privateToUserName</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">eraseMacroScopes</span>\n<span class=\"w\">  </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[]</span>\n<span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Name</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">anonymous</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">str</span><span class=\"w\"> </span><span class=\"n\">root</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">root</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">splitStringCamelCase</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">++</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">num</span><span class=\"w\"> </span><span class=\"n\">root</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">root</span><span class=\"w\"> </span><span class=\"n\">a</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">info: #[\"ab\", \"cd\", \"ex\", \"facing\", \"only\", \"problems\", \"without\", \"solutions\", \"oh\", \"this\", \"works\", \"too\", \"and\", \"yeah\",</span>\n<span class=\"sd\">  \"i\", \"don\", \"t\"]</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">extractNameComponents</span><span class=\"w\"> </span><span class=\"ss\">`abCDExFacingOnlyPROBLEMSWithoutSOLUTIONS_oh_this_works.tooAndYeah_i_don't</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">countTerm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">StateRefT</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">modify</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"n\">alter</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">countName</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Name</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">StateRefT</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">forM</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">extractNameComponents</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">countTerm</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">countEnvironment</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Environment</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">StateRefT</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"n\">Unit</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">constants</span><span class=\"bp\">.</span><span class=\"n\">map‚ÇÅ</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"n\">countName</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">header</span><span class=\"bp\">.</span><span class=\"n\">modules</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">docStringExt</span><span class=\"bp\">.</span><span class=\"n\">getModuleEntries</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">      </span><span class=\"n\">countName</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Name</span><span class=\"bp\">.</span><span class=\"n\">mkStr1</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">findSource</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Environment</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Name</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Id</span><span class=\"bp\">.</span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">constants</span><span class=\"bp\">.</span><span class=\"n\">map‚ÇÅ</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">extractNameComponents</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">:</span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">header</span><span class=\"bp\">.</span><span class=\"n\">modules</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">docStringExt</span><span class=\"bp\">.</span><span class=\"n\">getModuleEntries</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">      </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">‚àà</span><span class=\"w\"> </span><span class=\"n\">extractNameComponents</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Name</span><span class=\"bp\">.</span><span class=\"n\">mkStr1</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">        </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">s1</span>\n<span class=\"w\">  </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">anonymous</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">findUncommonVocabulary</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">StateRefT</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Std</span><span class=\"bp\">.</span><span class=\"n\">HashMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">IO</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"w\">  </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">toArray</span><span class=\"bp\">.</span><span class=\"n\">qsort</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">‚à®</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">.</span><span class=\"m\">2</span><span class=\"w\"> </span><span class=\"bp\">‚àß</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"o\">))</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">mainEntry</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">CoreM</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">√ó</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">getEnv</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">act</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"n\">countEnvironment</span><span class=\"w\"> </span><span class=\"n\">env</span>\n<span class=\"w\">    </span><span class=\"n\">findUncommonVocabulary</span>\n<span class=\"w\">  </span><span class=\"n\">act</span><span class=\"bp\">.</span><span class=\"n\">run'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚àÖ</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">repr</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">mainEntry</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 527735131,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751992923
    },
    {
        "content": "<p>oh wow writing a Lean program to do it was definitely not in my todo list, I was planning to use Python XD</p>",
        "id": 527735536,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751993063
    },
    {
        "content": "<p>The most common tokens are</p>\n<ol>\n<li>\"of\" (170815 times)</li>\n<li>\"is\" (124041 times)</li>\n<li>\"the\" (116252 times)</li>\n<li>\"a\" (94516 times)</li>\n<li>\"proof\" (81658 times)</li>\n<li>\"eq\" (77826 times)</li>\n<li>\"theory\" (77466 times)</li>\n<li>\"to\" (76558 times)</li>\n<li>\"lean\" (73890 times)</li>\n<li>\"map\" (72755 times)</li>\n<li>\"category\" (67646 times)</li>\n<li>\"simp\" (55755 times)</li>\n<li>\"add\" (46543 times)</li>\n<li>\"inst\" (43220 times)</li>\n<li>\"std\" (37493 times)</li>\n<li>\"iff\" (36896 times)</li>\n<li>\"with\" (36894 times)</li>\n<li>\"on\" (35264 times)</li>\n<li>\"set\" (34117 times)</li>\n<li>\"match\" (33812 times)</li>\n</ol>",
        "id": 527735815,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993151
    },
    {
        "content": "<p>The lemmas that I mentioned above are in <a href=\"https://github.com/leanprover-community/mathlib4/pull/26904\">#26904</a>.</p>",
        "id": 527735911,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751993183
    },
    {
        "content": "<p>Note that many of these are because of internal declarations like <code>_simp_1</code>, <code>eq_1</code>, <code>_proof_1_1</code>, <code>match_1</code></p>",
        "id": 527735969,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993200
    },
    {
        "content": "<p>Oh <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SimpleGraph.compononentComplFunctor_nonempty_of_infinite#doc\">docs#SimpleGraph.compononentComplFunctor_nonempty_of_infinite</a></p>",
        "id": 527736380,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993357
    },
    {
        "content": "<p>\"the\" and \"a\" are somewhat unexpected</p>",
        "id": 527736509,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751993405
    },
    {
        "content": "<p>including doc-strings</p>",
        "id": 527736562,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993424
    },
    {
        "content": "<p>Thanks for the top 20 list; however I imagine the gold would actually be the list of bottom 20 <span aria-label=\"melt\" class=\"emoji emoji-1fae0\" role=\"img\" title=\"melt\">:melt:</span></p>",
        "id": 527736735,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751993486
    },
    {
        "content": "<p>Well,</p>\n<ol>\n<li>\"aaa\"</li>\n<li>\"aabbaa\"</li>\n<li>\"ababacabac\"</li>\n<li>\"abba\"</li>\n<li>\"abbabb\"</li>\n<li>\"abbabba\"</li>\n<li>\"abbabbabba\"</li>\n<li>\"abd\"</li>\n<li>\"abelianizations\"</li>\n<li>\"abi\"</li>\n<li>\"aborted\"</li>\n<li>\"absolyte\"</li>\n<li>\"absorb\"</li>\n<li>\"absorp\"</li>\n<li>\"abstractional\"</li>\n<li>\"abused\"</li>\n<li>\"acb\"</li>\n<li>\"accb\"</li>\n<li>\"accomplish\"</li>\n<li>\"accounts\"</li>\n</ol>\n<p>All of these occur exactly once</p>",
        "id": 527737167,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993644
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> wait what's the script to deprecate?</p>",
        "id": 527737433,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751993759
    },
    {
        "content": "<p>i've been doing it by hand <span aria-label=\"melt\" class=\"emoji emoji-1fae0\" role=\"img\" title=\"melt\">:melt:</span></p>",
        "id": 527737440,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751993763
    },
    {
        "content": "<p>I also have the <a href=\"/user_uploads/3121/dBvEYANuB_hx0v5EknrKuAR6/fulllist.txt\">full list</a> for anyone interested</p>",
        "id": 527737473,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993772
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 527737547,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751993787
    },
    {
        "content": "<p>Where is ababacabac? I couldn't find it on Mathlib</p>",
        "id": 527737686,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751993840
    },
    {
        "content": "<p>Well it's in lean core</p>",
        "id": 527737725,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993858
    },
    {
        "content": "<p>(remember, I used a Lean program to find these in all declarations)</p>",
        "id": 527737762,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993873
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/blob/6ad12525adc69fb402d488895e6d200424d49e4b/tests/lean/string_imp.lean#L20\">https://github.com/leanprover/lean4/blob/6ad12525adc69fb402d488895e6d200424d49e4b/tests/lean/string_imp.lean#L20</a></p>",
        "id": 527737842,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751993903
    },
    {
        "content": "<p>aha found it XD</p>",
        "id": 527737850,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751993905
    },
    {
        "content": "<p>test file</p>",
        "id": 527737917,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751993930
    },
    {
        "content": "<p>Nah, you're looking for <a href=\"https://github.com/leanprover/lean4/blob/6ad12525adc69fb402d488895e6d200424d49e4b/src/Init/Data/String/Basic.lean#L614\">https://github.com/leanprover/lean4/blob/6ad12525adc69fb402d488895e6d200424d49e4b/src/Init/Data/String/Basic.lean#L614</a></p>",
        "id": 527737934,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993934
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=String.splitOn#doc\">docs#String.splitOn</a></p>",
        "id": 527737959,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993944
    },
    {
        "content": "<p>I found two of them with <code>git grep</code></p>",
        "id": 527737985,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751993953
    },
    {
        "content": "<p>It doesn't look through tests</p>",
        "id": 527737992,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1751993955
    },
    {
        "content": "<p>exactly those two</p>",
        "id": 527738002,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1751993958
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Let's.20catch.20typos!/near/527737433\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> wait what's the script to deprecate?</p>\n</blockquote>\n<p>It is <code>scripts/add_deprecations.sh</code>: it is somewhat buggy and actually edits your local files, so make sure to run in when you can easily revert the changes.  It is more reliable when the diff with <code>master</code> is only renames of declarations.  It misses progressively more deprecations as the diff increases.</p>",
        "id": 527738538,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1751994142
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"873547\">Robin Arnez</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Let's.20catch.20typos!/near/527735815\">said</a>:</p>\n<blockquote>\n<p>The most common tokens are</p>\n<ol>\n<li>\"of\" (170815 times)</li>\n<li>\"is\" (124041 times)</li>\n<li>\"the\" (116252 times)</li>\n<li>\"a\" (94516 times)</li>\n<li>\"proof\" (81658 times)</li>\n<li>\"eq\" (77826 times)</li>\n<li>\"theory\" (77466 times)</li>\n<li>\"to\" (76558 times)</li>\n</ol>\n</blockquote>\n<p>my conclusion is that the most popular area of math is proof theory</p>",
        "id": 527739460,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1751994449
    },
    {
        "content": "<p>I finally wrote a Python program to search through Mathlib.</p>\n<p>The program: <a href=\"https://github.com/kckennylau/mathlib4/blob/typos/typos.py\">https://github.com/kckennylau/mathlib4/blob/typos/typos.py</a></p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"c1\"># Put me in mathlib4</span>\n<span class=\"c1\"># Don't forget to add \"typos.py\", \"typos.txt\" and \"typos-filename.txt\" to .git/info/exclude</span>\n\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">os</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">re</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">sys</span>\n\n<span class=\"n\">freq</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">()</span>\n<span class=\"n\">first_seen</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">()</span>\n\n<span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">record</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">,</span> <span class=\"n\">token</span><span class=\"p\">):</span>\n    <span class=\"k\">global</span> <span class=\"n\">freq</span><span class=\"p\">,</span> <span class=\"n\">first_seen</span>\n    <span class=\"k\">if</span> <span class=\"n\">token</span> <span class=\"ow\">in</span> <span class=\"n\">freq</span><span class=\"p\">:</span>\n        <span class=\"n\">freq</span><span class=\"p\">[</span><span class=\"n\">token</span><span class=\"p\">]</span> <span class=\"o\">+=</span> <span class=\"mi\">1</span>\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n        <span class=\"n\">first_seen</span><span class=\"p\">[</span><span class=\"n\">token</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">filename</span>\n        <span class=\"n\">freq</span><span class=\"p\">[</span><span class=\"n\">token</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>\n\n<span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">process</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">,</span> <span class=\"n\">file</span><span class=\"p\">):</span>\n    <span class=\"n\">tokens</span> <span class=\"o\">=</span> <span class=\"n\">re</span><span class=\"o\">.</span><span class=\"n\">findall</span><span class=\"p\">(</span><span class=\"s2\">\"[A-Z]?[a-z]+\"</span><span class=\"p\">,</span> <span class=\"n\">file</span><span class=\"p\">)</span>\n    <span class=\"k\">for</span> <span class=\"n\">token</span> <span class=\"ow\">in</span> <span class=\"n\">tokens</span><span class=\"p\">:</span>\n        <span class=\"n\">token</span> <span class=\"o\">=</span> <span class=\"n\">token</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">()</span>\n        <span class=\"n\">record</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">,</span> <span class=\"n\">token</span><span class=\"p\">)</span>\n\n<span class=\"n\">count</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n<span class=\"k\">for</span> <span class=\"n\">root</span><span class=\"p\">,</span> <span class=\"n\">dirs</span><span class=\"p\">,</span> <span class=\"n\">files</span> <span class=\"ow\">in</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">walk</span><span class=\"p\">(</span><span class=\"s1\">'Mathlib'</span><span class=\"p\">):</span>\n    <span class=\"k\">for</span> <span class=\"n\">file</span> <span class=\"ow\">in</span> <span class=\"n\">files</span><span class=\"p\">:</span>\n        <span class=\"n\">filename</span> <span class=\"o\">=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">root</span><span class=\"p\">,</span> <span class=\"n\">file</span><span class=\"p\">)</span>\n        <span class=\"k\">with</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">,</span> <span class=\"s2\">\"r\"</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"o\">=</span><span class=\"s2\">\"UTF-8\"</span><span class=\"p\">)</span> <span class=\"k\">as</span> <span class=\"n\">auto</span><span class=\"p\">:</span>\n            <span class=\"n\">count</span> <span class=\"o\">+=</span> <span class=\"mi\">1</span>\n            <span class=\"k\">if</span> <span class=\"n\">count</span> <span class=\"o\">%</span> <span class=\"mi\">100</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"p\">:</span>\n                <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">stdout</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"</span><span class=\"se\">\\r</span><span class=\"si\">%d</span><span class=\"s2\"> files processed.\"</span><span class=\"o\">%</span><span class=\"n\">count</span><span class=\"p\">)</span>\n                <span class=\"n\">sys</span><span class=\"o\">.</span><span class=\"n\">stdout</span><span class=\"o\">.</span><span class=\"n\">flush</span><span class=\"p\">()</span>\n            <span class=\"n\">process</span><span class=\"p\">(</span><span class=\"n\">filename</span><span class=\"p\">,</span> <span class=\"n\">auto</span><span class=\"o\">.</span><span class=\"n\">read</span><span class=\"p\">())</span>\n\n<span class=\"n\">report</span> <span class=\"o\">=</span><span class=\"s2\">\"</span><span class=\"si\">%d</span><span class=\"s2\"> files processed.</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"o\">%</span><span class=\"n\">count</span>\n<span class=\"n\">report</span><span class=\"o\">+=</span><span class=\"s2\">\"Number of distinct tokens: </span><span class=\"si\">%d</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"o\">%</span><span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">freq</span><span class=\"p\">)</span>\n<span class=\"n\">report</span><span class=\"o\">+=</span><span class=\"s2\">\"Total number of tokens: </span><span class=\"si\">%d</span><span class=\"se\">\\n\\n</span><span class=\"s2\">\"</span><span class=\"o\">%</span><span class=\"p\">(</span><span class=\"nb\">sum</span><span class=\"p\">(</span><span class=\"n\">freq</span><span class=\"p\">[</span><span class=\"n\">i</span><span class=\"p\">]</span> <span class=\"k\">for</span> <span class=\"n\">i</span> <span class=\"ow\">in</span> <span class=\"n\">freq</span><span class=\"p\">))</span>\n\n<span class=\"nb\">print</span><span class=\"p\">(</span><span class=\"s2\">\"</span><span class=\"se\">\\r</span><span class=\"s2\">\"</span><span class=\"o\">+</span><span class=\"n\">report</span><span class=\"p\">)</span>\n\n<span class=\"n\">typos_name</span> <span class=\"o\">=</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">\"typos-filename.txt\"</span><span class=\"p\">,</span> <span class=\"s2\">\"w\"</span><span class=\"p\">)</span>\n<span class=\"n\">typos</span> <span class=\"o\">=</span> <span class=\"nb\">open</span><span class=\"p\">(</span><span class=\"s2\">\"typos.txt\"</span><span class=\"p\">,</span> <span class=\"s2\">\"w\"</span><span class=\"p\">)</span>\n\n<span class=\"n\">typos_name</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">report</span><span class=\"p\">)</span>\n<span class=\"n\">typos</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">report</span><span class=\"p\">)</span>\n\n<span class=\"n\">keys</span> <span class=\"o\">=</span> <span class=\"nb\">sorted</span><span class=\"p\">(</span><span class=\"n\">freq</span><span class=\"o\">.</span><span class=\"n\">keys</span><span class=\"p\">(),</span> <span class=\"n\">key</span><span class=\"o\">=</span><span class=\"k\">lambda</span> <span class=\"n\">n</span><span class=\"p\">:(</span><span class=\"n\">freq</span><span class=\"p\">[</span><span class=\"n\">n</span><span class=\"p\">],</span><span class=\"n\">n</span><span class=\"p\">))</span>\n<span class=\"k\">for</span> <span class=\"n\">key</span> <span class=\"ow\">in</span> <span class=\"n\">keys</span><span class=\"p\">:</span>\n    <span class=\"n\">typos_name</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"</span><span class=\"si\">%s</span><span class=\"s2\">, </span><span class=\"si\">%s</span><span class=\"s2\">, </span><span class=\"si\">%s</span><span class=\"se\">\\n</span><span class=\"s2\">\"</span><span class=\"o\">%</span><span class=\"p\">(</span><span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"n\">freq</span><span class=\"p\">[</span><span class=\"n\">key</span><span class=\"p\">],</span> <span class=\"n\">first_seen</span><span class=\"p\">[</span><span class=\"n\">key</span><span class=\"p\">]))</span>\n    <span class=\"n\">typos</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"s2\">\"(</span><span class=\"si\">%s</span><span class=\"s2\">, </span><span class=\"si\">%s</span><span class=\"s2\">),\"</span><span class=\"o\">%</span><span class=\"p\">(</span><span class=\"n\">key</span><span class=\"p\">,</span> <span class=\"n\">freq</span><span class=\"p\">[</span><span class=\"n\">key</span><span class=\"p\">]))</span>\n\n<span class=\"n\">typos_name</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n<span class=\"n\">typos</span><span class=\"o\">.</span><span class=\"n\">close</span><span class=\"p\">()</span>\n</code></pre></div>",
        "id": 527747780,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751997581
    },
    {
        "content": "<p>The outputs:</p>\n<ul>\n<li>With file names: <a href=\"https://github.com/kckennylau/mathlib4/blob/typos/typos-filename.txt\">https://github.com/kckennylau/mathlib4/blob/typos/typos-filename.txt</a></li>\n<li>Without file names: <a href=\"https://raw.githubusercontent.com/kckennylau/mathlib4/refs/heads/typos/typos.txt\">https://raw.githubusercontent.com/kckennylau/mathlib4/refs/heads/typos/typos.txt</a></li>\n</ul>",
        "id": 527747837,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751997599
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>6607 files processed.\nNumber of distinct tokens: 17105\nTotal number of tokens: 11438980\n</code></pre></div>\n<p>It searches through every token of the form <code>[A-Z]?[a-z]+</code></p>",
        "id": 527748053,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751997672
    },
    {
        "content": "<p>I can spot quite a few typos already, I'll surely have fun correcting them on Thursday.</p>",
        "id": 527748690,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1751997909
    },
    {
        "content": "<p>Gemini 2.5 Pro seems to be pretty good at finding typos: <a href=\"https://github.com/leanprover-community/mathlib4/pull/26915\">mathlib4#26915</a>, <a href=\"https://github.com/leanprover-community/mathlib4/pull/26916\">mathlib4#26916</a></p>",
        "id": 527795808,
        "sender_full_name": "David Renshaw",
        "timestamp": 1752025902
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/27519\">#27519</a></p>",
        "id": 531005609,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753564818
    },
    {
        "content": "<p>I started experimenting with using GPT to find and correct typos</p>",
        "id": 531005643,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753564833
    },
    {
        "content": "<p>I'm not sure what the proper procedure is, so I just included the company and the model's name in the commit message</p>",
        "id": 531005728,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753564880
    },
    {
        "content": "<p>I'll post the PR's in <a class=\"stream-topic\" data-stream-id=\"144837\" href=\"/#narrow/channel/144837-PR-reviews/topic/Catching.20typos.3A.20a.20continuous.20thread/with/531106228\">#PR reviews &gt; Catching typos: a continuous thread</a></p>",
        "id": 531106163,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753609556
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/6V639nO8mVM6kAoMM-h-5i67/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/6V639nO8mVM6kAoMM-h-5i67/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"364x148\" src=\"/user_uploads/thumbnail/3121/6V639nO8mVM6kAoMM-h-5i67/image.png/840x560.webp\"></a></div><p><span aria-label=\"eyes\" class=\"emoji emoji-1f440\" role=\"img\" title=\"eyes\">:eyes:</span></p>",
        "id": 531120419,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1753615356
    },
    {
        "content": "<p>Does <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Zlattice.FG#doc\">docs#Zlattice.FG</a>, vs <code>ZLattice.everything_else</code> count as a typo?</p>",
        "id": 533763882,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1754910821
    },
    {
        "content": "<p>sure</p>",
        "id": 533763925,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1754910835
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/28228\">#28228</a></p>",
        "id": 533764842,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1754911115
    },
    {
        "content": "<p>I've made a bunch of typo fixing PRs lately, and thought I'd share my process for future reference.</p>\n<p>I don't have much Lean experience and my day job is as a Python developer, hence my goto IDE is PyCharm. PyCharm has, as part of their code inspection suite, a proofreading tool that points out typos and grammar mistakes. It is this tool I use to find typos. I select a directory to focus on and inspect it repeatedly, each time adding new mathlib- or mathematics-specific words to the dictionary/whitelist, such that I'm left with warnings mostly for true typos in the end. As I process those, I also check across mathlib to see if a typo is repeated elsewhere.</p>\n<p>This work has been a bit cumbersome, but has also been surprisingly effective in finding improvements, IMO.</p>\n<p>A lesson is that proofreading tools need not be completely tailored to Lean before they can be effective in helping improve mathlib.</p>",
        "id": 535273015,
        "sender_full_name": "Harald Husum",
        "timestamp": 1755681787
    },
    {
        "content": "<p>(Aside, but this thread inspired me to PR fixes to a few typos in core I'd been collecting. :) <a href=\"https://github.com/leanprover/lean4/pull/10009\">lean4#10009</a>)</p>",
        "id": 535356403,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1755708984
    },
    {
        "content": "<p>Not too long ago, I read <a href=\"https://www.quantamagazine.org/the-ai-was-fed-sloppy-code-it-turned-into-something-evil-20250813/\">this Quanta article</a> on \"emergent misalignment\". That is, an LLM trained to solve specific tasks in harmful ways can become misaligned in unrelated domains, presumably because it somehow relates different harmful concepts to each other.</p>\n<p>As a motivation for anyone considering fixing typos in publicly available lean code, I wonder whether  \"emergent misalignment\" could have a dual, in the form of emergent <em>alignment</em>. That is, perhaps ensuring high quality and near typo free docstrings in lean code used as training material for LLMs, could help ensure that the LLMs associate lean code with high standards. Then, perhaps the lean code an LLM will generate will be of higher quality than it otherwise would be, as a result of this association, even if it isn't code quality directly we're addressing with typo fixes.</p>\n<p>I'm probably hoping for too much here, but I found the idea amusing.</p>",
        "id": 535376016,
        "sender_full_name": "Harald Husum",
        "timestamp": 1755717427
    }
]