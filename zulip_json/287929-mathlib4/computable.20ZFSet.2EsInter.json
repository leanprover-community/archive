[
    {
        "content": "<p>Currently <code>ZFSet.sInter</code> is noncomputable, would there be interest in making this function computable?<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/blob/339689fb16756e4a0b52ddb36b83e0a81f327d0f/Mathlib/SetTheory/ZFC/Basic.lean#L864-L867\">https://github.com/leanprover-community/mathlib4/blob/339689fb16756e4a0b52ddb36b83e0a81f327d0f/Mathlib/SetTheory/ZFC/Basic.lean#L864-L867</a></p>\n<p>This can be done by doing <code>(⋃₀ x).sep (fun y =&gt; ∀ z ∈ x, y ∈ z)</code> since <code>ZFSet.sUnion</code> is computable.</p>\n<p>This preserves the special case that <code>⋂₀∅=∅</code>, since <code>⋃₀∅=∅</code>, although not definitionally...</p>",
        "id": 457162229,
        "sender_full_name": "RustyYato",
        "timestamp": 1723052584
    },
    {
        "content": "<p>Is there a specific problem this would solve?</p>",
        "id": 457162410,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723052685
    },
    {
        "content": "<p>No, I don't have one.<br>\nI am just learning lean and tried formalizing ZF on my own based off of Mathlib's implementation, and found this alternate way to define sInter to make it computable. So I thought it would be nice to have a computable version in Mathlib, since it seems like a minor change.</p>",
        "id": 457162704,
        "sender_full_name": "RustyYato",
        "timestamp": 1723052816
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span> might be interested. I see he has some TODO's in that file to make some things computable.</p>",
        "id": 457164053,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1723053430
    },
    {
        "content": "<p>As a general rule, mathlib doesn't make things computable just because it's possible, only when it's necessary</p>",
        "id": 457166164,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723054361
    },
    {
        "content": "<p>In fact making things computable can make it harder to prove theorems about them (this is why polynomials are noncomputable), and the main focus of mathlib is not computability but proving theorems.</p>",
        "id": 457166411,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1723054457
    },
    {
        "content": "<p>I think that one of big issues with making things computable is that quite often they are computable but slow. E.g., for polynomials or matrices, one may want to have an optimized data representation for a task.</p>",
        "id": 457170159,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1723055438
    },
    {
        "content": "<p>It would be nice to have some computable structures representing these objects and proofs of isomorphisms (e.g., for usage in tactics etc)</p>",
        "id": 457170379,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1723055498
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"610303\">@RustyYato</span> From my end, I'm perfectly happy with a contribution which modifies the definition of <code>sInter</code> to that and reproving the characterizing lemmas.</p>",
        "id": 457226095,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723074092
    },
    {
        "content": "<p>Thanks for all the responses, I didn't realize that making things computable could slow it down! Although this does make sense in hindsight, since lean has more work to do to ensure the correctness of the proofs. I'll keep this in mind, and maybe I can learn how polynomials being noncomputable makes things faster. I didn't check that out yet so that looks like fun!</p>",
        "id": 457230271,
        "sender_full_name": "RustyYato",
        "timestamp": 1723076137
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"110049\">@Mario Carneiro</span>, I'll put up a PR tomorrow.</p>",
        "id": 457230726,
        "sender_full_name": "RustyYato",
        "timestamp": 1723076345
    },
    {
        "content": "<p>I don't think computability per se is important or relevant for the ZFC development in particular. The TODO in the code is actually about eliminating uses of lean's axiom of choice in the construction of a model of ZF - obviously you need choice to validate the choice axiom of ZFC, but it's not philosophically well motivated to also be using it to validate the axiom of replacement et al, but there are some technical issues to making it work out</p>",
        "id": 457231015,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723076465
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/287929-mathlib4/topic/computable.20ZFSet.2EsInter/near/457166411\">said</a>:</p>\n<blockquote>\n<p>can make it harder to prove theorems about them (this is why polynomials are noncomputable)</p>\n</blockquote>\n<p>I think this is only half the picture; we decided in lean3 that the computability made things harder, and the cost of revisiting that decision (with Lean 4 and a better understanding of <code>open scoped Classical</code>) is very high, because so much of mathlib would have to change</p>",
        "id": 457231100,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723076526
    },
    {
        "content": "<p>There were some people at the HIM semester who were pursuing sparse or dense computable polynomial representations; it may be a good idea to try upstreaming one of these to mathlib</p>",
        "id": 457231166,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723076603
    },
    {
        "content": "<p>I'll link <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Computation-models-for-polynomials-and-finitely-supported-functions\">https://github.com/leanprover-community/mathlib4/wiki/Computation-models-for-polynomials-and-finitely-supported-functions</a> for some context for those who don't have it</p>",
        "id": 457231607,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723076986
    },
    {
        "content": "<p>while writing this, I noticed that there isn't a <code>ZFSet.sep_empty</code> theorem, so I'm adding that too since I need it to prove <code>ZFSet.sInter_empty</code> with the new formulation</p>",
        "id": 457439545,
        "sender_full_name": "RustyYato",
        "timestamp": 1723141294
    },
    {
        "content": "<p>Here's the PR, thanks everyone for your input, I learned a lot from this thread!<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/pull/15624\">https://github.com/leanprover-community/mathlib4/pull/15624</a></p>",
        "id": 457440859,
        "sender_full_name": "RustyYato",
        "timestamp": 1723141608
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"610303\">RustyYato</span> <a href=\"#narrow/stream/287929-mathlib4/topic/computable.20ZFSet.2EsInter/near/457230271\">said</a>:</p>\n<blockquote>\n<p>I didn't realize that making things computable could slow it down!</p>\n</blockquote>\n<p>If you're referring to my reply, then I didn't mean that computability will slow down the system. I meant that people may see that something is computable and try to actually use via <code>#eval</code> or <code>native_decide</code>, then find out that the definition is computable but very slow</p>",
        "id": 457446691,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1723142660
    },
    {
        "content": "<p>Computable but (very) slow is still useful for quickly checking how a definition behaves on examples</p>",
        "id": 457475153,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723149900
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/287929-mathlib4/topic/computable.20ZFSet.2EsInter/near/457231015\">said</a>:</p>\n<blockquote>\n<p>obviously you need choice to validate the choice axiom of ZFC, but it's not philosophically well motivated to also be using it to validate the axiom of replacement et al, but there are some technical issues to making it work out</p>\n</blockquote>\n<p>We can define computable axiom of replacement and <code>ZFSet.range</code> from computable <a href=\"#narrow/stream/116395-maths/topic/quotients.20and.20lifts.20for.20functions.20of.20arbitrary.20arity\">lifts for functions of arbitrary arity</a>. However it seems there are no such computable lifts in the current Lean4 -- I believe this is the biggest \"technical issue\" preventing us from a computable axiom of replacement :(</p>",
        "id": 458411049,
        "sender_full_name": "Dexin Zhang",
        "timestamp": 1723154855
    },
    {
        "content": "<p>Yes, we basically need a mechanism to lift arbitrary ZFC formulas to produce n-ary PSet functions. When I wrote that todo originally, I did enough investigation to determine that it is possible in general but needs some metaprogramming to be convenient</p>",
        "id": 459313071,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723159371
    },
    {
        "content": "<p>There is some work in <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PSet.Definable#doc\">docs#PSet.Definable</a> to do this, but <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Classical.allDefinable#doc\">docs#Classical.allDefinable</a> is the cop-out solution because it seemed like too much trouble at the time</p>",
        "id": 459313506,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1723159638
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/287929-mathlib4/topic/computable.20ZFSet.2EsInter/near/457231166\">said</a>:</p>\n<blockquote>\n<p>There were some people at the HIM semester who were pursuing sparse or dense computable polynomial representations; it may be a good idea to try upstreaming one of these to mathlib</p>\n</blockquote>\n<p>Sounds like a killer app for Batteries.</p>",
        "id": 459500545,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1723216125
    }
]