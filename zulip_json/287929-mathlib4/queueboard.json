[
    {
        "content": "<p>In the past few weeks, <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> and I have been chipping away at a prototype review dashboard that should hopefully get rid of some bottlenecks in the review process for mathlib.<br>\nWe are far from done, but the prototype is already at a stage where I regularly use it to find PRs that I want to review.</p>\n<p>Here is the dashboard: <a href=\"https://jcommelin.github.io/queueboard\">https://jcommelin.github.io/queueboard</a><br>\nAnd here is the repo: <a href=\"https://github.com/jcommelin/queueboard\">https://github.com/jcommelin/queueboard</a></p>\n<p>There are several ideas about how to improve the UX: see the open issues.<br>\nBut I would be very happy to hear about more ideas, feel free to create more issues with feature requests.</p>\n<p>Furthermore I would be happy to get some help. If you enjoy communicating with Github via one of its API then your help is particularly welcome. Currently there is a script <code>pr_info.sh</code> that tries to scrape as much info as possible from github about a given PR. Here is a concrete todo that I would like help with:</p>\n<ul>\n<li>The data should include all information about CI statuses for all the commits that are part of the PR.</li>\n</ul>",
        "id": 469047023,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725962046
    },
    {
        "content": "<p>Let me cross-post the following from the private reviewer stream, to highlight some new features this dashboard gained over the past days. If you used this already, perhaps you'll find a new feature useful. Otherwise, feel free to take this as a guided tour of some new features :-)</p>\n<h2>What happened recently on the review dashboard prototype</h2>\n<p><strong>Changes on the user experience side</strong></p>\n<ul>\n<li>the dashboard now links to the github repository, and vice versa</li>\n<li>all dashboard headings are hyperlinks now: you can right-click on them and to determine the link to this dashboard</li>\n<li>when hovering over each section, you see an explanation which PRs are included in it</li>\n<li>some columns of each dashboard also have an explanation. (Don't remember if the comment bubble is the number of all commenta or just of review comments? Hover over it to find out.)</li>\n<li>\n<p>added a table of contents, with quick links to each part<br>\nClicking on these jumps within the page: to open a dashboard in a new tab, ... open the link in a new tab (using e.g. middle-click or right-click -&gt; open link in a new tab).</p>\n</li>\n<li>\n<p>you can now filter each list PRs by typing into the \"search\" box on the top right of each dashboard<br>\nThis will restrict to the PRs containing the given word in their title or labels. To find all PRs whose title mentions \"unique\", search for \"unique\". To find all <code>t-linter</code> PRs, searching for \"t-linter\" will do. (It would also find PRs with <code>t-linter</code> in the title, but these are extremely rare.)</p>\n</li>\n</ul>\n<p><strong>New features</strong></p>\n<ul>\n<li>added a new dashboard, of easy PRs on the review queue</li>\n<li>\n<p>added a new dashboard with PRs which \"just need a merge\": except for a merge conflict, they match the review queue<br>\n(If you're looking for something quick to do, pinging such a PR could be useful to bring it back on the review queue.)</p>\n</li>\n<li>\n<p>added a dashboard for PRs waiting for a decision (currently just five of them), and another for contradictory labels (just one)</p>\n</li>\n<li>\n<p>added an overview section, classifying the ~1000 open PRs into states like \"waiting for review\", \"waiting for the author\", \"blocked on another PR\", \"work in progress\", \"merge conflict\" and others. If you ever wondered where all these PRs went, now you can find out!</p>\n<ul>\n<li>this page links to the relevant dashboards (where applicable)</li>\n<li>there is also a pie chart showing the proportion of the respective PR categories (contributed by <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span>)</li>\n</ul>\n</li>\n</ul>\n<p><strong>In progress/hopefully coming soon</strong></p>\n<ul>\n<li>take CI status into account when determining PR's status: your help is welcome here</li>\n<li>\n<p>update the dashboard in (closer to) real time: currently, the webpage updates about every ~15 minutes<br>\nMaking this change requires some changes to the underlying infrastructure, by caching information about pull requests.</p>\n</li>\n<li>\n<p>compute a better estimate for \"when was this PR's status <em>really</em> changed\". Github's \"last updated\" is misleading, it includes events which are not relevant for this purpose. For instance, tweaking a PR description, labelling a PR by its area or a merge conflict (resolved quickly) all mark a PR as \"recently changed\", fooling the heuristics of the current <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>.</p>\n</li>\n<li>determine \"how long is PR X waiting for review <em>in total</em>\"<br>\nThis and the previous item are available in proof of concept stage: this can be computed for individual PRs automatically. Exposing this in the dashboard may require the infrastructure above.</li>\n</ul>",
        "id": 469097623,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725976191
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/469097623\">said</a>:</p>\n<blockquote>\n<p>added a new dashboard with PRs which \"just need a merge\": except for a merge conflict, they match the review queue<br>\n(If you're looking for something quick to do, pinging such a PR could be useful to bring it back on the review queue.)</p>\n</blockquote>\n<p>I noticed that the <a href=\"https://jcommelin.github.io/queueboard/index.html#needs-merge\">PRs with just a merge conflict</a> queue also has some PRs with labels like \"await-zulip\", \"help-wanted\", \"please-adopt\". Did you mean to filter these PRs out?</p>\n<p>(EDIT) Fix: <a href=\"https://github.com/jcommelin/queueboard/pull/49\">queueboard#49</a></p>",
        "id": 469354589,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1726050207
    },
    {
        "content": "<p>I modified the query so that it now includes CI info for each commit of a PR.</p>",
        "id": 469567019,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726121893
    },
    {
        "content": "<p>Suggestion (<a href=\"https://github.com/leanprover-community/queueboard/pull/50\">queueboard#50</a>): can we have a page on the queueboard website where you give it a PR number and it tells you why it's not on the queue? Maybe presented as a list of checkboxes so that authors can learn what they need to do to get their PRs reviewed</p>",
        "id": 470024089,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1726250301
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/470024089\">said</a>:</p>\n<blockquote>\n<p>Suggestion (<a href=\"https://github.com/leanprover-community/queueboard/pull/50\">queueboard#50</a>): can we have a page on the queueboard website where you give it a PR number and it tells you why it's not on the queue? Maybe presented as a list of checkboxes so that authors can learn what they need to do to get their PRs reviewed</p>\n</blockquote>\n<p>That is a great idea and shouldn't be hard to implement.<br>\nI can to do that in the first week of October. (Until end of this month, I may have little or no Lean time.)</p>",
        "id": 470053569,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1726263659
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/469354589\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/469097623\">said</a>:</p>\n<blockquote>\n<p>added a new dashboard with PRs which \"just need a merge\": except for a merge conflict, they match the review queue<br>\n(If you're looking for something quick to do, pinging such a PR could be useful to bring it back on the review queue.)</p>\n</blockquote>\n<p>I noticed that the <a href=\"https://jcommelin.github.io/queueboard/index.html#needs-merge\">PRs with just a merge conflict</a> queue also has some PRs with labels like \"await-zulip\", \"help-wanted\", \"please-adopt\". Did you mean to filter these PRs out?</p>\n<p>(EDIT) Fix: <a href=\"https://github.com/jcommelin/queueboard/pull/49\">queueboard#49</a></p>\n</blockquote>\n<p>I deliberately made that dashboard's query match the criteria for <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>: that <em>does</em> include PRs which are labelled awaiting-zulip or help-wanted. I don't mind strongly which way this is decided, but I would prefer if this were consistent.</p>\n<p>(Bonus points for updating the classification of PRs accordingly. I can do that in October.)</p>",
        "id": 470053727,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1726263734
    },
    {
        "content": "<p>Idea for another sorting order: number PRs that are blocked by a given PR</p>",
        "id": 470095769,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726288527
    },
    {
        "content": "<p>We definitely should have a technical debt section on the queueboard</p>",
        "id": 470097414,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726288963
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/470095769\">said</a>:</p>\n<blockquote>\n<p>Idea for another sorting order: number PRs that are blocked by a given PR</p>\n</blockquote>\n<p>That's an amazing idea</p>",
        "id": 470097995,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1726289398
    },
    {
        "content": "<p>Great ideas! Filed as <a href=\"https://github.com/leanprover-community/queueboard/pull/51\">queueboard#51</a> and <a href=\"https://github.com/leanprover-community/queueboard/pull/52\">queueboard#52</a>. Both shouldn't be hard; I'll add them to my list of ideas for the first week of October.</p>",
        "id": 470136602,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1726306610
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 470144917,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726310262
    },
    {
        "content": "<p>I tried to use the queueboard this morning but most of the PRs it showed on the queue either had unfinished or actually failing CI</p>",
        "id": 472030664,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1726996566
    },
    {
        "content": "<p>Side note: the \"queueboard\" linkifier points to the non-existent repo \"<a href=\"https://github.com/leanprover-community/queueboard\">https://github.com/leanprover-community/queueboard</a>\"; it should point at \"<a href=\"https://github.com/jcommelin/queueboard\">https://github.com/jcommelin/queueboard</a>\" instead. Can some admin change this, please?</p>",
        "id": 472156753,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727078102
    },
    {
        "content": "<p>Let me take a look. Did you look at the queue dashboard, or a different one? Because the former should use the exact same query as for <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>.</p>",
        "id": 472157343,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727078264
    },
    {
        "content": "<p><a href=\"https://jcommelin.github.io/queueboard/index.html\">https://jcommelin.github.io/queueboard/index.html</a></p>",
        "id": 472157567,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1727078326
    },
    {
        "content": "<p>Yes, sure. I meant, did you look at the \"queue\" section of that page? (It also has other dashboards, further below.)</p>",
        "id": 472157801,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727078397
    },
    {
        "content": "<p>Ok, I think I found the culprit. The <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> uses \"status:success\", while the other dashboard just excludes <em>failing</em> PRs. That's an easy change, <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span></p>",
        "id": 472158049,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727078450
    },
    {
        "content": "<p>Ah yeah, the \"review queue\" section. thanks for looking</p>",
        "id": 472159454,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1727078861
    },
    {
        "content": "<p>Pushed a fix (and started a conversation about aligning the definitions of the <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> in both sources). Should be live in ~10 minutes.</p>",
        "id": 472163154,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727079946
    },
    {
        "content": "<p>So is the review queue ordered by pr number, but the 4 digits ones after the 5 digit ones?</p>",
        "id": 475008620,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728154692
    },
    {
        "content": "<p>It seems so (the \"PRs not into master\" board shows this). That's a bug, thanks for reporting!</p>",
        "id": 475120478,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728237129
    },
    {
        "content": "<p>I have a fix (and am exploring a more elegant fix now). <del>I'll push some version tomorrow!</del>Pushed now.</p>",
        "id": 475145783,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728249915
    },
    {
        "content": "<p>New feature time: today, I implemented two feature requests from this thread</p>\n<ul>\n<li>there is now a dashboard of all technical debt PRs</li>\n<li>there is a separate page \"why is my PR not on the queue\" (which is <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html\">available here</a>.</li>\n</ul>\n<p>Comments on both are welcome!</p>",
        "id": 475583040,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728398424
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/472156753\">said</a>:</p>\n<blockquote>\n<p>Side note: the \"queueboard\" linkifier points to the non-existent repo \"<a href=\"https://github.com/leanprover-community/queueboard\">https://github.com/leanprover-community/queueboard</a>\"; it should point at \"<a href=\"https://github.com/jcommelin/queueboard\">https://github.com/jcommelin/queueboard</a>\" instead. Can some admin change this, please?</p>\n</blockquote>\n<p>Bump, e.g. <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>. Thanks!</p>",
        "id": 475583251,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728398465
    },
    {
        "content": "<p>Test: <a href=\"https://github.com/jcommelin/queueboard/pull/50\">queueboard#50</a></p>",
        "id": 475589774,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1728399993
    },
    {
        "content": "<p>Works for me, thank you!</p>",
        "id": 475590185,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728400089
    },
    {
        "content": "<p>Maybe also the repo should be moved if we actively rely on it now</p>",
        "id": 475591074,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728400322
    },
    {
        "content": "<p>I have an opportunity for you to help improve this page: right now, sorting by the diff size will treat it as a string (and e.g. sort \"1/90\" before \"1/100\", even though the second PR has larger diff). I have most of the code to sort diffs properly, but am stuck at a question of javascript (which I'm not an expert on). Would somebody (e.g. <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>) like to help?</p>\n<p>In short: get this minimized webpage to behave as it says. Right now, the script fails to parse. It's presumably just a matter of syntax to fix this, but I don't know the right incantation.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">&lt;!</span><span class=\"n\">DOCTYPE</span><span class=\"w\"> </span><span class=\"n\">html</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">html</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">head</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">title</span><span class=\"bp\">&gt;</span><span class=\"n\">Datatable</span><span class=\"w\"> </span><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"n\">sorting</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">page</span><span class=\"bp\">&lt;/</span><span class=\"n\">title</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">script</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"bp\">=</span><span class=\"s2\">\"[https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js](view-source:https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js)\"</span>\n<span class=\"w\">    </span><span class=\"n\">integrity</span><span class=\"bp\">=</span><span class=\"s2\">\"[sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==]()\"</span>\n<span class=\"w\">    </span><span class=\"n\">crossorigin</span><span class=\"bp\">=</span><span class=\"s2\">\"[anonymous]()\"</span><span class=\"bp\">&gt;&lt;/</span><span class=\"n\">script</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">link</span><span class=\"w\"> </span><span class=\"n\">rel</span><span class=\"bp\">=</span><span class=\"s2\">\"[stylesheet]()\"</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"bp\">=</span><span class=\"s2\">\"[text/css]()\"</span><span class=\"w\"> </span><span class=\"n\">href</span><span class=\"bp\">=</span><span class=\"s2\">\"[https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css](view-source:https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css)\"</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">script</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"bp\">=</span><span class=\"s2\">\"[text/javascript]()\"</span><span class=\"w\"> </span><span class=\"n\">charset</span><span class=\"bp\">=</span><span class=\"s2\">\"[utf8]()\"</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"bp\">=</span><span class=\"s2\">\"[https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js](view-source:https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js)\"</span><span class=\"bp\">&gt;&lt;/</span><span class=\"n\">script</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;/</span><span class=\"n\">head</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">body</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">p</span><span class=\"bp\">&gt;</span><span class=\"n\">This</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">page</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">sorting</span><span class=\"w\"> </span><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"n\">sizes</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">data</span><span class=\"w\"> </span><span class=\"n\">tables</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"n\">column</span><span class=\"w\"> </span><span class=\"n\">should</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">sorted</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">total</span><span class=\"w\"> </span><span class=\"n\">changes</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">strings</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Sorting</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">strings</span><span class=\"w\"> </span><span class=\"n\">yields</span><span class=\"w\"> </span><span class=\"n\">Alpha</span><span class=\"bp\">-</span><span class=\"n\">Beta</span><span class=\"bp\">-</span><span class=\"n\">Gamma</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sorting</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"n\">should</span><span class=\"w\"> </span><span class=\"n\">yield</span><span class=\"w\"> </span><span class=\"n\">Alpha</span><span class=\"bp\">-</span><span class=\"n\">Gamma</span><span class=\"bp\">-</span><span class=\"n\">Beta</span><span class=\"bp\">.</span>\n<span class=\"n\">Current</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">how</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">make</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`diff_stat</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">used?</span><span class=\"bp\">&lt;/</span><span class=\"n\">p</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">table</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">  </span><span class=\"bp\">&lt;</span><span class=\"n\">thead</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">tr</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">th</span><span class=\"bp\">&gt;</span><span class=\"n\">Title</span><span class=\"bp\">&lt;/</span><span class=\"n\">th</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">th</span><span class=\"bp\">&gt;</span><span class=\"n\">Diff</span><span class=\"bp\">&lt;/</span><span class=\"n\">th</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;/</span><span class=\"n\">tr</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;/</span><span class=\"n\">thead</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">tr</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"n\">Alpha</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"mi\">10</span><span class=\"bp\">/</span><span class=\"mi\">200</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;/</span><span class=\"n\">tr</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">tr</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"n\">Beta</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"mi\">100</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;/</span><span class=\"n\">tr</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">tr</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"n\">Gamma</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"mi\">60</span><span class=\"bp\">/</span><span class=\"mi\">60</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;/</span><span class=\"n\">tr</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;/</span><span class=\"n\">table</span><span class=\"bp\">&gt;</span>\n\n<span class=\"bp\">&lt;</span><span class=\"n\">script</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">$</span><span class=\"o\">(</span><span class=\"n\">document</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">ready</span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">diff_stat</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">DataTable</span><span class=\"bp\">.</span><span class=\"n\">type</span><span class=\"o\">(</span><span class=\"bp\">'</span><span class=\"n\">diff_stat'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">detect</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">data</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"o\">},</span>\n<span class=\"w\">    </span><span class=\"n\">order</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">      </span><span class=\"n\">pre</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">data</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">parts</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">data</span><span class=\"bp\">.</span><span class=\"n\">split</span><span class=\"o\">(</span><span class=\"bp\">'/'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">;</span>\n<span class=\"w\">        </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">Number</span><span class=\"o\">(</span><span class=\"n\">parts</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Number</span><span class=\"o\">(</span><span class=\"n\">parts</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">])</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">},</span>\n<span class=\"w\">  </span><span class=\"o\">})</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"bp\">$</span><span class=\"o\">(</span><span class=\"bp\">'</span><span class=\"n\">table'</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">DataTable</span><span class=\"o\">({</span>\n<span class=\"w\">    </span><span class=\"n\">pageLength</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"s2\">\"searching\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">columnDefs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[{</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">diff_stat'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">}],</span>\n<span class=\"w\">  </span><span class=\"o\">})</span><span class=\"bp\">;</span>\n<span class=\"o\">})</span><span class=\"bp\">;</span>\n<span class=\"bp\">&lt;/</span><span class=\"n\">script</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;/</span><span class=\"n\">body</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;/</span><span class=\"n\">html</span><span class=\"bp\">&gt;</span>\n</code></pre></div>",
        "id": 475876734,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728483562
    },
    {
        "content": "<p>Ah, the links in the script tags look like markdown links to me instead of raw URLs, but maybe that was just an issue of copy pasting to Zulip? I tested after fixing them and it looks like the issue is that you're using v1 of DataTables, but DataTable.type requires v2? The following seems to work for me in VS Code's Live Preview server:</p>\n<div class=\"codehilite\" data-code-language=\"HTML\"><pre><span></span><code><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>Datatable diff sorting test page<span class=\"p\">&lt;/</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"</span>\n    <span class=\"na\">integrity</span><span class=\"o\">=</span><span class=\"s\">\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\"</span>\n    <span class=\"na\">crossorigin</span><span class=\"o\">=</span><span class=\"s\">\"anonymous\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">link</span> <span class=\"na\">rel</span><span class=\"o\">=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text/css\"</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">\"https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css\"</span><span class=\"p\">&gt;</span>\n<span class=\"cm\">&lt;!-- &lt;script type=\"text/javascript\" charset=\"utf8\" src=\"https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js\"&gt;&lt;/script&gt; --&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"https://cdn.datatables.net/2.1.8/js/dataTables.js\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">p</span><span class=\"p\">&gt;</span>This is a test page for sorting diff sizes in data tables. The diff column should be sorted by the total changes, not as strings. Sorting as strings yields Alpha-Beta-Gamma, sorting by diff size should yield Alpha-Gamma-Beta.\nCurrent error: how to make the `diff_stat` type be used?<span class=\"p\">&lt;/</span><span class=\"nt\">p</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">thead</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Title<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Diff<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">thead</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Alpha<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>10/200<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Beta<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>100/10<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Gamma<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>60/60<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"nb\">document</span><span class=\"p\">).</span><span class=\"nx\">ready</span><span class=\"p\">(</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"nx\">diff_stat</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">DataTable</span><span class=\"p\">.</span><span class=\"nx\">type</span><span class=\"p\">(</span><span class=\"s1\">'diff_stat'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"nx\">detect</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">},</span>\n<span class=\"w\">    </span><span class=\"nx\">order</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"nx\">pre</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"nx\">parts</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">2</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">Number</span><span class=\"p\">(</span><span class=\"nx\">parts</span><span class=\"p\">[</span><span class=\"mf\">0</span><span class=\"p\">])</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"nb\">Number</span><span class=\"p\">(</span><span class=\"nx\">parts</span><span class=\"p\">[</span><span class=\"mf\">1</span><span class=\"p\">]);</span>\n<span class=\"w\">      </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"p\">},</span>\n<span class=\"w\">  </span><span class=\"p\">});</span>\n<span class=\"w\">  </span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"s1\">'table'</span><span class=\"p\">).</span><span class=\"nx\">DataTable</span><span class=\"p\">({</span>\n<span class=\"w\">    </span><span class=\"nx\">pageLength</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">10</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"s2\">\"searching\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"nx\">columnDefs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"p\">[{</span><span class=\"w\"> </span><span class=\"nx\">type</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s1\">'diff_stat'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">targets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">4</span><span class=\"p\">}],</span>\n<span class=\"w\">  </span><span class=\"p\">});</span>\n<span class=\"p\">});</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</code></pre></div>",
        "id": 475891893,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1728486622
    },
    {
        "content": "<p>Sorry, Im currently moving and am not on my computer; and I think that's not a question I can look at from my phone. Looks like Bryan is already on it though :)</p>",
        "id": 475954687,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1728506813
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/475891893\">said</a>:</p>\n<blockquote>\n<p>Ah, the links in the script tags look like markdown links to me instead of raw URLs, but maybe that was just an issue of copy pasting to Zulip? I tested after fixing them and it looks like the issue is that you're using v1 of DataTables, but DataTable.type requires v2? The following seems to work for me in VS Code's Live Preview server:</p>\n<p><div class=\"codehilite\" data-code-language=\"HTML\"><pre><span></span><code><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>Datatable diff sorting test page<span class=\"p\">&lt;/</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"</span>\n    <span class=\"na\">integrity</span><span class=\"o\">=</span><span class=\"s\">\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\"</span>\n    <span class=\"na\">crossorigin</span><span class=\"o\">=</span><span class=\"s\">\"anonymous\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">link</span> <span class=\"na\">rel</span><span class=\"o\">=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text/css\"</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">\"https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css\"</span><span class=\"p\">&gt;</span>\n<span class=\"cm\">&lt;!-- &lt;script type=\"text/javascript\" charset=\"utf8\" src=\"https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js\"&gt;&lt;/script&gt; --&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"https://cdn.datatables.net/2.1.8/js/dataTables.js\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">p</span><span class=\"p\">&gt;</span>This is a test page for sorting diff sizes in data tables. The diff column should be sorted by the total changes, not as strings. Sorting as strings yields Alpha-Beta-Gamma, sorting by diff size should yield Alpha-Gamma-Beta.\nCurrent error: how to make the `diff_stat` type be used?<span class=\"p\">&lt;/</span><span class=\"nt\">p</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">thead</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Title<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Diff<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">thead</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Alpha<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>10/200<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Beta<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>100/10<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Gamma<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>60/60<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"nb\">document</span><span class=\"p\">).</span><span class=\"nx\">ready</span><span class=\"p\">(</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"nx\">diff_stat</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">DataTable</span><span class=\"p\">.</span><span class=\"nx\">type</span><span class=\"p\">(</span><span class=\"s1\">'diff_stat'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"nx\">detect</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">},</span>\n<span class=\"w\">    </span><span class=\"nx\">order</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"nx\">pre</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"nx\">parts</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">2</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">Number</span><span class=\"p\">(</span><span class=\"nx\">parts</span><span class=\"p\">[</span><span class=\"mf\">0</span><span class=\"p\">])</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"nb\">Number</span><span class=\"p\">(</span><span class=\"nx\">parts</span><span class=\"p\">[</span><span class=\"mf\">1</span><span class=\"p\">]);</span>\n<span class=\"w\">      </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"p\">},</span>\n<span class=\"w\">  </span><span class=\"p\">});</span>\n<span class=\"w\">  </span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"s1\">'table'</span><span class=\"p\">).</span><span class=\"nx\">DataTable</span><span class=\"p\">({</span>\n<span class=\"w\">    </span><span class=\"nx\">pageLength</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">10</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"s2\">\"searching\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"nx\">columnDefs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"p\">[{</span><span class=\"w\"> </span><span class=\"nx\">type</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s1\">'diff_stat'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">targets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">4</span><span class=\"p\">}],</span>\n<span class=\"w\">  </span><span class=\"p\">});</span>\n<span class=\"p\">});</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Thanks so much! There was indeed a copy-paste issue with the markdown - and your other conjecture was spot on <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span> This seems to work locally now, I have pushed this change live.</p>",
        "id": 475958290,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728508130
    },
    {
        "content": "<p>I'm amazed that nothing broke when going from V1 to V2! (Well, almost nothing: <a href=\"https://github.com/jcommelin/queueboard/pull/58\">queueboard#58</a>)</p>",
        "id": 475959743,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1728508895
    },
    {
        "content": "<p>Me too, thanks for spotting! Adding a sub-resource integrity hash for the new URL, I realised the same mistake and fixed it already...</p>",
        "id": 475961118,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728509527
    },
    {
        "content": "<p>No time to investigate further at the moment, but the queueboard seems to be blank at the moment. I don't see any red X's in the recent actions, but the artifact uploaded by GitHub pages also contains a 0-byte index.html (scroll to the bottom to download the artifact): <a href=\"https://github.com/jcommelin/queueboard/actions/runs/11353648819\">https://github.com/jcommelin/queueboard/actions/runs/11353648819</a></p>",
        "id": 477064807,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1729023840
    },
    {
        "content": "<p>A debugging change (disabling the generation of the dashboard) snuck in... fixed. Thanks for the report!</p>",
        "id": 477066957,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729024703
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/470095769\">said</a>:</p>\n<blockquote>\n<p>Idea for another sorting order: number PRs that are blocked by a given PR</p>\n</blockquote>\n<p>Were you thinking of (presumably, only open) PRs \"directly blocked\" by a given PR, or also transitively? The former is right in the PR description (hence easier), the latter may be more interesting. Both should be implementable.<br>\nI can also start with the former.</p>",
        "id": 477069113,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729025718
    },
    {
        "content": "<p>I was thinking of the latter.</p>",
        "id": 477116703,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729051315
    },
    {
        "content": "<p>Also. <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> switched refactored a bunch of plumbing, and now building the queueboard only takes ~1m. <span aria-label=\"octopus\" class=\"emoji emoji-1f419\" role=\"img\" title=\"octopus\">:octopus:</span>  We are now caching github metadata, instead of hammering the gh api on every queueboard build.</p>",
        "id": 477120677,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729053412
    },
    {
        "content": "<p>(We are still querying github's API ~13 times during each build, but that's much less than the 500 calls we used to make --- and I have a plan to remove those as well.)</p>",
        "id": 477233362,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729089780
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/uiH8uT_oTWbFUOg_O6FXXKeT/Screenshot-from-2024-10-17-10-06-29.png\">Screenshot from 2024-10-17 10-06-29.png</a><br>\nSurprised by a PR having -1 comments (<a href=\"https://github.com/leanprover-community/mathlib4/pull/17845\">#17845</a>)</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/uiH8uT_oTWbFUOg_O6FXXKeT/Screenshot-from-2024-10-17-10-06-29.png\" title=\"Screenshot from 2024-10-17 10-06-29.png\"><img data-original-dimensions=\"221x103\" src=\"/user_uploads/thumbnail/3121/uiH8uT_oTWbFUOg_O6FXXKeT/Screenshot-from-2024-10-17-10-06-29.png/840x560.webp\"></a></div>",
        "id": 477381193,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729152437
    },
    {
        "content": "<p>Good spot. These \"-1\"s means \"detailed information\" about this PR is missing when the dashboard is generated. In this case, this is a race condition (which a pending refactoring should fix).<br>\nThere are about three PRs for which downloading this information causes the github runner to time out (as these PRs are huge). But these are tracking PRs, generally old and not on the queue.</p>",
        "id": 477388065,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729154418
    },
    {
        "content": "<p><del>PSA: the statistics section is currently \"broken\" by a refactoring. (The github query it uses only returns up 1000 PRs, but mathlib has more. So it shows correct stats, but only for these 1000...) Proceeding with the refactoring will fix it. The queue is a separate query, and not affected. Sorry for the inconvenience!</del><br>\nUpdate: found a workaround (to the stats are fixed). Parts of the refactoring landed today.</p>",
        "id": 477414275,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729162606
    },
    {
        "content": "<p>Better merge some PRs!</p>",
        "id": 477429081,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729167506
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/287929-mathlib4/topic/t-algebra/near/477439136\">said</a>:</p>\n<blockquote>\n<p>contain a label with \"t-algebra\" as substring. (This includes \"t-algebraic-geometry\" and \"t-algebraic-topology\".)</p>\n</blockquote>\n<p>Potential feature: encode label <code>foo</code> in the searchable text as <code>foo$</code> (or <code>label:foo$</code>), so you can reliably search for a single label using <code>t-algebra$</code> (or <code>label:t-algebra$</code>).  Not the most important feature, but useful if easy to implement.</p>",
        "id": 477510131,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1729193042
    },
    {
        "content": "<p>Alternative solution: Rename <code>t-algebraic-geometry</code> and <code>t:algebraic-topology</code> to <code>t:geometrie-algebrique</code> and <code>t:topologie-algebrique</code></p>",
        "id": 477511088,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1729193430
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/477510131\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/287929-mathlib4/topic/t-algebra/near/477439136\">said</a>:</p>\n<blockquote>\n<p>contain a label with \"t-algebra\" as substring. (This includes \"t-algebraic-geometry\" and \"t-algebraic-topology\".)</p>\n</blockquote>\n<p>Potential feature: encode label <code>foo</code> in the searchable text as <code>foo$</code> (or <code>label:foo$</code>), so you can reliably search for a single label using <code>t-algebra$</code> (or <code>label:t-algebra$</code>).  Not the most important feature, but useful if easy to implement.</p>\n</blockquote>\n<p>Interesting feature! Not sure how easy that that will be to implement --- but there is a middle ground that shouldn't be hard: add an input column below each table column; entering terms there allows filtering just that column. So, one could filter for user name, title or labels separately; global search is possible <em>on top</em> of this: <a href=\"https://datatables.net/examples/api/multi_filter.html\">this page</a> has an example - what do you think?</p>",
        "id": 477517745,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729196269
    },
    {
        "content": "<p>that doesn't resolve the precise \"issue\" that Johan had. Honestly, I would not put in much time in this direction, the current search box should suffice for most purposes.</p>",
        "id": 477518257,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1729196479
    },
    {
        "content": "<p>Here's a cursed idea to enable precise search: rename the algebra label to <code>t-algebra$</code>, then searching for <code>t-algebra$</code> will only find it <span aria-label=\"exploding head\" class=\"emoji emoji-1f92f\" role=\"img\" title=\"exploding head\">:exploding_head:</span></p>",
        "id": 477522365,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729198301
    },
    {
        "content": "<p>(This is the only label with this property: algebraic-geometry and algebraic-topology can be distinguished by typing a few more characters.)</p>",
        "id": 477522448,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729198330
    },
    {
        "content": "<p>The queueboard now has a <a href=\"https://jcommelin.github.io/queueboard/index.html#from-fork\">table of all PRs opened from a fork</a>.</p>",
        "id": 478000574,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729501773
    },
    {
        "content": "<p>The queueboard seems to be redirecting to an index-old file. Anything going on?</p>",
        "id": 480294715,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730627731
    },
    {
        "content": "<p>Please reload the page, the output should be different now. :-)</p>",
        "id": 480295134,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730628140
    },
    {
        "content": "<p>Yes: I re-designed the webpage a bit, splitting it into several parts --- for reviewers, maintainers, folks just wanting to help out (by something other than reviewing) and triage (still partially under construction). The \"old main page\" is still available for now --- but I hope the new split helps you better find what you're interested in.</p>\n<p>If you just want the review queue, the link is now <a href=\"https://jcommelin.github.io/queueboard/review_dashboard.html\">https://jcommelin.github.io/queueboard/review_dashboard.html</a>.</p>",
        "id": 480295197,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730628235
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/_6fHKsCna9P18ned7o97rKKI/Bildschirmfoto-vom-2024-11-03-11-12-13.png\">Bildschirmfoto vom 2024-11-03 11-12-13.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/_6fHKsCna9P18ned7o97rKKI/Bildschirmfoto-vom-2024-11-03-11-12-13.png\" title=\"Bildschirmfoto vom 2024-11-03 11-12-13.png\"><img data-original-dimensions=\"2496x710\" src=\"/user_uploads/thumbnail/3121/_6fHKsCna9P18ned7o97rKKI/Bildschirmfoto-vom-2024-11-03-11-12-13.png/840x560.webp\"></a></div><p>This is how the main page looks now.</p>",
        "id": 480295724,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730628769
    },
    {
        "content": "<p>Does <code>-1</code> mean <code>0</code> in the \"files modified\" and \"comments\" columns?</p>",
        "id": 480298783,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1730631871
    },
    {
        "content": "<p>I think it means \"no data\"</p>",
        "id": 480299184,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730632289
    },
    {
        "content": "<p>Which label would be clearest for you: \"-1\", \"???\" or \"no data\"? This is easy to change.</p>",
        "id": 480306763,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730639799
    },
    {
        "content": "<p>i think a simple <code>n/a</code> should be clear</p>",
        "id": 480306997,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1730640052
    },
    {
        "content": "<p>Can I braindump some queueboard requests here? If these are better as issues somewhere I can do that!</p>\n<ul>\n<li>Clicking on either an author or a label should not jump to github, but instead add that author or label to the search filter.</li>\n<li>\n<p>At <a href=\"https://jcommelin.github.io/queueboard/triage.html\">https://jcommelin.github.io/queueboard/triage.html</a>, both <code>these</code> links 404 in the line </p>\n<blockquote>\n<p><strong>28</strong>Â PRs are waiting on maintainer approval (<a href=\"https://jcommelin.github.io/queueboard/maintainers_quick.html/#all-maintainer-merge\">these</a>), of whichÂ <strong>21</strong>Â have not been updated in a day (<a href=\"https://jcommelin.github.io/queueboard/maintainers_quick.html/#stale-maintainer-merge\">these</a>)</p>\n</blockquote>\n</li>\n<li>\n<p>Could the \"entries per page\" selectors be sticky? (e.g. persisted via cookie?)</p>\n</li>\n</ul>",
        "id": 480390400,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730708999
    },
    {
        "content": "<p>Can we make filters appear in the URL? That would be very useful for review parties, to share the list we are looking at</p>",
        "id": 480392682,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1730709900
    },
    {
        "content": "<p>Thanks for reporting: The 404s are fixed now.</p>",
        "id": 480402911,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730713143
    },
    {
        "content": "<p>The other ideas are good; I'd have to think how to implement them.</p>",
        "id": 480416077,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730717047
    },
    {
        "content": "<p>I have snippets of code around for persisting data in localStorage and encoding/decoding from URL so I could work on those or give pointers.</p>",
        "id": 480424646,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1730720212
    },
    {
        "content": "<p>PRs for these are very welcome; I'll be happy to review!</p>",
        "id": 480428656,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730721762
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> I think now is a good time to add the above to the queueboard. Do you have a moment to share these snippets (and I can take it from there)? If you're feeling like it, I'll also review a PR instead :-)</p>",
        "id": 494652070,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737301217
    },
    {
        "content": "<p>Sure, I'll try and let you know either way by tomorrow!</p>",
        "id": 494652295,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737301422
    },
    {
        "content": "<p><del>Could we also a linkifier for <a href=\"https://jcommelin.github.io/queueboard/\">#queueboard</a> ?</del> Wait, I already asked for it a few weeks ago</p>",
        "id": 494661017,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1737308088
    },
    {
        "content": "<p>Turns out there was a built-in option to save the state of the tables in <code>localStorage</code>: <a href=\"https://github.com/jcommelin/queueboard/pull/64\">https://github.com/jcommelin/queueboard/pull/64</a></p>",
        "id": 494696677,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737333271
    },
    {
        "content": "<p>Fantastic!</p>",
        "id": 494717796,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1737348838
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> Sorry to ping you again: I thought about how to implement \"reading table states from an URL\" (so one could e.g. share one link for the triage meeting, which configures a table as desired). Your code snippet for reading parameters from a URL could be handy. Otherwise, I'll ask the internet, that's also fine :-)</p>",
        "id": 495024508,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737458311
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> Here's a very rough snippet (not tested) with functions for reading and writing parameters in a URL: <a href=\"https://gist.github.com/bryangingechen/a9a34a0092ccf3abfa56c5fda3f0ade2\">https://gist.github.com/bryangingechen/a9a34a0092ccf3abfa56c5fda3f0ade2</a></p>\n<p>Feel free to ping me again if there are any issues!</p>",
        "id": 495089121,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737474992
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/fF3t-TeLpb42Oozf221UkLKR/image.png\">image.png</a><br>\nthese percentages appear to be calculated inconsistently (one relative, one absolute)<br>\nnot sure if this is an issue, but flagging it in case</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/fF3t-TeLpb42Oozf221UkLKR/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"739x303\" src=\"/user_uploads/thumbnail/3121/fF3t-TeLpb42Oozf221UkLKR/image.png/840x560.webp\"></a></div>",
        "id": 495174351,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1737507591
    },
    {
        "content": "<p>Thanks for the report. It should be relative percentages; a fix is coming shortly. Update: it's live now.</p>",
        "id": 495254139,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737543635
    },
    {
        "content": "<p>Does anyone understand why <a href=\"https://github.com/leanprover-community/mathlib4/pull/21619\">#21619</a> is indicated as âCI is still runningâ? It is a trivial PR that never had any CI issue.</p>",
        "id": 498693998,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175624
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> <a href=\"https://github.com/leanprover-community/mathlib4/pull/15373\">#15373</a> appears in the list of quick tasks for maintainers but probably shouldnât since itâs actually awaiting author.</p>",
        "id": 498694485,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175806
    },
    {
        "content": "<p>Where do you see that? <a href=\"/user_uploads/3121/bfoeo7IS-PINYWCKdQOzKcC2/image.png\">Here</a> is all I'm seeing</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/bfoeo7IS-PINYWCKdQOzKcC2/image.png\" title=\"Here\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"3350x58\" src=\"/user_uploads/thumbnail/3121/bfoeo7IS-PINYWCKdQOzKcC2/image.png/840x560.webp\"></a></div>",
        "id": 498694556,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1739175831
    },
    {
        "content": "<p>This is not necessarily a queueboard bug, it can mean maintainers failed to do something.</p>",
        "id": 498694566,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175834
    },
    {
        "content": "<p>I see <br>\n<a href=\"/user_uploads/3121/4hC5vKJCWggKt3iNMaqz-aLj/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/4hC5vKJCWggKt3iNMaqz-aLj/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1906x281\" src=\"/user_uploads/thumbnail/3121/4hC5vKJCWggKt3iNMaqz-aLj/image.png/840x560.webp\"></a></div>",
        "id": 498694701,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175874
    },
    {
        "content": "<p>I see this at <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html\">https://jcommelin.github.io/queueboard/on_the_queue.html</a>, typing massot in the search box.</p>",
        "id": 498694826,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175922
    },
    {
        "content": "<p>YaÃ«l, since youâre here, donât hesitate to tell me if this lemma is already somewhere. I couldnât find it but I would happily get rid of this PR (and same with other two trivial PRs I opened yesterday).</p>",
        "id": 498695011,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175987
    },
    {
        "content": "<p>Woah, I had not seen this page of the queueboard. And no I had never seen your lemma before, and loogling <code>(_ * _) ^ _ * _</code> gives nothing of interest</p>",
        "id": 498696059,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1739176319
    },
    {
        "content": "<p>Ok, maybe we should wait until Michael or <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>  gets a chance to see this bug, and then merge the PR.</p>",
        "id": 498696477,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739176424
    },
    {
        "content": "<p>The PR also appears to be a <code>Draft</code> in the queueboard, although it never seems to have passed through that stage.</p>",
        "id": 498696879,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739176543
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/498694485\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"https://github.com/leanprover-community/mathlib4/pull/15373\">#15373</a> appears in the list of quick tasks for maintainers but probably shouldnât since itâs actually awaiting author.</p>\n</blockquote>\n<p>Thanks for asking; I'm taking a look now. To make sure I understand correctly, you're referring to <a href=\"https://github.com/leanprover-community/mathlib4/pull/15373\">#15373</a> being on the <a href=\"https://jcommelin.github.io/queueboard/maintainers_quick.html#stale-ready-to-merge\">stale ready-to-merge</a> dashboard?</p>",
        "id": 498699239,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177249
    },
    {
        "content": "<p>This is by design: that dashboard contains all PRs labelled ready-to-merge which have not been updated recently. (Usually, these are PRs which failed a bors batch, so a maintainer should retry them.)</p>",
        "id": 498699669,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177365
    },
    {
        "content": "<p>For this PR, there are probably several things to fix</p>\n<ul>\n<li>\n<p>the PR was never unlabelled ready-to-merge<br>\nThat can probably be fixed. <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> Does the recent change you made cover this/can it be extended to make this so? (A <code>bors r-</code> did not remove the ready-to-merge label; I would argue it should.)</p>\n</li>\n<li>\n<p>The PR failed CI and still does: the on the queue page shows it as passing, though. That's a bug, I'll look into that now.</p>\n</li>\n</ul>",
        "id": 498700175,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177508
    },
    {
        "content": "<p>Currently, the <code>bors r...</code> action does not know at all about <code>-</code>: it only acts on <code>bors r+</code>, ignoring <code>bors r-</code>.  Of course, this is easy to change!</p>",
        "id": 498701171,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739177787
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/498693998\">said</a>:</p>\n<blockquote>\n<p>Does anyone understand why <a href=\"https://github.com/leanprover-community/mathlib4/pull/21619\">#21619</a> is indicated as âCI is still runningâ? It is a trivial PR that never had any CI issue.</p>\n</blockquote>\n<p>The queueboard doesn't say there are CI issues, just \"last time we checked, CI was still running\". By now, CI has finished, of course.</p>\n<p>Short version: this is a known issue, which has a mitigation in-place. Better solutions welcome.<br>\nLong version: the queueboard relies on github saying \"this PR was updated\" to know when to download new data for a PR. There is no explicit notification for \"CI for this PR finished running\" (but for most other events, there is): so, it can happen that a \"CI just finished\" is missed. To mitigate this, the queueboard automatically asks for updated data after 60 minutes. Then, the information is updated.</p>",
        "id": 498701185,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177791
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/498701171\">said</a>:</p>\n<blockquote>\n<p>Currently, the <code>bors r...</code> action does not know at all about <code>-</code>: it only acts on <code>bors r+</code>, ignoring <code>bors r-</code>.  Of course, this is easy to change!</p>\n</blockquote>\n<p>I think that would be helpful.</p>",
        "id": 498701236,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177805
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/498694826\">said</a>:</p>\n<blockquote>\n<p>I see this at <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html\">https://jcommelin.github.io/queueboard/on_the_queue.html</a>, typing massot in the search box.</p>\n</blockquote>\n<p>Thanks for the clear instruction! I see the issue now. (The description right now lumps \"marked draft\", \"CI fails\" and \"CI still running\" into one. That's ... inaccurate at least. Will fix right now.)</p>",
        "id": 498701679,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177921
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/498701185\">said</a>:</p>\n<blockquote>\n<p>The queueboard doesn't say there are CI issues, just \"last time we checked, CI was still running\". By now, CI has finished, of course.</p>\n</blockquote>\n<p>Would it be possible to add a CI step after a successful run that \"pings\" the queueboard, updating the status?</p>",
        "id": 498701715,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739177931
    },
    {
        "content": "<p>One workaround could be to have a workflow add the awaiting-CI label on every push. Then, passing CI would remove that label, triggering an update.<br>\nBetter ideas welcome!</p>",
        "id": 498701847,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177972
    },
    {
        "content": "<p>Update:</p>\n<ul>\n<li>I've fixed the strange labelling (\"marked as draft\"); the fix should be live now</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15373\">#15373</a> actually always passed CI (it was just a bors batch that was cancelled) - so the classification was arguably correct</li>\n</ul>\n<p>From my side, everything looks as expected now. It would definitely be nice to make the bot also react to \"bors r-\". I'll look into a deeper fix for \"update CI\" status now.</p>",
        "id": 498718133,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739182201
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/21636\">#21636</a> removes the <code>ready-to-merge</code> and <code>delegated</code> labels when the comment contains <code>bors r-</code> or <code>bors d-</code>.  Note that <code>bors d-</code> is not an actual bors command, but the \"local\" action still removes the label.</p>",
        "id": 498721606,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739183136
    },
    {
        "content": "<p>Thanks a lot Michael and Damiano. Iâm happy that my questions led you to improvements in our tooling.</p>",
        "id": 498748470,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739190659
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/21645\">#21645</a> follows up the previous PR: it fixes a bug and should distinguish better between <code>bors d+</code>/<code>bors delegate</code> and <code>bors d-</code>.  It also adds support for <code>bors merge-</code>.</p>",
        "id": 498772817,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739196926
    },
    {
        "content": "<p>Since no change to CI is small enough to contain only countably many bugs, <a href=\"https://github.com/leanprover-community/mathlib4/pull/21676\">#21676</a> fixes yet another bug with <code>bors d-</code> removal of <code>delegated</code>.</p>",
        "id": 498987511,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739273569
    },
    {
        "content": "<p>I just tested the <code>bors r-</code>/<code>bors d-</code> actions and they appear to work!  Please, report if you notice any issue with them!</p>",
        "id": 499024480,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739284682
    },
    {
        "content": "<p>It has been a while since my last update comment. In the meantime, quite a bit of work has happened: let me highlight a few shiny new features.</p>\n<h2>Show the last real status change</h2>\n<p>If you attended my Lean together talk, you saw this one already: the queueboard grew two new columns, for showing when a given PR</p>\n<ul>\n<li>last changed its status (e.g. from waiting on the author to waiting for review),</li>\n<li>the total time a PR was waiting for review.<br>\nA very small share of PRs does not have this data (e.g., because downloading the necessary metadata would take too long to download), but in practice this works very well.</li>\n</ul>\n<h2>All open PRs</h2>\n<p>There is now <a href=\"https://jcommelin.github.io/queueboard/triage.html#all\">a dashboard</a> of all open PRs. Since yesterday, this dashboard is also linked on the main page. If you ever wanted to see all your PRs, or all PRs by somebody else, this is the place to go! The next feature makes this even more useful.</p>\n<h2>Saved table searches/ configure dashboards via the URL</h2>\n<p>Until now, there was no great way to save a dashboard's configuration. If you set a larger number of items per page, entered some search terms or chose some sorting, this was not really persistent. (The queueboard did save the last table configuration, but no more.) This has an end now: you can now tweak the page length, initial sorting and search terms by changing the URL you're visiting.</p>\n<p>A few examples what this can be used for:</p>\n<ul>\n<li>sort the <a href=\"https://leanprover-community.github.io/queue-redirect\">#queue</a> table by total time in review (in descending order): <a href=\"https://jcommelin.github.io/queueboard/review_dashboard.html?sort=10-desc#queue\">https://jcommelin.github.io/queueboard/review_dashboard.html?sort=10-desc#queue</a>. This might be a reasonable default for use in triage meetings. (You may want to check if a PR had recent activity: but the table contains this information at once glance.)</li>\n<li>\n<p>show all <code>t-differential geometry</code> PRs on the queue, sorted by ascending diff size and then by author: <br>\n<a href=\"https://jcommelin.github.io/queueboard/review_dashboard.html?search=t-differential%20geometry&amp;sort=diff-asc&amp;sort=author-asc#queue\">https://jcommelin.github.io/queueboard/review_dashboard.html?search=t-differential%20geometry&amp;sort=diff-asc&amp;sort=author-asc#queue</a></p>\n</li>\n<li>\n<p>why are my PRs not on the queue? <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html?search=grunweg&amp;length=100\">https://jcommelin.github.io/queueboard/on_the_queue.html?search=grunweg&amp;length=100</a> shows the status of all my PRs, on one page. (To tweak: replace <code>grunweg</code> by your github handle; 100 is the number of items shown per page. Omitting it shows 10 PRs by default.)</p>\n</li>\n<li><a href=\"https://jcommelin.github.io/queueboard/triage.html?search=kim-em&amp;sort=10-desc#all\">https://jcommelin.github.io/queueboard/triage.html?search=kim-em&amp;sort=10-desc#all</a> shows <em>all</em> open PRs by <code>kim-em</code>, sorted by total time waiting for review.</li>\n</ul>\n<p>The current code is an MVP version, i.e. there are some rough edges/known issues.</p>\n<ul>\n<li>currently, you can tweak the page length, initial sorting and search terms by changing the URl you're visiting. Further criteria are totally possible: let me know if there are any you'd find helpful.</li>\n<li>filtering currently always filters <em>all</em> tables on a page; there's no way yet to filter only a certain table (help welcome, see <a href=\"http://TODO!\">here</a> for details)</li>\n<li>the sorting configuration takes indices as default argument (the <code>10</code> you saw above was the 0-based column index, from the last). For some columns, I have defined human-readable names as stable aliasses already; the last few columns will follow soon.(Another complication is that a few less common tables have some columns omitted... so the current solution is not perfect yet. This will come in time.)</li>\n<li>there's no way yet to <em>generate</em> a URL for the current table: that's not hard to implement. In the mean-time, feel free to ask me any questions you have.</li>\n</ul>\n<p>Beyond these points, some natural future directions are</p>\n<ul>\n<li>more rigid filtering syntax: currently, \"kbuzzard\" finds all PRs where kbuzzard is an author, a reviewer or assignee. Writing \"author:kbuzzard\" could be a way to make this precise.</li>\n<li>support for filtering by one of multiple authors or multiple labels. (This would allow e.g. saving a \"list of all my favourite authors\", individually.)</li>\n</ul>\n<h2>Visual tweaks</h2>\n<p>Thanks for all the responses to the queueboard survey! Some features were quick to implement; this includes</p>\n<ul>\n<li>diff size is now coloured (green for insertions, red for deletions)</li>\n<li>the \"last update\" is shown more compactly: it only displays something of the form \"5 days ago\" (with the exact data available upon hover)</li>\n<li>the <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html\">\"on the queue page\"</a> shows a warning for PRs which are missing a topic label (i.e., <code>feat</code>ure PRs without a label <code>t-something</code>) </li>\n<li>hovering above a PR number shows its github branch<br>\nWe would also like to make this copy-pastable, but are not sure about the best option yet. If you have a suggestion, we'd like to hear it!</li>\n</ul>\n<h2>Smaller changes</h2>\n<p>Some smaller changes include</p>\n<ul>\n<li>changed in mathlib CI: delegated PRs have their maintainer-merge label removed (making the maintainer merge dashboard less cluttered)</li>\n<li>refactored: the computation of \"last updated\" and \"total time in review\" is now performed during preprocessing: in particular, external tools consuming the .json files have access to this as well.</li>\n<li>added a field \"first time on the queue\" to the aggregate data (which is only implicitly exposed, through the line \"88 PRs appeared on the review queue within the last two weeks\" <a href=\"https://jcommelin.github.io/queueboard/triage.html#review-status\">here</a>)</li>\n<li>changed: stale unassigned PRs now uses the last status change as threshold for staleness, as opposed to github's \"last update\" (commit). I think this is better; there is certainly room to fine-tune this.</li>\n<li>significant effort was put into making the data collection more robust. One piece of infrastructure is missing: re-downloading a PR's metadata once its CI finishes (<a href=\"https://github.com/jcommelin/queueboard/pull/91\">queueboard#91</a>).</li>\n</ul>",
        "id": 503290118,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1741100563
    },
    {
        "content": "<p><span aria-label=\"alert\" class=\"emoji emoji-1f6a8\" role=\"img\" title=\"alert\">:alert:</span> PSA <span aria-label=\"alert\" class=\"emoji emoji-1f6a8\" role=\"img\" title=\"alert\">:alert:</span> The queueboard has moved: <a href=\"https://leanprover-community.github.io/queueboard/\">https://leanprover-community.github.io/queueboard/</a></p>",
        "id": 506086277,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1742202592
    },
    {
        "content": "<p>Zulip linkifier updated. Old web address now hosts a redirect.</p>",
        "id": 506090253,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1742203525
    },
    {
        "content": "<p>To everybody who cloned the repository locally: please remember to update your configuration to change the upstream location. (There is a new placeholder repository, with just a redirect - which would confuse git otherwise.)</p>",
        "id": 506095192,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1742204657
    },
    {
        "content": "<p>Where does the JSON fuelling my upstreaming dashboards live now? The following line is failing now: <a href=\"https://github.com/YaelDillies/Toric/blob/master/scripts/upstreaming_dashboard.py#L15\">https://github.com/YaelDillies/Toric/blob/master/scripts/upstreaming_dashboard.py#L15</a></p>",
        "id": 506108884,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1742207771
    },
    {
        "content": "<p>Is it the same thing but <code>leanprover-community/queueboard</code> instead of <code>jcommelin/queueboard</code> ?</p>",
        "id": 506109039,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1742207817
    },
    {
        "content": "<p>By the way: these json files recent got <em>a bit</em> larger, as we're adding additional metadata (PR descriptions, users who commented etc.) for displaying this information also. If that size poses an issue, we can think about creating files with just a subset of this information.</p>",
        "id": 506109686,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1742207971
    },
    {
        "content": "<p>For now it works great! (today was the first day any of my many upstreaming dashboards failed to build)</p>",
        "id": 506110190,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1742208089
    },
    {
        "content": "<p>Two new features have arrived in the queueboard:</p>\n<ul>\n<li>\n<p>searching a list of PRs also searches the PR description<br>\nJohan and I think this is a reasonable default, which coincidentally matches what github does. If you'd like a way to opt out, let us know - it wouldn't be hard to implement.</p>\n</li>\n<li>\n<p>you can search for PRs you commented on or reviewed: for each PR, we compute all users who commented on or reviewed this PR; searching a list of PRs also searches this list.</p>\n</li>\n</ul>\n<p>Fixed: sorting by diff size works again (a change a week ago broke this).</p>",
        "id": 506158692,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1742219717
    },
    {
        "content": "<p>Another update:</p>\n<ul>\n<li>Searching all PRs I commented on by default makes finding \"my PRs\" harder: to compensate, I added a mild hack. Searching for <code>author:grunweg</code> will find all PRs whose author is grunweg. (If you need this for other columns, reach out --- this <em>can</em> be implemented in a more general way.)</li>\n<li>Searching for <code>t-algebra$</code> as part of your query will return all PRs whose label is <code>t-algebra</code> --- without false positives from <code>t-algebraic-geometry</code>. (I believe <span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span> mentioned this a while ago.)</li>\n<li>You can now search the files a PR modifies: simply search for the file name. (Small caveat: we only return the first 100 files a PR changes. If a PR modifies more files, this search will miss some of the files. Such PRs are rare, though.)</li>\n</ul>",
        "id": 506441094,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1742293844
    },
    {
        "content": "<p>And another one:</p>\n<ul>\n<li>all columns now have a stable \"human-readable name\" for the purposes of sorting: for instance, you can now use <code>review_dashboard.html?sort=totalTimeReview-desc#queue</code> to get a reasonable shared view for mathlib triage meetings</li>\n<li>I added a blob of user-facing documentation <a href=\"https://leanprover-community.github.io/queueboard/index.html#tips-and-tricks\">to the main page</a>. <em>Please</em> let me know if anything is unclear or missing. (And if you're a better graphics designer, PRs for the formatting are also welcome.)</li>\n</ul>",
        "id": 506667638,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1742374033
    },
    {
        "content": "<p>I'd like to celebrate a small milestone with you: in the past months, I have been backfilling metadata for all closed PRs. To the best of my knowledge, this process is now <strong>complete</strong>: the repository has data for all mathlib4 PRs, past and present.</p>",
        "id": 515573685,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1746130275
    },
    {
        "content": "<p>This is nice opportunity to say: Thank you <em>so</em> much for all the work you are doing for the community!</p>",
        "id": 515576829,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1746131469
    }
]