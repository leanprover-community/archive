[
    {
        "content": "<p>In the past few weeks, <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> and I have been chipping away at a prototype review dashboard that should hopefully get rid of some bottlenecks in the review process for mathlib.<br>\nWe are far from done, but the prototype is already at a stage where I regularly use it to find PRs that I want to review.</p>\n<p>Here is the dashboard: <a href=\"https://jcommelin.github.io/queueboard\">https://jcommelin.github.io/queueboard</a><br>\nAnd here is the repo: <a href=\"https://github.com/jcommelin/queueboard\">https://github.com/jcommelin/queueboard</a></p>\n<p>There are several ideas about how to improve the UX: see the open issues.<br>\nBut I would be very happy to hear about more ideas, feel free to create more issues with feature requests.</p>\n<p>Furthermore I would be happy to get some help. If you enjoy communicating with Github via one of its API then your help is particularly welcome. Currently there is a script <code>pr_info.sh</code> that tries to scrape as much info as possible from github about a given PR. Here is a concrete todo that I would like help with:</p>\n<ul>\n<li>The data should include all information about CI statuses for all the commits that are part of the PR.</li>\n</ul>",
        "id": 469047023,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725962046
    },
    {
        "content": "<p>Let me cross-post the following from the private reviewer stream, to highlight some new features this dashboard gained over the past days. If you used this already, perhaps you'll find a new feature useful. Otherwise, feel free to take this as a guided tour of some new features :-)</p>\n<h2>What happened recently on the review dashboard prototype</h2>\n<p><strong>Changes on the user experience side</strong></p>\n<ul>\n<li>the dashboard now links to the github repository, and vice versa</li>\n<li>all dashboard headings are hyperlinks now: you can right-click on them and to determine the link to this dashboard</li>\n<li>when hovering over each section, you see an explanation which PRs are included in it</li>\n<li>some columns of each dashboard also have an explanation. (Don't remember if the comment bubble is the number of all commenta or just of review comments? Hover over it to find out.)</li>\n<li>\n<p>added a table of contents, with quick links to each part<br>\nClicking on these jumps within the page: to open a dashboard in a new tab, ... open the link in a new tab (using e.g. middle-click or right-click -&gt; open link in a new tab).</p>\n</li>\n<li>\n<p>you can now filter each list PRs by typing into the \"search\" box on the top right of each dashboard<br>\nThis will restrict to the PRs containing the given word in their title or labels. To find all PRs whose title mentions \"unique\", search for \"unique\". To find all <code>t-linter</code> PRs, searching for \"t-linter\" will do. (It would also find PRs with <code>t-linter</code> in the title, but these are extremely rare.)</p>\n</li>\n</ul>\n<p><strong>New features</strong></p>\n<ul>\n<li>added a new dashboard, of easy PRs on the review queue</li>\n<li>\n<p>added a new dashboard with PRs which \"just need a merge\": except for a merge conflict, they match the review queue<br>\n(If you're looking for something quick to do, pinging such a PR could be useful to bring it back on the review queue.)</p>\n</li>\n<li>\n<p>added a dashboard for PRs waiting for a decision (currently just five of them), and another for contradictory labels (just one)</p>\n</li>\n<li>\n<p>added an overview section, classifying the ~1000 open PRs into states like \"waiting for review\", \"waiting for the author\", \"blocked on another PR\", \"work in progress\", \"merge conflict\" and others. If you ever wondered where all these PRs went, now you can find out!</p>\n<ul>\n<li>this page links to the relevant dashboards (where applicable)</li>\n<li>there is also a pie chart showing the proportion of the respective PR categories (contributed by <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span>)</li>\n</ul>\n</li>\n</ul>\n<p><strong>In progress/hopefully coming soon</strong></p>\n<ul>\n<li>take CI status into account when determining PR's status: your help is welcome here</li>\n<li>\n<p>update the dashboard in (closer to) real time: currently, the webpage updates about every ~15 minutes<br>\nMaking this change requires some changes to the underlying infrastructure, by caching information about pull requests.</p>\n</li>\n<li>\n<p>compute a better estimate for \"when was this PR's status <em>really</em> changed\". Github's \"last updated\" is misleading, it includes events which are not relevant for this purpose. For instance, tweaking a PR description, labelling a PR by its area or a merge conflict (resolved quickly) all mark a PR as \"recently changed\", fooling the heuristics of the current <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>.</p>\n</li>\n<li>determine \"how long is PR X waiting for review <em>in total</em>\"<br>\nThis and the previous item are available in proof of concept stage: this can be computed for individual PRs automatically. Exposing this in the dashboard may require the infrastructure above.</li>\n</ul>",
        "id": 469097623,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725976191
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/469097623\">said</a>:</p>\n<blockquote>\n<p>added a new dashboard with PRs which \"just need a merge\": except for a merge conflict, they match the review queue<br>\n(If you're looking for something quick to do, pinging such a PR could be useful to bring it back on the review queue.)</p>\n</blockquote>\n<p>I noticed that the <a href=\"https://jcommelin.github.io/queueboard/index.html#needs-merge\">PRs with just a merge conflict</a> queue also has some PRs with labels like \"await-zulip\", \"help-wanted\", \"please-adopt\". Did you mean to filter these PRs out?</p>\n<p>(EDIT) Fix: <a href=\"https://github.com/jcommelin/queueboard/pull/49\">queueboard#49</a></p>",
        "id": 469354589,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1726050207
    },
    {
        "content": "<p>I modified the query so that it now includes CI info for each commit of a PR.</p>",
        "id": 469567019,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726121893
    },
    {
        "content": "<p>Suggestion (<a href=\"https://github.com/leanprover-community/queueboard/pull/50\">queueboard#50</a>): can we have a page on the queueboard website where you give it a PR number and it tells you why it's not on the queue? Maybe presented as a list of checkboxes so that authors can learn what they need to do to get their PRs reviewed</p>",
        "id": 470024089,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1726250301
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/470024089\">said</a>:</p>\n<blockquote>\n<p>Suggestion (<a href=\"https://github.com/leanprover-community/queueboard/pull/50\">queueboard#50</a>): can we have a page on the queueboard website where you give it a PR number and it tells you why it's not on the queue? Maybe presented as a list of checkboxes so that authors can learn what they need to do to get their PRs reviewed</p>\n</blockquote>\n<p>That is a great idea and shouldn't be hard to implement.<br>\nI can to do that in the first week of October. (Until end of this month, I may have little or no Lean time.)</p>",
        "id": 470053569,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1726263659
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/469354589\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/469097623\">said</a>:</p>\n<blockquote>\n<p>added a new dashboard with PRs which \"just need a merge\": except for a merge conflict, they match the review queue<br>\n(If you're looking for something quick to do, pinging such a PR could be useful to bring it back on the review queue.)</p>\n</blockquote>\n<p>I noticed that the <a href=\"https://jcommelin.github.io/queueboard/index.html#needs-merge\">PRs with just a merge conflict</a> queue also has some PRs with labels like \"await-zulip\", \"help-wanted\", \"please-adopt\". Did you mean to filter these PRs out?</p>\n<p>(EDIT) Fix: <a href=\"https://github.com/jcommelin/queueboard/pull/49\">queueboard#49</a></p>\n</blockquote>\n<p>I deliberately made that dashboard's query match the criteria for <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>: that <em>does</em> include PRs which are labelled awaiting-zulip or help-wanted. I don't mind strongly which way this is decided, but I would prefer if this were consistent.</p>\n<p>(Bonus points for updating the classification of PRs accordingly. I can do that in October.)</p>",
        "id": 470053727,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1726263734
    },
    {
        "content": "<p>Idea for another sorting order: number PRs that are blocked by a given PR</p>",
        "id": 470095769,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726288527
    },
    {
        "content": "<p>We definitely should have a technical debt section on the queueboard</p>",
        "id": 470097414,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1726288963
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/470095769\">said</a>:</p>\n<blockquote>\n<p>Idea for another sorting order: number PRs that are blocked by a given PR</p>\n</blockquote>\n<p>That's an amazing idea</p>",
        "id": 470097995,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1726289398
    },
    {
        "content": "<p>Great ideas! Filed as <a href=\"https://github.com/leanprover-community/queueboard/pull/51\">queueboard#51</a> and <a href=\"https://github.com/leanprover-community/queueboard/pull/52\">queueboard#52</a>. Both shouldn't be hard; I'll add them to my list of ideas for the first week of October.</p>",
        "id": 470136602,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1726306610
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 470144917,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726310262
    },
    {
        "content": "<p>I tried to use the queueboard this morning but most of the PRs it showed on the queue either had unfinished or actually failing CI</p>",
        "id": 472030664,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1726996566
    },
    {
        "content": "<p>Side note: the \"queueboard\" linkifier points to the non-existent repo \"<a href=\"https://github.com/leanprover-community/queueboard\">https://github.com/leanprover-community/queueboard</a>\"; it should point at \"<a href=\"https://github.com/jcommelin/queueboard\">https://github.com/jcommelin/queueboard</a>\" instead. Can some admin change this, please?</p>",
        "id": 472156753,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727078102
    },
    {
        "content": "<p>Let me take a look. Did you look at the queue dashboard, or a different one? Because the former should use the exact same query as for <a href=\"https://bit.ly/3Ymuh0U\">#queue</a>.</p>",
        "id": 472157343,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727078264
    },
    {
        "content": "<p><a href=\"https://jcommelin.github.io/queueboard/index.html\">https://jcommelin.github.io/queueboard/index.html</a></p>",
        "id": 472157567,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1727078326
    },
    {
        "content": "<p>Yes, sure. I meant, did you look at the \"queue\" section of that page? (It also has other dashboards, further below.)</p>",
        "id": 472157801,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727078397
    },
    {
        "content": "<p>Ok, I think I found the culprit. The <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> uses \"status:success\", while the other dashboard just excludes <em>failing</em> PRs. That's an easy change, <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span></p>",
        "id": 472158049,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727078450
    },
    {
        "content": "<p>Ah yeah, the \"review queue\" section. thanks for looking</p>",
        "id": 472159454,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1727078861
    },
    {
        "content": "<p>Pushed a fix (and started a conversation about aligning the definitions of the <a href=\"https://bit.ly/3Ymuh0U\">#queue</a> in both sources). Should be live in ~10 minutes.</p>",
        "id": 472163154,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1727079946
    },
    {
        "content": "<p>So is the review queue ordered by pr number, but the 4 digits ones after the 5 digit ones?</p>",
        "id": 475008620,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728154692
    },
    {
        "content": "<p>It seems so (the \"PRs not into master\" board shows this). That's a bug, thanks for reporting!</p>",
        "id": 475120478,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728237129
    },
    {
        "content": "<p>I have a fix (and am exploring a more elegant fix now). <del>I'll push some version tomorrow!</del>Pushed now.</p>",
        "id": 475145783,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728249915
    },
    {
        "content": "<p>New feature time: today, I implemented two feature requests from this thread</p>\n<ul>\n<li>there is now a dashboard of all technical debt PRs</li>\n<li>there is a separate page \"why is my PR not on the queue\" (which is <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html\">available here</a>.</li>\n</ul>\n<p>Comments on both are welcome!</p>",
        "id": 475583040,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728398424
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/472156753\">said</a>:</p>\n<blockquote>\n<p>Side note: the \"queueboard\" linkifier points to the non-existent repo \"<a href=\"https://github.com/leanprover-community/queueboard\">https://github.com/leanprover-community/queueboard</a>\"; it should point at \"<a href=\"https://github.com/jcommelin/queueboard\">https://github.com/jcommelin/queueboard</a>\" instead. Can some admin change this, please?</p>\n</blockquote>\n<p>Bump, e.g. <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>. Thanks!</p>",
        "id": 475583251,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728398465
    },
    {
        "content": "<p>Test: <a href=\"https://github.com/jcommelin/queueboard/pull/50\">queueboard#50</a></p>",
        "id": 475589774,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1728399993
    },
    {
        "content": "<p>Works for me, thank you!</p>",
        "id": 475590185,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728400089
    },
    {
        "content": "<p>Maybe also the repo should be moved if we actively rely on it now</p>",
        "id": 475591074,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728400322
    },
    {
        "content": "<p>I have an opportunity for you to help improve this page: right now, sorting by the diff size will treat it as a string (and e.g. sort \"1/90\" before \"1/100\", even though the second PR has larger diff). I have most of the code to sort diffs properly, but am stuck at a question of javascript (which I'm not an expert on). Would somebody (e.g. <span class=\"user-mention\" data-user-id=\"385895\">@Jon Eugster</span> <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>) like to help?</p>\n<p>In short: get this minimized webpage to behave as it says. Right now, the script fails to parse. It's presumably just a matter of syntax to fix this, but I don't know the right incantation.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">&lt;!</span><span class=\"n\">DOCTYPE</span><span class=\"w\"> </span><span class=\"n\">html</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">html</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">head</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">title</span><span class=\"bp\">&gt;</span><span class=\"n\">Datatable</span><span class=\"w\"> </span><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"n\">sorting</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">page</span><span class=\"bp\">&lt;/</span><span class=\"n\">title</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">script</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"bp\">=</span><span class=\"s2\">\"[https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js](view-source:https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js)\"</span>\n<span class=\"w\">    </span><span class=\"n\">integrity</span><span class=\"bp\">=</span><span class=\"s2\">\"[sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==]()\"</span>\n<span class=\"w\">    </span><span class=\"n\">crossorigin</span><span class=\"bp\">=</span><span class=\"s2\">\"[anonymous]()\"</span><span class=\"bp\">&gt;&lt;/</span><span class=\"n\">script</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">link</span><span class=\"w\"> </span><span class=\"n\">rel</span><span class=\"bp\">=</span><span class=\"s2\">\"[stylesheet]()\"</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"bp\">=</span><span class=\"s2\">\"[text/css]()\"</span><span class=\"w\"> </span><span class=\"n\">href</span><span class=\"bp\">=</span><span class=\"s2\">\"[https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css](view-source:https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css)\"</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">script</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"bp\">=</span><span class=\"s2\">\"[text/javascript]()\"</span><span class=\"w\"> </span><span class=\"n\">charset</span><span class=\"bp\">=</span><span class=\"s2\">\"[utf8]()\"</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"bp\">=</span><span class=\"s2\">\"[https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js](view-source:https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js)\"</span><span class=\"bp\">&gt;&lt;/</span><span class=\"n\">script</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;/</span><span class=\"n\">head</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">body</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">p</span><span class=\"bp\">&gt;</span><span class=\"n\">This</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">page</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">sorting</span><span class=\"w\"> </span><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"n\">sizes</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">data</span><span class=\"w\"> </span><span class=\"n\">tables</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"n\">column</span><span class=\"w\"> </span><span class=\"n\">should</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">sorted</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">total</span><span class=\"w\"> </span><span class=\"n\">changes</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">strings</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Sorting</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">strings</span><span class=\"w\"> </span><span class=\"n\">yields</span><span class=\"w\"> </span><span class=\"n\">Alpha</span><span class=\"bp\">-</span><span class=\"n\">Beta</span><span class=\"bp\">-</span><span class=\"n\">Gamma</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sorting</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"n\">should</span><span class=\"w\"> </span><span class=\"n\">yield</span><span class=\"w\"> </span><span class=\"n\">Alpha</span><span class=\"bp\">-</span><span class=\"n\">Gamma</span><span class=\"bp\">-</span><span class=\"n\">Beta</span><span class=\"bp\">.</span>\n<span class=\"n\">Current</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">how</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">make</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`diff_stat</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">used?</span><span class=\"bp\">&lt;/</span><span class=\"n\">p</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;</span><span class=\"n\">table</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">  </span><span class=\"bp\">&lt;</span><span class=\"n\">thead</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">tr</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">th</span><span class=\"bp\">&gt;</span><span class=\"n\">Title</span><span class=\"bp\">&lt;/</span><span class=\"n\">th</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">th</span><span class=\"bp\">&gt;</span><span class=\"n\">Diff</span><span class=\"bp\">&lt;/</span><span class=\"n\">th</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;/</span><span class=\"n\">tr</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;/</span><span class=\"n\">thead</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">tr</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"n\">Alpha</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"mi\">10</span><span class=\"bp\">/</span><span class=\"mi\">200</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;/</span><span class=\"n\">tr</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">tr</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"n\">Beta</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"mi\">100</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;/</span><span class=\"n\">tr</span><span class=\"bp\">&gt;</span>\n<span class=\"w\">    </span><span class=\"bp\">&lt;</span><span class=\"n\">tr</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"n\">Gamma</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;</span><span class=\"n\">td</span><span class=\"bp\">&gt;</span><span class=\"mi\">60</span><span class=\"bp\">/</span><span class=\"mi\">60</span><span class=\"bp\">&lt;/</span><span class=\"n\">td</span><span class=\"bp\">&gt;&lt;/</span><span class=\"n\">tr</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;/</span><span class=\"n\">table</span><span class=\"bp\">&gt;</span>\n\n<span class=\"bp\">&lt;</span><span class=\"n\">script</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">$</span><span class=\"o\">(</span><span class=\"n\">document</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">ready</span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">diff_stat</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">DataTable</span><span class=\"bp\">.</span><span class=\"n\">type</span><span class=\"o\">(</span><span class=\"bp\">'</span><span class=\"n\">diff_stat'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">detect</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">data</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"o\">},</span>\n<span class=\"w\">    </span><span class=\"n\">order</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">      </span><span class=\"n\">pre</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">data</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">parts</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">data</span><span class=\"bp\">.</span><span class=\"n\">split</span><span class=\"o\">(</span><span class=\"bp\">'/'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">;</span>\n<span class=\"w\">        </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">Number</span><span class=\"o\">(</span><span class=\"n\">parts</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">])</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Number</span><span class=\"o\">(</span><span class=\"n\">parts</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">])</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">},</span>\n<span class=\"w\">  </span><span class=\"o\">})</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"bp\">$</span><span class=\"o\">(</span><span class=\"bp\">'</span><span class=\"n\">table'</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">DataTable</span><span class=\"o\">({</span>\n<span class=\"w\">    </span><span class=\"n\">pageLength</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"s2\">\"searching\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">columnDefs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[{</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">diff_stat'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">targets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">}],</span>\n<span class=\"w\">  </span><span class=\"o\">})</span><span class=\"bp\">;</span>\n<span class=\"o\">})</span><span class=\"bp\">;</span>\n<span class=\"bp\">&lt;/</span><span class=\"n\">script</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;/</span><span class=\"n\">body</span><span class=\"bp\">&gt;</span>\n<span class=\"bp\">&lt;/</span><span class=\"n\">html</span><span class=\"bp\">&gt;</span>\n</code></pre></div>",
        "id": 475876734,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728483562
    },
    {
        "content": "<p>Ah, the links in the script tags look like markdown links to me instead of raw URLs, but maybe that was just an issue of copy pasting to Zulip? I tested after fixing them and it looks like the issue is that you're using v1 of DataTables, but DataTable.type requires v2? The following seems to work for me in VS Code's Live Preview server:</p>\n<div class=\"codehilite\" data-code-language=\"HTML\"><pre><span></span><code><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>Datatable diff sorting test page<span class=\"p\">&lt;/</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"</span>\n    <span class=\"na\">integrity</span><span class=\"o\">=</span><span class=\"s\">\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\"</span>\n    <span class=\"na\">crossorigin</span><span class=\"o\">=</span><span class=\"s\">\"anonymous\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">link</span> <span class=\"na\">rel</span><span class=\"o\">=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text/css\"</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">\"https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css\"</span><span class=\"p\">&gt;</span>\n<span class=\"cm\">&lt;!-- &lt;script type=\"text/javascript\" charset=\"utf8\" src=\"https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js\"&gt;&lt;/script&gt; --&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"https://cdn.datatables.net/2.1.8/js/dataTables.js\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">p</span><span class=\"p\">&gt;</span>This is a test page for sorting diff sizes in data tables. The diff column should be sorted by the total changes, not as strings. Sorting as strings yields Alpha-Beta-Gamma, sorting by diff size should yield Alpha-Gamma-Beta.\nCurrent error: how to make the `diff_stat` type be used?<span class=\"p\">&lt;/</span><span class=\"nt\">p</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">thead</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Title<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Diff<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">thead</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Alpha<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>10/200<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Beta<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>100/10<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Gamma<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>60/60<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"nb\">document</span><span class=\"p\">).</span><span class=\"nx\">ready</span><span class=\"p\">(</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"nx\">diff_stat</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">DataTable</span><span class=\"p\">.</span><span class=\"nx\">type</span><span class=\"p\">(</span><span class=\"s1\">'diff_stat'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"nx\">detect</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">},</span>\n<span class=\"w\">    </span><span class=\"nx\">order</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"nx\">pre</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"nx\">parts</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">2</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">Number</span><span class=\"p\">(</span><span class=\"nx\">parts</span><span class=\"p\">[</span><span class=\"mf\">0</span><span class=\"p\">])</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"nb\">Number</span><span class=\"p\">(</span><span class=\"nx\">parts</span><span class=\"p\">[</span><span class=\"mf\">1</span><span class=\"p\">]);</span>\n<span class=\"w\">      </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"p\">},</span>\n<span class=\"w\">  </span><span class=\"p\">});</span>\n<span class=\"w\">  </span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"s1\">'table'</span><span class=\"p\">).</span><span class=\"nx\">DataTable</span><span class=\"p\">({</span>\n<span class=\"w\">    </span><span class=\"nx\">pageLength</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">10</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"s2\">\"searching\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"nx\">columnDefs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"p\">[{</span><span class=\"w\"> </span><span class=\"nx\">type</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s1\">'diff_stat'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">targets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">4</span><span class=\"p\">}],</span>\n<span class=\"w\">  </span><span class=\"p\">});</span>\n<span class=\"p\">});</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</code></pre></div>",
        "id": 475891893,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1728486622
    },
    {
        "content": "<p>Sorry, Im currently moving and am not on my computer; and I think that's not a question I can look at from my phone. Looks like Bryan is already on it though :)</p>",
        "id": 475954687,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1728506813
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/475891893\">said</a>:</p>\n<blockquote>\n<p>Ah, the links in the script tags look like markdown links to me instead of raw URLs, but maybe that was just an issue of copy pasting to Zulip? I tested after fixing them and it looks like the issue is that you're using v1 of DataTables, but DataTable.type requires v2? The following seems to work for me in VS Code's Live Preview server:</p>\n<p><div class=\"codehilite\" data-code-language=\"HTML\"><pre><span></span><code><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>Datatable diff sorting test page<span class=\"p\">&lt;/</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\"</span>\n    <span class=\"na\">integrity</span><span class=\"o\">=</span><span class=\"s\">\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\"</span>\n    <span class=\"na\">crossorigin</span><span class=\"o\">=</span><span class=\"s\">\"anonymous\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">link</span> <span class=\"na\">rel</span><span class=\"o\">=</span><span class=\"s\">\"stylesheet\"</span> <span class=\"na\">type</span><span class=\"o\">=</span><span class=\"s\">\"text/css\"</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">\"https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css\"</span><span class=\"p\">&gt;</span>\n<span class=\"cm\">&lt;!-- &lt;script type=\"text/javascript\" charset=\"utf8\" src=\"https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js\"&gt;&lt;/script&gt; --&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span> <span class=\"na\">src</span><span class=\"o\">=</span><span class=\"s\">\"https://cdn.datatables.net/2.1.8/js/dataTables.js\"</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">p</span><span class=\"p\">&gt;</span>This is a test page for sorting diff sizes in data tables. The diff column should be sorted by the total changes, not as strings. Sorting as strings yields Alpha-Beta-Gamma, sorting by diff size should yield Alpha-Gamma-Beta.\nCurrent error: how to make the `diff_stat` type be used?<span class=\"p\">&lt;/</span><span class=\"nt\">p</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n  <span class=\"p\">&lt;</span><span class=\"nt\">thead</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Title<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>Diff<span class=\"p\">&lt;/</span><span class=\"nt\">th</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;/</span><span class=\"nt\">thead</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Alpha<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>10/200<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Beta<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>100/10<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n    <span class=\"p\">&lt;</span><span class=\"nt\">tr</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>Gamma<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">td</span><span class=\"p\">&gt;</span>60/60<span class=\"p\">&lt;/</span><span class=\"nt\">td</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">tr</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">table</span><span class=\"p\">&gt;</span>\n\n<span class=\"p\">&lt;</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"nb\">document</span><span class=\"p\">).</span><span class=\"nx\">ready</span><span class=\"p\">(</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">  </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"nx\">diff_stat</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">DataTable</span><span class=\"p\">.</span><span class=\"nx\">type</span><span class=\"p\">(</span><span class=\"s1\">'diff_stat'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">    </span><span class=\"nx\">detect</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"p\">},</span>\n<span class=\"w\">    </span><span class=\"nx\">order</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">      </span><span class=\"nx\">pre</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kd\">function</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"nx\">data</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"nx\">parts</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"nx\">data</span><span class=\"p\">.</span><span class=\"nx\">split</span><span class=\"p\">(</span><span class=\"s1\">'/'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mf\">2</span><span class=\"p\">);</span>\n<span class=\"w\">        </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"nb\">Number</span><span class=\"p\">(</span><span class=\"nx\">parts</span><span class=\"p\">[</span><span class=\"mf\">0</span><span class=\"p\">])</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"nb\">Number</span><span class=\"p\">(</span><span class=\"nx\">parts</span><span class=\"p\">[</span><span class=\"mf\">1</span><span class=\"p\">]);</span>\n<span class=\"w\">      </span><span class=\"p\">}</span>\n<span class=\"w\">    </span><span class=\"p\">},</span>\n<span class=\"w\">  </span><span class=\"p\">});</span>\n<span class=\"w\">  </span><span class=\"nx\">$</span><span class=\"p\">(</span><span class=\"s1\">'table'</span><span class=\"p\">).</span><span class=\"nx\">DataTable</span><span class=\"p\">({</span>\n<span class=\"w\">    </span><span class=\"nx\">pageLength</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">10</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"s2\">\"searching\"</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span>\n<span class=\"w\">    </span><span class=\"nx\">columnDefs</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"p\">[{</span><span class=\"w\"> </span><span class=\"nx\">type</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"s1\">'diff_stat'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nx\">targets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">4</span><span class=\"p\">}],</span>\n<span class=\"w\">  </span><span class=\"p\">});</span>\n<span class=\"p\">});</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">script</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Thanks so much! There was indeed a copy-paste issue with the markdown - and your other conjecture was spot on <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span> This seems to work locally now, I have pushed this change live.</p>",
        "id": 475958290,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728508130
    },
    {
        "content": "<p>I'm amazed that nothing broke when going from V1 to V2! (Well, almost nothing: <a href=\"https://github.com/jcommelin/queueboard/pull/58\">queueboard#58</a>)</p>",
        "id": 475959743,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1728508895
    },
    {
        "content": "<p>Me too, thanks for spotting! Adding a sub-resource integrity hash for the new URL, I realised the same mistake and fixed it already...</p>",
        "id": 475961118,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1728509527
    },
    {
        "content": "<p>No time to investigate further at the moment, but the queueboard seems to be blank at the moment. I don't see any red X's in the recent actions, but the artifact uploaded by GitHub pages also contains a 0-byte index.html (scroll to the bottom to download the artifact): <a href=\"https://github.com/jcommelin/queueboard/actions/runs/11353648819\">https://github.com/jcommelin/queueboard/actions/runs/11353648819</a></p>",
        "id": 477064807,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1729023840
    },
    {
        "content": "<p>A debugging change (disabling the generation of the dashboard) snuck in... fixed. Thanks for the report!</p>",
        "id": 477066957,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729024703
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/287929-mathlib4/topic/queueboard/near/470095769\">said</a>:</p>\n<blockquote>\n<p>Idea for another sorting order: number PRs that are blocked by a given PR</p>\n</blockquote>\n<p>Were you thinking of (presumably, only open) PRs \"directly blocked\" by a given PR, or also transitively? The former is right in the PR description (hence easier), the latter may be more interesting. Both should be implementable.<br>\nI can also start with the former.</p>",
        "id": 477069113,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729025718
    },
    {
        "content": "<p>I was thinking of the latter.</p>",
        "id": 477116703,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729051315
    },
    {
        "content": "<p>Also. <span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> switched refactored a bunch of plumbing, and now building the queueboard only takes ~1m. <span aria-label=\"octopus\" class=\"emoji emoji-1f419\" role=\"img\" title=\"octopus\">:octopus:</span>  We are now caching github metadata, instead of hammering the gh api on every queueboard build.</p>",
        "id": 477120677,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729053412
    },
    {
        "content": "<p>(We are still querying github's API ~13 times during each build, but that's much less than the 500 calls we used to make --- and I have a plan to remove those as well.)</p>",
        "id": 477233362,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729089780
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/uiH8uT_oTWbFUOg_O6FXXKeT/Screenshot-from-2024-10-17-10-06-29.png\">Screenshot from 2024-10-17 10-06-29.png</a><br>\nSurprised by a PR having -1 comments (<a href=\"https://github.com/leanprover-community/mathlib4/pull/17845\">#17845</a>)</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/uiH8uT_oTWbFUOg_O6FXXKeT/Screenshot-from-2024-10-17-10-06-29.png\" title=\"Screenshot from 2024-10-17 10-06-29.png\"><img data-original-dimensions=\"221x103\" src=\"/user_uploads/thumbnail/3121/uiH8uT_oTWbFUOg_O6FXXKeT/Screenshot-from-2024-10-17-10-06-29.png/840x560.webp\"></a></div>",
        "id": 477381193,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729152437
    },
    {
        "content": "<p>Good spot. These \"-1\"s means \"detailed information\" about this PR is missing when the dashboard is generated. In this case, this is a race condition (which a pending refactoring should fix).<br>\nThere are about three PRs for which downloading this information causes the github runner to time out (as these PRs are huge). But these are tracking PRs, generally old and not on the queue.</p>",
        "id": 477388065,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729154418
    },
    {
        "content": "<p><del>PSA: the statistics section is currently \"broken\" by a refactoring. (The github query it uses only returns up 1000 PRs, but mathlib has more. So it shows correct stats, but only for these 1000...) Proceeding with the refactoring will fix it. The queue is a separate query, and not affected. Sorry for the inconvenience!</del><br>\nUpdate: found a workaround (to the stats are fixed). Parts of the refactoring landed today.</p>",
        "id": 477414275,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729162606
    },
    {
        "content": "<p>Better merge some PRs!</p>",
        "id": 477429081,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729167506
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/287929-mathlib4/topic/t-algebra/near/477439136\">said</a>:</p>\n<blockquote>\n<p>contain a label with \"t-algebra\" as substring. (This includes \"t-algebraic-geometry\" and \"t-algebraic-topology\".)</p>\n</blockquote>\n<p>Potential feature: encode label <code>foo</code> in the searchable text as <code>foo$</code> (or <code>label:foo$</code>), so you can reliably search for a single label using <code>t-algebra$</code> (or <code>label:t-algebra$</code>).  Not the most important feature, but useful if easy to implement.</p>",
        "id": 477510131,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1729193042
    },
    {
        "content": "<p>Alternative solution: Rename <code>t-algebraic-geometry</code> and <code>t:algebraic-topology</code> to <code>t:geometrie-algebrique</code> and <code>t:topologie-algebrique</code></p>",
        "id": 477511088,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1729193430
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"111080\">Floris van Doorn</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/477510131\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/287929-mathlib4/topic/t-algebra/near/477439136\">said</a>:</p>\n<blockquote>\n<p>contain a label with \"t-algebra\" as substring. (This includes \"t-algebraic-geometry\" and \"t-algebraic-topology\".)</p>\n</blockquote>\n<p>Potential feature: encode label <code>foo</code> in the searchable text as <code>foo$</code> (or <code>label:foo$</code>), so you can reliably search for a single label using <code>t-algebra$</code> (or <code>label:t-algebra$</code>).  Not the most important feature, but useful if easy to implement.</p>\n</blockquote>\n<p>Interesting feature! Not sure how easy that that will be to implement --- but there is a middle ground that shouldn't be hard: add an input column below each table column; entering terms there allows filtering just that column. So, one could filter for user name, title or labels separately; global search is possible <em>on top</em> of this: <a href=\"https://datatables.net/examples/api/multi_filter.html\">this page</a> has an example - what do you think?</p>",
        "id": 477517745,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729196269
    },
    {
        "content": "<p>that doesn't resolve the precise \"issue\" that Johan had. Honestly, I would not put in much time in this direction, the current search box should suffice for most purposes.</p>",
        "id": 477518257,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1729196479
    },
    {
        "content": "<p>Here's a cursed idea to enable precise search: rename the algebra label to <code>t-algebra$</code>, then searching for <code>t-algebra$</code> will only find it <span aria-label=\"exploding head\" class=\"emoji emoji-1f92f\" role=\"img\" title=\"exploding head\">:exploding_head:</span></p>",
        "id": 477522365,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729198301
    },
    {
        "content": "<p>(This is the only label with this property: algebraic-geometry and algebraic-topology can be distinguished by typing a few more characters.)</p>",
        "id": 477522448,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729198330
    },
    {
        "content": "<p>The queueboard now has a <a href=\"https://jcommelin.github.io/queueboard/index.html#from-fork\">table of all PRs opened from a fork</a>.</p>",
        "id": 478000574,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1729501773
    },
    {
        "content": "<p>The queueboard seems to be redirecting to an index-old file. Anything going on?</p>",
        "id": 480294715,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730627731
    },
    {
        "content": "<p>Please reload the page, the output should be different now. :-)</p>",
        "id": 480295134,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730628140
    },
    {
        "content": "<p>Yes: I re-designed the webpage a bit, splitting it into several parts --- for reviewers, maintainers, folks just wanting to help out (by something other than reviewing) and triage (still partially under construction). The \"old main page\" is still available for now --- but I hope the new split helps you better find what you're interested in.</p>\n<p>If you just want the review queue, the link is now <a href=\"https://jcommelin.github.io/queueboard/review_dashboard.html\">https://jcommelin.github.io/queueboard/review_dashboard.html</a>.</p>",
        "id": 480295197,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730628235
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/_6fHKsCna9P18ned7o97rKKI/Bildschirmfoto-vom-2024-11-03-11-12-13.png\">Bildschirmfoto vom 2024-11-03 11-12-13.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/_6fHKsCna9P18ned7o97rKKI/Bildschirmfoto-vom-2024-11-03-11-12-13.png\" title=\"Bildschirmfoto vom 2024-11-03 11-12-13.png\"><img data-original-dimensions=\"2496x710\" src=\"/user_uploads/thumbnail/3121/_6fHKsCna9P18ned7o97rKKI/Bildschirmfoto-vom-2024-11-03-11-12-13.png/840x560.webp\"></a></div><p>This is how the main page looks now.</p>",
        "id": 480295724,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730628769
    },
    {
        "content": "<p>Does <code>-1</code> mean <code>0</code> in the \"files modified\" and \"comments\" columns?</p>",
        "id": 480298783,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1730631871
    },
    {
        "content": "<p>I think it means \"no data\"</p>",
        "id": 480299184,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730632289
    },
    {
        "content": "<p>Which label would be clearest for you: \"-1\", \"???\" or \"no data\"? This is easy to change.</p>",
        "id": 480306763,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730639799
    },
    {
        "content": "<p>i think a simple <code>n/a</code> should be clear</p>",
        "id": 480306997,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1730640052
    },
    {
        "content": "<p>Can I braindump some queueboard requests here? If these are better as issues somewhere I can do that!</p>\n<ul>\n<li>Clicking on either an author or a label should not jump to github, but instead add that author or label to the search filter.</li>\n<li>\n<p>At <a href=\"https://jcommelin.github.io/queueboard/triage.html\">https://jcommelin.github.io/queueboard/triage.html</a>, both <code>these</code> links 404 in the line </p>\n<blockquote>\n<p><strong>28</strong>Â PRs are waiting on maintainer approval (<a href=\"https://jcommelin.github.io/queueboard/maintainers_quick.html/#all-maintainer-merge\">these</a>), of whichÂ <strong>21</strong>Â have not been updated in a day (<a href=\"https://jcommelin.github.io/queueboard/maintainers_quick.html/#stale-maintainer-merge\">these</a>)</p>\n</blockquote>\n</li>\n<li>\n<p>Could the \"entries per page\" selectors be sticky? (e.g. persisted via cookie?)</p>\n</li>\n</ul>",
        "id": 480390400,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1730708999
    },
    {
        "content": "<p>Can we make filters appear in the URL? That would be very useful for review parties, to share the list we are looking at</p>",
        "id": 480392682,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1730709900
    },
    {
        "content": "<p>Thanks for reporting: The 404s are fixed now.</p>",
        "id": 480402911,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730713143
    },
    {
        "content": "<p>The other ideas are good; I'd have to think how to implement them.</p>",
        "id": 480416077,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730717047
    },
    {
        "content": "<p>I have snippets of code around for persisting data in localStorage and encoding/decoding from URL so I could work on those or give pointers.</p>",
        "id": 480424646,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1730720212
    },
    {
        "content": "<p>PRs for these are very welcome; I'll be happy to review!</p>",
        "id": 480428656,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1730721762
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> I think now is a good time to add the above to the queueboard. Do you have a moment to share these snippets (and I can take it from there)? If you're feeling like it, I'll also review a PR instead :-)</p>",
        "id": 494652070,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737301217
    },
    {
        "content": "<p>Sure, I'll try and let you know either way by tomorrow!</p>",
        "id": 494652295,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737301422
    },
    {
        "content": "<p><del>Could we also a linkifier for <a href=\"https://jcommelin.github.io/queueboard/\">#queueboard</a> ?</del> Wait, I already asked for it a few weeks ago</p>",
        "id": 494661017,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1737308088
    },
    {
        "content": "<p>Turns out there was a built-in option to save the state of the tables in <code>localStorage</code>: <a href=\"https://github.com/jcommelin/queueboard/pull/64\">https://github.com/jcommelin/queueboard/pull/64</a></p>",
        "id": 494696677,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737333271
    },
    {
        "content": "<p>Fantastic!</p>",
        "id": 494717796,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1737348838
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> Sorry to ping you again: I thought about how to implement \"reading table states from an URL\" (so one could e.g. share one link for the triage meeting, which configures a table as desired). Your code snippet for reading parameters from a URL could be handy. Otherwise, I'll ask the internet, that's also fine :-)</p>",
        "id": 495024508,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737458311
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> Here's a very rough snippet (not tested) with functions for reading and writing parameters in a URL: <a href=\"https://gist.github.com/bryangingechen/a9a34a0092ccf3abfa56c5fda3f0ade2\">https://gist.github.com/bryangingechen/a9a34a0092ccf3abfa56c5fda3f0ade2</a></p>\n<p>Feel free to ping me again if there are any issues!</p>",
        "id": 495089121,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1737474992
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/fF3t-TeLpb42Oozf221UkLKR/image.png\">image.png</a><br>\nthese percentages appear to be calculated inconsistently (one relative, one absolute)<br>\nnot sure if this is an issue, but flagging it in case</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/fF3t-TeLpb42Oozf221UkLKR/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"739x303\" src=\"/user_uploads/thumbnail/3121/fF3t-TeLpb42Oozf221UkLKR/image.png/840x560.webp\"></a></div>",
        "id": 495174351,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1737507591
    },
    {
        "content": "<p>Thanks for the report. It should be relative percentages; a fix is coming shortly. Update: it's live now.</p>",
        "id": 495254139,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1737543635
    },
    {
        "content": "<p>Does anyone understand why <a href=\"https://github.com/leanprover-community/mathlib4/pull/21619\">#21619</a> is indicated as âCI is still runningâ? It is a trivial PR that never had any CI issue.</p>",
        "id": 498693998,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175624
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> <a href=\"https://github.com/leanprover-community/mathlib4/pull/15373\">#15373</a> appears in the list of quick tasks for maintainers but probably shouldnât since itâs actually awaiting author.</p>",
        "id": 498694485,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175806
    },
    {
        "content": "<p>Where do you see that? <a href=\"/user_uploads/3121/bfoeo7IS-PINYWCKdQOzKcC2/image.png\">Here</a> is all I'm seeing</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/bfoeo7IS-PINYWCKdQOzKcC2/image.png\" title=\"Here\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"3350x58\" src=\"/user_uploads/thumbnail/3121/bfoeo7IS-PINYWCKdQOzKcC2/image.png/840x560.webp\"></a></div>",
        "id": 498694556,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1739175831
    },
    {
        "content": "<p>This is not necessarily a queueboard bug, it can mean maintainers failed to do something.</p>",
        "id": 498694566,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175834
    },
    {
        "content": "<p>I see <br>\n<a href=\"/user_uploads/3121/4hC5vKJCWggKt3iNMaqz-aLj/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/4hC5vKJCWggKt3iNMaqz-aLj/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1906x281\" src=\"/user_uploads/thumbnail/3121/4hC5vKJCWggKt3iNMaqz-aLj/image.png/840x560.webp\"></a></div>",
        "id": 498694701,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175874
    },
    {
        "content": "<p>I see this at <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html\">https://jcommelin.github.io/queueboard/on_the_queue.html</a>, typing massot in the search box.</p>",
        "id": 498694826,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175922
    },
    {
        "content": "<p>YaÃ«l, since youâre here, donât hesitate to tell me if this lemma is already somewhere. I couldnât find it but I would happily get rid of this PR (and same with other two trivial PRs I opened yesterday).</p>",
        "id": 498695011,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739175987
    },
    {
        "content": "<p>Woah, I had not seen this page of the queueboard. And no I had never seen your lemma before, and loogling <code>(_ * _) ^ _ * _</code> gives nothing of interest</p>",
        "id": 498696059,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1739176319
    },
    {
        "content": "<p>Ok, maybe we should wait until Michael or <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span>  gets a chance to see this bug, and then merge the PR.</p>",
        "id": 498696477,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739176424
    },
    {
        "content": "<p>The PR also appears to be a <code>Draft</code> in the queueboard, although it never seems to have passed through that stage.</p>",
        "id": 498696879,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739176543
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/498694485\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"https://github.com/leanprover-community/mathlib4/pull/15373\">#15373</a> appears in the list of quick tasks for maintainers but probably shouldnât since itâs actually awaiting author.</p>\n</blockquote>\n<p>Thanks for asking; I'm taking a look now. To make sure I understand correctly, you're referring to <a href=\"https://github.com/leanprover-community/mathlib4/pull/15373\">#15373</a> being on the <a href=\"https://jcommelin.github.io/queueboard/maintainers_quick.html#stale-ready-to-merge\">stale ready-to-merge</a> dashboard?</p>",
        "id": 498699239,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177249
    },
    {
        "content": "<p>This is by design: that dashboard contains all PRs labelled ready-to-merge which have not been updated recently. (Usually, these are PRs which failed a bors batch, so a maintainer should retry them.)</p>",
        "id": 498699669,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177365
    },
    {
        "content": "<p>For this PR, there are probably several things to fix</p>\n<ul>\n<li>\n<p>the PR was never unlabelled ready-to-merge<br>\nThat can probably be fixed. <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span> <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> Does the recent change you made cover this/can it be extended to make this so? (A <code>bors r-</code> did not remove the ready-to-merge label; I would argue it should.)</p>\n</li>\n<li>\n<p>The PR failed CI and still does: the on the queue page shows it as passing, though. That's a bug, I'll look into that now.</p>\n</li>\n</ul>",
        "id": 498700175,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177508
    },
    {
        "content": "<p>Currently, the <code>bors r...</code> action does not know at all about <code>-</code>: it only acts on <code>bors r+</code>, ignoring <code>bors r-</code>.  Of course, this is easy to change!</p>",
        "id": 498701171,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739177787
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/498693998\">said</a>:</p>\n<blockquote>\n<p>Does anyone understand why <a href=\"https://github.com/leanprover-community/mathlib4/pull/21619\">#21619</a> is indicated as âCI is still runningâ? It is a trivial PR that never had any CI issue.</p>\n</blockquote>\n<p>The queueboard doesn't say there are CI issues, just \"last time we checked, CI was still running\". By now, CI has finished, of course.</p>\n<p>Short version: this is a known issue, which has a mitigation in-place. Better solutions welcome.<br>\nLong version: the queueboard relies on github saying \"this PR was updated\" to know when to download new data for a PR. There is no explicit notification for \"CI for this PR finished running\" (but for most other events, there is): so, it can happen that a \"CI just finished\" is missed. To mitigate this, the queueboard automatically asks for updated data after 60 minutes. Then, the information is updated.</p>",
        "id": 498701185,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177791
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/498701171\">said</a>:</p>\n<blockquote>\n<p>Currently, the <code>bors r...</code> action does not know at all about <code>-</code>: it only acts on <code>bors r+</code>, ignoring <code>bors r-</code>.  Of course, this is easy to change!</p>\n</blockquote>\n<p>I think that would be helpful.</p>",
        "id": 498701236,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177805
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/498694826\">said</a>:</p>\n<blockquote>\n<p>I see this at <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html\">https://jcommelin.github.io/queueboard/on_the_queue.html</a>, typing massot in the search box.</p>\n</blockquote>\n<p>Thanks for the clear instruction! I see the issue now. (The description right now lumps \"marked draft\", \"CI fails\" and \"CI still running\" into one. That's ... inaccurate at least. Will fix right now.)</p>",
        "id": 498701679,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177921
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/498701185\">said</a>:</p>\n<blockquote>\n<p>The queueboard doesn't say there are CI issues, just \"last time we checked, CI was still running\". By now, CI has finished, of course.</p>\n</blockquote>\n<p>Would it be possible to add a CI step after a successful run that \"pings\" the queueboard, updating the status?</p>",
        "id": 498701715,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739177931
    },
    {
        "content": "<p>One workaround could be to have a workflow add the awaiting-CI label on every push. Then, passing CI would remove that label, triggering an update.<br>\nBetter ideas welcome!</p>",
        "id": 498701847,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739177972
    },
    {
        "content": "<p>Update:</p>\n<ul>\n<li>I've fixed the strange labelling (\"marked as draft\"); the fix should be live now</li>\n<li><a href=\"https://github.com/leanprover-community/mathlib4/pull/15373\">#15373</a> actually always passed CI (it was just a bors batch that was cancelled) - so the classification was arguably correct</li>\n</ul>\n<p>From my side, everything looks as expected now. It would definitely be nice to make the bot also react to \"bors r-\". I'll look into a deeper fix for \"update CI\" status now.</p>",
        "id": 498718133,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1739182201
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/21636\">#21636</a> removes the <code>ready-to-merge</code> and <code>delegated</code> labels when the comment contains <code>bors r-</code> or <code>bors d-</code>.  Note that <code>bors d-</code> is not an actual bors command, but the \"local\" action still removes the label.</p>",
        "id": 498721606,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739183136
    },
    {
        "content": "<p>Thanks a lot Michael and Damiano. Iâm happy that my questions led you to improvements in our tooling.</p>",
        "id": 498748470,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1739190659
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/21645\">#21645</a> follows up the previous PR: it fixes a bug and should distinguish better between <code>bors d+</code>/<code>bors delegate</code> and <code>bors d-</code>.  It also adds support for <code>bors merge-</code>.</p>",
        "id": 498772817,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739196926
    },
    {
        "content": "<p>Since no change to CI is small enough to contain only countably many bugs, <a href=\"https://github.com/leanprover-community/mathlib4/pull/21676\">#21676</a> fixes yet another bug with <code>bors d-</code> removal of <code>delegated</code>.</p>",
        "id": 498987511,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739273569
    },
    {
        "content": "<p>I just tested the <code>bors r-</code>/<code>bors d-</code> actions and they appear to work!  Please, report if you notice any issue with them!</p>",
        "id": 499024480,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739284682
    },
    {
        "content": "<p>It has been a while since my last update comment. In the meantime, quite a bit of work has happened: let me highlight a few shiny new features.</p>\n<h2>Show the last real status change</h2>\n<p>If you attended my Lean together talk, you saw this one already: the queueboard grew two new columns, for showing when a given PR</p>\n<ul>\n<li>last changed its status (e.g. from waiting on the author to waiting for review),</li>\n<li>the total time a PR was waiting for review.<br>\nA very small share of PRs does not have this data (e.g., because downloading the necessary metadata would take too long to download), but in practice this works very well.</li>\n</ul>\n<h2>All open PRs</h2>\n<p>There is now <a href=\"https://jcommelin.github.io/queueboard/triage.html#all\">a dashboard</a> of all open PRs. Since yesterday, this dashboard is also linked on the main page. If you ever wanted to see all your PRs, or all PRs by somebody else, this is the place to go! The next feature makes this even more useful.</p>\n<h2>Saved table searches/ configure dashboards via the URL</h2>\n<p>Until now, there was no great way to save a dashboard's configuration. If you set a larger number of items per page, entered some search terms or chose some sorting, this was not really persistent. (The queueboard did save the last table configuration, but no more.) This has an end now: you can now tweak the page length, initial sorting and search terms by changing the URL you're visiting.</p>\n<p>A few examples what this can be used for:</p>\n<ul>\n<li>sort the <a href=\"https://leanprover-community.github.io/queue-redirect\">#queue</a> table by total time in review (in descending order): <a href=\"https://jcommelin.github.io/queueboard/review_dashboard.html?sort=10-desc#queue\">https://jcommelin.github.io/queueboard/review_dashboard.html?sort=10-desc#queue</a>. This might be a reasonable default for use in triage meetings. (You may want to check if a PR had recent activity: but the table contains this information at once glance.)</li>\n<li>\n<p>show all <code>t-differential geometry</code> PRs on the queue, sorted by ascending diff size and then by author: <br>\n<a href=\"https://jcommelin.github.io/queueboard/review_dashboard.html?search=t-differential%20geometry&amp;sort=diff-asc&amp;sort=author-asc#queue\">https://jcommelin.github.io/queueboard/review_dashboard.html?search=t-differential%20geometry&amp;sort=diff-asc&amp;sort=author-asc#queue</a></p>\n</li>\n<li>\n<p>why are my PRs not on the queue? <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html?search=grunweg&amp;length=100\">https://jcommelin.github.io/queueboard/on_the_queue.html?search=grunweg&amp;length=100</a> shows the status of all my PRs, on one page. (To tweak: replace <code>grunweg</code> by your github handle; 100 is the number of items shown per page. Omitting it shows 10 PRs by default.)</p>\n</li>\n<li><a href=\"https://jcommelin.github.io/queueboard/triage.html?search=kim-em&amp;sort=10-desc#all\">https://jcommelin.github.io/queueboard/triage.html?search=kim-em&amp;sort=10-desc#all</a> shows <em>all</em> open PRs by <code>kim-em</code>, sorted by total time waiting for review.</li>\n</ul>\n<p>The current code is an MVP version, i.e. there are some rough edges/known issues.</p>\n<ul>\n<li>currently, you can tweak the page length, initial sorting and search terms by changing the URl you're visiting. Further criteria are totally possible: let me know if there are any you'd find helpful.</li>\n<li>filtering currently always filters <em>all</em> tables on a page; there's no way yet to filter only a certain table (help welcome, see <a href=\"http://TODO!\">here</a> for details)</li>\n<li>the sorting configuration takes indices as default argument (the <code>10</code> you saw above was the 0-based column index, from the last). For some columns, I have defined human-readable names as stable aliasses already; the last few columns will follow soon.(Another complication is that a few less common tables have some columns omitted... so the current solution is not perfect yet. This will come in time.)</li>\n<li>there's no way yet to <em>generate</em> a URL for the current table: that's not hard to implement. In the mean-time, feel free to ask me any questions you have.</li>\n</ul>\n<p>Beyond these points, some natural future directions are</p>\n<ul>\n<li>more rigid filtering syntax: currently, \"kbuzzard\" finds all PRs where kbuzzard is an author, a reviewer or assignee. Writing \"author:kbuzzard\" could be a way to make this precise.</li>\n<li>support for filtering by one of multiple authors or multiple labels. (This would allow e.g. saving a \"list of all my favourite authors\", individually.)</li>\n</ul>\n<h2>Visual tweaks</h2>\n<p>Thanks for all the responses to the queueboard survey! Some features were quick to implement; this includes</p>\n<ul>\n<li>diff size is now coloured (green for insertions, red for deletions)</li>\n<li>the \"last update\" is shown more compactly: it only displays something of the form \"5 days ago\" (with the exact data available upon hover)</li>\n<li>the <a href=\"https://jcommelin.github.io/queueboard/on_the_queue.html\">\"on the queue page\"</a> shows a warning for PRs which are missing a topic label (i.e., <code>feat</code>ure PRs without a label <code>t-something</code>) </li>\n<li>hovering above a PR number shows its github branch<br>\nWe would also like to make this copy-pastable, but are not sure about the best option yet. If you have a suggestion, we'd like to hear it!</li>\n</ul>\n<h2>Smaller changes</h2>\n<p>Some smaller changes include</p>\n<ul>\n<li>changed in mathlib CI: delegated PRs have their maintainer-merge label removed (making the maintainer merge dashboard less cluttered)</li>\n<li>refactored: the computation of \"last updated\" and \"total time in review\" is now performed during preprocessing: in particular, external tools consuming the .json files have access to this as well.</li>\n<li>added a field \"first time on the queue\" to the aggregate data (which is only implicitly exposed, through the line \"88 PRs appeared on the review queue within the last two weeks\" <a href=\"https://jcommelin.github.io/queueboard/triage.html#review-status\">here</a>)</li>\n<li>changed: stale unassigned PRs now uses the last status change as threshold for staleness, as opposed to github's \"last update\" (commit). I think this is better; there is certainly room to fine-tune this.</li>\n<li>significant effort was put into making the data collection more robust. One piece of infrastructure is missing: re-downloading a PR's metadata once its CI finishes (<a href=\"https://github.com/jcommelin/queueboard/pull/91\">queueboard#91</a>).</li>\n</ul>",
        "id": 503290118,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1741100563
    },
    {
        "content": "<p><span aria-label=\"alert\" class=\"emoji emoji-1f6a8\" role=\"img\" title=\"alert\">:alert:</span> PSA <span aria-label=\"alert\" class=\"emoji emoji-1f6a8\" role=\"img\" title=\"alert\">:alert:</span> The queueboard has moved: <a href=\"https://leanprover-community.github.io/queueboard/\">https://leanprover-community.github.io/queueboard/</a></p>",
        "id": 506086277,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1742202592
    },
    {
        "content": "<p>Zulip linkifier updated. Old web address now hosts a redirect.</p>",
        "id": 506090253,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1742203525
    },
    {
        "content": "<p>To everybody who cloned the repository locally: please remember to update your configuration to change the upstream location. (There is a new placeholder repository, with just a redirect - which would confuse git otherwise.)</p>",
        "id": 506095192,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1742204657
    },
    {
        "content": "<p>Where does the JSON fuelling my upstreaming dashboards live now? The following line is failing now: <a href=\"https://github.com/YaelDillies/Toric/blob/master/scripts/upstreaming_dashboard.py#L15\">https://github.com/YaelDillies/Toric/blob/master/scripts/upstreaming_dashboard.py#L15</a></p>",
        "id": 506108884,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1742207771
    },
    {
        "content": "<p>Is it the same thing but <code>leanprover-community/queueboard</code> instead of <code>jcommelin/queueboard</code> ?</p>",
        "id": 506109039,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1742207817
    },
    {
        "content": "<p>By the way: these json files recent got <em>a bit</em> larger, as we're adding additional metadata (PR descriptions, users who commented etc.) for displaying this information also. If that size poses an issue, we can think about creating files with just a subset of this information.</p>",
        "id": 506109686,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1742207971
    },
    {
        "content": "<p>For now it works great! (today was the first day any of my many upstreaming dashboards failed to build)</p>",
        "id": 506110190,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1742208089
    },
    {
        "content": "<p>Two new features have arrived in the queueboard:</p>\n<ul>\n<li>\n<p>searching a list of PRs also searches the PR description<br>\nJohan and I think this is a reasonable default, which coincidentally matches what github does. If you'd like a way to opt out, let us know - it wouldn't be hard to implement.</p>\n</li>\n<li>\n<p>you can search for PRs you commented on or reviewed: for each PR, we compute all users who commented on or reviewed this PR; searching a list of PRs also searches this list.</p>\n</li>\n</ul>\n<p>Fixed: sorting by diff size works again (a change a week ago broke this).</p>",
        "id": 506158692,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1742219717
    },
    {
        "content": "<p>Another update:</p>\n<ul>\n<li>Searching all PRs I commented on by default makes finding \"my PRs\" harder: to compensate, I added a mild hack. Searching for <code>author:grunweg</code> will find all PRs whose author is grunweg. (If you need this for other columns, reach out --- this <em>can</em> be implemented in a more general way.)</li>\n<li>Searching for <code>t-algebra$</code> as part of your query will return all PRs whose label is <code>t-algebra</code> --- without false positives from <code>t-algebraic-geometry</code>. (I believe <span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span> mentioned this a while ago.)</li>\n<li>You can now search the files a PR modifies: simply search for the file name. (Small caveat: we only return the first 100 files a PR changes. If a PR modifies more files, this search will miss some of the files. Such PRs are rare, though.)</li>\n</ul>",
        "id": 506441094,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1742293844
    },
    {
        "content": "<p>And another one:</p>\n<ul>\n<li>all columns now have a stable \"human-readable name\" for the purposes of sorting: for instance, you can now use <code>review_dashboard.html?sort=totalTimeReview-desc#queue</code> to get a reasonable shared view for mathlib triage meetings</li>\n<li>I added a blob of user-facing documentation <a href=\"https://leanprover-community.github.io/queueboard/index.html#tips-and-tricks\">to the main page</a>. <em>Please</em> let me know if anything is unclear or missing. (And if you're a better graphics designer, PRs for the formatting are also welcome.)</li>\n</ul>",
        "id": 506667638,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1742374033
    },
    {
        "content": "<p>I'd like to celebrate a small milestone with you: in the past months, I have been backfilling metadata for all closed PRs. To the best of my knowledge, this process is now <strong>complete</strong>: the repository has data for all mathlib4 PRs, past and present.</p>",
        "id": 515573685,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1746130275
    },
    {
        "content": "<p>This is nice opportunity to say: Thank you <em>so</em> much for all the work you are doing for the community!</p>",
        "id": 515576829,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1746131469
    },
    {
        "content": "<p>I notice that there are a few PRs that are on the <a href=\"https://leanprover-community.github.io/queue-redirect\">#queue</a>, yet have unresolved conversations in their discussion threads.</p>\n<ul>\n<li>Do we ever want PRs like this to be on the queue?</li>\n<li>If not, is it easy/possible to add a condition to the queueboard website to only put PRs on the queue if all discussions are resolved?</li>\n<li>Barring that, should we be uniformly tagging these PRs as awaiting-author or awaiting-zulip or something?</li>\n</ul>",
        "id": 518215246,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1747290236
    },
    {
        "content": "<p>Yes, no, no. Basically, it is important to keep some discussions open when they provide extra context for the PR or contain hints towards future work. Prematurely resolving conversations can lead to several reviewers asking the same question.</p>",
        "id": 518215665,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1747290410
    },
    {
        "content": "<p>What do you mean by \"unresolved conversations\"? Sometimes when the reviewer asks a question I would respond but not press the \"resolve\" button because I am not sure if the reviewer is happy with the answer but it is no longer \"awaiting-author\" so I will put it back on the queue. Do these count as unresolved?</p>",
        "id": 518215730,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747290429
    },
    {
        "content": "<blockquote>\n<p>keep some discussions open when they provide extra context for the PR or contain hints towards future work</p>\n</blockquote>\n<p>Though arguably these should not live in some obscure review comment that is hard to find once the PR is merged, but in the PR message or in the docstring.</p>",
        "id": 518215949,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1747290522
    },
    {
        "content": "<p>Yes of course, but it is not always clear upfront what is and isn't worth recording. I think it's counter-productive to set strict boundaries like that</p>",
        "id": 518216051,
        "sender_full_name": "YaÃ«l Dillies",
        "timestamp": 1747290570
    },
    {
        "content": "<p>I think we should just become more dilligent at labelling PRs correctly. (That way, the queueboard picks them up correctly, and that's a sure way to signal which kind of comment this is.)<br>\nThat is: if a conversation is unresolved and waiting on author action, I think we should tag the PR with awaiting-author. If it needs a zulip discussion, it should be awaiting-zulip. If it's just open for context, we can leave as-is. Determining which is which can be a judgement call.</p>",
        "id": 518217571,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1747291193
    },
    {
        "content": "<p>The queueboard just gained a few feature (courtesy of <span class=\"user-mention\" data-user-id=\"112680\">@Johan Commelin</span> and some AI help): there is now a <a href=\"https://leanprover-community.github.io/queueboard/dependency_dashboard.html\">dashboard</a> showing the dependency structure between pull requests. There is some clustering, colour-coding (into no deps, blocked and draft/WIP), you can search for theorem number, name, labels, authors etc. Enjoy!</p>",
        "id": 531862706,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1753886970
    },
    {
        "content": "<p>Very cool. However, dragging a PR around seems to make all the other PR clusters move away from the origin.</p>",
        "id": 531919581,
        "sender_full_name": "Joscha Mennicken",
        "timestamp": 1753905637
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span> I just noticed the queueboard update job has been failing for ~12 hours since the generated <code>processed_data/all_pr_data.json</code> is now &gt;100MB and is too large for github: <a href=\"https://github.com/leanprover-community/queueboard/actions/runs/17115642373/job/48545858368#step:10:9\">https://github.com/leanprover-community/queueboard/actions/runs/17115642373/job/48545858368#step:10:9</a></p>\n<p>The queueboard is going to be stuck until we're able to revive that job (which I've disabled manually for now). Since you're on vacation, do you want me to take a stab at this? I'm thinking of just doing something quick and dirty with <code>split</code> to break up the giant JSON file into several pieces before we try to commit, and then make sure we reassemble those pieces again before we try to use it.</p>",
        "id": 535420767,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1755745862
    },
    {
        "content": "<p>Another band-aid is not generating that file, iirc it is not used for the final output.</p>",
        "id": 535439854,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1755758871
    },
    {
        "content": "<p>Help is very welcome. Thank you!</p>",
        "id": 535440028,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1755758953
    },
    {
        "content": "<p>I can take a detailed look on Monday, when I'm back.</p>",
        "id": 535464881,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1755768796
    },
    {
        "content": "<p>I just checked how <code>all_pr_data.json</code> is used:</p>\n<ul>\n<li>the main dashboards do not use it at all</li>\n<li>the data integrity check uses it to find PRs which are closed now, but not yet marked as such (this could probably be removed)</li>\n<li>a (hidden by default) assignment statistics page also counts assignments of closed PRs</li>\n</ul>\n<p>In particular, I <em>could</em> rewrite everything to no longer use that file at all.</p>",
        "id": 535502337,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1755782137
    },
    {
        "content": "<p>(And e.g. add an option to <code>process.py</code> to also update that file, whenever somebody wants to use it for data analyses.)</p>",
        "id": 535502467,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1755782168
    },
    {
        "content": "<p>If we want to keep it, a more semantic split could be to create a file <code>all_pr_data-1.json</code> with the first 10,000 PRs' data, <code>all_pr_data-2.json</code> with the second batch, etc. This way, each file stays valid json and at a reasonable size.</p>",
        "id": 535502591,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1755782218
    },
    {
        "content": "<p>Ah, while you were writing your comments I've already pushed my quick and dirty fix in <a href=\"https://github.com/leanprover-community/queueboard/pull/104\">queueboard#104</a> (and follow-up <a href=\"https://github.com/leanprover-community/queueboard/pull/105\">queueboard#105</a> to make the scripts use the split files instead).</p>",
        "id": 535504637,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1755782873
    },
    {
        "content": "<p>Hello queueboard fans! I'd like to give an update on work-in-progress on the queueboard, and also see if there is anyone in the community who might be able to give advice on data-driven app design / review PRs.</p>\n<p>As one of my responsibilities the Mathlib Initiative, and with lots of advice from Johan and Michael, I've been working over the past few weeks on a plan to move the queueboard from the current GitHub actions + GitHub repo based architecture to a more standard database-backed web app with hosting that the MI will pay for. This will have lots of advantages:</p>\n<ul>\n<li>the <a href=\"https://github.com/leanprover-community/queueboard\">queueboard repo</a> is already tens of GB in size (and growing), making git operations very slow</li>\n<li>we are already hitting rate limits trying to scrape data from GitHub; having an app which can schedule / backfill queries from GitHub and (eventually) listen for webhooks will be much more efficient</li>\n<li>a new architecture will also enable faster updates (current latency is 15 minutes)</li>\n</ul>\n<p>More details on the current planned architecture of v2 is at <a href=\"https://github.com/leanprover-community/queueboard-core/pull/33\">queueboard-core#33</a>, but basically, I think we'll need something with the following modules, which roughly correspond to parts of the existing <a href=\"https://github.com/leanprover-community/queueboard-core/blob/dfcb67c86984e21a5c5109b09f8e0517c736cd3e/ARCHITECTURE.md\">architecture</a>:</p>\n<ul>\n<li>a syncer in charge of getting data from GitHub and putting the raw data into the database</li>\n<li>an \"analyzer\" in charge of computing analytics from the raw data and putting those into analytics tables</li>\n<li>an API which will serve data from the database to the frontend</li>\n</ul>\n<p>I've decided to try and build this new backend as a <a href=\"https://www.djangoproject.com/\">Django project</a>, with separate apps for the modules above; this is mostly because the queueboard is already mostly written in Python (and because I have a smidgen of experience with it). </p>\n<p>Let me say now that while I've been a user of this kind of analytics web app before, I've never built one before, so at the moment I'm doing my best with django tutorials and advice from AI. What I have so far is at <a href=\"https://github.com/leanprover-community/queueboard/pull/59\">queueboard#59</a>, which adds a django project skeleton. Here we'd like to reach out to the community -- if you have experience with this sort of thing and are willing to help review PRs / provide advice, please reply here or DM me! Feel free of course to comment on the open PRs at <a href=\"https://github.com/leanprover-community/queueboard-core\">queueboard-core</a> too!</p>",
        "id": 541832674,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1759001096
    },
    {
        "content": "<p>I have experience with Django, but not much time.</p>",
        "id": 541874897,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1759048343
    },
    {
        "content": "<p>I left some comments on <a href=\"https://github.com/leanprover-community/queueboard-core/pull/33\">queueboard-core#33</a>.  Feel free to reach out if you have questions. I won't have time to write code, but I have experience with Django and am happy to answer questions.</p>",
        "id": 541876415,
        "sender_full_name": "Christian Merten",
        "timestamp": 1759049917
    },
    {
        "content": "<p>sorry if this suggestion was raised before: I find the view at <a href=\"https://leanprover-community.github.io/queueboard/on_the_queue.html\">https://leanprover-community.github.io/queueboard/on_the_queue.html</a> with my username in the search field very useful to monitor progress. But if I Ctrl-R, the search is gone.</p>\n<p>It would be useful if the search box content was reflected in the url (in the <code>#â¦</code> part), so that this can be reloaded/bookmarked/shared more easily.</p>",
        "id": 543516900,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1759839609
    },
    {
        "content": "<p>I think this might be <a href=\"https://github.com/leanprover-community/queueboard-core/pull/10\">queueboard-core#10</a>. I've been mostly working on the v2 backend, but I can take a look at some frontend stuff like this this week.</p>",
        "id": 543518964,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1759840192
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 543522127,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1759841044
    },
    {
        "content": "<p>In tips and tricks <a href=\"https://leanprover-community.github.io/queueboard/\">here</a> it mentions that you can get this by using a URL like <a href=\"https://leanprover-community.github.io/queueboard/on_the_queue.html?search=jcommelin&amp;length=100\">this</a> (but I agree that from a front-end perspective it should be a # fragment not a query and be automatic)</p>",
        "id": 543616654,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1759869089
    },
    {
        "content": "<p>I have a first version of a new feature where making changes to queueboard settings will automatically update the URL at <a href=\"https://github.com/leanprover-community/queueboard-core/pull/66\">queueboard-core#66</a>. I'm still doing some final testing, but before deploying, I wanted to mention a few possibly controversial choices I made:</p>\n<ul>\n<li>After this change, whenever you make a change to either the search, page length (number of rows per page), or column ordering settings, they will be reflected in the URL.</li>\n<li>We don't have per-table settings yet so if you load a URL with settings, they will be applied to all tables on the page</li>\n<li>The back and forward buttons should work to navigate to previous states stored in the URL</li>\n<li>changes to the search settings are debounced; the search parameter in the URL will only be updated after 500ms without any changes</li>\n<li>I decided to stick with putting the params in the query string rather than a fragment because sometimes we also want to link to specific tables using the fragment (maybe there are clever ways to support both but I couldn't find any quickly)</li>\n</ul>\n<p>Please let me know if you feel strongly about any of the above, or have any other comments!</p>",
        "id": 544809218,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1760464776
    },
    {
        "content": "<p>The above change making it so the <a href=\"https://leanprover-community.github.io/queueboard/\">#queueboard</a> URL automatically updates when searching, sorting, or changing page length settings is now live! Please let me know if anything is broken!</p>",
        "id": 544976583,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1760536821
    },
    {
        "content": "<p>I just looked over the js-only changes, and they look good to me. Testing the queueboard changes, everything appears to work well. (If I find a bug, I'll report it, of course.)<br>\nThanks a lot for implementing this, this is really nice!</p>",
        "id": 545003375,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1760543248
    },
    {
        "content": "<p>Actually, I have one idea/small request: can you update the \"tips and tricks\" section on the main page to mention this fact, that a page URL is updated automatically --- so you can mostly \"generate\" your URL by making the dashboard configuration you want and then copying the URL?</p>",
        "id": 545003637,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1760543327
    },
    {
        "content": "<p>Good idea! I'll do that now.</p>",
        "id": 545003732,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1760543351
    },
    {
        "content": "<p>I've opened <a href=\"https://github.com/leanprover-community/queueboard-core/pull/67\">queueboard-core#67</a>; not sure about the wording, so suggestions welcome!</p>",
        "id": 545006305,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1760544034
    },
    {
        "content": "<p>I suggested some tweaks (and like the general gist of it)!</p>",
        "id": 545007555,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1760544393
    },
    {
        "content": "<p>Minor remark about the queueboard: several PR's (including one of mine) are listed on the queueboard as having a \"WIP\" tag, when in fact the tag has previously been removed:</p>\n<p><a href=\"https://leanprover-community.github.io/queueboard/review_dashboard.html?search=WIP\">https://leanprover-community.github.io/queueboard/review_dashboard.html?search=WIP</a></p>\n<p>(This seems all the more strange given that PR's which actually <em>do</em> have a WIP tag don't appear on the queueboard at all, so somehow the queueboard simultaneously knows and doesn't know that these PR's have been untagged...)</p>",
        "id": 563334249,
        "sender_full_name": "David Loeffler",
        "timestamp": 1765522493
    },
    {
        "content": "<p>(Note that the removal of the WIP label from <a href=\"https://github.com/leanprover-community/mathlib4/pull/30089\">#30089</a> on github was four days ago, so this is not just a time-lag issue.)</p>",
        "id": 563334752,
        "sender_full_name": "David Loeffler",
        "timestamp": 1765522793
    },
    {
        "content": "<p>Thanks! I noticed something similar a few days ago. Bryan has been working on designing and implementing a new backend for the queueboard that will scale better. When the frontend is switched over to the new backend, my hope is that this bug will also magically be solved. Should happen in a matter of days.</p>",
        "id": 563335740,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1765523404
    },
    {
        "content": "<p>Similar report on <a href=\"https://github.com/leanprover-community/mathlib4/pull/26923\">#26923</a>, where the <code>merge-conflict</code> report has been removed three days ago, but still shows up in the queueboard. It just looks like the info of the queueboard (at leat on this PR) has not been updated recently. Let's wait for the improved queueboard, hoping it fixes everything!</p>",
        "id": 563499381,
        "sender_full_name": "SÃ©bastien GouÃ«zel",
        "timestamp": 1765552917
    },
    {
        "content": "<p>Sorry for the issues with the outdated data. I'll try and revert some changes I made while I work out what's going on.</p>",
        "id": 563502471,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1765553697
    },
    {
        "content": "<p>I had a look and it looks like the initial cause is that there was some extended downtime Dec 8-9 (related to some changes I made) which led to ~140 PRs to end up with outdated data. The queueboard scripts are supposed to gradually re-download data for outdated PRs but for some reason I don't understand yet it's not really making progress. I'll look a bit more, but if I don't figure it out I will switch to getting the new backend ready (currently everything is finally connected, but the queue computation is completely wrong).</p>",
        "id": 563563555,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1765574654
    },
    {
        "content": "<p>Hi everyone -- the new backend for the queueboard is finally just about ready to use in production. I'm planning to swap the current <a href=\"https://leanprover-community.github.io/queueboard/\">#queueboard</a> with this <a href=\"https://leanprover-community.github.io/queueboard/test-rule-set-1/\">test site</a> in a few days. Note that the frontend webpages are still the same, only the data source has changed.</p>\n<p>Please take a look if you have a chance and let me know if anything is broken!</p>\n<p>Known differences:</p>\n<ul>\n<li>the new backend is updated more frequently, so there may be discrepancies in labels / open-closed status when the old queueboard is using outdated PR data</li>\n<li>GitHub deletes CI logs after a little more than a year, so the new backend is missing CI data for old PRs</li>\n<li>\"total time in review\" and (to a lesser extent) \"last status change\" are fairly sensitive to historical data about the status of PRs, so the points above can lead these data points to differ</li>\n<li>There are still some differences in how PR statuses are computed for PRs that are not on the queue, so the numbers on <a href=\"https://leanprover-community.github.io/queueboard/triage.html\">the triage page</a> and the pie chart will not match (I'm investigating this still)</li>\n</ul>",
        "id": 567598028,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768238620
    },
    {
        "content": "<p>The <a href=\"https://leanprover-community.github.io/queueboard/\">#queueboard</a> is now using the new backend by default!</p>\n<p>I've kept the old backend running for now; you can view the queueboard populated with that data at: <a href=\"https://leanprover-community.github.io/queueboard/legacy\">https://leanprover-community.github.io/queueboard/legacy</a></p>",
        "id": 567892929,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768357704
    },
    {
        "content": "<p>That is great news! The sad thing about replacing the backend is that doing the best possible job will mean nobody notices a thing. But the new backend really is a big improvement that allows many more features in the future and I am grateful to Bryan for doing this work!</p>",
        "id": 567964758,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1768390891
    },
    {
        "content": "<p>As the main author of the old backend, I am really really happy about the work Bryan is doing. This is very fiddly technical work, which is easy to get wrong and has little reward when getting it right (\"nobody notices\"). The old architecture was working to a point, but certain big improvements were very hard to achieve. I'm hopeful that the new design will even the queueboard to have e.g. drastically lower latency and be useful in other ways previously impossible!</p>",
        "id": 567969248,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768392006
    },
    {
        "content": "<p>Is there a way to ingest or backfill old PR data from the old backend into the database? (Yes, this would be a lot of effort. Perhaps it's worth it, for a one-time migration.)</p>",
        "id": 567969449,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768392076
    },
    {
        "content": "<p>For historical trends, this could be interesting!</p>",
        "id": 567969489,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768392085
    },
    {
        "content": "<p>Thanks for the kind comments!</p>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/567969449\">said</a>:</p>\n<blockquote>\n<p>Is there a way to ingest or backfill old PR data from the old backend into the database? (Yes, this would be a lot of effort. Perhaps it's worth it, for a one-time migration.)</p>\n</blockquote>\n<p>It should be possible to do this -- not sure when I'll get to it but it's on my list!</p>",
        "id": 567971783,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768392863
    },
    {
        "content": "<p>Can you explain what changed, and maybe if there's something the community can help with? <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span><br>\nAFAIK the previous backend worked by having GH actions that query the GH API and dump jsons to disk, then the website is a python script that converts the jsons to html</p>",
        "id": 567975485,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1768394041
    },
    {
        "content": "<p>1-line summary: It's now backed by an honest sql database hosted on Heroku.</p>",
        "id": 567978701,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1768395090
    },
    {
        "content": "<p>I looked at the first five PRs in the <a href=\"https://leanprover-community.github.io/queue-redirect\">#queue</a>, and compared their data:</p>\n<ul>\n<li>the new data for <a href=\"https://github.com/leanprover-community/mathlib4/pull/27100\">#27100</a> is missing two initial time windows when it was waiting for review. The first is indeed a mistake in the new algorithm; I don't see the second in the PR history any more; this could be explained by new data downloaded after the force-push.</li>\n<li>the other data differs only in minor ways</li>\n</ul>",
        "id": 567979413,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768395288
    },
    {
        "content": "<p>I have two comments about presenting the detailed times when a PR was on the queue, i.e. the format of the tooltip when hovering over this:</p>\n<ul>\n<li>in the new dashboard, a timespan is shown as <code>2025-11-26T03:22:49+00:00 â 2026-01-14T12:30:49.087553+00:00</code> --- can you remove the <code>+00:00</code>? I find these more visually distracting than helpful</li>\n<li>the old tooltip also displayed this as a human-readable value, as in <code>(1 month)</code>; how difficult is it to add this back?</li>\n<li>I also like the old <code>from ... to ...</code> and <code>since ...</code> phrasing; I'm not attached to the <code>from ... to</code> but find the <code>since</code> helpful. What do you think?</li>\n</ul>",
        "id": 567980064,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768395499
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"933054\">Snir Broshi</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/567975485\">said</a>:</p>\n<blockquote>\n<p>Can you explain what changed, and maybe if there's something the community can help with? <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span><br>\nAFAIK the previous backend worked by having GH actions that query the GH API and dump jsons to disk, then the website is a python script that converts the jsons to html</p>\n</blockquote>\n<p>3-line summary: the new backend is a Django app (under <code>qb_site</code> in the <a href=\"https://github.com/leanprover-community/queueboard-core\">queueboard-core</a> repo) that runs on heroku. It is constantly scraping repo data into a Postgres database and then processing it to compute things like when PRs are on the queue. For now we're still using the same frontend pages, so that app is just serving the queue data as a JSON file that GitHub actions fetches every once in a while to build the HTML pages.</p>\n<p>For the moment, what everyone can help with is reporting issues / feature requests here or in <a href=\"https://github.com/leanprover-community/queueboard-core/issues\">the queueboard-core repo issues</a>!</p>",
        "id": 567980252,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768395557
    },
    {
        "content": "<p>I'm happy to help by tweaking the tooltip, if you tell me the current location of the code. (If you agree with that, of course: it looks like you chose to change this.)</p>",
        "id": 567980596,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768395660
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/567979413\">said</a>:</p>\n<blockquote>\n<p>I looked at the first five PRs in the <a href=\"https://leanprover-community.github.io/queue-redirect\">#queue</a>, and compared their data:</p>\n<ul>\n<li>the new data for <a href=\"https://github.com/leanprover-community/mathlib4/pull/27100\">#27100</a> is missing two initial time windows when it was waiting for review. The first is indeed a mistake in the new algorithm; I don't see the second in the PR history any more; this could be explained by new data downloaded after the force-push.</li>\n<li>the other data differs only in minor ways</li>\n</ul>\n</blockquote>\n<p>Regarding <a href=\"https://github.com/leanprover-community/mathlib4/pull/27100\">#27100</a>, it does look like there are issues with computing queue history from before force pushes. I'll take a closer look.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/567980064\">said</a>:</p>\n<blockquote>\n<p>I have two comments about presenting the detailed times when a PR was on the queue, i.e. the format of the tooltip when hovering over this:</p>\n<ul>\n<li>in the new dashboard, a timespan is shown as <code>2025-11-26T03:22:49+00:00 â 2026-01-14T12:30:49.087553+00:00</code> --- can you remove the <code>+00:00</code>? I find these more visually distracting than helpful</li>\n<li>the old tooltip also displayed this as a human-readable value, as in <code>(1 month)</code>; how difficult is it to add this back?</li>\n<li>I also like the old <code>from ... to ...</code> and <code>since ...</code> phrasing; I'm not attached to the <code>from ... to</code> but find the <code>since</code> helpful. What do you think?</li>\n</ul>\n</blockquote>\n<p>Yes, I think it shouldn't be hard to change the formatting of the tooltip here; I can probably do this quickly. One conscious change here though is that the new queueboard only shows up to the last 5 windows in the tooltip to avoid having to fetch all queue windows for all PRs.</p>",
        "id": 567980809,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768395740
    },
    {
        "content": "<p>Thanks! IIRC, github does not notify you directly of force pushes, so keeping the data updated in their presence was already tricky. (How are you solving this now? I was cross-checking with REST API call data, which worked, but was of course a hack.) I wouldn't be surprised if there are further pitfalls.</p>",
        "id": 567981178,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768395849
    },
    {
        "content": "<p>Oh -- I wasn't aware that github didn't send notifications for force pushes. However, as long as a force push causes <code>updatedAt</code> for the PR to change, the syncer task will fetch (among other things) <a href=\"https://github.com/leanprover-community/queueboard-core/blob/master/qb_site/syncer/queries/pr_bundle.graphql#L127\">all force push events</a> since the last sync; I think that should keep things there up to date.</p>",
        "id": 567982311,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768396203
    },
    {
        "content": "<p>I don't think force-pushes change the <code>updatedAt</code> field. (That's what I meant to say.)</p>",
        "id": 567990584,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768398676
    },
    {
        "content": "<p>You can probably trigger a webhook upon force-pushes, though --- so there is a way to enqueue a re-download.</p>",
        "id": 567990668,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768398699
    },
    {
        "content": "<p>I believe mere title changes (also edits to the PR description) may also not change that field. I don't remember exactly; I may have documented this somewhere in one of the issues for migrating to just the aggregating data.</p>",
        "id": 567992705,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768399269
    },
    {
        "content": "<p>Is there an easy way to say \"this data for this PR looks outdated, please re-sync\"? (The old backend used a text file... it was a hack, but worked well.)</p>",
        "id": 567992865,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768399309
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/567990584\">said</a>:</p>\n<blockquote>\n<p>I don't think force-pushes change the <code>updatedAt</code> field. (That's what I meant to say.)</p>\n</blockquote>\n<p>I was worried about this so I checked by force pushing to one of my PRs (<a href=\"https://github.com/leanprover-community/mathlib4/pull/33044\">#33044</a>); it looks like the syncer did successfully detect the change and update the PR data though.</p>",
        "id": 567993374,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768399391
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/567980064\">said</a>:</p>\n<blockquote>\n<p>I have two comments about presenting the detailed times when a PR was on the queue, i.e. the format of the tooltip when hovering over this:</p>\n<ul>\n<li>in the new dashboard, a timespan is shown as <code>2025-11-26T03:22:49+00:00 â 2026-01-14T12:30:49.087553+00:00</code> --- can you remove the <code>+00:00</code>? I find these more visually distracting than helpful</li>\n<li>the old tooltip also displayed this as a human-readable value, as in <code>(1 month)</code>; how difficult is it to add this back?</li>\n<li>I also like the old <code>from ... to ...</code> and <code>since ...</code> phrasing; I'm not attached to the <code>from ... to</code> but find the <code>since</code> helpful. What do you think?</li>\n</ul>\n</blockquote>\n<p>The tooltips should now be closer to their previous behavior (after <a href=\"https://github.com/leanprover-community/queueboard-core/pull/119\">queueboard-core#119</a> and <a href=\"https://github.com/leanprover-community/queueboard-core/pull/120\">queueboard-core#120</a>). Let me know if there's something I missed!</p>",
        "id": 568044665,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768412274
    },
    {
        "content": "<p>From that I tried, this looks great. Thanks for the quick response!</p>",
        "id": 568080345,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768424796
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/32600\">#32600</a> appears to be have missing metadata. It's only one commit, so I'm not sure what went wrong. Can you re-sync?</p>",
        "id": 568080455,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1768424839
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/568080455\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/32600\">#32600</a> appears to be have missing metadata. It's only one commit, so I'm not sure what went wrong. Can you re-sync?</p>\n</blockquote>\n<p>I re-synced the PR but It looks like the data is already up to date. However, there is a force-push in the history which appears to be breaking the queue computation. I'll investigate.</p>",
        "id": 568098152,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768433183
    },
    {
        "content": "<p>6 messages were moved from this topic to <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/upsteraming.20dashboard/with/568098192\">#mathlib4 &gt; upsteraming dashboard</a> by <span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span>.</p>",
        "id": 568098193,
        "sender_full_name": "Notification Bot",
        "timestamp": 1768433219
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/33893\">#33893</a> does currently not show up on <a href=\"https://leanprover-community.github.io/queue-redirect\">#queue</a>, even though it has a green check mark and no \"awaiting-author\" label. What should I do to make it appear?</p>",
        "id": 568513475,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1768593573
    },
    {
        "content": "<p>Usually when this happens I wait ~a day and it shows up</p>",
        "id": 568514506,
        "sender_full_name": "Artie Khovanov",
        "timestamp": 1768593928
    },
    {
        "content": "<p>Shouldn't the new version be faster with updates?</p>",
        "id": 568514708,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1768593994
    },
    {
        "content": "<p>The <a href=\"https://leanprover-community.github.io/queueboard/on_the_queue.html?search=33893\">why is my PR not on the queue</a> page says that the queueboard backend is missing CI information from the PR. There may be an issue with the syncing. I'm traveling now but I'll try and take a look when I have a chance.</p>",
        "id": 568515096,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768594143
    },
    {
        "content": "<p>I tried manually syncing the data a few ways and it looks like your PR is back on the queue now. I've made a note of it and will try and figure out what went wrong.</p>",
        "id": 568517650,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1768595115
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 568517738,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1768595151
    },
    {
        "content": "<p>Do you have an estimate of the delay between queueboard updates? I have acted on several PRs this morning (delegating or merging them or adding the awaiting author tag) but they still show up on my queue with the same state they had before.</p>",
        "id": 569361102,
        "sender_full_name": "SÃ©bastien GouÃ«zel",
        "timestamp": 1769031333
    },
    {
        "content": "<p>It's supposed to be around 10 minutes or so but it looks like there is an issue with the queue syncing at the moment. <del>Could you check the legacy queueboard and see if it's more up to date: <a href=\"https://leanprover-community.github.io/queueboard/legacy/\">https://leanprover-community.github.io/queueboard/legacy/</a> ? I may switch the queueboard back to the old one tonight if I can't figure out what's going on quickly.</del></p>\n<p><strong>edit</strong>: I'm in the process of switching the <a href=\"https://leanprover-community.github.io/queueboard/\">#queueboard</a> back to the old backend temporarily while I investigate this. After the change goes live (probably within half an hour or so), the queueboard using the new backend will be accessible at <a href=\"https://leanprover-community.github.io/queueboard/test-rule-set-1\">https://leanprover-community.github.io/queueboard/test-rule-set-1</a></p>",
        "id": 569367951,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1769033938
    },
    {
        "content": "<p>I think I tracked down the issue causing PRs not to get synced so I've swapped the <a href=\"https://leanprover-community.github.io/queueboard/\">#queueboard</a> back to the new backend. Please don't hesitate to post here if you notice any issues! As before, the old queueboard is available at <a href=\"https://leanprover-community.github.io/queueboard/legacy\">https://leanprover-community.github.io/queueboard/legacy</a> in case of emergency.</p>",
        "id": 570683490,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1769645598
    },
    {
        "content": "<p>I believe I have four PRs available for review, but I only see two of them on the queueboard. I see <a href=\"https://github.com/leanprover-community/mathlib4/pull/31891\">#31891</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/33928\">#33928</a> there, but not <a href=\"https://github.com/leanprover-community/mathlib4/pull/30981\">#30981</a> or <a href=\"https://github.com/leanprover-community/mathlib4/pull/32260\">#32260</a>, although all four appear on the old queueboard (<a href=\"https://github.com/leanprover-community/mathlib4/pull/30981\">#30981</a> being in 3rd place there).</p>",
        "id": 570845311,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1769705181
    },
    {
        "content": "<p>Yes, it does look like those two should be on the queue. I'll try and fix this today.</p>",
        "id": 570850801,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1769706486
    },
    {
        "content": "<p>I've fixed the issue causing <a href=\"https://github.com/leanprover-community/mathlib4/pull/30981\">#30981</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/32260\">#32260</a> to be missing CI data. Thanks again for the report!</p>",
        "id": 570932142,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1769741227
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> ! I have a PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/34815\">#34815</a> that has passed the check, but it is not on the queueboard with the displaying status of \"<strong>missing CI information</strong>\":</p>\n<p><a href=\"/user_uploads/3121/9qtTmsHiVqynt1W1X0kXM4bR/Screenshot-2026-02-04-at-10.17.51AM.png\">Screenshot of \"missing CI information\" on the queueboard</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/9qtTmsHiVqynt1W1X0kXM4bR/Screenshot-2026-02-04-at-10.17.51AM.png\" title='Screenshot of \"missing CI information\" on the queueboard'><img data-original-content-type=\"image/png\" data-original-dimensions=\"2656x338\" src=\"/user_uploads/thumbnail/3121/9qtTmsHiVqynt1W1X0kXM4bR/Screenshot-2026-02-04-at-10.17.51AM.png/840x560.webp\"></a></div><p>Is that a bug? Could you please check it when you have a minute, thank you!!</p>",
        "id": 571938836,
        "sender_full_name": "Louis Liu",
        "timestamp": 1770218373
    },
    {
        "content": "<p>Thank you for the report! There was indeed a bug; a fix has been deployed and your PR is now on the queue: <a href=\"https://leanprover-community.github.io/queueboard/review_dashboard.html?search=34815#queue\">https://leanprover-community.github.io/queueboard/review_dashboard.html?search=34815#queue</a></p>",
        "id": 571965615,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1770224800
    },
    {
        "content": "<p>(Note to reviewers: it looks like this fix added about 37 PRs that were accidentally being excluded to the queue. Please take another look if you have a chance!)</p>",
        "id": 571966254,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1770224965
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> May you take a look of <a href=\"https://github.com/leanprover-community/mathlib4/pull/34890\">#34890</a> again? It passes the CI but is not on the queue.<br>\n<a href=\"/user_uploads/3121/yXkpFF0tYR0rLwDz7NhA4lQu/Screenshot-2026-02-09-at-2.30.56-PM.png\">Screenshot 2026-02-09 at 2.30.56 PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/yXkpFF0tYR0rLwDz7NhA4lQu/Screenshot-2026-02-09-at-2.30.56-PM.png\" title=\"Screenshot 2026-02-09 at 2.30.56 PM.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2934x402\" src=\"/user_uploads/thumbnail/3121/yXkpFF0tYR0rLwDz7NhA4lQu/Screenshot-2026-02-09-at-2.30.56-PM.png/840x560.webp\"></a></div>",
        "id": 572870354,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1770665749
    },
    {
        "content": "<p>I think I see the issue; we don't have a good way to update CI statuses that have been re-run at the moment. I'll work on fixing this now. </p>\n<p>In the meantime could you try pushing another commit to the PR? Maybe just merging <code>master</code> or something.</p>",
        "id": 572874956,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1770667303
    },
    {
        "content": "<p>I merged master and it now appears on the queue. Thank you for your help!</p>",
        "id": 572891695,
        "sender_full_name": "Yongxi Lin (Aaron)",
        "timestamp": 1770672979
    },
    {
        "content": "<p>No problem, thank you for the report!</p>",
        "id": 572893390,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1770673646
    },
    {
        "content": "<p>A minor request... can the queueboard ignore bot actions (e.g. auto-assigning reviewers) as an \"update\" to PR? At the moment, if a PR waits for review for a week, it will be bumped down in the queue due to the bot action.</p>",
        "id": 573546876,
        "sender_full_name": "Weiyi Wang",
        "timestamp": 1770908895
    },
    {
        "content": "<p>The queueboard has a \"last status change\" column for precisely this reason! \"update\" counts <em>any</em> change (including you editing a comment of yours to fix a typo, or bot actions), \"last status change\" describes when the PR last changed from e.g. awaiting-author to awaiting review.</p>",
        "id": 573554321,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1770910751
    },
    {
        "content": "<p>Sorting by \"last status change\" is a much better criterion than \"last update\".</p>",
        "id": 573554449,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1770910783
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/573554449\">said</a>:</p>\n<blockquote>\n<p>Sorting by \"last status change\" is a much better criterion than \"last update\".</p>\n</blockquote>\n<p>Does that mean that most reviewers/maintainers don't use the default sorting order? If so, can we make it the default? That would make it easier to know at what position a PR is in the queue</p>",
        "id": 573568299,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1770913830
    },
    {
        "content": "<p>I use many of the different sorting orders. Sometimes I want to sprint through small PRs, so then I sort by size. Sometimes I want to see which PRs have spent the longest total time in review. Sometimes I reverse the sort, just because I want to look at some juicy new stuff. Etc...</p>\n<p>Tl;dr: I don't even know what the default is.</p>",
        "id": 573578481,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1770916696
    },
    {
        "content": "<p>CC <span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> <a href=\"https://github.com/leanprover-community/mathlib4/pull/35573\">#35573</a> is missing from the queueboard --- do you know why? (The PR was opened 36 minutes ago; I would expect faster synchronisation with github, right?)</p>",
        "id": 574977708,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771603713
    },
    {
        "content": "<p>Looks like it was marked ready for review 4 minutes ago? Was it created as a draft?</p>",
        "id": 574977965,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1771603784
    },
    {
        "content": "<p>I have changed the default sort order for the queueboard to be \"total time in review\" (descending). This should hopefully  help with the issue that bot comments, etc. change the ordering of PRs in the frontend.</p>",
        "id": 575545034,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1771940746
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span> It looks like <a href=\"https://github.com/leanprover-community/mathlib4/pull/35408\">#35408</a> is missing from the queueboard. The \"why is my PR not there?\"  page shows \"???\" under \"CI status\", even though CI is green.</p>\n<p>BTW, It would perhaps be a good idea to add a link on the queue page to the \"on_the_queue.html\" page. I had to dig the link up from an earlier message in this thread.</p>",
        "id": 576211751,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1772183771
    },
    {
        "content": "<p>Now it is back on the <a href=\"https://leanprover-community.github.io/queueboard/\">#queueboard</a>, but the \"on_the_queue\" page shows \"<span aria-label=\"cross mark\" class=\"emoji emoji-274c\" role=\"img\" title=\"cross mark\">:cross_mark:</span>?\" under \"CI status?\"...</p>\n<p>I also noticed that the link to \"on_the_queue\" is on <a href=\"https://leanprover-community.github.io/queueboard/\">#queueboard</a>; I was using a deeper link to <a href=\"https://leanprover-community.github.io/queueboard/review_dashboard.html\">https://leanprover-community.github.io/queueboard/review_dashboard.html</a>, so maybe also add the link there.</p>",
        "id": 576221648,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1772186706
    },
    {
        "content": "<p>So I think I understand what's going on here. Basically, CI on the latest commit was re-run and the current backend doesn't have a good way of detecting that the re-run occurred, so things were a bit funny. I'm hoping this will be fixed after we add a webhook endpoint.</p>\n<p>I'll also look into adding navigation links between each of the pages soon.</p>",
        "id": 576265481,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1772200161
    },
    {
        "content": "<p>In the meantime I've manually re-synced the PR so hopefully it will show up when the queueboard is updated next.</p>",
        "id": 576265723,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1772200219
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"123965\">Bryan Gin-ge Chen</span> <a href=\"#narrow/channel/287929-mathlib4/topic/queueboard/near/576265481\">said</a>:</p>\n<blockquote>\n<p>CI on the latest commit was re-run</p>\n</blockquote>\n<p>I think the cache upload step failed, probably due to some transient network failure, so I re-ran CI from there.</p>",
        "id": 576278281,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1772203544
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123965\">@Bryan Gin-ge Chen</span>  Currently there are at least 430 PR with \"missing Ci information\" (<a href=\"https://leanprover-community.github.io/queueboard/on_the_queue.html?search=%3F\">https://leanprover-community.github.io/queueboard/on_the_queue.html?search=%3F</a>) which are way too many IMO.</p>\n<p>(it's particularly annoying that <em>all</em> of my own PRs are among them, but that's not the main point)</p>\n<p>Could you maybe either relax the requirements so far that these still appear on some queues or do a general (batched) re-syncing of <em>all</em> PRs?</p>",
        "id": 576362356,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1772232867
    },
    {
        "content": "<p>Apologies, I didnât realize there were so many. I will take a look.</p>",
        "id": 576364174,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1772234024
    }
]