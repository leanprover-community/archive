[
    {
        "content": "<p>Is there anyone currently interested in implementing the von Neumann hierarchy and ordinals for <code>ZFSet</code>?</p>",
        "id": 462253295,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723607833
    },
    {
        "content": "<p>I remember there was someone back in 2022 who ended up treading over a lot of my own theorems... but none of this ever made its way to Mathlib 3, let alone Mathlib 4</p>",
        "id": 462253387,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723607903
    },
    {
        "content": "<p>I'm currently trying to port it and further develop it</p>",
        "id": 462253530,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723608033
    },
    {
        "content": "<p>I've opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/15793\">#15793</a> as a small, initial port of the 2022 file</p>",
        "id": 462255383,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723608880
    },
    {
        "content": "<p>That's interesting! Do you know what people did in Agda/HoTT?</p>\n<p><a href=\"https://www.cs.bham.ac.uk/~mhe/TypeTopology/Iterative.Ordinals.html\">https://www.cs.bham.ac.uk/~mhe/TypeTopology/Iterative.Ordinals.html</a></p>",
        "id": 462418636,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1723670265
    },
    {
        "content": "<p><a href=\"https://doi.org/10.1017/jsl.2017.84\">https://doi.org/10.1017/jsl.2017.84</a></p>",
        "id": 462418695,
        "sender_full_name": "Antoine Chambert-Loir",
        "timestamp": 1723670283
    },
    {
        "content": "<p>That looks interesting, but I'm not really familiar with other theorem provers</p>",
        "id": 462421640,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723671971
    },
    {
        "content": "<p>Hi! I've been working on formalizing von Neumann universes recent days in my personal project. My hope is to prove Vκ (where κ is an inaccessible cardinal) are exactly the models of second order ZF, and I've proved one direction (here is <a href=\"https://github.com/staroperator/mathematical-logic-in-lean/blob/2776e6ad0138bf08925e1f2a7e7eb34dffbe638c/MathematicalLogic/ZFSet.lean#L357\">what I have done</a>).</p>\n<p>Although I'd never contributed to lean community before, I'm definitely interested in implementing them in Mathlib.</p>",
        "id": 462698934,
        "sender_full_name": "Dexin Zhang",
        "timestamp": 1723782703
    },
    {
        "content": "<p>That looks pretty interesting. A lot of the theorems in there should probably exist in Mathlib in some form</p>",
        "id": 462718766,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723790374
    },
    {
        "content": "<p>btw <span class=\"user-mention\" data-user-id=\"734814\">@Dexin Zhang</span> your definition of <code>rank</code> is wrong</p>",
        "id": 462720243,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723790798
    },
    {
        "content": "<p>it should be the supremum of the successors of the ranks of previous elements, instead of the other way around</p>",
        "id": 462720281,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723790814
    },
    {
        "content": "<p>We have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WellFounded.rank#doc\">docs#WellFounded.rank</a>, though the API is quite underdeveloped</p>",
        "id": 462720675,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723790930
    },
    {
        "content": "<p>That’s a generalization of the order-theoretic height, is it? I have a PR extending that definition’s API in <a href=\"https://github.com/leanprover-community/mathlib4/pull/15524\">https://github.com/leanprover-community/mathlib4/pull/15524</a>, JFTR. Probably worth at least to cross-link the definitions in the docstrings.</p>",
        "id": 462722563,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1723791394
    },
    {
        "content": "<p>I'm not sure if I'd call it a generalization, since it's only defined in the case of a well-founded order. But yes, it's a similar idea</p>",
        "id": 462723009,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723791555
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> <a href=\"#narrow/stream/287929-mathlib4/topic/von.20Neumann.20hierarchy/near/462722563\">said</a>:</p>\n<blockquote>\n<p>That’s a generalization of the order-theoretic height, is it?</p>\n</blockquote>\n<p>It feels a bit orthogonal rather than a generalisation since it does have a bigger return type, but it also requires a well-founded order to make sense</p>",
        "id": 462723020,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1723791559
    },
    {
        "content": "<p>Fair enough. I guess it’s only a generalization in the sense that “where both exist, one can obtain the height from the rank”.</p>",
        "id": 462735880,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1723795269
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/von.20Neumann.20hierarchy/near/462720243\">said</a>:</p>\n<blockquote>\n<p>btw <span class=\"user-mention silent\" data-user-id=\"734814\">Dexin Zhang</span> your definition of <code>rank</code> is wrong</p>\n</blockquote>\n<p>Thank you for telling me! I haven't realized my definition is wrong <span aria-label=\"exhausted\" class=\"emoji emoji-1f625\" role=\"img\" title=\"exhausted\">:exhausted:</span></p>",
        "id": 462789869,
        "sender_full_name": "Dexin Zhang",
        "timestamp": 1723815509
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/von.20Neumann.20hierarchy/near/462720675\">said</a>:</p>\n<blockquote>\n<p>We have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WellFounded.rank#doc\">docs#WellFounded.rank</a>, though the API is quite underdeveloped</p>\n</blockquote>\n<p>The universe level makes it quite subtle. The existing <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WellFounded.rank#doc\">docs#WellFounded.rank</a> produces <code>Ordinal.{u}</code> for <code>α: Type u</code>, but <code>ZFSet.{u}</code> lives in <code>Type (u+1)</code></p>\n<p><code>ZFSet.mem_wf.rank</code> will produce <code>ZFSet.{u} → Ordinal.{u+1}</code>, but I prefer <code>ZFSet.{u} → Ordinal.{u}</code> so that universe levels coincide</p>",
        "id": 462791895,
        "sender_full_name": "Dexin Zhang",
        "timestamp": 1723816206
    },
    {
        "content": "<p>We actually have this situation elsewhere in the library. The <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SetTheory.PGame.birthday#doc\">docs#SetTheory.PGame.birthday</a> of a game is the direct analog of the rank of a set. Instead of defining it as the least ordinal larger than the ranks of member sets, you define it as the least ordinal larger than the birthdays of option games for either player. The recursive definition ensures the correct universe.</p>",
        "id": 462854543,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723841307
    },
    {
        "content": "<p><code>PGame</code> is to <code>Game</code> like <code>PSet</code> is to <code>ZFSet</code>.</p>",
        "id": 462854611,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723841364
    },
    {
        "content": "<p>I have an open PR defining birthdays in <code>Game</code>, as the least birthday of any <code>PGame</code> that quotients to it.</p>",
        "id": 462854661,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723841396
    },
    {
        "content": "<p>All of this design could be copied nearly verbatim into a SetTheory/ZFC/Rank.lean file</p>",
        "id": 462854736,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723841421
    },
    {
        "content": "<p>In both cases, we could show the equality <code>rank x = lift (Ordinal.rank x)</code></p>",
        "id": 462854866,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723841486
    },
    {
        "content": "<p>The theorem <code>x ∈ neummann o ↔ rank x &lt; o</code> could be a separate thing we then do to link both files togeteher</p>",
        "id": 462856161,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723842161
    },
    {
        "content": "<p>Got it! I think the case in <code>ZFSet</code> is much simpler than <code>Game</code>, since we can prove <code>PSet.rank</code> respects <code>PSet.Equiv</code> and use <code>Quotient.lift</code></p>",
        "id": 462869194,
        "sender_full_name": "Dexin Zhang",
        "timestamp": 1723850506
    },
    {
        "content": "<p>Shall I open a PR for that Rank.lean?</p>",
        "id": 462869268,
        "sender_full_name": "Dexin Zhang",
        "timestamp": 1723850531
    },
    {
        "content": "<p>Sure thing! I'll be glad to review it</p>",
        "id": 462869351,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723850600
    },
    {
        "content": "<p>Any progress on this?</p>",
        "id": 463163604,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1723984460
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/stream/287929-mathlib4/topic/von.20Neumann.20hierarchy/near/463163604\">said</a>:</p>\n<blockquote>\n<p>Any progress on this?</p>\n</blockquote>\n<p>No, I'm still waiting for github permission</p>\n<p>Maybe I should make a fork and work on it first</p>",
        "id": 463170878,
        "sender_full_name": "Dexin Zhang",
        "timestamp": 1723986989
    },
    {
        "content": "<p>That would be nice. I guess I could always PR it myself</p>",
        "id": 463243381,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1724016337
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459227\">@Violeta Hernández</span>  I opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/15977\">#15977</a> for the Rank.lean</p>",
        "id": 463426797,
        "sender_full_name": "Dexin Zhang",
        "timestamp": 1724079247
    }
]