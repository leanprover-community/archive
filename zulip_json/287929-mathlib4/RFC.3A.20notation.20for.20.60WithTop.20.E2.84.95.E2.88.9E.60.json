[
    {
        "content": "<p>Throughout analysis and differential geometry in mathlib, we currently make heavy use of <code>WithTop ℕ∞</code> as the type of smoothness degrees for e.g. the <code>ContDiff</code> API. We have notation <code>∞</code> for <code>(⊤ : ℕ∞) : WithTop ℕ∞</code> and <code>ω</code> for <code>⊤ : WithTop ℕ∞</code>, but currently no notation for <code>WithTop ℕ∞</code> itself. I propose introducting notation <code>ℕ∞ω</code> for this, analogous to the notation <code>ℕ∞</code> we already have for <code>ENat</code>. I've opened a draft PR for this at <a href=\"https://github.com/leanprover-community/mathlib4/pull/34649\">#34649</a>.</p>\n<p>What do you think of this? Would this notation make sense to add, and if so, how should it be scoped? The existing notations <code>∞</code> and <code>ω</code> are scoped to the <code>ContDiff</code> namespace (and rightfully so, since <code>∞</code> might denote terms of different types in other contexts), but while creating the PR I noticed that many files that mention <code>WithTop ℕ∞</code> currently don't open <code>ContDiff</code> because they have have no need to mention <code>∞</code> and <code>ω</code> specifically and just work with general <code>n : WithTop ℕ∞</code>. I'm wondering if that would be reason enough to make <code>ℕ∞ω</code> available globally, since there is presumably no risk of it meaning something different in other contexts like with <code>∞</code> and <code>ω</code>.</p>",
        "id": 573917824,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1771093845
    },
    {
        "content": "<p>Thanks for trying to make working in calculus and manifolds more ergonomic. I appreciate the effort; we need to keep trying harder at this. That said: can you say more about this particular proposal, please? What's your motivation, just brevity?</p>\n<p>My first impression, certainly not well-thought-out, is that I'm not sure if the new notation is worth it. We add one more abbreviation which is non-standard and needs to be learned, in return for a few characters. I will think about it more; it's possible my opinion will be different then.</p>",
        "id": 573922846,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771098939
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/RFC.3A.20notation.20for.20.60WithTop.20.E2.84.95.E2.88.9E.60/near/573922846\">said</a>:</p>\n<blockquote>\n<p>We add one more abbreviation which is non-standard and needs to be learned</p>\n</blockquote>\n<p>FWIW as a newcomer a double <code>WithBot</code> was a little confusing to me; when I saw <code>WithBot ℕ∞</code> I assumed I just read <code>WithBot ℕ</code> or <code>ℕ∞</code>, I didn't notice the <code>WithBot</code> was actually doubled. I think the suggestion might make it more obvious that something new is going on since there's an <code>ω</code> in it, though it could still be easily mistaken for <code>ℕ∞</code>.<br>\nBut I think <code>∞</code> vs <code>ω</code> as terms of <code>N∞ω</code> is confusing since I can't immediately tell which is bigger. It might be fine for people who are more used to the <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>C</mi><mi>ω</mi></msup></mrow><annotation encoding=\"application/x-tex\">C^\\omega</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">ω</span></span></span></span></span></span></span></span></span></span></span> / <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>C</mi><mi mathvariant=\"normal\">∞</mi></msup></mrow><annotation encoding=\"application/x-tex\">C^\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span></span></span></span></span></span></span></span> notation, but my instinct was to think in terms of ordinals and cardinals.</p>",
        "id": 573923928,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1771100177
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/287929-mathlib4/topic/RFC.3A.20notation.20for.20.60WithTop.20.E2.84.95.E2.88.9E.60/near/573922846\">said</a>:</p>\n<blockquote>\n<p>That said: can you say more about this particular proposal, please? What's your motivation, just brevity?</p>\n</blockquote>\n<p>Brevity is one thing, but I also feel like this would fill a lexical gap we currently have - we already have notation for other types of extended numbers like <code>ℕ∞</code> and <code>ℝ≥0∞</code> after all, as well as the notation <code>ω</code> for <code>⊤ : WithTop ℕ∞</code>, so calling <code>WithTop ℕ∞</code> <code>ℕ∞ω</code> seems very natural / fitting to me. I understand the concern about this being yet another notation that one has to learn, but arguably <code>n : WithTop ℕ∞</code> already isn't very intuitive when one first sees it: introducing a notation for it would even have the advantage of allowing us to add a docstring, whereas if one sees <code>WithTop ℕ∞</code> currently the only docstrings available on hover are those of <code>WithTop </code> and <code>ℕ∞</code>, which don't really explain why we're adding a top element to a type that already has one.</p>",
        "id": 573939667,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1771119704
    },
    {
        "content": "<p>One advantage of having this notation is that it comes with a docstring.</p>",
        "id": 573940702,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771120843
    },
    {
        "content": "<p>I just remembered this PR / thread - since the message with the most thumbs up in this thread is about an advantage this notation would bring, I take that as a sign it is indeed a welcome addition. That leaves open the question of whether it should be scoped or not not. Should that also be discussed here, or should further discussion happen on github on the PR?</p>",
        "id": 576385741,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1772249966
    },
    {
        "content": "<p>AFAIK, <code>ω</code> in this context makes sense only for <code>C^k</code>, so I would make it scoped.</p>",
        "id": 576385810,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1772250043
    },
    {
        "content": "<p>The argument for having it globally is that a lot more files mention <code>WithTop ℕ∞</code>than <code>ω</code>, so if we make the notation scoped we could either not use it everywhere or would have to add <code>open scoped ContDiff</code> to a lot of files that currently don't have it</p>",
        "id": 576385907,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1772250156
    },
    {
        "content": "<p>but I agree that it would be a bit weird to have <code>ℕ∞ω</code> available in contexts where <code>ω</code> is not</p>",
        "id": 576385957,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1772250196
    },
    {
        "content": "<p>out of the two options of using the notation only in some files and adding <code>open scoped ContDiff</code> to a lot of files, which one would be preferred?</p>",
        "id": 576386145,
        "sender_full_name": "Ben Eltschig",
        "timestamp": 1772250359
    }
]