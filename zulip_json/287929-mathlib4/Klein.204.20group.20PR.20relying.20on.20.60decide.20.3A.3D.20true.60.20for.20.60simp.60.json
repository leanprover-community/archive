[
    {
        "content": "<p>We've recently changed the default behaviour for <code>simp</code> so that it no longer calls <code>decide</code>. This is now regularly causing breakages on <code>nightly-testing</code>.</p>\n<p>The most recent one is <span class=\"user-mention\" data-user-id=\"443984\">@Newell Jensen</span>'s PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/7937\">#7937</a> which was just merged.</p>\n<p>I've patched it on <code>nightly-testing</code> to change to calls to <code>simp</code> to <code>simp (config := {decide := true})</code>.</p>\n<p>So two things:</p>\n<ul>\n<li><span class=\"user-mention\" data-user-id=\"443984\">@Newell Jensen</span> (or any one else) might want to have a look at this and decide if there is a better approach.</li>\n<li>All reviewers might keep an eye out for <code>simp</code> calls that are likely to be relying on <code>decide</code>, and either change them to <code>simp (config := {decide := true})</code> for future proofing, or use a different approach.</li>\n</ul>",
        "id": 401451596,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1699661484
    },
    {
        "content": "<p>Since this was recently changed I would have seen this if I had merged master or is this only on the nightly testing?</p>",
        "id": 401452714,
        "sender_full_name": "Newell Jensen",
        "timestamp": 1699662194
    },
    {
        "content": "<p>Unfortunately it is only <code>nightly-testing</code>, so no way for you to have foreseen this!</p>",
        "id": 401452739,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1699662222
    },
    {
        "content": "<p>We're still learning how to manage <code>nightly-testing</code>, and I think today's lesson (this is just one of many examples of incoming PRs breaking <code>nightly-testing</code>) is that we are going to need to resynchronize more often.</p>",
        "id": 401452825,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1699662260
    },
    {
        "content": "<p>I will probably cut a <code>v4.3.0-rc2</code> version of Lean in the next couple of days.</p>",
        "id": 401452850,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1699662278
    },
    {
        "content": "<p>What was the motivation to change<code>simp</code> in this way? Was it so that usage of <code>decide</code> would be more <em>atomic</em>?</p>",
        "id": 401453131,
        "sender_full_name": "Newell Jensen",
        "timestamp": 1699662480
    },
    {
        "content": "<p>When <code>simp</code> fails to close a goal, sometimes it would launch very expensive attempts to decide the goal, that were not intended.</p>",
        "id": 401453500,
        "sender_full_name": "Scott Morrison",
        "timestamp": 1699662669
    }
]