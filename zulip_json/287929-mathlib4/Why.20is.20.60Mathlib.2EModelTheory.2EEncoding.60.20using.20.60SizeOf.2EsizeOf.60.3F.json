[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"302826\">@Aaron Anderson</span> or others who know about <a href=\"https://tqft.net/mathlib4files/ModelTheory/Encoding\">file#ModelTheory/Encoding</a>, why is <code>listDecode</code> written in terms of <code>SizeOf.sizeOf</code>?</p>\n<p>Generally, this is meant to be an \"implementation detail\", rather than used in mathematical proofs.</p>\n<p>If there is some good explanation for it here, I'd like to have this documented.</p>\n<p>Alternatively, can we just use <code>List.length</code> here? What is going on?</p>",
        "id": 454280083,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1721994280
    },
    {
        "content": "<p>I assume this is because <code>listDecode</code> is recursive and calls itself on itself (<code>(listDecode (listDecode l).2</code>), so you need the subtype to indicate that the result is smaller than the input. It seems that subsequent definitions only use <code>(listDecode l).1</code> anyways.<br>\nBut I suppose with <code>termination_by l =&gt; l.length</code> using <code>length</code> would work just as well, as you say.</p>",
        "id": 454306200,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1722002734
    },
    {
        "content": "<p>Essentially, because I had trouble proving well-founded recursion. I've just attempted to retrofit it to use <code>List.length</code>, and found that `termination_by l =&gt; l.length' didn't work automatically. I'll try to make it work, but perhaps just changing the encoding (to use parentheses, say) would be easier.</p>",
        "id": 454331481,
        "sender_full_name": "Aaron Anderson",
        "timestamp": 1722010478
    },
    {
        "content": "<p>I've changed the decoding a bit, and now <code>List.length</code> works. <a href=\"https://github.com/leanprover-community/mathlib4/pull/15209\">#15209</a></p>",
        "id": 454506247,
        "sender_full_name": "Aaron Anderson",
        "timestamp": 1722103615
    },
    {
        "content": "<p>I think it makes more sense - I could try to make it even clearer, but I think it's best for me to PR this now to remove all the deprecated stuff, and tinker more later.</p>",
        "id": 454506248,
        "sender_full_name": "Aaron Anderson",
        "timestamp": 1722103615
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 454678516,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1722208951
    }
]