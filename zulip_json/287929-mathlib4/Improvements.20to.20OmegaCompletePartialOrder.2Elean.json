[
    {
        "content": "<p>As part of the work <span class=\"user-mention\" data-user-id=\"869817\">@Kiarash Sotoudeh</span> and I have been doing on formalizing (ω) quasi-borel spaces, we have been filling in some missing functionality that I believe belongs in <a href=\"https://github.com/leanprover-community/mathlib4/blob/master/Mathlib/Order/OmegaCompletePartialOrder.lean\">OmegaCompletePartialOrder.lean</a>. This includes:</p>\n<ul>\n<li>Teaching <code>fun_prop</code> about <code>ωScottContinuous</code> functions.</li>\n<li><code>OmegaCompletePartialOrder</code> instances for <code>Option</code>, <code>Sum</code>, and <code>Sigma</code>.</li>\n<li>Various <code>Chain</code> constructions necessary for the aforementioned instances.</li>\n<li><code>ωScottContinuous</code> proofs for various basic functions (e.g., <code>Prod.fst</code>, <code>ite</code>, ...).</li>\n</ul>\n<p>Is this appropriate for <code>mathlib</code>? I've made an initial PR for the first item (<a href=\"https://github.com/leanprover-community/mathlib4/pull/33941\">#33941</a>).</p>",
        "id": 568075747,
        "sender_full_name": "Anthony Vandikas",
        "timestamp": 1768423032
    },
    {
        "content": "<p>Sounds welcome, yeah</p>",
        "id": 568080292,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1768424768
    },
    {
        "content": "<p>Sure, yes! Feel free to request my review in case the other reviewing avenues become too slow</p>",
        "id": 568083936,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1768426313
    },
    {
        "content": "<p>This will be appreciated downstream as well, where it will be useful for programming language semantics!</p>\n<p>One question I have about <code>OmegaCompletePartialOrder</code> instances for <code>Option α</code> (and <code>WithBot α</code>) is that sometimes we would like the \"flat\" ωCPO where we just have <code>⊥ ≤ (a : α)</code> and ignore the ordering on <code>α</code>. Can we scope things so that users can choose what instances they want?</p>",
        "id": 568088096,
        "sender_full_name": "Chris Henson",
        "timestamp": 1768428148
    },
    {
        "content": "<p>Shouldn't that be the order on <code>WithBot (Discrete α)</code> instead?</p>",
        "id": 568088453,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1768428310
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Part.html#Part\"><code>Part</code></a> behaves like this and already has an <code>OmegaCompletePartialOrder</code> instance.</p>",
        "id": 568091404,
        "sender_full_name": "Anthony Vandikas",
        "timestamp": 1768429524
    },
    {
        "content": "<p>I thought <code>Part</code> was discouraged if not outright deprecated.</p>",
        "id": 568093539,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1768430496
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Improvements.20to.20OmegaCompletePartialOrder.2Elean/near/568093539\">said</a>:</p>\n<blockquote>\n<p>I thought <code>Part</code> was discouraged if not outright deprecated.</p>\n</blockquote>\n<p><code>Part</code> does have the instance I meant, but I similarly had the impression that <code>WithBot</code> was the preferred way to attach a bottom element. Yaël's suggestion of <code>WithBot (Discrete α)</code> seems very nice mathematically, though I don't know at a glance if universes will be an annoyance.</p>",
        "id": 568095173,
        "sender_full_name": "Chris Henson",
        "timestamp": 1768431478
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459227\">Violeta Hernández</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Improvements.20to.20OmegaCompletePartialOrder.2Elean/near/568093539\">said</a>:</p>\n<blockquote>\n<p>I thought <code>Part</code> was discouraged if not outright deprecated.</p>\n</blockquote>\n<p>Is this documented somewhere? Closest I could find is <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/deprecate.20Mathlib.2EData.2ENat.2EPartENat.3F/with/538010194\">#mathlib4 &gt; deprecate Mathlib.Data.Nat.PartENat?</a>, and I am not sure that the consensus was to remove <code>Part</code> (at most, it looks like it would be moved to <code>batteries</code>).</p>\n<hr>\n<p>I have submitted another PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/33985\">#33985</a> containing the <code>OmegaCompletePartialOrder</code> instance for <code>Sum</code>.</p>",
        "id": 568347122,
        "sender_full_name": "Anthony Vandikas",
        "timestamp": 1768531310
    },
    {
        "content": "<p>Assuming choice, <code>Part</code> is entirely equivalent to <code>Option</code>, which has much more API. And the consensus (though not universal) is that Mathlib shouldn't bother much with constructivism or decidability.</p>",
        "id": 568482342,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1768583233
    },
    {
        "content": "<p>I don't like <code>Part</code> for a different reason, because it's not the right definition for computations that have the potential to run on forever but are otherwise safe.</p>",
        "id": 568513107,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1768593420
    },
    {
        "content": "<p>I have made two more PRs: <a href=\"https://github.com/leanprover-community/mathlib4/pull/34054\">#34054</a> for the <code>Sigma</code> instance and <a href=\"https://github.com/leanprover-community/mathlib4/pull/34093\">#34093</a> for <code>Option</code> instance.</p>\n<p>I expect that I should split up <code>OmegaCompletePartialOrder.lean</code> before any further work as it is getting quite long.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"387244\">Yaël Dillies</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Improvements.20to.20OmegaCompletePartialOrder.2Elean/near/568083936\">said</a>:</p>\n<blockquote>\n<p>Sure, yes! Feel free to request my review in case the other reviewing avenues become too slow</p>\n</blockquote>\n<p>If it's not too much trouble I'd like to take you up on your offer (apologies if a week is too soon, this is my first experience making a PR here  <span aria-label=\"smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"smile\">:smile:</span>).</p>",
        "id": 569147378,
        "sender_full_name": "Anthony Vandikas",
        "timestamp": 1768953295
    }
]