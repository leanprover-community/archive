[
    {
        "content": "<p>I noticed that the <code>induction</code>/<code>cases</code> code action that suggests a pattern is not imported anymore in most of Mathlib. This is annoying, and I think we should have it in at least <code>Mathlib.Tactic</code> (but probably also in something like <code>Mathlib.Tactic.Common</code>)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n<span class=\"c1\">-- import Batteries.CodeAction.Misc</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">â„•</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"c1\">-- no code action (the code action exists with `import Mathlib`)</span>\n</code></pre></div>\n<p>Note: I don't know that the minimal import is to get it. The code action seems to be defined in <code>Batteries.CodeAction.Misc</code> but importing that doesn't seem to work.</p>",
        "id": 569541261,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1769100576
    },
    {
        "content": "<p>The minimal import seems to be</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">CodeAction</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Batteries</span><span class=\"bp\">.</span><span class=\"n\">CodeAction</span><span class=\"bp\">.</span><span class=\"n\">Misc</span>\n</code></pre></div>",
        "id": 569542124,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1769100785
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/34261\">#34261</a></p>",
        "id": 569542829,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1769100980
    },
    {
        "content": "<p><code>Mathlib/Lean/Meta.lean</code> used to contain <code>public import Batteries.CodeAction</code> before the shake tool was run in <a href=\"https://github.com/leanprover-community/mathlib4/pull/32731\">#32731</a>. Won't this new import also get removed by the shake tool?<br>\nThe same <a href=\"#narrow/channel/287929-mathlib4/topic/.23lint.20is.20broken/near/567346667\">happened</a>  to #lint, and required a <code>-- shake: keep</code> comment</p>",
        "id": 569616953,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769130052
    },
    {
        "content": "<p>Maybe you should have a <code>Mathlib.Init</code>import in every file which imports this action</p>",
        "id": 569617129,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1769130173
    },
    {
        "content": "<p>This seems to be the case in Cslib. Not importing it throws a <code>test</code> error</p>",
        "id": 569617143,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1769130182
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/channel/287929-mathlib4/topic/induction.2Fcases.20code.20action/near/569617129\">said</a>:</p>\n<blockquote>\n<p>Maybe you should have a <code>Mathlib.Init</code>import in every file which imports this action</p>\n</blockquote>\n<p>This is already the case in mathlib, and CI will fail if there's a file that doesn't (transitively) import it</p>",
        "id": 569619489,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769131988
    }
]