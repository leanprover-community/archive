[
    {
        "content": "<p>Is this an instance that should be added?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MulAction</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">smul</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"n\">one_smul</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"n\">mul_smul</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>I wanted to use this to talk about the orbit of an element in a linear order under order automorphisms.</p>",
        "id": 502804795,
        "sender_full_name": "Eric Paul",
        "timestamp": 1740876888
    },
    {
        "content": "<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Equiv.Perm#doc\">docs#Equiv.Perm</a></p>",
        "id": 502805800,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740877739
    },
    {
        "content": "<p>As far as I can tell, those are not order preserving maps</p>",
        "id": 502805938,
        "sender_full_name": "Eric Paul",
        "timestamp": 1740877814
    },
    {
        "content": "<p>I mean, to get the <code>MulAction</code> instance</p>",
        "id": 502805971,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740877858
    },
    {
        "content": "<p>(I realize this might not be as good of an idea as I had thought)</p>",
        "id": 502805990,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740877881
    },
    {
        "content": "<p>I think the instance above should be an instance, we have this pattern in general</p>",
        "id": 502807937,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1740879641
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> \"applyMulAction\"</p>",
        "id": 502807950,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1740879653
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Action/End.html#Function.End.applyMulAction\">Function.End.applyMulAction</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Action/End.html#Equiv.Perm.applyMulAction\">Equiv.Perm.applyMulAction</a>, and <a href=\"https://loogle.lean-lang.org/?q=%22applyMulAction%22\">2 more</a></p>",
        "id": 502807951,
        "sender_full_name": "loogle",
        "timestamp": 1740879653
    },
    {
        "content": "<p>I don't think you need to assume a linear order though</p>",
        "id": 502807967,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1740879677
    },
    {
        "content": "<p>You don't need any order at all, just <code>LE</code>, since this is an instance about <code>RelIso</code></p>",
        "id": 502808611,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1740880277
    },
    {
        "content": "<p>So it seems like this is the instance we want:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LE</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">RelIso</span><span class=\"bp\">.</span><span class=\"n\">applyMulAction</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MulAction</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">smul</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"n\">one_smul</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"n\">mul_smul</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>I'd be happy to make a PR for it if that seems reasonable</p>",
        "id": 502827665,
        "sender_full_name": "Eric Paul",
        "timestamp": 1740896314
    },
    {
        "content": "<p>Perhaps more generally</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">RelIso</span><span class=\"bp\">.</span><span class=\"n\">applyMulAction</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MulAction</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">≃</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">smul</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"n\">one_smul</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">  </span><span class=\"n\">mul_smul</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 502830835,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1740899271
    },
    {
        "content": "<p>This is in a PR of mine</p>",
        "id": 502881032,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1740936078
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/21024\">#21024</a></p>",
        "id": 502881174,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1740936168
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"512030\">@Eric Paul</span> to avoid you duplicating work <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 502889097,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1740941602
    },
    {
        "content": "<p>Awesome, that looks like just what I need!</p>",
        "id": 502889686,
        "sender_full_name": "Eric Paul",
        "timestamp": 1740941984
    }
]