[
    {
        "content": "<p>We should probably make <code>Derivation.map_zero</code> and <code>Derivation.map_add</code> <code>simp</code> theorems with high priority.</p>",
        "id": 507360866,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1742588702
    },
    {
        "content": "<p>Why?</p>",
        "id": 507362169,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1742589220
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/23213\">#23213</a> tries a slightly different approach of adding a <code>LinearMapClass (Derivation R A M) R A M</code> instance. The main issue is that for, say, <code>map_add</code> Lean tries <code>LinearMapClass.toAddHomClass</code> and there are tons of crazy ways to try to create a <code>LinearMapClass</code> most of which involve heavy attempts at unification while crawling through the algebraic hierarchy. </p>\n<p>Possible fixes </p>\n<ol>\n<li>just make these priority simp theorems and be done </li>\n<li>deprioritize <code>SemilinearMapClass.toAddHomClass</code> relative to <code>AddMonoidHomClass.toAddHomClass</code> </li>\n<li>give a <code>LinearMapClass (Derivation R A M) R A M</code> instance </li>\n</ol>\n<p>I not sure of the ranking of these by effect. So I am going to try each.</p>",
        "id": 507443295,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1742643490
    },
    {
        "content": "<p>Why does that first instance in 2. even exist?</p>",
        "id": 507449150,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742648138
    },
    {
        "content": "<p>Projection to a parent.</p>",
        "id": 507450965,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1742649525
    },
    {
        "content": "<p>Should it just extend <code>AddMonoidHomClass</code>?</p>",
        "id": 507451092,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1742649609
    },
    {
        "content": "<p>Re 1, it is kinda defeated by the volume of <code>simp only</code> calls and the fact that <code>Derivation.map_add</code> etc are protected</p>",
        "id": 507451167,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1742649671
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/23214\">#23214</a> for 2</p>",
        "id": 507452246,
        "sender_full_name": "Matthew Ballard",
        "timestamp": 1742650424
    }
]