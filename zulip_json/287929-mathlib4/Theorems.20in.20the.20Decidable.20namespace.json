[
    {
        "content": "<p>It was suggested that we could remove theorems that have <code>Decidable</code> hypotheses, since the same theorem can be stated and proved without this hypothesis. The only reason for having these is to support non-classical logic, removing the need for <code>em</code> (as opposed to definitions using a <code>Decidable</code> hypotheses, which need the decidability to unfold nicely).</p>\n<p>Here is the list of theorems in <code>Decidable</code>. I commented out the ones that are in core Lean. Do we want to keep or remove the ones that are in Mathlib?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">Lex</span><span class=\"bp\">.</span><span class=\"n\">ne_iff</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">eq_or_ne_mem_of_mem</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">Partrec</span><span class=\"bp\">.</span><span class=\"n\">const'</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">and_forall_ne</span>\n<span class=\"c1\">-- #check Decidable.and_iff_not_or_not</span>\n<span class=\"c1\">-- #check Decidable.and_or_imp</span>\n<span class=\"c1\">-- #check Decidable.byContradiction</span>\n<span class=\"c1\">-- #check Decidable.by_contra</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">by_contradiction</span><span class=\"w\"> </span><span class=\"c1\">-- in Mathlib.Deprecated</span>\n<span class=\"c1\">-- #check Decidable.em</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">eq_iff_le_not_lt</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">eq_or_lt_of_le</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">eq_or_ne</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">exists_ne</span>\n<span class=\"c1\">-- #check Decidable.exists_not_of_not_forall -- in Batteries</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">forall_or_left</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">forall_or_right</span>\n<span class=\"c1\">-- #check Decidable.iff_congr_left</span>\n<span class=\"c1\">-- #check Decidable.iff_congr_right</span>\n<span class=\"c1\">-- #check Decidable.iff_iff_and_or_not_and_not</span>\n<span class=\"c1\">-- #check Decidable.iff_iff_not_or_and_or_not</span>\n<span class=\"c1\">-- #check Decidable.iff_not_comm</span>\n<span class=\"c1\">-- #check Decidable.imp_iff_left_iff</span>\n<span class=\"c1\">-- #check Decidable.imp_iff_not_or</span>\n<span class=\"c1\">-- #check Decidable.imp_iff_or_not</span>\n<span class=\"c1\">-- #check Decidable.imp_iff_right_iff</span>\n<span class=\"c1\">-- #check Decidable.imp_or</span>\n<span class=\"c1\">-- #check Decidable.imp_or'</span>\n<span class=\"c1\">-- #check Decidable.isFalse.sizeOf_spec</span>\n<span class=\"c1\">-- #check Decidable.isTrue.sizeOf_spec</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">le_iff_eq_or_lt</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">le_iff_lt_or_eq</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">lt_or_eq_of_le</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">mul_lt_mul''</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">ne_iff_lt_iff_le</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">ne_or_eq</span>\n<span class=\"c1\">-- #check Decidable.not_and_iff_or_not</span>\n<span class=\"c1\">-- #check Decidable.not_and_iff_or_not_not</span>\n<span class=\"c1\">-- #check Decidable.not_and_iff_or_not_not'</span>\n<span class=\"c1\">-- #check Decidable.not_and_not_right</span>\n<span class=\"c1\">-- #check Decidable.not_exists_not</span>\n<span class=\"c1\">-- #check Decidable.not_forall</span>\n<span class=\"c1\">-- #check Decidable.not_forall_not</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">not_forall₂</span>\n<span class=\"c1\">-- #check Decidable.not_iff</span>\n<span class=\"c1\">-- #check Decidable.not_iff_comm</span>\n<span class=\"c1\">-- #check Decidable.not_iff_not</span>\n<span class=\"c1\">-- #check Decidable.not_imp_comm</span>\n<span class=\"c1\">-- #check Decidable.not_imp_iff_and_not</span>\n<span class=\"c1\">-- #check Decidable.not_imp_not</span>\n<span class=\"c1\">-- #check Decidable.not_imp_self</span>\n<span class=\"c1\">-- #check Decidable.not_imp_symm</span>\n<span class=\"c1\">-- #check Decidable.not_not</span>\n<span class=\"c1\">-- #check Decidable.not_or_of_imp</span>\n<span class=\"c1\">-- #check Decidable.not_or_self</span>\n<span class=\"c1\">-- #check Decidable.of_not_imp</span>\n<span class=\"c1\">-- #check Decidable.of_not_not</span>\n<span class=\"c1\">-- #check Decidable.or_congr_left'</span>\n<span class=\"c1\">-- #check Decidable.or_congr_right'</span>\n<span class=\"c1\">-- #check Decidable.or_iff_not_and_not</span>\n<span class=\"c1\">-- #check Decidable.or_iff_not_imp_left</span>\n<span class=\"c1\">-- #check Decidable.or_iff_not_imp_right</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"bp\">.</span><span class=\"n\">or_not_of_imp</span>\n<span class=\"c1\">-- #check Decidable.or_not_self</span>\n<span class=\"c1\">-- #check Decidable.peirce</span>\n</code></pre></div>",
        "id": 505745618,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1741978060
    },
    {
        "content": "<p>See also <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/Decidable.20namespace/with/494655129\">#mathlib4 &gt; Decidable namespace</a></p>",
        "id": 505757959,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1741982709
    },
    {
        "content": "<p>I completely agree with getting rid of these theorems, but when I last brought it up there was some amount of pushback.</p>",
        "id": 505758010,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1741982732
    },
    {
        "content": "<p>The purpose of these theorems is clear and exactly what you said. Why are you wanting to get rid of them?</p>",
        "id": 505760586,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1741983832
    },
    {
        "content": "<p>The idea is that mathlib is a library for classical mathematics. I doubt that there is or will be anyone using these lemmas from Mathlib for proving things intuitionistically.</p>\n<p>And if we did care about certain lemmas not using <code>em</code>, then there should be some automation in place to verify that these lemmas don't accidentally use a classical axiom.</p>\n<p>The disadvantage of having them in mathlib is for example confusing people like me about why they exist.</p>",
        "id": 505762386,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1741984417
    },
    {
        "content": "<blockquote>\n<p>I doubt that there is or will be anyone using these lemmas from Mathlib for proving things intuitionistically.</p>\n</blockquote>\n<p>Not with that attitude!</p>",
        "id": 505762849,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1741984609
    },
    {
        "content": "<p>There should indeed be some automation in place. I wrote such a thing but never really deployed it because at the time there were a lot of \"false\" positives caused by usage in core</p>",
        "id": 505763052,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1741984687
    },
    {
        "content": "<p>I think we should have an <code>intuitionist</code> attribute in batteries, which both enforces that choice is avoided, and holds a docstring explaining why the theorem might be a duplicate</p>",
        "id": 505763531,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741984901
    },
    {
        "content": "<p>My own opinion is also along the same lines. Mathlib and its tactics make little if any consideration for non-classical logics, and it's weird we make an exception for the off-chance <code>Decidable</code> namespace duplicate. But it'd be cool to see that change!</p>",
        "id": 505763725,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1741984984
    },
    {
        "content": "<p>If core isn't interested at all in supporting this, I think an ok compromise would be to allow Kim to remove the failing cases of such attributes downstream when doing a version bump, and then let interested parties re-classicalize the theorems off the critical path</p>",
        "id": 505763807,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741985031
    },
    {
        "content": "<p>I'm working toward a future where mathlib is not <em>aggressively</em> anti-intuitionist, although sometimes progress feels pretty depressingly negative</p>",
        "id": 505763900,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1741985058
    },
    {
        "content": "<p>Yeah, I second that.</p>\n<ul>\n<li>Nobody should have to explain why they are working classically.</li>\n<li>But at the same time, if some parts are already available intuitionistically, then I don't see a reason to remove that.</li>\n</ul>\n<p>Part of me is still hoping to see some applications of internal logic to \"real world classical\" maths. And there are multiple people working on that.</p>",
        "id": 505810138,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1742014785
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Theorems.20in.20the.20Decidable.20namespace/near/505763900\">said</a>:</p>\n<blockquote>\n<p>I'm working toward a future where mathlib is not <em>aggressively</em> anti-intuitionist, although sometimes progress feels pretty depressingly negative</p>\n</blockquote>\n<p>Even in my limited PRs to mathlib4, I have experienced pushback if I try to add equivalent <code>Decidable</code> lemmas. I could see a world in which there are generated theorems for classical variants, but that seems much more of a pain to implement than \"simple\" attributes that auto-generate pairing theorems (e.g. <code>@[to_additive]</code>)</p>",
        "id": 505810490,
        "sender_full_name": "Tristan Figueroa-Reid",
        "timestamp": 1742015035
    },
    {
        "content": "<p>We have a linter in progress (it works but it's too slow) that ensures that we don't assume <code>Decidable</code> unless the theorem is in the <code>Decidable</code> namespace or the instance is needed to <strong>formulate</strong> (not prove) the theorem. I see no reason to remove theorems in the <code>Decidable</code> namespace. It's OK to add a library note about this though.</p>",
        "id": 505810588,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1742015109
    },
    {
        "content": "<p>OTOH, I don't like the idea of having <code>Decidable</code> copy of every theorem in Mathlib. I'm not sure what's the right middle ground.</p>",
        "id": 505810743,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1742015207
    },
    {
        "content": "<p>I'm not too worried about the duplication. It will probably amount to a small subset of <code>Logic/</code> and maybe a bit of  <code>Order/</code>.</p>",
        "id": 505812954,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1742016912
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Theorems.20in.20the.20Decidable.20namespace/near/505810138\">said</a>:</p>\n<blockquote>\n<ul>\n<li>But at the same time, if some parts are already available intuitionistically, then I don't see a reason to remove that.</li>\n</ul>\n</blockquote>\n<p>I disagree with that. There is a clear reason to remove existing intuitionistic lemmas: they encourage people to continue arguing periodically about how Mathlib is too classical. I think a real clarification would help with that.</p>",
        "id": 505832054,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1742032899
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Theorems.20in.20the.20Decidable.20namespace/near/505810588\">said</a>:</p>\n<blockquote>\n<p>It's OK to add a library note about this though.</p>\n</blockquote>\n<p>There is already a library note <code>[Decidable namespace]</code> next to each and every theorem in the namespace</p>",
        "id": 505860547,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742054209
    },
    {
        "content": "<p>As far as I can tell, all of this is documented pretty explicitly in the code, so the people above complaining about how it's unclear can only be talking about our processes and general messaging, not these specific lines of code.</p>",
        "id": 505860949,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742054475
    },
    {
        "content": "<p>I think the fact that library notes don't produce links anywhere is the issue here</p>",
        "id": 505867456,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742059010
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Theorems.20in.20the.20Decidable.20namespace/near/505860547\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Theorems.20in.20the.20Decidable.20namespace/near/505810588\">said</a>:</p>\n<blockquote>\n<p>It's OK to add a library note about this though.</p>\n</blockquote>\n<p>There is already a library note <code>[Decidable namespace]</code> next to each and every theorem in the namespace</p>\n</blockquote>\n<p>I'm sorry for writing this w/o looking at the code.</p>",
        "id": 505879438,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1742067902
    }
]