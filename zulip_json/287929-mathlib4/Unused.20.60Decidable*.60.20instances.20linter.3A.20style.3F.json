[
    {
        "content": "<p>I'm currently porting the unused <code>Decidable*</code> instances linter, which checks if there's a <code>Decidable*</code> instance in a theorem's type and suggests removing it in favor of using <code>classical</code> in the proof instead. :)</p>\n<p>I'd like to include a <code>Try this:</code> suggestion that removes the binder and also inserts <code>classical</code> in the body. This is easy enough if the body happens to be a <code>by</code> block, but what should the style be if the body is a term?</p>\n<p>We could <code>have</code> an instance in before the term, but that seems bulky to me; we could <code>open Classical</code> somewhere, but a different linter seems to discourage this. We could also have a <code>classical%</code> (or <code>classical;</code>, like <code>have ...;</code>) term elaborator.</p>\n<p>What's the best style option here? :)</p>",
        "id": 553689594,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1762281724
    },
    {
        "content": "<p>Side question: how are you passing a <code>Try this</code> suggestion from a linter?</p>",
        "id": 553723011,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1762292952
    },
    {
        "content": "<p>Try this functionality now works in MessageData, since MessageData now supports widgets! :) (There’s still no lightbulb code action, but the suggestion is clickable in the infoview.)</p>",
        "id": 553723607,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1762293255
    },
    {
        "content": "<p>That's great news!</p>",
        "id": 553723702,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1762293305
    },
    {
        "content": "<p><code>open scoped Classical in term_proof</code>?</p>",
        "id": 553731871,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1762297178
    },
    {
        "content": "<p><code>by classical exact</code></p>",
        "id": 553732131,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762297296
    },
    {
        "content": "<p>That doesn't bind variables (unless I'm forgetting how that works)</p>",
        "id": 553732503,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1762297501
    },
    {
        "content": "<p>what do you mean \"bind variables\"?</p>",
        "id": 553732825,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762297672
    },
    {
        "content": "<p>if you're talking about autolambda then I'm pretty sure <code>exact</code> does that</p>",
        "id": 553732859,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762297694
    },
    {
        "content": "<p>I'm talking about how <code>def</code> and <code>theorem</code> choose which <code>variables</code> to bind, but perhaps my complaint applies only to <code>def</code></p>",
        "id": 553732929,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1762297740
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/287929-mathlib4/topic/Unused.20.60Decidable*.60.20instances.20linter.3A.20style.3F/near/553731871\">said</a>:</p>\n<blockquote>\n<p><code>open scoped Classical in term_proof</code>?</p>\n</blockquote>\n<p>Is this not the thing that other linter discourages? Or is it only discouraged at the command level or something?</p>",
        "id": 553732971,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1762297765
    },
    {
        "content": "<p>Which linter?</p>",
        "id": 553733064,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1762297829
    },
    {
        "content": "<p>it's discouraged to do it when it could affect the statement of your lemma</p>",
        "id": 553733081,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762297837
    },
    {
        "content": "<p>It's very discouraged without <code>in</code>, and somewhat discouraged at the command level for the reason that Aaron states</p>",
        "id": 553733124,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1762297864
    },
    {
        "content": "<p>I think it might be called the “open scoped classical” linter <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 553733130,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1762297869
    },
    {
        "content": "<p>(on mobile right now)</p>",
        "id": 553733150,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1762297881
    },
    {
        "content": "<p>The term mode classical scope is not discouraged at all</p>",
        "id": 553733192,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1762297904
    },
    {
        "content": "<p>Ok, great! I think I might prefer <code>open scoped</code> to <code>by classical exact</code> just to avoid introducing any metavariable synthesis timing shenanigans.</p>",
        "id": 553733327,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1762297997
    },
    {
        "content": "<p>(Unless, of course, we ultimately want a term mode macro for <code>open scoped Classical in</code> for good style, which would be motivated by paralleling the tactic syntax and making source look a bit cleaner. Would obscure things a bit, but might be nice to have a uniform spelling across term and tactic mode.</p>\n<p>But that would be a separate discussion which shouldn’t  block this one, and the linter could just adapt if that becomes the style. <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span>)</p>",
        "id": 553733734,
        "sender_full_name": "Thomas Murrills",
        "timestamp": 1762298234
    }
]