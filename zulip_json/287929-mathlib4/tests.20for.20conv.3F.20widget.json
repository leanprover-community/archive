[
    {
        "content": "<p>I noticed that we don't have tests for some of our widgets, including the <code>conv?</code> widget which has an open PR <a href=\"https://github.com/leanprover-community/mathlib4/pull/25889\">#25889</a> by <span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span>  (see also <a href=\"#narrow/channel/287929-mathlib4/topic/bug.20in.20.60conv.3F.60\">#mathlib4 &gt; bug in &#96;conv?&#96;</a>) (at least none appear to have been added when they were merged in <a href=\"https://github.com/leanprover-community/mathlib4/pull/7260\">#7260</a>). </p>\n<p>I believe it would be good to make sure that the issues that Aaron has fixed this time remain fixed going forward. However, this is far from my area of expertise, so let me ask here: does anyone have any ideas on how we might add tests?</p>",
        "id": 527250908,
        "sender_full_name": "Bryan Gin-ge Chen",
        "timestamp": 1751687261
    },
    {
        "content": "<p>(I don't think it will satisfy the need, not least of which given that the implementation is not fully the same, but FWIW, I have a baseline test for <code>conv?</code> in <code>lean.nvim</code> <a href=\"https://github.com/Julian/lean.nvim/blob/main/spec/widgets/mathlib_spec.lua\">https://github.com/Julian/lean.nvim/blob/main/spec/widgets/mathlib_spec.lua</a> which at least will fail if it totally breaks.)</p>",
        "id": 527304228,
        "sender_full_name": "Julian Berman",
        "timestamp": 1751749278
    },
    {
        "content": "<p>Lean itself has <a href=\"https://github.com/leanprover/lean4/tree/192c0c8e6787ce730da95f6f403dfce8b1fa7bf3/tests/lean/interactive\">a number of interactive tests</a> which come with a custom runner that starts the Lean server. Then the LSP packets sent by the server in response to specified requests are compared against the expected baseline. With <code>conv?</code>, though, the initial packets are mostly uninteresting since they only contain the JS sources. The more interesting ones come from invoking <code>insertEnter</code>. I would suggest having tests which invoke that directly and inspect the output; this avoids the need to run a Lean server or worse, to run/render JS in tests.</p>",
        "id": 527785617,
        "sender_full_name": "ğš ğš˜ğš“ğšŒğš’ğšğšŒğš‘ ğš—ğšŠğš ğš›ğš˜ğšŒğš”ğš’",
        "timestamp": 1752017654
    },
    {
        "content": "<p>Good news, I've added tests</p>",
        "id": 531951111,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1753918832
    }
]