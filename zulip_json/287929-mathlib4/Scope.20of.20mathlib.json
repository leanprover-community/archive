[
    {
        "content": "<p>My collaborator Pratyush has formalized the univariate sumcheck lemma as a part of our work on formalization of cryptographic proof systems. It's a lemma that ultimately only references elementary concepts:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">lemma</span> <span class=\"n\">univariate_sumcheck</span> <span class=\"o\">{</span><span class=\"n\">F</span> <span class=\"o\">:</span> <span class=\"kt\">Type</span><span class=\"o\">}</span> <span class=\"o\">[</span><span class=\"n\">Field</span> <span class=\"n\">F</span><span class=\"o\">]</span> <span class=\"o\">[</span><span class=\"n\">Fintype</span> <span class=\"n\">F</span><span class=\"o\">]</span> <span class=\"o\">{</span><span class=\"n\">G</span> <span class=\"o\">:</span> <span class=\"n\">Subgroup</span> <span class=\"n\">F</span><span class=\"bp\">ˣ</span><span class=\"o\">}</span> <span class=\"o\">{</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">Polynomial</span> <span class=\"n\">F</span><span class=\"o\">}</span>\n  <span class=\"o\">{</span><span class=\"n\">h_card_G</span> <span class=\"o\">:</span> <span class=\"n\">Fintype.card</span> <span class=\"n\">G</span> <span class=\"bp\">≥</span> <span class=\"mi\">2</span><span class=\"o\">}</span> <span class=\"o\">(</span><span class=\"n\">σ</span> <span class=\"o\">:</span> <span class=\"n\">F</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"bp\">∑</span> <span class=\"n\">x</span> <span class=\"o\">:</span> <span class=\"n\">G</span><span class=\"o\">,</span> <span class=\"n\">Polynomial.eval</span> <span class=\"o\">(</span><span class=\"n\">x.val.val</span><span class=\"o\">)</span> <span class=\"n\">p</span> <span class=\"bp\">=</span> <span class=\"n\">σ</span> <span class=\"bp\">↔</span>\n    <span class=\"bp\">∃</span> <span class=\"n\">h</span> <span class=\"n\">g</span><span class=\"o\">,</span>\n      <span class=\"n\">p</span> <span class=\"bp\">=</span> <span class=\"n\">h</span> <span class=\"bp\">*</span> <span class=\"n\">vanishingPoly</span> <span class=\"n\">G</span> <span class=\"bp\">+</span> <span class=\"bp\">↑</span><span class=\"n\">Polynomial.C</span> <span class=\"o\">(</span><span class=\"n\">σ</span> <span class=\"bp\">/</span> <span class=\"bp\">↑</span><span class=\"o\">(</span><span class=\"n\">Fintype.card</span> <span class=\"n\">G</span><span class=\"o\">))</span> <span class=\"bp\">+</span> <span class=\"n\">Polynomial.X</span> <span class=\"bp\">*</span> <span class=\"n\">g</span> <span class=\"bp\">∧</span>\n        <span class=\"n\">Polynomial.natDegree</span> <span class=\"n\">g</span> <span class=\"bp\">+</span> <span class=\"mi\">2</span> <span class=\"bp\">≤</span> <span class=\"n\">Fintype.card</span> <span class=\"n\">G</span> <span class=\"bp\">∧</span>\n          <span class=\"n\">Polynomial.natDegree</span> <span class=\"n\">h</span> <span class=\"bp\">≤</span> <span class=\"n\">Polynomial.natDegree</span> <span class=\"n\">p</span> <span class=\"bp\">-</span> <span class=\"n\">Fintype.card</span> <span class=\"n\">G</span>\n</code></pre></div>\n<p>In words, \"The sum of a polynomial <code>p</code> over a multiplicative subgroup <code>G</code> of a field equals <code>σ</code> if and only if <code>p</code> is of the form <code>h * V + σ/|G| + X * g</code>, where <code>V</code> is the vanishing polynomial on the subgroup, <code>g</code> is a polynomial of degree at most <code>|G|-2</code> and <code>h</code> is of degree a polynomial of degree at most <code>|G|</code> less than that of <code>p</code>\".</p>\n<p>You can see this theorem all around the SNARK literature (for example, as Fact 2 <a href=\"https://eprint.iacr.org/2022/406.pdf\">here</a>), but I'm not sure where else I might expect to see it. I have been PRing prerequisites to mathlib over the past weeks. Does this theorem itself seem in scope for mathlib?</p>",
        "id": 391930408,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1695135196
    },
    {
        "content": "<p>I don't see any problem in having it. And as you said you probable needed a few small missing lemmas that are very welcome to mathlib.</p>",
        "id": 391930783,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1695135305
    }
]