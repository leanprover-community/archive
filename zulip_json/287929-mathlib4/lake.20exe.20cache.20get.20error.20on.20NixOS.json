[
    {
        "content": "<p>I am getting errors running <code>lake exe cache get</code> on NixOS:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">✖</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">3</span><span class=\"bp\">/</span><span class=\"mi\">10</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Building</span><span class=\"w\"> </span><span class=\"n\">Cache</span><span class=\"bp\">.</span><span class=\"n\">IO</span><span class=\"o\">:</span><span class=\"n\">c</span><span class=\"bp\">.</span><span class=\"n\">o</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/clang -c -o ././.lake/build/ir/Cache/IO.c.o.export ././.lake/build/ir/Cache/IO.c -I /home/collares/.elan/toolchains/leanprover--lean4---v4.16.0-rc1/include -fstack-clash-protection -fwrapv -fPIC -fvisibility=hidden -Wno-unused-command-line-argument -nostdinc -isystem /home/collares/.elan/toolchains/leanprover--lean4---v4.16.0-rc1/include/clang -O3 -DNDEBUG -DLEAN_EXPORTING</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXStack</span><span class=\"w\"> </span><span class=\"n\">dump</span><span class=\"o\">:</span>\n<span class=\"mf\">0.</span><span class=\"w\">  </span><span class=\"n\">Program</span><span class=\"w\"> </span><span class=\"n\">arguments</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/clang -c -o ././.lake/build/ir/Cache/IO.c.o.export ././.lake/build/ir/Cache/IO.c -I /home/collares/.elan/toolchains/leanprover--lean4---v4.16.0-rc1/include -fstack-clash-protection -fwrapv -fPIC -fvisibility=hidden -Wno-unused-command-line-argument -nostdinc -isystem /home/collares/.elan/toolchains/leanprover--lean4---v4.16.0-rc1/include/clang -O3 -DNDEBUG -DLEAN_EXPORTING</span>\n<span class=\"n\">Stack</span><span class=\"w\"> </span><span class=\"n\">dump</span><span class=\"w\"> </span><span class=\"n\">without</span><span class=\"w\"> </span><span class=\"n\">symbol</span><span class=\"w\"> </span><span class=\"n\">names</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ensure</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">llvm</span><span class=\"bp\">-</span><span class=\"n\">symbolizer</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"n\">PATH</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">var</span><span class=\"w\"> </span><span class=\"ss\">`LLVM_SYMBOLIZER_PATH</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">point</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"o\">):</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/../lib/libLLVM-15.so(_ZN4llvm3sys15PrintStackTraceERNS_11raw_ostreamEi+0x23) [0x7f6ce60e4953]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/../lib/libLLVM-15.so(_ZN4llvm3sys17RunSignalHandlersEv+0xee) [0x7f6ce60e292e]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/../lib/libLLVM-15.so(+0x16e4dff) [0x7f6ce60e4dff]</span>\n<span class=\"bp\">/</span><span class=\"n\">nix</span><span class=\"bp\">/</span><span class=\"n\">store</span><span class=\"bp\">/</span><span class=\"mi\">65</span><span class=\"n\">h17wjrrlsj2rj540igylrx7fqcd6vq</span><span class=\"bp\">-</span><span class=\"n\">glibc</span><span class=\"bp\">-</span><span class=\"mf\">2.40</span><span class=\"bp\">-</span><span class=\"mi\">36</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">libc</span><span class=\"bp\">.</span><span class=\"n\">so</span><span class=\"bp\">.</span><span class=\"m\">6</span><span class=\"o\">(</span><span class=\"bp\">+</span><span class=\"mi\">0</span><span class=\"n\">x40a70</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">x7f6ce4640a70</span><span class=\"o\">]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/../lib/libLLVM-15.so(_ZN4llvm3sys4path16reverse_iteratorppEv+0x155) [0x7f6ce60d5fb5]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/../lib/libLLVM-15.so(_ZN4llvm3sys4path8filenameENS_9StringRefENS1_5StyleE+0x29) [0x7f6ce60d86c9]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/clang(_Z10clang_mainiPPc+0x22bb) [0x56204a27760b]</span>\n<span class=\"bp\">/</span><span class=\"n\">nix</span><span class=\"bp\">/</span><span class=\"n\">store</span><span class=\"bp\">/</span><span class=\"mi\">65</span><span class=\"n\">h17wjrrlsj2rj540igylrx7fqcd6vq</span><span class=\"bp\">-</span><span class=\"n\">glibc</span><span class=\"bp\">-</span><span class=\"mf\">2.40</span><span class=\"bp\">-</span><span class=\"mi\">36</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">libc</span><span class=\"bp\">.</span><span class=\"n\">so</span><span class=\"bp\">.</span><span class=\"m\">6</span><span class=\"o\">(</span><span class=\"bp\">+</span><span class=\"mi\">0</span><span class=\"n\">x2a1fc</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">x7f6ce462a1fc</span><span class=\"o\">]</span>\n<span class=\"bp\">/</span><span class=\"n\">nix</span><span class=\"bp\">/</span><span class=\"n\">store</span><span class=\"bp\">/</span><span class=\"mi\">65</span><span class=\"n\">h17wjrrlsj2rj540igylrx7fqcd6vq</span><span class=\"bp\">-</span><span class=\"n\">glibc</span><span class=\"bp\">-</span><span class=\"mf\">2.40</span><span class=\"bp\">-</span><span class=\"mi\">36</span><span class=\"bp\">/</span><span class=\"n\">lib</span><span class=\"bp\">/</span><span class=\"n\">libc</span><span class=\"bp\">.</span><span class=\"n\">so</span><span class=\"bp\">.</span><span class=\"m\">6</span><span class=\"o\">(</span><span class=\"bp\">__</span><span class=\"n\">libc_start_main</span><span class=\"bp\">+</span><span class=\"mi\">0</span><span class=\"n\">x89</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"n\">x7f6ce462a2b9</span><span class=\"o\">]</span>\n<span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/clang(_start+0x2a) [0x56204a27502a]</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/clang' exited with code 139</span>\n</code></pre></div>\n<p>Just executing  ~/.elan/toolchains/leanprover--lean4---v4.16.0-rc1/bin/clang dies with the same error. <code>gdb</code> isn't super helpful:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Program</span><span class=\"w\"> </span><span class=\"n\">received</span><span class=\"w\"> </span><span class=\"n\">signal</span><span class=\"w\"> </span><span class=\"n\">SIGSEGV</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Segmentation</span><span class=\"w\"> </span><span class=\"n\">fault</span><span class=\"bp\">.</span>\n<span class=\"mi\">0</span><span class=\"n\">x00007ffff20d5fb5</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">llvm</span><span class=\"bp\">::</span><span class=\"n\">sys</span><span class=\"bp\">::</span><span class=\"n\">path</span><span class=\"bp\">::</span><span class=\"n\">reverse_iterator</span><span class=\"bp\">::</span><span class=\"n\">operator</span><span class=\"bp\">++</span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/../lib/libLLVM-15.so</span>\n<span class=\"o\">(</span><span class=\"n\">gdb</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">bt</span>\n<span class=\"bp\">#</span><span class=\"mi\">0</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff20d5fb5</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">llvm</span><span class=\"bp\">::</span><span class=\"n\">sys</span><span class=\"bp\">::</span><span class=\"n\">path</span><span class=\"bp\">::</span><span class=\"n\">reverse_iterator</span><span class=\"bp\">::</span><span class=\"n\">operator</span><span class=\"bp\">++</span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/../lib/libLLVM-15.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">1</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff20d86c9</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">llvm</span><span class=\"bp\">::</span><span class=\"n\">sys</span><span class=\"bp\">::</span><span class=\"n\">path</span><span class=\"bp\">::</span><span class=\"n\">filename</span><span class=\"o\">(</span><span class=\"n\">llvm</span><span class=\"bp\">::</span><span class=\"n\">StringRef</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">llvm</span><span class=\"bp\">::</span><span class=\"n\">sys</span><span class=\"bp\">::</span><span class=\"n\">path</span><span class=\"bp\">::</span><span class=\"n\">Style</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">home</span><span class=\"bp\">/</span><span class=\"n\">collares</span><span class=\"bp\">/.</span><span class=\"n\">elan</span><span class=\"bp\">/</span><span class=\"n\">toolchains</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"c1\">--lean4---v4.16.0-rc1/bin/../lib/libLLVM-15.so</span>\n<span class=\"bp\">#</span><span class=\"mi\">2</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x000055555556260b</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">clang_main</span><span class=\"o\">(</span><span class=\"n\">int</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">char</span><span class=\"bp\">**</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"bp\">#</span><span class=\"mi\">3</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff062a1fc</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">libc_start_call_main</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">main</span><span class=\"bp\">=</span><span class=\"n\">main</span><span class=\"bp\">@</span><span class=\"n\">entry</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"n\">x55555556f7d0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">main</span><span class=\"bp\">&gt;</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">argc</span><span class=\"bp\">=</span><span class=\"n\">argc</span><span class=\"bp\">@</span><span class=\"n\">entry</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">argv</span><span class=\"bp\">=</span><span class=\"n\">argv</span><span class=\"bp\">@</span><span class=\"n\">entry</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"n\">x7fffffffc288</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">../</span><span class=\"n\">sysdeps</span><span class=\"bp\">/</span><span class=\"n\">nptl</span><span class=\"bp\">/</span><span class=\"n\">libc_start_call_main</span><span class=\"bp\">.</span><span class=\"n\">h</span><span class=\"o\">:</span><span class=\"mi\">58</span>\n<span class=\"bp\">#</span><span class=\"mi\">4</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x00007ffff062a2b9</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"bp\">__</span><span class=\"n\">libc_start_main_impl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">main</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"n\">x55555556f7d0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">main</span><span class=\"bp\">&gt;</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">argc</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">argv</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"n\">x7fffffffc288</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">init</span><span class=\"bp\">=&lt;</span><span class=\"n\">optimized</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"bp\">&gt;</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">fini</span><span class=\"bp\">=&lt;</span><span class=\"n\">optimized</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"bp\">&gt;</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rtld_fini</span><span class=\"bp\">=&lt;</span><span class=\"n\">optimized</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"bp\">&gt;</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">stack_end</span><span class=\"bp\">=</span><span class=\"mi\">0</span><span class=\"n\">x7fffffffc278</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">../</span><span class=\"n\">csu</span><span class=\"bp\">/</span><span class=\"n\">libc</span><span class=\"bp\">-</span><span class=\"n\">start</span><span class=\"bp\">.</span><span class=\"n\">c</span><span class=\"o\">:</span><span class=\"mi\">360</span>\n<span class=\"bp\">#</span><span class=\"mi\">5</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"n\">x000055555556002a</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">start</span><span class=\"w\"> </span><span class=\"o\">()</span>\n</code></pre></div>",
        "id": 491970170,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736086414
    },
    {
        "content": "<p>Ah, fun, the bundled <code>clang</code> also crashes like that in old versions (tried <code>v4.0.0</code>, <code>v4.8.0</code>, and <code>v4.15.0</code>), but <code>lake exe cache get</code> works in v4.15.0 and below because pre <a href=\"https://github.com/leanprover/lean4/pull/6176\">lean4#6176</a> it used <code>leanc</code> instead of <code>clang</code>, which just defers compilation to the system compiler (gcc in my case)</p>\n<p>(these are all freshly installed toolchains, it's not a garbage collection problem)</p>",
        "id": 491971607,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736087628
    },
    {
        "content": "<p>There are two problems here:</p>\n<p>1) The bundled compiler shouldn't be used on NixOS. As the <code>leanc</code> wrapper on NixOS says, compilation of C files by Lean should \"use bundled libraries, but not bundled compiler that doesn't know about NIX_LDFLAGS\". To put it more succinctly, <a href=\"https://github.com/NixOS/nixpkgs/blob/master/pkgs/by-name/el/elan/0001-dynamically-patchelf-binaries.patch\">the Nixpkgs patch</a> probably needs a new approach after <a href=\"https://github.com/leanprover/lean4/pull/6176\">lean4#6176</a>.<br>\n2) The bundled compiler shouldn't be crashing on startup. This is less relevant for NixOS users (see point 1), but it might be causing problems on other platforms as well (unless, of course, it only crashes on NixOS due to some <code>patchelf</code>/<code>glibc</code>-related reason).</p>",
        "id": 491972234,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736088203
    },
    {
        "content": "<p>3 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/lake.20exe.20cache.20get.20error\">#mathlib4 &gt; lake exe cache get error</a> by <span class=\"user-mention silent\" data-user-id=\"325367\">Mauricio Collares</span>.</p>",
        "id": 491972246,
        "sender_full_name": "Notification Bot",
        "timestamp": 1736088225
    },
    {
        "content": "<p>Can you try <a href=\"https://github.com/NixOS/nixpkgs/pull/362062\">https://github.com/NixOS/nixpkgs/pull/362062</a>?</p>",
        "id": 491975626,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1736091020
    },
    {
        "content": "<p>It works, thanks! Given the myriad of Windows problems, I'd bet <a href=\"https://github.com/leanprover/lean4/pull/6176\">lean4#6176</a> will be reverted soon. But this is probably still worth merging, right?</p>",
        "id": 491976695,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736091863
    },
    {
        "content": "<p>Thanks for merging! I’m in the process of fixing live and <a href=\"http://loogle.lean-lang.org\">loogle.lean-lang.org</a> using that.</p>",
        "id": 491982564,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1736097086
    },
    {
        "content": "<p>Although it seems that on mathlib master, the cache isn’t used. It downloaded lots of file, but <code>lake build</code> still rebuilds mathlib. Mathlib stable worked fine, even with the patched elan, so maybe not an elan-related issue.</p>\n<p>Ah, probably just what others are experiencing in <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/Updating.20to.204.2E15.2E0\">#general &gt; Updating to 4.15.0</a></p>",
        "id": 491982922,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1736097385
    },
    {
        "content": "<p>For others experiencing the same issue: the fix mentioned above got merged and has been backported to NixOS 24.11, so as long as you're running that version you just need to update to get the fix. However you also have to delete and redownload any version of the Lean toolchain that fail to run <code>lake exe cache get</code> before it finally works again</p>",
        "id": 494348650,
        "sender_full_name": "Alex Keizer",
        "timestamp": 1737116538
    }
]