[
    {
        "content": "<p>Can anyone help with a lemma? Lean version 4.27.0-rc1, mathlib commit: 9ffe92940ecaeb3dcd538bc6e1644e60c32d4561</p>\n<p>I have defined</p>\n<p><code>def sinDiv (z : ‚ÑÇ) : ‚ÑÇ := if z = 0 then 1 else Complex.sin z / z</code></p>\n<p>and I have already proved <code>Continuous sinDiv</code>.</p>\n<p>What I want is:</p>\n<p><code>lemma deriv_sinDiv_zero : deriv sinDiv 0 = (0 : ‚ÑÇ)</code></p>\n<p>Mathematically this is trivial, but in this snapshot I cannot find a suitable lemma expressing the higher-order behaviour of <code>sin</code> at 0.</p>\n<p>Facts I <em>do</em> have / found:</p>\n<ul>\n<li><code>hasDerivAt_sin 0</code></li>\n<li><code>isEquivalent_sin : sin ~[ùìù 0] id</code></li>\n<li><code>analyticAt_sin</code></li>\n<li><code>Complex.hasSum_sin</code> / <code>Complex.sin_eq_tsum</code></li>\n</ul>\n<p>What I <strong>cannot</strong> find (despite extensive searching with <code>rg</code>):</p>\n<ul>\n<li>any lemma of the form <code>(sin z - z) = o(z^2)</code></li>\n<li>or <code>(sin z / z - 1) = o(z)</code></li>\n<li>or a ready-made derivative lemma for <code>sinc</code> / <code>sin z / z</code> at 0</li>\n</ul>\n<p>I‚Äôve checked:</p>\n<ul>\n<li><code>Analysis/SpecialFunctions/Trigonometric/Deriv.lean</code></li>\n<li><code>Series.lean</code></li>\n<li><code>Sinc.lean</code></li>\n</ul>\n<p><strong>Question:</strong><br>\nIs there an existing lemma in mathlib that directly gives<br>\n<code>deriv (fun z =&gt; sin z / z) 0 = 0</code> (or equivalent <code>HasDerivAt</code>) over <code>‚ÑÇ</code>, or a standard lemma expressing the second-order vanishing of <code>sin z - z</code> at 0?</p>\n<p>If so, what is the intended lemma name / path? Thanks in advance.</p>",
        "id": 569709260,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769173254
    },
    {
        "content": "<p>I'd recommend using loogle instead of text search.</p>",
        "id": 569712889,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1769174395
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 569712961,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1769174416
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span>  Complex.sin, \"deriv\"</p>",
        "id": 569713139,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1769174468
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/SpecialFunctions/Trigonometric/Deriv.html#Complex.logDeriv_sin\">Complex.logDeriv_sin</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/SpecialFunctions/Trigonometric/Deriv.html#Complex.deriv_sin\">Complex.deriv_sin</a>, and <a href=\"https://loogle.lean-lang.org/?q=Complex.sin%2C%20%22deriv%22\">36 more</a></p>",
        "id": 569713145,
        "sender_full_name": "loogle",
        "timestamp": 1769174470
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/SpecialFunctions/Trigonometric/Deriv.html#Complex.iteratedDeriv_even_sin\">Complex.iteratedDeriv_even_sin</a> seems like it might what you're looking for, at least w.r.t. the second order derivative</p>",
        "id": 569713387,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1769174551
    },
    {
        "content": "<p>Thanks, that makes sense conceptually, the vanishing of even iterated derivatives is exactly the ‚Äúno linear term in sin z / z‚Äù idea.</p>\n<p>I‚Äôm still missing the plumbing step in this snapshot though. I couldn‚Äôt get a usable statement out of it via <code>#check</code> in my project context (I might be importing the wrong file, or the lemma is in a namespace I‚Äôm not opening correctly).</p>\n<p>Could you confirm:</p>\n<ol>\n<li>\n<p>Which import brings it into scope? Is it <code>Mathlib.Analysis.SpecialFunctions.Trigonometric.Deriv</code> (or <code>ComplexDeriv</code>)?</p>\n</li>\n<li>\n<p>What is the exact type/signature you see for <code>Complex.iteratedDeriv_even_sin</code>? (I want to specialize it to get something like <code>iteratedDeriv 2 Complex.sin 0 = 0</code>.)</p>\n</li>\n<li>\n<p>Once we have <code>iteratedDeriv 2 Complex.sin 0 = 0</code>, what‚Äôs the intended lemma to turn that into<br>\n<code>deriv (fun z =&gt; (if z = 0 then 1 else Complex.sin z / z)) 0 = 0</code>?<br>\n  Is the intended route via <code>HasFPowerSeriesAt</code>/Taylor coefficients, or is there a lemma relating <code>deriv (fun z =&gt; sin z / z)</code> directly to <code>iteratedDeriv 2 sin</code> at 0?</p>\n</li>\n</ol>",
        "id": 569714985,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769174997
    },
    {
        "content": "<p>For info, I checked the online docs for <code>Mathlib.Analysis.SpecialFunctions.Trigonometric.Deriv</code>: they do show</p>\n<ul>\n<li>\n<p><code>Complex.hasDerivAt_sin</code> and <code>Complex.hasStrictDerivAt_sin</code>, and</p>\n</li>\n<li>\n<p><code>Complex.isEquivalent_sin : Asymptotics.IsEquivalent (nhds 0) sin id</code>.</p>\n</li>\n</ul>\n<p>So the first-order behaviour and basic derivatives are exposed in this namespace.</p>\n<p>However, I <strong>don‚Äôt see any documented lemma</strong> here connecting <code>iteratedDeriv</code> or the second derivative of <code>sin</code> at 0 to a Taylor expansion or a derivative of <code>sin z / z</code> at 0. The docs page doesn‚Äôt mention <code>iteratedDeriv_even_sin</code>, or a way to extract Taylor coefficients from power series or derivatives in this snapshot.</p>\n<p>Could someone point me to the <em>exact lemma name</em> or file where <code>Complex.iteratedDeriv_even_sin</code> lives (and how to turn it into a usable statement about <code>deriv (fun z =&gt; sin z / z) 0</code>)? Is it a different namespace / import I‚Äôm missing?</p>",
        "id": 569716764,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769175464
    },
    {
        "content": "<p>I can confirm that<br>\n<code>Complex.iteratedDeriv_even_sin</code> (in <code>Analysis/SpecialFunctions/Trigonometric/Deriv.lean</code>) gives the exact formula for even derivatives, e.g.</p>\n<p><code>iteratedDeriv (2 * n) sin = (-1)^n * sin</code></p>\n<p>and similarly for odd derivatives. So the second derivative / higher derivatives side is clear.</p>\n<p>What I‚Äôm missing, though, is a <strong>ready-made asymptotic / limit lemma</strong> for the cubic remainder at 0. Concretely, I‚Äôm trying to prove something like</p>\n<p><code>Filter.Tendsto   (fun z : ‚ÑÇ =&gt; (Complex.sin z - z) / z^3)   (nhdsWithin 0 {0}·∂ú)   (nhds (-(1/6)))</code></p>\n<p>(or equivalently <code>sin z - z = O(z^3)</code> / <code>= o(z^2)</code> near 0).</p>\n<p>I searched through:</p>\n<ul>\n<li>\n<p><code>Analysis/SpecialFunctions/Trigonometric/Deriv.lean</code></p>\n</li>\n<li>\n<p><code>DerivHyp.lean</code></p>\n</li>\n<li>\n<p><code>Series.lean</code></p>\n</li>\n<li>\n<p><code>Sinc.lean</code></p>\n</li>\n</ul>\n<p>and only found the first-order result</p>\n<p><code>theorem isEquivalent_sin : sin ~[ùìù 0] id</code></p>\n<p>but nothing packaging the cubic remainder.</p>\n<p>I <em>can</em> prove this directly from the power series using<br>\n<code>Complex.sin_eq_tsum</code> / <code>Complex.hasSum_sin</code> in <code>Trigonometric/Series.lean</code><br>\n(by splitting off the first two terms and bounding the tail), and I‚Äôm happy to do that if needed.<br>\nBefore re-proving it, I just wanted to check whether there is an existing lemma for the cubic Taylor remainder / <code>(sin z - z) / z^3</code> limit in this mathlib snapshot that I‚Äôve missed.</p>",
        "id": 569743848,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769182293
    },
    {
        "content": "<p>For the record, I ended up switching to a series-based approach, which worked out better in any case. Appreciate the help, nevertheless.</p>",
        "id": 569825946,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769217715
    },
    {
        "content": "<p>I noticed that we have <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.sin_bound#doc\">docs#Real.sin_bound</a>, but the proof essentially works for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Complex.sin#doc\">docs#Complex.sin</a>, and that version should help prove your result and give a simpler proof of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Real.sin_bound#doc\">docs#Real.sin_bound</a> too. I'm preparing a PR now, but the main statement is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">sin_bound</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚Äñ</span><span class=\"n\">x</span><span class=\"bp\">‚Äñ</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚Äñ</span><span class=\"n\">sin</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">)</span><span class=\"bp\">‚Äñ</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"bp\">‚Äñ</span><span class=\"n\">x</span><span class=\"bp\">‚Äñ</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">96</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n</code></pre></div>\n<p>In particular, while this is a weaker bound than what you get with the Taylor series, it can be proved earlier in mathlib, and gives slightly more control than what I think you need?</p>",
        "id": 569829361,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1769221684
    },
    {
        "content": "<p>That‚Äôs extremely helpful, thank you ‚Äî this is exactly the kind of lemma I was hoping existed.</p>\n<p>My immediate goal is to prove the punctured-neighbourhood cubic limit</p>\n<p><code>Tendsto (fun z : ‚ÑÇ =&gt; (Complex.sin z - z) / z^3) (ùìù[‚â†] 0) (ùìù (-(1/6)))</code></p>\n<p>and your bound gives this almost for free, since it implies<br>\n<code>(Complex.sin z - (z - z^3/6)) / z^3 ‚Üí 0</code> as <code>z ‚Üí 0</code>.</p>\n<p>So a lemma of the form</p>\n<p><code>theorem Complex.sin_bound {x : ‚ÑÇ} (hx : ‚Äñx‚Äñ ‚â§ 1) :   ‚ÄñComplex.sin x - (x - x ^ 3 / 6)‚Äñ ‚â§ ‚Äñx‚Äñ ^ 4 * (5 / 96)</code></p>\n<p>would be perfect for my use case.</p>\n<p>I‚Äôm very happy to depend on this lemma rather than reproving the Taylor remainder via series tails. If you‚Äôre able to expose it as <code>Complex.sin_bound</code> (or something similar), I can adapt my development immediately.</p>",
        "id": 569829725,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769222134
    },
    {
        "content": "<p>This lemma and the cos version are here: <a href=\"https://github.com/leanprover-community/mathlib4/pull/34350\">#34350</a></p>",
        "id": 569829977,
        "sender_full_name": "Bhavik Mehta",
        "timestamp": 1769222474
    },
    {
        "content": "<p>Yes, that lemma is exactly what I need. My goal is to show</p>\n<p><code>Tendsto (fun z : ‚ÑÇ =&gt; (Complex.sin z - z) / z^3) (ùìù[‚â†] 0) (ùìù (-(1/6)))</code></p>\n<p>and your bound implies immediately that<br>\n<code>(Complex.sin z - (z - z^3/6)) / z^3 ‚Üí 0</code> as <code>z ‚Üí 0</code>, so this is perfect.</p>\n<p>I‚Äôll switch my development to use <code>Complex.sin_bound</code> as soon as this PR is merged.<br>\nThanks again ‚Äî this simplifies things a lot and keeps the analytic input very clean.</p>",
        "id": 569830146,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769222685
    },
    {
        "content": "<p>I bet <span class=\"user-mention\" data-user-id=\"552388\">@Vasilii Nesterov</span> 's <code>compute_asymptotics</code> can blast away your limit goal in one line, at least in the real case.</p>",
        "id": 569830999,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1769223821
    },
    {
        "content": "<p>Thanks! My goal is over <code>‚ÑÇ</code> rather than <code>‚Ñù</code>.<br>\nDoes <code>compute_asymptotics</code> support complex functions already, or would I need to reduce to the real case first?</p>",
        "id": 569831219,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769224120
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/28291\">#28291</a> looks very specific to reals</p>",
        "id": 569831371,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769224324
    },
    {
        "content": "<p>Thanks, that‚Äôs helpful to know. My goal is to prove the limit for the complex function</p>\n<p>( \\sin z - z ) / z^3 \\to -1/6</p>\n<p>along the punctured neighbourhood of 0, staying close to Euler‚Äôs series-based argument.</p>\n<p>The new filter lemmas look useful for cleaning up the <code>ùìù[‚â†] 0</code> plumbing, but I‚Äôll still need either a complex asymptotic tool or an explicit complex bound.</p>\n<p>Do you know whether <code>compute_asymptotics</code> (or similar) currently works for complex functions like <code>Complex.sin</code>, or is it real-only for now?</p>",
        "id": 569831574,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769224646
    },
    {
        "content": "<p>Can you use general theory about Taylor series for this?</p>",
        "id": 569831893,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769225187
    },
    {
        "content": "<p>I mean, we know that for a holomorphic function, its Taylor series converges to it in the sense of <code>HasFPowerSeriesOnBall</code>, so we can use results about it.</p>",
        "id": 569831943,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769225228
    },
    {
        "content": "<p>Thanks, that‚Äôs helpful. My aim with this project is to stay fairly Euler-faithful in spirit, i.e. work directly with the explicit sine series rather than switching immediately to the general holomorphic/Taylor machinery, which is why I‚Äôve been doing things the hard way.</p>\n<p>That said, your suggestion sounds like a good fallback if the tail estimates get too painful. Could you point me to the specific lemmas I should be looking for? In particular:</p>\n<ul>\n<li>\n<p>is there already a <code>HasFPowerSeriesOnBall</code> statement for <code>Complex.sin</code> in mathlib?</p>\n</li>\n<li>\n<p>which lemma gives a remainder estimate of the form <code>f z = p z + o(‚Äñz‚Äñ^3)</code> or <code>O(‚Äñz‚Äñ^4)</code> from that?</p>\n</li>\n</ul>\n<p>Knowing the exact names would help me evaluate whether to switch approaches.</p>",
        "id": 569832237,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769225595
    },
    {
        "content": "<p>You can get <code>HasFPowerSeriesOnBall</code> for <code>Complex.exp</code> the same way we prove <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=analyticOn_cexp#doc\">docs#analyticOn_cexp</a><br>\nThen you can use results from <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Analytic/Basic.html\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Analytic/Basic.html</a></p>",
        "id": 569832801,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769226483
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"941396\">Bob Jefferson</span> <a href=\"#narrow/channel/287929-mathlib4/topic/deriv.20of.20sin.20z.20.2F.20z.20at.200.20.28.E2.84.82.29/near/569831574\">said</a>:</p>\n<blockquote>\n<p>Thanks, that‚Äôs helpful to know. My goal is to prove the limit for the complex function<br>\n...<br>\nDo you know whether <code>compute_asymptotics</code> (or similar) currently works for complex functions like <code>Complex.sin</code>, or is it real-only for now?</p>\n</blockquote>\n<p>I don't understand why you thanked me and then asked the same question again, but like I said it looks specific to reals</p>",
        "id": 569833004,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1769226826
    },
    {
        "content": "<p>Yes, sleep-deprivation mostly. That was 4 am in the UK. </p>\n<p>My project needs the limit</p>\n<p>(Complex.sin z - z)/z^3 \\to -(1/6)</p>\n<p>on <code>ùìù[‚â†] 0</code> for <code>‚ÑÇ</code>.</p>\n<p>Given the new <code>Complex.sin_bound</code> PR, what is the simplest way to turn that inequality into a <code>Filter.Tendsto</code> statement in mathlib style?</p>\n<p>(In particular: is there an existing lemma I should use to go from<br>\n<code>‚Äñf z‚Äñ ‚â§ ‚Äñz‚Äñ^4 * C</code><br>\nto<br>\n<code>Tendsto (fun z =&gt; f z / z^3) (ùìù[‚â†] 0) (ùìù 0)</code> ?)</p>",
        "id": 569856847,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769252619
    },
    {
        "content": "<p>Should we prove a version of <a href=\"https://math.stackexchange.com/a/4908310/12932\">l'Hopital's rule for (complex) analytic functions</a>?</p>",
        "id": 569859632,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1769255314
    },
    {
        "content": "<p>BTW, did you try asking AI like <a href=\"https://aristotle.harmonic.fun/\">https://aristotle.harmonic.fun/</a> ?</p>",
        "id": 569872041,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769264955
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"224323\">Junyan Xu</span> <a href=\"#narrow/channel/287929-mathlib4/topic/deriv.20of.20sin.20z.20.2F.20z.20at.200.20.28.E2.84.82.29/near/569859632\">said</a>:</p>\n<blockquote>\n<p>Should we prove a version of <a href=\"https://math.stackexchange.com/a/4908310/12932\">l'Hopital's rule for (complex) analytic functions</a>?</p>\n</blockquote>\n<p>I think l‚ÄôH√¥pital is overkill here. For <code>Complex.sin</code> we already have the power series and the remainder bounds (now also <code>Complex.sin_bound</code>). My immediate need is a <code>Tendsto</code> statement on <code>ùìù[‚â†] 0</code>, and it looks like it should come from:</p>\n<p>(a) <code>Tendsto (fun z =&gt; z^k) (ùìù[‚â†] 0) (ùìù 0)</code> for <code>k&gt;0</code>,<br>\n(b) <code>tendsto_const_nhds.mul</code> / norm estimates, and<br>\n(c) <code>tendsto_zero_of_norm_tendsto_zero</code> / <code>tendsto_principal</code> style lemmas.</p>\n<p>So I‚Äôm hoping to stay in the ‚Äúseries + bound ‚Üí tendsto‚Äù lane rather than add a complex l‚ÄôH√¥pital rule.</p>",
        "id": 569872580,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769265378
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span> <a href=\"#narrow/channel/287929-mathlib4/topic/deriv.20of.20sin.20z.20.2F.20z.20at.200.20.28.E2.84.82.29/near/569872041\">said</a>:</p>\n<blockquote>\n<p>BTW, did you try asking AI like <a href=\"https://aristotle.harmonic.fun/\">https://aristotle.harmonic.fun/</a> ?</p>\n</blockquote>\n<p>I have been using AI  to iterate on the Lean proof, but the main bottleneck is not generating code, it‚Äôs finding the right existing mathlib lemmas in this snapshot (many <code>tsum_*</code> conveniences are missing / renamed). Any pointers to the canonical lemma chain for ‚Äúnorm bound ‚Üí <code>Tendsto</code> on <code>ùìù[‚â†] 0</code>‚Äù would still be hugely appreciated.</p>",
        "id": 569872689,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769265467
    },
    {
        "content": "<p>The simplest route I see is to avoid continuity of multiplication on ‚ÑÇ entirely: prove a norm bound on the quotient, e.g. from <code>‚Äñf z‚Äñ ‚â§ C * ‚Äñz‚Äñ^4</code> get <code>‚Äñf z / z^3‚Äñ ‚â§ C * ‚Äñz‚Äñ</code> on <code>z‚â†0</code>, then use <code>Tendsto (fun z =&gt; ‚Äñz‚Äñ) (ùìù[‚â†] 0) (ùìù 0)</code> and a squeeze lemma (<code>tendsto_of_tendsto_of_tendsto_of_le_of_le</code> or any norm-variant), and finally <code>tendsto_zero_of_norm_tendsto_zero</code>. Is there an existing lemma that turns an eventual bound <code>‚Äñg z‚Äñ ‚â§ h z</code> plus <code>Tendsto h ‚Ä¶ (ùìù 0)</code> into <code>Tendsto g ‚Ä¶ (ùìù 0)</code>?</p>",
        "id": 569873667,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769266202
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=squeeze_zero_norm%27#doc\">docs#squeeze_zero_norm'</a></p>",
        "id": 569874300,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769266714
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> Norm.norm, Filter.Eventually, LE.le, 0, Filter.Tendsto</p>",
        "id": 569874345,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769266757
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Normed/Group/Continuity.html#squeeze_one_norm%27\">squeeze_one_norm'</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Normed/Group/Continuity.html#squeeze_zero_norm%27\">squeeze_zero_norm'</a>, and <a href=\"https://loogle.lean-lang.org/?q=Norm.norm%2C%20Filter.Eventually%2C%20LE.le%2C%200%2C%20Filter.Tendsto\">2 more</a></p>",
        "id": 569874348,
        "sender_full_name": "loogle",
        "timestamp": 1769266758
    },
    {
        "content": "<p>Thanks, <code>squeeze_zero_norm'</code> is exactly what I needed. I can avoid <code>ContinuousMul</code> and any <code>Tendsto.mul</code> on <code>‚ÑÇ</code> by proving an eventual bound on the norm and then applying <code>squeeze_zero_norm'</code>. Concretely, from <code>‚Äñf z‚Äñ ‚â§ C * ‚Äñz‚Äñ^4</code> (eventually on <code>ùìù[‚â†] 0</code>) and <code>z ‚â† 0</code> I get <code>‚Äñf z / z^3‚Äñ ‚â§ C * ‚Äñz‚Äñ</code>, then combine <code>tendsto_norm_nhdsNE_zero</code> with <code>tendsto_const_nhds.mul</code> (in <code>‚Ñù</code>) and finish with <code>squeeze_zero_norm'</code>. Much appreciated.</p>",
        "id": 569874719,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769267068
    },
    {
        "content": "<p>Thanks everyone for your helpful suggestions. Greatly appreciated.</p>\n<p>For the record, what worked in the end was to avoid continuity of multiplication and instead go via norm bounds and a squeeze argument. I proved the cubic expansion of <code>Complex.sin</code> by showing</p>\n<p>(\\sin z - z - (-(1/6)) z^3)/z^3 \\to 0</p>\n<p>on <code>ùìù[‚â†] 0</code>, using dominated convergence on the normalized remainder series and then converting <code>‚Äñf z‚Äñ ‚Üí 0</code> into <code>f z ‚Üí 0</code>.</p>\n<p>The lemmas that made this go through cleanly were:</p>\n<ul>\n<li>\n<p><code>tendsto_zero_iff_norm_tendsto_zero</code>,</p>\n</li>\n<li>\n<p><code>tendsto_tsum_of_dominated_convergence</code>,</p>\n</li>\n<li>\n<p>and the squeeze-style lemmas in <code>Analysis/Normed/Group/Continuity</code>.</p>\n</li>\n</ul>\n<p>So this now gives:</p>\n<p><code>Tendsto (fun z =&gt; (Complex.sin z - z) / z^3) (ùìù[‚â†] 0) (ùìù (-(1/6)))</code></p>",
        "id": 569886580,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769273171
    },
    {
        "content": "<p>Here is a proof from Aristotle (for Lean/Mathlib v4.24.0, may need adjustments for the current version). It goes straight via the <code>tsum</code> definition, with almost no <code>sin</code>-specific theory.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">limit_sin_sub_id_div_pow_three</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">sin</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">nhdsWithin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"mi\">0</span><span class=\"o\">}</span><span class=\"bp\">·∂ú</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">nhds</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- We'll use the fact that $\\sin(z) = z - \\frac{z^3}{6} + O(z^5)$ to simplify the expression.</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_sin_approx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">sin</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">^</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">^</span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚àë'</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">factorial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">z</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">sin_eq_tsum</span><span class=\"o\">]</span><span class=\"bp\">;</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">Summable</span><span class=\"bp\">.</span><span class=\"n\">sum_add_tsum_nat_add</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">]</span><span class=\"bp\">;</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_range_succ</span><span class=\"w\"> </span><span class=\"o\">]</span><span class=\"bp\">;</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">tsum_mul_left</span><span class=\"w\"> </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">ring</span><span class=\"bp\">;</span>\n<span class=\"w\">    </span><span class=\"bp\">¬∑</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Summable</span><span class=\"bp\">.</span><span class=\"n\">of_norm</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">summable_pow_div_factorial</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|&gt;</span><span class=\"w\"> </span><span class=\"n\">Summable</span><span class=\"bp\">.</span><span class=\"n\">comp_injective</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Substitute the approximation into the expression.</span>\n<span class=\"w\">  </span><span class=\"n\">suffices</span><span class=\"w\"> </span><span class=\"n\">h_subst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Tendsto</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚àë'</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">factorial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">))))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"bp\">‚Üí</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">nhdsWithin</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"mi\">0</span><span class=\"o\">}</span><span class=\"bp\">·∂ú</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">nhds</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">refine'</span><span class=\"w\"> </span><span class=\"n\">h_subst</span><span class=\"bp\">.</span><span class=\"n\">congr'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">filter_upwards</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"n\">self_mem_nhdsWithin</span><span class=\"w\"> </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"n\">h_sin_approx</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"n\">eq_comm</span><span class=\"w\"> </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"n\">div_eq_iff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">pow_ne_zero</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">ring</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"c1\">-- The series $\\sum_{k=0}^{\\infty} \\frac{(-1)^k z^{2k}}{(2k+5)!}$ converges uniformly to an analytic function on any compact subset of $\\mathbb{C}$.</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_series_uniform</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚ÑÇ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">‚àë'</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñï</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">factorial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Metric</span><span class=\"bp\">.</span><span class=\"n\">closedBall</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">refine'</span><span class=\"w\"> </span><span class=\"n\">continuousOn_tsum</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"n\">zetaDelta</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">*;</span>\n<span class=\"w\">    </span><span class=\"n\">exacts</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">factorial</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Continuous</span><span class=\"bp\">.</span><span class=\"n\">continuousOn</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">continuity</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Summable</span><span class=\"bp\">.</span><span class=\"n\">comp_injective</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">summable_pow_div_factorial</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">div_le_div_of_nonneg_right</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">pow_le_one‚ÇÄ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">positivity</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">positivity</span><span class=\"w\"> </span><span class=\"o\">]</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"n\">field_simp</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">tendsto_nhdsWithin_of_tendsto_nhds</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">convert</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Tendsto</span><span class=\"bp\">.</span><span class=\"n\">div_const</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Tendsto</span><span class=\"bp\">.</span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"n\">tendsto_const_nhds</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">Tendsto</span><span class=\"bp\">.</span><span class=\"n\">mul</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">tendsto_const_nhds</span><span class=\"bp\">.</span><span class=\"n\">mul</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto_id</span><span class=\"bp\">.</span><span class=\"n\">pow</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">h_series_uniform</span><span class=\"bp\">.</span><span class=\"n\">continuousAt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"n\">Metric</span><span class=\"bp\">.</span><span class=\"n\">closedBall_mem_nhds</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">zero_lt_one</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 569931895,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1769321338
    },
    {
        "content": "<p>Thanks, that‚Äôs very helpful. My project goal is a Lean proof of Euler‚ÄìBasel that tracks Euler‚Äôs product-and-coefficient comparison as closely as possible, so I‚Äôm using a small-z cubic remainder lemma in a very specific ‚Äúdrop-in‚Äù form for the product step. Your lemma looks like a great alternative derivation and a nice consistency check, and I may add a small bridge lemma showing equivalence once the main pipeline is finished.</p>",
        "id": 569948945,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769341661
    },
    {
        "content": "<p>I wanted to check something about novelty before I go much further.</p>\n<p>I‚Äôm working on a Lean formalisation of an <em>Euler-style</em> proof of the Basel problem, based on:</p>\n<p>‚Ä¢ the infinite product<br>\n<code>sin(œÄ z)/(œÄ z) = ‚àè (1 - z¬≤/n¬≤)</code><br>\n‚Ä¢ a quadratic expansion of the LHS near <code>z = 0</code>,<br>\n‚Ä¢ a quadratic expansion of the finite Euler product, and<br>\n‚Ä¢ coefficient comparison as <code>N ‚Üí ‚àû</code> to extract <code>‚àë 1/n¬≤ = œÄ¬≤/6</code>.</p>\n<p>In other words, I‚Äôm trying to mirror Euler‚Äôs original coefficient-comparison argument using the sine product, rather than going via Fourier series / Parseval / modern power series machinery.</p>\n<p>Does anyone know of an existing Lean formalisation of <em>this</em> style of proof (sine product + coefficient comparison), or would this be new?<br>\nI know mathlib has a Basel proof, but as far as I can tell it goes via Fourier analysis.</p>\n<p>Any pointers very welcome.</p>",
        "id": 569960309,
        "sender_full_name": "Bob Jefferson",
        "timestamp": 1769353845
    }
]