[
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/IsAdjoinRoot.html#IsAdjoinRoot.subsingleton\">IsAdjoinRoot.subsingleton</a> is completely redundant:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">IsAdjoinRoot</span><span class=\"bp\">.</span><span class=\"n\">subsingleton</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">}</span>\n<span class=\"w\">    </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsAdjoinRoot</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"n\">S</span>\n</code></pre></div>\n<p>because it's already implied by <code>Algebra R S</code> (and <code>Subsingleton R</code>) via <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Ring/Hom/Defs.html#RingHom.codomain_trivial\">RingHom.codomain_trivial</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c1\">-- can't be an instance because `R` can't be inferred</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">Subsingleton</span><span class=\"bp\">.</span><span class=\"n\">of_algebra</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Algebra</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">algebraMap</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">codomain_trivial</span>\n</code></pre></div>",
        "id": 538731351,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1757535036
    },
    {
        "content": "<p>but actually the <code>Subsingleton.of_algebra</code> lemma is not in mathlib, and moreover once again it cannot be an instance, so it will be fundamentally less searchable</p>",
        "id": 538731406,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1757535062
    },
    {
        "content": "<p>and the first redundant theorem is actually serving a purpose, because in a <a href=\"https://github.com/leanprover-community/mathlib4/blob/ae91682d714ec14c07b645dc8434123b078cb762/Mathlib/RingTheory/IsAdjoinRoot.lean#L461\">later part of the code</a>, it is used:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">        </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">subsingleton_or_nontrivial</span><span class=\"w\"> </span><span class=\"n\">R</span>\n<span class=\"w\">        </span><span class=\"bp\">Â·</span><span class=\"w\"> </span><span class=\"n\">subsingleton</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">subsingleton</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 538731487,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1757535100
    },
    {
        "content": "<p>what's the best way to deal with this?</p>",
        "id": 538731498,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1757535106
    },
    {
        "content": "<p>can we modify the <code>nontriviality</code> tactic to deal with this situation?</p>",
        "id": 538731602,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1757535154
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/29516\">#29516</a></p>",
        "id": 538733801,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1757536131
    },
    {
        "content": "<p>You can just use <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Module/Defs.html#Module.subsingleton\">Module.subsingleton</a></p>",
        "id": 538742392,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1757540527
    },
    {
        "content": "<p>well there's always more than one way to... uh... crack a nut</p>",
        "id": 538742441,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1757540569
    }
]