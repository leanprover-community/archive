[
    {
        "content": "<p>Hi all,</p>\n<p>I’ve written a Lean file implementing a definition of the complex square root (<code>csqrt : ℂ → ℂ</code>) via the principal branch of the logarithm, along with a collection of related theorems (e.g., <code>csqrt x ^ 2 = x</code>, the behavior on the arg, re/im part formulas, etc.). The implementation is noncomputable and consistent with the usual principal square root used in complex analysis.</p>\n<p>Would this be of interest to contribute to Mathlib4, or as a basis for enhancing existing complex analysis utilities?</p>\n<p>If so, could you please clarify the project policy for : Naming convention/Proof style/Documentation.</p>",
        "id": 534644590,
        "sender_full_name": "Ilvan",
        "timestamp": 1755260991
    },
    {
        "content": "<p>Just to check, under what conditions is <code>csqrt z = z ^ (0.5 : ℂ)</code>? Do they agree globally?</p>",
        "id": 534646443,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755261786
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 534651325,
        "sender_full_name": "Ilvan",
        "timestamp": 1755263917
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> I have</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">csqrt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">exp</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Complex</span><span class=\"bp\">.</span><span class=\"n\">log</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℂ</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>So I will check and write theorem but i think forall x</p>",
        "id": 534651405,
        "sender_full_name": "Ilvan",
        "timestamp": 1755263952
    },
    {
        "content": "<p>For more context : I have already proof</p>\n<p>theorem sqrt_sq_iff {a b : ℂ} : a^2 = b ↔ (a = csqrt b ∨ a = - csqrt b)<br>\ntheorem csqrt_sq_eq_or_neg (x : ℂ) : (csqrt (x^2) = x) ∨ (csqrt (x^2) = -x)<br>\ntheorem csqrt_sq_eq (x : ℂ) : (csqrt x)^2 = x<br>\ntheorem csqrt_re (x : ℂ) : (csqrt x).re = Real.sqrt (‖x‖) * Real.cos (x.arg * (1 / 2))<br>\ntheorem csqrt_im (x : ℂ) : (csqrt x).im = Real.sqrt (‖x‖) * Real.sin (x.arg * (1 / 2))<br>\ntheorem csqrt_mod (x : ℂ) : norm (csqrt x) = √(norm x)<br>\ntheorem csqrt_arg (x : ℂ) : arg (csqrt x) = (arg x) / 2</p>",
        "id": 534651887,
        "sender_full_name": "Ilvan",
        "timestamp": 1755264167
    },
    {
        "content": "<p>So yes <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>  <code> csqrq_to_pow (x : ℂ) : csqrt x = x ^ (1 / 2 : ℂ)</code> i have wrote a proof</p>",
        "id": 534658213,
        "sender_full_name": "Ilvan",
        "timestamp": 1755266408
    },
    {
        "content": "<p>In that case it's not clear to me how useful adding the definition would be</p>",
        "id": 534724838,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1755302009
    },
    {
        "content": "<p>Ok thank you</p>",
        "id": 534775687,
        "sender_full_name": "Ilvan",
        "timestamp": 1755365953
    }
]