[
    {
        "content": "<p>Just for fun, I looked at the distribution of unicode characters in Mathlib's source files. For anyone interested in trivia, there are 610 individual characters and their frequency distribution is roughly exponential.</p>\n<p>I'm one of admittedly very few people here who are slightly worried that malicious contributors (or AIs that find exploits) might make use of \"cybersecurity-type vulnerabilities\" to introduce inconsistencies. Given that unicode is generally a cybersecurity nightmare in most software, I wonder if Mathlib has any checks (e.g. in the linter) or guidelines on using and introducing new unicode. It does not seem so and I think it would be a good idea, e.g., to have a \"whitelist of unicode characters\" and a linter warning to be issued to any PR introducing <em>new</em> characters.</p>\n<p>I found some interesting instances of non-printable non-ascii characters:</p>\n<ul>\n<li>There is a U+200b (â€‹zero width space) in docstrings <a href=\"https://github.com/leanprover-community/mathlib4/blob/7733e607cf3e4ec82a546de747a4abddbdcae693/Mathlib/Data/Matrix/Basis.lean#L246\">here</a> and <a href=\"https://github.com/leanprover-community/mathlib4/blob/7733e607cf3e4ec82a546de747a4abddbdcae693/Mathlib/Data/Matrix/Basis.lean#L271\">here</a></li>\n<li>There is U+200c (zero-width non-joiner) in docstrings <a href=\"https://github.com/leanprover-community/mathlib4/blob/7733e607cf3e4ec82a546de747a4abddbdcae693/Mathlib/Data/List/Defs.lean#L456\">here</a> and <a href=\"https://github.com/leanprover-community/mathlib4/blob/7733e607cf3e4ec82a546de747a4abddbdcae693/Mathlib/Data/List/Defs.lean#L475\">here</a>, which the symmetry between those two might suggest they are intentional, but I can't tell why it's used.</li>\n</ul>\n<p>What do you think? Should we bother removing these, assuming they are unintentional? Should we worry in general about weird unicode characters being introduced and going unnoticed in PRs?</p>",
        "id": 448721083,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1719962930
    },
    {
        "content": "<p>Well the nice thing about working in a language which asks you to prove things is that it should be impossible to introduce an inconsistency, at least in the mathematical sense, solely by including tricky unicode characters in theorems because the theorems are eventually checked by the kernel and are either true or not.</p>\n<p>Your concern is perhaps a little more valid in the context of definitions that may not be what they are supposed to look like. But I think the mathlib community is currently focused on research math and this attack model is not a big concern for that endeavor. Still, removing unnecessary complications can't hurt. </p>\n<p>I do think a linter for unicode characters that don't have backslash codes makes sense though (at least outside of comments), because if any of those are introduced, it could make it harder for maintainers to edit that code after the fact.</p>",
        "id": 448724773,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1719964426
    },
    {
        "content": "<p>I'd be interested to see the unicode frequency stats</p>",
        "id": 448725100,
        "sender_full_name": "Bolton Bailey",
        "timestamp": 1719964616
    },
    {
        "content": "<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Individual frequencies</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<p>'Å ' =&gt; 1<br>\n'â‰°' =&gt; 1<br>\n'<span aria-label=\"fast forward\" class=\"emoji emoji-23e9\" role=\"img\" title=\"fast forward\">:fast_forward:</span>' =&gt; 1<br>\n'âŠˆ' =&gt; 1<br>\n'Âµ' =&gt; 1<br>\n'â‹®' =&gt; 1<br>\n'<span aria-label=\"new\" class=\"emoji emoji-1f195\" role=\"img\" title=\"new\">:new:</span>' =&gt; 1<br>\n'á»³' =&gt; 1<br>\n'Ã½' =&gt; 1<br>\n'<span aria-label=\"time ticking\" class=\"emoji emoji-23f3\" role=\"img\" title=\"time ticking\">:time_ticking:</span>' =&gt; 1<br>\n'Ã¬' =&gt; 1<br>\n'â„¢' =&gt; 1<br>\n'â¥¥' =&gt; 1<br>\n'â–¼' =&gt; 1<br>\n'Â°' =&gt; 1<br>\n'ğ“–' =&gt; 1<br>\n'ğ”£' =&gt; 1<br>\n'Ğ¸' =&gt; 1<br>\n'<span aria-label=\"question\" class=\"emoji emoji-2753\" role=\"img\" title=\"question\">:question:</span>' =&gt; 1<br>\n'â…“' =&gt; 1<br>\n'áº§' =&gt; 1<br>\n'â‰£' =&gt; 1<br>\n'â‡˜' =&gt; 1<br>\n'<span aria-label=\"light bulb\" class=\"emoji emoji-1f4a1\" role=\"img\" title=\"light bulb\">:light_bulb:</span>' =&gt; 1<br>\n'<span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span>' =&gt; 1<br>\n'Ä' =&gt; 1<br>\n'<span aria-label=\"checkered flag\" class=\"emoji emoji-1f3c1\" role=\"img\" title=\"checkered flag\">:checkered_flag:</span>' =&gt; 1<br>\n'âš ' =&gt; 1<br>\n'Ñ‡' =&gt; 1<br>\n'á´œ' =&gt; 2<br>\n'á¶¹' =&gt; 2<br>\n'áµ§' =&gt; 2<br>\n'â‹' =&gt; 2<br>\n'Â´' =&gt; 2<br>\n'á´„' =&gt; 2<br>\n'á´®' =&gt; 2<br>\n'á¶»' =&gt; 2<br>\n'êœ°' =&gt; 2<br>\n'ÃŸ' =&gt; 2<br>\n'á´¢' =&gt; 2<br>\n'á´' =&gt; 2<br>\n'á´€' =&gt; 2<br>\n'â±½' =&gt; 2<br>\n'Ã¸' =&gt; 2<br>\n'ğ“' =&gt; 2<br>\n'êœ±' =&gt; 2<br>\n'áµ‹' =&gt; 2<br>\n'Â½' =&gt; 2<br>\n'á´°' =&gt; 2<br>\n'<span aria-label=\"octopus\" class=\"emoji emoji-1f419\" role=\"img\" title=\"octopus\">:octopus:</span>' =&gt; 2<br>\n'â¼' =&gt; 2<br>\n'É´' =&gt; 2<br>\n'Ã' =&gt; 2<br>\n'êŸ´' =&gt; 2<br>\n'ê¯' =&gt; 2<br>\n'Äƒ' =&gt; 2<br>\n'á¶¿' =&gt; 2<br>\n'á´¶' =&gt; 2<br>\n'ÊŸ' =&gt; 2<br>\n'Êœ' =&gt; 2<br>\n'ğ¥' =&gt; 2<br>\n'áµŸ' =&gt; 2<br>\n'\\u200b' =&gt; 2<br>\n'Ê™' =&gt; 2<br>\n'Î’' =&gt; 2<br>\n'áµª' =&gt; 2<br>\n'áµ' =&gt; 2<br>\n'áµ©' =&gt; 2<br>\n'áµ˜' =&gt; 2<br>\n'Ê³' =&gt; 2<br>\n'áµ¦' =&gt; 2<br>\n'Ê²' =&gt; 2<br>\n'á´º' =&gt; 2<br>\n'á´Š' =&gt; 2<br>\n'á´›' =&gt; 2<br>\n'á´¡' =&gt; 2<br>\n'á´¼' =&gt; 2<br>\n'á´ ' =&gt; 2<br>\n'ğ”‡' =&gt; 2<br>\n'Éª' =&gt; 2<br>\n'Ì€' =&gt; 2<br>\n'á´¿' =&gt; 2<br>\n'áµ¡' =&gt; 2<br>\n'á´±' =&gt; 2<br>\n'á´‡' =&gt; 2<br>\n'Ğ¾' =&gt; 2<br>\n'á´' =&gt; 2<br>\n'Ê€' =&gt; 2<br>\n'áµ‚' =&gt; 2<br>\n'á´…' =&gt; 2<br>\n'á´·' =&gt; 2<br>\n'á´¾' =&gt; 2<br>\n'É¢' =&gt; 2<br>\n'Ê' =&gt; 2<br>\n'á´µ' =&gt; 2<br>\n'áµ ' =&gt; 2<br>\n'á´˜' =&gt; 2<br>\n'âˆ’' =&gt; 2<br>\n'â‚Œ' =&gt; 2<br>\n'Ä' =&gt; 2<br>\n'áµ¨' =&gt; 2<br>\n'á´‹' =&gt; 2<br>\n'áµ' =&gt; 2<br>\n'âŸ' =&gt; 2<br>\n'â¸' =&gt; 3<br>\n'Ğ½' =&gt; 3<br>\n'â—¥' =&gt; 3<br>\n'â—¹' =&gt; 3<br>\n'âµ' =&gt; 3<br>\n'â—¢' =&gt; 3<br>\n'â—¿' =&gt; 3<br>\n'á¶¥' =&gt; 3<br>\n'ğ•‹' =&gt; 3<br>\n'âŸ‹' =&gt; 3<br>\n'â¹' =&gt; 3<br>\n'Å„' =&gt; 3<br>\n'Ğ°' =&gt; 3<br>\n'Ğ˜' =&gt; 3<br>\n'âŒŸ' =&gt; 3<br>\n'Å‚' =&gt; 3<br>\n'âŠ¸' =&gt; 3<br>\n'â‚' =&gt; 4<br>\n'Ãª' =&gt; 4<br>\n'â€²' =&gt; 4<br>\n'â‚' =&gt; 4<br>\n'â½' =&gt; 4<br>\n'Å›' =&gt; 4<br>\n'â¾' =&gt; 4<br>\n'â†»' =&gt; 4<br>\n'ğ’' =&gt; 4<br>\n'Ã³' =&gt; 4<br>\n'Å½' =&gt; 4<br>\n'ï¸' =&gt; 4<br>\n'â„–' =&gt; 4<br>\n'Å' =&gt; 4<br>\n'á´³' =&gt; 4<br>\n'â·' =&gt; 4<br>\n'ğ”®' =&gt; 4<br>\n'Ì‚' =&gt; 5<br>\n'â–½' =&gt; 5<br>\n'ê™³' =&gt; 5<br>\n'âŸµ' =&gt; 5<br>\n'Ğ²' =&gt; 5<br>\n'ï¼¼' =&gt; 6<br>\n'<span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span>' =&gt; 6<br>\n'\\u200c' =&gt; 6<br>\n'ï¼' =&gt; 6<br>\n'Ã¦' =&gt; 6<br>\n'Ä‡' =&gt; 6<br>\n'Ã ' =&gt; 6<br>\n'â† ' =&gt; 7<br>\n'â‰±' =&gt; 7<br>\n'ğ“¦' =&gt; 7<br>\n'ğ‘¹' =&gt; 8<br>\n'â‚‰' =&gt; 8<br>\n'â´' =&gt; 8<br>\n'â¶' =&gt; 8<br>\n'ğ”½' =&gt; 9<br>\n'Ê°' =&gt; 9<br>\n'âˆ–' =&gt; 9<br>\n'Å™' =&gt; 10<br>\n'â‰Ÿ' =&gt; 10<br>\n'ğ‘³' =&gt; 10<br>\n'âˆ‹' =&gt; 10<br>\n'áµ—' =&gt; 10<br>\n'â€”' =&gt; 10<br>\n'âŠ›' =&gt; 11<br>\n'Ã‰' =&gt; 11<br>\n'ğ’µ' =&gt; 12<br>\n'ğ•Œ' =&gt; 12<br>\n'ğ’…' =&gt; 12<br>\n'âˆ¤' =&gt; 12<br>\n'Â³' =&gt; 12<br>\n'âŠƒ' =&gt; 13<br>\n'â†Ÿ' =&gt; 13<br>\n'â†˜' =&gt; 13<br>\n'â–³' =&gt; 13<br>\n'â†­' =&gt; 14<br>\n'âˆ‡' =&gt; 14<br>\n'ğ““' =&gt; 15<br>\n'Ã´' =&gt; 15<br>\n'áµ' =&gt; 15<br>\n'Â¥' =&gt; 16<br>\n'ğ“š' =&gt; 16<br>\n'ğ”­' =&gt; 16<br>\n'ğ“¥' =&gt; 17<br>\n'ğ•€' =&gt; 17<br>\n'ğ“£' =&gt; 17<br>\n'ğ”¹' =&gt; 17<br>\n'â”Œ' =&gt; 17<br>\n'<span aria-label=\"black medium small square\" class=\"emoji emoji-25fe\" role=\"img\" title=\"black medium small square\">:black_medium_small_square:</span>' =&gt; 17<br>\n'â‡‰' =&gt; 17<br>\n'â€™' =&gt; 18<br>\n'â—«' =&gt; 18<br>\n'Ã§' =&gt; 19<br>\n'â‹ˆ' =&gt; 20<br>\n'Ã¯' =&gt; 20<br>\n'Å' =&gt; 21<br>\n'Å¡' =&gt; 21<br>\n'â€¼' =&gt; 21<br>\n'âˆ¥' =&gt; 22<br>\n'Ã¨' =&gt; 22<br>\n'â„‹' =&gt; 22<br>\n'Å‘' =&gt; 23<br>\n'âˆ¯' =&gt; 24<br>\n'ï¼' =&gt; 24<br>\n'â„' =&gt; 24<br>\n'ğ•„' =&gt; 25<br>\n'áµ›' =&gt; 25<br>\n'âŠ™' =&gt; 25<br>\n'ğ“’' =&gt; 25<br>\n'Ã¼' =&gt; 26<br>\n'âš¬' =&gt; 27<br>\n'ğ“‘' =&gt; 27<br>\n'â„‘' =&gt; 29<br>\n'ğ’¥' =&gt; 29<br>\n'ğ’¯' =&gt; 30<br>\n'â„°' =&gt; 31<br>\n'âŸ' =&gt; 32<br>\n'ğ“¡' =&gt; 33<br>\n'â„œ' =&gt; 33<br>\n'Ï…' =&gt; 34<br>\n'ğ’«' =&gt; 35<br>\n'Ã­' =&gt; 36<br>\n'Ã²' =&gt; 39<br>\n'Â§' =&gt; 39<br>\n'ÄŒ' =&gt; 41<br>\n'âˆ¼' =&gt; 43<br>\n'ğ“' =&gt; 44<br>\n'Ê·' =&gt; 45<br>\n'Ë¡' =&gt; 46<br>\n'ğ”—' =&gt; 46<br>\n'ğ’ª' =&gt; 47<br>\n'â”œ' =&gt; 47<br>\n'ğ’±' =&gt; 50<br>\n'â–¡' =&gt; 51<br>\n'âœ¶' =&gt; 52<br>\n'Ê¸' =&gt; 52<br>\n'â‹Š' =&gt; 53<br>\n'ğ’„' =&gt; 54<br>\n'â™©' =&gt; 55<br>\n'Â±' =&gt; 56<br>\n'ğ’Ÿ' =&gt; 57<br>\n'â€ ' =&gt; 57<br>\n'ğ”»' =&gt; 59<br>\n'âœ' =&gt; 61<br>\n'á´¹' =&gt; 61<br>\n'ğ’' =&gt; 62<br>\n'âŠš' =&gt; 68<br>\n'â€¦' =&gt; 71<br>\n'ğ’´' =&gt; 71<br>\n'Ï–' =&gt; 75<br>\n'â‚‡' =&gt; 75<br>\n'â†¿' =&gt; 76<br>\n'â€“' =&gt; 79<br>\n'Ã¤' =&gt; 83<br>\n'âŠ‡' =&gt; 83<br>\n'ğ' =&gt; 84<br>\n'á´¬' =&gt; 84<br>\n'â‰¼' =&gt; 87<br>\n'áµ' =&gt; 87<br>\n'âˆ®' =&gt; 93<br>\n'â‚‹' =&gt; 94<br>\n'ğ” ' =&gt; 96<br>\n'â†—' =&gt; 97<br>\n'â„' =&gt; 99<br>\n'ï¿¢' =&gt; 100<br>\n'â”€' =&gt; 101<br>\n'â€œ' =&gt; 102<br>\n'â€' =&gt; 103<br>\n'ğ’®' =&gt; 104<br>\n'ğ•†' =&gt; 106<br>\n'Ã¡' =&gt; 108<br>\n'áµ‰' =&gt; 108<br>\n'â†¾' =&gt; 110<br>\n'áµ' =&gt; 110<br>\n'á´¸' =&gt; 112<br>\n'â©¿' =&gt; 113<br>\n'â‡”' =&gt; 114<br>\n'ğ•' =&gt; 116<br>\n'âˆ' =&gt; 121<br>\n'ğ•Š' =&gt; 122<br>\n'Â²' =&gt; 124<br>\n'â‡’' =&gt; 124<br>\n'â—ƒ' =&gt; 126<br>\n'â±¼' =&gt; 130<br>\n'âŠ¨' =&gt; 132<br>\n'Î™' =&gt; 136<br>\n'â¤³' =&gt; 136<br>\n'ğ”¼' =&gt; 138<br>\n'â„³' =&gt; 139<br>\n'â‚’' =&gt; 142<br>\n'â¨¿' =&gt; 143<br>\n'ğ“¢' =&gt; 146<br>\n'Î˜' =&gt; 146<br>\n'â±' =&gt; 148<br>\n'ğ“œ' =&gt; 151<br>\n'â—‹' =&gt; 151<br>\n'â§' =&gt; 152<br>\n'â‹¯' =&gt; 154<br>\n'ğ’³' =&gt; 157<br>\n'â‚•' =&gt; 158<br>\n'ğ–£' =&gt; 163<br>\n'â¬' =&gt; 166<br>\n'áµ£' =&gt; 166<br>\n'â†“' =&gt; 167<br>\n'â‡¨' =&gt; 172<br>\n'á˜' =&gt; 181<br>\n'âŸ‚' =&gt; 184<br>\n'âŠ»' =&gt; 188<br>\n'âŠ¼' =&gt; 189<br>\n'â¨¯' =&gt; 190<br>\n'â‚‘' =&gt; 190<br>\n'â™¯' =&gt; 191<br>\n'â‰º' =&gt; 197<br>\n'âˆ ' =&gt; 199<br>\n'â¨' =&gt; 212<br>\n'â‚ˆ' =&gt; 212<br>\n'âˆ—' =&gt; 227<br>\n'â‹–' =&gt; 228<br>\n'âŠ' =&gt; 233<br>\n'á´´' =&gt; 233<br>\n'â‚š' =&gt; 237<br>\n'â¨³' =&gt; 239<br>\n'âˆ†' =&gt; 241<br>\n'âŠ‚' =&gt; 251<br>\n'á—®' =&gt; 260<br>\n'âˆ™' =&gt; 263<br>\n'â‚†' =&gt; 265<br>\n' ' =&gt; 270<br>\n'âŸ¹' =&gt; 274<br>\n'â‹€' =&gt; 276<br>\n'âº' =&gt; 290<br>\n'âŒˆ' =&gt; 301<br>\n'âŒ‰' =&gt; 301<br>\n'áµ€' =&gt; 315<br>\n'âˆ¡' =&gt; 329<br>\n'ğ•' =&gt; 331<br>\n'ğ“' =&gt; 340<br>\n'â„™' =&gt; 356<br>\n'â¨‚' =&gt; 362<br>\n'â†¥' =&gt; 365<br>\n'ğ’¢' =&gt; 389<br>\n'â…Ÿ' =&gt; 389<br>\n'â‚–' =&gt; 399<br>\n'â”‚' =&gt; 399<br>\n'âŠ£' =&gt; 411<br>\n'Â«' =&gt; 413<br>\n'Â»' =&gt; 413<br>\n'ğŸ­' =&gt; 423<br>\n'â„“' =&gt; 451<br>\n'â¿' =&gt; 456<br>\n'â‚…' =&gt; 470<br>\n'â„µ' =&gt; 483<br>\n'â„¬' =&gt; 495<br>\n'â¨' =&gt; 498<br>\n'ğ“•' =&gt; 505<br>\n'Î¾' =&gt; 527<br>\n'â‰ˆ' =&gt; 547<br>\n'áµ‡' =&gt; 562<br>\n'â‰Œ' =&gt; 576<br>\n'âŒŠ' =&gt; 580<br>\n'âŒ‹' =&gt; 583<br>\n'áµ¤' =&gt; 588<br>\n'âŸ¯' =&gt; 606<br>\n'âŸ®' =&gt; 606<br>\n'â„' =&gt; 638<br>\n'ğ”¸' =&gt; 647<br>\n'â–·' =&gt; 658<br>\n'ğ“˜' =&gt; 662<br>\n'âŠ•' =&gt; 669<br>\n'ğ“Ÿ' =&gt; 671<br>\n'â‰¡' =&gt; 674<br>\n'â‚“' =&gt; 674<br>\n'â—' =&gt; 676<br>\n'Î›' =&gt; 679<br>\n'Î”' =&gt; 723<br>\n'ğ•‚' =&gt; 732<br>\n'âˆš' =&gt; 746<br>\n'ğ“¤' =&gt; 752<br>\n'â°' =&gt; 773<br>\n'áµƒ' =&gt; 786<br>\n'ğ’°' =&gt; 805<br>\n'Ï•' =&gt; 827<br>\n'ğ”–' =&gt; 846<br>\n'â‹†' =&gt; 850<br>\n'Î¨' =&gt; 856<br>\n'â†ª' =&gt; 906<br>\n'Ã¶' =&gt; 987<br>\n'â„±' =&gt; 998<br>\n'Î»' =&gt; 1007<br>\n'â‰ª' =&gt; 1008<br>\n'Î£' =&gt; 1068<br>\n'â‹‚' =&gt; 1081<br>\n'Î ' =&gt; 1081<br>\n'âŸª' =&gt; 1116<br>\n'Ã©' =&gt; 1116<br>\n'âŸ«' =&gt; 1117<br>\n'â†' =&gt; 1221<br>\n'â…' =&gt; 1221<br>\n'Ã«' =&gt; 1270<br>\n'Î¦' =&gt; 1335<br>\n'â¨…' =&gt; 1344<br>\n'â‚œ' =&gt; 1352<br>\n'âŸ¦' =&gt; 1353<br>\n'âŸ§' =&gt; 1353<br>\n'â„’' =&gt; 1358<br>\n'Ë£' =&gt; 1363<br>\n'â€¹' =&gt; 1424<br>\n'â€º' =&gt; 1424<br>\n'~' =&gt; 1437<br>\n'Î¶' =&gt; 1559<br>\n'&amp;' =&gt; 1581<br>\n'Î¸' =&gt; 1600<br>\n'Ï‡' =&gt; 1654<br>\n'â¨†' =&gt; 1665<br>\n'â‡‘' =&gt; 1670<br>\n'â§¸' =&gt; 1696<br>\n'â¦ƒ' =&gt; 1698<br>\n'â¦„' =&gt; 1698<br>\n'âˆ‰' =&gt; 1791<br>\n'â‚Š' =&gt; 1810<br>\n'âŠ¢' =&gt; 1847<br>\n'â‚˜' =&gt; 1880<br>\n'áµˆ' =&gt; 1953<br>\n'áµ¢' =&gt; 1982<br>\n'â‚›' =&gt; 2011<br>\n'Ë¢' =&gt; 2053<br>\n'ğ’œ' =&gt; 2090<br>\n'â‚™' =&gt; 2219<br>\n'á¶œ' =&gt; 2242<br>\n'áµ¥' =&gt; 2245<br>\n'â‹ƒ' =&gt; 2250<br>\n'Ï' =&gt; 2270<br>\n'â‚„' =&gt; 2290<br>\n'%' =&gt; 2310<br>\n'âˆ…' =&gt; 2331<br>\n'Ïˆ' =&gt; 2331<br>\n'âˆª' =&gt; 2444<br>\n'Î·' =&gt; 2654<br>\n'âŠ”' =&gt; 2723<br>\n'Î©' =&gt; 2733<br>\n'á¶ ' =&gt; 2751<br>\n'âˆ¨' =&gt; 2777<br>\n'âˆ£' =&gt; 2815<br>\n'â‚' =&gt; 2826<br>\n'âˆ' =&gt; 2873<br>\n'âŠ“' =&gt; 2904<br>\n'â„š' =&gt; 3071<br>\n'â‰…' =&gt; 3167<br>\n'áµ–' =&gt; 3308<br>\n'Ï‰' =&gt; 3565<br>\n'ğŸ™' =&gt; 3591<br>\n'áµ' =&gt; 3670<br>\n'âŠ¥' =&gt; 3744<br>\n'Î“' =&gt; 3782<br>\n'Ï„' =&gt; 3800<br>\n'â‹™' =&gt; 3891<br>\n'Îº' =&gt; 3894<br>\n'âŠ—' =&gt; 3950<br>\n'Â¬' =&gt; 4000<br>\n'âˆ©' =&gt; 4155<br>\n'â–¸' =&gt; 4451<br>\n'Î½' =&gt; 4540<br>\n'âŠ¤' =&gt; 4702<br>\n'âˆ«' =&gt; 4958<br>\n'âˆ‚' =&gt; 4975<br>\n'áµ’' =&gt; 5105<br>\n'âˆ‘' =&gt; 5365<br>\n'â„‚' =&gt; 5679<br>\n'\\\\' =&gt; 6012<br>\n'âˆ' =&gt; 6664<br>\n'Î´' =&gt; 6689<br>\n'âˆ˜' =&gt; 6805<br>\n'â‰¥' =&gt; 6821<br>\n'ğ“' =&gt; 6975<br>\n'â¥¤' =&gt; 7207<br>\n'âŠ†' =&gt; 7352<br>\n'â†‘' =&gt; 8168<br>\n'â„¤' =&gt; 8594<br>\n'â‰ƒ' =&gt; 8717<br>\n'â‚—' =&gt; 8834<br>\n'Îµ' =&gt; 9584<br>\n'âˆ§' =&gt; 10035<br>\n'Ïƒ' =&gt; 10116<br>\n'Î³' =&gt; 10216<br>\n'âˆƒ' =&gt; 10715<br>\n'Ã—' =&gt; 10767<br>\n'Â¹' =&gt; 10917<br>\n'7' =&gt; 11920<br>\n'9' =&gt; 12245<br>\n'Ï€' =&gt; 12325<br>\n'6' =&gt; 12553<br>\n'â»' =&gt; 12581<br>\n'8' =&gt; 12683<br>\n'â‚ƒ' =&gt; 12856<br>\n'$' =&gt; 13020<br>\n'5' =&gt; 13206<br>\n'â‰ ' =&gt; 13569<br>\n'â‰«' =&gt; 13864<br>\n'Ï†' =&gt; 14379<br>\n'â€¢' =&gt; 14849<br>\n'âŸ¶' =&gt; 15229<br>\n'!' =&gt; 16847<br>\n'4' =&gt; 18667<br>\n'J' =&gt; 19516<br>\n'â†¦' =&gt; 19542<br>\n'â€–' =&gt; 21203<br>\n'â‚€' =&gt; 21468<br>\n'â†”' =&gt; 21503<br>\n'ğ•œ' =&gt; 22184<br>\n'â„•' =&gt; 23374<br>\n'3' =&gt; 24670<br>\n'Q' =&gt; 25468<br>\n'Z' =&gt; 25574<br>\n'^' =&gt; 25644<br>\n'â„' =&gt; 26307<br>\n'Y' =&gt; 26374<br>\n'V' =&gt; 29135<br>\n';' =&gt; 29571<br>\n'Î¹' =&gt; 30792<br>\n'?' =&gt; 30958<br>\n'Î¼' =&gt; 31356<br>\n'â‰¤' =&gt; 33928<br>\n'K' =&gt; 36177<br>\n'âˆˆ' =&gt; 38631<br>\n'âˆ€' =&gt; 39296<br>\n'\"' =&gt; 41689<br>\n'Î²' =&gt; 46031<br>\n'â†' =&gt; 47877<br>\n'+' =&gt; 51442<br>\n'W' =&gt; 51488<br>\n'Â·' =&gt; 54240<br>\n'&lt;' =&gt; 56793<br>\n'U' =&gt; 57884<br>\n'X' =&gt; 62297<br>\n'|' =&gt; 63277<br>\n'@' =&gt; 69289<br>\n'âŸ©' =&gt; 77562<br>\n'âŸ¨' =&gt; 77563<br>\n'â‚' =&gt; 79302<br>\n'G' =&gt; 80494<br>\n'â‚‚' =&gt; 86058<br>\n'*' =&gt; 88775<br>\n'B' =&gt; 89545<br>\n'â†’' =&gt; 93282<br>\n'2' =&gt; 96306<br>\n'H' =&gt; 99439<br>\n'&gt;' =&gt; 104433<br>\n'D' =&gt; 105250<br>\n'0' =&gt; 107711<br>\n'1' =&gt; 116185<br>\n'O' =&gt; 123920<br>\n'j' =&gt; 126554<br>\n'N' =&gt; 134598<br>\n'Î±' =&gt; 136578<br>\n'z' =&gt; 142553<br>\n'{' =&gt; 143275<br>\n'}' =&gt; 143285<br>\n'k' =&gt; 143558<br>\n'E' =&gt; 144161<br>\n'P' =&gt; 162446<br>\n'/' =&gt; 166634<br>\n'#' =&gt; 167481<br>\n'\\'' =&gt; 167750<br>\n'L' =&gt; 176504<br>\n'T' =&gt; 188277<br>\n'R' =&gt; 197961<br>\n'A' =&gt; 217789<br>\n'F' =&gt; 223776<br>\n'q' =&gt; 256961<br>\n'I' =&gt; 262564<br>\n'M' =&gt; 290783<br>\n'C' =&gt; 292820<br>\n'w' =&gt; 301784<br>\n'-' =&gt; 302766<br>\n']' =&gt; 322792<br>\n'[' =&gt; 322809<br>\n'S' =&gt; 335403<br>\n'`' =&gt; 406772<br>\n'x' =&gt; 458010<br>\n',' =&gt; 458265<br>\n'=' =&gt; 503802<br>\n'v' =&gt; 511044<br>\n'y' =&gt; 700594<br>\n'(' =&gt; 736862<br>\n')' =&gt; 736911<br>\n'b' =&gt; 756442<br>\n'g' =&gt; 893803<br>\n':' =&gt; 938122<br>\n'.' =&gt; 1220850<br>\n'h' =&gt; 1260088<br>\n'd' =&gt; 1267012<br>\n'u' =&gt; 1370538<br>\n'f' =&gt; 1396002<br>\n'c' =&gt; 1398072<br>\n'p' =&gt; 1501108<br>\n'\\n' =&gt; 1642229<br>\n'm' =&gt; 1817260<br>\n'l' =&gt; 2026399<br>\n'_' =&gt; 2050395<br>\n's' =&gt; 2400006<br>\n'r' =&gt; 2479828<br>\n'a' =&gt; 2888223<br>\n'n' =&gt; 2976835<br>\n't' =&gt; 3089864<br>\n'o' =&gt; 3139211<br>\n'i' =&gt; 3307885<br>\n'e' =&gt; 4452160<br>\n' ' =&gt; 11429941</p>\n</div></div>\n<p>Julia code to recreate distribution plot:</p>\n<div class=\"codehilite\" data-code-language=\"Julia\"><pre><span></span><code><span class=\"k\">using</span><span class=\"w\"> </span><span class=\"n\">StatsBase</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Plots</span>\n<span class=\"n\">s</span><span class=\"o\">::</span><span class=\"kt\">String</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"n\">concatenate</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"o\">.</span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"o\">&gt;</span>\n<span class=\"n\">countmap</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">|&gt;</span><span class=\"w\"> </span><span class=\"n\">collect</span><span class=\"w\"> </span><span class=\"o\">|&gt;</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">-&gt;</span><span class=\"n\">sort</span><span class=\"p\">(</span><span class=\"n\">v</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"o\">=</span><span class=\"n\">pair</span><span class=\"o\">-&gt;</span><span class=\"n\">pair</span><span class=\"o\">.</span><span class=\"n\">second</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">|&gt;</span><span class=\"w\"> </span><span class=\"n\">tt</span><span class=\"o\">-&gt;</span><span class=\"n\">bar</span><span class=\"p\">(</span><span class=\"n\">tt</span><span class=\"o\">.|&gt;</span><span class=\"n\">s</span><span class=\"o\">-&gt;</span><span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">first</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">tt</span><span class=\"o\">.|&gt;</span><span class=\"n\">s</span><span class=\"o\">-&gt;</span><span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">second</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">yaxis</span><span class=\"o\">=</span><span class=\"ss\">:log</span><span class=\"p\">)</span>\n</code></pre></div>\n<p>Distribution:<br>\n<a href=\"/user_uploads/3121/c4ZloX6PRDck-mt1riJWR-CP/tmp.png\">tmp.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/c4ZloX6PRDck-mt1riJWR-CP/tmp.png\" title=\"tmp.png\"><img src=\"/user_uploads/3121/c4ZloX6PRDck-mt1riJWR-CP/tmp.png\"></a></div>",
        "id": 448725874,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1719965055
    },
    {
        "content": "<p>I would encourage removing the non-printable characters.</p>\n<p>(And yes, I'm aware that it's possible that someone added them to tweak the docs output in some clever and undocumented way. :-)</p>",
        "id": 448731405,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1719968674
    },
    {
        "content": "<p>Can I use a curly symbol <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">E</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{E}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.08944em;\">E</span></span></span></span> for the name of a variable? How?</p>",
        "id": 448858075,
        "sender_full_name": "Anthony Bordg",
        "timestamp": 1720015213
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"125073\">Anthony Bordg</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/448858075\">said</a>:</p>\n<blockquote>\n<p>Can I use a curly symbol <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">E</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{E}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.08944em;\">E</span></span></span></span> for the name of a variable? How?</p>\n</blockquote>\n<p>Any symbol that cannot be entered using &lt;backslash&gt;&lt;some letter combination&gt;, you can copy/paste from e.g. <a href=\"https://en.wikipedia.org/wiki/Mathematical_operators_and_symbols_in_Unicode\">https://en.wikipedia.org/wiki/Mathematical_operators_and_symbols_in_Unicode</a></p>\n<p>So for caligraphic E 'â„°', VSCode tells me to use <code>\\McE</code>. I guess 'Mc' stands for \"mathcal\". If you want to really confuse people, you could use something like 'â„‡'...</p>\n<p>Once you have a symbol in e.g. VSCode, hovering over it tells you the &lt;backslash&gt;&lt;some letter combination&gt;, if there is one.</p>",
        "id": 448859854,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1720015660
    },
    {
        "content": "<p>Fantastic Adomas! \\Mc is what I was looking for.</p>",
        "id": 448862330,
        "sender_full_name": "Anthony Bordg",
        "timestamp": 1720016359
    },
    {
        "content": "<p>The 'Docs: Show Unicode Input Abbrevations' command also opens a full list in VS Code.</p>",
        "id": 448864697,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1720016948
    },
    {
        "content": "<p>Is this a command you input in VC Code?</p>",
        "id": 448870141,
        "sender_full_name": "Anthony Bordg",
        "timestamp": 1720017892
    },
    {
        "content": "<p>Yes! See also <a href=\"https://github.com/leanprover/vscode-lean4/blob/master/vscode-lean4/manual/manual.md#unicode-input\">https://github.com/leanprover/vscode-lean4/blob/master/vscode-lean4/manual/manual.md#unicode-input</a>.</p>",
        "id": 448870722,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1720018047
    },
    {
        "content": "<p>I made a <a href=\"https://github.com/leanprover-community/mathlib4/pull/14499\">PR</a> to remove those characters. <span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> You were in favor of removing them? Not sure if anyone else should be part of this decision because I don't understand where that Unicode originally comes from in the first place (Mathlib3 ?!).</p>",
        "id": 449732073,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1720392876
    },
    {
        "content": "<p>Interestingly this change breaks unicode rendering on Android in one case, but I don't think that's a good reason to keep the invisible characters.</p>",
        "id": 449733446,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1720394021
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"634338\">@Michael Rothgang</span>  thanks for the <a href=\"#narrow/stream/287929-mathlib4/topic/linter.20requests/near/465689967\">hint</a> how to implement a linter for unicode!</p>\n<p>I made an attempt at it (and will at some point PR something so it can be discussed).<br>\nHowever, I realized that I don't understand how unicode is actually treated in Lean. For example, why does this not work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"bp\">ã‹</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"c1\">-- expected token</span>\n</code></pre></div>\n<p>The notation definition below works in any case, so the linter would probably be useful:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">infix</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"w\"> </span><span class=\"s2\">\" ã‹ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"bp\">.</span><span class=\"n\">add</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">ã‹</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div>",
        "id": 465725302,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724841240
    },
    {
        "content": "<p>because lean has a <a href=\"#narrow/stream/113488-general/topic/unicode/near/168267829\">small hardcoded list</a> of identifier characters, which is not very international-friendly</p>",
        "id": 465727916,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1724842127
    },
    {
        "content": "<p>Even surprising unicode characters in comments can be useful to check for. (There were a security announcements <a href=\"https://blog.rust-lang.org/2021/11/01/cve-2021-42574.html\">a while ago</a>, about using unicode to make the rendered code <em>look</em> differently from what it actually was.)</p>",
        "id": 465730000,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1724842811
    },
    {
        "content": "<p>I made a <a href=\"https://github.com/leanprover-community/mathlib4/pull/16215\">PR #16215</a>.</p>\n<p>Current issues/TODOs:</p>\n<ul>\n<li>Does this have community support in the first place?</li>\n<li>Need to make the whitelist more complete, order it, clean, etc.</li>\n<li>I'm not sure how to add a (linter-required) docstring to my local instance</li>\n</ul>",
        "id": 465733360,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724843775
    },
    {
        "content": "<p>I left a few comments.</p>",
        "id": 465735670,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1724844619
    },
    {
        "content": "<p>I think that any character that appears in <a href=\"https://github.com/leanprover/vscode-lean4/blob/master/lean4-unicode-input/src/abbreviations.json\">https://github.com/leanprover/vscode-lean4/blob/master/lean4-unicode-input/src/abbreviations.json</a> should be in the whitelist, otherwise this is really inconsistent.</p>",
        "id": 465738881,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1724845618
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span> do you think it's OK to hard-code this or should the linter read in and parse <code>abbreviations.json</code>?</p>",
        "id": 465750106,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724847973
    },
    {
        "content": "<p>I hope itâ€™s ok to go for the simple solution. That list does not change very often.</p>",
        "id": 465750342,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1724848019
    },
    {
        "content": "<p>Should we allow \"Rial\" <code>ï·¼</code>? It has a <a href=\"https://github.com/leanprover/vscode-lean4/blob/97d7d8c382d1549c18b66cd99ab4df0b6634c8f1/lean4-unicode-input/src/abbreviations.json#L1122\">VSCode abbreviation</a><br>\nbut it uses right-to-left text flow, so seems a bit awkward to use and have in the code. It's not currently used in Mathlib.</p>",
        "id": 465753488,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724848809
    },
    {
        "content": "<p>I would vote for removing it from the abbreviation file then.</p>",
        "id": 465755127,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1724849246
    },
    {
        "content": "<p>There are also still unprintable non-ascii characters.</p>\n<p><span class=\"user-mention\" data-user-id=\"110031\">@Patrick Massot</span>  you introduced two months ago two instances of <code>U+202F (category Zs: Separator, space)</code> <a href=\"https://github.com/leanprover-community/mathlib4/blob/e6352fe11417e28da0a0286bc845a5483259b3d4/Mathlib/Topology/StoneCech.lean#L16\">here</a>. Do we want to keep and allow this?</p>",
        "id": 465756746,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724849517
    },
    {
        "content": "<p>Do we allow abbreviation <code>\\quad</code> (U+2001)?</p>",
        "id": 465758459,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724849780
    },
    {
        "content": "<p>This is a mistake coming from my native  language habits (French uses a non-breakable space before the colon).</p>",
        "id": 465760011,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1724850033
    },
    {
        "content": "<p>Sorry about that.</p>",
        "id": 465760161,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1724850067
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/465760011\">said</a>:</p>\n<blockquote>\n<p>This is a mistake coming from my native  language habits (French uses a non-breakable space before the colon).</p>\n</blockquote>\n<p>Do French keyboards have a dedicated button for this?</p>",
        "id": 465764172,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724850995
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/465755127\">said</a>:</p>\n<blockquote>\n<p>I would vote for removing it from the abbreviation file then.</p>\n</blockquote>\n<p>RFC <a href=\"https://github.com/leanprover/vscode-lean4/issues/522\">https://github.com/leanprover/vscode-lean4/issues/522</a></p>",
        "id": 465764422,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724851036
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"638715\">Adomas Baliuka</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/465750106\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> do you think it's OK to hard-code this or should the linter read in and parse <code>abbreviations.json</code>?</p>\n</blockquote>\n<p>This sounds like it will be a bit frustrating for users defining new notation, as they then can't get their mathlib PR merged without FRO approval of the shortcut.</p>",
        "id": 465765068,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724851150
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/465764172\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/465760011\">said</a>:</p>\n<blockquote>\n<p>This is a mistake coming from my native  language habits (French uses a non-breakable space before the colon).</p>\n</blockquote>\n<p>Do French keyboards have a dedicated button for this?</p>\n</blockquote>\n<p>You donâ€™t need a dedicated button, this is given by the keyboard layout. I use <a href=\"https://qwerty-lafayette.org/\">https://qwerty-lafayette.org/</a> which has the thin non-breakable space on Shift-space and the large one on AltGr-Shift-Space (but I donâ€™t use it much).</p>",
        "id": 465766534,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1724851339
    },
    {
        "content": "<p>Note this layout also makes it slightly easier to type â€™ than '</p>",
        "id": 465766906,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1724851393
    },
    {
        "content": "<p>since â€™ is deadkey-space while ' is AltGr-o. This is the same number of keypresses but AltGr must be kept pressed while the deadkey is a deadkey so you release it before typing the next key.</p>",
        "id": 465767539,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1724851482
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/465765068\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"638715\">Adomas Baliuka</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/465750106\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> do you think it's OK to hard-code this or should the linter read in and parse <code>abbreviations.json</code>?</p>\n</blockquote>\n<p>This sounds like it will be a bit frustrating for users defining new notation, as they then can't get their mathlib PR merged without FRO approval of the shortcut.</p>\n</blockquote>\n<p>We're not reading in the JSON file right now, but in any case we would only require that it be a <em>subset</em> of the whitelist.</p>\n<p>The whitelist is currently just a string defined in the file where the linter is defined. However we define it, certainly Mathlib will be in control of it.</p>",
        "id": 465767647,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724851502
    },
    {
        "content": "<p>But note that some French people do not care about non-breaking spaces. There are even French people that donâ€™t type French quotation marks when writing in French (those people usually also donâ€™t use â€œ and â€ as quotation marks, they use \"). <span aria-label=\"man shrugging\" class=\"emoji emoji-1f937-200d-2642\" role=\"img\" title=\"man shrugging\">:man_shrugging:</span></p>",
        "id": 465768154,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1724851599
    },
    {
        "content": "<p>Current whitelist discussion status:</p>\n<p>I split the whitelist into parts:</p>\n<ul>\n<li>printable ASCII</li>\n<li>everything that currently has abbreviations VSCode extension, except <code>ï·¼</code></li>\n<li>all printable characters that are already in Mathlib, except special whitespace used in French</li>\n<li>(optional, <strong>to be discussed</strong>) some reasonable subset of <a href=\"https://en.wikipedia.org/wiki/Mathematical_operators_and_symbols_in_Unicode\">https://en.wikipedia.org/wiki/Mathematical_operators_and_symbols_in_Unicode</a></li>\n</ul>\n<p>for example, a superset of a reasonable subset of the Wikipedia article <em>might</em> be  below</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">WIKI_NOT_WHITELIST</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"</span>\n<span class=\"s2\">âˆŠâˆ•âˆ¬âˆ­âˆ°âˆ±âˆ²âˆ³âˆ¾âˆ¿â‰†â‰­â‰¸â‰¹âŠŒâŠ¦âŠ°âŠ±âŠ¶âŠ·âŠ½âŠ¾âŠ¿â‹…â‹•â‹¤â‹¥â‹°â‹²â‹³â‹´â‹µâ‹¶â‹·â‹¸â‹¹â‹ºâ‹»â‹¼â‹½â‹¾â‹¿â¨‡â¨ˆâ¨‰â¨Šâ¨‹â¨Œâ¨â¨â¨â¨‘â¨’â¨“â¨”â¨•â¨–â¨—â¨˜â¨™â¨šâ¨›â¨œâ¨â¨â¨Ÿâ¨ â¨¡â¨¢â¨£â¨¤â¨¥â¨¦â¨§â¨¨â¨©â¨ªâ¨«â¨¬â¨­â¨®â¨°â¨±â¨²â¨´â¨µâ¨¶</span>\n<span class=\"s2\">â¨·â¨¸â¨¹â¨ºâ¨»â¨¼â¨½â¨¾â©€â©â©‚â©ƒâ©„â©…â©†â©‡â©ˆâ©‰â©Šâ©‹â©Œâ©â©â©â©â©‘â©’â©“â©”â©•â©–â©—â©˜â©™â©šâ©›â©œâ©â©â©Ÿâ© â©¡â©¢â©£â©¤â©¥â©¦â©§â©¨â©©â©ªâ©«â©¬â©­â©®â©¯â©°â©±â©²â©³â©´â©µâ©¶â©·â©¸â©¹â©ºâ©»â©¼â©½â©¾âª€âªâª‚âªƒâª„âª…âª†âª‡âªˆâª‰âªŠâª‹âªŒâªâªâªâªâª‘âª’</span>\n<span class=\"s2\">âª“âª”âª•âª–âª—âª˜âª™âªšâª›âªœâªâªâªŸâª âª¡âª¢âª£âª¤âª¥âª¦âª§âª¨âª©âªªâª«âª¬âª­âª®âª¯âª°âª±âª²âª³âª´âªµâª¶âª·âª¸âª¹âªºâª»âª¼âª½âª¾âª¿â«€â«â«‚â«ƒâ«„â«…â«†â«‡â«ˆâ«‰â«Šâ«‹â«Œâ«â«â«â«â«‘â«’â«“â«”â«•â«–â«—â«˜â«™â«šâ«›â«œâ«â«â«Ÿ</span>\n<span class=\"s2\">â« â«¡â«¢â«£â«¤â«¥â«¦â«§â«¨â«©â«ªâ««â«¬â«­â«®â«¯â«°â«±â«²â«³â«´â«µâ«¶â«·â«¸â«¹â«ºâ«»â«¼â«½â«¾â«¿â„ğ†ğ‘‹ğ‘‘ğ‘­ğ‘¾ğ’ğ’¿ğ“°ğ”Šğ”›ğ”´ğ•”</span>\n<span class=\"s2\">ğ•¬ğ•­ğ•®ğ•¯ğ•°ğ•±ğ•²ğ•³ğ•´ğ•µğ•¶ğ•·ğ•¸ğ•¹ğ•ºğ•»ğ•¼ğ•½ğ•¾ğ•¿ğ–€ğ–ğ–‚ğ–ƒğ–„ğ–…ğ–†ğ–‡ğ–ˆğ–‰ğ–Šğ–‹ğ–Œğ–ğ–ğ–ğ–ğ–‘ğ–’ğ–“ğ–”ğ–•ğ––ğ–—ğ–˜ğ–™ğ–šğ–›ğ–œğ–ğ–ğ–Ÿ</span>\n<span class=\"s2\">ğ– ğ–¡ğ–¢ğ–¤ğ–¥ğ–¦ğ–§ğ–¨ğ–©ğ–ªğ–«ğ–¬ğ–­ğ–®ğ–¯ğ–°ğ–±ğ–²ğ–³ğ–´ğ–µğ–¶ğ–·ğ–¸ğ–¹ğ–ºğ–»ğ–¼ğ–½ğ–¾ğ–¿ğ—€ğ—ğ—‚ğ—ƒğ—„ğ—…ğ—†ğ—‡ğ—ˆğ—‰ğ—Šğ—‹ğ—Œğ—ğ—ğ—ğ—ğ—‘ğ—’ğ—“</span>\n<span class=\"s2\">ğ—”ğ—•ğ—–ğ——ğ—˜ğ—™ğ—šğ—›ğ—œğ—ğ—ğ—Ÿğ— ğ—¡ğ—¢ğ—£ğ—¤ğ—¥ğ—¦ğ—§ğ—¨ğ—©ğ—ªğ—«ğ—¬ğ—­ğ—®ğ—¯ğ—°ğ—±ğ—²ğ—³ğ—´ğ—µğ—¶ğ—·ğ—¸ğ—¹ğ—ºğ—»ğ—¼ğ—½ğ—¾ğ—¿ğ˜€ğ˜ğ˜‚ğ˜ƒğ˜„ğ˜…ğ˜†ğ˜‡</span>\n<span class=\"s2\">ğ˜ˆğ˜‰ğ˜Šğ˜‹ğ˜Œğ˜ğ˜ğ˜ğ˜ğ˜‘ğ˜’ğ˜“ğ˜”ğ˜•ğ˜–ğ˜—ğ˜˜ğ˜™ğ˜šğ˜›ğ˜œğ˜ğ˜ğ˜Ÿğ˜ ğ˜¡ğ˜¢ğ˜£ğ˜¤ğ˜¥ğ˜¦ğ˜§ğ˜¨ğ˜©ğ˜ªğ˜«ğ˜¬ğ˜­ğ˜®ğ˜¯ğ˜°ğ˜±ğ˜²ğ˜³ğ˜´ğ˜µğ˜¶ğ˜·ğ˜¸ğ˜¹ğ˜ºğ˜»</span>\n<span class=\"s2\">ğ˜¼ğ˜½ğ˜¾ğ˜¿ğ™€ğ™ğ™‚ğ™ƒğ™„ğ™…ğ™†ğ™‡ğ™ˆğ™‰ğ™Šğ™‹ğ™Œğ™ğ™ğ™ğ™ğ™‘ğ™’ğ™“ğ™”ğ™•ğ™–ğ™—ğ™˜ğ™™ğ™šğ™›ğ™œğ™ğ™ğ™Ÿğ™ ğ™¡ğ™¢ğ™£ğ™¤ğ™¥ğ™¦ğ™§ğ™¨ğ™©ğ™ªğ™«ğ™¬ğ™­ğ™®ğ™¯</span>\n<span class=\"s2\">ğ™°ğ™±ğ™²ğ™³ğ™´ğ™µğ™¶ğ™·ğ™¸ğ™¹ğ™ºğ™»ğ™¼ğ™½ğ™¾ğ™¿ğš€ğšğš‚ğšƒğš„ğš…ğš†ğš‡ğšˆğš‰ğšŠğš‹ğšŒğšğšğšğšğš‘ğš’ğš“ğš”ğš•ğš–ğš—ğš˜ğš™ğššğš›ğšœğšğšğšŸğš ğš¡ğš¢ğš£ğš¤ğš¥</span>\n<span class=\"s2\">ğš¨ğš©ğšªğš«ğš¬ğš­ğš®ğš¯ğš°ğš±ğš²ğš³ğš´ğšµğš¶ğš·ğš¸ğš¹ğšºğš»ğš¼ğš½ğš¾ğš¿ğ›€ğ›ğ›‚ğ›ƒğ›„ğ›…ğ›†ğ›‡ğ›ˆğ›‰ğ›Šğ›‹ğ›Œğ›ğ›ğ›ğ›ğ›‘ğ›’ğ›“ğ›”ğ›•ğ›–ğ›—ğ›˜ğ›™ğ›šğ››ğ›œğ›ğ›ğ›Ÿğ› ğ›¡</span>\n<span class=\"s2\">ğ›¢ğ›£ğ›¤ğ›¥ğ›¦ğ›§ğ›¨ğ›©ğ›ªğ›«ğ›¬ğ›­ğ›®ğ›¯ğ›°ğ›±ğ›²ğ›³ğ›´ğ›µğ›¶ğ›·ğ›¸ğ›¹ğ›ºğ›»</span>\n<span class=\"s2\">ğ›¼ğ›½ğ›¾ğ›¿ğœ€ğœğœ‚ğœƒğœ„ğœ…ğœ†ğœ‡ğœˆğœ‰ğœŠğœ‹ğœŒğœğœğœğœğœ‘ğœ’ğœ“ğœ”ğœ•ğœ–ğœ—ğœ˜ğœ™ğœšğœ›</span>\n<span class=\"s2\">ğœœğœğœğœŸğœ ğœ¡ğœ¢ğœ£ğœ¤ğœ¥ğœ¦ğœ§ğœ¨ğœ©ğœªğœ«ğœ¬ğœ­ğœ®ğœ¯ğœ°ğœ±ğœ²ğœ³ğœ´ğœµğœ¶ğœ·ğœ¸ğœ¹ğœºğœ»ğœ¼ğœ½ğœ¾ğœ¿ğ€ğğ‚ğƒğ„ğ…ğ†ğ‡ğˆğ‰ğŠğ‹ğŒğğğğğ‘ğ’ğ“ğ”ğ•</span>\n<span class=\"s2\">ğ–ğ—ğ˜ğ™ğšğ›ğœğğğŸğ ğ¡ğ¢ğ£ğ¤ğ¥ğ¦ğ§ğ¨ğ©ğªğ«ğ¬ğ­ğ®ğ¯ğ°ğ±ğ²ğ³ğ´ğµğ¶ğ·ğ¸ğ¹ğºğ»ğ¼ğ½ğ¾ğ¿ğ€ğğ‚ğƒğ„ğ…ğ†ğ‡ğˆğ‰ğŠğ‹ğŒğğğ</span>\n<span class=\"s2\">ğğ‘ğ’ğ“ğ”ğ•ğ–ğ—ğ˜ğ™ğšğ›ğœğğğŸğ ğ¡ğ¢ğ£ğ¤ğ¥ğ¦ğ§ğ¨ğ©ğªğ«ğ¬ğ­ğ®ğ¯ğ°ğ±ğ²ğ³ğ´ğµğ¶ğ·ğ¸ğ¹ğºğ»ğ¼ğ½ğ¾ğ¿ğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆğŸ‰ğŸŠğŸ‹</span>\n<span class=\"s2\">ğŸğŸğŸğŸ‘ğŸ’ğŸ“ğŸ”ğŸ•ğŸ–ğŸ—ğŸ¢ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ§ğŸ¨ğŸ©ğŸªğŸ«ğŸ°ğŸ¶ğŸ·ğŸ¸ğŸ¹ğŸºğŸ»ğŸ¼ğŸ½ğŸ¾ğŸ¿</span>\n<span class=\"s2\">â„€â„â„„â„…â„†â„‡â„ˆâ„‰â„”â„Ÿâ„£â„©â„²â„¹â„ºâ„¼â„½â„¾â„¿â…â…‚â…ƒâ…„â……â…†â…‡â…ˆâ…‰â…Šâ…â…â…âŸ€âŸâŸƒâŸ„âŸ‡âŸˆâŸ‰âŸŠâŸŒâŸâŸâŸâŸ‘âŸ’âŸ“âŸ”âŸ•âŸ–âŸ—âŸ˜âŸ™âŸšâŸ›âŸœâŸâŸâŸŸâŸ âŸ¡âŸ¢âŸ£âŸ¤âŸ¥âŸ¬âŸ­â¦€â¦â¦‚â¦…â¦†â¦‡â¦ˆâ¦‰â¦Šâ¦‹â¦Œâ¦â¦â¦â¦â¦‘â¦’â¦“â¦”â¦•â¦–â¦—â¦˜â¦™â¦šâ¦›â¦œâ¦â¦â¦Ÿâ¦ â¦¡â¦¢â¦£â¦¤â¦¥</span>\n<span class=\"s2\">â¦¦â¦§â¦¨â¦©â¦ªâ¦«â¦¬â¦­â¦®â¦¯â¦°â¦±â¦²â¦³â¦´â¦µâ¦¶â¦·â¦¸â¦¹â¦ºâ¦»â¦¼â¦½â¦¾â¦¿â§€â§â§‚â§ƒâ§„â§…â§†â§‡â§ˆâ§‰â§Šâ§‹â§Œâ§â§â§â§‘â§’â§“â§”â§•â§–â§—â§˜â§™â§šâ§›â§œâ§â§â§Ÿâ§ â§¡â§¢â§£â§¤â§¥â§¦â§§â§¨â§©â§ªâ§«â§¬â§­â§®â§¯â§°â§±â§²â§³</span>\n<span class=\"s2\">â§´â§µâ§¶â§·â§¹â§ºâ§»â§¼â§½â§¾â§¿âŒâŒ‚âŒƒâŒ„âŒ…âŒ†âŒ‡âŒŒâŒâŒâŒâŒâŒ‘âŒ’âŒ“âŒ”âŒ•âŒ–âŒ—âŒ˜âŒ™âŒšâŒ›âŒ âŒ¡âŒ¤âŒ¥âŒ¦âŒ§âŒ¨âŒ©âŒªâŒ«âŒ¬âŒ­âŒ®âŒ¯âŒ°âŒ±âŒ²âŒ³âŒ´âŒµâŒ·âŒ¸âŒ¹âŒºâŒ»âŒ¼âŒ½âŒ¾âŒ¿â€ââ‚âƒâ„â…â†â‡âˆâ‰âŠâ‹âŒâââââ‘â’â“â”â•â–â—â˜â™âšâ›âœâââ â¡â¢</span>\n<span class=\"s2\">â£â¤â¥â¦â§â¨â©âªâ«â¬â­â®â¯â°â±â²â³â´âµâ¶â·â¸â¹âºâ»â¼â½â¾â¿â€ââ‚âƒâ„â…â†â‡âˆâ‰âŠâ‹âŒâââââ‘â’â“â”â•â–â—â˜â™âšâ›âœâââŸâ â¡â¢â£â¤â¥â¦â§â¨â©âªâ«â¬â­â®â¯â°â±â²â³â´âµâ¶â·â¸â¹âºâ»â¼â½â¾â¿â€ââ‚âƒâ„â…</span>\n<span class=\"s2\">â†â‡âˆâ‰âŠâ‹âŒâââââ‘â’â“â”â•â–â—â˜â™âšâ›âœâââŸâ â¡â¢â£â¤â¥â¦â§â¨âªâ«â¬â­â®â¯â°â±â²â´âµâ¶â·â¸â¹âºâ»â¼â½â¾â¿â–¤â–¥â–¦â–§â–¨â–©â–«â–®â–¯â–²â–¶â–ºâ–»â—„â—…â—‰â—Šâ—â—â—‘â—’â—“â—”</span>\n<span class=\"s2\">â—•â—–â——â—˜â—™â—šâ—›â—œâ—â—â—Ÿâ— â—¡â—£â—¤â—§â—¨â—©â—ªâ—¬â—­â—®â—°â—±â—²â—³â—´â—µâ—¶â—·â—¸â—ºâ—»â—¼â—½â†²â†³â†´â†µâ†¸â†¹â‡œâ‡â‡Ÿâ‡ â‡¡â‡¢â‡£â‡¤â‡¥â‡¦â‡§â‡©â‡ªâ‡«â‡¬â‡­â‡®â‡¯â‡±â‡²â‡³â‡´â‡·â‡¸â‡¹â‡ºâ‡»â‡¼â‡½â‡¾â‡¿âŸ²âŸ³âŸ´âŸ¸âŸºâŸ»âŸ¼âŸ½âŸ¾âŸ¿â¤€â¤â¤‚â¤ƒâ¤„</span>\n<span class=\"s2\">â¤…â¤†â¤‡â¤ˆâ¤‰â¤Šâ¤‹â¤Œâ¤â¤â¤â¤â¤‘â¤’â¤“â¤”â¤•â¤–â¤—â¤˜â¤™â¤šâ¤›â¤œâ¤â¤â¤Ÿâ¤ â¤¡â¤¢â¤£â¤¤â¤¥â¤¦â¤§â¤¨â¤©â¤ªâ¤«â¤¬â¤­â¤®â¤¯â¤°â¤±â¤²â¤´â¤µâ¤¶â¤·â¤¸â¤¹â¤ºâ¤»â¤¼â¤½â¤¾â¤¿â¥€â¥â¥‚â¥ƒâ¥„â¥…â¥†â¥‡â¥ˆâ¥‰â¥Šâ¥‹â¥Œâ¥</span>\n<span class=\"s2\">â¥â¥â¥â¥‘â¥’â¥“â¥”â¥•â¥–â¥—â¥˜â¥™â¥šâ¥›â¥œâ¥â¥â¥Ÿâ¥ â¥¡â¥¢â¥£â¥¦â¥§â¥¨â¥©â¥ªâ¥«â¥¬â¥­â¥®â¥¯â¥°â¥±â¥²â¥³â¥´â¥µâ¥¶â¥·â¥¸â¥¹â¥ºâ¥»â¥¼â¥½â¥¾â¥¿â¬€â¬â¬‚â¬ƒâ¬„â¬…â¬†â¬‡â¬ˆâ¬‰â¬Šâ¬‹â¬Œâ¬â¬â¬â¬â¬‘â¬’â¬“â¬”â¬•â¬–â¬—â¬˜â¬™â¬šâ¬›</span>\n<span class=\"s2\">â¬œâ¬â¬Ÿâ¬ â¬¡â¬¢â¬£â¬¤â¬¥â¬¦â¬§â¬¨â¬©â¬ªâ¬«â¬¬â¬­â¬®â¬¯â¬°â¬±â¬²â¬³â¬´â¬µâ¬¶â¬·â¬¸â¬¹â¬ºâ¬»â¬¼â¬½â¬¾â¬¿â­€â­â­‚â­ƒâ­„â­…â­†â­‡â­ˆâ­‰â­Šâ­‹â­Œâ­â­â­â­â­‘â­’â­“â­”â­•â­–â­—â­˜â­™â­šâ­›â­œâ­â­â­Ÿâ­ â­¡â­¢â­£â­¤â­¥â­¦â­§â­¨â­©â­ªâ­«â­¬â­­</span>\n<span class=\"s2\">â­®â­¯â­°â­±â­²â­³â­¶â­·â­¸â­¹â­ºâ­»â­¼â­½â­¾â­¿â®€â®â®‚â®ƒâ®„â®…â®†â®‡â®ˆâ®‰â®Šâ®‹â®Œâ®â®â®â®â®‘â®’â®“â®”â®•â®—â®˜â®™â®šâ®›â®œâ®â®â®Ÿâ® â®¡â®¢â®£â®¤â®¥â®¦â®§â®¨â®©â®ªâ®«â®¬â®­â®®â®¯â®°â®±â®²â®³â®´â®µâ®¶â®·â®¸â®¹â®ºâ®»â®¼â®½â®¾â®¿</span>\n<span class=\"s2\">â¯€â¯â¯‚â¯ƒâ¯„â¯…â¯†â¯‡â¯ˆâ¯‰â¯Šâ¯‹â¯Œâ¯â¯â¯â¯â¯’â¯“â¯”â¯•â¯–â¯—â¯˜â¯™â¯šâ¯›â¯œâ¯â¯â¯Ÿâ¯ â¯¡â¯¢â¯£â¯¤â¯¥â¯¦â¯§â¯¨â¯©â¯ªâ¯«â¯¬â¯­â¯®â¯¯â¯°â¯±â¯²â¯³â¯´â¯µâ¯¶â¯·â¯¸â¯¹â¯ºâ¯»â¯¼â¯½â¯¾</span>\n<span class=\"s2\">Ï’Ï´ÏµÏ¶Ø†Ø‡Øˆâ€³â€´â˜†â™¡ï¬©ï¹¡ï¹¢ï¹£ï¹¤ï¹¥ï¹¦ï¼‹ï¼œï¼ï¼ï¼¾ï½œï½ï¿©ï¿ªï¿«ï¿¬</span>\n<span class=\"s2\">\"</span>\n</code></pre></div>\n<p>I excluded all arabic because it's really weird to change the left-to-right flow. This is the example I gave at <a href=\"https://github.com/leanprover/vscode-lean4/issues/522\">vscode-lean4/issues/522</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">infix</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"w\"> </span><span class=\"s2\">\" ï·¼ \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"bp\">.</span><span class=\"n\">add</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">ï·¼</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n</code></pre></div>\n<p>This code <strong>works</strong> despite what you might thing \"infix\" does.</p>",
        "id": 465772268,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724852629
    },
    {
        "content": "<p>/me has RPN flashbacks</p>",
        "id": 465773430,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1724852939
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/465773430\">said</a>:</p>\n<blockquote>\n<p>/me has RPN flashbacks</p>\n</blockquote>\n<p>Sorry, what is RPN?</p>",
        "id": 465773511,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1724852959
    },
    {
        "content": "<p>reverse polish notation. So</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">prompt</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span>\n<span class=\"c1\">-- returns 7</span>\n</code></pre></div>",
        "id": 465773699,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1724853006
    },
    {
        "content": "<p>And <code>3 4 2 + *</code> will evaluate to <code>18</code></p>",
        "id": 465773823,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1724853037
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110031\">Patrick Massot</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/465766534\">said</a>:</p>\n<blockquote>\n<p>You donâ€™t need a dedicated button, this is given by the keyboard layout. I use <a href=\"https://qwerty-lafayette.org/\">https://qwerty-lafayette.org/</a> which has the thin non-breakable space on Shift-space and the large one on AltGr-Shift-Space (but I donâ€™t use it much).</p>\n</blockquote>\n<p>Wow, the <code>â˜…</code>Â <code>[touche sous une voyelle]</code> input strikes me as very unusual! Thanks for the link.</p>",
        "id": 465780280,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724854639
    },
    {
        "content": "<p>We have the following not-yet-whitelisted characters remaining, which I wasn't sure that they really should be there. Any opinions if they should be whitelisted or instead removed?</p>\n<blockquote>\n<p>Mathlib/CategoryTheory/Adjunction/Triple.lean:14: unicode character 'Â ' (U+00a0)<br>\nMathlib/CategoryTheory/Adjunction/Triple.lean:34: unicode character 'Â ' (U+00a0)<br>\nMathlib/GroupTheory/GroupExtension/Defs.lean:25: unicode character 'ï¸' (U+fe0e)<br>\nMathlib/GroupTheory/GroupExtension/Defs.lean:27: unicode character 'ï¸' (U+fe0e)<br>\nMathlib/GroupTheory/GroupExtension/Defs.lean:27: unicode character 'ï¸' (U+fe0e)<br>\nMathlib/GroupTheory/GroupExtension/Defs.lean:27: unicode character 'ï¸' (U+fe0f)<br>\nMathlib/GroupTheory/GroupExtension/Defs.lean:30: unicode character 'ï¸' (U+fe0e)<br>\nMathlib/GroupTheory/GroupExtension/Defs.lean:32: unicode character 'ï¸' (U+fe0e)<br>\nMathlib/GroupTheory/GroupExtension/Defs.lean:32: unicode character 'ï¸' (U+fe0e)<br>\nMathlib/GroupTheory/GroupExtension/Defs.lean:32: unicode character 'ï¸' (U+fe0f)<br>\nMathlib/Util/Superscript.lean:60: unicode character 'ğ¥' (U+107a5)<br>\nMathlib/Util/Superscript.lean:60: unicode character '' (U+a7f4)<br>\nMathlib/Util/Superscript.lean:239: unicode character 'ğ¥' (U+107a5)<br>\nMathlib/Util/Superscript.lean:239: unicode character 'êŸ´' (U+a7f4)</p>\n</blockquote>\n<ul>\n<li>The <code>U+00a0</code> (non-breaking space) will be hard to eliminate because many people use it and new PRs that get merged keep reintroducing it. Maybe that means whitelisting it?</li>\n<li><code>U+fe0e</code> (variation selector) also seems to be used on purpose?</li>\n<li><code>U+107a5</code>(Modifier Letter Small Q) and <code>U+a7f4</code> (Modifier Letter Capital Q) are the only \"superscript\" letters that my font does not support. Does yours support it? Will anyone use these in code eventually or should we blacklist them until someone does?</li>\n</ul>",
        "id": 466473638,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1725086179
    },
    {
        "content": "<p>What is non-breaking space used for in mathlib? I don't know how to search for it</p>",
        "id": 466475211,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1725086983
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/466475211\">said</a>:</p>\n<blockquote>\n<p>What is non-breaking space used for in mathlib? I don't know how to search for it</p>\n</blockquote>\n<p>Non-breaking spaces are ~ in Latex. They prevent linebreaks at that position.</p>\n<p>It's used in comments, presumably to improve rendering on mobile phones (?). Also, apparently some French contributors use it out of habit, as discussed above.</p>\n<p>You can use the VSCode search tool, turn on regex and search for \"\\u00a0\".</p>",
        "id": 466480422,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1725090050
    },
    {
        "content": "<p>Well, if there's consensus that adding this lint is useful, the linter will ensure these won't get added, right? (Sometimes contributors forget about some style guide rules; that happens. Linters can be useful to enforce this all the time.)</p>",
        "id": 466480844,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725090220
    },
    {
        "content": "<p>What I meant was that if (as has been the case so far) removing these characters is done in separate PRs and the linter is only merged when it passes, that might take a lot of PRs removing whitespace until one gets lucky.</p>",
        "id": 466481554,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1725090488
    },
    {
        "content": "<p>Didnt read the entire conv. but make sure to include <code>\\uFE0E</code> and <code>\\uFE0F</code> which are text-variant selector and emoji-variant selector, see <a href=\"https://github.com/leanprover/lean4/pull/5015\">lean4#5015</a> and <a href=\"https://github.com/leanprover-community/mathlib4/pull/16186\">#16186</a></p>\n<p>or even better, only allow the correct variant of these unicode characters</p>",
        "id": 466483017,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1725091184
    },
    {
        "content": "<p>and it would be amazing if the linter directly prints the right variant.I can have a go at this later if you want.</p>",
        "id": 466484068,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1725091468
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/466484068\">said</a>:</p>\n<blockquote>\n<p>and it would be amazing if the linter directly prints the right variant.I can have a go at this later if you want.</p>\n</blockquote>\n<p>I'm not sure what you mean here. In any case, go ahead implementing it if it's useful.</p>\n<p>Concerning the variant selectors, they should probably <em>only</em> be allowed in front of emoji characters? Are the emoji characters supposed to be allowed everywhere or just in specific places in the repository that one might add to an exception list?</p>",
        "id": 466485473,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1725091870
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"638715\">Adomas Baliuka</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/466481554\">said</a>:</p>\n<blockquote>\n<p>What I meant was that if (as has been the case so far) removing these characters is done in separate PRs and the linter is only merged when it passes, that might take a lot of PRs removing whitespace until one gets lucky.</p>\n</blockquote>\n<p>Sure! But I don't see a problem with combining a few selected fix-ups with landing the linter. The point is more to review 200 lines of repetitive diff elsewhere, not to be extremely strict about it.</p>",
        "id": 466487991,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1725092530
    },
    {
        "content": "<p>What are the risks of allowing arbitrary unicode in docstrings?</p>",
        "id": 466488544,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725092667
    },
    {
        "content": "<p>Would it suffice to lint specifically the notation commands?</p>",
        "id": 466488674,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725092700
    },
    {
        "content": "<p>Every linter adds a potential burden to contributors, so I would like to see a bit more motivation, I think</p>",
        "id": 466488974,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1725092764
    },
    {
        "content": "<p>I think there's been cases before where they broke a markdown header in a confusing manner</p>",
        "id": 466489255,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1725092883
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"638715\">Adomas Baliuka</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/466485473\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/466484068\">said</a>:</p>\n<blockquote>\n<p>and it would be amazing if the linter directly prints the right variant.I can have a go at this later if you want.</p>\n</blockquote>\n<p>I'm not sure what you mean here. In any case, go ahead implementing it if it's useful.</p>\n<p>Concerning the variant selectors, they should probably <em>only</em> be allowed in front of emoji characters? Are the emoji characters supposed to be allowed everywhere or just in specific places in the repository that one might add to an exception list?</p>\n</blockquote>\n<p>they can be <strong>after</strong> unicode characters, but yes exactly. They are used in regular strings in core and I could imagine tactics/widgets using emojis in a similar way.</p>\n<p>But yes, that's probably a separate list of emojis allowed</p>",
        "id": 466498627,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1725096095
    },
    {
        "content": "<p>What do we think of  \"stacked\" unicode characters, e.g.,  the normal 'e' ( U+0065) followed by   'âƒ— (U+20D7)? For example, the Julia programming language does allows these in variable names, even.</p>\n<p>In Lean, on the other hand, it allows things like this (which I guess is fine to allow, people should \"just not do it\")</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">infix</span><span class=\"o\">:</span><span class=\"mi\">50</span><span class=\"w\"> </span><span class=\"s2\">\"âƒ—  \"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Add</span><span class=\"bp\">.</span><span class=\"n\">add</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">e</span><span class=\"bp\">âƒ—</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"c1\">-- 2</span>\n</code></pre></div>",
        "id": 467378756,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1725407847
    },
    {
        "content": "<p>Let it be</p>",
        "id": 467378847,
        "sender_full_name": "Jeremy Tan",
        "timestamp": 1725407892
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"598052\">Jeremy Tan</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/467378847\">said</a>:</p>\n<blockquote>\n<p>Let it be</p>\n</blockquote>\n<p>I'm not sure what exactly you mean by that. I didn't propose doing anything with it, just exploring the way Lean handles the various Unicode peculiarities.</p>\n<p>Right now, the linter would always flag the character U+20D7 because it's not in the whitelist (and that, in turn, is because it's currently not used in Mathlib and has no shortcut).</p>",
        "id": 467379264,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1725408112
    },
    {
        "content": "<p>I thought I saw a topic here were there was some argument about how they were problematic, but I cant find it. All I could find is that one can apparently write <code>Ã©</code> or <code>e\\u0301</code> (or something, untested), the latter seems troublesome.</p>",
        "id": 467381477,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1725409591
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"385895\">Jon Eugster</span> <a href=\"#narrow/stream/287929-mathlib4/topic/Whitelist.20for.20Unicode.3F/near/467381477\">said</a>:</p>\n<blockquote>\n<p><code>\\u0301</code></p>\n</blockquote>\n<p>(Tested, yes that's the one!) This is also currently flagged by the linter (and I guess we'll keep it that way).</p>",
        "id": 467382126,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1725410026
    },
    {
        "content": "<p>Coming back to this, there is a series of PRs adding unicode linters ready for review:</p>\n<ul>\n<li>Part 1 (<a href=\"https://github.com/leanprover-community/mathlib4/pull/17129\">#17129</a>): adds linter which checks that the invisible unicode-variant-selectors (for emojis) are only on the right unicode characters and provides automatic fixing for it.</li>\n<li>Part 2 (<a href=\"https://github.com/leanprover-community/mathlib4/pull/17131\">#17131</a>): adds linter functionality to capture bad unicode characters and automatically fix them if possible. The PR only implements this for <code>\\u00A0</code> (non-breaking-space) which will automatically be fixed to a regular space</li>\n<li>Part 3 (<a href=\"https://github.com/leanprover-community/mathlib4/pull/16215\">#16215</a>): Extends the linter to capture more unwanted unicode characters.</li>\n</ul>",
        "id": 472682760,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1727266705
    },
    {
        "content": "<p>So far I understood the conversations that part 1 &amp; 2 are uncontroversial, especially since they provide automatic fixes with <code>lake exe lint-style --fix</code> (or commenting <code>bot fix style</code> on the PR; or review dog assuming it works)</p>\n<p>Is this true, or are there concerns regarding part 1 &amp; 2?</p>",
        "id": 472682797,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1727266722
    },
    {
        "content": "<p>Regarding part 3 it seems there is still some discussion to be had. <span class=\"user-mention\" data-user-id=\"638715\">@Adomas Baliuka</span>'s approach (based on the discussion here) is currently to have a whitelist of characters which comprises everything with a abbreviation and a few already present unicode characters. When any other unicode character is used, the warning suggests to \"add this character to the whitelist\".</p>\n<p>An alternative approach might include a blacklist, although with unicode being increadible expressive, I think it might be hard to blacklist all bad (invisible, order reversing, decorators (i.e. printed on top of previous char), etc.) unicode characters.</p>\n<p>Are there opinions on this?</p>",
        "id": 472683542,
        "sender_full_name": "Jon Eugster",
        "timestamp": 1727266960
    }
]