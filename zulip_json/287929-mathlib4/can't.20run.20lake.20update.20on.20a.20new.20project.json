[
    {
        "content": "<p>I created a new project with <code>lake +leanprover/lean4:nightly-2024-04-24 new project math</code> and ran <code>lake update</code> inside the project folder. The cmd uses basically no cpu for about 3 minutes and then exits with:</p>\n<p><code>info: project: no previous manifest, creating one from scratch\ninfo: mathlib: cloning https://github.com/leanprover-community/mathlib4.git to '.\\.\\.lake\\packages\\mathlib'\nerror: external command 'git' exited with code 128</code><br>\nwith only an empty mathlib folder in <code>.lake/packages</code> created.</p>\n<p>This doesn't happen with other git projects, and I don't know how to get a more specific error message. Would love some help.</p>",
        "id": 443600888,
        "sender_full_name": "Nir Paz",
        "timestamp": 1717944164
    },
    {
        "content": "<p>Seems like that's a generic git error, so could be pretty much anything :/</p>",
        "id": 443601538,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1717944708
    },
    {
        "content": "<p>I think this is covered under <a href=\"https://github.com/leanprover/lean4/pull/4302\">lean#4302</a>. In the meantime, can you check that you can do a <code>git clone</code> of mathlib successfully?</p>",
        "id": 443751280,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1718019835
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110087\">@Kim Morrison</span> I just tried again and it works now (possibly because I'm on a different wifi?) Thanks anyways (:</p>",
        "id": 443756485,
        "sender_full_name": "Nir Paz",
        "timestamp": 1718021575
    },
    {
        "content": "<p>This is popping up again, with a more specific error message:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">my_project2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">no</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">manifest</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">creating</span><span class=\"w\"> </span><span class=\"n\">one</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">scratch</span>\n\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">cloning</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">.</span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"bp\">'.\\.\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">mathlib'</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">.&gt;</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">clone</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">github</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">.</span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"bp\">.\\.\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">mathlib</span>\n\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">Cloning</span><span class=\"w\"> </span><span class=\"n\">into</span><span class=\"w\"> </span><span class=\"bp\">'.\\.\\.</span><span class=\"n\">lake</span><span class=\"bp\">\\</span><span class=\"n\">packages</span><span class=\"bp\">\\</span><span class=\"n\">mathlib'</span><span class=\"bp\">...</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">RPC</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"mi\">92</span><span class=\"w\"> </span><span class=\"n\">HTTP</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">stream</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">closed</span><span class=\"w\"> </span><span class=\"n\">cleanly</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">CANCEL</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">err</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"o\">)</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">8116</span><span class=\"w\"> </span><span class=\"n\">bytes</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">body</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">still</span><span class=\"w\"> </span><span class=\"n\">expected</span>\n\n<span class=\"n\">fetch</span><span class=\"bp\">-</span><span class=\"n\">pack</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">unexpected</span><span class=\"w\"> </span><span class=\"n\">disconnect</span><span class=\"w\"> </span><span class=\"n\">while</span><span class=\"w\"> </span><span class=\"n\">reading</span><span class=\"w\"> </span><span class=\"n\">sideband</span><span class=\"w\"> </span><span class=\"n\">packet</span>\n\n<span class=\"n\">fatal</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">early</span><span class=\"w\"> </span><span class=\"n\">EOF</span>\n\n<span class=\"n\">fatal</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"bp\">-</span><span class=\"n\">pack</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">index</span><span class=\"bp\">-</span><span class=\"n\">pack</span><span class=\"w\"> </span><span class=\"n\">output</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">git'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">128</span>\n</code></pre></div>\n<p>I tried some fixes I found online but none worked. Regardless of whether this gets resolved, is there anywhere/any way I can download an updated <code>packages</code> folder (except clone all of the projects manually of course)?</p>",
        "id": 473460038,
        "sender_full_name": "Nir Paz",
        "timestamp": 1727624732
    },
    {
        "content": "<p>Ok this is a git issue on my end, so really I'm just asking about downloading <code>packages</code>, for times when this happens and I can't fix it.</p>",
        "id": 473461022,
        "sender_full_name": "Nir Paz",
        "timestamp": 1727625506
    }
]