[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/14434\">#14434</a>, <span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span> suggests that we rename <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=mem_posTangentConeAt_of_segment_subset#doc\">docs#mem_posTangentConeAt_of_segment_subset</a> to <code>sub_mem_posTangentConeAt_of_segment_subset</code> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=mem_posTangentConeAt_of_segment_subset%27#doc\">docs#mem_posTangentConeAt_of_segment_subset'</a> to <code>mem_posTangentConeAt_of_segment_subset</code>. What should I do about <code>@[deprecated] alias</code>es in this case?</p>",
        "id": 451199686,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1720890507
    },
    {
        "content": "<p>My suggestion would be: </p>\n<ul>\n<li>aspire to leave deprecations in place for 6 months</li>\n<li>but if they've made it into at least one \"stable release\" (i.e. a version bump) then they are fair game if there is a positive reason to drop them</li>\n</ul>",
        "id": 451200250,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1720890802
    },
    {
        "content": "<p>What do you suggest in this specific situation? I want to rename <code>A</code> to <code>B</code> and <code>A'</code> to <code>A</code>.</p>",
        "id": 451221601,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1720901507
    },
    {
        "content": "<p>I don't think we have deprecation capabilities for this situation. In that case, I would just proceed with the rename with no deprecation. This is in a relatively niche portion of Mathlib (in terms of downstream dependencies), so it's not ideal, but acceptable in my mind.</p>",
        "id": 451222216,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1720901781
    },
    {
        "content": "<p>I'll deprecate the primed version and add mention the rename in the lemma with recycled name.</p>",
        "id": 451222340,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1720901862
    },
    {
        "content": "<p>I think in the medium term we expect to have a special commit message format for describing this type of swap</p>",
        "id": 451709611,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1721119410
    },
    {
        "content": "<p>In the very short term, <code>#align</code> tracks the identity despite the swap</p>",
        "id": 451709683,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1721119436
    },
    {
        "content": "<p>I'd like to revive this thread in light of the <a href=\"#narrow/channel/287929-mathlib4/topic/Convention.20for.20.60f.20*.20g.60.20and.20.2F.20or.20.60fun.20x.20.E2.86.A6.20f.20x.20*.20g.20x.60/near/502605972\"><code>fun_mul</code></a> changes and other planned changes of mine. What is to be done when lemmas are renamed but the original names are immediately used in a different way? Situations like</p>\n<ol>\n<li>(A, B) -&gt; (A', A)</li>\n<li>(A, _) -&gt; (A', A) where _ -&gt; A is a introduction of a new feature</li>\n<li>(A, B) -&gt; (B, A) or longer cycles</li>\n</ol>\n<p>I'm fine if the answer is \"known issue; not fixing\".</p>",
        "id": 502642203,
        "sender_full_name": "Winston Yin (尹維晨)",
        "timestamp": 1740767660
    },
    {
        "content": "<p>I think the answer is currently \"fill out the template in the PR to describe what happened\"</p>",
        "id": 502647835,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1740769548
    },
    {
        "content": "<p>If you're not in a hurry, you can do</p>\n<ol>\n<li>Move the old lemma to the new name, leave deprecated alias</li>\n<li>Wait a cycle</li>\n<li>Drop the the deprecated alias, add the new lemma in its place</li>\n</ol>\n<p>but I'm not pushing for that as a general policy</p>",
        "id": 502654998,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1740772222
    },
    {
        "content": "<p>We sometimes also add a note to the docstring</p>",
        "id": 502655025,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1740772237
    },
    {
        "content": "<p>The ideal would be to be able to write little composable instructions (maybe even metaprograms) that should be run in any downstream repository as it <code>lake update</code>s a dependency, i.e. to rename all <code>A</code> to <code>A'</code>.</p>\n<p>Mario thought some about how to set this up a while back, but there would be a lot of implementation work. If someone is interested in exploring a project like this, please go ahead! We might have resources to do this in future, otherwise.</p>",
        "id": 502695057,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1740792161
    },
    {
        "content": "<p>It's clearly going to become necessary as the ecosystem grows.</p>",
        "id": 502695069,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1740792176
    }
]