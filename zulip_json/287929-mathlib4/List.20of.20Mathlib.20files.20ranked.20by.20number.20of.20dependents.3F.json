[
    {
        "content": "<p>As I understand it,Â <code>lake build Mathlib/A/B.lean</code>Â builds that file plus everything that (directly or indirectly) imports it. Is that correct?</p>\n<p>If that is the case, then rebuild time depends on both the fileâ€™s contents and the number of its dependents. For heavily used files, the dependent rebuild cost should dominate. In particular, Iâ€™d expectÂ <code>Mathlib/Init.lean</code>Â to be the worst case, since nearly everything depends on it. Is that right?</p>\n<p>Is there an easy way to get a list of Mathlib files ordered by \"number of dependents\" (as a rough proxy for rebuild time)? Doesnâ€™t need to be exact: just approximate ordering would help.</p>",
        "id": 536088157,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1756148342
    },
    {
        "content": "<p>Have a look at the <a href=\"https://github.com/leanprover-community/import-graph\"><code>import-graph</code></a> library (this is already <code>require</code>d into Mathlib; it provides the <code>lake exe graph</code> command line tool). It has functions that give you the transitive dependencies, and it should be possible to cook up what you want fairly easily from that.</p>",
        "id": 536132172,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1756168876
    },
    {
        "content": "<p>There's also a script (in <a href=\"https://github.com/leanprover-community/mathlib4/pull/24065\">#24065</a>) to list files in topological order.</p>",
        "id": 536176305,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1756193725
    },
    {
        "content": "<p>There is also <a class=\"message-link\" href=\"/#narrow/channel/113488-general/topic/Sort.20lines.20by.20import.20order.20of.20files/near/478346802\">#general &gt; Sort lines by import order of files @ ðŸ’¬</a>, with a Lean implementation of the sort order.</p>",
        "id": 536279286,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1756227452
    }
]