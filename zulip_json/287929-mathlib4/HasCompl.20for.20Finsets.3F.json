[
    {
        "content": "<p>It appears that there is no <code>HasCompl</code> instance for <code>Finset</code>s in Mathlib:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span>\n<span class=\"c1\">-- failed to synthesize  HasCompl (Finset α)</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">HasCompl</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Is this by design or just an omission? <span class=\"user-mention\" data-user-id=\"387244\">@Yaël Dillies</span></p>",
        "id": 477897305,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1729432669
    },
    {
        "content": "<p>You are missing <code>[DecidableEq α]</code></p>",
        "id": 477897354,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1729432684
    },
    {
        "content": "<p>OK, silly me...</p>",
        "id": 477897376,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1729432720
    },
    {
        "content": "<p>We need a bot to post \"did you forget <code>DecidableEq</code>?\" every time someone asks a question about finsets which doesn't mention it anywhere :-) (I am also guilty of this).</p>",
        "id": 477897569,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729432865
    },
    {
        "content": "<p>Am I not already that bot? <span aria-label=\"innocent\" class=\"emoji emoji-1f607\" role=\"img\" title=\"innocent\">:innocent:</span></p>",
        "id": 477897697,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1729433015
    },
    {
        "content": "<p>Actually we need a bot to write bundled nonconstructive finiteness :-) (plus the 5000 lines of API)</p>",
        "id": 477897975,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729433271
    },
    {
        "content": "<p>5000 sounds like a very low guess</p>",
        "id": 477903010,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729436805
    },
    {
        "content": "<p>More realistically, changing lean to say \"I tried $instance_in_mathlib but it needed <code>DecidableEq</code> which I couldn't find\"</p>",
        "id": 477903172,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729436988
    },
    {
        "content": "<p>We'd have to avoid getting thousands of \"I tried TopologicalRing.toRing but nobody ever mentioned topology\", which is tried and fails probably many thousands of times in mathlib.</p>",
        "id": 477904085,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729437841
    },
    {
        "content": "<p>This has been discussed before; we could tag instances on whether they make sense to warn about in the message. For Finset.instCompleteLattice, this is always something sensible to warn about</p>",
        "id": 477904580,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729438269
    },
    {
        "content": "<p>(this doesn't require a change to the search algorithm, just to the error message generation)</p>",
        "id": 477904599,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729438303
    }
]