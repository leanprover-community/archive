[
    {
        "content": "<p>I suddenly started getting this error and now <code>lean build</code> doesn't work, what's going on?<br>\n<a href=\"/user_uploads/3121/uFu9IrXOEvCQqPwZRCbmfHNH/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/uFu9IrXOEvCQqPwZRCbmfHNH/image.png\" title=\"image.png\"><img data-original-dimensions=\"1015x81\" src=\"/user_uploads/thumbnail/3121/uFu9IrXOEvCQqPwZRCbmfHNH/image.png/840x560.webp\"></a></div>",
        "id": 491995504,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736108566
    },
    {
        "content": "<p><code>lake build --help</code> doesn't seem to document its options (that seems like a bug worth filing though my vague recollection is I think I have noticed this before and maybe found an existing one).<br>\nBut just guessing that <code>lake build --verbose</code> would do something, it appears to -- does doing that tell you at least what <code>git</code> command was run (and maybe even its output)?</p>",
        "id": 491997768,
        "sender_full_name": "Julian Berman",
        "timestamp": 1736110500
    },
    {
        "content": "<p>(Ah, <code>--verbose</code> is an option <code>lake</code> itself is happy with, and is documented in <code>lake --help</code>, maybe this is what I recall noticing previously.)</p>",
        "id": 491997805,
        "sender_full_name": "Julian Berman",
        "timestamp": 1736110549
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/jGsosJWjP9y-U1Ml_iTVXgjB/image.png\">image.png</a><br>\nThis is the output of verbose</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/jGsosJWjP9y-U1Ml_iTVXgjB/image.png\" title=\"image.png\"><img data-original-dimensions=\"1052x226\" src=\"/user_uploads/thumbnail/3121/jGsosJWjP9y-U1Ml_iTVXgjB/image.png/840x560.webp\"></a></div>",
        "id": 492017731,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736128689
    },
    {
        "content": "<p>Well... I found a random <code>package-lock.json.trace</code> file, deleted it, and things seem to be normal again...</p>",
        "id": 492017972,
        "sender_full_name": "Violeta Hernández",
        "timestamp": 1736128874
    },
    {
        "content": "<p>This can happen if a build is cancelled midway through I guess.</p>",
        "id": 492056862,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1736151744
    },
    {
        "content": "<p>I just encountered this exact error condition myself when switching between branches...</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">~/</span><span class=\"n\">Development</span><span class=\"bp\">/</span><span class=\"n\">Mathlib4</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">bhargava</span><span class=\"bp\">-</span><span class=\"n\">factorial</span>\n<span class=\"bp\">⊙</span><span class=\"w\">  </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"w\"> </span><span class=\"c1\">--verbose                                                                                                                                                                                                                                                                                 julian@Mini</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"c1\">--tags --force origin</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">proofwidgets</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">checking</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">revision</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"mi\">07</span><span class=\"n\">f60e90998dfd6592688a14cd67bd4e384b77b2'</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">././.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">proofwidgets</span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">checkout</span><span class=\"w\"> </span><span class=\"c1\">--detach 07f60e90998dfd6592688a14cd67bd4e384b77b2 --</span>\n<span class=\"n\">trace</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">stderr</span><span class=\"o\">:</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Your</span><span class=\"w\"> </span><span class=\"kn\">local</span><span class=\"w\"> </span><span class=\"n\">changes</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">following</span><span class=\"w\"> </span><span class=\"n\">files</span><span class=\"w\"> </span><span class=\"n\">would</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">overwritten</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">checkout</span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">widget</span><span class=\"bp\">/</span><span class=\"n\">package</span><span class=\"bp\">-</span><span class=\"n\">lock</span><span class=\"bp\">.</span><span class=\"n\">json</span><span class=\"bp\">.</span><span class=\"n\">trace</span>\n<span class=\"n\">Please</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"n\">changes</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">stash</span><span class=\"w\"> </span><span class=\"n\">them</span><span class=\"w\"> </span><span class=\"n\">before</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">switch</span><span class=\"w\"> </span><span class=\"n\">branches</span><span class=\"bp\">.</span>\n<span class=\"n\">Aborting</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">external</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">git'</span><span class=\"w\"> </span><span class=\"n\">exited</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>",
        "id": 492162620,
        "sender_full_name": "Julian Berman",
        "timestamp": 1736189286
    },
    {
        "content": "<p>(I don't think anything is to be done? Kevin's probably right, the other branch I was on started building mathlib and I probably killed it by exiting neovim. Just noting in case yet more people run into this.)</p>",
        "id": 492162704,
        "sender_full_name": "Julian Berman",
        "timestamp": 1736189322
    }
]