[
    {
        "content": "<p>In <a href=\"https://github.com/leanprover-community/mathlib4/pull/35494\">#35494</a> I mistakenly used <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=PerfectSpace#doc\">docs#PerfectSpace</a>, but then <span class=\"user-mention\" data-user-id=\"214703\">@Yury G. Kudryashov</span> pointed out that <code>Filter.NeBot (ùìù[‚â†] x)</code> is preferred. I looked into it and it seems like a bit of a mess.</p>\n<p><code>PerfectSpace</code> is actually used very little. Actually the only instance it's ever used to derive is <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Perfect.html#PerfectSpace.not_isolated\">PerfectSpace.not_isolated</a> (according to <a href=\"https://loogle.lean-lang.org/?q=PerfectSpace+_+%E2%86%92+_\">loogle</a>).</p>\n<p>But I guess there's <a href=\"https://loogle.lean-lang.org/?q=%E2%8A%A2+Filter.NeBot+_%2C+nhdsWithin%2C+_%E1%B6%9C\">several places</a> that produce a <code>Filter.NeBot (ùìù[‚â†] x)</code> instance?</p>\n<p>And there are several duplicates then:</p>\n<ul>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Separation/Connected.html#ConnectedSpace.neBot_nhdsWithin_compl_of_nontrivial_of_t1space\">ConnectedSpace.neBot_nhdsWithin_compl_of_nontrivial_of_t1space</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Perfect.html#instPerfectSpaceOfT1SpaceOfConnectedSpaceOfNontrivial\">instPerfectSpaceOfT1SpaceOfConnectedSpaceOfNontrivial</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Algebra/Module/PerfectSpace.html#instPerfectSpace\">instPerfectSpace</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Normed/Field/Basic.html#NormedField.nhdsNE_neBot\">NormedField.nhdsNE_neBot</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Algebra/Module/PerfectSpace.html#perfectSpace_of_module\">perfectSpace_of_module</a> roughly corresponds to both <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/Normed/Module/RCLike/Real.html#Real.punctured_nhds_module_neBot\">Real.punctured_nhds_module_neBot</a>Basic.html#Module.punctured_nhds_neBot) and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Algebra/Module/Basic.html#Module.punctured_nhds_neBot\">Module.punctured_nhds_neBot</a> but neither exactly</li>\n</ul>\n<p>And then there are some that aren't duplicated:</p>\n<ul>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Order/DenselyOrdered.html#instNeBotNhdsWithinComplSetSingletonOfNontrivial\">instNeBotNhdsWithinComplSetSingletonOfNontrivial</a></li>\n<li><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Compactification/OnePoint/Basic.html#OnePoint.nhdsNE_coe_neBot\">OnePoint.nhdsNE_coe_neBot</a></li>\n</ul>",
        "id": 575568102,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1771945767
    },
    {
        "content": "<p>I'd like to propose changing the definition to</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">PerfectSpace</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">TopologicalSpace</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">‚àÄ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">NeBot</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ùìù</span><span class=\"o\">[</span><span class=\"bp\">‚â†</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>so that really these are one and the same. The current definition states it in terms of <code>Preperfect Set.univ</code>, and we can make an alternate constructor for that notion then.</p>\n<p>Then refactoring all the above to use PerfectSpace as the instance they create/use. <code>Filter.NeBot (ùìù[‚â†] x)</code> would only be used otherwise for something that only applies to certain points, for instance <br>\n<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Compactification/OnePoint/Basic.html#OnePoint.nhdsNE_coe_neBot\">OnePoint.nhdsNE_coe_neBot</a> would stay as it is.</p>",
        "id": 575568841,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1771945940
    },
    {
        "content": "<p>I think that this refactor should go to a new PR, but <a href=\"https://github.com/leanprover-community/mathlib4/pull/35494\">#35494</a> should just state the lemma assuming <code>Filter.NeBot (ùìù[‚â†] x)</code> for this specific point.</p>",
        "id": 575622502,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771960320
    },
    {
        "content": "<p>In fact, we've discussed introducing a name for this property (e.g., <code>NonIsolatedPt</code>) a few times, but I was too lazy to do it.</p>",
        "id": 575622745,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771960406
    },
    {
        "content": "<p>Oh yes, I agree new PR. I just wanted to ask here before doing such</p>",
        "id": 575632540,
        "sender_full_name": "Alex Meiburg",
        "timestamp": 1771963977
    },
    {
        "content": "<p>CC: <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> AFAIR, you had a related PR.</p>",
        "id": 575632978,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771964148
    },
    {
        "content": "<p>Was that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NontrivialTopology#doc\">docs#NontrivialTopology</a> ?</p>",
        "id": 575637910,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1771965896
    },
    {
        "content": "<p>Yes, this one. It's equivalent to <code>PerfectSpace</code> for a TVS over <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">R</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb R</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">R</span></span></span></span>, right?</p>",
        "id": 575652303,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1771971590
    },
    {
        "content": "<p>it's not</p>",
        "id": 575667710,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1771980111
    },
    {
        "content": "<p>the trivial topology is always <code>PerfectSpace</code> if the type is <code>Nontrivial</code></p>",
        "id": 575667757,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1771980149
    }
]