[
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Defs.html#mul_left_inj\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Defs.html#mul_left_inj</a><br>\n<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Defs.html#mul_right_cancel_iff\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Group/Defs.html#mul_right_cancel_iff</a><br>\nWhy are there these two near-identical results? Is this a historical quirk? Should one be deprecated? Or am I missing some subtlety about the two slightly different statements?</p>\n<p>I opened <a href=\"https://github.com/leanprover-community/mathlib4/pull/30468\">#30468</a> to create a version of the latter for GroupWithZero, but it was pointed out that GroupWithZero already has a version of the former.</p>",
        "id": 546634129,
        "sender_full_name": "Jeremy Parker",
        "timestamp": 1761212394
    },
    {
        "content": "<p>wow, even in the same file and very close to each other</p>",
        "id": 546634379,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761212460
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/ZzvKuGXleMKIdHc0yXnZcgcX/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/ZzvKuGXleMKIdHc0yXnZcgcX/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1107x316\" src=\"/user_uploads/thumbnail/3121/ZzvKuGXleMKIdHc0yXnZcgcX/image.png/840x560.webp\"></a></div>",
        "id": 546634606,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761212514
    },
    {
        "content": "<p>it seems like they were originally in different files</p>",
        "id": 546634640,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761212522
    },
    {
        "content": "<p>It goes even further: <a href=\"https://github.com/leanprover-community/mathlib3/pull/2707\">mathlib3#2707</a> suggests they were originally in core Lean vs Mathlib.</p>",
        "id": 546635575,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1761212822
    },
    {
        "content": "<p><code>mul_left_cancel_iff</code> was defined in core Lean back in 2017-03-08: <a href=\"https://github.com/leanprover-community/lean/commit/4c88e2c5b0ff162fc3d96524e3142668b92a3795\">https://github.com/leanprover-community/lean/commit/4c88e2c5b0ff162fc3d96524e3142668b92a3795</a></p>\n<p><code>mul_right_inj</code> was defined in Mathlib back in 2017-09-16: <a href=\"https://github.com/leanprover-community/mathlib3/commit/a1c3e2defc89c1bc792cb34caf9947dd77aabd3f\">https://github.com/leanprover-community/mathlib3/commit/a1c3e2defc89c1bc792cb34caf9947dd77aabd3f</a></p>\n<p>And I suppose they have never really been merged ever since.</p>",
        "id": 546637606,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1761213485
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=mul_right_inj#doc\">docs#mul_right_inj</a> seems to be an order of magnitude more popular in Mathlib, shall we keep that one?</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span>rg<span class=\"w\"> </span><span class=\"s1\">'\\bmul_(left|right)_cancel_iff\\b'</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>wc<span class=\"w\"> </span>-l\n<span class=\"w\">      </span><span class=\"m\">25</span>\n$<span class=\"w\"> </span>rg<span class=\"w\"> </span><span class=\"s1\">'\\bmul_(left|right)_inj\\b'</span><span class=\"w\"> </span><span class=\"p\">|</span><span class=\"w\"> </span>wc<span class=\"w\"> </span>-l\n<span class=\"w\">     </span><span class=\"m\">231</span>\n</code></pre></div>",
        "id": 546638010,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1761213603
    },
    {
        "content": "<p>(Note that core Lean also has <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.mul_left_inj#doc\">docs#Nat.mul_left_inj</a> vs <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.mul_right_cancel_iff#doc\">docs#Nat.mul_right_cancel_iff</a> for even more confusion!)</p>",
        "id": 546638398,
        "sender_full_name": "Anne Baanen",
        "timestamp": 1761213726
    },
    {
        "content": "<p>again I'm confused why even though it's the same statement one is left and one is right</p>",
        "id": 546644792,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761215851
    },
    {
        "content": "<p>which one is correct (or are they both correct)?</p>",
        "id": 546644881,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761215880
    },
    {
        "content": "<p>One is saying that left multiplying <code>a</code> by an element is injective. The other is saying that right multiplying by an element called <code>a</code> cancels. They're conceptually different but the statements are identical</p>",
        "id": 546645576,
        "sender_full_name": "Jeremy Parker",
        "timestamp": 1761216132
    },
    {
        "content": "<p>Not quite identical -- one assumes <code>a â‰  0</code> and the other assumes <code>0 &lt; a</code> ;-)</p>",
        "id": 546767964,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761252895
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"947076\">Jeremy Parker</span> <a href=\"#narrow/channel/287929-mathlib4/topic/mul_left_inj.20and.20mul_right_cancel_iff/near/546645576\">said</a>:</p>\n<blockquote>\n<p>One is saying that left multiplying <code>a</code> by an element is injective. The other is saying that right multiplying by an element called <code>a</code> cancels. They're conceptually different but the statements are identical</p>\n</blockquote>\n<p>Wait, no actually that's conceptually the same</p>",
        "id": 546771048,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761254471
    },
    {
        "content": "<p>I guess the difference is whether you view it as left multiplication or right multiplication</p>",
        "id": 546771106,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761254515
    },
    {
        "content": "<p>so which one is it</p>",
        "id": 546771127,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761254526
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"238446\">Anne Baanen</span> <a href=\"#narrow/channel/287929-mathlib4/topic/mul_left_inj.20and.20mul_right_cancel_iff/near/546638010\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=mul_right_inj#doc\">docs#mul_right_inj</a> seems to be an order of magnitude more popular in Mathlib</p>\n</blockquote>\n<p>That's because that's the one that <code>exact?</code> finds ;-)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c1\">--#check mul_left_cancel_iff</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">inst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Mul</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsLeftCancelMul</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">â†”</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact?</span>\n</code></pre></div>",
        "id": 546771448,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761254722
    },
    {
        "content": "<p>recently I found <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Option.mem_some#doc\">docs#Option.mem_some</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Option.mem_some_iff#doc\">docs#Option.mem_some_iff</a> which are not only identical but are defined one after the other</p>",
        "id": 546792745,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1761268828
    },
    {
        "content": "<p>I'm wondering if this was on purpose though, as one is marked as a <code>grind</code> theorem and the second is defined as the first</p>",
        "id": 546792968,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1761268896
    },
    {
        "content": "<p>is there some benefit to having grind-tagged and non-grind-tagged versions of a theorem?</p>",
        "id": 546793107,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1761268941
    },
    {
        "content": "<p>actually it looks like it was added before the grind notation in <a href=\"https://github.com/leanprover/lean4/commit/cf3b257ccd2599e0bee2116f046a3a9f52f35e76\">this commit</a></p>\n<p>weird... I can understand if we wanted to standardize on <code>_iff</code> suffixes or something like that, but if so, why not deprecate the previous version?</p>",
        "id": 546793634,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1761269231
    },
    {
        "content": "<p>These are all just signs that is is difficult to maintain very large libraries! If it is obvious which name/variant is preferred, please open PRs! If it is not obvious, discuss here.</p>\n<p>Can someone write a tool that detects exact duplicates up to naming? Up to reordering hypotheses? Up to common hypothesis variants (e.g. <code>n \\ne 0</code> and <code>0 &lt; n</code> in <code>Nat</code>)? etc? :-)</p>",
        "id": 546805754,
        "sender_full_name": "Kim Morrison",
        "timestamp": 1761278524
    },
    {
        "content": "<p>I wrote something like that in <a class=\"stream-topic\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4/topic/duplicate.20declarations/with/535861128\">#mathlib4 &gt; duplicate declarations</a></p>",
        "id": 546805965,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1761278661
    },
    {
        "content": "<p>Ha oh yeah and the results were spectacular IIRC! (over 300 dupes I think?)</p>\n<p>Link to text file is in this message <a class=\"message-link\" href=\"/#narrow/channel/287929-mathlib4/topic/duplicate.20declarations/near/519075233\">#mathlib4 &gt; duplicate declarations @ ðŸ’¬</a></p>",
        "id": 546925228,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761319911
    },
    {
        "content": "<p>So the correct question is now whether someone can now write a tool which deprecates the right one of each dupe!</p>",
        "id": 546925349,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761319943
    }
]