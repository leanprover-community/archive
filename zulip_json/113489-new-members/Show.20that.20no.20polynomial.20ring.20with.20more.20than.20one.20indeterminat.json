[
    {
        "content": "<p>My goal is to show that no polynomial ring with more than one indeterminate is a PID.<br>\nNow I have written this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">Ideal</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mvPolynomial_not_pid_of_card_ge_two</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">IsPrincipalIdealRing</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Select two distinct variables i and j from σ</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">exists_pair_of_one_lt_card</span><span class=\"w\"> </span><span class=\"n\">h</span>\n\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">j</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- Consider the ideal I = (x, y)</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- First part: I ≠ ⊤</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">proper</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"bp\">⊤</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hI</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">one_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hI</span><span class=\"o\">]</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">trivial</span>\n\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">eq1</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_pair</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">one_mem</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">const_eq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">eq1</span><span class=\"o\">]</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_x_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">@</span><span class=\"n\">coeff_zero_X</span><span class=\"o\">]</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_y_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">@</span><span class=\"n\">coeff_zero_X</span><span class=\"o\">]</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">rhs_const</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_add</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_x_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_y_zero</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rhs_const</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">const_eq</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">one_ne_zero</span><span class=\"w\"> </span><span class=\"n\">const_eq</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- Second part: Assume PID and derive a contradiction</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hPID</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Correct way to get the principal ideal generator</span>\n<span class=\"w\">  </span><span class=\"n\">haveI</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hPID</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hf</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsPrincipalIdealRing</span><span class=\"bp\">.</span><span class=\"n\">principal</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">principal</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- x and y are both in I</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">x_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">subset_span</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">y_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">subset_span</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hf</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">x_mem</span><span class=\"w\"> </span><span class=\"n\">y_mem</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- Therefore, there exist a, b such that x = a*f and y = b*f</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">x_mem</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">y_mem</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- Key step: Prove that f must be a unit</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ha</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_false_eq_true</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ite_false</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">    </span><span class=\"c1\">-- Now this : (coeff 0 f) * (coeff 0 a) = 0</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hb</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_false_eq_true</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ite_false</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"c1\">--(to be continued)</span>\n</code></pre></div>\n<p>But I have no idea about the two <code>sorry</code>. Can anyone give a hand?</p>",
        "id": 523491419,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749624831
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 523491527,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749624896
    },
    {
        "content": "<p><code>simp [coeff_f_zero_of_a ha_ne_zero]</code> solves it</p>",
        "id": 523495236,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1749626573
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523495236\">said</a>:</p>\n<blockquote>\n<p><code>simp [coeff_f_zero_of_a ha_ne_zero]</code> solves it</p>\n</blockquote>\n<p>Sorry, but it cannot work. In what part do you use this <code>simp</code>? I was trying to prove <code>coeff_f_zero_of_a</code>. How can I use it in <code>simp</code>?</p>",
        "id": 523499812,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749628308
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"n\">ha_ne_zero</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 523501614,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1749628904
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523501614\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"n\">ha_ne_zero</span><span class=\"o\">]</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I have to say that it cannot work</p>\n<p><a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQOJgCmAdogG4AKE6AnsRCMEunAJIAmhzeZSUTWdITgAKAEpwAXHAAqNIgCoAlHADaAMWCF07OGIC6OXvySDhIwMPAU2fMLK1m4jFtwL+tQBFCAY2DtTQgCiAI6uhjhohNCEIHAglNR0DEzoAPr0MKlgfqkQAGap3nzsqQDmhKkwAO4QoqjWAExwgCZEcI7ORAB0RVC6FiqSOHDDcAA1bADOFPzEvmDMHFzoYsDEpaIICbT0jMyuegMAvHBYNHjDEFgwSKtwgBfkwAA0cABWz6jAL4CX5FLH7badQgAD2AExgEyyNyguQKEGIFXQmR6ulQ5zgQngQOsmyo22SeysEkkxwAGnBgEN0YR4DRsVskrsWITfnAyS88JSMWwWRN5qQRABvIHPGgAX2sAGVqRt6TsUvsxEolGjUEgyMIwFACIQoNZWHBAAZEcEAJUQs06U4arGBauCoVgW21q4RwiogGLWEQARjpuIZ8sJKkAEETc4knWlQKpqO36ADccGtwDIKTRFyuN1IdyQzywz0IwU9P1DbpAqV5SGIkOAUE64DgLtSxZTjvVcG8cLBqTz1jbhDyeVEAAZrFZAEmEgACCOCAVEIVN7jj2+4Ph3Bx1OVCIkHAFHAsQBqE6buA0I5hh3DCNqPOe8IjZvCecFIGpABeOtq0nvi+ko4n0+3cGOQ6huaN5npGqgAAL3s+r6pCS14jKqLZQTQ0E2u+EC9v2IiAfsK6/rSAFmmcIFwOeEFQS+WqwfBwyIcIUCoBCbbEGC3YYQu2FLnha4bluu77luR7/nAgHHMBIFkVBSDsOwzxQSAACu6ByexBSKeghgkRMoBgKepFgVBj6URAKmYakKHGZpIHaeATaSapuTws8DFMe2MDuCgrZuZ2wQOsCSDePA9bwqhtTMR2eYcpaTg2qgFCsB4KpOvqoZxQllKXNctx3Hk7x5IWxwiKwUwzHMCycMwKxrJ0mqrGVLCsEoNWlcA8zoFFt7bg27rSFiwYpccEwKVgEzUqWfKiKccA2WAyq0U6h7dbE0i0v1PLDaNmRlvyU0zXN+lRnkHmYkti2NhlabZVmjoFXEMTjeWparKUGJwjWYBdY2qZZRmOa2lgt3Fg9FbaWsr3EO9Z0xB1dF6hMACqxDAPA/ZAcRCELehmGfrhP4qFic6qTj36rqI/Zbkgx5TWRqpWcMM11sQtBqFBJLPCFebvJ87MQJkeTMKNPmVFACmEM8yMVPz6CjaZfYNkpzzGfLylwNJJSWar8BoKCDqw1BBRK/kqQbljHE4STv4bkaQ4jl52OcV+y543A/aEWjelWrFSDpBUxl6bDqDK6FLLaxM/uY3bC5DuTkf9kOG5u2J6NaTpLMOQbMFGxuqo+6FdMjEgYBgMzADy1baKAojqULxmQ6H+03gA7eSMW1KgGdanpwz+YFtodxAenN57bfe37JHDMx1rScAgXAHCTaw6bWHm07pMEbHxOr7+Igx1gVPhmBqBYPnDNwszqis+zFSc7anydBMNAgCAPN8wL1/BMLovizAktv7LakKzgErdSzw1Z501vGD4Ycbx63TqFGEqQsBsXtivbi+5rbLg3g7XGpNXYiSInpCY0AoA0CAA\">Lean 4 Web with my code</a></p>",
        "id": 523503309,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749629459
    },
    {
        "content": "<p>Oh, that's because your split code confused me</p>",
        "id": 523505726,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1749630211
    },
    {
        "content": "<p>What's your pen-and-paper argument?</p>",
        "id": 523506206,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1749630365
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523506206\">said</a>:</p>\n<blockquote>\n<p>What's your pen-and-paper argument?</p>\n</blockquote>\n<p>Theorem:</p>\n<p>No polynomial ring with more than one indeterminate is a PID.</p>\n<p>Proof:</p>\n<p>Assume card(σ) ≥ 2. Since the set of variables has at least two elements, we can choose two distinct variables i and j from σ.</p>\n<p>Let x = X i and y = X j be the corresponding variables in the multivariable polynomial ring.</p>\n<p>Now define the ideal</p>\n<p>I := span {x, y} ⊂ MvPolynomial σ R.</p>\n<p>Step 1: Show that I is a proper ideal (i.e., I ≠ ⊤)</p>\n<p>Suppose for contradiction that I = ⊤. Then 1 ∈ I, so there exist polynomials a and b such that:</p>\n<p>1 = a * x + b * y</p>\n<p>Taking the constant term (i.e., the coefficient of 0 ∈ σ →₀ ℕ) on both sides:</p>\n<p>coeff₀(1) = coeff₀(a * x + b * y)</p>\n<p>But since both x and y have no constant term, any product with them also has zero constant term. So the right-hand side is 0, while the left-hand side is 1, contradiction.</p>\n<p>Therefore, I is a proper ideal.</p>\n<p>Step 2: Suppose for contradiction that MvPolynomial σ R is a principal ideal ring</p>\n<p>If so, then the ideal I = (f) for some polynomial f. That means:</p>\n<p>x ∈ (f), so x = a * f for some a</p>\n<p>y ∈ (f), so y = b * f for some b</p>\n<p>Let’s analyze the structure of f.</p>\n<p>Case 1: coeff₀(f) = 0</p>\n<p>We know:</p>\n<p>degreeOf i (a * f) ≥ 1</p>\n<p>degreeOf j (b * f) ≥ 1</p>\n<p>Also, since degrees are nonnegative:</p>\n<p>degreeOf i f ≥ 1 - degreeOf i a ≥ 1 - 0 = 1</p>\n<p>degreeOf j f ≥ 1 - degreeOf j b ≥ 1 - 0 = 1</p>\n<p>Thus, f must involve both variables i and j, meaning i ∈ support(f) and j ∈ support(f).</p>\n<p>But x = a * f, and so support(f) ⊆ support(x). Since x = X i, we know support(x) = {i}, so j ∉ support(f). Contradiction.</p>\n<p>Case 2: coeff₀(f) ≠ 0</p>\n<p>Then f has a nonzero constant term, which means f is a unit in MvPolynomial σ R (units are constant polynomials with nonzero coefficients).</p>\n<p>So I = (f) = ⊤, again contradicting the earlier result that I ≠ ⊤.</p>\n<p>Conclusion:</p>\n<p>In both cases, assuming I is principal leads to a contradiction. Therefore, MvPolynomial σ R is not a principal ideal ring when card(σ) ≥ 2.</p>\n<p>∎</p>",
        "id": 523507423,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749630745
    },
    {
        "content": "<p><a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQOJgCmAdogG4AKE6AnsRCMEunAJIAmhzeZSUTWdITgAKAEpwAXHAAqNIgCoAlHADaAMWCF07OGIC6OXvySDhIwMPAU2fMLK1m4jFtwL+tQBFCAY2DtTQgCiAI6uhjhohNCEIHAglNR0DEzoAPr0MKlgfqkQAGap3nzsqQDmhKkwAO4QoqjWAExwgCZEcI7ORAB0RVC6FiqSOHDDcAA1bADOFPzEvmDMHFzoYsDEpaIICbT0jMyuegMAvHBYNHjDEFgwSKtwgBfkwAA0cABWz6jAL4CX5FLH7badQgAD2AExgEyyNyguQKEGIFXQmR6ulQ5zgQngQOsmyo22SeysEkkxwAGnBgEN0YR4DRsVskrsWITfnAyS88JSMWwWRN5qQRABvIHPGgAX2sAGVqRt6TsUvsxEolGjUEgyMIwFACIQoNZWHBAAZEcEAJUQs06U4arGBauCoVgW21q4RwiogGLWEQARjpuIZ8sJKkAEETc4knWlQKpqO36ADccGtwDIKTRFyuN1IdyQzywz0IwU9P1DbpAqV5SGIkOAUE64DgLtSxZTjvVcG8cLBqTz1jbhDyeVEAAZrFZAEmEgACCOCAVEIVN7jj2+4Ph3Bx1OVCIkHAFHAsQBqE6buA0I5hh3DCNqPOe8IjZvCecFIGpABeOtq0nvi+ko4n0+3cGOQ6huaN5npGqgAAL3s+r6pCS14jKqLZQTQ0E2u+EC9v2IiAfsK6/rSAFmmcIFwOeEFQS+WqwfBwyIcIUCoBCbbEGC3YYQu2FLnha4bluu77luR7/nAgHHMBIFkVBSDsOwzxQSAACu6ByexBSKeghgkRMoBgKepFgVBj6URAKmYakKHGZpIHaeATaSapuTws8DFMe2MDuCgrZuZ2wQOsCSDePA9bwqhtTMR2eYcpaTg2qgFCsB4KpOvqoZxQllKXNctx3Hk7x5IWxwiKwUwzHMCycMwKxrJ0mqrGVLCsEoNWlcA8zoFFt7bg27rSFiwYpccEwKVgEzUqWfKiKccA2WAyq0U6h7dbE0i0v1PLDaNmRlvyU0zXN+lRnkHmYkti2NhlabZVmjoFXEMTjeWparKUGJwjWYBdY2qZZRmOa2lgt3Fg9FbaWsr3EO9Z0xB1dF6hMACqxDAPA/ZAcRCELagDZKaFbGYZ+uE/ioWJzqpBPfquoj9luSDHlNZGqlZwwzXWxC0GoUEks8IV5u8nzcxAmR5Mwo0+ZUUAKYQzx6cjFTC+go2mX22PKXAxkq880klJZcCeVj6mhQ6LNwuzGirJtnTljAfhMKUcLMKFzyOBbQ0lqDL3UnCx22irhs3rDUEFOr+SpBu6H45xX7LkTuuGiJy5eRHOEU7+/aEWjMsxbUqrpBUxl6bD4cLkO1OJ8Xsfp2J6MkWRgAJhD7BvGc89cUTBZLAEzIxIGAYDswA8tW2igKIBt5qFkNoKC+03gA7eSWe2kHr56cM/mBYvfsgXPVqxUgm8kcx1rScAgXAHCTaF2XWHJ9HlMEVf5O37+Iil1gdPhmBqBYJ3xts7Sqic25hUXmtpPidAmDQEAIABZCxFsA4I4tJbPFlqkeWisr4azVjBdSmsZKhW9pPCYDoA4OSXlREOWA8YcRvtxfcRohwjgfpHQmlM07xwzlpaAUAaBAA\">Here you go</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ha</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_false_eq_true</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">ite_false</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">ha_ne_zero</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">coeff_zero_X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 523507458,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1749630757
    },
    {
        "content": "<p>The lemma you needed was that the zeroth term is the product of zeroth terms (so  <code>Finset.antidiagonal_zero</code>) thought I wouldn't be surprised if there's already a lemma about it expresed directly for polynomials</p>",
        "id": 523507794,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1749630866
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523506206\">said</a>:</p>\n<blockquote>\n<p>What's your pen-and-paper argument?</p>\n</blockquote>\n<p>Now following my pen-and-paper argument and <span class=\"user-mention silent\" data-user-id=\"466290\">Luigi Massacci</span>'s help, I try to accomplish my code this way:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">Ideal</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mvPolynomial_not_pid_of_card_ge_two</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">IsPrincipalIdealRing</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">exists_pair_of_one_lt_card</span><span class=\"w\"> </span><span class=\"n\">h</span>\n\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">j</span>\n\n\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">proper</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"bp\">⊤</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hI</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">one_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hI</span><span class=\"o\">]</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">trivial</span>\n\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">eq1</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_pair</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">one_mem</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">const_eq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">eq1</span><span class=\"o\">]</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_x_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">@</span><span class=\"n\">coeff_zero_X</span><span class=\"o\">]</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_y_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">@</span><span class=\"n\">coeff_zero_X</span><span class=\"o\">]</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">rhs_const</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_add</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_x_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_y_zero</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rhs_const</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">const_eq</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">one_ne_zero</span><span class=\"w\"> </span><span class=\"n\">const_eq</span>\n\n\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hPID</span>\n\n<span class=\"w\">  </span><span class=\"n\">haveI</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hPID</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hf</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsPrincipalIdealRing</span><span class=\"bp\">.</span><span class=\"n\">principal</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">principal</span>\n\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">x_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">subset_span</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">y_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">subset_span</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hf</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">x_mem</span><span class=\"w\"> </span><span class=\"n\">y_mem</span>\n\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">x_mem</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">y_mem</span>\n\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ha</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_false_eq_true</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">ite_false</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">ha_ne_zero</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">coeff_zero_X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">mul_eq_zero</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hf_zero</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hf_zero</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">ha_zero</span>\n<span class=\"w\">        </span><span class=\"n\">contradiction</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hb</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_false_eq_true</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">ite_false</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">ha_ne_zero</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">coeff_zero_X</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">mul_eq_zero</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hf_zero</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hf_zero</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">ha_zero</span>\n<span class=\"w\">        </span><span class=\"n\">contradiction</span>\n\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">ha0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hf0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"n\">ha0</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hfx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hf0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hfx</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_zero_X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hfx</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">ha0</span><span class=\"w\"> </span><span class=\"n\">hfx</span>\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">hb0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hf0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_b</span><span class=\"w\"> </span><span class=\"n\">hb0</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hfy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hf0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hfy</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_zero_X</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hfy</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hb0</span><span class=\"w\"> </span><span class=\"n\">hfy</span>\n<span class=\"w\">    </span><span class=\"c1\">-- If both a and b have zero constant term, then f must be a unit</span>\n<span class=\"w\">    </span><span class=\"n\">push_neg</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">ha0</span><span class=\"w\"> </span><span class=\"n\">hb0</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hf</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">isUnit_of_dvd_one</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">hf</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">eq_top_iff_one</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">this</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- Now we know f is a unit, which implies I = (1), contradicting properness</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">I_top</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⊤</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hf</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">span_singleton_eq_top</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsUnit</span><span class=\"bp\">.</span><span class=\"n\">span_singleton_eq_top</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">proper</span><span class=\"w\"> </span><span class=\"n\">I_top</span>\n</code></pre></div>\n<p>Absolutely there is still something wrong: <code>rw [← h_mul_zero_x, coeff_zero_X i] at hfx</code>, <code> rw [← mem_span_singleton] at hf</code>, <code>exact Ideal.span_singleton_eq_top.mp (IsUnit.span_singleton_eq_top this)</code>.</p>\n<p><a href=\"https://live.lean-lang.org/#codez=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\">Lean 4 Web with my new code</a></p>",
        "id": 523524163,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749636082
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 523524826,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749636315
    },
    {
        "content": "<p>The pen-and-paper writing is as follows:</p>\n<p>Case 1: coeff₀(a) ≠ 0</p>\n<p>Then:</p>\n<p>coeff₀(x) = coeff₀(f * a) = coeff₀(f) * coeff₀(a)</p>\n<p>But coeff₀(x) = 0, and coeff₀(a) ≠ 0, so:</p>\n<p>coeff₀(f) = 0</p>\n<p>Case 2: coeff₀(b) ≠ 0</p>\n<p>Same reasoning:</p>\n<p>coeff₀(y) = coeff₀(f * b) = coeff₀(f) * coeff₀(b)</p>\n<p>But coeff₀(y) = 0, and coeff₀(b) ≠ 0, so:</p>\n<p>coeff₀(f) = 0</p>\n<p>Case 3: coeff₀(a) = 0 and coeff₀(b) = 0</p>\n<p>Then both a and b have no constant term — they lie in the augmentation ideal 𝔪 := { g | coeff₀(g) = 0 }.</p>\n<p>Hence:</p>\n<p>f * a ∈ 𝔪, so x ∈ 𝔪</p>\n<p>f * b ∈ 𝔪, so y ∈ 𝔪</p>\n<p>So the ideal ⟨x, y⟩ ⊆ 𝔪, but then f cannot generate the unit ideal unless f is a unit (because 𝔪 is a proper ideal, not the whole ring).</p>\n<p>So in this case, f must be a unit.</p>\n<p>The code above still have something wrong, and I cannot find an appropriate one in <code>rw[]</code>...  : (</p>",
        "id": 523528640,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749637685
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"877182\">@Nick_adfor</span> you've posted many snippets of code, sometimes with a full link, and sometimes without; which link are we meant to follow now?</p>",
        "id": 523529138,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749637852
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523529138\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"877182\">Nick_adfor</span> you've posted many snippets of code, sometimes with a full link, and sometimes without; which link are we meant to follow now?</p>\n</blockquote>\n<p>OK, I've deleted all the code snippets, leaving only the complete code.</p>",
        "id": 523529752,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749638070
    },
    {
        "content": "<p>it seems like you need this theorem which is unfortunately not in mathlib(?):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"bp\">.</span><span class=\"n\">coeff_zero_mul</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">classical</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_mul</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 523530098,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749638168
    },
    {
        "content": "<p>you can add this theorem to the top</p>",
        "id": 523530121,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749638177
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523530098\">said</a>:</p>\n<blockquote>\n<p>it seems like you need this theorem which is unfortunately not in mathlib(?):</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"bp\">.</span><span class=\"n\">coeff_zero_mul</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">classical</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_mul</span><span class=\"o\">]</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Oh, it is already in mathlib</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">simp</span><span class=\"kd\">]</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"bp\">.</span><span class=\"n\">mul_coeff_zero</span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Semiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>",
        "id": 523530537,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749638328
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"877182\">@Nick_adfor</span> no, Polynomial and MvPolynomial are different</p>",
        "id": 523530684,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749638391
    },
    {
        "content": "<p>I just checked my code, seeming that I do not use this theorem, but write</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hfx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 523530686,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749638393
    },
    {
        "content": "<p>yes, but in the general philosophy it's better to extract lemmas whenever possible</p>",
        "id": 523530736,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749638415
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523530684\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"877182\">Nick_adfor</span> no, Polynomial and MvPolynomial are different</p>\n</blockquote>\n<p>It's my misunderstanding : ( Sorry!</p>",
        "id": 523530743,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749638419
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523530736\">said</a>:</p>\n<blockquote>\n<p>yes, but in the general philosophy it's better to extract lemmas whenever possible</p>\n</blockquote>\n<p>Thanks for the advice! Now I just get the whole proof into one <code>theorem</code>, but absolutely I can extract some lemmas to make the main proof precise.</p>",
        "id": 523531146,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749638579
    },
    {
        "content": "<p>Now I'm stuck in three <code>tactic rw failed</code>: <code>rw [← h_mul_zero_x, coeff_zero_X i] at hfx</code>,  <code>w [← h_mul_zero_y, coeff_zero_X j] at hfy</code>, <code>rw [← mem_span_singleton] at hf</code>, </p>\n<p>and one <code>invalid field notation</code>: <code>exact Ideal.span_singleton_eq_top.mp (IsUnit.span_singleton_eq_top this)</code>.</p>",
        "id": 523531703,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749638741
    },
    {
        "content": "<p>updated link?</p>",
        "id": 523531772,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749638759
    },
    {
        "content": "<p>The updated link is <a href=\"https://live.lean-lang.org/#codez=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\">here</a></p>",
        "id": 523531947,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749638814
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523530098\">said</a>:</p>\n<blockquote>\n<p>it seems like you need this theorem which is unfortunately not in mathlib(?):</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"bp\">.</span><span class=\"n\">coeff_zero_mul</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">classical</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_mul</span><span class=\"o\">]</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/MvPolynomial/Basic.html#MvPolynomial.constantCoeff\">MvPolynomial.constantCoeff</a> which is a <code>RingHom</code> hence it preserves multiplication.</p>",
        "id": 523532072,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749638859
    },
    {
        "content": "<p>hmm that doesn't seem like a good name <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 523532574,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749639029
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"877182\">Nick_adfor</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523531947\">said</a>:</p>\n<blockquote>\n<p>The updated link is <a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQOJgCmAdogG4AKE6AnsRCMEunAJIAmhzeZSUTWdITgAKAEpwAXHAAqNIgCoAlHADaAMWCF07OGIC6OXvySDhIwMPAU2fMLK1m4jFtwL+tQBFCAY2DtTQgCiAI6uhjhohNCEIHAglNR0DEzoAPr0MKlgfqkQAGap3nzsqQDmhKkwAO4QoqjWAExwgCZEcI7ORAB0RVC6FiqSOHDDcAA1bADOFPzEvmDMHFzoYsDEpaIICbT0jMyuegMAvHBYNHjDEFgwSKtwgBfkwAA0cABWz6jAL4CX5FLH7badQgAD2AExgEyyNyguQKEGIFXQmR6ulQ5zgQngQOsmyo22SeysEkkxwAGnBgEN0YR4DRsVskrsWITfnAyS88JSMWwWRN5qQRABvIHPGgAX2sAGVqRt6TsUvsxEolGjUEgyMIwFACIQoNZWHBAAZEcEAJUQs06U4arGBauCoVgW21q4RwiogGLWEQARjpuIZ8sJKkAEETc4knWlQKpqO36ADccGtwDIKTRFyuN1IdyQzywz0IwU9P1DbpAqV5SGIkOAUE64DgLtSxZTjvVcG8cLBqTz1jbhDyeVEAAZrFZAEmEgACCOCAVEIVN7jj2+4Ph3Bx1OVCIkHAFHAsQBqE6buA0I5hh3DCNqPOe8IjZvCecFIGpABeOtq0nvi+ko4n0+3cGOQ6huaN5npGqgAAL3s+r6pCS14jKqLZQTQ0E2u+EC9v2IiAfsK6/rSAFmmcIFwOeEFQS+WqwfBwyIcIUCoBCbbEGC3YYQu2FLnha4bluu77luR7/nAgHHMBIFkVBSDsOwzxQSAACu6ByexBSKeghgkRMoBgKepFgVBj6URAKmYakKHGZpIHaeATaSapuTws8DFMe2MDuCgrZuZ2wQOsCSDePA9bwqhtTMR2eYcpaTg2qgFCsB4KpOvqoZxQllKXNctx3Hk7x5IWxwiKwUwzHMCycMwKxrJ0mqrGVLCsEoNWlcA8zoFFt7bg27rSFiwYpccEwKVgEzUqWfKiKccA2WAyq0U6h7dbE0i0v1PLDaNmRlvyU0zXN+lRnkHmYkti2NhlabZVmjoFXEMTjeWparKUGJwjWYBdY2qZZRmOa2lgt3Fg9FbaWsr3EO9Z0xB1dF6hMACqxDAPA/ZAcRCELagDZKaFqRYuhmGfrhP4qFic6qUT36rqI/Zbkgx5TWRqpWcMM11sQtBqFBJLPCFebvJ8vMQJkeTMKNPmVFACmEI8enIxUovoKNpl9tjylwMZavPNJJSWXAnlY+puNAg6bNwpzGirJtnTljAfhMKUcLMKFzyONbQ0lqDL3UnCx22mrxsOrDUEFJr+SpBuBMcThVO/huRpDiOXmE5xX7LiTcD9oRaNyzFtSqukFTGXpsNR/2Q608nC5Dhu2diejJFkYACYT+0bmvCnALcUTBZLACzIxIGAYCcwA8tW2igKIRt5qFkNoKC+03gA7eSee2qHr56cM/mBevoV6SvVqxUg+8kcMzHWtJwCBcAcJNrDhs45rtJl5T6fUwRVdYTH7+/iIldYAZuGMCqAsD9zNhzWkqhua8wqPzW0gs4AZFSIrcWM9rTS1liReWKCxYyy/lrDWMF1LaxkqFP2j80jP1NjpdmFs3bUhtk4e2SBHbEGdsZV2VtGEeyemDH2xAKEB2oTeYODkN5UXDlgNiKcf7cX3AnZcX837yKziJIiudrT5xPiFYuJFS7KIrgeD8Q5pF1xPGfA6qgW6UNxjQZ4XcHKazZP3YYg9h60jHoCTAsQRDT2CLPWs88JiLxGIfNeqAJEQC3nAHe8BImnxAuErRjpEkkQvlAK+N874OlOIUJAo0JiOhwh+VOxNqbxxEg6FeD88iiQIVEmEEdikl0xnkfGhiaYHnpsJExmdjEUxrhoyxECLbySUlwlijDbYsLYRw18kz3YKU9s9cGrirGRIHM8TW6kKHtL0s3VuT8YId27lRXueyTYkTicU9eVyRh5KKIU/6JSKZlNjioaRCdqmdU2SyEOuMpEvNaS2SJL9On/wPIA3pgz+lbj6dInOIzaHmygeM9WDCYBMLtuwB2TsqELLaNwrFvCvZrIOSAup2ziFKT2Q3EYhzbHPxVo0lx+t4l5HpdvIEAV4lYCHGCh0ABaIVbB+xYGFvUDc5ZdDSNhsZLyLFrhOHjDqEAzxIikH7IpViWBhAbgUkjGADowAKQmFjeE6wDZIAFfyh0hygbbT4d7GAvt2Xr3tb2VYwhQSI2Rk09gZASgujgAAflSEHBa0hvTBm2nAAUeRxRIokmBGxR09I3MWMwQEATXVgFSMAVWLpIZQDyO1G8NzHV8mdeDOeHwJhohFXAAAchASMVRhAAGt6CRn7KCfWcBDXI2eFUD43h6g6UwIQIp+pCqeiUCpGKWS7ZrDgJqbUUB4QTAbfNFsrBKgED1MJU0ybQKHX7pmiq6BOhOrJQIiWebIZFQRkam91a72uorOgw9wT9o3PXUQXU+681AA\">here</a></p>\n</blockquote>\n<p>well, yeah you're getting the same error because the thing you're trying to rewrite still looks like <code>coeff 0 (f * a)</code></p>",
        "id": 523532712,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749639077
    },
    {
        "content": "<p>the fact that you've proved <code>coeff 0 (f * a) = coeff 0 f * coeff 0 a</code> separately doesn't mean that Lean now automatically assumes that they're equal everywhere</p>",
        "id": 523532794,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749639101
    },
    {
        "content": "<p>BTW, if it's me, I will prove that <code>(X)</code> in a multi-variable polynomial ring over a field is a non-zero prime ideal but not a maximal ideal, hence such ring has Krull dimension &gt;=2 and cannot be PID. This is overkill, unfortunately.</p>",
        "id": 523533419,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749639289
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"366779\">Jz Pan</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523533419\">said</a>:</p>\n<blockquote>\n<p>BTW, if it's me, I will prove that <code>(X)</code> in a multi-variable polynomial ring over a field is a non-zero prime ideal but not a maximal ideal, hence such ring has Krull dimension &gt;=2 and cannot be PID. This is overkill, unfortunately.</p>\n</blockquote>\n<p>I claim that if you unfold the proofs (I know Lean doesn't like that) you would end up with the same proof</p>",
        "id": 523533733,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749639413
    },
    {
        "content": "<p>Oh, we even don't need to prove this, as we can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ringKrullDim_add_enatCard_le_ringKrullDim_mvPolynomial#doc\">docs#ringKrullDim_add_enatCard_le_ringKrullDim_mvPolynomial</a> and do a one-liner.</p>",
        "id": 523533770,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749639424
    },
    {
        "content": "<p>lol</p>",
        "id": 523533848,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749639455
    },
    {
        "content": "<p>the joy of higher theory</p>",
        "id": 523533949,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749639494
    },
    {
        "content": "<p>But... do we have <code>IsPrincipalIdealRing -&gt; ringKrullDim &lt;= 1</code>? Especially, is it true without domain assumption?</p>",
        "id": 523534277,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749639607
    },
    {
        "content": "<p>presumably you get a PID after quotienting by any prime ideal...</p>",
        "id": 523534643,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749639726
    },
    {
        "content": "<p>suppose P1 &lt; P2 &lt; P3 are primes, then R/P1 is PID, and P1/P1 &lt; P2/P1 &lt; P3/P1 (wait... is this true?)</p>",
        "id": 523534735,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749639758
    },
    {
        "content": "<p>(this is true because quotienting is the same as in Z-Mod, and Z-Mods behave nicely <span aria-label=\"rofl\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rofl\">:rofl:</span> )</p>",
        "id": 523535292,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749639965
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"366779\">Jz Pan</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523533770\">said</a>:</p>\n<blockquote>\n<p>Oh, we even don't need to prove this, as we can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ringKrullDim_add_enatCard_le_ringKrullDim_mvPolynomial#doc\">docs#ringKrullDim_add_enatCard_le_ringKrullDim_mvPolynomial</a> and do a one-liner.</p>\n</blockquote>\n<p>This is completely a beauty of higher theory (<code>theorem ringKrullDim_add_enatCard_le_ringKrullDim_mvPolynomial</code>)! But unfortunately I was using v4.16.0. <code>Mathlib.RingTheory.KrullDimension.NonZeroDivisors </code>only exists upper than v4.19.0 : (</p>",
        "id": 523535420,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749640004
    },
    {
        "content": "<p>ok who wants to submit a one-line PR to generalise <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsPrincipalIdealRing.krullDimLE_one#doc\">docs#IsPrincipalIdealRing.krullDimLE_one</a> to non-domains?</p>",
        "id": 523535435,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749640009
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"877182\">@Nick_adfor</span> don't let us derail you lol, it's still good practise to do lower theory</p>",
        "id": 523535566,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749640054
    },
    {
        "content": "<p>Now I'm still stuck in three <code>tactic rw failed</code>: <code>rw [← h_mul_zero_x, coeff_zero_X i] at hfx</code>,  <code>w [← h_mul_zero_y, coeff_zero_X j] at hfy</code>, <code>rw [← mem_span_singleton] at hf</code>, </p>\n<p>and one <code>invalid field notation</code>: <code>exact Ideal.span_singleton_eq_top.mp (IsUnit.span_singleton_eq_top this)</code>.</p>\n<p>The updated Lean 4 Web link is <a href=\"https://live.lean-lang.org/#codez=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\">here</a></p>",
        "id": 523537107,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749640661
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"877182\">@Nick_adfor</span> not sure if you have read my comments:</p>\n<blockquote>\n<p>Kenny Lau: Nick_adfor <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523531947\">said</a>:</p>\n<blockquote>\n<p>The updated link is <a href=\"https://live.lean-lang.org/#codez=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\">here</a></p>\n</blockquote>\n<p>well, yeah you're getting the same error because the thing you're trying to rewrite still looks like <code>coeff 0 (f * a)</code></p>\n<p>Kenny Lau: the fact that you've proved <code>coeff 0 (f * a) = coeff 0 f * coeff 0 a</code> separately doesn't mean that Lean now automatically assumes that they're equal everywhere</p>\n</blockquote>",
        "id": 523537400,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749640775
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523535435\">said</a>:</p>\n<blockquote>\n<p>ok who wants to submit a one-line PR to generalise <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsPrincipalIdealRing.krullDimLE_one#doc\">docs#IsPrincipalIdealRing.krullDimLE_one</a> to non-domains?</p>\n</blockquote>\n<p>I'm still thinking the proof... Is <code>ringKrullDim R = ⨆ I : Ideal R, ringKrullDim (R ⧸ I)</code> true? (Or <code>PrimeSpectrum</code> if you like.) I want to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Order.krullDim_eq_iSup_coheight#doc\">docs#Order.krullDim_eq_iSup_coheight</a> <code>Order.krullDim α = ⨆ a, ↑(Order.coheight a)</code> and the latter should be <code>ringKrullDim (R ⧸ P)</code> but seems that there is no <code>Ideal.coheight</code> nor its relation to the Krull dimension of quotient ring...</p>",
        "id": 523537558,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749640836
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523537400\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"877182\">Nick_adfor</span> not sure if you have read my comments:</p>\n<blockquote>\n<p>Kenny Lau: Nick_adfor <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523531947\">said</a>:</p>\n<blockquote>\n<p>The updated link is <a href=\"https://live.lean-lang.org/#codez=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\">here</a></p>\n</blockquote>\n<p>well, yeah you're getting the same error because the thing you're trying to rewrite still looks like <code>coeff 0 (f * a)</code></p>\n<p>Kenny Lau: the fact that you've proved <code>coeff 0 (f * a) = coeff 0 f * coeff 0 a</code> separately doesn't mean that Lean now automatically assumes that they're equal everywhere<br>\n</p>\n</blockquote>\n</blockquote>\n<p>I've noticed that. But now I don't know that where I should add <code>hfx : coeff 0 (f * a) = coeff 0 f * coeff 0 a</code></p>",
        "id": 523539463,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749641494
    },
    {
        "content": "<p>well, preferably as a lemma above your main theorem <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 523539547,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749641524
    },
    {
        "content": "<p>but you can basically add it anywhere</p>",
        "id": 523539573,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749641530
    },
    {
        "content": "<p>Note that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ringKrullDim_add_enatCard_le_ringKrullDim_mvPolynomial#doc\">docs#ringKrullDim_add_enatCard_le_ringKrullDim_mvPolynomial</a> is not a deep result. It is basically the consequence of the fact that <code>X</code> is not a zero divisor and that minimal primes are contained in zero divisors, both of which comes from basic manipulation of the definitions.</p>\n<p>The nontrivial part is the upperbound of dimension of polynomial ring.</p>",
        "id": 523541092,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1749642030
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"877182\">Nick_adfor</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523537107\">said</a>:</p>\n<blockquote>\n<p>Now I'm still stuck in three <code>tactic rw failed</code>: <code>rw [← h_mul_zero_x, coeff_zero_X i] at hfx</code>,  <code>w [← h_mul_zero_y, coeff_zero_X j] at hfy</code>, <code>rw [← mem_span_singleton] at hf</code>, </p>\n<p>and one <code>invalid field notation</code>: <code>exact Ideal.span_singleton_eq_top.mp (IsUnit.span_singleton_eq_top this)</code>.</p>\n<p>The updated Lean 4 Web link is <a href=\"https://live.lean-lang.org/#codez=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\">here</a></p>\n</blockquote>\n<p>How can I  just fix the four error without import higher theory?</p>",
        "id": 523542613,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749642554
    },
    {
        "content": "<p>I told you already; is there something you don't understand?</p>",
        "id": 523543092,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749642713
    },
    {
        "content": "<p><code>ringKrullDim R = ⨆ I : Ideal R, ringKrullDim (R ⧸ I)</code> is definitely true since you can take <code>I = \\bot</code>. If <code>I</code> ranges in the prime spectrum, you are just missing<br>\n<a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/RingTheory/KrullDimension/NonZeroDivisors.html#ringKrullDim_quotient\">ringKrullDim_quotient</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Order/KrullDimension.html#Order.coheight_eq_krullDim_Ici\">Order.coheight_eq_krullDim_Ici</a> (noting that <code>zeroLocus</code> is defeq to <code>Ici</code>).</p>",
        "id": 523563838,
        "sender_full_name": "Junyan Xu",
        "timestamp": 1749649083
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523535435\">said</a>:</p>\n<blockquote>\n<p>ok who wants to submit a one-line PR to generalise <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsPrincipalIdealRing.krullDimLE_one#doc\">docs#IsPrincipalIdealRing.krullDimLE_one</a> to non-domains?</p>\n</blockquote>\n<p>I'm doing it; while I found a TODO in <a href=\"https://github.com/leanprover-community/mathlib4/blob/7deb334c5f5104f4edad1a6396dd02a8cddefb86/Mathlib/RingTheory/PrincipalIdealDomain.lean#L232-L247\">https://github.com/leanprover-community/mathlib4/blob/7deb334c5f5104f4edad1a6396dd02a8cddefb86/Mathlib/RingTheory/PrincipalIdealDomain.lean#L232-L247</a></p>\n<p>BTW the theorem name <code>IsPrime.to_maximal_ideal</code> is weird, IMHO it should called <code>Ideal.IsPrime.isMaximal(_of_XXX)</code>.</p>",
        "id": 523576716,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749652714
    },
    {
        "content": "<p>PR created as <del>25702</del> <a href=\"https://github.com/leanprover-community/mathlib4/pull/25728\">#25728</a>.</p>",
        "id": 523582592,
        "sender_full_name": "Jz Pan",
        "timestamp": 1749654410
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523543092\">said</a>:</p>\n<blockquote>\n<p>I told you already; is there something you don't understand?</p>\n</blockquote>\n<p>I mean that I have problem with error in three <code>rw</code>and one <code>exact</code>. The original goal of this post is to fix the code with little change of the code. Of course some new idea about KrullDim is OK, but that does not help for fixing (I mean to fix, not to destroy and rebuild the code). Now <code>hfx : coeff 0 (f * a) = coeff 0 f * coeff 0 a</code> seems to be a possible error, but is it that all the four error come from <code>hfx</code>?</p>",
        "id": 523590988,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749657030
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"877182\">@Nick_adfor</span> if you select the text containing the error, you will be able to see what the error is</p>",
        "id": 523591276,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749657123
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/5NBHHL9ns4H6TOy60c0Off2l/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/5NBHHL9ns4H6TOy60c0Off2l/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1692x861\" src=\"/user_uploads/thumbnail/3121/5NBHHL9ns4H6TOy60c0Off2l/image.png/840x560.webp\"></a></div>",
        "id": 523591442,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749657175
    },
    {
        "content": "<p>see how on the left I selected the text with red underline</p>",
        "id": 523591488,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749657188
    },
    {
        "content": "<p>the whole line reads:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_zero_X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hfx</span>\n</code></pre></div>",
        "id": 523591544,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749657207
    },
    {
        "content": "<p>and from the infoview on the right, you can see that <code>hfx</code> is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">hfx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>",
        "id": 523591593,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749657224
    },
    {
        "content": "<p>and the thing you're trying to rewrite with, which is <code>h_mul_zero_x</code>, is:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">h_mul_zero_x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">a</span>\n</code></pre></div>",
        "id": 523591664,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749657245
    },
    {
        "content": "<p>so the rewrite fails, because you're trying to replace the string <code>coeff 0 (f * a)</code>, and Lean cannot match it with the provided <code>coeff 0 f * coeff 0 a</code></p>",
        "id": 523591768,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749657285
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"877182\">@Nick_adfor</span> is this clearer now?</p>",
        "id": 523591785,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749657290
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523591785\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"877182\">Nick_adfor</span> is this clearer now?</p>\n</blockquote>\n<p>Yes. For this part I want to show coeff (0 : σ →₀ ℕ) a = 0 and then get a contradiction with coeff (0 : σ →₀ ℕ) a ≠ 0. But for a lot of trials, I just get 0=0 (cannot give a contradiction)</p>",
        "id": 523601497,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749660399
    },
    {
        "content": "<p>For the following one to check the code, I'll give a precise one here:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">Ideal</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mvPolynomial_not_pid_of_card_ge_two</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">IsPrincipalIdealRing</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">exists_pair_of_one_lt_card</span><span class=\"w\"> </span><span class=\"n\">h</span>\n\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">j</span>\n\n\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">proper</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"bp\">⊤</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"c1\">--The sorry has been proved. I just deleted to make the code precise</span>\n\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hPID</span>\n\n<span class=\"w\">  </span><span class=\"n\">haveI</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hPID</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hf</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsPrincipalIdealRing</span><span class=\"bp\">.</span><span class=\"n\">principal</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">principal</span>\n\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">x_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">subset_span</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">y_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">subset_span</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hf</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">x_mem</span><span class=\"w\"> </span><span class=\"n\">y_mem</span>\n\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">x_mem</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">y_mem</span>\n\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ha</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_false_eq_true</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">ite_false</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"c1\">--The sorry has been proved. I just deleted to make the code precise</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hb</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_false_eq_true</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">ite_false</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"c1\">--The sorry has been proved. I just deleted to make the code precise</span>\n\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">ha0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hf0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"n\">ha0</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hfx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hf0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hfx</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_zero_X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hfx</span>\n<span class=\"c1\">--↑Here is an error</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">ha0</span><span class=\"w\"> </span><span class=\"n\">hfx</span>\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">hb0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hf0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_b</span><span class=\"w\"> </span><span class=\"n\">hb0</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hfy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hf0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hfy</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_zero_X</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hfy</span>\n<span class=\"c1\">--↑Here is the same error</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hb0</span><span class=\"w\"> </span><span class=\"n\">hfy</span>\n<span class=\"w\">    </span><span class=\"c1\">-- If both a and b have zero constant term, then f must be a unit</span>\n<span class=\"w\">    </span><span class=\"n\">push_neg</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">ha0</span><span class=\"w\"> </span><span class=\"n\">hb0</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hf</span>\n<span class=\"c1\">--↑Here is another error</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">isUnit_of_dvd_one</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">f</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">hf</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">eq_top_iff_one</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">this</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- Now we know f is a unit, which implies I = (1), contradicting properness</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">I_top</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⊤</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hf</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Ideal</span><span class=\"bp\">.</span><span class=\"n\">span_singleton_eq_top</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsUnit</span><span class=\"bp\">.</span><span class=\"n\">span_singleton_eq_top</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">)</span>\n<span class=\"c1\">--↑Here is the end error</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">proper</span><span class=\"w\"> </span><span class=\"n\">I_top</span>\n</code></pre></div>",
        "id": 523607228,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749662685
    },
    {
        "content": "<p>The whole Lean 4 Web link is <a href=\"https://live.lean-lang.org/#codez=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\">here</a></p>",
        "id": 523607427,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749662757
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"877182\">@Nick_adfor</span> you keep getting the same error for the same reason; i'm not sure if you actually read what i said</p>",
        "id": 523608013,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1749662957
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523608013\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"877182\">Nick_adfor</span> you keep getting the same error for the same reason; i'm not sure if you actually read what i said</p>\n</blockquote>\n<p>Sorry to hear that. Actually reading really not means actually understanding and actually fixing : (</p>",
        "id": 523608400,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749663095
    },
    {
        "content": "<p>My lean version is v4.16.0. And now my idea is to fix the code with these four error, but not use KrullDim to rebuild all my code. Seems that <code>hfx : coeff 0 (f * a) = coeff 0 f * coeff 0 a</code> causes the first two errors, but I do not know how to fix them. And for the last two errors, I have not known the reason. So I ask for a kind help.  Thanks!</p>",
        "id": 523609333,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749663488
    },
    {
        "content": "<p>Out of curiosity, how did you write the code you already have?</p>",
        "id": 523612164,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1749664617
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466290\">Luigi Massacci</span> <a href=\"#narrow/channel/113489-new-members/topic/Show.20that.20no.20polynomial.20ring.20with.20more.20than.20one.20indeterminat/near/523612164\">said</a>:</p>\n<blockquote>\n<p>Out of curiosity, how did you write the code you already have?</p>\n</blockquote>\n<p>Construct a proof by first sketching a rough outline on paper. Then, start translating this outline into Lean code, initially filling in the gaps with many <code>sorry</code>. As I replace these <code>sorry</code> statements, I'll also refine and adjust the overall structure of the proof as needed. I've noticed that sometimes code suggestions from Copilot in VSCode aren't very helpful for my specific tasks, although Copilot often automatically popping up in VsCode. It may give some pseudo theorem not in Mathlib. While the <code>rw?</code> tactic is occasionally useful for rewriting using Mathlib theorems, it's frustrating that it can't leverage my own custom definitions and theorems. I feel like I'm getting stuck in the weeds of the code and losing the ability to think clearly about the underlying mathematical ideas. I suspect I might just be experiencing 'code fatigue'.</p>",
        "id": 523663577,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749691166
    },
    {
        "content": "<p>Now the code is written this way.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">Ideal</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Field</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">DecidableEq</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">]</span>\n\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">mvPolynomial_not_pid_of_card_ge_two</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">IsPrincipalIdealRing</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">i</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"bp\">.</span><span class=\"n\">exists_pair_of_one_lt_card</span><span class=\"w\"> </span><span class=\"n\">h</span>\n\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">i</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"n\">j</span>\n\n\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"o\">({</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span>\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">proper</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"bp\">⊤</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hI</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">one_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MvPolynomial</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hI</span><span class=\"o\">]</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">trivial</span>\n\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">eq1</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_pair</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">one_mem</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">const_eq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">eq1</span><span class=\"o\">]</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_x_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">@</span><span class=\"n\">coeff_zero_X</span><span class=\"o\">]</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_y_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">@</span><span class=\"n\">coeff_zero_X</span><span class=\"o\">]</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">rhs_const</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_add</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_x_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_y_zero</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span>\n\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rhs_const</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">const_eq</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">one_ne_zero</span><span class=\"w\"> </span><span class=\"n\">const_eq</span>\n\n\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hPID</span>\n\n<span class=\"w\">  </span><span class=\"n\">haveI</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hPID</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">f</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hf</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsPrincipalIdealRing</span><span class=\"bp\">.</span><span class=\"n\">principal</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">principal</span>\n\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">x_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">subset_span</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">y_mem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">subset_span</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hf</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">x_mem</span><span class=\"w\"> </span><span class=\"n\">y_mem</span>\n\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">x_mem</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">b</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mem_span_singleton</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">y_mem</span>\n\n\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ha</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_false_eq_true</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">ite_false</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">ha_ne_zero</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">coeff_zero_X</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">mul_eq_zero</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hf_zero</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hf_zero</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">ha_zero</span>\n<span class=\"w\">        </span><span class=\"n\">contradiction</span>\n\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hb</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">coeff_X</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">ne_eq</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">not_false_eq_true</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">ite_false</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">coeff_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zero_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">add_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">antidiagonal_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_singleton</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">ha_ne_zero</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">h_mul_zero_y</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">coeff_zero_X</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">mul_eq_zero</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hf_zero</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hf_zero</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">ha_zero</span>\n<span class=\"w\">        </span><span class=\"n\">contradiction</span>\n\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">ha0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">σ</span><span class=\"w\"> </span><span class=\"bp\">→₀</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">f0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"n\">ha0</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">f_dvd_Xi</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">      </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">g</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">a_decomp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">        </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">key_eq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">          </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ha</span><span class=\"o\">]</span>\n<span class=\"w\">          </span><span class=\"n\">ring</span>\n<span class=\"w\">        </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">        </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">const_zero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">coeff_f_zero_of_a</span><span class=\"w\"> </span><span class=\"n\">ha0</span>\n<span class=\"w\">        </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">zero_term</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">zero_term</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sub_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">key_eq</span>\n<span class=\"w\">        </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">          </span><span class=\"gr\">sorry</span>\n<span class=\"w\">        </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hb</span><span class=\"o\">]</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">dvd_mul_right</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">dvd_x_y</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∣</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">dvd_trans</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">dvd_mul_right</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">this</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">eq_ij</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"gr\">sorry</span>\n<span class=\"w\">      </span><span class=\"n\">contradiction</span>\n\n<span class=\"c1\">--to be continued</span>\n</code></pre></div>",
        "id": 523714395,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749720383
    },
    {
        "content": "<p>Without caring if this construction of <code>by_cases ha0</code> may cause long-proof lemma, I finish this part with three <code>sorry</code>. And I realize <code>∃ g, f = x * g</code> by <code>obtain</code>. I do not know if this <code>obtain</code> can be realized automatically by lean.</p>",
        "id": 523714924,
        "sender_full_name": "Nick Adfor",
        "timestamp": 1749720569
    }
]