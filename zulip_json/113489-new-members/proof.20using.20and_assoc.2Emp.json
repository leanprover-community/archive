[
    {
        "content": "<p>This is an exercise in the logic game at <a href=\"https://adam.math.hhu.de/#/g/trequetrum/lean4game-logic/world/IffIntro/level/6\">https://adam.math.hhu.de/#/g/trequetrum/lean4game-logic/world/IffIntro/level/6</a> .</p>\n<p>It can be solved by rewriting the goal to match <code>h</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">or_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">and_assoc</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>But another way is suggested, starting with <code>imp_trans</code> (transitive implication), which I created as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n</code></pre></div>\n<p>and then doing something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">and_assoc</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">or_assoc</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n<span class=\"w\">  </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">h3</span>\n</code></pre></div>\n<p>The above could be more succinct, but I've broken it up.  The problem I'm having is what is lean doing with <code>h2</code> for the line: <code>have h2 := (imp_trans and_assoc.mp)</code>...</p>\n<ul>\n<li>(1) <code>h1</code>'s input is the input for <code>or_assoc.mp</code> which is a function that takes evidence for <code>(P ∨ Q) ∨ R</code> and returns something of type <code>P ∨ Q ∨ R</code> which then feeds into <code>h</code> which then outputs something of type <code>¬(P ∧ Q ∧ R)</code> (that seems pretty straight forward)</li>\n<li>(2) Lean type checks <code>h2</code> as <code>(P ∧ Q ∧ R → False) → (P ∧ Q) ∧ R → False</code> which I interpet as <code>(P ∧ Q ∧ R → False) → ((P ∧ Q) ∧ R → False)</code> - which solves the problem...</li>\n<li>But how do we get this type from <code>imp_trans and_assoc.mp</code>?  I thought <code>and_assoc.mp</code> is taking evidence for <code>(P ∧ Q) ∧ R</code> and returning something of type <code>P ∧ Q ∧ R</code>?</li>\n</ul>",
        "id": 465298362,
        "sender_full_name": "Daniel Bush",
        "timestamp": 1724720455
    },
    {
        "content": "<p>Look at the types of <code>h2</code> and <code>h1</code> by putting the cursor on the <code>sorry</code> below.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">and_assoc</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">or_assoc</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>The types of the arguments are unknown at this point and are represented as metavariables (in this case, as unknown functions of the stuff in scope, namely <code>P</code>, <code>Q</code>, <code>R</code> and <code>h</code>). When you add the <code>have h3</code> line, you give Lean enough information to deduce what values those metavariables must have.</p>\n<blockquote>\n<p>But how do we get this type from imp_trans <a href=\"http://and_assoc.mp\">and_assoc.mp</a>? I thought <a href=\"http://and_assoc.mp\">and_assoc.mp</a> is taking evidence for (P ∧ Q) ∧ R and returning something of type P ∧ Q ∧ R?</p>\n</blockquote>\n<p>It's hard to know exactly where the difficulty is. Sorry! Yes, that <em>is</em> what <code>and_assoc.mp</code> does, and that's what you need here, so the proof goes through.</p>\n<ul>\n<li>Are you bearing in mind that  <code>¬x</code> is defined as <code>x → False</code>?</li>\n<li>Stepping through \"term-mode\" proofs is quite confusing. Is it any clearer if you instead inspect this slightly expanded \"tactic-mode\" proof?</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">and_assoc</span><span class=\"bp\">.</span><span class=\"n\">mp</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">h4</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">or_assoc</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h3</span>\n</code></pre></div>",
        "id": 465301674,
        "sender_full_name": "Richard Copley",
        "timestamp": 1724722533
    },
    {
        "content": "<p>Thanks for replying Richard.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"400544\">Richard Copley</span> <a href=\"#narrow/stream/113489-new-members/topic/proof.20using.20and_assoc.2Emp/near/465301674\">said</a>:</p>\n<blockquote>\n<p>Look at the types of <code>h2</code> and <code>h1</code> by putting the cursor on the <code>sorry</code> below.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"o\">((</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">and_assoc</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">or_assoc</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>The types of the arguments are unknown at this point and are represented as metavariables (in this case, as unknown functions of the stuff in scope, namely <code>P</code>, <code>Q</code>, <code>R</code> and <code>h</code>). When you add the <code>have h3</code> line, you give Lean enough information to deduce what values those metavariables must have.</p>\n<blockquote>\n<p>But how do we get this type from imp_trans <a href=\"http://and_assoc.mp\">and_assoc.mp</a>? I thought <a href=\"http://and_assoc.mp\">and_assoc.mp</a> is taking evidence for (P ∧ Q) ∧ R and returning something of type P ∧ Q ∧ R?</p>\n</blockquote>\n<p>It's hard to know exactly where the difficulty is. Sorry! Yes, that <em>is</em> what <code>and_assoc.mp</code> does, and that's what you need here, so the proof goes through.</p>\n<ul>\n<li>Are you bearing in mind that  <code>¬x</code> is defined as <code>x → False</code>?</li>\n<li>Stepping through \"term-mode\" proofs is quite confusing. Is it any clearer if you instead inspect this slightly expanded \"tactic-mode\" proof?<br>\n</li>\n</ul>\n</blockquote>\n<p>Maybe I can come at this from what lean is doing.</p>\n<p>Lean is doing this from the original example:</p>\n<ul>\n<li><code>h1: (P ∨ Q) ∨ R → ¬(P ∧ Q ∧ R)</code></li>\n<li><code>h2: (P ∧ Q ∧ R → False) → (P ∧ Q) ∧ R → False</code></li>\n<li><code>h3: (P ∨ Q) ∨ R → (P ∧ Q) ∧ R → False</code></li>\n</ul>\n<p>I can mark out initial and final output types, so as to focus on the bit that's left that I don't get:</p>\n<ul>\n<li><code>h1: inital_input_type   → (P ∧ Q ∧ R) -&gt; False</code></li>\n<li><code>h2: (P ∧ Q ∧ R → False) → final_output_type</code></li>\n<li><code>h3: initial_input_type  → final_output_type</code></li>\n</ul>\n<p>It's clear h1 and h2 will chain together under <code>imp_trans</code> in <code>h3</code>.</p>\n<p><code>h1</code> I think I understand: <code>or_assoc.mp h</code> takes a value of type <code>(P ∨ Q) ∨ R</code> and converts it to  <code>P ∨ Q ∨ R</code> by <code>or_assoc.mp</code> and then converts it to  <code>(P ∧ Q ∧ R) -&gt; False</code> by <code>h</code>.</p>\n<p>But I cannot see what the conversions are using <code>and_assoc.mp</code> in <code>h2</code>.</p>\n<p>Where is <code>and_assoc.mp</code> called within <code>h2</code>?  What other function(s) are called before or after it as part of <code>h2</code>, and what are their types?   Or in other words: Can we state what the sequence of type conversions are in a sentence like I did above for <code>h1</code> pointing out where <a href=\"http://and_assoc.mp\">and_assoc.mp</a> is invoked?</p>\n<p>Appreciate any light you or someone can shed on this.<br>\nMany Thanks,<br>\nDaniel</p>",
        "id": 465513331,
        "sender_full_name": "Daniel Bush",
        "timestamp": 1724779570
    },
    {
        "content": "<p>If I understand correctly, the thing you have trouble with is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">and_assoc</span><span class=\"bp\">.</span><span class=\"n\">mp</span>\n</code></pre></div>\n<p>Do you know about currying? Try explicitly writing what <code>A, B, C</code> are in <code>imp_trans</code> (you can do that using <code>imp_trans (A := _) (B := _) (C := _) and_assoc.mp</code>)</p>",
        "id": 465529711,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1724783736
    },
    {
        "content": "<p>The type of <code>and_assoc.mp</code> is <code>(a ∧ b) ∧ c → a ∧ b ∧ c</code>.<br>\nThe type of <code>imp_trans</code> is <code>(X → Y) → ((Y → Z) → (X → Z))</code>.<br>\nIn order for <code>imp_trans and_assoc.mp</code> to make sense, the type of <code>and_assoc.mp</code> must match the first parameter of <code>imp_trans</code>.<br>\nThat is, <code>X → Y</code> matches <code>(a ∧ b) ∧ c → a ∧ b ∧ c</code>.<br>\nHence <code>X</code> is <code>(a ∧ b) ∧ c</code> and <code>Y</code> is <code>a ∧ b ∧ c</code>.<br>\nTherefore the type of <code>h2</code> is <code>(Y → Z) → (X → Z)</code>, or <code>(a ∧ b ∧ c → Z) → ((a ∧ b) ∧ c → Z)</code>.</p>\n<p>The type of <code>h1</code> is <code>(P ∨ Q) ∨ R → ((P ∧ Q ∧ R) → False)</code> as you saw.</p>\n<p>In order for <code>imp_trans h1 h2</code> to be valid,</p>\n<ul>\n<li>the type of <code>h1 : (P ∨ Q) ∨ R → ((P ∧ Q ∧ R) → False)</code> must match <code>A → B</code>,</li>\n<li>the type of <code>h2 : (a ∧ b ∧ c → Z) → ((a ∧ b) ∧ c → Z)</code> must match <code>B → C</code>.</li>\n</ul>\n<p>So (<code>*</code>),</p>\n<ul>\n<li><code>A</code> matches <code>(P ∨ Q) ∨ R</code></li>\n<li><code>B</code> matches <code>(P ∧ Q ∧ R) → False</code> and also matches <code>a ∧ b ∧ c → Z</code>.</li>\n<li><code>C</code> matches <code>(a ∧ b) ∧ c → Z</code>.</li>\n</ul>\n<p>(We now see that <code>imp_trans h1 h2</code> is of type <code>A → C</code> or, substituting, <code>(P ∨ Q) ∨ R → ((a ∧ b) ∧ c → Z)</code>).</p>\n<p>Doing some further unification on (<code>*</code>), we deduce that <code>a</code>, <code>b</code>, <code>c</code>, <code>Z</code> respectively match <code>P</code>, <code>Q</code>, <code>R</code>, <code>False</code>.</p>\n<p>Therefore <code>imp_trans h1 h2</code> is of type <code>(P ∨ Q) ∨ R → ((P ∧ Q) ∧ R → False)</code>, and that is what we wanted.</p>\n<p>Is that any help?</p>",
        "id": 465529738,
        "sender_full_name": "Richard Copley",
        "timestamp": 1724783751
    },
    {
        "content": "<p>Hi Richard,</p>\n<p>Sorry for the delay and radio silence; had a horror end to last week, none of which relates to math or logic.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"400544\">Richard Copley</span> <a href=\"#narrow/stream/113489-new-members/topic/proof.20using.20and_assoc.2Emp/near/465529738\">said</a>:</p>\n<blockquote>\n<p>....</p>\n<p>Doing some further unification on (<code>*</code>), we deduce that <code>a</code>, <code>b</code>, <code>c</code>, <code>Z</code> respectively match <code>P</code>, <code>Q</code>, <code>R</code>, <code>False</code>.</p>\n<p>Therefore <code>imp_trans h1 h2</code> is of type <code>(P ∨ Q) ∨ R → ((P ∧ Q) ∧ R → False)</code>, and that is what we wanted.</p>\n<p>Is that any help?</p>\n</blockquote>\n<p>The working you did helped.</p>\n<p>I was not thinking through the currying properly.  My brain was not trying to call imp_trans with <a href=\"http://and_assoc.mp\">and_assoc.mp</a> .  I was trying to think in terms of an additional function <code>f</code> where <code>imp_trans and_assoc.mp f</code> so I was wanting h2 to do <code>X -&gt; Z</code>.  Maybe the fact some types are unresolved or placeholders that need to match constraints was a bit too much for me to take in on top of clearly prosecuting that currying logic.</p>\n<p>Thanks for getting me unstuck!<br>\nDaniel.</p>",
        "id": 466973810,
        "sender_full_name": "Daniel Bush",
        "timestamp": 1725288384
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"690858\">Daniel Weber</span> <a href=\"#narrow/stream/113489-new-members/topic/proof.20using.20and_assoc.2Emp/near/465529711\">said</a>:</p>\n<blockquote>\n<p>If I understand correctly, the thing you have trouble with is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">imp_trans</span><span class=\"w\"> </span><span class=\"n\">and_assoc</span><span class=\"bp\">.</span><span class=\"n\">mp</span>\n</code></pre></div>\n<p>Do you know about currying? Try explicitly writing what <code>A, B, C</code> are in <code>imp_trans</code> (you can do that using <code>imp_trans (A := _) (B := _) (C := _) and_assoc.mp</code>)</p>\n</blockquote>\n<p>Thanks for that tip and sorry for delay in reply.  I was definitely not thinking through the currying logic properly, but I think I've got it straight now.</p>\n<p>Cheers,<br>\nDaniel.</p>",
        "id": 466974326,
        "sender_full_name": "Daniel Bush",
        "timestamp": 1725288500
    }
]