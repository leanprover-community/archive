[
    {
        "content": "<p>I discovered I was using an old version of mathlib without e.g. <code>!₂[1, 0]</code> which I need but running lake update gave an alarmingly long list of errors:<br>\n<a href=\"/user_uploads/3121/u1zBpRNYTKmCkBImGDPU7t2l/lakeUpdateErrors.txt\">lakeUpdateErrors.txt</a></p>",
        "id": 503782891,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1741264912
    },
    {
        "content": "<p>Is this bumping mathlib itself or mathlib as a dependency? Did you follow the instructions at <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency#updating-mathlib4\">https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency#updating-mathlib4</a> to the letter?</p>",
        "id": 503784335,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1741265300
    },
    {
        "content": "<p>I don't understand the first question and no I naively thought lake update would do everything for me. What I would like to be able to do is write <code> </code>!₂[1, 0]` and when I looked in my mathlib it wasn't there although it appears in the online documentation.</p>",
        "id": 503784806,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1741265428
    },
    {
        "content": "<p>The instructions you reference seem to be working - thank you very much. In my defence I asked ChatGPT</p>\n<p><a href=\"/user_uploads/3121/9V6l-T6NCDASagMjwV73tpT7/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/9V6l-T6NCDASagMjwV73tpT7/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1650x420\" src=\"/user_uploads/thumbnail/3121/9V6l-T6NCDASagMjwV73tpT7/image.png/840x560.webp\"></a></div><p>Well that will teach me but I really thought it would be capable of getting something simple like that right.</p>",
        "id": 503786552,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1741265918
    },
    {
        "content": "<p>Looks like it's defined in <code>Mathlib/Analysis/InnerProductSpace/PiL2.lean</code>, once you've updated</p>",
        "id": 503787165,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1741266088
    },
    {
        "content": "<p>My question was: is the lean project you're working on actually equal to mathlib, or is it another project (like FLT) which depends on mathlib? The update procedure is slightly different in each case.</p>",
        "id": 503787336,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1741266128
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113489-new-members/topic/Lake.20update.20fails/near/503787165\">said</a>:</p>\n<blockquote>\n<p>Looks like it's defined in <code>Mathlib/Analysis/InnerProductSpace/PiL2.lean</code>, once you've updated</p>\n</blockquote>\n<p>Thanks  - I already knew that but I didn't have it in my mathlib leading me to suspect my mathlib was out of date. Hence the erroneous <code>lean update</code> (although I now wonder what that command is supposed to do).</p>",
        "id": 503787859,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1741266279
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/Lake.20update.20fails/near/503787336\">said</a>:</p>\n<blockquote>\n<p>My question was: is the lean project you're working on actually equal to mathlib, or is it another project (like FLT) which depends on mathlib? The update procedure is slightly different in each case.</p>\n</blockquote>\n<p>It's a stand alone project. I feel it would be presumptuous of me given my current skill level to work on mathlib itself. The quest to show that a Mobius strip is a G-bundle may be of interest to others but that's for another day.</p>",
        "id": 503788363,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1741266430
    },
    {
        "content": "<p>Well that did not work - in the sense that I still can't see <code>!₂[1, 0]</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">my_project</span><span class=\"bp\">/.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span>\n\n<span class=\"w\"> </span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">status</span>\n<span class=\"n\">HEAD</span><span class=\"w\"> </span><span class=\"n\">detached</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"n\">fc63c9122a</span>\n<span class=\"n\">nothing</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">commit</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">working</span><span class=\"w\"> </span><span class=\"n\">tree</span><span class=\"w\"> </span><span class=\"n\">clean</span>\n</code></pre></div>\n<p>Should my HEAD be detached? If not what should it be?</p>",
        "id": 503799862,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1741269395
    },
    {
        "content": "<p>makefile.lean</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lake</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">DSL</span>\n\n<span class=\"n\">package</span><span class=\"w\"> </span><span class=\"bp\">«</span><span class=\"n\">my_project</span><span class=\"bp\">»</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Settings applied to both builds and interactive editing</span>\n<span class=\"w\">  </span><span class=\"n\">leanOptions</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span>\n<span class=\"w\">    </span><span class=\"bp\">⟨</span><span class=\"ss\">`pp.unicode.fun</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"c1\">-- pretty-prints `fun a ↦ b`</span>\n<span class=\"w\">  </span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"c1\">-- add any additional package configuration options here</span>\n\n<span class=\"n\">require</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span>\n<span class=\"w\">  </span><span class=\"s2\">\"https://github.com/leanprover-community/mathlib4.git\"</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">default_target</span><span class=\"kd\">]</span>\n<span class=\"n\">lean_lib</span><span class=\"w\"> </span><span class=\"bp\">«</span><span class=\"n\">MyProject</span><span class=\"bp\">»</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"c1\">-- add any library configuration options here</span>\n</code></pre></div>",
        "id": 503800666,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1741269577
    },
    {
        "content": "<p>I used <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency#in-vs-code\">https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency#in-vs-code</a> - I will now try <a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency#from-the-command-line\">https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency#from-the-command-line</a></p>",
        "id": 503801393,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1741269719
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Dependency</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"w\"> </span><span class=\"n\">uses</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">different</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span>\n<span class=\"w\">  </span><span class=\"n\">Project</span><span class=\"w\"> </span><span class=\"n\">uses</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">18</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span>\n<span class=\"w\">  </span><span class=\"n\">Mathlib</span><span class=\"w\"> </span><span class=\"n\">uses</span><span class=\"w\"> </span><span class=\"n\">leanprover</span><span class=\"bp\">/</span><span class=\"n\">lean4</span><span class=\"o\">:</span><span class=\"n\">v4</span><span class=\"bp\">.</span><span class=\"m\">14</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc2</span>\n\n<span class=\"n\">The</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">will</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">work</span><span class=\"w\"> </span><span class=\"n\">unless</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"n\">project's</span><span class=\"w\"> </span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">matches</span><span class=\"w\"> </span><span class=\"n\">Mathlib's</span><span class=\"w\"> </span><span class=\"n\">toolchain</span>\n<span class=\"n\">This</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">achieved</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">copying</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">contents</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"bp\">`.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span><span class=\"bp\">`</span>\n<span class=\"n\">into</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">root</span><span class=\"w\"> </span><span class=\"n\">directory</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"n\">project</span>\n<span class=\"n\">You</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`cp</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">lake</span><span class=\"bp\">/</span><span class=\"n\">packages</span><span class=\"bp\">/</span><span class=\"n\">mathlib</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"bp\">./</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span><span class=\"bp\">`</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n</code></pre></div>",
        "id": 503801658,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1741269786
    },
    {
        "content": "<p>Well finally I can see  <code>!₂[1, 0]</code>.</p>",
        "id": 503803687,
        "sender_full_name": "Dominic Steinitz",
        "timestamp": 1741270271
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"754300\">Dominic Steinitz</span> has marked this topic as resolved.</p>",
        "id": 503803741,
        "sender_full_name": "Notification Bot",
        "timestamp": 1741270285
    }
]