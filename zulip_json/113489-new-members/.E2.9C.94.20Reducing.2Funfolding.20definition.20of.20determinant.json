[
    {
        "content": "<p>What's the most idiomatic way of proceeding from</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">matrix</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">!!</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">]</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">det_fact</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">matrix</span><span class=\"bp\">.</span><span class=\"n\">det</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>if what I want is ideally that lean brute-force computes the determinant for me?</p>",
        "id": 513306887,
        "sender_full_name": "Jason Reed",
        "timestamp": 1745183077
    },
    {
        "content": "<p><code>reduce</code> seems to do what I want (i.e. unfolds the definition all the way down to an arithmetic expression involving the concrete values of the entries of the matrix) but the reference manual says that tactic is intended \"for debugging purposes only\"</p>",
        "id": 513307031,
        "sender_full_name": "Jason Reed",
        "timestamp": 1745183171
    },
    {
        "content": "<p><code>simp [matrix, Matrix.det_fin_three]</code> works</p>",
        "id": 513307034,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1745183173
    },
    {
        "content": "<p>Is there any more general-purpose method than knowing which domain-specific results exist? I won't be too shocked I guess if the answer is \"no\" because \"unfold (pretty much) all of the definitions until you get to the (more or less) foundational stuff\" is quite underdetermined I suppose.</p>",
        "id": 513307090,
        "sender_full_name": "Jason Reed",
        "timestamp": 1745183246
    },
    {
        "content": "<p>Is there even something that works uniformly for matrices of arbitrary size? (because at least then I guess it's clear that the intent is narrowed down to \"unfold all the definitions pertaining to the definition of determinant, stopping once you get to arithmetic operations on constants of the underlying ring)</p>",
        "id": 513307164,
        "sender_full_name": "Jason Reed",
        "timestamp": 1745183293
    },
    {
        "content": "<p>Not sure there's a use for matrices bigger than 3x3 :)</p>",
        "id": 513307222,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1745183379
    },
    {
        "content": "<p>Perhaps the proof of <code>Matrix.det_fin_three</code>, which contains</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">det_succ_row_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">submatrix_apply</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">succ_zero_eq_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">submatrix_submatrix</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">det_unique</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">default_eq_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">comp_apply</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">succ_one_eq_two</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">sum_univ_succ</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">val_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">zero_succAbove</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">univ_unique</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">val_succ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">val_eq_zero</span><span class=\"o\">,</span>\n<span class=\"w\">    </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">succ_succAbove_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">sum_singleton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">succ_succAbove_one</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>has some wisdom for me</p>",
        "id": 513307351,
        "sender_full_name": "Jason Reed",
        "timestamp": 1745183490
    },
    {
        "content": "<p>Ah yes, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Matrix.det_succ_row_zero#doc\">docs#Matrix.det_succ_row_zero</a> is the Laplace expansion I couldn't find just now</p>",
        "id": 513307453,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1745183552
    },
    {
        "content": "<p>I see, so <a href=\"https://live.lean-lang.org/#codez=JYWwDg9gTgLgBAWQIYwBYBtgCMBQOAmApgGZwgpTAAecAXIhdXABQBiwAdnAMwCUL7LnziBcQjoBeOAEIpAbQCMAGgAMKgNxxVq+Ru0qAunghhCXZDEpUcaQtEIg4RGAH1iSAMbx65C9QB0TnCSALTyEnBYAJ5wOHBwAM6gYHCyPpaKjoQu8QCu7u7OUBAA7s4AXoRFGYJ+uSDOORzAAG7OufmGeDhAA\">this also works</a> without being specific to 3 dimensions:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">matrix</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Matrix</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">!!</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"mi\">0</span><span class=\"o\">]</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Matrix</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">det_fact</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">matrix</span><span class=\"bp\">.</span><span class=\"n\">det</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">matrix</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">det_succ_row_zero</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">sum_univ_succ</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>But I am curious to think about how the discoverability of those tactics could be improved. I just kept deleting things from the <code>Matrix.det_fin_three</code> list until only apparently essential <code>simp</code> moves were left.</p>",
        "id": 513308348,
        "sender_full_name": "Jason Reed",
        "timestamp": 1745184309
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"662452\">Jason Reed</span> has marked this topic as resolved.</p>",
        "id": 513308354,
        "sender_full_name": "Notification Bot",
        "timestamp": 1745184313
    }
]