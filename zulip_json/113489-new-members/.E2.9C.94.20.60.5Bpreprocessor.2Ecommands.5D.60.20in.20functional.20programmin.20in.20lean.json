[
    {
        "content": "<p>I want to translate \"Functional Programming in Lean\" into Japanese. However, enabling <code>[preprocessor.commands]</code> in <code>book.toml</code> results in an error.</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[preprocessor.commands]</span>\n<span class=\"n\">command</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"python -X utf8 scripts/projects.py\"</span>\n</code></pre></div>",
        "id": 401736852,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1699872239
    },
    {
        "content": "<p>Here is an error message when I run <code>mdbook serve --open</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"m\">2023</span>-11-13<span class=\"w\"> </span><span class=\"m\">19</span>:44:14<span class=\"w\"> </span><span class=\"o\">[</span>INFO<span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span>mdbook::book<span class=\"o\">)</span>:<span class=\"w\"> </span>Book<span class=\"w\"> </span>building<span class=\"w\"> </span>has<span class=\"w\"> </span>started\nOutput:\nb<span class=\"s2\">\"'.' \\x82\\xcd\\x81A\\x93\\xe0\\x95\\x94\\x83R\\x83}\\x83\\x93\\x83h\\x82\\xdc\\x82\\xbd\\x82\\xcd\\x8aO\\x95\\x94\\x83R\\x83}\\x83\\x93\\x83h\\x81A\\r\\n\\x91\\x80\\x8d\\xec\\x89\\xc2\\x94\\\\\\x82\\xc8\\x83v\\x83\\x8d\\x83O\\x83\\x89\\x83\\x80\\x82\\xdc\\x82\\xbd\\x82\\xcd\\x83o\\x83b\\x83` \\x83t\\x83@\\x83C\\x83\\x8b\\x82\\xc6\\x82\\xb5\\x82\\xc4\\x94F\\x8e\\xaf\\x82\\xb3\\x82\\xea\\x82\\xc4\\x82\\xa2\\x82\\xdc\\x82\\xb9\\x82\\xf1\\x81B\\r\\n\"</span>\nStderr:\nNone\nTraceback<span class=\"w\"> </span><span class=\"o\">(</span>most<span class=\"w\"> </span>recent<span class=\"w\"> </span>call<span class=\"w\"> </span>last<span class=\"o\">)</span>:\n<span class=\"w\">  </span>File<span class=\"w\"> </span><span class=\"s2\">\"C:\\Users\\me\\fp-lean\\functional-programming-lean\\scripts\\projects.py\"</span>,<span class=\"w\"> </span>line<span class=\"w\"> </span><span class=\"m\">149</span>,<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>&lt;module&gt;\n<span class=\"w\">    </span>main<span class=\"o\">()</span>\n<span class=\"w\">  </span>File<span class=\"w\"> </span><span class=\"s2\">\"C:\\Users\\me\\fp-lean\\functional-programming-lean\\scripts\\projects.py\"</span>,<span class=\"w\"> </span>line<span class=\"w\"> </span><span class=\"m\">146</span>,<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>main\n<span class=\"w\">    </span>print<span class=\"o\">(</span>json.dumps<span class=\"o\">(</span>ctx.run_examples<span class=\"o\">(</span>context,<span class=\"w\"> </span>book_contents<span class=\"o\">)))</span>\n<span class=\"w\">                     </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n<span class=\"w\">  </span>File<span class=\"w\"> </span><span class=\"s2\">\"C:\\Users\\me\\fp-lean\\functional-programming-lean\\scripts\\projects.py\"</span>,<span class=\"w\"> </span>line<span class=\"w\"> </span><span class=\"m\">137</span>,<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>run_examples\n<span class=\"w\">    </span>test_chapters<span class=\"o\">(</span>book<span class=\"o\">[</span><span class=\"s1\">'sections'</span><span class=\"o\">])</span>\n<span class=\"w\">  </span>File<span class=\"w\"> </span><span class=\"s2\">\"C:\\Users\\me\\fp-lean\\functional-programming-lean\\scripts\\projects.py\"</span>,<span class=\"w\"> </span>line<span class=\"w\"> </span><span class=\"m\">135</span>,<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>test_chapters\n<span class=\"w\">    </span>test_chapters<span class=\"o\">(</span>ch<span class=\"o\">[</span><span class=\"s1\">'Chapter'</span><span class=\"o\">][</span><span class=\"s1\">'sub_items'</span><span class=\"o\">])</span>\n<span class=\"w\">  </span>File<span class=\"w\"> </span><span class=\"s2\">\"C:\\Users\\me\\fp-lean\\functional-programming-lean\\scripts\\projects.py\"</span>,<span class=\"w\"> </span>line<span class=\"w\"> </span><span class=\"m\">132</span>,<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>test_chapters\n<span class=\"w\">    </span>ch<span class=\"o\">[</span><span class=\"s1\">'Chapter'</span><span class=\"o\">][</span><span class=\"s1\">'content'</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>command_re.sub<span class=\"o\">(</span>self.rewrite_command<span class=\"o\">(</span>project_root<span class=\"o\">)</span>,<span class=\"w\"> </span>ch<span class=\"o\">[</span><span class=\"s1\">'Chapter'</span><span class=\"o\">][</span><span class=\"s1\">'content'</span><span class=\"o\">])</span>\n<span class=\"w\">                               </span>^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n<span class=\"w\">  </span>File<span class=\"w\"> </span><span class=\"s2\">\"C:\\Users\\me\\fp-lean\\functional-programming-lean\\scripts\\projects.py\"</span>,<span class=\"w\"> </span>line<span class=\"w\"> </span><span class=\"m\">81</span>,<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>rewrite\n<span class=\"w\">    </span>raise<span class=\"w\"> </span>e\n<span class=\"w\">  </span>File<span class=\"w\"> </span><span class=\"s2\">\"C:\\Users\\me\\fp-lean\\functional-programming-lean\\scripts\\projects.py\"</span>,<span class=\"w\"> </span>line<span class=\"w\"> </span><span class=\"m\">68</span>,<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>rewrite\n<span class=\"w\">    </span><span class=\"nv\">val</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span>subprocess.run<span class=\"o\">(</span>command,\n<span class=\"w\">          </span>^^^^^^^^^^^^^^^^^^^^^^^\n<span class=\"w\">  </span>File<span class=\"w\"> </span><span class=\"s2\">\"C:\\Python311\\Lib\\subprocess.py\"</span>,<span class=\"w\"> </span>line<span class=\"w\"> </span><span class=\"m\">571</span>,<span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span>run\n<span class=\"w\">    </span>raise<span class=\"w\"> </span>CalledProcessError<span class=\"o\">(</span>retcode,<span class=\"w\"> </span>process.args,\nsubprocess.CalledProcessError:<span class=\"w\"> </span>Command<span class=\"w\"> </span><span class=\"s1\">'./run'</span><span class=\"w\"> </span>returned<span class=\"w\"> </span>non-zero<span class=\"w\"> </span><span class=\"nb\">exit</span><span class=\"w\"> </span>status<span class=\"w\"> </span><span class=\"m\">1</span>.\n<span class=\"m\">2023</span>-11-13<span class=\"w\"> </span><span class=\"m\">19</span>:44:17<span class=\"w\"> </span><span class=\"o\">[</span>ERROR<span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span>mdbook::utils<span class=\"o\">)</span>:<span class=\"w\"> </span>Error:<span class=\"w\"> </span>The<span class=\"w\"> </span><span class=\"s2\">\"commands\"</span><span class=\"w\"> </span>preprocessor<span class=\"w\"> </span>exited<span class=\"w\"> </span>unsuccessfully<span class=\"w\"> </span>with<span class=\"w\"> </span><span class=\"nb\">exit</span><span class=\"w\"> </span>code:<span class=\"w\"> </span><span class=\"m\">1</span><span class=\"w\"> </span>status\n</code></pre></div>",
        "id": 401737211,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1699872353
    },
    {
        "content": "<p>my environment: </p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">❯ python -V</span>\n<span class=\"go\">Python 3.11.5</span>\n\n<span class=\"go\">❯ mdbook --version</span>\n<span class=\"go\">mdbook v0.4.32</span>\n</code></pre></div>",
        "id": 401737689,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1699872526
    },
    {
        "content": "<p>I think here is wrong place to post this question. I'm sorry.</p>",
        "id": 401977587,
        "sender_full_name": "Asei Inoue",
        "timestamp": 1699965494
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"626349\">Asei Inoue</span> has marked this topic as resolved.</p>",
        "id": 401977650,
        "sender_full_name": "Notification Bot",
        "timestamp": 1699965523
    }
]