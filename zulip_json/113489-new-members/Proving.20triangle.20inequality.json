[
    {
        "content": "<p>Hi,</p>\n<p>I'm trying to prove a relatively simple inequality (that I hope to be true), and on the path to that I want to prove the triangle theorem.<br>\nUnfortunately, I'm kind of lost what tactics or existing theorems to use to help me get there.</p>\n<p>This is the final theorem I want to prove:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span> <span class=\"n\">my_ineq</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">u</span> <span class=\"n\">t</span><span class=\"o\">:</span> <span class=\"n\">ℚ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"bp\">≤</span><span class=\"n\">a</span> <span class=\"bp\">∧</span> <span class=\"n\">a</span><span class=\"bp\">≤</span><span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span><span class=\"bp\">≤</span><span class=\"n\">b</span> <span class=\"bp\">∧</span> <span class=\"n\">b</span><span class=\"bp\">≤</span><span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"mi\">0</span><span class=\"bp\">≤</span><span class=\"n\">u</span> <span class=\"bp\">∧</span> <span class=\"n\">u</span><span class=\"bp\">≤</span><span class=\"mi\">1</span> <span class=\"bp\">∧</span> <span class=\"mi\">1</span><span class=\"bp\">≤</span><span class=\"n\">t</span> <span class=\"bp\">∧</span> <span class=\"n\">u</span><span class=\"bp\">≤</span><span class=\"n\">a</span> <span class=\"bp\">∧</span> <span class=\"n\">a</span><span class=\"bp\">≤</span><span class=\"n\">t</span><span class=\"bp\">*</span><span class=\"n\">u</span><span class=\"o\">)</span> <span class=\"bp\">→</span> <span class=\"bp\">|</span><span class=\"n\">a</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">|</span> <span class=\"bp\">≤</span> <span class=\"bp\">|</span><span class=\"n\">u</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">|</span> <span class=\"bp\">+</span> <span class=\"o\">(</span><span class=\"n\">t</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">u</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I currently have:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data.rat.basic</span>\n<span class=\"kn\">import</span> <span class=\"n\">data.rat.order</span>\n<span class=\"kn\">import</span> <span class=\"n\">algebra.abs</span>\n\n<span class=\"k\">#check</span> <span class=\"o\">(</span><span class=\"n\">abs_add</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">ℚ</span><span class=\"o\">,</span> <span class=\"bp\">|</span><span class=\"n\">a</span> <span class=\"bp\">+</span> <span class=\"n\">b</span><span class=\"bp\">|</span> <span class=\"bp\">≤</span> <span class=\"bp\">|</span><span class=\"n\">a</span><span class=\"bp\">|</span> <span class=\"bp\">+</span> <span class=\"bp\">|</span><span class=\"n\">b</span><span class=\"bp\">|</span><span class=\"o\">)</span>\n<span class=\"kd\">theorem</span> <span class=\"n\">triangle_ineq</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℚ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">|</span><span class=\"n\">a</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">|</span> <span class=\"bp\">≤</span> <span class=\"bp\">|</span><span class=\"n\">a</span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"bp\">|</span> <span class=\"bp\">+</span> <span class=\"bp\">|</span><span class=\"n\">c</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">|</span> <span class=\"o\">:=</span> <span class=\"kd\">by</span> <span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Can I use the abs_add proposition(?) to help me in the proof? Why does it not require any explicit proof for the #check?</p>\n<p>I'd appreciate any help or pointers to relevant material that I can use.<br>\nI've completed parts of <a href=\"https://www.ma.imperial.ac.uk/~buzzard/xena/natural_number_game/\">https://www.ma.imperial.ac.uk/~buzzard/xena/natural_number_game/</a>, but have no experience in handling rationals. I was hoping the existing theorems could help me, but I failed to find e.g. the triangle inequality.</p>",
        "id": 329429075,
        "sender_full_name": "ambiso",
        "timestamp": 1677073006
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/stream/113488-general/topic/Proving.20triangle.20inequality\">#general &gt; Proving triangle inequality</a> by <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>.</p>",
        "id": 329429607,
        "sender_full_name": "Notification Bot",
        "timestamp": 1677073166
    },
    {
        "content": "<blockquote>\n<p>Can I use the abs_add proposition(?) to help me in the proof?</p>\n</blockquote>\n<p>Yes, definitely! What values do you want to use for <code>a</code> and <code>b</code>?</p>\n<blockquote>\n<p>Why does it not require any explicit proof for the #check?</p>\n</blockquote>\n<p>You gave the explicit proof, it was <code>abs_add</code>!</p>",
        "id": 329429858,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1677073232
    },
    {
        "content": "<p>Perhaps this will help:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data.rat.basic</span>\n<span class=\"kn\">import</span> <span class=\"n\">data.rat.order</span>\n<span class=\"kn\">import</span> <span class=\"n\">algebra.abs</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">triangle_ineq</span> <span class=\"o\">(</span><span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"n\">c</span> <span class=\"o\">:</span> <span class=\"n\">ℚ</span><span class=\"o\">)</span> <span class=\"o\">:</span> <span class=\"bp\">|</span><span class=\"n\">a</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">|</span> <span class=\"bp\">≤</span> <span class=\"bp\">|</span><span class=\"n\">a</span><span class=\"bp\">-</span><span class=\"n\">c</span><span class=\"bp\">|</span> <span class=\"bp\">+</span> <span class=\"bp\">|</span><span class=\"n\">c</span><span class=\"bp\">-</span><span class=\"n\">b</span><span class=\"bp\">|</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"k\">have</span> <span class=\"o\">:</span> <span class=\"bp\">∀</span> <span class=\"n\">a</span> <span class=\"n\">b</span> <span class=\"o\">:</span> <span class=\"n\">ℚ</span><span class=\"o\">,</span> <span class=\"bp\">|</span><span class=\"n\">a</span> <span class=\"bp\">+</span> <span class=\"n\">b</span><span class=\"bp\">|</span> <span class=\"bp\">≤</span> <span class=\"bp\">|</span><span class=\"n\">a</span><span class=\"bp\">|</span> <span class=\"bp\">+</span> <span class=\"bp\">|</span><span class=\"n\">b</span><span class=\"bp\">|</span> <span class=\"o\">:=</span> <span class=\"n\">abs_add</span><span class=\"o\">,</span>\n  <span class=\"c1\">-- now you have `abs_add` visible in your goal view, and can use the tactics</span>\n  <span class=\"c1\">-- you learnt from the natural number game</span>\n  <span class=\"gr\">sorry</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 329430038,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1677073289
    }
]