[
    {
        "content": "<p>Hi all,</p>\n<p>I'm currently working through the  Mathematics in Lean tutorial, and Chapter 5 presents the following simple example: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"c1\">-- apply? suggests the following:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">mul_right_inj'</span><span class=\"w\"> </span><span class=\"n\">h'</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>I tried using <code>apply?</code> myself to see the suggestion, but</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply?</span>\n</code></pre></div>\n<p>gives me a long list of complicated choices involving the <code>refine</code> tactic (which I've not seen yet), none of which seem to be the desired proof term <code>(mul_right_inj' h').mp h</code>.</p>\n<p>Is this expected behavior? If so, how am I meant to use <code>apply?</code> effectively if even the above simple example generates so much noise?</p>",
        "id": 448662575,
        "sender_full_name": "Nick Attkiss",
        "timestamp": 1719941036
    },
    {
        "content": "<p>I believe <code>apply?</code> basically doesn't work for equality goals</p>",
        "id": 448663547,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719941296
    },
    {
        "content": "<p>How does <code>exact?</code> fare?</p>",
        "id": 448663678,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719941335
    },
    {
        "content": "<p>Does <code>apply? using h</code> do anything?</p>",
        "id": 448663878,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1719941387
    },
    {
        "content": "<p>Did you do <code>import Mathlib</code> or otherwise have <code>mul_right_inj</code> in scope?</p>",
        "id": 448710637,
        "sender_full_name": "Bbbbbbbbba",
        "timestamp": 1719957725
    },
    {
        "content": "<p>Indeed, I'll have to retract my previous comment: <code>apply?</code> is working fine for me with enough imports. However it's finding <code>Nat.mul_right_inj</code>.</p>",
        "id": 448712925,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1719958620
    }
]