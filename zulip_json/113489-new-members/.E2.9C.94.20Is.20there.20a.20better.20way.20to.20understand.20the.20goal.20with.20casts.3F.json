[
    {
        "content": "<p>I'm working though <a class=\"stream\" data-stream-id=\"514017\" href=\"/#narrow/channel/514017-Analysis-I\">#Analysis I</a>, but the question is more about Lean InfoView I guess.</p>\n<p>I often end up having to deal with a goal like this:</p>\n<p><a href=\"/user_uploads/3121/qUmjN77FewM43YnyaC_0xAeE/Screenshot-2025-07-10-at-18.31.52.png\">Screenshot 2025-07-10 at 18.31.52.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/qUmjN77FewM43YnyaC_0xAeE/Screenshot-2025-07-10-at-18.31.52.png\" title=\"Screenshot 2025-07-10 at 18.31.52.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2822x956\" src=\"/user_uploads/thumbnail/3121/qUmjN77FewM43YnyaC_0xAeE/Screenshot-2025-07-10-at-18.31.52.png/840x560.webp\"></a></div><p>Now, in order to make progress on this goal, I need to understand which precise types are on both sides.</p>\n<p>In other words, instead of </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"o\">(</span><span class=\"n\">nat_equiv</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">xnat</span>\n</code></pre></div>\n<p>what I really want to see is something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">Object</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">xnat</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Object</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Otherwise how can I possibly know which <code>↑</code> refers to which type, and thus, which lemma I need to \"get rid of\" casts on both sides?</p>\n<p>For example, here, I need something that turns <code>((a: Nat): Object) = ((b: Nat): Object)</code> into <code>a = b</code> but I can only know this after writing it down myself. And this is a simple case. The hard case is when both sides have different chained casts.</p>\n<p>I presume there's maybe some pretty printing format that could help here. But also, I guess I'm wondering why this experience sucks so much and how do people tolerate it. It's absolutely driving me up the wall.</p>",
        "id": 528131736,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1752169216
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span> I think we had a related discussion somewhere but I lost it, would appreciate your insight!</p>",
        "id": 528131853,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1752169261
    },
    {
        "content": "<p>I think there's a pp option</p>",
        "id": 528132128,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1752169369
    },
    {
        "content": "<p>I guess this helps?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">pp</span><span class=\"bp\">.</span><span class=\"n\">coercions</span><span class=\"bp\">.</span><span class=\"n\">types</span><span class=\"w\"> </span><span class=\"n\">true</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑</span><span class=\"o\">((</span><span class=\"n\">nat_equiv</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">toSubtype</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Object</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑</span><span class=\"n\">xnat</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Object</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I guess this means I just need to remember it exists?</p>\n<p>I wish toggling this was a part of the InfoView UI:</p>\n<p><a href=\"/user_uploads/3121/wLqXs3H4bbiCqR-KiAO-Fdc0/Screenshot-2025-07-10-at-18.43.21.png\">Screenshot 2025-07-10 at 18.43.21.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/wLqXs3H4bbiCqR-KiAO-Fdc0/Screenshot-2025-07-10-at-18.43.21.png\" title=\"Screenshot 2025-07-10 at 18.43.21.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1034x728\" src=\"/user_uploads/thumbnail/3121/wLqXs3H4bbiCqR-KiAO-Fdc0/Screenshot-2025-07-10-at-18.43.21.png/840x560.webp\"></a></div><p>Or exposed on hover of the up arrows.</p>",
        "id": 528132675,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1752169586
    },
    {
        "content": "<p>I suppose I'll be using <code>set_option pp.coercions.types true</code> when I need it but I wish InfoView just surfaced this better somehow.</p>",
        "id": 528134627,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1752170362
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"418569\">Dan Abramov</span> has marked this topic as resolved.</p>",
        "id": 528134634,
        "sender_full_name": "Notification Bot",
        "timestamp": 1752170365
    }
]