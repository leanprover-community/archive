[
    {
        "content": "<p>Hello! I'm stuck on proving an example of Cauchy-Schwarz Inequality in the case of $ \\mathbb{R}^2 $.</p>\n<p>I notice that there are a bunch of theorems at hand, but they are all talking about element about <a href=\"https://leanprover-community.github.io/mathlib_docs/analysis/normed_space/inner_product.html#inner_product_space\">inner_product_space</a>. For example <a href=\"https://leanprover-community.github.io/mathlib_docs/analysis/normed_space/inner_product.html#real_inner_mul_inner_self_le\">real_inner_mul_inner_self_le</a> that I want to use here, it talks about 2 variables of type F, but I don't know how to instantiate variables of such type.</p>\n<p>I would like to know if there is a way to instantiate 2 variables of type F that fit in well in <a href=\"https://leanprover-community.github.io/mathlib_docs/analysis/normed_space/inner_product.html#real_inner_mul_inner_self_le\">real_inner_mul_inner_self_le</a> and apply it, without modifying my statement here? Any hint welcome!</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data.real.basic</span>\n<span class=\"kn\">import</span> <span class=\"n\">analysis.normed_space.inner_product</span>\n\n<span class=\"kd\">example</span> <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñù</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"mi\">3</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">‚â§</span> <span class=\"mi\">13</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">y</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"gr\">sorry</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 245288979,
        "sender_full_name": "Kunhao Zheng",
        "timestamp": 1625735436
    },
    {
        "content": "<p>So you need to pick <code>F</code> by deciding how you want your inner product to be defined</p>",
        "id": 245289312,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1625735672
    },
    {
        "content": "<p>At a guess you want <a href=\"https://leanprover-community.github.io/mathlib_docs/find/euclidean_space\">docs#euclidean_space</a>, so <code>F</code> is <code>euclidean_space ‚Ñù 2</code></p>",
        "id": 245289369,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1625735717
    },
    {
        "content": "<p>Which would make your statement something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">euclidean_space</span> <span class=\"n\">‚Ñù</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">p</span> <span class=\"mi\">0</span> <span class=\"bp\">+</span> <span class=\"mi\">3</span> <span class=\"bp\">*</span> <span class=\"n\">p</span> <span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">‚â§</span> <span class=\"mi\">13</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"mi\">0</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">p</span> <span class=\"mi\">1</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>which then is the same as</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">euclidean_space</span> <span class=\"n\">‚Ñù</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n<span class=\"o\">(</span><span class=\"n\">inner</span> <span class=\"bp\">!</span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"o\">,</span> <span class=\"mi\">3</span><span class=\"o\">]</span> <span class=\"n\">p</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">‚â§</span> <span class=\"mi\">13</span> <span class=\"bp\">*</span> <span class=\"n\">inner</span> <span class=\"n\">p</span> <span class=\"n\">p</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Note I'm not suggesting you adjust your statement here, just suggesting some other statements you could prove first in order to prove your statement</p>",
        "id": 245289641,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1625735919
    },
    {
        "content": "<p>Thanks! I'll give it a try</p>",
        "id": 245289793,
        "sender_full_name": "Kunhao Zheng",
        "timestamp": 1625736029
    },
    {
        "content": "<p>I have to change 2 to (fin 2) to make lean happy in the first statement. But the second one it complains about <code>has_inner ‚Ñï (euclidean_space ‚Ñù (fin 2))</code> <code>has_inner ‚Ñï (fin 1.succ ‚Üí ‚Ñï)</code>, maybe I need to add extra info like <code>[inner_product_space ‚Ñù p]</code>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data.real.basic</span>\n<span class=\"kn\">import</span> <span class=\"n\">analysis.normed_space.inner_product</span>\n<span class=\"kn\">import</span> <span class=\"n\">analysis.normed_space.pi_Lp</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">algebra_cauchy2_2xp3ysqleq13txsqpysq</span>\n  <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñù</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"mi\">3</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">‚â§</span> <span class=\"mi\">13</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">y</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"c1\">-- let F:= euclidean_space ‚Ñù (fin 2),</span>\n  <span class=\"c1\">-- have h‚ÇÄ := @real_inner_mul_inner_self_le (euclidean_space ‚Ñù (fin 2)) _ _ _,</span>\n  <span class=\"gr\">sorry</span>\n<span class=\"kd\">end</span>\n\n<span class=\"kd\">example</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">euclidean_space</span> <span class=\"n\">‚Ñù</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">))</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">p</span> <span class=\"mi\">0</span> <span class=\"bp\">+</span> <span class=\"mi\">3</span> <span class=\"bp\">*</span> <span class=\"n\">p</span> <span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">‚â§</span> <span class=\"mi\">13</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"mi\">0</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">p</span> <span class=\"mi\">1</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n\n<span class=\"kd\">example</span> <span class=\"o\">(</span><span class=\"n\">p</span> <span class=\"o\">:</span> <span class=\"n\">euclidean_space</span> <span class=\"n\">‚Ñù</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">))</span> <span class=\"o\">:</span>\n<span class=\"o\">(</span><span class=\"n\">inner</span> <span class=\"bp\">!</span><span class=\"o\">[</span><span class=\"mi\">2</span><span class=\"o\">,</span> <span class=\"mi\">3</span><span class=\"o\">]</span> <span class=\"n\">p</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">‚â§</span> <span class=\"mi\">13</span> <span class=\"bp\">*</span> <span class=\"n\">inner</span> <span class=\"n\">p</span> <span class=\"n\">p</span> <span class=\"o\">:=</span> <span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 245290927,
        "sender_full_name": "Kunhao Zheng",
        "timestamp": 1625736843
    },
    {
        "content": "<p>Lean is inferring the wrong type for <code>![2, 3]</code></p>",
        "id": 245291064,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1625736952
    },
    {
        "content": "<p><code>(![2, 3] : euclidean_space ‚Ñù (fin 2))</code> might be enough</p>",
        "id": 245291123,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1625736970
    },
    {
        "content": "<p>Once the lean web editor loads for me, I can try to debug</p>",
        "id": 245291323,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1625737114
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">data.real.basic</span>\n<span class=\"kn\">import</span> <span class=\"n\">analysis.normed_space.inner_product</span>\n<span class=\"kn\">import</span> <span class=\"n\">analysis.normed_space.pi_Lp</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">algebra_cauchy2_2xp3ysqleq13txsqpysq</span>\n  <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñù</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"mi\">3</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">‚â§</span> <span class=\"mi\">13</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">y</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"k\">let</span> <span class=\"n\">v</span> <span class=\"o\">:</span> <span class=\"n\">euclidean_space</span> <span class=\"n\">‚Ñù</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"bp\">!</span><span class=\"o\">[(</span><span class=\"mi\">2</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñù</span><span class=\"o\">),</span> <span class=\"mi\">3</span><span class=\"o\">],</span>\n  <span class=\"k\">let</span> <span class=\"n\">w</span> <span class=\"o\">:</span> <span class=\"n\">euclidean_space</span> <span class=\"n\">‚Ñù</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"bp\">!</span><span class=\"o\">[</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">y</span><span class=\"o\">],</span>\n  <span class=\"k\">have</span> <span class=\"n\">h‚ÇÄ</span> <span class=\"o\">:=</span> <span class=\"n\">real_inner_mul_inner_self_le</span> <span class=\"n\">v</span> <span class=\"n\">w</span><span class=\"o\">,</span>\n  <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">v</span><span class=\"o\">,</span> <span class=\"n\">w</span><span class=\"o\">,</span> <span class=\"n\">fin.sum_univ_succ</span><span class=\"o\">,</span> <span class=\"bp\">‚Üê</span><span class=\"n\">pow_two</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h‚ÇÄ</span><span class=\"o\">,</span>\n  <span class=\"gr\">sorry</span>\n<span class=\"kd\">end</span>\n</code></pre></div>",
        "id": 245291652,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1625737366
    },
    {
        "content": "<p>By using the <code>let</code> I was able to force lean to infer the types correctly without using <code>@</code></p>",
        "id": 245291764,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1625737464
    },
    {
        "content": "<p>The goal is trivial from the <code>sorry</code>, the key lemma you need to undo the mess made by <code>euclidean_space</code> is <a href=\"https://leanprover-community.github.io/mathlib_docs/find/fin.sum_univ_succ\">docs#fin.sum_univ_succ</a></p>",
        "id": 245291819,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1625737529
    },
    {
        "content": "<p>If you remove it from the <code>simp</code> you'll see why</p>",
        "id": 245291860,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1625737562
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> Thanks! That looks pretty nice! </p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span> <span class=\"n\">analysis.normed_space.inner_product</span>\n<span class=\"kn\">import</span> <span class=\"n\">analysis.normed_space.pi_Lp</span>\n\n<span class=\"kd\">theorem</span> <span class=\"n\">algebra_cauchy2_2xp3ysqleq13txsqpysq</span>\n  <span class=\"o\">(</span><span class=\"n\">x</span> <span class=\"n\">y</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñù</span><span class=\"o\">)</span> <span class=\"o\">:</span>\n  <span class=\"o\">(</span><span class=\"mi\">2</span> <span class=\"bp\">*</span> <span class=\"n\">x</span> <span class=\"bp\">+</span> <span class=\"mi\">3</span> <span class=\"bp\">*</span> <span class=\"n\">y</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">‚â§</span> <span class=\"mi\">13</span> <span class=\"bp\">*</span> <span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span> <span class=\"bp\">+</span> <span class=\"n\">y</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span>\n<span class=\"kd\">begin</span>\n  <span class=\"k\">let</span> <span class=\"n\">v</span> <span class=\"o\">:</span> <span class=\"n\">euclidean_space</span> <span class=\"n\">‚Ñù</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"bp\">!</span><span class=\"o\">[(</span><span class=\"mi\">2</span> <span class=\"o\">:</span> <span class=\"n\">‚Ñù</span><span class=\"o\">),</span> <span class=\"mi\">3</span><span class=\"o\">],</span>\n  <span class=\"k\">let</span> <span class=\"n\">w</span> <span class=\"o\">:</span> <span class=\"n\">euclidean_space</span> <span class=\"n\">‚Ñù</span> <span class=\"o\">(</span><span class=\"n\">fin</span> <span class=\"mi\">2</span><span class=\"o\">)</span> <span class=\"o\">:=</span> <span class=\"bp\">!</span><span class=\"o\">[</span><span class=\"n\">x</span><span class=\"o\">,</span> <span class=\"n\">y</span><span class=\"o\">],</span>\n  <span class=\"k\">have</span> <span class=\"n\">h‚ÇÄ</span> <span class=\"o\">:=</span> <span class=\"n\">real_inner_mul_inner_self_le</span> <span class=\"n\">v</span> <span class=\"n\">w</span><span class=\"o\">,</span>\n  <span class=\"n\">simp</span> <span class=\"o\">[</span><span class=\"n\">v</span><span class=\"o\">,</span> <span class=\"n\">w</span><span class=\"o\">,</span> <span class=\"n\">fin.sum_univ_succ</span><span class=\"o\">,</span> <span class=\"bp\">‚Üê</span><span class=\"n\">pow_two</span><span class=\"o\">]</span> <span class=\"n\">at</span> <span class=\"n\">h‚ÇÄ</span><span class=\"o\">,</span>\n  <span class=\"n\">nlinarith</span><span class=\"o\">,</span>\n<span class=\"kd\">end</span>\n</code></pre></div>\n<p>Btw where can I find the construction syntax of <code>![x, y]</code>? It seems that it is not in  <a href=\"https://leanprover-community.github.io/mathlib_docs/find/euclidean_space/\">euclidean_space</a></p>",
        "id": 245326629,
        "sender_full_name": "Kunhao Zheng",
        "timestamp": 1625756741
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/data/matrix/notation.html\">https://leanprover-community.github.io/mathlib_docs/data/matrix/notation.html</a></p>",
        "id": 245326959,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1625756859
    },
    {
        "content": "<p>We have specializations of AM-GM to two, three or four variables in mathlib, we should probably add such specializations of Cauchy-Schwarz to specific small numbers of real variables as well, for convenience when you want to use it with a few concrete expressions rather than having an inner product space.</p>",
        "id": 245387953,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1625790587
    },
    {
        "content": "<p>I'm new to lean and wanted to start contributing to mathlib with simple proofs from linear algebra.</p>\n<p>I saw there was no direct proof of Cauchy-Schwarz on inner product spaces so I thought I would start there.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">InnerProductSpace</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">NormedSpace</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">InnerProductSpace</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">RealInnerProductSpace</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">cauchy_schwarz_inequality</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"bp\">|‚ü™</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">‚ü´|</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"bp\">‚ü™</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"bp\">‚ü´</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">‚ü™</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">‚ü´</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"c1\">-- create new variable t, and use it to rewrite hh</span>\n<span class=\"w\">    </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">‚ü™</span><span class=\"n\">u</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">‚ü´</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"bp\">‚ü™</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">‚ü´</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hh</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"bp\">‚ü™</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">‚Ä¢</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">‚ü´</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">real_inner_self_nonneg</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span>\n<span class=\"w\">      </span><span class=\"n\">inner_sub_left</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inner_sub_right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inner_smul_right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inner_sub_right</span><span class=\"o\">,</span>\n<span class=\"w\">      </span><span class=\"n\">inner_smul_right</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">real_inner_smul_left</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">real_inner_smul_left</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">real_inner_comm</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span>\n<span class=\"w\">    </span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hh</span>\n\n<span class=\"w\">    </span><span class=\"c1\">-- reduce hh to 0 ‚â§ inner u u - inner u v ^ 2 * (inner v v)‚Åª¬π</span>\n<span class=\"w\">    </span><span class=\"n\">ring_nf</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hh</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hh</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">&lt;-</span><span class=\"w\"> </span><span class=\"n\">inv_pow</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pow_two</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pow_two</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">&lt;-</span><span class=\"w\"> </span><span class=\"n\">pow_two</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_comm</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">&lt;-</span><span class=\"w\"> </span><span class=\"n\">mul_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hh</span>\n<span class=\"w\">    </span><span class=\"n\">field_simp</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hh</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">ring_nf</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hh</span>\n\n<span class=\"w\">    </span><span class=\"c1\">-- handle the case where v is zero</span>\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">hv_iszero</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hv_iszero</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">push_neg</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hv_iszero</span>\n\n<span class=\"w\">    </span><span class=\"c1\">-- handle the case where v is negative / positive</span>\n<span class=\"w\">    </span><span class=\"n\">cases'</span><span class=\"w\"> </span><span class=\"n\">lt_or_gt_of_ne</span><span class=\"w\"> </span><span class=\"n\">hv_iszero</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">hv_neg</span><span class=\"w\"> </span><span class=\"n\">hv_pos</span>\n\n<span class=\"w\">    </span><span class=\"c1\">-- handle the case where v &lt; 0</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hv_nonneg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"bp\">‚ü™</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">‚ü´</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">real_inner_self_nonneg</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">hv_pos</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hv_zero</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">lt_or_eq_of_le</span><span class=\"w\"> </span><span class=\"n\">hv_nonneg</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hhh</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mul_le_mul_of_nonneg_left</span><span class=\"w\"> </span><span class=\"n\">hh</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">le_of_lt</span><span class=\"w\"> </span><span class=\"n\">hv_pos</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_sub</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_comm</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚ü™</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">‚ü´</span><span class=\"o\">)</span><span class=\"bp\">‚Åª¬π</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_cancel_left‚ÇÄ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ne_of_gt</span><span class=\"w\"> </span><span class=\"n\">hv_pos</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">mul_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hhh</span>\n<span class=\"w\">    </span><span class=\"n\">assumption</span>\n\n<span class=\"w\">    </span><span class=\"c1\">-- handle the case where inner v v = 0</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">eq_comm</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inner_self_eq_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hv_zero</span>\n<span class=\"w\">    </span><span class=\"n\">contradiction</span>\n\n<span class=\"w\">    </span><span class=\"c1\">-- handle the case where v &gt; 0</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hv_nonneg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">‚â§</span><span class=\"w\"> </span><span class=\"bp\">‚ü™</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">‚ü´</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">real_inner_self_nonneg</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">hv_inner_neg</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hv_inner_zero</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">lt_or_eq_of_le</span><span class=\"w\"> </span><span class=\"n\">hv_nonneg</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hhh</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">mul_le_mul_of_nonneg_left</span><span class=\"w\"> </span><span class=\"n\">hh</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">le_of_lt</span><span class=\"w\"> </span><span class=\"n\">hv_inner_neg</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_sub</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_comm</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚ü™</span><span class=\"n\">v</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">‚ü´</span><span class=\"o\">)</span><span class=\"bp\">‚Åª¬π</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_cancel_left‚ÇÄ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ne_of_gt</span><span class=\"w\"> </span><span class=\"n\">hv_inner_neg</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">mul_comm</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hhh</span>\n<span class=\"w\">    </span><span class=\"n\">assumption</span>\n\n<span class=\"w\">    </span><span class=\"c1\">-- handle the case where inner v v = 0</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">eq_comm</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">inner_self_eq_zero</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hv_inner_zero</span>\n<span class=\"w\">    </span><span class=\"n\">contradiction</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n</code></pre></div>\n<p><a href=\"https://gist.github.com/cmrfrd/61c576ed92bd1b82901c8bf3a629cfed\">https://gist.github.com/cmrfrd/61c576ed92bd1b82901c8bf3a629cfed</a></p>\n<p>Is this something that would get accepted into mathlib?</p>",
        "id": 486399352,
        "sender_full_name": "Alexander Comerford",
        "timestamp": 1733435466
    },
    {
        "content": "<p>We have the Cauchy-Schwarz inequality in Mathlib.</p>",
        "id": 486399736,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733435625
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=norm_inner_le_norm#doc\">docs#norm_inner_le_norm</a></p>",
        "id": 486399836,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733435668
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/113489-new-members/topic/Cauchy-Schwarz.20inequality/near/486399736\">said</a>:</p>\n<blockquote>\n<p>We have the Cauchy-Schwarz inequality in Mathlib.</p>\n</blockquote>\n<p>I see! missed it. Thank you</p>",
        "id": 486399938,
        "sender_full_name": "Alexander Comerford",
        "timestamp": 1733435727
    },
    {
        "content": "<p>Also, I highly doubt you want to assume <code>LinearOrder F</code>. That will basically restrict your version to hold only for <code>F := ‚Ñù</code>.</p>",
        "id": 486399966,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733435744
    },
    {
        "content": "<p>This is how I would search for a named theorem in Mathlib generally: <a href=\"https://leansearch.net/?q=cauchy%20schwarz%20inequality\">https://leansearch.net/?q=cauchy%20schwarz%20inequality</a></p>",
        "id": 486400457,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733435965
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/113489-new-members/topic/Cauchy-Schwarz.20inequality/near/486399966\">said</a>:</p>\n<blockquote>\n<p>Also, I highly doubt you want to assume <code>LinearOrder F</code>. That will basically restrict your version to hold only for <code>F := ‚Ñù</code>.</p>\n</blockquote>\n<p>Yes that was the next adaptation, although I wasn't sure how to structure the single proof for real and complex together</p>",
        "id": 486400500,
        "sender_full_name": "Alexander Comerford",
        "timestamp": 1733435989
    },
    {
        "content": "<p>We have a class called <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=RCLike#doc\">docs#RCLike</a> for this.</p>",
        "id": 486400971,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733436188
    },
    {
        "content": "<p>So, to make a field which is (morally) either <code>‚Ñù</code> or <code>‚ÑÇ</code>, you would write <code>{ùïú : Type*} [RCLike ùïú]</code>.</p>",
        "id": 486401033,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733436228
    },
    {
        "content": "<p>but note also your assumption was about <code>F</code> (!!) which is the vector space, not the scalar field.</p>",
        "id": 486401155,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733436280
    },
    {
        "content": "<p>My point is that your theorem isn't even applicable to <code>EuclideanSpace ‚Ñù n</code> for this reason.</p>",
        "id": 486401273,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733436358
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/113489-new-members/topic/Cauchy-Schwarz.20inequality/near/486401273\">said</a>:</p>\n<blockquote>\n<p>My point is that your theorem isn't even applicable to <code>EuclideanSpace ‚Ñù n</code> for this reason.</p>\n</blockquote>\n<p>I see, but how does <code>RCLike</code> connect with <code>EuclideanSpace</code>?</p>",
        "id": 486415620,
        "sender_full_name": "Alexander Comerford",
        "timestamp": 1733443602
    },
    {
        "content": "<p>Oh i see <a href=\"https://github.com/leanprover-community/mathlib4/blob/5255add1b2ea28533d99d582c7cfcc20ad22939a/Mathlib/Analysis/InnerProductSpace/PiL2.lean#L97-L100\">here</a>.</p>\n<p>EuclidianSpace is of type <code>ùïú</code> which is an <code>RCLike</code></p>",
        "id": 486415875,
        "sender_full_name": "Alexander Comerford",
        "timestamp": 1733443769
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/113489-new-members/topic/Cauchy-Schwarz.20inequality/near/486401155\">said</a>:</p>\n<blockquote>\n<p>but note also your assumption was about <code>F</code> (!!) which is the vector space, not the scalar field.</p>\n</blockquote>\n<p>I'm not sure what you mean here. I am under the assumption that <code>u</code> and <code>v</code> in this proof are elements of the vector space and not vector spaces themselves.</p>\n<blockquote>\n<p>you would write¬†<code>{ùïú : Type*} [RCLike ùïú]</code>.</p>\n</blockquote>\n<p>Is this then the 'right' way to write a vector space that is <code>RCLike</code>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">IsROrC</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">InnerProductSpace</span><span class=\"w\"> </span><span class=\"n\">ùïú</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 486801234,
        "sender_full_name": "Alexander Comerford",
        "timestamp": 1733690077
    },
    {
        "content": "<p>What I meant before is that this line of yours:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">F</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NormedAddCommGroup</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">InnerProductSpace</span><span class=\"w\"> </span><span class=\"n\">‚Ñù</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>while it <em>does</em> make <code>F</code> into an inner product space over <code>‚Ñù</code>, it <em>also</em> assumes that <code>F</code> itself (not the scalar field <code>‚Ñù</code>) is <em>linearly ordered</em>. My point was that pretty much the only thing which is linearly ordered <em>and</em> an inner product space over <code>‚Ñù</code> is <code>‚Ñù</code> itself. So there was no \"generality\" in your original statement because of this <code>[LinearOrder F]</code> hypothesis.</p>",
        "id": 487013971,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1733755612
    }
]