[
    {
        "content": "<p>Is there a command like this in Lean now? It would work similar to <code>#eval</code>, getting the result of an expression and then checking if it matches <strong>the comment on the previous line</strong>. If they match, it would <strong>not output any content</strong>, otherwise, it would display an error message. I want to use it to test a function I've implemented.<br>\nFor example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- Please implement function  `f(x) = x + 1`</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">my_impl</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">1</span>\n<span class=\"cm\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">some_command</span><span class=\"w\"> </span><span class=\"n\">my_impl</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\">       </span><span class=\"c1\">-- succeed, and this command will not print anything</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">0</span>\n<span class=\"cm\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">some_command</span><span class=\"w\"> </span><span class=\"n\">my_impl</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\">     </span><span class=\"c1\">-- failed, because `my_impl 0 != 0` and this command print some error message</span>\n</code></pre></div>\n<p>What I want is something like <code>#eval my_impl 0 == 1</code>, except that print nothing when succeed.</p>",
        "id": 477882187,
        "sender_full_name": "White Chen",
        "timestamp": 1729417359
    },
    {
        "content": "<p>Something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Command</span>\n\n<span class=\"c1\">-- Please implement function  `f(x) = x + 1`</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">my_impl</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"n\">run_meta</span>\n<span class=\"w\">  </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">my_impl</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"n\">run_meta</span>\n<span class=\"w\">  </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">my_impl</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>is what you are looking for?</p>",
        "id": 477884220,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1729419323
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">my_impl</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>is probably slightly closer to what you asked for</p>",
        "id": 477886076,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729421214
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"670422\">White Chen</span> has marked this topic as resolved.</p>",
        "id": 477886882,
        "sender_full_name": "Notification Bot",
        "timestamp": 1729422061
    }
]