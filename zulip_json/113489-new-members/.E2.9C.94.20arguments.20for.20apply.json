[
    {
        "content": "<p>This might be a VERY stupid question, but I couldn't get the hang of it for quite a while.<br>\nSay I want to prove something like theorem Q (x y z : Real) (hx : 0 &lt; x) (hy : 0 &lt; y) (hz : 0 &lt; z): (x * y * z)^2 = 14 ^ 2 -&gt; x * y * z = 14. I search Mathlib and find a theorem that looks like it might help:<br>\nsq_eq_sq₀ which states that ∀ {M₀ : Type u_1} [inst : MonoidWithZero M₀] [inst_1 : LinearOrder M₀] [inst_2 : ZeroLEOneClass M₀]<br>\n  [inst_3 : PosMulStrictMono M₀] [inst_4 : MulPosStrictMono M₀] {a b : M₀}, 0 ≤ a → 0 ≤ b → (a ^ 2 = b ^ 2 ↔ a = b)<br>\nHowever, when I try to apply it (with .1, which works sometimes), it leads to an error:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">inport</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">14</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">14</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">sq_eq_sq₀</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n</code></pre></div>\n<p>The error is </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">form</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">constant</span>\n<span class=\"w\">  </span><span class=\"n\">sq_eq_sq₀</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">969</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">970</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">969</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">970</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">969</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"m\">970</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>So there should be a way to specify what exactly I mean for Lean, but I can't figure out what to write in which order</p>",
        "id": 519613806,
        "sender_full_name": "V S",
        "timestamp": 1747834341
    },
    {
        "content": "<p>This lemma has an explicit argument \"before\" the iff, so <code>apply (sq_eq_sq₀?_).1</code> may work.</p>",
        "id": 519615035,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747834655
    },
    {
        "content": "<p>(Actually, it has 2 explicit argument!  Try using two underscores -- I'm on mobile)</p>",
        "id": 519615253,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747834706
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/113489-new-members/topic/arguments.20for.20apply/near/519615035\">said</a>:</p>\n<blockquote>\n<p>This lemma has an explicit argument \"before\" the iff, so <code>apply (sq_eq_sq₀?_).1</code> may work.</p>\n</blockquote>\n<p>Thank you, <code>apply (sq_eq_sq₀ ?_ ?_).1</code> worked! So, if I understand correctly, the arguments (in this case, a and b) should be right after the lemma and ?_ will try to match something that sounds similar so that each case will be proven afterwards</p>",
        "id": 519616037,
        "sender_full_name": "V S",
        "timestamp": 1747834892
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"874708\">V S</span> has marked this topic as resolved.</p>",
        "id": 519616295,
        "sender_full_name": "Notification Bot",
        "timestamp": 1747834950
    },
    {
        "content": "<p>Technically, it is not <code>a</code> and <code>b</code> that are represented by <code>?_</code>, but the proofs that <code>a</code> and <code>b</code> are non-negative.</p>",
        "id": 519616688,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747835052
    },
    {
        "content": "<p>In the error message, Lean is telling you that it was expecting [a proof that <em>something</em> is non-negative] + [a proof that <em>something else</em> is non-negative] and that this would give you the iff.</p>",
        "id": 519616943,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747835125
    },
    {
        "content": "<p>If you passed the proof, Lean would be able to figure out what <code>a</code> and <code>b</code> should be, but it would not know how to prove that what they instantiate to are non-negative.</p>",
        "id": 519617174,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747835184
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20arguments.20for.20apply/near/519617174\">said</a>:</p>\n<blockquote>\n<p>If you passed the proof, Lean would be able to figure out what <code>a</code> and <code>b</code> should be, but it would not know how to prove that what they instantiate to are non-negative.</p>\n</blockquote>\n<p>I'm not sure I understand what you mean by 'passed the proof'. Do you mean 'writing propositions explicitly', so (if h1 : 0 &lt;= x * y * z and h2 : 0 &lt;= 14) , <code>apply (sq_eq_sq₀ h1 h2).1</code> (or <code>apply (sq_eq_sq₀ (0 &lt;= x * y * z) (0 &lt;= 14)).1</code>?</p>",
        "id": 519618409,
        "sender_full_name": "V S",
        "timestamp": 1747835506
    },
    {
        "content": "<p>Yes, the first argument that you pass should be a term <code>h1</code> of type <code>0 &lt;= x * y * z</code>, so a proof of the inequality.  Similarly for the second argument that you pass to the lemma.</p>",
        "id": 519619226,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747835702
    },
    {
        "content": "<p>You can view the lemma as the \"relative implication\" that assuming that you tell it how to prove the inequalities, it returns a proof of the iff.</p>",
        "id": 519619425,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747835761
    },
    {
        "content": "<p>But, before any interpretation, the error message is simply saying that Lean did not know what <code>(_).1</code> referred to, since you had given something where it was expecting two explicit arguments.  If you had given that, then Lean would have known that <code>.1</code> referred to the first constructor of the iff, namely the forward implication.</p>",
        "id": 519619864,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747835878
    },
    {
        "content": "<p>Ok, I think I understood it fully, thank you for explaining!</p>",
        "id": 519620021,
        "sender_full_name": "V S",
        "timestamp": 1747835916
    }
]