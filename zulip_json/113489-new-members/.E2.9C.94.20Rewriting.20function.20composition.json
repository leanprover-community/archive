[
    {
        "content": "<p>How to rewrite <code>f (g x)</code> to <code>(f ∘ g) x</code>?<br>\nI tried <code>rw [← Function.comp_apply]</code> but it fails with <code>tactic 'rewrite' failed, pattern is a metavariable\n  ?m.212687 (?m.212688 ?m.212689)</code></p>",
        "id": 506265832,
        "sender_full_name": "Viktor Kryshtal",
        "timestamp": 1742247494
    },
    {
        "content": "<p>Can you write a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>",
        "id": 506265902,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1742247523
    },
    {
        "content": "<p>Anyway something like <code>rw [← Function.comp_apply (f := f)]</code> should probably work.</p>",
        "id": 506266413,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1742247693
    },
    {
        "content": "<p>This pattern is actually deep inside a complicated expression, so I want to get to it with <code>conv</code> tactic and then somehow rewrite. But basically it's something like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">comp_apply</span><span class=\"o\">]</span><span class=\"w\">  </span><span class=\"c1\">-- fails</span>\n</code></pre></div>\n<p>I need to change <code>f (g x)</code> to <code>(f ∘ g) x</code> in the goal.</p>",
        "id": 506266827,
        "sender_full_name": "Viktor Kryshtal",
        "timestamp": 1742247840
    },
    {
        "content": "<p>Thank you, that's just what I needed.</p>",
        "id": 506267269,
        "sender_full_name": "Viktor Kryshtal",
        "timestamp": 1742247973
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"888566\">Viktor Kryshtal</span> has marked this topic as resolved.</p>",
        "id": 506267291,
        "sender_full_name": "Notification Bot",
        "timestamp": 1742247981
    },
    {
        "content": "<p>If you're in <code>conv</code>, you can use <code>apply</code></p>",
        "id": 506267584,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1742248088
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">change</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>also works</p>",
        "id": 506268293,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1742248338
    }
]