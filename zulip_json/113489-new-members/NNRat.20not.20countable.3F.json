[
    {
        "content": "<p>I am writing a probability proof, and I want to use <code>ae_all_iff</code> on a statement of the form <code>h : ∀ c : ℚ≥0, ∀ᵐ ω ∂P, M c</code> where <code>M</code> is some predicate. In my case <code>M</code> essentially consists of a bunch of bounds formulated for <code>ℝ≥0</code>, so I would really like to have <code>c</code> range over a type which coerces nicely to <code>ℝ≥0</code>.</p>\n<p>The problem that I encounter is that lean cannot synthesize <code>Countable ℚ≥0</code>, even though this intuitively seems like it should be true. Why is this happening, and is there a good way to work around this?</p>",
        "id": 566916284,
        "sender_full_name": "Joris van Winden",
        "timestamp": 1767869925
    },
    {
        "content": "<p>Doesn't seem to be there, let me check if I can prove it in a few minutes</p>",
        "id": 566917388,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1767870304
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">NNRat</span><span class=\"bp\">.</span><span class=\"n\">countable</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Countable</span><span class=\"w\"> </span><span class=\"n\">NNRat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">countable</span>\n</code></pre></div>",
        "id": 566917544,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767870373
    },
    {
        "content": "<p>That's even shorter than mine</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Countable</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"bp\">≥</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">invFun_surjective</span><span class=\"w\"> </span><span class=\"n\">NNRat</span><span class=\"bp\">.</span><span class=\"n\">coe_injective</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">countable</span>\n</code></pre></div>",
        "id": 566917726,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1767870449
    },
    {
        "content": "<p>Aaron, can you please PR yours?</p>",
        "id": 566917766,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1767870462
    },
    {
        "content": "<p>Thanks! So I guess this is currently just missing from mathlib then?</p>",
        "id": 566918110,
        "sender_full_name": "Joris van Winden",
        "timestamp": 1767870579
    },
    {
        "content": "<p>Yes</p>",
        "id": 566918696,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1767870804
    },
    {
        "content": "<p>I think NNRat hasn't seen that much use yet</p>",
        "id": 566918769,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1767870838
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/33749\">#33749</a></p>",
        "id": 566919792,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767871242
    },
    {
        "content": "<p>I once got into this issue as well, I needed a countable dense subset of <code>NNReal</code>, but I realized that using an arbitrary one was just easier than using the range of the coercion <code>NNRat -&gt; NNReal</code>.</p>",
        "id": 566921457,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1767871907
    },
    {
        "content": "<p>do we have a <code>TopologicalSpace.SeparableSpace</code> instance?</p>",
        "id": 566921814,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1767872064
    },
    {
        "content": "<p>Yes, I used <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/Bases.html#TopologicalSpace.exists_countable_dense\">TopologicalSpace.exists_countable_dense</a> <a href=\"https://github.com/RemyDegenne/brownian-motion/blob/e057c44809ef6f5c03b82258663bc89682f3cd83/BrownianMotion/Gaussian/BrownianMotion.lean#L522C27-L522C66\">here</a>.</p>",
        "id": 566922409,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1767872324
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Topology/MetricSpace/ProperSpace/Real.html#NNReal.instSecondCountableTopology\">NNReal.instSecondCountableTopology</a></p>",
        "id": 566922501,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1767872369
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"703970\">Etienne Marion</span> <a href=\"#narrow/channel/113489-new-members/topic/NNRat.20not.20countable.3F/near/566921457\">said</a>:</p>\n<blockquote>\n<p>I once got into this issue as well, I needed a countable dense subset of <code>NNReal</code>, but I realized that using an arbitrary one was just easier than using the range of the coercion <code>NNRat -&gt; NNReal</code>.</p>\n</blockquote>\n<p>Ah, thanks for this suggestion. I'm having some additional difficulty managing various coercions between <code>ℚ</code>, <code>ℝ</code> and their nonnegative variants, so I might try this approach instead.</p>",
        "id": 566923694,
        "sender_full_name": "Joris van Winden",
        "timestamp": 1767872847
    }
]