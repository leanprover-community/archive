[
    {
        "content": "<p>Why is the following expression not reduced?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">reduce</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ</span>\n</code></pre></div>\n<p>It appears in <a href=\"https://leanprover-community.github.io/lean4-metaprogramming-book/main/04_metam.html#lambdas-and-foralls\">Metaprogramming in Lean 4</a> But there it says it should reduce to</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>which it doesn't.</p>",
        "id": 553957554,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1762374913
    },
    {
        "content": "<p>I think you have to <code>#reduce (types := true)</code></p>",
        "id": 553957661,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762374950
    },
    {
        "content": "<p>Indeed that works, but why?</p>",
        "id": 553957765,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1762374995
    },
    {
        "content": "<p>because <code>(fun (f : Nat → Nat) ↦ ∀ (n : Nat), f n = f (n + 1)) Nat.succ</code> is a type?</p>",
        "id": 553957948,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762375068
    },
    {
        "content": "<p>Obviously <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span> thanks!</p>",
        "id": 553958084,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1762375121
    }
]