[
    {
        "content": "<p>If the following is a hypothesis</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>b</mi><mo>−</mo><mn>1</mn><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">b-1=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span></span></p>\n<p>we can use the <code>linarith</code> tactic to derive</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>b</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">b=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></span></p>\n<p>As a beginner in both lean4 and mathematics itself, I'm interested in which lemmas lean uses to make this step?</p>\n<p>By lemmas I mean those things that look like <code>lt_of_ne</code> that I'm only just finding out about.</p>\n<p>Is there a debug/verbose mode to ask lean to tell us which lemmas a broad tactic actually used?</p>\n<p>Here is a full example that uses this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h3</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">linarith</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h2</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h3</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>",
        "id": 463667107,
        "sender_full_name": "rzeta0",
        "timestamp": 1724152461
    },
    {
        "content": "<p>You can use <code>show_term</code> to see the very-low-level steps taken by <code>linarith</code></p>",
        "id": 463668868,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1724153121
    },
    {
        "content": "<p>By the way, is the output of <code>show_term</code> exactly what lean does?</p>",
        "id": 463687069,
        "sender_full_name": "jsodd",
        "timestamp": 1724157499
    },
    {
        "content": "<p>If I use <code>show_term intro h</code>, I get \"Try this: <code>refine fun h ↦ ?_ h</code>\", but it doesn't work...</p>",
        "id": 463689808,
        "sender_full_name": "jsodd",
        "timestamp": 1724157906
    },
    {
        "content": "<p><code>linarith</code> is very verbose, in your case you can just use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=eq_of_sub_eq_zero#doc\">docs#eq_of_sub_eq_zero</a></p>",
        "id": 463708357,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1724162002
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"743246\">jsodd</span> <a href=\"#narrow/stream/113489-new-members/topic/which.20lemmas.20are.20used.20in.20simple.20.22add.201.20to.20both.20sides.22.20step/near/463689808\">said</a>:</p>\n<blockquote>\n<p>If I use <code>show_term intro h</code>, I get \"Try this: <code>refine fun h ↦ ?_ h</code>\", but it doesn't work...</p>\n</blockquote>\n<p>That seems to be a bug, the correct output is simply <code>refine fun h ↦ ?_</code></p>",
        "id": 463708675,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1724162082
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"743246\">jsodd</span> <a href=\"#narrow/stream/113489-new-members/topic/which.20lemmas.20are.20used.20in.20simple.20.22add.201.20to.20both.20sides.22.20step/near/463687069\">said</a>:</p>\n<blockquote>\n<p>By the way, is the output of <code>show_term</code> exactly what lean does?</p>\n</blockquote>\n<p>It attempts to be, although sometimes it fails because it's hard to turn parsed expressions back into syntax</p>",
        "id": 463709187,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1724162203
    }
]