[
    {
        "content": "<p>Given a natural number <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span>, there appear to be two ways to state that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span> is prime: <code>Prime p</code> and <code>Fact p.Prime</code>.</p>\n<p>Under what circumstances is <code>Prime p</code> preferable, and when is <code>Fact p.Prime</code> the better choice? In particular, which one would be suitable in a theorem statement?</p>\n<p>Also, if we assume <code>Prime p</code>, how can we derive <code>Fact p.Prime</code>, and conversely, given <code>Fact p.Prime</code>, how can we obtain <code>Prime p</code>?</p>\n<p><a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 505399223,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1741866837
    },
    {
        "content": "<p>Oh, I read the documentation a bit more carefully now, and I see that those refer to the different concepts of being prime.</p>",
        "id": 505399844,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1741866989
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">prime_iff</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fact_iff</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">)</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fact</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">fact_iff</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">nat_prime</span>\n</code></pre></div>",
        "id": 505400125,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1741867062
    },
    {
        "content": "<p>It appears that the standard or idiomatic way to assert that a natural number <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">p</span></span></span></span> is prime is by using <code>Fact p.Prime</code>. Is that correct?</p>",
        "id": 505401033,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1741867289
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> @Prime Nat</p>",
        "id": 505401332,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1741867352
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Nat/Prime/Defs.html#Prime.nat_prime\">Prime.nat_prime</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Nat/Prime/Defs.html#Nat.Prime.prime\">Nat.Prime.prime</a>, and <a href=\"https://loogle.lean-lang.org/?q=%40Prime%20Nat\">5 more</a></p>",
        "id": 505401337,
        "sender_full_name": "loogle",
        "timestamp": 1741867353
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> Fact (Nat.Prime _)</p>",
        "id": 505401378,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1741867364
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Nat/Prime/Defs.html#Nat.fact_prime_three\">Nat.fact_prime_three</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Nat/Prime/Defs.html#Nat.fact_prime_two\">Nat.fact_prime_two</a>, and <a href=\"https://loogle.lean-lang.org/?q=Fact%20%28Nat.Prime%20_%29\">1276 more</a></p>",
        "id": 505401384,
        "sender_full_name": "loogle",
        "timestamp": 1741867365
    },
    {
        "content": "<p>Well it certainly seems to be more common.</p>",
        "id": 505401430,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1741867378
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> Thanks! Since those two (<code>Nat.prime_iff.mp (fact_iff.mp h)</code> and <code>fact_iff.mpr h.nat_prime</code>) seemed to match the goal state \"exactly\" (modulo <code>.mp</code>/<code>.mpr</code>), I naively assumed they would appear in <code>exact?</code> or a similar tactic. What caused them not to appear there?</p>",
        "id": 505403016,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1741867827
    },
    {
        "content": "<p>Since you need two lemmas, and <code>exact?</code> only explored one lemma deep maybe?</p>",
        "id": 505403246,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1741867886
    },
    {
        "content": "<p>I think there are two orthogonal questions here: <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.Prime#doc\">docs#Nat.Prime</a> vs <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Prime#doc\">docs#Prime</a>, and when to use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fact#doc\">docs#Fact</a></p>",
        "id": 505404991,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1741868330
    },
    {
        "content": "<p>You're right Eric!</p>\n<p>I (now) understand how to choose between <code>Nat.Prime p</code> and <code>Prime p</code> (since those are two different claims that happen to coincide in the case for the natural numbers, but not necessarily so in general).</p>\n<p>However, I've yet to fully understand how I should choose between <code>p.Prime</code> and <code>Fact p.Prime</code> (or between <code>Prime p</code> and <code>Fact (Prime p)</code>) in a theorem statement.</p>",
        "id": 505409014,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1741869376
    },
    {
        "content": "<p>The point is that <code>Nat.Prime</code> is not a class, so one can't write <code>[p.Prime]</code>. The documentation for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fact#doc\">docs#Fact</a> should explain the point (with exactly this example).</p>",
        "id": 505414622,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1741870804
    }
]