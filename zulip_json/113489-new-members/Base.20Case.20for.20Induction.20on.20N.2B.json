[
    {
        "content": "<p>Hi! I want to do induction on the positive natural numbers, but couldn't out the right syntax for the base case. I also couldn't manage to find it through searching Zulip and PNat's library. Thanks!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sum_first_n_odd_integers</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">+</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">??</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 492802398,
        "sender_full_name": "Alex Gu",
        "timestamp": 1736451207
    },
    {
        "content": "<p>Not at the computer at the moment, but if you write <code>induction n</code> is there a yellow bulb in VS Code? If it's there click on \"generate skeleton...\" and it should do it for you.</p>",
        "id": 492803036,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1736451410
    },
    {
        "content": "<p>I didn't see it, maybe I didn't install some extension?</p>\n<p><a href=\"/user_uploads/3121/1wBW-VA8Vatba84uKzPr4VdO/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/1wBW-VA8Vatba84uKzPr4VdO/image.png\" title=\"image.png\"><img data-original-dimensions=\"2680x924\" src=\"/user_uploads/thumbnail/3121/1wBW-VA8Vatba84uKzPr4VdO/image.png/840x560.webp\"></a></div>",
        "id": 492803307,
        "sender_full_name": "Alex Gu",
        "timestamp": 1736451498
    },
    {
        "content": "<p>an issue you'll run into here is that <code>PNat</code> is not an inductive type...</p>",
        "id": 492803340,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736451513
    },
    {
        "content": "<p>rather, it's the subtype with <code>0 &lt; n</code></p>",
        "id": 492803380,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736451532
    },
    {
        "content": "<p>Yes technically it is an inductive type but not in the same way as <code>Nat</code></p>",
        "id": 492803463,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1736451564
    },
    {
        "content": "<p>You might try <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/PNat/Defs.html#PNat.strongInductionOn\"><code>PNat.strongInductionOn</code></a></p>",
        "id": 492803521,
        "sender_full_name": "David Renshaw",
        "timestamp": 1736451586
    },
    {
        "content": "<p><code>induction n using PNat.strongInductionOn</code> ...</p>",
        "id": 492803655,
        "sender_full_name": "David Renshaw",
        "timestamp": 1736451617
    },
    {
        "content": "<p>ah, i just found <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/PNat/Basic.html#PNat.recOn\">PNat.recOn</a></p>",
        "id": 492803707,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736451638
    },
    {
        "content": "<p>what would be my base case for strong induction on PNat? how could I find that information?</p>",
        "id": 492803805,
        "sender_full_name": "Alex Gu",
        "timestamp": 1736451676
    },
    {
        "content": "<p>i suspect that in this case you are better helped with the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sum_first_n_odd_integers</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">+</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">PNat</span><span class=\"bp\">.</span><span class=\"n\">recOn</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">hi</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 492804129,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736451783
    },
    {
        "content": "<p>a friendly reminder that sometimes inductive principles are not called <code>induction</code> or similar because it can <em>construct data</em>. Instead those are named <code>rec</code> or similar.</p>",
        "id": 492804677,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736451958
    },
    {
        "content": "<p>see also <a href=\"https://leanprover-community.github.io/contribute/naming.html\">#naming</a></p>",
        "id": 492804787,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736451989
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> PNat, \"rec\"</p>",
        "id": 492804943,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1736452050
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/PNat/Basic.html#PNat.recOn\">PNat.recOn</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/PNat/Basic.html#PNat.recOn_one\">PNat.recOn_one</a>, and <a href=\"https://loogle.lean-lang.org/?q=PNat%2C%20%22rec%22\">3 more</a></p>",
        "id": 492804945,
        "sender_full_name": "loogle",
        "timestamp": 1736452050
    },
    {
        "content": "<p>Indeed I forgot about rec!</p>",
        "id": 492804994,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1736452064
    },
    {
        "content": "<p>Out of curiosity, does the yellow bulb work after <code>induction n with...</code>?</p>",
        "id": 492807230,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1736452884
    },
    {
        "content": "<p>If someone were to add <code>@[induction_eliminator]</code> to <code>PNat.recOn</code> then it would automatically be used by the <code>induction</code> tactic. (It would be nice to adjust the names of the parameters too, perhaps <code>one</code> and <code>succ</code>?)</p>",
        "id": 492807806,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736453067
    },
    {
        "content": "<p>thx! this is very helpful and I was able to finish the proof from here. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sum_first_n_odd_integers</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">+</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">PNat</span><span class=\"bp\">.</span><span class=\"n\">recOn</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">p1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">hi</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">+</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↑</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h1</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_range_succ</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hi</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">ring</span>\n</code></pre></div>\n<p>could you help me understand why for PNat, it has to be done in this way, while for natural numbers it's normally done with the constructor like <code>zero</code> and <code>succ n ih</code>?</p>",
        "id": 492808306,
        "sender_full_name": "Alex Gu",
        "timestamp": 1736453223
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"130384\">@Riccardo Brasca</span> honestly i've never seen the yellow bulb, not sure how to get it</p>",
        "id": 492808381,
        "sender_full_name": "Alex Gu",
        "timestamp": 1736453248
    },
    {
        "content": "<p><code>induction</code> looks at the names of the parameters of the induction principle. They happen to be the names of constructors when the induction principle is generated from the inductive type.</p>",
        "id": 492808447,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736453274
    },
    {
        "content": "<p>You can try it with natural numbers, it should work out of the box</p>",
        "id": 492808576,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1736453315
    },
    {
        "content": "<p>Here's where <code>zero</code> and <code>succ</code> come from:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">recOn</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">Nat.recOn.{u} {motive : ℕ → Sort u} (t : ℕ)</span>\n<span class=\"cm\">  (zero : motive Nat.zero) (succ : (n : ℕ) → motive n → motive n.succ) :</span>\n<span class=\"cm\">  motive t</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>\n<p>(Though more precisely, we use <code>Nat.recAuxOn</code> so that the result is in terms of <code>0</code> and <code>n + 1</code> instead of <code>Nat.zero</code> and <code>Nat.succ n</code>.)</p>",
        "id": 492808883,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736453405
    },
    {
        "content": "<p><code>PNat.recOn</code> uses <code>p1</code> and <code>hp</code> for its parameter names, hence my suggestion that we rename them to something better.</p>",
        "id": 492809015,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736453457
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/113489-new-members/topic/Base.20Case.20for.20Induction.20on.20N.2B/near/492807230\">said</a>:</p>\n<blockquote>\n<p>Out of curiosity, does the yellow bulb work after <code>induction n with...</code>?</p>\n</blockquote>\n<p>In the web editor it gives</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">PNat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">True</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">val</span><span class=\"w\"> </span><span class=\"n\">property</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>so no</p>",
        "id": 492809185,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1736453507
    },
    {
        "content": "<p>Technically that's working. It's using the \"induction principle\" that comes from the definition of <code>PNat</code>.</p>",
        "id": 492809761,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736453693
    },
    {
        "content": "<p><code>val</code> is the natural number, and <code>property</code> is that it's positive.</p>",
        "id": 492809805,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736453705
    },
    {
        "content": "<p>If you add in the <code>using PNat.recOn</code> clause to <code>induction</code> you can switch it to the more sensible induction principle</p>",
        "id": 492809902,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736453739
    },
    {
        "content": "<p>I mean if you write explicitly the induction principle you want to use</p>",
        "id": 492810201,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1736453823
    },
    {
        "content": "<p>Ah sorry I misunderstood</p>",
        "id": 492810320,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1736453865
    },
    {
        "content": "<p>so yes it works</p>",
        "id": 492810410,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1736453887
    },
    {
        "content": "<p>so if i wanted to use natural numbers, but want to start at, say, 3 rather than 0, what would be the way to do that? (e.g. if n&gt;=3 is one of my hypothesis)</p>",
        "id": 492810521,
        "sender_full_name": "Alex Gu",
        "timestamp": 1736453934
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Nat/Defs.html#Nat.le_induction\">Nat.le_induction</a></p>",
        "id": 492810669,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736453990
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Nat/Defs.html#Nat.leRec\">Nat.leRec</a></p>",
        "id": 492810773,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1736454012
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113489-new-members/topic/Base.20Case.20for.20Induction.20on.20N.2B/near/492807806\">said</a>:</p>\n<blockquote>\n<p>If someone were to add <code>@[induction_eliminator]</code> to <code>PNat.recOn</code> then it would automatically be used by the <code>induction</code> tactic. (It would be nice to adjust the names of the parameters too, perhaps <code>one</code> and <code>succ</code>?)</p>\n</blockquote>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/pull/20617\">#20617</a></p>",
        "id": 492810803,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1736454022
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113489-new-members/topic/Base.20Case.20for.20Induction.20on.20N.2B/near/492809761\">said</a>:</p>\n<blockquote>\n<p>Technically that's working. It's using the \"induction principle\" that comes from the definition of <code>PNat</code>.</p>\n</blockquote>\n<p>Just to ask explicitly -- it's not easily feasible to make separate code actions for all induction principles in the environment whose type somehow matches the term being passed to <code>induction</code> is it?</p>",
        "id": 492816315,
        "sender_full_name": "Julian Berman",
        "timestamp": 1736456032
    },
    {
        "content": "<p>Oh, you mean like \"populate code actions with a list of all relevant induction principles?\"</p>",
        "id": 492817460,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736456443
    },
    {
        "content": "<p>Worst case maybe there could be an attribute to tag them, like <code>induction_eliminator</code>?</p>",
        "id": 492817549,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1736456475
    },
    {
        "content": "<p>Exactly yeah.</p>",
        "id": 492820801,
        "sender_full_name": "Julian Berman",
        "timestamp": 1736457706
    }
]