[
    {
        "content": "<p>Given a function, say <code>Real.rpow_le_rpow</code> which I want to apply, definition as below  </p>\n<p>theorem <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/SpecialFunctions/Pow/Real.html#Real.rpow_le_rpow\">Real.rpow_le_rpow</a>{x y z : <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Real/Basic.html#Real\">ℝ</a>} (h : 0 <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#LE.le\">≤</a> x) (h₁ : x <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#LE.le\">≤</a> y) (h₂ : 0 <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Prelude.html#LE.le\">≤</a> z)</p>\n<p>If I write <code>apply Real.rpow_le_rpow</code> the following argument is expected to have in the form <code>(h : 0 ≤ x)</code>, how can I do sth like apply <code>Real.rpow_le_rpow x^2 y (2:ℝ)</code> to solve the below question. There are multiple reason why I want to do that, for instance I need to specify (2:ℝ) instead of 2, otherwise it will take the power as Nat by default; or in more complex situation we need to specify what x y is in a long inequality so that the tactic is applied to the right place, etc  </p>\n<p>In other words, how do I explicitly write the argument <code>x^2 y (2:ℝ)</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Thank you!</p>",
        "id": 484168718,
        "sender_full_name": "RedPig",
        "timestamp": 1732471154
    },
    {
        "content": "<p>You can do <code>apply Real.rpow_le_rpow (x := x^2) (y := y) (z := 2)</code> But (a) you shouldn't need to do that, because the point of <code>{x}</code> is \"Lean will be able to guess what <code>x</code> is once you have things straight\" and (b) (the actual cause of the issue) the lemma will not apply to <code>x^4&lt;=y^2</code> because 4 isn't 2, and probably neither of them are real numbers either. Are you sure you want to be using an <code>rpow</code> lemma? In Lean x^(natural number 4) and x^(real number 4) are different functions; <code>rpow</code> denotes \"raising to a real power\", and <code>pow</code> denotes \"raising to a natural power\".</p>",
        "id": 484169769,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732472076
    },
    {
        "content": "<p>Thank you so much for the response! <span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> </p>\n<blockquote>\n<p>(a) you shouldn't need to do that, because the point of <code>{x}</code> is \"Lean will be able to guess what <code>x</code> is once you have things straight\". </p>\n</blockquote>\n<p>This usually works in simple set up, but as long as things get complicated, I want to have more control via explicit form </p>\n<blockquote>\n<p>(b) (the actual cause of the issue) the lemma will not apply to <code>x^4&lt;=y^2</code> because 4 isn't 2, and probably neither of them are real numbers either. Are you sure you want to be using an <code>rpow</code> lemma? In Lean x^(natural number 4) and x^(real number 4) are different functions; <code>rpow</code> denotes \"raising to a real power\", and <code>pow</code> denotes \"raising to a natural power\".</p>\n</blockquote>\n<p>Actually you raise a very important point here, I am aware of the Nat vs Real power issue. In some cases, if we write it in Nat power, then it won't be able to do fractional powers, in cases like <code>(x^2)^(1/4)</code>, is there a way that I can define a meta type on the powers in my proof instead of specifying <code>(2: ℝ)</code> at each location. Or is there easy way to navigate between Nat and Real? That will be really helpful, thanks!</p>",
        "id": 484170393,
        "sender_full_name": "RedPig",
        "timestamp": 1732472746
    },
    {
        "content": "<p>Another way to ask the question is how to inherent the properties from Nat to Real, I guess this will be important for Galois theory type result. (though Nat is not even a ring)</p>",
        "id": 484170849,
        "sender_full_name": "RedPig",
        "timestamp": 1732473167
    },
    {
        "content": "<p>Here's an example of how I might think about some question which is mathematically trivial but where Lean will make my life harder because of switching between different power types:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c1\">-- I need some hints to do the below, so here's how to get them</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">exact?</span>\n<span class=\"c1\">-- Real.rpow_natCast x n</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">rpow_mul</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- github copilot found this but `exact?` would have worked too</span>\n\n<span class=\"c1\">-- example question</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">norm_cast</span><span class=\"w\"> </span><span class=\"c1\">-- changes 2 : ℤ to 2 : ℕ</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">rpow_natCast</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">rpow_natCast</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"c1\">-- now everything is real</span>\n<span class=\"w\">  </span><span class=\"c1\">-- I now have x^real^real</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">rpow_mul</span><span class=\"w\"> </span><span class=\"n\">hx</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"c1\">-- multiplies real numbers</span>\n</code></pre></div>",
        "id": 484171316,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732473594
    },
    {
        "content": "<p>Thank you so much, this is super helpful!</p>",
        "id": 484171912,
        "sender_full_name": "RedPig",
        "timestamp": 1732474195
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"742049\">RedPig</span> has marked this topic as resolved.</p>",
        "id": 484182566,
        "sender_full_name": "Notification Bot",
        "timestamp": 1732484859
    }
]