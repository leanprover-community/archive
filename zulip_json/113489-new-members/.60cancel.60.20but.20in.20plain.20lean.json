[
    {
        "content": "<p>I'd like to ask how to do in vanilla Lean what the <code>cancel</code> tactic from Mechanics of Proof course does.</p>\n<p>If I have <code>q1 : 3 * q &gt; 3 * 2</code> then a <code>cancel 3 at q1</code> turns it into <code>q1 : 2 &lt; q</code>.</p>\n<p>It works with addition, multiplication, exponentiation and inequalities too.</p>\n<p>I don't think <code>linarith</code> does this.</p>",
        "id": 480749855,
        "sender_full_name": "rzeta0",
        "timestamp": 1730821327
    },
    {
        "content": "<hr>\n<p>(yes I did look at the definition of <code>cancel</code> in the code but it used advanced-level code which I don't understand)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">macro_rules</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">cancel</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">h</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">cancel_aux</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">h</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">h</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 480750081,
        "sender_full_name": "rzeta0",
        "timestamp": 1730821403
    },
    {
        "content": "<p>I think you'd usually find lemmas for that, e.g. <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=mul_lt_mul_left#doc\">docs#mul_lt_mul_left</a></p>",
        "id": 480750797,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1730821592
    },
    {
        "content": "<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=mul_lt_mul_iff_of_pos_left#doc\">docs#mul_lt_mul_iff_of_pos_left</a> with something like <code>norm_num</code> to discharge the goal <code>0 &lt; 3</code>.</p>",
        "id": 480750818,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1730821600
    },
    {
        "content": "<p>so <code>rw [mul_lt_mul_iff_of_pos_left (by norm_num)] at q1</code> I think should work.</p>",
        "id": 480750999,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1730821661
    }
]