[
    {
        "content": "<p>I tried using this notation</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">N</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\">  </span><span class=\"bp\">\\</span><span class=\"n\">R</span><span class=\"bp\">\\^</span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>and I got some error. I'm not sure if the error was because of a different mistake or because this is not an excepted notation. If it is not an excepted notation, then what is the excepted notation? should I maybe write instead:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">N</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">R</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>?</p>",
        "id": 558788600,
        "sender_full_name": "Michael Novak",
        "timestamp": 1763791362
    },
    {
        "content": "<p>Are you looking for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=EuclideanSpace#doc\">docs#EuclideanSpace</a> ?</p>",
        "id": 558792390,
        "sender_full_name": "Jihoon Hyun",
        "timestamp": 1763795123
    },
    {
        "content": "<p>Technically I do use it as a euclidean space, but is it necessary to write <code>EuclideanSpace R (Fin n)</code>? Couldn't I use class inference when I need to use the fact that it is also an instance of a euclidean space?</p>",
        "id": 558792786,
        "sender_full_name": "Michael Novak",
        "timestamp": 1763795525
    },
    {
        "content": "<p>The answer to this question is surprisingly complicated: depending on what you really want to do, you might want to phrase things for an abstract normed or inner product space). So the real question is what do you want to do?</p>",
        "id": 558792810,
        "sender_full_name": "Moritz Doll",
        "timestamp": 1763795549
    },
    {
        "content": "<p>I want to make variable of a parametrized curve that I will use in the next few theorems.  I began writing this line (I still didn't add the fact that c is continuous):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\">  </span><span class=\"o\">[</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span><span class=\"o\">]</span><span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Is that a good way of doing it?</p>",
        "id": 558793057,
        "sender_full_name": "Michael Novak",
        "timestamp": 1763795803
    },
    {
        "content": "<p>Short answer, as on my phone:<br>\nYou probably want EuclideanSpace as codomain (its norm is the you want, unlike Fin n -&gt; R).<br>\nUsually, I would expect Set.ICC, Set.Ioo or similar as domain. (Mathlib knows that order-connected sets in R are precisely intervals.)</p>",
        "id": 558795781,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763798520
    },
    {
        "content": "<p>However, you should do something yet different: make the domain R and assume ContinuousOn c (Set.Icc a b) instead</p>",
        "id": 558795854,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763798593
    },
    {
        "content": "<p>Basically, assign an arbitrary value to your curve outside the interval (the keyword to search for is \"junk value pattern\", we do this a lot in formalisation).</p>",
        "id": 558795922,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763798679
    },
    {
        "content": "<p>Having the domain a normed space will make speaking about differentiability <strong>a lot</strong> easier to work with!</p>",
        "id": 558795969,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763798736
    },
    {
        "content": "<p>Why should I restrict the \"real values\" of c to be only on a closed interval? In the book I'm using, parametrized curves are defined on any interval</p>",
        "id": 558796093,
        "sender_full_name": "Michael Novak",
        "timestamp": 1763798883
    },
    {
        "content": "<p><del>I'm talking about <em>extending</em> the <em>domain</em> of definition (not restricting).</del>Sorry, misread: you can also use Set.Ioo, etc; that's fine.</p>",
        "id": 558796684,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763799463
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 558796697,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763799479
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 558796725,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763799510
    },
    {
        "content": "<p>So is this a good way to do it?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\"> </span><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)){</span><span class=\"n\">ContinuousOn</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 558796906,
        "sender_full_name": "Michael Novak",
        "timestamp": 1763799672
    },
    {
        "content": "<p>You need to name your ContinuousOn hypothesis</p>",
        "id": 558800608,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763803403
    },
    {
        "content": "<p>Your are right, thank you! Now that I think about it, is it a good way have so much assumptions?  Because I would also want to add that c is of class C^r for r &gt;=2, so it's getting a bit long. Maybe I should define a structure / class of a parametrized curve?</p>",
        "id": 558803138,
        "sender_full_name": "Michael Novak",
        "timestamp": 1763805586
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=ContDiffOn#doc\">docs#ContDiffOn</a></p>",
        "id": 558804593,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763807211
    },
    {
        "content": "<p>O.k, I think you are right there's probably no need to define a new structure. Thank you very much! So, I changed the line to this now:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}[</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span><span class=\"o\">]{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)){</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">WithTop</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"o\">}{</span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContDiffOn</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">}</span>\n</code></pre></div>",
        "id": 558805135,
        "sender_full_name": "Michael Novak",
        "timestamp": 1763807857
    },
    {
        "content": "<p>Purely in terms of style, I'd write this as follows:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">I</span><span class=\"bp\">.</span><span class=\"n\">OrdConnected</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"bp\">*</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">WithTop</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"bp\">∞</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ContDiffOn</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Instead of using <code>Fin n</code>, you can equally well use any finite type (and this should not make your formalisation much harder). Mathlib would do this anyway. I've also broken your long line, and changed the variable explicitness. You probably want <code>c</code> to be implicit and <code>hc</code> to be explicit, not the other way around: in applications, you may need to prove differentiability (and <code>c</code> can be inferred from such a hypothesis).</p>",
        "id": 558824287,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763826997
    },
    {
        "content": "<p>Using any <code>OrdConnected</code> set as domain still feels unusual to me: indeed, this is quite rare in mathlib. You will many more lemmas formulated for e.g. Set.Ioo or Set.Icc (or both). (This includes the existence and uniqueness of ODE solutions, for example --- if I remember correctly, those feature in the proof of Frenet's formulas.)</p>\n<p>I understand your wish to be fully general, but I'm not sure if this is premature optimisation. Do you really use curves defined on e.g. intervals [1, 2) for what you'll be working on? (For e.g. Frénet's formula, I believe you mostly don't.)</p>",
        "id": 558824839,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763827438
    },
    {
        "content": "<p>I'm not sure if there's a good solution yet to avoid duplicating one theorem 9 times (once for each kind of interval). For now, just proving the version(s) you actually need can get you a long way. Proving it once and adding a comment that further versions would be easy to add sounds totally fine to me.</p>",
        "id": 558824890,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763827478
    },
    {
        "content": "<p>Thank you very much for the corrected line and for the other comments! Actually there isn't any use of differential equations in the proof of Frenet equations, at least not for plane curves, which I start with and I don't really understand why do you think it could be problematic to work with a general interval, for example in Frenet equations we are just talking about very simple equations involving the first and second derivative of the parametrized curve, the curvature and the derivative of the normal vector field - all of which are functions defined in each point of the interval and it doesn't really matter what sort of interval it is. Am I'm missing something? Could we be talking about different formulations? I'm following the book \"Elementary Differential Geometry\" by Christian Bar, I could send you a pdf if you want to see.</p>",
        "id": 558826998,
        "sender_full_name": "Michael Novak",
        "timestamp": 1763829356
    },
    {
        "content": "<p>I was thinking of theorems of the kind \"there is a unique parametrised curve in R³ with prescribed initial point, velocity, curvature and torsion\" --- which use Frenet's equations and the uniqueness of solutions of ODEs. Sure, mathematically all of this should work over any interval. I'm talking about <em>how are things set up in mathlib</em>.</p>",
        "id": 558828482,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763830788
    },
    {
        "content": "<p>That said, I don't mind seeing a .pdf of Bär's book to double-check; the last time I saw this particular material has been a while ago.</p>",
        "id": 558828552,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1763830832
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20use.20R.5En.20.3F/near/558828482\">said</a>:</p>\n<blockquote>\n<p>I was thinking of theorems of the kind \"there is a unique parametrised curve in R³ with prescribed initial point, velocity, curvature and torsion\" --- which use Frenet's equations and the uniqueness of solutions of ODEs. Sure, mathematically all of this should work over any interval. I'm talking about <em>how are things set up in mathlib</em>.</p>\n</blockquote>\n<p>Oh, we saw this theorem for plane curves, I think it's called the fundamental theorem of plane curves, although this specific theorem wasn't on Bär's book, it was on a different book which only deals with plane curves, and they didn't justified the uniqueness by a theorems about differential equations, but they basically presented the argument for uniqueness you would see in a course on differential equations. I would probably also want to prove this theorem as well later.</p>",
        "id": 558830309,
        "sender_full_name": "Michael Novak",
        "timestamp": 1763832489
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20use.20R.5En.20.3F/near/558828552\">said</a>:</p>\n<blockquote>\n<p>That said, I don't mind seeing a .pdf of Bär's book to double-check; the last time I saw this particular material has been a while ago.</p>\n</blockquote>\n<p>This is Bär's book: <br>\n<a href=\"/user_uploads/3121/MFXDiNG0QkSX1lgNsSwfTEaG/elementary-differential-geometry-chrisitian-bar.pdf\">elementary-differential-geometry-chrisitian-bar.pdf</a><br>\nand this is the other book only on plane curves:<br>\n<a href=\"/user_uploads/3121/R0XdOyCeqrplLgbmX3Emhj35/differential-geometry-of-plane-curves.pdf\">differential-geometry-of-plane-curves.pdf</a></p>",
        "id": 558830450,
        "sender_full_name": "Michael Novak",
        "timestamp": 1763832579
    }
]