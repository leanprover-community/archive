[
    {
        "content": "<p>Hi there! How can I prove \"every monomorphism of Grps is the equalizer of two homomorphisms\" in Lean? <a href=\"https://mathoverflow.net/questions/41208/are-all-group-monomorphisms-regular-constructively/\">This post</a> introduced multiple solutions to the problem. </p>\n<p>I've tried to follow the \"distinguished element + permutation group\" proof (illustrated in the \"added\" part of the problem description), but don't know how to implement the idea of this \"distinguished element\".</p>\n<p>Also, I looked into the solution via free products with amalgamation in Paul Taylor's answer, but I find the idea of \"length\" hard to formalize?</p>",
        "id": 506298064,
        "sender_full_name": "Noah Anderson",
        "timestamp": 1742260848
    },
    {
        "content": "<p>I feel like the \"distinguished element\" approach may be talking about something like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=WithZero#doc\">docs#WithZero</a> ?</p>",
        "id": 506352403,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1742276395
    },
    {
        "content": "<p>forgive me, I am not familiar with <code>WithZero</code><br>\n<a href=\"/user_uploads/3121/l1FDVN01H9dE6I8txTm32hLM/1.png\">1.png</a><br>\nLike, here I need a group action acting differently on elements of cosets and the zero, how to define such thing?</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/l1FDVN01H9dE6I8txTm32hLM/1.png\" title=\"1.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"2021x1071\" src=\"/user_uploads/thumbnail/3121/l1FDVN01H9dE6I8txTm32hLM/1.png/840x560.webp\"></a></div>",
        "id": 506653794,
        "sender_full_name": "Noah Anderson",
        "timestamp": 1742369830
    },
    {
        "content": "<p>This may not be the right way to do it for your problem, but here is a basic example of adding a new element to something and then defining a map on it.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">}</span>\n<span class=\"c1\">-- The left cosets of K</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">K</span>\n<span class=\"c1\">-- A new type where every element is either a left coset of K or a new element `()`</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"bp\">⧸</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"bp\">⊕</span><span class=\"w\"> </span><span class=\"n\">Unit</span>\n<span class=\"c1\">-- the new element of `X`</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span>\n<span class=\"c1\">-- the old elements:</span>\n<span class=\"c1\">-- maps each element of `H` to its coset as an element of `X`</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"bp\">⟦</span><span class=\"n\">h</span><span class=\"bp\">⟧</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"c1\">-- This swaps the coset of `1` with the new element and fixes everything else</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">H</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">H</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">K</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">K</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⟦</span><span class=\"mi\">1</span><span class=\"bp\">⟧</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"o\">()</span>\n<span class=\"w\">    </span><span class=\"k\">else</span>\n<span class=\"w\">      </span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">inr</span><span class=\"w\"> </span><span class=\"o\">()</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"w\"> </span><span class=\"bp\">⟦</span><span class=\"mi\">1</span><span class=\"bp\">⟧</span>\n</code></pre></div>",
        "id": 506669641,
        "sender_full_name": "Eric Paul",
        "timestamp": 1742374620
    },
    {
        "content": "<p>Ah yes! It works, thanks</p>",
        "id": 506902202,
        "sender_full_name": "Noah Anderson",
        "timestamp": 1742457862
    }
]