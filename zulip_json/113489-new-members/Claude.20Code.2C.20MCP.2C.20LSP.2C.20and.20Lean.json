[
    {
        "content": "<p>I'm an AI noob but I've started playing with Claude Code and enjoying it.</p>\n<p>I was wondering if there's a way to hook up Claude Code to Lean somehow. I want it to be able to access the InfoView <em>during</em> the proof and also to be able to get the build output without running <code>lake build</code> on that file every time.</p>\n<p>Maybe there's an MCP/LSP setup that works with Lean?</p>",
        "id": 527186146,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751637371
    },
    {
        "content": "<p>Currently testing <a href=\"https://github.com/oOo0oOo/lean-lsp-mcp\">https://github.com/oOo0oOo/lean-lsp-mcp</a>, it seems to work</p>",
        "id": 527189369,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751638482
    },
    {
        "content": "<p>There's also <a href=\"https://github.com/GasStationManager/LeanTool\">this thing</a> but the readme sort of expects you to know what all of the tools it interfaces with do (which I do not).</p>",
        "id": 527190189,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1751638817
    },
    {
        "content": "<p>So far it seems to work decently if I:</p>\n<ul>\n<li>use the Opus model</li>\n<li>explicitly remind it to read <code>CLAUDE.md</code></li>\n<li>and have this in <code>CLAUDE.md</code>:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"w\"> </span><span class=\"n\">CLAUDE</span><span class=\"bp\">.</span><span class=\"n\">md</span>\n\n<span class=\"n\">This</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">provides</span><span class=\"w\"> </span><span class=\"n\">guidance</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">Claude</span><span class=\"w\"> </span><span class=\"n\">Code</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">claude</span><span class=\"bp\">.</span><span class=\"n\">ai</span><span class=\"bp\">/</span><span class=\"n\">code</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">working</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">##</span><span class=\"w\"> </span><span class=\"n\">CRITICAL</span>\n\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Read</span><span class=\"w\"> </span><span class=\"s2\">\"How to Solve Problems\"</span><span class=\"w\"> </span><span class=\"n\">below</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">religiously</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">you'll</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">fired</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sorry</span><span class=\"bp\">.</span><span class=\"o\">)</span>\n\n<span class=\"bp\">##</span><span class=\"w\"> </span><span class=\"n\">How</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">Solve</span><span class=\"w\"> </span><span class=\"n\">Problems</span>\n\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Say</span><span class=\"w\"> </span><span class=\"s2\">\"woof\"</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">acknowledge</span><span class=\"w\"> </span><span class=\"n\">you've</span><span class=\"w\"> </span><span class=\"n\">read</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">before</span><span class=\"w\"> </span><span class=\"n\">every</span><span class=\"w\"> </span><span class=\"n\">edit</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Plan</span><span class=\"w\"> </span><span class=\"n\">every</span><span class=\"w\"> </span><span class=\"n\">change!</span><span class=\"w\">  </span><span class=\"n\">This</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">mathematics</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">You</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"n\">need</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">plan</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Don't</span><span class=\"w\"> </span><span class=\"n\">just</span><span class=\"w\"> </span><span class=\"n\">rush</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">edits</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Make</span><span class=\"w\"> </span><span class=\"n\">every</span><span class=\"w\"> </span><span class=\"n\">edit</span><span class=\"w\"> </span><span class=\"n\">meaningful</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Always</span><span class=\"w\"> </span><span class=\"n\">restate</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">problem</span><span class=\"w\"> </span><span class=\"n\">before</span><span class=\"w\"> </span><span class=\"n\">any</span><span class=\"w\"> </span><span class=\"n\">change</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">If</span><span class=\"w\"> </span><span class=\"n\">something</span><span class=\"w\"> </span><span class=\"n\">didn't</span><span class=\"w\"> </span><span class=\"n\">work</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">summarize</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"n\">why</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">didn't</span><span class=\"w\"> </span><span class=\"n\">work</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"w\"> </span><span class=\"n\">first</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Keep</span><span class=\"w\"> </span><span class=\"n\">track</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">whether</span><span class=\"w\"> </span><span class=\"n\">your</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"n\">high</span><span class=\"bp\">-</span><span class=\"n\">level</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">approach</span><span class=\"w\"> </span><span class=\"n\">makes</span><span class=\"w\"> </span><span class=\"n\">sense</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">When</span><span class=\"w\"> </span><span class=\"s2\">\"fixing\"</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">always</span><span class=\"w\"> </span><span class=\"n\">determine</span><span class=\"w\"> </span><span class=\"n\">whether</span><span class=\"w\"> </span><span class=\"n\">you're</span><span class=\"w\"> </span><span class=\"n\">sticking</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">high</span><span class=\"bp\">-</span><span class=\"n\">level</span><span class=\"w\"> </span><span class=\"n\">approach</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">there</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">flaw</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">If</span><span class=\"w\"> </span><span class=\"n\">there</span><span class=\"w\"> </span><span class=\"n\">was</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">flaw</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">write</span><span class=\"w\"> </span><span class=\"n\">down</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">flaw</span><span class=\"w\"> </span><span class=\"n\">clearly</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">how</span><span class=\"w\"> </span><span class=\"n\">much</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">need</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">repair</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Use</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">LSP</span><span class=\"w\"> </span><span class=\"n\">tools</span><span class=\"w\"> </span><span class=\"n\">like</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">human</span><span class=\"w\"> </span><span class=\"n\">would</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Examine</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">goal</span><span class=\"w\"> </span><span class=\"n\">state</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">different</span><span class=\"w\"> </span><span class=\"n\">lines</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">what</span><span class=\"w\"> </span><span class=\"n\">theorems</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">avaiable</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hover</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">things</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">learn</span><span class=\"w\"> </span><span class=\"n\">their</span><span class=\"w\"> </span><span class=\"n\">types</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Use</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">planning</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"n\">step</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">keep</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">file</span><span class=\"w\"> </span><span class=\"n\">green</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">It's</span><span class=\"w\"> </span><span class=\"n\">better</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">add</span><span class=\"w\"> </span><span class=\"ss\">`sorry`s</span><span class=\"w\"> </span><span class=\"n\">than</span><span class=\"w\"> </span><span class=\"n\">bad</span><span class=\"w\"> </span><span class=\"n\">solutions</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">If</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">bunch</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">diagnostic</span><span class=\"w\"> </span><span class=\"n\">failures</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">make</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">smaller</span><span class=\"w\"> </span><span class=\"n\">change</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">fix</span><span class=\"w\"> </span><span class=\"ss\">`sorry`s</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">It's</span><span class=\"w\"> </span><span class=\"n\">okay</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"n\">diagnostic</span><span class=\"w\"> </span><span class=\"n\">errors</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Just</span><span class=\"w\"> </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">through</span><span class=\"w\"> </span><span class=\"n\">them</span><span class=\"w\"> </span><span class=\"n\">methodically</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">determine</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">each</span><span class=\"w\"> </span><span class=\"n\">whether</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">signals</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">flaw</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">big</span><span class=\"w\"> </span><span class=\"n\">strategy</span><span class=\"w\"> </span><span class=\"n\">or</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">small</span><span class=\"w\"> </span><span class=\"n\">mistake</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Use</span><span class=\"w\"> </span><span class=\"n\">that</span><span class=\"w\"> </span><span class=\"n\">when</span><span class=\"w\"> </span><span class=\"n\">planning</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">next</span><span class=\"w\"> </span><span class=\"n\">change</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Try</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"ss\">`rw</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">things</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"ss\">`apply</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">things</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"ss\">`simp</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">things</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">what</span><span class=\"w\"> </span><span class=\"n\">completions</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">available</span><span class=\"w\"> </span><span class=\"n\">inside</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">which</span><span class=\"w\"> </span><span class=\"n\">ones</span><span class=\"w\"> </span><span class=\"n\">fix</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">diagnostics</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Remind</span><span class=\"w\"> </span><span class=\"n\">yourself</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">be</span><span class=\"w\"> </span><span class=\"n\">methodical</span><span class=\"w\"> </span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">time</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">##</span><span class=\"w\"> </span><span class=\"n\">Before</span><span class=\"w\"> </span><span class=\"n\">Completing</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">Task</span>\n\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">You</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"ss\">`lake</span><span class=\"w\"> </span><span class=\"n\">build</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">specific</span><span class=\"w\"> </span><span class=\"n\">filename</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">final</span><span class=\"w\"> </span><span class=\"n\">errors</span><span class=\"bp\">.</span>\n<span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Remove</span><span class=\"w\"> </span><span class=\"n\">excessive</span><span class=\"w\"> </span><span class=\"n\">comments</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">simplify</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">proof</span><span class=\"w\"> </span><span class=\"n\">once</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">know</span><span class=\"w\"> </span><span class=\"n\">its</span><span class=\"w\"> </span><span class=\"n\">shape</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">##</span><span class=\"w\"> </span><span class=\"n\">Essential</span><span class=\"w\"> </span><span class=\"n\">LSP</span><span class=\"w\"> </span><span class=\"n\">Tools</span>\n\n<span class=\"bp\">###</span><span class=\"w\"> </span><span class=\"n\">lean_goal</span>\n<span class=\"bp\">**</span><span class=\"n\">MOST</span><span class=\"w\"> </span><span class=\"n\">IMPORTANT</span><span class=\"w\"> </span><span class=\"n\">TOOL</span><span class=\"bp\">**</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Always</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">before</span><span class=\"w\"> </span><span class=\"n\">making</span><span class=\"w\"> </span><span class=\"n\">any</span><span class=\"w\"> </span><span class=\"n\">edit</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">understand</span><span class=\"w\"> </span><span class=\"n\">what</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">need</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">prove</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">###</span><span class=\"w\"> </span><span class=\"n\">lean_diagnostic_messages</span>\n<span class=\"n\">Check</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">errors</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">warnings</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">infos</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Read</span><span class=\"w\"> </span><span class=\"n\">these</span><span class=\"w\"> </span><span class=\"n\">BEFORE</span><span class=\"w\"> </span><span class=\"n\">continuing</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">###</span><span class=\"w\"> </span><span class=\"n\">lean_completions</span>\n<span class=\"n\">Find</span><span class=\"w\"> </span><span class=\"n\">available</span><span class=\"w\"> </span><span class=\"n\">constants</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tactics</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">lemmas</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Essential</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">discovering</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"n\">method</span><span class=\"w\"> </span><span class=\"n\">names</span><span class=\"bp\">.</span>\n\n<span class=\"bp\">###</span><span class=\"w\"> </span><span class=\"n\">lean_hover_info</span>\n<span class=\"n\">Get</span><span class=\"w\"> </span><span class=\"n\">documentation</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">symbols</span><span class=\"bp\">.</span>\n</code></pre></div>",
        "id": 527202578,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751644097
    },
    {
        "content": "<p>One problematic thing is that the \"completions\" LSP is kind of returning shit results. I'm not sure if it's worse than VS Code or not. They just feel...  never relevant.</p>\n<p><a href=\"/user_uploads/3121/dseeB6zA0WNrTGtMadFZKUs7/Screenshot-2025-07-04-at-16.47.13.png\">Screenshot 2025-07-04 at 16.47.13.png</a><br>\n<a href=\"/user_uploads/3121/gTSlooiW0A2Jpia4zSo5XBVo/Screenshot-2025-07-04-at-16.47.20.png\">Screenshot 2025-07-04 at 16.47.20.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/dseeB6zA0WNrTGtMadFZKUs7/Screenshot-2025-07-04-at-16.47.13.png\" title=\"Screenshot 2025-07-04 at 16.47.13.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1600x726\" src=\"/user_uploads/thumbnail/3121/dseeB6zA0WNrTGtMadFZKUs7/Screenshot-2025-07-04-at-16.47.13.png/840x560.webp\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/3121/gTSlooiW0A2Jpia4zSo5XBVo/Screenshot-2025-07-04-at-16.47.20.png\" title=\"Screenshot 2025-07-04 at 16.47.20.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1600x1306\" src=\"/user_uploads/thumbnail/3121/gTSlooiW0A2Jpia4zSo5XBVo/Screenshot-2025-07-04-at-16.47.20.png/840x560.webp\"></a></div><p>I wonder if it's a known problem in general. I wish there were getting filtered down to \"matching\" types somehow, or if \"matching\" types were prioritized.</p>",
        "id": 527202691,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751644160
    },
    {
        "content": "<p>Yes, the completion tool is quite weak. It is directly based on the code completion via LSP. E.g. in VS Code type <code>import Mathlib.</code> and you should get the same results.</p>\n<p>In general the external search tools, like loogle, are quite a bit better:<br>\n<a href=\"https://github.com/oOo0oOo/lean-lsp-mcp#external-search-tools\">https://github.com/oOo0oOo/lean-lsp-mcp#external-search-tools</a></p>\n<p>I can also recommend using the <a href=\"https://www.leanexplore.com/docs/mcp\">LeanExplore MCP</a> for an additional set of search tools.</p>",
        "id": 527211652,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1751647612
    },
    {
        "content": "<p>I think it's actually worse than VS Code because it doesn't seem to do sorting. VS Code sorts on the client. The options seem to be (1) add sorting to the tool, or (2) fix the server to do its own preliminary sort.</p>",
        "id": 527211784,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751647664
    },
    {
        "content": "<p>Compare:</p>\n<p><a href=\"/user_uploads/3121/htDVFE8ywtvogCmb8p9Z52ed/Screenshot-2025-07-04-at-17.25.46.png\">Screenshot 2025-07-04 at 17.25.46.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/htDVFE8ywtvogCmb8p9Z52ed/Screenshot-2025-07-04-at-17.25.46.png\" title=\"Screenshot 2025-07-04 at 17.25.46.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"3404x1434\" src=\"/user_uploads/thumbnail/3121/htDVFE8ywtvogCmb8p9Z52ed/Screenshot-2025-07-04-at-17.25.46.png/840x560.webp\"></a></div>",
        "id": 527211842,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751647684
    },
    {
        "content": "<p>The issue is that the correct completions are so far down that they're beyond the pagination boundary.</p>",
        "id": 527211891,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751647704
    },
    {
        "content": "<p>I see, do you mind adding an issue on github? I would prefer option 1. If a fix is possible on the MCP level, this seems easier for now.</p>",
        "id": 527212824,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1751648016
    },
    {
        "content": "<p>Yup will do</p>",
        "id": 527213129,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751648134
    },
    {
        "content": "<p>Filed <a href=\"https://github.com/leanprover/lean4/issues/9192\">https://github.com/leanprover/lean4/issues/9192</a> for upstream Lean LSP issue</p>",
        "id": 527213797,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751648476
    },
    {
        "content": "<p>And already filed <a href=\"https://github.com/oOo0oOo/lean-lsp-mcp/issues/5\">https://github.com/oOo0oOo/lean-lsp-mcp/issues/5</a> for downstream workaround.</p>",
        "id": 527213917,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751648545
    },
    {
        "content": "<p>Looks like it's intentional that the server doesn't do it: <a href=\"https://github.com/leanprover/lean4/issues/9192#issuecomment-3036916367\">https://github.com/leanprover/lean4/issues/9192#issuecomment-3036916367</a></p>\n<p>So it would have to be fixed in MCP.</p>",
        "id": 527215854,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1751649679
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"418569\">Dan Abramov</span> <a href=\"#narrow/channel/113489-new-members/topic/Claude.20Code.2C.20MCP.2C.20LSP.2C.20and.20Lean/near/527213917\">said</a>:</p>\n<blockquote>\n<p>And already filed <a href=\"https://github.com/oOo0oOo/lean-lsp-mcp/issues/5\">https://github.com/oOo0oOo/lean-lsp-mcp/issues/5</a> for downstream workaround.</p>\n</blockquote>\n<p>This is fixed in <a href=\"https://github.com/oOo0oOo/lean-lsp-mcp/releases/tag/v0.4.0\">release 0.4.0</a>. MCP should update automatically, the next time it is started/restarted. <br>\nThanks for the help!</p>",
        "id": 527232050,
        "sender_full_name": "Oliver Dressler",
        "timestamp": 1751663619
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 546225292,
        "sender_full_name": "Eric Taucher",
        "timestamp": 1761050489
    }
]