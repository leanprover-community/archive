[
    {
        "content": "<p>I'm currently studying the book Theorem Proving in Lean 4. After studying the chapter on typeclasses, I wanted to find some examples in Mathlib. However, the following is confusing for me. I can understand code like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">}</span>\n</code></pre></div>\n<p>But I have a little difficulty explaining what this means:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">DecidablePred</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">}</span>\n</code></pre></div>\n<p>I wonder if  \"[∀ a, DecidablePred (r a)]\" is definitionally equal to \"[DecidablePred (∀ a, r a)]\". Also, can the latter compile? Why do we stick to the first representation?</p>\n<p>I'd be very grateful to anyone who can help me!</p>",
        "id": 541903668,
        "sender_full_name": "Yuzhi LIU",
        "timestamp": 1759076583
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 541903967,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1759076879
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 541904055,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1759076992
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 541904240,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1759077129
    },
    {
        "content": "<p>Ah, <code>r</code> is a relation. Then they should both compile, but won’t be semantically equal.</p>",
        "id": 541904443,
        "sender_full_name": "Lawrence Wu (llllvvuu)",
        "timestamp": 1759077315
    },
    {
        "content": "<p><code>DecidablePred (∀ a, r a)</code> I think doesn't work, since <code>r a</code> is of type <code>β → Prop</code>.</p>",
        "id": 541904755,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759077665
    },
    {
        "content": "<p>Great, thanks to both of you <span class=\"user-mention\" data-user-id=\"607118\">@Lawrence Wu (llllvvuu)</span>  <span class=\"user-mention\" data-user-id=\"130384\">@Riccardo Brasca</span>  ! So what if I change my question to this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>Since now both<code>(r a)</code> and<code>(∀ a, r a)</code>have type <code>Prop</code>, they should both compile? Also, I didn't really get why they are not semantically equal <span aria-label=\"sob\" class=\"emoji emoji-1f62d\" role=\"img\" title=\"sob\">:sob:</span></p>",
        "id": 541909950,
        "sender_full_name": "Yuzhi LIU",
        "timestamp": 1759083493
    },
    {
        "content": "<p>I think there's a difference when alpha is infinite. If you have an algorithm that will tell you whether <code>p n</code> is true for any specific natural number, for example, an algorithm to check whether it's true for <em>all</em> natural numbers would need to check an infinite number of cases</p>",
        "id": 541910513,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1759084236
    },
    {
        "content": "<p>In the other direction, if you have an algorithm that tells you whether something is true for <em>all</em> numbers - if it says yes, you know the answer for your specific number; but it is says no, you don't know if it fails for your number or another one</p>",
        "id": 541910627,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1759084333
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span>  Thank you so much!</p>",
        "id": 541911174,
        "sender_full_name": "Yuzhi LIU",
        "timestamp": 1759084965
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"970258\">Yuzhi LIU</span> <a href=\"#narrow/channel/113489-new-members/topic/A.20small.20question.20about.20type.20class/near/541909950\">said</a>:</p>\n<blockquote>\n<p>Great, thanks to both of you <span class=\"user-mention silent\" data-user-id=\"607118\">Lawrence Wu (llllvvuu)</span>  <span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span>  ! So what if I change my question to this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>and</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>Since now both<code>(r a)</code> and<code>(∀ a, r a)</code>have type <code>Prop</code>, they should both compile? Also, I didn't really get why they are not semantically equal <span aria-label=\"sob\" class=\"emoji emoji-1f62d\" role=\"img\" title=\"sob\">:sob:</span></p>\n</blockquote>\n<p>the difference between \"I have an algorithm to test <code>r</code> on any input\" and \"I can tell you if <code>r</code> is always true or if it's sometimes false\"</p>",
        "id": 541913527,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1759087683
    },
    {
        "content": "<p>The question is maybe why do you think they're equal.</p>",
        "id": 541919139,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1759094074
    }
]