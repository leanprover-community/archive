[
    {
        "content": "<p>I was trying to formalize the solution to this puzzle: <a href=\"https://xkcd.com/blue_eyes.html\">https://xkcd.com/blue_eyes.html</a></p>\n<p>There is a solution in the same site: <a href=\"https://xkcd.com/solution.html\">https://xkcd.com/solution.html</a></p>\n<p>However as I'm trying to formalize it I figured out the solution is incomplete. Following is the explanation for the case with 2 blue-eyed people in the island:</p>\n<blockquote>\n<p>If there are two blue-eyed people, they will each look at the other. They will each realize that \"<strong>if</strong> I don't have blue eyes <strong>[HYPOTHESIS 1]</strong>, <strong>then</strong> that guy is the only blue-eyed person. And <strong>if</strong> he's the only person, by <strong>THEOREM 1</strong> he will leave tonight.\" They each wait and see, and when neither of them leave the first night, each realizes \"My <strong>HYPOTHESIS 1</strong> was incorrect. I must have blue eyes.\" And each leaves the second night.</p>\n</blockquote>\n<p>Before <em>they wait and see</em> we need to proof that they can't deduce their color on the first day, which is intuitive but not trivial given <em>they are all perfect logicians</em>. </p>\n<p>It is easy to get that assumption for granted, but I'm not sure how to formalize it.</p>\n<hr>\n<p>I started with a formalization in which I can prove facts they know, but not facts they don't know. <br>\nHere is my code: <a href=\"https://gist.github.com/mfornet/bef36eafc40ed7be9bb13e61cfb30997\">https://gist.github.com/mfornet/bef36eafc40ed7be9bb13e61cfb30997</a></p>",
        "id": 442544882,
        "sender_full_name": "Marcelo Fornet",
        "timestamp": 1717511796
    },
    {
        "content": "<p>Reminds me a bit of the surprise paradox, which I have formalized in <a href=\"https://www.isa-afp.org/entries/Surprise_Paradox.html\">https://www.isa-afp.org/entries/Surprise_Paradox.html</a>. This had self-referential statements, for which I had to reach to Goedel encodings, maybe more than what's needed for the island puzzles.</p>",
        "id": 442560685,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1717515661
    },
    {
        "content": "<p>Here are some thoughts by Chris Hughes on that puzzle (all code is Lean 3 though):</p>\n<p><a href=\"https://xenaproject.wordpress.com/2018/11/17/blue-eyed-islanders-guest-post/\">https://xenaproject.wordpress.com/2018/11/17/blue-eyed-islanders-guest-post/</a></p>",
        "id": 442564070,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1717516403
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113489-new-members/topic/The.20Hardest.20Logic.20Puzzle.20in.20the.20World/near/442564070\">said</a>:</p>\n<blockquote>\n<p>Here are some thoughts by Chris Hughes on that puzzle (all code is Lean 3 though):</p>\n<p><a href=\"https://xenaproject.wordpress.com/2018/11/17/blue-eyed-islanders-guest-post/\">https://xenaproject.wordpress.com/2018/11/17/blue-eyed-islanders-guest-post/</a></p>\n</blockquote>\n<p>This proof is quite nice. Here is the definition in this article:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">island_rules</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\">     </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">B</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">island_rules</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"o\">((</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">island_rules</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">island_rules</span><span class=\"w\"> </span><span class=\"n\">d</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>It took me some time to figure out where was introduced the assumption (axiom) that when there are 2 blue-eyed person they will sleep through the first night (i.e. they have confidence they don't know their eye color).</p>\n<p>It is in the base case:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\">     </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">B</span>\n</code></pre></div>\n<p>For b ≥ 2, blue-eyed logician knows there are either <code>b</code> or <code>b - 1</code> but <strong>don't know which</strong>. They get the uncertainty for free in that definition.</p>\n<p>I do have an idea now about how to solve my problem, in the same spirit, which is encoding in advance (i.e a day before the statement from the guru) that no one knows the total number of blue eyes.</p>",
        "id": 442588644,
        "sender_full_name": "Marcelo Fornet",
        "timestamp": 1717523211
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"456449\">Marcelo Fornet</span> has marked this topic as resolved.</p>",
        "id": 442588678,
        "sender_full_name": "Notification Bot",
        "timestamp": 1717523220
    },
    {
        "content": "<p>I guess there is a lot of wiggle room in the formalization how much you already put into the definition, and how much you put in the proof. A more thorough formalization might involve a full temporal modal logic, with a modality for every person's knowledge at each step, a few axioms, and then a (more complex?) proof.</p>",
        "id": 442608087,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1717529019
    },
    {
        "content": "<p><a href=\"https://terrytao.wordpress.com/2011/05/19/epistemic-logic-temporal-epistemic-logic-and-the-blue-eyed-islander-puzzle-lower-bound/\">https://terrytao.wordpress.com/2011/05/19/epistemic-logic-temporal-epistemic-logic-and-the-blue-eyed-islander-puzzle-lower-bound/</a> provides details of such a logic as applied to this problem.</p>",
        "id": 442862313,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1717612357
    },
    {
        "content": "<p>Heh, I retract the <code>?</code> after ”more complex” in my previous message.</p>",
        "id": 442876858,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1717616796
    },
    {
        "content": "<p>thanks for sharing! in the end I manage to prove the upper-bound (by reformulating the problem), but didn't manage to prove the lower bound.</p>\n<p>I'll read the post, and see if I can formalize it. I'll follow up here on either success or failure :)</p>",
        "id": 443735113,
        "sender_full_name": "Marcelo Fornet",
        "timestamp": 1718015037
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"456449\">@Marcelo Fornet</span> how did it go? Did you do a Lean 4 version of this problem and is it visible someplace? Would be great to see it.</p>",
        "id": 501572190,
        "sender_full_name": "Oliver Butterley",
        "timestamp": 1740410495
    },
    {
        "content": "<p>I never get to publish anything, and I don't have access to the computer where I was solving this project.</p>\n<p>I have the plan to get back to this and prove the lowerbound, but I don't think this will happen any time soon.</p>",
        "id": 501815565,
        "sender_full_name": "Marcelo Fornet",
        "timestamp": 1740492668
    }
]