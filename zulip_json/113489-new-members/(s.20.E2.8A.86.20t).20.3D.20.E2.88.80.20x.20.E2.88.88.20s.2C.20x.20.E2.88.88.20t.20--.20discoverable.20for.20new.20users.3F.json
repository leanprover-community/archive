[
    {
        "content": "<p>Consider the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>From first principles, the proof can be done succinctly with <code>intro x hx</code> and then <code>assumption</code>.</p>\n<p>This relies on knowing that s ⊆ t is defined as ∀ x ∈ s, x ∈ t, which is clear after reading <code>Set.subset_def</code>.</p>\n<p>However, a new user might not immediately know the name <code>Set.subset_def</code>.</p>\n<p>For someone new to Mathlib encountering this example for the first time, what is the recommended way within VS Code to discover that s ⊆ t unfolds to ∀ x ∈ s, x ∈ t—and consequently that <code>intro x hx</code> is the appropriate approach?</p>",
        "id": 500761050,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1740006804
    },
    {
        "content": "<p>Well, I would have said:<br>\n<span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> |- ((?s : Set ?α) ⊆ ?t) ↔ ?_</p>",
        "id": 500762044,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1740007303
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Set/Operations.html#Set.subset_kernImage_iff\">Set.subset_kernImage_iff</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Set/Basic.html#Set.univ_subset_iff\">Set.univ_subset_iff</a>, and <a href=\"https://loogle.lean-lang.org/?q=%7C-%20%28%28%3Fs%20%3A%20Set%20%3F%CE%B1%29%20%E2%8A%86%20%3Ft%29%20%E2%86%94%20%3F_\">220 more</a></p>",
        "id": 500762046,
        "sender_full_name": "loogle",
        "timestamp": 1740007305
    },
    {
        "content": "<p>But this gives garbage because <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.subset_def#doc\">docs#Set.subset_def</a> uses an equality, and not an <code>↔</code> (would you mind changing this in Mathlib?). So the user would need to do this:<br>\n<span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> |- ((?s : Set ?α) ⊆ ?t) = ?_</p>",
        "id": 500762171,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1740007365
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Set/Basic.html#Set.subset_def\">Set.subset_def</a></p>",
        "id": 500762174,
        "sender_full_name": "loogle",
        "timestamp": 1740007366
    },
    {
        "content": "<p>However, another good option is <code>rw?</code>, which gives this as the first hit.</p>",
        "id": 500762272,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1740007433
    },
    {
        "content": "<p><code>hint</code> also closes the goal in a way that tells you a bit about what's going on.</p>",
        "id": 500762343,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1740007460
    },
    {
        "content": "<p>There's been talk about somehow getting notations to show type-specific documentation on hover. The Set one could say what the definition is and that you're meant to take advantage of it.</p>",
        "id": 500791069,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1740025170
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"306601\">@Kyle Miller</span>  The hover-based approach appears very promising for enhancing discoverability. Is it enough to simply add documentation to the existing code in the sense that I can do it via a PR, or will additional infrastructure be required? </p>\n<p>The current workflow places quite a few demands on the user:</p>\n<ol>\n<li>They need to realize they should look up the definition of a subset.</li>\n<li>They must understand that there is no straightforward built-in method to access that definition.</li>\n<li>They must know about an external search engine that can provide the definition.</li>\n<li>They need to be familiar with the search engine’s syntax.</li>\n<li>They must be able to match their current goal to the right query.</li>\n<li>They must be able to write <code>|- ((?s : Set ?α) ⊆ ?t) ↔ ?_</code> or <code>|- ((?s : Set ?α) ⊆ ?t) = ?_</code> without typos.</li>\n</ol>\n<p>I suspect the subset of new users who can manage all these steps is only slightly larger than <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∅</mi></mrow><annotation encoding=\"application/x-tex\">\\emptyset</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8056em;vertical-align:-0.0556em;\"></span><span class=\"mord\">∅</span></span></span></span>.</p>",
        "id": 500802357,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1740032920
    },
    {
        "content": "<p>It will need additional infrastructure</p>",
        "id": 500802508,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1740033012
    },
    {
        "content": "<p>There's another workflow by the way that you can do completely from within VS Code. I've haven't used the one you're describing, and it seems hard to carry out (as you say!)</p>\n<p>I won't say it's obvious, but let's say you have <code>s ⊆ t</code> in the infoview. First, hover over it:</p>\n<p><a href=\"/user_uploads/3121/on8BgXXT7fS0NgNtg33lMxQw/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/on8BgXXT7fS0NgNtg33lMxQw/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"852x172\" src=\"/user_uploads/thumbnail/3121/on8BgXXT7fS0NgNtg33lMxQw/image.png/840x560.webp\"></a></div><p>Second, realize that this is a generic notation, so move your mouse over the instance argument and (on a mac) command-click it to go to definition:</p>\n<p><a href=\"/user_uploads/3121/tyqQ9oDgDFhzJugp2L8xg4Z_/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/tyqQ9oDgDFhzJugp2L8xg4Z_/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"476x92\" src=\"/user_uploads/thumbnail/3121/tyqQ9oDgDFhzJugp2L8xg4Z_/image.png/840x560.webp\"></a></div><p>Third, pause and wonder why the definition is in terms of LE, but notice that it's defined right above:</p>\n<p><a href=\"/user_uploads/3121/OTJdCFLcJruOjxTD1Nuk1wB3/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/OTJdCFLcJruOjxTD1Nuk1wB3/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"372x96\" src=\"/user_uploads/thumbnail/3121/OTJdCFLcJruOjxTD1Nuk1wB3/image.png/840x560.webp\"></a></div><p>Go to <code>Set.Subset</code>, and see how it's defined:</p>\n<p><a href=\"/user_uploads/3121/oLOH4p2RTqb4xFmkk8DDPZ8l/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/oLOH4p2RTqb4xFmkk8DDPZ8l/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"582x92\" src=\"/user_uploads/thumbnail/3121/oLOH4p2RTqb4xFmkk8DDPZ8l/image.png/840x560.webp\"></a></div>",
        "id": 500802934,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1740033263
    },
    {
        "content": "<p>This argument assumes that the user is trying to work out everything by themselves rather than following a tutorial where this is all explained to them</p>",
        "id": 500807801,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740035432
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197836\">Jireh Loreaux</span> <a href=\"#narrow/channel/113489-new-members/topic/.28s.20.E2.8A.86.20t.29.20.3D.20.E2.88.80.20x.20.E2.88.88.20s.2C.20x.20.E2.88.88.20t.20--.20discoverable.20for.20new.20users.3F/near/500762171\">said</a>:</p>\n<blockquote>\n<p>But this gives garbage because <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.subset_def#doc\">docs#Set.subset_def</a> uses an equality, and not an <code>↔</code> (would you mind changing this in Mathlib?). So the user would need to do this:<br>\n<span class=\"user-mention silent\" data-user-id=\"644391\">loogle</span> |- ((?s : Set ?α) ⊆ ?t) = ?_</p>\n</blockquote>\n<p>Is there some special syntax to using loogle from within VS code? I installed the loogle extension, and some searches go through correctly, but it seems that, when the query includes the turnstile <code>|-</code>, loogle doesn't understand me. </p>\n<p>When I copy and paste Jireh's example above, I get an error in VS code, but it works fine on the loogle webpage. Hovering seems to indicate my <code>|</code> is seen as the opening for an absolute value, so I tried looking for a similar-looking-but-different Unicode character, but I'm not sure where to look (at least, I failed).</p>",
        "id": 500815044,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1740038402
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> : </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Unbundled</span><span class=\"bp\">.</span><span class=\"n\">Abs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">LeanSearchClient</span>\n\n<span class=\"bp\">#</span><span class=\"n\">loogle</span><span class=\"w\"> </span><span class=\"bp\">|-</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">?</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"c1\">-- expected no space before</span>\n</code></pre></div>",
        "id": 500827687,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740042397
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/.28s.20.E2.8A.86.20t.29.20.3D.20.E2.88.80.20x.20.E2.88.88.20s.2C.20x.20.E2.88.88.20t.20--.20discoverable.20for.20new.20users.3F/near/500807801\">said</a>:</p>\n<blockquote>\n<p>This argument assumes that the user is trying to work out everything by themselves rather than following a tutorial where this is all explained to them</p>\n</blockquote>\n<p>In my experience, new users typically blend \"explicit learning\" and \"implicit learning\".</p>\n<p>There are many excellent tutorials available, which are great for explicit learning—such as reading manuals or following step-by-step guides.</p>\n<p>However, new users often complement this explicit approach with implicit (or intuitive) learning, figuring things out by directly interacting with the interface (hovering, clicking, etc.). There seems to be room for improvement in discoverability (how easily users can learn how something works without external guidance) in this case. Once the necessary \"hover infrastructure\" Kyle mentioned is in place, I’d be happy to contribute by adding documentation!</p>",
        "id": 500836700,
        "sender_full_name": "Isak Colboubrani",
        "timestamp": 1740045130
    },
    {
        "content": "<p>Looking back, I think I did a mixture of explicit learning (i.e. reading <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/\">#tpil</a>) and implicit-learning-which-constantly-ran-into-roadblocks-so-I-would-ask-here. I think that my personality lent itself very well to this approach because I was not scared to constantly ask basic questions and look foolish, and Mario was constantly happy to answer them (this was back when this Zulip had 20 users not 10000). I agree that this approach does not work for everyone.</p>",
        "id": 500843668,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1740047254
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"726077\">@Philippe Duchon</span> in VS Code it works if you use the unicode turnstile:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">Order</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Unbundled</span><span class=\"bp\">.</span><span class=\"n\">Abs</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">LeanSearchClient</span>\n\n<span class=\"bp\">#</span><span class=\"n\">loogle</span><span class=\"w\"> </span><span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">?</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"bp\">?</span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n</code></pre></div>\n<p>(although this doesn't work in the web editor because it doesn't have network access)</p>",
        "id": 503538129,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741186270
    },
    {
        "content": "<p>Thanks! I did not know how to type the unicode turnstile (<code>\\|-</code>and others), and the symbol rarely appears in a position where I can just get the information from VS code.</p>",
        "id": 503539749,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1741186614
    },
    {
        "content": "<p>For loogle and a lot of other things <code>|-</code> works too</p>",
        "id": 503539932,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1741186649
    },
    {
        "content": "<p>From VS code, <code>|-</code> generates an error (\"expected no space before\", reporting the error in the next line, so this looks like a parsing problem). This was what I tried first :)</p>",
        "id": 503541372,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1741186938
    },
    {
        "content": "<blockquote>\n<p>This argument assumes that the user is trying to work out everything by themselves rather than following a tutorial where this is all explained to them</p>\n</blockquote>\n<p>Why yes, that's exactly how I approach learning things. How could you tell?</p>",
        "id": 503550300,
        "sender_full_name": "suhr",
        "timestamp": 1741188828
    },
    {
        "content": "<p>Unfolding definitions is not a bad way to figure out how things work. That's what <code>#print</code> is for.</p>",
        "id": 503552529,
        "sender_full_name": "suhr",
        "timestamp": 1741189269
    },
    {
        "content": "<p>I think that in some parts of mathlib, unfolding definitions is a terrible idea, and reading the API around a definition is the sensible thing to do. I think your advice is true sometimes but definitely not true always.</p>",
        "id": 503553039,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1741189380
    },
    {
        "content": "<p>That depends on how many layers of definitions are there. Navigable documentation could be much more helpful, of course, but it's often missing (for example, <code>Set.instHasSubset</code> is not documented).</p>",
        "id": 503555178,
        "sender_full_name": "suhr",
        "timestamp": 1741189812
    },
    {
        "content": "<p>How I understand Kevin's meaning is that, sometimes in Mathlib, the definition is not easy to understand - perhaps the definition is more general than you'd think, or it uses a different formulation for some other reason. So when the definition by itself does not \"tell\" you much, you should have a look at the various theorems in the library (the \"API\"), which may be more informative of how things work than just \"what they are\".</p>\n<p>(The reason for such implementation choices are not always clear; I find that the headers of individual files sometimes give a little information.)</p>",
        "id": 503558812,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1741190522
    },
    {
        "content": "<p>A good example of something which is probably surprising to new users is the definition of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Commute#doc\">docs#Commute</a>, which is in terms of <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=SemiconjBy#doc\">docs#SemiconjBy</a></p>",
        "id": 503564233,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741191615
    },
    {
        "content": "<p>It's not that hard to understand when you look at the definition, but it's sure surpising when someone is expecting to see directly <code>a * b = b * a</code>.</p>",
        "id": 503564413,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1741191655
    },
    {
        "content": "<p>Another example is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=IsCompact#doc\">docs#IsCompact</a> .</p>",
        "id": 503586774,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1741196261
    }
]