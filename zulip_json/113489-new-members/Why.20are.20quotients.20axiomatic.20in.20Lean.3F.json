[
    {
        "content": "<p>I'm not really sure where this question would go, but why do quotients in Lean seem to be introduced via an axiom rather than via a straightforward formalization of the classical definition? The latter could go somewhat like this: </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Setoid</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Setoid</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IsSaturated</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">a</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IsConnected</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IsEquivalenceClass</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">IsSaturated</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">IsConnected</span><span class=\"w\"> </span><span class=\"n\">a</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">EquivalenceClass</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">}</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">equivalenceclass_isequivalenceclass</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">IsEquivalenceClass</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">EquivalenceClass</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Setoid</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hz</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Setoid</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Setoid</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hy</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hz</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">MyQuotient</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">IsEquivalenceClass</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">}</span>\n\n<span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">MyQuotient</span>\n\n<span class=\"kn\">protected</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MyQuotient</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">EquivalenceClass</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">equivalenceclass_isequivalenceclass</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">⟩</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sound</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">MyQuotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">MyQuotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">eq</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Setoid</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Setoid</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hz</span><span class=\"bp\">;</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">exists_rep</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyQuotient</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">MyQuotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨⟨</span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">⟩</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">sat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">conn</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">property</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">eq</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">ext</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">constructor</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hy</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">sat</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hy</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">.</span><span class=\"n\">conn</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">hy</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyQuotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">MyQuotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">Subtype</span><span class=\"bp\">.</span><span class=\"n\">eq_iff</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">ext_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">specialize</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">change</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Setoid</span><span class=\"bp\">.</span><span class=\"n\">symm</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Setoid</span><span class=\"bp\">.</span><span class=\"n\">refl</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">MyQuotient</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">choose</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">exists_rep</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">))</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lift_sound</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MyQuotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">lift</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hf</span><span class=\"bp\">;</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"bp\">.</span><span class=\"n\">choose_spec</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">exists_rep</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">MyQuotient</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">this</span>\n</code></pre></div>",
        "id": 547152823,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761505446
    },
    {
        "content": "<p>this doesn't give you good definitional reductions</p>",
        "id": 547153098,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761505720
    },
    {
        "content": "<p>see lift is noncomputable</p>",
        "id": 547153120,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761505752
    },
    {
        "content": "<p>also in Lean you need quot sound to prove funext</p>",
        "id": 547153140,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761505775
    },
    {
        "content": "<p>In your theorem <code>sound</code> you use the <code>ext</code> tactic, you need quotient types to prove functional extensionality.</p>",
        "id": 547153155,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761505796
    },
    {
        "content": "<p>well the other thing is that Lean could've made funext an axiom and then constructed quotients like this</p>",
        "id": 547153228,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761505876
    },
    {
        "content": "<p>but then lift is noncomputable which is sad</p>",
        "id": 547153236,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761505885
    },
    {
        "content": "<p>Yes, the fact that a lot of proofs about quotients are just <code>rfl</code> is super nice.</p>",
        "id": 547153286,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761505930
    },
    {
        "content": "<p>In set theory, you don't need choice to construct quotients right?<br>\nIs it true that if some object x exists and unique, then I can define it without the axiom of choice?</p>",
        "id": 547153365,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761506020
    },
    {
        "content": "<p>I used Classical.choice because it's the only way I knew how to use \\exists in a function<br>\nBut maybe it's not logically necessary?</p>",
        "id": 547153389,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761506055
    },
    {
        "content": "<p>in Lean a function isn't just exists unique</p>",
        "id": 547153397,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506065
    },
    {
        "content": "<p>but in set theory functions are defined as a relation for which exists unique</p>",
        "id": 547153412,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506084
    },
    {
        "content": "<p>type theory is different from set theory in this way</p>",
        "id": 547153425,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506097
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"407114\">@Stepan Nesterov</span> the point is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=funext#doc\">docs#funext</a>, that is trivially true in set theory.</p>",
        "id": 547153457,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761506118
    },
    {
        "content": "<p>And this is proved in Lean using quotients</p>",
        "id": 547153483,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761506142
    },
    {
        "content": "<p>unique choice is weaker than choice and is actually provable in set theory and in certain more constructive type theories but in Lean's type theory with propositional erasing unique choice isn't provable without additional axioms like choice</p>",
        "id": 547153506,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506165
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/Why.20are.20quotients.20axiomatic.20in.20Lean.3F/near/547153120\">said</a>:</p>\n<blockquote>\n<p>see lift is noncomputable</p>\n</blockquote>\n<p>I see that Quot.lift is something called an 'opaque def'. Can I think of this as basically an axiom?</p>",
        "id": 547153547,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761506193
    },
    {
        "content": "<p>well it's actually not that</p>",
        "id": 547153631,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506261
    },
    {
        "content": "<p>Then I don't understand what 'computable' means. If you just defined something by saying 'it's an axiom that there is such a thing', how is that computable?</p>",
        "id": 547153664,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761506287
    },
    {
        "content": "<p>as you can see it's a \"quotient primitive\" which is technically something different</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">info: Quotient primitive Quot.lift.{u, v} : {α : Sort u} →</span>\n<span class=\"sd\">  {r : α → α → Prop} → {β : Sort v} → (f : α → β) → (∀ (a b : α), r a b → f a = f b) → Quot r → β</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">Quot</span><span class=\"bp\">.</span><span class=\"n\">lift</span>\n</code></pre></div>",
        "id": 547153686,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506306
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/113489-new-members/topic/Why.20are.20quotients.20axiomatic.20in.20Lean.3F/near/547153664\">said</a>:</p>\n<blockquote>\n<p>Then I don't understand what 'computable' means. If you just defined something by saying 'it's an axiom that there is such a thing', how is that computable?</p>\n</blockquote>\n<p>computable is unfortunately one of those words that means different things in different contexts and the meanings are related but not quite the same</p>",
        "id": 547153835,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506439
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/Why.20are.20quotients.20axiomatic.20in.20Lean.3F/near/547153686\">said</a>:</p>\n<blockquote>\n<p>as you can see it's a \"quotient primitive\" which is technically something different</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">info: Quotient primitive Quot.lift.{u, v} : {α : Sort u} →</span>\n<span class=\"sd\">  {r : α → α → Prop} → {β : Sort v} → (f : α → β) → (∀ (a b : α), r a b → f a = f b) → Quot r → β</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">Quot</span><span class=\"bp\">.</span><span class=\"n\">lift</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Is it different from an axiom? Other than that an axiom is a Prop and this is data</p>",
        "id": 547154013,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761506656
    },
    {
        "content": "<p>it computes on <code>Quot.mk</code></p>",
        "id": 547154021,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506676
    },
    {
        "content": "<p>if it were an axiom then it wouldn't compute on anything</p>",
        "id": 547154032,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506701
    },
    {
        "content": "<p>It is different from an axiom also because \"being definitionally equal\" cannot be an axioms</p>",
        "id": 547154033,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761506703
    },
    {
        "content": "<p>I mean the following</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span>\n\n<span class=\"kn\">variable</span><span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Quot</span><span class=\"bp\">.</span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Quot</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 547154213,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761506905
    },
    {
        "content": "<p>you cannot assume that <code>Quot.lift f h (Quot.mk r a) = f a</code>, but you cannot assume that those are <em>definitionally</em> equal.</p>",
        "id": 547154233,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761506926
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"407114\">Stepan Nesterov</span> <a href=\"#narrow/channel/113489-new-members/topic/Why.20are.20quotients.20axiomatic.20in.20Lean.3F/near/547154013\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/Why.20are.20quotients.20axiomatic.20in.20Lean.3F/near/547153686\">said</a>:</p>\n<blockquote>\n<p>as you can see it's a \"quotient primitive\" which is technically something different</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/--</span>\n<span class=\"sd\">info: Quotient primitive Quot.lift.{u, v} : {α : Sort u} →</span>\n<span class=\"sd\">  {r : α → α → Prop} → {β : Sort v} → (f : α → β) → (∀ (a b : α), r a b → f a = f b) → Quot r → β</span>\n<span class=\"sd\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">guard_msgs</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">Quot</span><span class=\"bp\">.</span><span class=\"n\">lift</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Is it different from an axiom? Other than that an axiom is a Prop and this is data</p>\n</blockquote>\n<p>axioms can also be \"data\"</p>",
        "id": 547154275,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506980
    },
    {
        "content": "<p>for example <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Classical.choice#doc\">docs#Classical.choice</a> is data</p>",
        "id": 547154285,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761506999
    },
    {
        "content": "<p>even better</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span>\n\n<span class=\"kn\">variable</span><span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Sort</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Quot</span><span class=\"bp\">.</span><span class=\"n\">lift</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Quot</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 547154329,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761507031
    },
    {
        "content": "<p>well that's just definitional eta</p>",
        "id": 547154398,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761507094
    },
    {
        "content": "<p>I guess definitional eta is one of the things that lets you prove funext</p>",
        "id": 547154412,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761507117
    },
    {
        "content": "<p>Yes, but because the values are definitionally equal</p>",
        "id": 547154415,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761507122
    },
    {
        "content": "<p>I am <em>almost</em> sure you cannot prove <code>funext</code> without it. Or at least, I once wrote all the various <code>Quot.blah</code> stuff as actual axioms and I wasn't able to prove <code>funext</code> without using the \"real\" <code>Quot.sound</code></p>",
        "id": 547154475,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761507179
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/113489-new-members/topic/Why.20are.20quotients.20axiomatic.20in.20Lean.3F/near/547154233\">said</a>:</p>\n<blockquote>\n<p>you cannot assume that <code>Quot.lift f h (Quot.mk r a) = f a</code>, but you cannot assume that those are <em>definitionally</em> equal.</p>\n</blockquote>\n<p>wait what</p>",
        "id": 547154536,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761507243
    },
    {
        "content": "<p>Which one can you assume?</p>",
        "id": 547154544,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761507253
    },
    {
        "content": "<p>You can assume <code>Eq (Quot.lift f h (Quot.mk r a)) (f a)</code>, because this is just a <code>Prop</code></p>",
        "id": 547154694,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761507392
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"407114\">@Stepan Nesterov</span> you're absolutely right in that quotients can just be made by brute force; the fact that your <code>lift</code> is noncomputable just means in practice that some proofs are harder if you do things your way. </p>\n<p>Another way of thinking about it is this: We are taught that <code>rfl</code> proves goals of the form <code>a=b</code> when <code>a</code> and <code>b</code> are \"equal by definition\". But in Lean there is an actual <em>definition</em> of what it means to be \"equal by definition\" and this core part of the story has been thought about super-hard by computer scientists. In Lean, the fact that the triangle commutes in the universal property for quotients is part of core Lean's definition of what it means to be equal by definition, because this is something that one can impose when making the theory of quotients, and in practice this makes people's lives easier. It's analogous to the fact that if you define an inductive type like the naturals, and then use the auto-generated recursor to define a function f from the naturals (by saying that 0 goes to x and n+1 goes to whatever) then the reason that f 0 = x is true by rfl is again part of core Lean's definition of what it means to be equal by definition.</p>\n<p>So in short you are totally right that <em>logically</em> one does not need all this quotient axiom stuff if all one wants to do is to build something which represents mathematics in some logically correct way and doesn't care at all about usability. But in practice if you want to make system which is actually <em>usable</em> for doing hard modern mathematics then it takes decades of study, trying to figure out how much you can get away with to make the system fast and usable, without making it inconsistent, and this is why doing computer theorem proving on hard maths took off in the 2020s and not the 1990s. </p>\n<p>I went through a lot of the thoughts you're going through now when I was getting to grips with Lean -- asking myself \"whyever did they set things up the way they set things up\", e.g. \"why is 1/0=0\", \"why is there one definition of \"group with group law <code>+</code>\" and a different definition of \"group with group law <code>*</code>\", \"why do they use the axiom of choice to prove the law of the excluded middle\" etc etc, and basically there are good answers to all of these questions but none of them are anything to do with mathematics, they are all about implementing an efficient system.</p>",
        "id": 547154742,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761507435
    },
    {
        "content": "<p>The other property is stronger, and there is no way for you to tell Lean \"assume <code>a</code> and <code>b</code> are definitionally equal\"</p>",
        "id": 547154774,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761507460
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> we <em>believe</em> you need them to prove <code>propext</code> and we <em>suspect</em> one can just assume <code>propext</code> and construct them by brute force.</p>",
        "id": 547154855,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761507529
    },
    {
        "content": "<p>Sorry, <code>funext</code></p>",
        "id": 547154883,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761507567
    },
    {
        "content": "<p>At the bottom of the pile there will be some axioms, and it's a very natural question to ask \"why those axioms\" or \"what if we used different axioms\" or whatever (e.g. \"why is an ext lemma or LEM a theorem not an axiom\" (note that set extensionality and LEM are both axioms in ZFC, well, LEM is part of the logic) or \"why are quotients an axiom but not a theorem\" (quotients can be constructed in ZFC using other more primitive axioms)), but really the answer to these questions is \"it is Lean's attempt to make a system which does mathematics efficiently in practice, it is not really of any mathematical relevance\".</p>",
        "id": 547154918,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761507603
    },
    {
        "content": "<p>So basically what you are saying is that existence of quotients is a special type of axiom in that \"definitionally equal\" in Lean is not just \"equal when you unfold all the definitions\" but a more complicated relation which includes \"left hand side is (Quot.lift f h (<a href=\"http://Quot.mk\">Quot.mk</a> r a)) and right hand side is f a\"</p>",
        "id": 547155133,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1761507778
    },
    {
        "content": "<p>You literally cannot unfold a definition using <code>Nat.rec</code> in Lean because <code>Nat.rec</code> is an axiom. So saying that \"addition is defined by a+0=a and a+Sx=S(a+x)\" is really saying \"Nat.add is defined in terms of Nat.rec\" and when you unfold Nat.add a 0 you literally do not get a, you get <code>Nat.rec a whatever</code></p>",
        "id": 547155263,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761507889
    },
    {
        "content": "<p>Exactly, this is the reason (or at least one of the reasons) you don't find <code>Quot.lift</code> in the code.</p>",
        "id": 547155285,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761507905
    },
    {
        "content": "<p>To make matters worse, it is a <em>theorem</em> that checking definitional equality in Lean is undecidable! Some people working in other theorem provers find this completely abhorrent. <code>rfl</code> is a computer program which provides a very good approximation to checking definitional equality but there are some very short examples kicking around of <code>rfl</code> failing to prove <code>a = b</code> when you can prove that they're definitionally equal (e.g. <code>a = c</code> and <code>c = b</code> can both be proved by <code>rfl</code>). What <code>mathlib</code> is strong evidence for, is that this phenomenon doesn't matter.</p>",
        "id": 547155462,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761508072
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/113489-new-members/topic/Why.20are.20quotients.20axiomatic.20in.20Lean.3F/near/547153155\">said</a>:</p>\n<blockquote>\n<p>In your theorem <code>sound</code> you use the <code>ext</code> tactic, you need quotient types to prove functional extensionality.</p>\n</blockquote>\n<p>is <code>ext</code> really using <code>funext</code> ? i though extensionality theorems where different beasts... if you have any pointers about this in the docs, that would be nice</p>",
        "id": 547159595,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1761512568
    },
    {
        "content": "<p>Don't bother, i found it : <a href=\"https://leanprover-community.github.io/mathlib4_docs/Lean/Elab/Tactic/Ext.html\">https://leanprover-community.github.io/mathlib4_docs/Lean/Elab/Tactic/Ext.html</a> in extcore.</p>",
        "id": 547159760,
        "sender_full_name": "Alfredo Moreira-Rosa",
        "timestamp": 1761512728
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/113489-new-members/topic/Why.20are.20quotients.20axiomatic.20in.20Lean.3F/near/547154475\">said</a>:</p>\n<blockquote>\n<p>I am <em>almost</em> sure you cannot prove <code>funext</code> without it. Or at least, I once wrote all the various <code>Quot.blah</code> stuff as actual axioms and I wasn't able to prove <code>funext</code> without using the \"real\" <code>Quot.sound</code></p>\n</blockquote>\n<p>An old thread about funext needing quotient defeq:<br>\n<a class=\"message-link\" href=\"/#narrow/channel/113489-new-members/topic/Definitional.20equality.20with.20quotient.20types/near/530421688\">#new members &gt; Definitional equality with quotient types @ 💬</a></p>",
        "id": 547162890,
        "sender_full_name": "Snir Broshi",
        "timestamp": 1761516124
    }
]