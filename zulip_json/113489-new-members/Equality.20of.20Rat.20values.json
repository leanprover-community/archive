[
    {
        "content": "<p>Hi, newbie here.</p>\n<p>I am trying to work with <code>Rat</code>s in Lean, but I am running into the exact same problem I had in Rocq (lol).</p>\n<p>Here is my code:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">q1g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Rat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n'</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q1g</span><span class=\"w\"> </span><span class=\"n\">n'</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">^</span><span class=\"mi\">2</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">q1d</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Rat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">q1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">q1g</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q1d</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">q1g</span><span class=\"w\"> </span><span class=\"n\">q1d</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n</code></pre></div>\n<p>The goal state at the end of this is <code>0 = 0/2</code>, however I don't know how to prove this and can't find it looking online or through the docs.</p>\n<p>Is this like in Rocq, where you need a different kind of equality for <code>0 = 0 # 2</code> to be true?</p>\n<p>PS: Not 100% sure I'm on the best channel for this; sorry if not.</p>",
        "id": 543239167,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759736999
    },
    {
        "content": "<p><code>simp</code> solves the goal for me with <code>import Mathlib</code> at the top -- so either you're on an old version of mathlib or you're not importing enough simp lemmas. But in general <code>norm_num</code> is the tactic you want for proving equalities in <code>Rat</code>, and for the induction step you'll also want <code>ring</code>.</p>\n<p>Oh -- do you explicitly want to do this stuff mathlib-free? Then I don't have a clue. All the powerful tools for doing arithmetic/algebra are in the maths library.</p>",
        "id": 543240421,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759737363
    },
    {
        "content": "<p>I feel a bit stupid now, because I added the import too and it just worked. I was on the <a href=\"https://live.lean-lang.org/\">live web version</a>, and had \"Latest Mathlib\" selected, and... I thought that would import it without me specifying <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 543241383,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759737629
    },
    {
        "content": "<p>Actually you can probably do this in core Lean only using <code>grind</code> or <code>omega</code> (powerful tools in the core library).</p>",
        "id": 543241540,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759737666
    },
    {
        "content": "<p>Seems to work, yeah. I have no reason not to use Mathlib though (as long as I actually import it next time)</p>",
        "id": 543241796,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759737743
    },
    {
        "content": "<p>Thanks Kevin!</p>",
        "id": 543241823,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759737752
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/Equality.20of.20Rat.20values\">#lean4 &gt; Equality of Rat values</a> by <span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span>.</p>",
        "id": 543316531,
        "sender_full_name": "Notification Bot",
        "timestamp": 1759757618
    },
    {
        "content": "<p>are we resolving topics now?</p>",
        "id": 543319427,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759758286
    },
    {
        "content": "<p>Not as far as I know -- indeed I think we were rather hoping that the community literally forgot that such a thing existed.</p>",
        "id": 543320295,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759758470
    },
    {
        "content": "<p>We turned off the feature, I think, except for maintainers</p>",
        "id": 543320691,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1759758567
    },
    {
        "content": "<p>Oh cool, I can even delete any evidence that this ever happened. (this topic was resolved and then unresolved again)</p>",
        "id": 543321182,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759758689
    }
]