[
    {
        "content": "<p>That's one of the  <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> examples from The Mechanics of Proof. It uses <code>by extra</code>. It does not work for me anymore (<code>lean4</code>). Well, I might be missing something.<br>\nI could not find the tactic in the <em>docs</em> and in <em>Formalising Mathematics</em>, so I am assuming that the tactic is not available.</p>\n<p>How reliable are the formalized proofs? i.e. is there any way to automatically fix a proof that used to work, but does not work anymore? Is it possible to install tactics like libraries with a package manager like <code>lake</code>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">          </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">          </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">extra</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 482327667,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731570751
    },
    {
        "content": "<p><a href=\"https://hrmacbeth.github.io/math2001/Index_of_Tactics.html\">https://hrmacbeth.github.io/math2001/Index_of_Tactics.html</a> notes that <code>extra</code> is a tactic introduced in that book, not mathib</p>",
        "id": 482331569,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731572253
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"307953\">@Ruben Van de Velde</span> Thank you. Now I know why it didn't work for me. Perhaps a follow up question. If the author developed that kind of tactic for this book, can I somehow install it with a package manager?</p>",
        "id": 482332871,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731572757
    },
    {
        "content": "<p>You can install the repo for the book with <code>lake</code>, if that's what you mean.</p>",
        "id": 482333207,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731572871
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/Backward.20compatibility.20.26.20automated.20upgrade/near/482333207\">schrieb</a>:</p>\n<blockquote>\n<p>You can install the repo for the book with <code>lake</code>, if that's what you mean.</p>\n</blockquote>\n<p>I know I can use lake to install the repo, but can I do something like <code>brew install extra</code>, <code>cargo install extra</code>, <code>pip install extra</code> (for that specific tactic only).</p>\n<p>Also, is it only me, or does <code>lake</code> feel slow? Is there any docker image I can pull from a registry?</p>",
        "id": 482334976,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731573450
    },
    {
        "content": "<p>But that tactic is working with a specific version of lean and mathlib (the one specified by the repo), and cannot be guaranteed to work with any other version of lean and mathlib (eg the one you want to use it with)</p>",
        "id": 482335836,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1731573748
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/Backward.20compatibility.20.26.20automated.20upgrade/near/482335836\">schrieb</a>:</p>\n<blockquote>\n<p>But that tactic is working with a specific version of lean and mathlib (the one specified by the repo), and cannot be guaranteed to work with any other version of lean and mathlib (eg the one you want to use it with)</p>\n</blockquote>\n<p>It's the <code>npm install</code> experience then. Makes sense. </p>\n<p>I should've installed the repo (the problem I have with this is that I feel it's way takes much more time on average compared to <code>npm install</code> , but maybe I am simply wrong, i.e. I need to try harder).</p>\n<p>Btw. I'd rename <code>lakefile.lean</code> to <code>packages.lean</code>, simplify its syntax, rename <code>lake build</code> to <code>lake install</code>, and make sure that <code>lake</code> works really fast.</p>",
        "id": 482338661,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731574703
    },
    {
        "content": "<p>By the way, <code>lakefile.toml</code> exists</p>",
        "id": 482339374,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731574923
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113489-new-members/topic/Backward.20compatibility.20.26.20automated.20upgrade/near/482339374\">schrieb</a>:</p>\n<blockquote>\n<p><code>lakefile.toml</code></p>\n</blockquote>\n<p>(Yes, I've been using <code>lakefile.toml</code> so far, but in this case I didn't install the repo, I simply used the code snippets-- that's why the tactic did not work)</p>\n<p>Btw. I would rename that file for sure.</p>",
        "id": 482339508,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731574963
    },
    {
        "content": "<p>So backward compatibility would not be an issue here. </p>\n<p>I'm assuming that <code>lake build</code> works similarly to <code>npm install</code>, i.e. one installation is unlikely / won't break other installations. (<code>pip install</code> is more likely to break something in the system when running outside of a virtual environment)?</p>",
        "id": 482339998,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731575106
    },
    {
        "content": "<p>Yeah, <code>lake build</code> should not affect anything outside the directory you run it in</p>",
        "id": 482342015,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731575690
    },
    {
        "content": "<p>Perfect! That was helpful. So I guess no need to dockerize, but projects get big and there'll be lots of project-level tactics that can't be reused, so we might need to have (ml-based) porting capabilities.</p>\n<p>I'll focus on <code>lake</code> then, and treat it a bit like <code>npm</code> (and not <code>pip</code>).</p>",
        "id": 482343706,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731576223
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"672170\">Michael Bucko</span> has marked this topic as resolved.</p>",
        "id": 482344007,
        "sender_full_name": "Notification Bot",
        "timestamp": 1731576309
    }
]