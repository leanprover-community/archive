[
    {
        "content": "<p>I used a couple of new techniques to prove this one.  Again, that's a new proof from <em>The Mechanics..</em>, spoiler alert. Can I collapse the <code>calc</code> into a one-liner? Can I use some functional programming approach here to solve this in one line?</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Proof</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\"><pre><span></span><code>example {x y : ℝ} (h : x = 2 ∨ y = -2) : x * y + 2 * x = 2 * y + 4 := by\n  rcases h with rfl | rfl\n  · norm_num\n  · calc\n      x * -2 + 2 * x = -2 * x + 2 * x := by rw [mul_comm]\n      _ = 0 := by ring\n      _ = 2 * -2 + 4 := by norm_num\n</code></pre></div>\n</div></div>",
        "id": 482797850,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731787042
    },
    {
        "content": "<p>I guess <code>ring</code> does it immediately?</p>",
        "id": 482798070,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1731787216
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 482798107,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1731787250
    },
    {
        "content": "<p>Much better than mine! Thank you <span aria-label=\"thank you\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"thank you\">:thank_you:</span></p>",
        "id": 482798237,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731787351
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 482798989,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731788130
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"672170\">Michael Bucko</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20optimize.20this.20proof/near/482797850\">said</a>:</p>\n<blockquote>\n<p>Can I collapse the <code>calc</code> into a one-liner?</p>\n</blockquote>\n<p>note that although you can have <code>calc a = b := by foo</code> as a single line, lean doesn't like to parse that, making the lines after very prone to parsing errors. Also, it generally can just be replaced with <code>by foo</code>.</p>",
        "id": 482799746,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731788811
    }
]