[
    {
        "content": "<p>Is there a syntax to combine pairs and Subtype? Something like <code>{ ⟨n, m⟩ : Nat × Nat // n+1 = m }</code> or <code>{ n m : Nat // n+1 = m }</code>.<br>\nI probably should make structure anyway, but just wanted to ask.</p>",
        "id": 538015657,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1757176439
    },
    {
        "content": "<p>The syntax for Subtype requires the thing on the left to be an ident, so it doesn't seem that such a pattern will work:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"w\"> </span><span class=\"n\">Subtype</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"s2\">\"{ \"</span><span class=\"w\"> </span><span class=\"n\">withoutPosition</span><span class=\"o\">(</span><span class=\"n\">ident</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"s2\">\" : \"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">)</span><span class=\"bp\">?</span><span class=\"w\"> </span><span class=\"s2\">\" // \"</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"s2\">\" }\"</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">term</span>\n</code></pre></div>\n<p>You can of course write a macro, or just do something like <code>{ pr : Nat × Nat // pr.fst+1 = pr.snd }</code></p>",
        "id": 538018632,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1757179690
    },
    {
        "content": "<p>You can write <code>{(n, m) : Nat × Nat | n+1 = m}</code>, but that gives you a set rather than a Subtype.  But  you could then coerce it to be a Subtype.  Not sure how useful that approach would be.</p>",
        "id": 538031031,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1757192043
    },
    {
        "content": "<p>Note that the resulting Subtype is equal to Chris's last suggestion:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"w\"> </span><span class=\"o\">{(</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">pr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"bp\">//</span><span class=\"w\"> </span><span class=\"n\">pr</span><span class=\"bp\">.</span><span class=\"n\">fst</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">pr</span><span class=\"bp\">.</span><span class=\"n\">snd</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 538031635,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1757192617
    }
]