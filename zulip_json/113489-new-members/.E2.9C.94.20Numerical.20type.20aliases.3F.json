[
    {
        "content": "<p>In some languages one can define aliases for existing types to help document code.  Then the alias can be used wherever the original type could have been used.  Haskell, Agda, and Idris ways to do this.  In Lean this seems to be possible, like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Loc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"w\"> </span><span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"n\">Repr</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Location</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">loc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Loc</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">loc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Loc</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-&gt;</span><span class=\"w\"> </span><span class=\"n\">Location</span><span class=\"w\"> </span><span class=\"n\">loc</span>\n</code></pre></div>\n<p>but then I can't use <code>Loc</code>, except in very restricted ways:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">loc1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Location</span><span class=\"w\"> </span><span class=\"mi\">1935</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Location</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"mi\">1935</span><span class=\"w\">  </span><span class=\"c1\">-- failed to synthesize ofNat Loc 1935</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">loc2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Location</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1935</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Loc</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Location</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1935</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Loc</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"c1\">-- failed to synthesize of Nat Loc 1935</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">loc3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Location</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1935</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Location</span><span class=\"bp\">.</span><span class=\"n\">mk</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1935</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"c1\">-- no problem</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">doubleloc</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">loc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Loc</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Loc</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\">    </span><span class=\"c1\">-- this line is OK</span>\n<span class=\"w\">  </span><span class=\"n\">loc</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">loc</span><span class=\"w\">    </span><span class=\"c1\">-- failed to synthesize HAdd Loc Loc</span>\n</code></pre></div>\n<p>I understand that these particular errors have to do with Lean's methods for determining the type of a literal number and its methods for determining the type of the function <code>+</code>.  I've been reading <a href=\"https://lean-lang.org/functional_programming_in_lean/type-classes.html\">chapter 4</a> in FPIL, and I understand that if I define an <code>inductive</code> type representing numbers, I add code that will allow Lean to interpret literal numbers as my type, I can define instances for <code>HAdd</code>, <code>HMul</code>, and so on.  (It looks like there's a similar situation with aliases for <code>String</code> and instances of <code>HAppend</code>, but I haven't looked into that.)</p>\n<p>In this case all of those other declarations/definitions would be overkill. I just want names that help one to see what the purpose is of different <code>Int</code>, <code>Nat</code>, etc. arguments.  Is there a way to define a numeric type alias without a lot of extra code?  Maybe <code>def Loc : Type := Int</code> is the wrong way to do it, or maybe there's and extra line or two of code that would help?</p>",
        "id": 469155078,
        "sender_full_name": "mars0i",
        "timestamp": 1725987438
    },
    {
        "content": "<p>Maybe using <code>abbrev</code> instead of <code>def</code> is better?</p>",
        "id": 469155476,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1725987542
    },
    {
        "content": "<p>Ah, thank you <span class=\"user-mention\" data-user-id=\"321459\">@Damiano Testa</span>!  That's what I needed.  I think I saw <code>abbrev</code> at one point, but had completely forgotten it.</p>",
        "id": 469189932,
        "sender_full_name": "mars0i",
        "timestamp": 1725995807
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"617444\">mars0i</span> has marked this topic as resolved.</p>",
        "id": 469189954,
        "sender_full_name": "Notification Bot",
        "timestamp": 1725995812
    }
]