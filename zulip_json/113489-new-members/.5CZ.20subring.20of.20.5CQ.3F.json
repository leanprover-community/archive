[
    {
        "content": "<p>I am trying to utilize the <code>Polynomial.int</code> function to convert a polynomial in <code>Rat[X]</code> to <code>Int[X]</code>. But I had to prove that it had integer coefficients first, and Lean wouldn't let me write the hypothesis as stated in the documentation:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Polynomial</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">[</span><span class=\"n\">X</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"bp\">.</span><span class=\"n\">coeff</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">pz</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">int</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">hp</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>would complain that <code>failed to synthesize: Membership ℚ Type</code> and also that <code>ℤ</code> is not a subring of <code>ℚ</code>. How is this supposed to be fixed? Thx</p>",
        "id": 497113597,
        "sender_full_name": "lennox",
        "timestamp": 1738371140
    },
    {
        "content": "<p>yeah that code is full of errors. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi></mrow><annotation encoding=\"application/x-tex\">\\Z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">Z</span></span></span></span> is a type not a set, so <code>∈ ℤ</code> makes no sense. The easiest way to fix it is not to make <code>p</code> in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi><mo stretchy=\"false\">[</mo><mi>X</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}[X]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Q</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">]</span></span></span></span> but just to make it in <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Z</mi><mo stretchy=\"false\">[</mo><mi>X</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">\\Z[X]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathbb\">Z</span><span class=\"mopen\">[</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">]</span></span></span></span> I guess. Or you could write some <code>Rat.IsInteger q</code> predicate, defined to mean \"there exists an integer z such that <code>\\u z = q</code> \" and then define a noncomputable function which given a rational and a proof that it's an integer, uses the axiom of choice to return the integer (or you could be clever and just use the numerator, which would then not be noncomputable, but you'd have to prove that it gave the right answer), and then you could map p along this map to get an integer polynomial.</p>",
        "id": 497113919,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738371420
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"870472\">lennox</span> <a href=\"#narrow/channel/113489-new-members/topic/.5CZ.20subring.20of.20.5CQ.3F/near/497113597\">said</a>:</p>\n<blockquote>\n<p>Lean wouldn't let me write the hypothesis as stated in the documentation</p>\n</blockquote>\n<p>I am curious what documentation you are reading, nothing I've seen has <code>∈ ℤ</code> anywhere.</p>",
        "id": 497114102,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738371537
    },
    {
        "content": "<p>My use case is that I have a polynomial with all coeffs divisible by some integer <code>q</code>, and I need to divide by that and still get a polynomial in $\\mathbb{Z}[X]$. I guess I'll have to find some other way around this.</p>",
        "id": 497114231,
        "sender_full_name": "lennox",
        "timestamp": 1738371612
    },
    {
        "content": "<p>The official docs tell me to use a subring, I naturally assumed Z would be a subring of Q (shame on me ig)</p>",
        "id": 497114304,
        "sender_full_name": "lennox",
        "timestamp": 1738371676
    },
    {
        "content": "<p>If all the coefficients are already integers then just map it along the <code>x \\mapsto x / n</code> map</p>",
        "id": 497114441,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738371786
    },
    {
        "content": "<p><code>ℤ</code> is a subring of <code>ℚ</code>, but the notation is different. If you want <code>ℤ</code> as a subring of <code>ℚ</code>, you should write <code>(⊥ : Subring ℚ)</code> (this is the order bottom notation).</p>",
        "id": 497114466,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738371816
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/.5CZ.20subring.20of.20.5CQ.3F/near/497114441\">said</a>:</p>\n<blockquote>\n<p>If all the coefficients are already integers then just map it along the <code>x \\mapsto x / n</code> map</p>\n</blockquote>\n<p>Thx!</p>\n<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/.5CZ.20subring.20of.20.5CQ.3F/near/497114466\">said</a>:</p>\n<blockquote>\n<p><code>ℤ</code> is a subring of <code>ℚ</code>, but the notation is different. If you want <code>ℤ</code> as a subring of <code>ℚ</code>, you should write <code>(⊥ : Subring ℚ)</code> (this is the order bottom notation).</p>\n</blockquote>\n<p>I'll look into that. Could you link a reference?</p>",
        "id": 497114621,
        "sender_full_name": "lennox",
        "timestamp": 1738371936
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Subring.instBot#doc\">docs#Subring.instBot</a></p>",
        "id": 497114691,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1738371973
    },
    {
        "content": "<p>thx!</p>",
        "id": 497114706,
        "sender_full_name": "lennox",
        "timestamp": 1738371988
    }
]