[
    {
        "content": "<p>Hi, newbie here.</p>\n<p>I'm trying to prove that (-1)^n (n is a <code>Nat</code>) is 1 when n is even and -1 when n is odd.<br>\nAt first I tried to prove each separately by induction, and realised that was harder than I expected when I ran into the output below:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">minus_one_power_even</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">even</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">he</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n'</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">case</span><span class=\"w\"> </span><span class=\"n\">succ</span>\n<span class=\"n\">n'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n<span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">even</span><span class=\"w\"> </span><span class=\"n\">n'</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n'</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">he</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">even</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n'</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n'</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>Then I thought perhaps trying to prove something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">even</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">\\-&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">odd</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">\\-&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>would work better, but I thought about it more and it seemed like a very clunky way of doing it.</p>\n<p>What would be the best way to show what I'm trying to show?</p>\n<p>PS: If there's any pre-existing proofs either in the core libraries or in Mathlib that I could use I am <em>also</em> interested in those</p>",
        "id": 543706073,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759917610
    },
    {
        "content": "<p>there are a lot of ways to do it, but each way requires you to first set some things up</p>",
        "id": 543706410,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759917701
    },
    {
        "content": "<p>Correction: It has to be written <code>(-1 : Int)</code> or else I get an error, so the one-liner snippet is incorrect</p>",
        "id": 543706470,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759917718
    },
    {
        "content": "<p>i.e. you can't just always use the first tool you have, you need to be clever with your tools</p>",
        "id": 543706497,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759917724
    },
    {
        "content": "<p>What is <code>even</code> here? Did you mean <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Even#doc\">docs#Even</a> ?</p>",
        "id": 543706658,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1759917785
    },
    {
        "content": "<p>...Ah! Sorry, I forgot to include my definitions. Here they are:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">even</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">m</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">odd</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>I couldn't find anything pre-defined related to even and odd integers online so I started writing my own stuff</p>",
        "id": 543707230,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759917968
    },
    {
        "content": "<p>I guess I was looking in the wrong places</p>",
        "id": 543707261,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759917982
    },
    {
        "content": "<p>then your proof is (-1)^2n = ((-1)^2)^n = 1^n = 1</p>",
        "id": 543707342,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759918005
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib_docs/data/int/parity.html\">https://leanprover-community.github.io/mathlib_docs/data/int/parity.html</a><br>\nWelp now I feel even more stupid than that time I posted a question because I didn't include an <code>import Mathlib</code></p>",
        "id": 543707480,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759918055
    },
    {
        "content": "<p>you're on mathlib3</p>",
        "id": 543707570,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759918092
    },
    {
        "content": "<p>we've all switched to mathlib4 two years ago</p>",
        "id": 543707584,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759918099
    },
    {
        "content": "<blockquote>\n<p>then your proof is (-1)^2n = ((-1)^2)^n = 1^n = 1</p>\n</blockquote>\n<p>Terence Tao was right - I should've tried thinking about the proof first, and only then start to write some Lean4</p>",
        "id": 543707750,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759918144
    },
    {
        "content": "<blockquote>\n<p>you're on mathlib3</p>\n</blockquote>\n<p>I didn't think to check the version of the docs I linked to, I just noted how the things I was interested in <em>were</em> already there (which I'm guessing was obvious to you). As far as I know, I'm using mathlib4 though</p>",
        "id": 543708204,
        "sender_full_name": "Labyrinth",
        "timestamp": 1759918287
    },
    {
        "content": "<p>If your code above compiles, you're using mathlib4 (and lean 4). Your definition of <code>even</code> is not following the capitalisation conventions used in mathlib (terms start with small letters, types start with capitals) and if you'd imported Mathlib and then tried to define Even you would have got an error saying it was defined already, which would have been a good clue.</p>",
        "id": 543720514,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1759922233
    },
    {
        "content": "<p>This would be the proof with mathlib:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">minus_one_power_even</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Even</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">he</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">he</span><span class=\"bp\">.</span><span class=\"n\">neg_pow</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">one_pow</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 543747108,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1759929885
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">minus_one_power_even</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Even</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">aesop</span>\n</code></pre></div>",
        "id": 543747343,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1759929948
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Analysis</span><span class=\"bp\">.</span><span class=\"n\">Normed</span><span class=\"bp\">.</span><span class=\"n\">Ring</span><span class=\"bp\">.</span><span class=\"n\">Lemmas</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">minus_one_power_even</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">Even</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Even</span><span class=\"bp\">.</span><span class=\"n\">neg_one_pow</span>\n</code></pre></div>\n<p>It's actually in the library (found using <code>exact?</code>).</p>",
        "id": 543750064,
        "sender_full_name": "Michael Stoll",
        "timestamp": 1759930615
    },
    {
        "content": "<p>This topic was moved here from <a class=\"stream-topic\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4/topic/Proof.20of.20.28-1.29.5En.3D.2E.2E.2E.20based.20on.20n.27s.20parity\">#lean4 &gt; Proof of (-1)^n=... based on n's parity</a> by <span class=\"user-mention silent\" data-user-id=\"214703\">Yury G. Kudryashov</span>.</p>",
        "id": 543769205,
        "sender_full_name": "Notification Bot",
        "timestamp": 1759935181
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"971939\">@Labyrinth</span> Please post newbie messages to this channel, not to <a class=\"stream\" data-stream-id=\"270676\" href=\"/#narrow/channel/270676-lean4\">#lean4</a>.</p>",
        "id": 543769407,
        "sender_full_name": "Yury G. Kudryashov",
        "timestamp": 1759935227
    }
]