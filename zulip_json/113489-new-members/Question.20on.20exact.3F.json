[
    {
        "content": "<p>Why the first example below works and the second doesn't? To my untrained eye they don't look very different. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact?</span><span class=\"w\"> </span><span class=\"c1\">-- doesn't work, but the following does:</span>\n<span class=\"w\">  </span><span class=\"c1\">--exact le_antisymm h1 h2</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">exact?</span><span class=\"w\"> </span><span class=\"c1\">-- works, and suggests the following:</span>\n<span class=\"w\">  </span><span class=\"c1\">--exact Left.mul_nonneg h1 h2</span>\n</code></pre></div>",
        "id": 514678483,
        "sender_full_name": "Lauri Oksanen",
        "timestamp": 1745783534
    },
    {
        "content": "<p><code>exact?</code> isn't very good at goals of the form <code>X = Y</code> and the reason for this is something to do with discrimination tree keys.</p>",
        "id": 514679772,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1745784499
    },
    {
        "content": "<p>Thank a lot! I did some digging and I understand this now. Equality relations are explicitly excluded in the library search, and they seem to be the only special case, see <a href=\"https://github.com/leanprover/lean4/blob/2ba021ecc21636989aa82aa82c99f9443f3e774a/src/Lean/Meta/Tactic/LibrarySearch.lean#L100\">https://github.com/leanprover/lean4/blob/2ba021ecc21636989aa82aa82c99f9443f3e774a/src/Lean/Meta/Tactic/LibrarySearch.lean#L100</a></p>",
        "id": 514714795,
        "sender_full_name": "Lauri Oksanen",
        "timestamp": 1745811939
    }
]