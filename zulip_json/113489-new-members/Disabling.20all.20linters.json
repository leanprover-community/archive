[
    {
        "content": "<p>I would like to disable all linters. I have found that <code>set_option linter.all false</code> does not work as I expected.</p>\n<p>Consider the following example</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- Warnings for `linter.unusedVariables` and `linter.unusedSimpArgs`</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- Warning for `linter.unusedSimpArgs`</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"o\">]</span>\n\n<span class=\"c1\">-- No warnings</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">all</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedSimpArgs</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">inl</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>This is confusing because <code>linter.unusedSimpArgs</code> is not set:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Elab</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">linter</span><span class=\"bp\">.</span><span class=\"n\">unusedSimpArgs</span><span class=\"bp\">.</span><span class=\"n\">get?</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">‚Üê</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">getOptions</span><span class=\"o\">)</span>\n<span class=\"c1\">-- none</span>\n</code></pre></div>\n<p>So basically I would like to know</p>\n<ol>\n<li>Why is <code>set_option linter.all false</code> not sufficient in the example above? In particular, why is it that <code>linter.unusedSimpArgs</code> is not defaulting to the value of <code>linter.all</code>?</li>\n<li>Is there a way to disable all linter warnings without listing all options explicitly?</li>\n</ol>",
        "id": 574442224,
        "sender_full_name": "fiforeach",
        "timestamp": 1771399700
    },
    {
        "content": "<p>I think you have found a bug in the <code>unusedSimpArgs</code> linter --- as in, I would also expect it to honour that option. In general, setting <code>linter.all</code> to false should disable all linters. I believe <span class=\"user-mention\" data-user-id=\"470149\">@Joachim Breitner</span> worked on the unusedSimpArgs linter: can you comment if this is indeed a bug, or I am overlooking something?</p>",
        "id": 574452561,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771403888
    },
    {
        "content": "<p>My other question for you is, of course: why do you want to disable all linters? Often, linters tell me things I can improve in my code. Disabling them temporarily is useful, but in the end I still want to run them.</p>",
        "id": 574452675,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771403932
    },
    {
        "content": "<p>Thanks for the clarification.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113489-new-members/topic/Disabling.20all.20linters/near/574452675\">said</a>:</p>\n<blockquote>\n<p>My other question for you is, of course: why do you want to disable all linters?</p>\n</blockquote>\n<p>During development. I agree that the linter provides helpful information and the long-term goal is to address all the issues.</p>",
        "id": 574467984,
        "sender_full_name": "fiforeach",
        "timestamp": 1771408631
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"634338\">Michael Rothgang</span> <a href=\"#narrow/channel/113489-new-members/topic/Disabling.20all.20linters/near/574452561\">schrieb</a>:</p>\n<blockquote>\n<p>I think you have found a bug in the <code>unusedSimpArgs</code> linter --- as in, I would also expect it to honour that option. In general, setting <code>linter.all</code> to false should disable all linters. I believe <span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> worked on the unusedSimpArgs linter: can you comment if this is indeed a bug, or I am overlooking something?</p>\n</blockquote>\n<p>Yes, that looks like a bug. Issue (and maybe a PR if simple) welcome.</p>",
        "id": 574476159,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1771411241
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"470149\">Joachim Breitner</span> <a href=\"#narrow/channel/113489-new-members/topic/Disabling.20all.20linters/near/574476159\">said</a>:</p>\n<blockquote>\n<p>Yes, that looks like a bug. Issue (and maybe a PR if simple) welcome.</p>\n</blockquote>\n<p>Ok, thanks. Looks like the linter <code>linter.unusedSimpArgs</code> did not fetch the options correctly.</p>\n<p>I filed issue <a href=\"https://github.com/leanprover/lean4/issues/12559\">#12559</a> and created PR <a href=\"https://github.com/leanprover/lean4/pull/12560\">#12560</a>.</p>",
        "id": 574546271,
        "sender_full_name": "fiforeach",
        "timestamp": 1771430825
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 574548302,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1771431346
    },
    {
        "content": "<p><a href=\"https://github.com/leanprover/lean4/pull/12563\">lean4#12563</a> fixes the remaining such linters. (Help adding tests would be very very welcome!)</p>",
        "id": 574574606,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771438371
    },
    {
        "content": "<p>I wonder: should <code>RCases.linter.unusedRCasesPattern</code> also respect the linter? (And, by the way: is there a reason for the option name? I would have expected <code>linter.unusedRCasesPattern</code> or perhaps <code>linter.rcases.unusedPattern</code> instead of the current name.)</p>",
        "id": 574574782,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771438434
    },
    {
        "content": "<p>My PR fails to build, though - and I neither understand the bootstrapping dance in Lean core, nor have I managed to set up a development environment. Can I summon an expert to help me fix the PR? (For instance, <span class=\"user-mention\" data-user-id=\"479299\">@Jovan Gerbscheid</span>, can we trade? I'll review a non-difficult PR or yours and you fix up my branch to compile?)</p>",
        "id": 574575136,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1771438559
    },
    {
        "content": "<p>What I do in my copy of the lean4 repo is to change the content of the <code>lean-toolchain</code> file to whatever toolchain I want to use (e.g. copy the content of the <code>lean-toolchain</code> file in mathlib). lets you make small changes, like your PR, without having to build lean locally.</p>\n<p>For your PR in particular, I'm guessing you're either missing an import, or haven't opened some required namespace.</p>",
        "id": 574576653,
        "sender_full_name": "Jovan Gerbscheid",
        "timestamp": 1771439017
    },
    {
        "content": "<p>May I suggest to keep PRs as draft until they are ready for review? This is more smooth than having to check CI status</p>",
        "id": 574584792,
        "sender_full_name": "Joachim Breitner",
        "timestamp": 1771441832
    }
]