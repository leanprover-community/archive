[
    {
        "content": "<p>Developing a proof for an exercise and (end of) my current state is </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"bp\">⊢</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>When I try to apply <code>h1</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n</code></pre></div>\n<p>I get the error</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>tactic 'apply' failed, failed to unify\n0 ≥ 0\nwith\n  0 ≥ 0\n</code></pre></div>\n<p>This is a puzzle to me as both expressions are the same and should \"unify\".</p>\n<p>Any suggestions?</p>\n<p>My previous attempts to apply a hypothesis which matched the current goal using apply worked fine.</p>",
        "id": 469523841,
        "sender_full_name": "rzeta0",
        "timestamp": 1726098260
    },
    {
        "content": "<p>This works - but I don't see why the above doesn't.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">norm_num</span>\n</code></pre></div>\n<p>Yes, I know I should have simply done this to the current goal, but I'm interested in why <code>h1</code> couldn't be applied.</p>",
        "id": 469524042,
        "sender_full_name": "rzeta0",
        "timestamp": 1726098411
    },
    {
        "content": "<p>It's a lot easier to answer specifically with an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>.</p>",
        "id": 469525191,
        "sender_full_name": "Julian Berman",
        "timestamp": 1726099301
    },
    {
        "content": "<p>That's odd. <code>apply</code> works for me in this example, though I would typically use <code>assumption</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- apply h  -- works</span>\n<span class=\"w\">  </span><span class=\"n\">assumption</span>\n</code></pre></div>",
        "id": 469525331,
        "sender_full_name": "Benjamin Jones",
        "timestamp": 1726099391
    },
    {
        "content": "<p>The answer <em>probably</em> will be \"your hypothesis is not <em>actually</em> the same\", the zeros are different types.</p>",
        "id": 469525344,
        "sender_full_name": "Julian Berman",
        "timestamp": 1726099406
    },
    {
        "content": "<p>Benjamin - your MWE works for me too.</p>\n<p>I will have to come back with an MWE that shows the problem because the exercise I'm doing is not minimal:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hc</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n</code></pre></div>",
        "id": 469526248,
        "sender_full_name": "rzeta0",
        "timestamp": 1726100028
    },
    {
        "content": "<p>If you put your cursor over all of the <code>0</code>s in your infoview, the tooltip should tell you a bit more about \"which\" zeros they are, which may help.</p>",
        "id": 469526327,
        "sender_full_name": "Julian Berman",
        "timestamp": 1726100064
    },
    {
        "content": "<p>thanks Julian - I will try that after I get some sleep :)</p>",
        "id": 469527045,
        "sender_full_name": "rzeta0",
        "timestamp": 1726100633
    },
    {
        "content": "<p>My guess is that in your actual example, <code>exact_mod_cast h1</code> would have worked. My hypothesis is that one is over Nat while the other is over Int.</p>",
        "id": 469531871,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1726104525
    },
    {
        "content": "<p>Alternatively, it could be the case that you have introduced multiple non-defeq instances.</p>",
        "id": 469561083,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1726119965
    },
    {
        "content": "<p>In this case, the conflict is likely two instances of either <code>Zero</code> or <code>Preorder</code></p>",
        "id": 469561175,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1726120033
    },
    {
        "content": "<p>(or something higher in the hierarchy)</p>",
        "id": 469561319,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1726120127
    },
    {
        "content": "<p>A standard trick in this case is to use <code>convert</code></p>",
        "id": 469567505,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1726122115
    },
    {
        "content": "<p>This will leave you with goals for those parts it failed to unify</p>",
        "id": 469567615,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1726122152
    },
    {
        "content": "<p>So you can see what's going on</p>",
        "id": 469567632,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1726122163
    }
]