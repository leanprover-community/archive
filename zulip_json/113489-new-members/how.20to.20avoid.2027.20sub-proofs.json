[
    {
        "content": "<p>I'm doing an 8.2.8 ex 4 from MoP on Functions.</p>\n<p>It seems I need to provide <strong>27 sub-proofs</strong>! That can't be right. </p>\n<p><strong>Question:</strong> Normally I'd use the <code>&lt;;&gt;</code> structure to repeat a proof but that doesn't seem application here. Help!</p>\n<p>The exercise asks us to use the approach from an earlier example which does indeed provide 4 sub-proofs covering all the possible combinations.</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>27 sub-proofs !</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subatomic</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Subatomic</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bijective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">dsimp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Bijective</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Injective</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Surjective</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- injective</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- surjective</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">    </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">h_p</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h_n</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h_e</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">        </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h_e</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">h_p</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">contradiction</span>\n<span class=\"w\">      </span><span class=\"c1\">--</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">electron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neutron</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">proton</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n</div></div>\n<hr>\n<p>for clarity, <code>Subatomic</code> is defined as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Subatomic</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span>\n<span class=\"w\">  </span><span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"n\">DecidableEq</span>\n</code></pre></div>",
        "id": 500298957,
        "sender_full_name": "rzeta0",
        "timestamp": 1739841338
    },
    {
        "content": "<p>(inside a spoiler block, you need a <code> ```lean4 </code> -  can you edit your post?)</p>",
        "id": 500299065,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739841383
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 500299084,
        "sender_full_name": "rzeta0",
        "timestamp": 1739841403
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> done</p>",
        "id": 500299165,
        "sender_full_name": "rzeta0",
        "timestamp": 1739841458
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> <a href=\"#narrow/channel/113489-new-members/topic/how.20to.20avoid.2027.20sub-proofs/near/500298957\">said</a>:</p>\n<blockquote>\n<p>It seems I need to provide <strong>27 sub-proofs</strong>! That can't be right.</p>\n</blockquote>\n<p>I don't know, the parenthetical here seems consistent with that:</p>\n<blockquote>\n<p>This is like <a href=\"https://hrmacbeth.github.io/math2001/08_Functions.html#bij-card2\">Example 8.2.6</a> and the previous exercise, but with even more (frankly, way too many ….) cases to check.</p>\n</blockquote>\n<p>(From <a href=\"https://hrmacbeth.github.io/math2001/08_Functions.html#id19\">the exercises</a>)</p>",
        "id": 500299314,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739841559
    },
    {
        "content": "<p>That parenthetical is from the exercise after the one in question, but indeed it is surely asking you to find a different way</p>",
        "id": 500299507,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739841674
    },
    {
        "content": "<p>Ah, you're right.</p>",
        "id": 500299597,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739841727
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> <a href=\"#narrow/channel/113489-new-members/topic/how.20to.20avoid.2027.20sub-proofs/near/500298957\">said</a>:</p>\n<blockquote>\n<p>Normally I'd use the <code>&lt;;&gt;</code> structure to repeat a proof but that doesn't seem application here. Help!</p>\n</blockquote>\n<p>You can use <code>cases h_p : f proton &lt;;&gt; cases h_n : f neutron &lt;;&gt; cases h_e : f electron</code> to get yourself in a state where you can add more <code>&lt;;&gt;</code>s or use <code>all_goals</code></p>",
        "id": 500299679,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739841796
    },
    {
        "content": "<p>Question for you <span class=\"user-mention\" data-user-id=\"724904\">@rzeta0</span>: It suggests following the solution to <a href=\"https://hrmacbeth.github.io/math2001/08_Functions.html#bij-card2\">https://hrmacbeth.github.io/math2001/08_Functions.html#bij-card2</a>, which does cases on two values, but you do cases on three values. Both are <code>Injective f → Bijective f</code> proofs. Why is the number of discriminants different in your solution?</p>\n<p>Should two versus three need to depend on the specific type?</p>",
        "id": 500299777,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739841851
    },
    {
        "content": "<p>@Kyle - yes the type has 3 elements. (I updated the OP to list them)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Subatomic</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">proton</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">neutron</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">electron</span>\n<span class=\"w\">  </span><span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"n\">DecidableEq</span>\n</code></pre></div>",
        "id": 500299908,
        "sender_full_name": "rzeta0",
        "timestamp": 1739841945
    },
    {
        "content": "<p>Oh, I see, I misread the solution's structure. Never mind. I thought something different was going on.</p>",
        "id": 500300053,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739842020
    },
    {
        "content": "<p>What I was trying to get at is, if it's proved in a different way, the number of columns in the <code>match</code> depends only on the number of quantifiers, not the number of constructors for the type.</p>",
        "id": 500300142,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1739842077
    },
    {
        "content": "<p>I think you may be onto something there. I can see that if two of the variables are the same, the proof is always by <code>contradiction</code> but I can't see how to use that to reduce the size of the proof.</p>",
        "id": 500300450,
        "sender_full_name": "rzeta0",
        "timestamp": 1739842235
    },
    {
        "content": "<p>I'm 99% certain the course author doesn't want us to write 27 proofs. The final exercise has <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>4</mn><mn>4</mn></msup><mo>=</mo><mn>256</mn></mrow><annotation encoding=\"application/x-tex\">4^4=256</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord\">4</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">256</span></span></span></span> cases !</p>\n<p>I'm pretty sure she is encouraging us to be \"lazy in a good way\" mathematicians. I will sleep on this and try again tomorrow.</p>",
        "id": 500300651,
        "sender_full_name": "rzeta0",
        "timestamp": 1739842355
    },
    {
        "content": "<p>I was able to get the <code>&lt;;&gt;</code> version working; do you want a hint?</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>This tactic, and others like it, is quite helpful when repeated on every goal</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">all_goals</span>\n<span class=\"w\">  </span><span class=\"n\">try</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h_p</span><span class=\"bp\">.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"n\">h_n</span><span class=\"bp\">.</span><span class=\"n\">symm</span>\n</code></pre></div>\n</div></div>",
        "id": 500301229,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1739842693
    },
    {
        "content": "<p>There are like 5 levels of automation you can do here</p>",
        "id": 500301358,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1739842794
    },
    {
        "content": "<p>By the way, MoP has a tactic called \"exhaust\" which is based on \"duper\" (as mentioned in the <a href=\"https://hrmacbeth.github.io/math2001/Mainstream_Lean.html\">transitioning section</a>)</p>",
        "id": 500304182,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1739844437
    },
    {
        "content": "<p>Hi Derek - yes we've been introduced to <code>exhaust</code> using the following pattern:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">exhaust</span>\n</code></pre></div>\n<p>however here the cases would need to be the 'same' in the sense they can all be resolved by <code>exhaust</code> which we're told can resolve true/false.<br>\n.<br>\nSadly I can't see how it is applicable here. I'll keep trying</p>",
        "id": 500404958,
        "sender_full_name": "rzeta0",
        "timestamp": 1739886431
    },
    {
        "content": "<p>I realise that this is probably not the intended solution, but, since I imagine that this is a learning exercise, this is how I would do it:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- this instance is used in the `example` below</span>\n<span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">Subatomic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subatomic</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Subatomic</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bijective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Finite</span><span class=\"bp\">.</span><span class=\"n\">injective_iff_bijective</span><span class=\"bp\">.</span><span class=\"n\">mp</span>\n</code></pre></div>",
        "id": 500416167,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1739889451
    },
    {
        "content": "<p>Here's a take in a direction towards the spirit of MoP restrictions.  (Looking back through my work, I did not manage to solve the case for an inductive type with three constructors.)  But here is a smaller example.</p>\n<p>This finds two groups of cases and uses <code>all_goals</code> and <code>try</code>.  (I was trying to find a way to reorder the goals into groups then take them out in batches, but <code>all_goals</code> and <code>try</code> seems like the way to go). </p>\n<p>It does not solve the problem to my satisfaction because it uses <code>tauto</code> at the end. But I think with some more work it may generalize to the 3 element problem.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Alpha</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"n\">deriving</span><span class=\"w\"> </span><span class=\"n\">DecidableEq</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"w\"> </span><span class=\"n\">Alpha</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Alpha</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Alpha</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Bijective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">hf</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- `f` is injective by assumption</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hf</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"c1\">-- show that `f` is surjective</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">c</span>\n<span class=\"w\">    </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">B</span>\n\n<span class=\"w\">    </span><span class=\"c1\">-- cases for when f A = f B</span>\n<span class=\"w\">    </span><span class=\"n\">all_goals</span><span class=\"w\"> </span><span class=\"n\">try</span>\n<span class=\"w\">      </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">        </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hf</span>\n<span class=\"w\">        </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ha</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">contradiction</span>\n\n<span class=\"w\">    </span><span class=\"c1\">-- cases for when f A ≠ f B</span>\n<span class=\"w\">    </span><span class=\"n\">all_goals</span><span class=\"w\"> </span><span class=\"n\">try</span>\n<span class=\"w\">      </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">&lt;;&gt;</span><span class=\"w\"> </span><span class=\"n\">tauto</span><span class=\"w\">  </span><span class=\"c1\">--&lt;-- cheating with tauto</span>\n</code></pre></div>",
        "id": 500521786,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1739917262
    }
]