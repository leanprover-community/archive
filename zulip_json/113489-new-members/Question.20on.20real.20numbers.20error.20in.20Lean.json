[
    {
        "content": "<p>I am new to Lean and to Zulip, so I apologize in advance if what follows is poorly formatted or if I've misunderstood something really elementary.</p>\n<p>I am independently working through Heather Macbeth's <em>Mechanics of Proof</em> to acquaint myself with Lean. When working on the following problem, Infoview says \"failed to synthesize instance HDiv ℤ ℕ\" for \"-1/2\" in the calc block. What  I have written so far is given below (\"numbers\" is a custom tactic, but I don't think it's causing the issue and so can be ignored).</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Library</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">numbers</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"k\">calc</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">numbers</span>\n<span class=\"w\">       </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">numbers</span>\n</code></pre></div>\n<p>I know real numbers in Lean are not identical with floating-point numbers, which was my initial thought for what went wrong. Beyond that, though, I'm not sure how to interpret the error. Any push in the right direction would be greatly appreciated!</p>",
        "id": 537353286,
        "sender_full_name": "Ryan Dau",
        "timestamp": 1756842163
    },
    {
        "content": "<p>First of all, <code>calc</code> with just a single line doesn't work</p>",
        "id": 537353693,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756842300
    },
    {
        "content": "<p>Oh, whoops - my apologies. Let me edit my post, I did not include everything.</p>",
        "id": 537353916,
        "sender_full_name": "Ryan Dau",
        "timestamp": 1756842401
    },
    {
        "content": "<p>Second, you can write <code>(-1/2 : ℝ)</code> instead</p>",
        "id": 537354270,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1756842591
    },
    {
        "content": "<p>The problem is that <code>-1/2</code> is interpreted as integer division here and it rounds down (if the denominator is positie). So you have <code>-1 / 2 = -1</code>, <code>(-1) ^ 2 = 1</code>, <code>1 / 4 = 0</code>, <code>1 / 2 = 0</code> so your first line says <code>1 = 0</code> and your second <code>0 &lt; 0</code>.</p>",
        "id": 537354899,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1756842881
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span>s suggestion makes it interpret them as real numbers instead of integers.</p>",
        "id": 537354966,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1756842905
    },
    {
        "content": "<p>Ah, I see! Changing it along the lines suggested has resolved the issue. Thanks to both of you!</p>",
        "id": 537355160,
        "sender_full_name": "Ryan Dau",
        "timestamp": 1756842991
    }
]