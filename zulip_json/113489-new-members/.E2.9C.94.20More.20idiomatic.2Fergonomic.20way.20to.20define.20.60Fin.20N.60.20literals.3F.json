[
    {
        "content": "<p>I have a <code>Fin N</code> type and was wondering whether there was a better way to do literals than <code>⟨1, by decide⟩</code>?</p>",
        "id": 479330201,
        "sender_full_name": "Philogy",
        "timestamp": 1730137655
    },
    {
        "content": "<p>Can you give a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> ?</p>",
        "id": 479330511,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1730137743
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113489-new-members/topic/More.20idiomatic.2Fergonomic.20way.20to.20define.20.60Fin.20N.60.20literals.3F/near/479330511\">said</a>:</p>\n<blockquote>\n<p>Can you give a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> ?</p>\n</blockquote>\n<p>For example I have a <code>Uint256</code> type:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Uint256</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"mi\">115792089237316195423570985008687907853269984665640564039457584007913129639936</span>\n<span class=\"kn\">abbrev</span><span class=\"w\"> </span><span class=\"n\">Uint256</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Uint256</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">bool_to_uint</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Uint256</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"bp\">⟩</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">false</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"bp\">⟩</span>\n</code></pre></div>\n<p>and doing <code>&lt;1, by decide&gt;</code> in places just seems more cumbersome than it needs to be?</p>",
        "id": 479330765,
        "sender_full_name": "Philogy",
        "timestamp": 1730137839
    },
    {
        "content": "<p>Ah I found how, you just need to implement the class <code>OfNat</code> for this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">namespace</span><span class=\"w\"> </span><span class=\"n\">UInt256</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">UInt256</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">OfNat</span><span class=\"w\"> </span><span class=\"n\">UInt256</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">UInt256</span><span class=\"bp\">.</span><span class=\"n\">ofNat</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">⟩</span>\n<span class=\"kn\">end</span><span class=\"w\"> </span><span class=\"n\">UInt256</span>\n</code></pre></div>",
        "id": 479331213,
        "sender_full_name": "Philogy",
        "timestamp": 1730137938
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"739332\">Philogy</span> has marked this topic as resolved.</p>",
        "id": 479331259,
        "sender_full_name": "Notification Bot",
        "timestamp": 1730137944
    },
    {
        "content": "<p>Things would be a lot easier for you if you made <code>def Uint256.size</code> an <code>abbrev</code></p>",
        "id": 479332765,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1730138533
    },
    {
        "content": "<p>The <code>ofNat</code> stuff will then be automatic</p>",
        "id": 479332832,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1730138560
    },
    {
        "content": "<p>You could also consider using <code>Bitvec 256</code> instead</p>",
        "id": 479332868,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1730138571
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113489-new-members/topic/.E2.9C.94.20More.20idiomatic.2Fergonomic.20way.20to.20define.20.60Fin.20N.60.20literals.3F/near/479332868\">said</a>:</p>\n<blockquote>\n<p>You could also consider using <code>Bitvec 256</code> instead</p>\n</blockquote>\n<p>Ooh, that's super neat, nice thanks!</p>",
        "id": 479333567,
        "sender_full_name": "Philogy",
        "timestamp": 1730138827
    }
]