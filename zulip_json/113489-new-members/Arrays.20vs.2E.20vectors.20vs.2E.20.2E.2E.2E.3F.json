[
    {
        "content": "<p>I have some combinatorial data that, if I were using a conventional programming language or CAS, I would simply \"hardcode\" as a one-dimensional array of unsigned integers. What is the recommended way to do this in Lean, if I have a few hundred or maybe a few thousand unsigned integers? Two options that I'm aware of are:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">v2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">!</span><span class=\"o\">[</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">v2</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>However, I don't fully understand what I'm doing in either case. The <code>Array</code> option actually doesn't seem to work for me; more precisely, it works in the above example, but when I create a large <code>Array</code> then I get the dreaded \"maximum recursion depth exceeded\" error.  I can circumvent that with <code>v1[0]!</code> instead of <code>v1[0]</code> but  I don't understand all the implications of omitting the bounds checking.</p>\n<p>The second option is what I'm currently using, but it also has some unexpected (to me) behavior. In the above example, <code>v1[8]</code> generates an error but <code>v2 8</code> simply \"wraps around.\" Why doesn't <code>v2 8</code> generate an error?</p>",
        "id": 558928708,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1763938497
    },
    {
        "content": "<p>because <code>(8 : Fin 5)</code> is valid so <code>v2 8</code> also works</p>",
        "id": 558931445,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763941582
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"478409\">Timothy Chow</span> <a href=\"#narrow/channel/113489-new-members/topic/Arrays.20vs.2E.20vectors.20vs.2E.20.2E.2E.2E.3F/near/558928708\">said</a>:</p>\n<blockquote>\n<p>I have some combinatorial data that, if I were using a conventional programming language or CAS, I would simply \"hardcode\" as a one-dimensional array of unsigned integers.</p>\n</blockquote>\n<p>I would probably read it in from another file</p>",
        "id": 558931456,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763941599
    },
    {
        "content": "<p>can you tell me what you are using all these numbers for?</p>",
        "id": 558931509,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763941668
    },
    {
        "content": "<p>for example, do you need to know at compile time the length of the array, or the contents of the array, or just that it's a big array of numbers?</p>",
        "id": 558931553,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763941722
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"478409\">Timothy Chow</span> <a href=\"#narrow/channel/113489-new-members/topic/Arrays.20vs.2E.20vectors.20vs.2E.20.2E.2E.2E.3F/near/558928708\">said</a>:</p>\n<blockquote>\n<p>The second option is what I'm currently using, but it also has some unexpected (to me) behavior. In the above example, <code>v1[8]</code> generates an error but <code>v2 8</code> simply \"wraps around.\" Why doesn't <code>v2 8</code> generate an error?</p>\n</blockquote>\n<p><code>v2</code> indices are of type <code>Fin n</code> (where <code>n</code> is a length). The conversion of integer literals to <code>Fin n</code> is defined to wrap around. Also arithmetic operations on type <code>Fin n</code> do wrap around (in other words, it's arithmetic modulo <code>n</code>).  If you want to avoid wrapping around, you could work with indices of type Nat. But then, to construct <code>Fin n</code> from <code>idx : Nat</code>, you have to provide the proof <code>idx &lt; n</code>. Which is basically  the same proof that array requires.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"478409\">Timothy Chow</span> <a href=\"#narrow/channel/113489-new-members/topic/Arrays.20vs.2E.20vectors.20vs.2E.20.2E.2E.2E.3F/near/558928708\">said</a>:</p>\n<blockquote>\n<p>The <code>Array</code> option actually doesn't seem to work for me; more precisely, it works in the above example, but when I create a large <code>Array</code> then I get the dreaded \"maximum recursion depth exceeded\" error.</p>\n</blockquote>\n<p>I think, you can report that as a bug. Here's <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">14</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">15</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">19</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">22</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">23</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">25</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">26</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">28</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">29</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">30</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">31</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">32</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">33</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">34</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">35</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">36</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">38</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">39</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">40</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">41</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">43</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">44</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">46</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">47</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">48</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">49</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">50</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">51</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">52</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">53</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">54</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">55</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">56</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">57</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">58</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">59</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">60</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">61</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">62</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">63</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">64</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">65</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">66</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">67</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">68</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">69</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">70</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">71</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">72</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">74</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">75</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">76</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">77</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">78</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">79</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">80</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">81</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">82</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">83</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">84</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">85</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">86</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">87</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">88</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">90</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">91</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">92</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">93</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">94</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">95</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">96</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">97</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">98</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">99</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">101</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">102</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">103</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">104</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">105</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">106</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">107</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">108</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">109</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">110</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">111</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">112</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">113</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">114</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">115</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">116</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">117</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">118</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">119</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">121</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>This works though:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">14</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">15</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">19</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">22</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">23</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">25</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">26</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">28</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">29</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">30</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">31</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">32</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">33</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">34</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">35</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">36</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">38</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">39</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">40</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">41</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">43</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">44</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">46</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">47</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">48</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">49</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">50</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">51</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">52</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">53</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">54</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">55</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">56</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">57</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">58</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">59</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">60</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">61</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">62</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">63</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">64</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">65</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">66</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">67</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">68</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">69</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">70</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">71</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">72</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">74</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">75</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">76</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">77</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">78</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">79</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">80</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">81</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">82</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">83</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">84</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">85</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">86</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">87</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">88</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">90</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">91</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">92</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">93</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">94</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">95</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">96</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">97</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">98</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">99</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">101</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">102</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">103</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">104</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">105</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">106</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">107</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">108</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">109</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">110</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">111</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">112</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">113</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">114</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">115</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">116</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">117</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">118</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">119</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">121</span><span class=\"o\">]</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">122</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">get_elem_tactic</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">v</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">v1</span>\n</code></pre></div>\n<p>It seems like Lean has some issues with handling big array literals. You can try parsing data from a file, or using something like above as a workaround.</p>",
        "id": 558931634,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1763941819
    },
    {
        "content": "<p>and do you want this to be optimized for kernel indexing into the array or runtime indexing into the array</p>",
        "id": 558931668,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763941855
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"870257\">Jakub Nowak</span> <a href=\"#narrow/channel/113489-new-members/topic/Arrays.20vs.2E.20vectors.20vs.2E.20.2E.2E.2E.3F/near/558931634\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"478409\">Timothy Chow</span> <a href=\"#narrow/channel/113489-new-members/topic/Arrays.20vs.2E.20vectors.20vs.2E.20.2E.2E.2E.3F/near/558928708\">said</a>:</p>\n<blockquote>\n<p>The <code>Array</code> option actually doesn't seem to work for me; more precisely, it works in the above example, but when I create a large <code>Array</code> then I get the dreaded \"maximum recursion depth exceeded\" error.</p>\n</blockquote>\n<p>I think, you can report that as a bug. Here's <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">14</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">15</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">19</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">22</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">23</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">25</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">26</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">28</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">29</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">30</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">31</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">32</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">33</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">34</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">35</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">36</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">38</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">39</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">40</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">41</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">43</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">44</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">46</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">47</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">48</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">49</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">50</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">51</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">52</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">53</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">54</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">55</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">56</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">57</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">58</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">59</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">60</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">61</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">62</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">63</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">64</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">65</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">66</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">67</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">68</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">69</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">70</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">71</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">72</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">74</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">75</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">76</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">77</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">78</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">79</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">80</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">81</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">82</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">83</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">84</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">85</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">86</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">87</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">88</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">90</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">91</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">92</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">93</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">94</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">95</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">96</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">97</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">98</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">99</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">101</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">102</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">103</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">104</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">105</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">106</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">107</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">108</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">109</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">110</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">111</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">112</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">113</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">114</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">115</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">116</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">117</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">118</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">119</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">121</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>This works though:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">14</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">15</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">19</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">22</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">23</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">25</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">26</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">28</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">29</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">30</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">31</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">32</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">33</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">34</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">35</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">36</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">38</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">39</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">40</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">41</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">43</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">44</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">46</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">47</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">48</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">49</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">50</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">51</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">52</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">53</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">54</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">55</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">56</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">57</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">58</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">59</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">60</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">61</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">62</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">63</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">64</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">65</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">66</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">67</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">68</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">69</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">70</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">71</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">72</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">74</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">75</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">76</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">77</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">78</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">79</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">80</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">81</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">82</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">83</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">84</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">85</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">86</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">87</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">88</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">90</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">91</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">92</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">93</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">94</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">95</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">96</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">97</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">98</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">99</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">101</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">102</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">103</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">104</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">105</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">106</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">107</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">108</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">109</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">110</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">111</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">112</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">113</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">114</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">115</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">116</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">117</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">118</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">119</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">121</span><span class=\"o\">]</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Array</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hv</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">122</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">get_elem_tactic</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">v</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"n\">v1</span>\n</code></pre></div>\n<p>It seems like Lean has some issues with handling big array literals. You can try parsing data from a file, or using something like above as a workaround.</p>\n</blockquote>\n<p>I think, it is unfolding the array and taking a while to compute its length one by one. But it works if you fix the length</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Vector</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"mi\">122</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"n\">v</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">7</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">11</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">14</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">15</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">17</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">18</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">19</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">21</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">22</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">23</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">25</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">26</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">27</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">28</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">29</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">30</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">31</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">32</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">33</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">34</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">35</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">36</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">38</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">39</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">40</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">41</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">43</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">44</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">45</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">46</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">47</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">48</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">49</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">50</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">51</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">52</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">53</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">54</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">55</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">56</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">57</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">58</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">59</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">60</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">61</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">62</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">63</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">64</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">65</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">66</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">67</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">68</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">69</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">70</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">71</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">72</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">73</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">74</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">75</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">76</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">77</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">78</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">79</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">80</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">81</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">82</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">83</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">84</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">85</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">86</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">87</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">88</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">89</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">90</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">91</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">92</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">93</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">94</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">95</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">96</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">97</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">98</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">99</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">100</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">101</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">102</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">103</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">104</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">105</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">106</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">107</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">108</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">109</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">110</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">111</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">112</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">113</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">114</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">115</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">116</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">117</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">118</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">119</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">120</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">121</span><span class=\"o\">]</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">v1</span><span class=\"o\">[</span><span class=\"mi\">0</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 558931777,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763941957
    },
    {
        "content": "<p>But <code>#eval v1.size</code> works, even with much longer array. So the issue is not in calculating the size.</p>",
        "id": 558931816,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1763942010
    },
    {
        "content": "<p>but the elaborator doesn't use <code>#eval</code></p>",
        "id": 558931907,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763942088
    },
    {
        "content": "<p>Ah, you're right.</p>",
        "id": 558931924,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1763942103
    },
    {
        "content": "<p>Although <code>get_elem_tactic</code> was able to prove <code>v.size = 122</code>, no problem <del>(works with much longer too)</del>.</p>",
        "id": 558931975,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1763942154
    },
    {
        "content": "<p>but can it prove <code>0 &lt; v1.size</code></p>",
        "id": 558932095,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763942293
    },
    {
        "content": "<p>Ah, wait, no, sorry, it doesn't work with <code>v.size = 200</code>.</p>",
        "id": 558932226,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1763942435
    },
    {
        "content": "<p>I guess the tactic shouldn't try calculate the size. Instead, it should give the proof <code>0 &lt; v.size</code> just by checking it has at least one element. Not sure if that would be possible?</p>",
        "id": 558932676,
        "sender_full_name": "Jakub Nowak",
        "timestamp": 1763942848
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/Arrays.20vs.2E.20vectors.20vs.2E.20.2E.2E.2E.3F/near/558931509\">said</a>:</p>\n<blockquote>\n<p>can you tell me what you are using all these numbers for?</p>\n</blockquote>\n<p>There are a variety of situations I have in mind, but in general the idea is that there's some moderately large, fixed combinatorial object that I want to prove has some property, and use to prove other general facts. The object might be a finite graph, or a combinatorial design, or a Young tableau, or any of a long list of possibilities. I picked a one-dimensional array as the simplest case; an integer partition or a permutation could be represented as a one-dimensional array, for example.</p>\n<p>In particular, the data isn't going to change. I'm not going to be modifying the numbers or increasing the size of the array.</p>",
        "id": 558939611,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1763950039
    },
    {
        "content": "<p>then if it's not too too big I would probably store it in a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Vector#doc\">docs#Vector</a> (for easy writing down) or in a <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.RArray#doc\">docs#Lean.RArray</a> (for optimized access time)</p>",
        "id": 558939819,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763950240
    },
    {
        "content": "<p>but I feel like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.RArray#doc\">docs#Lean.RArray</a> you should only use that one if the only thing you're going to be doing with it is looking up its entries over and over</p>",
        "id": 558939971,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763950380
    },
    {
        "content": "<p>if it's too big to reasonably fit in a Lean file without being an significant interruption then I would write some meta-code to read it in from another file</p>",
        "id": 558940055,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763950473
    },
    {
        "content": "<p>Thanks; I think probably Vector with an explicitly specified length is the way to go, at least for the initial examples I have in mind. What about a 2-dimensional array, though? Matrix, I guess?</p>",
        "id": 558940364,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1763950752
    },
    {
        "content": "<p>oh actually I guess if it's for proving things maybe <code>List.Vector</code> would be better</p>",
        "id": 558940441,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763950835
    },
    {
        "content": "<p>for matrices I would just flatten it I feel like 2d stuff is too complicated</p>",
        "id": 558940454,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763950858
    },
    {
        "content": "<p>another option is a vector of vectors</p>",
        "id": 558940465,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763950871
    },
    {
        "content": "<p><code>Matrix</code> is really not yeah actually no <code>Matrix</code> is probably fine</p>",
        "id": 558940518,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1763950931
    },
    {
        "content": "<p>Maybe it's also worth noting that it's easy to convert between the representation, since <code>v1 = .ofFn v2</code> (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Array.ofFn#doc\">docs#Array.ofFn</a>) and <code>v2 = v1.get</code> (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Array.get#doc\">docs#Array.get</a>)</p>",
        "id": 558941858,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1763952189
    },
    {
        "content": "<p>What's the difference between <code>Vector</code> and <code>List.Vector</code>?</p>",
        "id": 558941861,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1763952191
    },
    {
        "content": "<p>The same as the difference between <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Array#doc\">docs#Array</a> and <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List#doc\">docs#List</a></p>",
        "id": 558941880,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1763952221
    },
    {
        "content": "<p>Let me try asking the question another way. What are the pros and cons of using <code>Vector</code> versus <code>List.Vector</code> for the application I described above?</p>",
        "id": 558942006,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1763952337
    },
    {
        "content": "<p>the docs for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.Vector#doc\">docs#List.Vector</a> briefly describe the difference: <code>List.Vector</code> is better when you're reasoning about the list mathematically and <code>Vector</code> is better when it's just a data store for programming / verification</p>",
        "id": 558952711,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1763960456
    },
    {
        "content": "<p>Yes, I saw that. But why is <code>List.Vector</code> better when you're reasoning about the list mathematically and why is <code>Vector</code> better when it's just a data store?</p>",
        "id": 559023923,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1763985654
    },
    {
        "content": "<p>I thought we were going to remove <code>List.Vector</code></p>",
        "id": 559029400,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1763987110
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"870257\">Jakub Nowak</span> <a href=\"#narrow/channel/113489-new-members/topic/Arrays.20vs.2E.20vectors.20vs.2E.20.2E.2E.2E.3F/near/558931634\">said</a>:</p>\n<blockquote>\n<p>I think, you can report that as a bug.</p>\n</blockquote>\n<p>I forgot to mention that, while searching the Zulip archives for help, I noticed that something similar was reported <a href=\"#narrow/channel/458659-Equational/topic/Austin.20pairs/near/485858266\">a while ago</a>. But I wasn't able to extract a clear answer to my question from that discussion.</p>",
        "id": 559062021,
        "sender_full_name": "Timothy Chow",
        "timestamp": 1763994961
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"380294\">Matt Diamond</span> <a href=\"#narrow/channel/113489-new-members/topic/Arrays.20vs.2E.20vectors.20vs.2E.20.2E.2E.2E.3F/near/558952711\">said</a>:</p>\n<blockquote>\n<p>the docs for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.Vector#doc\">docs#List.Vector</a> briefly describe the difference: <code>List.Vector</code> is better when you're reasoning about the list mathematically and <code>Vector</code> is better when it's just a data store for programming / verification</p>\n</blockquote>\n<p>you can get the underlying list of a vector from <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Vector#doc\">docs#Vector</a> . Technically Vector is a size limited array which in turn is a list (from the proof side). Given <code>v : Vector a n</code>, you can get the list with <code>v.toArray.toList</code></p>",
        "id": 559067889,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1763996145
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"478409\">Timothy Chow</span> <a href=\"#narrow/channel/113489-new-members/topic/Arrays.20vs.2E.20vectors.20vs.2E.20.2E.2E.2E.3F/near/559023923\">said</a>:</p>\n<blockquote>\n<p>Yes, I saw that. But why is <code>List.Vector</code> better when you're reasoning about the list mathematically and why is <code>Vector</code> better when it's just a data store?</p>\n</blockquote>\n<p>I don't know the answer to this, so probably shouldn't be contributing to this thread, but for the analogous question with natural numbers the standard unary representation with <code>zero</code> and <code>succ</code> is better for proving (because the generated induction principle is the one you want) but lousy for calculating (because a number like 10^6 takes up 10^6 space as S(S(S(S(S(...S(zero))...), whereas the standard binary representation for nats (<code>WithZero PosNum</code>, where PosNum has the three constructors <code>one</code>, <code>double</code> and <code>double_then_add_one</code>) is going to be much fiddlier for proving (even defining multiplication is going to be fiddly, let alone proving that induction works) but much better for computing (becasue 10^6 now is stored in size log(10^6)).</p>",
        "id": 559068179,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1763996213
    },
    {
        "content": "<p>Fwiw, depending on what you want to prove, the Array API (and Vector API) might be adequate. So you probably don't need to access the underlying list.</p>",
        "id": 559068511,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1763996270
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113489-new-members/topic/Arrays.20vs.2E.20vectors.20vs.2E.20.2E.2E.2E.3F/near/559029400\">said</a>:</p>\n<blockquote>\n<p>I thought we were going to remove <code>List.Vector</code></p>\n</blockquote>\n<p>I wish!</p>",
        "id": 559113603,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1764006427
    },
    {
        "content": "<p>I do think that <code>Vector</code> is the best choice a lot of the time. In practice if one wants to think more mathematically, <code>Fin n -&gt; _</code> is better supported by the library anyway - List.Vector is just not very functional.</p>",
        "id": 559113853,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1764006501
    },
    {
        "content": "<p>(I think we should have a Tuple abbreviation for that but that is a different argument.)</p>",
        "id": 559113967,
        "sender_full_name": "Wrenna Robson",
        "timestamp": 1764006541
    }
]