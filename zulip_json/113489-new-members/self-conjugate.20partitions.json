[
    {
        "content": "<p>In Mathlib, the distinct odd partitions are already defined. I'd like to know how to define self-conjugate partitions and prove that their counts are equal, but I'm not sure how to proceed.</p>",
        "id": 528341500,
        "sender_full_name": "ShaoYu",
        "timestamp": 1752240705
    },
    {
        "content": "<p>(ref: <a href=\"https://mathworld.wolfram.com/Self-ConjugatePartition.html\">https://mathworld.wolfram.com/Self-ConjugatePartition.html</a>)</p>",
        "id": 528341994,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752240875
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"917771\">ShaoYu</span> <a href=\"#narrow/channel/113489-new-members/topic/self-conjugate.20partitions/near/528341500\">said</a>:</p>\n<blockquote>\n<p>In Mathlib, the distinct odd partitions are already defined. I'd like to know how to define self-conjugate partitions and prove that their counts are equal, but I'm not sure how to proceed.</p>\n</blockquote>\n<p>I assume you would start with a definition of conjugate</p>",
        "id": 528342041,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752240895
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/self-conjugate.20partitions/near/528341994\">said</a>:</p>\n<blockquote>\n<p>(ref: <a href=\"https://mathworld.wolfram.com/Self-ConjugatePartition.html\">https://mathworld.wolfram.com/Self-ConjugatePartition.html</a>)</p>\n</blockquote>\n<p>I encountered some errors while trying to define it and couldn't resolve them.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Std</span><span class=\"w\"> </span><span class=\"n\">List</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Multiset</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span><span class=\"w\"> </span><span class=\"n\">Partition</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">List</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"w\"> </span><span class=\"n\">YoungDiagram</span>\n\n\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">self_conjugate'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">YoungDiagram</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">μ.cells.card</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">μ.transpose.cells</span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">μ.cells</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">μ.cells</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"n\">Finset.empty</span>\n\n<span class=\"k\">#check</span><span class=\"w\"> </span><span class=\"n\">self_conjugate'</span>\n\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">self_conjugate</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Finset.univ.filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">self_conjugate'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">getD</span><span class=\"w\"> </span><span class=\"bp\">∅</span>\n</code></pre></div>",
        "id": 528350520,
        "sender_full_name": "ShaoYu",
        "timestamp": 1752243740
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"917771\">@ShaoYu</span> I'm not sure what <code>self_conjugate'</code> is meant to do there. You want to define <code>IsSelfConjugate</code> as a <code>Prop</code> on <code>YoungDiagram</code>.</p>",
        "id": 528353822,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752244794
    },
    {
        "content": "<p>Determine whether the Young diagram of a natural number partition of n corresponds to a self-conjugate partition, and then combine the partitions that satisfy this condition into a set.</p>",
        "id": 528356686,
        "sender_full_name": "ShaoYu",
        "timestamp": 1752245735
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Std</span><span class=\"w\"> </span><span class=\"n\">List</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Multiset</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span><span class=\"w\"> </span><span class=\"n\">Partition</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">List</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"w\"> </span><span class=\"n\">YoungDiagram</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">self_conjugate'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">YoungDiagram</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">transpose</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"n\">μ</span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">empty</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">self_conjugate'</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">self_conjugate</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">YoungDiagram</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">self_conjugate'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">erase</span><span class=\"w\"> </span><span class=\"bp\">∅</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 528372258,
        "sender_full_name": "ShaoYu",
        "timestamp": 1752250942
    },
    {
        "content": "<p>Is this code LLM-generated? I think you'd be better off learning some of the basics first.</p>",
        "id": 528411968,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1752271621
    },
    {
        "content": "<p>No, I wrote this myself. But you’re right—I really need to learn the basics of Lean. Whenever I try to define something new or write my own statements, I don’t know where to start, and I often make mistakes.May you help me solve the mistake?<br>\nThanks.</p>",
        "id": 528419284,
        "sender_full_name": "ShaoYu",
        "timestamp": 1752278838
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"917771\">@ShaoYu</span> write a function <code>IsSelfConjugate</code> that takes a young diagram and returns a <code>Prop</code> that says it is self conjugate</p>",
        "id": 528421724,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752281556
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">Std</span><span class=\"w\"> </span><span class=\"n\">List</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Multiset</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span><span class=\"w\"> </span><span class=\"n\">Partition</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"n\">List</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"w\"> </span><span class=\"n\">YoungDiagram</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">IsSelfConjugate</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">YoungDiagram</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">transpose</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">cells</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">DecidablePred</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">IsSelfConjugate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">decEq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">transpose</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">decidableEq</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">transpose</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">cells</span>\n<span class=\"w\">  </span><span class=\"n\">inferInstanceAs</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Decidable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"bp\">.</span><span class=\"n\">card</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">transpose</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"bp\">.</span><span class=\"n\">cells</span><span class=\"o\">))</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">self_conjugate''</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">YoungDiagram</span><span class=\"o\">):=</span>\n<span class=\"w\">   </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">univ</span><span class=\"bp\">.</span><span class=\"n\">filter</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">μ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">IsSelfConjugate</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">μ</span>\n</code></pre></div>\n<p>I tried it, but  my goal is to prove that the card of partitions into distinct odd parts is equal to the card of self-conjugate partitions, and I encountered the error failed to synthesize Fintype YoungDiagram.</p>",
        "id": 528454847,
        "sender_full_name": "ShaoYu",
        "timestamp": 1752323027
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"917771\">@ShaoYu</span> your IsSelfConjugate is now more correct. you should always specify the type of the thing you’re defining, which means you should replace := with : Prop :=</p>\n<p>also YoungDiagram is not a Fintype because you haven’t restricted n.</p>",
        "id": 528456183,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752324493
    },
    {
        "content": "<p>i don’t know what’s the best way to solve this problem right now because i don’t know what the conventions are</p>",
        "id": 528456212,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752324525
    },
    {
        "content": "<p>in some sense your definition of IsSelfConjugate is wrong because you included a condition on the cardinality, these should be separate things.</p>",
        "id": 528456245,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752324553
    },
    {
        "content": "<p>okok,thank you very much,I will continue searching for a solution.</p>",
        "id": 528456927,
        "sender_full_name": "ShaoYu",
        "timestamp": 1752325226
    }
]