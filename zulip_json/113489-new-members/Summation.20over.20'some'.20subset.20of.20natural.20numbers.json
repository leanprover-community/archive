[
    {
        "content": "<p><a href=\"/user_uploads/3121/cpAZD_IIkSyXohhhEnC5J6n-/image.png\">image.png</a><br>\nHello!<br>\nI'm trying to formalize the theorem statement here but I'm running into issues in defining that there exists some not-predefined subset of the natural number for the summation. I'm attaching my code below, which possibly has many errors. Any guidance or criticims will be great!</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/cpAZD_IIkSyXohhhEnC5J6n-/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"547x416\" src=\"/user_uploads/thumbnail/3121/cpAZD_IIkSyXohhhEnC5J6n-/image.png/840x560.webp\"></a></div><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Topology</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">InfiniteSum</span><span class=\"bp\">.</span><span class=\"n\">Real</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span>\n\n<span class=\"sd\">/--</span>\n<span class=\"sd\">**Proposition**</span>\n<span class=\"sd\">Let `1 ≤ x &lt; ∑' n, 1 / (n^2 : ℝ)`.</span>\n<span class=\"sd\">Then there exists a set `A ⊆ ℕ` such that `∑' n in A, 1 / (n^2 : ℝ) = x`.</span>\n<span class=\"sd\">-/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">subseriesDenseInBasel</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 495778527,
        "sender_full_name": "Anika-Roy",
        "timestamp": 1737746659
    },
    {
        "content": "<p><code>∑' n : A</code> seems to parse, at least</p>",
        "id": 495792547,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1737752589
    },
    {
        "content": "<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi></mrow><annotation encoding=\"application/x-tex\">A</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span></span></span></span> may legitimately be an infinite set here, right?</p>",
        "id": 495792706,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1737752656
    },
    {
        "content": "<p>Indeed, for all but countably many values of <code>x</code>, <code>A</code> <em>must</em> be an infinite set.</p>",
        "id": 495795314,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1737753940
    },
    {
        "content": "<p>It looks like <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=tsum#doc\">docs#tsum</a> doesn't support summing over <code>Prop</code>s, so <code>∑' n ∈ A, ...</code> fails.</p>",
        "id": 495805693,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1737758994
    },
    {
        "content": "<p>you could write <code>∑' n, ∑ᶠ (_ : n ∈ A), (1 : ℝ) / (n : ℝ)^2</code> to skip the usual computability assumptions</p>",
        "id": 495871994,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1737812424
    },
    {
        "content": "<p>i believe the api is less than awesome tho</p>",
        "id": 495872018,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1737812452
    }
]