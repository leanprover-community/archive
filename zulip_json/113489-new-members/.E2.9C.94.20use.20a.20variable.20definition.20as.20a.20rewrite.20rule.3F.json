[
    {
        "content": "<p>If I have a definition in scope, like <code>**n** : ℕ := x + 1</code> ... is there a way to directly refer to that definition to expand the goal?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">:</span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"c1\">-- just any arbitrary definition</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"c1\">-- goal is n &gt; y and I want to rewrite using the</span>\n<span class=\"w\">    </span><span class=\"c1\">-- definition of n:</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"o\">[</span><span class=\"n\">hn</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"c1\">-- those two lines work:</span>\n<span class=\"w\">    </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">    </span><span class=\"c1\">-- but is there a simpler way?</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>Is there a tactic that lets me do this?</p>\n<p>If it matters, the reason for the <code>let</code> in the first place is because I'm trying to prove something about an algorithm, and the <code>let</code> is part of the algorithm, rather than just something I'm introducing only for the proof.</p>",
        "id": 453042560,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1721598337
    },
    {
        "content": "<p>I see that just writing <code>show x + 1 &gt; y</code> unifies with the goal and works without those two lines.... </p>\n<p>But assume the goal is big and complicated and I don't want to type it. I just want something that rewrites the goal using a local definition as a rewrite rule.</p>",
        "id": 453042671,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1721598426
    },
    {
        "content": "<p>Aha! <code>dsimp[n]</code> is what i was looking for!</p>",
        "id": 453042951,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1721598690
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"423842\">Michal Wallace (tangentstorm)</span> has marked this topic as resolved.</p>",
        "id": 453042955,
        "sender_full_name": "Notification Bot",
        "timestamp": 1721598696
    },
    {
        "content": "<p>Alternatively, <code>unfold_lets [n]</code></p>",
        "id": 453083359,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1721625646
    }
]