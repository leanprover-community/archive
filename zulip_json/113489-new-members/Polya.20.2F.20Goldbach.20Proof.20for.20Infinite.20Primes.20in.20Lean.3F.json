[
    {
        "content": "<p>Hi,</p>\n<p>I am very new to Lean, and am trying to learn by figuring out how to properly write some classic proofs in Lean. The one I am currently attempting is the classic Polya / Goldbach proof for the infinitude of primes.</p>\n<p>This classic proof first involves first proving that any two Fermat numbers are relatively prime. (Feel free to leave that out-of-scope for this question.) Assuming Fermat numbers being relatively prime is already done, how would one represent the core idea of the Polya / Goldbach proof for the infinitude of primes as expressed in English below in Lean?</p>\n<blockquote>\n<p>There are infinitely many distinct Fermat numbers, each of which is divisible by an odd prime, and since any two Fermat numbers are relatively prime, these odd primes must all be distinct. Thus, there are infinitely many primes.</p>\n</blockquote>",
        "id": 469220157,
        "sender_full_name": "North Eastern Ohio Mac Developer",
        "timestamp": 1726004792
    },
    {
        "content": "<p>Do you have a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> of the theorem you're proving already?</p>",
        "id": 469220889,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1726005111
    },
    {
        "content": "<p>Here's how I would go about it:</p>\n<ul>\n<li>Construct the set of Fermat numbers as <code>{2 ^ (2 ^ n) + 1 | n}</code>, and show that it's infinite</li>\n<li>Consider <code>Nat.minFac '' {2 ^ (2 ^ n) + 1 | n}</code>. By <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.minFac_prime#doc\">docs#Nat.minFac_prime</a> it's a subset of the set of primes, so it suffices to show that it's infinite by <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.Infinite.mono#doc\">docs#Set.Infinite.mono</a></li>\n<li>Using <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Set.Infinite.image#doc\">docs#Set.Infinite.image</a>, it suffices to show that <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.minFac#doc\">docs#Nat.minFac</a> is injective on the set of Fermat numbers.</li>\n<li>Let there be two Fermat primes with equal <code>Nat.minFac</code>. It divides both of them, so they aren't coprime, so they must be equal.</li>\n</ul>",
        "id": 469268981,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1726025753
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"690858\">@Daniel Weber</span> Thank you for the reply. I'm sure someone more experienced in Lean might understand your response, but sadly it doesn't mean anything to me. My total experience with Lean so far is only about 40 hours -- over 10 hours of which was just figuring out how to get the Hello World to include MathLib. (As an aside in my 25+ years as a coder, I've found the Lean docs the worst getting started experience of any language I've ever used so far.)</p>\n<p>At any rate,  I understand how the proof typically is done (first prove recurrence relation, then prove all Fermat numbers are relatively prime, then because there are infinite Fermat numbers there must be infinite primes), but I am just struggling with how to express any of it in actual Lean statements.</p>\n<p>For example, I understand how to write a function for a Fermat number. (Although I still don't understand why I have to write \"Nat\" when I see that fancy N symbol for the natural numbers in many examples on-line, but that doesn't work for me when copied &amp; pasted.)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>Then I first start trying to write a statement for a theorem for the Fermat recurrence relation, but after spending most of the day today googling and reading docs I haven't even figured out how to successfully write the first line -- just how to express the recurrence relation on the first \"theorem\" line. Below I have it written out as a list of products with a ... in the middle until I can figure out how to enter it properly. For example, I see examples online with the epsilon &amp; pi symbol, but when I copy them into my code they don't work nor could I figure out any way to enter those characters without copying &amp; pasting from a website. I read lots of docs about \"<a href=\"http://finset.prod\">finset.prod</a>\" but was never able to figure out how to ever enter a Lean statement that successfully used it. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Prove Fermat(n+1) - 2 = Fermat(0) * Fermat(1) * ... * Fermat(n-1) * Fermat (n) -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FematRecurrence</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"c1\">-- Start with 1 times the product, 1 represented as (2^2^0-1)</span>\n<span class=\"c1\">-- (2^2^0-1)*(2^2^0+1)*(2^2^1+1)*...*(2^2^n+1)</span>\n<span class=\"c1\">-- Repeatedly collapse the first two terms of the product sequence until only two terms remain</span>\n<span class=\"c1\">-- (2^2^1-1)*(2^2^1+1)*(2^2^2+1)*...*(2^2^(n-1)+1)*(2^2^n+1)</span>\n<span class=\"c1\">-- (2^2^2-1)*(2^2^2+1)*...*(2^2^(n-1)+1)*(2^2^n+1)</span>\n<span class=\"c1\">-- (2^2^3-1)*(2^2^3+1)*...*(2^2^(n-1)+1)*(2^2^n+1)</span>\n<span class=\"c1\">-- ...</span>\n<span class=\"c1\">-- (2^2^n-1)*(2^2^n+1)</span>\n<span class=\"c1\">-- 2^2^(n+1)-1</span>\n<span class=\"c1\">-- Rewrite -1 as +1-2</span>\n<span class=\"c1\">-- 2^2^(n+1)+1-2</span>\n<span class=\"c1\">-- 2^2^(n+1)+1 is Fermat(n+1) thus</span>\n<span class=\"c1\">-- Fermat(n+1)-2</span>\n<span class=\"n\">begin</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Base case: n = 0</span>\n<span class=\"w\">  </span><span class=\"n\">case</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">,</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Induction</span>\n<span class=\"w\">  </span><span class=\"n\">case</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"c1\">-- ???</span>\n<span class=\"kn\">end</span>\n</code></pre></div>\n<p>I haven't even really gotten so far as trying to figure out how to write the induction step yet. I've been hung up all day on just figuring out how to write the first theorem line properly for the product.</p>",
        "id": 469282777,
        "sender_full_name": "North Eastern Ohio Mac Developer",
        "timestamp": 1726030886
    },
    {
        "content": "<p>Here's some syntax and definitions help:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Algebra</span><span class=\"bp\">.</span><span class=\"n\">BigOperators</span><span class=\"bp\">.</span><span class=\"n\">Group</span><span class=\"bp\">.</span><span class=\"n\">Finset</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"w\">  </span><span class=\"c1\">-- brings in scope names of lemmas and defs related to finite sets</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">prod</span>\n<span class=\"bp\">#</span><span class=\"n\">check</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span>\n<span class=\"c1\">-- For more, look at the documentation at the top of `Mathlib/Data/Finset/Basic.lean` file</span>\n\n<span class=\"c1\">-- Here's a start on your recurrence</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FermatRecurrence</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">prod</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">ih</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">zero_add</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">range_one</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">prod_singleton</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Fermat</span>\n<span class=\"w\">    </span><span class=\"n\">norm_num</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- use relationship b/w range (k+1) and range (k + 1 + 1)</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n\n<span class=\"c1\">-- Here's the same statement, but using \"big operators\"</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">FermatRecurrence'</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∏</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Fermat</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>To understand better what's going on here, working through <a href=\"https://leanprover-community.github.io/mathematics_in_lean/C01_Introduction.html\">https://leanprover-community.github.io/mathematics_in_lean/C01_Introduction.html</a> would be very useful. Especially Ch. 5 which develops several alternate proofs of the infinitude of primes. That chapter also shows you how to work with finite sets and regular/strong induction.</p>",
        "id": 469505988,
        "sender_full_name": "Benjamin Jones",
        "timestamp": 1726088410
    }
]