[
    {
        "content": "<p>I'm playing around with SlimCheck to learn how best to use it.   Is SlimCheck able to generate tests for definitions that contain quantifiers over Nats?  I am able to do Testable.check for expressions that contain quantifiers, but when I put the expression inside a definition, I get a \"failed to synthesize Testable\" error.  </p>\n<p>Is there a way to use Testable.check on definitions that contain quantifiers?</p>\n<p>Here's a small example:</p>\n<p>import Mathlib.Tactic<br>\nopen SlimCheck</p>\n<p>def q (n:ℕ) : Bool := n &gt; 3</p>\n<p>#eval Testable.check (∀ (n:ℕ), q n)  -- this works and gives a counterexample</p>\n<p>def q2 := ∀ (n:ℕ),  n &gt; 3  -- now put the quantifier inside the def</p>\n<p>#eval Testable.check q2  -- fails with \"failed to synthesize Testable q2\"</p>\n<p>-mark</p>",
        "id": 479709271,
        "sender_full_name": "Mark Aagaard",
        "timestamp": 1730302282
    },
    {
        "content": "<p>You need to make the definition an abbrev or define the testable instance yourself. That's just a consequence of how TC synthesis works</p>",
        "id": 479713250,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1730303381
    },
    {
        "content": "<p>Please also check  <a href=\"https://github.com/leanprover-community/mathlib/wiki/Code-in-backticks\">#backticks</a></p>",
        "id": 479714609,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1730303744
    },
    {
        "content": "<p>Changing from <code>def</code> to <code>abbrev</code> didn't help. I'm still getting <code>failed to synthesize Testable q2</code>.  Do I need to define a testable instance of <code>q2</code>?  Is the best resource for this:</p>\n<p><a href=\"https://github.com/argumentcomputer/LSpec/blob/main/LSpec/Instances.lean\">https://github.com/argumentcomputer/LSpec/blob/main/LSpec/Instances.lean</a></p>\n<p>-mark</p>",
        "id": 479741211,
        "sender_full_name": "Mark Aagaard",
        "timestamp": 1730312791
    },
    {
        "content": "<p>Ah I guess this is a bit unlucky because of the way that slim_check works internally with binders</p>",
        "id": 479748056,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1730315388
    },
    {
        "content": "<p>I'd guess you have to define the instance yourself at this point rather unfortunately mhm</p>",
        "id": 479748511,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1730315574
    },
    {
        "content": "<p>But this should be fixable in plausible</p>",
        "id": 479748532,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1730315587
    }
]