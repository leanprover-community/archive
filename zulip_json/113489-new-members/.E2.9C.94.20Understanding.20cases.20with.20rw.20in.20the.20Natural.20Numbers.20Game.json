[
    {
        "content": "<p>Hello! I'm having some trouble understanding how the <code>cases</code> tactic works in combination with the <code>rw</code> tactic, in the context of <code>le world</code> 6/11 of the Natural Numbers Game, where the goal is to prove the antisymmetry of  <code>le</code> (less than or equal) relation. As a first step, I've destructed the two assumptions using <code>cases</code> and carried out some simple substitutions between the assumptions (screenshot 1). <br>\n<a href=\"/user_uploads/3121/kyqY_Z2F7XsBKe0L_8VDXbpw/Lean_le_world_1.png\">Lean_le_world_1.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/kyqY_Z2F7XsBKe0L_8VDXbpw/Lean_le_world_1.png\" title=\"Lean_le_world_1.png\"><img data-original-dimensions=\"1864x846\" src=\"/user_uploads/thumbnail/3121/kyqY_Z2F7XsBKe0L_8VDXbpw/Lean_le_world_1.png/840x560.webp\"></a></div><p>When I try to simplify further by using <code>rw [add_right_eq_zero x (a+b)] at hb</code> I suddenly have an extra goal to prove (screenshot 2).<br>\n<a href=\"/user_uploads/3121/uWIPGw002f50nAMKV_Z8aKKL/Lean_le_world_2.png\">Lean_le_world_2.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/uWIPGw002f50nAMKV_Z8aKKL/Lean_le_world_2.png\" title=\"Lean_le_world_2.png\"><img data-original-dimensions=\"1864x888\" src=\"/user_uploads/thumbnail/3121/uWIPGw002f50nAMKV_Z8aKKL/Lean_le_world_2.png/840x560.webp\"></a></div><p>In chasing it down, I end up using another <code>rw</code> tactic that produces a third goal to be proved (screenshot 3).<br>\n<a href=\"/user_uploads/3121/cmXdepjvC05M8N5BkV7rZA1W/Lean_le_world_3.png\">Lean_le_world_3.png</a>.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/cmXdepjvC05M8N5BkV7rZA1W/Lean_le_world_3.png\" title=\"Lean_le_world_3.png\"><img data-original-dimensions=\"1858x820\" src=\"/user_uploads/thumbnail/3121/cmXdepjvC05M8N5BkV7rZA1W/Lean_le_world_3.png/840x560.webp\"></a></div><p>Where are these extra goals coming from? And why do only some instances of the rw tactic (like with <code>rw [add_right_eq_zero]</code>) produce these extra goals but not others?</p>",
        "id": 466009020,
        "sender_full_name": "Aditya Vaswani",
        "timestamp": 1724936616
    },
    {
        "content": "<p>What does <code>add_right_eq_zero</code> look like?</p>",
        "id": 466011737,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724937410
    },
    {
        "content": "<p>The lemma <code>add_right_eq_zero a b</code> is the proof that </p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo>=</mo><mn>0</mn><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext><mi>a</mi><mo>=</mo><mn>0</mn><mo separator=\"true\">,</mo></mrow><annotation encoding=\"application/x-tex\">a + b = 0 \\implies a = 0,</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6684em;vertical-align:-0.024em;\"></span><span class=\"mord\">0</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⟹</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8389em;vertical-align:-0.1944em;\"></span><span class=\"mord\">0</span><span class=\"mpunct\">,</span></span></span></span></span></p>\n<p>while <code>add_left_eq_zero a b</code> is same as above but implying that <code>b =  0</code>.</p>\n<p>Hope that helps!</p>",
        "id": 466061233,
        "sender_full_name": "Aditya Vaswani",
        "timestamp": 1724948846
    },
    {
        "content": "<p>So if you <code>rw add_right_eq_zero</code> lean will replace <code>a</code> by 0 and then create a new goal <code>a+b=0</code> because you're clearly assuming that this is true if you want to rewrite with this lemma. Are you clear on the difference between rewriting and <code>apply</code>ing implications?</p>",
        "id": 466062964,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1724949283
    },
    {
        "content": "<p>Based on your response, I tried using <code>apply</code> instead of <code>rw</code> in conjunction with <code>add_right_eq_zero</code> and that does solve the problem. But (as you mentioned) I'm probably misunderstanding how these two tactics work. My naive understanding is that the <code>rw</code> tactic is analogous to substituting an expression (if I were solving this by hand, say) into a given expression (could be a goal or one of the assumptions), while <code>apply</code> takes an implication as input and uses its output in the given expression. So I'm not sure why <code>rw</code> would generate new goals.</p>",
        "id": 466069534,
        "sender_full_name": "Aditya Vaswani",
        "timestamp": 1724951009
    },
    {
        "content": "<p>If you <code>rw h</code> where <code>h</code> is a proof of <code>P -&gt; (x = y)</code> then lean will change all x's to y's but as payment it will ask you to prove P, because you just assumed it when doing the rewrite.</p>",
        "id": 466073054,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1724952103
    },
    {
        "content": "<p>But aren't assumptions taken to be true by default? If <code>h</code> is an one of the assumption (which is <code>True</code>) then why do we need to prove it after using <code>rw</code>?</p>\n<p>Apologies if I'm missing something obvious here. I'm a theoretical physicist (grad student) and don't have too much of a background in pure math/computer science.</p>",
        "id": 466074835,
        "sender_full_name": "Aditya Vaswani",
        "timestamp": 1724952752
    },
    {
        "content": "<p>Assumptions which you have in your \"context\" ie your current position in the game are indeed taken as true by default. But assumptions in theorems you're using is a rather different matter!</p>",
        "id": 466080597,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1724954509
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749562\">Aditya Vaswani</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20cases.20with.20rw.20in.20the.20Natural.20Numbers.20Game/near/466074835\">said</a>:</p>\n<blockquote>\n<p>But aren't assumptions taken to be true by default? If <code>h</code> is an one of the assumption (which is <code>True</code>) then why do we need to prove it after using <code>rw</code>?</p>\n<p>Apologies if I'm missing something obvious here. I'm a theoretical physicist (grad student) and don't have too much of a background in pure math/computer science.</p>\n</blockquote>\n<p>we're not proving <code>h</code>, which has type <code>P -&gt; (x = y)</code>. we're proving <code>P</code>, which is necessary to derive the equality <code>x = y</code> which the <code>rw</code> tactic uses.</p>",
        "id": 466083192,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1724955327
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20cases.20with.20rw.20in.20the.20Natural.20Numbers.20Game/near/466080597\">said</a>:</p>\n<blockquote>\n<p>Assumptions which you have in your \"context\" ie your current position in the game are indeed taken as true by default. But assumptions in theorems you're using is a rather different matter!</p>\n</blockquote>\n<p>In that case, shouldn't the <code>apply</code> tactic also introduce similar new goals? I was looking at some of the documentation (the Lean 3 <a href=\"https://leanprover.github.io/reference/tactics.html\">reference manual</a> on github) and under the \"Basic Tactics\" section it says</p>\n<blockquote>\n<p>The <code>apply</code> tactic tries to match the current goal against the conclusion of the type of term. The argument term should be a term well-formed in the local context of the main goal. If it succeeds, then the tactic returns as many subgoals as the number of premises that have not been fixed by type inference or type class resolution.</p>\n</blockquote>\n<p>The last line seems to say that <code>apply</code> when used with <code>add_right_eq_zero</code> should return a (new) subgoal requiring me to prove the hypothesis of that proposition (as you mentioned <code>rw</code> does).</p>",
        "id": 466128375,
        "sender_full_name": "Aditya Vaswani",
        "timestamp": 1724974127
    },
    {
        "content": "<p>If you're playing the natural number game I'd strongly recommend that you read the documentation in NNG for the tactics, which is in lean 4 and backed up by lots of examples relevant to the game. Don't read any lean 3 documentation, nobody uses lean 3 any more.</p>",
        "id": 466128736,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1724974347
    },
    {
        "content": "<p>Went back to NNG as you suggested and took a closer look at the documentation for <code>apply</code> and <code>rw</code>. That cleared up all my issues. Thanks for pointing it out!</p>",
        "id": 466129391,
        "sender_full_name": "Aditya Vaswani",
        "timestamp": 1724974780
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"749562\">Aditya Vaswani</span> has marked this topic as resolved.</p>",
        "id": 466129397,
        "sender_full_name": "Notification Bot",
        "timestamp": 1724974790
    }
]