[
    {
        "content": "<p>I find myself unable to perform a proof that <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/BigOperators/Expect.html#Finset.expect\"><code>Finset.expect</code></a> of a <code>Finset ℝ</code>  is equal to a real number that I have without using the following lemma about scalar multiplication in the module over ℚ≥0:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Rat</span><span class=\"bp\">.</span><span class=\"n\">Cast</span><span class=\"bp\">.</span><span class=\"n\">CharZero</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Real</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">LinearCombination</span><span class=\"bp\">.</span><span class=\"n\">Lemmas</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">hmmm</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"bp\">≥</span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">•</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">LinearCombination</span><span class=\"bp\">.</span><span class=\"n\">mul_eq_const</span><span class=\"w\"> </span><span class=\"bp\">?_</span><span class=\"w\"> </span><span class=\"n\">r</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NNRat</span><span class=\"bp\">.</span><span class=\"n\">cast_inv</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">NNRat</span><span class=\"bp\">.</span><span class=\"n\">cast_natCast</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>It seems like a thing that I should not be adressing explicitly somehow. Am I missing something?</p>",
        "id": 511720712,
        "sender_full_name": "ooovi",
        "timestamp": 1744399700
    },
    {
        "content": "<p>Not sure what your question is, but is <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NNRat.smul_def#doc\">docs#NNRat.smul_def</a> the answer?</p>",
        "id": 511721759,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1744400131
    },
    {
        "content": "<p>Or maybe you are looking for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.expect_eq_sum_div_card#doc\">docs#Finset.expect_eq_sum_div_card</a> ?</p>",
        "id": 511721871,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1744400164
    },
    {
        "content": "<p>Indeed. Please excuse my unclear question and thank you for helping me find the thing <span aria-label=\"see no evil\" class=\"emoji emoji-1f648\" role=\"img\" title=\"see no evil\">:see_no_evil:</span></p>",
        "id": 511723020,
        "sender_full_name": "ooovi",
        "timestamp": 1744400681
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"768262\">ooovi</span> has marked this topic as resolved.</p>",
        "id": 511723050,
        "sender_full_name": "Notification Bot",
        "timestamp": 1744400693
    }
]