[
    {
        "content": "<p>The following proof works, but generates a warning <code>unused variable g1</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">g1</span><span class=\"w\">    </span><span class=\"c1\">-- &lt;-- unused variable warning</span>\n<span class=\"w\">    </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">g2</span>\n<span class=\"w\">    </span><span class=\"n\">contradiction</span>\n</code></pre></div>\n<p>This is en example I made up (inspired by the bidirectional version in MoP).</p>\n<p>I can't remove <code>intro g1</code> because then the proof goal <code>¬¬P → P</code> isn't transformed into an assumption <code>¬¬P</code> and new goal <code>P</code>.</p>\n<p>Is this just an edge case, or am I not doing this idiomatically?</p>\n<hr>\n<p>PS - I am trying to keep the proof \"explicit\" as an educational example of contradiction as used in \"cases\". For this reason I don't want a very short proof that uses some advanced tactic. I couldn't find a nice algebraic example that was satisfying eg <code>(x-1)*(x-2)=0 ∧ ¬x=2 → x=1</code> is not very satisfying.</p>",
        "id": 489801957,
        "sender_full_name": "rzeta0",
        "timestamp": 1734540961
    },
    {
        "content": "<p>You can do <code>intro</code> or <code>intro _</code> or <code>intro _g1</code>. Basically, Lean sees that you didn't use the variable <code>g1</code> and wants to make sure you know that you didn't use it (because it often means that you meant to, especially when coding). The first two of my options will allow Lean to assign an inaccessible (i.e., unusable by the <em>user</em>) name to the introduced hypothesis. The last one allows you to refer to the introduced hypothesis with the name <code>_g1</code>, but the initial underscore tells Lean \"Look, I know this is unused, but I don't care, please let me do this anyway without complaining.\"</p>",
        "id": 489803109,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1734541269
    },
    {
        "content": "<p>you could also write <code>exact fun _ ↦ h1</code> here</p>",
        "id": 489803397,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1734541353
    },
    {
        "content": "<p>You could also do the <code>intro g1</code> before <code>by_cases</code>.  Then you wouldn't have to do <code>intro</code> in both cases.  In general, if you're doing the same thing at the beginning of both cases, it's a bit more efficient to do it before you split into cases.</p>",
        "id": 489803937,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1734541536
    },
    {
        "content": "<p>Following Dan's suggestion there is now no longer a warning about unused variables.</p>\n<p>But why? I don't refer to <code>g</code> again after it is introduced. I'm asking so I can understand better what's happening.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">  </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">contradiction</span>\n</code></pre></div>",
        "id": 489805859,
        "sender_full_name": "rzeta0",
        "timestamp": 1734542232
    },
    {
        "content": "<p>(and thanks Jireh - it is useful to know about \"internal\" variables, there's something similar in Prolog)</p>",
        "id": 489806336,
        "sender_full_name": "rzeta0",
        "timestamp": 1734542402
    },
    {
        "content": "<p>You don't refer to it explicitly, but it is used in Case 2.  The contradiction is between <code>g  : ¬¬P</code> and <code>h1  : ¬P</code>.  The <code>contradiction</code> tactic found this contradiction and used it to complete the proof.</p>\n<p>The lesson here is that \"used\" doesn't necessarily mean \"explicitly mentioned\".</p>",
        "id": 489806397,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1734542411
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> has marked this topic as resolved.</p>",
        "id": 489806519,
        "sender_full_name": "Notification Bot",
        "timestamp": 1734542453
    }
]