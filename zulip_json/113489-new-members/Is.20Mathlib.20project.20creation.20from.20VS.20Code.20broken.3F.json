[
    {
        "content": "<p>Using VS Code 1.100.2 with <code>leanprover.lean4</code> extension 0.0.205 (last released 2025-04-30).</p>\n<p>To reproduce:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">code</span>\n<span class=\"w\">  </span><span class=\"n\">Command</span><span class=\"bp\">-</span><span class=\"n\">Shift</span><span class=\"bp\">-</span><span class=\"n\">P</span>\n<span class=\"w\">  </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Create</span><span class=\"w\"> </span><span class=\"n\">Project</span><span class=\"w\"> </span><span class=\"n\">Using</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">...</span>\n<span class=\"w\">  </span><span class=\"n\">Choose</span><span class=\"w\"> </span><span class=\"s2\">\"Create project folder\"</span><span class=\"w\"> </span><span class=\"n\">after</span><span class=\"w\"> </span><span class=\"n\">choosing</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"n\">name</span>\n<span class=\"bp\">…</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"o\">:</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">update</span>\n<span class=\"bp\">✔</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"mi\">13</span><span class=\"bp\">/</span><span class=\"mi\">13</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Built</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">Git</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">determine</span><span class=\"w\"> </span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">.</span>\n<span class=\"n\">Ensure</span><span class=\"w\"> </span><span class=\"n\">Git</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">installed</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`origin</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">remote</span><span class=\"w\"> </span><span class=\"n\">points</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">project's</span><span class=\"w\"> </span><span class=\"n\">GitHub</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"bp\">.</span>\n<span class=\"n\">Stdout</span><span class=\"o\">:</span>\n\n<span class=\"n\">Stderr</span><span class=\"o\">:</span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">remote</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">origin'</span>\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n<span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Operation</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"bp\">.</span><span class=\"w\"> </span><span class=\"n\">Exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">1.</span>\n</code></pre></div>",
        "id": 520527599,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1748292291
    },
    {
        "content": "<p>Reproducing from the command-line:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"n\">math</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"bp\">…</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">running</span><span class=\"w\"> </span><span class=\"n\">post</span><span class=\"bp\">-</span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">hooks</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">Git</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">determine</span><span class=\"w\"> </span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">.</span>\n<span class=\"n\">Ensure</span><span class=\"w\"> </span><span class=\"n\">Git</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">installed</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"ss\">`origin</span><span class=\"bp\">`</span><span class=\"w\"> </span><span class=\"n\">remote</span><span class=\"w\"> </span><span class=\"n\">points</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">project's</span><span class=\"w\"> </span><span class=\"n\">GitHub</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"bp\">.</span>\n<span class=\"n\">Stdout</span><span class=\"o\">:</span>\n\n<span class=\"n\">Stderr</span><span class=\"o\">:</span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">No</span><span class=\"w\"> </span><span class=\"n\">such</span><span class=\"w\"> </span><span class=\"n\">remote</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"n\">origin'</span>\n\n<span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">fetch</span><span class=\"w\"> </span><span class=\"n\">cache</span>\n</code></pre></div>",
        "id": 520528266,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1748292621
    },
    {
        "content": "<p>Seems to be the same issue that came up in this thread earlier today: <a href=\"#narrow/channel/287929-mathlib4/topic/.60lake.20update.60.20now.20slowly.20tries.20to.20download.20repository.20cache\">#mathlib4 &gt; &#96;lake update&#96; now slowly tries to download repository cache</a>. There's a proposed fix on GitHub.</p>",
        "id": 520532646,
        "sender_full_name": "Alexander Heckett",
        "timestamp": 1748294817
    },
    {
        "content": "<p>I'm not sure how to work around this problem while waiting for the fix to be merged into Mathlib.</p>",
        "id": 520533920,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1748295537
    },
    {
        "content": "<p>FWIW, I am having the same problem.</p>",
        "id": 520542090,
        "sender_full_name": "Jeremy Avigad",
        "timestamp": 1748300520
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span></p>",
        "id": 520550125,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1748305429
    },
    {
        "content": "<p><a href=\"#narrow/channel/287929-mathlib4/topic/.60lake.20update.60.20now.20slowly.20tries.20to.20download.20repository.20cache/near/520419731\">Discussed</a> over in <a class=\"stream\" data-stream-id=\"287929\" href=\"/#narrow/channel/287929-mathlib4\">#mathlib4</a>. Fix is at <a href=\"https://github.com/leanprover-community/mathlib4/pull/25211\">mathlib4#25211</a>.</p>",
        "id": 520551120,
        "sender_full_name": "Mac Malone",
        "timestamp": 1748305979
    },
    {
        "content": "<p>If you need to fetch the cache, the following can be used as a workaround until the fix is merged:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>$<span class=\"w\"> </span>lake<span class=\"w\"> </span>exe<span class=\"w\"> </span>cache<span class=\"w\"> </span>--repo<span class=\"o\">=</span>leanprover-community/mathlib4<span class=\"w\"> </span>get\n</code></pre></div>",
        "id": 520551959,
        "sender_full_name": "Mac Malone",
        "timestamp": 1748306473
    },
    {
        "content": "<p>I'm actually still getting the error when I try that command. EDIT: ...apparently running it twice works??</p>",
        "id": 520556000,
        "sender_full_name": "Alexander Heckett",
        "timestamp": 1748308875
    },
    {
        "content": "<p>Okay, the actual key step seems to be to run <code>lake update</code> before <code>lake exe cache --repo=leanprover-community/mathlib4 get</code>.</p>",
        "id": 520562775,
        "sender_full_name": "Alexander Heckett",
        "timestamp": 1748312694
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"683979\">Isak Colboubrani</span> <a href=\"#narrow/channel/113489-new-members/topic/Is.20Mathlib.20project.20creation.20from.20VS.20Code.20broken.3F/near/520528266\">said</a>:</p>\n<blockquote>\n<p>Reproducing from the command-line:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"n\">math</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"bp\">…</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">running</span><span class=\"w\"> </span><span class=\"n\">post</span><span class=\"bp\">-</span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">hooks</span>\n<span class=\"n\">uncaught</span><span class=\"w\"> </span><span class=\"n\">exception</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Failed</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">run</span><span class=\"w\"> </span><span class=\"n\">Git</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">determine</span><span class=\"w\"> </span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"n\">repository</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"bp\">.</span>\n<span class=\"bp\">…</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>As of today, this works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"n\">tmp</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"n\">math</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"bp\">-</span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"bp\">…</span>\n<span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">running</span><span class=\"w\"> </span><span class=\"n\">post</span><span class=\"bp\">-</span><span class=\"n\">update</span><span class=\"w\"> </span><span class=\"n\">hooks</span>\n<span class=\"bp\">…</span>\n<span class=\"n\">Completed</span><span class=\"w\"> </span><span class=\"n\">successfully!</span>\n<span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"n\">echo</span><span class=\"w\"> </span><span class=\"bp\">$?</span>\n<span class=\"mi\">0</span>\n<span class=\"bp\">%</span>\n</code></pre></div>\n<p>Thanks <span class=\"user-mention\" data-user-id=\"315577\">@Mac Malone</span>!</p>",
        "id": 520735857,
        "sender_full_name": "Louis Cabarion",
        "timestamp": 1748369995
    }
]