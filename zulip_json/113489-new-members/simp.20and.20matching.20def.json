[
    {
        "content": "<p>If I have a definition which does some matching,like :</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\">  </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">nil</span><span class=\"w\">       </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">cons</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>(just as an example)</p>\n<p>If I declare this <code>@[simp] </code> then <code>simp</code> will rewrite this into an ugly match expression in my goals. But if I don't declare it <code>@[simp]</code> then it won't even simplify <code>foo nil</code> to <code>0</code>. Is there a way to add only the matches as equations to the simp set (essentially Isabelle's <code>fun</code> behaviour)? (without writing them out as separate lemmas)</p>",
        "id": 492728033,
        "sender_full_name": "Liam O'Connor",
        "timestamp": 1736430887
    },
    {
        "content": "<p>This is <a href=\"https://github.com/leanprover/lean4/pull/2042\">lean4#2042</a> I think</p>",
        "id": 492729128,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1736431168
    },
    {
        "content": "<p>I'm a little surprised that this simplifier behaviour isn't supported by default. Isabelle's simp works this way and IIRC lean3's did as well.</p>",
        "id": 492731075,
        "sender_full_name": "Liam O'Connor",
        "timestamp": 1736431690
    },
    {
        "content": "<p>For now I'm working around this by writing a series of lemmas for each equation and adding them to the simpset, but surely there is a better way? I'm basically writing every definition twice</p>",
        "id": 492734881,
        "sender_full_name": "Liam O'Connor",
        "timestamp": 1736432688
    }
]