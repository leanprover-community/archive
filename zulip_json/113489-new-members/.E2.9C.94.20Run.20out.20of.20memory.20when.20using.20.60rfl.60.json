[
    {
        "content": "<p>I use <code>#eval primes.length</code> to get the number of prime numbers less than 10^6 is 78498. But run out of memory when verify this using <code>rfl</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"bp\">.</span><span class=\"n\">Defs</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">primes</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">filter</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"c1\">-- #eval primes.length</span>\n<span class=\"c1\">-- 78498</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">primes</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">78498</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- `rfl` costs all my memory</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span>\n</code></pre></div>",
        "id": 471484110,
        "sender_full_name": "Zhang Qinchuan",
        "timestamp": 1726751752
    },
    {
        "content": "<p>indeed, proving the result of such a large computation with <code>rfl</code> is very heavy on the kernel. i believe using <code>native_decide</code> does help here though... there might also be some more suffisticated tricks you can do to manipulate the goal into a kernel-reducible statement...</p>",
        "id": 471486674,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1726752471
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/stream/113489-new-members/topic/Run.20out.20of.20memory.20when.20using.20.60rfl.60/near/471486674\">said</a>:</p>\n<blockquote>\n<p>indeed, proving the result of such a large computation with <code>rfl</code> is very heavy on the kernel. i believe using <code>native_decide</code> does help here though... there might also be some more suffisticated tricks you can do to manipulate the goal into a kernel-reducible statement...</p>\n</blockquote>\n<p>Thank you. <code>native_decide</code> is exactly what I am looking for!</p>",
        "id": 471490492,
        "sender_full_name": "Zhang Qinchuan",
        "timestamp": 1726753599
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"757121\">hilbert</span> has marked this topic as resolved.</p>",
        "id": 471490512,
        "sender_full_name": "Notification Bot",
        "timestamp": 1726753605
    }
]