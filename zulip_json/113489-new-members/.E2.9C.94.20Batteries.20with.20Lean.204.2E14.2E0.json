[
    {
        "content": "<p>Hi all, apparently I should be able to use batteries in Lean 4.14.0, but I fail to see how.</p>\n<p>This works (using batteries with 4.15.0-rc1):</p>\n<ul>\n<li><code>lake new foo</code>, <code>cd foo</code></li>\n<li>Add to <code>lakefile.toml</code> this snippet from the <a href=\"https://github.com/leanprover-community/batteries\">instructions</a>:</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"batteries\"</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover-community\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"main\"</span>\n</code></pre></div>\n<ul>\n<li>Edit <code>lean-toolchain</code> and replace <code>leanprover/lean4:stable</code> with <code>leanprover/lean4:v4.15.0-rc1</code></li>\n<li>Add <code>import Batteries</code> in <code>Main.lean</code></li>\n<li>Run <code>lake update</code> and <code>lake exe foo</code></li>\n</ul>\n<p>However, if I skip the step of editing my <code>lean-toolchain</code> (i.e., try to use batteries with 4.14.0 instead of 4.15.0-rc1) and try to do otherwise the same, <code>lake update</code> will warn about different toolchains, and <code>lake exe</code> gives a huge pile of errors starting with something like \"<strong>error:</strong> ././.lake/packages/batteries/././Batteries/Tactic/Instances.lean:38:17: type mismatch\" and ending with something like \"<strong>error:</strong> ././.lake/packages/batteries/././Batteries/Data/List/Basic.lean:466:6: tactic 'rewrite' failed, equality or iff proof expected\".</p>\n<p>What did I do wrong?</p>",
        "id": 490421835,
        "sender_full_name": "Jukka Suomela",
        "timestamp": 1734904659
    },
    {
        "content": "<p>You will need to put <code>ref = \"v1.14.0\"</code> instead of <code>ref = \"main\"</code></p>",
        "id": 490421895,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1734904707
    },
    {
        "content": "<p>I imagine Eric means <code>v4.14.0</code> of course)</p>",
        "id": 490421953,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1734904799
    },
    {
        "content": "<p><code>rev</code> I guess?</p>",
        "id": 490422081,
        "sender_full_name": "Jukka Suomela",
        "timestamp": 1734904881
    },
    {
        "content": "<p>Awesome, it worked!</p>",
        "id": 490422088,
        "sender_full_name": "Jukka Suomela",
        "timestamp": 1734904894
    },
    {
        "content": "<p><code>lake update</code> still gives a warning but I can apparently silence it by replacing <code>leanprover/lean4:stable</code> with <code>leanprover/lean4:v4.14.0</code>.</p>",
        "id": 490422203,
        "sender_full_name": "Jukka Suomela",
        "timestamp": 1734905018
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"733738\">Jukka Suomela</span> has marked this topic as resolved.</p>",
        "id": 490423158,
        "sender_full_name": "Notification Bot",
        "timestamp": 1734905960
    }
]