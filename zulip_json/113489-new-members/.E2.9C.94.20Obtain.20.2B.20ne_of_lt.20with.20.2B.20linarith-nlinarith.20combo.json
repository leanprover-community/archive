[
    {
        "content": "<p>I made this proof work using the <code>obtain-ne_of_lt-linarith/nlinarith</code> combo, but I find it ugly. Is there a way to replace those two <code>calc</code>'s with a one-liner?</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Working example from The Mechanics of Proof</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\"><pre><span></span><code>import Mathlib\nimport Lean\n\nlemma le_or_succ_le (a b : ℕ) : a ≤ b ∨ b + 1 ≤ a :=\n  by\n    by_cases h : a ≤ b\n    · left\n      exact h\n    · right\n      exact Nat.succ_le_of_lt (Nat.lt_of_not_ge h)\n\nexample {n : ℕ} : n ^ 2 ≠ 2 :=\n  by\n    have hn := le_or_succ_le n 1\n    obtain hn | hn := hn\n    apply ne_of_lt\n    calc\n      n ^ 2 ≤ 1 ^ 2 := by rel [hn]\n      _ &lt; 2 := by linarith\n    calc\n      n ^2 ≠ 2 := by nlinarith\n</code></pre></div>\n</div></div>",
        "id": 482770319,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731763941
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"130384\">@Riccardo Brasca</span> What do you think about this one?</p>",
        "id": 482799361,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731788494
    },
    {
        "content": "<p>You can to something like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">add_sq</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">nlinarith</span>\n</code></pre></div>",
        "id": 482800697,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1731789683
    },
    {
        "content": "<p>but there are surely various ways of solving it</p>",
        "id": 482800712,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1731789698
    },
    {
        "content": "<p>That's already WAY cleaner. It's quite beautiful! Thank you</p>",
        "id": 482800910,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731789848
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"672170\">Michael Bucko</span> has marked this topic as resolved.</p>",
        "id": 482800930,
        "sender_full_name": "Notification Bot",
        "timestamp": 1731789883
    },
    {
        "content": "<p>Note that extreme golfing is not always a good thing, for example I don't think that</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">nlinarith</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">add_sq</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">▸</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>is better</p>",
        "id": 482801081,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1731790013
    },
    {
        "content": "<p>Sure, it's a bit like in SW. Readability and reusability are often more important than having the best compression (for so many important reasons).</p>\n<p>For me, this golfing (gotta love the term btw!) is more about finding deeper insights. Long term investment.</p>",
        "id": 482801412,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731790296
    }
]