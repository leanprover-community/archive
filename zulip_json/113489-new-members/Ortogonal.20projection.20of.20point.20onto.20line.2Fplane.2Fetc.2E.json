[
    {
        "content": "<p>What's the idiomatic way to define, for example, orthogonal projection of a point onto line through two different points? Or the projection of a point onto plane, formed by three points not on the same line?</p>\n<p>Should I go through vectors and use <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/InnerProductSpace/Projection/Basic.html#Submodule.starProjection\">Submodule.starProjection</a> or maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Analysis/InnerProductSpace/Projection/Basic.html#Submodule.orthogonalProjection\">Submodule.orthogonalProjection</a>? I'm still figuring them out.</p>",
        "id": 569860044,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1769255692
    },
    {
        "content": "<p>If I didn't mess it up, then the case of two points / line should be something like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">projection_of_point</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B1</span><span class=\"w\"> </span><span class=\"n\">B2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">B1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"bp\">∙</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">B2</span><span class=\"w\"> </span><span class=\"bp\">-ᵥ</span><span class=\"w\"> </span><span class=\"n\">B1</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">starProjection</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">-ᵥ</span><span class=\"w\"> </span><span class=\"n\">B1</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 569860114,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1769255750
    },
    {
        "content": "<p>And something like this in the second case? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span> </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">projection_of_point_onto_plane</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"n\">B1</span><span class=\"w\"> </span><span class=\"n\">B2</span><span class=\"w\"> </span><span class=\"n\">B3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">EuclideanSpace</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">B1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Submodule</span><span class=\"bp\">.</span><span class=\"n\">span</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">B2</span><span class=\"w\"> </span><span class=\"bp\">-ᵥ</span><span class=\"w\"> </span><span class=\"n\">B1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">B3</span><span class=\"w\"> </span><span class=\"bp\">-ᵥ</span><span class=\"w\"> </span><span class=\"n\">B1</span><span class=\"o\">})</span><span class=\"bp\">.</span><span class=\"n\">starProjection</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">-ᵥ</span><span class=\"w\"> </span><span class=\"n\">B1</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 569860799,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1769256252
    },
    {
        "content": "<p>Is is, probably, a case of <a href=\"https://en.wikipedia.org/wiki/XY_problem\">#xy</a> problem, because I'm thinking about <a href=\"https://en.wikipedia.org/wiki/Geometric_mean_theorem\">https://en.wikipedia.org/wiki/Geometric_mean_theorem</a> of right triangle.</p>",
        "id": 569863592,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1769258529
    },
    {
        "content": "<p>For projection onto an affine subspace you want <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=EuclideanGeometry.orthogonalProjection#doc\">docs#EuclideanGeometry.orthogonalProjection</a> - the case of a line has its own notation for the affine span <code>line[ℝ, A, B]</code> for the line through <code>A</code> and <code>B</code>, for more general sets of points you can use <code>affineSpan</code> (or create new notation <code>plane[ℝ, A, B, C]</code> for the span of three points if you want that case a lot, I suppose).</p>",
        "id": 569921353,
        "sender_full_name": "Joseph Myers",
        "timestamp": 1769311050
    }
]