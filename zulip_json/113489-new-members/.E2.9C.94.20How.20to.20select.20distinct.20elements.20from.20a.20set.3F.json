[
    {
        "content": "<p>As a first challenge after working through most of MIL and some other learning material, I want to prove the following graph theoretical theorem:</p>\n<p>\"In any party of six people, at least three of them are (pairwise) mutual strangers or mutual acquaintances.\" (<a href=\"https://en.wikipedia.org/wiki/Theorem_on_friends_and_strangers\">https://en.wikipedia.org/wiki/Theorem_on_friends_and_strangers</a>)</p>\n<p>So far, I produced the following, but I'm not even sure if I formalized the statement right:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- better use clique from library?</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">is_triangle</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"c1\">-- in a simple graph with 6 vertices, there is an empty or a full triangle</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"o\">)}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">is_triangle</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">is_triangle</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- choose u</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- u has degree ≥ 3 in either g or gᶜ.</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">degree</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">ᶜ.</span><span class=\"n\">degree</span><span class=\"w\">  </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">.</span><span class=\"n\">degree</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">ᶜ.</span><span class=\"n\">degree</span><span class=\"w\">  </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le_or_le_of_add_eq_add_pred</span><span class=\"w\"> </span><span class=\"n\">h1</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- Consider both cases</span>\n<span class=\"w\">  </span><span class=\"n\">cases'</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">hG</span><span class=\"w\"> </span><span class=\"n\">hGc</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- let v, w, z by distinct vertices adjacent to u</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">card_neighborFinset_eq_degree</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hG</span>\n\n\n<span class=\"w\">  </span><span class=\"c1\">-- if one of the edges vw wz vz is present, then we have a triangle with u</span>\n\n<span class=\"w\">  </span><span class=\"c1\">-- otherwise there is a triangle vw wz vz</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>My main question now is how to select three distinct vertices from <code>(neighborFinset G u)</code>. I'm also happy about other suggestions :)</p>",
        "id": 495853446,
        "sender_full_name": "Aaron Büngener",
        "timestamp": 1737796744
    },
    {
        "content": "<p>Could you add imports to your code snippet? Right now it’s not an <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a></p>",
        "id": 495869049,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1737809998
    },
    {
        "content": "<p>For the main question, do you know <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.choose#doc\">docs#Finset.choose</a> / <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fintype.choose#doc\">docs#Fintype.choose</a> ?</p>",
        "id": 495869119,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1737810021
    },
    {
        "content": "<p>The statement is correct, but what you have written is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">is_triangle</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">u'</span><span class=\"w\"> </span><span class=\"n\">v'</span><span class=\"w\"> </span><span class=\"n\">w'</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">is_triangle</span><span class=\"w\"> </span><span class=\"n\">G</span><span class=\"bp\">ᶜ</span><span class=\"w\"> </span><span class=\"n\">u'</span><span class=\"w\"> </span><span class=\"n\">v'</span><span class=\"w\"> </span><span class=\"n\">w'</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>which is probably not what you intended.</p>",
        "id": 495886624,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1737824020
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"819900\">Aaron Büngener</span> <a href=\"#narrow/channel/113489-new-members/topic/How.20to.20select.20distinct.20elements.20from.20a.20set.3F/near/495853446\">said</a>:</p>\n<blockquote>\n<p>My main question now is how to select three distinct vertices from <code>(neighborFinset G u)</code>. I'm also happy about other suggestions :)</p>\n</blockquote>\n<p>You can <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Finset.sort#doc\">docs#Finset.sort</a> it and pick the first three.</p>",
        "id": 495887550,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1737824665
    },
    {
        "content": "<p>Thanks for your helpful suggestions! I have learned a lot from them :) Finally, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Data/Finset/Card.html#Finset.two_lt_card\">Finset.two_lt_card</a> works best for me.</p>",
        "id": 496479998,
        "sender_full_name": "Aaron Büngener",
        "timestamp": 1738132811
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"819900\">Aaron Büngener</span> has marked this topic as resolved.</p>",
        "id": 496480025,
        "sender_full_name": "Notification Bot",
        "timestamp": 1738132831
    },
    {
        "content": "<p>By the way, in a simple graph, vertices are not adjacent to themselves, so this suffices:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">is_triangle</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">SimpleGraph</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">.</span><span class=\"n\">Adj</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"n\">u</span>\n</code></pre></div>\n<p>(Also, you can use <code>g.IsNClique 3 {u,v,w}</code> instead, though there's the awkwardness that <code>IsNClique</code> uses finsets, so you need decidable equality for this formulation.)</p>",
        "id": 496480600,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1738133219
    }
]