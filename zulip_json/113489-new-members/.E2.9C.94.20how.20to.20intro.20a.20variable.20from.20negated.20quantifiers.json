[
    {
        "content": "<p>I'm working on the following proof:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- ( --&gt; )</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- &lt; -- problem is here</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- ( &lt;-- )</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"n\">contradiction</span>\n</code></pre></div>\n<p>The second part <code>( &lt;-- )</code> is fine. I can introduce <code>x : α</code> using <code>obtain</code>.</p>\n<p>In the first part I can't seem to find a way to introduce a variable <code>x : α</code> so that I can use it to create statements about <code>P x</code>.</p>\n<p>Typically I would use <code>by apply</code> with a <code>∀</code> hypothesis, and <code>obtain</code> with a <code>∃</code> hypothesis.</p>\n<p>However in this example, the quantifier is negated: <code>h : ¬∀ (x : α), P x</code>.<br>\nIf I use <code>by_contra</code> on the foal, that too created a negated quantifier <code>f : ¬∃ (x : α), ¬P x</code>.</p>\n<p>I'd welcome suggestions.</p>",
        "id": 490048736,
        "sender_full_name": "rzeta0",
        "timestamp": 1734641979
    },
    {
        "content": "<p>Is <code>simp at h</code> allowed in place of the <code>sorry</code>?</p>",
        "id": 490049279,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1734642225
    },
    {
        "content": "<p>Actually <code>by simp</code> is enough to prove this. I believe this isn't what you want, right?</p>",
        "id": 490049582,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1734642347
    },
    {
        "content": "<p>I used <code>simp? at h</code> and it returned <code>Try this: simp only [not_forall] at h</code> to me.</p>",
        "id": 490049866,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1734642451
    },
    {
        "content": "<p>So this is what that <code>simp</code> uses.</p>",
        "id": 490049899,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1734642468
    },
    {
        "content": "<p>You should be able to conclude from here:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- ( --&gt; )</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">h'</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">h''</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- &lt; -- problem is here</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- ( &lt;-- )</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"n\">contradiction</span>\n</code></pre></div>",
        "id": 490050176,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1734642582
    },
    {
        "content": "<p>Oh right, so this is how it was done. Wonders of classical logic, already forgotten by me. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 490052738,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1734643880
    },
    {
        "content": "<p>Thank <span class=\"user-mention\" data-user-id=\"703970\">@Etienne Marion</span> - you have shown me how to introduce the variable without spoiling the exercise - thanks.</p>\n<p>( I still wonder how MoP wanted students to do it as <code>by_contra</code> ins'n't introduced )</p>",
        "id": 490059284,
        "sender_full_name": "rzeta0",
        "timestamp": 1734647252
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> has marked this topic as resolved.</p>",
        "id": 490059292,
        "sender_full_name": "Notification Bot",
        "timestamp": 1734647258
    },
    {
        "content": "<p>\"You will need to use the law of the excluded middle.\" - from the exercise description. As far as I understand, that means doing <code>by_cases</code>.</p>\n<p>I'm trying to do it that way, but until then there's another way.</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>Using double negation</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"import\"><pre><span></span><code>lemma double_neg (P: Prop): P ↔ ¬ ¬ P := by\n  constructor\n  . intro H\n    intro H1\n    exact (H1 H)\n  . intro H\n    by_cases H1: P\n    . exact H1\n    . contradiction\n\nexample (P : α → Prop) : ¬ (∀ x, P x) ↔ ∃ x, ¬ P x := by\n  constructor\n  · -- ( --&gt; )\n    intro h\n    rw [double_neg (∃ x, ¬ P x)]\n    intro H\n    apply h\n    intro x\n    rw [double_neg (P x)]\n    intro H1\n    apply H\n    use x\n  · -- ( &lt;-- )\n    intro h g\n    obtain ⟨ x, hb ⟩ := h\n    have f: P x := by apply g\n    contradiction```\n</code></pre></div>\n</div></div>",
        "id": 490062101,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1734648673
    },
    {
        "content": "<p>Something like this, it seems. (It can be simplified by using <code>exfalso</code>, which is probably not allowed.)</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>using by_cases and without exfalso</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\" data-code-language=\"import\"><pre><span></span><code>example (P: α → Prop) : ¬ (∀ x, P x) ↔ ∃ x, ¬ P x := by\n  constructor\n  . intro h\n    by_cases H:(∃ x, ¬ P x)\n    . exact H\n    . have H1: False := by\n        apply h\n        intro x\n        by_cases H2: (P x)\n        . exact H2\n        . have H3: False := by\n            apply H\n            use x\n          contradiction\n      contradiction\n  . sorry\n</code></pre></div>\n</div></div>",
        "id": 490064121,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1734649771
    },
    {
        "content": "<p>I managed to complete it - but it is ugly and not something I'm proud of.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- ( --&gt; )</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">f1</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">      </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">      </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- ( &lt;-- )</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"n\">contradiction</span>\n</code></pre></div>\n<p>I feel I'm missing the point of the exercise, missing the learning point.</p>",
        "id": 490068794,
        "sender_full_name": "rzeta0",
        "timestamp": 1734652648
    },
    {
        "content": "<p>Looks good to me.</p>",
        "id": 490091038,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1734667944
    },
    {
        "content": "<p>Thanks Johan</p>\n<p>I feel that a proof objective that has so much symmetry should have a simpler \"more symmetrical\" proof.</p>\n<p>But that's just a feeling, I'm not a proper mathematician.</p>",
        "id": 490161487,
        "sender_full_name": "rzeta0",
        "timestamp": 1734701490
    },
    {
        "content": "<p>I think that you are discovering that if you dig deeper then <code>forall</code> and <code>exists</code> are less symmetric.</p>",
        "id": 490161998,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1734701650
    },
    {
        "content": "<p>But on a higher level (i.e., after proving this result) then you can start treating them in some symmetric fashion.</p>",
        "id": 490162069,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1734701678
    },
    {
        "content": "<p>It doesn't look that symmetrical to me.  Just knowing that it is not the case that everything has property P doesn't give you a way to get your hands on a particular thing that doesn't have property P.  So it's not surprising that the left-to-right direction is tricky and has to be somewhat indirect.  On the other hand, if you have a particular thing that doesn't have property P, then that object provides the evidence you need to show that \"everything has property P\" must be false.  So right-to-left is easier.</p>\n<p>Your proof looks fine to me, although the first half can be shortened a little bit:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- ( --&gt; )</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"n\">by_contra</span><span class=\"w\"> </span><span class=\"n\">f</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"c1\">-- ( &lt;-- )</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"n\">contradiction</span>\n</code></pre></div>",
        "id": 490186044,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1734709486
    },
    {
        "content": "<p>the key asymmetry comes from the fact that in the direction you had difficulty with, you need double negation elimination/law of excluded middle.</p>",
        "id": 490226419,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1734726688
    }
]