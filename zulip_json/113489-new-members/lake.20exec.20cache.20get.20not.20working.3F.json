[
    {
        "content": "<p>When I run </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"o\">:</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"n\">new</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">math</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">cd</span><span class=\"w\"> </span><span class=\"n\">test</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">exe</span><span class=\"w\"> </span><span class=\"n\">cache</span><span class=\"w\"> </span><span class=\"n\">get</span>\n<span class=\"n\">echo</span><span class=\"w\"> </span><span class=\"bp\">'</span><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib'</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"n\">Test</span><span class=\"bp\">/</span><span class=\"n\">Basic</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"n\">build</span>\n</code></pre></div>\n<p>it seems that mathlib is starts to recompile. If I understand correctly the documentation</p>\n<p><a href=\"https://github.com/leanprover-community/mathlib4/wiki/Using-mathlib4-as-a-dependency\">Using mathlib4 as a dependency</a></p>\n<p>this shouldn't be the case, and the last command should be fast. </p>\n<p>If I run the above without the build command, and open Basic.lean in Vscode, I get the message </p>\n<blockquote>\n<p>Imports are out of date and must be rebuilt; use the \"Restart File\" command in your editor.</p>\n</blockquote>\n<p>Clicking \"Restart File\" seems to start recompilation of mathlib.</p>\n<p>I can run codes from The Mechanics of Proof without issues. I am using </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">elan</span><span class=\"w\"> </span><span class=\"c1\">--version</span>\n<span class=\"n\">elan</span><span class=\"w\"> </span><span class=\"mf\">3.1</span><span class=\"bp\">.</span><span class=\"m\">1</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">71</span><span class=\"n\">ddc6633</span><span class=\"w\"> </span><span class=\"mi\">2024</span><span class=\"bp\">-</span><span class=\"mi\">02</span><span class=\"bp\">-</span><span class=\"mi\">22</span><span class=\"o\">)</span>\n\n<span class=\"n\">lake</span><span class=\"w\"> </span><span class=\"c1\">--version</span>\n<span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">5.0</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"mi\">0</span><span class=\"n\">c9a488</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"mf\">4.16</span><span class=\"bp\">.</span><span class=\"m\">0</span><span class=\"bp\">-</span><span class=\"n\">rc1</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 493076807,
        "sender_full_name": "Lauri Oksanen",
        "timestamp": 1736583546
    },
    {
        "content": "<p>Yes, this is unfortunately a known bug that should be fixed next week</p>",
        "id": 493077061,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1736583808
    },
    {
        "content": "<p>The workaround is to stick to lean 4.15</p>",
        "id": 493077070,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1736583829
    },
    {
        "content": "<p>Thanks for the quick reply! I suppose that I need to change the first command to get 4.15 version. Would you be able to give me the correct command?</p>",
        "id": 493077291,
        "sender_full_name": "Lauri Oksanen",
        "timestamp": 1736584012
    },
    {
        "content": "<p>Edit your <code>lakefile.toml</code> so that the mathlib part looks like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[[</span><span class=\"n\">require</span><span class=\"o\">]]</span>\n<span class=\"n\">name</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"mathlib\"</span>\n<span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"leanprover-community\"</span>\n<span class=\"n\">rev</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"s2\">\"v4.15.0\"</span>\n</code></pre></div>\n<p>and then run <code>lake update</code></p>",
        "id": 493079533,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1736586177
    }
]