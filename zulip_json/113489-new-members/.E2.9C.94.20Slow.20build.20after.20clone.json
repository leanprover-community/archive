[
    {
        "content": "<p>I've just cloned a github lean repository. Is it normal for this building part to take an hour or more? The ____/5178 is incrementing very slowly.</p>\n<p><a href=\"/user_uploads/3121/q2OOil4TKvTV4W2anNSkyQcj/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/q2OOil4TKvTV4W2anNSkyQcj/image.png\" title=\"image.png\"><img data-original-dimensions=\"821x438\" src=\"/user_uploads/thumbnail/3121/q2OOil4TKvTV4W2anNSkyQcj/image.png/840x560.webp\"></a></div>",
        "id": 475942302,
        "sender_full_name": "Quinn Culver",
        "timestamp": 1728502262
    },
    {
        "content": "<p>Mathlib takes a long time to build, if you're building on a machine with fewer than 8 cores then I could see it taking over an hour.</p>",
        "id": 475944389,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1728502992
    },
    {
        "content": "<p>But you should not build it. You should download the cache.</p>",
        "id": 475945011,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1728503236
    },
    {
        "content": "<p>When I clone in vscode it seems to automatically build it. How can I download the cache instead?</p>",
        "id": 475946374,
        "sender_full_name": "Quinn Culver",
        "timestamp": 1728503748
    },
    {
        "content": "<p><code>lake exe cache get</code> in the console; I think there's also a way through the for all sign at the top right of your screenshot</p>",
        "id": 475947230,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728504081
    },
    {
        "content": "<p>In the for all sign, \"Project Actions...\" then \"Project: Fetch Mathlib Build Cache\"</p>",
        "id": 475947562,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1728504209
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 475948010,
        "sender_full_name": "Quinn Culver",
        "timestamp": 1728504370
    },
    {
        "content": "<p>I did the Fetch Mathlib Build Cache, then got an error in <code>import Mathlib</code> line about \"imports are  out of date\", so now its doing the building from scratch again (this time its ____/5174 instead of ____/5178).</p>\n<p>Have I made a mistake?</p>",
        "id": 475949289,
        "sender_full_name": "Quinn Culver",
        "timestamp": 1728504997
    },
    {
        "content": "<p>Did you change anything in a Mathlib file?<br>\nIs the project github public? I'd like to try it and see what I get.</p>",
        "id": 475949671,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1728505164
    },
    {
        "content": "<p>no i didn't change anything, but maybe the author did?</p>\n<p><a href=\"https://github.com/bjoernkjoshanssen/marginis\">https://github.com/bjoernkjoshanssen/marginis</a></p>",
        "id": 475949806,
        "sender_full_name": "Quinn Culver",
        "timestamp": 1728505219
    },
    {
        "content": "<p>When I clone, then get the cache, I get a working project. Delete the repository, clone again, and see if that fixes it?</p>",
        "id": 475950263,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1728505452
    },
    {
        "content": "<p>That's a strange github project. The author copied the entire project <a href=\"https://github.com/sgouezel/kolmogorov_extension4\">https://github.com/sgouezel/kolmogorov_extension4</a> (which extends <a href=\"https://github.com/RemyDegenne/kolmogorov_extension4\">https://github.com/RemyDegenne/kolmogorov_extension4</a>) and put it in a subfolder, instead of adding it as a dependency.</p>",
        "id": 475951479,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1728505901
    },
    {
        "content": "<p>(by the way,  I just cloned the \"marginis\" repo and the project started to build from scratch even after telling vscode to use the cache, however, then I did <em>Project Actions ... clean project.</em> Upon finishing cleaning, vscode then decided to download the cache. )</p>",
        "id": 475952112,
        "sender_full_name": "Derek Rhodes",
        "timestamp": 1728506049
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"350992\">Rémy Degenne</span> <a href=\"#narrow/stream/113489-new-members/topic/Slow.20build.20after.20clone/near/475951479\">said</a>:</p>\n<blockquote>\n<p>That's a strange github project. The author copied the entire project <a href=\"https://github.com/sgouezel/kolmogorov_extension4\">https://github.com/sgouezel/kolmogorov_extension4</a> (which extends <a href=\"https://github.com/RemyDegenne/kolmogorov_extension4\">https://github.com/RemyDegenne/kolmogorov_extension4</a>) and put it in a subfolder, instead of adding it as a dependency.</p>\n</blockquote>\n<p>Yes sorry... what exactly would it mean to add it as a dependency?</p>",
        "id": 475956922,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1728507592
    },
    {
        "content": "<p>Will tell you in a minute</p>",
        "id": 475957459,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728507800
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"245476\">Quinn Culver</span> has marked this topic as resolved.</p>",
        "id": 475957636,
        "sender_full_name": "Notification Bot",
        "timestamp": 1728507861
    },
    {
        "content": "<p>In particular, I'm using <code>blueprint</code> which works great but might complicate things(?)</p>",
        "id": 475958108,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1728508064
    },
    {
        "content": "<p><a href=\"https://github.com/bjoernkjoshanssen/marginis/pull/1\">https://github.com/bjoernkjoshanssen/marginis/pull/1</a> - unfortunately you have a version clash you'll need to negotiate with <span class=\"user-mention\" data-user-id=\"110050\">@Sébastien Gouëzel</span></p>",
        "id": 475959453,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728508732
    },
    {
        "content": "<p>I wrote most of the code in this repo, I’ll have a look tomorrow</p>",
        "id": 475959867,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1728508958
    },
    {
        "content": "<p>Thanks, yes there were a couple of minor issues like whether <code>ite_eq_then</code> exists.</p>",
        "id": 475960093,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1728509078
    },
    {
        "content": "<p>I've just bumped mathlib.</p>",
        "id": 476034812,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1728538125
    },
    {
        "content": "<p>In the meantime <span class=\"user-mention\" data-user-id=\"557866\">@Béranger Seguin</span> mentioned that Haar measure (which already is in Mathlib) is enough for Nat -&gt; Bool and I was able to make that work to an extent. But I guess that only covers the fair coin measure and not Bernoulli measure with parameter p.</p>",
        "id": 476039988,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1728540461
    },
    {
        "content": "<p>Well, there's always the option of using the Haar measure on the compact group (R/Z)^N, using the intervals [0,p] and [p, 1] as typical events of probability p and 1-p, but this is somewhat hacky. (although one would argue this is essentially what the \"if rand() &lt;= p\" trick that developers use all the time does!)</p>\n<p><span class=\"user-mention silent\" data-user-id=\"347475\">Bjørn Kjos-Hanssen ☀️</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20Slow.20build.20after.20clone/near/476039988\">said</a>:</p>\n<blockquote>\n<p>In the meantime <span class=\"user-mention silent\" data-user-id=\"557866\">Béranger Seguin</span> mentioned that Haar measure (which already is in Mathlib) is enough for Nat -&gt; Bool and I was able to make that work to an extent. But I guess that only covers the fair coin measure and not Bernoulli measure with parameter p.</p>\n</blockquote>",
        "id": 476044678,
        "sender_full_name": "Béranger Seguin",
        "timestamp": 1728541706
    },
    {
        "content": "<p><a href=\"https://github.com/bjoernkjoshanssen/marginis/pull/1\">https://github.com/bjoernkjoshanssen/marginis/pull/1</a> now builds for me, without needing to build mathlib locally</p>",
        "id": 476048746,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1728542813
    },
    {
        "content": "<p>Thanks very much, <del>I'll study it a bit before merging but looks promising!</del></p>",
        "id": 476052632,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1728543736
    },
    {
        "content": "<p>Seems to work beautifully! Thanks everyone.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"557866\">Béranger Seguin</span> <a href=\"#narrow/stream/113489-new-members/topic/.E2.9C.94.20Slow.20build.20after.20clone/near/476044678\">said</a>:</p>\n<blockquote>\n<p>Well, there's always the option of using the Haar measure on the compact group (R/Z)^N, using the intervals [0,p] and [p, 1] as typical events of probability p and 1-p, but this is somewhat hacky. (although one would argue this is essentially what the \"if rand() &lt;= p\" trick that developers use all the time does!)</p>\n</blockquote>\n<p>That sounds reasonable although yeah, it does add an extra step in that we end up adding <code>Measure.comap</code> or <code>Measure.map</code> on top of a measure.</p>",
        "id": 476260470,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1728611441
    },
    {
        "content": "<p>When importing <code>kolmogorov_extension4</code> (or another project) is it necessary to use exactly the same version of Mathlib as the import uses, in order to avoid slowdowns? Right now compiling Mathlib takes hours for me.</p>",
        "id": 520250708,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1748140810
    },
    {
        "content": "<p>Yes, it is</p>",
        "id": 520267637,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1748156873
    },
    {
        "content": "<p>Many of the results in that repository have been merged to Mathlib. If you were importing it for the Ionescu-Tulcea theorem or for the definition of a product probability measure, you could simply remove the dependency and use only Mathlib.</p>",
        "id": 520268183,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1748157265
    },
    {
        "content": "<p>Great! It seems to be <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=infinitePi#doc\">docs#infinitePi</a></p>",
        "id": 520305678,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1748190200
    },
    {
        "content": "<p>The product measure is here: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Probability/ProductMeasure.html#MeasureTheory.Measure.infinitePi\">https://leanprover-community.github.io/mathlib4_docs/Mathlib/Probability/ProductMeasure.html#MeasureTheory.Measure.infinitePi</a></p>",
        "id": 520309492,
        "sender_full_name": "Rémy Degenne",
        "timestamp": 1748193423
    },
    {
        "content": "<p>Thanks... while it was interesting to have it as an extra dependency beyond Mathlib, this is much better. I don't suppose the infinite product of Bernoulli(p) measures has been added specifically as well?</p>",
        "id": 520310024,
        "sender_full_name": "Bjørn Kjos-Hanssen",
        "timestamp": 1748193829
    }
]