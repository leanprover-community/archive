[
    {
        "content": "<p>Hey everyone. I am a math student with a bit of computer science (generally imperative programming languages, just a little bit of functional programming) background trying to learn lean. So far I have tried reading mathematics in lean, as well as theorem proving in lean. However in both of those books at some point I have encountered examples that I simply could not understand or get ahold of. And I just wanted to ask what is the best way of dealing with this type of problem?<br>\nShould I just put more time into reading and understanding / trying or perhaps are there more \"beginner\" friendly ressources, or should I just ask in communities like here?<br>\n(I hope this is the correct channel to ask :) )</p>",
        "id": 544306175,
        "sender_full_name": "Levi",
        "timestamp": 1760176778
    },
    {
        "content": "<p>Mathematics in Lean should be understandable, with very little prerequisites (but you have to read it carefully step by step). Can you point out the example you don't understand?</p>",
        "id": 544307168,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1760177786
    },
    {
        "content": "<p>Otherwise you can try the natural number game, that is perfect for people not knowing anything about Lean</p>",
        "id": 544307190,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1760177820
    },
    {
        "content": "<p>I was currently reading Theorem Proving in Lean, but I will switch back to mathematics in Lean and get back here when I encounter what I mentioned earlier. I myself can't remember what it was that set me so off.</p>",
        "id": 544329532,
        "sender_full_name": "Levi",
        "timestamp": 1760196864
    },
    {
        "content": "<p>Btw is there a PDF version of the up to date Theorem Proving in Lean? I seem to be only finding an old pdf version. Because I am kind of interested in the logic behind how Lean works. Right now I got a basic grasp of Lean, in a sense of like I can use tactics and all to achieve basic goals, but in some examples I feel like I don't understand Lean itself enough to fully comprehend why a certain proof works.</p>",
        "id": 544330097,
        "sender_full_name": "Levi",
        "timestamp": 1760197325
    },
    {
        "content": "<p>of course, you can ask questions on Zulip</p>",
        "id": 544330661,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760197812
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/how.20to.20fully.20understand.20lean/near/544330661\">said</a>:</p>\n<blockquote>\n<p>of course, you can ask questions on Zulip</p>\n</blockquote>\n<p>but is this the right \"channel\"? (I've never used Zulip before) <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 544330805,
        "sender_full_name": "Levi",
        "timestamp": 1760197930
    },
    {
        "content": "<p>yes</p>",
        "id": 544330843,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760197980
    },
    {
        "content": "<p>ok great. I already got my first question.<br>\nSo I'm starting at the very beginning the type theory. Why is it that Nat.succ has type <code>Nat.succ(n : Nat) : Nat</code> as I kind of expected it to be a function with type <code>Nat -&gt; Nat</code></p>",
        "id": 544331029,
        "sender_full_name": "Levi",
        "timestamp": 1760198153
    },
    {
        "content": "<p>if you <code>#check Nat.succ</code> then <code>#check</code> has special support for checking constants so it can show you the signature in a pretty way</p>",
        "id": 544332143,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760199112
    },
    {
        "content": "<p>if you <code>#check (Nat.succ)</code> then <code>(Nat.succ)</code> isn't syntactically a constant anymore (it's a parenthesized term) so it bypasses this special support and you get <code>Nat.succ : Nat → Nat</code></p>",
        "id": 544332196,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760199171
    },
    {
        "content": "<p>ohhh, yeah I see it now. Thanks!</p>",
        "id": 544332231,
        "sender_full_name": "Levi",
        "timestamp": 1760199201
    },
    {
        "content": "<p>That's kind of what I mean, when I was talking about those two books, I feel like they presume a certain extend of knowledge about Lean before they can be worked really through from beginning to end. (Not to complain though, so far they have been great generally)</p>",
        "id": 544332312,
        "sender_full_name": "Levi",
        "timestamp": 1760199272
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"976985\">@Levi</span> the best way to complement a book is to ask question here with fully working code (see <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>)</p>",
        "id": 544332887,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760199865
    },
    {
        "content": "<p>e.g. if you review the question you just asked, you didn't include the code where you checked the type of Nat.succ, so it was impossible to guess that you accidentally included brackets</p>",
        "id": 544332926,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760199894
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/how.20to.20fully.20understand.20lean/near/544332926\">said</a>:</p>\n<blockquote>\n<p>e.g. if you review the question you just asked, you didn't include the code where you checked the type of Nat.succ, so it was impossible to guess that you accidentally included brackets</p>\n</blockquote>\n<p>ah i understand. Yeah, my bad. Will keep in mind <span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span></p>",
        "id": 544332981,
        "sender_full_name": "Levi",
        "timestamp": 1760199947
    },
    {
        "content": "<p>Anyway the type of <code>Nat.succ</code> is <code>ℕ → ℕ</code> as you expect. It's like saying the function <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>sin</mi><mo>⁡</mo></mrow><annotation encoding=\"application/x-tex\">\\sin</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6679em;\"></span><span class=\"mop\">sin</span></span></span></span> or the function <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>sin</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\sin(x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\">sin</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span></span></span></span>.</p>",
        "id": 544335531,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1760202405
    },
    {
        "content": "<p>I am now tackling the core of the dependent type theory and the primary example in the book is the type list. However I am asking myself whether this <code>compose</code> function would also be an example of an dependant type, as it's type depends on it's arguments</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">compose</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>although (I hope I understood that correctly) in this case the return type of this function is one of it's argument, whereas the type of the List would be of the <em>same</em> type as it's argument's type.</p>",
        "id": 544343114,
        "sender_full_name": "Levi",
        "timestamp": 1760209863
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"976985\">@Levi</span> <code>compose</code> is a term, not a type</p>",
        "id": 544343159,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760209907
    },
    {
        "content": "<p>but i think the <em>type</em> of <code>compose</code> is a dependent type</p>",
        "id": 544343273,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760209989
    },
    {
        "content": "<p>the type of <code>g</code>, <code>f</code>, <code>x</code>, and the return type <code>γ</code> depend on the first three arguments</p>",
        "id": 544343356,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760210029
    },
    {
        "content": "<p><code>compose</code> is a lambda-term (a function); its type is a Pi-type (a big collection of functions).</p>",
        "id": 544344558,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760211052
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Init</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">compose</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">γ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">print</span><span class=\"w\"> </span><span class=\"n\">compose</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">def compose : (α β γ : Type) → (β → γ) → (α → β) → α → γ :=</span>\n<span class=\"cm\">fun α β γ g f x ↦ g (f x)</span>\n\n<span class=\"cm\">compose : Type-of-compose :=</span>\n<span class=\"cm\">definition-of-compose</span>\n\n<span class=\"cm\">-/</span>\n</code></pre></div>",
        "id": 544344809,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760211233
    },
    {
        "content": "<p><code>fun</code> is what Lean 4 calls what most functional languages call lambda, and <code>(X : Type) -&gt; Y</code> is what some people call <code>\\Pi X, Y</code>.</p>",
        "id": 544344887,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760211290
    },
    {
        "content": "<p>Oh, I see. It makes more sense that <code>compose</code> is a term. Thanks</p>",
        "id": 544349696,
        "sender_full_name": "Levi",
        "timestamp": 1760216001
    },
    {
        "content": "<p>Just a question out of curiosity, in the book (Theorem Proving in Lean Chapter 3) it says that if <code>p : Prop</code> and <code>t1 t2: p</code> (fixed typo) then <code>t1</code> and <code>t2</code> are definitially equal (makes sense <span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span> ), but then it says \"... much the same way as it treat <code>(fun x =&gt; t) s</code> and <code>t[s/x]</code> as definitionally equal.\"</p>\n<p>What does <code>t[s/x]</code> mean, is it some sort of sugarcoat for replace all occurrences of x with s in term <code>t</code>? I have never seen an expression of this type before (in this book and in general).</p>",
        "id": 544410818,
        "sender_full_name": "Levi",
        "timestamp": 1760284709
    },
    {
        "content": "<p>that means \"<code>t</code> with <code>s</code> for <code>x</code>\", so you substitute all the occurrences of <code>x</code> in <code>t</code> to <code>s</code></p>",
        "id": 544410877,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1760284760
    },
    {
        "content": "<p>Typo : <code>t1 t2 : p</code></p>",
        "id": 544410984,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1760284858
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/544410818\">said</a>:</p>\n<blockquote>\n<p>I have never seen an expression of this type before (in this book and in general).</p>\n</blockquote>\n<p>it's used in the field of mathematical logic</p>",
        "id": 544411242,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1760285088
    },
    {
        "content": "<p>If you want to dive more deeply into typed lambda calculus, you can consult <a href=\"https://home.ttic.edu/~dreyer/course/papers/barendregt.pdf\">https://home.ttic.edu/~dreyer/course/papers/barendregt.pdf</a>.</p>\n<p>It uses a different notation for substitution though (<code>t[x := s]</code>).</p>",
        "id": 544463172,
        "sender_full_name": "suhr",
        "timestamp": 1760335374
    },
    {
        "content": "<p>Look at λPω.</p>",
        "id": 544463467,
        "sender_full_name": "suhr",
        "timestamp": 1760335498
    },
    {
        "content": "<p>Probably a stupid question, but I haven't been able to find any good explanation from a quick search. What is the difference between <code>Nat</code> and <code>\\N</code>. The current project that I am in does not use Mathlib. I understand that <code>\\N</code> is just sugar-coating for <code>Nat</code>, but without Mathlib it seems that <code>\\N</code> is not recognized. Why is that?</p>",
        "id": 544967428,
        "sender_full_name": "Levi",
        "timestamp": 1760534548
    },
    {
        "content": "<p><code>ℕ</code> is defined in <code>Mathlib/Data/Nat/Notation.lean</code>, so if you don't import that file you don't have the symbol available.</p>",
        "id": 544968656,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1760534838
    },
    {
        "content": "<p>I see. But it is technically no different to <code>Nat</code> right?</p>",
        "id": 544968769,
        "sender_full_name": "Levi",
        "timestamp": 1760534866
    },
    {
        "content": "<p>Exactly, the full code is</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">inherit_doc</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"w\"> </span><span class=\"s2\">\"ℕ\"</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n</code></pre></div>\n<p>so <code>ℕ</code> and <code>Nat</code> are the same thing.</p>",
        "id": 544968894,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1760534899
    },
    {
        "content": "<p>Ah perfect. Thank you <span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span></p>",
        "id": 544968961,
        "sender_full_name": "Levi",
        "timestamp": 1760534915
    },
    {
        "content": "<p>If you use VS Code you can right click on the symbol and then \"go to declaration\" to see the definition</p>",
        "id": 544969243,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1760534990
    },
    {
        "content": "<p>Hey I am back. For some reason I struggle to understand hwo to use the <code>suffice</code> construct as an alternative to <code>have</code>. I fully understand how the <code>have</code> construct works. But from the example given in the book:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">)</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">left</span>\n<span class=\"w\">  </span><span class=\"n\">suffices</span><span class=\"w\"> </span><span class=\"n\">hq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">q</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">And</span><span class=\"bp\">.</span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hq</span><span class=\"w\"> </span><span class=\"n\">hp</span>\n<span class=\"w\">  </span><span class=\"n\">And</span><span class=\"bp\">.</span><span class=\"n\">right</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>I do not fully understand how <code>suffices</code> works. Is it always couples with <code>from</code>? I played a bit around and whenever I leave the <code>from</code> part out it shows me some error, and I have not been able to get it running with another expression. The book does not really goes into detail on that</p>",
        "id": 546288408,
        "sender_full_name": "Levi",
        "timestamp": 1761066441
    },
    {
        "content": "<p>What have you tried?</p>",
        "id": 546290997,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761067340
    },
    {
        "content": "<p>Well, from how I understood the text, suffices assumes that <code>hq : q</code> is true and continues to go on to prove the initial statement. Then after that is done, it goes back to proving that <code>hq : q</code> is true. <br>\nSo I sort of assumed that it should have worked without <code>from</code> and it did not. After that I tried using <code>:=</code> but then I realized that that wouldn't make any sense, as it would be the same as using <code>have</code>.</p>\n<p>So, I am just generally curious what the syntax for <code>suffices</code> is and what advantages it has compared to <code>have</code>. Because as I see it, it just leaves less space for the \"main\" proof, isn't it?</p>",
        "id": 546291368,
        "sender_full_name": "Levi",
        "timestamp": 1761067474
    },
    {
        "content": "<p>I guess you can look at <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Parser.Term.suffices#src\">src#Lean.Parser.Term.suffices</a></p>",
        "id": 546295016,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761068528
    },
    {
        "content": "<p>I'm not sure that that is a helpful comment for a beginner (in the sense that I'm not a beginner and I definitely can't look at that and make any sense of it). I believe that <code>suffices ... by &lt;tactic sequence&gt;</code> also works.</p>",
        "id": 546301185,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761070385
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/546301185\">said</a>:</p>\n<blockquote>\n<p>I'm not sure that this is a helpful comment for a beginner. I believe that <code>suffices ... by &lt;tactic sequence&gt;</code> also works.</p>\n</blockquote>\n<p>ah i see. Yeah that seems to work. But this puts it into tactic mode, correct?</p>\n<p>Yeah, <span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span>  I tried to follow that link, however it leads to a source file of lean on github. I do have a bit of programming background, but honestly to me that looked all like gibberish <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> , couldn't really understand what was going on there. Nonetheless thanks for your help and the faith you've put into me :D</p>",
        "id": 546301788,
        "sender_full_name": "Levi",
        "timestamp": 1761070588
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/546301788\">said</a>:</p>\n<blockquote>\n<p>But this puts it into tactic mode, correct?</p>\n</blockquote>\n<p>Yeah. <code>from</code> drops you into term mode, and <code>by</code> into tactic mode, and in both cases you have what you claim suffices as a hypothesis and the old goal as a goal. And then when you've closed that you have a new goal where you have to prove what you claimed sufficed.</p>",
        "id": 546302343,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761070820
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/546302343\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/546301788\">said</a>:</p>\n<blockquote>\n<p>But this puts it into tactic mode, correct?</p>\n</blockquote>\n<p>Yeah. <code>from</code> drops you into term mode, and <code>by</code> into tactic mode, and in both cases you have what you claim suffices as a hypothesis and the old goal as a goal. And then when you've closed that you have a new goal where you have to prove what you claimed sufficed.</p>\n</blockquote>\n<p>Wonderful! I don't know why, but somehow this explanation just clicks in my head. Thanks a lot!</p>",
        "id": 546302492,
        "sender_full_name": "Levi",
        "timestamp": 1761070875
    },
    {
        "content": "<p>I tried to find something in the Lean Language Reference but either it's not there or my searching skills aren't good enough</p>",
        "id": 546302495,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761070877
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/546302495\">said</a>:</p>\n<blockquote>\n<p>I tried to find something in the Lean Language Reference but either it's not there or my searching skills aren't good enough</p>\n</blockquote>\n<p>I didn't want to come over as stupid ;-), so I also tried to search before I asked, but I just couldn't find anything that explains it in a decent way.</p>",
        "id": 546307944,
        "sender_full_name": "Levi",
        "timestamp": 1761073143
    },
    {
        "content": "<p>The way to understand what <code>suffices</code> does is to use it correctly once and then hover over it and read the docstring. This should hopefully tell you everything you need to know; you don't need to read the parser or guess.</p>",
        "id": 546317503,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1761076910
    },
    {
        "content": "<p>The mathlib manual has a section all tactics, and suffices is documented there: <a href=\"https://leanprover-community.github.io/mathlib-manual/html-multi/Tactics/All-tactics/#suffices-next\">https://leanprover-community.github.io/mathlib-manual/html-multi/Tactics/All-tactics/#suffices-next</a></p>",
        "id": 546327685,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1761080688
    },
    {
        "content": "<blockquote>\n<p>Given a main goal <code>ctx ⊢ t</code>, <code>suffices h : t' from e</code> replaces the main goal with <code>ctx ⊢ t'</code>, <code>e</code> must have type <code>t</code> in the context <code>ctx, h : t'</code>.</p>\n<p>The variant <code>suffices h : t' by tac</code> is a shorthand for <code>suffices h : t' from by tac</code>. If <code>h :</code> is omitted, the name <code>this</code> is used.</p>\n</blockquote>",
        "id": 546327728,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1761080707
    },
    {
        "content": "<p>technically that's a different piece of syntax</p>",
        "id": 546327781,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761080726
    },
    {
        "content": "<p>Does that answer your question?</p>",
        "id": 546327784,
        "sender_full_name": "Michael Rothgang",
        "timestamp": 1761080727
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/546291368\">said</a>:</p>\n<blockquote>\n<p>So, I am just generally curious what the syntax for <code>suffices</code> is</p>\n</blockquote>\n<p>this information is usually included in the docstring of <code>suffices</code> i.e. when you hover over it</p>",
        "id": 546404659,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761124605
    },
    {
        "content": "<p>But before hover works, you need to have some (sufficiently?) valid syntax first, no?</p>",
        "id": 546443819,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1761135741
    },
    {
        "content": "<p>It turns out that you only need a very crude valid syntax in this case:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">find_syntax</span><span class=\"w\"> </span><span class=\"s2\">\"suffices\"</span><span class=\"w\">  </span><span class=\"c1\">-- hover in the infoview!</span>\n</code></pre></div>",
        "id": 546444406,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1761135913
    },
    {
        "content": "<p>I just read about the \"bullet\" notation for structuring tactic proofs. However I have to honestly say, that I do not understand what this notation is trying to achieve. Is it merely to the indentation?</p>",
        "id": 547579682,
        "sender_full_name": "Levi",
        "timestamp": 1761682093
    },
    {
        "content": "<p>yes, and indentation is real (as in it is part of the syntax, and lean will complain if you don't correctly indent)</p>",
        "id": 547579743,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761682118
    },
    {
        "content": "<p>the main point is that sometimes you get 3 goals, the bullet notation is to use one bullet to close one goal</p>",
        "id": 547579798,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761682140
    },
    {
        "content": "<p>ah i see. I should have tested it. I just kinda assumed you could just indent it however you want</p>",
        "id": 547579812,
        "sender_full_name": "Levi",
        "timestamp": 1761682145
    },
    {
        "content": "<p>What is the most intuitive way of explaining the <code>apply</code> tactic? It takes (what does it even take? functions?) something, let's call it <code>a</code> and checks whether this <code>a</code>'s type matches the current goal, then puts all the hypothesis / arguments of <code>a</code> as subgoals?</p>",
        "id": 547580327,
        "sender_full_name": "Levi",
        "timestamp": 1761682377
    },
    {
        "content": "<p>it takes a term</p>",
        "id": 547580376,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761682398
    },
    {
        "content": "<p>it figures out how many arguments to add to <code>a</code> to make its type match the goal</p>",
        "id": 547580429,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761682421
    },
    {
        "content": "<p>and it closes the goal with that and makes one new goal for each argument added</p>",
        "id": 547580491,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761682448
    },
    {
        "content": "<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span> alright got it. Isn't everything a term?</p>",
        "id": 547580516,
        "sender_full_name": "Levi",
        "timestamp": 1761682457
    },
    {
        "content": "<p>everything you can feed to <code>exact</code> is a term</p>",
        "id": 547580742,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761682551
    },
    {
        "content": "<p>everything you can <code>#check</code> is a term</p>",
        "id": 547580751,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761682555
    },
    {
        "content": "<p>btw does the <code>intro</code> command do anything interesting. Or given</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">\\</span><span class=\"n\">a</span><span class=\"w\">  </span><span class=\"bp\">\\</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">    </span><span class=\"c\">/-</span><span class=\"cm\"> ... -/</span>\n</code></pre></div>\n<p>this type of situation, <code>intro</code> just gives you a variable of type <code>\\a</code></p>\n<p>oh god, lemme fix this. What is going on :(<br>\nI give it up, D: but i hope its clear what i mean :D</p>",
        "id": 547580981,
        "sender_full_name": "Levi",
        "timestamp": 1761682660
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"976985\">@Levi</span> the most basic function of apply is this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- the goal is `⊢ Q`, i.e. we need to prove `Q`</span>\n<span class=\"w\">  </span><span class=\"c1\">-- we know that `P` implies `Q` (that's what `h` says)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- so if we apply `h`, then it will suffice to prove `P`</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"c1\">-- goal is now `⊢ P`</span>\n<span class=\"w\">  </span><span class=\"n\">exact</span><span class=\"w\"> </span><span class=\"n\">hp</span>\n</code></pre></div>",
        "id": 547581070,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761682695
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/547580981\">said</a>:</p>\n<blockquote>\n<p>btw does the <code>intro</code> command do anything interesting</p>\n</blockquote>\n<p>it introduces a variable based on either -&gt; or forall, it's mathematically equivalent to \"let n be arbitrary\" or \"suppose p is true\" in the two cases anti-respectively</p>",
        "id": 547581233,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761682771
    },
    {
        "content": "<p>the easiest way to learn how they work is just to observe how the goal changes and try to understand that logically</p>",
        "id": 547581326,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761682810
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- let `n` be an arbitrary `Nat`</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"c1\">-- goal is now `⊢ n = n`</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Q</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- suppose `P` is true</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hp</span>\n<span class=\"w\">  </span><span class=\"c1\">-- goal is now `⊢ Q`</span>\n</code></pre></div>",
        "id": 547581458,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761682862
    },
    {
        "content": "<p>hmmm, does this <code>⊢</code> symbol have any special meaning? Or is it equivalent to suppose ...</p>",
        "id": 547581566,
        "sender_full_name": "Levi",
        "timestamp": 1761682915
    },
    {
        "content": "<p>no, it means \"you need to prove ...\"</p>",
        "id": 547581705,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761682976
    },
    {
        "content": "<p>And on another thought, I thought that forall was just another way of writing -&gt;?</p>",
        "id": 547581764,
        "sender_full_name": "Levi",
        "timestamp": 1761683005
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/547581705\">said</a>:</p>\n<blockquote>\n<p>no, it means \"you need to prove ...\"</p>\n</blockquote>\n<p>oh of course, yeah i see it now. stupid me...</p>",
        "id": 547581787,
        "sender_full_name": "Levi",
        "timestamp": 1761683016
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/547581764\">said</a>:</p>\n<blockquote>\n<p>And on another thought, I thought that forall was just another way of writing -&gt;?</p>\n</blockquote>\n<p>correct, which is why <code>intro</code> works for both</p>",
        "id": 547581919,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761683069
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/547581919\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/547581764\">said</a>:</p>\n<blockquote>\n<p>And on another thought, I thought that forall was just another way of writing -&gt;?</p>\n</blockquote>\n<p>correct, which is why <code>intro</code> works for both</p>\n</blockquote>\n<p>ok nice! finally something i got right. Thank you so much for your patience :D</p>",
        "id": 547581978,
        "sender_full_name": "Levi",
        "timestamp": 1761683097
    },
    {
        "content": "<p>If I use <code>intros</code> then it will create anonymous hypothesis which I can not access via any names right? I am kinda questioning in what scenario this would be helpful</p>",
        "id": 547584578,
        "sender_full_name": "Levi",
        "timestamp": 1761684118
    },
    {
        "content": "<p>Here is an example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intros</span>\n<span class=\"w\">  </span><span class=\"n\">contradiction</span>\n</code></pre></div>\n<p>The <code>contradiction</code> tactic looks for any contradictions between your local hypotheses, regardless of whether or not they have accessible names. If you comment out the <code>intros</code> line then it fails because there are no local hypotheses. It's convenient in this situation to not have to give things names if we're never going to use them</p>",
        "id": 547598277,
        "sender_full_name": "Eric Paul",
        "timestamp": 1761690124
    },
    {
        "content": "<p>Perhaps a weird question, but is there any way in vscode to \"autocomplete\" types. Like in this example </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hpnp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hpnp</span><span class=\"bp\">.</span><span class=\"n\">left</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hnp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hpnp</span><span class=\"bp\">.</span><span class=\"n\">right</span>\n<span class=\"w\">    </span><span class=\"n\">hnp</span><span class=\"w\"> </span><span class=\"n\">hp</span>\n</code></pre></div>\n<p>I would like to leave the type of <code>hpnp</code> out and have the editor auto fill it itself. I know that this question is not really lean related, as it is a vscode thing, but perhaps someone has encountered something that works?<br>\n(PS: I know that you can hover over it to see the type that lean expects the variable to have, however it would be great for the workflow if there was some way of automating this, as it is always nicer to directly see the type written out on the screen rather than guessing, or having to hover over it every time)</p>\n<p>when I mean auto complete, I mean something like this<br>\n<a href=\"/user_uploads/3121/F8htSrGezqJhulfamShUt2a6/image.png\">image.png</a><br>\nwhere the implicit arguemnt <code>{p}</code> is displayed</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/F8htSrGezqJhulfamShUt2a6/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"328x128\" src=\"/user_uploads/thumbnail/3121/F8htSrGezqJhulfamShUt2a6/image.png/840x560.webp\"></a></div>",
        "id": 547727066,
        "sender_full_name": "Levi",
        "timestamp": 1761747194
    },
    {
        "content": "<p>You can just write <code>fun hpnp =&gt; ...</code></p>",
        "id": 547728486,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761747522
    },
    {
        "content": "<p>Or do you really want to see it?</p>",
        "id": 547728570,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761747545
    },
    {
        "content": "<p>yeah, i know that you could leave out the type. And in this example it is kind of obvious what the type would be, but in general i was thinking that having the type displayed would be good. Especially if the type is some complex term</p>",
        "id": 547728744,
        "sender_full_name": "Levi",
        "timestamp": 1761747589
    },
    {
        "content": "<p>You write <code>fun hpnp =&gt;</code> and you hoover with the cursor over <code>hpnp </code> you will see it's type, not sure if this helps.</p>",
        "id": 547728909,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761747629
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"130384\">Riccardo Brasca</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/547728909\">said</a>:</p>\n<blockquote>\n<p>You write <code>fun hpnp =&gt;</code> and you hoover with the cursor over <code>hpnp </code> you will see it's type, not sure if this helps.</p>\n</blockquote>\n<p>ah yes, this would work, but is there no way of having it displayed in line?</p>",
        "id": 547729040,
        "sender_full_name": "Levi",
        "timestamp": 1761747658
    },
    {
        "content": "<p>And in tactic mode of course you see it in the infoview.</p>",
        "id": 547729087,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1761747669
    },
    {
        "content": "<p>ah right, yeah nevermind then, i forgot about tactic mode.</p>",
        "id": 547729207,
        "sender_full_name": "Levi",
        "timestamp": 1761747698
    },
    {
        "content": "<p>what if we write a macro <code>type?</code> and then you would type <code>fun hpnp : type? =&gt;</code> and then it will generate an action message containing the elaborated type</p>",
        "id": 547746305,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761751450
    },
    {
        "content": "<p>or even better, call it <code>_?</code></p>",
        "id": 547746479,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761751486
    },
    {
        "content": "<p>it'd have to delay the showing somehow</p>",
        "id": 547748122,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761751873
    },
    {
        "content": "<p>i mean <code>_</code> already exists and it does show the inferred type in its hover</p>",
        "id": 547750230,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761752328
    },
    {
        "content": "<p>but if you put it inline then</p>",
        "id": 547750343,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761752354
    },
    {
        "content": "<p>I guess it could be a code action</p>",
        "id": 547750374,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761752361
    },
    {
        "content": "<p>yeah that makes sense</p>",
        "id": 547750425,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761752369
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/547746305\">said</a>:</p>\n<blockquote>\n<p>what if we write a macro <code>type?</code> and then you would type <code>fun hpnp : type? =&gt;</code> and then it will generate an action message containing the elaborated type</p>\n</blockquote>\n<p>hmm, yeah nice idea. But I don't know if I am skilled enough :D</p>",
        "id": 547797488,
        "sender_full_name": "Levi",
        "timestamp": 1761766285
    },
    {
        "content": "<p>But I will look into it once I have time (and the skill).</p>",
        "id": 547797555,
        "sender_full_name": "Levi",
        "timestamp": 1761766315
    },
    {
        "content": "<p>Another question though. Is there any difference between <code>repeat intro</code> and <code>intros</code></p>",
        "id": 547797611,
        "sender_full_name": "Levi",
        "timestamp": 1761766333
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"976985\">@Levi</span> if you write code you can hover over stuff to get info</p>\n<p><a href=\"/user_uploads/3121/UWkbMrL-9jc4vG56qI8SBHOT/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/UWkbMrL-9jc4vG56qI8SBHOT/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"1028x368\" src=\"/user_uploads/thumbnail/3121/UWkbMrL-9jc4vG56qI8SBHOT/image.png/840x560.webp\"></a></div>",
        "id": 547797930,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761766459
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"976985\">@Levi</span> and if you want more stuff behind the scenes, <a href=\"https://github.com/leanprover/lean4/blob/1587d02dfbe0b4759b7f63657bbc8ac8eb352992/src/Lean/Elab/Tactic/BuiltinTactic.lean#L358\">intros</a> calls <a href=\"https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Intro.lean#L175-L185\">MVarId.intros</a>, and it calculates the number of intros via <a href=\"https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Intro.lean#L165-L173\">getIntrosSize</a>, which operates purely on the level of expressions without doing any definitional unfolding, as you can see from the definition:</p>\n<p><a href=\"/user_uploads/3121/l7U60UkLJ0sZqKczOscqolJL/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/l7U60UkLJ0sZqKczOscqolJL/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"376x131\" src=\"/user_uploads/thumbnail/3121/l7U60UkLJ0sZqKczOscqolJL/image.png/840x560.webp\"></a></div><p>it just does the very simple stuff of \"I see forall, I increase the count by 1\"</p>",
        "id": 547798893,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761766839
    },
    {
        "content": "<p>this took so long</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">CodeAction</span><span class=\"w\"> </span><span class=\"n\">Server</span><span class=\"w\"> </span><span class=\"n\">RequestM</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">hole_code_action</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fillHoleCodeAction</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HoleCodeAction</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">contextInfo</span><span class=\"w\"> </span><span class=\"n\">termInfo</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">readDoc</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">eager</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lsp</span><span class=\"bp\">.</span><span class=\"n\">CodeAction</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">title</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"Replace hole with inferred value\"</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">pure</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[{</span>\n<span class=\"w\">    </span><span class=\"n\">eager</span>\n<span class=\"w\">    </span><span class=\"n\">lazy?</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">termInfo</span><span class=\"bp\">.</span><span class=\"n\">stx</span><span class=\"bp\">.</span><span class=\"n\">getPos?</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">eager</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">termInfo</span><span class=\"bp\">.</span><span class=\"n\">stx</span><span class=\"bp\">.</span><span class=\"n\">getTailPos?</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">eager</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"bp\">.</span><span class=\"n\">meta</span><span class=\"bp\">.</span><span class=\"n\">text</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">indent</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">column</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">TryThis</span><span class=\"bp\">.</span><span class=\"n\">getIndentAndColumn</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">start</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"bp\">⟩</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">newText</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">termInfo</span><span class=\"bp\">.</span><span class=\"n\">runMetaM</span><span class=\"w\"> </span><span class=\"n\">contextInfo</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">instantiateMVars</span><span class=\"w\"> </span><span class=\"n\">termInfo</span><span class=\"bp\">.</span><span class=\"n\">expr</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">delab</span><span class=\"w\"> </span><span class=\"n\">expr</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">format</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">ppTerm</span><span class=\"w\"> </span><span class=\"n\">term</span>\n<span class=\"w\">        </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">format</span><span class=\"bp\">.</span><span class=\"n\">pretty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">indent</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">indent</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">column</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">column</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">pure</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">eager</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">        </span><span class=\"n\">edit?</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">ofTextEdit</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"bp\">.</span><span class=\"n\">versionedIdentifier</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">          </span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"bp\">.</span><span class=\"n\">utf8RangeToLspRange</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">start</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"bp\">⟩</span>\n<span class=\"w\">          </span><span class=\"n\">newText</span>\n<span class=\"w\">        </span><span class=\"o\">}</span>\n<span class=\"w\">      </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">}]</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">hpnp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hpnp</span><span class=\"bp\">.</span><span class=\"n\">left</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hnp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hpnp</span><span class=\"bp\">.</span><span class=\"n\">right</span>\n<span class=\"w\">    </span><span class=\"n\">hnp</span><span class=\"w\"> </span><span class=\"n\">hp</span>\n</code></pre></div>",
        "id": 547800532,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761767486
    },
    {
        "content": "<p>now to figure out how to get it to not fire when the value can't be inferred</p>",
        "id": 547800902,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761767661
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/547798893\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> and if you want more stuff behind the scenes, <a href=\"https://github.com/leanprover/lean4/blob/1587d02dfbe0b4759b7f63657bbc8ac8eb352992/src/Lean/Elab/Tactic/BuiltinTactic.lean#L358\">intros</a> calls <a href=\"https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Intro.lean#L175-L185\">MVarId.intros</a>, and it calculates the number of intros via <a href=\"https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Lean/Meta/Tactic/Intro.lean#L165-L173\">getIntrosSize</a>, which operates purely on the level of expressions without doing any definitional unfolding, as you can see from the definition:</p>\n<p><a href=\"/user_uploads/3121/l7U60UkLJ0sZqKczOscqolJL/image.png\">image.png</a></p>\n<p>it just does the very simple stuff of \"I see forall, I increase the count by 1\"</p>\n</blockquote>\n<p>oh i see! very interesting. And sorry if I am asking stupid questions.</p>",
        "id": 547800989,
        "sender_full_name": "Levi",
        "timestamp": 1761767700
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/547800532\">said</a>:</p>\n<blockquote>\n<p>this took so long</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">CodeAction</span><span class=\"w\"> </span><span class=\"n\">Server</span><span class=\"w\"> </span><span class=\"n\">RequestM</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">hole_code_action</span><span class=\"kd\">]</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fillHoleCodeAction</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">HoleCodeAction</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">contextInfo</span><span class=\"w\"> </span><span class=\"n\">termInfo</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">readDoc</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">eager</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Lsp</span><span class=\"bp\">.</span><span class=\"n\">CodeAction</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">    </span><span class=\"n\">title</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"s2\">\"Replace hole with inferred value\"</span>\n<span class=\"w\">  </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"n\">pure</span><span class=\"w\"> </span><span class=\"bp\">#</span><span class=\"o\">[{</span>\n<span class=\"w\">    </span><span class=\"n\">eager</span>\n<span class=\"w\">    </span><span class=\"n\">lazy?</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">start</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">termInfo</span><span class=\"bp\">.</span><span class=\"n\">stx</span><span class=\"bp\">.</span><span class=\"n\">getPos?</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">eager</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">termInfo</span><span class=\"bp\">.</span><span class=\"n\">stx</span><span class=\"bp\">.</span><span class=\"n\">getTailPos?</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">eager</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"bp\">.</span><span class=\"n\">meta</span><span class=\"bp\">.</span><span class=\"n\">text</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">indent</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">column</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Meta</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span><span class=\"bp\">.</span><span class=\"n\">TryThis</span><span class=\"bp\">.</span><span class=\"n\">getIndentAndColumn</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">start</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"bp\">⟩</span>\n<span class=\"w\">      </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">newText</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">termInfo</span><span class=\"bp\">.</span><span class=\"n\">runMetaM</span><span class=\"w\"> </span><span class=\"n\">contextInfo</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">instantiateMVars</span><span class=\"w\"> </span><span class=\"n\">termInfo</span><span class=\"bp\">.</span><span class=\"n\">expr</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">term</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">delab</span><span class=\"w\"> </span><span class=\"n\">expr</span>\n<span class=\"w\">        </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">format</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">PrettyPrinter</span><span class=\"bp\">.</span><span class=\"n\">ppTerm</span><span class=\"w\"> </span><span class=\"n\">term</span>\n<span class=\"w\">        </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">format</span><span class=\"bp\">.</span><span class=\"n\">pretty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">indent</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">indent</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">column</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">column</span><span class=\"o\">)</span>\n<span class=\"w\">      </span><span class=\"n\">pure</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">eager</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">        </span><span class=\"n\">edit?</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">ofTextEdit</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"bp\">.</span><span class=\"n\">versionedIdentifier</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">          </span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">map</span><span class=\"bp\">.</span><span class=\"n\">utf8RangeToLspRange</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">start</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"bp\">⟩</span>\n<span class=\"w\">          </span><span class=\"n\">newText</span>\n<span class=\"w\">        </span><span class=\"o\">}</span>\n<span class=\"w\">      </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"o\">}]</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"bp\">∧</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">p</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">hpnp</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hpnp</span><span class=\"bp\">.</span><span class=\"n\">left</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hnp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hpnp</span><span class=\"bp\">.</span><span class=\"n\">right</span>\n<span class=\"w\">    </span><span class=\"n\">hnp</span><span class=\"w\"> </span><span class=\"n\">hp</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I stupidly straightfoward copied the code, but it does not seem to autofill it for me. But I guess I copied it to the wrong place?</p>",
        "id": 547801091,
        "sender_full_name": "Levi",
        "timestamp": 1761767738
    },
    {
        "content": "<p>Put your cursor in the underscore</p>",
        "id": 547801132,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761767757
    },
    {
        "content": "<p>it's a code action should pop up</p>",
        "id": 547801161,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761767770
    },
    {
        "content": "<p>hmm, i did. but it just shows me Prop and the the other definition thingy</p>",
        "id": 547801228,
        "sender_full_name": "Levi",
        "timestamp": 1761767808
    },
    {
        "content": "<p>no put your text cursor in there</p>",
        "id": 547801268,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761767827
    },
    {
        "content": "<p>like the little vertical flashing line</p>",
        "id": 547801321,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761767844
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/DK-Fsd2aVSPKbke9hkv4t7zz/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/DK-Fsd2aVSPKbke9hkv4t7zz/image.png\" title=\"image.png\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"480x270\" src=\"/user_uploads/thumbnail/3121/DK-Fsd2aVSPKbke9hkv4t7zz/image.png/840x560.webp\"></a></div>",
        "id": 547801371,
        "sender_full_name": "Levi",
        "timestamp": 1761767866
    },
    {
        "content": "<p>click the lightbulb</p>",
        "id": 547801402,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761767878
    },
    {
        "content": "<p>ahh, now i understand. Thanks! Wow this is pretty awesome work! And so quick <span aria-label=\"starry eyed\" class=\"emoji emoji-1f929\" role=\"img\" title=\"starry eyed\">:starry_eyed:</span></p>",
        "id": 547801459,
        "sender_full_name": "Levi",
        "timestamp": 1761767900
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"816344\">@Aaron Liu</span> nice!</p>",
        "id": 547801537,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761767923
    },
    {
        "content": "<p>I copied the code from all the other code actions</p>",
        "id": 547801608,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761767959
    },
    {
        "content": "<p>so it's inspired by the guard_msgs action and the try this action</p>",
        "id": 547801678,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761767984
    },
    {
        "content": "<p>do you think it's easy to convert it to the <code>simp?</code>-style action where you get a blue underscore and a button in the infoview</p>",
        "id": 547801813,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761768038
    },
    {
        "content": "<p>not very hard</p>",
        "id": 547801881,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761768063
    },
    {
        "content": "<p>but it'll show up on every hole</p>",
        "id": 547801905,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761768070
    },
    {
        "content": "<p>actually you need to modify the infotree</p>",
        "id": 547802031,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761768113
    },
    {
        "content": "<p>this might be easy and it might be impossible</p>",
        "id": 547802060,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761768124
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/547801905\">said</a>:</p>\n<blockquote>\n<p>but it'll show up on every hole</p>\n</blockquote>\n<p>well my suggested syntax was <code>_?</code></p>",
        "id": 547802175,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761768161
    },
    {
        "content": "<p>oh yeah</p>",
        "id": 547802206,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761768177
    },
    {
        "content": "<p>is there anyway to have this autotrigger or certain input? Like I know I am nitpicking right now, but that surely would be awesome I think (if it is possible)</p>",
        "id": 547802229,
        "sender_full_name": "Levi",
        "timestamp": 1761768186
    },
    {
        "content": "<p>since I'm using <code>@[hole_code_action]</code> it only works on <code>_</code> right now</p>",
        "id": 547802249,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761768194
    },
    {
        "content": "<p>I don't know how to make it do <code>_?</code> instead</p>",
        "id": 547802267,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761768201
    },
    {
        "content": "<p>do you know how <code>simp?</code> works? (i don't)</p>",
        "id": 547802309,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761768222
    },
    {
        "content": "<p>it calls <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Lean.Meta.Tactic.TryThis.addSuggestion#doc\">docs#Lean.Meta.Tactic.TryThis.addSuggestion</a> I think</p>",
        "id": 547802371,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761768252
    },
    {
        "content": "<p>the problem is that you have to pretty print the value in the hole <em>after</em> everything else has finished otherwise you'll just get an unassigned metavariable</p>",
        "id": 547802568,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1761768332
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Prop</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">P</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">P</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">show_term</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>maybe we can modify <code>show_term</code> instead?</p>",
        "id": 547802982,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761768513
    },
    {
        "content": "<p>since we can't tweak the elaboration order from within the hole</p>",
        "id": 547803015,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1761768526
    },
    {
        "content": "<p>Sorry if this is a topic break. But I am thinking about <code>assumption</code> right now. The straight forward application is quite intuitive, it just searches for an assumption that matches the current goal. But the book also talks about \"unifying metavariables if necessary\", I don't really understand what that means. I think I understand the example they gave:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">w</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Eq</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n<span class=\"w\">  </span><span class=\"n\">assumption</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Eq</span><span class=\"bp\">.</span><span class=\"n\">trans</span>\n<span class=\"w\">  </span><span class=\"n\">repeat</span><span class=\"w\"> </span><span class=\"n\">assumption</span>\n</code></pre></div>\n<p>But I don't think I fully understand what unifying meta variables means.</p>",
        "id": 548337367,
        "sender_full_name": "Levi",
        "timestamp": 1762029960
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"976985\">@Levi</span> when you apply Eq.trans, you're reducing the goal <code>x = w</code> to now two goals, <code>x = something</code> and <code>something = w</code>. Lean does not yet know what the <code>something</code> should be, so it's called a metavariable, and when you look at it in the infoview, it shows up with a <code>?</code> before it, i.e. it shows up as <code>x = ?b</code> and <code>?b = w</code>, where <code>?b</code> is the metavariable</p>",
        "id": 548337512,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762030132
    },
    {
        "content": "<p>when you now do assumption on the first goal <code>x = ?b</code>, it tries to match this against each assumption you have, and only <code>h1 : x = y</code> matches this, so now Lean infers that <code>?b</code> should have been <code>y</code>, this process is called unifying the metavariable</p>",
        "id": 548337545,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762030170
    },
    {
        "content": "<p>so basically every time you supply not enough information, that blank is called a metavariable, and the process of filling in the blank is called unifying the metavariable</p>",
        "id": 548337581,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762030210
    },
    {
        "content": "<p>I see, so if I had a hypothesis for <code>x = y</code> and <code>y = w</code> it would have immediately solved the goal by infering that the metavariables should be <code>y</code>. Thanks for the help again!</p>",
        "id": 548337617,
        "sender_full_name": "Levi",
        "timestamp": 1762030250
    },
    {
        "content": "<p>Another quick question. Is there any useful application of <code>revert</code> in any proof? Because all those examples I have seen only used <code>revert</code> to rename the hypothesis, which is kind of \"pointless\" in my eyes.</p>",
        "id": 553273112,
        "sender_full_name": "Levi",
        "timestamp": 1762116840
    },
    {
        "content": "<p>sometimes I have to <code>revert</code> something for <code>rw</code> to generate a type correct motive</p>",
        "id": 553273135,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762116867
    },
    {
        "content": "<p>hmmm... That might be asking for a bit too much, but is there any simple example for this? I can't really think of anything straight out of my head that would make any sense. (Not that I have many examples that I can think of :D )</p>",
        "id": 553273196,
        "sender_full_name": "Levi",
        "timestamp": 1762116940
    },
    {
        "content": "<p>simple example</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hij</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">HEq</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- rw [← hij]</span>\n<span class=\"w\">  </span><span class=\"n\">revert</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 553274441,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762118080
    },
    {
        "content": "<p>there is also <code>decide +revert</code>, and then I mostly use <code>induction .. generalizing ..</code> which encompasses revert in a way</p>",
        "id": 553274454,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762118095
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">decide</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"n\">revert</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"c1\">-- a✝ : m + n✝ = n✝ + m</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">generalizing</span><span class=\"w\"> </span><span class=\"n\">m</span>\n<span class=\"w\">  </span><span class=\"c1\">-- a✝ : ∀ (m : Nat), m + n✝ = n✝ + m</span>\n</code></pre></div>",
        "id": 553274552,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762118170
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"816344\">Aaron Liu</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553274441\">said</a>:</p>\n<blockquote>\n<p>simple example</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subsingleton</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hij</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">j</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">HEq</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- rw [← hij]</span>\n<span class=\"w\">  </span><span class=\"n\">revert</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">hij</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">y</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">elim</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">]</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>Thanks. I'm still too bad to understand it immediately, but I will try to understand what it does.</p>",
        "id": 553276157,
        "sender_full_name": "Levi",
        "timestamp": 1762119809
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"976985\">@Levi</span> read the docstring on each tactic, look at the goal (and context) before and after each line, and try to connect the logic</p>",
        "id": 553276547,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762120225
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553276547\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> read the docstring on each tactic, look at the goal (and context) before and after each line, and try to connect the logic</p>\n</blockquote>\n<p>Thanks for the tip! But I already got some difficulties understanding the statement iself. But I think that is mainly because I have never seen <code>HEq</code> before.</p>",
        "id": 553276940,
        "sender_full_name": "Levi",
        "timestamp": 1762120731
    },
    {
        "content": "<p>Another unrelated question. If <code>constructor</code> just applies the first possible constructor for any given type, what is the advantage of using it instead of the actual constructor? Because if I am trying to prove a disjunction but i dont want to use the first constructor (whatever that is) then <code>constructor</code> wouldn't really help me either way.<br>\nBut I guess <code>constructor</code> can be used in some automations?</p>",
        "id": 553277079,
        "sender_full_name": "Levi",
        "timestamp": 1762120849
    },
    {
        "content": "<p>yeah that is a bit involved, maybe you can ignore HEq for now</p>",
        "id": 553277088,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762120856
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553277079\">said</a>:</p>\n<blockquote>\n<p>what is the advantage of using it instead of the actual constructor?</p>\n</blockquote>\n<p>a lot of the time there is only one constructor</p>\n<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553277079\">said</a>:</p>\n<blockquote>\n<p>trying to prove a disjunction</p>\n</blockquote>\n<p>there are the tactics <code>left</code> and <code>right</code></p>",
        "id": 553277129,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762120898
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553277079\">said</a>:</p>\n<blockquote>\n<p>Another unrelated question. If <code>constructor</code> just applies the first possible constructor for any given type, what is the advantage of using it instead of the actual constructor? Because if I am trying to prove a disjunction but i dont want to use the first constructor (whatever that is) then <code>constructor</code> wouldn't really help me either way.<br>\nBut I guess <code>constructor</code> can be used in some automations?</p>\n</blockquote>\n<p>You don't have to know the name of the constructor or how many arguments it takes or which constructor to use (if there are multiple constructors but only one of them with based on the type of the goal)</p>",
        "id": 553277173,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762120943
    },
    {
        "content": "<p>i see, yeah that's what I guessed. Yeah not having to know the name makes sense. But does a conjunction count as inductive type? Maybe this is a horrendously stupid question, but I thought it was just a \"normal\" type.</p>\n<p>Ah, so if there are multiple constructors, but only one's \"output\" matches the goal then it will apply that constructor (or the first kind of those constructors), right?</p>\n<p>And I didn't knew about <code>left</code> and <code>right</code> before, how enlightening.</p>",
        "id": 553277270,
        "sender_full_name": "Levi",
        "timestamp": 1762121070
    },
    {
        "content": "<p>what do you mean \"normal\" type?</p>",
        "id": 553277303,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762121103
    },
    {
        "content": "<p>there aren't that many ways to construct types in Lean</p>",
        "id": 553277329,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762121126
    },
    {
        "content": "<p>i thought it was just a structure with some fields. I don't really know the formal definition for inductive types in lean (yet :D )</p>",
        "id": 553277346,
        "sender_full_name": "Levi",
        "timestamp": 1762121146
    },
    {
        "content": "<p>A structure is a kind of inductive type</p>",
        "id": 553277372,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762121167
    },
    {
        "content": "<p>There are three kinds of types in lean: inductive types, function types and quotient types. If you're trying to \"fully understand lean\" then this is one of the absolute basics. Have you read the first couple of chapters of <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/\">#tpil</a> yet?</p>",
        "id": 553277439,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1762121243
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553277439\">said</a>:</p>\n<blockquote>\n<p>There are three kinds of types in lean: inductive types, function types and quotient types. If you're trying to \"fully understand lean\" then this is one of the absolute basics. Have you read the first couple of chapters of <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/\">#tpil</a> yet?</p>\n</blockquote>\n<p>yes, i am on chapter 5, that's why im asking all those questions about tactics <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span><br>\nAnd yes fully understanding lean is perhaps a bit optimistic, but at least partially :D so that I can use it to prove something interesting.</p>",
        "id": 553277472,
        "sender_full_name": "Levi",
        "timestamp": 1762121286
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553277346\">said</a>:</p>\n<blockquote>\n<p>the formal definition for inductive types in lean</p>\n</blockquote>\n<p>forget formal, inductive type allows you to build elements \"from scratch\", and guarantees that those are all the elements that exist. for example, you can build a natural number using <a href=\"http://Nat.zero\">Nat.zero</a> or Nat.succ, and every natural number is built that way.</p>\n<p>In contrast, there's no way for you to build a function <code>Nat -&gt; Nat</code> from scratch, because you can do all sorts of things, so <code>Nat -&gt; Nat</code> is not an inductive type</p>\n<p>and for quotient, it's a bit more subtle, it doesn't satisfy the \"injectivity\" criterion; for example, there's an axiom saying that if you build a natural number using a different pathway, then you are guaranteed to obtain a different natural number. this is why <a href=\"http://Nat.zero\">Nat.zero</a> cannot be equal to Nat.succ <a href=\"http://Nat.zero\">Nat.zero</a>. However, quotient types don't have this property, because you can use different pathways to build the same object.</p>",
        "id": 553278135,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762121899
    },
    {
        "content": "<p>I shouldn't have to explain all this, I would assume that tpil has covered this</p>",
        "id": 553278171,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762121917
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553278171\">said</a>:</p>\n<blockquote>\n<p>I shouldn't have to explain all this, I would assume that tpil has covered this</p>\n</blockquote>\n<p>I suppose. <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> I hope they do in chapter 7, at least that's the one labelled inductive types. But I haven't dared to take a peek into that yet. Still thanks for the explanation, it really does make a lot more sense now.</p>",
        "id": 553278298,
        "sender_full_name": "Levi",
        "timestamp": 1762121995
    },
    {
        "content": "<p>Is there a table somewhere that shows the Lean operators, their precedences, and whether they're left or right associative? All the colons, arrows, equal signs are a bit much...</p>",
        "id": 553287370,
        "sender_full_name": "Axel Boldt",
        "timestamp": 1762131507
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"985380\">Axel Boldt</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553287370\">said</a>:</p>\n<blockquote>\n<p>Is there a table somewhere that shows the Lean operators, their precedences, and whether they're left or right associative? All the colons, arrows, equal signs are a bit much...</p>\n</blockquote>\n<p>it's basically all <a href=\"https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Init/Notation.lean#L280\">here</a>, L280-L458</p>",
        "id": 553287655,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762131729
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553287655\">said</a>:</p>\n<blockquote>\n<p>it's basically all <a href=\"https://github.com/leanprover/lean4/blob/744f98064b056ee27fc8c97f524797c8cc96f436/src/Init/Notation.lean#L280\">here</a>, L280-L458</p>\n</blockquote>\n<p>That's pretty good, thanks!  But the scariest ones I cannot find there, like:<br>\n     :<br>\n    -&gt;<br>\n     :=   <br>\n     ,  <br>\n     &lt;;&gt;<br>\n     ↑<br>\n     ▸</p>",
        "id": 553289177,
        "sender_full_name": "Axel Boldt",
        "timestamp": 1762133456
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"985380\">@Axel Boldt</span> some of these are <em>really</em> fundamental (like <code>:=</code>) and some of them isn't one syntax (like <code>(foo, bar)</code>) but you can generally do:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"bp\">#</span><span class=\"n\">find_syntax</span><span class=\"w\"> </span><span class=\"s2\">\"↑\"</span>\n</code></pre></div>\n<p>and then see</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>In `Init.Coe`:\n  coeNotation: '↑'\n</code></pre></div>\n<p>and then go to <code>coeNotation</code></p>",
        "id": 553344155,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762164954
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553344155\">said</a>:</p>\n<blockquote>\n<p>some of these are <em>really</em> fundamental (like <code>:=</code>)</p>\n</blockquote>\n<p>They sure are, and confusing! For example, the very first piece of Lean code in the TPIL book has the line</p>\n<p><code>have hp : p := And.left hpq</code></p>\n<p>Here, most laymen would assume that hp is some sort of name for the following assignment, where <code>p</code> is given the value of <code>And.left hpq</code>. The experts will know that <code>:</code> binds stronger than <code>:=</code>, and both bind stronger than <code>have</code>.</p>",
        "id": 553428900,
        "sender_full_name": "Axel Boldt",
        "timestamp": 1762187809
    },
    {
        "content": "<p>I guess I don't really think about it in terms of binding, I just know the pattern <code>&lt;decl-name&gt; : &lt;type&gt; := &lt;definition&gt;</code></p>",
        "id": 553430531,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762188288
    },
    {
        "content": "<p>to me this is one syntax</p>",
        "id": 553430560,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762188295
    },
    {
        "content": "<p><code>:=</code> is actually a lot of syntaxes that are all done roughly the same way so you only have to learn it once</p>",
        "id": 553430664,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762188318
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"985380\">Axel Boldt</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553428900\">said</a>:</p>\n<blockquote>\n<p>The experts will know that <code>:</code> binds stronger than <code>:=</code>, and both bind stronger than <code>have</code>.</p>\n</blockquote>\n<p>If you look at the AST it's</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"k\">have</span>\n<span class=\"w\">  </span><span class=\"s2\">\"have\"</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"n\">letConfig</span><span class=\"w\"> </span><span class=\"o\">[])</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"n\">letDecl</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"n\">letIdDecl</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"n\">letId</span><span class=\"w\"> </span><span class=\"ss\">`hp</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"o\">[]</span>\n<span class=\"w\">    </span><span class=\"o\">[(</span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"n\">typeSpec</span><span class=\"w\"> </span><span class=\"s2\">\":\"</span><span class=\"w\"> </span><span class=\"ss\">`p</span><span class=\"o\">)]</span>\n<span class=\"w\">    </span><span class=\"s2\">\":=\"</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">Term</span><span class=\"bp\">.</span><span class=\"n\">app</span><span class=\"w\"> </span><span class=\"ss\">`And.left</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"ss\">`hpq</span><span class=\"o\">])))</span>\n<span class=\"w\">  </span><span class=\"o\">[]</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">rest</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">expression</span><span class=\"o\">))</span>\n</code></pre></div>",
        "id": 553431918,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1762188684
    },
    {
        "content": "<p>Axel, your point make sense!</p>\n<p>However, I find it hard to learn any language without understanding at least its basic syntax first. In the <a href=\"https://lean-lang.org/learn/\">learn</a> page of the official site, you'll find other sources, including the <a href=\"https://lean-lang.org/doc/reference/latest/\">official language reference</a>.</p>\n<p>I find the topic name of this thread quite intriguing. Anyone intending to <em>fully</em> understand Lean will need to understand that Lean is highly extensible. Several forms of syntax are extensions done either in core, in mathlib or somewhere else.</p>\n<p>The <code>have</code> syntax is no exception. If you \"go to definition\" of <code>have</code> in term-mode, it will take you to</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kd\">@[</span><span class=\"n\">builtin_term_elab</span><span class=\"w\"> </span><span class=\"bp\">«</span><span class=\"n\">have</span><span class=\"bp\">»</span><span class=\"kd\">]</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">elabHaveDecl</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TermElab</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">stx</span><span class=\"w\"> </span><span class=\"n\">expectedType?</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">elabLetDeclCore</span><span class=\"w\"> </span><span class=\"n\">stx</span><span class=\"w\"> </span><span class=\"n\">expectedType?</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">nondep</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"o\">}</span>\n</code></pre></div>\n<p>In tactic mode, it will take you to</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">syntax</span><span class=\"w\"> </span><span class=\"s2\">\"have\"</span><span class=\"w\"> </span><span class=\"n\">letConfig</span><span class=\"w\"> </span><span class=\"n\">letDecl</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tactic</span>\n<span class=\"kn\">macro_rules</span>\n<span class=\"w\">  </span><span class=\"c1\">-- special case: when given a nested `by` block, move it outside of the `refine` to enable</span>\n<span class=\"w\">  </span><span class=\"c1\">-- incrementality</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"bp\">`</span><span class=\"o\">(</span><span class=\"n\">tactic</span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"k\">have</span><span class=\"bp\">%$</span><span class=\"n\">haveTk</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">id</span><span class=\"o\">:</span><span class=\"n\">letId</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">bs</span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"bp\">%$</span><span class=\"n\">byTk</span><span class=\"w\"> </span><span class=\"bp\">$</span><span class=\"n\">tacs</span><span class=\"bp\">*</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"bp\">...</span>\n</code></pre></div>\n<p>Often you'll be able to inspect the syntax rules of a piece of code you're interested in. Arguably, learning how to inspect various syntaxes is more aligned with the goal of fully understanding Lean than knowing the precise syntax of every extension.</p>",
        "id": 553432545,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1762188865
    },
    {
        "content": "<p>(Axel is not OP)</p>",
        "id": 553432699,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1762188915
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110064\">Kenny Lau</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553432699\">said</a>:</p>\n<blockquote>\n<p>(Axel is not OP)</p>\n</blockquote>\n<p>I understand, sorry! I just wanted to show that you can dig deeper and deeper to understand something in Lean. Ultimately, Lean's frontend is built in Lean itself, so everything is in plain sight (if you know where to look!).</p>",
        "id": 553433195,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1762189055
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"985380\">Axel Boldt</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553428900\">said</a>:</p>\n<blockquote>\n<p>For example, the very first piece of Lean code in the TPIL book has the line</p>\n</blockquote>\n<p>Maybe it makes sense for TPIL to be explicit upfront that for anyone unfamiliar with the very basics of Lean, the language reference should be either preceded or accompanied.</p>",
        "id": 553435169,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1762189529
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"451983\">Arthur Paulino</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553432545\">said</a>:</p>\n<blockquote>\n<p><em>fully</em> understand Lean</p>\n</blockquote>\n<p>TBH it's hard for me to draw the line of what \"fully understanding Lean\" means. Even the <code>by</code> DSL for entering tactic mode is, from some perspective, just another arbitrary DSL. Not in the sense that it's carelessly designed or unimportant (on the contrary), but in the sense that one can build their very own DSL for constructing terms of types. I've seen one or two attempts, but it's hard to beat the <code>by</code> DSL in terms of popularity, consistency, completeness and extensibility.</p>",
        "id": 553437768,
        "sender_full_name": "Arthur Paulino",
        "timestamp": 1762190371
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"451983\">Arthur Paulino</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553437768\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"451983\">Arthur Paulino</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553432545\">said</a>:</p>\n<blockquote>\n<p><em>fully</em> understand Lean</p>\n</blockquote>\n<p>TBH it's hard for me to draw the line of what \"fully understanding Lean\" means. Even the <code>by</code> DSL for entering tactic mode is, from some perspective, just another arbitrary DSL. Not in the sense that it's carelessly designed or unimportant (on the contrary), but in the sense that one can build their very own DSL for constructing terms of types. I've seen one or two attempts, but it's hard to beat the <code>by</code> DSL in terms of popularity, consistency, completeness and extensibility.</p>\n</blockquote>\n<p>Very interesting and illustrative points that you have made! Now in retroperspective, the name I chose for the thread was a bit optimistic. Also it kind of turned into a big collection of random questions that popped up in my head along the journey so far. And yes, I suppose \"fully\" understanding lean is quite the optimistic formulation, you are already the second person to point that out :D. (Maybe I should change it to reduce confusion), but what I intended to mean is to understand lean in a way that I could write stuff in it, which right now I realized turned out a bit more difficult than I thought (my background in computer science is only helping me so much, suprisingly). But I am not giving up :D</p>\n<p>btw I always meant to ask, whether it is good style to write all these random questions in one thread, as i find it tedious to open up a new channel for every small issue I get. But if this is non standard here, I will try to adapt.</p>",
        "id": 553444591,
        "sender_full_name": "Levi",
        "timestamp": 1762192473
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"976985\">Levi</span> <a href=\"#narrow/channel/113489-new-members/topic/the.20quest.20to.20fully.20understand.20lean/near/553273112\">said</a>:</p>\n<blockquote>\n<p>Another quick question. Is there any useful application of <code>revert</code> in any proof? Because all those examples I have seen only used <code>revert</code> to rename the hypothesis, which is kind of \"pointless\" in my eyes.</p>\n</blockquote>\n<p>I have used revert in situations like </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">23</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">24</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">revert</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">decide</span>\n</code></pre></div>\n<p>Not sure if this is the idiomatic way though</p>",
        "id": 553459361,
        "sender_full_name": "Stepan Nesterov",
        "timestamp": 1762196176
    },
    {
        "content": "<p>This a totally valid use (although you also have <code>decide +revert</code> but when you want to control what to revert you would need to invoke <code>revert</code> directly).</p>\n<p>Another case is that the <code>generalizing</code> clause in <code>induction</code> is also just a revert. If you need to apply induction eliminators by hand (as one sometimes do), you’ll also need to revert by hand.</p>",
        "id": 553467480,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1762199034
    }
]