[
    {
        "content": "<p>I get this message in my project:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">info</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">root</span><span class=\"o\">]:</span><span class=\"w\"> </span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">toml</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">both</span><span class=\"w\"> </span><span class=\"n\">present</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">lakefile</span><span class=\"bp\">.</span><span class=\"n\">lean</span>\n</code></pre></div>\n<p>Is it safe to delete <code>lakefile.toml</code> from my project/github repo?  Is it obsolete?</p>",
        "id": 486525503,
        "sender_full_name": "Lars Ericson",
        "timestamp": 1733494853
    },
    {
        "content": "<p>Ideally you'd just have <code>lakefile.toml</code>, unless you need the extra \"expressive power\"  <code>lakefile.lean</code> provides.</p>",
        "id": 486526152,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1733495074
    },
    {
        "content": "<p><code>lakefile.toml</code> is the new kid on the block. It is not obsolete.</p>",
        "id": 486526204,
        "sender_full_name": "Mauricio Collares",
        "timestamp": 1733495096
    },
    {
        "content": "<p>I am working on a <a href=\"https://github.com/catskillsresearch/hybrid_logic_lean\">fork</a> of <span class=\"user-mention\" data-user-id=\"680236\">@Alex Oltean</span>'s <a href=\"https://github.com/alexoltean61/hybrid_logic_lean\">github</a> which was written in year-and-a-half-ago Lean 4 and I am using today Lean 4.  The original github has only <code>lakefile.lean</code>.    I did a <code>lake update mathlib</code> or something similar inside VS Code and the <code>lakefile.toml</code> file appeared.   I don't need any additional expressive power.  The info message is telling me that it prefers the older file which means I guess that it is ignoring the newer one.  I would like to get my setup to a state where the setup is \"clean\" from Lean's point of view.</p>\n<p><span class=\"user-mention\" data-user-id=\"325367\">@Mauricio Collares</span> I will try deleting the <code>lakefile.lean</code> and see if it picks up the <code>lakefile.toml</code> and continues to be happy.</p>",
        "id": 486528171,
        "sender_full_name": "Lars Ericson",
        "timestamp": 1733495702
    },
    {
        "content": "<p>I'm very surprised that anything would create the toml file automatically. You don't happen to have steps that reproduce this behaviour?</p>",
        "id": 486545029,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1733500866
    },
    {
        "content": "<p>I did something a little convoluted.  I wanted to create an environment that was totally up to date and copy into that the old application code that needed to be brought up to date:</p>\n<ol>\n<li>I forked the old github</li>\n<li>I cloned it on my machine</li>\n<li>I deleted the Lean config files and just left the folder with the Lean application code</li>\n<li>In a different folder, inside VS Code, I did something like this, which I'm pretty sure resulted in both a <code>lakefile.lean</code> and a <code>lakefile.toml</code> file:</li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">&gt;</span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Project</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Create</span><span class=\"w\"> </span><span class=\"n\">project</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">...</span>\n</code></pre></div>\n<ol start=\"4\">\n<li>I copied the resulting up-to-date config files into my Github clone.</li>\n</ol>",
        "id": 486556136,
        "sender_full_name": "Lars Ericson",
        "timestamp": 1733504031
    },
    {
        "content": "<p>Is it possible you copied the <code>lakefile.lean</code> back in? The default Mathlib template will generate a <code>lakefile.toml</code>.</p>",
        "id": 486559671,
        "sender_full_name": "Julian Berman",
        "timestamp": 1733505076
    },
    {
        "content": "<p>Yes.   I will try just deleting it and see if it is still happy.</p>",
        "id": 486566440,
        "sender_full_name": "Lars Ericson",
        "timestamp": 1733507283
    },
    {
        "content": "<p>Taking out the <code>lakefile.lean</code> makes it very unhappy.  It can't find and recompile separate files that are used in <code>import</code> statements in the directory.  Putting it back it is more happy.  I don't know what this file does or how to program it.  Here are the contents:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lake</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lake</span><span class=\"w\"> </span><span class=\"n\">DSL</span>\n\n<span class=\"n\">package</span><span class=\"w\"> </span><span class=\"n\">hybrid</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"c1\">-- add package configuration options here</span>\n<span class=\"o\">}</span>\n\n<span class=\"n\">lean_lib</span><span class=\"w\"> </span><span class=\"n\">Hybrid</span><span class=\"w\"> </span><span class=\"o\">{</span>\n<span class=\"w\">  </span><span class=\"c1\">-- add library configuration options here</span>\n<span class=\"o\">}</span>\n\n<span class=\"kd\">@[</span><span class=\"n\">default_target</span><span class=\"kd\">]</span>\n<span class=\"n\">lean_lib</span><span class=\"w\"> </span><span class=\"n\">hybrid</span>\n\n<span class=\"n\">require</span><span class=\"w\"> </span><span class=\"n\">mathlib</span><span class=\"w\"> </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"n\">git</span>\n<span class=\"w\">  </span><span class=\"s2\">\"https://github.com/leanprover-community/mathlib4.git\"</span>\n</code></pre></div>",
        "id": 486589180,
        "sender_full_name": "Lars Ericson",
        "timestamp": 1733516698
    },
    {
        "content": "<p>So I'll just leave it in and the <code>toml</code> file too for future compatibility.</p>",
        "id": 486589245,
        "sender_full_name": "Lars Ericson",
        "timestamp": 1733516733
    },
    {
        "content": "<p>Actually in the end it seems happy without the <code>lakefile.toml</code> file so I'll just delete that one for now since it is preferring the <code>lakefile.lean</code> file.</p>",
        "id": 486590692,
        "sender_full_name": "Lars Ericson",
        "timestamp": 1733517373
    }
]