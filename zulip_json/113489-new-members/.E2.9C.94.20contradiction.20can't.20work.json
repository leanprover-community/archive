[
    {
        "content": "<p>when I use norm_num, the goal has been false,  why it still can't be closed by contradiction? </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">number_theory</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">&gt;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">IsSquare</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Iff</span><span class=\"bp\">.</span><span class=\"n\">intro</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">isSquare_iff_exists_sq</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hn</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_expr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">expr</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">pow_succ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pow_succ</span><span class=\"o\">]</span>\n<span class=\"w\">      </span><span class=\"n\">ring_nf</span>\n<span class=\"w\">      </span><span class=\"gr\">sorry</span>\n<span class=\"w\">    </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">expr</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">h_expr</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h_expr</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n<span class=\"w\">    </span><span class=\"n\">by_cases</span><span class=\"w\"> </span><span class=\"n\">h_a_le_7</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">7</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">interval_cases</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">contradiction</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">contradiction</span><span class=\"w\"> </span><span class=\"c1\">-- a = 2</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"c1\">-- a = 3</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">contradiction</span><span class=\"w\"> </span><span class=\"c1\">-- a = 4</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"w\"> </span><span class=\"c1\">-- a = 5</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">contradiction</span><span class=\"w\"> </span><span class=\"c1\">-- a = 6</span>\n<span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">norm_num</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">contradiction</span><span class=\"w\"> </span><span class=\"c1\">-- a = 7</span>\n</code></pre></div>\n<p>cases a=3 and a=5 can be close, and the others just be like:<br>\ntactic 'contradiction' failed<br>\n<strong>case</strong> pos.«1»<br>\n<strong>a</strong> : ℕ<br>\n<strong>expr</strong> : ℕ := 1 + 2 ^ (a + 2) * (2 ^ a - 1) - 8 * 3 ^ a<br>\n<strong>n</strong> : ℕ<br>\n<strong>ha</strong> : 1 &gt; 0<br>\n<strong>hn</strong> : (2 ^ (1 + 1) - 1) ^ 2 - 8 * 3 ^ 1 = n ^ 2<br>\n<strong>h_expr</strong> : 1 + 2 ^ (1 + 2) * (2 ^ 1 - 1) - 8 * 3 ^ 1 = (2 ^ (1 + 1) - 1) ^ 2 - 8 * 3 ^ 1<br>\n<strong>h_a_le_7</strong> : 1 ≤ 7<br>\n<strong>⊢</strong> False</p>",
        "id": 510541698,
        "sender_full_name": "ZOE",
        "timestamp": 1743990623
    },
    {
        "content": "<p>proof by contradiction requires that you have a proof of False, but in this case your goal is False</p>",
        "id": 510543378,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743991460
    },
    {
        "content": "<p>if you can find a contradiction in one of your assumptions, then you can use that to prove your goal</p>",
        "id": 510543850,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743991689
    },
    {
        "content": "<p>gotcha! But in this case, I just want to show these cases are impossible and abandon them. I mean if the goal is absolutely false, it is just an impossible value. how should I code?</p>",
        "id": 510544815,
        "sender_full_name": "ZOE",
        "timestamp": 1743992220
    },
    {
        "content": "<p>if the goal is absolutely false, then it's impossible to prove unless you can derive a contradiction in your assumptions... <code>1 = 0</code> is absolutely false, so I can't prove it (thankfully)!</p>",
        "id": 510545166,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743992441
    },
    {
        "content": "<p>You can probably use the tactic <code>absurd h</code> to change the goal into the negation of a hypothesis h</p>",
        "id": 510545212,
        "sender_full_name": "Wang Jingting",
        "timestamp": 1743992479
    },
    {
        "content": "<p>yes, if you can prove the negation of one of your hypotheses, then that would allow you to prove <code>false</code></p>",
        "id": 510545323,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743992542
    },
    {
        "content": "<p>if you can't prove that any of your hypotheses are contradictory, then that suggests there's something wrong with your approach (or what you're trying to prove isn't true)</p>",
        "id": 510545434,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743992631
    },
    {
        "content": "<p>if <code>interval_cases</code> is confusing you, here's a simple example to illustrate my point:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">number_theory</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">interval_cases</span><span class=\"w\"> </span><span class=\"n\">k</span>\n</code></pre></div>\n<p><code>2 = 3</code> and <code>4 = 3</code> are impossible... but that doesn't mean that we can prove <code>k = 3</code> from these assumptions!</p>",
        "id": 510545704,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743992795
    },
    {
        "content": "<p>I get it, so I can't use <strong>interval_cases</strong>  to enumerate its value, right?</p>",
        "id": 510545984,
        "sender_full_name": "ZOE",
        "timestamp": 1743992986
    },
    {
        "content": "<p>well, you can if you can find contradictions that arise from <code>a</code> taking on those values... in those <code>interval_cases</code> goals, Lean updates the value of <code>a</code> in all of your hypotheses</p>\n<p>so for example, in the first goal, <code>a</code> is set to 1 in all of your equations... your goal is to show that <code>a</code> can't be 1, so you would want to show that <code>a = 1</code> makes one of your equations false</p>",
        "id": 510546383,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743993221
    },
    {
        "content": "<p>if you can't find a contradiction, then maybe <code>a</code> <em>could</em> equal 1! if so, then your original goal <code>a = 3 ∨ a = 5</code> might not be true after all</p>",
        "id": 510546560,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743993331
    },
    {
        "content": "<p>if you think that <code>a</code> has to be 3 or 5, then you should be able to convince Lean that the other values lead to contradictions, and <code>interval_cases</code> is asking you to do that</p>",
        "id": 510546694,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743993426
    },
    {
        "content": "<p>you might actually have an issue here where you're working with Nat but you intended to work with Int</p>",
        "id": 510549676,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743995362
    },
    {
        "content": "<p>your goal is <code>IsSquare (1+ 2 ^ (a + 2) * (2 ^ a - 1)- 8 * 3 ^ a) ↔ a = 3 ∨ a = 5</code>, but if <code>a = 1</code> then <code>(1+ 2 ^ (a + 2) * (2 ^ a - 1)- 8 * 3 ^ a) = 0</code> due to natural subtraction being truncated at 0</p>",
        "id": 510549842,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743995474
    },
    {
        "content": "<p>therefore your goal is false, since <code>IsSquare 0</code> is true</p>",
        "id": 510549942,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743995532
    },
    {
        "content": "<p>if you change it to use Int then you might have more luck with the contradictions</p>",
        "id": 510549973,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743995561
    },
    {
        "content": "<p>yeah, I found it too, I have fix it, now a=1 and a=2 can be passed</p>",
        "id": 510550009,
        "sender_full_name": "ZOE",
        "timestamp": 1743995595
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">      </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hn</span>\n<span class=\"w\">        </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_sq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">313</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">          </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">          </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hn</span><span class=\"o\">]</span>\n<span class=\"w\">        </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h_not_sq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">313</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">          </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">m</span>\n<span class=\"w\">          </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">hm</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">m</span><span class=\"bp\">.</span><span class=\"n\">natAbs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">natAbs_sq</span><span class=\"o\">]</span>\n<span class=\"w\">          </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">hm</span><span class=\"o\">]</span>\n<span class=\"w\">          </span><span class=\"gr\">sorry</span>\n<span class=\"w\">        </span><span class=\"n\">contradiction</span>\n</code></pre></div>\n<p>when a=4 I have these two hypotheses, but these two can't be proved by contradiction??? I don't understand <span aria-label=\"melting face\" class=\"emoji emoji-1fae0\" role=\"img\" title=\"melting face\">:melting_face:</span></p>",
        "id": 510550672,
        "sender_full_name": "ZOE",
        "timestamp": 1743996032
    },
    {
        "content": "<p>are you asking how to generate a contradiction using <code>h_sq</code> and <code>h_not_sq</code>? you can just do something like:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">rcases</span><span class=\"w\"> </span><span class=\"n\">h_sq</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">m</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">hm</span><span class=\"bp\">⟩</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h_not_sq</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"n\">hm</span>\n<span class=\"n\">contradiction</span>\n</code></pre></div>",
        "id": 510551030,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743996288
    },
    {
        "content": "<p><code>contradiction</code> is a useful tactic but it only works with \"trivially contradictory\" hypotheses</p>",
        "id": 510551478,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1743996554
    },
    {
        "content": "<p>that's right! thanks a lot <span aria-label=\"face holding back tears\" class=\"emoji emoji-1f979\" role=\"img\" title=\"face holding back tears\">:face_holding_back_tears:</span></p>",
        "id": 510552131,
        "sender_full_name": "ZOE",
        "timestamp": 1743996929
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"893097\">ZOE</span> has marked this topic as resolved.</p>",
        "id": 510552148,
        "sender_full_name": "Notification Bot",
        "timestamp": 1743996940
    }
]