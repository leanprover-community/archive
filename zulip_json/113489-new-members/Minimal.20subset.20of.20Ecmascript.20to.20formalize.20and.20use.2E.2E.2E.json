[
    {
        "content": "<p>I'm thinking about writing Javascript that's proven correct and using in tiny Javascript \"programs\" on my static website. But I don't care about many parts of it.</p>\n<p>For example, not interested in floating point numbers or limited size whole numbers that come by default, only in integer numbers (bigints) and rational numbers (basically pair of two bigints). What else could be thrown away? Of course, basic data types and operations, functions and basic objects (interpreted as dictionaries?), also arrays are here to stay, for sure.</p>\n<p>What's your opinion about this weird idea - to formalize this minimized part of Ecmascript in Lean and then use?</p>",
        "id": 493226796,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1736720208
    },
    {
        "content": "<p>(This is daydreaming for now, but why not?)</p>",
        "id": 493226800,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1736720211
    },
    {
        "content": "<p>Btw, does Lean have something like a program extraction (like Rocq Prover does - it can, I believe, be used for extraction of source in Ocaml, Haskell and some kind of third language)?</p>",
        "id": 493226898,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1736720305
    },
    {
        "content": "<p>Right now looking at this (old) formalization of Ecmascript subset (<a href=\"https://blog.brownplt.org/2012/06/04/lambdajs-coq.html\">https://blog.brownplt.org/2012/06/04/lambdajs-coq.html</a>) and thinking of \"stealing\" some part of it for my purposes.</p>",
        "id": 493241935,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1736733234
    },
    {
        "content": "<p><a href=\"https://github.com/argumentcomputer/Wasm.lean\">This</a> includes a Lean 4 runtime in WebAssembly, so that could be a good starting place. I haven't used it though. You might also want to reach out to @/cognivore, the developer</p>",
        "id": 493247071,
        "sender_full_name": "Will Bradley",
        "timestamp": 1736737220
    },
    {
        "content": "<p>Here we go with the first things:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Constant</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">number</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Constant</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">string</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Constant</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">boolean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Constant</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">undefined</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Constant</span>\n\n<span class=\"kn\">mutual</span>\n<span class=\"w\">  </span><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Value</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">const</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Constant</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Value</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Value</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Value</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Value</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">array</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Value</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Value</span>\n\n<span class=\"w\">  </span><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">var</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">val</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Value</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">assign</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">fun_apply</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">getter</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">setter</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">delete</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">array_get</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">array_set</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">if_then_else</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">while_loop</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">done</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Value</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"c1\">-- primitive operations of integers</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_addition</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_subtraction</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_multiplication</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_division</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_remainder</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_power</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_opposite</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_lt</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_le</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_eq</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">int_ne</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expression</span>\n<span class=\"kn\">end</span>\n</code></pre></div>",
        "id": 493375607,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1736781055
    },
    {
        "content": "<p>This stuff is very hard to even think about, ugh. :O</p>",
        "id": 493440349,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1736799617
    },
    {
        "content": "<p>Function is thing with natural number <code>n</code> of parameters and body, which is expression with those specific parameters unbounded, right? Like in this definition above.</p>\n<p>Maybe I should change the <code>function: ℕ → Expression → Value</code> to something like <code>function: List ℕ → Expression → Value</code>. And maybe add some inductive predicate like, dunno, <code>wellformed</code> for Expressions... <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 493441371,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1736799969
    },
    {
        "content": "<p>Ok, it seems I have settled on inductive definitions for AST. This version looks better, imo.<br>\nTook \"inspiration\" from <a href=\"https://github.com/querycert/jsast\">https://github.com/querycert/jsast</a> (suggested on Rocq zulip chat).</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">UnaryOp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">opposite</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">negation</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">BinaryOp</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">multiplication</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">division</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">remainder</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">addition</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">subtraction</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">lt</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">le</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">eq</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">ne</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">and</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">or</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">has_property</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">get_property</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">set_property</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">delete_property</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">array_get</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">array_set</span>\n\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Literal</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">null</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">undefined</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">boolean</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Literal</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">string</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Literal</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">integer</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Literal</span>\n\n<span class=\"kn\">mutual</span>\n<span class=\"w\">  </span><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">identifier</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">literal</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Literal</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">object</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">×</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">array</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">function</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Stat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">fun_apply</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">unary_op</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">UnaryOp</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">binary_op</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">BinaryOp</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">if_then_else</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">assignment</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Expr</span>\n\n<span class=\"w\">  </span><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">Stat</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">expr</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Stat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">Stat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Stat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">var_decl</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Stat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">conditional</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Stat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">Stat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Stat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">while</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Stat</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Stat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">fun_return</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Stat</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Expr</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Stat</span>\n<span class=\"kn\">end</span>\n</code></pre></div>",
        "id": 493673677,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1736890040
    },
    {
        "content": "<p>Now going to read publications from <a href=\"https://jscert.org/publications.html\">here</a> and cry (probably). :D</p>",
        "id": 493674883,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1736890488
    },
    {
        "content": "<p>I'm too stupid or maybe lazy (or both)...</p>\n<p>How much would it cost if I want to pay someone to formalize the semantics (?, is this the correct word)? To make AST executable and possible to reason about results of execution?</p>\n<p>I have 400-500 euros saved. Probably this number must be multiplied by 10, at least... <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span> <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 506807917,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742411156
    },
    {
        "content": "<p>Maybe I should use my miserliness as motivation to learn necessary stuff...</p>",
        "id": 506808388,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742411298
    },
    {
        "content": "<p>I'm afraid that would be <em>several</em> orders of magnitude short :)</p>",
        "id": 506810301,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1742411948
    },
    {
        "content": "<p>Aha, got it. Must be multiplied by 100, at least. :D</p>",
        "id": 506810421,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742411999
    },
    {
        "content": "<p>At least I don't want <strong>all</strong> Ecmascript. :) That saves some expenses to me.</p>",
        "id": 506810575,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742412042
    },
    {
        "content": "<p>Maybe there's some good book for beginner like me? Let's go googling.</p>",
        "id": 506810873,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742412142
    },
    {
        "content": "<p>1) <a href=\"http://concrete-semantics.org/\">http://concrete-semantics.org/</a> - this will be first step<br>\n2) Robert Harper's \"Practical Foundations for Programming Languages\" - as something to study after the first step is done</p>",
        "id": 506811552,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742412371
    },
    {
        "content": "<p>Should be good plan</p>",
        "id": 506811626,
        "sender_full_name": "Ilmārs Cīrulis",
        "timestamp": 1742412392
    },
    {
        "content": "<p>it's probably a better idea to get someone else to pay you to do it</p>",
        "id": 506817265,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1742414388
    },
    {
        "content": "<p>You might have a better time trying to formalize webassembly</p>",
        "id": 506844102,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742425478
    },
    {
        "content": "<p>Oh, I see someone already made a runtime linked upthread. You could probably try to prove things about very small webassembly programs using that.</p>",
        "id": 506844623,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1742425764
    },
    {
        "content": "<ol>\n<li>You can verify safe Rust programs with <a href=\"https://github.com/creusot-rs/creusot\">https://github.com/creusot-rs/creusot</a></li>\n<li>A rust program can be compiled into webassembly</li>\n<li>??????</li>\n<li>PROFIT</li>\n</ol>\n<p>JS is not a good language for formal verification, it's not even typed.</p>",
        "id": 506848710,
        "sender_full_name": "suhr",
        "timestamp": 1742427974
    },
    {
        "content": "<p>I think you also can compile Ada/SPARK to wasm.</p>",
        "id": 506849721,
        "sender_full_name": "suhr",
        "timestamp": 1742428660
    }
]