[
    {
        "content": "<p>My beginner understanding is that if a theorem's goal is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo>∨</mo><mi>Q</mi></mrow><annotation encoding=\"application/x-tex\">P \\lor Q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∨</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">Q</span></span></span></span> then I only need to prove one of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi></mrow><annotation encoding=\"application/x-tex\">P</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span></span></span></span> or <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Q</mi></mrow><annotation encoding=\"application/x-tex\">Q</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8778em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\">Q</span></span></span></span>.</p>\n<hr>\n<p>The following demonstrates that Lean is happy with me only proving one of the disjunctions sub-statements.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">left</span>\n<span class=\"w\">  </span><span class=\"k\">calc</span>\n<span class=\"w\">    </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">h</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>\n<hr>\n<p><strong>Now, the following example is confusing me.</strong> I should be able to just prove one of the disjunctive goal's sub-statements, but the Infoview is complaining that I need to prove both:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">eq_zero_or_eq_zero_of_mul_eq_zero</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\">  </span><span class=\"c1\">-- h2:  x - 1 = 0 ∨ x - 2 = 0</span>\n<span class=\"k\">obtain</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"bp\">.</span><span class=\"w\">  </span><span class=\"c1\">-- ha : x - 1 = 0</span>\n<span class=\"n\">left</span><span class=\"w\"> </span><span class=\"c1\">-- ⊢ x = 1</span>\n<span class=\"k\">calc</span>\n<span class=\"w\">  </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span>\n<span class=\"w\">  </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ha</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>\n<p>The inforview says</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>unsolved goals\ncase inr\nx : ℝ\nh : (x - 1) * (x - 2) = 0\nhb : x - 2 = 0\n⊢ x = 1 ∨ x = 2\n</code></pre></div>\n<p>What have I done wrong?</p>\n<p>Even if I comply with Lean's suggestion, then <code>hb : x -2 = 0</code> does not solve the goal previously identified by <code>left</code> as <code>⊢ x = 1</code></p>",
        "id": 471840057,
        "sender_full_name": "rzeta0",
        "timestamp": 1726869820
    },
    {
        "content": "<p>I've tried placing <code>left</code> above the <code>obtain</code> as I thought maybe obtain forced lean to want both sub-goals to be proved - but that doesn't help.</p>",
        "id": 471840189,
        "sender_full_name": "rzeta0",
        "timestamp": 1726869892
    },
    {
        "content": "<p>If you do a case distinction with the <code>obtain</code> you have to prove two goals, that's just how logic works. It's unrelated to what your goals are</p>",
        "id": 471840463,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1726870009
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"395550\">@Henrik Böving</span></p>\n<p>Is there a better pattern for proving <code>left</code>?</p>\n<p>I can't think of a path that doesn't start with <code>eq_zero_or_eq_zero_of_mul_eq_zero</code> which itself gives a disjunction.</p>",
        "id": 471844773,
        "sender_full_name": "rzeta0",
        "timestamp": 1726871646
    },
    {
        "content": "<p>well you just have to deal with the two cases if you are going to use that theorem, it's as simple as that. There is a simple proof though:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">eq_zero_or_eq_zero_of_mul_eq_zero</span><span class=\"w\"> </span><span class=\"n\">h</span>\n<span class=\"w\">  </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">left</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">right</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">linarith</span>\n</code></pre></div>",
        "id": 471845164,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1726871784
    },
    {
        "content": "<p>Thanks - but your code is proving left and right. </p>\n<p>Is there no way to prove just left, because logically it is sufficient. </p>\n<p>(my first example in the original post gave an example of just proving left)</p>",
        "id": 471849867,
        "sender_full_name": "rzeta0",
        "timestamp": 1726874229
    },
    {
        "content": "<p>Not if you use h2</p>",
        "id": 471850004,
        "sender_full_name": "Henrik Böving",
        "timestamp": 1726874323
    },
    {
        "content": "<p>ok</p>",
        "id": 471850256,
        "sender_full_name": "rzeta0",
        "timestamp": 1726874503
    },
    {
        "content": "<p>Your statement is not “P or Q” it is “for every x, P x or Q x”. So it is true that for every choice of x it is enough to show either P x or Q x, but it is not always the same that is true, depending on the value of x.</p>\n<p>If P x was true for all x you would be able to say <code>left</code> at the beginning of the proof, and it would work. So in some sense “it is enough to prove P”. But in your particular example, “for every x, P x” is just not true</p>",
        "id": 471898608,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1726903552
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"242586\">@Vincent Beffara</span>  thanks for trying to help, I appreciate it.</p>\n<p>Let me check my thinking:</p>\n<p>If the hypothesis says <code>x-1=0 ∧ x-2=0</code>, and the goal is <code>x=1 ∧ x=2</code>, then it is <strong>not</strong> sufficient to prove <code>left : x=1</code> is true. Because if <code>x=2</code>, which the hypothesis allows, then <code>left : x = 1</code> is false. </p>\n<p>But if the hypotheses was <code>x=-1</code>, and the goal was <code>x^2=1 ∧ x^3=-1``, then it is indeed sufficient to prove only </code>left`.</p>\n<p>If this is correct, then you have helped me understand something new. :)</p>",
        "id": 471936094,
        "sender_full_name": "rzeta0",
        "timestamp": 1726922070
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> <a href=\"#narrow/stream/113489-new-members/topic/disjunctive.20goal.20-.20why.20does.20lean.20want.20both.20subgoals.20proved.3F/near/471936094\">said</a>:</p>\n<blockquote>\n<p>Let me check my thinking:</p>\n<p>If the hypothesis says <code>x-1=0 ∧ x-2=0</code>, and the goal is <code>x=1 ∧ x=2</code>, then it is <strong>not</strong> sufficient to prove <code>left : x=1</code> is true. Because if <code>x=2</code>, which the hypothesis allows, then <code>left : x = 1</code> is false. </p>\n<p>But if the hypotheses was <code>x=-1</code>, and the goal was <code>x^2=1 ∧ x^3=-1``, then it is indeed sufficient to prove only </code>left`.</p>\n<p>If this is correct, then you have helped me understand something new. :)</p>\n</blockquote>\n<p>First of all, I'm guessing that you meant <code>∨</code> rather than <code>∧</code>.  In other words, I think you meant to write:</p>\n<blockquote>\n<p>If the hypothesis says <code>x-1=0 ∨ x-2=0</code>, and the goal is <code>x=1 ∨ x=2</code>, then it is <strong>not</strong> sufficient to prove <code>left : x=1</code> is true. Because if <code>x=2</code>, which the hypothesis allows, then <code>left : x = 1</code> is false. </p>\n<p>But if the hypotheses was <code>x=-1</code>, and the goal was <code>x^2=1 ∨ x^3=-1``, then it is indeed sufficient to prove only </code>left`.</p>\n</blockquote>\n<p>I'll respond to this, rather than what you wrote.  The answer is that if you are trying to prove a statement of the form <code>P ∨ Q</code>, then it is <em>always</em> sufficient to just prove <code>P</code> or just prove <code>Q</code>.  However, it isn't always <em>possible</em> to do that--the hypotheses may not tell you enough to allow you to prove <code>P</code>, and they also may not tell you enough to allow you to prove <code>Q</code>.  That's the situation in your first example, in which the hypothesis is <code>x-1=0 ∨ x-2=0</code> and the goal is <code>x=1 ∨ x=2</code>.  It would be <em>sufficient</em> to prove <code>left : x=1</code>, but it isn't <em>possible</em>, for exactly the reason you say: if <code>x=2</code>, then <code>left : x = 1</code> is false.</p>\n<p>What this means in Lean is that if your goal is <code>P ∨ Q</code>, then Lean will let you use the tactic <code>left</code>, which will change the goal to <code>P</code>.  Lean allows that because proving <code>P</code> would be <em>sufficient</em> to establish your original goal.  But you can get yourself in trouble by doing that, because you may be in a situation in which it is not <em>possible</em> to prove <code>P</code> from your hypotheses.</p>\n<p>You might want to consult a book on proof writing and read about strategies for proving \"or\" statements.  (In my book <em>How To Prove It</em>, this is explained in Section 3.5.)</p>",
        "id": 471943388,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1726927136
    },
    {
        "content": "<p>In <em>The Mechanics of Proof</em>, a common method of dealing with an \"or\" goal is illustrated in the Example in Section 2.3.4:  if you are proving <code>P ∨ Q</code>, you may be able to break your proof into cases and prove <code>P</code> in one case and <code>Q</code> in the other.  That means that in Lean, in one case you would use <code>left</code> and then prove <code>P</code>, and in the other case you would use <code>right</code> and then prove <code>Q</code>.</p>",
        "id": 471944423,
        "sender_full_name": "Dan Velleman",
        "timestamp": 1726927771
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> has marked this topic as resolved.</p>",
        "id": 471955076,
        "sender_full_name": "Notification Bot",
        "timestamp": 1726935879
    }
]