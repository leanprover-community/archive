[
    {
        "content": "<p>Is there a lemma for converting a goal of the form <code>A ≥ B</code> to <code>A - B ≥ 0</code> ?</p>\n<p>Or to <code>0 ≤ A - B</code>.</p>",
        "id": 470401594,
        "sender_full_name": "rzeta0",
        "timestamp": 1726443824
    },
    {
        "content": "<p>I hope there is something called <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=sub_nonneg#doc\">docs#sub_nonneg</a> ...</p>",
        "id": 470453305,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726462895
    },
    {
        "content": "<p>Sorry, need to run</p>",
        "id": 470453319,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1726462899
    },
    {
        "content": "<p>Thanks - that looks. promising!</p>\n<p>I made up a minimal example and  tried both <code>sub_nonneg</code> and <code>le_of_sub_nonneg</code> - sadly I am a beginner and might not be using the right syntax to transform the goal, hence the following gives errors </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Tactic</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- goal is ∃ n m, m ≤ n</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">sub_nonneg</span><span class=\"w\"> </span><span class=\"c1\">-- prefer goal 0 ≤ n - m</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- goal is ∃ n m, m ≤ n</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">le_of_sub_nonneg</span><span class=\"w\"> </span><span class=\"c1\">-- prefer goal 0 ≤ n - m</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>the errors are:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>tactic 'apply' failed, failed to unify\n  0 ≤ ?a - ?b ↔ ?b ≤ ?a\nwith\n  ∃ n m, m ≤ n\n⊢ ∃ n m, m ≤ n\n\ntactic 'apply' failed, failed to unify\n  ?b ≤ ?a\nwith\n  ∃ n m, m ≤ n\n⊢ ∃ n m, m ≤ n\n</code></pre></div>",
        "id": 470509275,
        "sender_full_name": "rzeta0",
        "timestamp": 1726476173
    },
    {
        "content": "<p>here you need to produce some evidence, so we could do the <code>use</code> tactic. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">use</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>the rest is actually taken care of automatically. </p>\n<p>For the original question, i guess we could always try </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c\">/-</span>\n<span class=\"cm\">  Try this: exact Iff.symm tsub_nonpos</span>\n<span class=\"cm\">  -/</span>\n<span class=\"w\">  </span><span class=\"n\">apply?</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>but this probably depends on the type of m and n (they are assumed to be \\N if not specified).</p>",
        "id": 470527990,
        "sender_full_name": "cairunze cairunze",
        "timestamp": 1726479604
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"705125\">@cairunze cairunze</span> </p>\n<p>I am actually asking about how to change the current goal.  The example was just to illustrate, and as you say can be done more simply.</p>\n<p>How does one apply a lemma/theorem to the goal?</p>",
        "id": 470533765,
        "sender_full_name": "rzeta0",
        "timestamp": 1726480803
    },
    {
        "content": "<p>to rewrite inside quantifiers, probably we can try <code>simp_rw [tsub_nonpos]</code>.</p>",
        "id": 470534280,
        "sender_full_name": "cairunze cairunze",
        "timestamp": 1726480915
    },
    {
        "content": "<p>I would bet money on <code>conv</code> working if <code>simp_rw</code> doesn’t cut it</p>",
        "id": 470570163,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1726487635
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> le_of_sub_nonneg</p>",
        "id": 470570539,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1726487685
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Mathlib/Algebra/Order/Group/Unbundled/Basic.html#le_of_sub_nonneg\">le_of_sub_nonneg</a></p>",
        "id": 470570544,
        "sender_full_name": "loogle",
        "timestamp": 1726487686
    },
    {
        "content": "<p>Oh and note that you need the tsub lebba <span class=\"user-mention\" data-user-id=\"705125\">@cairunze cairunze</span> gave you, the other two are for additive groups, so the natural numbers sadly don’t qualify</p>",
        "id": 470570976,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1726487757
    },
    {
        "content": "<p>Going from <code>A ≥ B</code> to <code>A - B ≥ 0</code> with natural numbers would be wrong. Note that <code>-</code> for natural numbers is defined to be saturating to 0, and <code>A - B ≥ 0</code> is trivially true for any natural number. You have to go to the integers, but that complicates things.</p>",
        "id": 470574072,
        "sender_full_name": "Giacomo Stevanato",
        "timestamp": 1726488412
    },
    {
        "content": "<p>This is why <code>tsub_nonpos</code> rewrites to B - A &lt;= 0</p>",
        "id": 470577234,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1726489058
    },
    {
        "content": "<p>But you are right to point out that maybe <span class=\"user-mention\" data-user-id=\"724904\">@rzeta0</span> you don’t really want to do this</p>",
        "id": 470577550,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1726489134
    },
    {
        "content": "<p>Note that's \\le 0, not \\ge 0</p>",
        "id": 470577580,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1726489142
    }
]