[
    {
        "content": "<p>I want to build my project so that, from the output of the command, I will clearly see whether the build succeeded or failed, not showing <code>sorry</code> warnings. I want to ignore all <code>check</code> and <code>print</code> too. When the output is too long, I sometimes overlook an error. I tried <code>lean --make -q src</code> but it didn't omit the stuff I wanted to ignore.</p>",
        "id": 288607179,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1657066370
    },
    {
        "content": "<p>You could use the JSON output option to filter errors (there in lean 3 for sure, no idea about 4). I'm on mobile now so can't link to the thread but someone asked before and we came up with: <code>lean --json src/s.lean | jq 'select(.severity == \"error\") | [{\"name\":.file_name,\"error\":.text, \"line\":.pos_line}]'</code> using the tool jq</p>",
        "id": 288629359,
        "sender_full_name": "Alex J. Best",
        "timestamp": 1657089615
    },
    {
        "content": "<p>Doesn't the exit code tell you that?</p>",
        "id": 288639703,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657096777
    },
    {
        "content": "<p>If it does then LTE is finished (and it's not):</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"n\">buzzard</span><span class=\"bp\">@</span><span class=\"n\">bob</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">active</span><span class=\"bp\">-</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">liquid</span><span class=\"bp\">$</span> <span class=\"n\">lean</span> <span class=\"c1\">--make src</span>\n<span class=\"n\">buzzard</span><span class=\"bp\">@</span><span class=\"n\">bob</span><span class=\"o\">:</span><span class=\"bp\">~/</span><span class=\"n\">active</span><span class=\"bp\">-</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">projects</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">liquid</span><span class=\"bp\">$</span> <span class=\"n\">echo</span> <span class=\"bp\">$?</span>\n<span class=\"mi\">0</span>\n</code></pre></div>\n<p>There are for sure sorries in that repo, and I saw the warnings when I compiled the first time, but when I compile the second time it ignores them.</p>",
        "id": 288642460,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1657098540
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"417654\">@Martin Dvořák</span> said they wanted to ignore \"sorry warnings\"</p>",
        "id": 288670979,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657114643
    },
    {
        "content": "<p>I think LTE considers \"sorry\" more than a warning</p>",
        "id": 288670994,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657114650
    },
    {
        "content": "<p>I am really confused now. What should I write to the terminal instead of <code>lean --make src test</code> which I use?</p>",
        "id": 288685099,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1657120291
    },
    {
        "content": "<p>That should be all you need to write</p>",
        "id": 288686002,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657120699
    },
    {
        "content": "<p>The variable <code>$?</code> will tell you whether it succeeded</p>",
        "id": 288686024,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657120710
    },
    {
        "content": "<p>So after it finishes, I type <code>echo $</code> to see the result?</p>",
        "id": 288686069,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1657120736
    },
    {
        "content": "<p><code>echo $?</code></p>",
        "id": 288686102,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657120752
    },
    {
        "content": "<p>Or you could do <code>lean --make src test &amp;&amp; echo \"success\" || echo \"failed\"</code></p>",
        "id": 288686141,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657120772
    },
    {
        "content": "<p>At this point this is a bash question not a lean question</p>",
        "id": 288686169,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1657120784
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Build.20project.20without.20warnings/near/288686141\">said</a>:</p>\n<blockquote>\n<p>Or you could do <code>lean --make src test &amp;&amp; echo \"success\" || echo \"failed\"</code></p>\n</blockquote>\n<p>This works. Thank you very much!!</p>",
        "id": 288686842,
        "sender_full_name": "Martin Dvořák",
        "timestamp": 1657121013
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"417654\">Martin Dvořák</span> has marked this topic as resolved.</p>",
        "id": 288686851,
        "sender_full_name": "Notification Bot",
        "timestamp": 1657121018
    }
]