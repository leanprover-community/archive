[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/116395-maths/topic/Defining.20a.20Type.20with.20multiple.20zeros/near/456230656\">said</a>:</p>\n<blockquote>\n<p>the main user-level difference is that HashMap expects the keys to be hashable while RBMap expects the keys to be ordered</p>\n</blockquote>\n<p>yes! That was one of my problems with RBMap: what function can I use for Ordering Strings?</p>\n<p>it has tho have signature String -&gt; String -&gt; Ordering and I have tried <a href=\"http://String.compare\">String.compare</a> and other things around: no luck. What do I have to import and what is this function (specifically to String and maybe to Int)?</p>",
        "id": 456858349,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722951347
    },
    {
        "content": "<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ord.compare#doc\">docs#Ord.compare</a></p>",
        "id": 456861405,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722952184
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/Defining.20a.20Type.20with.20multiple.20zeros/near/456861405\">said</a>:</p>\n<blockquote>\n<p>You can use <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Ord.compare#doc\">docs#Ord.compare</a></p>\n</blockquote>\n<p>I have read around that and have already tried:</p>\n<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Ord.html#instOrdString\">instOrdString</a></p>\n<p>with the result:</p>\n<p>application type mismatch<br>\nLean.RBMap String ValueType instOrdString<br>\nargument<br>\ninstOrdString<br>\nhas type<br>\nOrd String : Type<br>\nbut is expected to have type<br>\nString → String → Ordering : TypeL</p>\n<p>now I tried: <code>(Ord String)</code> and it also errors</p>",
        "id": 456863195,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722952697
    },
    {
        "content": "<p>Did you try <code>Ord.compare</code>?</p>",
        "id": 456863313,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722952723
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/Defining.20a.20Type.20with.20multiple.20zeros/near/456863313\">said</a>:</p>\n<blockquote>\n<p><code>Ord.compare</code></p>\n</blockquote>\n<p>i should have</p>",
        "id": 456863402,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722952743
    },
    {
        "content": "<p>pff it works. at least it seems</p>",
        "id": 456863501,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722952769
    },
    {
        "content": "<p>6 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"116395\" href=\"/#narrow/stream/116395-maths/topic/Defining.20a.20Type.20with.20multiple.20zeros\">#maths &gt; Defining a Type with multiple zeros</a> by <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>.</p>",
        "id": 456863695,
        "sender_full_name": "Notification Bot",
        "timestamp": 1722952803
    },
    {
        "content": "<p>(there's already enough discussion in that other thread, so I split this out)</p>",
        "id": 456864121,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722952900
    },
    {
        "content": "<p>A message was moved from this topic to <a class=\"stream-topic\" data-stream-id=\"113489\" href=\"/#narrow/stream/113489-new-members/topic/memory.20requirements\">#new members &gt; memory requirements</a> by <span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span>.</p>",
        "id": 456867943,
        "sender_full_name": "Notification Bot",
        "timestamp": 1722953886
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"735031\">Christian Tzurcanu</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456863402\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/116395-maths/topic/Defining.20a.20Type.20with.20multiple.20zeros/near/456863313\">said</a>:</p>\n<blockquote>\n<p><code>Ord.compare</code></p>\n</blockquote>\n<p>i should have</p>\n</blockquote>\n<p>It seemed like it should work, but I don't understand how to set an empty RBMap:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"bp\">.</span><span class=\"n\">empty</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n</code></pre></div>\n<p>errors: function expected at<br>\n  Lean.RBMap.empty<br>\nterm has type<br>\n  Lean.RBMap ?m.576 ?m.577 ?m.578</p>\n<p>so <code>Ord.compare</code> cannot be used in both circumstances?</p>",
        "id": 456897805,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722961226
    },
    {
        "content": "<p>The error message is telling you that you passed too many arguments</p>",
        "id": 456898505,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722961362
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456898505\">said</a>:</p>\n<blockquote>\n<p>The error message is telling you that you passed too many arguments</p>\n</blockquote>\n<p>I have tried as much as I could to eliminate such trivial cases before posting my message. So I have tried with fewer arguments. And then I tried other things after your message. I'm such here.</p>",
        "id": 456951533,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722976755
    },
    {
        "content": "<p>Well, what happens if you use <code>Lean.RBMap.empty String ValueType</code> instead, removing the extra argument?</p>",
        "id": 456952355,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722977096
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456952355\">said</a>:</p>\n<blockquote>\n<p>Well, what happens if you use <code>Lean.RBMap.empty String ValueType</code> instead, removing the extra argument?</p>\n</blockquote>\n<p>nothing of note. at least not obvious to me: i get this error: function expected at<br>\nLean.RBMap.empty<br>\nterm has type<br>\nLean.RBMap ?m.582 ?m.583 ?m.584Lea</p>",
        "id": 456952912,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722977317
    },
    {
        "content": "<p>is the difference between those numbers after ?m  relevant?</p>",
        "id": 456953066,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722977389
    },
    {
        "content": "<p>Maybe just stopping at <code>empty</code>?</p>",
        "id": 456953778,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722977690
    },
    {
        "content": "<p>If you see \"function expected\" this pretty much always means either \"you're still passing too many arguments\", or \"you made a typo and wrote <code>x y</code> instead of <code>x + y</code>, or <code>f g x</code> instead of <code>f (g x)</code></p>",
        "id": 456954710,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722978060
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456953778\">said</a>:</p>\n<blockquote>\n<p>Maybe just stopping at <code>empty</code>?</p>\n</blockquote>\n<p>that yields: function expected at<br>\nLean.RBMap.empty<br>\nterm has type<br>\nLean.RBMap ?m.582 ?m.583 ?m.584Lean 4</p>\n<p>Lean.RBMap.empty.{u, v} {α : Type u} {β : Type v} {cmp : α → α → Ordering} : Lean.RBMap α β cmp</p>",
        "id": 456954901,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722978143
    },
    {
        "content": "<p><code>def dict Dict := Lean.RBMap.empty</code> means stopping at <code>empty</code></p>",
        "id": 456955058,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722978228
    },
    {
        "content": "<p>Could you make a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>?</p>",
        "id": 456955216,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722978289
    },
    {
        "content": "<p>What is <code>ValueType</code>?</p>",
        "id": 456955308,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722978338
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">ValueType</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">intValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">stringValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">boolValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 456955355,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722978361
    },
    {
        "content": "<p>but i see even if i use String instead of ValueType: its the same thing</p>",
        "id": 456955656,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722978492
    },
    {
        "content": "<p>so that would be mve:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"bp\">.</span><span class=\"n\">empty</span>\n</code></pre></div>",
        "id": 456955779,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722978557
    },
    {
        "content": "<p><code>Lean.RBMap.empty.{u, v} {α : Type u} {β : Type v} {cmp : α → α → Ordering} : Lean.RBMap α β cmp</code> means \"<code>Lean.RBMap.empty</code> takes no explicit arguments, all arguments are to be inferred by unification\"; that's the meaning of the <code>{}</code> brackets. So <code>Lean.RBMap.empty X</code> will give you the error about how Lean expected a function, for any X.</p>",
        "id": 456955811,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1722978575
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456955811\">said</a>:</p>\n<blockquote>\n<p><code>Lean.RBMap.empty.{u, v} {α : Type u} {β : Type v} {cmp : α → α → Ordering} : Lean.RBMap α β cmp</code> means \"<code>Lean.RBMap.empty</code> takes no explicit arguments, all arguments are to be inferred by unification\"; that's the meaning of the <code>{}</code> brackets. So <code>Lean.RBMap.empty X</code> will give you the error about how Lean expected a function, for any X.</p>\n</blockquote>\n<p>I have read your words. I did not understand yet.</p>",
        "id": 456956110,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722978666
    },
    {
        "content": "<p>This works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ValueType</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"bp\">.</span><span class=\"n\">empty</span>\n</code></pre></div>",
        "id": 456956121,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722978676
    },
    {
        "content": "<p>so what is the the documentation for this: <code>variable (a)</code></p>",
        "id": 456956216,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722978720
    },
    {
        "content": "<p>Hovering over <code>variable</code>, you should see the docs.</p>",
        "id": 456956310,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722978741
    },
    {
        "content": "<p>In this case, it is introducing a term of a generic type.  It is also making it an <em>explicit</em> argument of wherever it is used.</p>",
        "id": 456956381,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722978782
    },
    {
        "content": "<p>With your code, Lean could not know just seeing <code>dict : Dict</code> what it should use for the \"second\" argument to <code>Lean.RBMap</code>.  So, I made it explicit and passed it to <code>Dict</code>.</p>",
        "id": 456956583,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722978853
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456956583\">said</a>:</p>\n<blockquote>\n<p>With your code, Lean could not know just seeing <code>dict : Dict</code> what it should use for the \"second\" argument to <code>Lean.RBMap</code>.  So, I made it explicit and passed it to <code>Dict</code>.</p>\n</blockquote>\n<p>it's going to be magic for a while for me</p>",
        "id": 456956727,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722978921
    },
    {
        "content": "<p>thank you. i have other problems now in the code with the introduction of that variable(). trying to make it work</p>",
        "id": 456956895,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722978968
    },
    {
        "content": "<p>Maybe if I had written the (arguably better)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>it would have been clearer.</p>",
        "id": 456957003,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979027
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"735031\">Christian Tzurcanu</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456955779\">said</a>:</p>\n<blockquote>\n<p>so that would be mve:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"bp\">.</span><span class=\"n\">empty</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>This has a typo (and a missing import). It works fine without the typo:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"bp\">.</span><span class=\"n\">empty</span>\n</code></pre></div>",
        "id": 456957033,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722979041
    },
    {
        "content": "<p>Ah, if you use <code>String</code> as the \"second\" type as well, then there is no ambiguity: this is why Lean does not need more info in this case.</p>",
        "id": 456957156,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979085
    },
    {
        "content": "<p>Using the <code>inductive ValueType</code> above also make it work fine</p>",
        "id": 456957300,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722979129
    },
    {
        "content": "<p>This is why it's <em>really important</em> to provide a mwe, so that people can actually reproduce the problem you're having, and not an unrelated one that makes them give answers that confuse you more</p>",
        "id": 456957356,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722979149
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456957356\">said</a>:</p>\n<blockquote>\n<p>This is why it's <em>really important</em> to provide a mwe, so that people can actually reproduce the problem you're having, and not an unrelated one</p>\n</blockquote>\n<p>thank you. i imagined i could do it with economy. and it is not possible. i need to do MWE. got it</p>",
        "id": 456957558,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722979232
    },
    {
        "content": "<p>Another advantage of trying to minimize your own problems is that frequently you solve them yourselves, which is, in the long run, faster than even asking the question!</p>",
        "id": 456957675,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979291
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456957300\">said</a>:</p>\n<blockquote>\n<p>Using the <code>inductive ValueType</code> above also make it work fine</p>\n</blockquote>\n<p>how can <code>inductive ValueType</code> work fine?</p>",
        "id": 456957698,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722979304
    },
    {
        "content": "<p>I consider that <code>inductive ValueType</code> \"works\" a bit of a joke...</p>",
        "id": 456957867,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979378
    },
    {
        "content": "<p>In the sense that it literally does work, but it clearly is not what is intended!  <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 456957900,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979395
    },
    {
        "content": "<p><code>inductive ValueType</code> introduces a new type, that contains nothing at all.  Exercise: can you name another type that is identical to <code>inductive ValueType</code>, except for its name?  <span aria-label=\"upside down\" class=\"emoji emoji-1f643\" role=\"img\" title=\"upside down\">:upside_down:</span></p>",
        "id": 456958067,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979458
    },
    {
        "content": "<p>because now i have a problem presumably introduced by <code>variable(ValueType)</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span>\n<span class=\"c1\">-- import Lean.Data.String</span>\n<span class=\"c1\">-- open Std</span>\n\n<span class=\"c1\">-- Define a type to encapsulate different types of values</span>\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">ValueType</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">intValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">stringValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">boolValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Add more types as needed</span>\n\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ValueType</span><span class=\"o\">)</span>\n\n<span class=\"c1\">-- Define a type alias for the RBMap with String keys and ValueType values</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n\n<span class=\"c1\">-- Function to add an entry to the dictionary</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">addEntry</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">value</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">dict</span><span class=\"bp\">.</span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"n\">value</span>\n</code></pre></div>\n<p>The Dict does not seem to get defined: type expected, got<br>\n(Dict : Type ?u.519 → Type ?u.519)Lean 4</p>\n<p>Dict.{u_1} (ValueType : Type u_1) : Type u_1</p>",
        "id": 456958093,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722979467
    },
    {
        "content": "<p>You should use <code>variable x</code>, if you intend to make your functions be valid for various different kinds of <code>x</code>.</p>",
        "id": 456958494,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979579
    },
    {
        "content": "<p>now i understand: <a href=\"https://live.lean-lang.org/\">https://live.lean-lang.org/</a> is very useful for these dialogues!</p>",
        "id": 456958554,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722979594
    },
    {
        "content": "<p>In your case, you seem to want to use the custom-made type that you called <code>ValueType</code>, so you should not make a completely arbitrary term that happens to be called also <code>ValueType</code> an available variable!</p>",
        "id": 456958671,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979631
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456958671\">said</a>:</p>\n<blockquote>\n<p>In your case, you seem to want to use the custom-made type that you called <code>ValueType</code>, so you should not make a completely arbitrary term that happens to be called also <code>ValueType</code> an available variable!</p>\n</blockquote>\n<p>yes, obviously</p>",
        "id": 456958730,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722979662
    },
    {
        "content": "<p>Ok, so... are you all good?</p>",
        "id": 456958863,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979693
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456958863\">said</a>:</p>\n<blockquote>\n<p>Ok, so... are you all good?</p>\n</blockquote>\n<p>no. i seem to be back at step1:</p>\n<p><code>def dict : Dict := Lean.RBMap.empty</code> would error</p>",
        "id": 456959202,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722979779
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span>\n<span class=\"c1\">-- import Lean.Data.String</span>\n<span class=\"c1\">-- open Std</span>\n\n<span class=\"c1\">-- Define a type to encapsulate different types of values</span>\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">ValueType</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">intValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">stringValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">boolValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Add more types as needed</span>\n\n<span class=\"c1\">-- let me remove this!</span>\n<span class=\"c1\">--variable (ValueType)</span>\n\n<span class=\"c1\">-- Define a type alias for the RBMap with String keys and ValueType values</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n\n<span class=\"c1\">-- all good</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"bp\">.</span><span class=\"n\">empty</span>\n</code></pre></div>",
        "id": 456959408,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979834
    },
    {
        "content": "<p>Which is just combining the code you posted <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456955355\">above</a>, with the correction you said you'd already tried</p>",
        "id": 456959574,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722979881
    },
    {
        "content": "<p>You want to make sure that Lean uses your \"inductively defined\" <code>ValueType</code>.  If you want to have a <code>variable</code> floating around, give it a different name, so that neither you nor Lean can get confused by it.</p>",
        "id": 456959703,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722979914
    },
    {
        "content": "<p>(I think this is a case of Damiano guessing what your question was because you didn't write it unambiguously, and then confusing you because his guess was not the one you were actually asking)</p>",
        "id": 456959946,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722979975
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456959408\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span>\n<span class=\"c1\">-- import Lean.Data.String</span>\n<span class=\"c1\">-- open Std</span>\n\n<span class=\"c1\">-- Define a type to encapsulate different types of values</span>\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">ValueType</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">intValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">stringValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">boolValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Add more types as needed</span>\n\n<span class=\"c1\">-- let me remove this!</span>\n<span class=\"c1\">--variable (ValueType)</span>\n\n<span class=\"c1\">-- Define a type alias for the RBMap with String keys and ValueType values</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n\n<span class=\"c1\">-- all good</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"bp\">.</span><span class=\"n\">empty</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I have looked at every letter in your code: it is identical to my code. mine errors</p>",
        "id": 456959949,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722979976
    },
    {
        "content": "<p>There are commented out things in this code.</p>",
        "id": 456960059,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1722980006
    },
    {
        "content": "<p>You could paste yours and that code into <a href=\"https://www.diffchecker.com/\">https://www.diffchecker.com/</a>, and see the difference</p>",
        "id": 456960089,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980013
    },
    {
        "content": "<p>Or \"Compare new untitled text files\" in vscode</p>",
        "id": 456960158,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980037
    },
    {
        "content": "<p>now it does not error, but i did not change the code. i restarted the file</p>",
        "id": 456960493,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980150
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- import Lean</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span>\n<span class=\"c1\">-- import Lean.Data.String</span>\n<span class=\"c1\">-- open Std</span>\n\n<span class=\"c1\">-- Define a type to encapsulate different types of values</span>\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">ValueType</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">intValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">stringValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">boolValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Add more types as needed</span>\n\n<span class=\"c1\">-- variable (ValueType)</span>\n\n<span class=\"c1\">-- Define a type alias for the RBMap with String keys and ValueType values</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n\n<span class=\"c1\">-- Function to add an entry to the dictionary</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">addEntry</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">value</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">dict</span><span class=\"bp\">.</span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"n\">value</span>\n\n<span class=\"c1\">-- Function to get an entry from the dictionary</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">getEntry</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">dict</span><span class=\"bp\">.</span><span class=\"n\">find?</span><span class=\"w\"> </span><span class=\"n\">key</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"bp\">.</span><span class=\"n\">empty</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">addEntry</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"s2\">\"key1\"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ValueType</span><span class=\"bp\">.</span><span class=\"n\">intValue</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>now it errors at the last line. so it does something unexpected</p>",
        "id": 456960766,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980235
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"321459\">Damiano Testa</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456960059\">said</a>:</p>\n<blockquote>\n<p>There are commented out things in this code.</p>\n</blockquote>\n<p>I commented out in my code too, at that time</p>",
        "id": 456960958,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980291
    },
    {
        "content": "<blockquote>\n<p>now it errors at the last line. so it does something unexpected</p>\n</blockquote>\n<p>Works in the web editor for me</p>",
        "id": 456961093,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980332
    },
    {
        "content": "<p>Is there something at the end of the file you're not showing us? That can break stuff higher up</p>",
        "id": 456961159,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980361
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456961093\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>now it errors at the last line. so it does something unexpected</p>\n</blockquote>\n<p>Works in the web editor for me</p>\n</blockquote>\n<p>error is: function expected at<br>\naddEntry dict \"key1\" (ValueType.intValue 42)<br>\nterm has type<br>\nDictLean 4</p>\n<p>addEntry (dict : Dict) (key : String) (value : ValueType) : Dict</p>",
        "id": 456961174,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980365
    },
    {
        "content": "<p>Yeah, my bet is you have something at the bottom of the file you're not showing us</p>",
        "id": 456961224,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980386
    },
    {
        "content": "<p><code>getEntry dict2 \"key1\"</code></p>",
        "id": 456961353,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980409
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456961224\">said</a>:</p>\n<blockquote>\n<p>Yeah, my bet is you have something at the bottom of the file you're not showing us</p>\n</blockquote>\n<p>you were totally right</p>",
        "id": 456961405,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980423
    },
    {
        "content": "<p>You probably wanted <code>#eval</code> before that line</p>",
        "id": 456961451,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980438
    },
    {
        "content": "<p>Maybe we should update <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> to point out this last-line gotcha</p>",
        "id": 456961485,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980461
    },
    {
        "content": "<p>yes. with eval: expression<br>\ngetEntry dict2 \"key1\"<br>\nhas type<br>\nOption ValueType<br>\nbut instance<br>\nLean.Eval (Option ValueType)<br>\nfailed to be synthesized, this instance instructs Lean on how to display the resulting value, recall that any type implementing the <code>Repr</code> class also implements the <code>Lean.Eval</code> classLean 4</p>",
        "id": 456961514,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980469
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"c1\">-- import Lean</span>\n<span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span>\n<span class=\"c1\">-- import Lean.Data.String</span>\n<span class=\"c1\">-- open Std</span>\n\n<span class=\"c1\">-- Define a type to encapsulate different types of values</span>\n<span class=\"kn\">inductive</span><span class=\"w\"> </span><span class=\"n\">ValueType</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">intValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Int</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">stringValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">boolValue</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bool</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Add more types as needed</span>\n\n<span class=\"c1\">-- variable (ValueType)</span>\n\n<span class=\"c1\">-- Define a type alias for the RBMap with String keys and ValueType values</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"n\">Ord</span><span class=\"bp\">.</span><span class=\"n\">compare</span>\n\n<span class=\"c1\">-- Function to add an entry to the dictionary</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">addEntry</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">value</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">dict</span><span class=\"bp\">.</span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"n\">value</span>\n\n<span class=\"c1\">-- Function to get an entry from the dictionary</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">getEntry</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">key</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">String</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">ValueType</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">dict</span><span class=\"bp\">.</span><span class=\"n\">find?</span><span class=\"w\"> </span><span class=\"n\">key</span>\n\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"bp\">.</span><span class=\"n\">RBMap</span><span class=\"bp\">.</span><span class=\"n\">empty</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">dict2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Dict</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">addEntry</span><span class=\"w\"> </span><span class=\"n\">dict</span><span class=\"w\"> </span><span class=\"s2\">\"key1\"</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ValueType</span><span class=\"bp\">.</span><span class=\"n\">intValue</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"o\">)</span>\n<span class=\"c1\">-- def dict3 := addEntry dict2 \"key2\" (ValueType.stringValue \"hello\")</span>\n<span class=\"c1\">-- def dict4 := addEntry dict3 \"key3\" (ValueType.boolValue true)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">getEntry</span><span class=\"w\"> </span><span class=\"n\">dict2</span><span class=\"w\"> </span><span class=\"s2\">\"key1\"</span>\n</code></pre></div>",
        "id": 456961593,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980489
    },
    {
        "content": "<p>That message isn't surprising, and contains some good hints</p>",
        "id": 456961629,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980498
    },
    {
        "content": "<p>Think about what Lean needs to know to show you a <code>Option ValueType</code></p>",
        "id": 456961691,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980515
    },
    {
        "content": "<p>It probably knows how to print <code>Option</code> because that's built in; but it's never seen your <code>ValueType</code> before. And it mentions something about <code>Repr</code>...</p>",
        "id": 456961790,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980537
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456961691\">said</a>:</p>\n<blockquote>\n<p>Think about what Lean needs to know to show you a <code>Option ValueType</code></p>\n</blockquote>\n<p>yes. i commented out the toString because other problems</p>",
        "id": 456961843,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980566
    },
    {
        "content": "<p><code>ToString</code> and <code>Repr</code> are slightly different things</p>",
        "id": 456961906,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1722980588
    },
    {
        "content": "<p>I think i should consider this solved and look on my own</p>",
        "id": 456962136,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980653
    },
    {
        "content": "<p>but.. i was surprized with things that error well ahead of their sequence.. in other places</p>",
        "id": 456962225,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1722980704
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Ordering.20strings/near/456961906\">said</a>:</p>\n<blockquote>\n<p><code>ToString</code> and <code>Repr</code> are slightly different things</p>\n</blockquote>\n<p>what is the custom? should I mark this as solved? (it was)</p>",
        "id": 460077141,
        "sender_full_name": "Christian Tzurcanu",
        "timestamp": 1723467292
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"735031\">Christian Tzurcanu</span> has marked this topic as resolved.</p>",
        "id": 462032797,
        "sender_full_name": "Notification Bot",
        "timestamp": 1723531204
    },
    {
        "content": "<p>(The custom is to not mark anything as resolved)</p>",
        "id": 462057559,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1723539389
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"735031\">Christian Tzurcanu</span> has marked this topic as unresolved.</p>",
        "id": 462057657,
        "sender_full_name": "Notification Bot",
        "timestamp": 1723539422
    }
]