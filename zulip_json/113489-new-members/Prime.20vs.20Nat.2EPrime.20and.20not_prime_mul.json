[
    {
        "content": "<p>One of the most basic ideas that children at primary school learn (at least 40 years ago) is that two numbers multiplied together can't give a prime.</p>\n<p>So using a lemma that reflects this, the following is a simple proof that 12 is not prime:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">12</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"bp\">*</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">g</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">not_prime_mul</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"n\">h2</span>\n</code></pre></div>\n<p>The lemma is defined for <code>Nat.Prime</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">not_prime_mul</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">a1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">b1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span>\n</code></pre></div>\n<p><strong>My question</strong> is - why isn't there a similar lemma for <code>Prime</code> (not just <code>Nat.Prime</code>) that reflects the idea that <code>a*b</code> is not prime?</p>\n<p>Something like the following:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">not_prime_mul</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\">  </span><span class=\"o\">{</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">a1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">b1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c1\">-- made up lemma</span>\n</code></pre></div>",
        "id": 477321682,
        "sender_full_name": "rzeta0",
        "timestamp": 1729123321
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.not_prime_mul#doc\">docs#Nat.not_prime_mul</a></p>",
        "id": 477322357,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1729123774
    },
    {
        "content": "<p>I think the question is kind of \"why not pull every theorem about <code>Nat.Prime</code> across <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.prime_iff#doc\">docs#Nat.prime_iff</a> to translate it to <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Prime#doc\">docs#Prime</a>\"</p>",
        "id": 477322431,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729123806
    },
    {
        "content": "<p>yes - that's the question.</p>\n<p>For example <code>IsSquare.not_prime</code> is about <code>Prime</code> not <code>Nat.Prime</code></p>",
        "id": 477322475,
        "sender_full_name": "rzeta0",
        "timestamp": 1729123848
    },
    {
        "content": "<p>I had hoped the answer would be \"<code>Nat.Prime</code> is the <code>simp</code>-normal form for <code>Prime (n : Nat)</code> so there is no need\", but unfortunately that's not true...</p>",
        "id": 477322502,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729123878
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> <a href=\"#narrow/stream/113489-new-members/topic/Prime.20vs.20Nat.2EPrime.20and.20not_prime_mul/near/477322475\">said</a>:</p>\n<blockquote>\n<p>For example <code>IsSquare.not_prime</code> is about <code>Prime</code> not <code>Nat.Prime</code></p>\n</blockquote>\n<p>Anything that is not about <code>Nat</code> will use <code>Prime</code> not <code>Nat.Prime</code></p>",
        "id": 477322604,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729123931
    },
    {
        "content": "<p>It's not completely clear that <code>Nat.Prime</code> should be the simp normal form.</p>",
        "id": 477322614,
        "sender_full_name": "Adam Topaz",
        "timestamp": 1729123940
    },
    {
        "content": "<p>Arguably <code>Nat.Prime</code> shouldn't exist at all, and we should only have <code>Prime</code></p>",
        "id": 477322643,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729123965
    },
    {
        "content": "<p>something to look forward to in Lean 5? :)</p>",
        "id": 477322692,
        "sender_full_name": "rzeta0",
        "timestamp": 1729124010
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/stream/113489-new-members/topic/Prime.20vs.20Nat.2EPrime.20and.20not_prime_mul/near/477322643\">said</a>:</p>\n<blockquote>\n<p>Arguably <code>Nat.Prime</code> shouldn't exist at all, and we should only have <code>Prime</code></p>\n</blockquote>\n<p>But in fact, <code>Nat.Prime</code> is defined as <code>Irreducible</code>, so I think there's no free lunch here</p>",
        "id": 477322726,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729124042
    },
    {
        "content": "<p>I guess we could go down from having 3 spellings (<code>Prime n</code>, <code>Nat.Prime n</code>, <code>Irreducible n</code>) to having two</p>",
        "id": 477322861,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729124127
    },
    {
        "content": "<p>Back to your original question, perhaps</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">not_prime_mul</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CancelCommMonoidWithZero</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">M</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">IsUnit</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">prime_mul_iff</span><span class=\"bp\">.</span><span class=\"n\">not</span><span class=\"bp\">.</span><span class=\"n\">mpr</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">Or</span><span class=\"bp\">.</span><span class=\"n\">rec</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"bp\">·.</span><span class=\"m\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"bp\">·.</span><span class=\"m\">1</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>should be in mathlib</p>",
        "id": 477323250,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1729124409
    },
    {
        "content": "<p>By the way, <code>norm_num</code> knows how to compute whether numbers are prime, so this works:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">Prime</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">norm_num</span>\n</code></pre></div>\n<p>I know that's not the point of your exercise, but I thought I'd mention it.</p>",
        "id": 477325118,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1729125789
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"724904\">rzeta0</span> <a href=\"#narrow/stream/113489-new-members/topic/Prime.20vs.20Nat.2EPrime.20and.20not_prime_mul/near/477322692\">said</a>:</p>\n<blockquote>\n<p>something to look forward to in Lean 5? :)</p>\n</blockquote>\n<p>This is a mathlib issue, not a lean issue. Lean has all the basic machinery to make the concept of mathlib work, but very little mathematics (eg I doubt it has anything to do with prime numbers)</p>",
        "id": 477359355,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729145417
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Nat.Prime#doc\">docs#Nat.Prime</a> yeah this is all mathlib</p>",
        "id": 477359503,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729145483
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310045\">Eric Wieser</span> <a href=\"#narrow/channel/113489-new-members/topic/Prime.20vs.20Nat.2EPrime.20and.20not_prime_mul/near/477322861\">said</a>:</p>\n<blockquote>\n<p>I guess we could go down from having 3 spellings (<code>Prime n</code>, <code>Nat.Prime n</code>, <code>Irreducible n</code>) to having two</p>\n</blockquote>\n<p>do note that <code>Irreducible n</code> and <code>Prime n</code> mean different things...</p>",
        "id": 477364433,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1729147310
    },
    {
        "content": "<p>Not for n : Nat</p>",
        "id": 477364906,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729147480
    },
    {
        "content": "<p>Yes but Edward's point is that we'll never be able to get down to one.</p>",
        "id": 477372834,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1729150074
    },
    {
        "content": "<p>Oh sure, but two should be relatively easy</p>",
        "id": 477373549,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729150284
    },
    {
        "content": "<p>Though the question is if we should replace Nat.Prime by Prime or Irreducible</p>",
        "id": 477373704,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729150327
    },
    {
        "content": "<p>I think this was discussed in the past. We wanted to keep <code>Nat.Prime</code> because of the recognizable name. But it's defined in terms of <code>Irreducible</code> because that is the definition in the literature for natural prime numbers.</p>",
        "id": 477376277,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729151042
    },
    {
        "content": "<p>It could certainly become an <code>abbrev</code>, if it isn't already.</p>",
        "id": 477376342,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1729151055
    },
    {
        "content": "<p>Pretty sure it isn't an <code>abbrev</code> right now</p>",
        "id": 477376475,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1729151091
    }
]