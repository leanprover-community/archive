[
    {
        "content": "<p>I am not sure what to make of this. If I have the theorem accepted, what can be objected to thereafter? The main thing to make it work is to not write things like \"+...\", but to actually NAME it as a function and calculate what it must be. ie:</p>\n<p>-1/12  = S <br>\n= 0 + Tail_S(0)<br>\n= 1 + Tail_S(1)<br>\n= 1+2+Tail_S(2)<br>\n= 1+2+3+Tail_S(3)<br>\n...<br>\n= 1+2+3+...+n+Tail_S(n)<br>\n= Sum_S(n)+Tail_S(n)</p>\n<p>Where this is a general phenomenon for convergent and divergent series:</p>\n<p>X = Sum_X(n) + Tail_X(n)</p>\n<p>the actual theorem where Sum(n) := n*(n+1)/2 is:</p>\n<p>-1/12 = Sum_S(n) + Tail_S(n)</p>\n<p>where most people would write it with: \"+...\" = \"+Tail_S(n)\", which would not work because it's critical to track how many expansions, n, were done. Writing \"+...\" loses that, and the algebra then breaks.</p>\n<p>This is a FINITE proof. No use of infinity, or advanced math.<br>\nThis statement in particular is so controversial, that it needs to avoid infinity and Riemann Zeta completely. Finite, in code, and accepted in Lean4 is best.<br>\nIt is ACCEPTED BY LEAN4. This is what is accepted:</p>\n<p>-1/12 = S = (1 + 2 + 3 + 4 + ... + n) + Tail_S n<br>\n-1/12 = S = Sum_S n + Tail_S n</p>\n<p>Tail_S having a value might be argued with.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">This is a FINITE proof. No use of infinity, or advanced math.</span>\n<span class=\"cm\">It is ACCEPTED BY LEAN4.</span>\n\n<span class=\"cm\">-1/12 = S = (1 + 2 + 3 + 4 + ... + n) + Tail_S n</span>\n<span class=\"cm\">-1/12 = S = Sum_S n + Tail_S n</span>\n\n<span class=\"cm\">-/</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> We have the first hint on how to isolate Sf to not depend on n ... -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sumMatch</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> If the sum and tail have this same pattern, then we can solve for S -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">tailMatch</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sVal1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> This is ACCEPTED by Lean4. The form of Sum_S n determines</span>\n<span class=\"cm\">   how parenthesese are used. n is the number of expansions</span>\n<span class=\"cm\">   of the series.</span>\n<span class=\"cm\"> -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sVal2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">sVal1</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Notes:</span>\n<span class=\"cm\">B comes from:</span>\n<span class=\"cm\">A = 1 + x A</span>\n<span class=\"cm\">  = (x^0 + x^1 + x^2 + ... + x^n) + x^{n+1} A</span>\n<span class=\"cm\">  = Sum_A n + Tail_A n</span>\n<span class=\"cm\">  = 1/(1-x)</span>\n<span class=\"cm\">F = dA/dx</span>\n<span class=\"cm\">  = 1/((1-x)^2)</span>\n<span class=\"cm\">B = F(-1)</span>\n<span class=\"cm\">  = 1/((1-(-1))^2) = 1/4</span>\n<span class=\"cm\">  = 1 + -2 + 3 + -4 + 5 + -6 + ... + n*(-1)^{n-1} + (d[Tail_A (n+1)]/dx @ -1)</span>\n\n<span class=\"cm\">And it's useful because, it's fully known: B = 1/4.</span>\n<span class=\"cm\">It was an arbitrary choice of a recursive sequence that helps solve for S.</span>\n<span class=\"cm\">There may be other proofs that make no use of B.</span>\n<span class=\"cm\"> -/</span>\n</code></pre></div>",
        "id": 482842115,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731831495
    },
    {
        "content": "<p>If I just look at Lean, what you proved is that some polynomial expression of n simplifies to -1/12. But this says nothing about 1+2+3+…</p>",
        "id": 482847074,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1731836201
    },
    {
        "content": "<p>indeed, i could similarly provide a function <code>Tail_S' : Nat -&gt; Int</code> which has similar recursion properties, but additionally has <code>Sum_S n + Tail_S' n = 0</code>.</p>",
        "id": 482859179,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731847342
    },
    {
        "content": "<p>proving the series converges would be done by showing that <code>Tail_S</code> goes to 0 for larger <code>n</code>.</p>",
        "id": 482859217,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731847391
    },
    {
        "content": "<p>(which in this case can't be done)</p>",
        "id": 482859226,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731847401
    },
    {
        "content": "<p>Sum_S + Tail_S = 0 won't work. If you expand B, you can see that it must have a value of 1/4, and force S=-1/12. Note that because S can be solved like S=1+13S, that S is a base13 number that is all 1 digits as well.  \"S=13^0+13^1+13^2+...=1+2+3+...\". Those are far more easily evaluated by Lean.</p>\n<p>B can't be assigned a different number than 1/4, and it expands like 1 + -2 + 3 + -4 + 5 + -6 + ...  It comes from here:</p>\n<p>A = 1 + x A<br>\n(1-x)A = 1<br>\nA = 1/(1-x)  -- at value -1, it's 1/2<br>\n   = (x^0 + x^1 + x^2 + ... + x^n) + x^{n+1}A</p>\n<p>dA/dx differentiates everything, including the tail. That is why we can't just write \"+...\", or else we lose information. Note that differentiating A gives increasing numbers, to accomodate differentiating:</p>\n<p>dA/dx = F = 0 x^{-1} + 1 x^0 + 2 x^1 + 3 x^2 + ... + n x^{n-1} + d[Tail_A(n)]<br>\n   = 1/( (1-x)^2 )</p>\n<p>and just assign B = F(-1). this gives:<br>\n   F = 1/( (1 - (-1))^2)<br>\n      = 1/4<br>\n     = 1 + -2 + 3 + -4 + 5 + -6 + .... + n(-1)^{n-1} + d[Tail_B(n)]</p>\n<p>And you can verify that Sum_B and Tail_B have exactly this behavior. You lean on the definition of B to solve for S,<br>\nbecause you find quickly that:</p>\n<p>Sum_S (2n) - Sum_B (2n) = 4 Sum_S(n)</p>\n<p>And this is the critical part where writing \"+...\" breaks the algebra. It is important that the right-hand side has half the expansions as the left-hand side. That is because it's doing this in the waffly \"internet proof\"</p>\n<p>ie: S-B:</p>\n<p>1  +  2  +  3  +   4   +   5  +   6 +<br>\n-1 + 2   + -3  +  4   +  -5. +   6<br>\n=<br>\n0  + 4  +  0  + 8  + 0  + 12 + ....</p>\n<p>Using the closed forms for Sum_B and Tail_B neatly work around people just re-arranging and re-parenthesizing. This keeps it valid.</p>\n<p>Similarly, the reason for the complicated expression (4<em>Sum n - (Sum_S (2</em>n) + Tail_B (2<em>n))/3 is that was a solve for the only value that S can have. The n values cancel out, and you get -1/12. Everybody is describing this wrong. It is not S that is the Sum. It's (S - Tail) = Sum. And it's a consequence of (S = Sum + Tail).  It is true that BEFORE you introduce B, that S could be anything. But once you calculate (S - B) to be 4</em>S, S can have no other value than -1/12. And it's not a paradox at all, because \"-1/12 = 1 + 2 + 3 + ...\" is not correctly stated. It's the DIFFERENCE between them that is the sum, because the sum is expressed as a closed finite form:</p>\n<p>S - Tail_S(n) = Sum_S(n) = n*(n+1)/2</p>\n<p>Here is a simpler example:</p>\n<p>T = 1 + 2*T<br>\n   = (2^0 + 2^1 + 2^2 + 2^3 + ... + 2^n) + 2^{n+1}T</p>\n<p>T - 2^{n+1}T = 2^0 + 2^1 + 2^2 + 2^3 + ... + 2^n<br>\nT(1 - 2^{n+1}) = Sum_T(n)<br>\n(-1)(1 - 2^{n+1}) = Sum_T(n)<br>\n2^{n+1} - 1 = Sum_T(n)</p>\n<p>T =<br>\n-1 = (1) - 2<br>\n    = (1 + 2) - 4<br>\n    = (1 + 2 + 4) - 8<br>\n   = (1 + 2 + 4 + 8) - 16<br>\n  = Sum_T(n) + Tail_T(n)</p>\n<p>ie:</p>\n<p>-1 + 2 = 1<br>\n-1 + 4 = 1 + 2<br>\n-1 + 8 = 1 + 2 + 3<br>\n....</p>\n<p>See? It gave a closed form for T! T=-1, but you need to subtract the \"+...\" to get the Sum_T(n).  It is critical to not get lazy and just write \"+...\", because when you do, then the algebra becomes wrong.</p>\n<p>It's even more straightforward when it converges. When it converges, the tail goes to 0 for large n</p>\n<p>Z = 9/10 + (1/10)Z<br>\n   = 0.9 + (0.1)(0.9 + 0.1 Z)<br>\n   = 0.99 + (0.01)Z<br>\n...</p>\n<p>10 Z = 9 + Z<br>\n9Z = 9<br>\nZ = 1</p>",
        "id": 482877581,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731862169
    },
    {
        "content": "<p>I think what is missing here is some justification, in Lean, for why the functions you defined are uniquely characterized by the properties you seem to want in your informal description.  For example, I see some formal power series and derivatives at work, but they don't seem to show up in the Lean code.</p>",
        "id": 482880927,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1731864821
    },
    {
        "content": "<p>indeed. you define some function, but there is nothing written in lean that convinces me that <code>Sum_S</code> indeed gives the tail, and not secretly <code>ActualSum_S + c</code> for some constant <code>c</code>.</p>",
        "id": 482881087,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731864936
    },
    {
        "content": "<p>Yes. That is because this is the first time I ever got Lean4 to accept anything. I want to start from taking a derivative on A, and do explicit calc. But ChatGPT and Claude can't help. I finally got it accepted from fiddling with it.</p>\n<p>Sum_S(n) = n*(n+1)/2  is just the formal sum of 1+2+3+...+n. I convinced Lean that -1/12 = Sum_S(n) + Tail_S(n) for all n. But yes, people reading it are too skeptical to accept the theorem prover accepting it. I need to get better at using the tactics system. But I have been doing this on paper and in LaTeX for like a year; and am certain that no use of infinity is required, because of the recursion. What I take issue with is writing \"+...\" on the end, without giving \"...\" a name.</p>\n<p>S = Tail_S(0)<br>\n   = 1 + Tail_S(1)<br>\n   = (1+2) + Tail_S(2)<br>\n   = (1+2+3) + Tail_S(3)<br>\n   ....<br>\n   = (1+2+3+...+n) + Tail_S(n)</p>\n<p>This idea applies generally to convergent and divergent series. I found about a dozen different cases that it lets me solve.</p>\n<p>I cannot stress this enough, the idea that S is a paradox is just wrong. You can take this with a limit of n going to infinity if you want to talk about that. It's critical to add the negative of the unwritten continuation:</p>\n<p>S - Tail_S(n) = Sum_S(n) = n*(n+1)/2</p>",
        "id": 482881342,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731865130
    },
    {
        "content": "<p>In any case, given that Lean4 accepts this; I think it proves something. Too many real mathematicians disagree on whether this is even real, but Lean4 accepts it. The mathematicians that disagree cannot all be correct. \"+Tail_S(n)\" is a principled way of writing \"+...\" that keeps the algebra intact.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">This is a FINITE proof. No use of infinity, or advanced math.</span>\n<span class=\"cm\">It is ACCEPTED BY LEAN4.</span>\n\n<span class=\"cm\">-1/12 = S = (1 + 2 + 3 + 4 + ... + n) + Tail_S n</span>\n<span class=\"cm\">-1/12 = S = Sum_S n + Tail_S n</span>\n\n<span class=\"cm\">-/</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> We have the first hint on how to isolate Sf to not depend on n ... -/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">sumMatch</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> If the sum and tail have this same pattern, then we can solve for S -/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">tailMatch</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">sVal1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> This is ACCEPTED by Lean4. The form of Sum_S n determines</span>\n<span class=\"cm\">   how parenthesese are used. n is the number of expansions</span>\n<span class=\"cm\">   of the series.</span>\n<span class=\"cm\"> -/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">sVal2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">sVal1</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Notes:</span>\n<span class=\"cm\">B comes from:</span>\n<span class=\"cm\">A = 1 + x A</span>\n<span class=\"cm\">  = (x^0 + x^1 + x^2 + ... + x^n) + x^{n+1} A</span>\n<span class=\"cm\">  = Sum_A n + Tail_A n</span>\n<span class=\"cm\">  = 1/(1-x)</span>\n<span class=\"cm\">F = dA/dx</span>\n<span class=\"cm\">  = 1/((1-x)^2)</span>\n<span class=\"cm\">B = F(-1)</span>\n<span class=\"cm\">  = 1/((1-(-1))^2) = 1/4</span>\n<span class=\"cm\">  = 1 + -2 + 3 + -4 + 5 + -6 + ... + n*(-1)^{n-1} + (d[Tail_A (n+1)]/dx @ -1)</span>\n\n<span class=\"cm\">And it's useful because, it's fully known: B = 1/4.</span>\n<span class=\"cm\">It was an arbitrary choice of a recursive sequence that helps solve for S.</span>\n<span class=\"cm\">There may be other proofs that make no use of B.</span>\n<span class=\"cm\"> -/</span>\n</code></pre></div>",
        "id": 482882298,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731865984
    },
    {
        "content": "<p>And what exactly do you say you've proved that people might disagree with?</p>",
        "id": 482882648,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1731866253
    },
    {
        "content": "<p>Stuff like: \"Mathologer is just wrong.\". You can't reject it because you don't like it. If it's accepted by Lean, then you have some explaining to do if you reject it. This problem says some really deep things about the \"instruction set\" of mathematics. It takes \"a=b\" very seriously, as a bidirectional rewrite rule. It takes recursion seriously. It doesn't care at all that \"I added integers and got a negative fraction\". Finite fields do exactly this as well. I think that's what is going on. </p>\n<p>S = -1/12<br>\n-12 S = 1<br>\n(1-13)S = 1<br>\nS = 1 + 13 S</p>\n<p>S is a base13 number that is all 1 digits. That is why multiplying it times 12 gives you -1, in its infinite-digit representation.  I am a CS major; this is all deep common-sense to me. I don't really see what people object to. Adding all powers of 2 to get -1 is just common sense if you build computer hardware.</p>",
        "id": 482883105,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731866560
    },
    {
        "content": "<p>so your \"common sense\" says that adding all positive integers gives a negative integer...</p>",
        "id": 482883820,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731867153
    },
    {
        "content": "<p>rather than something positive</p>",
        "id": 482883833,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731867162
    },
    {
        "content": "<p>Yes. Because this happens in real hardware, then you implement adders out of logic circuits. It's a deep physical common-sense notion you get from doing code.</p>\n<p>T = 1 + 2 T<br>\n    = 1 + 2( 1 + 2 T)<br>\n    = 1 + 2 + 4 T<br>\n    = 1 + 2 + 4(1 + 2 + 4 T)<br>\n    = 1 + 2 + 4 + 8 + 16 T</p>\n<p>When you get S=-1/12=1+2+3+...+n+Tail_S(n), that \"-1/12\" can be represented as some infinite digit number. It's \"-1/12\" because if you multiply it times 12, you get -1. That's because in base13, (12) is the highest possible digit. Add 1, and it all ripple-carries to 0. Here is the powers of 13 expansion of -1/12:</p>\n<p>-1/12 = V = 13^0 + 13^1 + 13^2 + ... + 13^n + 13^{n+1}V</p>\n<p>Here is the closed form for finite n:</p>\n<p>Sum_V(n)<br>\n=<br>\n(-1/12)(1 - 13^{n+1})<br>\n=<br>\n(13^{n+1} - 1)/12</p>",
        "id": 482884055,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731867353
    },
    {
        "content": "<p>how do you mean \"if you multiply it times 12, you get -1\"? what exactly is the calculation? something like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>12</mn><mo>∗</mo><mo stretchy=\"false\">(</mo><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3</mn><mo>+</mo><mo>…</mo><mo>+</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>+</mo><mn>12</mn><mo>∗</mo><msub><mtext>Tail</mtext><mi>S</mi></msub><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>12</mn><mo>+</mo><mn>24</mn><mo>+</mo><mn>36</mn><mo>+</mo><mo>…</mo><mo>+</mo><mn>12</mn><mo>∗</mo><mi>n</mi><mo>+</mo><mn>12</mn><mo>∗</mo><msub><mtext>Tail</mtext><mi>S</mi></msub><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">12*(1+2+3+\\ldots + n) + 12 * \\text{Tail}_S(n)= 12 + 24 + 36 + \\ldots + 12 * n + 12 * \\text{Tail}_S(n) </annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">12</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">12</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">Tail</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">12</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">24</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">36</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"minner\">…</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">12</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">12</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord text\"><span class=\"mord\">Tail</span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>? that's fine, but how do you get to this equaling <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">-1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1</span></span></span></span>?</p>",
        "id": 482884635,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731867792
    },
    {
        "content": "<p>Pretty much all of these manipulations admit some mathematical context in which they can be formally justified, but gluing them together is not so easy.  This is where people usually fall back on complex analysis, e.g., analytically continuing the zeta function.</p>",
        "id": 482884729,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1731867864
    },
    {
        "content": "<p>Sure! But I got Lean to accept it. That seems meaningful.</p>",
        "id": 482884802,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731867925
    },
    {
        "content": "<p>No Zeta, and no infinity is the point. I am a computer programmer. I just don't believe in an infinite number of iterations, because you will never be around to see the last iteration; by definition.</p>",
        "id": 482884907,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731867974
    },
    {
        "content": "<p>the thing that you got lean to accept is \"there is some function <code>Tail_S : Int -&gt; Rat</code> that complements <code>n*(n+1)/2</code> to add to <code>-1/12</code>\". That's not a revelation about sums. that's just a fact about being able to calculate differences.</p>",
        "id": 482885040,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731868076
    },
    {
        "content": "<p>In base13, the digits are: 0 1 2 3 4 5 6 7 8 9 A B C.  C is base13 \"12\".</p>\n<p>12 * (13^0 + 13^1 + 13^2 + ...) </p>\n<p>written in base13 is an infinite number of C digits to the left.</p>\n<p>....CCCCCCCC</p>\n<p>In the same way that in base10, (.....99999) will ripple carry to (.....00000) if 1 is added, so will (.....CCCCCC) base13.</p>\n<p>So, -1/12 is not mysterious at all. It's a thing that if you multiply times 12, you get -1. If it is an infinite-digit representation of -1, you add 1 to it and you get 0. This is totally common sense to EE and CS majors. We baffle at math notation sometimes; because of what we see happening in hardware computation.</p>",
        "id": 482885103,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731868117
    },
    {
        "content": "<p>Your particular choice of <code>Tail_S</code> function is justified by a non-formalized manipulation that involves identifying the rational function <code>F</code> with its Taylor expansion at zero and evaluating at <code>-1</code>.</p>",
        "id": 482885176,
        "sender_full_name": "Scott Carnahan",
        "timestamp": 1731868196
    },
    {
        "content": "<p>sure, but where does <code>1+2+...</code> come into the mix in that reasoning? because i don't understand how you justify that being equal to 12 * (13^0 + 13^1 + 13^2 + ...)</p>",
        "id": 482885181,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731868199
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/116395-maths/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/482885103\">said</a>:</p>\n<blockquote>\n<p>We baffle at math notation sometimes; because of what we see happening in hardware computation.</p>\n</blockquote>\n<p>similarly, we baffle at the shortcuts taken in hardware computation sometimes to represent an infinite type in finite space, making a \"bad\" representation.</p>",
        "id": 482885421,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731868352
    },
    {
        "content": "<p>It's one say to say you can reason using the 13-adic numbers that in that number system, 1 + 2 + 3 + ... is -1/12 (that seems plausible to me, though I didn't check), but it's another to say (1) that this has anything to do with the real numbers and (2) that this reasoning is accurately captured in the Lean.</p>\n<p>The situation with (2) is that Lean only checks that what you give it is correct, not that what you give it is what you think it is.</p>",
        "id": 482885435,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731868370
    },
    {
        "content": "<p>(13-adic numbers refers to the number system where you can write base 13 numbers of infinite length and have \"infinite\" roll-overs)</p>",
        "id": 482885554,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731868474
    },
    {
        "content": "<p>More about 2: what if I told you I was very <em>very</em> sure that I proved Fermat's Last Theorem because I wrote \"fermats_last_theorem\" in Lean and Lean accepts it?</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">FermatsLastTheorem</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">≥</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">fermats_last_theorem</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">FermatsLastTheorem</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"bp\">;</span><span class=\"w\"> </span><span class=\"n\">omega</span>\n</code></pre></div>",
        "id": 482885614,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731868519
    },
    {
        "content": "<p>Just from S, you can solve it for 1+13 S.</p>\n<p>S = T=-1/12<br>\n-12 T = 1<br>\n(1 - 13)T = 1<br>\nT = 1 + 13 T</p>\n<p>That is the justification for \"-1/12 is a base13 of all 1 digits\". It's just pointing out that when you show that the recursive definition. You can't just add \"...\" to it. You must spell out what it is. You can DIFFERENTIATE Tail, etc. It is completely unambiguous. And in making it unambiguous, you force S to have an infinite-digit represented number (....111111_13). Which has the property that if you multiply it times 12, you get (......11111_2) ... an infinite representation of -1. That is why it is -1/12. This -1/12 is an \"infinite digit integer\" if you like. This is no more strange than 1=(0.9....). There is an uncarried infinite digit representation, and a carried finite digit representation. If you like, there are still an infinite number of zeroes to the left and to the right.</p>\n<p>// I call this nonsense.... <br>\nS = n*(n+1)/2 + ...</p>\n<p>// this is proper.<br>\nS = n*(n+1)/2 + Tail_S(n)</p>",
        "id": 482885615,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731868520
    },
    {
        "content": "<p>If Lean accepts your FermatsLastTheorem, then that means that it chained together the inequality and the logic. Yes, I would believe that Lean proved: that def exactly as stated. I would wonder if it was stated correctly though.</p>",
        "id": 482886114,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731868949
    },
    {
        "content": "<p>I'll note that with the definition of summation used in mathlib, I can prove that the sum is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> not <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mn>12</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{12}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">12</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"sd\">/-- `0 + 1 + 2 + ...` is not `Summable`, because the sequence diverges. -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">not_summable</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">¬</span><span class=\"w\"> </span><span class=\"n\">Summable</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">not_summable_iff_tendsto_nat_atTop_of_nonneg</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_nonneg</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Filter</span><span class=\"bp\">.</span><span class=\"n\">tendsto_atTop_atTop_of_monotone</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">monotone_of_le_succ</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"n\">simp_rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ_eq_succ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_range_succ</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_sum</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_add</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">norm_cast</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">le_self_add</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"bp\">⟨⌈</span><span class=\"n\">x</span><span class=\"bp\">⌉₊.</span><span class=\"n\">succ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">?_⟩</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">sum_range_succ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_sum</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">refine</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">le_ceil</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">|&gt;.</span><span class=\"n\">trans</span><span class=\"w\"> </span><span class=\"bp\">?_</span>\n<span class=\"w\">    </span><span class=\"n\">conv_lhs</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">zero_add</span><span class=\"w\"> </span><span class=\"bp\">⌈</span><span class=\"n\">x</span><span class=\"bp\">⌉₊</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">cast_add</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">gcongr</span>\n<span class=\"w\">    </span><span class=\"n\">positivity</span>\n\n<span class=\"sd\">/-- `0 + 1 + 2 + ... = 0`, because the sequence is not summable. -/</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">tsum_eq_zero_of_not_summable</span><span class=\"w\"> </span><span class=\"n\">not_summable</span>\n</code></pre></div>\n<p>(for ease I included <code>0 + </code> in the sum, but hopefully you agree this is not relevant)</p>",
        "id": 482886123,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731868955
    },
    {
        "content": "<p>is the sum n*(n+1)/2 for finite n?</p>",
        "id": 482886195,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731869032
    },
    {
        "content": "<p>Sounds like a nice lean challenge for you to have a go at:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"c1\">-- this one is harder because the `/` rounds down</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lets_find_out</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">lets_find_out_no_rounding</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"bp\">↑</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 482886532,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1731869281
    },
    {
        "content": "<p>\"because the sequence is not summable\". I worked around this by using closed form for Sum_S(n), so that there's no putting in 0 in between random spots, doing parenthesis... n*(n+1)/2 nails it down exactly for every n. I leaned on the definition of B to force S to have a value. B = 1/4 = 1  + -2 + 3 + -4 + 5 + -6 + \"...\" has a structure that you can mix in to get the -1/12. There can't be a different value. In fact, Lean detects an error right away. Try to set it to 0, and it won't be accepted. The algebra literally cancels out all n, and you are left with -1/12. Sum_S(n) is huge positive, and Tail_S(n) is huge negative. They differ by -1/12</p>",
        "id": 482886607,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731869318
    },
    {
        "content": "<blockquote>\n<p>No Zeta, and no infinity is the point. I am a computer programmer. I just don't believe in an infinite number of iterations, because you will never be around to see the last iteration; by definition.</p>\n</blockquote>\n<p>Note that mathematicians agree with you on this. <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3</mn><mo>+</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo>=</mo><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">1 + 2 + 3 + ... = \\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.3669em;\"></span><span class=\"mord\">...</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord\">∞</span></span></span></span> does not mean \"do the addition infinite amount of times, and you will get a number called <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord\">∞</span></span></span></span>\". It means \"there exists a function <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi><mo>:</mo><mi mathvariant=\"double-struck\">N</mi><mo>→</mo><mi mathvariant=\"double-struck\">N</mi></mrow><annotation encoding=\"application/x-tex\">f : \\mathbb{N} \\to \\mathbb{N}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">N</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">→</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6889em;\"></span><span class=\"mord mathbb\">N</span></span></span></span> such that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3</mn><mo>+</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo>+</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>N</mi><mo stretchy=\"false\">)</mo><mo>&gt;</mo><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">1 + 2 + 3 + ... + f(N) &gt; N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord\">...</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">&gt;</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span> for all <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span>\". The <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi></mrow><annotation encoding=\"application/x-tex\">...</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.1056em;\"></span><span class=\"mord\">...</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord\">∞</span></span></span></span> are just convenience notations and nothing more.</p>",
        "id": 482886673,
        "sender_full_name": "Andrew Yang",
        "timestamp": 1731869390
    },
    {
        "content": "<p>Yes. I take \"a = b\" to literally mean \"a -&gt; b\" and \"b -&gt; a\" as rewrite rules. You therefore can't say that anything is equal to \"+ ...\".</p>",
        "id": 482886783,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731869463
    },
    {
        "content": "<p>And that's what forces the -1/12 value to come out the other end. You need B to isolate S. Use recursion to remove the ambiguity.</p>",
        "id": 482886807,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731869493
    },
    {
        "content": "<p>1+2+3+...+n + f(n)</p>",
        "id": 482886887,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731869548
    },
    {
        "content": "<p>This has been written up as Python code for a long time, btw. I still have more work to formalize everything beyond the fact that -1/12 = Sum_S(n) + Tail_S(n) is true. The tail is nailed down by the constraints imposed by 1/4 = Sum_B(n) + Tail_B(n), which you can show is the alternating sequence, justified as being the derivative of A at -1.</p>",
        "id": 482887091,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731869714
    },
    {
        "content": "<p>A = 1 + x A</p>\n<p>(1-x)A = 1<br>\nA = 1/(1-x)</p>\n<p>dA/dx = F<br>\nB = F(-1)</p>\n<p>the choice of B is not important other than it helps extract S.</p>",
        "id": 482887178,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731869780
    },
    {
        "content": "<p>reading <br>\n<code>theorem not_summable : ¬ Summable fun x : ℕ =&gt; (x : ℝ) </code></p>\n<p>... i do not see how that's relevant to whether the pattern \"1+2+3+...+n+Tail_S(n)\" can be rewritten as -1/12 or not. doing some research to see anybody that thinks that this result is \"actually zero\"; and why Ramanujan thought it was -1/12.</p>",
        "id": 482916553,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731895740
    },
    {
        "content": "<p>it implies that you get a 0, not because 0 is the value; but simply that it's \"not summable\", which seems to mean \"no answer\". But if you are trying to figure out what the answer is after an infinite number of iterations... that is completely true! there is no answer if you are asking what the answer is after a number of iterations which is unreachable by definition.</p>",
        "id": 482916754,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731895888
    },
    {
        "content": "<p>and that is exactly why i went with recursion; to not rely on an infinite process. even if it's \"alowed\", you can't actually do that on a computer.</p>",
        "id": 482916865,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731895955
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 482917556,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731896446
    },
    {
        "content": "<p>This is as terse as I can get it, because I can't do circular references between the definitions. It's just mysterious how I figured out theorem S.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"c\">/-</span>\n<span class=\"cm\">1/4 = B = 1 + -2 + 3 + -4 + 5 + -6 + ... + n*(-1)^{n-1} + Tail_B n</span>\n<span class=\"cm\">-1/12 = S = (1 + 2 + 3 + 4 + ... + n) + Tail_S n</span>\n<span class=\"cm\">-/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> n cancels out to solve for a constant. this is the justification for the equation</span>\n<span class=\"cm\">  3S = 4 SumS n - (SumS 2n + TailB 2n)</span>\n<span class=\"cm\">  4S = S + 4 SumS n - SumS 2n - TailB 2n</span>\n<span class=\"cm\">  4 TailS n = TailS 2n - TailB 2n</span>\n<span class=\"cm\">  because</span>\n<span class=\"cm\">  SumS 2n - SumB 2n = 4 SumS n</span>\n<span class=\"cm\">  which means S - B = 4S, which needs S=-1/12</span>\n<span class=\"cm\">-/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sgoal</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 482921429,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731899589
    },
    {
        "content": "<p>Is there any argument at all to convince you otherwise? It seems like there is literally nothing that could convince you otherwise, which seems like a bad idea.</p>",
        "id": 482941290,
        "sender_full_name": "Abraham Solomon",
        "timestamp": 1731912191
    },
    {
        "content": "<p>well, all this messing with this caused something to click with how Lean works; massively better understanding. look at the tactics and unfold every definition you still see; and then simp, maybe ring. that's 90% of what i need for now. I am now not having any trouble getting theorems accepted, and can focus on making sure they are correctly stated:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> therefore ... -/</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> because Sf is equiv to Sum_S + Tail_S -/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">SfWhy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> B = 1 + -2 + 3 + -4 + 5 + -6 + ... + n*(-1)^(n-1) + Tail_B n -/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Bgoal</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> In base13, Sf n is all 1 digits -/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">B13</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> S = 1 + 2 + 3 + ... + n + Tail_S(n)</span>\n<span class=\"cm\">     = -1/12</span>\n<span class=\"cm\">     = s = 13^0 + 13^1 + 13^2 + ... + 13^m + Tail_s(m)</span>\n<span class=\"cm\">-/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sgoal</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 482942320,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731912696
    },
    {
        "content": "<p>∀ {n : ℤ}, Sum_S n + Tail_S n = -1 / 12<br>\n=<br>\n  1+2+3+...+n  +  Tail_S n <br>\n=<br>\n 1 + 2 + 3 + ... + n  + ((4<em>Sum_S(n)-(Sum_S(2n)+Tail_B(2n)))/3 - n</em>(n+1)/2)</p>\n<p><span aria-label=\"rolling on the floor laughing\" class=\"emoji emoji-1f923\" role=\"img\" title=\"rolling on the floor laughing\">:rolling_on_the_floor_laughing:</span></p>\n<p>I have had this working as Python code for months. nothing on earth is more convincing than code that runs and gives the answers you expect. If it's really strange, then that's just your brain resisting something new going in.</p>\n<p>So, the whole point of this is that if the theorem prover is sound; that you should put in the most bizarre thing you can get it to accept. That's how you figure out what the \"instruction set\" of the math really is. If fitting a recursive pattern gives an answer that you find highly offensive; then that's an amazing way to nail down the subtle details on how it really works.</p>",
        "id": 482944419,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731913628
    },
    {
        "content": "<p>You are not using theorem <code>S</code> at all...</p>",
        "id": 482946741,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1731914653
    },
    {
        "content": "<p>Removing it, your code reduces to this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sgoal</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 482946824,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1731914697
    },
    {
        "content": "<p>That is certainly true, but so is this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sgoal</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 482946923,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1731914747
    },
    {
        "content": "<p>the last one i posted is cleaned up, now that i am having no trouble getting them accepted. These observations for ANY sequence:</p>\n<p>X = Sum_X(n) + Tail_X(n)<br>\n  = 1 + Tail_X(1)<br>\n  = 1 + 2 + Tail_X(2)<br>\n  = 1 + 2 + 3 + Tail_X(3)<br>\n....<br>\nYou can only write a finite number of them. If you have a closed form, then you can write a Sum and Tail for it. Keep in mind that S is not the sum. Sum is the sum...</p>\n<p>S - Tail_S(n) = n*(n+1)/2.</p>\n<p>Remember:  S = Sum_S(n) + Tail_S(n) needs to be taken literally.</p>\n<p>lim n-&gt;infty[  S - Tail_S(n) = Sum_S(n) ]</p>\n<p>when people argue that the sum is infinity, that's what they mean.</p>\n<p>That's the thing that people are getting wrong. </p>\n<p>Example:</p>\n<p>T = 1 + 2 T.<br>\n    = 1 + 2 + 4 + 8 + ... + 2^n + 2^(n+1)T<br>\nT - 2^(n+1)T = 1 + 2 + 4 + 8 + ... + 2^n<br>\nT(1 - 2^(n+1)) = Sum_T(n)<br>\n(-1)(1 - 2^(n+1)) = Sum_T(n)<br>\n2^(n+1) - 1 = 1 + 2 + 4 + 8 + ... + 2^n</p>",
        "id": 482947402,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731914941
    },
    {
        "content": "<p>Nobody is disputing that if you say <code>def Sum_B (n : ℤ) : ℚ := 1/4 - Tail_B n</code> then <code>Sum_B n + Tail_B n = 1/4</code> for all <code>n</code>.</p>",
        "id": 482949842,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1731915882
    },
    {
        "content": "<p>Actually... Sf came from S-B. But I had to define the function, then justify it later. with SfWhy.  Sf n = Sum_S n + Tail_S n, but that would be a tautology that doesn't give a value. So I just set it to the thing that forces it to be -1/12.</p>\n<p>ie: <br>\nS - B ... can be split up into Sum and Tail. But there's a super-subtle point in the proofs where people casually use \"+...\".  Because they got 0+2+0+4+0+8 ... and are not taking the number of expansions into account. That's why it's Sum_S(2*n) to represent expanding twice as far. You need to preserve that for the algebra to work.</p>\n<p>So, just considering sums.... you get 4 times the sum but for half as many terms expanded out:</p>\n<p>Sum_S (2<em>n) - Sum_B (2</em>n) = 4* Sum_S n</p>\n<p>And because Tail_S isn't defined yet, you do the same for tails, but substitute Tail_S n = (S - Sum_S (2*n)) to make it work...</p>\n<p>Tail_S (2<em>n) - Tail_B (2</em>n) = 4 * Tail_S n<br>\n=<br>\n(S - Sum_S (2<em>n)) - Tail_B (2</em>n) = 4 * (S - Sum_S n)<br>\n...<br>\nwhich you solve for S to get:<br>\nS = (4<em>Sum_S(n) - (Sum_S(2</em>n)+Tail_B(2*n)))/3</p>\n<p>And all the n cancel out, and you get a constant of -1/12. It's the reason why B is involved in this at all.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> because Sf is equiv to Sum_S + Tail_S -/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">SfWhy</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n</code></pre></div>\n<p>It is true that I am not referencing SfWhy somewhere, but i state it so that I get an error if it's not true. But it's true. I am still learning how to use the tactics. I can do this on paper; and am confident that I can get it working in Lean....</p>",
        "id": 482951286,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731916421
    },
    {
        "content": "<p>There is a real application for the divergent sums btw: It lets you calculate closed forms. Sum of powers of 13:</p>\n<p>s = 13^0 + 13^1 + 13^2 + ... + 13^n + 13^(n+1)s<br>\ns(1 - 13^(n+1)) = 13^0 + 13^1 + 13^2 + ... + 13^n<br>\n(-1/12)(1 - 13^(n+1)) = 13^0 + 13^1 + 13^2 + ... + 13^n<br>\n=<br>\n(13^(n+1) - 1)/12</p>\n<p>I only started fiddling with this because I was trying to write code to turn infinite series into recursion only. I thought it would be simple; but finding recursive equivalents is not easy in general.</p>",
        "id": 482955150,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731917665
    },
    {
        "content": "<p>I need to encode the justification for B=1/4. It's derived like this, but I don't know enough Lean to start from A. I have to just define it, and have a theorem justify it later (like I did to get the only possible value for S, -1/12)</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"c\">/-</span>\n<span class=\"cm\">A = 1 + x A</span>\n<span class=\"cm\">(1-x)A = 1</span>\n<span class=\"cm\">A = 1/(1-x)</span>\n<span class=\"cm\">  = x^0 + x^1 A</span>\n<span class=\"cm\">  = x^0 + x^1 + x^2 + x^3 + ... + x^n + x^(n+1)/(1-x)</span>\n\n<span class=\"cm\">F = dA/dX = 0 x^(-1) + 1 x^0 + 2 x^1 + 3 x^2 + ... + n x^(n-1) + d[Tail_A n]/dx</span>\n<span class=\"cm\">B = F(-1)</span>\n<span class=\"cm\">-/</span>\n</code></pre></div>",
        "id": 482959497,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731918963
    },
    {
        "content": "<p>Greetings! This is sorry-free. It does not plug in any constants directly. It uses theorems to justify the choices I made. If Lean accepts it, then the question is what is actually stated; and what gaps there are in the theorems.</p>\n<p>The conclusion I get:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">},</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span>\n<span class=\"bp\">=</span>\n<span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"mi\">2</span><span class=\"bp\">+</span><span class=\"mi\">3</span><span class=\"bp\">+...+</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n</code></pre></div>\n<p>Where you can think of <code>+ Tail_S n</code> as an actual definition of <code>+ ...</code> so that it can be manipulated in the algebra. Note that I actually had to differentiate <code>+ Tail_A</code> which most people would be writing as <code>+ ...</code>.</p>\n<p>Now I am not sure how theorems are supposed to be linked together; because you sometimes need to define something,  and justify its definition with a theorem later on. I don't yet know how to differentiate A to get F, to get the constant value for B. So I just diff A manually. I don't know how to link together non-equal steps, so I just do a theorem per-step. The fact that I \"don't use\" the theorems isn't true. I use them so that I get an error when the assumption I am making is not true. </p>\n<p>Contrary to comments, I can't just assign Sf whatever value I like; because the theorems will fail if I define Sf=0, etc. The same for B.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> A = 1 + x*A = x^0 + x^1 + x^2 + ... + x^n + x^(n+1)A = 1/(1-x) -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> dA/dx = F = 0 x^(-1) + 1 x^0 + 2 x^1 + 3 x^2 + ... + n x^(n-1) + d[Tail_A x n] -/</span>\n<span class=\"c\">/-</span><span class=\"cm\"> B = F(-1) = 1 + -2 + 3 + -4 + 5 + -6 + ... + (Tail_F (-1) n) -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Sum_S is related to a multiple of itself -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">SumDiff</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Ff</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Tail is also related to a multiple of itself, in same relation -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">TailDiff</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> SumDiff and TailDiff imply: S-B=4S -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">SminusBis4S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Ff</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> leads to justifySf -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">TailDiffBySum</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> n cancels to give the constant, and only possible value for Sf -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">justifySf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Sf is all 1 digits in base13, which makes it the sum of all ℕ powers of 13! -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">base13allOnes</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> 1+2+3+...+n + Tail_S = -1/12 = S = 13^0 + 13^1 + 13^2 + ... + 13^m + Tail_s(m) = s -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sgoal</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 483161374,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731980455
    },
    {
        "content": "<p>So, was Ramanujan a crazy person?</p>",
        "id": 483171856,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1731985970
    },
    {
        "content": "<p>Here's a way to start to try proving some of your comments:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Rat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">))</span><span class=\"bp\">.</span><span class=\"n\">image</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)))</span><span class=\"bp\">.</span><span class=\"n\">sum</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 483175526,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1731987836
    },
    {
        "content": "<p>AFAICT, you are still proving an identity between two explicitly defined expressions (which is true but does not have a lot of mathematical content), and listing many intermediate theorems that you never use (but are indicative of some math that wants to get out).</p>\n<p>I have a proposal: since what you want to do is show that any \"extended sum\" applied to <code>n</code> gives <code>- 1 / 12</code>, let's actually show this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">structure</span><span class=\"w\"> </span><span class=\"n\">Reasonable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Linearity</span>\n<span class=\"w\">  </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">b</span>\n<span class=\"w\">  </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Shift</span>\n<span class=\"w\">  </span><span class=\"n\">h3</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Splitting even / odd</span>\n<span class=\"w\">  </span><span class=\"n\">h4</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Plus whatever rules you want to add</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">twelfth</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hS</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Reasonable</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>The \"right\" proof of that theorem will involve the manipulations that you are doing, and would be satisfying to have.</p>\n<p>Be careful though that the definition of <code>Reasonable</code> I am giving here is totally wrong, no summation operator is reasonable:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">caution</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hS</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Reasonable</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">bug</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">hS</span><span class=\"bp\">.</span><span class=\"n\">h3</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">linarith</span>\n</code></pre></div>\n<p>The point is to get your <code>- 1 / 12</code> froms the manipulations that you are doing. An actual definition would have a summation operator with values in <code>Option ℝ</code> or something, and you would have to state that \"if the sum is actually defined, it is equal to <code>- 1 / 12</code>\". </p>\n<p>With an actually well chosen definition of <code>Reasonable</code> and an accepted proof of <code>twelfth</code> I believe that you would have something pretty nice.</p>",
        "id": 483220358,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1732009422
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span>, I think this conversation would be improved if you were not posting a page with every response and not obviously engaging with the other people in those responses. If you say one sentence at a time, people have an opportunity to respond before you post a whole paragraph, codeblock or mathematical derivation that doubles down on a misapprehension</p>",
        "id": 483221165,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732009654
    },
    {
        "content": "<p>This is sorry-free. All stated theorems are validated to be true. There are no red error markers. But It is now clear that there has to be a way to link these up. So, I don't know exactly what you look for when you see a proof without any complaints. It appears that a human still can come in and cast doubt on it.</p>\n<p>I thought that this deals with just blatantly setting <code>Sf n = -1/12</code> and then making theorems to verify it later. Is this this insufficient to define <code>S</code>?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"w\"> </span><span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span>\n</code></pre></div>\n<p>Because later, it's justified as being the same as <code>1+2+3+...+n + Tail_S(n)</code></p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">justifySf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n</code></pre></div>\n<p>I could have just set Sf to -1/12 and use a theorem to justify it later. Because it's recursive, you have to define some things, and do the recursive definitions in theorems later. They will turn red if they are false. I get here because I only know how to do equalities like:  <code>(a=b)</code>. I dont know how to properly link up uses of <code>=</code> as just another binary operator. I want to use that to create <code>5*(a=b)</code> to make <code>5*a = 5*b</code>, then <code>(5*a=5*b)+X</code> to get <code>5*a+X = 5*b+X</code>, etc. The definition of justifySf comes from stating <code>Sum_S (2*n) - Sum_B (2*n) = 4*Sum_S n</code> to show how S without tails is related to itself. Then from there, if <code>S - B = 4*S</code>, then the tails have the same relationship. Solving <code>Tail_S (2*n) - Tail_B (2*n) = 4 * Tail n</code> for S has a super-subtle point in it. Without the use of infinity, you can see that the right-hand side expands half as many times as on the left-hand side. The <code>+ ...</code> proofs can't capture this in the notation.</p>",
        "id": 483379713,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732060318
    },
    {
        "content": "<blockquote>\n<p>I dont know how to properly link up uses of <code>=</code> as just another binary operator. I want to use that to create <code>5*(a=b)</code> to make <code>5*a = 5*b</code>, then <code>(5*a=5*b)+X</code> to get <code>5*a+X = 5*b+X</code>, etc.</p>\n</blockquote>\n<p>sounds like maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=congrArg#doc\">docs#congrArg</a> could help here?</p>",
        "id": 483381780,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1732061323
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"bp\">·</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">h</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 483382406,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1732061673
    },
    {
        "content": "<p>Oh! Thank you! Amazing <span class=\"user-mention\" data-user-id=\"380294\">@Matt Diamond</span> . <br>\nI think i can use just this for almost everything that i do in practice. <br>\nThe last theorem is just to ask what S is, and it must be -1/12.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">justifySf2</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 483384824,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732063308
    },
    {
        "content": "<p>it was accepted because I had a bug in the definition of Tail_B, where <code>(-1)^2</code> was where <code>(-1)^n</code> should have been. I can't figure out how to get <code>rw [pow_mul, neg_one_sq]</code> to work. It isn't necessary to solve for <code>S</code>, but it's necessary to do a <code>#eval Sum_B 1</code> to validate that <code>B</code> is the alternating sequence. It was always this that stopped me, that ring can't handle <code>(-1)^(2*n)=1</code> properly.</p>",
        "id": 483393246,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732069308
    },
    {
        "content": "<blockquote>\n<p>I can't figure out how to get <code>rw [pow_mul, neg_one_sq]</code> to work.</p>\n</blockquote>\n<p>Could you provide a statement of what you have and what you're trying to get to using <code>rw [pow_mul, neg_one_sq]</code>? It's hard to help without context.</p>",
        "id": 483393833,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1732069678
    },
    {
        "content": "<p>hi! the help I am getting from you guys is tremendous. i went from being totally stuck, to thinking that I can do almost all algebra this way... as long as it's not relying on things like (-1)^2=1=1^n. Claude is unbelievably good at Lean, especially when you consider how bad ChatGPT is at it. I punted on linking A to F to show Tail_F is d[Tail_A]/dx ... Which would explain where Tail_B came from.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> A = 1 + x*A = x^0 + x^1 + x^2 + ... + x^n + x^(n+1)A = 1/(1-x) -/</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> dA/dx = F = 0 x^(-1) + 1 x^0 + 2 x^1 + 3 x^2 + ... + n x^(n-1) + d[Tail_A x n] -/</span>\n<span class=\"c\">/-</span><span class=\"cm\"> B = F(-1) = 1 + -2 + 3 + -4 + 5 + -6 + ... + (Tail_F (-1) n) -/</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Term_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Term_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">BisConstant</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">justifySf</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">((</span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">))</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"c\">/-</span><span class=\"cm\"> Everything above is sorry-free and nothing is red. Code below fails because I can't get rid of ((-1)^2) or ((1)^n) -/</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">SisConstant</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">zpow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zpow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neg_one_sq</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n</code></pre></div>",
        "id": 483396509,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732071475
    },
    {
        "content": "<p>oh my God is Claude good at writing Lean. My problem is that with functions that take Z as input and output Q, tactics theorems encountering integer powers of -1 are COMICALLY hard to write. Claude got it all sorted out for me. I would say that the handling of integer powers of -1 are by far the biggest barrier for using Lean for routine work. If ring doesn't do it, then we need a tactic that does. The proof is much larger, and it is much much more solid. Claude thinks it's a really good proof, because it really deeply groks what I am doing. I am making fine distinctions between the algebra, the limits (ie: S-(Tail_S n)=Sum_S n) as n gets large, and keeping the distinction on how many term expansions happened. Claude totally groks the S=1+13S as the reason why this infinite digit number (sum of powers of 13... all 1s in base13).</p>\n<p>The only remaining bits is the comments about the mystery of why B was chosen like it was. But how S was chosen is very very clear. But my theorems are a total mess because ring can't handle things like (-1)^n and 1^n correctly. It only worked previously because I had a bug and wrote Tail_B to use (-1)^2 instead of (-1)^n, which caused most things to work, but failed to give me the right terms for B until it was fixed.</p>",
        "id": 483413411,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732083604
    },
    {
        "content": "<p>Add zpow_ofNat before neg_one_sq</p>",
        "id": 483413460,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732083641
    },
    {
        "content": "<p>The exponent 2 is an integer rather than a natural number, which is a problem to lean</p>",
        "id": 483413530,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1732083689
    },
    {
        "content": "<p>Here is where Claude got me, with zpow_ofNat added. It looks tight other than the definition of B not really being justified as the alternating sequence.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> A = 1 + x*A = x^0 + x^1 + x^2 + ... + x^n + x^(n+1)A = 1/(1-x) -/</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"c\">/-</span><span class=\"cm\"> dA/dx = F = 0 x^(-1) + 1 x^0 + 2 x^1 + 3 x^2 + ... + n x^(n-1) + d[Tail_A x n]/dx -/</span>\n<span class=\"c\">/-</span><span class=\"cm\"> B = F(-1) = 1 + -2 + 3 + -4 + 5 + -6 + ... + (Tail_F (-1) n) -/</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Term_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Term_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">BisConstant</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">justifySf</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">((</span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">   </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">))</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">               </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">even_power_neg_one</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">:</span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">zpow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">zpow_ofNat</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">neg_one_sq</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">SisConstant</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">even_power_neg_one</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">even_power_neg_one</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)]</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">S_base13</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">even_power_neg_one</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sgoal</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">even_power_neg_one</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 483413708,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732083797
    },
    {
        "content": "<p>Claude likes zpow_ofNat. it is dramatically simper. it works.  Claude even suggested that a better tactic that it calls <code>rational_algebra</code>.</p>",
        "id": 483415818,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732085257
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483379713\">said</a>:</p>\n<blockquote>\n<p>This is sorry-free. All stated theorems are validated to be true. There are no red error markers.</p>\n</blockquote>\n<p>It seems that you are still missing the point. There is not a single person who has questioned the correctness of the lean theorems. The comments are all of the form \"you are proving something other than what you want to show\". In particular, the statement of the main theorem you have written in lean looks nothing like <code>-1/12 = 1+2+3+...</code> and this should be a red flag. It means you have to work much harder to \"interpret\" the expression you are actually proving, and the claim I would make is that you are making a mistake in this process. So I suggest you focus your efforts on that: try to break down in little steps why you think that the statement you have written in lean is equivalent to the informal mathematical statement <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>12</mn><mo>=</mo><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3</mn><mo>+</mo><mo>…</mo></mrow><annotation encoding=\"application/x-tex\">-1/12 = 1+2+3+\\dots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1/12</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.123em;\"></span><span class=\"minner\">…</span></span></span></span> so that we can tease this apart.</p>",
        "id": 483447214,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732097271
    },
    {
        "content": "<p>? for all n (number of expansions) of (Sum_S n) + (Tail_S n) = -1/12. I dont understand how that it does not mean this:</p>\n<p>Sgoal says this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">           </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"w\">           </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"w\">           </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">3</span>\n<span class=\"w\">           </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n<span class=\"bp\">...</span>\n</code></pre></div>\n<p>It doesn't say \"infinity\", but no matter how many expansions you choose. <code>+Tail_S n</code> is an explicit replacement for <code>+ ...</code>. Even if you don't like this result, the tail has to be defined as something. And the final number is all 1s in base13.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"w\">    </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"n\">S</span>\n<span class=\"w\">  </span><span class=\"bp\">...</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"mi\">13</span><span class=\"o\">)</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">-</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span>\n</code></pre></div>\n<p>In base 13 there are only 13 digits. Call them 0,1,2,3,4,5,6,7,8,9,a,b,c.  (.....cccc_13) is a representation of </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"mi\">12</span><span class=\"bp\">*</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"bp\">....</span><span class=\"m\">1111</span><span class=\"bp\">_</span><span class=\"mi\">13</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">......</span><span class=\"n\">cccccc</span><span class=\"bp\">+</span><span class=\"mi\">13</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>So, all the complaints that this is impossible neglects that -1/12 has an infinite digit representation. It's just that it's a specific infinite number. It's a thing that if you multiply it times 12, you get an infinite digit representation of -1, which for every number base would be the highest digit plus base times itself:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"n\">V</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">V</span>\n<span class=\"n\">T</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"n\">V</span>\n<span class=\"bp\">...</span>\n<span class=\"n\">U</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">9</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">10</span><span class=\"w\"> </span><span class=\"n\">V</span>\n<span class=\"bp\">...</span>\n<span class=\"mi\">12</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"n\">S</span>\n<span class=\"bp\">...</span>\n<span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">base</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">base</span><span class=\"bp\">*</span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span>\n</code></pre></div>\n<p>In other words, if you add 1 to it, it will ripple-carry to become 0. This is common sense to somebody used to building computers.  The high bit in binary denotes a negative number, the same as \"carry the 1 out to infinity\"; it's a similar behavior. I don't know how to formalize an explanation of this, so that you can see that it's true without even reading it. And that is kind of the point of Lean. If you can get Lean to accept it, then you don't need to spend time checking it.</p>",
        "id": 483546167,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732126861
    },
    {
        "content": "<p>The confusion is that what we normally mean by \"+...\" and what you have is different. When you write -1/12 = 1+2+3+... mathematically would be the statement:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\">  </span><span class=\"n\">limUnder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">atTop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">--this is false</span>\n</code></pre></div>\n<p>but what you are proving is (I expect) essentially</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\">  </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n<span class=\"w\">           </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\">  </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">           </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">           </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"o\">)</span>\n<span class=\"w\">           </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">4</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span>\n</code></pre></div>\n<p>which everyone (including lean) is happy to accept is true for any n, but also doesn't say much since we can change the -1/12 (on both sides) for anything and importantly has nothing to do with the real meaning of the  \"+...\" of the first statement.</p>",
        "id": 483551202,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1732128640
    },
    {
        "content": "<p>If your goal is to remove all the <code>+ ...</code> from the explanation and notation, you might also want to remove it from the <code>(......cccccc_13)</code> as well as the implicit ones in \"infinite digit expansion\" so that we understand better what you mean.</p>",
        "id": 483551220,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1732128651
    },
    {
        "content": "<p>Along the same lines as what <span class=\"user-mention\" data-user-id=\"389019\">@Chris Birkbeck</span> said, look at this different definition of <code>Sum_S</code> and <code>Tail_S</code> I provide in the following. I am able to prove the same goal you do, but it is not showing anything. This is why it would be good to formalize the full claim being made in lean to make sure you do mean what you want to say.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sgoal</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Sum_S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 483551651,
        "sender_full_name": "Eric Paul",
        "timestamp": 1732128828
    },
    {
        "content": "<p>I completely agree with Chris Berbeck's explanation. The problem is that the Lean Proof nails down what the final value is. And for some reason, that final value is -1/12. It uses the fact that the sum of the alternating sequence is 1/4. In other words, a thing that if you multiply it times 4, you get an infinite digit representation of 1.</p>",
        "id": 483551699,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732128843
    },
    {
        "content": "<p>I will just repeat what Mario said with other words, but nobody is disputing the fact that, as defined, <code>Sum_S n + Tail_S n = -1/12</code> holds for all <code>n</code>, or even that <code>Sum_n</code> is the sum of naturals from <code>1</code> to <code>n</code>.</p>\n<p>The point that is up to discussion, and which you still have not tried to address, is the link between <code>Sum_S n</code> and giving a meaning to \"the sum of all naturals\". Nothing in your Lean development even approaches that. Classical mathematics gives an unambiguous answer to this question, in a theory that gives meaning to (some) infinite sums, and in which not all manipulations that are valid for finite sums have a valid translation for infinite sums. </p>\n<p>You don't want to go this way; fine, but then you have to understand that until you give some link between the finite sums that you do manipulate correctly, and whatever meaning you are intending to give to infinite sums, what you are doing is not breaking much ground; most people who know the classical theory of infinite sums will take a quick look at your development, and not find anything in there to shake their beliefs.</p>",
        "id": 483551945,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1732128947
    },
    {
        "content": "<p>Go into the proof and explicitly set it to a value other than -1/12. All of the theorems will then fail. The definition of (Sf n) is a recursive definition involving Sum_S and Tail_B. It forces (Sf n) to take on the value of -1/12 for n. If you only define S=-1/12 alone, then yes, it would work for any other number. But it has to be consistent with other definitions; where B=1/4 due to a much simpler explanation of A=1+x*A, then F=dA/dx, then B=F(-1).</p>",
        "id": 483552358,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732129093
    },
    {
        "content": "<p>You get -1/12, because that complicated definition of (Sf n) is special. All the uses of n cancel, and only a constant of -1/12 remains. I don't know why it had to be a number such that it's all 1s in base13 though; but you can see that it is!</p>",
        "id": 483552571,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732129199
    },
    {
        "content": "<blockquote>\n<p>Go into the proof and explicitly set it to a value other than -1/12. All of the theorems will then fail.</p>\n</blockquote>\n<p>No one is disputing this.</p>\n<blockquote>\n<p>The definition of <code>(Sf n)</code> is a recursive definition involving <code>Sum_S</code> and <code>Tail_B</code>.</p>\n</blockquote>\n<p>That is incorrect. \"Recursive\" means the right-hand side of the definition refers to what is being defined. The right-hand side of <code>Sf</code> does not refer to <code>Sf</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span>\n</code></pre></div>",
        "id": 483552742,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732129250
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/stream/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483551699\">said</a>:</p>\n<blockquote>\n<p>I completely agree with Chris Berbeck's explanation. The problem is that the Lean Proof nails down what the final value is. And for some reason, that final value is -1/12. It uses the fact that the sum of the alternating sequence is 1/4. In other words, a thing that if you multiply it times 4, you get an infinite digit representation of 1.</p>\n</blockquote>\n<p>Sorry I don't understand what the statement \" the lean proof nails down the final value is\" means. What lean proof are you talking about? Or what final value are you talking about? To me the final value would be what the thing on the right hand side of lemma A is.</p>",
        "id": 483553191,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1732129410
    },
    {
        "content": "<blockquote>\n<p><code>12*S = 12*(....1111_13) = (......cccccc+13) = -1</code></p>\n</blockquote>\n<p>It's <em>possible</em> to do reasoning like this, but <em>not</em> with the integers/rationals/reals in base 13. This is a completely different number system.</p>\n<p>In the real numbers, you can have base-whatever expansions where there are infinitely many digits <em>after</em> the decimal point, but there's no such thing as numbers with infinitely many digits <em>before</em> the decimal point (other than repeated 0's forever).</p>\n<p>Yes, you can imagine ...9999999999.0 in base 10 as being -1, but you can't work with it as if it were literally -1, because ...9999999999.0 converges to infinity in the real number system. You would need to work with a different number system with little to no relation to the real number system.</p>",
        "id": 483553462,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732129518
    },
    {
        "content": "<p>That's the sort of recursion you see in code all the time. Mutual recursion.  The trickiest part of it that keeps you from using <code>+...</code> is that you need to keep track of how many times you expanded it. </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>handles the tricky situation where people justify adding </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"w\">  </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\">  </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\">   </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\">  </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>So, that is why I insist on using recursion. Only with recursion will you still have an algebra that you can correctly manipulate.</p>",
        "id": 483553475,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732129524
    },
    {
        "content": "<p>I have never seen recursion in code where the body of the definition(s) doesn't call the function(s) being defined.</p>",
        "id": 483553778,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732129638
    },
    {
        "content": "<p>Neither <code>Sum_S</code> nor <code>Tail_B</code> call <code>Sf</code>, so there is no mutual recursion either.</p>",
        "id": 483553935,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732129687
    },
    {
        "content": "<p>That's literally how compilers are made. BNF is a huge recursion, where larger structures refer to smaller structures. I am taking a CS view on this. And in this view, you need to treat <code>a=b</code> as <code>a</code> can be rewritten as <code>b</code> and <code>b</code> can be rewritten as <code>a</code>. It's clear that a lot of mathematicians have something else in mind. But you can't make it work on a computer if you don't treat it this way.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mf\">0.9</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mf\">0.1</span><span class=\"w\"> </span><span class=\"n\">Y</span>\n<span class=\"o\">(</span><span class=\"mf\">1.0</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mf\">0.1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mf\">0.9</span>\n<span class=\"mf\">0.9</span><span class=\"w\"> </span><span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mf\">0.9</span>\n<span class=\"n\">Y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n\n<span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">Z</span>\n<span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\">  </span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">Z</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">Z</span><span class=\"o\">)</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"n\">Z</span>\n<span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"n\">Z</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_Z</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"n\">Z</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_Z</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_Z</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_Z</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">                       </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_Z</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_Z</span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>Use recursion, and you can take everything super-literally; because you are not using infinite processes where the manipulation can be kind of waffly. But a saying in computer security \"Undefined behavior becomes defined by an implementation\" is so true.</p>",
        "id": 483554892,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732130065
    },
    {
        "content": "<p>may i suggest that this is a difference in view on what <code>a = b</code> means. Take <code>B = 1/4</code> as an example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">B</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"n\">B</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"bp\">-</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"n\">B</span>\n</code></pre></div>\n<p>1/4 can be represented in base (-3) as a string of all 1s. This is the kind of reasoning that leads you to <code>S=-1/12</code>. It's an equation that you can manipulate. It does not mean that if you keep adding the next highest number that you will encounter <code>-1/12</code>. It just means this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span>\n<span class=\"bp\">-</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"mi\">13</span><span class=\"o\">)</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">through</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">complicated</span><span class=\"w\"> </span><span class=\"n\">manipulations</span><span class=\"w\"> </span><span class=\"n\">involving</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">B</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">you</span><span class=\"w\"> </span><span class=\"n\">find</span><span class=\"bp\">...</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 483557363,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732131014
    },
    {
        "content": "<p>I think the difference in view is simply that all these reasonings in these text blocks should be represented directly in Lean somehow — that's the standard this Lean community expects.</p>",
        "id": 483557602,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732131109
    },
    {
        "content": "<p>I am working on it. I got a ton of help from you guys. Claude is helpful. But honestly, it doesn't matter where B came from. I just use it because people doubt the definition in spit of </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Term_B</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\">   </span><span class=\"mi\">1</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Term_B</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\">   </span><span class=\"bp\">-</span><span class=\"mi\">2</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Term_B</span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"mi\">3</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Term_B</span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">4</span>\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">Term_B</span><span class=\"o\">(</span><span class=\"mi\">5</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"mi\">5</span>\n</code></pre></div>\n<p>and similarly for Term_S. From there, you manipulate the definitions to get something that Ramanujan already told us; yet there a chorus of people that don't believe in recursion.</p>",
        "id": 483558133,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732131298
    },
    {
        "content": "<p>Don't get me wrong -- working with formal power series is really cool and you can reason about things in cool ways (combinatorics makes use of them too for counting arguments), but that doesn't mean that you can evaluate formulas for formal power series outside their radii of convergence and expect it to mean anything. (Though sometimes, with <em>very</em> careful reasoning, you <em>can</em> extract some meaning! This happens in combinatorics.)</p>",
        "id": 483558320,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732131387
    },
    {
        "content": "<p>Like the formula 1 + x + x^2 +... = 1/(1-x) is only true if the absolute value of x is less than 1. That's usually covered in a second-semester calculus course I think.</p>",
        "id": 483558593,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732131494
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span> Here's a \"proof\" that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3</mn><mo>+</mo><mo>⋯</mo><mo>=</mo><mo>−</mo><mfrac><mn>1</mn><mn>8</mn></mfrac></mrow><annotation encoding=\"application/x-tex\">1+2+3+\\cdots=-\\frac{1}{8}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.3669em;\"></span><span class=\"minner\">⋯</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1901em;vertical-align:-0.345em;\"></span><span class=\"mord\">−</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8451em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">8</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>: <a href=\"https://www.reddit.com/r/mathmemes/comments/r36cws/as_you_can_clearly_see_the_sum_of_all_natural/\">https://www.reddit.com/r/mathmemes/comments/r36cws/as_you_can_clearly_see_the_sum_of_all_natural/</a></p>\n<p>And I can even give a \"proof\" in lean:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">9</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">8</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sgoal</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 483558654,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1732131518
    },
    {
        "content": "<p>(Thanks <span class=\"user-mention\" data-user-id=\"253861\">@Thomas Browning</span>, I was spending some time going down the route of trying to get other \"obvious\" values for what ...99999 in base 10 would be.)</p>",
        "id": 483558921,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732131621
    },
    {
        "content": "<p>You need a justifySf to prove that: <code>(9*Sum_S n - (Sum_S (3*n + 1)))/8 = Sum_S n + Tail_S n</code></p>",
        "id": 483559874,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732131998
    },
    {
        "content": "<p>S is pinned down by: <code>Sum_S (2*n) - Sum_B (2*n) = 4*Sum_S n</code> as well.</p>\n<p>You get that just from the definition of the Sums, before Taill_S is defined at all. From there, if the sums go on forever, means that the tails have the same relationship </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n\n<span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">goes</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">forever</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">we</span><span class=\"w\"> </span><span class=\"n\">can</span><span class=\"w\"> </span><span class=\"n\">solve</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">implies</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">since</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"w\"> </span><span class=\"n\">constant</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">it</span><span class=\"w\"> </span><span class=\"n\">doesn't</span><span class=\"w\"> </span><span class=\"n\">matter</span><span class=\"w\"> </span><span class=\"n\">what</span><span class=\"w\"> </span><span class=\"n\">their</span><span class=\"w\"> </span><span class=\"n\">values</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">are</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">as</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">cancel</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"bp\">.</span>\n\n<span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"o\">((</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">((</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">))</span>\n<span class=\"bp\">....</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">see</span><span class=\"w\"> </span><span class=\"n\">justifySf</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">solved</span><span class=\"w\"> </span><span class=\"n\">for</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">),</span>\n<span class=\"bp\">.....</span><span class=\"w\"> </span><span class=\"n\">before</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">definition</span><span class=\"w\"> </span><span class=\"n\">other</span><span class=\"w\"> </span><span class=\"n\">than</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">))</span>\n</code></pre></div>",
        "id": 483559998,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732132062
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483559874\">said</a>:</p>\n<blockquote>\n<p>You need a justifySf to prove that: <code>(9*Sum_S n - (Sum_S (3*n + 1)))/8 = Sum_S n + Tail_S n</code></p>\n</blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">9</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">8</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">justifySf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">9</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sgoal</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 483561265,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1732132588
    },
    {
        "content": "<p>The whole reason I introduced B is that before you link it to B, S can be anything at all. B is known to be 1/4. That's why you investigate S-B first.</p>",
        "id": 483561396,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732132647
    },
    {
        "content": "<p>The thing that is most troubling about your proofs <span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span> is that each move you make is changing the <em>statement</em> of the theorem. That's not how proofs are supposed to work. For example, normally it would be... concerning... that both you and <span class=\"user-mention\" data-user-id=\"253861\">@Thomas Browning</span> have proved that a certain sum is equal to two different values. But it's not surprising here because the manipulations are all happening in the statement of the theorem - your<code>Sum_S</code> and <code>Tail_S</code> are not the same as <span class=\"user-mention\" data-user-id=\"253861\">@Thomas Browning</span> 's.</p>",
        "id": 483561715,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732132782
    },
    {
        "content": "<p>You should be able to state the theorem in such a way that it doesn't require proving the theorem first</p>",
        "id": 483561848,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732132813
    },
    {
        "content": "<p>But there is recursion involved. You know that <code>S = Sum_S n + Tail_S n</code>, so you subtract <code>Sum_S n</code> from both sides to get a vacuous definition that needs help from elsewhere to define <code>S</code>. And it is well known that calculating <code>S - B</code> will get you there, because it's <code>S - 1/4 = 4*S</code></p>",
        "id": 483562065,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732132893
    },
    {
        "content": "<p>The point is that before you do any of that, subtracting things from both sides and whatnot, first you have to decide: what does 1+2+3+... <em>mean</em> as an expression</p>",
        "id": 483562201,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732132932
    },
    {
        "content": "<p>you should be able to write down a definition of this expression which doesn't involve explaining how you intend to manipulate that sum</p>",
        "id": 483562247,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732132954
    },
    {
        "content": "<p>That is: what is <code>S</code>? Maybe it's equal to <code>Sum_S n + Tail_S n</code> but that's not the <em>definition</em>, that's a theorem you need to prove about it</p>",
        "id": 483562418,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133025
    },
    {
        "content": "<p>informally, S is <code>1+2+3+...</code></p>",
        "id": 483562436,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133037
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">S</span>\n<span class=\"mi\">4</span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">16</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"o\">)</span><span class=\"n\">S</span>\n</code></pre></div>\n<p>You need a recursion that relates S to itself to solve for S. If you want to plug it in arbitrarily, you need to solve for what that value is.</p>",
        "id": 483562441,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732133040
    },
    {
        "content": "<p>I don't want to solve for S, I want to define S</p>",
        "id": 483562501,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133053
    },
    {
        "content": "<p>What is S supposed to describe?</p>",
        "id": 483562523,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133068
    },
    {
        "content": "<p>Definitions come before proofs</p>",
        "id": 483562545,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133084
    },
    {
        "content": "<p>S is the \"final value\".   <code>Sum_S(n)+Tail_S(n)</code> means that it has the same value no matter what n is. This value is unreachable by iteration, by definition. It's a matter of finding all the constraints that solve for S. If you just make up a value for S, it's going to conflict with others that are already defined, like B.</p>",
        "id": 483562683,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732133153
    },
    {
        "content": "<p>Okay what's the \"final value\" supposed to denote?</p>",
        "id": 483562751,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133168
    },
    {
        "content": "<p>Let's take a simpler example where the algebraic manipulations are actually correct. Let's prove that <code>1+1/2+1/4+1/8+... = 2</code>.</p>\n<p>Here's the informal mathematics proof:</p>\n<ul>\n<li>Let S be the sum <code>1+1/2+1/4+1/8+...</code></li>\n<li>Then</li>\n</ul>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">8</span><span class=\"bp\">+...</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"bp\">+...</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"n\">S</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n</code></pre></div>\n<ul>\n<li>Therefore <code>S = 2</code>.</li>\n</ul>",
        "id": 483562954,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133268
    },
    {
        "content": "<p>(The formal mathematical proof of that of course needs to reason about the partial sums and show they converge too, or at least you need a bunch of theory built up for term-wise manipulations.)</p>",
        "id": 483563053,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732133309
    },
    {
        "content": "<p>In this example, the answer to my question, what is S, is that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo>:</mo><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mo stretchy=\"false\">(</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><msup><mn>2</mn><mi>n</mi></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S:=\\sum_{n=0}^\\infty(1/2^n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1/</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>",
        "id": 483563080,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133323
    },
    {
        "content": "<p>For all n: n<em>(n+1)/s + Tail_S(n). You could just define the end result to be anything. But you need to justify that it's consistent with other known facts. B is just used because it easily gives a relationship to itself. S-B=4</em>S, which literally solves for -1/12.</p>\n<p>When you increment n, all you are doing is moving n from Tail to Sum; to leave the final value unchanged. That doesn't mean you can just go set it to 1/8 though. You need to find places where S is related to itself in a way that tells YOU the value.</p>",
        "id": 483563166,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732133366
    },
    {
        "content": "<p>which is to say, what we are using algebraic manipulations to prove is that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mo stretchy=\"false\">(</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><msup><mn>2</mn><mi>n</mi></msup><mo stretchy=\"false\">)</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\sum_{n=0}^\\infty(1/2^n)=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1/</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span>, where <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span> is an abbreviation for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mo stretchy=\"false\">(</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><msup><mn>2</mn><mi>n</mi></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\sum_{n=0}^\\infty(1/2^n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\">1/</span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>",
        "id": 483563221,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133393
    },
    {
        "content": "<blockquote>\n<p><em>But you need to justify that it's consistent with other known facts</em></p>\n</blockquote>\n<p>This isn't allowed in Lean; you have to justify it as being consistent with facts <em>known to lean</em></p>",
        "id": 483563332,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732133422
    },
    {
        "content": "<p>I think strictly speaking <span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span>, that's allowed in Lean, because Lean has nothing to say about what's not put into Lean.</p>",
        "id": 483563418,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732133469
    },
    {
        "content": "<p>Also it's not really true that you have to justify that definitions are consistent with known facts when defining things in lean</p>",
        "id": 483563460,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133501
    },
    {
        "content": "<p>that's not part of definitional principles</p>",
        "id": 483563477,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133509
    },
    {
        "content": "<p>For instance, it's \"well known\" that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><mo>−</mo><mn>8</mn><msup><mo stretchy=\"false\">)</mo><mfrac><mn>1</mn><mn>3</mn></mfrac></msup><mo>=</mo><mo>−</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">(-8)^\\frac{1}{3} = -2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.204em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">−</span><span class=\"mord\">8</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954em;\"><span style=\"top:-3.363em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mopen nulldelimiter sizing reset-size3 size6\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8443em;\"><span style=\"top:-2.656em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">3</span></span></span></span><span style=\"top:-3.2255em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line mtight\" style=\"border-bottom-width:0.049em;\"></span></span><span style=\"top:-3.384em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.344em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter sizing reset-size3 size6\"></span></span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mord\">2</span></span></span></span>, but in lean it's <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span></p>",
        "id": 483563617,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1732133553
    },
    {
        "content": "<p>The way definitions work is you write down an expression involving previously defined things and give it a name and voila you have a new definition</p>",
        "id": 483563660,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133574
    },
    {
        "content": "<p>But it is very important to make definitions correctly, because they control whether you are proving the right things</p>",
        "id": 483563759,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133619
    },
    {
        "content": "<p>for instance, with my infinite sum example, I could have also defined <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo>:</mo><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">S:=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span> and now the proof that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">S=2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span> becomes a lot easier</p>",
        "id": 483563848,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133647
    },
    {
        "content": "<p>but the proof is no longer a theorem about infinite sums if I do this, it is just a triviality</p>",
        "id": 483563890,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133669
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">V</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">V</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"n\">V</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">V</span>\n<span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">V</span>\n<span class=\"n\">V</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">V</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">V</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"n\">V</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"n\">V</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"w\"> </span><span class=\"n\">V</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"n\">V</span><span class=\"o\">)</span>\n\n<span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">       </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">       </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">       </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"bp\">=</span>\n<span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">16</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">15</span>\n</code></pre></div>\n<p>This proves the point rather well.</p>\n<p>V - (2^(n+1)V) = V(1 - 2^(n+1)) = 2^(n+1) - 1 = Sum_V(n)</p>\n<p>This is an actual application of divergent series! You can use it to compute closed forms on the sums, because of how it is recursively defined.</p>",
        "id": 483564007,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732133720
    },
    {
        "content": "<p>but if I hand you a goal like</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">sum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- fill me in</span>\n</code></pre></div>\n<p>there is no way to cheat by changing definitions, because the input doesn't reference any <code>S</code> in the first place</p>",
        "id": 483564096,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133758
    },
    {
        "content": "<p>you can introduce an <code>S</code> in the proof if you like, but you can't change the theorem statement</p>",
        "id": 483564220,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732133798
    },
    {
        "content": "<p>I just proved <code>S = 0</code>. Here's my text block:</p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>S = 1 + 2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 + ...\n  = (1 + 2 + 3) + (4 + 5 + 6) + (7 + 8 + 9) + ...\n  = 6*1 + 6*2 + 6*3 + ...\n  = 6*S\n\nS - 6*S = 0\n(1 - 6)*S = 0\n=&gt; S = 0\n</code></pre></div>",
        "id": 483564550,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732133942
    },
    {
        "content": "<p>but i used closed forms so you can't just throw parenthesis around things.  <code>n*(n+1)/2</code> in the sum, and <code>S - n*(n+1)/2</code> solves for <code>S</code>, and it just happens to be complicated enough to find <code>S</code> that people will argue over a Lean proof that does it.</p>",
        "id": 483564841,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732134077
    },
    {
        "content": "<p>I'm using closed forms too, but I'm evaluating it at every third n rather than every n. Why should that make a difference?</p>",
        "id": 483565039,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732134155
    },
    {
        "content": "<p>your original definition of S also evaluates the sequence corresponding to B every second number...</p>",
        "id": 483565311,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732134255
    },
    {
        "content": "<p>make that a closed form where each n is a parenthesis.... this is exactly why i want to use recursion. <code>+...</code> is so error-prone.<br>\noh... i got it.  track the expansion rate of terms... it's something like...</p>\n<p>(Sf 6n) = 6(Sf 3) </p>\n<p><code>+...</code> is an undefined bullshit procedure. use recursion.</p>",
        "id": 483565656,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732134382
    },
    {
        "content": "<p>if you expand at 1/3 the rate, it's not the same.</p>",
        "id": 483565771,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732134429
    },
    {
        "content": "<p>so why is it ok to expand at 1/2 the rate?</p>",
        "id": 483565865,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1732134462
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483565656\">said</a>:</p>\n<blockquote>\n<p><code>+...</code> is so error-prone.</p>\n</blockquote>\n<p>On this we definitely agree</p>",
        "id": 483565974,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732134487
    },
    {
        "content": "<p>The point I've been trying to get to here is that the lean translation of <code>1+2+3+...</code> is <code>sum (fun n =&gt; n)</code> (give or take a few details), not the polynomial expressions you have been writing</p>",
        "id": 483566236,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732134596
    },
    {
        "content": "<p>or in informal mathematical language, the equivalent of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><mo>+</mo><mn>2</mn><mo>+</mo><mn>3</mn><mo>+</mo><mo>…</mo></mrow><annotation encoding=\"application/x-tex\">1+2+3+\\dots</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.123em;\"></span><span class=\"minner\">…</span></span></span></span> without dots in it is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\sum_{n=1}^\\infty n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span></p>",
        "id": 483566383,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732134643
    },
    {
        "content": "<p>this should be the starting point, and then you perform algebraic manipulations on this expression in order to show that it is equal to something</p>",
        "id": 483566507,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732134687
    },
    {
        "content": "<p>i don't doubt it at all that if you re-parenthesize, you get a different number. I am trying (Sf (3<em>n)) = 6</em>(Sf n) ... and stuff like that. I am guessing that it ends up working.</p>",
        "id": 483566950,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732134849
    },
    {
        "content": "<p>but sum 1 to n is n*(n+1)/2. i am confused. for finite arithmetic, you don't have any of these bizarre problems. when you use recursion, you don't encounter the algebra problems with infinity either. but you do discover self-relationships that give numbers that say things like \"an infinite number such that if you multiply it times 12, you get -1 represented as an infinite number\"</p>",
        "id": 483567273,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732134982
    },
    {
        "content": "<p>That depends on what you mean by \"is\" :)</p>",
        "id": 483567333,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135009
    },
    {
        "content": "<p>the sum of the numbers from 1 to n <em>is</em> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=1}^ni</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></p>",
        "id": 483567385,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135038
    },
    {
        "content": "<p>i reached this point by thinking of a rewrites to b, and b rewrites to a; as literally as humanly possible.</p>",
        "id": 483567408,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732135046
    },
    {
        "content": "<p>it happens to be equal to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">n(n+1)/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mord\">/2</span></span></span></span> but that's not the definition</p>",
        "id": 483567422,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135053
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483567273\">said</a>:</p>\n<blockquote>\n<p>but sum 1 to n is n*(n+1)/2. i am confused. for finite arithmetic, you don't have any of these bizarre problems. when you use recursion, you don't encounter the algebra problems with infinity either. but you do discover self-relationships that give numbers that say things like \"an infinite number such that if you multiply it times 12, you get -1 represented as an infinite number\"</p>\n</blockquote>\n<p>the problem is that you also discover self-relationships that give numbers that say things like \"an infinite number such that if you multiply it times 8, you get -1 represented as an infinite number\"</p>",
        "id": 483567466,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1732135069
    },
    {
        "content": "<p>The fundamental problem is like what Mario says: we haven't established that there even is such a number. We only established what it could equal, if it existed.</p>",
        "id": 483567641,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732135136
    },
    {
        "content": "<p>S = 1 + 13 S ... it constructs this number though.</p>",
        "id": 483567691,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732135162
    },
    {
        "content": "<p>I haven't even gotten to that point :) I'm still talking about how the statement is not correct because it assumes what it wants to show or variants thereof</p>",
        "id": 483567723,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135175
    },
    {
        "content": "<p>That's not a construction but a <em>characterization</em>. It's something that you established the possibly-existing number should satisfy.</p>",
        "id": 483567767,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732135198
    },
    {
        "content": "<p>It is really critical to understand that when you translate \"the sum of x and y is 5\" to lean you write \"x + y = 5\"  and not \"5 = 5\"</p>",
        "id": 483567831,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135211
    },
    {
        "content": "<p>you should strive to translate each word in the mathematics as directly as possible to lean expressions</p>",
        "id": 483567923,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135244
    },
    {
        "content": "<p>well, i did not plug in S=-1/12. I defined B, then I defined S. I showed that if you calculate S-B, it leads you to solve S for that complicated recursion. And by that point, #eval Sf 2 (or any number) is -1/12.</p>",
        "id": 483567944,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732135254
    },
    {
        "content": "<p>Do you agree with the following <span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span>: if you add two positive numbers then their sum is positive</p>",
        "id": 483567957,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732135261
    },
    {
        "content": "<p>The definition of S does not involve B in any way</p>",
        "id": 483567999,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135277
    },
    {
        "content": "<p>the definition of S is \"the sum of the natural numbers\", it has no B in it</p>",
        "id": 483568028,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135292
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483567999\">said</a>:</p>\n<blockquote>\n<p>The definition of S does not involve B in any way</p>\n</blockquote>\n<p>or well, <em>should</em> not</p>",
        "id": 483568053,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732135306
    },
    {
        "content": "<p>maybe you can introduce a B and prove something about how it relates to S but that comes after the theorem statement is completed</p>",
        "id": 483568128,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135326
    },
    {
        "content": "<p>S=-1/12 does not contradict that though! that's what I am saying:</p>\n<p>S = -1/12 = 13^0 + 13^1 + 13^2 + ... + 13^n + (13^(n+1)S)</p>\n<p>it's 12*S = -1 = (....111111_2)</p>\n<p>It's the highest base2 integer. If you add 1, it ripple carries to 0. exactly like a machine.</p>",
        "id": 483568269,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732135388
    },
    {
        "content": "<p>there is no reason why it should ripple like a machine tho</p>",
        "id": 483568332,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732135425
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483567691\">said</a>:</p>\n<blockquote>\n<p>S = 1 + 13 S ... it constructs this number though.</p>\n</blockquote>\n<p>Well this equation is also satisfied for S being \"infinity\" (in the usual sense as it happens in limits for instance, i.e. infinity + infinity = infinity, 2 * infinity = infinity and so on - here there is no issue with \"indefinite forms\" like 0 * infinity to take care of).</p>",
        "id": 483568338,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1732135429
    },
    {
        "content": "<p>have you ever built an adder out of AND and OR and NOT gates? try it.</p>",
        "id": 483568356,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732135436
    },
    {
        "content": "<p>Yes</p>",
        "id": 483568401,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732135442
    },
    {
        "content": "<p>Fun fact, ripple carry adders have a finite number of gates</p>",
        "id": 483568426,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135462
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483568356\">said</a>:</p>\n<blockquote>\n<p>have you ever built an adder out of AND and OR and NOT gates? try it.</p>\n</blockquote>\n<p>not one that accurately reflects how natural numbers work</p>",
        "id": 483568429,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732135463
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483568426\">said</a>:</p>\n<blockquote>\n<p>Fun fact, ripple carry adders have a finite number of gates</p>\n</blockquote>\n<p>and more importantly, <em>states</em></p>",
        "id": 483568531,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1732135515
    },
    {
        "content": "<p>it's not \"INFINITY\". It's an specific number with an infinite number of digits.</p>\n<p>in base 10:</p>\n<p>....222222_10 != ......1111111_10</p>\n<p>They are specific numbers with their own properties.  9*(.....111111_10) = -1</p>",
        "id": 483568537,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732135518
    },
    {
        "content": "<p>Come on Mario, be patient, we can wait for the ripple carry to get through all the infinite number of gates :-)</p>",
        "id": 483568592,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732135548
    },
    {
        "content": "<p>How do you know that those two are not equal? Or that they are even numbers?</p>",
        "id": 483568594,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135548
    },
    {
        "content": "<p>Is there a difference between 1.0 and 0.99999...?</p>",
        "id": 483568606,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1732135555
    },
    {
        "content": "<p>What do you mean by <code>...</code> in that sentence ?</p>",
        "id": 483568612,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1732135558
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483568356\">said</a>:</p>\n<blockquote>\n<p>have you ever built an adder out of AND and OR and NOT gates? try it.</p>\n</blockquote>\n<p>My daughter built one when she was 8.</p>",
        "id": 483568664,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732135574
    },
    {
        "content": "<p>Just because they are by-digit different in terms of how the decimal expressions are written doesn't mean the closed terms are different. That's my counterexample to your claim that ...1111 and ...2222 are different.</p>",
        "id": 483568781,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1732135634
    },
    {
        "content": "<p>\"10s complement\" representations are only for modulo arithmetic <span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span>, where you take everything modulo 10^n for some n, just like how twos complement is for 2^n</p>",
        "id": 483568825,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732135655
    },
    {
        "content": "<p>2*(.....111111_10) = (.....22222_10), etc.</p>\n<p>1 = (0.11111....) for similar reasons.</p>\n<p>there is ALWAYS an infinite number of digits. all zeros to the left is a finite number. all 9s to the right is an integer. there are carried and uncarried representations that are the same value. this happens so much in cryptography and finite fields, it's not at all surprising that the negative inverse of 12 shows up.</p>",
        "id": 483568855,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732135671
    },
    {
        "content": "<p>Can someone remind me what the point of this thread is? <span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span> posted some Lean code. Lean was happy. So let's move on.</p>",
        "id": 483568867,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732135674
    },
    {
        "content": "<p>Sorry, I got caught up in having fun finding different values for 1 + 2 + 3 + 4 + ...; gotta get back to some Lean metaprogramming...</p>",
        "id": 483568960,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732135702
    },
    {
        "content": "<p>has anyone posted a correct version of the theorem statement here such that one can actually prove it is equal to -1/12?</p>",
        "id": 483569065,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135764
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483567691\">said</a>:</p>\n<blockquote>\n<p>S = 1 + 13 S ... it constructs this number though.</p>\n</blockquote>\n<p>More seriously: this equation <code>S = 1 + 13 S</code> has exactly one solution in the real numbers (-1/12), one solution in <code>Z / 13 Z</code> (1), no solution in <code>Z / 2 Z</code> - it all depends on the <em>nature</em> of that <code>S</code>. Here you are talking about infinite expansions to the left, so we are definitely not talking about the reals. So what is the nature of this <code>S</code>?</p>",
        "id": 483569096,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1732135781
    },
    {
        "content": "<p>The main thing is that you can write something that Lean is totally happy with, and if somebody doesn't believe it before they read it, then they won't believe it after reading it either.</p>",
        "id": 483569204,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732135812
    },
    {
        "content": "<p>well no, that's not how proofs are supposed to work</p>",
        "id": 483569271,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135841
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483569204\">said</a>:</p>\n<blockquote>\n<p>The main thing is that you can write something that Lean is totally happy with, and if somebody doesn't believe it before they read it, then they won't believe it after reading it either.</p>\n</blockquote>\n<p>Everybody here agrees that those of your statements that are actually written in lean are correct. This is kind of besides the point that we are trying to make.</p>",
        "id": 483569357,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1732135885
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span> Nobody is disbelieving your Lean code. That has been pointed out to you before.<br>\nSo let's move on.</p>",
        "id": 483569379,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732135898
    },
    {
        "content": "<p>Anyways, I am trying to figure out what the heck it is that you can do so that Lean is the judge, not a person.</p>",
        "id": 483569387,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732135906
    },
    {
        "content": "<p>The way it works is you write down the statement, pause, confirm that the statement is correct, then prove it</p>",
        "id": 483569472,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135930
    },
    {
        "content": "<p>you have been doing the steps in the opposite order</p>",
        "id": 483569503,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135948
    },
    {
        "content": "<p>That's actually a subtle issue, lean is not the one that is judging <em>definitions</em>, it is only checking <em>proofs</em>.</p>",
        "id": 483569521,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1732135953
    },
    {
        "content": "<p>if you write the statement after the proof you can easily get lean to be a yes-man</p>",
        "id": 483569567,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732135983
    },
    {
        "content": "<p>(Sf n) = Sum_S n + Tail_S n</p>\n<p>is a perfectly fine statement. the theorems picked Sf for us. it chose -1/12 for some reason.</p>",
        "id": 483569572,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732135984
    },
    {
        "content": "<p>That is a perfectly fine statement. Which has nothing to do with infinite sums</p>",
        "id": 483569628,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136007
    },
    {
        "content": "<p>correct. this is about recursively defined sums... that make the infinite pattern.</p>",
        "id": 483569679,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732136038
    },
    {
        "content": "<p>I don't see anything that resembles <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>1</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">\\sum_{n=1}^\\infty n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> in there</p>",
        "id": 483569727,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136043
    },
    {
        "content": "<p>so whatever you prove about that expression has no bearing on the famous theorem about -1/12</p>",
        "id": 483569805,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136087
    },
    {
        "content": "<p>n*(n+1) is literally that. if you don't want to see, then you can't. i don't see how Lean is removing human judgement though.</p>",
        "id": 483569843,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732136103
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483569843\">said</a>:</p>\n<blockquote>\n<p>n*(n+1) is literally that. if you don't want to see, then you can't. i don't see how Lean is removing human judgement though.</p>\n</blockquote>\n<p>It is not!</p>",
        "id": 483569876,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1732136123
    },
    {
        "content": "<p>No, n*(n+1) is a product of two numbers, it is neither a finite sum nor an infinite sum</p>",
        "id": 483569879,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136125
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span> If want to see what you proved, just put your cursor on the line after <code>unfold</code>. Lean tells you that what you proved is the purely algebraic statement <code>↑n * (↑n + 1) / 2 + ((4 * (↑n * (↑n + 1) / 2) - (↑(2 * n) * (↑(2 * n) + 1) / 2 + (2 * ↑(2 * n) + 1) * (-1) ^ (2 * n) / 4)) / 3 - ↑n * (↑n + 1) / 2) = -1 / 12</code></p>",
        "id": 483570012,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1732136170
    },
    {
        "content": "<p>You proved that in Lean, and no-one disputes that</p>",
        "id": 483570041,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1732136182
    },
    {
        "content": "<p>note that Sum_S(n) := n*(n+1)/2 is the finite part. The tail deals with everything not expanded. So it's not surprising that Tail_S(n) has weirder properties.</p>",
        "id": 483570048,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732136187
    },
    {
        "content": "<p>But you aren't expanding anything</p>",
        "id": 483570094,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136210
    },
    {
        "content": "<p>The issue is that what you proved makes no mention of <code>1+2+3+...</code></p>",
        "id": 483570101,
        "sender_full_name": "Thomas Browning",
        "timestamp": 1732136213
    },
    {
        "content": "<p>you have just made up two expressions which have nothing a priori to do with a certain infinite sum</p>",
        "id": 483570148,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136230
    },
    {
        "content": "<p>It's not so hard to fix the definition of Sum_S if you want it to be the relevant finite sum, just write </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span>\n</code></pre></div>\n<p>instead of</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n</code></pre></div>",
        "id": 483570455,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136363
    },
    {
        "content": "<p>the former is a finite sum, the latter is a polynomial expression</p>",
        "id": 483570514,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136389
    },
    {
        "content": "<p>lean has notation for sums and you aren't using it</p>",
        "id": 483570668,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136435
    },
    {
        "content": "<p>and this is the cause of a lot of correct proofs about incorrect statements</p>",
        "id": 483570732,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136460
    },
    {
        "content": "<p>Here's a theorem statement for the theorem you are trying to prove:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">sum_the_naturals</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span><span class=\"w\"> </span><span class=\"c1\">-- fill this in!</span>\n</code></pre></div>\n<p>I hope you can agree that this statement says that the sum of the natural numbers is -1/12. (There are subtleties here which I will leave you to discover, if you get that far.) Can you prove this theorem without changing the statement of the theorem? If so, then I will be convinced that <code>-1/12=1+2+3+...</code>.</p>",
        "id": 483571524,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136781
    },
    {
        "content": "<p>if you want to say that the sum can be broken into a finite part and a tail part, then you should <em>prove</em> it, in lean. That's what it's there for</p>",
        "id": 483571668,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732136860
    },
    {
        "content": "<p>put it this way:  the sum of all integers 1+2+3+... going to infinity is not S. It's (S - Tail_S(n))=Sum_S(n). Because S=Sum_S(n)+Tail_S(n). Because Sum_S(n) is a function of n, it \"goes to infinity\" and never takes on a value as n \"goes to infinity\". </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">!=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"mi\">2</span><span class=\"bp\">+</span><span class=\"mi\">3</span><span class=\"bp\">+...</span>\n</code></pre></div>\n<p>because </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>it happens to be that... S = -1/12.  </p>\n<p>another sequence little-s s=-1/12</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"n\">s</span>\n<span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_s</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_s</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"bp\">+</span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"bp\">+</span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span>\n\n<span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"n\">n</span>\n<span class=\"bp\">==</span>\n<span class=\"n\">s</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span>\n<span class=\"bp\">=</span>\n<span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"o\">)(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span>\n<span class=\"bp\">=</span>\n<span class=\"o\">(</span><span class=\"mi\">13</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">12</span>\n</code></pre></div>\n<p>as far as I know, s=S is really hard to relate to each other other than having the same value. But you could think of them as different parenthezations of 1+1+1+1+...  And we have already seen that the parenthesis change the value if it is not finite.</p>\n<p>I don't get how $\\sum_i^{1 \\dots n}n = n*(n+1)/2$ is irrelevant here. If <code>a=b</code> means \"a can substitute over b, and b can substitute over a\", then they should be equivalent for finite arithmetic.</p>",
        "id": 483572167,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732137034
    },
    {
        "content": "<p>I think you should refrain from writing <code>...</code> unless it is in a compiling Lean block.</p>",
        "id": 483572268,
        "sender_full_name": "Johan Commelin",
        "timestamp": 1732137090
    },
    {
        "content": "<p>yes. i totally do not trust my ability (or anyone else's) ability to reason safely with <code>+...</code>! That's why I use recursion. That's also the only way I know how to write code that deals with it.</p>",
        "id": 483572441,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732137156
    },
    {
        "content": "<p>Around here the way we handle <code>+...</code> is not recursion, it is using sum expressions containing <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>∑</mo></mrow><annotation encoding=\"application/x-tex\">\\sum</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span></span></span></span></p>",
        "id": 483572536,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137204
    },
    {
        "content": "<p>recursive formulas and the like are theorems one proves about this object, not assumed as basic</p>",
        "id": 483572591,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137238
    },
    {
        "content": "<p>this is really important when it comes to infinite sums, because not all the \"obvious things\" about infinite sums are provable</p>",
        "id": 483572707,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137290
    },
    {
        "content": "<p>You can calculate in O(1) time with n*(n+1)/2, and O(n) time with summation. Summation is an awful awful idea when you have an alternative to use a closed sum. So, they are not equal in that way at least.</p>",
        "id": 483572731,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732137302
    },
    {
        "content": "<p>luckily this is mathematics, we don't have to care about the runtime</p>",
        "id": 483572796,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137335
    },
    {
        "content": "<p>hahahaha... could not be more wrong. every major advance in science seems to come from taking an O(n^2) idea and making it run in O(n lg n). FFT. ... neural networks. We would still be living in the 1950s without it.</p>",
        "id": 483572919,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732137394
    },
    {
        "content": "<p>Do you agree that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></msubsup><mo>=</mo><mi>n</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=0}^n=n(n+1)/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mord\">/2</span></span></span></span> is not true <em>by definition</em>?</p>",
        "id": 483572931,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137401
    },
    {
        "content": "<p>O(2^n) is not a solution.</p>",
        "id": 483572938,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732137407
    },
    {
        "content": "<p>It is true, but there is some work to be done here</p>",
        "id": 483572961,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137416
    },
    {
        "content": "<p>if they are not the same, then what does '=' mean?</p>",
        "id": 483572977,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732137425
    },
    {
        "content": "<p>it's not just obviously true by the nature of the objects involved</p>",
        "id": 483572987,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137429
    },
    {
        "content": "<p>= means provably having the same value</p>",
        "id": 483573013,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137440
    },
    {
        "content": "<p>Lean actually makes a clear distinction between \"provably equal\" and \"equal by definition\"</p>",
        "id": 483573059,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137462
    },
    {
        "content": "<p>you will see these referred to as \"propositional equality\" and \"definitional equality\" respectively</p>",
        "id": 483573176,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137501
    },
    {
        "content": "<p>Anyways, I am going to keep learning Lean. It's good to have a nailed down \"instruction set\". It blows my mind that in 2024, we are only barely getting away from believing people that work on paper.</p>",
        "id": 483573216,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732137522
    },
    {
        "content": "<p>I am claiming that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></msubsup><mi>i</mi><mo>=</mo><mi>n</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=0}^ni=n(n+1)/2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mord\">/2</span></span></span></span> is not a definitional equality, which you can test in lean by observing that <code>rfl</code> is not a proof of it</p>",
        "id": 483573265,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137547
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">≤</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- fail</span>\n</code></pre></div>",
        "id": 483573336,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137585
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Nat</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- ok, because this is true *by definition of plus*</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">rfl</span><span class=\"w\"> </span><span class=\"c1\">-- fail, because this is not true *by definition*</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ_add</span><span class=\"w\"> </span><span class=\"bp\">..</span><span class=\"w\"> </span><span class=\"c1\">-- it is true though, so there is a proof</span>\n</code></pre></div>",
        "id": 483573583,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732137704
    },
    {
        "content": "<p>By the way, if you want to see a place where that instruction set is written down <span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span>, Mario's thesis <a href=\"https://github.com/digama0/lean-type-theory/releases/tag/v1.0\">#leantt</a> is one of the main references.</p>",
        "id": 483574100,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1732137914
    },
    {
        "content": "<p>Instead of re-posting updates, I am maintaining the latest Lean-cleared copy as a github gist. I credit Claude for checking it, and getting fixes to deal with integer powers of -1, etc.</p>\n<p><a href=\"https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449\">https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449</a></p>",
        "id": 483611935,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732160620
    },
    {
        "content": "<p>I asked Claude to write a tactic called <code>rational_algebra</code> that handles the pattern of \"unfold all, handle -1 and 1 powers, simp, ring_nf\" so that in most practical cases, you can just do \" := by rational_algebra\", and it gave me something. That would be fantastic for doing practical things; especially if it could include a simple implicit diff operator.</p>",
        "id": 483618844,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732165889
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483572731\">said</a>:</p>\n<blockquote>\n<p>You can calculate in O(1) time with n*(n+1)/2, and O(n) time with summation. Summation is an awful awful idea when you have an alternative to use a closed sum. So, they are not equal in that way at least.</p>\n</blockquote>\n<p>FYI multiplication between arbitrarily sized natural numbers is not O(1). This is kinda offtopic though.</p>",
        "id": 483663025,
        "sender_full_name": "Giacomo Stevanato",
        "timestamp": 1732185518
    },
    {
        "content": "<p>wow... Lean is beautiful.</p>\n<p><a href=\"/user_uploads/3121/qruED74qeim3PK8r1SHbAKbw/Screenshot-from-2024-11-22-01-58-22.png\">Screenshot from 2024-11-22 01-58-22.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/qruED74qeim3PK8r1SHbAKbw/Screenshot-from-2024-11-22-01-58-22.png\" title=\"Screenshot from 2024-11-22 01-58-22.png\"><img data-original-dimensions=\"1240x867\" src=\"/user_uploads/thumbnail/3121/qruED74qeim3PK8r1SHbAKbw/Screenshot-from-2024-11-22-01-58-22.png/840x560.webp\"></a></div><p><a href=\"https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449\">https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449</a></p>",
        "id": 483848243,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732258928
    },
    {
        "content": "<p>I added a proof that uses a recursively defined <code>1+2+3+...+n = n*(n+1)</code> theorem, and added in examples that show the \"1 + 2 + 3 + ...\", and \"1 + (-2) + 3 + (-4) + 5 + (-6) + ...\" and the difference between them \"0 + 4 + 0 + 8 + 0 + 12 + ...\" which creates the difference in expansion rates that you lose when you write it with \"+ ...\".  That is why <code>Sum_S (2*n) - Sum_B (2*n) = 4*(Sum_S n)</code> nails down exactly what <code>(Sf n)</code> must be, so that <code>Sf n = Sum_S n + Tail_S n</code> does not let you set <code>Sf n</code> to whatever you want. The link in the above post is updated as I add more theorems, and explanations as to how it relates to <code>-1/12 = 13^0 + 13^1 + 13^2 + ... = 1 + 13 S</code>.</p>",
        "id": 484026655,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732332258
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/483574100\">schrieb</a>:</p>\n<blockquote>\n<p>By the way, if you want to see a place where that instruction set is written down <span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span>, Mario's thesis <a href=\"https://github.com/digama0/lean-type-theory/releases/tag/v1.0\">#leantt</a> is one of the main references.</p>\n</blockquote>\n<p>I will read this paper. Thank you for recommending it!</p>\n<p>Nonetheless, this example made me very curious. For now, I've been assuming that when a theorem has <em>no goals left</em>, then it's <em>correct</em>. If that's still true, what's the relationship between this sum not being a definitional equality (which can be by tested using <code>rfl</code>), and the no-goals-left <code>tactic state</code>?</p>",
        "id": 484052733,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732357647
    },
    {
        "content": "<p>Definitional equalities are those where one side is defined to be the other side (sometimes this is actually several steps of definitions, combined with notations, so it's not 100% obvious; see for instance Kevin Buzzard's course \"Formalising mathematics\" for examples, esp. in the \"Sets\" chapter).</p>\n<p>Some other equalities are actually theorems. If you take addition on the naturals, it's not <em>defined</em> as an associative operation (I don't believe you could define it as associative, though I might be wrong on this; but the actual definition in Lean does not do this), but you end up proving a theorem that says it turns out to be associative.</p>",
        "id": 484058263,
        "sender_full_name": "Philippe Duchon",
        "timestamp": 1732362551
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"726077\">Philippe Duchon</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/484058263\">schrieb</a>:</p>\n<blockquote>\n<p>Definitional equalities are those where one side is defined to be the other side (sometimes this is actually several steps of definitions, combined with notations, so it's not 100% obvious; see for instance Kevin Buzzard's course \"Formalising mathematics\" for examples, esp. in the \"Sets\" chapter).</p>\n<p>Some other equalities are actually theorems. If you take addition on the naturals, it's not <em>defined</em> as an associative operation (I don't believe you could define it as associative, though I might be wrong on this; but the actual definition in Lean does not do this), but you end up proving a theorem that says it turns out to be associative.</p>\n</blockquote>\n<p>So, soundness gives us <code>no goals</code>  <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext></mrow><annotation encoding=\"application/x-tex\">\\implies</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.549em;vertical-align:-0.024em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⟹</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span></span></span>  <code>correct proof</code> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext></mrow><annotation encoding=\"application/x-tex\">\\implies</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.549em;vertical-align:-0.024em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⟹</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span></span></span> both definitional and theorem-proven equalities are applied correctly.<br>\nDefinitionally true (d-true) gives us <code>d-true</code> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>  </mtext><mo>⟹</mo><mtext>  </mtext></mrow><annotation encoding=\"application/x-tex\">\\implies</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.549em;vertical-align:-0.024em;\"></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">⟹</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span></span></span>  <code>auto-resolvable</code>.</p>\n<p>Can you please explain what I am still missing?</p>",
        "id": 484061110,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732365086
    },
    {
        "content": "<p>that's more or less true, although it's not simply about being \"auto-resolvable\", because tactics can be smart and even some things which are not true by definition can be solved automatically</p>",
        "id": 484067422,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732370553
    },
    {
        "content": "<p>definitional equality is a very strict notion of equality which allows you to unfold definitions and not much else</p>",
        "id": 484067467,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732370607
    },
    {
        "content": "<p>in particular, you can't do inductive proofs to show something is a definitional equality</p>",
        "id": 484067495,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732370636
    },
    {
        "content": "<p>so while <code>x + y = y + x</code> is provable, it's not possible to prove this by simply unfolding the definition of plus until both sides look identical</p>",
        "id": 484067582,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1732370689
    },
    {
        "content": "<p><a href=\"https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449\">https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449</a></p>\n<p>deriv seems like there are difficulties in using it; it does not seem to be a straight-forward algebraic translation? I want to use it to connect the definition of A to F here.  I thought that the derivative operator was a mostly straight-forward recursion down the operators:</p>\n<p>d[a+b] = d[a]+d[b].<br>\nd[a b] = d[a] b + a d[b].<br>\nd[a^b] = b a^(b-1) d[a] + log_e[a] a^b d[b].<br>\nd[log_a[b]] = (-log_e[b] d[a])/(a log_e[a]^2) + (d[b])/(b log_e[a]). </p>\n<p>F = dA/dx = d[1/(1-x)]/dx.</p>\n<p>It seemed such a pain that I just left it at defining F, and assuming that proving that it's dA/dx was not important to the proof. But it's useful, because on A, I differentiated the whole thing... including the Tail_A, which is normally written as \"+ ...\", something that I am objecting to in this proof. Because B=F(-1), it tells you where the definition of Sum_B and Tail_B came from; they were not made-up. And the definition of B is what forces S to be -1/12 later.</p>\n<p><a href=\"https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449\">https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449</a></p>",
        "id": 484112406,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732413244
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 484135132,
        "sender_full_name": "Etienne Marion",
        "timestamp": 1732438298
    },
    {
        "content": "<p>The way that <code>deriv</code> is defined in Mathlib, i.e. <code>deriv f x</code> is defined to be <code>0</code> (a junk value) if <code>f</code> is not differentiable at <code>x</code>, the relations like <code>deriv (f + g) = deriv f + deriv g</code> are not true in general. They do hold wherever both <code>f</code> and <code>g</code> are differentiable of course, see <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=deriv_add#doc\">docs#deriv_add</a> and the like. Same for product, composition, and so on.</p>\n<p>One could define <code>deriv f x</code> to be something like NaN where <code>f</code> is not differentiable but it would change the signature of <code>deriv</code> and would be generally very painful to use. Moreover, it is possible that <code>f + g</code> is differentiable where neither <code>f</code> not <code>g</code> is so it would not help for having <code>deriv (f + g) = deriv f + deriv g</code>.</p>",
        "id": 484165947,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1732468178
    },
    {
        "content": "<p>Closer to what you would need: it is not true in general that sum and derivative commute, even when all the functions involved are <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>C</mi><mn>1</mn></msup></mrow><annotation encoding=\"application/x-tex\">C^1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span>: it is not difficult to construct a sequence <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>f</mi><mi>n</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(f_n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>C</mi><mn>1</mn></msup></mrow><annotation encoding=\"application/x-tex\">C^1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span></span></span></span></span></span></span></span> functions, each equal to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> on a neighborhood <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>U</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">U_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> so having derivative <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> at <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> , in such a way that the series <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>∑</mo><msub><mi>f</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\sum f_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> converges uniformly to the identity function (with derivative <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> at <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>).</p>",
        "id": 484166254,
        "sender_full_name": "Vincent Beffara",
        "timestamp": 1732468471
    },
    {
        "content": "<p>how can i show that these are related by a deriv?</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"c\">/-</span><span class=\"cm\"> from A=1-x*A -/</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"c\">/-</span><span class=\"cm\"> F = dA/dX -/</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_F</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">((</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 485183496,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732932668
    },
    {
        "content": "<p>and this difference is infurating. powers of -1 and 1 again.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sincreases</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Term_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Term_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Term_S</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Balternates</span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Term_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Term_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 485190068,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1732938788
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 488973332,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734163914
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span> what is the relationship between this and the discussion topic lean.nvim?</p>",
        "id": 488974576,
        "sender_full_name": "Patrick Massot",
        "timestamp": 1734165167
    },
    {
        "content": "<p>2 messages were moved here from <a class=\"stream-topic\" data-stream-id=\"113488\" href=\"/#narrow/channel/113488-general/topic/lean.2Envim\">#general &gt; lean.nvim</a> by <span class=\"user-mention silent\" data-user-id=\"112680\">Johan Commelin</span>.</p>",
        "id": 488982071,
        "sender_full_name": "Notification Bot",
        "timestamp": 1734172215
    },
    {
        "content": "<p>i had accidentally posted this update into the wrong room. this is a major simplification that does not get distracted by powers of -1, because it uses Nat rather than Int I think. Notice that instead of coming out and calling it \"-1/12\" explicitly, it instead says that this full sequence is such that if you multiply times 12 and add 1, then you get 0. This works, because 12*S is an infinite digit representation of -1.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib.Tactic</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">        </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Term_A</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\">            </span><span class=\"c1\">-- d[Af x]/dx</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"c1\">-- d[Sum_A x n]/dx</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_F</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"c1\">-- d[Tail_A x n]/dx</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Term_F</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Term_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Term_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Ainf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">Af</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Finf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">Tail_F</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">Ff</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Binf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Ff</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sinf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">AisConst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">Af</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">FisConst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">Tail_F</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">BisConst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">SisConst</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Arecursion</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"o\">):</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Af</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Spows13</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">whySf</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"o\">(</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"o\">(</span>\n<span class=\"w\">    </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">∧</span>\n<span class=\"w\">    </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span>\n<span class=\"w\">  </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">S1vsS2</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">SnegOneTwelfth</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring_nf</span>\n</code></pre></div>",
        "id": 489019265,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734203801
    },
    {
        "content": "<p>your theorem <code>whySf</code> doesn't need any of its assumptions:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">whySf</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">  </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">Ff</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 489053205,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1734238276
    },
    {
        "content": "<p>for sure i could just do that. but there's a huge subtlety to capture. I suspect that I could just as well use \\and for everything as well. What I am trying to do with \\r is a construct like:  ?+X, or ?*Y, etc for a well-defined non-equal sequence. My Lean chops are still kind of weak. I still can't figure out how to just assign F as the derivative of A, which would help to explain why B was chosen.</p>\n<p>if you simply calculate subtracting S-B, you get this, corresponding to \"0+4+0+8+0+12+0+...\". And it's important to note that because S is constant that (Sf n)==(Sf 2n), that you must be more careful when you can immediately calculate this....</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>2n vs n is important for the individual tails; though it doesn't matter for constants Sf and Bf.  What is interesting is that at first, it looks like S could be any value you like.  But then when B is introduced, it forces a particular value upon S.  And from there, the value of S is picked by the relationship that lets you solve for S, given that S=SumS n + TailS n:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\">  </span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>This is what finite recursion gets right that all the \"+...\" proofs on the internet get wrong. The expansion rate is 1/2 because of the sum being alternating with 0 and 4S. But once the sum and tail are shown to have this pattern, it's unavoidable to calculate S-B=4S , where the number of expansions, n, cancel out.</p>",
        "id": 489054261,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734239195
    },
    {
        "content": "<blockquote>\n<p>for sure i could just do that. but there's a huge subtlety to capture.</p>\n</blockquote>\n<p>If you have a theorem with unnecessary assumptions, those assumptions have no relation to the information content of the theorem. They add no value and there's no reason to have them there.</p>",
        "id": 489054581,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1734239634
    },
    {
        "content": "<p>I am still confused as to why even with an accepted Lean statement of:</p>\n<p>Sf n = Sum_S n + Tail_S n<br>\nSum_S n = n*(n+1)/2</p>\n<p>there are still major objections that the result can't be correct. the S=1+13 S  relationship is necessary to conceptually explain how S is a finite number  with an infinite-digit representation (all 1s in base13), which resolves the \"paradox\" causing people to dismiss it without even reading it.</p>\n<p>This is the larger context that this is in. The last comment in the gist is the cleaned up version. But there is a much more verbose version, and a LaTeX version as well. I don't think this proof has the slightest thing to do with infinity. It's more like... a self-similar pattern in the integers. \"-1/12\" is more like in the sense seen in a finite field... where it's an infinite digit thing such that if you multiply it times 12 and add 1, you get 0. And this is a totally routine idea in finite fields. My math background is mostly in practical cryptography.</p>\n<p><a href=\"https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449\">https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449</a></p>",
        "id": 489054984,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734240068
    },
    {
        "content": "<blockquote>\n<p>there are still major objections that the result can't be correct</p>\n</blockquote>\n<p>For the 5th time, the objection is <em>NOT</em> that the result is not correct, it is that it proves something unrelated to the claim</p>",
        "id": 489055051,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240133
    },
    {
        "content": "<p>What you are doing is analogous to</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"sd\">/-- Riemann Hypothesis is true, plz give $1000000 -/</span>\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">riemann_hypothesis</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">rfl</span>\n</code></pre></div>\n<p>but more obscured</p>",
        "id": 489055070,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240173
    },
    {
        "content": "<p>the theorem you proved is true, but it's not the theorem you want to prove</p>",
        "id": 489055084,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240189
    },
    {
        "content": "<p>If Sum_S n = 1+2+3+...+n, and you can make n as large as you like; I still can't fathom how it's not related. I am a computer programmer. If I see an infinite sum, my first instinct is to turn it into recursion.</p>\n<p>T = (1/2) + (1/2)T<br>\n(1 - 1/2)T = 1/2<br>\nT = 1</p>\n<p>... from the point of view of exact computation, infinite sums seem to actually convey less than recursion. </p>\n<p>1 + 2 + 3 + ... </p>\n<p>where the dots are an undefined procedure say less than<br>\nS = 1 + 2 + 3 + ... + n + Tail_S(n)</p>\n<p>where everything has a definition.</p>",
        "id": 489055255,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734240376
    },
    {
        "content": "<p>The dots are not an undefined procedure</p>",
        "id": 489055274,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240406
    },
    {
        "content": "<p>they are defined to mean the limit of the finite sums</p>",
        "id": 489055279,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240415
    },
    {
        "content": "<p>and your sequence has no limit</p>",
        "id": 489055290,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240423
    },
    {
        "content": "<p>because <code>Tail_S n</code> does not approach 0</p>",
        "id": 489055306,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240434
    },
    {
        "content": "<p>What you are doing is proving relations about <em>finite</em> sums, without saying anything about the <em>infinite</em> sum which is actually the one claimed to be -1/12 (or not)</p>",
        "id": 489055395,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240522
    },
    {
        "content": "<p>That's because it's just way more explicit. S is not the sum. S-Tail_S n = Sum_S n .... that's the entire point of having to use recursion for this:</p>\n<p>lim n-&gt; inf [ S - Tail_S n ] = Sum_S n</p>\n<p>In cases where it converges, you can conflats S with Sum_S n. But when Tail_S n does not go to 0 for large n, you can't conflate them. That's the whole point of getting rid of \"+ ...\", as it's unsound and undefined.</p>",
        "id": 489055412,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734240547
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/489055412\">said</a>:</p>\n<blockquote>\n<p>lim n-&gt; inf [ S - Tail_S n ] = Sum_S n</p>\n</blockquote>\n<p>is not well scoped, <code>n</code> is bound on the left side and free on the right</p>",
        "id": 489055443,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240593
    },
    {
        "content": "<p>err... lim n -&gt; inf [   S - Tail_S n = Sum_S n ]   .... yeah, n for both sides of a=b.</p>",
        "id": 489055515,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734240629
    },
    {
        "content": "<p>that's the thing that goes to infinity. S is still -1/12.</p>",
        "id": 489055531,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734240648
    },
    {
        "content": "<p>But in this case there is no relation between <code>S</code> and <code>Sum_S</code></p>",
        "id": 489055579,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240705
    },
    {
        "content": "<p>FYI if you're trying to prove things about Ramanujan summation in Lean, there's a way to do that, but it's not what you're doing</p>",
        "id": 489055632,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1734240727
    },
    {
        "content": "<p>you've just invented a function <code>Tail_S</code> which describes the difference between them, <code>S</code> and <code>Sum_S</code> could be anything</p>",
        "id": 489055633,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240728
    },
    {
        "content": "<p>in other words, Tail_S n written as \"...\"</p>\n<p>S = Sum_S n + Tail_S n<br>\nB = Sum_B n + Tail_B n</p>\n<p>lim n -&gt; inf [ S - \"...\" = Sum_S n]</p>\n<p>Tail is a name for the \"...\".  You need a name for multiple reasons. One is that </p>\n<p>A = Sum_A x n + Tail_A x n <br>\nF = diff[A]</p>",
        "id": 489055678,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734240800
    },
    {
        "content": "<p>What is the <em>definition</em> of S?</p>",
        "id": 489055748,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240860
    },
    {
        "content": "<p>And don't say <code>Sum_S n + Tail_S n</code></p>",
        "id": 489055756,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240871
    },
    {
        "content": "<p>because that depends on <code>n</code> and <code>S</code> doesn't</p>",
        "id": 489055763,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240882
    },
    {
        "content": "<p>aka it's a scope error</p>",
        "id": 489055787,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734240914
    },
    {
        "content": "<p>in this case, because there's recursion involved, </p>\n<p>Sf n = (4*(SumS n) - (SumS 2n + TailB 2n))/3</p>\n<p>and I use whySf to justify that... it' comes from finding</p>\n<p>SumS 2n - SumB 2n = 4SumS n<br>\nand using that to solve the tails to find Sf.</p>",
        "id": 489055809,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734240947
    },
    {
        "content": "<p>in all these sequences, which may or may not converge.... <br>\nX = SumX n + TailX n</p>\n<p>X is the \"final value\". SumX is the finite number of terms expanded out, and TailX is \"the rest\".</p>",
        "id": 489055898,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241025
    },
    {
        "content": "<p>what does \"final value\" mean, as a concrete definition?</p>",
        "id": 489055911,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241044
    },
    {
        "content": "<p>what is the thing you are trying to compute?</p>",
        "id": 489055920,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241063
    },
    {
        "content": "<p>until you have a definition for S this whole derivation is not doing anything</p>",
        "id": 489055992,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241089
    },
    {
        "content": "<p>V = 1 + 2V<br>\n(1 - 2)V = 1<br>\n-V = 1<br>\nV = -1<br>\n  = 1 + 2(1 + 2V)<br>\n  = 1 + 2 + 4V<br>\n  = 1 + 2 + 4 + ... + 2^n + 2^(n+1)V</p>\n<p>etc. there's dozens of things that are easily solved this way.</p>",
        "id": 489055996,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241103
    },
    {
        "content": "<p>and many of them are wrong</p>",
        "id": 489056018,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241130
    },
    {
        "content": "<p>this kind of manipulation of sums without paying attention to convergence is a notorious source of false proofs</p>",
        "id": 489056039,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241165
    },
    {
        "content": "<p>the point where lean would usually catch you is when you try to manipulate sum expressions, but you never wrote one down</p>",
        "id": 489056046,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241188
    },
    {
        "content": "<p>not sure what we mean by wrong, when the algebra behaves like this. if you take \"a=b\" seriously, to mean that a can be rewritten as b, and b can be rewritten as a; then you end up with this.  So, when exactly can you override the judgement of the algebra on auto-pilot?</p>",
        "id": 489056053,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241199
    },
    {
        "content": "<p>When such a proof is false, the mistake is usually on the first line, when we assumed <code>V</code> existed</p>",
        "id": 489056120,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241246
    },
    {
        "content": "<p>having a definition for V keeps us honest here</p>",
        "id": 489056133,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241260
    },
    {
        "content": "<p>it does mean that you must be careful with interpreting it!</p>\n<p>S2 = 1 + 13 S2<br>\n     = 13^0 + 13^1 + 13^2 + ... + 13^n + 13^(n+1) S2<br>\nS2 ( 1 - 13^(n+1)) = 13^0 + 13^1 + 13^2 + ... + 13^n<br>\n(-1/12)(1 - 13^(n+1)) =<br>\n(13^(n+1) - 1)/12 = 13^0 + 13^1 + 13^2 + .... + 13^n</p>\n<p>S2 = 1 + 13 S2<br>\n(1 - 13) S2 = 1<br>\n-12 S2 = 1<br>\nS2 = -1/12</p>",
        "id": 489056221,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241352
    },
    {
        "content": "<p>actually your example with V is indeed one of those wrong proofs, if you think it is a proof that 1 + 2 + 4 + ... = -1</p>",
        "id": 489056236,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241380
    },
    {
        "content": "<p>(-1) = 1 + 2(-1)<br>\n       = 1 + 2 + 4(-1)<br>\n      = 1 + 2 + 4 + 8(-1)<br>\n     = 1 + 2 + 4 + 8 + 16(-1)</p>\n<p>it's just a matter of taking a=b literally.</p>",
        "id": 489056262,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241421
    },
    {
        "content": "<p>All of those steps are true. They also do not tell you that the infinite sum adds to -1</p>",
        "id": 489056312,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241448
    },
    {
        "content": "<p>because at no point is an infinite sum on the left or right hand side of the equation</p>",
        "id": 489056326,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241467
    },
    {
        "content": "<p>you can reprepresent a finite number with an infinite number of digits though.</p>\n<p>V = 1 + 2 V</p>\n<p>means.... in base 2, all 1 digits.</p>\n<p>(....111111) + 1 = 0</p>\n<p>in other words, it's \"the highest\" integer, such that if you add 1, you get a ripple carry. the number system acts like computer registers, because they are real physical machines.</p>",
        "id": 489056372,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241519
    },
    {
        "content": "<p>No, they don't. What you are describing is the behavior of the 2-adic numbers, but the real numbers have a different convergence structure and <code>....111111</code> is not a number</p>",
        "id": 489056438,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241570
    },
    {
        "content": "<p>it is in fact possible to prove that this sequence does not converge in lean</p>",
        "id": 489056464,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241611
    },
    {
        "content": "<p>of course, you need to be careful when you interpret it!  X +1 = 0 leads you to call X \"-1\". But there are infinite-digit representations of -1.</p>\n<p>...2222   != ...1111</p>\n<p>ie... two different infinite digit values. not equal.</p>\n<p>F = 2 + 10 F    .... all 2s base10<br>\nG = 1 + 10 F    .... all 1s base10</p>\n<p>their ordering may surprise you</p>",
        "id": 489056478,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241629
    },
    {
        "content": "<p>No, these are false assertions</p>",
        "id": 489056488,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241649
    },
    {
        "content": "<p>I'm not sure what else to say, you don't seem to want to engage here</p>",
        "id": 489056500,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241675
    },
    {
        "content": "<p>F(1-10) = 2<br>\nF = 2/9</p>\n<p>G(1 - 10) = 1<br>\nG = 1/9</p>\n<p>where is the wrong step?</p>",
        "id": 489056562,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241701
    },
    {
        "content": "<p>the assumption that F exists</p>",
        "id": 489056576,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241722
    },
    {
        "content": "<p>F = 2/9<br>\n 9F = 2<br>\n(1-10)F = 2<br>\nF = 2 + 10 F</p>",
        "id": 489056597,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241764
    },
    {
        "content": "<p>think harder about recursion. you can't avoid it if you take \"a=b\" seriously</p>",
        "id": 489056610,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241791
    },
    {
        "content": "<p>F = 2 + 10( 2 + 10 F)<br>\n   = 2 + 20 + 100 F</p>",
        "id": 489056674,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734241839
    },
    {
        "content": "<p>If your definition is <code>F = -2/9</code> then sure, <code>F*(1-10) = 2</code>. But <code>F</code> is not an infinite sequence of 2s, this is asserting that <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mn>2</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mi>n</mi></msup><mo>=</mo><mo>−</mo><mn>2</mn><mi mathvariant=\"normal\">/</mi><mn>9</mn></mrow><annotation encoding=\"application/x-tex\">\\sum_{n=0}^\\infty2\\cdot 10^n=-2/9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6644em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord\">2/9</span></span></span></span> and this is false because <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mn>2</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{n=0}^\\infty2\\cdot 10^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6644em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> doesn't exist</p>",
        "id": 489056680,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241843
    },
    {
        "content": "<p>you can prove that this sum does not converge</p>",
        "id": 489056700,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241872
    },
    {
        "content": "<p>What you are proving is that <em>if</em> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mn>2</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{n=0}^\\infty2\\cdot 10^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6644em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> exists then <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mn>2</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mi>n</mi></msup><mo>=</mo><mo>−</mo><mn>2</mn><mi mathvariant=\"normal\">/</mi><mn>9</mn></mrow><annotation encoding=\"application/x-tex\">\\sum_{n=0}^\\infty2\\cdot 10^n=-2/9</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6644em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.6644em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord\">2/9</span></span></span></span></p>",
        "id": 489056777,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734241937
    },
    {
        "content": "<p>well, in any case: it's definitely a computer science view that recursion is less suspect than infinite iteration. but there are applications for non-convergent series:</p>\n<p>S = -1/12<br>\n-12 S = 1<br>\n(1-13)S = 1<br>\nS = 1 + 13 S<br>\n   = 13^0 + 13^1 + 13^2 +  ... + 13^n + 13^(n+1)S<br>\nS(1 - 13^(n+1)) = 13^0 + 13^1 + 13^2 + ... +  13^n<br>\n=<br>\n(-1/12)(1-13^(n+1))<br>\n(13^(n+1) - 1)/12</p>\n<p>for instance, these divergent numbers are crucial for calculating the closed form sum as a function of n.</p>",
        "id": 489056835,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734242035
    },
    {
        "content": "<p>Sure, but if you like recursion more than infinite sums then maybe don't make claims about infinite sums</p>",
        "id": 489056906,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734242083
    },
    {
        "content": "<p>because infinite sums are not just recursive functions</p>",
        "id": 489056914,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734242098
    },
    {
        "content": "<p>of course, you have to be careful when you interpret these things.! but the algebra is doing what it's doing, because there's something really there!</p>",
        "id": 489056915,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734242098
    },
    {
        "content": "<p>they are recursive functions + convergence</p>",
        "id": 489056930,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734242110
    },
    {
        "content": "<p>and you've only dealt with half of the job here</p>",
        "id": 489056933,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734242120
    },
    {
        "content": "<p>The reason to be picky about convergence in these kind of infinite sums is precisely because you can use the exact same reasoning to get different values for S</p>",
        "id": 489057022,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734242201
    },
    {
        "content": "<p>if you use recursion, then the difference between convergence vs divergence is pretty small.</p>\n<p>V = Sum_V n + Tail_V n</p>\n<p>presume that:   lim n-&gt; infty[ Tail_V n ] = 0</p>\n<p>V = lim n-&gt; infty [ Sum_V n ]</p>\n<p>.... but in the general case, just DONT conflate the two.</p>\n<p>X = Sum_X n + Tail_X n <br>\n(X - Tail_X n) = Sum_X n</p>\n<p>as n goes to infinity, Sum_X n might go to infinity. If that's the case, then tail will cancel it out, so that we still have some constant X.</p>",
        "id": 489057231,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734242412
    },
    {
        "content": "<p>Consider the following: suppose you have a setup such as that, where <code>Tail_X</code> is blowing up to cancel <code>Sum_X</code> and yielding an apparently meaningful constant <code>X</code>. I would like to argue that <code>Sum_X</code> adds to <code>Y</code> instead. So I define <code>Tail_Y n = Tail_X n + (Y - X)</code>, and now <code>Y = Tail_Y n + Sum_X n</code>. So for the exact same structure, I have shown that <code>Sum_X n</code> sums to <code>Y</code>, modulo <code>Tail_Y</code> which also blows up to infinity.</p>",
        "id": 489057466,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734242582
    },
    {
        "content": "<p>When Tail does not go to 0 for large n, you get \"divergence\". If it goes to 0, it converges. Where we differ is whether the value X is meaningful. But just keep in mind</p>\n<p>Sum_X = Final_X - Tail_X</p>",
        "id": 489057558,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734242669
    },
    {
        "content": "<p>When the sum is convergent, you can't do this trick, because <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>n</mi><mo>→</mo><mi mathvariant=\"normal\">∞</mi></mrow></msub><mi>T</mi><mi>a</mi><mi>i</mi><msub><mi>l</mi><mi>X</mi></msub><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">\\lim_{n\\to\\infty}Tail_X(n)=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mop\">lim</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">ai</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span> but <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mrow><mi>lim</mi><mo>⁡</mo></mrow><mrow><mi>n</mi><mo>→</mo><mi mathvariant=\"normal\">∞</mi></mrow></msub><mi>T</mi><mi>a</mi><mi>i</mi><msub><mi>l</mi><mi>Y</mi></msub><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>Y</mi><mo>−</mo><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">\\lim_{n\\to\\infty}Tail_Y(n)=Y-X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mop\"><span class=\"mop\">lim</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">→</span><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">ai</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0197em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7667em;vertical-align:-0.0833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span>, so this allows to pick a <em>unique</em> value <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> satisfying that the tail goes to 0</p>",
        "id": 489057566,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734242682
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Rat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"n\">i</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Rat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Sum_S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">]</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Rat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Sum_S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Tail_S'</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>This is a proof in your style that the infinite sum <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><msup><mn>2</mn><mi>i</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=0}^\\infty 2^i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1244em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span></span></span></span> is equal to 37, and also 42. This is an absurd conclusion, and therefore we have to conclude that there is a reasoning principle we should not be allowing here.</p>",
        "id": 489057891,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734243038
    },
    {
        "content": "<p>I argue that the bad reasoning principle is to have no constraints on what <code>Tail_S</code> is, such that I can just make it be the difference between what I have and what I want to conclude any desired value</p>",
        "id": 489057986,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734243125
    },
    {
        "content": "<p>you can't just assign whatever value you want to. That's the point of including B = F(-1). F = dA/dx.  Because B already has to be 1/4, it forces S to be -1/12. It's the whole reason anybody ever came up with that number.</p>",
        "id": 489058647,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734243960
    },
    {
        "content": "<p>The link between the 1+2+3+... divergent sum and -1/12 is quite complicated and involves the riemann zeta function or ramanujan summation</p>",
        "id": 489058717,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244015
    },
    {
        "content": "<p>the methods you are employing are not powerful enough to give this answer without also giving all other answers</p>",
        "id": 489058743,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244041
    },
    {
        "content": "<p>for sure!  T = 1 + 2 T is far, far more convincing. T=-1 is just as nonsensical as S=-1/12 ... you can't possibly like T if you don't like S. But if you don't like it; I suggest that you need to interpret it differently.</p>\n<p>T = 1 + 2 T ... means 2^0+2^1+2^2+...  = -1. There is no way around it.  But the reasoning is far far simpler. But S still is -1/12. It's just that if the proof isn't simple, then people will doubt it. Even if you do the reasoning in Lean.</p>",
        "id": 489058845,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734244163
    },
    {
        "content": "<p>Okay, we can talk about T instead. I agree it's simpler</p>",
        "id": 489058854,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244192
    },
    {
        "content": "<p>You are right that I \"don't like it\" for exactly the same reason</p>",
        "id": 489058904,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244206
    },
    {
        "content": "<blockquote>\n<p>T = 1 + 2 T means 2^0+2^1+2^2+... = -1. There is no way around it. </p>\n</blockquote>\n<p>The trouble is that you would like to interpret the ... in this expression as a finite sum, and it's simply not</p>",
        "id": 489058939,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244275
    },
    {
        "content": "<p>But the way to make sense of it... S is the \"final value\" that you can never reach through iteration; what infinite actually means... it means \"never\".  This final value (fixed point), is an infinite string of 1 digits in base13. Because of that, if you multiply it times 12, you get an infinite digit representation of -1. That means that if you add 1, it all ripple-carries to give 0.</p>",
        "id": 489058956,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734244301
    },
    {
        "content": "<p>I thought we were going to talk about T?</p>",
        "id": 489059000,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244324
    },
    {
        "content": "<p>T is an infinite digit representation of -1.</p>\n<p>12 S = T = -1 = 1 + 2 T= 9 + 10 T = 12 + 13 S etc</p>",
        "id": 489059037,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734244382
    },
    {
        "content": "<blockquote>\n<p>This final value (fixed point), is an infinite string of 1 digits in base13.</p>\n</blockquote>\n<p>This is a notion of convergence by the way: you are invoking convergence of an infinite digit sequence where each digit eventually stabilizes to a value after finitely many steps</p>",
        "id": 489059065,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244428
    },
    {
        "content": "<p>it's just not the standard notion of convergence on the reals</p>",
        "id": 489059071,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244440
    },
    {
        "content": "<p>in general:    Z = (n-1) + n * Z = -1  .... -1 is an interesting case, because you add 1 to it, and it ripple-carries to 0.  The carried digit to the left is unreachable.</p>",
        "id": 489059114,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734244454
    },
    {
        "content": "<p>this is convergence in the 13-adic (for S) or 2-adic (for T) numbers</p>",
        "id": 489059117,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244460
    },
    {
        "content": "<p>this \"ripple carry\" thing also occurs in the 2-adic numbers</p>",
        "id": 489059128,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244488
    },
    {
        "content": "<p>But there is no number like ...1111 in the real numbers, because it would have to be larger than every natural number and it is a property of the real numbers that for any real number there is always a natural number larger than it</p>",
        "id": 489059212,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244598
    },
    {
        "content": "<p>yes.  in every base, it happens like:    Z = (n-1) + n * Z.</p>\n<p>Z1 = 1 + 2 Z1<br>\nZ2 = 2 + 3 Z2<br>\n...<br>\nZ9 = 9 + 10 Z9<br>\n...<br>\nZA = 12 + 13 Za.</p>\n<p>A way to think of ZA is ... the digits available are.... 0 1 2 3 4 5 6 7 8 9 A B C ..... base13, all C digits. it's \"full\". if you add 1, it rolls over to 0.</p>",
        "id": 489059231,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734244623
    },
    {
        "content": "<p>this is called the archimedean property, and the 2-adic numbers are a non-archimedean field</p>",
        "id": 489059237,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244627
    },
    {
        "content": "<p>Note though that you have to pick a base, the 2-adic numbers are not 13-adic and vice versa</p>",
        "id": 489059256,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244656
    },
    {
        "content": "<p>but if you think about it that way, -1/12 is not even remotely nonsensical. Like a finite field, a fraction means that you multiply times an int, and get an int.</p>\n<p>12 S + 1 = 0</p>",
        "id": 489059331,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734244733
    },
    {
        "content": "<p>I didn't say -1/12 is nonsensical, I said ...1111 is not a real number</p>",
        "id": 489059352,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244763
    },
    {
        "content": "<p>-1/12 is of course a real number</p>",
        "id": 489059358,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244774
    },
    {
        "content": "<p>sure. That's why  S = 1 + 13 S is easier to write.</p>",
        "id": 489059365,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734244782
    },
    {
        "content": "<p>That's an equation for -1/12, not ....1111</p>",
        "id": 489059377,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244796
    },
    {
        "content": "<p>or ...CCCC or what have you</p>",
        "id": 489059429,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244809
    },
    {
        "content": "<p>that number does not exist in the real numbers, and as such it can't be equal to -1/12</p>",
        "id": 489059442,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244840
    },
    {
        "content": "<p>S = 1 + 13 S<br>\n    = 13^0 + 13 S<br>\n    = 1 + 13(1 + 13 S)<br>\n    = 1 + 13^1 + 13^2 S<br>\n    = 1 + 13^1 + 13^2 (1 + 13 S)<br>\n   = 13^0 + 13^1 + 13^2 + ...</p>\n<p>S = -1/12<br>\n-12 S = 1<br>\n(1-13)S = 1<br>\nS = 1 + 13 S</p>\n<p>That is all 1 digits base13</p>",
        "id": 489059489,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734244919
    },
    {
        "content": "<p>-1/12 is a number satisfying S = 1+13 S, and this means you can give it a base expansion of the form &lt;big number&gt;CCCC in base 13 for any <em>finite</em> number of C's, but as you make the number of C's larger the big number gets even bigger and you can't just hide it away in a '...'</p>",
        "id": 489059531,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244929
    },
    {
        "content": "<p>because small variations in the big number completely changes the value of the -1/12 coming out</p>",
        "id": 489059574,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734244983
    },
    {
        "content": "<p>the whole reason i learned Lean was to understand this phenomenon.</p>",
        "id": 489059586,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734244997
    },
    {
        "content": "<p>So in that case maybe you should learn about how infinite sums work in lean</p>",
        "id": 489059593,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245014
    },
    {
        "content": "<p>starting point -&gt; <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=tsum#doc\">docs#tsum</a></p>",
        "id": 489059604,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245024
    },
    {
        "content": "<p>i ran into this trying to turn integration into this kind of recursion</p>",
        "id": 489059609,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734245031
    },
    {
        "content": "<p>this here...</p>\n<p>12 S + 1 = 0</p>\n<p>justifies calling S=-1/12. but if S is represented with an infinite number of digits; then that is fine.</p>",
        "id": 489059729,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734245145
    },
    {
        "content": "<p>real numbers have a decimal expansion that extends to the right, not the left</p>",
        "id": 489059800,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245210
    },
    {
        "content": "<p>because when you go to the right the numbers get smaller, and they converge to something</p>",
        "id": 489059811,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245227
    },
    {
        "content": "<p>when you go left they don't converge</p>",
        "id": 489059819,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245239
    },
    {
        "content": "<p>X = 0.9 + 0.1 X<br>\n(0.9) X = 0.9<br>\nX = 1</p>",
        "id": 489059820,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734245243
    },
    {
        "content": "<p>why do you keep showing algebra at me</p>",
        "id": 489059826,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245255
    },
    {
        "content": "<p>this is unnecessary</p>",
        "id": 489059832,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245259
    },
    {
        "content": "<p>but that's the infinite digits to the right. it's the same exact issue.</p>",
        "id": 489059846,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734245278
    },
    {
        "content": "<p>and nobody doubts that 0.9999... = 1</p>",
        "id": 489059889,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734245289
    },
    {
        "content": "<p>I don't think you understand the proof of 0.999... = 1</p>",
        "id": 489059899,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245308
    },
    {
        "content": "<p>but it's the same form:</p>\n<p>J = Sum_J n + Tail_J n</p>\n<p>except, in convergent cases, it happens to be that Tail_J n would go to 0 for large n.</p>",
        "id": 489059944,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734245377
    },
    {
        "content": "<p>you probably think the proof goes something like:</p>\n<p>S = 1/10(9+S)<br>\n10S = 9+S<br>\n9S = 9<br>\nS = 1</p>\n<p>But that's not a proof, as it does not prove that the sum converges</p>",
        "id": 489059950,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245382
    },
    {
        "content": "<p>i would write it like:</p>\n<p>S = 9/10 + (1/10)S</p>\n<p>but the algebra is straightforward.  \"all 9s to the right in base 10\"</p>",
        "id": 489060025,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734245450
    },
    {
        "content": "<p>the algebra is straightforward but that's not the whole proof</p>",
        "id": 489060038,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245469
    },
    {
        "content": "<p>but, if S solves for both 0.9999... and for 1, then tiat's enough for a computer.</p>",
        "id": 489060052,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734245502
    },
    {
        "content": "<p>No, because it's a proof which assumes that 0.999... exists</p>",
        "id": 489060108,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245531
    },
    {
        "content": "<p>you end up with a conditional result saying that if this sum exists then it is equal to 1</p>",
        "id": 489060121,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245553
    },
    {
        "content": "<p>heh! so.... i don't like infinite iteration. thats why i use recursion. if i don't use infinite iteration, then i don't need to wrestle with whether it's right or not.  recursion is totally believeable though.</p>\n<p>S = 9/10 + 1/10 S<br>\n10 S = 9 + S<br>\n(10 - 1)S  = 9<br>\n9 S = 9<br>\nS = 1</p>\n<p>S = 9/10 + 1/10 S<br>\n   = 0.9 + 0.1 S<br>\n   = 0.9 + 0.1(0.9 + 0.1 S)<br>\n   = 0.99 + 0.01 S<br>\n...</p>",
        "id": 489060246,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734245696
    },
    {
        "content": "<p>I would not go as far as Norman Wildberger in arguing that it's wrong. But... when you write code, recursion is far superior to reason about, and to write code for.</p>",
        "id": 489060387,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734245845
    },
    {
        "content": "<p>The actual proof looks more like this.</p>\n<p>Let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>S</mi><mi>n</mi></msub><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msubsup><mn>9</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mi>i</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">S_n=\\sum_{i=0}^{n-1}9\\cdot 10^{-i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2537em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.954em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">9</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8247em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span></span></span></span></span>. Then (by some algebra) <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>S</mi><mi>n</mi></msub><mo>=</mo><mn>1</mn><mo>−</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mi>n</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">S_n=1-10^{-n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7713em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span></span>, so the sequence <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>S</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">S_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is increasing and bounded above by <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>, therefore it has a limit, call it <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span>. (This <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span> is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><mn>9</mn><mo>⋅</mo><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mi>i</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=0}^{\\infty}9\\cdot 10^{-i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">∞</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">9</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">⋅</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8247em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span></span></span></span></span>.) In fact, because the difference between <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>S</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">S_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mi>n</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">10^{-n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7713em;\"></span><span class=\"mord\">1</span><span class=\"mord\"><span class=\"mord\">0</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7713em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span></span>, which approaches 0, the sequence also approaches <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>. By uniqueness of limits, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">S=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>.</p>",
        "id": 489060485,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734245951
    },
    {
        "content": "<p>the equations you have been showing roughly correspond to the (by some algebra) step in this proof</p>",
        "id": 489060609,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246041
    },
    {
        "content": "<p>But, I just used simple algebra. Unless I divide by 0, or assign conflicting values as assumptions; then on what basis would it get rejected?</p>",
        "id": 489060618,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734246054
    },
    {
        "content": "<p>the point is that (by some algebra) is only a small part of the proof</p>",
        "id": 489060636,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246076
    },
    {
        "content": "<p>there is a whole bunch of other stuff, significantly less algebra-looking, that one has to do to prove facts about infinite sums</p>",
        "id": 489060655,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246106
    },
    {
        "content": "<p>The mistake in your last post is essentially the <code>...</code> at the end</p>",
        "id": 489060730,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246178
    },
    {
        "content": "<p>sure, there's stuff that I can't figure out how to do recursively. i would like to figure out general integration. A = 1 + xA isn't a lot to work with. F = SumF n + TailF n ... is better. But you can't express everything like this; such as infinite products.</p>",
        "id": 489060745,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734246188
    },
    {
        "content": "<p>You can't express infinite sums like this either</p>",
        "id": 489060762,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246220
    },
    {
        "content": "<p>you can express <em>finite</em> sums like this</p>",
        "id": 489060765,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246227
    },
    {
        "content": "<p>infinite sums are limits of finite sums</p>",
        "id": 489060773,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246240
    },
    {
        "content": "<p>so to prove something about an infinite sum you have to talk about addition and you have to talk about limits</p>",
        "id": 489060804,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246255
    },
    {
        "content": "<p>if you only have addition you will never prove anything about an infinite sum</p>",
        "id": 489060814,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246278
    },
    {
        "content": "<p>A = 1 + x A<br>\n    = 1 + x(1 + x A)<br>\n    = x^0 + x^1 + ... + x^n + x^(n+1)A</p>\n<p>(1-x)A = 1<br>\nA = 1/(1-x)<br>\n    = x^0 + x^1 + x^2 + ... + x^n + x^(n+1)/(1-x)</p>",
        "id": 489060870,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734246339
    },
    {
        "content": "<p>i don't see what's objected to in recursion.</p>",
        "id": 489060926,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734246370
    },
    {
        "content": "<p>infinite sums are not recursive</p>",
        "id": 489060937,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246391
    },
    {
        "content": "<p>finite sums are</p>",
        "id": 489060941,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246397
    },
    {
        "content": "<p>you can use recursive methods to prove things about finite sums</p>",
        "id": 489060952,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246413
    },
    {
        "content": "<p>you have to then use quantifier reasoning to prove things about infinite sums</p>",
        "id": 489060970,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246434
    },
    {
        "content": "<p>but... it is the same pattern. when does  it end?</p>\n<p>A = x^0 + x^1 + x^2 + ... + x^n  + x^(n+1) * (x^0 + x^1 + x^2 + ... + x^n + x^(n+1)A)</p>",
        "id": 489060997,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734246472
    },
    {
        "content": "<p>The notation is possibly misleading, it's not really an addition process that goes on forever</p>",
        "id": 489061068,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246531
    },
    {
        "content": "<p>it's more like an estimation of where the addition process seems to be headed toward</p>",
        "id": 489061092,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246561
    },
    {
        "content": "<p>but that's why it's superior. you don't think of it as iterating infinitely. infinite iteration is by definition \"never\" at the last term.</p>",
        "id": 489061105,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734246580
    },
    {
        "content": "<p>that's true but not sufficient to characterize it</p>",
        "id": 489061173,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246619
    },
    {
        "content": "<p>the infinite sum is a specific value with the property that for any little region around it the finite sum process eventually enters that region (after finitely many steps)</p>",
        "id": 489061204,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246672
    },
    {
        "content": "<p>for example, a sequence like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></msubsup><msup><mn>2</mn><mrow><mo>−</mo><mi>i</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=0}^n2^{-i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1244em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span></span></span></span></span> eventually gets arbitrarily close to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span> as <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> grows. I can pick any positive value like <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>ϵ</mi><mo>=</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>4</mn></mrow><annotation encoding=\"application/x-tex\">\\epsilon = 1/4</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">ϵ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1/4</span></span></span></span> and observe that after 3 terms the sequence is within 1/4 of 2, and from then on it is never farther than 1/4 from 2</p>",
        "id": 489061311,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246789
    },
    {
        "content": "<p>Therefore we say the infinite sum <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi mathvariant=\"normal\">∞</mi></msubsup><msup><mn>2</mn><mrow><mo>−</mo><mi>i</mi></mrow></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=0}^\\infty2^{-i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1244em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">∞</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span></span></span></span></span> exists, and is equal to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">2</span></span></span></span></p>",
        "id": 489061327,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246818
    },
    {
        "content": "<p>anyways: for this particular application of 1+2+3+... , it's way more believeable than </p>\n<p>1 +  2 + 3 +   4 +  5 +  6 +  ... </p>\n<ul>\n<li>1 + -2 + 3 + -4 + 5 + -6 + ...</li>\n</ul>\n<hr>\n<p>0 +  4  + 0  +  8 + 0  + 12 + ...</p>\n<p>what I hate about that proof is that it ignores what's going on with the zeroes. that indicates it expanding at half the rate</p>\n<p>(Sf (2<em>n) - Bf (2</em>n)) = 4 * (Sf n)</p>\n<p>that's the whole reason I started learning Lean. People wrangling infinite sums are using the most waffly logic I can imagine.</p>",
        "id": 489061424,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734246916
    },
    {
        "content": "<p>on the other hand, the sequence <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></msubsup><msup><mn>2</mn><mi>i</mi></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=0}^n2^i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1244em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span></span></span></span> grows indefinitely, and it has no upper bound - for any <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> I can take <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> steps and then the sum will definitely be bigger than <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>. So it does not converge, and more specifically we say it diverges to infinity, written <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mi>n</mi></msubsup><msup><mn>2</mn><mi>i</mi></msup><mo>=</mo><mi mathvariant=\"normal\">∞</mi></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=0}^n2^i=\\infty</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.1244em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8043em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">0</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8247em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord\">∞</span></span></span></span></p>",
        "id": 489061431,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246927
    },
    {
        "content": "<p>You need to learn about infinite sums from a math textbook, not from bad proofs on the internet</p>",
        "id": 489061470,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734246963
    },
    {
        "content": "<p>All three infinite sums you just wrote do not converge</p>",
        "id": 489061534,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247018
    },
    {
        "content": "<p>But this also grows indefinitely:</p>\n<p>S - Tail_S n = Sum_S n </p>\n<p>If you have the tail go to 0, you get away with conflating the value with the Sum. But when it diverges, you can't conflate them.</p>",
        "id": 489061545,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247027
    },
    {
        "content": "<p>I don't know what you mean by conflating. S is the sum, by assumption</p>",
        "id": 489061560,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247067
    },
    {
        "content": "<p>If the tail does not go to zero then the sum does not converge</p>",
        "id": 489061617,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247091
    },
    {
        "content": "<p>If S is not used to denote the sum but rather a specific real number you would like to prove the sum equal to (e.g. S := -1/12), then it suffices to just prove that the Tail_S function in that equation goes to 0</p>",
        "id": 489061651,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247147
    },
    {
        "content": "<p>X = (1/2) + (1/2) X<br>\n   = 1  -- it solves for 1<br>\n  = 1/2 + 1/4 + 1/8 + .... </p>\n<p>Sum_X n =  2^(n+1) - 1</p>\n<p>X = Sum_X n + Tail_X n<br>\nimplies<br>\nX - Tail_X n = Sum_X n</p>\n<p>if Tail_X n = 0 for infinite n, then you can confuse these</p>\n<p>X = Sum_X n</p>\n<p>X is not the sum. Sum is the sum; Sum_X n specifically</p>",
        "id": 489061731,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247211
    },
    {
        "content": "<p>I mean the infinite sum you are interested in calculating</p>",
        "id": 489061762,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247254
    },
    {
        "content": "<p>oops... but the idea is that these strange numbers when it does not converge are a real phenomenon. you need to plug it in to get the closed form as a function of n...</p>",
        "id": 489061807,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247299
    },
    {
        "content": "<p>You write <code>X = (1/2) + (1/2) X</code> as the first line of the proof, but lean would not accept that as the first line of a proof, because you haven't defined X yet</p>",
        "id": 489061815,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247311
    },
    {
        "content": "<p>is this an assumption or a theorem?</p>",
        "id": 489061823,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247321
    },
    {
        "content": "<p>Math proofs introduce variables with a sentence that says \"Let X be ...\". You don't have sentences in your proofs and this is a problem</p>",
        "id": 489061901,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247375
    },
    {
        "content": "<p>ok... but ...</p>\n<p>X = 1<br>\n(1/2)X = (1/2)<br>\n(1 - 1/2)X = 1/2<br>\nX = (1/2) + (1/2) X</p>",
        "id": 489061944,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247419
    },
    {
        "content": "<p>I recommend you read a textbook on logic as it will help teach you how proofs are structured</p>",
        "id": 489061950,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247428
    },
    {
        "content": "<p>I recommend <a href=\"https://sistemas.fciencias.unam.mx/~lokylog/images/Notas/la_aldea_de_la_logica/Libros_notas_varios/L_02_MENDELSON,%20E%20-%20Introduction%20to%20Mathematical%20Logic,%206th%20Ed%20-%20CRC%20Press%20(2015).pdf\">Mendelson</a></p>",
        "id": 489062018,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247469
    },
    {
        "content": "<p>you can turn any number into one of those equations btw. and that equation always proposes an infinite digit representation. this is basic CS.</p>",
        "id": 489062034,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247494
    },
    {
        "content": "<p>i am taking \"a=b\" completely literally. if you write 12=0, it's not a contradiction unless you also propose that 12 != 0... because if 12=0 is an assumption, then you are in mod 12.</p>",
        "id": 489062073,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247549
    },
    {
        "content": "<p>All of those equations are equivalent, I agree</p>",
        "id": 489062075,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247553
    },
    {
        "content": "<p>none of them say anything about an infinite sum</p>",
        "id": 489062103,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247563
    },
    {
        "content": "<p>I think you need to learn how to use lean to refute your claims</p>",
        "id": 489062141,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247598
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">False</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">cases</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>",
        "id": 489062177,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247642
    },
    {
        "content": "<p>S = -1/12<br>\n-12 S = 1<br>\n(1 - 13)S = 1<br>\nS = 1 + 13 S</p>\n<p>every value set to a rational number tells you how to make an infinite digit representation. it might even be the case that all infinite numbers can be represented as a finite number. (maybe?)</p>\n<p>S = 13^0 + 13^1 + 13^2 + ...  = 1 + 13 S = 1 + 13(1 + 13(1 + 13S)) ...</p>",
        "id": 489062188,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247659
    },
    {
        "content": "<p>i am taking recursion very very literally, equational reasoning requires it.</p>",
        "id": 489062253,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247706
    },
    {
        "content": "<p>You are not doing proofs, you are writing a sequence of equations</p>",
        "id": 489062259,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247724
    },
    {
        "content": "<p>proofs require sentences</p>",
        "id": 489062269,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247733
    },
    {
        "content": "<p>perhaps. but this is our number system.</p>",
        "id": 489062272,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247740
    },
    {
        "content": "<p>and if it produces strange stuff, that's not my problem. it does mean that i need to bend my mind around interpreting it though.</p>",
        "id": 489062296,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247768
    },
    {
        "content": "<p>if you wrote a sentence you would have to make an assumption which made clear which number system you are talking about</p>",
        "id": 489062302,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247777
    },
    {
        "content": "<p>but if the number system you are talking about is the real numbers, then infinite numbers do not exist</p>",
        "id": 489062307,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247799
    },
    {
        "content": "<p>but if you feed gibberish into a Python interpreter, it's going to do something. in computer security there is a saying...</p>\n<p>\"An implementation defines the undefined stuff\"</p>",
        "id": 489062360,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247819
    },
    {
        "content": "<p>Yes, that's fine but you have to play by the rules of the system</p>",
        "id": 489062378,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247857
    },
    {
        "content": "<p>and i don't see how to reject S = -1/12, etc. it's simple algebra.</p>",
        "id": 489062395,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247875
    },
    {
        "content": "<p>That's because you aren't listening</p>",
        "id": 489062402,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247889
    },
    {
        "content": "<p>The simple algebra is fine, but it doesn't have the magical ability to prove things about limits</p>",
        "id": 489062469,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247934
    },
    {
        "content": "<p>and S is a limit</p>",
        "id": 489062481,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734247957
    },
    {
        "content": "<p>but you can't object to the result. you can only object to a rule that you followed, and replace it with a rule that you dont object to. that's the whole problem with objecting to things that people can clearly do in the algebra.</p>\n<p>X = 1 + 2 X</p>\n<p>is -1.... and that's ... just how it is.  1+2+4+8+...  = -1</p>",
        "id": 489062494,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734247978
    },
    {
        "content": "<p>Why is your first step X = 1 + 2 X? Where did that come from?</p>",
        "id": 489062513,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248000
    },
    {
        "content": "<p>You should start the proof by a \"Let X be ...\" statement</p>",
        "id": 489062527,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248024
    },
    {
        "content": "<p>that's a sentence</p>",
        "id": 489062529,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248028
    },
    {
        "content": "<p>use words not equations</p>",
        "id": 489062533,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248034
    },
    {
        "content": "<p>do not respond by posting a bunch of equations again</p>",
        "id": 489062578,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248050
    },
    {
        "content": "<p>X = -1<br>\n(1-2)X = 1<br>\nX = 1 + 2 X</p>\n<p>that's where it came from</p>",
        "id": 489062581,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248060
    },
    {
        "content": "<p><span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span></p>",
        "id": 489062589,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248072
    },
    {
        "content": "<p>but that's where it came from. i just assigned a value to a name, and you can make a recursive equation by following the rules. and these are numbers that have infinite digit representations. what was Ramanujan thinking ?  it isn't something that i dreamed myself</p>",
        "id": 489062631,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248146
    },
    {
        "content": "<p>So your theorem is \"If X = -1, then X = 1 + 2X\"?</p>",
        "id": 489062688,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248181
    },
    {
        "content": "<p>exactly</p>",
        "id": 489062695,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248191
    },
    {
        "content": "<p>This doesn't have any infinite digit representations in it</p>",
        "id": 489062708,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248218
    },
    {
        "content": "<p>look... write a computer program that follows legitimate rules at random. the program will find that.</p>",
        "id": 489062711,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248221
    },
    {
        "content": "<p>it's \"just simple algebra\"</p>",
        "id": 489062716,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248230
    },
    {
        "content": "<p>so, you can't just say  \"a/b\" without also asserting \"b != 0\". if you object to something, then the meta rule needs to prevent it.</p>",
        "id": 489062736,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248270
    },
    {
        "content": "<p>(in lean you can but let's set that aside)</p>",
        "id": 489062791,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248294
    },
    {
        "content": "<p>you can't object to the result. you can only object to rules and axioms. no?</p>",
        "id": 489062801,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248308
    },
    {
        "content": "<p>I can object that the result isn't what you say it is</p>",
        "id": 489062811,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248327
    },
    {
        "content": "<p>if you point at a 3 and tell me it's a 7 I will disagree</p>",
        "id": 489062826,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248344
    },
    {
        "content": "<p>so, is this a \"proof by beatdown/authority\" then?</p>",
        "id": 489062839,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248358
    },
    {
        "content": "<p>if you point at X = 1 + 2X and tell me it's an infinite sum I will disagree</p>",
        "id": 489062847,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248365
    },
    {
        "content": "<p>does \"a=b\" mean:</p>\n<ul>\n<li>a can be rewritten as b</li>\n<li>b can be rewritten as a<br>\n?</li>\n</ul>",
        "id": 489062875,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248398
    },
    {
        "content": "<p>a = b means a and b are equal (assuming that a and b are well formed), which means that both rewrites are legal</p>",
        "id": 489062953,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248458
    },
    {
        "content": "<p>but if you had nothing but a C compiler, how would you implement \"a=b\"? it's a rewrite rule, no?</p>",
        "id": 489062979,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248498
    },
    {
        "content": "<p>That's completely irrelevant? Equalities are not implementations</p>",
        "id": 489063040,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248541
    },
    {
        "content": "<p>I'm not really sure where you are going with this</p>",
        "id": 489063057,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248573
    },
    {
        "content": "<p>I got something as weird as -1/12=1+2+3+...   accepted even as a Lean proof. </p>\n<p>S = 1+2+3+...+n + Tail_S(n)</p>\n<p>if n can be as large as you like, Tail_S(n) has to be defined as something. Because B=1/4, and the outcome of (Sf 2n) - (Bf 2n) = 4*(Sf n) .... it's going to be -1/12.  But the objection is ridiculous imho. It just means that you need to be careful to think about objects that you can multiply times 12 and add 1 to get 0.  And that totally is what all 1s in base13 is.</p>",
        "id": 489063228,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248755
    },
    {
        "content": "<p>S-Tail_S n = Sum_S n</p>\n<p>that is the actual sum... not S.</p>",
        "id": 489063304,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248811
    },
    {
        "content": "<p>I wish you would actually prove this thing about base13, that's an interesting result in the 13-adic integers but you don't seem to be getting close to a proof</p>",
        "id": 489063311,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248823
    },
    {
        "content": "<p>Because Tail_S(n) actually does converge to 0 in the 13-adic integers</p>",
        "id": 489063343,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248863
    },
    {
        "content": "<p>Z = 5 + 10 Z</p>\n<p>(.....55555555_(10)) .... all 5s in base 10</p>\n<p>Z = 5 + 10 ( 5 + 10 Z)<br>\n    = 5 + 50 + 100Z</p>",
        "id": 489063349,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734248878
    },
    {
        "content": "<p>(actually I'm not sure that's the case, it's true when you use powers of 13 but not for the sum of all the numbers)</p>",
        "id": 489063392,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248890
    },
    {
        "content": "<p>You've started a proof with an equation again</p>",
        "id": 489063458,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248983
    },
    {
        "content": "<p>never do that, this is not how math proofs work</p>",
        "id": 489063464,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734248994
    },
    {
        "content": "<p>The first step is to introduce your variables with \"Let\"</p>",
        "id": 489063510,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734249011
    },
    {
        "content": "<p>this even works if you pick arbitrary definitions of the number, btw.... that blew my mind.</p>\n<p>-1 = V = 1 + 2 V = 2 + 3 V = 3 + 4 V ....</p>\n<p>V = 1 + 2(2 + 3 V)<br>\n    = 1 + 4 + 6 V<br>\n-5 V = 5<br>\nV = -1</p>",
        "id": 489063520,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734249017
    },
    {
        "content": "<p>I've exceeded my \"someone is wrong on the internet\" budget. Have a good day, and maybe read some <a href=\"https://sistemas.fciencias.unam.mx/~lokylog/images/Notas/la_aldea_de_la_logica/Libros_notas_varios/L_02_MENDELSON,%20E%20-%20Introduction%20to%20Mathematical%20Logic,%206th%20Ed%20-%20CRC%20Press%20(2015).pdf\">Mendelson</a></p>",
        "id": 489063559,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734249081
    },
    {
        "content": "<p>:-)</p>",
        "id": 489063567,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734249090
    },
    {
        "content": "<p>it works though! even in Lean! maybe it's wrong anyway!</p>",
        "id": 489063576,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734249112
    },
    {
        "content": "<p>S = -1/12<br>\n-12 S = 1<br>\n(1 - 13)S = 1<br>\nS = 1 + 13 S<br>\n   = 13^0 + 13(1 + 13 S)<br>\n   = 13^0 + 13^1 + 13^2 + ... + 13^n + 13^(n+1) S</p>\n<p>(-1/12) = 1 + 13(-1/12)<br>\n              = 1 + 13 + 13^2(-1/12)<br>\n....</p>\n<p>that's the proof that this number is also representable as all 1s in base13</p>",
        "id": 489063788,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734249360
    },
    {
        "content": "<p>Unless you fill in the dots in the following sentence, you're not doing mathematics:</p>\n<p>Given an arbitrary sequence of real numbers <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>u</mi><mi>n</mi></msub></mrow><annotation encoding=\"application/x-tex\">u_n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>, we say that its series converges to a real number <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> if ...</p>\n<p>Then, with this definition of convergence, let us show that the series associated to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>u</mi><mi>n</mi></msub><mo>=</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">u_n = n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5806em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">u</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> converges to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>12</mn></mrow><annotation encoding=\"application/x-tex\">-1/12</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1/12</span></span></span></span>. Here is the proof: ...</p>\n<p>Note how the proof will have to refer to the definition in the first sentence. If you fill in the dots with \"we say that its series converges to a real number <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> if <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi><mo>=</mo><mo>−</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>12</mn></mrow><annotation encoding=\"application/x-tex\">x = -1/12</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1/12</span></span></span></span>\", then showing the convergence of the series to <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>12</mn></mrow><annotation encoding=\"application/x-tex\">-1/12</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1/12</span></span></span></span> is easy, but uninteresting. You need first to come up with an interesting <em>definition</em>, before talking about proofs.</p>",
        "id": 489063948,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1734249541
    },
    {
        "content": "<p>the \"...\" is finite btw. i totally agree with you btw. on the end of an expression \"+ ...\" is too ambiguous for me.</p>",
        "id": 489064172,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734249731
    },
    {
        "content": "<p>S = 1 + 13 S<br>\n   = -1/12<br>\nS = (13^0 + 13^1 + 13^2 + ... + 13^n) + 13^(n+1)S<br>\nS*(1 - 13^(n+1)) = 13^0 + 13^1 + 13^2 + ... + 13^n<br>\n=<br>\n(-1/12)(1 - 13^(n+1))<br>\n= (13^(n+1) - 1)/12 = Sum_S n</p>\n<p>even though you get \"nonsense\" about powers of 13 adding to -1/12, S is the critical value to define the closed form Sum_S n here.</p>",
        "id": 489064350,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734249944
    },
    {
        "content": "<p>but it is not nonsense.   12*S = -1 is the key. it's just that if -1 is represented with infinite digits, it still works because you add 1, and it carries to produce 0</p>",
        "id": 489064434,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734250003
    },
    {
        "content": "<p>what i am really saying is that maybe you should reconsider your understanding of infinite numbers. all 2s in base 10 is not all 1s in base 10. it's not like a undefined number that keeps increasing every time you look at it... it is a well-defined number. and you can define it as an equation.</p>",
        "id": 489064651,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734250216
    },
    {
        "content": "<p>If you can fill in this sorry </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\">  </span><span class=\"n\">limUnder</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">atTop</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"n\">Finset</span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I guarantee you that everyone on this thread will say you are right and we are wrong.</p>",
        "id": 489066708,
        "sender_full_name": "Chris Birkbeck",
        "timestamp": 1734252448
    },
    {
        "content": "<p>One last remark: there are many rigorous ways to define the sum of a series which is divergent in the usual sense. For some of these definitions, indeed the sum of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mo>↦</mo><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">n \\mapsto n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.522em;vertical-align:-0.011em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">↦</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">n</span></span></span></span> is <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mn>1</mn><mi mathvariant=\"normal\">/</mi><mn>12</mn></mrow><annotation encoding=\"application/x-tex\">-1/12</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">−</span><span class=\"mord\">1/12</span></span></span></span>, but this has to be justified in terms of the definition, not formal algebraic manipulations which you haven't justified. A standard reference for this is the book \"Divergent series\" by Hardy, where you will see many ways to fill in the dots.</p>",
        "id": 489067419,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1734253196
    },
    {
        "content": "<p>This is Sorry Free and no errors. It is using recursion all over the place in the theorems.</p>\n<p><a href=\"https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449\">https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449</a></p>",
        "id": 489295691,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734370031
    },
    {
        "content": "<p>Please, please, go and read the introduction of Hardy, Divergent Series (<a href=\"https://sites.math.washington.edu/~morrow/335_17/Hardy-DivergentSeries%202.pdf\">https://sites.math.washington.edu/~morrow/335_17/Hardy-DivergentSeries%202.pdf</a>), especially Section 1.3, highlighting the need to define things before giving any proof about them -- note that it's not trivial, it took mathematicians several centuries to understand how important this is, but now that we have understood it you should take it seriously.</p>",
        "id": 489296834,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1734370378
    },
    {
        "content": "<p>The bottom of Page 5 and the top of Page 6, especially, are completely non-technical but explain perfectly what is going on here.</p>",
        "id": 489297165,
        "sender_full_name": "Sébastien Gouëzel",
        "timestamp": 1734370484
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">X</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"n\">X</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">X</span>\n\n<span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_X</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_X</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"c1\">-- this is what people mean when they say \"infinite sum\" gives infinity</span>\n<span class=\"n\">Sum_X</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_X</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"c1\">--  this is what i don't like about \"+ ...\" on the end. Tail must be defined</span>\n<span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">        </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>",
        "id": 489380446,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734398255
    },
    {
        "content": "<p>FYI, we're all familiar with alternative summation methods, including <a href=\"https://en.wikipedia.org/wiki/1_%2B_2_%2B_4_%2B_8_%2B_⋯\">the ways that 1 + 2 + 4 + 8... can be summed to -1</a>. These are interesting ideas, and if you would like to learn about how to explore these ideas in Lean, people would be happy to help you. The reason you've been encountering resistance is that the code you've written does not properly capture these concepts in Lean.</p>",
        "id": 489382515,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1734399252
    },
    {
        "content": "<p>you are just making things up. \"i can just set S to 37!\" ... no you cannot. the whole reason it gets the value it does...</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\">   </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\">  </span><span class=\"mi\">4</span><span class=\"w\">  </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\">  </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n\n<span class=\"n\">S</span><span class=\"bp\">-</span><span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">      </span><span class=\"mi\">0</span><span class=\"w\">  </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>Which looks like expanding at half rate, but multiplied times 4: suggesting that we may find <code>S-B = 4 S</code> in some form.</p>\n<p>The whole reason you get the relationship is that the _finite_ sum <code>Sum_S (2*n) - Sum_B (2*n)</code> reduces to <code>4* Sum_S n</code> with no other assumptions. From there, you find that <code>Tail_S (2*n) - Tail_B (2*n) = 4*(Tail_S n)</code> solves for the value <code>Sf n</code>, because all the <code>n</code> cancel out. And -1/12 is what is left.</p>\n<p>I did not pick that number out of thin air. It's a consequence of S and B.</p>",
        "id": 489552283,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734461819
    },
    {
        "content": "<p>What was your takeaway from the recommended reading above?</p>",
        "id": 489552760,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734461989
    },
    {
        "content": "<p>S is not arbitrarily set. It's a consequence of B, which happens to be 1/4.</p>",
        "id": 489553110,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734462110
    },
    {
        "content": "<p>Who are you responding to?</p>",
        "id": 489553307,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734462164
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/489296834\">said</a>:</p>\n<blockquote>\n<p>Please, please, go and read the introduction of Hardy, Divergent Series (<a href=\"https://sites.math.washington.edu/~morrow/335_17/Hardy-DivergentSeries%202.pdf\">https://sites.math.washington.edu/~morrow/335_17/Hardy-DivergentSeries%202.pdf</a>), especially Section 1.3, highlighting the need to define things before giving any proof about them -- note that it's not trivial, it took mathematicians several centuries to understand how important this is, but now that we have understood it you should take it seriously.</p>\n</blockquote>\n<p><span aria-label=\"this\" class=\"emoji emoji-1f446\" role=\"img\" title=\"this\">:this:</span> do this and come back with thoughts about it so that we can have a sensible discussion</p>",
        "id": 489553561,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734462250
    },
    {
        "content": "<p>the poster of this</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">BigOperators</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Rat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"n\">i</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Rat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">37</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Sum_S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">]</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S'</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Rat</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S'</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">42</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Sum_S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Tail_S'</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 489553596,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734462259
    },
    {
        "content": "<p>you will get a contradiction if you don't let let the value be set by something else that is known.</p>",
        "id": 489553680,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734462293
    },
    {
        "content": "<p>(you can use \"quote reply\" so that people can follow the thread)</p>",
        "id": 489553716,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734462308
    },
    {
        "content": "<p>I don't think responding to your comment here is going to be productive until we get on the same page about what a proof is</p>",
        "id": 489553984,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1734462399
    },
    {
        "content": "<p>note an almost identical situation if instead of F=dA/dx, you integrate instead for dG/dx=A. From there you get the alternating  series G:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">G</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">ln</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>And you can (more carefully than this!) figure out a self-similarity relationship:</p>\n<p>H = 1/1 +  1/2 + 1/3  + 1/4 + 1/5  + 1/6 + ...<br>\nG = 1/1 + -1/2 + 1/3 + -1/4 + 1/5 + 1/6 + ...<br>\n-<br>\n==================================<br>\n H-G=      0 + 1/1 + 0 + 1/2 + 0 + 1/3 + 0 + ....</p>\n<p>it's H again, but notably expanding at half the rate!</p>",
        "id": 490456464,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1734933487
    },
    {
        "content": "<p>Firstly, your definition of <code>Tail_S</code> is overcomplicated. It is just -1/12 - n(n+1)/2.</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Tail_S_eq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Tail_B</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n</code></pre></div>\n<p>With this, your file can be simplified as all of your definitions are unnecessary:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">S_val</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Tail_S</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>Now, we are missing the step where we claim that <code>n * (n + 1) / 2 + Tail_S n</code> represents <code>1 + 2 + 3 + ...</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">S_def</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>This hinges on the claim that <code>Tail_S n</code> represents (n + 1) + (n + 2) + ...:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Tail_S_eq_sum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>This hinges on the following:<br>\n(n + 1) + (n + 2) + ... = (n + 1) + Tail_S (n + 1) = Tail_S (n)<br>\nHere we have assumed the claim for Tail_S (n + 1) to prove the claim for Tail_S (n). I am going to tell you here that this is not a valid induction, it goes the wrong way and there is no base case, i.e. it is an infinite regress.</p>\n<p>But you are welcome to try to fill in these proofs.</p>",
        "id": 490583073,
        "sender_full_name": "llllvvuu",
        "timestamp": 1734987739
    },
    {
        "content": "<p>In your full \"proof\" you have used the Taylor expansion, but this is only valid within the radius of convergence, see: <a href=\"https://en.wikipedia.org/wiki/Taylor%27s_theorem\">https://en.wikipedia.org/wiki/Taylor%27s_theorem</a></p>\n<p>As it so happens, the radius of convergence of f(x)=1/(1-x) at 0 is -1 &lt; x &lt; 1. So Taylor expanding at 0 is not valid for f(-1).</p>\n<p>In other words, you've simply pushed the issue from <code>Tail_S</code> to <code>Tail_B</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"c1\">-- Tail_S_eq_sum is claimed to follow from Tail_B_eq_sum,</span>\n<span class=\"c1\">-- but Tail_B_eq_sum is false since -1 is outside the radius of convergence</span>\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Tail_B_eq_sum</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span>\n<span class=\"w\">    </span><span class=\"bp\">∑'</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>BTW, this exact \"proof\" is addressed in the Wiki article: <a href=\"https://en.wikipedia.org/wiki/1_%2B_2_%2B_3_%2B_4_%2B_%E2%8B%AF#Heuristics\">https://en.wikipedia.org/wiki/1_%2B_2_%2B_3_%2B_4_%2B_%E2%8B%AF#Heuristics</a></p>\n<p>More here: <a href=\"https://www.smithsonianmag.com/smart-news/great-debate-over-whether-1234-112-180949559/\">https://www.smithsonianmag.com/smart-news/great-debate-over-whether-1234-112-180949559/</a></p>",
        "id": 490589788,
        "sender_full_name": "llllvvuu",
        "timestamp": 1734991140
    },
    {
        "content": "<p>Regarding this step:<br>\n0 + 4 + 0 + 8 + ... = 4S</p>\n<p>This is a very nice technique indeed. We can use it to prove an even more astounding result:<br>\nS = 1 + 1 + 1 + 1 + ...<br>\n= 1 + S<br>\n=&gt; 0 = 1</p>",
        "id": 490603020,
        "sender_full_name": "llllvvuu",
        "timestamp": 1734997901
    },
    {
        "content": "<p>hah! for sure... I could come out and just say: S = -1/12, and then prove that S=Sum_S n + Tail_S n later. But there is a human element. I wanted it to be extremely obvious that whatever constant (Sf n) is, that I did not \"pick\" it. It is clear that S is arbitrary UNTIL you related it to another sequence like B. Most of what in this file is justifying the choice of B.</p>",
        "id": 490607837,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735000693
    },
    {
        "content": "<p>if you think about it.... all infinite sums can be turned into S = 1+1+1+1+... with arbitrary parenthesis, and sums that don't use negative numbers. But that's the key reason why we should use a closed formulat where n is the number of expansions. The whole reason for doing this is, so that:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>If you do this, then it's clear that <code>Tail</code> means <code>...</code>, and it's not so much that <code>n</code> is \"infinity\", but it's any value you want; no matter how large. It resolves all the paradoxes, because it's now clear what we mean by an infinite value, versus the final actual value:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n\n<span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Now, you can carefully distinguish between taking a limit on <code>n</code>, versus the recursive definition. This way, we completely avoid the concept of an infinite number of iterations for any purpose at all. What this means is that it is not at all alarming that we never \"approach\" -1/12 with larger <code>n</code>n; because you mean <code>S - Tail_S n</code> when you are thinking of \"infinity\"; but <code>S</code> is a number that is related to calculating the closed form sums.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">n</span>\n</code></pre></div>\n<p>That's how we get things like the sum of all powers getting a closed form like <code>(x^(n+1)-1)/(x-1)</code>.</p>",
        "id": 490608816,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735001294
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/stream/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/489553561\">said</a>:</p>\n<blockquote>\n<p><span aria-label=\"this\" class=\"emoji emoji-1f446\" role=\"img\" title=\"this\">:this:</span> do this and come back with thoughts about it so that we can have a sensible discussion</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"773075\">@Rob Fielding</span>, have you done this yet?</p>",
        "id": 490609212,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1735001534
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/stream/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/490608816\">said</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"bp\">...</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>If you do this, then it's clear that <code>Tail</code> means <code>...</code>, and it's not so much that <code>n</code> is \"infinity\", but it's any value you want; no matter how large. It resolves all the paradoxes, because it's now clear what we mean by an infinite value, versus the final actual value:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n\n<span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>sure, we understand. the issue is that Tail_S is wrong.</p>",
        "id": 490609803,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735001897
    },
    {
        "content": "<p>This conversation isn't really so much about the S=-1/12 result, but about what it even means to formalize something. This technique of <code>X = Sum_X n + Tail_X n</code> gives me the same answers for convergent series, and for all the divergent ones that I can find.  <code>X = Sum_X n + ...</code> is a problem in that it supposes that it does not matter what is in \"...\".</p>\n<p>I mean, just from assuming that <code>X = -1</code>...</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span>\n<span class=\"bp\">-</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">X</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">))</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"n\">X</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"n\">X</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">X</span>\n\n<span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">X</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"n\">n</span>\n<span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_X</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"mi\">2</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n</code></pre></div>\n<p>This is an actual application of divergent series; calculating a closed form. I cannot believe for a second that this is illegimate; because it dispenses with dependencies on high-level math.  This is EXACTLY how you get things to work on a computer; by turning it into tedious middle-school math.</p>",
        "id": 490610064,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735002052
    },
    {
        "content": "<p>no one disputes the correctness of Sum_S = n(n + 1)/2, which is indeed middle school math. but you have given incorrect solutions for Tail_B and Tail_S. Your “solution” uses calculus which is neither middle school level nor correct.</p>",
        "id": 490610556,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735002386
    },
    {
        "content": "<p>BTW if recursion is more your speed, try proving it this way:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"n\">decreasing_by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">tail</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">tail_S</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 490611413,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735002924
    },
    {
        "content": "<p>What is missing from the proofs of S=-1/12 you see on the internet is this very subtle distinction in how far out things were expanded.  As soon as you calculate this FINITE relationship:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"bp\">=</span>\n<span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Because there is no use of <code>...</code>on the end,  there is nothing complicated in this relationship to argue over. It means that if you use <code>Sf n = Sum_S n + Tail_S n</code> and <code>Bf n = Sum_B n + Tail_B n</code>, you can take:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>This actually solves for <code>Sf n</code> without doing any summation of all. It's a result of the structure of the number system. All the <code>n</code> cancel, and there is a <code>-1/12</code> left over.  Then all this \"extra unnecessary stuff\" like the theorem <code>Sf n = 1 + 13 * (Sf n)</code> is just more checks that it is not wrong.</p>\n<p>Of course, no matter how many terms you add, you never \"get closer to -1/12\". It's just saying that the \"final\" value is a NUMBER with an infinite number of digits that forces you to express it as an equation:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n</code></pre></div>\n<p>And of course, it means that whatever you you think of (Sf n), that you multiply it times 12 and add 1 to get it to ripple-carry to produce 0. People can argue about what it \"means\", but representing -1 as an infinite-digit number works. Most of the math I do relates to cryptography and finite fields. I am not bothered by an infinite sum totalling a bizarre fraction that is not even in the set of the types being added. <code>S - Tail_X n</code> is what people mean when they say that <code>Sum_X n</code> is \"infinity\".</p>",
        "id": 490611562,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735003012
    },
    {
        "content": "<p>None of us are bothered by the idea that 1+2+3... could equal -1/12. Were you to provide a correct proof, we would accept it. You should be able to write all of the above in Lean, and I've just provided you a template for doing so.</p>",
        "id": 490611800,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735003163
    },
    {
        "content": "<p>Perhaps it would be more productive to acknowledge what we <em>do</em> agree on. We agree that Rob's Lean code proves a number of algebraic equalities.</p>\n<p>The disagreement, as far as I can tell, is that Rob believes these equations have some meaning related to infinite sums and the rest of us don't. (Either that or we disagree on how their meaning relates to infinite sums.)</p>",
        "id": 490612172,
        "sender_full_name": "Matt Diamond",
        "timestamp": 1735003406
    },
    {
        "content": "<p>nobody seems to argue that <code>Sum_S n</code> is wrong. maybe not even arguing with the whole concept of <code>Xf n = Sum_X n  + Tail_X n</code>. Just doubts about the assignment of the tail values. In the end, it's basically saying something like this:</p>\n<blockquote>\n<p>Infinity is not a number. But there are numbers with an infinite number of digits. If you add together an infinite number of natural numbers, it may have a result that is not in the natural numbers.</p>\n</blockquote>\n<p>What I am feeling right now is that even though I can calculate as a Lean4 proof that <code>Sum_S (2*n) - Sum_B (2*n) = 4 * (Sum_S n)</code>, and then use that hint to solve <code>Tail_S (2*n) - Tail_B (2*n) = 4 * (Tail_S n)</code> for the actual value of <code>Sf n</code>... no amount of formalization will convince somebody until a rocket blows up on the basis of this calculation. It's not in the Hardy book afterall!  <code>Sf n</code> was chosen for me, against my will; as soon as I calculated <code>S-B</code>, I have to accept that <code>Sf n = -1/12</code>, and there's nothing I can do about it.</p>",
        "id": 490612480,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735003585
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>This equation is incorrect as explained previously.</p>",
        "id": 490612546,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735003625
    },
    {
        "content": "<p>Or rather, it holds for the incorrect \"solutions\" to <code>Tail_S</code> and <code>Tail_B</code>, but the justification based on 0 + 4 + 0 + 8 +... is wrong</p>",
        "id": 490612673,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735003704
    },
    {
        "content": "<p>Lean readily calculates <code>Sum_S (2*n) - Sum_B (2*n) = Sum_S n</code>. That's a hint on what to try. remember that the definitions mean that adding Sum and Tail cancel out n.  The sum part is not controversial. The issue with Tail_n is that it depends on the sequence B being correct. And note that the value of Tail_S was not something I made up. It was forced upon me by this relationship:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">A</span>\n<span class=\"n\">F</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">dA</span><span class=\"bp\">/</span><span class=\"n\">dx</span>\n<span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"n\">S</span><span class=\"bp\">-</span><span class=\"n\">B</span>\n</code></pre></div>\n<p>I don't think anybody disagrees with the definition of <code>A</code>.</p>\n<p>I have a theorem in justifySf.  the Sum part of justifySf. justifySf shows that the S-B tail part forces one exact value for Sf. I can't come up with a different value. It has to be -1/12.</p>",
        "id": 490613117,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735003971
    },
    {
        "content": "<p>if you go the other way and integrate A, you get: G = 1/1 + -1/2 + 1/3 + -1/4 + ...  = ln(2). By the same exact technique. I can't get a value out of it for H = 1/1 + 1/2 + 1/3 + 1/4 + ...</p>",
        "id": 490613388,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735004077
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/490613117\">said</a>:</p>\n<blockquote>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">A</span>\n<span class=\"n\">F</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">dA</span><span class=\"bp\">/</span><span class=\"n\">dx</span>\n<span class=\"n\">B</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">F</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"n\">S</span><span class=\"bp\">-</span><span class=\"n\">B</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>This is wrong on many counts, as pointed out earlier. Also, you should not do this math in comments, as this defeats the purpose of Lean.</p>\n<p>Anyways, if you are confident in your proof, you should try to fill in <code>Tail_S_correct?</code> below:</p>\n<div class=\"codehilite\" data-code-language=\"Lean\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"n\">decreasing_by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">∑</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"bp\">.</span><span class=\"n\">range</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">i</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Sum_S_eq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Sum_S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset.sum_range_id</span><span class=\"o\">]</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">S_eq</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span>\n<span class=\"w\">  </span><span class=\"n\">induction</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">zero</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">unfold</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"w\">    </span><span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Tail_S</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">ih</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">    </span><span class=\"n\">nth_rw</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">ih</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Sum_S</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Finset.sum_range_succ</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">ring</span>\n\n<span class=\"kd\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S_wrong</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">Tail_S_correct</span><span class=\"bp\">?</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Tail_S_wrong</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n\n<span class=\"kd\">theorem</span><span class=\"w\"> </span><span class=\"n\">wrong</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"kd\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">S_eq</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Tail_S_correct</span><span class=\"bp\">?</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Tail_S_wrong</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>If you are comfortable with recursion, and your proof is indeed correct, you should not find it hard to do this at all. This is the only way anyone will be convinced.</p>",
        "id": 490614120,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735004560
    },
    {
        "content": "<p>note this about how <code>(Sf n)</code> is defined:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Tail_B is the deriv of Tail A, then evaluated at -1.  So, if you believe that <code>Sum_S</code> is correctly defined, then the definition of <code>Tail_B</code> is what you want checked.  Why was this chosen?</p>\n<p>A is a sequence of powers:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">A</span>\n<span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"n\">A</span>\n</code></pre></div>\n<p><code>A</code> trivially solves for <code>1/(1-x)</code>, but you can get <code>1*x^0 + 2*x^1 + 3*x^2 + ...</code> by differentiating it. And you can try to plug 1 into it....</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"bp\">/</span><span class=\"n\">dx</span><span class=\"o\">)(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">))</span>\n<span class=\"bp\">=</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"bp\">/</span><span class=\"n\">dx</span><span class=\"o\">)(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">))</span>\n\n<span class=\"n\">for</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">=</span><span class=\"mi\">1</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">we</span><span class=\"w\"> </span><span class=\"n\">get</span>\n\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">d</span><span class=\"bp\">/</span><span class=\"n\">dx</span><span class=\"o\">)(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">))</span>\n</code></pre></div>\n<p>And we think we got the value of S directly. But there's a problem. The closed form value is <code>1/(1-x)</code> has a divide by 0 for <code>x=1</code>. So, we use <code>B = (d/dx)A</code>, and evaluate that at -1 to get the alternating series.  Divide by zero means that it could be any value, so using the alternating series is a better way around. With that, we find <code>S-B</code> gives us something that lets us compute <code>(Sf n)</code>.</p>\n<p>In any case, if you don't like <code>Tail_B n</code>, then just remember that it is <code>deriv Tail_A (-1) x</code>. And there is nothing controversial about <code>Tail_A</code> definition.  <code>Tail_S n = (Sf n) - Sum_S n</code> means that you can't argue with the definition of Tail. You can assign <code>Sf n</code> to anything you like, until you have the <code>S - B</code> relationship, and anything but <code>-1/12</code> will create contradictions. Basically all my theorems break for anything but <code>S=-1/12</code>.</p>\n<p>The definitions for S are like this.... Where <code>justifySf</code> does the algebraic manipulations that are caused by <code>S-B</code>. We solve for <code>(Sf n)</code>, and miraculously, all <code>n</code> cancel out and give a constant.:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"c\">/-</span><span class=\"cm\"> justifySf is why this defintion was chosen. -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Term_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>Note that I could just make my justification for the choice of <code>B</code> is \"well, it happens to work! it causes us to relate <code>S</code> to a multiple of itself. But I could not get <code>deriv</code> to just work on this function with <code>Rat -&gt; Nat -&gt; Rat</code>. So I do the deriv calculation using some axioms. If you think it invalidates the proof, then we can say that I magically found this <code>B</code> with no explanation of how I found something that \"just works\".</p>\n<p>I get it that there are places where I also \"do math in the comments\", but that's just because I could not get deriv to \"just work\", and have to describe what the far more verbose theorems are doing. But it IS being done in the theorems.</p>\n<p>This is the URL at which I maintain the latest version of the code, as I add more and more theorems.  It is AMAZING that you can state these complicated formulas, and all <code>n</code> cancel out and leave you with a constant. It's a pretty stout check that there isn't a typo making it work.</p>\n<p>This general method gives me the SAME values that I see elsewhere for divergent sums. It also gives the same value for convergent sums, so this method of <code>X = Sum_X n + Tail_X n</code> appears to work in general.  It's interesting that I can't google around and find a value for <code>H = 1/1 + 1/2 + 1/3 + 1/4 + ...</code>, and discover that even though I can compute the alternating series <code>G = 1/1 + -1/2 + 1/3 + -1/4 + ... = ln(2)</code>, The algebra so far has evaded me assigning a value to <code>H</code>.</p>\n<p><a href=\"https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449\">https://gist.github.com/rfielding/cbfdca49a6320685cb8e7cfc6bbb0449</a></p>",
        "id": 490625017,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735011235
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/stream/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/490625017\">said</a>:</p>\n<blockquote>\n<p>In any case, if you don't like <code>Tail_B n</code>, then just remember that it is <code>deriv Tail_A (-1) x</code>. And there is nothing controversial about <code>Tail_A</code> definition.</p>\n</blockquote>\n<p>This is not correct.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/stream/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/490625017\">said</a>:</p>\n<blockquote>\n<p>A trivially solves for <code>1/(1-x)</code>.</p>\n</blockquote>\n<p>This is not correct unless |x| &lt; 1.</p>\n<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/stream/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/490625017\">said</a>:</p>\n<blockquote>\n<p>I get it that there are places where I also \"do math in the comments\", but that's just because I could not get deriv to \"just work\", and have to describe what the far more verbose theorems are doing. But it IS being done in the theorems.</p>\n</blockquote>\n<p>This is not correct.</p>",
        "id": 490628367,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735013649
    },
    {
        "content": "<p><code>A = 1 + x * A</code> .... do not assume we are doing calculus.  If that's the definition of <code>A</code>, then you have to admit this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">A</span>\n<span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"w\">       </span><span class=\"c1\">-- (1-x) != 0</span>\n\n<span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">A</span>\n<span class=\"w\">   </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"n\">A</span>\n</code></pre></div>\n<p>The recursion matches the infinite pattern, so we are dealing with infinite sums.</p>\n<p>That's so super-trivial.</p>",
        "id": 490628560,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735013861
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/490628560\">said</a>:</p>\n<blockquote>\n<p><code>A = 1 + x * A</code></p>\n</blockquote>\n<p>I can't resist. I will not interact further than this single post. This is the only thing I will say: that's not a <em>definition</em> of <code>A</code>. You haven't defined <code>A</code> at all. You've assumed that a certain <code>A</code> exists which satisfies this equality, and then you showed (assuming <code>x ≠ 1</code>), that <code>A = 1 ‌/ (1-x)</code>. This is what Mario tried to explain so many posts ago.</p>",
        "id": 490628851,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1735014138
    },
    {
        "content": "<p>it's defined in the Lean code ffs.  I guess the basic point that my Lean code is making is that the definition of equality should mean that <code>a=b</code> says that <code>a</code> can overwrite <code>b</code>, and <code>b</code> can overwrite <code>a</code>.</p>\n<p>Even just naming a fraction gives recursive equations like this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">12</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">S</span>\n<span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">13</span><span class=\"w\"> </span><span class=\"n\">S</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">S</span>\n</code></pre></div>\n<p>An infinite series such that if you multiplied it times 13 and added 1 and gave you the same S would fit the definition of <code>-1/12</code>. It's all a result of taking <code>=</code> seriously. You can duck-type a language btw. You can accumulate all the operations performed, and create a list of what the types could be.</p>",
        "id": 490628874,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735014173
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 490628971,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735014259
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110049\">Mario Carneiro</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/489553561\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"110050\">Sébastien Gouëzel</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/489296834\">said</a>:</p>\n<blockquote>\n<p>Please, please, go and read the introduction of Hardy, Divergent Series (<a href=\"https://sites.math.washington.edu/~morrow/335_17/Hardy-DivergentSeries%202.pdf\">https://sites.math.washington.edu/~morrow/335_17/Hardy-DivergentSeries%202.pdf</a>), especially Section 1.3, highlighting the need to define things before giving any proof about them -- note that it's not trivial, it took mathematicians several centuries to understand how important this is, but now that we have understood it you should take it seriously.</p>\n</blockquote>\n<p><span aria-label=\"this\" class=\"emoji emoji-1f446\" role=\"img\" title=\"this\">:this:</span> do this and come back with thoughts about it so that we can have a sensible discussion</p>\n</blockquote>",
        "id": 490629994,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1735015083
    },
    {
        "content": "<p>I read through it. It's useless for evaluating recursive definitions of sums; because he doesn't do that anywhere, or at all.</p>",
        "id": 490630050,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735015132
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/490625017\">said</a>:</p>\n<blockquote>\n<p>for x=1, we get</p>\n<p>1 + 2 + 3 + ... + n + (d/dx)(x^(n+1)/(1-x))</p>\n</blockquote>\n<p>You can simplify this:<br>\nB = F(-1) = 1/4 = 1 - 2 + 3 - 4 + ... + n * (-1) ^ (n + 1) + (2n + 1)/4 * (-1)^n</p>\n<p>However, this doesn't really prove anything about 1 - 2 + 3 - 4 + .... Yet, you have claimed that 1 - 2 + 3 - 4 + ... is B.</p>\n<p>The problem is that this tail term (2n + 1)/4 * (-1)^n is not really the result of the recursive continuation that you speak of (in this case, the recursive continuation would be, in Python, <code>tail_B = lambda n : (n + 1) * (-1) ** n + tail_B (n + 1)</code>, which BTW doesn't evaluate). So it is not valid to put tail_B to be (2n + 1)/4 * (-1)^n.</p>",
        "id": 490631035,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735016103
    },
    {
        "content": "<p>B = 1/4 is in the Hardy book, btw; in multiple places.</p>\n<p>I could just say that I used it because it happens to work. But starting by differentiating A means that Sum_A and Tail_A determine what Sum_B and Tail_B are.</p>",
        "id": 490631159,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735016221
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">        </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Af</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Term_A</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\">  </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\">            </span><span class=\"c1\">-- d[Af x]/dx</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">/</span><span class=\"o\">((</span><span class=\"mi\">1</span><span class=\"bp\">-</span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"c1\">-- d[Sum_A x n]/dx</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_F</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"c1\">-- d[Tail_A x n]/dx</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Term_F</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"o\">:</span><span class=\"n\">ℤ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_F</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">^</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"mi\">4</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Ff</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Bf</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Term_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">+</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"bp\">/</span><span class=\"mi\">2</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\">     </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"mi\">4</span><span class=\"bp\">*</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_B</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">n</span><span class=\"o\">)))</span><span class=\"bp\">/</span><span class=\"mi\">3</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Tail_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sf</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Term_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"o\">:</span><span class=\"n\">ℕ</span><span class=\"o\">):</span><span class=\"n\">ℚ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">Sum_S</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>I used theorems in the lean file to link B = F(-1). F = dA/dx.</p>",
        "id": 490631309,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735016375
    },
    {
        "content": "<p>I understand where 1/4 comes from. I'm saying the \"recursive evaluation\" of 1 - 2 + 3 - 4 + ... is not 1/4. The relation to 1/4 in Hardy is a different relation, which is what we've been trying to say. 1 + 2 + 3 + 4 ... <em>does</em> have an associated value -1/12 in a well-defined framework (analytic continuation), and within these frameworks also 1 - 2 + 3 - 4 + ... has the associated value 1/4. But that framework is not the standard framework, nor is your \"recursive evaluation\" framework well-defined like analytic continuation is.</p>",
        "id": 490631636,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735016601
    },
    {
        "content": "<p>and a really crucial point: if I used A with \"...\" on the end, I would have a problem. i would not be able to differentiate the tail because i didn't name it! that's what started this whole journey.</p>\n<p>Note that the tail should ALSO be differentiated, but we never named it</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n<span class=\"n\">dA</span><span class=\"bp\">/</span><span class=\"n\">dx</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"bp\">...</span>\n</code></pre></div>\n<p>vs</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">A</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"o\">(</span><span class=\"mi\">2</span><span class=\"o\">)</span>\n\n<span class=\"n\">dA</span><span class=\"bp\">/</span><span class=\"n\">dx</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">dA</span><span class=\"bp\">/</span><span class=\"n\">dx</span><span class=\"w\"> </span><span class=\"n\">Sum_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">dA</span><span class=\"bp\">/</span><span class=\"n\">dx</span><span class=\"w\"> </span><span class=\"n\">Tail_A</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">n</span>\n</code></pre></div>\n<p>And as soon as I had to do that, I discovered that I can use recursion to deal with infinite sums in a much better way.</p>",
        "id": 490631676,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735016641
    },
    {
        "content": "<p>This is true:<br>\n1/(1 - x) = x^0 + x^1 + ... + x^n + Tail_A(n)</p>\n<p>This is not (unless |x| &lt; 1),  but you are relying on it to be:<br>\nx^0 + x^1 + ... + x^n + ... = x^0 + x^1 + ... + x^n + Tail_A(n)</p>\n<p>The issue is that both:<br>\n1/(1 - x)<br>\nx^0 + x^1 + ... + x^n + ...</p>\n<p>are solutions to A = 1 + x * A. But they are different solutions; the latter is the solution<br>\nf(x) = NaN if |x| &gt;= 1 else 1/(1 - x). This also satisfies the equation: NaN = 1 + x * NaN, but it is not the same. So if you define A = 1/(1 - x) you cannot also use it as x^0 + x^1 + ... + x^n + ... This is the same as the famous 0 = 1 proof which leverages the fact that sqrt has two solutions.</p>\n<p>Now, f(x) = 1/(1-x) is the unique analytic continuation of x^0 + x^1 + ... + x^n + ... to the connected set ℂ \\ {1}, since it agrees on the open disk |x| &lt; 1. It is correct to say that the <em>analytic continuation</em> of x^0 + 2x^1 + 3x^2 + ... evaluated at -1 is 1/4, but x^0 + 2x^1 + 3x^2 + ... itself evaluated at -1 is NaN.</p>",
        "id": 490633200,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735017991
    },
    {
        "content": "<p>By the way, you can write the equation for B without using differentiation, as it is just an arithmetico-geometric series:<br>\nB = xB + A = xB + 1/(1-x) =&gt; B = 1/(1-x)^2 (warning: multiple solutions as you can put NaN in places and get a different solution)</p>",
        "id": 490635289,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735019933
    },
    {
        "content": "<p>i tried to not introduce a B at all. i tried to use (dA/dx [-1]), but if i want sorry-free Lean, i just run into too many cases where i can't fill out the proofs in the theorems. ufold, simp, ring_nf is about all i can deal with. i wish there was a rational_algebra tactic, and i wish that when i did a deriv across +,-,*,/,log,^ ... that was just a symbolic translation. </p>\n<p>While I am learning TLA+, I gave up on putting it into Lean. There needs to be an option to automatically verify simple things; where you just need to know that it IS true. ie:   <code>Sf n = Sum_S n + Tail_S n := by rational_algebra</code>. What I would really want out of a theorem prover is to mostly just declare something I think is true, and extract a sample path when I have to.</p>",
        "id": 490636049,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735020444
    },
    {
        "content": "<p>it may not be obvious that the whole point is to completely avoid all advanced math. computers deal with finite symbol manipulation. An O(2^n) solution is useless. An O(infty) one is even less so. I got here trying to completely eliminate infinite sums and products. I was trying to turn integration into a finite process. I can't use Reimann Zeta and Analytic Continuations, because I don't understand that. If you can't write the code, then you don't understand it.</p>",
        "id": 490636401,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735020732
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/490636401\">said</a>:</p>\n<blockquote>\n<p>it may not be obvious that the whole point is to completely avoid all advanced math.</p>\n</blockquote>\n<p>No, it's completely obvious. But it just has holes unfortunately. Such as the one pointed out above that A = 1 + x * A has multiple solutions because A can take NaN values at more places than just x = 1 and still be a solution, which means that you cannot assert A = 1 / (1 - x) to be the solution.</p>",
        "id": 490636555,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735020892
    },
    {
        "content": "<p>more like:  when you assert   <code>A = 1/(1-x)</code>, <code>x != 1</code> is a side-condition. You get a contradiction if you then assert <code>x = 1</code> in the same environment. It's just that if you calculate <code>F(1) = 1 + 2 + 3 + ... + n + Tail_F(n)</code> that you need to use something other than <code>1/((1-x)^2)</code> to get the value. In some cases, there will be two options available, and you need to go down the path that does not have a contradiction in it.</p>",
        "id": 490636835,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735021112
    },
    {
        "content": "<p>ie:   <code>d[x^n] = n/x  x^n dx</code> or <code>d[x^n] = n x^(n-1) dx</code> ... something I ran into when trying to write d[] for Geometric Algebra (non-commutative args). Just because there is a divide by 0 following a choice that was made, does not mean that you can't pick a different option to get around the problem.</p>",
        "id": 490637036,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735021294
    },
    {
        "content": "<p>in geometric algebra, that example, n might be a.... vector!</p>",
        "id": 490637116,
        "sender_full_name": "Rob Fielding",
        "timestamp": 1735021348
    },
    {
        "content": "<blockquote>\n<p>does not mean that you can't pick a different option</p>\n</blockquote>\n<p>that's exactly the issue.</p>\n<p>Given <code>A = 1 + x * A</code> you have picked <code>A = 1/(1-x) if x != 1 else undefined</code>. Thus you conclude that <code>x = -1 =&gt; dA/dx = 1/4</code>.</p>\n<p>I (and the rest of the mathematical world) have picked <code>A = 1/(1-x) if -1 &lt; x &lt; 1  else undefined</code> which also satisfies <code>A = 1 + x * A</code>. Thus I conclude that <code>x = -1 =&gt; dA/dx = undefined</code>.</p>\n<p>The issue is that your equation <code>A = 1 + x * A</code> does not pin down <code>A</code>.</p>\n<p>We're not doing advanced mathematics because we want to. In math, and especially in the Lean community, we do prefer to KISS. But without the field of analysis we really have no way to dictate <em>which</em> solution to <code>A = 1 + x * A</code> is the correct one to describe 1 + x + x^2 + ...</p>",
        "id": 490637517,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735021688
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/490636049\">said</a>:</p>\n<blockquote>\n<p>i tried to not introduce a B at all. i tried to use (dA/dx [-1]), but if i want sorry-free Lean, i just run into too many cases where i can't fill out the proofs in the theorems. ufold, simp, ring_nf is about all i can deal with. i wish there was a rational_algebra tactic, and i wish that when i did a deriv across +,-,*,/,log,^ ... that was just a symbolic translation.</p>\n</blockquote>\n<p>I think this discussion would go a lot better if you attempted to do something like this, got stuck, and asked for help with it instead of trying to avoid it entirely and using a flawed proof methodology instead. It is actually possible to prove things about derivatives, logarithms etc. in lean, and it is very important to attempt it even though the methods are different from what you are used to, because they actually allow you to have lean \"force your hand\" rather than using equations in comments as a justification mechanism.</p>",
        "id": 490730835,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1735090990
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"773075\">Rob Fielding</span> <a href=\"#narrow/channel/113489-new-members/topic/finite.20recursive.20-1.2F12.3D1.2B2.2B3.2B.2E.2E.2E.20accepted!/near/490636401\">said</a>:</p>\n<blockquote>\n<p>it may not be obvious that the whole point is to completely avoid all advanced math. computers deal with finite symbol manipulation. An O(2^n) solution is useless. An O(infty) one is even less so.</p>\n</blockquote>\n<p>I'm not sure whether you are completely appreciating this, but all of lean is finite symbol manipulation, <em>including</em> when talking about infinite sums and so on. Your whole proof is O(1), and this is still true if it's doing a proof about infinite sums or ramanujan summation or analytic continuation, or rational algebra. There is no O(infty), a proof which never finishes proofing is not a proof at all. Proofs are by necessity finite objects.</p>",
        "id": 490731183,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1735091331
    },
    {
        "content": "<p>BtW, the fallacy with <code>A</code> is known as <a href=\"https://en.wikipedia.org/wiki/Affirming_the_consequent\">affirming the consequent</a>.</p>\n<p>The full proposition is:</p>\n<ol>\n<li>If 1 + x + x^2 = … sums to some value A, then A satisfies A = 1 + x * A.</li>\n</ol>\n<p>It is valid to take the contrapositive:</p>\n<ol start=\"2\">\n<li>If no A satisfies A = 1 + x * A, then 1 + x + x^2 = … does not sum to any value.</li>\n</ol>\n<p>It is not valid to take the converse:</p>\n<ol start=\"3\">\n<li>If some A satisfies A = 1 + x * A, then 1 + x + x^2 = … sums to A.</li>\n</ol>\n<p>1 and 2 can actually be stated and proved in Lean (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=sum_add_tsum_nat_add#doc\">docs#sum_add_tsum_nat_add</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Mathlib.Tactic.Contrapose.contrapose#doc\">docs#Mathlib.Tactic.Contrapose.contrapose</a>), and 3 can be stated and disproved (<a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=not_summable_of_ratio_test_tendsto_gt_one#doc\">docs#not_summable_of_ratio_test_tendsto_gt_one</a>).</p>\n<p>The claim that 1 + 2 + 4 + 8 + … = -1 is based on the same fallacy (indeed it’s just x=2).</p>\n<p>The following variant of 3 is true for Euler summation:</p>\n<ol start=\"4\">\n<li>If some A satisfies A = 1 + x * A, then 1 + x + x^2 = … (E) sums to A.</li>\n</ol>\n<p>Though the corresponding variants of 1 and 2 are not true, since for x=1 we have 1 + 1 + 1 + … (E) sums to -1/2, though A = 1 + A has no solution in reals.</p>",
        "id": 490760158,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735117529
    }
]