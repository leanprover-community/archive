[
    {
        "content": "<p>Hi everybody! My name is Jason.  I finished a PhD in Mathematics a few years ago but never looked at Lean before. I'm trying to figure out how to use it now and I've got some questions that I can't solve on my own from the documentation.</p>\n<p>I was playing the natural numbers game to learn how to use Lean, but there are many things that it doesn't go over. Here's one thing I'm stuck on right now:</p>\n<p>I can multiply both sides on the left by a:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_right_inj</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n</code></pre></div>\n<p>and the goal changes to </p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>But what if instead of <br>\n<code> (h1 : a \\not= 0)</code><br>\n I have <br>\n<code>(h1 : a \\not= 1)</code><br>\nand the expression is <br>\n<code>x = y / (a-1)</code><br>\n? How do I do multiply both sides on the left by (a - 1)?</p>\n<p>I created a sketch of this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">≠</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- do something to get (h2 : a - 1 ≠ 0) ?</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">mul_right_inj</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"m\">1</span>\n</code></pre></div>\n<p>Also, </p>\n<ol>\n<li>how do you create a new label for </li>\n</ol>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">\\</span><span class=\"n\">ne</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>or is it not done that way?</p>\n<ol start=\"2\">\n<li>What is the effect of the \".1\" notation in the apply statement?</li>\n</ol>",
        "id": 501893080,
        "sender_full_name": "Jason Suagee",
        "timestamp": 1740511607
    },
    {
        "content": "<ol>\n<li>the <code>have</code> tactic. Alternatively, if you want to apply a lemma but don't have all its arguments, you can put an underscore, like so: <code>apply (Nat.mul_right_inj _).1</code> and it should create a new goal for the missing proof</li>\n<li>in this case, it turns an Iff statement into its left-to-right implication. I do agree that it's not very desciptive. More commonly <code>.mp</code> is used instead, for \"modus ponens\"</li>\n</ol>",
        "id": 501894487,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1740511994
    },
    {
        "content": "<p>more generally <code>.1</code> allows you, when you have a structure containing several pieces of data (think of a tuple), to retrieve its first component (and similar for <code>.2</code>, <code>.3</code>, etc., depending on how many \"fields\" the structure has). Typically there are more descriptive ways to do this though.</p>",
        "id": 501894904,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1740512137
    },
    {
        "content": "<p>The universal answer to \"how to apply a function to the both sides of an equation\" is <code>congrArg</code>. For example:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">#</span><span class=\"n\">check</span>\n<span class=\"w\">  </span><span class=\"k\">show</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">from</span><span class=\"w\"> </span><span class=\"bp\">λ</span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">)(</span><span class=\"n\">e</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"bp\">/</span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"bp\">-</span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">congrArg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"n\">e</span>\n</code></pre></div>\n<p>You may need to apply some simplifying lemmas after that though.</p>",
        "id": 501895064,
        "sender_full_name": "suhr",
        "timestamp": 1740512176
    },
    {
        "content": "<p>do note that some things we might tell you about won't work for NNG but do work in \"normal\" Lean. If i understand right, this is done for teaching purposes</p>",
        "id": 501895355,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1740512262
    },
    {
        "content": "<p>I would recommend reading <a href=\"https://leanprover.github.io/theorem_proving_in_lean4/\">Theorem Proving in Lean 4</a> and using NNG only as a set of exercises.</p>",
        "id": 501896780,
        "sender_full_name": "suhr",
        "timestamp": 1740512743
    },
    {
        "content": "<p>I would recommend to continue with the NNG.</p>",
        "id": 501905924,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1740516032
    },
    {
        "content": "<p>Just a note that <code>a ≠ 1</code> doesn't imply <code>a - 1 ≠ 0</code> for <code>a : ℕ</code> in Lean, because natural number subtraction is actually truncated so <code>0 - 1 = 0</code></p>",
        "id": 502070329,
        "sender_full_name": "Daniel Weber",
        "timestamp": 1740582435
    }
]