[
    {
        "content": "<p>I wrote (with a big red <code>sorry</code>) this:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"n\">partial</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">collatz</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"n\">collatz</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"n\">collatz</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">collatz_iter</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\">     </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">collatz_iter</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">collatz</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">collatz_iter_one</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">collatz_iter</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>I want to explore it in a semi-automated way based on my insights. I have a couple of ideas related to:</p>\n<ul>\n<li>dynamical systems concepts and defining some sort of dynamical maps</li>\n<li>random walk models and density concepts</li>\n<li>graph construction and invariants</li>\n</ul>\n<p>Now, I'd like to get like a <em>map</em> based on what's available in <code>mathlib4</code> of the options, even if that's all filled with sorry's. That'd be very helpful.</p>\n<p>Does there exist a plugin based on mathlib4 and Lean4 data (with settings where I could add my LLM keys) that I could use? </p>\n<p>LLMs are not good enough at this yet. Still, that's a weaker use case where the human insight needs to be stronger (and the LLM can be \"fuzzier\"), and the quality of the map does not need to be perfect (because one can't yet expect that the LLM will generate the working code (it might change))</p>",
        "id": 481743154,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731337402
    },
    {
        "content": "<p>i think you might be misunderstanding what your <code>collatz</code> does; due to the recursion, it <em>already does steps untill it gets to 1</em></p>",
        "id": 481744129,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731337656
    },
    {
        "content": "<p>to the point that the collatz conjecture is equivalent to proving that this function <code>collatz</code> terminates.</p>",
        "id": 481744359,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731337710
    },
    {
        "content": "<p>due to this, your <code>collatz_iter</code> is likely of no use to you</p>",
        "id": 481744509,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731337749
    },
    {
        "content": "<p>Yes, I am just learning Lean, so feel free to help me correct the code too. Any help would be appreciated!</p>",
        "id": 481744743,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731337805
    },
    {
        "content": "<p>likely, you instead want the following definition for collatz:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">collatz</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">1</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 481744792,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731337820
    },
    {
        "content": "<p>this does a collatz-step when n is not 0 or 1, otherwise gives 1</p>",
        "id": 481744877,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731337850
    },
    {
        "content": "<p>the collatz conjecture would then be that for any <code>n</code> there is a <code>y</code> such that <code>collatz_iter y n = 1</code></p>",
        "id": 481744999,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731337889
    },
    {
        "content": "<p>i forgot <code>0</code> is a natural number, oops <span aria-label=\"upside down\" class=\"emoji emoji-1f643\" role=\"img\" title=\"upside down\">:upside_down:</span></p>",
        "id": 481745221,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731337942
    },
    {
        "content": "<p>Btw. I think the reason for that iterator was that I somehow couldn't apply that function multiple times within the theorem statement.. </p>\n<p><span class=\"user-mention\" data-user-id=\"684366\">@Edward van de Meent</span> Is the reason you're not doing this as a recurrent function that it's somehow not possible to define a theorem like this?</p>",
        "id": 481749203,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731339039
    },
    {
        "content": "<p>from my understanding, by saying <code>partial</code> you lose a lot of theorem proving power about what value this function takes</p>",
        "id": 481749571,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731339132
    },
    {
        "content": "<p>(my understanding is very limited) I use <code>partial</code> because of something like this: \"I am not sure it'll terminate, and I want it to make the code work asap\". I guess I could remove that thing knowing that 3k+1 sequence eventually gets to 1?</p>",
        "id": 481750284,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731339346
    },
    {
        "content": "<p>I'm not sure I can even remove <code>partial</code> from this theorem -- if that's the case, perhaps you really need to iterate and can't use a recurrent function? But I don't know.</p>",
        "id": 481750625,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731339442
    },
    {
        "content": "<p>for the sake of clarity: the following is how one might formalize the statement of the collatz conjecture. (no proof)</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"sd\">/-- do a single collatz-step. `collatz_step n` returns 1 if `n &lt; 2`, otherwise `n/2` if `n` is even, otherwise `3 * n + 1`-/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">collatz_step</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n\n<span class=\"sd\">/-- `collatz_iter k n` does `k` collatz-steps on `n` -/</span>\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">collatz_iter</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\">     </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">collatz_iter</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">collatz_step</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n\n<span class=\"bp\">#</span><span class=\"n\">eval</span><span class=\"w\"> </span><span class=\"n\">collatz_iter</span><span class=\"w\"> </span><span class=\"mi\">986</span><span class=\"w\"> </span><span class=\"mi\">670617279</span><span class=\"w\"> </span><span class=\"c1\">-- this number gets to 1 only after 986 steps</span>\n\n<span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">collatz_conjecture</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">∨</span><span class=\"w\"> </span><span class=\"bp\">∃</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">collatz_iter</span><span class=\"w\"> </span><span class=\"n\">k</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>note that there is no need for <code>partial</code> here.</p>\n<p>i do not understand what theorem using <code>partial</code> you mean?</p>",
        "id": 481754538,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731340498
    },
    {
        "content": "<p>Yes, so your line is <code>step - iterate - use the iter in the theorem definition.</code> Is there a way to use a recurrent function in the definition, i.e. can one also use the existing recurrent function in the theorem?</p>\n<p>As for <code>partial</code>, I was getting errors related to the function potentially not terminating, so I learnt to use <code>partial</code> and <code>noncomputable</code>.</p>",
        "id": 481755523,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731340784
    },
    {
        "content": "<p><code>collatz_iter</code> is basically \"collatz with a fuel parameter\". So it is recurrent up to <code>fuel</code> steps.</p>",
        "id": 481757027,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1731341185
    },
    {
        "content": "<p>i don't really think it makes sense to make a function that iterates these steps...</p>",
        "id": 481757422,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731341279
    },
    {
        "content": "<p>there is no clear criterion for when to stop, or there is no proof that that criterion will always be met after some number of iterations.</p>",
        "id": 481757564,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731341310
    },
    {
        "content": "<p>If you don't want to define a separate <code>step</code> function, you can inline it:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fueled_collatz</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fuel</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">fueled_collatz</span><span class=\"w\"> </span><span class=\"n\">fuel</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">↦</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">else</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 481757623,
        "sender_full_name": "Yakov Pechersky",
        "timestamp": 1731341328
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/113489-new-members/topic/3k.2B1.20experiment.20-.20plugin.20for.20maps.20.2F.20feature/near/481757422\">schrieb</a>:</p>\n<blockquote>\n<p>i don't really think it makes sense to make a function that iterates these steps...</p>\n</blockquote>\n<p>You are actually using <code>collatz_iter</code> in your snippet.</p>",
        "id": 481758015,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731341427
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"308899\">Yakov Pechersky</span> <a href=\"#narrow/channel/113489-new-members/topic/3k.2B1.20experiment.20-.20plugin.20for.20maps.20.2F.20feature/near/481757623\">schrieb</a>:</p>\n<blockquote>\n<p>If you don't want to define a separate <code>step</code> function, you can inline it:</p>\n<p><div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fueled_collatz</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fuel</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">fueled_collatz</span><span class=\"w\"> </span><span class=\"n\">fuel</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">↦</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">else</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n</code></pre></div><br>\n</p>\n</blockquote>\n<p>I'll try it out. Didn't know how to inline it.</p>",
        "id": 481758115,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731341455
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"672170\">Michael Bucko</span> <a href=\"#narrow/channel/113489-new-members/topic/3k.2B1.20experiment.20-.20plugin.20for.20maps.20.2F.20feature/near/481758015\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/113489-new-members/topic/3k.2B1.20experiment.20-.20plugin.20for.20maps.20.2F.20feature/near/481757422\">schrieb</a>:</p>\n<blockquote>\n<p>i don't really think it makes sense to make a function that iterates these steps...</p>\n</blockquote>\n<p>You are actually using <code>collatz_iter</code> in your snippet.</p>\n</blockquote>\n<p>yes, but i got the sense that that definition was not what you're interested in?</p>",
        "id": 481758280,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731341512
    },
    {
        "content": "<p>since you wanted recurrence in the definition?</p>",
        "id": 481758351,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731341527
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/113489-new-members/topic/3k.2B1.20experiment.20-.20plugin.20for.20maps.20.2F.20feature/near/481758280\">schrieb</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"672170\">Michael Bucko</span> <a href=\"#narrow/channel/113489-new-members/topic/3k.2B1.20experiment.20-.20plugin.20for.20maps.20.2F.20feature/near/481758015\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/channel/113489-new-members/topic/3k.2B1.20experiment.20-.20plugin.20for.20maps.20.2F.20feature/near/481757422\">schrieb</a>:</p>\n<blockquote>\n<p>i don't really think it makes sense to make a function that iterates these steps...</p>\n</blockquote>\n<p>You are actually using <code>collatz_iter</code> in your snippet.</p>\n</blockquote>\n<p>yes, but i got the sense that that definition was not what you're interested in?</p>\n</blockquote>\n<p>No, I think it's completely fine to do it like this <span aria-label=\"thank you\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"thank you\">:thank_you:</span> </p>\n<p>I was just wondering whether there's a more concise way, without iterating these steps as a separate function. </p>\n<p>Looking into that inlining now.</p>",
        "id": 481758774,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731341656
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"308899\">@Yakov Pechersky</span>  <code>#eval fueled_collatz 986 670617279</code> gives me 1. So not only don't I need <code>partial</code>, but can also re-use my recurrent implementation.</p>\n<p>Didn't know how to do it! Thank you</p>",
        "id": 481759364,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731341844
    },
    {
        "content": "<p>So the definition is great now. </p>\n<p>How about the next step? Let's say I want to create a dynamical system-based model of the chains starting at the 3k+1 seed.</p>\n<p>And I don't want to ask LLMs directly -- because I don't think they'll be that helpful at the moment (this will change).</p>\n<p>Does there exist any mathlib4 assistant plugin (I am already using Loogle, Moogle, Duper, LeanDojo, and so on) that could recommend certain basic (or more advanced) concepts / proof lines from other mathlib4 proofs?</p>",
        "id": 481761896,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731342580
    },
    {
        "content": "<p><code>partial</code> causes the definition to become completely opaque, meaning it would be impossible to <code>unfold</code> it. It's a keyword mainly useful for programming purposes.</p>\n<p>Like Edward said, being able to convince Lean that <code>partial</code> is not needed for the first version of <code>collatz</code> is the same thing as proving the Collatz conjecture :-)</p>",
        "id": 481775864,
        "sender_full_name": "Kyle Miller",
        "timestamp": 1731346909
    },
    {
        "content": "<p>(assuming you add the 0-clause. if you don't, you're proving lean inconsistent!)</p>",
        "id": 481782627,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1731349362
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"306601\">Kyle Miller</span> <a href=\"#narrow/channel/113489-new-members/topic/3k.2B1.20experiment.20-.20plugin.20for.20maps.20.2F.20feature/near/481775864\">schrieb</a>:</p>\n<blockquote>\n<p><code>partial</code> causes the definition to become completely opaque, meaning it would be impossible to <code>unfold</code> it. It's a keyword mainly useful for programming purposes.</p>\n<p>Like Edward said, being able to convince Lean that <code>partial</code> is not needed for the first version of <code>collatz</code> is the same thing as proving the Collatz conjecture :-)</p>\n</blockquote>\n<p>Perfect. I eventually didn't have to use it.</p>",
        "id": 481791824,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731352939
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"684366\">@Edward van de Meent</span>  The 0-clause should be there. Btw. check out this from <span class=\"user-mention\" data-user-id=\"308899\">@Yakov Pechersky</span> - that's already included.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">fueled_collatz</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span>\n<span class=\"w\">  </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">fuel</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">fueled_collatz</span><span class=\"w\"> </span><span class=\"n\">fuel</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">go</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">↦</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">%</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"o\">)</span>\n<span class=\"w\">    </span><span class=\"k\">else</span>\n<span class=\"w\">      </span><span class=\"o\">(</span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span>\n</code></pre></div>",
        "id": 481792247,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731353141
    },
    {
        "content": "<p>So, let's say I want to create a dynamical system-based model of the chains starting with the 3k+1 seed.</p>\n<p>Does there exist any mathlib4 assistant plugin that could recommend certain basic (or more advanced) concepts / proof lines from other mathlib4 proofs?</p>\n<p>LLMs currently give me concepts like, which is a bit inspiring, but also feels way too superficial atm (they will get better) (some examples below) I'd need something that understands mathlib4 very well.</p>\n<p><code>def orbit (n : ℕ) : ℕ → ℕ | 0 =&gt; n | (k+1) =&gt; collatz (orbit k)</code></p>\n<p><code>theorem only_trivial_cycle : ∀ n k : ℕ, is_cycle n k → n = 1 := by</code></p>\n<p><code>theorem collatz_stable_fixed_point : is_stable_fixed_point 1 := by</code></p>",
        "id": 481793610,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1731353725
    }
]