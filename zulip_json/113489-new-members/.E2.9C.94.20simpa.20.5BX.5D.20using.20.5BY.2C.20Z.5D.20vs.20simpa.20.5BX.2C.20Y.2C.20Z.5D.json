[
    {
        "content": "<p>Looking at <a href=\"https://github.com/ImperialCollegeLondon/formalising-mathematics-2024/blob/0eb9abdd52bde8f2ebb6fc1d4568d7f8f559c32a/FormalisingMathematics2024/Solutions/Section02reals/Sheet5.lean#L65\">this example</a> from formalizing-mathematics-2024:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">tendsTo_sub</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℕ</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ℝ</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TendsTo</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hb</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">TendsTo</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">TendsTo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sub_eq_add_neg</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">tendsTo_add</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tendsTo_neg</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>What does <code>using</code> do here? I've noticed this works just as fine:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sub_eq_add_neg</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tendsTo_add</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tendsTo_neg</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>as well as</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sub_eq_add_neg</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tendsTo_add</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tendsTo_neg</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>or</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">simp</span><span class=\"w\"> </span><span class=\"n\">only</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">sub_eq_add_neg</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">tendsTo_add</span><span class=\"w\"> </span><span class=\"n\">ha</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">tendsTo_neg</span><span class=\"w\"> </span><span class=\"n\">hb</span><span class=\"o\">)]</span>\n</code></pre></div>\n<p>Does <code>using</code> do anything special here?</p>",
        "id": 504294527,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741451731
    },
    {
        "content": "<p>It looks like there's some documentation here: <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Tactics.html#Lean.Parser.Tactic.tacticSimpa?!_\">https://leanprover-community.github.io/mathlib4_docs/Init/Tactics.html#Lean.Parser.Tactic.tacticSimpa?!_</a></p>",
        "id": 504295418,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1741452353
    },
    {
        "content": "<p>Simplifies the thing after <code>using</code> and tries to use that to close the goal, instead of the usual which is simplifying the goal and trying to close with something in context.</p>",
        "id": 504295531,
        "sender_full_name": "Chris Bailey",
        "timestamp": 1741452415
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"418569\">Dan Abramov</span> has marked this topic as resolved.</p>",
        "id": 504295556,
        "sender_full_name": "Notification Bot",
        "timestamp": 1741452431
    },
    {
        "content": "<p>Nice, thanks.</p>",
        "id": 504295569,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741452439
    },
    {
        "content": "<p>More accurately, I think the docs imply <em>both</em> the goal and the thing after <code>using</code> get simplified (and have the <code>[]</code> rules applied in the process), and then get matched.</p>",
        "id": 504407417,
        "sender_full_name": "Dan Abramov",
        "timestamp": 1741536675
    },
    {
        "content": "<p>That would be a correct implication</p>",
        "id": 504413598,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1741541411
    }
]