[
    {
        "content": "<p>I would like to try Lean again, but I'm sure I will need help, both with Lean and on how to deal with Zulip. <span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span> advised me to use this channel for now, I hope that's okay. I plan to ask my questions as responses in this thread, is that reasonable?</p>",
        "id": 497859764,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738751730
    },
    {
        "content": "<p>For example, how do I configure Zulip, so that I won't be noticed about unread messages other than those explicitly mentioning me, and the ones in this thread? All those huge and steadily increasing numbers of unread messages I don't want to see.</p>",
        "id": 497860128,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738751840
    },
    {
        "content": "<p>Hey! You can <a href=\"/user_uploads/3121/Ptu1ftPyseIa6iLfccxNTS4_/image.png\">Mute channel</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/Ptu1ftPyseIa6iLfccxNTS4_/image.png\" title=\"Mute channel\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"477x116\" src=\"/user_uploads/thumbnail/3121/Ptu1ftPyseIa6iLfccxNTS4_/image.png/840x560.webp\"></a></div>",
        "id": 497860644,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1738751992
    },
    {
        "content": "<p>That's helpful! So if I also mute the <a class=\"stream\" data-stream-id=\"113489\" href=\"/#narrow/channel/113489-new-members\">#new members</a> channel, will I still be notified of responses to my messages there?</p>",
        "id": 497862738,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738752613
    },
    {
        "content": "<p>I plan to unmute stuff selectively as I move on, but for now I would prefer not to be overwhelmed.</p>",
        "id": 497862824,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738752640
    },
    {
        "content": "<p>I <em>believe</em> so. Just in case, <a href=\"/user_uploads/3121/PctZGzh3A0SuZd8ZvOarF6Cj/image.png\">you can also more selectively mute and unmute individual topics</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/3121/PctZGzh3A0SuZd8ZvOarF6Cj/image.png\" title=\"you can also more selectively mute and unmute individual topics\"><img data-original-content-type=\"image/png\" data-original-dimensions=\"515x130\" src=\"/user_uploads/thumbnail/3121/PctZGzh3A0SuZd8ZvOarF6Cj/image.png/840x560.webp\"></a></div>",
        "id": 497863322,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1738752790
    },
    {
        "content": "<p>But the menu command in your screenshot is just about catching up, as soon as someone posts something in a thread, it will be asking for attention again?</p>",
        "id": 497864038,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738753008
    },
    {
        "content": "<p>Anyway, I see that you can also unsubscribe from a channel as well. I'm now busy both muting <em>and</em> unsubscribing from all channels. Even that is daunting!</p>",
        "id": 497864171,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738753041
    },
    {
        "content": "<p>A more serious question: I would like to set up things so I have just <em>one</em> Lean installation in <code>~/.elan/toolchains</code> on my system, and <em>one</em> mathlib in <code>.lake/packages/mathlib</code>. For that I plan to have a single \"project\" that contains that single mathlib, with all the real projects that I work on in subdirectories. So I would like to regularly run some command (<code>lake update</code>?) to update that \"project\" so that I get up-to-date.</p>",
        "id": 497865463,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738753387
    },
    {
        "content": "<p>Now, the question for me is what versions those should have. For Lean I would like to update (say nightly) to the \"stable\" version (at what point then the older Lean installation should be deleted). For mathlib, I would like it to be the version that matches the stable Lean version <em>or</em> the current version on master in git (I guess those are different?)</p>",
        "id": 497865804,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738753490
    },
    {
        "content": "<p>So how do I set up things that it will work like this?</p>",
        "id": 497865848,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738753504
    },
    {
        "content": "<p>You can indeed choose to have 1 mega-project that all work will be on the same version of Mathlib + Lean. This might be a little tricky when collaborating, and only sharing a subset of your project with a collaborator, but I imagine it's doable.</p>\n<p>I recommend that you stay on the stable version of Lean, which updates every month, and its corresponding Mathlib version. You can also stay on the release candidate for Lean (then you're 1 month ahead in Lean features) and can update Mathlib however frequently you want. It doesn't matter that much which one you choose, and you can easily switch. You can specify this in your lakefile.</p>\n<p>To create a new project, run <code>lake new MyProject math</code> (more detailed instructions <a href=\"https://leanprover-community.github.io/install/project.html\">here</a>). Then you can edit the <code>lakefile.toml</code> and add <code>rev = \"stable\"</code> under the mathlib dependency if you only want to update Lean once a month (no need to change anything if you always want the latest version.</p>",
        "id": 497883616,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1738759256
    },
    {
        "content": "<p>To actually update Mathlib/Lean just run <code>lake update</code> in your repo. You can then write a small script to uninstall previous versions of Lean (using <code>elan toolchain uninstall ...</code>), and delete the compressed <code>.olean</code> files you downloaded (the uncompressed ones are in your project directory and should be kept).</p>",
        "id": 497884015,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1738759388
    },
    {
        "content": "<p>You can specify the environment variables <code>ELAN_HOME</code> and <code>XDG_CACHE_HOME</code> (at the very start of the process) if you want to customize the location where the installed Lean toolchains and the compressed <code>.olean</code>s will be stored. Besides your project directory, these are the only directories with any Lean-related files (AFAIK). See also <a href=\"#narrow/channel/270676-lean4/topic/installing.20Lean.20on.20university.20computer\">this thread</a></p>",
        "id": 497884389,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1738759506
    },
    {
        "content": "<p>There's been talk of specifying a custom directory where your dependencies are kept, but I don't know if there is an easy/workable solution for that (this would allow you to create multiple projects, but only have 1 location with the dependencies).</p>",
        "id": 497884761,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1738759625
    },
    {
        "content": "<p>This is very helpful, I'll fiddle with this. I understand \"stable\" changes once a month? (Just for my curiosity: if I clone mathlib, and checkout master, how do I find what Lean version this belongs to?)</p>",
        "id": 497886729,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738760259
    },
    {
        "content": "<p>So what are the defaults for <code>ELAN_HOME</code> and <code>XDG_CACHE_HOME</code>? The first is <code>~/.elan</code>, I guess, but what is the other?</p>",
        "id": 497886925,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738760304
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span> <a href=\"#narrow/channel/113489-new-members/topic/Looking.20for.20help/near/497886729\">said</a>:</p>\n<blockquote>\n<p>This is very helpful, I'll fiddle with this. I understand \"stable\" changes once a month? (Just for my curiosity: if I clone mathlib, and checkout master, how do I find what Lean version this belongs to?)</p>\n</blockquote>\n<p>you can look in this file:<br>\n<a href=\"https://github.com/leanprover-community/mathlib4/blob/master/lean-toolchain\">https://github.com/leanprover-community/mathlib4/blob/master/lean-toolchain</a></p>",
        "id": 497889933,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1738761252
    },
    {
        "content": "<p>Very nice! So what if I have my \"project\", and then decide I want to go to master in <code>.lake/packages/mathlib</code>? What do I update, or what command do I utter (or both), to get my project in a state that that will work? I guess before <code>lake update</code> I need to change something. Is that again just editing <code>lakefile.toml</code>, like <span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span>  wrote, or do I (also) need to issue some command?</p>",
        "id": 497890378,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738761400
    },
    {
        "content": "<p>I think the recommended way is to copy exactly this toolchain file and then run <code>lake update</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">curl</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">L</span><span class=\"w\"> </span><span class=\"n\">https</span><span class=\"o\">:</span><span class=\"bp\">//</span><span class=\"n\">raw</span><span class=\"bp\">.</span><span class=\"n\">githubusercontent</span><span class=\"bp\">.</span><span class=\"n\">com</span><span class=\"bp\">/</span><span class=\"n\">leanprover</span><span class=\"bp\">-</span><span class=\"n\">community</span><span class=\"bp\">/</span><span class=\"n\">mathlib4</span><span class=\"bp\">/</span><span class=\"n\">master</span><span class=\"bp\">/</span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"n\">o</span><span class=\"w\"> </span><span class=\"n\">lean</span><span class=\"bp\">-</span><span class=\"n\">toolchain</span>\n</code></pre></div>",
        "id": 497890947,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1738761578
    },
    {
        "content": "<p>but his won't give you the stable version that was discussed above</p>",
        "id": 497891182,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1738761623
    },
    {
        "content": "<p>you then probably want to remove the <code>rev=\"stable\"</code> again</p>",
        "id": 497891628,
        "sender_full_name": "Moritz Firsching",
        "timestamp": 1738761770
    },
    {
        "content": "<p>Thanks again! So what is the relation between <code>lakefile.toml</code> and <code>lean-toolchain</code>? If the first has a <code>rev=\"...\"</code>, it updates the latter whenever <code>lake update</code> is run, and otherwise it leaves it alone?</p>",
        "id": 497893188,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738762283
    },
    {
        "content": "<p>And I see that <code>lakefile.toml</code> has sections, in which does this <code>rev</code> line belong? And is the format of this file documented somewhere?</p>",
        "id": 497893261,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738762309
    },
    {
        "content": "<p><a href=\"https://lean-lang.org/doc/reference/latest/find/?domain=Verso.Genre.Manual.section&amp;name=lake-config\">file format description</a></p>",
        "id": 497894001,
        "sender_full_name": "Jireh Loreaux",
        "timestamp": 1738762546
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span> <a href=\"#narrow/channel/113489-new-members/topic/Looking.20for.20help/near/497893188\">said</a>:</p>\n<blockquote>\n<p>Thanks again! So what is the relation between <code>lakefile.toml</code> and <code>lean-toolchain</code>? If the first has a <code>rev=\"...\"</code>, it updates the latter whenever <code>lake update</code> is run, and otherwise it leaves it alone?</p>\n</blockquote>\n<p><code>lake update</code> will (should) always update the <code>lean-toolchain</code> to match the version of mathlib you're using. If you stick to the \"stable\" revision of mathlib, you only get a new version of mathlib once a month, which also comes with a new lean version</p>",
        "id": 497907953,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1738766149
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span> <a href=\"#narrow/channel/113489-new-members/topic/Looking.20for.20help/near/497886925\">said</a>:</p>\n<blockquote>\n<p>So what are the defaults for <code>ELAN_HOME</code> and <code>XDG_CACHE_HOME</code>? The first is <code>~/.elan</code>, I guess, but what is the other?</p>\n</blockquote>\n<p>(Generally <code>~/.cache</code> -- it's a thing which is widely used, not Lean specific, for \"put all my cache stuff here\". Just to round out the trio, there's also <code>$MATHLIB_CACHE_DIR</code>, which <em>is</em> Lean and even Mathlib specific, and defaults to <code>$XDG_CACHE_HOME/mathlib</code>, so really by setting <code>$XDG_CACHE_HOME</code> it's somewhat that that you're affecting).</p>",
        "id": 497910184,
        "sender_full_name": "Julian Berman",
        "timestamp": 1738766751
    },
    {
        "content": "<p>I <em>almost</em> get it now... <span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span></p>\n<p><span class=\"user-mention silent\" data-user-id=\"307953\">Ruben Van de Velde</span> <a href=\"#narrow/channel/113489-new-members/topic/Looking.20for.20help/near/497907953\">said</a>:</p>\n<blockquote>\n<p><code>lake update</code> will (should) always update the <code>lean-toolchain</code> to match the version of mathlib you're using. If you stick to the \"stable\" revision of mathlib, you only get a new version of mathlib once a month, which also comes with a new lean version</p>\n</blockquote>\n<p>Ah, I thought the <code>rev</code> field was just about the Lean version! But I guess it is about the \"package\", which includes mathlib? So, what if I don't have <code>rev</code> and  either modify <code>lean-toolchain</code> or <code>.lake/packages/mathlib/lean-toolchain</code> myself (the latter by going to a different gif revision), will the other automatically be updated? Or do I then need to give some <code>lake</code> command to fix things up?</p>",
        "id": 497942722,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738775371
    },
    {
        "content": "<p>And both the Lean system itself and mathlib have \"stable\" versions? Are these independent? So the mathlib one is updated once a month, but how about the system? I seem to remember that was more frequent (once a day?)?</p>",
        "id": 497944065,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738775759
    },
    {
        "content": "<p>You surely must have a <code>lean-toolchain</code>, isn't this the file which tells the system which version of lean to use when reading the <code>lakefile.lean</code>?</p>",
        "id": 497945886,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1738776311
    },
    {
        "content": "<p>My project has no <code>lakefile.lean</code>, but instead a <code>lakefile.toml</code>, although I guess that is irrelevant for this. So what I would like to understand is how versions are determined when doing <code>lake update</code>, both with and without a <code>rev</code> entry in either of those files. And also, if I decide I want to move my project to specific versions, how to do it.</p>",
        "id": 497946195,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738776416
    },
    {
        "content": "<p>Also, there are two of these files in a project that may be inconsistent: <code>lean-toolchain</code> and <code>.lake/packages/mathlib/lean-toolchain</code>. So fiddling with those without knowing what you're doing probably is not too smart.</p>",
        "id": 497946354,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738776475
    },
    {
        "content": "<p>Another question: all the stuff popping up all the time when I move my mouse over a Lean file really gets on my nerves (also it tends to get in the way of stuff I'm trying to read). Is there a way to tell VS Code to only pop up like that if I am holding some modifier key?</p>",
        "id": 497947612,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1738776888
    },
    {
        "content": "<p>If you run <code>lake update</code>, Lean will update the dependencies to their specified versions (by default that is <code>master</code>). When updating, the <code>lean-toolchain</code> file is automatically updated to use the Lean version that Mathlib needs (this is a bit hacky, and might have changed since I last looked).</p>",
        "id": 497956943,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1738779950
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217807\">Freek Wiedijk</span> <a href=\"#narrow/channel/113489-new-members/topic/Looking.20for.20help/near/497947612\">said</a>:</p>\n<blockquote>\n<p>Another question: all the stuff popping up all the time when I move my mouse over a Lean file really gets on my nerves (also it tends to get in the way of stuff I'm trying to read). Is there a way to tell VS Code to only pop up like that if I am holding some modifier key?</p>\n</blockquote>\n<p>Not that I know, but I think I would like to have it as well, and I would start using it for teaching. I agree it's distracting sometimes.<br>\nThere seems to be an option <code>Lean4 › Infoview: Show Tooltip On Hover</code>, but that only works in the infoview, not the source document. Maybe something like this could be added for the source file as well? (cc <span class=\"user-mention\" data-user-id=\"221921\">@Marc Huisinga</span>)</p>",
        "id": 497958054,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1738780312
    },
    {
        "content": "<p>See the VS Code extension manual section on hovers, which describes the setting that VS Code provides for this: <a href=\"https://github.com/leanprover/vscode-lean4/blob/master/vscode-lean4/manual/manual.md#hovers\">https://github.com/leanprover/vscode-lean4/blob/master/vscode-lean4/manual/manual.md#hovers</a></p>",
        "id": 497958375,
        "sender_full_name": "Marc Huisinga",
        "timestamp": 1738780414
    },
    {
        "content": "<p>Nice, thanks!</p>",
        "id": 497959222,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1738780712
    },
    {
        "content": "<p>Another question (sorry to reuse this thread, if I should ask this in a new thread, just tell me):</p>\n<p>I'd like something like this, because I want Lean to know that types like <code>Fin 3</code> are non-empty:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Fin</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">class</span><span class=\"w\"> </span><span class=\"n\">positive</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">LinearOrder</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Zero</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">pos</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">x</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">positive</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">succ</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span>\n<span class=\"w\">  </span><span class=\"n\">pos</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">succ_pos</span>\n\n<span class=\"kn\">instance</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">positive</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"bp\">.</span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"bp\">⟨_</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">positive</span><span class=\"bp\">.</span><span class=\"n\">pos</span><span class=\"bp\">⟩</span>\n</code></pre></div>\n<p>and I feel sure that this is in the library already. So what is the best way to look for a typeclass like <code>positive</code> in Mathlib?</p>\n<p>Also, I named <code>positive</code> and <code>pos</code> rather arbitrarily. What would be the standard convention for naming this?</p>\n<p>Also, this <code>import</code> line was chosen fairly randomly. What is the best way to determine what imports one should put at the top of a file? Putting <code>import Mathlib</code> works, is that importing <em>everything</em>? But a subdirectory like <code>import Mathlib.Data.Fin</code> doesn't work?</p>",
        "id": 503484776,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1741173364
    },
    {
        "content": "<p>For the second question, you can use <code>#min_imports</code> at the bottom of the file, often it's convenient to import all of Mathlib and then minimize it at the end to ensure you don't miss any theorems/instances while you're working</p>",
        "id": 503486130,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1741173800
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 503486220,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1741173833
    },
    {
        "content": "<p>lets try that again, <span class=\"user-mention\" data-user-id=\"644391\">@loogle</span>  Nonempty (Fin _)</p>",
        "id": 503486485,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1741173903
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Fin/Lemmas.html#Fin.pos%27\">Fin.pos'</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Fin/Lemmas.html#Fin.size_pos%27\">Fin.size_pos'</a>, and <a href=\"https://loogle.lean-lang.org/?q=Nonempty%20%28Fin%20_%29\">2 more</a></p>",
        "id": 503486488,
        "sender_full_name": "loogle",
        "timestamp": 1741173904
    },
    {
        "content": "<p>Am I correct that this loogle query does not find the \"positive\" typeclass that I was looking for?</p>",
        "id": 503487187,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1741174112
    },
    {
        "content": "<p>Yes, so it finds the instance you're looking for but not <code>positive</code></p>",
        "id": 503487295,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1741174151
    },
    {
        "content": "<p>Sorry, I don't understand: these four hits that loogle finds are not instances?</p>",
        "id": 503487465,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1741174208
    },
    {
        "content": "<p>But knowing about loogle is great, thanks!</p>",
        "id": 503487506,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1741174221
    },
    {
        "content": "<p>So it depends on what you're looking for, if you're just looking for <code>Nonempty (Fin n)</code> with the hypothesis <code>h : 0 &lt; n</code> then <code>Fin.pos_iff_nonempty.mp h</code> should yield it.</p>",
        "id": 503487835,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1741174332
    },
    {
        "content": "<p>re loogle, Jireh's talk <a href=\"https://www.youtube.com/watch?v=UJrYKR01QwU\">https://www.youtube.com/watch?v=UJrYKR01QwU</a> has a great introduction to search tools that taught me how to use loogle far more effectively</p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"UJrYKR01QwU\" href=\"https://www.youtube.com/watch?v=UJrYKR01QwU\"><img src=\"https://uploads.zulipusercontent.net/c9272f640c40e4fb9e1c7377879866e2576e8bc0/68747470733a2f2f692e7974696d672e636f6d2f76692f554a72594b5230315177552f64656661756c742e6a7067\"></a></div>",
        "id": 503488097,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1741174411
    },
    {
        "content": "<p>What I was trying is to just have a typeclass <code>positive</code> hanging around for my natural number, from which the nonemptiness then is derived automatically. Or, relatedly, being able to prove <code>Nonempty (Fin 3)</code> using type inference:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">infer_instance</span>\n</code></pre></div>",
        "id": 503489001,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1741174702
    },
    {
        "content": "<p>So Lean has an <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=NeZero#doc\">docs#NeZero</a> type class that is functionally identical here if you're working over the naturals. I don't know of a positive type class. Someone else would be more qualified to speak to design decisions made in Lean/Mathlib regarding when to use type classes vs hypotheses</p>",
        "id": 503490493,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1741175169
    },
    {
        "content": "<p>I'm also not sure how to tell you how to find that particular type class, I just happen to know it exists</p>",
        "id": 503490581,
        "sender_full_name": "Vlad Tsyrklevich",
        "timestamp": 1741175205
    },
    {
        "content": "<p><code>NeZero</code> is good enough, great! So, question to everyone (<span class=\"user-mention\" data-user-id=\"111080\">@Floris van Doorn</span>?), how does one search for this?</p>\n<p>Also, my question about naming conventions in Mathlib (should <code>positive</code> have been capitalized and should <code>pos</code> have been <code>out</code> like in <code>NeZero</code>?) is still open. Is there documentation about that?</p>\n<p>Or more generally, how does one get acquainted with Mathlib? I'd like to have something like a \"tourist guide\" for that territory <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 503490733,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1741175268
    },
    {
        "content": "<p>To find instances: use <code>#synth</code>:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">NeZero</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">]</span>\n<span class=\"bp\">#</span><span class=\"n\">synth</span><span class=\"w\"> </span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Fin</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"o\">)</span>\n</code></pre></div>\n<p>You can click on the result, and recursively on the popups to see that it uses <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Fin.instInhabited#doc\">docs#Fin.instInhabited</a></p>",
        "id": 503530299,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1741184638
    },
    {
        "content": "<p>To search lemmas, I have some notes here: <a href=\"https://github.com/fpvandoorn/LeanCourse24/blob/f8f8aea8ea65f70314f4207db7dfe9ff9bdc7325/LeanCourse/Lectures/Lecture2.lean#L150-L185\">https://github.com/fpvandoorn/LeanCourse24/blob/f8f8aea8ea65f70314f4207db7dfe9ff9bdc7325/LeanCourse/Lectures/Lecture2.lean#L150-L185</a><br>\n(Mathematics in Lean probably has similar remarks)<br>\n(<code>#synth</code> is not mentioned there, since I haven't explained instances yet)</p>",
        "id": 503530763,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1741184723
    },
    {
        "content": "<p>When searching for a theorem/definition where you know the mathematical name, you can use the library overview: <a href=\"https://leanprover-community.github.io/mathlib-overview.html\">https://leanprover-community.github.io/mathlib-overview.html</a> or try your luck with <a href=\"https://leansearch.net/\">https://leansearch.net/</a></p>",
        "id": 503531075,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1741184780
    },
    {
        "content": "<p>Note: <code>Inhabited</code> is the data-carrying version of <code>Nonempty</code></p>",
        "id": 503532241,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1741184994
    },
    {
        "content": "<p>Btw, if your question was \"How would I learn the existence of <code>NeZero</code>\", you could have learned it from looking at the output of <code>#synth Nonempty (Fin 3)</code>. <br>\nIf you're wondering how to learn about the existence of <code>#synth</code>: then you'd have to read a textbook like Mathematics in Lean, or if you want all the nitty-gritty details, the reference manual: <a href=\"https://lean-lang.org/doc/reference/latest//Type-Classes/Instance-Synthesis/#Lean___Parser___Command___synth\">https://lean-lang.org/doc/reference/latest//Type-Classes/Instance-Synthesis/#Lean___Parser___Command___synth</a> (remark: the reference manual is still incomplete, but nowadays it has a lot of information)</p>",
        "id": 503533173,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1741185175
    },
    {
        "content": "<p>It's hard to write a tourist guide for Mathlib. To learn about what is in Mathlib, search for definitions and lemmas using the above methods. Then read the surrounding lemma statements, the documentation and the module doc (documentation at the top of the file). That is the best way to learn Mathlib design decisions. Writing a single document that explains all that would get unwieldy quickly.<br>\nIf you want to learn a proof technique, try to find a proof in Mathlib that uses that technique and see how the lemmas are stated and proven there...</p>",
        "id": 503533938,
        "sender_full_name": "Floris van Doorn",
        "timestamp": 1741185330
    },
    {
        "content": "<p>Another search question (hopefully, I will get the hang of finding stuff myself at some point): I'm looking for the obvious function of type <code>(α → Option β) → Option (α → β)</code> where I have <code>[Fintype α]</code>. I have been moogling and loogling and grepping, but I don't see it...</p>",
        "id": 503565958,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1741191967
    },
    {
        "content": "<p>Do you mean this \"obvious function\":</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">obviousFunction</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">β</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">isSome</span><span class=\"w\"> </span><span class=\"k\">then</span>\n<span class=\"w\">    </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">f</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">)</span><span class=\"bp\">.</span><span class=\"n\">get</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">))</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"n\">none</span>\n</code></pre></div>\n<p>(I have no idea whether that exists already, I don't think so..., correct me if I'm wrong)</p>",
        "id": 503568301,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1741192402
    },
    {
        "content": "<p>Yes, that's what I meant (of course <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span>)! But I cannot imagine this not being there somewhere already...</p>",
        "id": 503570348,
        "sender_full_name": "Freek Wiedijk",
        "timestamp": 1741192816
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"644391\">@loogle</span> (_ → Option _) → Option _</p>",
        "id": 503571194,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1741192997
    },
    {
        "content": "<p><span aria-label=\"search\" class=\"emoji emoji-1f50d\" role=\"img\" title=\"search\">:search:</span> <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/List/Basic.html#List.findSome%3F\">List.findSome?</a>, <a href=\"https://leanprover-community.github.io/mathlib4_docs/Init/Data/Option/Basic.html#Option.orElse\">Option.orElse</a>, and <a href=\"https://loogle.lean-lang.org/?q=%28_%20%E2%86%92%20Option%20_%29%20%E2%86%92%20Option%20_\">18 more</a></p>",
        "id": 503571212,
        "sender_full_name": "loogle",
        "timestamp": 1741193000
    },
    {
        "content": "<p>Hmm there are only a few functions that look like what you want and none of them return a function -- so probably what you want doesn't exist already.</p>",
        "id": 503571700,
        "sender_full_name": "Robin Arnez",
        "timestamp": 1741193098
    }
]