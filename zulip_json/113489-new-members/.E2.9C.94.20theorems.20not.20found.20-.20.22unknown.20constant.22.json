[
    {
        "content": "<p>Hello! I'm trying to use some of the theorems from the lean4 github (<a href=\"https://github.com/leanprover/lean4\">https://github.com/leanprover/lean4</a>), but I sometimes get error messages wherein Lean doesn't seem to recognize the theorems.</p>\n<p>For instance, this code gives me the error message \"unknown constant 'List.getElem_reverse'\":</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">theorem</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">sorry_getElem_reverse</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">l</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">i</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">reverse</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span>\n<span class=\"w\">    </span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">reverse</span><span class=\"o\">[</span><span class=\"n\">i</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">l</span><span class=\"o\">[</span><span class=\"n\">l</span><span class=\"bp\">.</span><span class=\"n\">length</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">]</span><span class=\"bp\">'</span><span class=\"o\">(</span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">sub_one_sub_lt_of_lt</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">List</span><span class=\"bp\">.</span><span class=\"n\">getElem_reverse</span>\n</code></pre></div>\n<p>Is there a way for me to get access to these theorems / something that I'm doing incorrectly? Thank you!</p>",
        "id": 463966806,
        "sender_full_name": "Alizee",
        "timestamp": 1724224824
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=List.getElem_reverse#doc\">docs#List.getElem_reverse</a> says that the lemma you want to use is located in <a href=\"https://tqft.net/mathlib4files/Mathlib/Data/List/Lemmas\">file#Mathlib/Data/List/Lemmas</a>, in particular it is <em>not</em> in the <code>lean4</code> repository</p>",
        "id": 463967393,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1724225032
    },
    {
        "content": "<p>If you look at the lean4 repository, you'll find that Yaël is out of date and the lemma is here: <a href=\"https://github.com/leanprover/lean4/blame/0e823710e30e0d65f02bc2b65e7af217c730ebd3/src/Init/Data/List/Lemmas.lean#L2069\">https://github.com/leanprover/lean4/blame/0e823710e30e0d65f02bc2b65e7af217c730ebd3/src/Init/Data/List/Lemmas.lean#L2069</a></p>",
        "id": 463967549,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724225090
    },
    {
        "content": "<p>However, you'll also see that it was added there last week</p>",
        "id": 463967574,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724225100
    },
    {
        "content": "<p>Probably the version of lean you're using is older than that</p>",
        "id": 463967592,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724225111
    },
    {
        "content": "<p>Ah!</p>",
        "id": 463967785,
        "sender_full_name": "Yaël Dillies",
        "timestamp": 1724225170
    },
    {
        "content": "<p>Okay, thank you very much! How do I go about updating the version of lean I am using?</p>",
        "id": 464212427,
        "sender_full_name": "Alizee",
        "timestamp": 1724291067
    },
    {
        "content": "<p>Are you working in a project? Does it have any dependencies (e.g. mathlib, proofwidgets...)?</p>",
        "id": 464283962,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1724311603
    },
    {
        "content": "<p>I believe that I am working in a project without any dependencies.</p>",
        "id": 464293516,
        "sender_full_name": "Alizee",
        "timestamp": 1724313762
    },
    {
        "content": "<p>I ran</p>\n<p>$ elan self update<br>\n$ elan default leanprover/lean4:stable</p>\n<p>but I got the message \"leanprover/lean4:stable unchanged - Lean (version 4.7.0, x86_64-apple-darwin21.6.0, commit 6fce8f7d5cd1, Release)\", and when I updated dependencies for my project it said \"Nothing to update - all dependencies are up-to-date.\" Is there something I should be doing differently to have access to List.getElem_reverse? Thank you!</p>",
        "id": 464945081,
        "sender_full_name": "Alizee",
        "timestamp": 1724563980
    },
    {
        "content": "<p>You don't need to do anything with elan directly, you need to change the lean-toolchain file in the root of your project</p>",
        "id": 464951151,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724567262
    },
    {
        "content": "<p>Oh, okay, thank you. My lean-toolchain file currently contains only \"leanprover/lean4:stable\". Should I change it to something else?</p>",
        "id": 464953481,
        "sender_full_name": "Alizee",
        "timestamp": 1724568043
    },
    {
        "content": "<p>Yeah, you should use a specific version, like <code>leanprover/lean4:v4.10.0</code> - though I can't find <code>List.getElem_reverse?</code> anyway</p>",
        "id": 464960201,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724572962
    },
    {
        "content": "<p>Oh, that's because it's <code>List.getElem?_reverse</code></p>",
        "id": 464960274,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1724572990
    },
    {
        "content": "<p>Okay, thank you very much! I was actually looking for <br>\n<code>List.getElem_reverse</code>, but it seems that that's not in v4.10.0. However, the lemmas on which <br>\n<code>List.getElem_reverse</code> depends are in v4.10.0, so I just copied the proof from the documentation.</p>",
        "id": 465260749,
        "sender_full_name": "Alizee",
        "timestamp": 1724701471
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"747488\">Alizee</span> has marked this topic as resolved.</p>",
        "id": 465260783,
        "sender_full_name": "Notification Bot",
        "timestamp": 1724701491
    }
]