[
    {
        "content": "<p>Hello, if I have a Set <code>s</code>, and I wanted to define something different in the case <code>s</code> is empty and the case it's not empty, how would I state this in Lean?</p>\n<p>As an example, consider if I wanted to map from <code>s</code> to an Option type. Here, if <code>s</code> is empty, I want to map to <code>none</code>.  If it's not empty, I want to map to <code>some element</code>.</p>\n<p>Here's an MWE:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">setToOption</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"c1\">-- How should I write in Lean: \"if empty, then none, otherwise, then some single element\"</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">IsEmpty</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"c1\">-- This isn't the right way to do this</span>\n<span class=\"w\">    </span><span class=\"n\">none</span>\n<span class=\"w\">  </span><span class=\"k\">else</span>\n<span class=\"w\">    </span><span class=\"c1\">-- Want to pick out one element out of `s` (axiom of choice?)</span>\n<span class=\"w\">    </span><span class=\"gr\">sorry</span>\n</code></pre></div>\n<p>As a side question: would this def change if I have the hypothesis that <code>s</code> is subsingleton? I imagine I could just use the same def?</p>",
        "id": 529535796,
        "sender_full_name": "An Qi Zhang",
        "timestamp": 1752880215
    },
    {
        "content": "<p><code>if h : s = \\empty</code> will work, though you might need to turn on classical logic</p>",
        "id": 529536490,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1752880917
    },
    {
        "content": "<p>Ah right, thanks!</p>",
        "id": 529537323,
        "sender_full_name": "An Qi Zhang",
        "timestamp": 1752881811
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"515324\">@An Qi Zhang</span> it might be useful to think in terms of algorithms to understand why this has to be noncomputable:</p>\n<p><code>Set α</code> gives you a true/false statement (i.e. <code>Prop</code>), so you can't really compute anything using it. I can embed Riemann's hypothesis inside a <code>Prop</code>, and there's no way you can decide if it's true or false, so basically anything concrete (i.e. <code>Option α</code>) you want to produce will have no algorithm for it</p>",
        "id": 529568262,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752922068
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span><span class=\"bp\">.</span><span class=\"n\">Data</span><span class=\"bp\">.</span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">Basic</span>\n\n<span class=\"kn\">universe</span><span class=\"w\"> </span><span class=\"n\">u</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Classical</span><span class=\"w\"> </span><span class=\"k\">in</span>\n<span class=\"kn\">noncomputable</span><span class=\"w\"> </span><span class=\"kn\">def</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"bp\">.</span><span class=\"n\">setToOption</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Option</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">.</span><span class=\"n\">Nonempty</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"bp\">.</span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">none</span>\n</code></pre></div>",
        "id": 529568338,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752922183
    },
    {
        "content": "<p>I would prefer using <code>Nonempty</code> because it seems to have more support</p>",
        "id": 529568349,
        "sender_full_name": "Kenny Lau",
        "timestamp": 1752922205
    }
]