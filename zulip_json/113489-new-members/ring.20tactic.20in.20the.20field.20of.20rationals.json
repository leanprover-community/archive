[
    {
        "content": "<p>I'm a bit confused by the following simple example that works in Lean:</p>\n<p>example (w : ℚ) (h : 3*w + 1 = 4) :<br>\n    w = 1 :=<br>\n  calc<br>\n    w = (3 * w + 1) / 3 - 1/3 := by ring<br>\n    _ = 4/3 - 1/3 := by rw [h]<br>\n    _ = 1 := by ring</p>\n<p>How does the ring tactic \"know\" about division? (I understand that the rationals are a field ... but I would expect to have to use a \"field tactic\" to take advantage of that fact.)</p>",
        "id": 532616394,
        "sender_full_name": "JK",
        "timestamp": 1754266823
    },
    {
        "content": "<p><code>ring</code> is using <code>norm_num</code></p>",
        "id": 532616572,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754266947
    },
    {
        "content": "<p>It doesn't know about division by variables, only by numeric constants</p>",
        "id": 532616605,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754266971
    },
    {
        "content": "<p>For a similar reason, <code>ring</code> knows about <code>Nat.factorial</code>!</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommRing</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">factorial</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">ring</span>\n</code></pre></div>",
        "id": 532616781,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754267102
    },
    {
        "content": "<p>That's still odd to me, since (3 * w + 1) / 3 is not defined in an arbitrary ring, nor is 1/3 for that matter.</p>",
        "id": 532617630,
        "sender_full_name": "JK",
        "timestamp": 1754267644
    },
    {
        "content": "<p>I guess it's probably more accurate to say that <code>ring</code> knows about <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"double-struck\">Q</mi></mrow><annotation encoding=\"application/x-tex\">\\mathbb{Q}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8556em;vertical-align:-0.1667em;\"></span><span class=\"mord mathbb\">Q</span></span></span></span>-algebras</p>",
        "id": 532617965,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1754267835
    },
    {
        "content": "<p>commutative ones</p>",
        "id": 532618017,
        "sender_full_name": "Aaron Liu",
        "timestamp": 1754267867
    }
]