[
    {
        "content": "<p>Hi folks, I am giving a <a href=\"https://researchseminars.org/talk/ToposInstituteColloquium/131/\">Topos Institute talk</a> in a few weeks about the human factors of formalized mathematics. I'm gathering some anecdata about the most common challenges faced by Lean newbies. So if you frequently answer questions in <a class=\"stream\" data-stream-id=\"113489\" href=\"/#narrow/stream/113489-new-members\">#new members</a>, a few questions for you:</p>\n<ol>\n<li>What are the most common categories of questions asked by newbies? Does it differ between mathematicians and software engineers?</li>\n<li>Which Lean features do newbies struggle with the most early on? Which Lean features does everyone seem to struggle with no matter how long they've used Lean?</li>\n<li>What are common misconceptions about formalized mathematics that you observe in newbie questions? What resources do you use to correct those misconceptions?</li>\n</ol>\n<p>Feel free to answer any or all of these, and thank you in advance!</p>",
        "id": 457197197,
        "sender_full_name": "Will Crichton",
        "timestamp": 1723063242
    },
    {
        "content": "<p>Two reasonably common categories are:</p>\n<ul>\n<li>I am having installation troubles, due to some combination of:<ul>\n<li>A weird system or hostile antivirus</li>\n<li>Following bad instructions from lean 3, ChatGPT, an outdated course repo</li>\n<li>A bug</li>\n</ul>\n</li>\n<li>I have a cryptic error message that I don't understand the meaning of</li>\n</ul>",
        "id": 457202491,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723064971
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310045\">@Eric Wieser</span> I guess Lean does often go viral, so the former is understandable. Re: errors, are there particular kinds of error messages you see brought up a lot? Is there a feedback loop where the Lean compiler devs get informed about confusing errors?</p>",
        "id": 457202782,
        "sender_full_name": "Will Crichton",
        "timestamp": 1723065105
    },
    {
        "content": "<p>looking at my answers in this channel, the kinds of questions that i tend to answer (beware selection bias) are typically ones resulting from lack of familiarity/experience with lean and/or mathlib. example patterns are:</p>\n<ul>\n<li>\"how do i formalize (mathematical) notion X\"</li>\n<li>\"how do i prove property X of notion Y\" (similar to \"is there code for X\", but without direction as to what lemma is wanted/needed/expected). this one seems to be pretty frequent as a pattern.</li>\n<li>\"how do i change the goal state in X way\", where generally the answer is \"use Y tactic\"</li>\n<li>\"how do i prove (property X for) instance Y for type Z\" (can be seen as sub-pattern of the second, but answers can take other shapes)</li>\n</ul>",
        "id": 457202991,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723065211
    },
    {
        "content": "<blockquote>\n<p>Is there a feedback loop where the Lean compiler devs get informed about confusing errors?</p>\n</blockquote>\n<p>I think this loop is very slow, because there are not very many Lean compiler devs and improving the error messages of things that are <em>not</em> supposed to work is usually lower priority that fixing bugs in places where things <em>are</em> supposed to work. Issues like <a href=\"https://github.com/leanprover/lean4/pull/2950\">lean4#2950</a> are the mechanism behind such a loop</p>",
        "id": 457203297,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723065363
    },
    {
        "content": "<p>as a general pattern, i'd say for mathematicians it can be non-trivial to know what definitions in mathlib corresponds to the \"paper\" mathematics they're interested in, as this tends to come with experience using both lean and mathlib</p>",
        "id": 457203523,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723065433
    },
    {
        "content": "<p>To that end, you might be interested in what happens in <a class=\"stream\" data-stream-id=\"217875\" href=\"/#narrow/stream/217875-Is-there-code-for-X.3F\">#Is there code for X?</a> too</p>",
        "id": 457203756,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723065512
    },
    {
        "content": "<p>although i do think in there there is a higher likelihood of people providing a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a> for what lemma they want, which makes me think that that doesn't quite reflect people being new to lean, per se...</p>",
        "id": 457204610,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723065769
    },
    {
        "content": "<p>This is super helpful, thank you both for the insights! <span class=\"user-mention\" data-user-id=\"684366\">@Edward van de Meent</span>: is it fair to summarize the principal issue as \"discoverability\", i.e. discovering structures, tactics, etc.? or is it more perhaps \"making connections\", as in people know <em>of</em> a tactic but don't realize it's applicable in a given situation?</p>",
        "id": 457205120,
        "sender_full_name": "Will Crichton",
        "timestamp": 1723065950
    },
    {
        "content": "<p>i don't think i'd say that \"things are hard to discover\", but rather that \"lack of experience makes things harder to discover\" or \"for newbies, things can be hard to discover\".<br>\nFor me, it took some time to get a good idea of what kind of shape i should expect lemmas and lemma names to have, and how to search for these things (using things like @ loogle and the searchbar and links in the mathlib docs).</p>",
        "id": 457207606,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723066832
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20newbie.20questions/near/457207606\">said</a>:</p>\n<blockquote>\n<p>and how to search for these things</p>\n</blockquote>\n<p>Discovering how to discover is one of the more important tricks!</p>",
        "id": 457207778,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723066900
    },
    {
        "content": "<p>i can think of one case where someone didn't realize X was applicable in his question but did know about X, but i don't think that case is representative...</p>",
        "id": 457207782,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723066901
    },
    {
        "content": "<p>\"How to discover\" is a great point. (Also TIL about Loogle! I'd just been using the search bar.....) Like one strategy I use is when I want to <code>apply?</code> in a complicated proof, it often times out. So I'll try and extract a simplified version of the subgoal into a standalone lemma, use <code>apply?</code> then translate the result back into the complicated proof. </p>\n<p>Are there any resources that teach Lean users about stuff like Loogle, or effective use of the search bar?</p>",
        "id": 457208266,
        "sender_full_name": "Will Crichton",
        "timestamp": 1723067062
    },
    {
        "content": "<p>for tactics i'd definitely say that there are some that are hard to come across when reading docs. i'd say the main source of learning about tactics is from the books and games, and there are definitely some niche ones which you have to know about to realise you should use them.</p>",
        "id": 457208395,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723067129
    },
    {
        "content": "<p>So this seems like a good use case for LLMs (which I don't say often or lightly!), although my experience with the internet-trained ones (e.g. ChatGPT, Claude) and the Lean-specific ones (LeanCopilot) has been that LLMs are at best marginally useful. Have y'all seen the same?</p>",
        "id": 457208821,
        "sender_full_name": "Will Crichton",
        "timestamp": 1723067352
    },
    {
        "content": "<p>One of the reasons that tactics are a painpoint is that the documentation does not yet include them</p>",
        "id": 457208899,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723067391
    },
    {
        "content": "<p>Which is not so much because the raw documentation hasn't been written, but because the infrastructure for rendering it on the webpage is still in the works</p>",
        "id": 457209013,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723067434
    },
    {
        "content": "<p>well... you can look at <code>Mathlib.Tactics</code> and go through one by one, but that is hardly the ideal way to come by them.</p>",
        "id": 457209032,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723067443
    },
    {
        "content": "<p>and then read the docstrings</p>",
        "id": 457209056,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723067452
    },
    {
        "content": "<p>but these do sometimes leave me wanting</p>",
        "id": 457209092,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723067467
    },
    {
        "content": "<p>Compared with <a href=\"https://leanprover-community.github.io/mathlib_docs/tactics.html\">https://leanprover-community.github.io/mathlib_docs/tactics.html</a> (for lean 3), which gave you everything in one place.</p>",
        "id": 457209138,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723067491
    },
    {
        "content": "<p>IME, the docstrings are marginally helpful. I've found it more useful to find examples of a tactic being used in Mathlib, and translate those examples into my code.</p>",
        "id": 457209240,
        "sender_full_name": "Will Crichton",
        "timestamp": 1723067524
    },
    {
        "content": "<p>yes, quite so. the docstring gives a good general idea of what a tactic does/ is intended for, but the examples there (for example, look at <code>induction</code> or <code>cases</code>) don't do a great job at getting across what the various syntaxes do (imo).</p>",
        "id": 457209511,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723067666
    },
    {
        "content": "<p>Alright, so the take home message is: discover how to discover so you can induct how to induct.</p>",
        "id": 457209631,
        "sender_full_name": "Will Crichton",
        "timestamp": 1723067735
    },
    {
        "content": "<p>i don't know what you mean by \"how to induct\", but i completely agree with the first part.</p>",
        "id": 457209742,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723067785
    },
    {
        "content": "<p>Oh hehe I just mean \"how to use the <code>induction</code> tactic\" :-)</p>",
        "id": 457209794,
        "sender_full_name": "Will Crichton",
        "timestamp": 1723067809
    },
    {
        "content": "<p>Anyways but this discussion has been helpful, thank you both again!!</p>",
        "id": 457209829,
        "sender_full_name": "Will Crichton",
        "timestamp": 1723067829
    },
    {
        "content": "<p>do note that this merely touches on newbies issues with mathlib, not so much lean.</p>",
        "id": 457209901,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723067870
    },
    {
        "content": "<p>I answer questions here sometimes. Usually these questions about under documented features</p>",
        "id": 457209915,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723067875
    },
    {
        "content": "<p>Example: termination proofs</p>",
        "id": 457209972,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723067887
    },
    {
        "content": "<p>Or naming the condition in a conditional expression</p>",
        "id": 457210027,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723067913
    },
    {
        "content": "<p>those are great examples, yes</p>",
        "id": 457210067,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723067934
    },
    {
        "content": "<p>Once I recall that the answer to a question was autoImplicit introducing a variable</p>",
        "id": 457210123,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723067958
    },
    {
        "content": "<p>But I also puzzlingly find autoImplicit to be something that even some experts have trouble with</p>",
        "id": 457210183,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723067985
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20newbie.20questions/near/457210123\">said</a>:</p>\n<blockquote>\n<p>Once I recall that the answer to a question was autoImplicit introducing a variable</p>\n</blockquote>\n<p>This one you can count the number of occurences of by <a href=\"#narrow/stream/113489-new-members/search/.22autoimplicit.20false.20.60.60.60.22\">searching for <code>autoImplicit false</code> in this stream</a></p>",
        "id": 457210362,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723068038
    },
    {
        "content": "<p>Sometimes there are debugging questions</p>",
        "id": 457210484,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723068088
    },
    {
        "content": "<p>Like how to use some debugging feature</p>",
        "id": 457210518,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723068104
    },
    {
        "content": "<p>The <code>set_option</code> stuff is not easily found in documentation</p>",
        "id": 457210597,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723068131
    },
    {
        "content": "<p>More broadly I think newbies struggle to come up with MWEs</p>",
        "id": 457210723,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723068205
    },
    {
        "content": "<p>This is because when you are new to a language, especially a proof assistant, it is hard to understand how to debug things and isolate the cause of errors enough to produce a minimum working example</p>",
        "id": 457210846,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723068257
    },
    {
        "content": "<p>There is all the learning curve that comes with learning a functional language, plus the proof stuff.</p>",
        "id": 457210906,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723068294
    },
    {
        "content": "<p>Also, in the math side, it is not easy to pick the right finiteness type for a given discrete math problem. This was discussed in a different topic recently</p>",
        "id": 457211198,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723068458
    },
    {
        "content": "<p>Another class of errors comes from typeclasses and implicit parameters. Sometimes you have two seemingly equal objects in a hypothesis or a goal but <code>rw</code> fails, or <code>rfl</code> won't close the goal and so on. Sometimes it is because there are two competing instances of the same typeclass or some implicit parameter was instantiated differently</p>",
        "id": 457211611,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723068652
    },
    {
        "content": "<p>Another common class of questions is \"why doesn't such and such tactic /proof from &lt;insert book/tutorial&gt;\" work and the answers range from \"this tactic is &lt;insert resource&gt; specific\" to \"the resource isn't up to date with current changes\"</p>",
        "id": 457212325,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723069025
    },
    {
        "content": "<p>or alternatively, \"the tactic only works for X types/typeclass, and not Y\"</p>",
        "id": 457212467,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723069088
    },
    {
        "content": "<p>(see <code>omega</code>, <code>ring</code>, <code>abel</code>)</p>",
        "id": 457212543,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723069108
    },
    {
        "content": "<p>(<code>ring</code> gets me sometimes, because it does not work when <code>Y = Ring</code>!)</p>",
        "id": 457212600,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723069136
    },
    {
        "content": "<p>wait what?</p>",
        "id": 457212658,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723069154
    },
    {
        "content": "<p>Yes, exactly :)</p>",
        "id": 457212733,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723069179
    },
    {
        "content": "<p>i was thinking of the fact that you might forget that your fact depends on commutativity or something like that, i didn't know about that one!</p>",
        "id": 457212838,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723069202
    },
    {
        "content": "<p>could you give an example?</p>",
        "id": 457212862,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723069209
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">R</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Ring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"bp\">*</span><span class=\"n\">y</span><span class=\"w\"> </span><span class=\"bp\">+</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">ring</span><span class=\"w\"> </span><span class=\"c1\">-- fails</span>\n</code></pre></div>",
        "id": 457212914,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723069227
    },
    {
        "content": "<p>why isn't the left side here in normal form?</p>",
        "id": 457213273,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723069357
    },
    {
        "content": "<p>or rather, why <em>is</em> that considered normal form?</p>",
        "id": 457213410,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723069400
    },
    {
        "content": "<p>i'd expect it not to be</p>",
        "id": 457213425,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1723069408
    },
    {
        "content": "<p>There are a lot of questions about natural subtraction and related stuff.</p>",
        "id": 457214001,
        "sender_full_name": "Riccardo Brasca",
        "timestamp": 1723069618
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"684366\">Edward van de Meent</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20newbie.20questions/near/457213273\">said</a>:</p>\n<blockquote>\n<p>why isn't the left side here in normal form?</p>\n</blockquote>\n<p>Because <code>ring</code> is powerless on non-commutative rings</p>",
        "id": 457228010,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723075263
    },
    {
        "content": "<p>Oh, is it the powers that get in the way? (sorry)</p>",
        "id": 457274919,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1723096971
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20newbie.20questions/near/457210597\">said</a>:</p>\n<blockquote>\n<p>The <code>set_option</code> stuff is not easily found in documentation</p>\n</blockquote>\n<p>Can you provide a link? I haven't been able to find it yet.</p>",
        "id": 457279022,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1723098979
    },
    {
        "content": "<p>I think the tactics need an ontology, i.e., a hierarchy or grouping that categorizes them. All documents about tactics are simply long lists. (PS: Actually that task is nontrivial, as GPT-4o fails to give a satisfying complete answer after uploading such a list).</p>\n<p>Questions often asked: rewrite inside sums/other binders (Answer: <code>simp_rw</code>).</p>",
        "id": 457290041,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1723102757
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"638715\">Adomas Baliuka</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20newbie.20questions/near/457279022\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20newbie.20questions/near/457210597\">said</a>:</p>\n<blockquote>\n<p>The <code>set_option</code> stuff is not easily found in documentation</p>\n</blockquote>\n<p>Can you provide a link? I haven't been able to find it yet.</p>\n</blockquote>\n<p><code>#help option</code></p>",
        "id": 457317186,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1723109670
    },
    {
        "content": "<p>On the one hand, I am grateful <code>#help option</code> exists. On the other hand, having searchable doc pages for these options in a neatly categorised way would be super helpful. If it weren't behind the FROwall, I'd probably make a PR.</p>",
        "id": 457381751,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723126882
    },
    {
        "content": "<p>Problem is how to maintain a manual hierarchy, would you constantly add things? It's not that the inflow is decreasing.</p>",
        "id": 457384839,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1723127821
    },
    {
        "content": "<p>(I thought more about <code>#help tactics</code> than options when writing this)</p>",
        "id": 457385578,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1723128077
    },
    {
        "content": "<p>No, but I'd probably start by extracting the options and their docstrings systematically and display them as a, say, sphinx doc page</p>",
        "id": 457387234,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723128602
    },
    {
        "content": "<p>Clearly extracting this information is possible given that mathlib docs and loogle can supply them for other declarations</p>",
        "id": 457387457,
        "sender_full_name": "Shreyas Srinivas",
        "timestamp": 1723128656
    },
    {
        "content": "<p>For example for tactics: <a href=\"https://seasawher.github.io/mathlib4-tactics/\">https://seasawher.github.io/mathlib4-tactics/</a></p>",
        "id": 457387759,
        "sender_full_name": "Ralf Stephan",
        "timestamp": 1723128753
    },
    {
        "content": "<p>For the original question, as for the mathematician vs software engineer split, my impression is that when it comes to questions of calculus / single variable real analysis this is quite visible, the latter group often having questions that are really about math (even if disguised as lean questions) especially surrounding rigorous notions of limit and derivative</p>",
        "id": 457405067,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1723132475
    },
    {
        "content": "<p>And functions to / from the empty type (but more generally vacuously true statements) similarly seem to elicit confusion quite frequently</p>",
        "id": 457405334,
        "sender_full_name": "Luigi Massacci",
        "timestamp": 1723132529
    },
    {
        "content": "<p>Coming from the software side and having just gone through the first part of the learning curve, here are some things I noticed:</p>\n<ul>\n<li>You probably don't just want Lean, you want Lean + Mathlib.Tactics, even if you're not doing things that are particularly mathematical. </li>\n<li>There is not a lot of \"quick reference\" material available, aside from the searchable Mathlib docs. I found myself going back and skimming numerous texts over and over looking for the name of a tactic or something.</li>\n<li>As an example of what would be helpful, I found myself referring to this page from project xena numerous times: <a href=\"https://www.ma.imperial.ac.uk/~buzzard/xena/formalising-mathematics-2022/Part_C/cheatsheet.html\">https://www.ma.imperial.ac.uk/~buzzard/xena/formalising-mathematics-2022/Part_C/cheatsheet.html</a>  (though even then, it occasionally pointed me in the wrong direction: in my particular case, if I wanted to do something with an ∃x hypothesis, what I almost always was looking for was <code>obtain x</code>. </li>\n<li>I knew about <code>simp</code> almost from the start but I didn't understand how powerful / fundamental it was: that it can unfold a <code>def</code> or that all the other search tools work better if you run <code>simp</code> first.</li>\n<li>As you say, the public LLMs are mostly useless. ChatGPT seems to confuse lean 3 and 4 no matter what I try. Claude was able to generate a script for me that would list all the definitions in a namespace, but it took several rounds of error correcting.</li>\n<li>The nightmare problems for me were simple issues with natural number division. I had several occasions where I spent literally hours trying to prove a simple fact about arithmetic, only to post a question here and have it answered in minutes by someone with more experience. :)</li>\n</ul>",
        "id": 459330515,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1723167233
    },
    {
        "content": "<p>Actually, it wasn't a question, but the number one problem I had was probably wasting time doing what the UI seemed to suggest that I do instead of thinking about what I really wanted to do. It's very easy to zone out and just react to what's on the screen... Even if I accidentally reversed the direction of an arrow, or if the first step prompted me to prove a statement that wasn't the proof I had planned.</p>",
        "id": 459332006,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1723167651
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"423842\">@Michal Wallace (tangentstorm)</span>, I tried to write a program that would list all definitions in a namespace - without LLMs - and failed miserably... can you share your code?</p>",
        "id": 459609067,
        "sender_full_name": "Eduardo Ochs",
        "timestamp": 1723253727
    },
    {
        "content": "<p>You could do this.  It does not filter by namespace, but just by beginning of declaration name (it would be easy to make it search a specific namespace, but this seemed more appropriate):</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Lean</span><span class=\"w\"> </span><span class=\"n\">Elab</span><span class=\"w\"> </span><span class=\"n\">Command</span>\n\n<span class=\"kn\">elab</span><span class=\"w\"> </span><span class=\"s2\">\"#autocomplete \"</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"o\">:</span><span class=\"n\">ident</span><span class=\"w\"> </span><span class=\"n\">bostx</span><span class=\"o\">:(</span><span class=\"n\">num</span><span class=\"o\">)</span><span class=\"bp\">?</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">command</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">bo</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">bostx</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">some</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"bp\">.</span><span class=\"n\">getNat</span><span class=\"w\"> </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">none</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"mi\">5000</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">getEnv</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">consts</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">env</span><span class=\"bp\">.</span><span class=\"n\">constants</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">pref</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"bp\">.</span><span class=\"n\">getId</span><span class=\"bp\">.</span><span class=\"n\">toString</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">prel</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">pref</span><span class=\"bp\">.</span><span class=\"n\">length</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">newDeclNames</span><span class=\"w\"> </span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">consts</span><span class=\"bp\">.</span><span class=\"n\">foldM</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">init</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"o\">({}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">NameSet</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"k\">do</span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">!</span><span class=\"o\">(</span><span class=\"bp\">←</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">.</span><span class=\"n\">isBlackListed</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"bp\">&amp;&amp;</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"bp\">.</span><span class=\"n\">toString</span><span class=\"bp\">.</span><span class=\"n\">take</span><span class=\"w\"> </span><span class=\"n\">prel</span><span class=\"w\"> </span><span class=\"bp\">==</span><span class=\"w\"> </span><span class=\"n\">pref</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"bp\">.</span><span class=\"n\">insert</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"n\">return</span><span class=\"w\"> </span><span class=\"n\">a</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">sorted</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">newDeclNames</span><span class=\"bp\">.</span><span class=\"n\">toArray</span><span class=\"bp\">.</span><span class=\"n\">qsort</span><span class=\"w\"> </span><span class=\"n\">Name</span><span class=\"bp\">.</span><span class=\"n\">lt</span>\n<span class=\"w\">  </span><span class=\"k\">let</span><span class=\"w\"> </span><span class=\"n\">sa</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subarray</span><span class=\"w\"> </span><span class=\"n\">Name</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">    </span><span class=\"o\">{</span><span class=\"w\"> </span><span class=\"n\">array</span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">sorted</span>\n<span class=\"w\">      </span><span class=\"n\">start</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"w\">      </span><span class=\"n\">stop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">min</span><span class=\"w\"> </span><span class=\"n\">sorted</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"n\">bo</span>\n<span class=\"w\">      </span><span class=\"n\">start_le_stop</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">zero_le</span><span class=\"w\"> </span><span class=\"bp\">_</span>\n<span class=\"w\">      </span><span class=\"n\">stop_le_array_size</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"bp\">.</span><span class=\"n\">min_le_left</span><span class=\"w\"> </span><span class=\"bp\">..</span><span class=\"w\"> </span><span class=\"o\">}</span>\n<span class=\"w\">  </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">newDeclNames</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"k\">with</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">logInfo</span><span class=\"w\"> </span><span class=\"n\">m!</span><span class=\"s2\">\"No declarations starting with '{id}'\"</span>\n<span class=\"w\">    </span><span class=\"bp\">|</span><span class=\"w\"> </span><span class=\"n\">n</span><span class=\"w\"> </span><span class=\"bp\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">logInfoAt</span><span class=\"w\"> </span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">m!</span><span class=\"s2\">\"{n} declaration{if n == 1 then \"\" else \"</span><span class=\"n\">s</span><span class=\"s2\">\"} starting with '{id}'\"</span><span class=\"w\"> </span><span class=\"bp\">++</span>\n<span class=\"w\">                      </span><span class=\"o\">(</span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">bo</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"w\"> </span><span class=\"n\">sorted</span><span class=\"bp\">.</span><span class=\"n\">size</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">m!</span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">Showing the first {bo}\"</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">++</span>\n<span class=\"w\">                      </span><span class=\"o\">(</span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">bostx</span><span class=\"bp\">.</span><span class=\"n\">isNone</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"n\">m!</span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">(you can modify the default bound of 5000 using `#autocomplete {id} bound`)\"</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"s2\">\"\"</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">++</span>\n<span class=\"w\">                      </span><span class=\"o\">(</span><span class=\"n\">indentD</span><span class=\"w\"> </span><span class=\"n\">m!</span><span class=\"s2\">\"</span><span class=\"se\">\\n</span><span class=\"s2\">{sa}\"</span><span class=\"o\">)</span>\n\n<span class=\"c\">/-</span>\n<span class=\"cm\">4008 declarations starting with 'Nat'</span>\n<span class=\"cm\">Showing the first 4</span>\n\n<span class=\"cm\">  [Nat, NatCast, NatOrdinal, NatPow]</span>\n<span class=\"cm\">-/</span>\n<span class=\"bp\">#</span><span class=\"n\">autocomplete</span><span class=\"w\"> </span><span class=\"n\">Nat</span><span class=\"w\"> </span><span class=\"mi\">4</span>\n</code></pre></div>",
        "id": 459662776,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1723280537
    },
    {
        "content": "<p>Nice. The one Claude generated no longer works for me, and IIRC, the output was rather ugly and overwhelming anyway.</p>",
        "id": 459723525,
        "sender_full_name": "Michal Wallace (tangentstorm)",
        "timestamp": 1723307734
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"707242\">Ralf Stephan</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20newbie.20questions/near/457317186\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"638715\">Adomas Baliuka</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20newbie.20questions/near/457279022\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"466334\">Shreyas Srinivas</span> <a href=\"#narrow/stream/113489-new-members/topic/Understanding.20newbie.20questions/near/457210597\">said</a>:</p>\n<blockquote>\n<p>The <code>set_option</code> stuff is not easily found in documentation</p>\n</blockquote>\n<p>Can you provide a link? I haven't been able to find it yet.</p>\n</blockquote>\n<p><code>#help option</code></p>\n</blockquote>\n<p>Sorry for digging this out so late, but I don't understand how to use it. I just get</p>\n<blockquote>\n<p>unexpected token '#'; expected command</p>\n</blockquote>",
        "id": 461957249,
        "sender_full_name": "Adomas Baliuka",
        "timestamp": 1723496523
    },
    {
        "content": "<p><code>import Mathlib.Tactic</code>?</p>",
        "id": 461967377,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1723500288
    }
]