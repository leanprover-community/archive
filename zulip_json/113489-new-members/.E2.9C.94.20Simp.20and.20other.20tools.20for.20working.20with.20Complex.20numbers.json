[
    {
        "content": "<p>I'm finding that Lean seems to struggle to understand basic facts about complex numbers when I'm doing some proofs.</p>\n<p><code>def ifmwe : (if Complex.mk 0 0.5 = 0 then 0 else 1) = 1</code></p>\n<p>I'm seeing cases like this one where the if clause should definitely be false but simp won't understand that, and I can't figure out how to show lean that 0 + 0.5 i is not equal to 0.</p>\n<p>if I simp this expression it turns into the ~{re:=0, im:= 0.5} = 0, but other than introducing a hypothesis, I'm not sure how to proceed. I've used Complex.ext in other cases, but that doesn't seem to help me when I'm working in a hypothesis instead of the conclusion.</p>\n<p>Is there a better approach to working with these complex numbers, how can I get simp to understand this blatant false statements?</p>",
        "id": 519155073,
        "sender_full_name": "Anthony Peterson",
        "timestamp": 1747670204
    },
    {
        "content": "<p>I don't think that it is the <code>if</code> that is necessarily the issue here:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Complex</span>\n\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"bp\">/</span><span class=\"w\"> </span><span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">I</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">then</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">simp</span>\n</code></pre></div>",
        "id": 519155915,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747670407
    },
    {
        "content": "<p>Is that resolved on your end? I took the same example and it gets stuck at the same point comparing with 0</p>\n<p>Also, I had to add Complex.I or VS code wanted to add a type parameter I</p>",
        "id": 519157146,
        "sender_full_name": "Anthony Peterson",
        "timestamp": 1747670682
    },
    {
        "content": "<p>Generally you're not supposed to use <code>Complex.mk</code></p>",
        "id": 519157523,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747670780
    },
    {
        "content": "<p>And instead write <code>0 + 0.5 * Complex.I</code> or similar</p>",
        "id": 519157595,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1747670798
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"697725\">Anthony Peterson</span> <a href=\"#narrow/channel/113489-new-members/topic/Simp.20and.20other.20tools.20for.20working.20with.20Complex.20numbers/near/519157146\">said</a>:</p>\n<blockquote>\n<p>Is that resolved on your end? I took the same example and it gets stuck at the same point comparing with 0</p>\n<p>Also, I had to add Complex.I or VS code wanted to add a type parameter I</p>\n</blockquote>\n<p>The code that I sent works with no errors in the server (i.e., clicking on the <code>View in Lean4 playground</code> button, when you hover over the code).</p>",
        "id": 519157976,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747670896
    },
    {
        "content": "<p>Notice also that I added <code>open Complex</code>, so I could write <code>I</code> instead of <code>Complex.I</code>.</p>",
        "id": 519158202,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747670951
    },
    {
        "content": "<p>Ah ok. I think you two have resolved my issues. I was originally writing {re := 0, im := 0.5} but that didn't work sometimes and then I tried mk. I will do the + format.</p>",
        "id": 519164707,
        "sender_full_name": "Anthony Peterson",
        "timestamp": 1747672538
    },
    {
        "content": "<p>Ok this is dumb on my part, but I'm still getting stuck with the goal state:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"bp\">**</span><span class=\"n\">H</span><span class=\"bp\">**</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"mf\">0.5</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"mi\">0</span>\n<span class=\"bp\">**⊢**</span><span class=\"w\"> </span><span class=\"n\">False</span>\n</code></pre></div>\n<p>I tried contradiction but it didn't work.</p>",
        "id": 519168118,
        "sender_full_name": "Anthony Peterson",
        "timestamp": 1747673345
    },
    {
        "content": "<p><code>norm_num</code> may be able to take care of that.</p>",
        "id": 519169032,
        "sender_full_name": "Damiano Testa",
        "timestamp": 1747673573
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 519169150,
        "sender_full_name": "Anthony Peterson",
        "timestamp": 1747673606
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"697725\">Anthony Peterson</span> has marked this topic as resolved.</p>",
        "id": 519169200,
        "sender_full_name": "Notification Bot",
        "timestamp": 1747673620
    }
]