[
    {
        "content": "<p>Is this true or am I misinterpreting what Basis.toMatrix does?<br>\n I can't find this in mathlib and I feel like it should be there if it is true</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n\n<span class=\"kn\">open</span><span class=\"w\"> </span><span class=\"n\">Matrix</span>\n\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">foo</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_1</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Fintype</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"n\">u_3</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">CommSemiring</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Module</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">)]</span>\n<span class=\"w\">  </span><span class=\"o\">(</span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">b'</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Basis</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">ι</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">R</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">ι</span><span class=\"o\">):</span>\n<span class=\"w\">   </span><span class=\"n\">b</span><span class=\"bp\">.</span><span class=\"n\">toMatrix</span><span class=\"w\"> </span><span class=\"n\">b'</span><span class=\"w\"> </span><span class=\"bp\">*ᵥ</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">b'</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"n\">i</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"gr\">sorry</span>\n</code></pre></div>",
        "id": 490671259,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735043476
    },
    {
        "content": "<p>This doesn't look true to me</p>",
        "id": 490682236,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1735050539
    },
    {
        "content": "<p>Maybe it's true for an orthonormal basis, or when one or both bases are Pi.basisFun</p>",
        "id": 490682322,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1735050596
    },
    {
        "content": "<p>Hmm, what is the equivalent of the following result in Lean?</p>\n<p>Let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"script\">B</mi></mrow><annotation encoding=\"application/x-tex\">\\mathcal{B}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathcal\" style=\"margin-right:0.03041em;\">B</span></span></span></span>, <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi mathvariant=\"script\">B</mi><mo mathvariant=\"normal\" lspace=\"0em\" rspace=\"0em\">′</mo></msup></mrow><annotation encoding=\"application/x-tex\">\\mathcal{B}&#x27;</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7519em;\"></span><span class=\"mord\"><span class=\"mord mathcal\" style=\"margin-right:0.03041em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7519em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">′</span></span></span></span></span></span></span></span></span></span></span></span> be indexed basis of the vector space <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span>, let f be an endomorphism of <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span>, and let <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>v</mi><mo>∈</mo><mi>V</mi></mrow><annotation encoding=\"application/x-tex\">v \\in V</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.5782em;vertical-align:-0.0391em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">∈</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span></span></span></span> then</p>\n<p><span class=\"tex-error\">\\prescript{\\mathcal{B}}{{[f(v)]}} = \\prescript{\\mathcal{B}}{[f]_{\\mathcal{B}&#x27;}}  \\prescript{\\mathcal{B}&#x27;}{[v]}</span></p>\n<p>(apologies, I can't get the Latex to render)</p>\n<p>I thought the above was this result?</p>",
        "id": 490691014,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735056386
    },
    {
        "content": "<p>Something like this should certainly be true</p>",
        "id": 490693099,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735057869
    },
    {
        "content": "<p>Maybe <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Basis.toMatrix_mulVec_repr%3F#doc\">docs#Basis.toMatrix_mulVec_repr?</a></p>",
        "id": 490695443,
        "sender_full_name": "llllvvuu",
        "timestamp": 1735059390
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Basis.toMatrix_mulVec_repr#doc\">docs#Basis.toMatrix_mulVec_repr</a></p>",
        "id": 490696146,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735059833
    },
    {
        "content": "<p>Hmm, strange I could not find this... Thank you</p>\n<p>Currently I get the error \"unknown constant 'Basis.toMatrix_mulVec_repr' \"</p>\n<p>I am importing all of mathlib, have done <code>update lake</code> and tried updating dependencies and so on. I have clicked all buttons known to me.</p>\n<p>It does indeed work in the playground, but when I copy the exact same code to my own project it doesn't recognize it. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span> </p>\n<p>Do any of you recognize this problem?</p>",
        "id": 490699655,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735062496
    },
    {
        "content": "<p>just copied over proof of mathlib for now</p>",
        "id": 490702621,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735064795
    },
    {
        "content": "<p>What version of mathlib is in your <code>lake-manifest.json</code>?</p>",
        "id": 490706992,
        "sender_full_name": "Eric Wieser",
        "timestamp": 1735068072
    },
    {
        "content": "<p>I have the version <code>e3e46c381d49179c3818135c0a888bc69a958de3</code></p>",
        "id": 491515147,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735751999
    },
    {
        "content": "<p>I don't need the theorem above in the end, but I can't access some other theorems that I do definitely need.</p>",
        "id": 491515247,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735752069
    },
    {
        "content": "<p>Is there somewhere I can read about fixing the mathlib dependency?</p>",
        "id": 491515277,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735752101
    },
    {
        "content": "<p>Are you working in mathlib itself or in a project which depends on mathlib?</p>",
        "id": 491515978,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735752773
    },
    {
        "content": "<p>I'm working on a project that depends on mathlib. I.e: made my own repo using <code>Project: Create Project Using Mathlib...</code></p>",
        "id": 491516073,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735752854
    },
    {
        "content": "<p>So use VS Code to \"update dependencies\" but note that this could well break your code as well as updating mathlib. I update the FLT project around once a week.</p>",
        "id": 491516219,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1735753005
    },
    {
        "content": "<p>Ah yes... I remember trying this but getting the nasty error like:</p>\n<p>Cannot update dependency. Command output: trace: ././.lake/packages/mathlib&gt; git fetch --tags --force origin info: leanprover-community/mathlib: updating repository '././.lake/packages/mathlib' to revision '9419c034110d02f83c8cf286f877c624e492e16f' trace: ././.lake/packages/mathlib&gt; git checkout --detach 9419c034110d02f83c8cf286f877c624e492e16f -- trace: stderr: Previous HEAD position was e3e46c381d feat: <code>‖a * b * c‖ ≤ ‖a‖ * ‖b‖ * ‖c‖</code> (<a href=\"https://github.com/leanprover-community/mathlib4/pull/18005\">#18005</a>) HEAD is now at 9419c03411 chore(CategoryTheory/Adjunction/Opposites): redefine the opposite of an adjunction (<a href=\"https://github.com/leanprover-community/mathlib4/pull/20375\">#20375</a>) trace: ././.lake/packages/batteries&gt; git fetch --tags --force origin info: batteries: updating repository '././.lake/packages/batteries' to revision 'f007bfe46ea8fb801ec907df9ab540054abcc5fd' trace: ././.lake/packages/batteries&gt; git checkout --detach f007bfe46ea8fb801ec907df9ab540054abcc5fd -- trace: stderr: Previous HEAD position was dd6b1019 chore: rename List.modifyNth-&gt;modify and insertNth-&gt;insertIdx (<a href=\"https://github.com/leanprover-community/mathlib4/pull/1003\">#1003</a>) HEAD is now at f...</p>",
        "id": 491516995,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735753767
    },
    {
        "content": "<p>where the process proceeds to die starts at:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"o\">[</span><span class=\"n\">Error</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"w\"> </span><span class=\"mi\">3</span><span class=\"o\">:</span><span class=\"mi\">08</span><span class=\"o\">:</span><span class=\"mi\">00</span><span class=\"w\"> </span><span class=\"n\">PM</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"n\">Request</span><span class=\"w\"> </span><span class=\"n\">textDocument</span><span class=\"bp\">/</span><span class=\"n\">completion</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"bp\">.</span>\n<span class=\"w\">  </span><span class=\"n\">Message</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">deterministic</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">timeout</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"ss\">`whnf</span><span class=\"bp\">`</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">maximum</span><span class=\"w\"> </span><span class=\"n\">number</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">heartbeats</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"mi\">200000</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">been</span><span class=\"w\"> </span><span class=\"n\">reached</span>\n<span class=\"n\">Use</span><span class=\"w\"> </span><span class=\"ss\">`set_option</span><span class=\"w\"> </span><span class=\"n\">maxHeartbeats</span><span class=\"w\"> </span><span class=\"bp\">&lt;</span><span class=\"n\">num</span><span class=\"bp\">&gt;`</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">set</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">limit</span><span class=\"bp\">.</span><span class=\"o\">(</span><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">MessageData</span><span class=\"bp\">.</span><span class=\"n\">lazy</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">missing</span><span class=\"w\"> </span><span class=\"n\">context</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"n\">Code</span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"bp\">-</span><span class=\"mi\">32603</span>\n</code></pre></div>",
        "id": 491517171,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735753920
    },
    {
        "content": "<p>Is it a bad idea to set <code>maxHeartbeats</code> to 0?</p>",
        "id": 491517299,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735754037
    },
    {
        "content": "<p>I'll let you know how this goes <span aria-label=\"clown\" class=\"emoji emoji-1f921\" role=\"img\" title=\"clown\">:clown:</span></p>",
        "id": 491517363,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735754100
    },
    {
        "content": "<p>Still fails : (</p>",
        "id": 491519356,
        "sender_full_name": "Alex Brodbelt",
        "timestamp": 1735756183
    },
    {
        "content": "<p>Try moving the <code>.lake</code> folder somewhere else (or deleting it) and then run the update command again</p>",
        "id": 491522028,
        "sender_full_name": "Ruben Van de Velde",
        "timestamp": 1735758833
    }
]