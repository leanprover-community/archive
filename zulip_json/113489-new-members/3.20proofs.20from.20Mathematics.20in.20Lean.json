[
    {
        "content": "<p>Used <code>▸</code>,   <code>λ</code> , and a bunch of docs.  I am now working on <em>Mathematics in Lean</em> examples (recommendation from <span class=\"user-mention\" data-user-id=\"690858\">@Daniel Weber</span> - thank you, the book is great!). </p>\n<p>How would you improve those proofs?</p>\n<div class=\"spoiler-block\"><div class=\"spoiler-header\">\n<p>3 proofs</p>\n</div><div class=\"spoiler-content\" aria-hidden=\"true\">\n<div class=\"codehilite\"><pre><span></span><code>import Mathlib\n\ntheorem my_lemma3 :\n    ∀ {x y ε : ℝ}, 0 &lt; ε → ε ≤ 1 → |x| &lt; ε → |y| &lt; ε → |x * y| &lt; ε := by\n  intros x y ε epos ele1 xlt ylt\n  have h1 : |x * y| = |x| * |y| := abs_mul x y\n  have hprod_lt : |x| * |y| &lt; ε * ε := by\n    apply mul_lt_mul&#39;&#39; xlt ylt (abs_nonneg x) (abs_nonneg y)\n  have hε_sq_le_ε : ε * ε ≤ ε := by\n    calc\n      ε * ε ≤ ε * 1 := mul_le_mul_of_nonneg_left ele1 (le_of_lt epos)\n      _ = ε := mul_one ε\n  have h : |x| * |y| &lt; ε := hprod_lt.trans_le hε_sq_le_ε\n  exact h1 ▸ h\n\nexample {α : Type} {r s t : Set α} : r ⊆ s → s ⊆ t → r ⊆ t :=\n  λ (hr : r ⊆ s) (hs : s ⊆ t) (x : α) (hx : x ∈ r) =&gt; hs (hr hx)\n\nexample (injg : Function.Injective g) (injf : Function.Injective f) : Function.Injective (g ∘ f) := by\n  intros x y h\n  apply injf\n  apply injg h\n</code></pre></div>\n</div></div>",
        "id": 484518995,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732629237
    },
    {
        "content": "<p>\"improve\" by what metric? Readability? Length-minimisation? adherence to code standards?</p>",
        "id": 484524199,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732630636
    },
    {
        "content": "<p>Any improvements and suggestions are welcome. I'd love my proofs to:</p>\n<ol>\n<li>be more concise, but readable at the same time</li>\n<li>adhere to code standards, and be highly reusable</li>\n</ol>\n<p>Any best practices advise is welcome too. (I finished <em>The Mechanics..</em>, and hope to soon finish <em>Mathematics in Lean</em>, but I want to do it the <em>slow</em> way, and learn as much as possible).</p>",
        "id": 484527091,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732631443
    },
    {
        "content": "<p>In my experience, conciceness and readability pull in two different directions. And what does reusability mean in the context of proofs? All proofs of a proposition are equal and are \"erased at runtime\" (so I've heard, I have no idea what I'm talking about here).</p>",
        "id": 484529192,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732632009
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">autoImplicit</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"c1\">-- far more readable</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Assume r ⊆ s and s ⊆ t</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- We need to prove r ⊆ t, i.e., for all x, if x ∈ r then x ∈ t.</span>\n<span class=\"w\">  </span><span class=\"c1\">-- So assume x ∈ r is arbitrary</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Because r ⊆ s we know x ∈ s</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hr</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Because s ⊆ t we deduce x ∈ t</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">  </span><span class=\"c1\">-- and this was what we wanted to prove</span>\n<span class=\"w\">  </span><span class=\"n\">assumption</span>\n\n<span class=\"c1\">-- far more concise</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">injg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">injf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">injf</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">injg</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>Your last two examples: I can rewrite the first to be readable like the second, or the second to be concise like the first.</p>",
        "id": 484530055,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732632253
    },
    {
        "content": "<p>I could be even more concise by using <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>λ</mi></mrow><annotation encoding=\"application/x-tex\">\\lambda</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">λ</span></span></span></span> instead of <code>fun</code> but code standards prefer <code>fun</code> so this would be even less readable.</p>",
        "id": 484530287,
        "sender_full_name": "Kevin Buzzard",
        "timestamp": 1732632322
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"110038\">Kevin Buzzard</span> <a href=\"#narrow/channel/113489-new-members/topic/3.20proofs.20from.20Mathematics.20in.20Lean/near/484530055\">schrieb</a>:</p>\n<blockquote>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">set_option</span><span class=\"w\"> </span><span class=\"n\">autoImplicit</span><span class=\"w\"> </span><span class=\"n\">true</span>\n\n<span class=\"c1\">-- far more readable</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">α</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Set</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"bp\">→</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Assume r ⊆ s and s ⊆ t</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hr</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">⊆</span><span class=\"w\"> </span><span class=\"n\">t</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- We need to prove r ⊆ t, i.e., for all x, if x ∈ r then x ∈ t.</span>\n<span class=\"w\">  </span><span class=\"c1\">-- So assume x ∈ r is arbitrary</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">α</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">hx</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"o\">)</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Because r ⊆ s we know x ∈ s</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hr</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">  </span><span class=\"c1\">-- Because s ⊆ t we deduce x ∈ t</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">hs</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">  </span><span class=\"c1\">-- and this was what we wanted to prove</span>\n<span class=\"w\">  </span><span class=\"n\">assumption</span>\n\n<span class=\"c1\">-- far more concise</span>\n<span class=\"kn\">example</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">injg</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">injf</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Function</span><span class=\"bp\">.</span><span class=\"n\">Injective</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">∘</span><span class=\"w\"> </span><span class=\"n\">f</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"o\">:=</span>\n<span class=\"w\">  </span><span class=\"k\">fun</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">↦</span><span class=\"w\"> </span><span class=\"n\">injf</span><span class=\"w\"> </span><span class=\"bp\">&lt;|</span><span class=\"w\"> </span><span class=\"n\">injg</span><span class=\"w\"> </span><span class=\"n\">h</span>\n</code></pre></div>\n<p>Your last two examples: I can rewrite the first to be readable like the second, or the second to be concise like the first.</p>\n</blockquote>\n<p>Beautiful! Also, I am always forgetting about pipelines - <code>&lt;|</code> <span aria-label=\"man facepalming\" class=\"emoji emoji-1f926-200d-2642\" role=\"img\" title=\"man facepalming\">:man_facepalming:</span></p>",
        "id": 484530375,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732632344
    },
    {
        "content": "<p>Where can I find this document?</p>",
        "id": 484530572,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1732632397
    },
    {
        "content": "<p><em>Reusability</em> - I want to start developing tactics, and also make sure that others will be able to re-use them in the most efficient way (find them quickly, understand them quickly, apply them quickly).</p>\n<p>Currently, I only know about the <code>simp</code> tag, and autocompletion. I'll read <em>Metaprogramming in Lean 4</em> soon, and then will be able to say more.</p>",
        "id": 484531883,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732632777
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/113489-new-members/topic/3.20proofs.20from.20Mathematics.20in.20Lean/near/484530572\">schrieb</a>:</p>\n<blockquote>\n<p>Where can I find this document?</p>\n</blockquote>\n<p>Here's the book (it's magical in many ways): <a href=\"https://leanprover-community.github.io/mathematics_in_lean/\">https://leanprover-community.github.io/mathematics_in_lean/</a></p>",
        "id": 484532023,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732632820
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"110038\">@Kevin Buzzard</span> As for the comments in the proof - I prefer fewer comments (and only comment the critical parts). My assumption is that, if someone really cares to understand, they'll learn how to read code.</p>\n<p>The pipeline line in the second proof is awesome (I feel like it'd be awesome to even skip <code>injf</code> and <code>injg</code>  (not sure if possible), and get a smart tactic to understand it).</p>",
        "id": 484532744,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732633029
    },
    {
        "content": "<p>Ah you are the author of that, great. Loved reading it.</p>",
        "id": 484543498,
        "sender_full_name": "metakuntyyy",
        "timestamp": 1732635891
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"725717\">metakuntyyy</span> <a href=\"#narrow/channel/113489-new-members/topic/3.20proofs.20from.20Mathematics.20in.20Lean/near/484543498\">schrieb</a>:</p>\n<blockquote>\n<p>Ah you are the author of that, great. Loved reading it.</p>\n</blockquote>\n<p>I'm not an author of that book. I am just reading that book. It's been recommended to me too.</p>",
        "id": 484543813,
        "sender_full_name": "Michael Bucko",
        "timestamp": 1732635984
    }
]