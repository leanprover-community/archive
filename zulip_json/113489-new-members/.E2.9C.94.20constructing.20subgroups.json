[
    {
        "content": "<p>What is the function called for constructing subgroups?</p>",
        "id": 511892239,
        "sender_full_name": "亚历山大大帝",
        "timestamp": 1744537023
    },
    {
        "content": "<p><a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Subgroup.mk#doc\">docs#Subgroup.mk</a> ? although there is a more convenient syntax with curly braces</p>",
        "id": 511892955,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1744537690
    },
    {
        "content": "<p>What function can be used to construct a Subgroup with an element s of type group D?</p>",
        "id": 511894814,
        "sender_full_name": "亚历山大大帝",
        "timestamp": 1744539348
    },
    {
        "content": "<p>i'm not sure what you mean by that. could you write a <a href=\"https://leanprover-community.github.io/mwe.html\">#mwe</a>? (it's a link)</p>",
        "id": 511895522,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1744539860
    },
    {
        "content": "<p><a href=\"/user_uploads/3121/IlCi6wXPtJwVNeRchtYAHYhp/Lean4WebDownload-3.lean\">Lean4WebDownload (3).lean</a><br>\n<code>Is it like this? The code attempts to construct a Subgroup with an element s of type D. However, Subgroup.mk actually requires a parameter of type Submonoid D, that is, a submonoid, rather than a single element. There is always an error reported.</code></p>",
        "id": 511896457,
        "sender_full_name": "亚历山大大帝",
        "timestamp": 1744540558
    },
    {
        "content": "<p>posting it like so:</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">]</span><span class=\"w\">  </span><span class=\"c1\">-- 必须声明 D 是群</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\">               </span><span class=\"c1\">-- r, s 是群元素</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">normalizer_eq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">centralizer</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"bp\">↥</span><span class=\"o\">(</span><span class=\"bp\">⟨</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">^</span><span class=\"mi\">4</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">))</span><span class=\"w\"> </span><span class=\"o\">)</span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">r</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">ext</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"c1\">-- 正向证明：若 g 在正规化子中，则 g 必须满足特定条件</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hg</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 根据正规化子的定义，g 必须与子群 ⟨s, r^4⟩ 中的元素交换</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">^</span><span class=\"mi\">4</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">mul_mem</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">mul_mem</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">hg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">inv_mem</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">hg</span><span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">^</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"bp\">⟨</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">^</span><span class=\"mi\">4</span><span class=\"bp\">⟩</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">mul_mem</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">mul_mem</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">hg</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">inv_mem</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"w\"> </span><span class=\"n\">hg</span><span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 通过分析旋转和反射元素的共轭作用，得出 g 必须由 r^2 和 s 生成</span>\n<span class=\"w\">    </span><span class=\"n\">cases'</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"k\">with</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r_inv_pow</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r_inv_pow</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"c1\">-- 反向证明：若 g 由 r^2 和 s 生成，则 g 在正规化子中</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hg</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 根据生成元的性质，验证所有生成元的共轭作用保持子群不变</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">mem_centralizer_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hg</span>\n<span class=\"w\">    </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r_inv_pow</span><span class=\"o\">]</span>\n</code></pre></div>\n<p>should be fine</p>",
        "id": 511897740,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1744541735
    },
    {
        "content": "<p>i think you're looking for <a href=\"https://leanprover-community.github.io/mathlib4_docs/find/?pattern=Subgroup.closure#doc\">docs#Subgroup.closure</a></p>",
        "id": 511897868,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1744541854
    },
    {
        "content": "<p>although even at that point, i think you need to define <code>D</code>, rather than assume <code>D</code> is any group</p>",
        "id": 511897960,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1744541937
    },
    {
        "content": "<p>since i'm guessing you're intending for <code>D</code> to be some dihedral group?</p>",
        "id": 511897981,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1744541960
    },
    {
        "content": "<p>also, you keep writing <code>⟨s, r^4⟩</code> to mean \"the subgroup generated by <code>s</code> and <code>r^4</code>\", however these brackets are used in lean for anonymous constructor application. The spelling in lean would be <code>Subgroup.closure {s,r^4}</code></p>",
        "id": 511898235,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1744542165
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 511901851,
        "sender_full_name": "亚历山大大帝",
        "timestamp": 1744545244
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 511902149,
        "sender_full_name": "亚历山大大帝",
        "timestamp": 1744545532
    },
    {
        "content": "<p>How to solve this error: The error message indicates that you are trying to use an item of type <code>s ∈ Subgroup.closure {s, r ^ 4} ↔ g * s * g⁻¹ ∈ Subgroup.closure {s, r ^ 4}</code> as a function, while Lean expects a function here.</p>\n<div class=\"codehilite\" data-code-language=\"Python\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"nn\">Mathlib</span>\n<span class=\"o\">--</span> <span class=\"n\">声明</span> <span class=\"n\">D</span> <span class=\"n\">是群</span><span class=\"err\">（</span><span class=\"n\">关键修复步骤</span><span class=\"err\">）</span>\n<span class=\"n\">variable</span> <span class=\"p\">{</span><span class=\"n\">D</span> <span class=\"p\">:</span> <span class=\"n\">Type</span> <span class=\"n\">_</span><span class=\"p\">}</span> <span class=\"p\">[</span><span class=\"n\">Group</span> <span class=\"n\">D</span><span class=\"p\">]</span>  <span class=\"o\">--</span> <span class=\"n\">添加</span> <span class=\"p\">[</span><span class=\"n\">Group</span> <span class=\"n\">D</span><span class=\"p\">]</span> <span class=\"n\">类型类实例</span>\n<span class=\"n\">variable</span> <span class=\"p\">(</span><span class=\"n\">s</span> <span class=\"n\">r</span> <span class=\"p\">:</span> <span class=\"n\">D</span><span class=\"p\">)</span>  <span class=\"o\">--</span> <span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">r</span> <span class=\"n\">是群</span> <span class=\"n\">D</span> <span class=\"n\">中的元素</span>\n<span class=\"n\">lemma</span> <span class=\"n\">normalizer_eq</span> <span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">closure</span> <span class=\"p\">{</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">r</span><span class=\"o\">^</span><span class=\"mi\">4</span><span class=\"p\">})</span><span class=\"o\">.</span><span class=\"n\">normalizer</span> <span class=\"o\">=</span> <span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">closure</span> <span class=\"p\">{</span><span class=\"n\">r</span><span class=\"o\">^</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">s</span><span class=\"p\">}</span> <span class=\"o\">:=</span> <span class=\"n\">by</span>\n  <span class=\"n\">apply</span> <span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">ext</span>\n  <span class=\"n\">intro</span> <span class=\"n\">g</span>\n  <span class=\"n\">constructor</span>\n  <span class=\"o\">--</span> <span class=\"n\">正向证明</span><span class=\"err\">：</span><span class=\"n\">若</span> <span class=\"n\">g</span> <span class=\"n\">在正规化子中</span><span class=\"err\">，</span><span class=\"n\">则</span> <span class=\"n\">g</span> <span class=\"n\">必须属于</span> <span class=\"err\">⟨</span><span class=\"n\">r</span><span class=\"o\">^</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">s</span><span class=\"err\">⟩</span>\n  <span class=\"err\">·</span> <span class=\"n\">intro</span> <span class=\"n\">hg</span>\n    <span class=\"o\">--</span> <span class=\"n\">使用正规化子的定义验证共轭作用保持子群元素不变</span>\n    <span class=\"n\">have</span> <span class=\"n\">h1</span> <span class=\"p\">:</span> <span class=\"n\">g</span> <span class=\"o\">*</span> <span class=\"n\">s</span> <span class=\"o\">*</span> <span class=\"n\">g</span><span class=\"err\">⁻¹</span> <span class=\"err\">∈</span> <span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">closure</span> <span class=\"p\">{</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">r</span><span class=\"o\">^</span><span class=\"mi\">4</span><span class=\"p\">}</span> <span class=\"o\">:=</span> <span class=\"n\">by</span>\n      <span class=\"n\">rw</span> <span class=\"p\">[</span><span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">mem_normalizer_iff</span><span class=\"p\">]</span> <span class=\"n\">at</span> <span class=\"n\">hg</span>\n      <span class=\"n\">simpa</span> <span class=\"p\">[</span><span class=\"n\">mul_assoc</span><span class=\"p\">]</span> <span class=\"n\">using</span> <span class=\"n\">hg</span> <span class=\"n\">s</span> <span class=\"p\">(</span><span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">subset_closure</span> <span class=\"p\">(</span><span class=\"n\">by</span> <span class=\"n\">simp</span><span class=\"p\">))</span>\n    <span class=\"n\">have</span> <span class=\"n\">h2</span> <span class=\"p\">:</span> <span class=\"n\">g</span> <span class=\"o\">*</span> <span class=\"n\">r</span><span class=\"o\">^</span><span class=\"mi\">4</span> <span class=\"o\">*</span> <span class=\"n\">g</span><span class=\"err\">⁻¹</span> <span class=\"err\">∈</span> <span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">closure</span> <span class=\"p\">{</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">r</span><span class=\"o\">^</span><span class=\"mi\">4</span><span class=\"p\">}</span> <span class=\"o\">:=</span> <span class=\"n\">by</span>\n      <span class=\"n\">rw</span> <span class=\"p\">[</span><span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">mem_normalizer_iff</span><span class=\"p\">]</span> <span class=\"n\">at</span> <span class=\"n\">hg</span>\n      <span class=\"n\">simpa</span> <span class=\"p\">[</span><span class=\"n\">pow_mul</span><span class=\"p\">,</span> <span class=\"n\">mul_inv_rev</span><span class=\"p\">]</span> <span class=\"n\">using</span> <span class=\"n\">hg</span> <span class=\"p\">(</span><span class=\"n\">r</span><span class=\"o\">^</span><span class=\"mi\">4</span><span class=\"p\">)</span> <span class=\"p\">(</span><span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">subset_closure</span> <span class=\"p\">(</span><span class=\"n\">by</span> <span class=\"n\">simp</span><span class=\"p\">))</span>\n    <span class=\"o\">--</span> <span class=\"n\">应用</span> <span class=\"n\">closure_induction</span> <span class=\"n\">处理子群成员</span>\n    <span class=\"n\">apply</span> <span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">closure_induction</span> <span class=\"n\">hg</span>\n    <span class=\"o\">--</span> <span class=\"n\">处理生成元</span> <span class=\"n\">r</span><span class=\"o\">^</span><span class=\"mi\">2</span>\n    <span class=\"err\">·</span> <span class=\"n\">simp_all</span> <span class=\"p\">[</span><span class=\"n\">pow_mul</span><span class=\"p\">,</span> <span class=\"n\">mul_assoc</span><span class=\"p\">,</span> <span class=\"n\">mul_inv_rev</span><span class=\"p\">,</span> <span class=\"n\">r_inv_pow</span><span class=\"p\">]</span>\n    <span class=\"o\">--</span> <span class=\"n\">处理生成元</span> <span class=\"n\">s</span>\n    <span class=\"err\">·</span> <span class=\"n\">simp_all</span> <span class=\"p\">[</span><span class=\"n\">pow_mul</span><span class=\"p\">,</span> <span class=\"n\">mul_assoc</span><span class=\"p\">,</span> <span class=\"n\">mul_inv_rev</span><span class=\"p\">,</span> <span class=\"n\">r_inv_pow</span><span class=\"p\">]</span>\n    <span class=\"o\">--</span> <span class=\"n\">处理闭合性</span><span class=\"err\">：</span><span class=\"n\">乘积和逆元</span>\n    <span class=\"n\">all_goals</span> <span class=\"n\">simp_all</span> <span class=\"p\">[</span><span class=\"n\">mul_assoc</span><span class=\"p\">,</span> <span class=\"n\">pow_mul</span><span class=\"p\">,</span> <span class=\"n\">mul_inv_rev</span><span class=\"p\">,</span> <span class=\"n\">r_inv_pow</span><span class=\"p\">]</span>\n  <span class=\"o\">--</span> <span class=\"n\">反向证明</span><span class=\"err\">：</span><span class=\"n\">若</span> <span class=\"n\">g</span> <span class=\"n\">属于</span> <span class=\"err\">⟨</span><span class=\"n\">r</span><span class=\"o\">^</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">s</span><span class=\"err\">⟩，</span><span class=\"n\">则</span> <span class=\"n\">g</span> <span class=\"n\">在正规化子中</span>\n  <span class=\"err\">·</span> <span class=\"n\">intro</span> <span class=\"n\">hg</span>\n    <span class=\"n\">rw</span> <span class=\"p\">[</span><span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">mem_normalizer_iff</span><span class=\"p\">]</span>\n    <span class=\"n\">intro</span> <span class=\"n\">x</span> <span class=\"n\">hx</span>\n    <span class=\"o\">--</span> <span class=\"n\">应用</span> <span class=\"n\">closure_induction</span> <span class=\"n\">处理子群成员</span>\n    <span class=\"n\">apply</span> <span class=\"n\">Subgroup</span><span class=\"o\">.</span><span class=\"n\">closure_induction</span> <span class=\"n\">hx</span>\n    <span class=\"o\">--</span> <span class=\"n\">处理生成元</span> <span class=\"n\">s</span>\n    <span class=\"err\">·</span> <span class=\"n\">simp_all</span> <span class=\"p\">[</span><span class=\"n\">pow_mul</span><span class=\"p\">,</span> <span class=\"n\">mul_assoc</span><span class=\"p\">,</span> <span class=\"n\">mul_inv_rev</span><span class=\"p\">,</span> <span class=\"n\">r_inv_pow</span><span class=\"p\">]</span>\n    <span class=\"o\">--</span> <span class=\"n\">处理生成元</span> <span class=\"n\">r</span><span class=\"o\">^</span><span class=\"mi\">4</span>\n    <span class=\"err\">·</span> <span class=\"n\">simp_all</span> <span class=\"p\">[</span><span class=\"n\">pow_mul</span><span class=\"p\">,</span> <span class=\"n\">mul_assoc</span><span class=\"p\">,</span> <span class=\"n\">mul_inv_rev</span><span class=\"p\">,</span> <span class=\"n\">r_inv_pow</span><span class=\"p\">]</span>\n    <span class=\"o\">--</span> <span class=\"n\">处理闭合性</span><span class=\"err\">：</span><span class=\"n\">乘积和逆元</span>\n    <span class=\"n\">all_goals</span> <span class=\"n\">simp_all</span> <span class=\"p\">[</span><span class=\"n\">mul_assoc</span><span class=\"p\">,</span> <span class=\"n\">pow_mul</span><span class=\"p\">,</span> <span class=\"n\">mul_inv_rev</span><span class=\"p\">,</span> <span class=\"n\">r_inv_pow</span><span class=\"p\">]</span>\n</code></pre></div>",
        "id": 511903726,
        "sender_full_name": "亚历山大大帝",
        "timestamp": 1744546820
    },
    {
        "content": "<p>there are two possible fixes: either <code>rw [hg]</code> first, or use <code>hg.mp</code> or <code>hg.mpr</code> (where mp and mpr refer to modus ponens/ modus ponens reverse, respectively)</p>",
        "id": 511904057,
        "sender_full_name": "Edward van de Meent",
        "timestamp": 1744547124
    },
    {
        "content": "<p>Is it wrong with the way I correct it?A new error has occurred.</p>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"n\">invalid</span><span class=\"w\"> </span><span class=\"n\">field</span><span class=\"w\"> </span><span class=\"kn\">notation</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">type</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">of</span><span class=\"w\"> </span><span class=\"n\">the</span><span class=\"w\"> </span><span class=\"n\">form</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"bp\">...</span><span class=\"o\">)</span><span class=\"w\"> </span><span class=\"kn\">where</span><span class=\"w\"> </span><span class=\"n\">C</span><span class=\"w\"> </span><span class=\"n\">is</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">constant</span>\n<span class=\"w\">  </span><span class=\"n\">hg</span>\n<span class=\"n\">has</span><span class=\"w\"> </span><span class=\"n\">type</span>\n<span class=\"w\">  </span><span class=\"bp\">∀</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">),</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"bp\">↔</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">h</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"bp\">^</span><span class=\"w\"> </span><span class=\"mi\">4</span><span class=\"o\">}</span>\n</code></pre></div>\n<div class=\"codehilite\" data-code-language=\"Lean4\"><pre><span></span><code><span class=\"kn\">import</span><span class=\"w\"> </span><span class=\"n\">Mathlib</span>\n<span class=\"c1\">-- 声明 D 是群（关键修复步骤）</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">D</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"kt\">Type</span><span class=\"w\"> </span><span class=\"bp\">_</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Group</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">]</span><span class=\"w\">  </span><span class=\"c1\">-- 添加 [Group D] 类型类实例</span>\n<span class=\"kn\">variable</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">D</span><span class=\"o\">)</span><span class=\"w\">  </span><span class=\"c1\">-- s, r 是群 D 中的元素</span>\n<span class=\"kn\">lemma</span><span class=\"w\"> </span><span class=\"n\">normalizer_eq</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">^</span><span class=\"mi\">4</span><span class=\"o\">})</span><span class=\"bp\">.</span><span class=\"n\">normalizer</span><span class=\"w\"> </span><span class=\"bp\">=</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">r</span><span class=\"bp\">^</span><span class=\"mi\">2</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">  </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">ext</span>\n<span class=\"w\">  </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">g</span>\n<span class=\"w\">  </span><span class=\"n\">constructor</span>\n<span class=\"w\">  </span><span class=\"c1\">-- 正向证明：若 g 在正规化子中，则 g 必须属于 ⟨r^2, s⟩</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hg</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 使用正规化子的定义验证共轭作用保持子群元素不变</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h1</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">^</span><span class=\"mi\">4</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">mem_normalizer_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hg</span>\n<span class=\"w\">      </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">hg</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">subset_closure</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"k\">have</span><span class=\"w\"> </span><span class=\"n\">h2</span><span class=\"w\"> </span><span class=\"o\">:</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">^</span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"bp\">*</span><span class=\"w\"> </span><span class=\"n\">g</span><span class=\"bp\">⁻¹</span><span class=\"w\"> </span><span class=\"bp\">∈</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">closure</span><span class=\"w\"> </span><span class=\"o\">{</span><span class=\"n\">s</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r</span><span class=\"bp\">^</span><span class=\"mi\">4</span><span class=\"o\">}</span><span class=\"w\"> </span><span class=\"o\">:=</span><span class=\"w\"> </span><span class=\"k\">by</span>\n<span class=\"w\">      </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">mem_normalizer_iff</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"k\">at</span><span class=\"w\"> </span><span class=\"n\">hg</span>\n<span class=\"w\">      </span><span class=\"n\">simpa</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_rev</span><span class=\"o\">]</span><span class=\"w\"> </span><span class=\"kn\">using</span><span class=\"w\"> </span><span class=\"n\">hg</span><span class=\"bp\">.</span><span class=\"n\">mp</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">subset_closure</span><span class=\"w\"> </span><span class=\"o\">(</span><span class=\"k\">by</span><span class=\"w\"> </span><span class=\"n\">simp</span><span class=\"o\">))</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 应用 closure_induction 处理子群成员</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">closure_induction</span><span class=\"w\"> </span><span class=\"n\">hg</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 处理生成元 r^2</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r_inv_pow</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 处理生成元 s</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r_inv_pow</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 处理闭合性：乘积和逆元</span>\n<span class=\"w\">    </span><span class=\"n\">all_goals</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r_inv_pow</span><span class=\"o\">]</span>\n<span class=\"w\">  </span><span class=\"c1\">-- 反向证明：若 g 属于 ⟨r^2, s⟩，则 g 在正规化子中</span>\n<span class=\"w\">  </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">hg</span>\n<span class=\"w\">    </span><span class=\"n\">rw</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">mem_normalizer_iff</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"n\">intro</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 应用 closure_induction 处理子群成员</span>\n<span class=\"w\">    </span><span class=\"n\">apply</span><span class=\"w\"> </span><span class=\"n\">Subgroup</span><span class=\"bp\">.</span><span class=\"n\">closure_induction</span><span class=\"w\"> </span><span class=\"n\">hx</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 处理生成元 s</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r_inv_pow</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 处理生成元 r^4</span>\n<span class=\"w\">    </span><span class=\"bp\">·</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r_inv_pow</span><span class=\"o\">]</span>\n<span class=\"w\">    </span><span class=\"c1\">-- 处理闭合性：乘积和逆元</span>\n<span class=\"w\">    </span><span class=\"n\">all_goals</span><span class=\"w\"> </span><span class=\"n\">simp_all</span><span class=\"w\"> </span><span class=\"o\">[</span><span class=\"n\">mul_assoc</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">pow_mul</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">mul_inv_rev</span><span class=\"o\">,</span><span class=\"w\"> </span><span class=\"n\">r_inv_pow</span><span class=\"o\">]</span>\n</code></pre></div>",
        "id": 511905148,
        "sender_full_name": "亚历山大大帝",
        "timestamp": 1744548093
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"898582\">czxczx</span> has marked this topic as resolved.</p>",
        "id": 511928255,
        "sender_full_name": "Notification Bot",
        "timestamp": 1744566745
    }
]